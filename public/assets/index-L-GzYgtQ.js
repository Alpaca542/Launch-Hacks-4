function KM(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function d2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var S0={exports:{}},Ru={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X1;function XM(){if(X1)return Ru;X1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var c=null;if(a!==void 0&&(c=""+a),s.key!==void 0&&(c=""+s.key),"key"in s){a={};for(var u in s)u!=="key"&&(a[u]=s[u])}else a=s;return s=a.ref,{$$typeof:t,type:r,key:c,ref:s!==void 0?s:null,props:a}}return Ru.Fragment=e,Ru.jsx=n,Ru.jsxs=n,Ru}var W1;function WM(){return W1||(W1=1,S0.exports=XM()),S0.exports}var S=WM(),A0={exports:{}},Be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q1;function QM(){if(Q1)return Be;Q1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.iterator;function _(O){return O===null||typeof O!="object"?null:(O=v&&O[v]||O["@@iterator"],typeof O=="function"?O:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,R={};function C(O,Q,ne){this.props=O,this.context=Q,this.refs=R,this.updater=ne||w}C.prototype.isReactComponent={},C.prototype.setState=function(O,Q){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Q,"setState")},C.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function D(){}D.prototype=C.prototype;function z(O,Q,ne){this.props=O,this.context=Q,this.refs=R,this.updater=ne||w}var B=z.prototype=new D;B.constructor=z,T(B,C.prototype),B.isPureReactComponent=!0;var U=Array.isArray,q={H:null,A:null,T:null,S:null,V:null},X=Object.prototype.hasOwnProperty;function I(O,Q,ne,W,re,he){return ne=he.ref,{$$typeof:t,type:O,key:Q,ref:ne!==void 0?ne:null,props:he}}function A(O,Q){return I(O.type,Q,void 0,void 0,void 0,O.props)}function N(O){return typeof O=="object"&&O!==null&&O.$$typeof===t}function H(O){var Q={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ne){return Q[ne]})}var F=/\/+/g;function $(O,Q){return typeof O=="object"&&O!==null&&O.key!=null?H(""+O.key):Q.toString(36)}function k(){}function V(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(k,k):(O.status="pending",O.then(function(Q){O.status==="pending"&&(O.status="fulfilled",O.value=Q)},function(Q){O.status==="pending"&&(O.status="rejected",O.reason=Q)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function K(O,Q,ne,W,re){var he=typeof O;(he==="undefined"||he==="boolean")&&(O=null);var ue=!1;if(O===null)ue=!0;else switch(he){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(O.$$typeof){case t:case e:ue=!0;break;case m:return ue=O._init,K(ue(O._payload),Q,ne,W,re)}}if(ue)return re=re(O),ue=W===""?"."+$(O,0):W,U(re)?(ne="",ue!=null&&(ne=ue.replace(F,"$&/")+"/"),K(re,Q,ne,"",function(Ae){return Ae})):re!=null&&(N(re)&&(re=A(re,ne+(re.key==null||O&&O.key===re.key?"":(""+re.key).replace(F,"$&/")+"/")+ue)),Q.push(re)),1;ue=0;var ve=W===""?".":W+":";if(U(O))for(var _e=0;_e<O.length;_e++)W=O[_e],he=ve+$(W,_e),ue+=K(W,Q,ne,he,re);else if(_e=_(O),typeof _e=="function")for(O=_e.call(O),_e=0;!(W=O.next()).done;)W=W.value,he=ve+$(W,_e++),ue+=K(W,Q,ne,he,re);else if(he==="object"){if(typeof O.then=="function")return K(V(O),Q,ne,W,re);throw Q=String(O),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return ue}function L(O,Q,ne){if(O==null)return O;var W=[],re=0;return K(O,W,"","",function(he){return Q.call(ne,he,re++)}),W}function G(O){if(O._status===-1){var Q=O._result;Q=Q(),Q.then(function(ne){(O._status===0||O._status===-1)&&(O._status=1,O._result=ne)},function(ne){(O._status===0||O._status===-1)&&(O._status=2,O._result=ne)}),O._status===-1&&(O._status=0,O._result=Q)}if(O._status===1)return O._result.default;throw O._result}var ee=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function J(){}return Be.Children={map:L,forEach:function(O,Q,ne){L(O,function(){Q.apply(this,arguments)},ne)},count:function(O){var Q=0;return L(O,function(){Q++}),Q},toArray:function(O){return L(O,function(Q){return Q})||[]},only:function(O){if(!N(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Be.Component=C,Be.Fragment=n,Be.Profiler=s,Be.PureComponent=z,Be.StrictMode=r,Be.Suspense=d,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,Be.__COMPILER_RUNTIME={__proto__:null,c:function(O){return q.H.useMemoCache(O)}},Be.cache=function(O){return function(){return O.apply(null,arguments)}},Be.cloneElement=function(O,Q,ne){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var W=T({},O.props),re=O.key,he=void 0;if(Q!=null)for(ue in Q.ref!==void 0&&(he=void 0),Q.key!==void 0&&(re=""+Q.key),Q)!X.call(Q,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&Q.ref===void 0||(W[ue]=Q[ue]);var ue=arguments.length-2;if(ue===1)W.children=ne;else if(1<ue){for(var ve=Array(ue),_e=0;_e<ue;_e++)ve[_e]=arguments[_e+2];W.children=ve}return I(O.type,re,void 0,void 0,he,W)},Be.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:a,_context:O},O},Be.createElement=function(O,Q,ne){var W,re={},he=null;if(Q!=null)for(W in Q.key!==void 0&&(he=""+Q.key),Q)X.call(Q,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(re[W]=Q[W]);var ue=arguments.length-2;if(ue===1)re.children=ne;else if(1<ue){for(var ve=Array(ue),_e=0;_e<ue;_e++)ve[_e]=arguments[_e+2];re.children=ve}if(O&&O.defaultProps)for(W in ue=O.defaultProps,ue)re[W]===void 0&&(re[W]=ue[W]);return I(O,he,void 0,void 0,null,re)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(O){return{$$typeof:u,render:O}},Be.isValidElement=N,Be.lazy=function(O){return{$$typeof:m,_payload:{_status:-1,_result:O},_init:G}},Be.memo=function(O,Q){return{$$typeof:f,type:O,compare:Q===void 0?null:Q}},Be.startTransition=function(O){var Q=q.T,ne={};q.T=ne;try{var W=O(),re=q.S;re!==null&&re(ne,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(J,ee)}catch(he){ee(he)}finally{q.T=Q}},Be.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},Be.use=function(O){return q.H.use(O)},Be.useActionState=function(O,Q,ne){return q.H.useActionState(O,Q,ne)},Be.useCallback=function(O,Q){return q.H.useCallback(O,Q)},Be.useContext=function(O){return q.H.useContext(O)},Be.useDebugValue=function(){},Be.useDeferredValue=function(O,Q){return q.H.useDeferredValue(O,Q)},Be.useEffect=function(O,Q,ne){var W=q.H;if(typeof ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(O,Q)},Be.useId=function(){return q.H.useId()},Be.useImperativeHandle=function(O,Q,ne){return q.H.useImperativeHandle(O,Q,ne)},Be.useInsertionEffect=function(O,Q){return q.H.useInsertionEffect(O,Q)},Be.useLayoutEffect=function(O,Q){return q.H.useLayoutEffect(O,Q)},Be.useMemo=function(O,Q){return q.H.useMemo(O,Q)},Be.useOptimistic=function(O,Q){return q.H.useOptimistic(O,Q)},Be.useReducer=function(O,Q,ne){return q.H.useReducer(O,Q,ne)},Be.useRef=function(O){return q.H.useRef(O)},Be.useState=function(O){return q.H.useState(O)},Be.useSyncExternalStore=function(O,Q,ne){return q.H.useSyncExternalStore(O,Q,ne)},Be.useTransition=function(){return q.H.useTransition()},Be.version="19.1.0",Be}var Z1;function Ph(){return Z1||(Z1=1,A0.exports=QM()),A0.exports}var M=Ph();const fe=d2(M),ZM=KM({__proto__:null,default:fe},[M]);var R0={exports:{}},Cu={},C0={exports:{}},N0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J1;function JM(){return J1||(J1=1,function(t){function e(L,G){var ee=L.length;L.push(G);e:for(;0<ee;){var J=ee-1>>>1,O=L[J];if(0<s(O,G))L[J]=G,L[ee]=O,ee=J;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var G=L[0],ee=L.pop();if(ee!==G){L[0]=ee;e:for(var J=0,O=L.length,Q=O>>>1;J<Q;){var ne=2*(J+1)-1,W=L[ne],re=ne+1,he=L[re];if(0>s(W,ee))re<O&&0>s(he,W)?(L[J]=he,L[re]=ee,J=re):(L[J]=W,L[ne]=ee,J=ne);else if(re<O&&0>s(he,ee))L[J]=he,L[re]=ee,J=re;else break e}}return G}function s(L,G){var ee=L.sortIndex-G.sortIndex;return ee!==0?ee:L.id-G.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var d=[],f=[],m=1,v=null,_=3,w=!1,T=!1,R=!1,C=!1,D=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function U(L){for(var G=n(f);G!==null;){if(G.callback===null)r(f);else if(G.startTime<=L)r(f),G.sortIndex=G.expirationTime,e(d,G);else break;G=n(f)}}function q(L){if(R=!1,U(L),!T)if(n(d)!==null)T=!0,X||(X=!0,$());else{var G=n(f);G!==null&&K(q,G.startTime-L)}}var X=!1,I=-1,A=5,N=-1;function H(){return C?!0:!(t.unstable_now()-N<A)}function F(){if(C=!1,X){var L=t.unstable_now();N=L;var G=!0;try{e:{T=!1,R&&(R=!1,z(I),I=-1),w=!0;var ee=_;try{t:{for(U(L),v=n(d);v!==null&&!(v.expirationTime>L&&H());){var J=v.callback;if(typeof J=="function"){v.callback=null,_=v.priorityLevel;var O=J(v.expirationTime<=L);if(L=t.unstable_now(),typeof O=="function"){v.callback=O,U(L),G=!0;break t}v===n(d)&&r(d),U(L)}else r(d);v=n(d)}if(v!==null)G=!0;else{var Q=n(f);Q!==null&&K(q,Q.startTime-L),G=!1}}break e}finally{v=null,_=ee,w=!1}G=void 0}}finally{G?$():X=!1}}}var $;if(typeof B=="function")$=function(){B(F)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,V=k.port2;k.port1.onmessage=F,$=function(){V.postMessage(null)}}else $=function(){D(F,0)};function K(L,G){I=D(function(){L(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function(L){switch(_){case 1:case 2:case 3:var G=3;break;default:G=_}var ee=_;_=G;try{return L()}finally{_=ee}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(L,G){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var ee=_;_=L;try{return G()}finally{_=ee}},t.unstable_scheduleCallback=function(L,G,ee){var J=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?J+ee:J):ee=J,L){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=ee+O,L={id:m++,callback:G,priorityLevel:L,startTime:ee,expirationTime:O,sortIndex:-1},ee>J?(L.sortIndex=ee,e(f,L),n(d)===null&&L===n(f)&&(R?(z(I),I=-1):R=!0,K(q,ee-J))):(L.sortIndex=O,e(d,L),T||w||(T=!0,X||(X=!0,$()))),L},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(L){var G=_;return function(){var ee=_;_=G;try{return L.apply(this,arguments)}finally{_=ee}}}}(N0)),N0}var ex;function e4(){return ex||(ex=1,C0.exports=JM()),C0.exports}var I0={exports:{}},Rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tx;function t4(){if(tx)return Rn;tx=1;var t=Ph();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(d,f,m){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:d,containerInfo:f,implementation:m}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Rn.createPortal=function(d,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(d,f,null,m)},Rn.flushSync=function(d){var f=c.T,m=r.p;try{if(c.T=null,r.p=2,d)return d()}finally{c.T=f,r.p=m,r.d.f()}},Rn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(d,f))},Rn.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},Rn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var m=f.as,v=u(m,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?r.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:_,fetchPriority:w}):m==="script"&&r.d.X(d,{crossOrigin:v,integrity:_,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Rn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=u(f.as,f.crossOrigin);r.d.M(d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(d)},Rn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,v=u(m,f.crossOrigin);r.d.L(d,m,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Rn.preloadModule=function(d,f){if(typeof d=="string")if(f){var m=u(f.as,f.crossOrigin);r.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(d)},Rn.requestFormReset=function(d){r.d.r(d)},Rn.unstable_batchedUpdates=function(d,f){return d(f)},Rn.useFormState=function(d,f,m){return c.H.useFormState(d,f,m)},Rn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Rn.version="19.1.0",Rn}var nx;function f2(){if(nx)return I0.exports;nx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),I0.exports=t4(),I0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rx;function n4(){if(rx)return Cu;rx=1;var t=e4(),e=Ph(),n=f2();function r(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function c(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function u(i){if(a(i)!==i)throw Error(r(188))}function d(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(r(188));return o!==i?null:i}for(var l=i,h=o;;){var g=l.return;if(g===null)break;var y=g.alternate;if(y===null){if(h=g.return,h!==null){l=h;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===l)return u(g),i;if(y===h)return u(g),o;y=y.sibling}throw Error(r(188))}if(l.return!==h.return)l=g,h=y;else{for(var x=!1,P=g.child;P;){if(P===l){x=!0,l=g,h=y;break}if(P===h){x=!0,h=g,l=y;break}P=P.sibling}if(!x){for(P=y.child;P;){if(P===l){x=!0,l=y,h=g;break}if(P===h){x=!0,h=y,l=g;break}P=P.sibling}if(!x)throw Error(r(189))}}if(l.alternate!==h)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:o}function f(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=f(i),o!==null)return o;i=i.sibling}return null}var m=Object.assign,v=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),z=Symbol.for("react.consumer"),B=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function $(i){return i===null||typeof i!="object"?null:(i=F&&i[F]||i["@@iterator"],typeof i=="function"?i:null)}var k=Symbol.for("react.client.reference");function V(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===k?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case T:return"Fragment";case C:return"Profiler";case R:return"StrictMode";case q:return"Suspense";case X:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case w:return"Portal";case B:return(i.displayName||"Context")+".Provider";case z:return(i._context.displayName||"Context")+".Consumer";case U:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case I:return o=i.displayName||null,o!==null?o:V(i.type)||"Memo";case A:o=i._payload,i=i._init;try{return V(i(o))}catch{}}return null}var K=Array.isArray,L=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},J=[],O=-1;function Q(i){return{current:i}}function ne(i){0>O||(i.current=J[O],J[O]=null,O--)}function W(i,o){O++,J[O]=i.current,i.current=o}var re=Q(null),he=Q(null),ue=Q(null),ve=Q(null);function _e(i,o){switch(W(ue,o),W(he,i),W(re,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?x1(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=x1(o),i=T1(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ne(re),W(re,i)}function Ae(){ne(re),ne(he),ne(ue)}function Ce(i){i.memoizedState!==null&&W(ve,i);var o=re.current,l=T1(o,i.type);o!==l&&(W(he,i),W(re,l))}function rt(i){he.current===i&&(ne(re),ne(he)),ve.current===i&&(ne(ve),Eu._currentValue=ee)}var Ye=Object.prototype.hasOwnProperty,De=t.unstable_scheduleCallback,Le=t.unstable_cancelCallback,st=t.unstable_shouldYield,Ht=t.unstable_requestPaint,je=t.unstable_now,we=t.unstable_getCurrentPriorityLevel,Nt=t.unstable_ImmediatePriority,Sn=t.unstable_UserBlockingPriority,Zt=t.unstable_NormalPriority,er=t.unstable_LowPriority,Pn=t.unstable_IdlePriority,On=t.log,Hr=t.unstable_setDisableYieldValue,at=null,Ke=null;function Ft(i){if(typeof On=="function"&&Hr(i),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(at,i)}catch{}}var xt=Math.clz32?Math.clz32:on,si=Math.log,$t=Math.LN2;function on(i){return i>>>=0,i===0?32:31-(si(i)/$t|0)|0}var Vn=256,Ln=4194304;function an(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function mn(i,o,l){var h=i.pendingLanes;if(h===0)return 0;var g=0,y=i.suspendedLanes,x=i.pingedLanes;i=i.warmLanes;var P=h&134217727;return P!==0?(h=P&~y,h!==0?g=an(h):(x&=P,x!==0?g=an(x):l||(l=P&~i,l!==0&&(g=an(l))))):(P=h&~y,P!==0?g=an(P):x!==0?g=an(x):l||(l=h&~i,l!==0&&(g=an(l)))),g===0?0:o!==0&&o!==g&&(o&y)===0&&(y=g&-g,l=o&-o,y>=l||y===32&&(l&4194048)!==0)?o:g}function zn(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function ji(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bi(){var i=Vn;return Vn<<=1,(Vn&4194048)===0&&(Vn=256),i}function Fr(){var i=Ln;return Ln<<=1,(Ln&62914560)===0&&(Ln=4194304),i}function tr(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function br(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function nr(i,o,l,h,g,y){var x=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var P=i.entanglements,Y=i.expirationTimes,oe=i.hiddenUpdates;for(l=x&~l;0<l;){var de=31-xt(l),me=1<<de;P[de]=0,Y[de]=-1;var ae=oe[de];if(ae!==null)for(oe[de]=null,de=0;de<ae.length;de++){var le=ae[de];le!==null&&(le.lane&=-536870913)}l&=~me}h!==0&&wr(i,h,0),y!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=y&~(x&~o))}function wr(i,o,l){i.pendingLanes|=o,i.suspendedLanes&=~o;var h=31-xt(o);i.entangledLanes|=o,i.entanglements[h]=i.entanglements[h]|1073741824|l&4194090}function ko(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var h=31-xt(l),g=1<<h;g&o|i[h]&o&&(i[h]|=o),l&=~g}}function oi(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ts(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function ai(){var i=G.p;return i!==0?i:(i=window.event,i===void 0?32:F1(i.type))}function za(i,o){var l=G.p;try{return G.p=i,o()}finally{G.p=l}}var yt=Math.random().toString(36).slice(2),Lt="__reactFiber$"+yt,It="__reactProps$"+yt,qn="__reactContainer$"+yt,Mo="__reactEvents$"+yt,Cc="__reactListeners$"+yt,li="__reactHandles$"+yt,Ua="__reactResources$"+yt,Hi="__reactMarker$"+yt;function ci(i){delete i[Lt],delete i[It],delete i[Mo],delete i[Cc],delete i[li]}function Er(i){var o=i[Lt];if(o)return o;for(var l=i.parentNode;l;){if(o=l[qn]||l[Lt]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=C1(i);i!==null;){if(l=i[Lt])return l;i=C1(i)}return o}i=l,l=i.parentNode}return null}function xr(i){if(i=i[Lt]||i[qn]){var o=i.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return i}return null}function Tr(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(r(33))}function gn(i){var o=i[Ua];return o||(o=i[Ua]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Tt(i){i[Hi]=!0}var Po=new Set,Ss={};function rr(i,o){$r(i,o),$r(i+"Capture",o)}function $r(i,o){for(Ss[i]=o,i=0;i<o.length;i++)Po.add(o[i])}var Oo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ja={},Fi={};function Ba(i){return Ye.call(Fi,i)?!0:Ye.call(ja,i)?!1:Oo.test(i)?Fi[i]=!0:(ja[i]=!0,!1)}function ui(i,o,l){if(Ba(o))if(l===null)i.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var h=o.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+l)}}function Sr(i,o,l){if(l===null)i.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+l)}}function Jt(i,o,l,h){if(h===null)i.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(o,l,""+h)}}var hi,Ha;function qr(i){if(hi===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);hi=o&&o[1]||"",Ha=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hi+i+Ha}var As=!1;function di(i,o){if(!i||As)return"";As=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(o){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(le){var ae=le}Reflect.construct(i,[],me)}else{try{me.call()}catch(le){ae=le}i.call(me.prototype)}}else{try{throw Error()}catch(le){ae=le}(me=i())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(le){if(le&&ae&&typeof le.stack=="string")return[le.stack,ae.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=h.DetermineComponentFrameRoot(),x=y[0],P=y[1];if(x&&P){var Y=x.split(`
`),oe=P.split(`
`);for(g=h=0;h<Y.length&&!Y[h].includes("DetermineComponentFrameRoot");)h++;for(;g<oe.length&&!oe[g].includes("DetermineComponentFrameRoot");)g++;if(h===Y.length||g===oe.length)for(h=Y.length-1,g=oe.length-1;1<=h&&0<=g&&Y[h]!==oe[g];)g--;for(;1<=h&&0<=g;h--,g--)if(Y[h]!==oe[g]){if(h!==1||g!==1)do if(h--,g--,0>g||Y[h]!==oe[g]){var de=`
`+Y[h].replace(" at new "," at ");return i.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",i.displayName)),de}while(1<=h&&0<=g);break}}}finally{As=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?qr(l):""}function Nc(i){switch(i.tag){case 26:case 27:case 5:return qr(i.type);case 16:return qr("Lazy");case 13:return qr("Suspense");case 19:return qr("SuspenseList");case 0:case 15:return di(i.type,!1);case 11:return di(i.type.render,!1);case 1:return di(i.type,!0);case 31:return qr("Activity");default:return""}}function Fa(i){try{var o="";do o+=Nc(i),i=i.return;while(i);return o}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Un(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ic(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Nm(i){var o=Ic(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),h=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,y=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(x){h=""+x,y.call(this,x)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(x){h=""+x},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function $a(i){i._valueTracker||(i._valueTracker=Nm(i))}function Dc(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),h="";return i&&(h=Ic(i)?i.checked?"true":"false":i.value),i=h,i!==l?(o.setValue(i),!0):!1}function Vo(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Im=/[\n"\\]/g;function qt(i){return i.replace(Im,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function ir(i,o,l,h,g,y,x,P){i.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?i.type=x:i.removeAttribute("type"),o!=null?x==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+Un(o)):i.value!==""+Un(o)&&(i.value=""+Un(o)):x!=="submit"&&x!=="reset"||i.removeAttribute("value"),o!=null?Rs(i,x,Un(o)):l!=null?Rs(i,x,Un(l)):h!=null&&i.removeAttribute("value"),g==null&&y!=null&&(i.defaultChecked=!!y),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?i.name=""+Un(P):i.removeAttribute("name")}function Lo(i,o,l,h,g,y,x,P){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),o!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||o!=null))return;l=l!=null?""+Un(l):"",o=o!=null?""+Un(o):l,P||o===i.value||(i.value=o),i.defaultValue=o}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=P?i.checked:!!h,i.defaultChecked=!!h,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(i.name=x)}function Rs(i,o,l){o==="number"&&Vo(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function $i(i,o,l,h){if(i=i.options,o){o={};for(var g=0;g<l.length;g++)o["$"+l[g]]=!0;for(l=0;l<i.length;l++)g=o.hasOwnProperty("$"+i[l].value),i[l].selected!==g&&(i[l].selected=g),g&&h&&(i[l].defaultSelected=!0)}else{for(l=""+Un(l),o=null,g=0;g<i.length;g++){if(i[g].value===l){i[g].selected=!0,h&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function dt(i,o,l){if(o!=null&&(o=""+Un(o),o!==i.value&&(i.value=o),l==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=l!=null?""+Un(l):""}function zo(i,o,l,h){if(o==null){if(h!=null){if(l!=null)throw Error(r(92));if(K(h)){if(1<h.length)throw Error(r(93));h=h[0]}l=h}l==null&&(l=""),o=l}l=Un(o),i.defaultValue=l,h=i.textContent,h===l&&h!==""&&h!==null&&(i.value=h)}function Ar(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var Uo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function td(i,o,l){var h=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":h?i.setProperty(o,l):typeof l!="number"||l===0||Uo.has(o)?o==="float"?i.cssFloat=l:i[o]=(""+l).trim():i[o]=l+"px"}function kc(i,o,l){if(o!=null&&typeof o!="object")throw Error(r(62));if(i=i.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||o!=null&&o.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var g in o)h=o[g],o.hasOwnProperty(g)&&l[g]!==h&&td(i,g,h)}else for(var y in o)o.hasOwnProperty(y)&&td(i,y,o[y])}function Mc(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),km=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qa(i){return km.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var qi=null;function Rr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Gi=null,Yi=null;function Pc(i){var o=xr(i);if(o&&(i=o.stateNode)){var l=i[It]||null;e:switch(i=o.stateNode,o.type){case"input":if(ir(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+qt(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var h=l[o];if(h!==i&&h.form===i.form){var g=h[It]||null;if(!g)throw Error(r(90));ir(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<l.length;o++)h=l[o],h.form===i.form&&Dc(h)}break e;case"textarea":dt(i,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&$i(i,!!l.multiple,o,!1)}}}var fi=!1;function nd(i,o,l){if(fi)return i(o,l);fi=!0;try{var h=i(o);return h}finally{if(fi=!1,(Gi!==null||Yi!==null)&&(Xd(),Gi&&(o=Gi,i=Yi,Yi=Gi=null,Pc(o),i)))for(o=0;o<i.length;o++)Pc(i[o])}}function jo(i,o){var l=i.stateNode;if(l===null)return null;var h=l[It]||null;if(h===null)return null;l=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,o,typeof l));return l}var Gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cr=!1;if(Gr)try{var Bo={};Object.defineProperty(Bo,"passive",{get:function(){Cr=!0}}),window.addEventListener("test",Bo,Bo),window.removeEventListener("test",Bo,Bo)}catch{Cr=!1}var pi=null,Cs=null,Ki=null;function Oc(){if(Ki)return Ki;var i,o=Cs,l=o.length,h,g="value"in pi?pi.value:pi.textContent,y=g.length;for(i=0;i<l&&o[i]===g[i];i++);var x=l-i;for(h=1;h<=x&&o[l-h]===g[y-h];h++);return Ki=g.slice(i,1<h?1-h:void 0)}function mi(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function gi(){return!0}function Vc(){return!1}function ln(i){function o(l,h,g,y,x){this._reactName=l,this._targetInst=g,this.type=h,this.nativeEvent=y,this.target=x,this.currentTarget=null;for(var P in i)i.hasOwnProperty(P)&&(l=i[P],this[P]=l?l(y):y[P]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?gi:Vc,this.isPropagationStopped=Vc,this}return m(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=gi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=gi)},persist:function(){},isPersistent:gi}),o}var lt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ga=ln(lt),Ho=m({},lt,{view:0,detail:0}),rd=ln(Ho),Ya,Ka,yi,Fo=m({},Ho,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Go,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yi&&(yi&&i.type==="mousemove"?(Ya=i.screenX-yi.screenX,Ka=i.screenY-yi.screenY):Ka=Ya=0,yi=i),Ya)},movementY:function(i){return"movementY"in i?i.movementY:Ka}}),Nr=ln(Fo),id=m({},Fo,{dataTransfer:0}),Mm=ln(id),$o=m({},Ho,{relatedTarget:0}),Xa=ln($o),Lc=m({},lt,{animationName:0,elapsedTime:0,pseudoElement:0}),Wa=ln(Lc),sd=m({},lt,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Qa=ln(sd),Pm=m({},lt,{data:0}),zc=ln(Pm),qo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},od={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ad={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uc(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=ad[i])?!!o[i]:!1}function Go(){return Uc}var ld=m({},Ho,{key:function(i){if(i.key){var o=qo[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=mi(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?od[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Go,charCode:function(i){return i.type==="keypress"?mi(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?mi(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Za=ln(ld),cd=m({},Fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jc=ln(cd),Xi=m({},Ho,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Go}),ud=ln(Xi),hd=m({},lt,{propertyName:0,elapsedTime:0,pseudoElement:0}),dd=ln(hd),fd=m({},Fo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ja=ln(fd),jn=m({},lt,{newState:0,oldState:0}),pd=ln(jn),md=[9,13,27,32],vi=Gr&&"CompositionEvent"in window,p=null;Gr&&"documentMode"in document&&(p=document.documentMode);var b=Gr&&"TextEvent"in window&&!p,E=Gr&&(!vi||p&&8<p&&11>=p),j=" ",ie=!1;function ce(i,o){switch(i){case"keyup":return md.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function be(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Je=!1;function en(i,o){switch(i){case"compositionend":return be(o);case"keypress":return o.which!==32?null:(ie=!0,j);case"textInput":return i=o.data,i===j&&ie?null:i;default:return null}}function et(i,o){if(Je)return i==="compositionend"||!vi&&ce(i,o)?(i=Oc(),Ki=Cs=pi=null,Je=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return E&&o.locale!=="ko"?null:o.data;default:return null}}var cn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tn(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!cn[i.type]:o==="textarea"}function Wi(i,o,l,h){Gi?Yi?Yi.push(h):Yi=[h]:Gi=h,o=tf(o,"onChange"),0<o.length&&(l=new Ga("onChange","change",null,l,h),i.push({event:l,listeners:o}))}var yn=null,_i=null;function Bc(i){v1(i,0)}function gd(i){var o=Tr(i);if(Dc(o))return i}function Ub(i,o){if(i==="change")return o}var jb=!1;if(Gr){var Om;if(Gr){var Vm="oninput"in document;if(!Vm){var Bb=document.createElement("div");Bb.setAttribute("oninput","return;"),Vm=typeof Bb.oninput=="function"}Om=Vm}else Om=!1;jb=Om&&(!document.documentMode||9<document.documentMode)}function Hb(){yn&&(yn.detachEvent("onpropertychange",Fb),_i=yn=null)}function Fb(i){if(i.propertyName==="value"&&gd(_i)){var o=[];Wi(o,_i,i,Rr(i)),nd(Bc,o)}}function Tk(i,o,l){i==="focusin"?(Hb(),yn=o,_i=l,yn.attachEvent("onpropertychange",Fb)):i==="focusout"&&Hb()}function Sk(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return gd(_i)}function Ak(i,o){if(i==="click")return gd(o)}function Rk(i,o){if(i==="input"||i==="change")return gd(o)}function Ck(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var sr=typeof Object.is=="function"?Object.is:Ck;function Hc(i,o){if(sr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),h=Object.keys(o);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var g=l[h];if(!Ye.call(o,g)||!sr(i[g],o[g]))return!1}return!0}function $b(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function qb(i,o){var l=$b(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=o&&h>=o)return{node:l,offset:o-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=$b(l)}}function Gb(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Gb(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Yb(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Vo(i.document);o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)i=o.contentWindow;else break;o=Vo(i.document)}return o}function Lm(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var Nk=Gr&&"documentMode"in document&&11>=document.documentMode,el=null,zm=null,Fc=null,Um=!1;function Kb(i,o,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Um||el==null||el!==Vo(h)||(h=el,"selectionStart"in h&&Lm(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Fc&&Hc(Fc,h)||(Fc=h,h=tf(zm,"onSelect"),0<h.length&&(o=new Ga("onSelect","select",null,o,l),i.push({event:o,listeners:h}),o.target=el)))}function Yo(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var tl={animationend:Yo("Animation","AnimationEnd"),animationiteration:Yo("Animation","AnimationIteration"),animationstart:Yo("Animation","AnimationStart"),transitionrun:Yo("Transition","TransitionRun"),transitionstart:Yo("Transition","TransitionStart"),transitioncancel:Yo("Transition","TransitionCancel"),transitionend:Yo("Transition","TransitionEnd")},jm={},Xb={};Gr&&(Xb=document.createElement("div").style,"AnimationEvent"in window||(delete tl.animationend.animation,delete tl.animationiteration.animation,delete tl.animationstart.animation),"TransitionEvent"in window||delete tl.transitionend.transition);function Ko(i){if(jm[i])return jm[i];if(!tl[i])return i;var o=tl[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in Xb)return jm[i]=o[l];return i}var Wb=Ko("animationend"),Qb=Ko("animationiteration"),Zb=Ko("animationstart"),Ik=Ko("transitionrun"),Dk=Ko("transitionstart"),kk=Ko("transitioncancel"),Jb=Ko("transitionend"),ew=new Map,Bm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bm.push("scrollEnd");function Yr(i,o){ew.set(i,o),rr(o,[i])}var tw=new WeakMap;function Ir(i,o){if(typeof i=="object"&&i!==null){var l=tw.get(i);return l!==void 0?l:(o={value:i,source:o,stack:Fa(o)},tw.set(i,o),o)}return{value:i,source:o,stack:Fa(o)}}var Dr=[],nl=0,Hm=0;function yd(){for(var i=nl,o=Hm=nl=0;o<i;){var l=Dr[o];Dr[o++]=null;var h=Dr[o];Dr[o++]=null;var g=Dr[o];Dr[o++]=null;var y=Dr[o];if(Dr[o++]=null,h!==null&&g!==null){var x=h.pending;x===null?g.next=g:(g.next=x.next,x.next=g),h.pending=g}y!==0&&nw(l,g,y)}}function vd(i,o,l,h){Dr[nl++]=i,Dr[nl++]=o,Dr[nl++]=l,Dr[nl++]=h,Hm|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function Fm(i,o,l,h){return vd(i,o,l,h),_d(i)}function rl(i,o){return vd(i,null,null,o),_d(i)}function nw(i,o,l){i.lanes|=l;var h=i.alternate;h!==null&&(h.lanes|=l);for(var g=!1,y=i.return;y!==null;)y.childLanes|=l,h=y.alternate,h!==null&&(h.childLanes|=l),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(g=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,g&&o!==null&&(g=31-xt(l),i=y.hiddenUpdates,h=i[g],h===null?i[g]=[o]:h.push(o),o.lane=l|536870912),y):null}function _d(i){if(50<pu)throw pu=0,Xg=null,Error(r(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var il={};function Mk(i,o,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(i,o,l,h){return new Mk(i,o,l,h)}function $m(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Qi(i,o){var l=i.alternate;return l===null?(l=or(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function rw(i,o){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,o=l.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function bd(i,o,l,h,g,y){var x=0;if(h=i,typeof i=="function")$m(i)&&(x=1);else if(typeof i=="string")x=OM(i,l,re.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case N:return i=or(31,l,o,g),i.elementType=N,i.lanes=y,i;case T:return Xo(l.children,g,y,o);case R:x=8,g|=24;break;case C:return i=or(12,l,o,g|2),i.elementType=C,i.lanes=y,i;case q:return i=or(13,l,o,g),i.elementType=q,i.lanes=y,i;case X:return i=or(19,l,o,g),i.elementType=X,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case D:case B:x=10;break e;case z:x=9;break e;case U:x=11;break e;case I:x=14;break e;case A:x=16,h=null;break e}x=29,l=Error(r(130,i===null?"null":typeof i,"")),h=null}return o=or(x,l,o,g),o.elementType=i,o.type=h,o.lanes=y,o}function Xo(i,o,l,h){return i=or(7,i,h,o),i.lanes=l,i}function qm(i,o,l){return i=or(6,i,null,o),i.lanes=l,i}function Gm(i,o,l){return o=or(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var sl=[],ol=0,wd=null,Ed=0,kr=[],Mr=0,Wo=null,Zi=1,Ji="";function Qo(i,o){sl[ol++]=Ed,sl[ol++]=wd,wd=i,Ed=o}function iw(i,o,l){kr[Mr++]=Zi,kr[Mr++]=Ji,kr[Mr++]=Wo,Wo=i;var h=Zi;i=Ji;var g=32-xt(h)-1;h&=~(1<<g),l+=1;var y=32-xt(o)+g;if(30<y){var x=g-g%5;y=(h&(1<<x)-1).toString(32),h>>=x,g-=x,Zi=1<<32-xt(o)+g|l<<g|h,Ji=y+i}else Zi=1<<y|l<<g|h,Ji=i}function Ym(i){i.return!==null&&(Qo(i,1),iw(i,1,0))}function Km(i){for(;i===wd;)wd=sl[--ol],sl[ol]=null,Ed=sl[--ol],sl[ol]=null;for(;i===Wo;)Wo=kr[--Mr],kr[Mr]=null,Ji=kr[--Mr],kr[Mr]=null,Zi=kr[--Mr],kr[Mr]=null}var Bn=null,Dt=null,ot=!1,Zo=null,bi=!1,Xm=Error(r(519));function Jo(i){var o=Error(r(418,""));throw Gc(Ir(o,i)),Xm}function sw(i){var o=i.stateNode,l=i.type,h=i.memoizedProps;switch(o[Lt]=i,o[It]=h,l){case"dialog":We("cancel",o),We("close",o);break;case"iframe":case"object":case"embed":We("load",o);break;case"video":case"audio":for(l=0;l<gu.length;l++)We(gu[l],o);break;case"source":We("error",o);break;case"img":case"image":case"link":We("error",o),We("load",o);break;case"details":We("toggle",o);break;case"input":We("invalid",o),Lo(o,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),$a(o);break;case"select":We("invalid",o);break;case"textarea":We("invalid",o),zo(o,h.value,h.defaultValue,h.children),$a(o)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||h.suppressHydrationWarning===!0||E1(o.textContent,l)?(h.popover!=null&&(We("beforetoggle",o),We("toggle",o)),h.onScroll!=null&&We("scroll",o),h.onScrollEnd!=null&&We("scrollend",o),h.onClick!=null&&(o.onclick=nf),o=!0):o=!1,o||Jo(i)}function ow(i){for(Bn=i.return;Bn;)switch(Bn.tag){case 5:case 13:bi=!1;return;case 27:case 3:bi=!0;return;default:Bn=Bn.return}}function $c(i){if(i!==Bn)return!1;if(!ot)return ow(i),ot=!0,!1;var o=i.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||h0(i.type,i.memoizedProps)),l=!l),l&&Dt&&Jo(i),ow(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8)if(l=i.data,l==="/$"){if(o===0){Dt=Xr(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++;i=i.nextSibling}Dt=null}}else o===27?(o=Dt,$s(i.type)?(i=m0,m0=null,Dt=i):Dt=o):Dt=Bn?Xr(i.stateNode.nextSibling):null;return!0}function qc(){Dt=Bn=null,ot=!1}function aw(){var i=Zo;return i!==null&&(Kn===null?Kn=i:Kn.push.apply(Kn,i),Zo=null),i}function Gc(i){Zo===null?Zo=[i]:Zo.push(i)}var Wm=Q(null),ea=null,es=null;function Ns(i,o,l){W(Wm,o._currentValue),o._currentValue=l}function ts(i){i._currentValue=Wm.current,ne(Wm)}function Qm(i,o,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===l)break;i=i.return}}function Zm(i,o,l,h){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var y=g.dependencies;if(y!==null){var x=g.child;y=y.firstContext;e:for(;y!==null;){var P=y;y=g;for(var Y=0;Y<o.length;Y++)if(P.context===o[Y]){y.lanes|=l,P=y.alternate,P!==null&&(P.lanes|=l),Qm(y.return,l,i),h||(x=null);break e}y=P.next}}else if(g.tag===18){if(x=g.return,x===null)throw Error(r(341));x.lanes|=l,y=x.alternate,y!==null&&(y.lanes|=l),Qm(x,l,i),x=null}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===i){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}}function Yc(i,o,l,h){i=null;for(var g=o,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var x=g.alternate;if(x===null)throw Error(r(387));if(x=x.memoizedProps,x!==null){var P=g.type;sr(g.pendingProps.value,x.value)||(i!==null?i.push(P):i=[P])}}else if(g===ve.current){if(x=g.alternate,x===null)throw Error(r(387));x.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(Eu):i=[Eu])}g=g.return}i!==null&&Zm(o,i,l,h),o.flags|=262144}function xd(i){for(i=i.firstContext;i!==null;){if(!sr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ta(i){ea=i,es=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function An(i){return lw(ea,i)}function Td(i,o){return ea===null&&ta(i),lw(i,o)}function lw(i,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},es===null){if(i===null)throw Error(r(308));es=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else es=es.next=o;return l}var Pk=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(l,h){i.push(h)}};this.abort=function(){o.aborted=!0,i.forEach(function(l){return l()})}},Ok=t.unstable_scheduleCallback,Vk=t.unstable_NormalPriority,nn={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jm(){return{controller:new Pk,data:new Map,refCount:0}}function Kc(i){i.refCount--,i.refCount===0&&Ok(Vk,function(){i.controller.abort()})}var Xc=null,eg=0,al=0,ll=null;function Lk(i,o){if(Xc===null){var l=Xc=[];eg=0,al=n0(),ll={status:"pending",value:void 0,then:function(h){l.push(h)}}}return eg++,o.then(cw,cw),o}function cw(){if(--eg===0&&Xc!==null){ll!==null&&(ll.status="fulfilled");var i=Xc;Xc=null,al=0,ll=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function zk(i,o){var l=[],h={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return i.then(function(){h.status="fulfilled",h.value=o;for(var g=0;g<l.length;g++)(0,l[g])(o)},function(g){for(h.status="rejected",h.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),h}var uw=L.S;L.S=function(i,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&Lk(i,o),uw!==null&&uw(i,o)};var na=Q(null);function tg(){var i=na.current;return i!==null?i:vt.pooledCache}function Sd(i,o){o===null?W(na,na.current):W(na,o.pool)}function hw(){var i=tg();return i===null?null:{parent:nn._currentValue,pool:i}}var Wc=Error(r(460)),dw=Error(r(474)),Ad=Error(r(542)),ng={then:function(){}};function fw(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Rd(){}function pw(i,o,l){switch(l=i[l],l===void 0?i.push(o):l!==o&&(o.then(Rd,Rd),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,gw(i),i;default:if(typeof o.status=="string")o.then(Rd,Rd);else{if(i=vt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=o,i.status="pending",i.then(function(h){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=h}},function(h){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=h}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,gw(i),i}throw Qc=o,Wc}}var Qc=null;function mw(){if(Qc===null)throw Error(r(459));var i=Qc;return Qc=null,i}function gw(i){if(i===Wc||i===Ad)throw Error(r(483))}var Is=!1;function rg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ig(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ds(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ks(i,o,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(ut&2)!==0){var g=h.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),h.pending=o,o=_d(i),nw(i,null,l),o}return vd(i,h,o,l),_d(i)}function Zc(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var h=o.lanes;h&=i.pendingLanes,l|=h,o.lanes=l,ko(i,l)}}function sg(i,o){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var g=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var x={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?g=y=x:y=y.next=x,l=l.next}while(l!==null);y===null?g=y=o:y=y.next=o}else g=y=o;l={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:h.shared,callbacks:h.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}var og=!1;function Jc(){if(og){var i=ll;if(i!==null)throw i}}function eu(i,o,l,h){og=!1;var g=i.updateQueue;Is=!1;var y=g.firstBaseUpdate,x=g.lastBaseUpdate,P=g.shared.pending;if(P!==null){g.shared.pending=null;var Y=P,oe=Y.next;Y.next=null,x===null?y=oe:x.next=oe,x=Y;var de=i.alternate;de!==null&&(de=de.updateQueue,P=de.lastBaseUpdate,P!==x&&(P===null?de.firstBaseUpdate=oe:P.next=oe,de.lastBaseUpdate=Y))}if(y!==null){var me=g.baseState;x=0,de=oe=Y=null,P=y;do{var ae=P.lane&-536870913,le=ae!==P.lane;if(le?(tt&ae)===ae:(h&ae)===ae){ae!==0&&ae===al&&(og=!0),de!==null&&(de=de.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var Oe=i,Ie=P;ae=o;var mt=l;switch(Ie.tag){case 1:if(Oe=Ie.payload,typeof Oe=="function"){me=Oe.call(mt,me,ae);break e}me=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Ie.payload,ae=typeof Oe=="function"?Oe.call(mt,me,ae):Oe,ae==null)break e;me=m({},me,ae);break e;case 2:Is=!0}}ae=P.callback,ae!==null&&(i.flags|=64,le&&(i.flags|=8192),le=g.callbacks,le===null?g.callbacks=[ae]:le.push(ae))}else le={lane:ae,tag:P.tag,payload:P.payload,callback:P.callback,next:null},de===null?(oe=de=le,Y=me):de=de.next=le,x|=ae;if(P=P.next,P===null){if(P=g.shared.pending,P===null)break;le=P,P=le.next,le.next=null,g.lastBaseUpdate=le,g.shared.pending=null}}while(!0);de===null&&(Y=me),g.baseState=Y,g.firstBaseUpdate=oe,g.lastBaseUpdate=de,y===null&&(g.shared.lanes=0),js|=x,i.lanes=x,i.memoizedState=me}}function yw(i,o){if(typeof i!="function")throw Error(r(191,i));i.call(o)}function vw(i,o){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)yw(l[i],o)}var cl=Q(null),Cd=Q(0);function _w(i,o){i=ls,W(Cd,i),W(cl,o),ls=i|o.baseLanes}function ag(){W(Cd,ls),W(cl,cl.current)}function lg(){ls=Cd.current,ne(cl),ne(Cd)}var Ms=0,Fe=null,ft=null,Gt=null,Nd=!1,ul=!1,ra=!1,Id=0,tu=0,hl=null,Uk=0;function zt(){throw Error(r(321))}function cg(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!sr(i[l],o[l]))return!1;return!0}function ug(i,o,l,h,g,y){return Ms=y,Fe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,L.H=i===null||i.memoizedState===null?nE:rE,ra=!1,y=l(h,g),ra=!1,ul&&(y=ww(o,l,h,g)),bw(i),y}function bw(i){L.H=Vd;var o=ft!==null&&ft.next!==null;if(Ms=0,Gt=ft=Fe=null,Nd=!1,tu=0,hl=null,o)throw Error(r(300));i===null||un||(i=i.dependencies,i!==null&&xd(i)&&(un=!0))}function ww(i,o,l,h){Fe=i;var g=0;do{if(ul&&(hl=null),tu=0,ul=!1,25<=g)throw Error(r(301));if(g+=1,Gt=ft=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}L.H=Gk,y=o(l,h)}while(ul);return y}function jk(){var i=L.H,o=i.useState()[0];return o=typeof o.then=="function"?nu(o):o,i=i.useState()[0],(ft!==null?ft.memoizedState:null)!==i&&(Fe.flags|=1024),o}function hg(){var i=Id!==0;return Id=0,i}function dg(i,o,l){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~l}function fg(i){if(Nd){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Nd=!1}Ms=0,Gt=ft=Fe=null,ul=!1,tu=Id=0,hl=null}function Gn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Fe.memoizedState=Gt=i:Gt=Gt.next=i,Gt}function Yt(){if(ft===null){var i=Fe.alternate;i=i!==null?i.memoizedState:null}else i=ft.next;var o=Gt===null?Fe.memoizedState:Gt.next;if(o!==null)Gt=o,ft=i;else{if(i===null)throw Fe.alternate===null?Error(r(467)):Error(r(310));ft=i,i={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Gt===null?Fe.memoizedState=Gt=i:Gt=Gt.next=i}return Gt}function pg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nu(i){var o=tu;return tu+=1,hl===null&&(hl=[]),i=pw(hl,i,o),o=Fe,(Gt===null?o.memoizedState:Gt.next)===null&&(o=o.alternate,L.H=o===null||o.memoizedState===null?nE:rE),i}function Dd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return nu(i);if(i.$$typeof===B)return An(i)}throw Error(r(438,String(i)))}function mg(i){var o=null,l=Fe.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var h=Fe.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(o={data:h.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=pg(),Fe.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(i),h=0;h<i;h++)l[h]=H;return o.index++,l}function ns(i,o){return typeof o=="function"?o(i):o}function kd(i){var o=Yt();return gg(o,ft,i)}function gg(i,o,l){var h=i.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=l;var g=i.baseQueue,y=h.pending;if(y!==null){if(g!==null){var x=g.next;g.next=y.next,y.next=x}o.baseQueue=g=y,h.pending=null}if(y=i.baseState,g===null)i.memoizedState=y;else{o=g.next;var P=x=null,Y=null,oe=o,de=!1;do{var me=oe.lane&-536870913;if(me!==oe.lane?(tt&me)===me:(Ms&me)===me){var ae=oe.revertLane;if(ae===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),me===al&&(de=!0);else if((Ms&ae)===ae){oe=oe.next,ae===al&&(de=!0);continue}else me={lane:0,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},Y===null?(P=Y=me,x=y):Y=Y.next=me,Fe.lanes|=ae,js|=ae;me=oe.action,ra&&l(y,me),y=oe.hasEagerState?oe.eagerState:l(y,me)}else ae={lane:me,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},Y===null?(P=Y=ae,x=y):Y=Y.next=ae,Fe.lanes|=me,js|=me;oe=oe.next}while(oe!==null&&oe!==o);if(Y===null?x=y:Y.next=P,!sr(y,i.memoizedState)&&(un=!0,de&&(l=ll,l!==null)))throw l;i.memoizedState=y,i.baseState=x,i.baseQueue=Y,h.lastRenderedState=y}return g===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function yg(i){var o=Yt(),l=o.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var h=l.dispatch,g=l.pending,y=o.memoizedState;if(g!==null){l.pending=null;var x=g=g.next;do y=i(y,x.action),x=x.next;while(x!==g);sr(y,o.memoizedState)||(un=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),l.lastRenderedState=y}return[y,h]}function Ew(i,o,l){var h=Fe,g=Yt(),y=ot;if(y){if(l===void 0)throw Error(r(407));l=l()}else l=o();var x=!sr((ft||g).memoizedState,l);x&&(g.memoizedState=l,un=!0),g=g.queue;var P=Sw.bind(null,h,g,i);if(ru(2048,8,P,[i]),g.getSnapshot!==o||x||Gt!==null&&Gt.memoizedState.tag&1){if(h.flags|=2048,dl(9,Md(),Tw.bind(null,h,g,l,o),null),vt===null)throw Error(r(349));y||(Ms&124)!==0||xw(h,o,l)}return l}function xw(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=Fe.updateQueue,o===null?(o=pg(),Fe.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function Tw(i,o,l,h){o.value=l,o.getSnapshot=h,Aw(o)&&Rw(i)}function Sw(i,o,l){return l(function(){Aw(o)&&Rw(i)})}function Aw(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!sr(i,l)}catch{return!0}}function Rw(i){var o=rl(i,2);o!==null&&hr(o,i,2)}function vg(i){var o=Gn();if(typeof i=="function"){var l=i;if(i=l(),ra){Ft(!0);try{l()}finally{Ft(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:i},o}function Cw(i,o,l,h){return i.baseState=l,gg(i,ft,typeof h=="function"?h:ns)}function Bk(i,o,l,h,g){if(Od(i))throw Error(r(485));if(i=o.action,i!==null){var y={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){y.listeners.push(x)}};L.T!==null?l(!0):y.isTransition=!1,h(y),l=o.pending,l===null?(y.next=o.pending=y,Nw(o,y)):(y.next=l.next,o.pending=l.next=y)}}function Nw(i,o){var l=o.action,h=o.payload,g=i.state;if(o.isTransition){var y=L.T,x={};L.T=x;try{var P=l(g,h),Y=L.S;Y!==null&&Y(x,P),Iw(i,o,P)}catch(oe){_g(i,o,oe)}finally{L.T=y}}else try{y=l(g,h),Iw(i,o,y)}catch(oe){_g(i,o,oe)}}function Iw(i,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){Dw(i,o,h)},function(h){return _g(i,o,h)}):Dw(i,o,l)}function Dw(i,o,l){o.status="fulfilled",o.value=l,kw(o),i.state=l,o=i.pending,o!==null&&(l=o.next,l===o?i.pending=null:(l=l.next,o.next=l,Nw(i,l)))}function _g(i,o,l){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do o.status="rejected",o.reason=l,kw(o),o=o.next;while(o!==h)}i.action=null}function kw(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function Mw(i,o){return o}function Pw(i,o){if(ot){var l=vt.formState;if(l!==null){e:{var h=Fe;if(ot){if(Dt){t:{for(var g=Dt,y=bi;g.nodeType!==8;){if(!y){g=null;break t}if(g=Xr(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){Dt=Xr(g.nextSibling),h=g.data==="F!";break e}}Jo(h)}h=!1}h&&(o=l[0])}}return l=Gn(),l.memoizedState=l.baseState=o,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mw,lastRenderedState:o},l.queue=h,l=Jw.bind(null,Fe,h),h.dispatch=l,h=vg(!1),y=Tg.bind(null,Fe,!1,h.queue),h=Gn(),g={state:o,dispatch:null,action:i,pending:null},h.queue=g,l=Bk.bind(null,Fe,g,y,l),g.dispatch=l,h.memoizedState=i,[o,l,!1]}function Ow(i){var o=Yt();return Vw(o,ft,i)}function Vw(i,o,l){if(o=gg(i,o,Mw)[0],i=kd(ns)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var h=nu(o)}catch(x){throw x===Wc?Ad:x}else h=o;o=Yt();var g=o.queue,y=g.dispatch;return l!==o.memoizedState&&(Fe.flags|=2048,dl(9,Md(),Hk.bind(null,g,l),null)),[h,y,i]}function Hk(i,o){i.action=o}function Lw(i){var o=Yt(),l=ft;if(l!==null)return Vw(o,l,i);Yt(),o=o.memoizedState,l=Yt();var h=l.queue.dispatch;return l.memoizedState=i,[o,h,!1]}function dl(i,o,l,h){return i={tag:i,create:l,deps:h,inst:o,next:null},o=Fe.updateQueue,o===null&&(o=pg(),Fe.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,o.lastEffect=i),i}function Md(){return{destroy:void 0,resource:void 0}}function zw(){return Yt().memoizedState}function Pd(i,o,l,h){var g=Gn();h=h===void 0?null:h,Fe.flags|=i,g.memoizedState=dl(1|o,Md(),l,h)}function ru(i,o,l,h){var g=Yt();h=h===void 0?null:h;var y=g.memoizedState.inst;ft!==null&&h!==null&&cg(h,ft.memoizedState.deps)?g.memoizedState=dl(o,y,l,h):(Fe.flags|=i,g.memoizedState=dl(1|o,y,l,h))}function Uw(i,o){Pd(8390656,8,i,o)}function jw(i,o){ru(2048,8,i,o)}function Bw(i,o){return ru(4,2,i,o)}function Hw(i,o){return ru(4,4,i,o)}function Fw(i,o){if(typeof o=="function"){i=i();var l=o(i);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function $w(i,o,l){l=l!=null?l.concat([i]):null,ru(4,4,Fw.bind(null,o,i),l)}function bg(){}function qw(i,o){var l=Yt();o=o===void 0?null:o;var h=l.memoizedState;return o!==null&&cg(o,h[1])?h[0]:(l.memoizedState=[i,o],i)}function Gw(i,o){var l=Yt();o=o===void 0?null:o;var h=l.memoizedState;if(o!==null&&cg(o,h[1]))return h[0];if(h=i(),ra){Ft(!0);try{i()}finally{Ft(!1)}}return l.memoizedState=[h,o],h}function wg(i,o,l){return l===void 0||(Ms&1073741824)!==0?i.memoizedState=o:(i.memoizedState=l,i=XE(),Fe.lanes|=i,js|=i,l)}function Yw(i,o,l,h){return sr(l,o)?l:cl.current!==null?(i=wg(i,l,h),sr(i,o)||(un=!0),i):(Ms&42)===0?(un=!0,i.memoizedState=l):(i=XE(),Fe.lanes|=i,js|=i,o)}function Kw(i,o,l,h,g){var y=G.p;G.p=y!==0&&8>y?y:8;var x=L.T,P={};L.T=P,Tg(i,!1,o,l);try{var Y=g(),oe=L.S;if(oe!==null&&oe(P,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var de=zk(Y,h);iu(i,o,de,ur(i))}else iu(i,o,h,ur(i))}catch(me){iu(i,o,{then:function(){},status:"rejected",reason:me},ur())}finally{G.p=y,L.T=x}}function Fk(){}function Eg(i,o,l,h){if(i.tag!==5)throw Error(r(476));var g=Xw(i).queue;Kw(i,g,o,ee,l===null?Fk:function(){return Ww(i),l(h)})}function Xw(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:ee},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:l},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function Ww(i){var o=Xw(i).next.queue;iu(i,o,{},ur())}function xg(){return An(Eu)}function Qw(){return Yt().memoizedState}function Zw(){return Yt().memoizedState}function $k(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var l=ur();i=Ds(l);var h=ks(o,i,l);h!==null&&(hr(h,o,l),Zc(h,o,l)),o={cache:Jm()},i.payload=o;return}o=o.return}}function qk(i,o,l){var h=ur();l={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Od(i)?eE(o,l):(l=Fm(i,o,l,h),l!==null&&(hr(l,i,h),tE(l,o,h)))}function Jw(i,o,l){var h=ur();iu(i,o,l,h)}function iu(i,o,l,h){var g={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Od(i))eE(o,g);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var x=o.lastRenderedState,P=y(x,l);if(g.hasEagerState=!0,g.eagerState=P,sr(P,x))return vd(i,o,g,0),vt===null&&yd(),!1}catch{}finally{}if(l=Fm(i,o,g,h),l!==null)return hr(l,i,h),tE(l,o,h),!0}return!1}function Tg(i,o,l,h){if(h={lane:2,revertLane:n0(),action:h,hasEagerState:!1,eagerState:null,next:null},Od(i)){if(o)throw Error(r(479))}else o=Fm(i,l,h,2),o!==null&&hr(o,i,2)}function Od(i){var o=i.alternate;return i===Fe||o!==null&&o===Fe}function eE(i,o){ul=Nd=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function tE(i,o,l){if((l&4194048)!==0){var h=o.lanes;h&=i.pendingLanes,l|=h,o.lanes=l,ko(i,l)}}var Vd={readContext:An,use:Dd,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useLayoutEffect:zt,useInsertionEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useSyncExternalStore:zt,useId:zt,useHostTransitionStatus:zt,useFormState:zt,useActionState:zt,useOptimistic:zt,useMemoCache:zt,useCacheRefresh:zt},nE={readContext:An,use:Dd,useCallback:function(i,o){return Gn().memoizedState=[i,o===void 0?null:o],i},useContext:An,useEffect:Uw,useImperativeHandle:function(i,o,l){l=l!=null?l.concat([i]):null,Pd(4194308,4,Fw.bind(null,o,i),l)},useLayoutEffect:function(i,o){return Pd(4194308,4,i,o)},useInsertionEffect:function(i,o){Pd(4,2,i,o)},useMemo:function(i,o){var l=Gn();o=o===void 0?null:o;var h=i();if(ra){Ft(!0);try{i()}finally{Ft(!1)}}return l.memoizedState=[h,o],h},useReducer:function(i,o,l){var h=Gn();if(l!==void 0){var g=l(o);if(ra){Ft(!0);try{l(o)}finally{Ft(!1)}}}else g=o;return h.memoizedState=h.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},h.queue=i,i=i.dispatch=qk.bind(null,Fe,i),[h.memoizedState,i]},useRef:function(i){var o=Gn();return i={current:i},o.memoizedState=i},useState:function(i){i=vg(i);var o=i.queue,l=Jw.bind(null,Fe,o);return o.dispatch=l,[i.memoizedState,l]},useDebugValue:bg,useDeferredValue:function(i,o){var l=Gn();return wg(l,i,o)},useTransition:function(){var i=vg(!1);return i=Kw.bind(null,Fe,i.queue,!0,!1),Gn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,l){var h=Fe,g=Gn();if(ot){if(l===void 0)throw Error(r(407));l=l()}else{if(l=o(),vt===null)throw Error(r(349));(tt&124)!==0||xw(h,o,l)}g.memoizedState=l;var y={value:l,getSnapshot:o};return g.queue=y,Uw(Sw.bind(null,h,y,i),[i]),h.flags|=2048,dl(9,Md(),Tw.bind(null,h,y,l,o),null),l},useId:function(){var i=Gn(),o=vt.identifierPrefix;if(ot){var l=Ji,h=Zi;l=(h&~(1<<32-xt(h)-1)).toString(32)+l,o="«"+o+"R"+l,l=Id++,0<l&&(o+="H"+l.toString(32)),o+="»"}else l=Uk++,o="«"+o+"r"+l.toString(32)+"»";return i.memoizedState=o},useHostTransitionStatus:xg,useFormState:Pw,useActionState:Pw,useOptimistic:function(i){var o=Gn();o.memoizedState=o.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=Tg.bind(null,Fe,!0,l),l.dispatch=o,[i,o]},useMemoCache:mg,useCacheRefresh:function(){return Gn().memoizedState=$k.bind(null,Fe)}},rE={readContext:An,use:Dd,useCallback:qw,useContext:An,useEffect:jw,useImperativeHandle:$w,useInsertionEffect:Bw,useLayoutEffect:Hw,useMemo:Gw,useReducer:kd,useRef:zw,useState:function(){return kd(ns)},useDebugValue:bg,useDeferredValue:function(i,o){var l=Yt();return Yw(l,ft.memoizedState,i,o)},useTransition:function(){var i=kd(ns)[0],o=Yt().memoizedState;return[typeof i=="boolean"?i:nu(i),o]},useSyncExternalStore:Ew,useId:Qw,useHostTransitionStatus:xg,useFormState:Ow,useActionState:Ow,useOptimistic:function(i,o){var l=Yt();return Cw(l,ft,i,o)},useMemoCache:mg,useCacheRefresh:Zw},Gk={readContext:An,use:Dd,useCallback:qw,useContext:An,useEffect:jw,useImperativeHandle:$w,useInsertionEffect:Bw,useLayoutEffect:Hw,useMemo:Gw,useReducer:yg,useRef:zw,useState:function(){return yg(ns)},useDebugValue:bg,useDeferredValue:function(i,o){var l=Yt();return ft===null?wg(l,i,o):Yw(l,ft.memoizedState,i,o)},useTransition:function(){var i=yg(ns)[0],o=Yt().memoizedState;return[typeof i=="boolean"?i:nu(i),o]},useSyncExternalStore:Ew,useId:Qw,useHostTransitionStatus:xg,useFormState:Lw,useActionState:Lw,useOptimistic:function(i,o){var l=Yt();return ft!==null?Cw(l,ft,i,o):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:mg,useCacheRefresh:Zw},fl=null,su=0;function Ld(i){var o=su;return su+=1,fl===null&&(fl=[]),pw(fl,i,o)}function ou(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function zd(i,o){throw o.$$typeof===v?Error(r(525)):(i=Object.prototype.toString.call(o),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function iE(i){var o=i._init;return o(i._payload)}function sE(i){function o(te,Z){if(i){var se=te.deletions;se===null?(te.deletions=[Z],te.flags|=16):se.push(Z)}}function l(te,Z){if(!i)return null;for(;Z!==null;)o(te,Z),Z=Z.sibling;return null}function h(te){for(var Z=new Map;te!==null;)te.key!==null?Z.set(te.key,te):Z.set(te.index,te),te=te.sibling;return Z}function g(te,Z){return te=Qi(te,Z),te.index=0,te.sibling=null,te}function y(te,Z,se){return te.index=se,i?(se=te.alternate,se!==null?(se=se.index,se<Z?(te.flags|=67108866,Z):se):(te.flags|=67108866,Z)):(te.flags|=1048576,Z)}function x(te){return i&&te.alternate===null&&(te.flags|=67108866),te}function P(te,Z,se,pe){return Z===null||Z.tag!==6?(Z=qm(se,te.mode,pe),Z.return=te,Z):(Z=g(Z,se),Z.return=te,Z)}function Y(te,Z,se,pe){var Se=se.type;return Se===T?de(te,Z,se.props.children,pe,se.key):Z!==null&&(Z.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===A&&iE(Se)===Z.type)?(Z=g(Z,se.props),ou(Z,se),Z.return=te,Z):(Z=bd(se.type,se.key,se.props,null,te.mode,pe),ou(Z,se),Z.return=te,Z)}function oe(te,Z,se,pe){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==se.containerInfo||Z.stateNode.implementation!==se.implementation?(Z=Gm(se,te.mode,pe),Z.return=te,Z):(Z=g(Z,se.children||[]),Z.return=te,Z)}function de(te,Z,se,pe,Se){return Z===null||Z.tag!==7?(Z=Xo(se,te.mode,pe,Se),Z.return=te,Z):(Z=g(Z,se),Z.return=te,Z)}function me(te,Z,se){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=qm(""+Z,te.mode,se),Z.return=te,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case _:return se=bd(Z.type,Z.key,Z.props,null,te.mode,se),ou(se,Z),se.return=te,se;case w:return Z=Gm(Z,te.mode,se),Z.return=te,Z;case A:var pe=Z._init;return Z=pe(Z._payload),me(te,Z,se)}if(K(Z)||$(Z))return Z=Xo(Z,te.mode,se,null),Z.return=te,Z;if(typeof Z.then=="function")return me(te,Ld(Z),se);if(Z.$$typeof===B)return me(te,Td(te,Z),se);zd(te,Z)}return null}function ae(te,Z,se,pe){var Se=Z!==null?Z.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return Se!==null?null:P(te,Z,""+se,pe);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case _:return se.key===Se?Y(te,Z,se,pe):null;case w:return se.key===Se?oe(te,Z,se,pe):null;case A:return Se=se._init,se=Se(se._payload),ae(te,Z,se,pe)}if(K(se)||$(se))return Se!==null?null:de(te,Z,se,pe,null);if(typeof se.then=="function")return ae(te,Z,Ld(se),pe);if(se.$$typeof===B)return ae(te,Z,Td(te,se),pe);zd(te,se)}return null}function le(te,Z,se,pe,Se){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return te=te.get(se)||null,P(Z,te,""+pe,Se);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case _:return te=te.get(pe.key===null?se:pe.key)||null,Y(Z,te,pe,Se);case w:return te=te.get(pe.key===null?se:pe.key)||null,oe(Z,te,pe,Se);case A:var qe=pe._init;return pe=qe(pe._payload),le(te,Z,se,pe,Se)}if(K(pe)||$(pe))return te=te.get(se)||null,de(Z,te,pe,Se,null);if(typeof pe.then=="function")return le(te,Z,se,Ld(pe),Se);if(pe.$$typeof===B)return le(te,Z,se,Td(Z,pe),Se);zd(Z,pe)}return null}function Oe(te,Z,se,pe){for(var Se=null,qe=null,Re=Z,ke=Z=0,dn=null;Re!==null&&ke<se.length;ke++){Re.index>ke?(dn=Re,Re=null):dn=Re.sibling;var it=ae(te,Re,se[ke],pe);if(it===null){Re===null&&(Re=dn);break}i&&Re&&it.alternate===null&&o(te,Re),Z=y(it,Z,ke),qe===null?Se=it:qe.sibling=it,qe=it,Re=dn}if(ke===se.length)return l(te,Re),ot&&Qo(te,ke),Se;if(Re===null){for(;ke<se.length;ke++)Re=me(te,se[ke],pe),Re!==null&&(Z=y(Re,Z,ke),qe===null?Se=Re:qe.sibling=Re,qe=Re);return ot&&Qo(te,ke),Se}for(Re=h(Re);ke<se.length;ke++)dn=le(Re,te,ke,se[ke],pe),dn!==null&&(i&&dn.alternate!==null&&Re.delete(dn.key===null?ke:dn.key),Z=y(dn,Z,ke),qe===null?Se=dn:qe.sibling=dn,qe=dn);return i&&Re.forEach(function(Xs){return o(te,Xs)}),ot&&Qo(te,ke),Se}function Ie(te,Z,se,pe){if(se==null)throw Error(r(151));for(var Se=null,qe=null,Re=Z,ke=Z=0,dn=null,it=se.next();Re!==null&&!it.done;ke++,it=se.next()){Re.index>ke?(dn=Re,Re=null):dn=Re.sibling;var Xs=ae(te,Re,it.value,pe);if(Xs===null){Re===null&&(Re=dn);break}i&&Re&&Xs.alternate===null&&o(te,Re),Z=y(Xs,Z,ke),qe===null?Se=Xs:qe.sibling=Xs,qe=Xs,Re=dn}if(it.done)return l(te,Re),ot&&Qo(te,ke),Se;if(Re===null){for(;!it.done;ke++,it=se.next())it=me(te,it.value,pe),it!==null&&(Z=y(it,Z,ke),qe===null?Se=it:qe.sibling=it,qe=it);return ot&&Qo(te,ke),Se}for(Re=h(Re);!it.done;ke++,it=se.next())it=le(Re,te,ke,it.value,pe),it!==null&&(i&&it.alternate!==null&&Re.delete(it.key===null?ke:it.key),Z=y(it,Z,ke),qe===null?Se=it:qe.sibling=it,qe=it);return i&&Re.forEach(function(YM){return o(te,YM)}),ot&&Qo(te,ke),Se}function mt(te,Z,se,pe){if(typeof se=="object"&&se!==null&&se.type===T&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case _:e:{for(var Se=se.key;Z!==null;){if(Z.key===Se){if(Se=se.type,Se===T){if(Z.tag===7){l(te,Z.sibling),pe=g(Z,se.props.children),pe.return=te,te=pe;break e}}else if(Z.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===A&&iE(Se)===Z.type){l(te,Z.sibling),pe=g(Z,se.props),ou(pe,se),pe.return=te,te=pe;break e}l(te,Z);break}else o(te,Z);Z=Z.sibling}se.type===T?(pe=Xo(se.props.children,te.mode,pe,se.key),pe.return=te,te=pe):(pe=bd(se.type,se.key,se.props,null,te.mode,pe),ou(pe,se),pe.return=te,te=pe)}return x(te);case w:e:{for(Se=se.key;Z!==null;){if(Z.key===Se)if(Z.tag===4&&Z.stateNode.containerInfo===se.containerInfo&&Z.stateNode.implementation===se.implementation){l(te,Z.sibling),pe=g(Z,se.children||[]),pe.return=te,te=pe;break e}else{l(te,Z);break}else o(te,Z);Z=Z.sibling}pe=Gm(se,te.mode,pe),pe.return=te,te=pe}return x(te);case A:return Se=se._init,se=Se(se._payload),mt(te,Z,se,pe)}if(K(se))return Oe(te,Z,se,pe);if($(se)){if(Se=$(se),typeof Se!="function")throw Error(r(150));return se=Se.call(se),Ie(te,Z,se,pe)}if(typeof se.then=="function")return mt(te,Z,Ld(se),pe);if(se.$$typeof===B)return mt(te,Z,Td(te,se),pe);zd(te,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,Z!==null&&Z.tag===6?(l(te,Z.sibling),pe=g(Z,se),pe.return=te,te=pe):(l(te,Z),pe=qm(se,te.mode,pe),pe.return=te,te=pe),x(te)):l(te,Z)}return function(te,Z,se,pe){try{su=0;var Se=mt(te,Z,se,pe);return fl=null,Se}catch(Re){if(Re===Wc||Re===Ad)throw Re;var qe=or(29,Re,null,te.mode);return qe.lanes=pe,qe.return=te,qe}finally{}}}var pl=sE(!0),oE=sE(!1),Pr=Q(null),wi=null;function Ps(i){var o=i.alternate;W(rn,rn.current&1),W(Pr,i),wi===null&&(o===null||cl.current!==null||o.memoizedState!==null)&&(wi=i)}function aE(i){if(i.tag===22){if(W(rn,rn.current),W(Pr,i),wi===null){var o=i.alternate;o!==null&&o.memoizedState!==null&&(wi=i)}}else Os()}function Os(){W(rn,rn.current),W(Pr,Pr.current)}function rs(i){ne(Pr),wi===i&&(wi=null),ne(rn)}var rn=Q(0);function Ud(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||p0(l)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Sg(i,o,l,h){o=i.memoizedState,l=l(h,o),l=l==null?o:m({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Ag={enqueueSetState:function(i,o,l){i=i._reactInternals;var h=ur(),g=Ds(h);g.payload=o,l!=null&&(g.callback=l),o=ks(i,g,h),o!==null&&(hr(o,i,h),Zc(o,i,h))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var h=ur(),g=Ds(h);g.tag=1,g.payload=o,l!=null&&(g.callback=l),o=ks(i,g,h),o!==null&&(hr(o,i,h),Zc(o,i,h))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=ur(),h=Ds(l);h.tag=2,o!=null&&(h.callback=o),o=ks(i,h,l),o!==null&&(hr(o,i,l),Zc(o,i,l))}};function lE(i,o,l,h,g,y,x){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,y,x):o.prototype&&o.prototype.isPureReactComponent?!Hc(l,h)||!Hc(g,y):!0}function cE(i,o,l,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,h),o.state!==i&&Ag.enqueueReplaceState(o,o.state,null)}function ia(i,o){var l=o;if("ref"in o){l={};for(var h in o)h!=="ref"&&(l[h]=o[h])}if(i=i.defaultProps){l===o&&(l=m({},l));for(var g in i)l[g]===void 0&&(l[g]=i[g])}return l}var jd=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function uE(i){jd(i)}function hE(i){console.error(i)}function dE(i){jd(i)}function Bd(i,o){try{var l=i.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(h){setTimeout(function(){throw h})}}function fE(i,o,l){try{var h=i.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Rg(i,o,l){return l=Ds(l),l.tag=3,l.payload={element:null},l.callback=function(){Bd(i,o)},l}function pE(i){return i=Ds(i),i.tag=3,i}function mE(i,o,l,h){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var y=h.value;i.payload=function(){return g(y)},i.callback=function(){fE(o,l,h)}}var x=l.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(i.callback=function(){fE(o,l,h),typeof g!="function"&&(Bs===null?Bs=new Set([this]):Bs.add(this));var P=h.stack;this.componentDidCatch(h.value,{componentStack:P!==null?P:""})})}function Yk(i,o,l,h,g){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(o=l.alternate,o!==null&&Yc(o,l,g,!0),l=Pr.current,l!==null){switch(l.tag){case 13:return wi===null?Qg():l.alternate===null&&kt===0&&(kt=3),l.flags&=-257,l.flags|=65536,l.lanes=g,h===ng?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([h]):o.add(h),Jg(i,h,g)),!1;case 22:return l.flags|=65536,h===ng?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([h]):l.add(h)),Jg(i,h,g)),!1}throw Error(r(435,l.tag))}return Jg(i,h,g),Qg(),!1}if(ot)return o=Pr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,h!==Xm&&(i=Error(r(422),{cause:h}),Gc(Ir(i,l)))):(h!==Xm&&(o=Error(r(423),{cause:h}),Gc(Ir(o,l))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,h=Ir(h,l),g=Rg(i.stateNode,h,g),sg(i,g),kt!==4&&(kt=2)),!1;var y=Error(r(520),{cause:h});if(y=Ir(y,l),fu===null?fu=[y]:fu.push(y),kt!==4&&(kt=2),o===null)return!0;h=Ir(h,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,i=g&-g,l.lanes|=i,i=Rg(l.stateNode,h,i),sg(l,i),!1;case 1:if(o=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Bs===null||!Bs.has(y))))return l.flags|=65536,g&=-g,l.lanes|=g,g=pE(g),mE(g,i,l,h),sg(l,g),!1}l=l.return}while(l!==null);return!1}var gE=Error(r(461)),un=!1;function vn(i,o,l,h){o.child=i===null?oE(o,null,l,h):pl(o,i.child,l,h)}function yE(i,o,l,h,g){l=l.render;var y=o.ref;if("ref"in h){var x={};for(var P in h)P!=="ref"&&(x[P]=h[P])}else x=h;return ta(o),h=ug(i,o,l,x,y,g),P=hg(),i!==null&&!un?(dg(i,o,g),is(i,o,g)):(ot&&P&&Ym(o),o.flags|=1,vn(i,o,h,g),o.child)}function vE(i,o,l,h,g){if(i===null){var y=l.type;return typeof y=="function"&&!$m(y)&&y.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=y,_E(i,o,y,h,g)):(i=bd(l.type,null,h,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,!Og(i,g)){var x=y.memoizedProps;if(l=l.compare,l=l!==null?l:Hc,l(x,h)&&i.ref===o.ref)return is(i,o,g)}return o.flags|=1,i=Qi(y,h),i.ref=o.ref,i.return=o,o.child=i}function _E(i,o,l,h,g){if(i!==null){var y=i.memoizedProps;if(Hc(y,h)&&i.ref===o.ref)if(un=!1,o.pendingProps=h=y,Og(i,g))(i.flags&131072)!==0&&(un=!0);else return o.lanes=i.lanes,is(i,o,g)}return Cg(i,o,l,h,g)}function bE(i,o,l){var h=o.pendingProps,g=h.children,y=i!==null?i.memoizedState:null;if(h.mode==="hidden"){if((o.flags&128)!==0){if(h=y!==null?y.baseLanes|l:l,i!==null){for(g=o.child=i.child,y=0;g!==null;)y=y|g.lanes|g.childLanes,g=g.sibling;o.childLanes=y&~h}else o.childLanes=0,o.child=null;return wE(i,o,h,l)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Sd(o,y!==null?y.cachePool:null),y!==null?_w(o,y):ag(),aE(o);else return o.lanes=o.childLanes=536870912,wE(i,o,y!==null?y.baseLanes|l:l,l)}else y!==null?(Sd(o,y.cachePool),_w(o,y),Os(),o.memoizedState=null):(i!==null&&Sd(o,null),ag(),Os());return vn(i,o,g,l),o.child}function wE(i,o,l,h){var g=tg();return g=g===null?null:{parent:nn._currentValue,pool:g},o.memoizedState={baseLanes:l,cachePool:g},i!==null&&Sd(o,null),ag(),aE(o),i!==null&&Yc(i,o,h,!0),null}function Hd(i,o){var l=o.ref;if(l===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(i===null||i.ref!==l)&&(o.flags|=4194816)}}function Cg(i,o,l,h,g){return ta(o),l=ug(i,o,l,h,void 0,g),h=hg(),i!==null&&!un?(dg(i,o,g),is(i,o,g)):(ot&&h&&Ym(o),o.flags|=1,vn(i,o,l,g),o.child)}function EE(i,o,l,h,g,y){return ta(o),o.updateQueue=null,l=ww(o,h,l,g),bw(i),h=hg(),i!==null&&!un?(dg(i,o,y),is(i,o,y)):(ot&&h&&Ym(o),o.flags|=1,vn(i,o,l,y),o.child)}function xE(i,o,l,h,g){if(ta(o),o.stateNode===null){var y=il,x=l.contextType;typeof x=="object"&&x!==null&&(y=An(x)),y=new l(h,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Ag,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=h,y.state=o.memoizedState,y.refs={},rg(o),x=l.contextType,y.context=typeof x=="object"&&x!==null?An(x):il,y.state=o.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(Sg(o,l,x,h),y.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(x=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),x!==y.state&&Ag.enqueueReplaceState(y,y.state,null),eu(o,h,y,g),Jc(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),h=!0}else if(i===null){y=o.stateNode;var P=o.memoizedProps,Y=ia(l,P);y.props=Y;var oe=y.context,de=l.contextType;x=il,typeof de=="object"&&de!==null&&(x=An(de));var me=l.getDerivedStateFromProps;de=typeof me=="function"||typeof y.getSnapshotBeforeUpdate=="function",P=o.pendingProps!==P,de||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(P||oe!==x)&&cE(o,y,h,x),Is=!1;var ae=o.memoizedState;y.state=ae,eu(o,h,y,g),Jc(),oe=o.memoizedState,P||ae!==oe||Is?(typeof me=="function"&&(Sg(o,l,me,h),oe=o.memoizedState),(Y=Is||lE(o,l,Y,h,ae,oe,x))?(de||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=oe),y.props=h,y.state=oe,y.context=x,h=Y):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{y=o.stateNode,ig(i,o),x=o.memoizedProps,de=ia(l,x),y.props=de,me=o.pendingProps,ae=y.context,oe=l.contextType,Y=il,typeof oe=="object"&&oe!==null&&(Y=An(oe)),P=l.getDerivedStateFromProps,(oe=typeof P=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x!==me||ae!==Y)&&cE(o,y,h,Y),Is=!1,ae=o.memoizedState,y.state=ae,eu(o,h,y,g),Jc();var le=o.memoizedState;x!==me||ae!==le||Is||i!==null&&i.dependencies!==null&&xd(i.dependencies)?(typeof P=="function"&&(Sg(o,l,P,h),le=o.memoizedState),(de=Is||lE(o,l,de,h,ae,le,Y)||i!==null&&i.dependencies!==null&&xd(i.dependencies))?(oe||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(h,le,Y),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(h,le,Y)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||x===i.memoizedProps&&ae===i.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&ae===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=le),y.props=h,y.state=le,y.context=Y,h=de):(typeof y.componentDidUpdate!="function"||x===i.memoizedProps&&ae===i.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&ae===i.memoizedState||(o.flags|=1024),h=!1)}return y=h,Hd(i,o),h=(o.flags&128)!==0,y||h?(y=o.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,i!==null&&h?(o.child=pl(o,i.child,null,g),o.child=pl(o,null,l,g)):vn(i,o,l,g),o.memoizedState=y.state,i=o.child):i=is(i,o,g),i}function TE(i,o,l,h){return qc(),o.flags|=256,vn(i,o,l,h),o.child}var Ng={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ig(i){return{baseLanes:i,cachePool:hw()}}function Dg(i,o,l){return i=i!==null?i.childLanes&~l:0,o&&(i|=Or),i}function SE(i,o,l){var h=o.pendingProps,g=!1,y=(o.flags&128)!==0,x;if((x=y)||(x=i!==null&&i.memoizedState===null?!1:(rn.current&2)!==0),x&&(g=!0,o.flags&=-129),x=(o.flags&32)!==0,o.flags&=-33,i===null){if(ot){if(g?Ps(o):Os(),ot){var P=Dt,Y;if(Y=P){e:{for(Y=P,P=bi;Y.nodeType!==8;){if(!P){P=null;break e}if(Y=Xr(Y.nextSibling),Y===null){P=null;break e}}P=Y}P!==null?(o.memoizedState={dehydrated:P,treeContext:Wo!==null?{id:Zi,overflow:Ji}:null,retryLane:536870912,hydrationErrors:null},Y=or(18,null,null,0),Y.stateNode=P,Y.return=o,o.child=Y,Bn=o,Dt=null,Y=!0):Y=!1}Y||Jo(o)}if(P=o.memoizedState,P!==null&&(P=P.dehydrated,P!==null))return p0(P)?o.lanes=32:o.lanes=536870912,null;rs(o)}return P=h.children,h=h.fallback,g?(Os(),g=o.mode,P=Fd({mode:"hidden",children:P},g),h=Xo(h,g,l,null),P.return=o,h.return=o,P.sibling=h,o.child=P,g=o.child,g.memoizedState=Ig(l),g.childLanes=Dg(i,x,l),o.memoizedState=Ng,h):(Ps(o),kg(o,P))}if(Y=i.memoizedState,Y!==null&&(P=Y.dehydrated,P!==null)){if(y)o.flags&256?(Ps(o),o.flags&=-257,o=Mg(i,o,l)):o.memoizedState!==null?(Os(),o.child=i.child,o.flags|=128,o=null):(Os(),g=h.fallback,P=o.mode,h=Fd({mode:"visible",children:h.children},P),g=Xo(g,P,l,null),g.flags|=2,h.return=o,g.return=o,h.sibling=g,o.child=h,pl(o,i.child,null,l),h=o.child,h.memoizedState=Ig(l),h.childLanes=Dg(i,x,l),o.memoizedState=Ng,o=g);else if(Ps(o),p0(P)){if(x=P.nextSibling&&P.nextSibling.dataset,x)var oe=x.dgst;x=oe,h=Error(r(419)),h.stack="",h.digest=x,Gc({value:h,source:null,stack:null}),o=Mg(i,o,l)}else if(un||Yc(i,o,l,!1),x=(l&i.childLanes)!==0,un||x){if(x=vt,x!==null&&(h=l&-l,h=(h&42)!==0?1:oi(h),h=(h&(x.suspendedLanes|l))!==0?0:h,h!==0&&h!==Y.retryLane))throw Y.retryLane=h,rl(i,h),hr(x,i,h),gE;P.data==="$?"||Qg(),o=Mg(i,o,l)}else P.data==="$?"?(o.flags|=192,o.child=i.child,o=null):(i=Y.treeContext,Dt=Xr(P.nextSibling),Bn=o,ot=!0,Zo=null,bi=!1,i!==null&&(kr[Mr++]=Zi,kr[Mr++]=Ji,kr[Mr++]=Wo,Zi=i.id,Ji=i.overflow,Wo=o),o=kg(o,h.children),o.flags|=4096);return o}return g?(Os(),g=h.fallback,P=o.mode,Y=i.child,oe=Y.sibling,h=Qi(Y,{mode:"hidden",children:h.children}),h.subtreeFlags=Y.subtreeFlags&65011712,oe!==null?g=Qi(oe,g):(g=Xo(g,P,l,null),g.flags|=2),g.return=o,h.return=o,h.sibling=g,o.child=h,h=g,g=o.child,P=i.child.memoizedState,P===null?P=Ig(l):(Y=P.cachePool,Y!==null?(oe=nn._currentValue,Y=Y.parent!==oe?{parent:oe,pool:oe}:Y):Y=hw(),P={baseLanes:P.baseLanes|l,cachePool:Y}),g.memoizedState=P,g.childLanes=Dg(i,x,l),o.memoizedState=Ng,h):(Ps(o),l=i.child,i=l.sibling,l=Qi(l,{mode:"visible",children:h.children}),l.return=o,l.sibling=null,i!==null&&(x=o.deletions,x===null?(o.deletions=[i],o.flags|=16):x.push(i)),o.child=l,o.memoizedState=null,l)}function kg(i,o){return o=Fd({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Fd(i,o){return i=or(22,i,null,o),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Mg(i,o,l){return pl(o,i.child,null,l),i=kg(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function AE(i,o,l){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),Qm(i.return,o,l)}function Pg(i,o,l,h,g){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:g}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=l,y.tailMode=g)}function RE(i,o,l){var h=o.pendingProps,g=h.revealOrder,y=h.tail;if(vn(i,o,h.children,l),h=rn.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&AE(i,l,o);else if(i.tag===19)AE(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}switch(W(rn,h),g){case"forwards":for(l=o.child,g=null;l!==null;)i=l.alternate,i!==null&&Ud(i)===null&&(g=l),l=l.sibling;l=g,l===null?(g=o.child,o.child=null):(g=l.sibling,l.sibling=null),Pg(o,!1,g,l,y);break;case"backwards":for(l=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&Ud(i)===null){o.child=g;break}i=g.sibling,g.sibling=l,l=g,g=i}Pg(o,!0,l,null,y);break;case"together":Pg(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function is(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),js|=o.lanes,(l&o.childLanes)===0)if(i!==null){if(Yc(i,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(r(153));if(o.child!==null){for(i=o.child,l=Qi(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=Qi(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function Og(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&xd(i)))}function Kk(i,o,l){switch(o.tag){case 3:_e(o,o.stateNode.containerInfo),Ns(o,nn,i.memoizedState.cache),qc();break;case 27:case 5:Ce(o);break;case 4:_e(o,o.stateNode.containerInfo);break;case 10:Ns(o,o.type,o.memoizedProps.value);break;case 13:var h=o.memoizedState;if(h!==null)return h.dehydrated!==null?(Ps(o),o.flags|=128,null):(l&o.child.childLanes)!==0?SE(i,o,l):(Ps(o),i=is(i,o,l),i!==null?i.sibling:null);Ps(o);break;case 19:var g=(i.flags&128)!==0;if(h=(l&o.childLanes)!==0,h||(Yc(i,o,l,!1),h=(l&o.childLanes)!==0),g){if(h)return RE(i,o,l);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),W(rn,rn.current),h)break;return null;case 22:case 23:return o.lanes=0,bE(i,o,l);case 24:Ns(o,nn,i.memoizedState.cache)}return is(i,o,l)}function CE(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps)un=!0;else{if(!Og(i,l)&&(o.flags&128)===0)return un=!1,Kk(i,o,l);un=(i.flags&131072)!==0}else un=!1,ot&&(o.flags&1048576)!==0&&iw(o,Ed,o.index);switch(o.lanes=0,o.tag){case 16:e:{i=o.pendingProps;var h=o.elementType,g=h._init;if(h=g(h._payload),o.type=h,typeof h=="function")$m(h)?(i=ia(h,i),o.tag=1,o=xE(null,o,h,i,l)):(o.tag=0,o=Cg(null,o,h,i,l));else{if(h!=null){if(g=h.$$typeof,g===U){o.tag=11,o=yE(null,o,h,i,l);break e}else if(g===I){o.tag=14,o=vE(null,o,h,i,l);break e}}throw o=V(h)||h,Error(r(306,o,""))}}return o;case 0:return Cg(i,o,o.type,o.pendingProps,l);case 1:return h=o.type,g=ia(h,o.pendingProps),xE(i,o,h,g,l);case 3:e:{if(_e(o,o.stateNode.containerInfo),i===null)throw Error(r(387));h=o.pendingProps;var y=o.memoizedState;g=y.element,ig(i,o),eu(o,h,null,l);var x=o.memoizedState;if(h=x.cache,Ns(o,nn,h),h!==y.cache&&Zm(o,[nn],l,!0),Jc(),h=x.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:x.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=TE(i,o,h,l);break e}else if(h!==g){g=Ir(Error(r(424)),o),Gc(g),o=TE(i,o,h,l);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Dt=Xr(i.firstChild),Bn=o,ot=!0,Zo=null,bi=!0,l=oE(o,null,h,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(qc(),h===g){o=is(i,o,l);break e}vn(i,o,h,l)}o=o.child}return o;case 26:return Hd(i,o),i===null?(l=k1(o.type,null,o.pendingProps,null))?o.memoizedState=l:ot||(l=o.type,i=o.pendingProps,h=rf(ue.current).createElement(l),h[Lt]=o,h[It]=i,bn(h,l,i),Tt(h),o.stateNode=h):o.memoizedState=k1(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return Ce(o),i===null&&ot&&(h=o.stateNode=N1(o.type,o.pendingProps,ue.current),Bn=o,bi=!0,g=Dt,$s(o.type)?(m0=g,Dt=Xr(h.firstChild)):Dt=g),vn(i,o,o.pendingProps.children,l),Hd(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&ot&&((g=h=Dt)&&(h=EM(h,o.type,o.pendingProps,bi),h!==null?(o.stateNode=h,Bn=o,Dt=Xr(h.firstChild),bi=!1,g=!0):g=!1),g||Jo(o)),Ce(o),g=o.type,y=o.pendingProps,x=i!==null?i.memoizedProps:null,h=y.children,h0(g,y)?h=null:x!==null&&h0(g,x)&&(o.flags|=32),o.memoizedState!==null&&(g=ug(i,o,jk,null,null,l),Eu._currentValue=g),Hd(i,o),vn(i,o,h,l),o.child;case 6:return i===null&&ot&&((i=l=Dt)&&(l=xM(l,o.pendingProps,bi),l!==null?(o.stateNode=l,Bn=o,Dt=null,i=!0):i=!1),i||Jo(o)),null;case 13:return SE(i,o,l);case 4:return _e(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=pl(o,null,h,l):vn(i,o,h,l),o.child;case 11:return yE(i,o,o.type,o.pendingProps,l);case 7:return vn(i,o,o.pendingProps,l),o.child;case 8:return vn(i,o,o.pendingProps.children,l),o.child;case 12:return vn(i,o,o.pendingProps.children,l),o.child;case 10:return h=o.pendingProps,Ns(o,o.type,h.value),vn(i,o,h.children,l),o.child;case 9:return g=o.type._context,h=o.pendingProps.children,ta(o),g=An(g),h=h(g),o.flags|=1,vn(i,o,h,l),o.child;case 14:return vE(i,o,o.type,o.pendingProps,l);case 15:return _E(i,o,o.type,o.pendingProps,l);case 19:return RE(i,o,l);case 31:return h=o.pendingProps,l=o.mode,h={mode:h.mode,children:h.children},i===null?(l=Fd(h,l),l.ref=o.ref,o.child=l,l.return=o,o=l):(l=Qi(i.child,h),l.ref=o.ref,o.child=l,l.return=o,o=l),o;case 22:return bE(i,o,l);case 24:return ta(o),h=An(nn),i===null?(g=tg(),g===null&&(g=vt,y=Jm(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=l),g=y),o.memoizedState={parent:h,cache:g},rg(o),Ns(o,nn,g)):((i.lanes&l)!==0&&(ig(i,o),eu(o,null,null,l),Jc()),g=i.memoizedState,y=o.memoizedState,g.parent!==h?(g={parent:h,cache:h},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),Ns(o,nn,h)):(h=y.cache,Ns(o,nn,h),h!==g.cache&&Zm(o,[nn],l,!0))),vn(i,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function ss(i){i.flags|=4}function NE(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!L1(o)){if(o=Pr.current,o!==null&&((tt&4194048)===tt?wi!==null:(tt&62914560)!==tt&&(tt&536870912)===0||o!==wi))throw Qc=ng,dw;i.flags|=8192}}function $d(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?Fr():536870912,i.lanes|=o,vl|=o)}function au(i,o){if(!ot)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function St(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(o)for(var g=i.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=h,i.childLanes=l,o}function Xk(i,o,l){var h=o.pendingProps;switch(Km(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(o),null;case 1:return St(o),null;case 3:return l=o.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),ts(nn),Ae(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&($c(o)?ss(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,aw())),St(o),null;case 26:return l=o.memoizedState,i===null?(ss(o),l!==null?(St(o),NE(o,l)):(St(o),o.flags&=-16777217)):l?l!==i.memoizedState?(ss(o),St(o),NE(o,l)):(St(o),o.flags&=-16777217):(i.memoizedProps!==h&&ss(o),St(o),o.flags&=-16777217),null;case 27:rt(o),l=ue.current;var g=o.type;if(i!==null&&o.stateNode!=null)i.memoizedProps!==h&&ss(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return St(o),null}i=re.current,$c(o)?sw(o):(i=N1(g,h,l),o.stateNode=i,ss(o))}return St(o),null;case 5:if(rt(o),l=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==h&&ss(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return St(o),null}if(i=re.current,$c(o))sw(o);else{switch(g=rf(ue.current),i){case 1:i=g.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=g.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=g.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof h.is=="string"?g.createElement("select",{is:h.is}):g.createElement("select"),h.multiple?i.multiple=!0:h.size&&(i.size=h.size);break;default:i=typeof h.is=="string"?g.createElement(l,{is:h.is}):g.createElement(l)}}i[Lt]=o,i[It]=h;e:for(g=o.child;g!==null;){if(g.tag===5||g.tag===6)i.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===o)break e;for(;g.sibling===null;){if(g.return===null||g.return===o)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}o.stateNode=i;e:switch(bn(i,l,h),l){case"button":case"input":case"select":case"textarea":i=!!h.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&ss(o)}}return St(o),o.flags&=-16777217,null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==h&&ss(o);else{if(typeof h!="string"&&o.stateNode===null)throw Error(r(166));if(i=ue.current,$c(o)){if(i=o.stateNode,l=o.memoizedProps,h=null,g=Bn,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}i[Lt]=o,i=!!(i.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||E1(i.nodeValue,l)),i||Jo(o)}else i=rf(i).createTextNode(h),i[Lt]=o,o.stateNode=i}return St(o),null;case 13:if(h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=$c(o),h!==null&&h.dehydrated!==null){if(i===null){if(!g)throw Error(r(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Lt]=o}else qc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;St(o),g=!1}else g=aw(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(rs(o),o):(rs(o),null)}if(rs(o),(o.flags&128)!==0)return o.lanes=l,o;if(l=h!==null,i=i!==null&&i.memoizedState!==null,l){h=o.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool);var y=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),y!==g&&(h.flags|=2048)}return l!==i&&l&&(o.child.flags|=8192),$d(o,o.updateQueue),St(o),null;case 4:return Ae(),i===null&&o0(o.stateNode.containerInfo),St(o),null;case 10:return ts(o.type),St(o),null;case 19:if(ne(rn),g=o.memoizedState,g===null)return St(o),null;if(h=(o.flags&128)!==0,y=g.rendering,y===null)if(h)au(g,!1);else{if(kt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(y=Ud(i),y!==null){for(o.flags|=128,au(g,!1),i=y.updateQueue,o.updateQueue=i,$d(o,i),o.subtreeFlags=0,i=l,l=o.child;l!==null;)rw(l,i),l=l.sibling;return W(rn,rn.current&1|2),o.child}i=i.sibling}g.tail!==null&&je()>Yd&&(o.flags|=128,h=!0,au(g,!1),o.lanes=4194304)}else{if(!h)if(i=Ud(y),i!==null){if(o.flags|=128,h=!0,i=i.updateQueue,o.updateQueue=i,$d(o,i),au(g,!0),g.tail===null&&g.tailMode==="hidden"&&!y.alternate&&!ot)return St(o),null}else 2*je()-g.renderingStartTime>Yd&&l!==536870912&&(o.flags|=128,h=!0,au(g,!1),o.lanes=4194304);g.isBackwards?(y.sibling=o.child,o.child=y):(i=g.last,i!==null?i.sibling=y:o.child=y,g.last=y)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=je(),o.sibling=null,i=rn.current,W(rn,h?i&1|2:i&1),o):(St(o),null);case 22:case 23:return rs(o),lg(),h=o.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(o.flags|=8192):h&&(o.flags|=8192),h?(l&536870912)!==0&&(o.flags&128)===0&&(St(o),o.subtreeFlags&6&&(o.flags|=8192)):St(o),l=o.updateQueue,l!==null&&$d(o,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==l&&(o.flags|=2048),i!==null&&ne(na),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),ts(nn),St(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function Wk(i,o){switch(Km(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return ts(nn),Ae(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return rt(o),null;case 13:if(rs(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(r(340));qc()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return ne(rn),null;case 4:return Ae(),null;case 10:return ts(o.type),null;case 22:case 23:return rs(o),lg(),i!==null&&ne(na),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return ts(nn),null;case 25:return null;default:return null}}function IE(i,o){switch(Km(o),o.tag){case 3:ts(nn),Ae();break;case 26:case 27:case 5:rt(o);break;case 4:Ae();break;case 13:rs(o);break;case 19:ne(rn);break;case 10:ts(o.type);break;case 22:case 23:rs(o),lg(),i!==null&&ne(na);break;case 24:ts(nn)}}function lu(i,o){try{var l=o.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var g=h.next;l=g;do{if((l.tag&i)===i){h=void 0;var y=l.create,x=l.inst;h=y(),x.destroy=h}l=l.next}while(l!==g)}}catch(P){gt(o,o.return,P)}}function Vs(i,o,l){try{var h=o.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var y=g.next;h=y;do{if((h.tag&i)===i){var x=h.inst,P=x.destroy;if(P!==void 0){x.destroy=void 0,g=o;var Y=l,oe=P;try{oe()}catch(de){gt(g,Y,de)}}}h=h.next}while(h!==y)}}catch(de){gt(o,o.return,de)}}function DE(i){var o=i.updateQueue;if(o!==null){var l=i.stateNode;try{vw(o,l)}catch(h){gt(i,i.return,h)}}}function kE(i,o,l){l.props=ia(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(h){gt(i,o,h)}}function cu(i,o){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof l=="function"?i.refCleanup=l(h):l.current=h}}catch(g){gt(i,o,g)}}function Ei(i,o){var l=i.ref,h=i.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(g){gt(i,o,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){gt(i,o,g)}else l.current=null}function ME(i){var o=i.type,l=i.memoizedProps,h=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(g){gt(i,i.return,g)}}function Vg(i,o,l){try{var h=i.stateNode;yM(h,i.type,l,o),h[It]=o}catch(g){gt(i,i.return,g)}}function PE(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&$s(i.type)||i.tag===4}function Lg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||PE(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&$s(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function zg(i,o,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(i),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=nf));else if(h!==4&&(h===27&&$s(i.type)&&(l=i.stateNode,o=null),i=i.child,i!==null))for(zg(i,o,l),i=i.sibling;i!==null;)zg(i,o,l),i=i.sibling}function qd(i,o,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(h!==4&&(h===27&&$s(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(qd(i,o,l),i=i.sibling;i!==null;)qd(i,o,l),i=i.sibling}function OE(i){var o=i.stateNode,l=i.memoizedProps;try{for(var h=i.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);bn(o,h,l),o[Lt]=i,o[It]=l}catch(y){gt(i,i.return,y)}}var os=!1,Ut=!1,Ug=!1,VE=typeof WeakSet=="function"?WeakSet:Set,hn=null;function Qk(i,o){if(i=i.containerInfo,c0=uf,i=Yb(i),Lm(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var g=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var x=0,P=-1,Y=-1,oe=0,de=0,me=i,ae=null;t:for(;;){for(var le;me!==l||g!==0&&me.nodeType!==3||(P=x+g),me!==y||h!==0&&me.nodeType!==3||(Y=x+h),me.nodeType===3&&(x+=me.nodeValue.length),(le=me.firstChild)!==null;)ae=me,me=le;for(;;){if(me===i)break t;if(ae===l&&++oe===g&&(P=x),ae===y&&++de===h&&(Y=x),(le=me.nextSibling)!==null)break;me=ae,ae=me.parentNode}me=le}l=P===-1||Y===-1?null:{start:P,end:Y}}else l=null}l=l||{start:0,end:0}}else l=null;for(u0={focusedElem:i,selectionRange:l},uf=!1,hn=o;hn!==null;)if(o=hn,i=o.child,(o.subtreeFlags&1024)!==0&&i!==null)i.return=o,hn=i;else for(;hn!==null;){switch(o=hn,y=o.alternate,i=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,l=o,g=y.memoizedProps,y=y.memoizedState,h=l.stateNode;try{var Oe=ia(l.type,g,l.elementType===l.type);i=h.getSnapshotBeforeUpdate(Oe,y),h.__reactInternalSnapshotBeforeUpdate=i}catch(Ie){gt(l,l.return,Ie)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,l=i.nodeType,l===9)f0(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":f0(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=o.sibling,i!==null){i.return=o.return,hn=i;break}hn=o.return}}function LE(i,o,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:Ls(i,l),h&4&&lu(5,l);break;case 1:if(Ls(i,l),h&4)if(i=l.stateNode,o===null)try{i.componentDidMount()}catch(x){gt(l,l.return,x)}else{var g=ia(l.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(g,o,i.__reactInternalSnapshotBeforeUpdate)}catch(x){gt(l,l.return,x)}}h&64&&DE(l),h&512&&cu(l,l.return);break;case 3:if(Ls(i,l),h&64&&(i=l.updateQueue,i!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{vw(i,o)}catch(x){gt(l,l.return,x)}}break;case 27:o===null&&h&4&&OE(l);case 26:case 5:Ls(i,l),o===null&&h&4&&ME(l),h&512&&cu(l,l.return);break;case 12:Ls(i,l);break;case 13:Ls(i,l),h&4&&jE(i,l),h&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=oM.bind(null,l),TM(i,l))));break;case 22:if(h=l.memoizedState!==null||os,!h){o=o!==null&&o.memoizedState!==null||Ut,g=os;var y=Ut;os=h,(Ut=o)&&!y?zs(i,l,(l.subtreeFlags&8772)!==0):Ls(i,l),os=g,Ut=y}break;case 30:break;default:Ls(i,l)}}function zE(i){var o=i.alternate;o!==null&&(i.alternate=null,zE(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&ci(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var wt=null,Yn=!1;function as(i,o,l){for(l=l.child;l!==null;)UE(i,o,l),l=l.sibling}function UE(i,o,l){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(at,l)}catch{}switch(l.tag){case 26:Ut||Ei(l,o),as(i,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ut||Ei(l,o);var h=wt,g=Yn;$s(l.type)&&(wt=l.stateNode,Yn=!1),as(i,o,l),vu(l.stateNode),wt=h,Yn=g;break;case 5:Ut||Ei(l,o);case 6:if(h=wt,g=Yn,wt=null,as(i,o,l),wt=h,Yn=g,wt!==null)if(Yn)try{(wt.nodeType===9?wt.body:wt.nodeName==="HTML"?wt.ownerDocument.body:wt).removeChild(l.stateNode)}catch(y){gt(l,o,y)}else try{wt.removeChild(l.stateNode)}catch(y){gt(l,o,y)}break;case 18:wt!==null&&(Yn?(i=wt,R1(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Au(i)):R1(wt,l.stateNode));break;case 4:h=wt,g=Yn,wt=l.stateNode.containerInfo,Yn=!0,as(i,o,l),wt=h,Yn=g;break;case 0:case 11:case 14:case 15:Ut||Vs(2,l,o),Ut||Vs(4,l,o),as(i,o,l);break;case 1:Ut||(Ei(l,o),h=l.stateNode,typeof h.componentWillUnmount=="function"&&kE(l,o,h)),as(i,o,l);break;case 21:as(i,o,l);break;case 22:Ut=(h=Ut)||l.memoizedState!==null,as(i,o,l),Ut=h;break;default:as(i,o,l)}}function jE(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Au(i)}catch(l){gt(o,o.return,l)}}function Zk(i){switch(i.tag){case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new VE),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new VE),o;default:throw Error(r(435,i.tag))}}function jg(i,o){var l=Zk(i);o.forEach(function(h){var g=aM.bind(null,i,h);l.has(h)||(l.add(h),h.then(g,g))})}function ar(i,o){var l=o.deletions;if(l!==null)for(var h=0;h<l.length;h++){var g=l[h],y=i,x=o,P=x;e:for(;P!==null;){switch(P.tag){case 27:if($s(P.type)){wt=P.stateNode,Yn=!1;break e}break;case 5:wt=P.stateNode,Yn=!1;break e;case 3:case 4:wt=P.stateNode.containerInfo,Yn=!0;break e}P=P.return}if(wt===null)throw Error(r(160));UE(y,x,g),wt=null,Yn=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)BE(o,i),o=o.sibling}var Kr=null;function BE(i,o){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ar(o,i),lr(i),h&4&&(Vs(3,i,i.return),lu(3,i),Vs(5,i,i.return));break;case 1:ar(o,i),lr(i),h&512&&(Ut||l===null||Ei(l,l.return)),h&64&&os&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var g=Kr;if(ar(o,i),lr(i),h&512&&(Ut||l===null||Ei(l,l.return)),h&4){var y=l!==null?l.memoizedState:null;if(h=i.memoizedState,l===null)if(h===null)if(i.stateNode===null){e:{h=i.type,l=i.memoizedProps,g=g.ownerDocument||g;t:switch(h){case"title":y=g.getElementsByTagName("title")[0],(!y||y[Hi]||y[Lt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(h),g.head.insertBefore(y,g.querySelector("head > title"))),bn(y,h,l),y[Lt]=i,Tt(y),h=y;break e;case"link":var x=O1("link","href",g).get(h+(l.href||""));if(x){for(var P=0;P<x.length;P++)if(y=x[P],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){x.splice(P,1);break t}}y=g.createElement(h),bn(y,h,l),g.head.appendChild(y);break;case"meta":if(x=O1("meta","content",g).get(h+(l.content||""))){for(P=0;P<x.length;P++)if(y=x[P],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){x.splice(P,1);break t}}y=g.createElement(h),bn(y,h,l),g.head.appendChild(y);break;default:throw Error(r(468,h))}y[Lt]=i,Tt(y),h=y}i.stateNode=h}else V1(g,i.type,i.stateNode);else i.stateNode=P1(g,h,i.memoizedProps);else y!==h?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,h===null?V1(g,i.type,i.stateNode):P1(g,h,i.memoizedProps)):h===null&&i.stateNode!==null&&Vg(i,i.memoizedProps,l.memoizedProps)}break;case 27:ar(o,i),lr(i),h&512&&(Ut||l===null||Ei(l,l.return)),l!==null&&h&4&&Vg(i,i.memoizedProps,l.memoizedProps);break;case 5:if(ar(o,i),lr(i),h&512&&(Ut||l===null||Ei(l,l.return)),i.flags&32){g=i.stateNode;try{Ar(g,"")}catch(le){gt(i,i.return,le)}}h&4&&i.stateNode!=null&&(g=i.memoizedProps,Vg(i,g,l!==null?l.memoizedProps:g)),h&1024&&(Ug=!0);break;case 6:if(ar(o,i),lr(i),h&4){if(i.stateNode===null)throw Error(r(162));h=i.memoizedProps,l=i.stateNode;try{l.nodeValue=h}catch(le){gt(i,i.return,le)}}break;case 3:if(af=null,g=Kr,Kr=sf(o.containerInfo),ar(o,i),Kr=g,lr(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Au(o.containerInfo)}catch(le){gt(i,i.return,le)}Ug&&(Ug=!1,HE(i));break;case 4:h=Kr,Kr=sf(i.stateNode.containerInfo),ar(o,i),lr(i),Kr=h;break;case 12:ar(o,i),lr(i);break;case 13:ar(o,i),lr(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Gg=je()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,jg(i,h)));break;case 22:g=i.memoizedState!==null;var Y=l!==null&&l.memoizedState!==null,oe=os,de=Ut;if(os=oe||g,Ut=de||Y,ar(o,i),Ut=de,os=oe,lr(i),h&8192)e:for(o=i.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(l===null||Y||os||Ut||sa(i)),l=null,o=i;;){if(o.tag===5||o.tag===26){if(l===null){Y=l=o;try{if(y=Y.stateNode,g)x=y.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{P=Y.stateNode;var me=Y.memoizedProps.style,ae=me!=null&&me.hasOwnProperty("display")?me.display:null;P.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(le){gt(Y,Y.return,le)}}}else if(o.tag===6){if(l===null){Y=o;try{Y.stateNode.nodeValue=g?"":Y.memoizedProps}catch(le){gt(Y,Y.return,le)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}h&4&&(h=i.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,jg(i,l))));break;case 19:ar(o,i),lr(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,jg(i,h)));break;case 30:break;case 21:break;default:ar(o,i),lr(i)}}function lr(i){var o=i.flags;if(o&2){try{for(var l,h=i.return;h!==null;){if(PE(h)){l=h;break}h=h.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var g=l.stateNode,y=Lg(i);qd(i,y,g);break;case 5:var x=l.stateNode;l.flags&32&&(Ar(x,""),l.flags&=-33);var P=Lg(i);qd(i,P,x);break;case 3:case 4:var Y=l.stateNode.containerInfo,oe=Lg(i);zg(i,oe,Y);break;default:throw Error(r(161))}}catch(de){gt(i,i.return,de)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function HE(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;HE(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function Ls(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)LE(i,o.alternate,o),o=o.sibling}function sa(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Vs(4,o,o.return),sa(o);break;case 1:Ei(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&kE(o,o.return,l),sa(o);break;case 27:vu(o.stateNode);case 26:case 5:Ei(o,o.return),sa(o);break;case 22:o.memoizedState===null&&sa(o);break;case 30:sa(o);break;default:sa(o)}i=i.sibling}}function zs(i,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var h=o.alternate,g=i,y=o,x=y.flags;switch(y.tag){case 0:case 11:case 15:zs(g,y,l),lu(4,y);break;case 1:if(zs(g,y,l),h=y,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(oe){gt(h,h.return,oe)}if(h=y,g=h.updateQueue,g!==null){var P=h.stateNode;try{var Y=g.shared.hiddenCallbacks;if(Y!==null)for(g.shared.hiddenCallbacks=null,g=0;g<Y.length;g++)yw(Y[g],P)}catch(oe){gt(h,h.return,oe)}}l&&x&64&&DE(y),cu(y,y.return);break;case 27:OE(y);case 26:case 5:zs(g,y,l),l&&h===null&&x&4&&ME(y),cu(y,y.return);break;case 12:zs(g,y,l);break;case 13:zs(g,y,l),l&&x&4&&jE(g,y);break;case 22:y.memoizedState===null&&zs(g,y,l),cu(y,y.return);break;case 30:break;default:zs(g,y,l)}o=o.sibling}}function Bg(i,o){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Kc(l))}function Hg(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Kc(i))}function xi(i,o,l,h){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)FE(i,o,l,h),o=o.sibling}function FE(i,o,l,h){var g=o.flags;switch(o.tag){case 0:case 11:case 15:xi(i,o,l,h),g&2048&&lu(9,o);break;case 1:xi(i,o,l,h);break;case 3:xi(i,o,l,h),g&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Kc(i)));break;case 12:if(g&2048){xi(i,o,l,h),i=o.stateNode;try{var y=o.memoizedProps,x=y.id,P=y.onPostCommit;typeof P=="function"&&P(x,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Y){gt(o,o.return,Y)}}else xi(i,o,l,h);break;case 13:xi(i,o,l,h);break;case 23:break;case 22:y=o.stateNode,x=o.alternate,o.memoizedState!==null?y._visibility&2?xi(i,o,l,h):uu(i,o):y._visibility&2?xi(i,o,l,h):(y._visibility|=2,ml(i,o,l,h,(o.subtreeFlags&10256)!==0)),g&2048&&Bg(x,o);break;case 24:xi(i,o,l,h),g&2048&&Hg(o.alternate,o);break;default:xi(i,o,l,h)}}function ml(i,o,l,h,g){for(g=g&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var y=i,x=o,P=l,Y=h,oe=x.flags;switch(x.tag){case 0:case 11:case 15:ml(y,x,P,Y,g),lu(8,x);break;case 23:break;case 22:var de=x.stateNode;x.memoizedState!==null?de._visibility&2?ml(y,x,P,Y,g):uu(y,x):(de._visibility|=2,ml(y,x,P,Y,g)),g&&oe&2048&&Bg(x.alternate,x);break;case 24:ml(y,x,P,Y,g),g&&oe&2048&&Hg(x.alternate,x);break;default:ml(y,x,P,Y,g)}o=o.sibling}}function uu(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=i,h=o,g=h.flags;switch(h.tag){case 22:uu(l,h),g&2048&&Bg(h.alternate,h);break;case 24:uu(l,h),g&2048&&Hg(h.alternate,h);break;default:uu(l,h)}o=o.sibling}}var hu=8192;function gl(i){if(i.subtreeFlags&hu)for(i=i.child;i!==null;)$E(i),i=i.sibling}function $E(i){switch(i.tag){case 26:gl(i),i.flags&hu&&i.memoizedState!==null&&LM(Kr,i.memoizedState,i.memoizedProps);break;case 5:gl(i);break;case 3:case 4:var o=Kr;Kr=sf(i.stateNode.containerInfo),gl(i),Kr=o;break;case 22:i.memoizedState===null&&(o=i.alternate,o!==null&&o.memoizedState!==null?(o=hu,hu=16777216,gl(i),hu=o):gl(i));break;default:gl(i)}}function qE(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function du(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var h=o[l];hn=h,YE(h,i)}qE(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)GE(i),i=i.sibling}function GE(i){switch(i.tag){case 0:case 11:case 15:du(i),i.flags&2048&&Vs(9,i,i.return);break;case 3:du(i);break;case 12:du(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Gd(i)):du(i);break;default:du(i)}}function Gd(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var h=o[l];hn=h,YE(h,i)}qE(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Vs(8,o,o.return),Gd(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,Gd(o));break;default:Gd(o)}i=i.sibling}}function YE(i,o){for(;hn!==null;){var l=hn;switch(l.tag){case 0:case 11:case 15:Vs(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Kc(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,hn=h;else e:for(l=i;hn!==null;){h=hn;var g=h.sibling,y=h.return;if(zE(h),h===l){hn=null;break e}if(g!==null){g.return=y,hn=g;break e}hn=y}}}var Jk={getCacheForType:function(i){var o=An(nn),l=o.data.get(i);return l===void 0&&(l=i(),o.data.set(i,l)),l}},eM=typeof WeakMap=="function"?WeakMap:Map,ut=0,vt=null,Xe=null,tt=0,ht=0,cr=null,Us=!1,yl=!1,Fg=!1,ls=0,kt=0,js=0,oa=0,$g=0,Or=0,vl=0,fu=null,Kn=null,qg=!1,Gg=0,Yd=1/0,Kd=null,Bs=null,_n=0,Hs=null,_l=null,bl=0,Yg=0,Kg=null,KE=null,pu=0,Xg=null;function ur(){if((ut&2)!==0&&tt!==0)return tt&-tt;if(L.T!==null){var i=al;return i!==0?i:n0()}return ai()}function XE(){Or===0&&(Or=(tt&536870912)===0||ot?Bi():536870912);var i=Pr.current;return i!==null&&(i.flags|=32),Or}function hr(i,o,l){(i===vt&&(ht===2||ht===9)||i.cancelPendingCommit!==null)&&(wl(i,0),Fs(i,tt,Or,!1)),br(i,l),((ut&2)===0||i!==vt)&&(i===vt&&((ut&2)===0&&(oa|=l),kt===4&&Fs(i,tt,Or,!1)),Ti(i))}function WE(i,o,l){if((ut&6)!==0)throw Error(r(327));var h=!l&&(o&124)===0&&(o&i.expiredLanes)===0||zn(i,o),g=h?rM(i,o):Zg(i,o,!0),y=h;do{if(g===0){yl&&!h&&Fs(i,o,0,!1);break}else{if(l=i.current.alternate,y&&!tM(l)){g=Zg(i,o,!1),y=!1;continue}if(g===2){if(y=o,i.errorRecoveryDisabledLanes&y)var x=0;else x=i.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){o=x;e:{var P=i;g=fu;var Y=P.current.memoizedState.isDehydrated;if(Y&&(wl(P,x).flags|=256),x=Zg(P,x,!1),x!==2){if(Fg&&!Y){P.errorRecoveryDisabledLanes|=y,oa|=y,g=4;break e}y=Kn,Kn=g,y!==null&&(Kn===null?Kn=y:Kn.push.apply(Kn,y))}g=x}if(y=!1,g!==2)continue}}if(g===1){wl(i,0),Fs(i,o,0,!0);break}e:{switch(h=i,y=g,y){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Fs(h,o,Or,!Us);break e;case 2:Kn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(g=Gg+300-je(),10<g)){if(Fs(h,o,Or,!Us),mn(h,0,!0)!==0)break e;h.timeoutHandle=S1(QE.bind(null,h,l,Kn,Kd,qg,o,Or,oa,vl,Us,y,2,-0,0),g);break e}QE(h,l,Kn,Kd,qg,o,Or,oa,vl,Us,y,0,-0,0)}}break}while(!0);Ti(i)}function QE(i,o,l,h,g,y,x,P,Y,oe,de,me,ae,le){if(i.timeoutHandle=-1,me=o.subtreeFlags,(me&8192||(me&16785408)===16785408)&&(wu={stylesheets:null,count:0,unsuspend:VM},$E(o),me=zM(),me!==null)){i.cancelPendingCommit=me(i1.bind(null,i,o,y,l,h,g,x,P,Y,de,1,ae,le)),Fs(i,y,x,!oe);return}i1(i,o,y,l,h,g,x,P,Y)}function tM(i){for(var o=i;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var g=l[h],y=g.getSnapshot;g=g.value;try{if(!sr(y(),g))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Fs(i,o,l,h){o&=~$g,o&=~oa,i.suspendedLanes|=o,i.pingedLanes&=~o,h&&(i.warmLanes|=o),h=i.expirationTimes;for(var g=o;0<g;){var y=31-xt(g),x=1<<y;h[y]=-1,g&=~x}l!==0&&wr(i,l,o)}function Xd(){return(ut&6)===0?(mu(0),!1):!0}function Wg(){if(Xe!==null){if(ht===0)var i=Xe.return;else i=Xe,es=ea=null,fg(i),fl=null,su=0,i=Xe;for(;i!==null;)IE(i.alternate,i),i=i.return;Xe=null}}function wl(i,o){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,_M(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Wg(),vt=i,Xe=l=Qi(i.current,null),tt=o,ht=0,cr=null,Us=!1,yl=zn(i,o),Fg=!1,vl=Or=$g=oa=js=kt=0,Kn=fu=null,qg=!1,(o&8)!==0&&(o|=o&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=o;0<h;){var g=31-xt(h),y=1<<g;o|=i[g],h&=~y}return ls=o,yd(),l}function ZE(i,o){Fe=null,L.H=Vd,o===Wc||o===Ad?(o=mw(),ht=3):o===dw?(o=mw(),ht=4):ht=o===gE?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,cr=o,Xe===null&&(kt=1,Bd(i,Ir(o,i.current)))}function JE(){var i=L.H;return L.H=Vd,i===null?Vd:i}function e1(){var i=L.A;return L.A=Jk,i}function Qg(){kt=4,Us||(tt&4194048)!==tt&&Pr.current!==null||(yl=!0),(js&134217727)===0&&(oa&134217727)===0||vt===null||Fs(vt,tt,Or,!1)}function Zg(i,o,l){var h=ut;ut|=2;var g=JE(),y=e1();(vt!==i||tt!==o)&&(Kd=null,wl(i,o)),o=!1;var x=kt;e:do try{if(ht!==0&&Xe!==null){var P=Xe,Y=cr;switch(ht){case 8:Wg(),x=6;break e;case 3:case 2:case 9:case 6:Pr.current===null&&(o=!0);var oe=ht;if(ht=0,cr=null,El(i,P,Y,oe),l&&yl){x=0;break e}break;default:oe=ht,ht=0,cr=null,El(i,P,Y,oe)}}nM(),x=kt;break}catch(de){ZE(i,de)}while(!0);return o&&i.shellSuspendCounter++,es=ea=null,ut=h,L.H=g,L.A=y,Xe===null&&(vt=null,tt=0,yd()),x}function nM(){for(;Xe!==null;)t1(Xe)}function rM(i,o){var l=ut;ut|=2;var h=JE(),g=e1();vt!==i||tt!==o?(Kd=null,Yd=je()+500,wl(i,o)):yl=zn(i,o);e:do try{if(ht!==0&&Xe!==null){o=Xe;var y=cr;t:switch(ht){case 1:ht=0,cr=null,El(i,o,y,1);break;case 2:case 9:if(fw(y)){ht=0,cr=null,n1(o);break}o=function(){ht!==2&&ht!==9||vt!==i||(ht=7),Ti(i)},y.then(o,o);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:fw(y)?(ht=0,cr=null,n1(o)):(ht=0,cr=null,El(i,o,y,7));break;case 5:var x=null;switch(Xe.tag){case 26:x=Xe.memoizedState;case 5:case 27:var P=Xe;if(!x||L1(x)){ht=0,cr=null;var Y=P.sibling;if(Y!==null)Xe=Y;else{var oe=P.return;oe!==null?(Xe=oe,Wd(oe)):Xe=null}break t}}ht=0,cr=null,El(i,o,y,5);break;case 6:ht=0,cr=null,El(i,o,y,6);break;case 8:Wg(),kt=6;break e;default:throw Error(r(462))}}iM();break}catch(de){ZE(i,de)}while(!0);return es=ea=null,L.H=h,L.A=g,ut=l,Xe!==null?0:(vt=null,tt=0,yd(),kt)}function iM(){for(;Xe!==null&&!st();)t1(Xe)}function t1(i){var o=CE(i.alternate,i,ls);i.memoizedProps=i.pendingProps,o===null?Wd(i):Xe=o}function n1(i){var o=i,l=o.alternate;switch(o.tag){case 15:case 0:o=EE(l,o,o.pendingProps,o.type,void 0,tt);break;case 11:o=EE(l,o,o.pendingProps,o.type.render,o.ref,tt);break;case 5:fg(o);default:IE(l,o),o=Xe=rw(o,ls),o=CE(l,o,ls)}i.memoizedProps=i.pendingProps,o===null?Wd(i):Xe=o}function El(i,o,l,h){es=ea=null,fg(o),fl=null,su=0;var g=o.return;try{if(Yk(i,g,o,l,tt)){kt=1,Bd(i,Ir(l,i.current)),Xe=null;return}}catch(y){if(g!==null)throw Xe=g,y;kt=1,Bd(i,Ir(l,i.current)),Xe=null;return}o.flags&32768?(ot||h===1?i=!0:yl||(tt&536870912)!==0?i=!1:(Us=i=!0,(h===2||h===9||h===3||h===6)&&(h=Pr.current,h!==null&&h.tag===13&&(h.flags|=16384))),r1(o,i)):Wd(o)}function Wd(i){var o=i;do{if((o.flags&32768)!==0){r1(o,Us);return}i=o.return;var l=Xk(o.alternate,o,ls);if(l!==null){Xe=l;return}if(o=o.sibling,o!==null){Xe=o;return}Xe=o=i}while(o!==null);kt===0&&(kt=5)}function r1(i,o){do{var l=Wk(i.alternate,i);if(l!==null){l.flags&=32767,Xe=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(i=i.sibling,i!==null)){Xe=i;return}Xe=i=l}while(i!==null);kt=6,Xe=null}function i1(i,o,l,h,g,y,x,P,Y){i.cancelPendingCommit=null;do Qd();while(_n!==0);if((ut&6)!==0)throw Error(r(327));if(o!==null){if(o===i.current)throw Error(r(177));if(y=o.lanes|o.childLanes,y|=Hm,nr(i,l,y,x,P,Y),i===vt&&(Xe=vt=null,tt=0),_l=o,Hs=i,bl=l,Yg=y,Kg=g,KE=h,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,lM(Zt,function(){return c1(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||h){h=L.T,L.T=null,g=G.p,G.p=2,x=ut,ut|=4;try{Qk(i,o,l)}finally{ut=x,G.p=g,L.T=h}}_n=1,s1(),o1(),a1()}}function s1(){if(_n===1){_n=0;var i=Hs,o=_l,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=L.T,L.T=null;var h=G.p;G.p=2;var g=ut;ut|=4;try{BE(o,i);var y=u0,x=Yb(i.containerInfo),P=y.focusedElem,Y=y.selectionRange;if(x!==P&&P&&P.ownerDocument&&Gb(P.ownerDocument.documentElement,P)){if(Y!==null&&Lm(P)){var oe=Y.start,de=Y.end;if(de===void 0&&(de=oe),"selectionStart"in P)P.selectionStart=oe,P.selectionEnd=Math.min(de,P.value.length);else{var me=P.ownerDocument||document,ae=me&&me.defaultView||window;if(ae.getSelection){var le=ae.getSelection(),Oe=P.textContent.length,Ie=Math.min(Y.start,Oe),mt=Y.end===void 0?Ie:Math.min(Y.end,Oe);!le.extend&&Ie>mt&&(x=mt,mt=Ie,Ie=x);var te=qb(P,Ie),Z=qb(P,mt);if(te&&Z&&(le.rangeCount!==1||le.anchorNode!==te.node||le.anchorOffset!==te.offset||le.focusNode!==Z.node||le.focusOffset!==Z.offset)){var se=me.createRange();se.setStart(te.node,te.offset),le.removeAllRanges(),Ie>mt?(le.addRange(se),le.extend(Z.node,Z.offset)):(se.setEnd(Z.node,Z.offset),le.addRange(se))}}}}for(me=[],le=P;le=le.parentNode;)le.nodeType===1&&me.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<me.length;P++){var pe=me[P];pe.element.scrollLeft=pe.left,pe.element.scrollTop=pe.top}}uf=!!c0,u0=c0=null}finally{ut=g,G.p=h,L.T=l}}i.current=o,_n=2}}function o1(){if(_n===2){_n=0;var i=Hs,o=_l,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=L.T,L.T=null;var h=G.p;G.p=2;var g=ut;ut|=4;try{LE(i,o.alternate,o)}finally{ut=g,G.p=h,L.T=l}}_n=3}}function a1(){if(_n===4||_n===3){_n=0,Ht();var i=Hs,o=_l,l=bl,h=KE;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?_n=5:(_n=0,_l=Hs=null,l1(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Bs=null),Ts(l),o=o.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(at,o,void 0,(o.current.flags&128)===128)}catch{}if(h!==null){o=L.T,g=G.p,G.p=2,L.T=null;try{for(var y=i.onRecoverableError,x=0;x<h.length;x++){var P=h[x];y(P.value,{componentStack:P.stack})}}finally{L.T=o,G.p=g}}(bl&3)!==0&&Qd(),Ti(i),g=i.pendingLanes,(l&4194090)!==0&&(g&42)!==0?i===Xg?pu++:(pu=0,Xg=i):pu=0,mu(0)}}function l1(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,Kc(o)))}function Qd(i){return s1(),o1(),a1(),c1()}function c1(){if(_n!==5)return!1;var i=Hs,o=Yg;Yg=0;var l=Ts(bl),h=L.T,g=G.p;try{G.p=32>l?32:l,L.T=null,l=Kg,Kg=null;var y=Hs,x=bl;if(_n=0,_l=Hs=null,bl=0,(ut&6)!==0)throw Error(r(331));var P=ut;if(ut|=4,GE(y.current),FE(y,y.current,x,l),ut=P,mu(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(at,y)}catch{}return!0}finally{G.p=g,L.T=h,l1(i,o)}}function u1(i,o,l){o=Ir(l,o),o=Rg(i.stateNode,o,2),i=ks(i,o,2),i!==null&&(br(i,2),Ti(i))}function gt(i,o,l){if(i.tag===3)u1(i,i,l);else for(;o!==null;){if(o.tag===3){u1(o,i,l);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Bs===null||!Bs.has(h))){i=Ir(l,i),l=pE(2),h=ks(o,l,2),h!==null&&(mE(l,h,o,i),br(h,2),Ti(h));break}}o=o.return}}function Jg(i,o,l){var h=i.pingCache;if(h===null){h=i.pingCache=new eM;var g=new Set;h.set(o,g)}else g=h.get(o),g===void 0&&(g=new Set,h.set(o,g));g.has(l)||(Fg=!0,g.add(l),i=sM.bind(null,i,o,l),o.then(i,i))}function sM(i,o,l){var h=i.pingCache;h!==null&&h.delete(o),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,vt===i&&(tt&l)===l&&(kt===4||kt===3&&(tt&62914560)===tt&&300>je()-Gg?(ut&2)===0&&wl(i,0):$g|=l,vl===tt&&(vl=0)),Ti(i)}function h1(i,o){o===0&&(o=Fr()),i=rl(i,o),i!==null&&(br(i,o),Ti(i))}function oM(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),h1(i,l)}function aM(i,o){var l=0;switch(i.tag){case 13:var h=i.stateNode,g=i.memoizedState;g!==null&&(l=g.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(o),h1(i,l)}function lM(i,o){return De(i,o)}var Zd=null,xl=null,e0=!1,Jd=!1,t0=!1,aa=0;function Ti(i){i!==xl&&i.next===null&&(xl===null?Zd=xl=i:xl=xl.next=i),Jd=!0,e0||(e0=!0,uM())}function mu(i,o){if(!t0&&Jd){t0=!0;do for(var l=!1,h=Zd;h!==null;){if(i!==0){var g=h.pendingLanes;if(g===0)var y=0;else{var x=h.suspendedLanes,P=h.pingedLanes;y=(1<<31-xt(42|i)+1)-1,y&=g&~(x&~P),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,m1(h,y))}else y=tt,y=mn(h,h===vt?y:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(y&3)===0||zn(h,y)||(l=!0,m1(h,y));h=h.next}while(l);t0=!1}}function cM(){d1()}function d1(){Jd=e0=!1;var i=0;aa!==0&&(vM()&&(i=aa),aa=0);for(var o=je(),l=null,h=Zd;h!==null;){var g=h.next,y=f1(h,o);y===0?(h.next=null,l===null?Zd=g:l.next=g,g===null&&(xl=l)):(l=h,(i!==0||(y&3)!==0)&&(Jd=!0)),h=g}mu(i)}function f1(i,o){for(var l=i.suspendedLanes,h=i.pingedLanes,g=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var x=31-xt(y),P=1<<x,Y=g[x];Y===-1?((P&l)===0||(P&h)!==0)&&(g[x]=ji(P,o)):Y<=o&&(i.expiredLanes|=P),y&=~P}if(o=vt,l=tt,l=mn(i,i===o?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,l===0||i===o&&(ht===2||ht===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&Le(h),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||zn(i,l)){if(o=l&-l,o===i.callbackPriority)return o;switch(h!==null&&Le(h),Ts(l)){case 2:case 8:l=Sn;break;case 32:l=Zt;break;case 268435456:l=Pn;break;default:l=Zt}return h=p1.bind(null,i),l=De(l,h),i.callbackPriority=o,i.callbackNode=l,o}return h!==null&&h!==null&&Le(h),i.callbackPriority=2,i.callbackNode=null,2}function p1(i,o){if(_n!==0&&_n!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(Qd()&&i.callbackNode!==l)return null;var h=tt;return h=mn(i,i===vt?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(WE(i,h,o),f1(i,je()),i.callbackNode!=null&&i.callbackNode===l?p1.bind(null,i):null)}function m1(i,o){if(Qd())return null;WE(i,o,!0)}function uM(){bM(function(){(ut&6)!==0?De(Nt,cM):d1()})}function n0(){return aa===0&&(aa=Bi()),aa}function g1(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:qa(""+i)}function y1(i,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,i.id&&l.setAttribute("form",i.id),o.parentNode.insertBefore(l,o),i=new FormData(i),l.parentNode.removeChild(l),i}function hM(i,o,l,h,g){if(o==="submit"&&l&&l.stateNode===g){var y=g1((g[It]||null).action),x=h.submitter;x&&(o=(o=x[It]||null)?g1(o.formAction):x.getAttribute("formAction"),o!==null&&(y=o,x=null));var P=new Ga("action","action",null,h,g);i.push({event:P,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(aa!==0){var Y=x?y1(g,x):new FormData(g);Eg(l,{pending:!0,data:Y,method:g.method,action:y},null,Y)}}else typeof y=="function"&&(P.preventDefault(),Y=x?y1(g,x):new FormData(g),Eg(l,{pending:!0,data:Y,method:g.method,action:y},y,Y))},currentTarget:g}]})}}for(var r0=0;r0<Bm.length;r0++){var i0=Bm[r0],dM=i0.toLowerCase(),fM=i0[0].toUpperCase()+i0.slice(1);Yr(dM,"on"+fM)}Yr(Wb,"onAnimationEnd"),Yr(Qb,"onAnimationIteration"),Yr(Zb,"onAnimationStart"),Yr("dblclick","onDoubleClick"),Yr("focusin","onFocus"),Yr("focusout","onBlur"),Yr(Ik,"onTransitionRun"),Yr(Dk,"onTransitionStart"),Yr(kk,"onTransitionCancel"),Yr(Jb,"onTransitionEnd"),$r("onMouseEnter",["mouseout","mouseover"]),$r("onMouseLeave",["mouseout","mouseover"]),$r("onPointerEnter",["pointerout","pointerover"]),$r("onPointerLeave",["pointerout","pointerover"]),rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rr("onBeforeInput",["compositionend","keypress","textInput","paste"]),rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gu));function v1(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],g=h.event;h=h.listeners;e:{var y=void 0;if(o)for(var x=h.length-1;0<=x;x--){var P=h[x],Y=P.instance,oe=P.currentTarget;if(P=P.listener,Y!==y&&g.isPropagationStopped())break e;y=P,g.currentTarget=oe;try{y(g)}catch(de){jd(de)}g.currentTarget=null,y=Y}else for(x=0;x<h.length;x++){if(P=h[x],Y=P.instance,oe=P.currentTarget,P=P.listener,Y!==y&&g.isPropagationStopped())break e;y=P,g.currentTarget=oe;try{y(g)}catch(de){jd(de)}g.currentTarget=null,y=Y}}}}function We(i,o){var l=o[Mo];l===void 0&&(l=o[Mo]=new Set);var h=i+"__bubble";l.has(h)||(_1(o,i,2,!1),l.add(h))}function s0(i,o,l){var h=0;o&&(h|=4),_1(l,i,h,o)}var ef="_reactListening"+Math.random().toString(36).slice(2);function o0(i){if(!i[ef]){i[ef]=!0,Po.forEach(function(l){l!=="selectionchange"&&(pM.has(l)||s0(l,!1,i),s0(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[ef]||(o[ef]=!0,s0("selectionchange",!1,o))}}function _1(i,o,l,h){switch(F1(o)){case 2:var g=BM;break;case 8:g=HM;break;default:g=b0}l=g.bind(null,o,l,i),g=void 0,!Cr||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),h?g!==void 0?i.addEventListener(o,l,{capture:!0,passive:g}):i.addEventListener(o,l,!0):g!==void 0?i.addEventListener(o,l,{passive:g}):i.addEventListener(o,l,!1)}function a0(i,o,l,h,g){var y=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var x=h.tag;if(x===3||x===4){var P=h.stateNode.containerInfo;if(P===g)break;if(x===4)for(x=h.return;x!==null;){var Y=x.tag;if((Y===3||Y===4)&&x.stateNode.containerInfo===g)return;x=x.return}for(;P!==null;){if(x=Er(P),x===null)return;if(Y=x.tag,Y===5||Y===6||Y===26||Y===27){h=y=x;continue e}P=P.parentNode}}h=h.return}nd(function(){var oe=y,de=Rr(l),me=[];e:{var ae=ew.get(i);if(ae!==void 0){var le=Ga,Oe=i;switch(i){case"keypress":if(mi(l)===0)break e;case"keydown":case"keyup":le=Za;break;case"focusin":Oe="focus",le=Xa;break;case"focusout":Oe="blur",le=Xa;break;case"beforeblur":case"afterblur":le=Xa;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Nr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Mm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=ud;break;case Wb:case Qb:case Zb:le=Wa;break;case Jb:le=dd;break;case"scroll":case"scrollend":le=rd;break;case"wheel":le=Ja;break;case"copy":case"cut":case"paste":le=Qa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=jc;break;case"toggle":case"beforetoggle":le=pd}var Ie=(o&4)!==0,mt=!Ie&&(i==="scroll"||i==="scrollend"),te=Ie?ae!==null?ae+"Capture":null:ae;Ie=[];for(var Z=oe,se;Z!==null;){var pe=Z;if(se=pe.stateNode,pe=pe.tag,pe!==5&&pe!==26&&pe!==27||se===null||te===null||(pe=jo(Z,te),pe!=null&&Ie.push(yu(Z,pe,se))),mt)break;Z=Z.return}0<Ie.length&&(ae=new le(ae,Oe,null,l,de),me.push({event:ae,listeners:Ie}))}}if((o&7)===0){e:{if(ae=i==="mouseover"||i==="pointerover",le=i==="mouseout"||i==="pointerout",ae&&l!==qi&&(Oe=l.relatedTarget||l.fromElement)&&(Er(Oe)||Oe[qn]))break e;if((le||ae)&&(ae=de.window===de?de:(ae=de.ownerDocument)?ae.defaultView||ae.parentWindow:window,le?(Oe=l.relatedTarget||l.toElement,le=oe,Oe=Oe?Er(Oe):null,Oe!==null&&(mt=a(Oe),Ie=Oe.tag,Oe!==mt||Ie!==5&&Ie!==27&&Ie!==6)&&(Oe=null)):(le=null,Oe=oe),le!==Oe)){if(Ie=Nr,pe="onMouseLeave",te="onMouseEnter",Z="mouse",(i==="pointerout"||i==="pointerover")&&(Ie=jc,pe="onPointerLeave",te="onPointerEnter",Z="pointer"),mt=le==null?ae:Tr(le),se=Oe==null?ae:Tr(Oe),ae=new Ie(pe,Z+"leave",le,l,de),ae.target=mt,ae.relatedTarget=se,pe=null,Er(de)===oe&&(Ie=new Ie(te,Z+"enter",Oe,l,de),Ie.target=se,Ie.relatedTarget=mt,pe=Ie),mt=pe,le&&Oe)t:{for(Ie=le,te=Oe,Z=0,se=Ie;se;se=Tl(se))Z++;for(se=0,pe=te;pe;pe=Tl(pe))se++;for(;0<Z-se;)Ie=Tl(Ie),Z--;for(;0<se-Z;)te=Tl(te),se--;for(;Z--;){if(Ie===te||te!==null&&Ie===te.alternate)break t;Ie=Tl(Ie),te=Tl(te)}Ie=null}else Ie=null;le!==null&&b1(me,ae,le,Ie,!1),Oe!==null&&mt!==null&&b1(me,mt,Oe,Ie,!0)}}e:{if(ae=oe?Tr(oe):window,le=ae.nodeName&&ae.nodeName.toLowerCase(),le==="select"||le==="input"&&ae.type==="file")var Se=Ub;else if(tn(ae))if(jb)Se=Rk;else{Se=Sk;var qe=Tk}else le=ae.nodeName,!le||le.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?oe&&Mc(oe.elementType)&&(Se=Ub):Se=Ak;if(Se&&(Se=Se(i,oe))){Wi(me,Se,l,de);break e}qe&&qe(i,ae,oe),i==="focusout"&&oe&&ae.type==="number"&&oe.memoizedProps.value!=null&&Rs(ae,"number",ae.value)}switch(qe=oe?Tr(oe):window,i){case"focusin":(tn(qe)||qe.contentEditable==="true")&&(el=qe,zm=oe,Fc=null);break;case"focusout":Fc=zm=el=null;break;case"mousedown":Um=!0;break;case"contextmenu":case"mouseup":case"dragend":Um=!1,Kb(me,l,de);break;case"selectionchange":if(Nk)break;case"keydown":case"keyup":Kb(me,l,de)}var Re;if(vi)e:{switch(i){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Je?ce(i,l)&&(ke="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(ke="onCompositionStart");ke&&(E&&l.locale!=="ko"&&(Je||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Je&&(Re=Oc()):(pi=de,Cs="value"in pi?pi.value:pi.textContent,Je=!0)),qe=tf(oe,ke),0<qe.length&&(ke=new zc(ke,i,null,l,de),me.push({event:ke,listeners:qe}),Re?ke.data=Re:(Re=be(l),Re!==null&&(ke.data=Re)))),(Re=b?en(i,l):et(i,l))&&(ke=tf(oe,"onBeforeInput"),0<ke.length&&(qe=new zc("onBeforeInput","beforeinput",null,l,de),me.push({event:qe,listeners:ke}),qe.data=Re)),hM(me,i,oe,l,de)}v1(me,o)})}function yu(i,o,l){return{instance:i,listener:o,currentTarget:l}}function tf(i,o){for(var l=o+"Capture",h=[];i!==null;){var g=i,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=jo(i,l),g!=null&&h.unshift(yu(i,g,y)),g=jo(i,o),g!=null&&h.push(yu(i,g,y))),i.tag===3)return h;i=i.return}return[]}function Tl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function b1(i,o,l,h,g){for(var y=o._reactName,x=[];l!==null&&l!==h;){var P=l,Y=P.alternate,oe=P.stateNode;if(P=P.tag,Y!==null&&Y===h)break;P!==5&&P!==26&&P!==27||oe===null||(Y=oe,g?(oe=jo(l,y),oe!=null&&x.unshift(yu(l,oe,Y))):g||(oe=jo(l,y),oe!=null&&x.push(yu(l,oe,Y)))),l=l.return}x.length!==0&&i.push({event:o,listeners:x})}var mM=/\r\n?/g,gM=/\u0000|\uFFFD/g;function w1(i){return(typeof i=="string"?i:""+i).replace(mM,`
`).replace(gM,"")}function E1(i,o){return o=w1(o),w1(i)===o}function nf(){}function pt(i,o,l,h,g,y){switch(l){case"children":typeof h=="string"?o==="body"||o==="textarea"&&h===""||Ar(i,h):(typeof h=="number"||typeof h=="bigint")&&o!=="body"&&Ar(i,""+h);break;case"className":Sr(i,"class",h);break;case"tabIndex":Sr(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Sr(i,l,h);break;case"style":kc(i,h,y);break;case"data":if(o!=="object"){Sr(i,"data",h);break}case"src":case"href":if(h===""&&(o!=="a"||l!=="href")){i.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=qa(""+h),i.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(o!=="input"&&pt(i,o,"name",g.name,g,null),pt(i,o,"formEncType",g.formEncType,g,null),pt(i,o,"formMethod",g.formMethod,g,null),pt(i,o,"formTarget",g.formTarget,g,null)):(pt(i,o,"encType",g.encType,g,null),pt(i,o,"method",g.method,g,null),pt(i,o,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=qa(""+h),i.setAttribute(l,h);break;case"onClick":h!=null&&(i.onclick=nf);break;case"onScroll":h!=null&&We("scroll",i);break;case"onScrollEnd":h!=null&&We("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}l=qa(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""+h):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":h===!0?i.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,h):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(l,h):i.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(l):i.setAttribute(l,h);break;case"popover":We("beforetoggle",i),We("toggle",i),ui(i,"popover",h);break;case"xlinkActuate":Jt(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Jt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Jt(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Jt(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Jt(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Jt(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Jt(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Jt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Jt(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":ui(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Dm.get(l)||l,ui(i,l,h))}}function l0(i,o,l,h,g,y){switch(l){case"style":kc(i,h,y);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"children":typeof h=="string"?Ar(i,h):(typeof h=="number"||typeof h=="bigint")&&Ar(i,""+h);break;case"onScroll":h!=null&&We("scroll",i);break;case"onScrollEnd":h!=null&&We("scrollend",i);break;case"onClick":h!=null&&(i.onclick=nf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ss.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),o=l.slice(2,g?l.length-7:void 0),y=i[It]||null,y=y!=null?y[l]:null,typeof y=="function"&&i.removeEventListener(o,y,g),typeof h=="function")){typeof y!="function"&&y!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(o,h,g);break e}l in i?i[l]=h:h===!0?i.setAttribute(l,""):ui(i,l,h)}}}function bn(i,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",i),We("load",i);var h=!1,g=!1,y;for(y in l)if(l.hasOwnProperty(y)){var x=l[y];if(x!=null)switch(y){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:pt(i,o,y,x,l,null)}}g&&pt(i,o,"srcSet",l.srcSet,l,null),h&&pt(i,o,"src",l.src,l,null);return;case"input":We("invalid",i);var P=y=x=g=null,Y=null,oe=null;for(h in l)if(l.hasOwnProperty(h)){var de=l[h];if(de!=null)switch(h){case"name":g=de;break;case"type":x=de;break;case"checked":Y=de;break;case"defaultChecked":oe=de;break;case"value":y=de;break;case"defaultValue":P=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,o));break;default:pt(i,o,h,de,l,null)}}Lo(i,y,P,Y,oe,x,g,!1),$a(i);return;case"select":We("invalid",i),h=x=y=null;for(g in l)if(l.hasOwnProperty(g)&&(P=l[g],P!=null))switch(g){case"value":y=P;break;case"defaultValue":x=P;break;case"multiple":h=P;default:pt(i,o,g,P,l,null)}o=y,l=x,i.multiple=!!h,o!=null?$i(i,!!h,o,!1):l!=null&&$i(i,!!h,l,!0);return;case"textarea":We("invalid",i),y=g=h=null;for(x in l)if(l.hasOwnProperty(x)&&(P=l[x],P!=null))switch(x){case"value":h=P;break;case"defaultValue":g=P;break;case"children":y=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(r(91));break;default:pt(i,o,x,P,l,null)}zo(i,h,g,y),$a(i);return;case"option":for(Y in l)if(l.hasOwnProperty(Y)&&(h=l[Y],h!=null))switch(Y){case"selected":i.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:pt(i,o,Y,h,l,null)}return;case"dialog":We("beforetoggle",i),We("toggle",i),We("cancel",i),We("close",i);break;case"iframe":case"object":We("load",i);break;case"video":case"audio":for(h=0;h<gu.length;h++)We(gu[h],i);break;case"image":We("error",i),We("load",i);break;case"details":We("toggle",i);break;case"embed":case"source":case"link":We("error",i),We("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in l)if(l.hasOwnProperty(oe)&&(h=l[oe],h!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:pt(i,o,oe,h,l,null)}return;default:if(Mc(o)){for(de in l)l.hasOwnProperty(de)&&(h=l[de],h!==void 0&&l0(i,o,de,h,l,void 0));return}}for(P in l)l.hasOwnProperty(P)&&(h=l[P],h!=null&&pt(i,o,P,h,l,null))}function yM(i,o,l,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,x=null,P=null,Y=null,oe=null,de=null;for(le in l){var me=l[le];if(l.hasOwnProperty(le)&&me!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":Y=me;default:h.hasOwnProperty(le)||pt(i,o,le,null,h,me)}}for(var ae in h){var le=h[ae];if(me=l[ae],h.hasOwnProperty(ae)&&(le!=null||me!=null))switch(ae){case"type":y=le;break;case"name":g=le;break;case"checked":oe=le;break;case"defaultChecked":de=le;break;case"value":x=le;break;case"defaultValue":P=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,o));break;default:le!==me&&pt(i,o,ae,le,h,me)}}ir(i,x,P,Y,oe,de,y,g);return;case"select":le=x=P=ae=null;for(y in l)if(Y=l[y],l.hasOwnProperty(y)&&Y!=null)switch(y){case"value":break;case"multiple":le=Y;default:h.hasOwnProperty(y)||pt(i,o,y,null,h,Y)}for(g in h)if(y=h[g],Y=l[g],h.hasOwnProperty(g)&&(y!=null||Y!=null))switch(g){case"value":ae=y;break;case"defaultValue":P=y;break;case"multiple":x=y;default:y!==Y&&pt(i,o,g,y,h,Y)}o=P,l=x,h=le,ae!=null?$i(i,!!l,ae,!1):!!h!=!!l&&(o!=null?$i(i,!!l,o,!0):$i(i,!!l,l?[]:"",!1));return;case"textarea":le=ae=null;for(P in l)if(g=l[P],l.hasOwnProperty(P)&&g!=null&&!h.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:pt(i,o,P,null,h,g)}for(x in h)if(g=h[x],y=l[x],h.hasOwnProperty(x)&&(g!=null||y!=null))switch(x){case"value":ae=g;break;case"defaultValue":le=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==y&&pt(i,o,x,g,h,y)}dt(i,ae,le);return;case"option":for(var Oe in l)if(ae=l[Oe],l.hasOwnProperty(Oe)&&ae!=null&&!h.hasOwnProperty(Oe))switch(Oe){case"selected":i.selected=!1;break;default:pt(i,o,Oe,null,h,ae)}for(Y in h)if(ae=h[Y],le=l[Y],h.hasOwnProperty(Y)&&ae!==le&&(ae!=null||le!=null))switch(Y){case"selected":i.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:pt(i,o,Y,ae,h,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in l)ae=l[Ie],l.hasOwnProperty(Ie)&&ae!=null&&!h.hasOwnProperty(Ie)&&pt(i,o,Ie,null,h,ae);for(oe in h)if(ae=h[oe],le=l[oe],h.hasOwnProperty(oe)&&ae!==le&&(ae!=null||le!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,o));break;default:pt(i,o,oe,ae,h,le)}return;default:if(Mc(o)){for(var mt in l)ae=l[mt],l.hasOwnProperty(mt)&&ae!==void 0&&!h.hasOwnProperty(mt)&&l0(i,o,mt,void 0,h,ae);for(de in h)ae=h[de],le=l[de],!h.hasOwnProperty(de)||ae===le||ae===void 0&&le===void 0||l0(i,o,de,ae,h,le);return}}for(var te in l)ae=l[te],l.hasOwnProperty(te)&&ae!=null&&!h.hasOwnProperty(te)&&pt(i,o,te,null,h,ae);for(me in h)ae=h[me],le=l[me],!h.hasOwnProperty(me)||ae===le||ae==null&&le==null||pt(i,o,me,ae,h,le)}var c0=null,u0=null;function rf(i){return i.nodeType===9?i:i.ownerDocument}function x1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function T1(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function h0(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var d0=null;function vM(){var i=window.event;return i&&i.type==="popstate"?i===d0?!1:(d0=i,!0):(d0=null,!1)}var S1=typeof setTimeout=="function"?setTimeout:void 0,_M=typeof clearTimeout=="function"?clearTimeout:void 0,A1=typeof Promise=="function"?Promise:void 0,bM=typeof queueMicrotask=="function"?queueMicrotask:typeof A1<"u"?function(i){return A1.resolve(null).then(i).catch(wM)}:S1;function wM(i){setTimeout(function(){throw i})}function $s(i){return i==="head"}function R1(i,o){var l=o,h=0,g=0;do{var y=l.nextSibling;if(i.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"){if(0<h&&8>h){l=h;var x=i.ownerDocument;if(l&1&&vu(x.documentElement),l&2&&vu(x.body),l&4)for(l=x.head,vu(l),x=l.firstChild;x;){var P=x.nextSibling,Y=x.nodeName;x[Hi]||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&x.rel.toLowerCase()==="stylesheet"||l.removeChild(x),x=P}}if(g===0){i.removeChild(y),Au(o);return}g--}else l==="$"||l==="$?"||l==="$!"?g++:h=l.charCodeAt(0)-48;else h=0;l=y}while(l);Au(o)}function f0(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":f0(l),ci(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function EM(i,o,l,h){for(;i.nodeType===1;){var g=l;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[Hi])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=Xr(i.nextSibling),i===null)break}return null}function xM(i,o,l){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Xr(i.nextSibling),i===null))return null;return i}function p0(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function TM(i,o){var l=i.ownerDocument;if(i.data!=="$?"||l.readyState==="complete")o();else{var h=function(){o(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Xr(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return i}var m0=null;function C1(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}function N1(i,o,l){switch(o=rf(l),i){case"html":if(i=o.documentElement,!i)throw Error(r(452));return i;case"head":if(i=o.head,!i)throw Error(r(453));return i;case"body":if(i=o.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function vu(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);ci(i)}var Vr=new Map,I1=new Set;function sf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var cs=G.d;G.d={f:SM,r:AM,D:RM,C:CM,L:NM,m:IM,X:kM,S:DM,M:MM};function SM(){var i=cs.f(),o=Xd();return i||o}function AM(i){var o=xr(i);o!==null&&o.tag===5&&o.type==="form"?Ww(o):cs.r(i)}var Sl=typeof document>"u"?null:document;function D1(i,o,l){var h=Sl;if(h&&typeof o=="string"&&o){var g=qt(o);g='link[rel="'+i+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),I1.has(g)||(I1.add(g),i={rel:i,crossOrigin:l,href:o},h.querySelector(g)===null&&(o=h.createElement("link"),bn(o,"link",i),Tt(o),h.head.appendChild(o)))}}function RM(i){cs.D(i),D1("dns-prefetch",i,null)}function CM(i,o){cs.C(i,o),D1("preconnect",i,o)}function NM(i,o,l){cs.L(i,o,l);var h=Sl;if(h&&i&&o){var g='link[rel="preload"][as="'+qt(o)+'"]';o==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+qt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+qt(l.imageSizes)+'"]')):g+='[href="'+qt(i)+'"]';var y=g;switch(o){case"style":y=Al(i);break;case"script":y=Rl(i)}Vr.has(y)||(i=m({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:i,as:o},l),Vr.set(y,i),h.querySelector(g)!==null||o==="style"&&h.querySelector(_u(y))||o==="script"&&h.querySelector(bu(y))||(o=h.createElement("link"),bn(o,"link",i),Tt(o),h.head.appendChild(o)))}}function IM(i,o){cs.m(i,o);var l=Sl;if(l&&i){var h=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+qt(h)+'"][href="'+qt(i)+'"]',y=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Rl(i)}if(!Vr.has(y)&&(i=m({rel:"modulepreload",href:i},o),Vr.set(y,i),l.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(bu(y)))return}h=l.createElement("link"),bn(h,"link",i),Tt(h),l.head.appendChild(h)}}}function DM(i,o,l){cs.S(i,o,l);var h=Sl;if(h&&i){var g=gn(h).hoistableStyles,y=Al(i);o=o||"default";var x=g.get(y);if(!x){var P={loading:0,preload:null};if(x=h.querySelector(_u(y)))P.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":o},l),(l=Vr.get(y))&&g0(i,l);var Y=x=h.createElement("link");Tt(Y),bn(Y,"link",i),Y._p=new Promise(function(oe,de){Y.onload=oe,Y.onerror=de}),Y.addEventListener("load",function(){P.loading|=1}),Y.addEventListener("error",function(){P.loading|=2}),P.loading|=4,of(x,o,h)}x={type:"stylesheet",instance:x,count:1,state:P},g.set(y,x)}}}function kM(i,o){cs.X(i,o);var l=Sl;if(l&&i){var h=gn(l).hoistableScripts,g=Rl(i),y=h.get(g);y||(y=l.querySelector(bu(g)),y||(i=m({src:i,async:!0},o),(o=Vr.get(g))&&y0(i,o),y=l.createElement("script"),Tt(y),bn(y,"link",i),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(g,y))}}function MM(i,o){cs.M(i,o);var l=Sl;if(l&&i){var h=gn(l).hoistableScripts,g=Rl(i),y=h.get(g);y||(y=l.querySelector(bu(g)),y||(i=m({src:i,async:!0,type:"module"},o),(o=Vr.get(g))&&y0(i,o),y=l.createElement("script"),Tt(y),bn(y,"link",i),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(g,y))}}function k1(i,o,l,h){var g=(g=ue.current)?sf(g):null;if(!g)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=Al(l.href),l=gn(g).hoistableStyles,h=l.get(o),h||(h={type:"style",instance:null,count:0,state:null},l.set(o,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Al(l.href);var y=gn(g).hoistableStyles,x=y.get(i);if(x||(g=g.ownerDocument||g,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,x),(y=g.querySelector(_u(i)))&&!y._p&&(x.instance=y,x.state.loading=5),Vr.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Vr.set(i,l),y||PM(g,i,l,x.state))),o&&h===null)throw Error(r(528,""));return x}if(o&&h!==null)throw Error(r(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Rl(l),l=gn(g).hoistableScripts,h=l.get(o),h||(h={type:"script",instance:null,count:0,state:null},l.set(o,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Al(i){return'href="'+qt(i)+'"'}function _u(i){return'link[rel="stylesheet"]['+i+"]"}function M1(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function PM(i,o,l,h){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?h.loading=1:(o=i.createElement("link"),h.preload=o,o.addEventListener("load",function(){return h.loading|=1}),o.addEventListener("error",function(){return h.loading|=2}),bn(o,"link",l),Tt(o),i.head.appendChild(o))}function Rl(i){return'[src="'+qt(i)+'"]'}function bu(i){return"script[async]"+i}function P1(i,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var h=i.querySelector('style[data-href~="'+qt(l.href)+'"]');if(h)return o.instance=h,Tt(h),h;var g=m({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),Tt(h),bn(h,"style",g),of(h,l.precedence,i),o.instance=h;case"stylesheet":g=Al(l.href);var y=i.querySelector(_u(g));if(y)return o.state.loading|=4,o.instance=y,Tt(y),y;h=M1(l),(g=Vr.get(g))&&g0(h,g),y=(i.ownerDocument||i).createElement("link"),Tt(y);var x=y;return x._p=new Promise(function(P,Y){x.onload=P,x.onerror=Y}),bn(y,"link",h),o.state.loading|=4,of(y,l.precedence,i),o.instance=y;case"script":return y=Rl(l.src),(g=i.querySelector(bu(y)))?(o.instance=g,Tt(g),g):(h=l,(g=Vr.get(y))&&(h=m({},l),y0(h,g)),i=i.ownerDocument||i,g=i.createElement("script"),Tt(g),bn(g,"link",h),i.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(h=o.instance,o.state.loading|=4,of(h,l.precedence,i));return o.instance}function of(i,o,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,y=g,x=0;x<h.length;x++){var P=h[x];if(P.dataset.precedence===o)y=P;else if(y!==g)break}y?y.parentNode.insertBefore(i,y.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(i,o.firstChild))}function g0(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function y0(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var af=null;function O1(i,o,l){if(af===null){var h=new Map,g=af=new Map;g.set(l,h)}else g=af,h=g.get(l),h||(h=new Map,g.set(l,h));if(h.has(i))return h;for(h.set(i,null),l=l.getElementsByTagName(i),g=0;g<l.length;g++){var y=l[g];if(!(y[Hi]||y[Lt]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var x=y.getAttribute(o)||"";x=i+x;var P=h.get(x);P?P.push(y):h.set(x,[y])}}return h}function V1(i,o,l){i=i.ownerDocument||i,i.head.insertBefore(l,o==="title"?i.querySelector("head > title"):null)}function OM(i,o,l){if(l===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function L1(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var wu=null;function VM(){}function LM(i,o,l){if(wu===null)throw Error(r(475));var h=wu;if(o.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=Al(l.href),y=i.querySelector(_u(g));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(h.count++,h=lf.bind(h),i.then(h,h)),o.state.loading|=4,o.instance=y,Tt(y);return}y=i.ownerDocument||i,l=M1(l),(g=Vr.get(g))&&g0(l,g),y=y.createElement("link"),Tt(y);var x=y;x._p=new Promise(function(P,Y){x.onload=P,x.onerror=Y}),bn(y,"link",l),o.instance=y}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(h.count++,o=lf.bind(h),i.addEventListener("load",o),i.addEventListener("error",o))}}function zM(){if(wu===null)throw Error(r(475));var i=wu;return i.stylesheets&&i.count===0&&v0(i,i.stylesheets),0<i.count?function(o){var l=setTimeout(function(){if(i.stylesheets&&v0(i,i.stylesheets),i.unsuspend){var h=i.unsuspend;i.unsuspend=null,h()}},6e4);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(l)}}:null}function lf(){if(this.count--,this.count===0){if(this.stylesheets)v0(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var cf=null;function v0(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,cf=new Map,o.forEach(UM,i),cf=null,lf.call(i))}function UM(i,o){if(!(o.state.loading&4)){var l=cf.get(i);if(l)var h=l.get(null);else{l=new Map,cf.set(i,l);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var x=g[y];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(l.set(x.dataset.precedence,x),h=x)}h&&l.set(null,h)}g=o.instance,x=g.getAttribute("data-precedence"),y=l.get(x)||h,y===h&&l.set(null,g),l.set(x,g),this.count++,h=lf.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),y?y.parentNode.insertBefore(g,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),o.state.loading|=4}}var Eu={$$typeof:B,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function jM(i,o,l,h,g,y,x,P){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=tr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tr(0),this.hiddenUpdates=tr(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function z1(i,o,l,h,g,y,x,P,Y,oe,de,me){return i=new jM(i,o,l,x,P,Y,oe,me),o=1,y===!0&&(o|=24),y=or(3,null,null,o),i.current=y,y.stateNode=i,o=Jm(),o.refCount++,i.pooledCache=o,o.refCount++,y.memoizedState={element:h,isDehydrated:l,cache:o},rg(y),i}function U1(i){return i?(i=il,i):il}function j1(i,o,l,h,g,y){g=U1(g),h.context===null?h.context=g:h.pendingContext=g,h=Ds(o),h.payload={element:l},y=y===void 0?null:y,y!==null&&(h.callback=y),l=ks(i,h,o),l!==null&&(hr(l,i,o),Zc(l,i,o))}function B1(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function _0(i,o){B1(i,o),(i=i.alternate)&&B1(i,o)}function H1(i){if(i.tag===13){var o=rl(i,67108864);o!==null&&hr(o,i,67108864),_0(i,67108864)}}var uf=!0;function BM(i,o,l,h){var g=L.T;L.T=null;var y=G.p;try{G.p=2,b0(i,o,l,h)}finally{G.p=y,L.T=g}}function HM(i,o,l,h){var g=L.T;L.T=null;var y=G.p;try{G.p=8,b0(i,o,l,h)}finally{G.p=y,L.T=g}}function b0(i,o,l,h){if(uf){var g=w0(h);if(g===null)a0(i,o,h,hf,l),$1(i,h);else if($M(g,i,o,l,h))h.stopPropagation();else if($1(i,h),o&4&&-1<FM.indexOf(i)){for(;g!==null;){var y=xr(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var x=an(y.pendingLanes);if(x!==0){var P=y;for(P.pendingLanes|=2,P.entangledLanes|=2;x;){var Y=1<<31-xt(x);P.entanglements[1]|=Y,x&=~Y}Ti(y),(ut&6)===0&&(Yd=je()+500,mu(0))}}break;case 13:P=rl(y,2),P!==null&&hr(P,y,2),Xd(),_0(y,2)}if(y=w0(h),y===null&&a0(i,o,h,hf,l),y===g)break;g=y}g!==null&&h.stopPropagation()}else a0(i,o,h,null,l)}}function w0(i){return i=Rr(i),E0(i)}var hf=null;function E0(i){if(hf=null,i=Er(i),i!==null){var o=a(i);if(o===null)i=null;else{var l=o.tag;if(l===13){if(i=c(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return hf=i,null}function F1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(we()){case Nt:return 2;case Sn:return 8;case Zt:case er:return 32;case Pn:return 268435456;default:return 32}default:return 32}}var x0=!1,qs=null,Gs=null,Ys=null,xu=new Map,Tu=new Map,Ks=[],FM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $1(i,o){switch(i){case"focusin":case"focusout":qs=null;break;case"dragenter":case"dragleave":Gs=null;break;case"mouseover":case"mouseout":Ys=null;break;case"pointerover":case"pointerout":xu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tu.delete(o.pointerId)}}function Su(i,o,l,h,g,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[g]},o!==null&&(o=xr(o),o!==null&&H1(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function $M(i,o,l,h,g){switch(o){case"focusin":return qs=Su(qs,i,o,l,h,g),!0;case"dragenter":return Gs=Su(Gs,i,o,l,h,g),!0;case"mouseover":return Ys=Su(Ys,i,o,l,h,g),!0;case"pointerover":var y=g.pointerId;return xu.set(y,Su(xu.get(y)||null,i,o,l,h,g)),!0;case"gotpointercapture":return y=g.pointerId,Tu.set(y,Su(Tu.get(y)||null,i,o,l,h,g)),!0}return!1}function q1(i){var o=Er(i.target);if(o!==null){var l=a(o);if(l!==null){if(o=l.tag,o===13){if(o=c(l),o!==null){i.blockedOn=o,za(i.priority,function(){if(l.tag===13){var h=ur();h=oi(h);var g=rl(l,h);g!==null&&hr(g,l,h),_0(l,h)}});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function df(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=w0(i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);qi=h,l.target.dispatchEvent(h),qi=null}else return o=xr(l),o!==null&&H1(o),i.blockedOn=l,!1;o.shift()}return!0}function G1(i,o,l){df(i)&&l.delete(o)}function qM(){x0=!1,qs!==null&&df(qs)&&(qs=null),Gs!==null&&df(Gs)&&(Gs=null),Ys!==null&&df(Ys)&&(Ys=null),xu.forEach(G1),Tu.forEach(G1)}function ff(i,o){i.blockedOn===o&&(i.blockedOn=null,x0||(x0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,qM)))}var pf=null;function Y1(i){pf!==i&&(pf=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){pf===i&&(pf=null);for(var o=0;o<i.length;o+=3){var l=i[o],h=i[o+1],g=i[o+2];if(typeof h!="function"){if(E0(h||l)===null)continue;break}var y=xr(l);y!==null&&(i.splice(o,3),o-=3,Eg(y,{pending:!0,data:g,method:l.method,action:h},h,g))}}))}function Au(i){function o(Y){return ff(Y,i)}qs!==null&&ff(qs,i),Gs!==null&&ff(Gs,i),Ys!==null&&ff(Ys,i),xu.forEach(o),Tu.forEach(o);for(var l=0;l<Ks.length;l++){var h=Ks[l];h.blockedOn===i&&(h.blockedOn=null)}for(;0<Ks.length&&(l=Ks[0],l.blockedOn===null);)q1(l),l.blockedOn===null&&Ks.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var g=l[h],y=l[h+1],x=g[It]||null;if(typeof y=="function")x||Y1(l);else if(x){var P=null;if(y&&y.hasAttribute("formAction")){if(g=y,x=y[It]||null)P=x.formAction;else if(E0(g)!==null)continue}else P=x.action;typeof P=="function"?l[h+1]=P:(l.splice(h,3),h-=3),Y1(l)}}}function T0(i){this._internalRoot=i}mf.prototype.render=T0.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(r(409));var l=o.current,h=ur();j1(l,h,i,o,null,null)},mf.prototype.unmount=T0.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;j1(i.current,2,null,i,null,null),Xd(),o[qn]=null}};function mf(i){this._internalRoot=i}mf.prototype.unstable_scheduleHydration=function(i){if(i){var o=ai();i={blockedOn:null,target:i,priority:o};for(var l=0;l<Ks.length&&o!==0&&o<Ks[l].priority;l++);Ks.splice(l,0,i),l===0&&q1(i)}};var K1=e.version;if(K1!=="19.1.0")throw Error(r(527,K1,"19.1.0"));G.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=d(o),i=i!==null?f(i):null,i=i===null?null:i.stateNode,i};var GM={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gf.isDisabled&&gf.supportsFiber)try{at=gf.inject(GM),Ke=gf}catch{}}return Cu.createRoot=function(i,o){if(!s(i))throw Error(r(299));var l=!1,h="",g=uE,y=hE,x=dE,P=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(x=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(P=o.unstable_transitionCallbacks)),o=z1(i,1,!1,null,null,l,h,g,y,x,P,null),i[qn]=o.current,o0(i),new T0(o)},Cu.hydrateRoot=function(i,o,l){if(!s(i))throw Error(r(299));var h=!1,g="",y=uE,x=hE,P=dE,Y=null,oe=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(P=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(Y=l.unstable_transitionCallbacks),l.formState!==void 0&&(oe=l.formState)),o=z1(i,1,!0,o,l??null,h,g,y,x,P,Y,oe),o.context=U1(null),l=o.current,h=ur(),h=oi(h),g=Ds(h),g.callback=null,ks(l,g,h),l=h,o.current.lanes=l,br(o,l),Ti(o),i[qn]=o.current,o0(i),new mf(o)},Cu.version="19.1.0",Cu}var ix;function r4(){if(ix)return R0.exports;ix=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),R0.exports=n4(),R0.exports}var i4=r4();function $n(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=$n(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var D0={exports:{}},k0={},M0={exports:{}},P0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sx;function s4(){if(sx)return P0;sx=1;var t=Ph();function e(v,_){return v===_&&(v!==0||1/v===1/_)||v!==v&&_!==_}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,a=t.useLayoutEffect,c=t.useDebugValue;function u(v,_){var w=_(),T=r({inst:{value:w,getSnapshot:_}}),R=T[0].inst,C=T[1];return a(function(){R.value=w,R.getSnapshot=_,d(R)&&C({inst:R})},[v,w,_]),s(function(){return d(R)&&C({inst:R}),v(function(){d(R)&&C({inst:R})})},[v]),c(w),w}function d(v){var _=v.getSnapshot;v=v.value;try{var w=_();return!n(v,w)}catch{return!0}}function f(v,_){return _()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return P0.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,P0}var ox;function o4(){return ox||(ox=1,M0.exports=s4()),M0.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ax;function a4(){if(ax)return k0;ax=1;var t=Ph(),e=o4();function n(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,a=t.useRef,c=t.useEffect,u=t.useMemo,d=t.useDebugValue;return k0.useSyncExternalStoreWithSelector=function(f,m,v,_,w){var T=a(null);if(T.current===null){var R={hasValue:!1,value:null};T.current=R}else R=T.current;T=u(function(){function D(X){if(!z){if(z=!0,B=X,X=_(X),w!==void 0&&R.hasValue){var I=R.value;if(w(I,X))return U=I}return U=X}if(I=U,r(B,X))return I;var A=_(X);return w!==void 0&&w(I,A)?(B=X,I):(B=X,U=A)}var z=!1,B,U,q=v===void 0?null:v;return[function(){return D(m())},q===null?void 0:function(){return D(q())}]},[m,v,_,w]);var C=s(f,T[0],T[1]);return c(function(){R.hasValue=!0,R.value=C},[C]),d(C),C},k0}var lx;function l4(){return lx||(lx=1,D0.exports=a4()),D0.exports}var c4=l4();const u4=d2(c4),h4={},cx=t=>{let e;const n=new Set,r=(m,v)=>{const _=typeof m=="function"?m(e):m;if(!Object.is(_,e)){const w=e;e=v??(typeof _!="object"||_===null)?_:Object.assign({},e,_),n.forEach(T=>T(e,w))}},s=()=>e,d={setState:r,getState:s,getInitialState:()=>f,subscribe:m=>(n.add(m),()=>n.delete(m)),destroy:()=>{(h4?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},f=e=t(r,s,d);return d},d4=t=>t?cx(t):cx,{useDebugValue:f4}=fe,{useSyncExternalStoreWithSelector:p4}=u4,m4=t=>t;function p2(t,e=m4,n){const r=p4(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return f4(r),r}const ux=(t,e)=>{const n=d4(t),r=(s,a=e)=>p2(n,s,a);return Object.assign(r,n),r},g4=(t,e)=>t?ux(t,e):ux;function kn(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,s]of t)if(!Object.is(s,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var y4={value:()=>{}};function $p(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Hf(n)}function Hf(t){this._=t}function v4(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Hf.prototype=$p.prototype={constructor:Hf,on:function(t,e){var n=this._,r=v4(t+"",n),s,a=-1,c=r.length;if(arguments.length<2){for(;++a<c;)if((s=(t=r[a]).type)&&(s=_4(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<c;)if(s=(t=r[a]).type)n[s]=hx(n[s],t.name,e);else if(e==null)for(s in n)n[s]=hx(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Hf(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,a;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,s=a.length;r<s;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,a=r.length;s<a;++s)r[s].value.apply(e,n)}};function _4(t,e){for(var n=0,r=t.length,s;n<r;++n)if((s=t[n]).name===e)return s.value}function hx(t,e,n){for(var r=0,s=t.length;r<s;++r)if(t[r].name===e){t[r]=y4,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Ty="http://www.w3.org/1999/xhtml";const dx={svg:"http://www.w3.org/2000/svg",xhtml:Ty,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function qp(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),dx.hasOwnProperty(e)?{space:dx[e],local:t}:t}function b4(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ty&&e.documentElement.namespaceURI===Ty?e.createElement(t):e.createElementNS(n,t)}}function w4(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function m2(t){var e=qp(t);return(e.local?w4:b4)(e)}function E4(){}function Vv(t){return t==null?E4:function(){return this.querySelector(t)}}function x4(t){typeof t!="function"&&(t=Vv(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],c=a.length,u=r[s]=new Array(c),d,f,m=0;m<c;++m)(d=a[m])&&(f=t.call(d,d.__data__,m,a))&&("__data__"in d&&(f.__data__=d.__data__),u[m]=f);return new vr(r,this._parents)}function T4(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function S4(){return[]}function g2(t){return t==null?S4:function(){return this.querySelectorAll(t)}}function A4(t){return function(){return T4(t.apply(this,arguments))}}function R4(t){typeof t=="function"?t=A4(t):t=g2(t);for(var e=this._groups,n=e.length,r=[],s=[],a=0;a<n;++a)for(var c=e[a],u=c.length,d,f=0;f<u;++f)(d=c[f])&&(r.push(t.call(d,d.__data__,f,c)),s.push(d));return new vr(r,s)}function y2(t){return function(){return this.matches(t)}}function v2(t){return function(e){return e.matches(t)}}var C4=Array.prototype.find;function N4(t){return function(){return C4.call(this.children,t)}}function I4(){return this.firstElementChild}function D4(t){return this.select(t==null?I4:N4(typeof t=="function"?t:v2(t)))}var k4=Array.prototype.filter;function M4(){return Array.from(this.children)}function P4(t){return function(){return k4.call(this.children,t)}}function O4(t){return this.selectAll(t==null?M4:P4(typeof t=="function"?t:v2(t)))}function V4(t){typeof t!="function"&&(t=y2(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],c=a.length,u=r[s]=[],d,f=0;f<c;++f)(d=a[f])&&t.call(d,d.__data__,f,a)&&u.push(d);return new vr(r,this._parents)}function _2(t){return new Array(t.length)}function L4(){return new vr(this._enter||this._groups.map(_2),this._parents)}function ap(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ap.prototype={constructor:ap,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function z4(t){return function(){return t}}function U4(t,e,n,r,s,a){for(var c=0,u,d=e.length,f=a.length;c<f;++c)(u=e[c])?(u.__data__=a[c],r[c]=u):n[c]=new ap(t,a[c]);for(;c<d;++c)(u=e[c])&&(s[c]=u)}function j4(t,e,n,r,s,a,c){var u,d,f=new Map,m=e.length,v=a.length,_=new Array(m),w;for(u=0;u<m;++u)(d=e[u])&&(_[u]=w=c.call(d,d.__data__,u,e)+"",f.has(w)?s[u]=d:f.set(w,d));for(u=0;u<v;++u)w=c.call(t,a[u],u,a)+"",(d=f.get(w))?(r[u]=d,d.__data__=a[u],f.delete(w)):n[u]=new ap(t,a[u]);for(u=0;u<m;++u)(d=e[u])&&f.get(_[u])===d&&(s[u]=d)}function B4(t){return t.__data__}function H4(t,e){if(!arguments.length)return Array.from(this,B4);var n=e?j4:U4,r=this._parents,s=this._groups;typeof t!="function"&&(t=z4(t));for(var a=s.length,c=new Array(a),u=new Array(a),d=new Array(a),f=0;f<a;++f){var m=r[f],v=s[f],_=v.length,w=F4(t.call(m,m&&m.__data__,f,r)),T=w.length,R=u[f]=new Array(T),C=c[f]=new Array(T),D=d[f]=new Array(_);n(m,v,R,C,D,w,e);for(var z=0,B=0,U,q;z<T;++z)if(U=R[z]){for(z>=B&&(B=z+1);!(q=C[B])&&++B<T;);U._next=q||null}}return c=new vr(c,r),c._enter=u,c._exit=d,c}function F4(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function $4(){return new vr(this._exit||this._groups.map(_2),this._parents)}function q4(t,e,n){var r=this.enter(),s=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?a.remove():n(a),r&&s?r.merge(s).order():s}function G4(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,s=n.length,a=r.length,c=Math.min(s,a),u=new Array(s),d=0;d<c;++d)for(var f=n[d],m=r[d],v=f.length,_=u[d]=new Array(v),w,T=0;T<v;++T)(w=f[T]||m[T])&&(_[T]=w);for(;d<s;++d)u[d]=n[d];return new vr(u,this._parents)}function Y4(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],s=r.length-1,a=r[s],c;--s>=0;)(c=r[s])&&(a&&c.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(c,a),a=c);return this}function K4(t){t||(t=X4);function e(v,_){return v&&_?t(v.__data__,_.__data__):!v-!_}for(var n=this._groups,r=n.length,s=new Array(r),a=0;a<r;++a){for(var c=n[a],u=c.length,d=s[a]=new Array(u),f,m=0;m<u;++m)(f=c[m])&&(d[m]=f);d.sort(e)}return new vr(s,this._parents).order()}function X4(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function W4(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Q4(){return Array.from(this)}function Z4(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,a=r.length;s<a;++s){var c=r[s];if(c)return c}return null}function J4(){let t=0;for(const e of this)++t;return t}function eP(){return!this.node()}function tP(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],a=0,c=s.length,u;a<c;++a)(u=s[a])&&t.call(u,u.__data__,a,s);return this}function nP(t){return function(){this.removeAttribute(t)}}function rP(t){return function(){this.removeAttributeNS(t.space,t.local)}}function iP(t,e){return function(){this.setAttribute(t,e)}}function sP(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function oP(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function aP(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function lP(t,e){var n=qp(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?rP:nP:typeof e=="function"?n.local?aP:oP:n.local?sP:iP)(n,e))}function b2(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function cP(t){return function(){this.style.removeProperty(t)}}function uP(t,e,n){return function(){this.style.setProperty(t,e,n)}}function hP(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function dP(t,e,n){return arguments.length>1?this.each((e==null?cP:typeof e=="function"?hP:uP)(t,e,n??"")):ic(this.node(),t)}function ic(t,e){return t.style.getPropertyValue(e)||b2(t).getComputedStyle(t,null).getPropertyValue(e)}function fP(t){return function(){delete this[t]}}function pP(t,e){return function(){this[t]=e}}function mP(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function gP(t,e){return arguments.length>1?this.each((e==null?fP:typeof e=="function"?mP:pP)(t,e)):this.node()[t]}function w2(t){return t.trim().split(/^|\s+/)}function Lv(t){return t.classList||new E2(t)}function E2(t){this._node=t,this._names=w2(t.getAttribute("class")||"")}E2.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function x2(t,e){for(var n=Lv(t),r=-1,s=e.length;++r<s;)n.add(e[r])}function T2(t,e){for(var n=Lv(t),r=-1,s=e.length;++r<s;)n.remove(e[r])}function yP(t){return function(){x2(this,t)}}function vP(t){return function(){T2(this,t)}}function _P(t,e){return function(){(e.apply(this,arguments)?x2:T2)(this,t)}}function bP(t,e){var n=w2(t+"");if(arguments.length<2){for(var r=Lv(this.node()),s=-1,a=n.length;++s<a;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?_P:e?yP:vP)(n,e))}function wP(){this.textContent=""}function EP(t){return function(){this.textContent=t}}function xP(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function TP(t){return arguments.length?this.each(t==null?wP:(typeof t=="function"?xP:EP)(t)):this.node().textContent}function SP(){this.innerHTML=""}function AP(t){return function(){this.innerHTML=t}}function RP(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function CP(t){return arguments.length?this.each(t==null?SP:(typeof t=="function"?RP:AP)(t)):this.node().innerHTML}function NP(){this.nextSibling&&this.parentNode.appendChild(this)}function IP(){return this.each(NP)}function DP(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function kP(){return this.each(DP)}function MP(t){var e=typeof t=="function"?t:m2(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function PP(){return null}function OP(t,e){var n=typeof t=="function"?t:m2(t),r=e==null?PP:typeof e=="function"?e:Vv(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function VP(){var t=this.parentNode;t&&t.removeChild(this)}function LP(){return this.each(VP)}function zP(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function UP(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function jP(t){return this.select(t?UP:zP)}function BP(t){return arguments.length?this.property("__data__",t):this.node().__data__}function HP(t){return function(e){t.call(this,e,this.__data__)}}function FP(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function $P(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,s=e.length,a;n<s;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function qP(t,e,n){return function(){var r=this.__on,s,a=HP(e);if(r){for(var c=0,u=r.length;c<u;++c)if((s=r[c]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=n),s.value=e;return}}this.addEventListener(t.type,a,n),s={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(s):this.__on=[s]}}function GP(t,e,n){var r=FP(t+""),s,a=r.length,c;if(arguments.length<2){var u=this.node().__on;if(u){for(var d=0,f=u.length,m;d<f;++d)for(s=0,m=u[d];s<a;++s)if((c=r[s]).type===m.type&&c.name===m.name)return m.value}return}for(u=e?qP:$P,s=0;s<a;++s)this.each(u(r[s],e,n));return this}function S2(t,e,n){var r=b2(t),s=r.CustomEvent;typeof s=="function"?s=new s(e,n):(s=r.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function YP(t,e){return function(){return S2(this,t,e)}}function KP(t,e){return function(){return S2(this,t,e.apply(this,arguments))}}function XP(t,e){return this.each((typeof e=="function"?KP:YP)(t,e))}function*WP(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,a=r.length,c;s<a;++s)(c=r[s])&&(yield c)}var A2=[null];function vr(t,e){this._groups=t,this._parents=e}function Oh(){return new vr([[document.documentElement]],A2)}function QP(){return this}vr.prototype=Oh.prototype={constructor:vr,select:x4,selectAll:R4,selectChild:D4,selectChildren:O4,filter:V4,data:H4,enter:L4,exit:$4,join:q4,merge:G4,selection:QP,order:Y4,sort:K4,call:W4,nodes:Q4,node:Z4,size:J4,empty:eP,each:tP,attr:lP,style:dP,property:gP,classed:bP,text:TP,html:CP,raise:IP,lower:kP,append:MP,insert:OP,remove:LP,clone:jP,datum:BP,on:GP,dispatch:XP,[Symbol.iterator]:WP};function Qr(t){return typeof t=="string"?new vr([[document.querySelector(t)]],[document.documentElement]):new vr([[t]],A2)}function ZP(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Ai(t,e){if(t=ZP(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const JP={passive:!1},ah={capture:!0,passive:!1};function O0(t){t.stopImmediatePropagation()}function Kl(t){t.preventDefault(),t.stopImmediatePropagation()}function R2(t){var e=t.document.documentElement,n=Qr(t).on("dragstart.drag",Kl,ah);"onselectstart"in e?n.on("selectstart.drag",Kl,ah):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function C2(t,e){var n=t.document.documentElement,r=Qr(t).on("dragstart.drag",null);e&&(r.on("click.drag",Kl,ah),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const yf=t=>()=>t;function Sy(t,{sourceEvent:e,subject:n,target:r,identifier:s,active:a,x:c,y:u,dx:d,dy:f,dispatch:m}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:m}})}Sy.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function e3(t){return!t.ctrlKey&&!t.button}function t3(){return this.parentNode}function n3(t,e){return e??{x:t.x,y:t.y}}function r3(){return navigator.maxTouchPoints||"ontouchstart"in this}function i3(){var t=e3,e=t3,n=n3,r=r3,s={},a=$p("start","drag","end"),c=0,u,d,f,m,v=0;function _(U){U.on("mousedown.drag",w).filter(r).on("touchstart.drag",C).on("touchmove.drag",D,JP).on("touchend.drag touchcancel.drag",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(U,q){if(!(m||!t.call(this,U,q))){var X=B(this,e.call(this,U,q),U,q,"mouse");X&&(Qr(U.view).on("mousemove.drag",T,ah).on("mouseup.drag",R,ah),R2(U.view),O0(U),f=!1,u=U.clientX,d=U.clientY,X("start",U))}}function T(U){if(Kl(U),!f){var q=U.clientX-u,X=U.clientY-d;f=q*q+X*X>v}s.mouse("drag",U)}function R(U){Qr(U.view).on("mousemove.drag mouseup.drag",null),C2(U.view,f),Kl(U),s.mouse("end",U)}function C(U,q){if(t.call(this,U,q)){var X=U.changedTouches,I=e.call(this,U,q),A=X.length,N,H;for(N=0;N<A;++N)(H=B(this,I,U,q,X[N].identifier,X[N]))&&(O0(U),H("start",U,X[N]))}}function D(U){var q=U.changedTouches,X=q.length,I,A;for(I=0;I<X;++I)(A=s[q[I].identifier])&&(Kl(U),A("drag",U,q[I]))}function z(U){var q=U.changedTouches,X=q.length,I,A;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),I=0;I<X;++I)(A=s[q[I].identifier])&&(O0(U),A("end",U,q[I]))}function B(U,q,X,I,A,N){var H=a.copy(),F=Ai(N||X,q),$,k,V;if((V=n.call(U,new Sy("beforestart",{sourceEvent:X,target:_,identifier:A,active:c,x:F[0],y:F[1],dx:0,dy:0,dispatch:H}),I))!=null)return $=V.x-F[0]||0,k=V.y-F[1]||0,function K(L,G,ee){var J=F,O;switch(L){case"start":s[A]=K,O=c++;break;case"end":delete s[A],--c;case"drag":F=Ai(ee||G,q),O=c;break}H.call(L,U,new Sy(L,{sourceEvent:G,subject:V,target:_,identifier:A,active:O,x:F[0]+$,y:F[1]+k,dx:F[0]-J[0],dy:F[1]-J[1],dispatch:H}),I)}}return _.filter=function(U){return arguments.length?(t=typeof U=="function"?U:yf(!!U),_):t},_.container=function(U){return arguments.length?(e=typeof U=="function"?U:yf(U),_):e},_.subject=function(U){return arguments.length?(n=typeof U=="function"?U:yf(U),_):n},_.touchable=function(U){return arguments.length?(r=typeof U=="function"?U:yf(!!U),_):r},_.on=function(){var U=a.on.apply(a,arguments);return U===a?_:U},_.clickDistance=function(U){return arguments.length?(v=(U=+U)*U,_):Math.sqrt(v)},_}function zv(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function N2(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Vh(){}var lh=.7,lp=1/lh,Xl="\\s*([+-]?\\d+)\\s*",ch="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ci="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",s3=/^#([0-9a-f]{3,8})$/,o3=new RegExp(`^rgb\\(${Xl},${Xl},${Xl}\\)$`),a3=new RegExp(`^rgb\\(${Ci},${Ci},${Ci}\\)$`),l3=new RegExp(`^rgba\\(${Xl},${Xl},${Xl},${ch}\\)$`),c3=new RegExp(`^rgba\\(${Ci},${Ci},${Ci},${ch}\\)$`),u3=new RegExp(`^hsl\\(${ch},${Ci},${Ci}\\)$`),h3=new RegExp(`^hsla\\(${ch},${Ci},${Ci},${ch}\\)$`),fx={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zv(Vh,uh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:px,formatHex:px,formatHex8:d3,formatHsl:f3,formatRgb:mx,toString:mx});function px(){return this.rgb().formatHex()}function d3(){return this.rgb().formatHex8()}function f3(){return I2(this).formatHsl()}function mx(){return this.rgb().formatRgb()}function uh(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=s3.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?gx(e):n===3?new Qn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?vf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?vf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=o3.exec(t))?new Qn(e[1],e[2],e[3],1):(e=a3.exec(t))?new Qn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=l3.exec(t))?vf(e[1],e[2],e[3],e[4]):(e=c3.exec(t))?vf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=u3.exec(t))?_x(e[1],e[2]/100,e[3]/100,1):(e=h3.exec(t))?_x(e[1],e[2]/100,e[3]/100,e[4]):fx.hasOwnProperty(t)?gx(fx[t]):t==="transparent"?new Qn(NaN,NaN,NaN,0):null}function gx(t){return new Qn(t>>16&255,t>>8&255,t&255,1)}function vf(t,e,n,r){return r<=0&&(t=e=n=NaN),new Qn(t,e,n,r)}function p3(t){return t instanceof Vh||(t=uh(t)),t?(t=t.rgb(),new Qn(t.r,t.g,t.b,t.opacity)):new Qn}function Ay(t,e,n,r){return arguments.length===1?p3(t):new Qn(t,e,n,r??1)}function Qn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}zv(Qn,Ay,N2(Vh,{brighter(t){return t=t==null?lp:Math.pow(lp,t),new Qn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?lh:Math.pow(lh,t),new Qn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Qn(va(this.r),va(this.g),va(this.b),cp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yx,formatHex:yx,formatHex8:m3,formatRgb:vx,toString:vx}));function yx(){return`#${fa(this.r)}${fa(this.g)}${fa(this.b)}`}function m3(){return`#${fa(this.r)}${fa(this.g)}${fa(this.b)}${fa((isNaN(this.opacity)?1:this.opacity)*255)}`}function vx(){const t=cp(this.opacity);return`${t===1?"rgb(":"rgba("}${va(this.r)}, ${va(this.g)}, ${va(this.b)}${t===1?")":`, ${t})`}`}function cp(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function va(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function fa(t){return t=va(t),(t<16?"0":"")+t.toString(16)}function _x(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Zr(t,e,n,r)}function I2(t){if(t instanceof Zr)return new Zr(t.h,t.s,t.l,t.opacity);if(t instanceof Vh||(t=uh(t)),!t)return new Zr;if(t instanceof Zr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),a=Math.max(e,n,r),c=NaN,u=a-s,d=(a+s)/2;return u?(e===a?c=(n-r)/u+(n<r)*6:n===a?c=(r-e)/u+2:c=(e-n)/u+4,u/=d<.5?a+s:2-a-s,c*=60):u=d>0&&d<1?0:c,new Zr(c,u,d,t.opacity)}function g3(t,e,n,r){return arguments.length===1?I2(t):new Zr(t,e,n,r??1)}function Zr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}zv(Zr,g3,N2(Vh,{brighter(t){return t=t==null?lp:Math.pow(lp,t),new Zr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?lh:Math.pow(lh,t),new Zr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new Qn(V0(t>=240?t-240:t+120,s,r),V0(t,s,r),V0(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new Zr(bx(this.h),_f(this.s),_f(this.l),cp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=cp(this.opacity);return`${t===1?"hsl(":"hsla("}${bx(this.h)}, ${_f(this.s)*100}%, ${_f(this.l)*100}%${t===1?")":`, ${t})`}`}}));function bx(t){return t=(t||0)%360,t<0?t+360:t}function _f(t){return Math.max(0,Math.min(1,t||0))}function V0(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Uv=t=>()=>t;function D2(t,e){return function(n){return t+n*e}}function y3(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function YY(t,e){var n=e-t;return n?D2(t,n>180||n<-180?n-360*Math.round(n/360):n):Uv(isNaN(t)?e:t)}function v3(t){return(t=+t)==1?k2:function(e,n){return n-e?y3(e,n,t):Uv(isNaN(e)?n:e)}}function k2(t,e){var n=e-t;return n?D2(t,n):Uv(isNaN(t)?e:t)}const wx=function t(e){var n=v3(e);function r(s,a){var c=n((s=Ay(s)).r,(a=Ay(a)).r),u=n(s.g,a.g),d=n(s.b,a.b),f=k2(s.opacity,a.opacity);return function(m){return s.r=c(m),s.g=u(m),s.b=d(m),s.opacity=f(m),s+""}}return r.gamma=t,r}(1);function Js(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Ry=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,L0=new RegExp(Ry.source,"g");function _3(t){return function(){return t}}function b3(t){return function(e){return t(e)+""}}function w3(t,e){var n=Ry.lastIndex=L0.lastIndex=0,r,s,a,c=-1,u=[],d=[];for(t=t+"",e=e+"";(r=Ry.exec(t))&&(s=L0.exec(e));)(a=s.index)>n&&(a=e.slice(n,a),u[c]?u[c]+=a:u[++c]=a),(r=r[0])===(s=s[0])?u[c]?u[c]+=s:u[++c]=s:(u[++c]=null,d.push({i:c,x:Js(r,s)})),n=L0.lastIndex;return n<e.length&&(a=e.slice(n),u[c]?u[c]+=a:u[++c]=a),u.length<2?d[0]?b3(d[0].x):_3(e):(e=d.length,function(f){for(var m=0,v;m<e;++m)u[(v=d[m]).i]=v.x(f);return u.join("")})}var Ex=180/Math.PI,Cy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function M2(t,e,n,r,s,a){var c,u,d;return(c=Math.sqrt(t*t+e*e))&&(t/=c,e/=c),(d=t*n+e*r)&&(n-=t*d,r-=e*d),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,d/=u),t*r<e*n&&(t=-t,e=-e,d=-d,c=-c),{translateX:s,translateY:a,rotate:Math.atan2(e,t)*Ex,skewX:Math.atan(d)*Ex,scaleX:c,scaleY:u}}var bf;function E3(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Cy:M2(e.a,e.b,e.c,e.d,e.e,e.f)}function x3(t){return t==null||(bf||(bf=document.createElementNS("http://www.w3.org/2000/svg","g")),bf.setAttribute("transform",t),!(t=bf.transform.baseVal.consolidate()))?Cy:(t=t.matrix,M2(t.a,t.b,t.c,t.d,t.e,t.f))}function P2(t,e,n,r){function s(f){return f.length?f.pop()+" ":""}function a(f,m,v,_,w,T){if(f!==v||m!==_){var R=w.push("translate(",null,e,null,n);T.push({i:R-4,x:Js(f,v)},{i:R-2,x:Js(m,_)})}else(v||_)&&w.push("translate("+v+e+_+n)}function c(f,m,v,_){f!==m?(f-m>180?m+=360:m-f>180&&(f+=360),_.push({i:v.push(s(v)+"rotate(",null,r)-2,x:Js(f,m)})):m&&v.push(s(v)+"rotate("+m+r)}function u(f,m,v,_){f!==m?_.push({i:v.push(s(v)+"skewX(",null,r)-2,x:Js(f,m)}):m&&v.push(s(v)+"skewX("+m+r)}function d(f,m,v,_,w,T){if(f!==v||m!==_){var R=w.push(s(w)+"scale(",null,",",null,")");T.push({i:R-4,x:Js(f,v)},{i:R-2,x:Js(m,_)})}else(v!==1||_!==1)&&w.push(s(w)+"scale("+v+","+_+")")}return function(f,m){var v=[],_=[];return f=t(f),m=t(m),a(f.translateX,f.translateY,m.translateX,m.translateY,v,_),c(f.rotate,m.rotate,v,_),u(f.skewX,m.skewX,v,_),d(f.scaleX,f.scaleY,m.scaleX,m.scaleY,v,_),f=m=null,function(w){for(var T=-1,R=_.length,C;++T<R;)v[(C=_[T]).i]=C.x(w);return v.join("")}}}var T3=P2(E3,"px, ","px)","deg)"),S3=P2(x3,", ",")",")"),A3=1e-12;function xx(t){return((t=Math.exp(t))+1/t)/2}function R3(t){return((t=Math.exp(t))-1/t)/2}function C3(t){return((t=Math.exp(2*t))-1)/(t+1)}const N3=function t(e,n,r){function s(a,c){var u=a[0],d=a[1],f=a[2],m=c[0],v=c[1],_=c[2],w=m-u,T=v-d,R=w*w+T*T,C,D;if(R<A3)D=Math.log(_/f)/e,C=function(I){return[u+I*w,d+I*T,f*Math.exp(e*I*D)]};else{var z=Math.sqrt(R),B=(_*_-f*f+r*R)/(2*f*n*z),U=(_*_-f*f-r*R)/(2*_*n*z),q=Math.log(Math.sqrt(B*B+1)-B),X=Math.log(Math.sqrt(U*U+1)-U);D=(X-q)/e,C=function(I){var A=I*D,N=xx(q),H=f/(n*z)*(N*C3(e*A+q)-R3(q));return[u+H*w,d+H*T,f*N/xx(e*A+q)]}}return C.duration=D*1e3*e/Math.SQRT2,C}return s.rho=function(a){var c=Math.max(.001,+a),u=c*c,d=u*u;return t(c,u,d)},s}(Math.SQRT2,2,4);var sc=0,zu=0,Nu=0,O2=1e3,up,Uu,hp=0,Ea=0,Gp=0,hh=typeof performance=="object"&&performance.now?performance:Date,V2=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function jv(){return Ea||(V2(I3),Ea=hh.now()+Gp)}function I3(){Ea=0}function dp(){this._call=this._time=this._next=null}dp.prototype=L2.prototype={constructor:dp,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?jv():+n)+(e==null?0:+e),!this._next&&Uu!==this&&(Uu?Uu._next=this:up=this,Uu=this),this._call=t,this._time=n,Ny()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ny())}};function L2(t,e,n){var r=new dp;return r.restart(t,e,n),r}function D3(){jv(),++sc;for(var t=up,e;t;)(e=Ea-t._time)>=0&&t._call.call(void 0,e),t=t._next;--sc}function Tx(){Ea=(hp=hh.now())+Gp,sc=zu=0;try{D3()}finally{sc=0,M3(),Ea=0}}function k3(){var t=hh.now(),e=t-hp;e>O2&&(Gp-=e,hp=t)}function M3(){for(var t,e=up,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:up=n);Uu=t,Ny(r)}function Ny(t){if(!sc){zu&&(zu=clearTimeout(zu));var e=t-Ea;e>24?(t<1/0&&(zu=setTimeout(Tx,t-hh.now()-Gp)),Nu&&(Nu=clearInterval(Nu))):(Nu||(hp=hh.now(),Nu=setInterval(k3,O2)),sc=1,V2(Tx))}}function Sx(t,e,n){var r=new dp;return e=e==null?0:+e,r.restart(s=>{r.stop(),t(s+e)},e,n),r}var P3=$p("start","end","cancel","interrupt"),O3=[],z2=0,Ax=1,Iy=2,Ff=3,Rx=4,Dy=5,$f=6;function Yp(t,e,n,r,s,a){var c=t.__transition;if(!c)t.__transition={};else if(n in c)return;V3(t,n,{name:e,index:r,group:s,on:P3,tween:O3,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:z2})}function Bv(t,e){var n=ii(t,e);if(n.state>z2)throw new Error("too late; already scheduled");return n}function zi(t,e){var n=ii(t,e);if(n.state>Ff)throw new Error("too late; already running");return n}function ii(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function V3(t,e,n){var r=t.__transition,s;r[e]=n,n.timer=L2(a,0,n.time);function a(f){n.state=Ax,n.timer.restart(c,n.delay,n.time),n.delay<=f&&c(f-n.delay)}function c(f){var m,v,_,w;if(n.state!==Ax)return d();for(m in r)if(w=r[m],w.name===n.name){if(w.state===Ff)return Sx(c);w.state===Rx?(w.state=$f,w.timer.stop(),w.on.call("interrupt",t,t.__data__,w.index,w.group),delete r[m]):+m<e&&(w.state=$f,w.timer.stop(),w.on.call("cancel",t,t.__data__,w.index,w.group),delete r[m])}if(Sx(function(){n.state===Ff&&(n.state=Rx,n.timer.restart(u,n.delay,n.time),u(f))}),n.state=Iy,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Iy){for(n.state=Ff,s=new Array(_=n.tween.length),m=0,v=-1;m<_;++m)(w=n.tween[m].value.call(t,t.__data__,n.index,n.group))&&(s[++v]=w);s.length=v+1}}function u(f){for(var m=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(d),n.state=Dy,1),v=-1,_=s.length;++v<_;)s[v].call(t,m);n.state===Dy&&(n.on.call("end",t,t.__data__,n.index,n.group),d())}function d(){n.state=$f,n.timer.stop(),delete r[e];for(var f in r)return;delete t.__transition}}function qf(t,e){var n=t.__transition,r,s,a=!0,c;if(n){e=e==null?null:e+"";for(c in n){if((r=n[c]).name!==e){a=!1;continue}s=r.state>Iy&&r.state<Dy,r.state=$f,r.timer.stop(),r.on.call(s?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[c]}a&&delete t.__transition}}function L3(t){return this.each(function(){qf(this,t)})}function z3(t,e){var n,r;return function(){var s=zi(this,t),a=s.tween;if(a!==n){r=n=a;for(var c=0,u=r.length;c<u;++c)if(r[c].name===e){r=r.slice(),r.splice(c,1);break}}s.tween=r}}function U3(t,e,n){var r,s;if(typeof n!="function")throw new Error;return function(){var a=zi(this,t),c=a.tween;if(c!==r){s=(r=c).slice();for(var u={name:e,value:n},d=0,f=s.length;d<f;++d)if(s[d].name===e){s[d]=u;break}d===f&&s.push(u)}a.tween=s}}function j3(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=ii(this.node(),n).tween,s=0,a=r.length,c;s<a;++s)if((c=r[s]).name===t)return c.value;return null}return this.each((e==null?z3:U3)(n,t,e))}function Hv(t,e,n){var r=t._id;return t.each(function(){var s=zi(this,r);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return ii(s,r).value[e]}}function U2(t,e){var n;return(typeof e=="number"?Js:e instanceof uh?wx:(n=uh(e))?(e=n,wx):w3)(t,e)}function B3(t){return function(){this.removeAttribute(t)}}function H3(t){return function(){this.removeAttributeNS(t.space,t.local)}}function F3(t,e,n){var r,s=n+"",a;return function(){var c=this.getAttribute(t);return c===s?null:c===r?a:a=e(r=c,n)}}function $3(t,e,n){var r,s=n+"",a;return function(){var c=this.getAttributeNS(t.space,t.local);return c===s?null:c===r?a:a=e(r=c,n)}}function q3(t,e,n){var r,s,a;return function(){var c,u=n(this),d;return u==null?void this.removeAttribute(t):(c=this.getAttribute(t),d=u+"",c===d?null:c===r&&d===s?a:(s=d,a=e(r=c,u)))}}function G3(t,e,n){var r,s,a;return function(){var c,u=n(this),d;return u==null?void this.removeAttributeNS(t.space,t.local):(c=this.getAttributeNS(t.space,t.local),d=u+"",c===d?null:c===r&&d===s?a:(s=d,a=e(r=c,u)))}}function Y3(t,e){var n=qp(t),r=n==="transform"?S3:U2;return this.attrTween(t,typeof e=="function"?(n.local?G3:q3)(n,r,Hv(this,"attr."+t,e)):e==null?(n.local?H3:B3)(n):(n.local?$3:F3)(n,r,e))}function K3(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function X3(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function W3(t,e){var n,r;function s(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&X3(t,a)),n}return s._value=e,s}function Q3(t,e){var n,r;function s(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&K3(t,a)),n}return s._value=e,s}function Z3(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=qp(t);return this.tween(n,(r.local?W3:Q3)(r,e))}function J3(t,e){return function(){Bv(this,t).delay=+e.apply(this,arguments)}}function eO(t,e){return e=+e,function(){Bv(this,t).delay=e}}function tO(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?J3:eO)(e,t)):ii(this.node(),e).delay}function nO(t,e){return function(){zi(this,t).duration=+e.apply(this,arguments)}}function rO(t,e){return e=+e,function(){zi(this,t).duration=e}}function iO(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?nO:rO)(e,t)):ii(this.node(),e).duration}function sO(t,e){if(typeof e!="function")throw new Error;return function(){zi(this,t).ease=e}}function oO(t){var e=this._id;return arguments.length?this.each(sO(e,t)):ii(this.node(),e).ease}function aO(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;zi(this,t).ease=n}}function lO(t){if(typeof t!="function")throw new Error;return this.each(aO(this._id,t))}function cO(t){typeof t!="function"&&(t=y2(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],c=a.length,u=r[s]=[],d,f=0;f<c;++f)(d=a[f])&&t.call(d,d.__data__,f,a)&&u.push(d);return new gs(r,this._parents,this._name,this._id)}function uO(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,s=n.length,a=Math.min(r,s),c=new Array(r),u=0;u<a;++u)for(var d=e[u],f=n[u],m=d.length,v=c[u]=new Array(m),_,w=0;w<m;++w)(_=d[w]||f[w])&&(v[w]=_);for(;u<r;++u)c[u]=e[u];return new gs(c,this._parents,this._name,this._id)}function hO(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function dO(t,e,n){var r,s,a=hO(e)?Bv:zi;return function(){var c=a(this,t),u=c.on;u!==r&&(s=(r=u).copy()).on(e,n),c.on=s}}function fO(t,e){var n=this._id;return arguments.length<2?ii(this.node(),n).on.on(t):this.each(dO(n,t,e))}function pO(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function mO(){return this.on("end.remove",pO(this._id))}function gO(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Vv(t));for(var r=this._groups,s=r.length,a=new Array(s),c=0;c<s;++c)for(var u=r[c],d=u.length,f=a[c]=new Array(d),m,v,_=0;_<d;++_)(m=u[_])&&(v=t.call(m,m.__data__,_,u))&&("__data__"in m&&(v.__data__=m.__data__),f[_]=v,Yp(f[_],e,n,_,f,ii(m,n)));return new gs(a,this._parents,e,n)}function yO(t){var e=this._name,n=this._id;typeof t!="function"&&(t=g2(t));for(var r=this._groups,s=r.length,a=[],c=[],u=0;u<s;++u)for(var d=r[u],f=d.length,m,v=0;v<f;++v)if(m=d[v]){for(var _=t.call(m,m.__data__,v,d),w,T=ii(m,n),R=0,C=_.length;R<C;++R)(w=_[R])&&Yp(w,e,n,R,_,T);a.push(_),c.push(m)}return new gs(a,c,e,n)}var vO=Oh.prototype.constructor;function _O(){return new vO(this._groups,this._parents)}function bO(t,e){var n,r,s;return function(){var a=ic(this,t),c=(this.style.removeProperty(t),ic(this,t));return a===c?null:a===n&&c===r?s:s=e(n=a,r=c)}}function j2(t){return function(){this.style.removeProperty(t)}}function wO(t,e,n){var r,s=n+"",a;return function(){var c=ic(this,t);return c===s?null:c===r?a:a=e(r=c,n)}}function EO(t,e,n){var r,s,a;return function(){var c=ic(this,t),u=n(this),d=u+"";return u==null&&(d=u=(this.style.removeProperty(t),ic(this,t))),c===d?null:c===r&&d===s?a:(s=d,a=e(r=c,u))}}function xO(t,e){var n,r,s,a="style."+e,c="end."+a,u;return function(){var d=zi(this,t),f=d.on,m=d.value[a]==null?u||(u=j2(e)):void 0;(f!==n||s!==m)&&(r=(n=f).copy()).on(c,s=m),d.on=r}}function TO(t,e,n){var r=(t+="")=="transform"?T3:U2;return e==null?this.styleTween(t,bO(t,r)).on("end.style."+t,j2(t)):typeof e=="function"?this.styleTween(t,EO(t,r,Hv(this,"style."+t,e))).each(xO(this._id,t)):this.styleTween(t,wO(t,r,e),n).on("end.style."+t,null)}function SO(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function AO(t,e,n){var r,s;function a(){var c=e.apply(this,arguments);return c!==s&&(r=(s=c)&&SO(t,c,n)),r}return a._value=e,a}function RO(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,AO(t,e,n??""))}function CO(t){return function(){this.textContent=t}}function NO(t){return function(){var e=t(this);this.textContent=e??""}}function IO(t){return this.tween("text",typeof t=="function"?NO(Hv(this,"text",t)):CO(t==null?"":t+""))}function DO(t){return function(e){this.textContent=t.call(this,e)}}function kO(t){var e,n;function r(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&DO(s)),e}return r._value=t,r}function MO(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,kO(t))}function PO(){for(var t=this._name,e=this._id,n=B2(),r=this._groups,s=r.length,a=0;a<s;++a)for(var c=r[a],u=c.length,d,f=0;f<u;++f)if(d=c[f]){var m=ii(d,e);Yp(d,t,n,f,c,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new gs(r,this._parents,t,n)}function OO(){var t,e,n=this,r=n._id,s=n.size();return new Promise(function(a,c){var u={value:c},d={value:function(){--s===0&&a()}};n.each(function(){var f=zi(this,r),m=f.on;m!==t&&(e=(t=m).copy(),e._.cancel.push(u),e._.interrupt.push(u),e._.end.push(d)),f.on=e}),s===0&&a()})}var VO=0;function gs(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function B2(){return++VO}var us=Oh.prototype;gs.prototype={constructor:gs,select:gO,selectAll:yO,selectChild:us.selectChild,selectChildren:us.selectChildren,filter:cO,merge:uO,selection:_O,transition:PO,call:us.call,nodes:us.nodes,node:us.node,size:us.size,empty:us.empty,each:us.each,on:fO,attr:Y3,attrTween:Z3,style:TO,styleTween:RO,text:IO,textTween:MO,remove:mO,tween:j3,delay:tO,duration:iO,ease:oO,easeVarying:lO,end:OO,[Symbol.iterator]:us[Symbol.iterator]};function LO(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var zO={time:null,delay:0,duration:250,ease:LO};function UO(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function jO(t){var e,n;t instanceof gs?(e=t._id,t=t._name):(e=B2(),(n=zO).time=jv(),t=t==null?null:t+"");for(var r=this._groups,s=r.length,a=0;a<s;++a)for(var c=r[a],u=c.length,d,f=0;f<u;++f)(d=c[f])&&Yp(d,t,e,f,c,n||UO(d,e));return new gs(r,this._parents,t,e)}Oh.prototype.interrupt=L3;Oh.prototype.transition=jO;const wf=t=>()=>t;function BO(t,{sourceEvent:e,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function ds(t,e,n){this.k=t,this.x=e,this.y=n}ds.prototype={constructor:ds,scale:function(t){return t===1?this:new ds(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ds(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var co=new ds(1,0,0);ds.prototype;function z0(t){t.stopImmediatePropagation()}function Iu(t){t.preventDefault(),t.stopImmediatePropagation()}function HO(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function FO(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Cx(){return this.__zoom||co}function $O(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function qO(){return navigator.maxTouchPoints||"ontouchstart"in this}function GO(t,e,n){var r=t.invertX(e[0][0])-n[0][0],s=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],c=t.invertY(e[1][1])-n[1][1];return t.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),c>a?(a+c)/2:Math.min(0,a)||Math.max(0,c))}function YO(){var t=HO,e=FO,n=GO,r=$O,s=qO,a=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,d=N3,f=$p("start","zoom","end"),m,v,_,w=500,T=150,R=0,C=10;function D(V){V.property("__zoom",Cx).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",H).filter(s).on("touchstart.zoom",F).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",k).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}D.transform=function(V,K,L,G){var ee=V.selection?V.selection():V;ee.property("__zoom",Cx),V!==ee?q(V,K,L,G):ee.interrupt().each(function(){X(this,arguments).event(G).start().zoom(null,typeof K=="function"?K.apply(this,arguments):K).end()})},D.scaleBy=function(V,K,L,G){D.scaleTo(V,function(){var ee=this.__zoom.k,J=typeof K=="function"?K.apply(this,arguments):K;return ee*J},L,G)},D.scaleTo=function(V,K,L,G){D.transform(V,function(){var ee=e.apply(this,arguments),J=this.__zoom,O=L==null?U(ee):typeof L=="function"?L.apply(this,arguments):L,Q=J.invert(O),ne=typeof K=="function"?K.apply(this,arguments):K;return n(B(z(J,ne),O,Q),ee,c)},L,G)},D.translateBy=function(V,K,L,G){D.transform(V,function(){return n(this.__zoom.translate(typeof K=="function"?K.apply(this,arguments):K,typeof L=="function"?L.apply(this,arguments):L),e.apply(this,arguments),c)},null,G)},D.translateTo=function(V,K,L,G,ee){D.transform(V,function(){var J=e.apply(this,arguments),O=this.__zoom,Q=G==null?U(J):typeof G=="function"?G.apply(this,arguments):G;return n(co.translate(Q[0],Q[1]).scale(O.k).translate(typeof K=="function"?-K.apply(this,arguments):-K,typeof L=="function"?-L.apply(this,arguments):-L),J,c)},G,ee)};function z(V,K){return K=Math.max(a[0],Math.min(a[1],K)),K===V.k?V:new ds(K,V.x,V.y)}function B(V,K,L){var G=K[0]-L[0]*V.k,ee=K[1]-L[1]*V.k;return G===V.x&&ee===V.y?V:new ds(V.k,G,ee)}function U(V){return[(+V[0][0]+ +V[1][0])/2,(+V[0][1]+ +V[1][1])/2]}function q(V,K,L,G){V.on("start.zoom",function(){X(this,arguments).event(G).start()}).on("interrupt.zoom end.zoom",function(){X(this,arguments).event(G).end()}).tween("zoom",function(){var ee=this,J=arguments,O=X(ee,J).event(G),Q=e.apply(ee,J),ne=L==null?U(Q):typeof L=="function"?L.apply(ee,J):L,W=Math.max(Q[1][0]-Q[0][0],Q[1][1]-Q[0][1]),re=ee.__zoom,he=typeof K=="function"?K.apply(ee,J):K,ue=d(re.invert(ne).concat(W/re.k),he.invert(ne).concat(W/he.k));return function(ve){if(ve===1)ve=he;else{var _e=ue(ve),Ae=W/_e[2];ve=new ds(Ae,ne[0]-_e[0]*Ae,ne[1]-_e[1]*Ae)}O.zoom(null,ve)}})}function X(V,K,L){return!L&&V.__zooming||new I(V,K)}function I(V,K){this.that=V,this.args=K,this.active=0,this.sourceEvent=null,this.extent=e.apply(V,K),this.taps=0}I.prototype={event:function(V){return V&&(this.sourceEvent=V),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(V,K){return this.mouse&&V!=="mouse"&&(this.mouse[1]=K.invert(this.mouse[0])),this.touch0&&V!=="touch"&&(this.touch0[1]=K.invert(this.touch0[0])),this.touch1&&V!=="touch"&&(this.touch1[1]=K.invert(this.touch1[0])),this.that.__zoom=K,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(V){var K=Qr(this.that).datum();f.call(V,this.that,new BO(V,{sourceEvent:this.sourceEvent,target:D,transform:this.that.__zoom,dispatch:f}),K)}};function A(V,...K){if(!t.apply(this,arguments))return;var L=X(this,K).event(V),G=this.__zoom,ee=Math.max(a[0],Math.min(a[1],G.k*Math.pow(2,r.apply(this,arguments)))),J=Ai(V);if(L.wheel)(L.mouse[0][0]!==J[0]||L.mouse[0][1]!==J[1])&&(L.mouse[1]=G.invert(L.mouse[0]=J)),clearTimeout(L.wheel);else{if(G.k===ee)return;L.mouse=[J,G.invert(J)],qf(this),L.start()}Iu(V),L.wheel=setTimeout(O,T),L.zoom("mouse",n(B(z(G,ee),L.mouse[0],L.mouse[1]),L.extent,c));function O(){L.wheel=null,L.end()}}function N(V,...K){if(_||!t.apply(this,arguments))return;var L=V.currentTarget,G=X(this,K,!0).event(V),ee=Qr(V.view).on("mousemove.zoom",ne,!0).on("mouseup.zoom",W,!0),J=Ai(V,L),O=V.clientX,Q=V.clientY;R2(V.view),z0(V),G.mouse=[J,this.__zoom.invert(J)],qf(this),G.start();function ne(re){if(Iu(re),!G.moved){var he=re.clientX-O,ue=re.clientY-Q;G.moved=he*he+ue*ue>R}G.event(re).zoom("mouse",n(B(G.that.__zoom,G.mouse[0]=Ai(re,L),G.mouse[1]),G.extent,c))}function W(re){ee.on("mousemove.zoom mouseup.zoom",null),C2(re.view,G.moved),Iu(re),G.event(re).end()}}function H(V,...K){if(t.apply(this,arguments)){var L=this.__zoom,G=Ai(V.changedTouches?V.changedTouches[0]:V,this),ee=L.invert(G),J=L.k*(V.shiftKey?.5:2),O=n(B(z(L,J),G,ee),e.apply(this,K),c);Iu(V),u>0?Qr(this).transition().duration(u).call(q,O,G,V):Qr(this).call(D.transform,O,G,V)}}function F(V,...K){if(t.apply(this,arguments)){var L=V.touches,G=L.length,ee=X(this,K,V.changedTouches.length===G).event(V),J,O,Q,ne;for(z0(V),O=0;O<G;++O)Q=L[O],ne=Ai(Q,this),ne=[ne,this.__zoom.invert(ne),Q.identifier],ee.touch0?!ee.touch1&&ee.touch0[2]!==ne[2]&&(ee.touch1=ne,ee.taps=0):(ee.touch0=ne,J=!0,ee.taps=1+!!m);m&&(m=clearTimeout(m)),J&&(ee.taps<2&&(v=ne[0],m=setTimeout(function(){m=null},w)),qf(this),ee.start())}}function $(V,...K){if(this.__zooming){var L=X(this,K).event(V),G=V.changedTouches,ee=G.length,J,O,Q,ne;for(Iu(V),J=0;J<ee;++J)O=G[J],Q=Ai(O,this),L.touch0&&L.touch0[2]===O.identifier?L.touch0[0]=Q:L.touch1&&L.touch1[2]===O.identifier&&(L.touch1[0]=Q);if(O=L.that.__zoom,L.touch1){var W=L.touch0[0],re=L.touch0[1],he=L.touch1[0],ue=L.touch1[1],ve=(ve=he[0]-W[0])*ve+(ve=he[1]-W[1])*ve,_e=(_e=ue[0]-re[0])*_e+(_e=ue[1]-re[1])*_e;O=z(O,Math.sqrt(ve/_e)),Q=[(W[0]+he[0])/2,(W[1]+he[1])/2],ne=[(re[0]+ue[0])/2,(re[1]+ue[1])/2]}else if(L.touch0)Q=L.touch0[0],ne=L.touch0[1];else return;L.zoom("touch",n(B(O,Q,ne),L.extent,c))}}function k(V,...K){if(this.__zooming){var L=X(this,K).event(V),G=V.changedTouches,ee=G.length,J,O;for(z0(V),_&&clearTimeout(_),_=setTimeout(function(){_=null},w),J=0;J<ee;++J)O=G[J],L.touch0&&L.touch0[2]===O.identifier?delete L.touch0:L.touch1&&L.touch1[2]===O.identifier&&delete L.touch1;if(L.touch1&&!L.touch0&&(L.touch0=L.touch1,delete L.touch1),L.touch0)L.touch0[1]=this.__zoom.invert(L.touch0[0]);else if(L.end(),L.taps===2&&(O=Ai(O,this),Math.hypot(v[0]-O[0],v[1]-O[1])<C)){var Q=Qr(this).on("dblclick.zoom");Q&&Q.apply(this,arguments)}}}return D.wheelDelta=function(V){return arguments.length?(r=typeof V=="function"?V:wf(+V),D):r},D.filter=function(V){return arguments.length?(t=typeof V=="function"?V:wf(!!V),D):t},D.touchable=function(V){return arguments.length?(s=typeof V=="function"?V:wf(!!V),D):s},D.extent=function(V){return arguments.length?(e=typeof V=="function"?V:wf([[+V[0][0],+V[0][1]],[+V[1][0],+V[1][1]]]),D):e},D.scaleExtent=function(V){return arguments.length?(a[0]=+V[0],a[1]=+V[1],D):[a[0],a[1]]},D.translateExtent=function(V){return arguments.length?(c[0][0]=+V[0][0],c[1][0]=+V[1][0],c[0][1]=+V[0][1],c[1][1]=+V[1][1],D):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},D.constrain=function(V){return arguments.length?(n=V,D):n},D.duration=function(V){return arguments.length?(u=+V,D):u},D.interpolate=function(V){return arguments.length?(d=V,D):d},D.on=function(){var V=f.on.apply(f,arguments);return V===f?D:V},D.clickDistance=function(V){return arguments.length?(R=(V=+V)*V,D):Math.sqrt(R)},D.tapDistance=function(V){return arguments.length?(C=+V,D):C},D}var H2=f2();const Kp=M.createContext(null),KO=Kp.Provider,ys={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},F2=ys.error001();function Rt(t,e){const n=M.useContext(Kp);if(n===null)throw new Error(F2);return p2(n,t,e)}const pn=()=>{const t=M.useContext(Kp);if(t===null)throw new Error(F2);return M.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},XO=t=>t.userSelectionActive?"none":"all";function $2({position:t,children:e,className:n,style:r,...s}){const a=Rt(XO),c=`${t}`.split("-");return fe.createElement("div",{className:$n(["react-flow__panel",n,...c]),style:{...r,pointerEvents:a},...s},e)}function WO({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:fe.createElement($2,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},fe.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const QO=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:a={},labelBgPadding:c=[2,4],labelBgBorderRadius:u=2,children:d,className:f,...m})=>{const v=M.useRef(null),[_,w]=M.useState({x:0,y:0,width:0,height:0}),T=$n(["react-flow__edge-textwrapper",f]);return M.useEffect(()=>{if(v.current){const R=v.current.getBBox();w({x:R.x,y:R.y,width:R.width,height:R.height})}},[n]),typeof n>"u"||!n?null:fe.createElement("g",{transform:`translate(${t-_.width/2} ${e-_.height/2})`,className:T,visibility:_.width?"visible":"hidden",...m},s&&fe.createElement("rect",{width:_.width+2*c[0],x:-c[0],y:-c[1],height:_.height+2*c[1],className:"react-flow__edge-textbg",style:a,rx:u,ry:u}),fe.createElement("text",{className:"react-flow__edge-text",y:_.height/2,dy:"0.3em",ref:v,style:r},n),d)};var ZO=M.memo(QO);const Fv=t=>({width:t.offsetWidth,height:t.offsetHeight}),oc=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),$v=(t={x:0,y:0},e)=>({x:oc(t.x,e[0][0],e[1][0]),y:oc(t.y,e[0][1],e[1][1])}),Nx=(t,e,n)=>t<e?oc(Math.abs(t-e),1,50)/50:t>n?-oc(Math.abs(t-n),1,50)/50:0,q2=(t,e)=>{const n=Nx(t.x,35,e.width-35)*20,r=Nx(t.y,35,e.height-35)*20;return[n,r]},G2=t=>t.getRootNode?.()||window?.document,JO=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),qv=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),eV=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),Ix=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),ky=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},tV=t=>Ur(t.width)&&Ur(t.height)&&Ur(t.x)&&Ur(t.y),Ur=t=>!isNaN(t)&&isFinite(t),Ot=Symbol.for("internals"),Y2=["Enter"," ","Escape"],nV=(t,e)=>{},rV=t=>"nativeEvent"in t;function My(t){const n=(rV(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const K2=t=>"clientX"in t,uo=(t,e)=>{const n=K2(t),r=n?t.clientX:t.touches?.[0].clientX,s=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:s-(e?.top??0)}},fp=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Lh=({id:t,path:e,labelX:n,labelY:r,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:v,markerStart:_,interactionWidth:w=20})=>fe.createElement(fe.Fragment,null,fe.createElement("path",{id:t,style:m,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:v,markerStart:_}),w&&fe.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:w,className:"react-flow__edge-interaction"}),s&&Ur(n)&&Ur(r)?fe.createElement(ZO,{x:n,y:r,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f}):null);Lh.displayName="BaseEdge";function Du(t,e,n){return n===void 0?n:r=>{const s=e().edges.find(a=>a.id===t);s&&n(r,{...s})}}function X2({sourceX:t,sourceY:e,targetX:n,targetY:r}){const s=Math.abs(n-t)/2,a=n<t?n+s:n-s,c=Math.abs(r-e)/2,u=r<e?r+c:r-c;return[a,u,s,c]}function W2({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:s,sourceControlY:a,targetControlX:c,targetControlY:u}){const d=t*.125+s*.375+c*.375+n*.125,f=e*.125+a*.375+u*.375+r*.125,m=Math.abs(d-t),v=Math.abs(f-e);return[d,f,m,v]}var yo;(function(t){t.Strict="strict",t.Loose="loose"})(yo||(yo={}));var pa;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(pa||(pa={}));var dh;(function(t){t.Partial="partial",t.Full="full"})(dh||(dh={}));var to;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(to||(to={}));var xa;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(xa||(xa={}));var Te;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Te||(Te={}));function Dx({pos:t,x1:e,y1:n,x2:r,y2:s}){return t===Te.Left||t===Te.Right?[.5*(e+r),n]:[e,.5*(n+s)]}function Q2({sourceX:t,sourceY:e,sourcePosition:n=Te.Bottom,targetX:r,targetY:s,targetPosition:a=Te.Top}){const[c,u]=Dx({pos:n,x1:t,y1:e,x2:r,y2:s}),[d,f]=Dx({pos:a,x1:r,y1:s,x2:t,y2:e}),[m,v,_,w]=W2({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:c,sourceControlY:u,targetControlX:d,targetControlY:f});return[`M${t},${e} C${c},${u} ${d},${f} ${r},${s}`,m,v,_,w]}const Gv=M.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=Te.Bottom,targetPosition:a=Te.Top,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:v,style:_,markerEnd:w,markerStart:T,interactionWidth:R})=>{const[C,D,z]=Q2({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:a});return fe.createElement(Lh,{path:C,labelX:D,labelY:z,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:v,style:_,markerEnd:w,markerStart:T,interactionWidth:R})});Gv.displayName="SimpleBezierEdge";const kx={[Te.Left]:{x:-1,y:0},[Te.Right]:{x:1,y:0},[Te.Top]:{x:0,y:-1},[Te.Bottom]:{x:0,y:1}},iV=({source:t,sourcePosition:e=Te.Bottom,target:n})=>e===Te.Left||e===Te.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},Mx=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function sV({source:t,sourcePosition:e=Te.Bottom,target:n,targetPosition:r=Te.Top,center:s,offset:a}){const c=kx[e],u=kx[r],d={x:t.x+c.x*a,y:t.y+c.y*a},f={x:n.x+u.x*a,y:n.y+u.y*a},m=iV({source:d,sourcePosition:e,target:f}),v=m.x!==0?"x":"y",_=m[v];let w=[],T,R;const C={x:0,y:0},D={x:0,y:0},[z,B,U,q]=X2({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(c[v]*u[v]===-1){T=s.x??z,R=s.y??B;const I=[{x:T,y:d.y},{x:T,y:f.y}],A=[{x:d.x,y:R},{x:f.x,y:R}];c[v]===_?w=v==="x"?I:A:w=v==="x"?A:I}else{const I=[{x:d.x,y:f.y}],A=[{x:f.x,y:d.y}];if(v==="x"?w=c.x===_?A:I:w=c.y===_?I:A,e===r){const k=Math.abs(t[v]-n[v]);if(k<=a){const V=Math.min(a-1,a-k);c[v]===_?C[v]=(d[v]>t[v]?-1:1)*V:D[v]=(f[v]>n[v]?-1:1)*V}}if(e!==r){const k=v==="x"?"y":"x",V=c[v]===u[k],K=d[k]>f[k],L=d[k]<f[k];(c[v]===1&&(!V&&K||V&&L)||c[v]!==1&&(!V&&L||V&&K))&&(w=v==="x"?I:A)}const N={x:d.x+C.x,y:d.y+C.y},H={x:f.x+D.x,y:f.y+D.y},F=Math.max(Math.abs(N.x-w[0].x),Math.abs(H.x-w[0].x)),$=Math.max(Math.abs(N.y-w[0].y),Math.abs(H.y-w[0].y));F>=$?(T=(N.x+H.x)/2,R=w[0].y):(T=w[0].x,R=(N.y+H.y)/2)}return[[t,{x:d.x+C.x,y:d.y+C.y},...w,{x:f.x+D.x,y:f.y+D.y},n],T,R,U,q]}function oV(t,e,n,r){const s=Math.min(Mx(t,e)/2,Mx(e,n)/2,r),{x:a,y:c}=e;if(t.x===a&&a===n.x||t.y===c&&c===n.y)return`L${a} ${c}`;if(t.y===c){const f=t.x<n.x?-1:1,m=t.y<n.y?1:-1;return`L ${a+s*f},${c}Q ${a},${c} ${a},${c+s*m}`}const u=t.x<n.x?1:-1,d=t.y<n.y?-1:1;return`L ${a},${c+s*d}Q ${a},${c} ${a+s*u},${c}`}function Py({sourceX:t,sourceY:e,sourcePosition:n=Te.Bottom,targetX:r,targetY:s,targetPosition:a=Te.Top,borderRadius:c=5,centerX:u,centerY:d,offset:f=20}){const[m,v,_,w,T]=sV({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:s},targetPosition:a,center:{x:u,y:d},offset:f});return[m.reduce((C,D,z)=>{let B="";return z>0&&z<m.length-1?B=oV(m[z-1],D,m[z+1],c):B=`${z===0?"M":"L"}${D.x} ${D.y}`,C+=B,C},""),v,_,w,T]}const Xp=M.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,sourcePosition:v=Te.Bottom,targetPosition:_=Te.Top,markerEnd:w,markerStart:T,pathOptions:R,interactionWidth:C})=>{const[D,z,B]=Py({sourceX:t,sourceY:e,sourcePosition:v,targetX:n,targetY:r,targetPosition:_,borderRadius:R?.borderRadius,offset:R?.offset});return fe.createElement(Lh,{path:D,labelX:z,labelY:B,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:w,markerStart:T,interactionWidth:C})});Xp.displayName="SmoothStepEdge";const Yv=M.memo(t=>fe.createElement(Xp,{...t,pathOptions:M.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));Yv.displayName="StepEdge";function aV({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[s,a,c,u]=X2({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,s,a,c,u]}const Kv=M.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:v,markerStart:_,interactionWidth:w})=>{const[T,R,C]=aV({sourceX:t,sourceY:e,targetX:n,targetY:r});return fe.createElement(Lh,{path:T,labelX:R,labelY:C,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:v,markerStart:_,interactionWidth:w})});Kv.displayName="StraightEdge";function Ef(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function Px({pos:t,x1:e,y1:n,x2:r,y2:s,c:a}){switch(t){case Te.Left:return[e-Ef(e-r,a),n];case Te.Right:return[e+Ef(r-e,a),n];case Te.Top:return[e,n-Ef(n-s,a)];case Te.Bottom:return[e,n+Ef(s-n,a)]}}function Z2({sourceX:t,sourceY:e,sourcePosition:n=Te.Bottom,targetX:r,targetY:s,targetPosition:a=Te.Top,curvature:c=.25}){const[u,d]=Px({pos:n,x1:t,y1:e,x2:r,y2:s,c}),[f,m]=Px({pos:a,x1:r,y1:s,x2:t,y2:e,c}),[v,_,w,T]=W2({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:u,sourceControlY:d,targetControlX:f,targetControlY:m});return[`M${t},${e} C${u},${d} ${f},${m} ${r},${s}`,v,_,w,T]}const pp=M.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=Te.Bottom,targetPosition:a=Te.Top,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:v,style:_,markerEnd:w,markerStart:T,pathOptions:R,interactionWidth:C})=>{const[D,z,B]=Z2({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:a,curvature:R?.curvature});return fe.createElement(Lh,{path:D,labelX:z,labelY:B,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:v,style:_,markerEnd:w,markerStart:T,interactionWidth:C})});pp.displayName="BezierEdge";const Xv=M.createContext(null),lV=Xv.Provider;Xv.Consumer;const cV=()=>M.useContext(Xv),uV=t=>"id"in t&&"source"in t&&"target"in t,hV=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,Oy=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,dV=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),fV=(t,e)=>{if(!t.source||!t.target)return e;let n;return uV(t)?n={...t}:n={...t,id:hV(t)},dV(n,e)?e:e.concat(n)},Vy=({x:t,y:e},[n,r,s],a,[c,u])=>{const d={x:(t-n)/s,y:(e-r)/s};return a?{x:c*Math.round(d.x/c),y:u*Math.round(d.y/u)}:d},J2=({x:t,y:e},[n,r,s])=>({x:t*s+n,y:e*s+r}),Wl=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],s={x:t.position.x-n,y:t.position.y-r};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:s}},Wv=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,s)=>{const{x:a,y:c}=Wl(s,e).positionAbsolute;return JO(r,qv({x:a,y:c,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return eV(n)},eR=(t,e,[n,r,s]=[0,0,1],a=!1,c=!1,u=[0,0])=>{const d={x:(e.x-n)/s,y:(e.y-r)/s,width:e.width/s,height:e.height/s},f=[];return t.forEach(m=>{const{width:v,height:_,selectable:w=!0,hidden:T=!1}=m;if(c&&!w||T)return!1;const{positionAbsolute:R}=Wl(m,u),C={x:R.x,y:R.y,width:v||0,height:_||0},D=ky(d,C),z=typeof v>"u"||typeof _>"u"||v===null||_===null,B=a&&D>0,U=(v||0)*(_||0);(z||B||D>=U||m.dragging)&&f.push(m)}),f},tR=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},nR=(t,e,n,r,s,a=.1)=>{const c=e/(t.width*(1+a)),u=n/(t.height*(1+a)),d=Math.min(c,u),f=oc(d,r,s),m=t.x+t.width/2,v=t.y+t.height/2,_=e/2-m*f,w=n/2-v*f;return{x:_,y:w,zoom:f}},ua=(t,e=0)=>t.transition().duration(e);function Ox(t,e,n,r){return(e[n]||[]).reduce((s,a)=>(`${t.id}-${a.id}-${n}`!==r&&s.push({id:a.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+a.x+a.width/2,y:(t.positionAbsolute?.y??0)+a.y+a.height/2}),s),[])}function pV(t,e,n,r,s,a){const{x:c,y:u}=uo(t),f=e.elementsFromPoint(c,u).find(T=>T.classList.contains("react-flow__handle"));if(f){const T=f.getAttribute("data-nodeid");if(T){const R=Qv(void 0,f),C=f.getAttribute("data-handleid"),D=a({nodeId:T,id:C,type:R});if(D){const z=s.find(B=>B.nodeId===T&&B.type===R&&B.id===C);return{handle:{id:C,type:R,nodeId:T,x:z?.x||n.x,y:z?.y||n.y},validHandleResult:D}}}}let m=[],v=1/0;if(s.forEach(T=>{const R=Math.sqrt((T.x-n.x)**2+(T.y-n.y)**2);if(R<=r){const C=a(T);R<=v&&(R<v?m=[{handle:T,validHandleResult:C}]:R===v&&m.push({handle:T,validHandleResult:C}),v=R)}}),!m.length)return{handle:null,validHandleResult:rR()};if(m.length===1)return m[0];const _=m.some(({validHandleResult:T})=>T.isValid),w=m.some(({handle:T})=>T.type==="target");return m.find(({handle:T,validHandleResult:R})=>w?T.type==="target":_?R.isValid:!0)||m[0]}const mV={source:null,target:null,sourceHandle:null,targetHandle:null},rR=()=>({handleDomNode:null,isValid:!1,connection:mV,endHandle:null});function iR(t,e,n,r,s,a,c){const u=s==="target",d=c.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),f={...rR(),handleDomNode:d};if(d){const m=Qv(void 0,d),v=d.getAttribute("data-nodeid"),_=d.getAttribute("data-handleid"),w=d.classList.contains("connectable"),T=d.classList.contains("connectableend"),R={source:u?v:n,sourceHandle:u?_:r,target:u?n:v,targetHandle:u?r:_};f.connection=R,w&&T&&(e===yo.Strict?u&&m==="source"||!u&&m==="target":v!==n||_!==r)&&(f.endHandle={nodeId:v,handleId:_,type:m},f.isValid=a(R))}return f}function gV({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((s,a)=>{if(a[Ot]){const{handleBounds:c}=a[Ot];let u=[],d=[];c&&(u=Ox(a,c,"source",`${e}-${n}-${r}`),d=Ox(a,c,"target",`${e}-${n}-${r}`)),s.push(...u,...d)}return s},[])}function Qv(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function U0(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function yV(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function sR({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:s,getState:a,setState:c,isValidConnection:u,edgeUpdaterType:d,onReconnectEnd:f}){const m=G2(t.target),{connectionMode:v,domNode:_,autoPanOnConnect:w,connectionRadius:T,onConnectStart:R,panBy:C,getNodes:D,cancelConnection:z}=a();let B=0,U;const{x:q,y:X}=uo(t),I=m?.elementFromPoint(q,X),A=Qv(d,I),N=_?.getBoundingClientRect();if(!N||!A)return;let H,F=uo(t,N),$=!1,k=null,V=!1,K=null;const L=gV({nodes:D(),nodeId:n,handleId:e,handleType:A}),G=()=>{if(!w)return;const[O,Q]=q2(F,N);C({x:O,y:Q}),B=requestAnimationFrame(G)};c({connectionPosition:F,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:A,connectionStartHandle:{nodeId:n,handleId:e,type:A},connectionEndHandle:null}),R?.(t,{nodeId:n,handleId:e,handleType:A});function ee(O){const{transform:Q}=a();F=uo(O,N);const{handle:ne,validHandleResult:W}=pV(O,m,Vy(F,Q,!1,[1,1]),T,L,re=>iR(re,v,n,e,s?"target":"source",u,m));if(U=ne,$||(G(),$=!0),K=W.handleDomNode,k=W.connection,V=W.isValid,c({connectionPosition:U&&V?J2({x:U.x,y:U.y},Q):F,connectionStatus:yV(!!U,V),connectionEndHandle:W.endHandle}),!U&&!V&&!K)return U0(H);k.source!==k.target&&K&&(U0(H),H=K,K.classList.add("connecting","react-flow__handle-connecting"),K.classList.toggle("valid",V),K.classList.toggle("react-flow__handle-valid",V))}function J(O){(U||K)&&k&&V&&r?.(k),a().onConnectEnd?.(O),d&&f?.(O),U0(H),z(),cancelAnimationFrame(B),$=!1,V=!1,k=null,K=null,m.removeEventListener("mousemove",ee),m.removeEventListener("mouseup",J),m.removeEventListener("touchmove",ee),m.removeEventListener("touchend",J)}m.addEventListener("mousemove",ee),m.addEventListener("mouseup",J),m.addEventListener("touchmove",ee),m.addEventListener("touchend",J)}const Vx=()=>!0,vV=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),_V=(t,e,n)=>r=>{const{connectionStartHandle:s,connectionEndHandle:a,connectionClickStartHandle:c}=r;return{connecting:s?.nodeId===t&&s?.handleId===e&&s?.type===n||a?.nodeId===t&&a?.handleId===e&&a?.type===n,clickConnecting:c?.nodeId===t&&c?.handleId===e&&c?.type===n}},oR=M.forwardRef(({type:t="source",position:e=Te.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:a=!0,id:c,onConnect:u,children:d,className:f,onMouseDown:m,onTouchStart:v,..._},w)=>{const T=c||null,R=t==="target",C=pn(),D=cV(),{connectOnClick:z,noPanClassName:B}=Rt(vV,kn),{connecting:U,clickConnecting:q}=Rt(_V(D,T,t),kn);D||C.getState().onError?.("010",ys.error010());const X=N=>{const{defaultEdgeOptions:H,onConnect:F,hasDefaultEdges:$}=C.getState(),k={...H,...N};if($){const{edges:V,setEdges:K}=C.getState();K(fV(k,V))}F?.(k),u?.(k)},I=N=>{if(!D)return;const H=K2(N);s&&(H&&N.button===0||!H)&&sR({event:N,handleId:T,nodeId:D,onConnect:X,isTarget:R,getState:C.getState,setState:C.setState,isValidConnection:n||C.getState().isValidConnection||Vx}),H?m?.(N):v?.(N)},A=N=>{const{onClickConnectStart:H,onClickConnectEnd:F,connectionClickStartHandle:$,connectionMode:k,isValidConnection:V}=C.getState();if(!D||!$&&!s)return;if(!$){H?.(N,{nodeId:D,handleId:T,handleType:t}),C.setState({connectionClickStartHandle:{nodeId:D,type:t,handleId:T}});return}const K=G2(N.target),L=n||V||Vx,{connection:G,isValid:ee}=iR({nodeId:D,id:T,type:t},k,$.nodeId,$.handleId||null,$.type,L,K);ee&&X(G),F?.(N),C.setState({connectionClickStartHandle:null})};return fe.createElement("div",{"data-handleid":T,"data-nodeid":D,"data-handlepos":e,"data-id":`${D}-${T}-${t}`,className:$n(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",B,f,{source:!R,target:R,connectable:r,connectablestart:s,connectableend:a,connecting:q,connectionindicator:r&&(s&&!U||a&&U)}]),onMouseDown:I,onTouchStart:I,onClick:z?A:void 0,ref:w,..._},d)});oR.displayName="Handle";var Hn=M.memo(oR);const aR=({data:t,isConnectable:e,targetPosition:n=Te.Top,sourcePosition:r=Te.Bottom})=>fe.createElement(fe.Fragment,null,fe.createElement(Hn,{type:"target",position:n,isConnectable:e}),t?.label,fe.createElement(Hn,{type:"source",position:r,isConnectable:e}));aR.displayName="DefaultNode";var Ly=M.memo(aR);const lR=({data:t,isConnectable:e,sourcePosition:n=Te.Bottom})=>fe.createElement(fe.Fragment,null,t?.label,fe.createElement(Hn,{type:"source",position:n,isConnectable:e}));lR.displayName="InputNode";var cR=M.memo(lR);const uR=({data:t,isConnectable:e,targetPosition:n=Te.Top})=>fe.createElement(fe.Fragment,null,fe.createElement(Hn,{type:"target",position:n,isConnectable:e}),t?.label);uR.displayName="OutputNode";var hR=M.memo(uR);const Zv=()=>null;Zv.displayName="GroupNode";const bV=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),xf=t=>t.id;function wV(t,e){return kn(t.selectedNodes.map(xf),e.selectedNodes.map(xf))&&kn(t.selectedEdges.map(xf),e.selectedEdges.map(xf))}const dR=M.memo(({onSelectionChange:t})=>{const e=pn(),{selectedNodes:n,selectedEdges:r}=Rt(bV,wV);return M.useEffect(()=>{const s={nodes:n,edges:r};t?.(s),e.getState().onSelectionChange.forEach(a=>a(s))},[n,r,t]),null});dR.displayName="SelectionListener";const EV=t=>!!t.onSelectionChange;function xV({onSelectionChange:t}){const e=Rt(EV);return t||e?fe.createElement(dR,{onSelectionChange:t}):null}const TV=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function Cl(t,e){M.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function Ge(t,e,n){M.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const SV=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:s,onConnectStart:a,onConnectEnd:c,onClickConnectStart:u,onClickConnectEnd:d,nodesDraggable:f,nodesConnectable:m,nodesFocusable:v,edgesFocusable:_,edgesUpdatable:w,elevateNodesOnSelect:T,minZoom:R,maxZoom:C,nodeExtent:D,onNodesChange:z,onEdgesChange:B,elementsSelectable:U,connectionMode:q,snapGrid:X,snapToGrid:I,translateExtent:A,connectOnClick:N,defaultEdgeOptions:H,fitView:F,fitViewOptions:$,onNodesDelete:k,onEdgesDelete:V,onNodeDrag:K,onNodeDragStart:L,onNodeDragStop:G,onSelectionDrag:ee,onSelectionDragStart:J,onSelectionDragStop:O,noPanClassName:Q,nodeOrigin:ne,rfId:W,autoPanOnConnect:re,autoPanOnNodeDrag:he,onError:ue,connectionRadius:ve,isValidConnection:_e,nodeDragThreshold:Ae})=>{const{setNodes:Ce,setEdges:rt,setDefaultNodesAndEdges:Ye,setMinZoom:De,setMaxZoom:Le,setTranslateExtent:st,setNodeExtent:Ht,reset:je}=Rt(TV,kn),we=pn();return M.useEffect(()=>{const Nt=r?.map(Sn=>({...Sn,...H}));return Ye(n,Nt),()=>{je()}},[]),Ge("defaultEdgeOptions",H,we.setState),Ge("connectionMode",q,we.setState),Ge("onConnect",s,we.setState),Ge("onConnectStart",a,we.setState),Ge("onConnectEnd",c,we.setState),Ge("onClickConnectStart",u,we.setState),Ge("onClickConnectEnd",d,we.setState),Ge("nodesDraggable",f,we.setState),Ge("nodesConnectable",m,we.setState),Ge("nodesFocusable",v,we.setState),Ge("edgesFocusable",_,we.setState),Ge("edgesUpdatable",w,we.setState),Ge("elementsSelectable",U,we.setState),Ge("elevateNodesOnSelect",T,we.setState),Ge("snapToGrid",I,we.setState),Ge("snapGrid",X,we.setState),Ge("onNodesChange",z,we.setState),Ge("onEdgesChange",B,we.setState),Ge("connectOnClick",N,we.setState),Ge("fitViewOnInit",F,we.setState),Ge("fitViewOnInitOptions",$,we.setState),Ge("onNodesDelete",k,we.setState),Ge("onEdgesDelete",V,we.setState),Ge("onNodeDrag",K,we.setState),Ge("onNodeDragStart",L,we.setState),Ge("onNodeDragStop",G,we.setState),Ge("onSelectionDrag",ee,we.setState),Ge("onSelectionDragStart",J,we.setState),Ge("onSelectionDragStop",O,we.setState),Ge("noPanClassName",Q,we.setState),Ge("nodeOrigin",ne,we.setState),Ge("rfId",W,we.setState),Ge("autoPanOnConnect",re,we.setState),Ge("autoPanOnNodeDrag",he,we.setState),Ge("onError",ue,we.setState),Ge("connectionRadius",ve,we.setState),Ge("isValidConnection",_e,we.setState),Ge("nodeDragThreshold",Ae,we.setState),Cl(t,Ce),Cl(e,rt),Cl(R,De),Cl(C,Le),Cl(A,st),Cl(D,Ht),null},Lx={display:"none"},AV={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},fR="react-flow__node-desc",pR="react-flow__edge-desc",RV="react-flow__aria-live",CV=t=>t.ariaLiveMessage;function NV({rfId:t}){const e=Rt(CV);return fe.createElement("div",{id:`${RV}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:AV},e)}function IV({rfId:t,disableKeyboardA11y:e}){return fe.createElement(fe.Fragment,null,fe.createElement("div",{id:`${fR}-${t}`,style:Lx},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),fe.createElement("div",{id:`${pR}-${t}`,style:Lx},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&fe.createElement(NV,{rfId:t}))}var fh=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=M.useState(!1),s=M.useRef(!1),a=M.useRef(new Set([])),[c,u]=M.useMemo(()=>{if(t!==null){const f=(Array.isArray(t)?t:[t]).filter(v=>typeof v=="string").map(v=>v.split("+")),m=f.reduce((v,_)=>v.concat(..._),[]);return[f,m]}return[[],[]]},[t]);return M.useEffect(()=>{const d=typeof document<"u"?document:null,f=e?.target||d;if(t!==null){const m=w=>{if(s.current=w.ctrlKey||w.metaKey||w.shiftKey,(!s.current||s.current&&!e.actInsideInputWithModifier)&&My(w))return!1;const R=Ux(w.code,u);a.current.add(w[R]),zx(c,a.current,!1)&&(w.preventDefault(),r(!0))},v=w=>{if((!s.current||s.current&&!e.actInsideInputWithModifier)&&My(w))return!1;const R=Ux(w.code,u);zx(c,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(w[R]),w.key==="Meta"&&a.current.clear(),s.current=!1},_=()=>{a.current.clear(),r(!1)};return f?.addEventListener("keydown",m),f?.addEventListener("keyup",v),window.addEventListener("blur",_),()=>{f?.removeEventListener("keydown",m),f?.removeEventListener("keyup",v),window.removeEventListener("blur",_)}}},[t,r]),n};function zx(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(s=>e.has(s)))}function Ux(t,e){return e.includes(t)?"code":"key"}function mR(t,e,n,r){const s=t.parentNode||t.parentId;if(!s)return n;const a=e.get(s),c=Wl(a,r);return mR(a,e,{x:(n.x??0)+c.x,y:(n.y??0)+c.y,z:(a[Ot]?.z??0)>(n.z??0)?a[Ot]?.z??0:n.z??0},r)}function gR(t,e,n){t.forEach(r=>{const s=r.parentNode||r.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||n?.[r.id]){const{x:a,y:c,z:u}=mR(r,t,{...r.position,z:r[Ot]?.z??0},e);r.positionAbsolute={x:a,y:c},r[Ot].z=u,n?.[r.id]&&(r[Ot].isParent=!0)}})}function j0(t,e,n,r){const s=new Map,a={},c=r?1e3:0;return t.forEach(u=>{const d=(Ur(u.zIndex)?u.zIndex:0)+(u.selected?c:0),f=e.get(u.id),m={...u,positionAbsolute:{x:u.position.x,y:u.position.y}},v=u.parentNode||u.parentId;v&&(a[v]=!0);const _=f?.type&&f?.type!==u.type;Object.defineProperty(m,Ot,{enumerable:!1,value:{handleBounds:_?void 0:f?.[Ot]?.handleBounds,z:d}}),s.set(u.id,m)}),gR(s,n,a),s}function yR(t,e={}){const{getNodes:n,width:r,height:s,minZoom:a,maxZoom:c,d3Zoom:u,d3Selection:d,fitViewOnInitDone:f,fitViewOnInit:m,nodeOrigin:v}=t(),_=e.initial&&!f&&m;if(u&&d&&(_||!e.initial)){const T=n().filter(C=>{const D=e.includeHiddenNodes?C.width&&C.height:!C.hidden;return e.nodes?.length?D&&e.nodes.some(z=>z.id===C.id):D}),R=T.every(C=>C.width&&C.height);if(T.length>0&&R){const C=Wv(T,v),{x:D,y:z,zoom:B}=nR(C,r,s,e.minZoom??a,e.maxZoom??c,e.padding??.1),U=co.translate(D,z).scale(B);return typeof e.duration=="number"&&e.duration>0?u.transform(ua(d,e.duration),U):u.transform(d,U),!0}}return!1}function DV(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[Ot]:r[Ot],selected:n.selected})}),new Map(e)}function kV(t,e){return e.map(n=>{const r=t.find(s=>s.id===n.id);return r&&(n.selected=r.selected),n})}function Tf({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:s,edges:a,onNodesChange:c,onEdgesChange:u,hasDefaultNodes:d,hasDefaultEdges:f}=n();t?.length&&(d&&r({nodeInternals:DV(t,s)}),c?.(t)),e?.length&&(f&&r({edges:kV(e,a)}),u?.(e))}const Nl=()=>{},MV={zoomIn:Nl,zoomOut:Nl,zoomTo:Nl,getZoom:()=>1,setViewport:Nl,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Nl,fitBounds:Nl,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},PV=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),OV=()=>{const t=pn(),{d3Zoom:e,d3Selection:n}=Rt(PV,kn);return M.useMemo(()=>n&&e?{zoomIn:s=>e.scaleBy(ua(n,s?.duration),1.2),zoomOut:s=>e.scaleBy(ua(n,s?.duration),1/1.2),zoomTo:(s,a)=>e.scaleTo(ua(n,a?.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,a)=>{const[c,u,d]=t.getState().transform,f=co.translate(s.x??c,s.y??u).scale(s.zoom??d);e.transform(ua(n,a?.duration),f)},getViewport:()=>{const[s,a,c]=t.getState().transform;return{x:s,y:a,zoom:c}},fitView:s=>yR(t.getState,s),setCenter:(s,a,c)=>{const{width:u,height:d,maxZoom:f}=t.getState(),m=typeof c?.zoom<"u"?c.zoom:f,v=u/2-s*m,_=d/2-a*m,w=co.translate(v,_).scale(m);e.transform(ua(n,c?.duration),w)},fitBounds:(s,a)=>{const{width:c,height:u,minZoom:d,maxZoom:f}=t.getState(),{x:m,y:v,zoom:_}=nR(s,c,u,d,f,a?.padding??.1),w=co.translate(m,v).scale(_);e.transform(ua(n,a?.duration),w)},project:s=>{const{transform:a,snapToGrid:c,snapGrid:u}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Vy(s,a,c,u)},screenToFlowPosition:s=>{const{transform:a,snapToGrid:c,snapGrid:u,domNode:d}=t.getState();if(!d)return s;const{x:f,y:m}=d.getBoundingClientRect(),v={x:s.x-f,y:s.y-m};return Vy(v,a,c,u)},flowToScreenPosition:s=>{const{transform:a,domNode:c}=t.getState();if(!c)return s;const{x:u,y:d}=c.getBoundingClientRect(),f=J2(s,a);return{x:f.x+u,y:f.y+d}},viewportInitialized:!0}:MV,[e,n])};function zh(){const t=OV(),e=pn(),n=M.useCallback(()=>e.getState().getNodes().map(R=>({...R})),[]),r=M.useCallback(R=>e.getState().nodeInternals.get(R),[]),s=M.useCallback(()=>{const{edges:R=[]}=e.getState();return R.map(C=>({...C}))},[]),a=M.useCallback(R=>{const{edges:C=[]}=e.getState();return C.find(D=>D.id===R)},[]),c=M.useCallback(R=>{const{getNodes:C,setNodes:D,hasDefaultNodes:z,onNodesChange:B}=e.getState(),U=C(),q=typeof R=="function"?R(U):R;if(z)D(q);else if(B){const X=q.length===0?U.map(I=>({type:"remove",id:I.id})):q.map(I=>({item:I,type:"reset"}));B(X)}},[]),u=M.useCallback(R=>{const{edges:C=[],setEdges:D,hasDefaultEdges:z,onEdgesChange:B}=e.getState(),U=typeof R=="function"?R(C):R;if(z)D(U);else if(B){const q=U.length===0?C.map(X=>({type:"remove",id:X.id})):U.map(X=>({item:X,type:"reset"}));B(q)}},[]),d=M.useCallback(R=>{const C=Array.isArray(R)?R:[R],{getNodes:D,setNodes:z,hasDefaultNodes:B,onNodesChange:U}=e.getState();if(B){const X=[...D(),...C];z(X)}else if(U){const q=C.map(X=>({item:X,type:"add"}));U(q)}},[]),f=M.useCallback(R=>{const C=Array.isArray(R)?R:[R],{edges:D=[],setEdges:z,hasDefaultEdges:B,onEdgesChange:U}=e.getState();if(B)z([...D,...C]);else if(U){const q=C.map(X=>({item:X,type:"add"}));U(q)}},[]),m=M.useCallback(()=>{const{getNodes:R,edges:C=[],transform:D}=e.getState(),[z,B,U]=D;return{nodes:R().map(q=>({...q})),edges:C.map(q=>({...q})),viewport:{x:z,y:B,zoom:U}}},[]),v=M.useCallback(({nodes:R,edges:C})=>{const{nodeInternals:D,getNodes:z,edges:B,hasDefaultNodes:U,hasDefaultEdges:q,onNodesDelete:X,onEdgesDelete:I,onNodesChange:A,onEdgesChange:N}=e.getState(),H=(R||[]).map(K=>K.id),F=(C||[]).map(K=>K.id),$=z().reduce((K,L)=>{const G=L.parentNode||L.parentId,ee=!H.includes(L.id)&&G&&K.find(O=>O.id===G);return(typeof L.deletable=="boolean"?L.deletable:!0)&&(H.includes(L.id)||ee)&&K.push(L),K},[]),k=B.filter(K=>typeof K.deletable=="boolean"?K.deletable:!0),V=k.filter(K=>F.includes(K.id));if($||V){const K=tR($,k),L=[...V,...K],G=L.reduce((ee,J)=>(ee.includes(J.id)||ee.push(J.id),ee),[]);if((q||U)&&(q&&e.setState({edges:B.filter(ee=>!G.includes(ee.id))}),U&&($.forEach(ee=>{D.delete(ee.id)}),e.setState({nodeInternals:new Map(D)}))),G.length>0&&(I?.(L),N&&N(G.map(ee=>({id:ee,type:"remove"})))),$.length>0&&(X?.($),A)){const ee=$.map(J=>({id:J.id,type:"remove"}));A(ee)}}},[]),_=M.useCallback(R=>{const C=tV(R),D=C?null:e.getState().nodeInternals.get(R.id);return!C&&!D?[null,null,C]:[C?R:Ix(D),D,C]},[]),w=M.useCallback((R,C=!0,D)=>{const[z,B,U]=_(R);return z?(D||e.getState().getNodes()).filter(q=>{if(!U&&(q.id===B.id||!q.positionAbsolute))return!1;const X=Ix(q),I=ky(X,z);return C&&I>0||I>=z.width*z.height}):[]},[]),T=M.useCallback((R,C,D=!0)=>{const[z]=_(R);if(!z)return!1;const B=ky(z,C);return D&&B>0||B>=z.width*z.height},[]);return M.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:s,getEdge:a,setNodes:c,setEdges:u,addNodes:d,addEdges:f,toObject:m,deleteElements:v,getIntersectingNodes:w,isNodeIntersecting:T}),[t,n,r,s,a,c,u,d,f,m,v,w,T])}const VV={actInsideInputWithModifier:!1};var LV=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=pn(),{deleteElements:r}=zh(),s=fh(t,VV),a=fh(e);M.useEffect(()=>{if(s){const{edges:c,getNodes:u}=n.getState(),d=u().filter(m=>m.selected),f=c.filter(m=>m.selected);r({nodes:d,edges:f}),n.setState({nodesSelectionActive:!1})}},[s]),M.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])};function zV(t){const e=pn();M.useEffect(()=>{let n;const r=()=>{if(!t.current)return;const s=Fv(t.current);(s.height===0||s.width===0)&&e.getState().onError?.("004",ys.error004()),e.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const Jv={position:"absolute",width:"100%",height:"100%",top:0,left:0},UV=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Sf=t=>({x:t.x,y:t.y,zoom:t.k}),Il=(t,e)=>t.target.closest(`.${e}`),jx=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),Bx=t=>{const e=t.ctrlKey&&fp()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},jV=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),BV=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:a=!0,panOnScroll:c=!1,panOnScrollSpeed:u=.5,panOnScrollMode:d=pa.Free,zoomOnDoubleClick:f=!0,elementsSelectable:m,panOnDrag:v=!0,defaultViewport:_,translateExtent:w,minZoom:T,maxZoom:R,zoomActivationKeyCode:C,preventScrolling:D=!0,children:z,noWheelClassName:B,noPanClassName:U})=>{const q=M.useRef(),X=pn(),I=M.useRef(!1),A=M.useRef(!1),N=M.useRef(null),H=M.useRef({x:0,y:0,zoom:0}),{d3Zoom:F,d3Selection:$,d3ZoomHandler:k,userSelectionActive:V}=Rt(jV,kn),K=fh(C),L=M.useRef(0),G=M.useRef(!1),ee=M.useRef();return zV(N),M.useEffect(()=>{if(N.current){const J=N.current.getBoundingClientRect(),O=YO().scaleExtent([T,R]).translateExtent(w),Q=Qr(N.current).call(O),ne=co.translate(_.x,_.y).scale(oc(_.zoom,T,R)),W=[[0,0],[J.width,J.height]],re=O.constrain()(ne,W,w);O.transform(Q,re),O.wheelDelta(Bx),X.setState({d3Zoom:O,d3Selection:Q,d3ZoomHandler:Q.on("wheel.zoom"),transform:[re.x,re.y,re.k],domNode:N.current.closest(".react-flow")})}},[]),M.useEffect(()=>{$&&F&&(c&&!K&&!V?$.on("wheel.zoom",J=>{if(Il(J,B))return!1;J.preventDefault(),J.stopImmediatePropagation();const O=$.property("__zoom").k||1;if(J.ctrlKey&&a){const _e=Ai(J),Ae=Bx(J),Ce=O*Math.pow(2,Ae);F.scaleTo($,Ce,_e,J);return}const Q=J.deltaMode===1?20:1;let ne=d===pa.Vertical?0:J.deltaX*Q,W=d===pa.Horizontal?0:J.deltaY*Q;!fp()&&J.shiftKey&&d!==pa.Vertical&&(ne=J.deltaY*Q,W=0),F.translateBy($,-(ne/O)*u,-(W/O)*u,{internal:!0});const re=Sf($.property("__zoom")),{onViewportChangeStart:he,onViewportChange:ue,onViewportChangeEnd:ve}=X.getState();clearTimeout(ee.current),G.current||(G.current=!0,e?.(J,re),he?.(re)),G.current&&(t?.(J,re),ue?.(re),ee.current=setTimeout(()=>{n?.(J,re),ve?.(re),G.current=!1},150))},{passive:!1}):typeof k<"u"&&$.on("wheel.zoom",function(J,O){if(!D&&J.type==="wheel"&&!J.ctrlKey||Il(J,B))return null;J.preventDefault(),k.call(this,J,O)},{passive:!1}))},[V,c,d,$,F,k,K,a,D,B,e,t,n]),M.useEffect(()=>{F&&F.on("start",J=>{if(!J.sourceEvent||J.sourceEvent.internal)return null;L.current=J.sourceEvent?.button;const{onViewportChangeStart:O}=X.getState(),Q=Sf(J.transform);I.current=!0,H.current=Q,J.sourceEvent?.type==="mousedown"&&X.setState({paneDragging:!0}),O?.(Q),e?.(J.sourceEvent,Q)})},[F,e]),M.useEffect(()=>{F&&(V&&!I.current?F.on("zoom",null):V||F.on("zoom",J=>{const{onViewportChange:O}=X.getState();if(X.setState({transform:[J.transform.x,J.transform.y,J.transform.k]}),A.current=!!(r&&jx(v,L.current??0)),(t||O)&&!J.sourceEvent?.internal){const Q=Sf(J.transform);O?.(Q),t?.(J.sourceEvent,Q)}}))},[V,F,t,v,r]),M.useEffect(()=>{F&&F.on("end",J=>{if(!J.sourceEvent||J.sourceEvent.internal)return null;const{onViewportChangeEnd:O}=X.getState();if(I.current=!1,X.setState({paneDragging:!1}),r&&jx(v,L.current??0)&&!A.current&&r(J.sourceEvent),A.current=!1,(n||O)&&UV(H.current,J.transform)){const Q=Sf(J.transform);H.current=Q,clearTimeout(q.current),q.current=setTimeout(()=>{O?.(Q),n?.(J.sourceEvent,Q)},c?150:0)}})},[F,c,v,n,r]),M.useEffect(()=>{F&&F.filter(J=>{const O=K||s,Q=a&&J.ctrlKey;if((v===!0||Array.isArray(v)&&v.includes(1))&&J.button===1&&J.type==="mousedown"&&(Il(J,"react-flow__node")||Il(J,"react-flow__edge")))return!0;if(!v&&!O&&!c&&!f&&!a||V||!f&&J.type==="dblclick"||Il(J,B)&&J.type==="wheel"||Il(J,U)&&(J.type!=="wheel"||c&&J.type==="wheel"&&!K)||!a&&J.ctrlKey&&J.type==="wheel"||!O&&!c&&!Q&&J.type==="wheel"||!v&&(J.type==="mousedown"||J.type==="touchstart")||Array.isArray(v)&&!v.includes(J.button)&&J.type==="mousedown")return!1;const ne=Array.isArray(v)&&v.includes(J.button)||!J.button||J.button<=1;return(!J.ctrlKey||J.type==="wheel")&&ne})},[V,F,s,a,c,f,v,m,K]),fe.createElement("div",{className:"react-flow__renderer",ref:N,style:Jv},z)},HV=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function FV(){const{userSelectionActive:t,userSelectionRect:e}=Rt(HV,kn);return t&&e?fe.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function Hx(t,e){const n=e.parentNode||e.parentId,r=t.find(s=>s.id===n);if(r){const s=e.position.x+e.width-r.width,a=e.position.y+e.height-r.height;if(s>0||a>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,s>0&&(r.style.width+=s),a>0&&(r.style.height+=a),e.position.x<0){const c=Math.abs(e.position.x);r.position.x=r.position.x-c,r.style.width+=c,e.position.x=0}if(e.position.y<0){const c=Math.abs(e.position.y);r.position.y=r.position.y-c,r.style.height+=c,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function vR(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,s)=>{const a=t.filter(u=>u.id===s.id);if(a.length===0)return r.push(s),r;const c={...s};for(const u of a)if(u)switch(u.type){case"select":{c.selected=u.selected;break}case"position":{typeof u.position<"u"&&(c.position=u.position),typeof u.positionAbsolute<"u"&&(c.positionAbsolute=u.positionAbsolute),typeof u.dragging<"u"&&(c.dragging=u.dragging),c.expandParent&&Hx(r,c);break}case"dimensions":{typeof u.dimensions<"u"&&(c.width=u.dimensions.width,c.height=u.dimensions.height),typeof u.updateStyle<"u"&&(c.style={...c.style||{},...u.dimensions}),typeof u.resizing=="boolean"&&(c.resizing=u.resizing),c.expandParent&&Hx(r,c);break}case"remove":return r}return r.push(c),r},n)}function _R(t,e){return vR(t,e)}function $V(t,e){return vR(t,e)}const eo=(t,e)=>({id:t,type:"select",selected:e});function jl(t,e){return t.reduce((n,r)=>{const s=e.includes(r.id);return!r.selected&&s?(r.selected=!0,n.push(eo(r.id,!0))):r.selected&&!s&&(r.selected=!1,n.push(eo(r.id,!1))),n},[])}const B0=(t,e)=>n=>{n.target===e.current&&t?.(n)},qV=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),bR=M.memo(({isSelecting:t,selectionMode:e=dh.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:c,onPaneScroll:u,onPaneMouseEnter:d,onPaneMouseMove:f,onPaneMouseLeave:m,children:v})=>{const _=M.useRef(null),w=pn(),T=M.useRef(0),R=M.useRef(0),C=M.useRef(),{userSelectionActive:D,elementsSelectable:z,dragging:B}=Rt(qV,kn),U=()=>{w.setState({userSelectionActive:!1,userSelectionRect:null}),T.current=0,R.current=0},q=k=>{a?.(k),w.getState().resetSelectedElements(),w.setState({nodesSelectionActive:!1})},X=k=>{if(Array.isArray(n)&&n?.includes(2)){k.preventDefault();return}c?.(k)},I=u?k=>u(k):void 0,A=k=>{const{resetSelectedElements:V,domNode:K}=w.getState();if(C.current=K?.getBoundingClientRect(),!z||!t||k.button!==0||k.target!==_.current||!C.current)return;const{x:L,y:G}=uo(k,C.current);V(),w.setState({userSelectionRect:{width:0,height:0,startX:L,startY:G,x:L,y:G}}),r?.(k)},N=k=>{const{userSelectionRect:V,nodeInternals:K,edges:L,transform:G,onNodesChange:ee,onEdgesChange:J,nodeOrigin:O,getNodes:Q}=w.getState();if(!t||!C.current||!V)return;w.setState({userSelectionActive:!0,nodesSelectionActive:!1});const ne=uo(k,C.current),W=V.startX??0,re=V.startY??0,he={...V,x:ne.x<W?ne.x:W,y:ne.y<re?ne.y:re,width:Math.abs(ne.x-W),height:Math.abs(ne.y-re)},ue=Q(),ve=eR(K,he,G,e===dh.Partial,!0,O),_e=tR(ve,L).map(Ce=>Ce.id),Ae=ve.map(Ce=>Ce.id);if(T.current!==Ae.length){T.current=Ae.length;const Ce=jl(ue,Ae);Ce.length&&ee?.(Ce)}if(R.current!==_e.length){R.current=_e.length;const Ce=jl(L,_e);Ce.length&&J?.(Ce)}w.setState({userSelectionRect:he})},H=k=>{if(k.button!==0)return;const{userSelectionRect:V}=w.getState();!D&&V&&k.target===_.current&&q?.(k),w.setState({nodesSelectionActive:T.current>0}),U(),s?.(k)},F=k=>{D&&(w.setState({nodesSelectionActive:T.current>0}),s?.(k)),U()},$=z&&(t||D);return fe.createElement("div",{className:$n(["react-flow__pane",{dragging:B,selection:t}]),onClick:$?void 0:B0(q,_),onContextMenu:B0(X,_),onWheel:B0(I,_),onMouseEnter:$?void 0:d,onMouseDown:$?A:void 0,onMouseMove:$?N:f,onMouseUp:$?H:void 0,onMouseLeave:$?F:m,ref:_,style:Jv},v,fe.createElement(FV,null))});bR.displayName="Pane";function wR(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:wR(r,e):!1}function Fx(t,e,n){let r=t;do{if(r?.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function GV(t,e,n,r){return Array.from(t.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||s.parentId||!wR(s,t))&&(s.draggable||e&&typeof s.draggable>"u")).map(s=>({id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(s.positionAbsolute?.x??0),y:n.y-(s.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}))}function YV(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function ER(t,e,n,r,s=[0,0],a){const c=YV(t,t.extent||r);let u=c;const d=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(d&&t.width&&t.height){const v=n.get(d),{x:_,y:w}=Wl(v,s).positionAbsolute;u=v&&Ur(_)&&Ur(w)&&Ur(v.width)&&Ur(v.height)?[[_+t.width*s[0],w+t.height*s[1]],[_+v.width-t.width+t.width*s[0],w+v.height-t.height+t.height*s[1]]]:u}else a?.("005",ys.error005()),u=c;else if(t.extent&&d&&t.extent!=="parent"){const v=n.get(d),{x:_,y:w}=Wl(v,s).positionAbsolute;u=[[t.extent[0][0]+_,t.extent[0][1]+w],[t.extent[1][0]+_,t.extent[1][1]+w]]}let f={x:0,y:0};if(d){const v=n.get(d);f=Wl(v,s).positionAbsolute}const m=u&&u!=="parent"?$v(e,u):e;return{position:{x:m.x-f.x,y:m.y-f.y},positionAbsolute:m}}function H0({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?r.find(s=>s.id===t):r[0],r]}const $x=(t,e,n,r)=>{const s=e.querySelectorAll(t);if(!s||!s.length)return null;const a=Array.from(s),c=e.getBoundingClientRect(),u={x:c.width*r[0],y:c.height*r[1]};return a.map(d=>{const f=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),position:d.getAttribute("data-handlepos"),x:(f.left-c.left-u.x)/n,y:(f.top-c.top-u.y)/n,...Fv(d)}})};function ku(t,e,n){return n===void 0?n:r=>{const s=e().nodeInternals.get(t);s&&n(r,{...s})}}function zy({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:a,multiSelectionActive:c,nodeInternals:u,onError:d}=e.getState(),f=u.get(t);if(!f){d?.("012",ys.error012(t));return}e.setState({nodesSelectionActive:!1}),f.selected?(n||f.selected&&c)&&(a({nodes:[f],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):s([t])}function KV(){const t=pn();return M.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:s,snapToGrid:a}=t.getState(),c=n.touches?n.touches[0].clientX:n.clientX,u=n.touches?n.touches[0].clientY:n.clientY,d={x:(c-r[0])/r[2],y:(u-r[1])/r[2]};return{xSnapped:a?s[0]*Math.round(d.x/s[0]):d.x,ySnapped:a?s[1]*Math.round(d.y/s[1]):d.y,...d}},[])}function F0(t){return(e,n,r)=>t?.(e,r)}function xR({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:a,selectNodesOnDrag:c}){const u=pn(),[d,f]=M.useState(!1),m=M.useRef([]),v=M.useRef({x:null,y:null}),_=M.useRef(0),w=M.useRef(null),T=M.useRef({x:0,y:0}),R=M.useRef(null),C=M.useRef(!1),D=M.useRef(!1),z=M.useRef(!1),B=KV();return M.useEffect(()=>{if(t?.current){const U=Qr(t.current),q=({x:A,y:N})=>{const{nodeInternals:H,onNodeDrag:F,onSelectionDrag:$,updateNodePositions:k,nodeExtent:V,snapGrid:K,snapToGrid:L,nodeOrigin:G,onError:ee}=u.getState();v.current={x:A,y:N};let J=!1,O={x:0,y:0,x2:0,y2:0};if(m.current.length>1&&V){const ne=Wv(m.current,G);O=qv(ne)}if(m.current=m.current.map(ne=>{const W={x:A-ne.distance.x,y:N-ne.distance.y};L&&(W.x=K[0]*Math.round(W.x/K[0]),W.y=K[1]*Math.round(W.y/K[1]));const re=[[V[0][0],V[0][1]],[V[1][0],V[1][1]]];m.current.length>1&&V&&!ne.extent&&(re[0][0]=ne.positionAbsolute.x-O.x+V[0][0],re[1][0]=ne.positionAbsolute.x+(ne.width??0)-O.x2+V[1][0],re[0][1]=ne.positionAbsolute.y-O.y+V[0][1],re[1][1]=ne.positionAbsolute.y+(ne.height??0)-O.y2+V[1][1]);const he=ER(ne,W,H,re,G,ee);return J=J||ne.position.x!==he.position.x||ne.position.y!==he.position.y,ne.position=he.position,ne.positionAbsolute=he.positionAbsolute,ne}),!J)return;k(m.current,!0,!0),f(!0);const Q=s?F:F0($);if(Q&&R.current){const[ne,W]=H0({nodeId:s,dragItems:m.current,nodeInternals:H});Q(R.current,ne,W)}},X=()=>{if(!w.current)return;const[A,N]=q2(T.current,w.current);if(A!==0||N!==0){const{transform:H,panBy:F}=u.getState();v.current.x=(v.current.x??0)-A/H[2],v.current.y=(v.current.y??0)-N/H[2],F({x:A,y:N})&&q(v.current)}_.current=requestAnimationFrame(X)},I=A=>{const{nodeInternals:N,multiSelectionActive:H,nodesDraggable:F,unselectNodesAndEdges:$,onNodeDragStart:k,onSelectionDragStart:V}=u.getState();D.current=!0;const K=s?k:F0(V);(!c||!a)&&!H&&s&&(N.get(s)?.selected||$()),s&&a&&c&&zy({id:s,store:u,nodeRef:t});const L=B(A);if(v.current=L,m.current=GV(N,F,L,s),K&&m.current){const[G,ee]=H0({nodeId:s,dragItems:m.current,nodeInternals:N});K(A.sourceEvent,G,ee)}};if(e)U.on(".drag",null);else{const A=i3().on("start",N=>{const{domNode:H,nodeDragThreshold:F}=u.getState();F===0&&I(N),z.current=!1;const $=B(N);v.current=$,w.current=H?.getBoundingClientRect()||null,T.current=uo(N.sourceEvent,w.current)}).on("drag",N=>{const H=B(N),{autoPanOnNodeDrag:F,nodeDragThreshold:$}=u.getState();if(N.sourceEvent.type==="touchmove"&&N.sourceEvent.touches.length>1&&(z.current=!0),!z.current){if(!C.current&&D.current&&F&&(C.current=!0,X()),!D.current){const k=H.xSnapped-(v?.current?.x??0),V=H.ySnapped-(v?.current?.y??0);Math.sqrt(k*k+V*V)>$&&I(N)}(v.current.x!==H.xSnapped||v.current.y!==H.ySnapped)&&m.current&&D.current&&(R.current=N.sourceEvent,T.current=uo(N.sourceEvent,w.current),q(H))}}).on("end",N=>{if(!(!D.current||z.current)&&(f(!1),C.current=!1,D.current=!1,cancelAnimationFrame(_.current),m.current)){const{updateNodePositions:H,nodeInternals:F,onNodeDragStop:$,onSelectionDragStop:k}=u.getState(),V=s?$:F0(k);if(H(m.current,!1,!1),V){const[K,L]=H0({nodeId:s,dragItems:m.current,nodeInternals:F});V(N.sourceEvent,K,L)}}}).filter(N=>{const H=N.target;return!N.button&&(!n||!Fx(H,`.${n}`,t))&&(!r||Fx(H,r,t))});return U.call(A),()=>{U.on(".drag",null)}}}},[t,e,n,r,a,u,s,c,B]),d}function TR(){const t=pn();return M.useCallback(n=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:a,getNodes:c,snapToGrid:u,snapGrid:d,onError:f,nodesDraggable:m}=t.getState(),v=c().filter(z=>z.selected&&(z.draggable||m&&typeof z.draggable>"u")),_=u?d[0]:5,w=u?d[1]:5,T=n.isShiftPressed?4:1,R=n.x*_*T,C=n.y*w*T,D=v.map(z=>{if(z.positionAbsolute){const B={x:z.positionAbsolute.x+R,y:z.positionAbsolute.y+C};u&&(B.x=d[0]*Math.round(B.x/d[0]),B.y=d[1]*Math.round(B.y/d[1]));const{positionAbsolute:U,position:q}=ER(z,B,r,s,void 0,f);z.position=q,z.positionAbsolute=U}return z});a(D,!0,!1)},[])}const Ql={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Mu=t=>{const e=({id:n,type:r,data:s,xPos:a,yPos:c,xPosOrigin:u,yPosOrigin:d,selected:f,onClick:m,onMouseEnter:v,onMouseMove:_,onMouseLeave:w,onContextMenu:T,onDoubleClick:R,style:C,className:D,isDraggable:z,isSelectable:B,isConnectable:U,isFocusable:q,selectNodesOnDrag:X,sourcePosition:I,targetPosition:A,hidden:N,resizeObserver:H,dragHandle:F,zIndex:$,isParent:k,noDragClassName:V,noPanClassName:K,initialized:L,disableKeyboardA11y:G,ariaLabel:ee,rfId:J,hasHandleBounds:O})=>{const Q=pn(),ne=M.useRef(null),W=M.useRef(null),re=M.useRef(I),he=M.useRef(A),ue=M.useRef(r),ve=B||z||m||v||_||w,_e=TR(),Ae=ku(n,Q.getState,v),Ce=ku(n,Q.getState,_),rt=ku(n,Q.getState,w),Ye=ku(n,Q.getState,T),De=ku(n,Q.getState,R),Le=je=>{const{nodeDragThreshold:we}=Q.getState();if(B&&(!X||!z||we>0)&&zy({id:n,store:Q,nodeRef:ne}),m){const Nt=Q.getState().nodeInternals.get(n);Nt&&m(je,{...Nt})}},st=je=>{if(!My(je)&&!G)if(Y2.includes(je.key)&&B){const we=je.key==="Escape";zy({id:n,store:Q,unselect:we,nodeRef:ne})}else z&&f&&Object.prototype.hasOwnProperty.call(Ql,je.key)&&(Q.setState({ariaLiveMessage:`Moved selected node ${je.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~a}, y: ${~~c}`}),_e({x:Ql[je.key].x,y:Ql[je.key].y,isShiftPressed:je.shiftKey}))};M.useEffect(()=>()=>{W.current&&(H?.unobserve(W.current),W.current=null)},[]),M.useEffect(()=>{if(ne.current&&!N){const je=ne.current;(!L||!O||W.current!==je)&&(W.current&&H?.unobserve(W.current),H?.observe(je),W.current=je)}},[N,L,O]),M.useEffect(()=>{const je=ue.current!==r,we=re.current!==I,Nt=he.current!==A;ne.current&&(je||we||Nt)&&(je&&(ue.current=r),we&&(re.current=I),Nt&&(he.current=A),Q.getState().updateNodeDimensions([{id:n,nodeElement:ne.current,forceUpdate:!0}]))},[n,r,I,A]);const Ht=xR({nodeRef:ne,disabled:N||!z,noDragClassName:V,handleSelector:F,nodeId:n,isSelectable:B,selectNodesOnDrag:X});return N?null:fe.createElement("div",{className:$n(["react-flow__node",`react-flow__node-${r}`,{[K]:z},D,{selected:f,selectable:B,parent:k,dragging:Ht}]),ref:ne,style:{zIndex:$,transform:`translate(${u}px,${d}px)`,pointerEvents:ve?"all":"none",visibility:L?"visible":"hidden",...C},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Ae,onMouseMove:Ce,onMouseLeave:rt,onContextMenu:Ye,onClick:Le,onDoubleClick:De,onKeyDown:q?st:void 0,tabIndex:q?0:void 0,role:q?"button":void 0,"aria-describedby":G?void 0:`${fR}-${J}`,"aria-label":ee},fe.createElement(lV,{value:n},fe.createElement(t,{id:n,data:s,type:r,xPos:a,yPos:c,selected:f,isConnectable:U,sourcePosition:I,targetPosition:A,dragging:Ht,dragHandle:F,zIndex:$})))};return e.displayName="NodeWrapper",M.memo(e)};const XV=t=>{const e=t.getNodes().filter(n=>n.selected);return{...Wv(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function WV({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=pn(),{width:s,height:a,x:c,y:u,transformString:d,userSelectionActive:f}=Rt(XV,kn),m=TR(),v=M.useRef(null);if(M.useEffect(()=>{n||v.current?.focus({preventScroll:!0})},[n]),xR({nodeRef:v}),f||!s||!a)return null;const _=t?T=>{const R=r.getState().getNodes().filter(C=>C.selected);t(T,R)}:void 0,w=T=>{Object.prototype.hasOwnProperty.call(Ql,T.key)&&m({x:Ql[T.key].x,y:Ql[T.key].y,isShiftPressed:T.shiftKey})};return fe.createElement("div",{className:$n(["react-flow__nodesselection","react-flow__container",e]),style:{transform:d}},fe.createElement("div",{ref:v,className:"react-flow__nodesselection-rect",onContextMenu:_,tabIndex:n?void 0:-1,onKeyDown:n?void 0:w,style:{width:s,height:a,top:u,left:c}}))}var QV=M.memo(WV);const ZV=t=>t.nodesSelectionActive,SR=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:c,deleteKeyCode:u,onMove:d,onMoveStart:f,onMoveEnd:m,selectionKeyCode:v,selectionOnDrag:_,selectionMode:w,onSelectionStart:T,onSelectionEnd:R,multiSelectionKeyCode:C,panActivationKeyCode:D,zoomActivationKeyCode:z,elementsSelectable:B,zoomOnScroll:U,zoomOnPinch:q,panOnScroll:X,panOnScrollSpeed:I,panOnScrollMode:A,zoomOnDoubleClick:N,panOnDrag:H,defaultViewport:F,translateExtent:$,minZoom:k,maxZoom:V,preventScrolling:K,onSelectionContextMenu:L,noWheelClassName:G,noPanClassName:ee,disableKeyboardA11y:J})=>{const O=Rt(ZV),Q=fh(v),ne=fh(D),W=ne||H,re=ne||X,he=Q||_&&W!==!0;return LV({deleteKeyCode:u,multiSelectionKeyCode:C}),fe.createElement(BV,{onMove:d,onMoveStart:f,onMoveEnd:m,onPaneContextMenu:a,elementsSelectable:B,zoomOnScroll:U,zoomOnPinch:q,panOnScroll:re,panOnScrollSpeed:I,panOnScrollMode:A,zoomOnDoubleClick:N,panOnDrag:!Q&&W,defaultViewport:F,translateExtent:$,minZoom:k,maxZoom:V,zoomActivationKeyCode:z,preventScrolling:K,noWheelClassName:G,noPanClassName:ee},fe.createElement(bR,{onSelectionStart:T,onSelectionEnd:R,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:c,panOnDrag:W,isSelecting:!!he,selectionMode:w},t,O&&fe.createElement(QV,{onSelectionContextMenu:L,noPanClassName:ee,disableKeyboardA11y:J})))};SR.displayName="FlowRenderer";var JV=M.memo(SR);function e5(t){return Rt(M.useCallback(n=>t?eR(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function t5(t){const e={input:Mu(t.input||cR),default:Mu(t.default||Ly),output:Mu(t.output||hR),group:Mu(t.group||Zv)},n={},r=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,a)=>(s[a]=Mu(t[a]||Ly),s),n);return{...e,...r}}const n5=({x:t,y:e,width:n,height:r,origin:s})=>!n||!r?{x:t,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:e}:{x:t-n*s[0],y:e-r*s[1]},r5=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),AR=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:a,onError:c}=Rt(r5,kn),u=e5(t.onlyRenderVisibleElements),d=M.useRef(),f=M.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const m=new ResizeObserver(v=>{const _=v.map(w=>({id:w.target.getAttribute("data-id"),nodeElement:w.target,forceUpdate:!0}));a(_)});return d.current=m,m},[]);return M.useEffect(()=>()=>{d?.current?.disconnect()},[]),fe.createElement("div",{className:"react-flow__nodes",style:Jv},u.map(m=>{let v=m.type||"default";t.nodeTypes[v]||(c?.("003",ys.error003(v)),v="default");const _=t.nodeTypes[v]||t.nodeTypes.default,w=!!(m.draggable||e&&typeof m.draggable>"u"),T=!!(m.selectable||s&&typeof m.selectable>"u"),R=!!(m.connectable||n&&typeof m.connectable>"u"),C=!!(m.focusable||r&&typeof m.focusable>"u"),D=t.nodeExtent?$v(m.positionAbsolute,t.nodeExtent):m.positionAbsolute,z=D?.x??0,B=D?.y??0,U=n5({x:z,y:B,width:m.width??0,height:m.height??0,origin:t.nodeOrigin});return fe.createElement(_,{key:m.id,id:m.id,className:m.className,style:m.style,type:v,data:m.data,sourcePosition:m.sourcePosition||Te.Bottom,targetPosition:m.targetPosition||Te.Top,hidden:m.hidden,xPos:z,yPos:B,xPosOrigin:U.x,yPosOrigin:U.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!m.selected,isDraggable:w,isSelectable:T,isConnectable:R,isFocusable:C,resizeObserver:f,dragHandle:m.dragHandle,zIndex:m[Ot]?.z??0,isParent:!!m[Ot]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!m.width&&!!m.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:m.ariaLabel,hasHandleBounds:!!m[Ot]?.handleBounds})}))};AR.displayName="NodeRenderer";var i5=M.memo(AR);const s5=(t,e,n)=>n===Te.Left?t-e:n===Te.Right?t+e:t,o5=(t,e,n)=>n===Te.Top?t-e:n===Te.Bottom?t+e:t,qx="react-flow__edgeupdater",Gx=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:a,onMouseOut:c,type:u})=>fe.createElement("circle",{onMouseDown:s,onMouseEnter:a,onMouseOut:c,className:$n([qx,`${qx}-${u}`]),cx:s5(e,r,t),cy:o5(n,r,t),r,stroke:"transparent",fill:"transparent"}),a5=()=>!0;var Dl=t=>{const e=({id:n,className:r,type:s,data:a,onClick:c,onEdgeDoubleClick:u,selected:d,animated:f,label:m,labelStyle:v,labelShowBg:_,labelBgStyle:w,labelBgPadding:T,labelBgBorderRadius:R,style:C,source:D,target:z,sourceX:B,sourceY:U,targetX:q,targetY:X,sourcePosition:I,targetPosition:A,elementsSelectable:N,hidden:H,sourceHandleId:F,targetHandleId:$,onContextMenu:k,onMouseEnter:V,onMouseMove:K,onMouseLeave:L,reconnectRadius:G,onReconnect:ee,onReconnectStart:J,onReconnectEnd:O,markerEnd:Q,markerStart:ne,rfId:W,ariaLabel:re,isFocusable:he,isReconnectable:ue,pathOptions:ve,interactionWidth:_e,disableKeyboardA11y:Ae})=>{const Ce=M.useRef(null),[rt,Ye]=M.useState(!1),[De,Le]=M.useState(!1),st=pn(),Ht=M.useMemo(()=>`url('#${Oy(ne,W)}')`,[ne,W]),je=M.useMemo(()=>`url('#${Oy(Q,W)}')`,[Q,W]);if(H)return null;const we=$t=>{const{edges:on,addSelectedEdges:Vn,unselectNodesAndEdges:Ln,multiSelectionActive:an}=st.getState(),mn=on.find(zn=>zn.id===n);mn&&(N&&(st.setState({nodesSelectionActive:!1}),mn.selected&&an?(Ln({nodes:[],edges:[mn]}),Ce.current?.blur()):Vn([n])),c&&c($t,mn))},Nt=Du(n,st.getState,u),Sn=Du(n,st.getState,k),Zt=Du(n,st.getState,V),er=Du(n,st.getState,K),Pn=Du(n,st.getState,L),On=($t,on)=>{if($t.button!==0)return;const{edges:Vn,isValidConnection:Ln}=st.getState(),an=on?z:D,mn=(on?$:F)||null,zn=on?"target":"source",ji=Ln||a5,Bi=on,Fr=Vn.find(nr=>nr.id===n);Le(!0),J?.($t,Fr,zn);const tr=nr=>{Le(!1),O?.(nr,Fr,zn)};sR({event:$t,handleId:mn,nodeId:an,onConnect:nr=>ee?.(Fr,nr),isTarget:Bi,getState:st.getState,setState:st.setState,isValidConnection:ji,edgeUpdaterType:zn,onReconnectEnd:tr})},Hr=$t=>On($t,!0),at=$t=>On($t,!1),Ke=()=>Ye(!0),Ft=()=>Ye(!1),xt=!N&&!c,si=$t=>{if(!Ae&&Y2.includes($t.key)&&N){const{unselectNodesAndEdges:on,addSelectedEdges:Vn,edges:Ln}=st.getState();$t.key==="Escape"?(Ce.current?.blur(),on({edges:[Ln.find(mn=>mn.id===n)]})):Vn([n])}};return fe.createElement("g",{className:$n(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:d,animated:f,inactive:xt,updating:rt}]),onClick:we,onDoubleClick:Nt,onContextMenu:Sn,onMouseEnter:Zt,onMouseMove:er,onMouseLeave:Pn,onKeyDown:he?si:void 0,tabIndex:he?0:void 0,role:he?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":re===null?void 0:re||`Edge from ${D} to ${z}`,"aria-describedby":he?`${pR}-${W}`:void 0,ref:Ce},!De&&fe.createElement(t,{id:n,source:D,target:z,selected:d,animated:f,label:m,labelStyle:v,labelShowBg:_,labelBgStyle:w,labelBgPadding:T,labelBgBorderRadius:R,data:a,style:C,sourceX:B,sourceY:U,targetX:q,targetY:X,sourcePosition:I,targetPosition:A,sourceHandleId:F,targetHandleId:$,markerStart:Ht,markerEnd:je,pathOptions:ve,interactionWidth:_e}),ue&&fe.createElement(fe.Fragment,null,(ue==="source"||ue===!0)&&fe.createElement(Gx,{position:I,centerX:B,centerY:U,radius:G,onMouseDown:Hr,onMouseEnter:Ke,onMouseOut:Ft,type:"source"}),(ue==="target"||ue===!0)&&fe.createElement(Gx,{position:A,centerX:q,centerY:X,radius:G,onMouseDown:at,onMouseEnter:Ke,onMouseOut:Ft,type:"target"})))};return e.displayName="EdgeWrapper",M.memo(e)};function l5(t){const e={default:Dl(t.default||pp),straight:Dl(t.bezier||Kv),step:Dl(t.step||Yv),smoothstep:Dl(t.step||Xp),simplebezier:Dl(t.simplebezier||Gv)},n={},r=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,a)=>(s[a]=Dl(t[a]||pp),s),n);return{...e,...r}}function Yx(t,e,n=null){const r=(n?.x||0)+e.x,s=(n?.y||0)+e.y,a=n?.width||e.width,c=n?.height||e.height;switch(t){case Te.Top:return{x:r+a/2,y:s};case Te.Right:return{x:r+a,y:s+c/2};case Te.Bottom:return{x:r+a/2,y:s+c};case Te.Left:return{x:r,y:s+c/2}}}function Kx(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const c5=(t,e,n,r,s,a)=>{const c=Yx(n,t,e),u=Yx(a,r,s);return{sourceX:c.x,sourceY:c.y,targetX:u.x,targetY:u.y}};function u5({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:s,targetHeight:a,width:c,height:u,transform:d}){const f={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+s),y2:Math.max(t.y+r,e.y+a)};f.x===f.x2&&(f.x2+=1),f.y===f.y2&&(f.y2+=1);const m=qv({x:(0-d[0])/d[2],y:(0-d[1])/d[2],width:c/d[2],height:u/d[2]}),v=Math.max(0,Math.min(m.x2,f.x2)-Math.max(m.x,f.x)),_=Math.max(0,Math.min(m.y2,f.y2)-Math.max(m.y,f.y));return Math.ceil(v*_)>0}function Xx(t){const e=t?.[Ot]?.handleBounds||null,n=e&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},e,!!n]}const h5=[{level:0,isMaxLevel:!0,edges:[]}];function d5(t,e,n=!1){let r=-1;const s=t.reduce((c,u)=>{const d=Ur(u.zIndex);let f=d?u.zIndex:0;if(n){const m=e.get(u.target),v=e.get(u.source),_=u.selected||m?.selected||v?.selected,w=Math.max(v?.[Ot]?.z||0,m?.[Ot]?.z||0,1e3);f=(d?u.zIndex:0)+(_?w:0)}return c[f]?c[f].push(u):c[f]=[u],r=f>r?f:r,c},{}),a=Object.entries(s).map(([c,u])=>{const d=+c;return{edges:u,level:d,isMaxLevel:d===r}});return a.length===0?h5:a}function f5(t,e,n){const r=Rt(M.useCallback(s=>t?s.edges.filter(a=>{const c=e.get(a.source),u=e.get(a.target);return c?.width&&c?.height&&u?.width&&u?.height&&u5({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:u.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:u.width,targetHeight:u.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,e]));return d5(r,e,n)}const p5=({color:t="none",strokeWidth:e=1})=>fe.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),m5=({color:t="none",strokeWidth:e=1})=>fe.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Wx={[xa.Arrow]:p5,[xa.ArrowClosed]:m5};function g5(t){const e=pn();return M.useMemo(()=>Object.prototype.hasOwnProperty.call(Wx,t)?Wx[t]:(e.getState().onError?.("009",ys.error009(t)),null),[t])}const y5=({id:t,type:e,color:n,width:r=12.5,height:s=12.5,markerUnits:a="strokeWidth",strokeWidth:c,orient:u="auto-start-reverse"})=>{const d=g5(e);return d?fe.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:u,refX:"0",refY:"0"},fe.createElement(d,{color:n,strokeWidth:c})):null},v5=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((s,a)=>([a.markerStart,a.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const u=Oy(c,e);r.includes(u)||(s.push({id:u,color:c.color||t,...c}),r.push(u))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))},RR=({defaultColor:t,rfId:e})=>{const n=Rt(M.useCallback(v5({defaultColor:t,rfId:e}),[t,e]),(r,s)=>!(r.length!==s.length||r.some((a,c)=>a.id!==s[c].id)));return fe.createElement("defs",null,n.map(r=>fe.createElement(y5,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};RR.displayName="MarkerDefinitions";var _5=M.memo(RR);const b5=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),CR=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:s,noPanClassName:a,onEdgeContextMenu:c,onEdgeMouseEnter:u,onEdgeMouseMove:d,onEdgeMouseLeave:f,onEdgeClick:m,onEdgeDoubleClick:v,onReconnect:_,onReconnectStart:w,onReconnectEnd:T,reconnectRadius:R,children:C,disableKeyboardA11y:D})=>{const{edgesFocusable:z,edgesUpdatable:B,elementsSelectable:U,width:q,height:X,connectionMode:I,nodeInternals:A,onError:N}=Rt(b5,kn),H=f5(e,A,n);return q?fe.createElement(fe.Fragment,null,H.map(({level:F,edges:$,isMaxLevel:k})=>fe.createElement("svg",{key:F,style:{zIndex:F},width:q,height:X,className:"react-flow__edges react-flow__container"},k&&fe.createElement(_5,{defaultColor:t,rfId:r}),fe.createElement("g",null,$.map(V=>{const[K,L,G]=Xx(A.get(V.source)),[ee,J,O]=Xx(A.get(V.target));if(!G||!O)return null;let Q=V.type||"default";s[Q]||(N?.("011",ys.error011(Q)),Q="default");const ne=s[Q]||s.default,W=I===yo.Strict?J.target:(J.target??[]).concat(J.source??[]),re=Kx(L.source,V.sourceHandle),he=Kx(W,V.targetHandle),ue=re?.position||Te.Bottom,ve=he?.position||Te.Top,_e=!!(V.focusable||z&&typeof V.focusable>"u"),Ae=V.reconnectable||V.updatable,Ce=typeof _<"u"&&(Ae||B&&typeof Ae>"u");if(!re||!he)return N?.("008",ys.error008(re,V)),null;const{sourceX:rt,sourceY:Ye,targetX:De,targetY:Le}=c5(K,re,ue,ee,he,ve);return fe.createElement(ne,{key:V.id,id:V.id,className:$n([V.className,a]),type:Q,data:V.data,selected:!!V.selected,animated:!!V.animated,hidden:!!V.hidden,label:V.label,labelStyle:V.labelStyle,labelShowBg:V.labelShowBg,labelBgStyle:V.labelBgStyle,labelBgPadding:V.labelBgPadding,labelBgBorderRadius:V.labelBgBorderRadius,style:V.style,source:V.source,target:V.target,sourceHandleId:V.sourceHandle,targetHandleId:V.targetHandle,markerEnd:V.markerEnd,markerStart:V.markerStart,sourceX:rt,sourceY:Ye,targetX:De,targetY:Le,sourcePosition:ue,targetPosition:ve,elementsSelectable:U,onContextMenu:c,onMouseEnter:u,onMouseMove:d,onMouseLeave:f,onClick:m,onEdgeDoubleClick:v,onReconnect:_,onReconnectStart:w,onReconnectEnd:T,reconnectRadius:R,rfId:r,ariaLabel:V.ariaLabel,isFocusable:_e,isReconnectable:Ce,pathOptions:"pathOptions"in V?V.pathOptions:void 0,interactionWidth:V.interactionWidth,disableKeyboardA11y:D})})))),C):null};CR.displayName="EdgeRenderer";var w5=M.memo(CR);const E5=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function x5({children:t}){const e=Rt(E5);return fe.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function T5(t){const e=zh(),n=M.useRef(!1);M.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const S5={[Te.Left]:Te.Right,[Te.Right]:Te.Left,[Te.Top]:Te.Bottom,[Te.Bottom]:Te.Top},NR=({nodeId:t,handleType:e,style:n,type:r=to.Bezier,CustomComponent:s,connectionStatus:a})=>{const{fromNode:c,handleId:u,toX:d,toY:f,connectionMode:m}=Rt(M.useCallback(X=>({fromNode:X.nodeInternals.get(t),handleId:X.connectionHandleId,toX:(X.connectionPosition.x-X.transform[0])/X.transform[2],toY:(X.connectionPosition.y-X.transform[1])/X.transform[2],connectionMode:X.connectionMode}),[t]),kn),v=c?.[Ot]?.handleBounds;let _=v?.[e];if(m===yo.Loose&&(_=_||v?.[e==="source"?"target":"source"]),!c||!_)return null;const w=u?_.find(X=>X.id===u):_[0],T=w?w.x+w.width/2:(c.width??0)/2,R=w?w.y+w.height/2:c.height??0,C=(c.positionAbsolute?.x??0)+T,D=(c.positionAbsolute?.y??0)+R,z=w?.position,B=z?S5[z]:null;if(!z||!B)return null;if(s)return fe.createElement(s,{connectionLineType:r,connectionLineStyle:n,fromNode:c,fromHandle:w,fromX:C,fromY:D,toX:d,toY:f,fromPosition:z,toPosition:B,connectionStatus:a});let U="";const q={sourceX:C,sourceY:D,sourcePosition:z,targetX:d,targetY:f,targetPosition:B};return r===to.Bezier?[U]=Z2(q):r===to.Step?[U]=Py({...q,borderRadius:0}):r===to.SmoothStep?[U]=Py(q):r===to.SimpleBezier?[U]=Q2(q):U=`M${C},${D} ${d},${f}`,fe.createElement("path",{d:U,fill:"none",className:"react-flow__connection-path",style:n})};NR.displayName="ConnectionLine";const A5=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function R5({containerStyle:t,style:e,type:n,component:r}){const{nodeId:s,handleType:a,nodesConnectable:c,width:u,height:d,connectionStatus:f}=Rt(A5,kn);return!(s&&a&&u&&c)?null:fe.createElement("svg",{style:t,width:u,height:d,className:"react-flow__edges react-flow__connectionline react-flow__container"},fe.createElement("g",{className:$n(["react-flow__connection",f])},fe.createElement(NR,{nodeId:s,handleType:a,style:e,type:n,CustomComponent:r,connectionStatus:f})))}function Qx(t,e){return M.useRef(null),pn(),M.useMemo(()=>e(t),[t])}const IR=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:s,onInit:a,onNodeClick:c,onEdgeClick:u,onNodeDoubleClick:d,onEdgeDoubleClick:f,onNodeMouseEnter:m,onNodeMouseMove:v,onNodeMouseLeave:_,onNodeContextMenu:w,onSelectionContextMenu:T,onSelectionStart:R,onSelectionEnd:C,connectionLineType:D,connectionLineStyle:z,connectionLineComponent:B,connectionLineContainerStyle:U,selectionKeyCode:q,selectionOnDrag:X,selectionMode:I,multiSelectionKeyCode:A,panActivationKeyCode:N,zoomActivationKeyCode:H,deleteKeyCode:F,onlyRenderVisibleElements:$,elementsSelectable:k,selectNodesOnDrag:V,defaultViewport:K,translateExtent:L,minZoom:G,maxZoom:ee,preventScrolling:J,defaultMarkerColor:O,zoomOnScroll:Q,zoomOnPinch:ne,panOnScroll:W,panOnScrollSpeed:re,panOnScrollMode:he,zoomOnDoubleClick:ue,panOnDrag:ve,onPaneClick:_e,onPaneMouseEnter:Ae,onPaneMouseMove:Ce,onPaneMouseLeave:rt,onPaneScroll:Ye,onPaneContextMenu:De,onEdgeContextMenu:Le,onEdgeMouseEnter:st,onEdgeMouseMove:Ht,onEdgeMouseLeave:je,onReconnect:we,onReconnectStart:Nt,onReconnectEnd:Sn,reconnectRadius:Zt,noDragClassName:er,noWheelClassName:Pn,noPanClassName:On,elevateEdgesOnSelect:Hr,disableKeyboardA11y:at,nodeOrigin:Ke,nodeExtent:Ft,rfId:xt})=>{const si=Qx(t,t5),$t=Qx(e,l5);return T5(a),fe.createElement(JV,{onPaneClick:_e,onPaneMouseEnter:Ae,onPaneMouseMove:Ce,onPaneMouseLeave:rt,onPaneContextMenu:De,onPaneScroll:Ye,deleteKeyCode:F,selectionKeyCode:q,selectionOnDrag:X,selectionMode:I,onSelectionStart:R,onSelectionEnd:C,multiSelectionKeyCode:A,panActivationKeyCode:N,zoomActivationKeyCode:H,elementsSelectable:k,onMove:n,onMoveStart:r,onMoveEnd:s,zoomOnScroll:Q,zoomOnPinch:ne,zoomOnDoubleClick:ue,panOnScroll:W,panOnScrollSpeed:re,panOnScrollMode:he,panOnDrag:ve,defaultViewport:K,translateExtent:L,minZoom:G,maxZoom:ee,onSelectionContextMenu:T,preventScrolling:J,noDragClassName:er,noWheelClassName:Pn,noPanClassName:On,disableKeyboardA11y:at},fe.createElement(x5,null,fe.createElement(w5,{edgeTypes:$t,onEdgeClick:u,onEdgeDoubleClick:f,onlyRenderVisibleElements:$,onEdgeContextMenu:Le,onEdgeMouseEnter:st,onEdgeMouseMove:Ht,onEdgeMouseLeave:je,onReconnect:we,onReconnectStart:Nt,onReconnectEnd:Sn,reconnectRadius:Zt,defaultMarkerColor:O,noPanClassName:On,elevateEdgesOnSelect:!!Hr,disableKeyboardA11y:at,rfId:xt},fe.createElement(R5,{style:z,type:D,component:B,containerStyle:U})),fe.createElement("div",{className:"react-flow__edgelabel-renderer"}),fe.createElement(i5,{nodeTypes:si,onNodeClick:c,onNodeDoubleClick:d,onNodeMouseEnter:m,onNodeMouseMove:v,onNodeMouseLeave:_,onNodeContextMenu:w,selectNodesOnDrag:V,onlyRenderVisibleElements:$,noPanClassName:On,noDragClassName:er,disableKeyboardA11y:at,nodeOrigin:Ke,nodeExtent:Ft,rfId:xt})))};IR.displayName="GraphView";var C5=M.memo(IR);const Uy=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ws={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Uy,nodeExtent:Uy,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:yo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:nV,isValidConnection:void 0},N5=()=>g4((t,e)=>({...Ws,setNodes:n=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:a}=e();t({nodeInternals:j0(n,r,s,a)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(n,r)=>{const s=typeof n<"u",a=typeof r<"u",c=s?j0(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:c,edges:a?r:[],hasDefaultNodes:s,hasDefaultEdges:a})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:a,fitViewOnInitDone:c,fitViewOnInitOptions:u,domNode:d,nodeOrigin:f}=e(),m=d?.querySelector(".react-flow__viewport");if(!m)return;const v=window.getComputedStyle(m),{m22:_}=new window.DOMMatrixReadOnly(v.transform),w=n.reduce((R,C)=>{const D=s.get(C.id);if(D?.hidden)s.set(D.id,{...D,[Ot]:{...D[Ot],handleBounds:void 0}});else if(D){const z=Fv(C.nodeElement);!!(z.width&&z.height&&(D.width!==z.width||D.height!==z.height||C.forceUpdate))&&(s.set(D.id,{...D,[Ot]:{...D[Ot],handleBounds:{source:$x(".source",C.nodeElement,_,f),target:$x(".target",C.nodeElement,_,f)}},...z}),R.push({id:D.id,type:"dimensions",dimensions:z}))}return R},[]);gR(s,f);const T=c||a&&!c&&yR(e,{initial:!0,...u});t({nodeInternals:new Map(s),fitViewOnInitDone:T}),w?.length>0&&r?.(w)},updateNodePositions:(n,r=!0,s=!1)=>{const{triggerNodeChanges:a}=e(),c=n.map(u=>{const d={id:u.id,type:"position",dragging:s};return r&&(d.positionAbsolute=u.positionAbsolute,d.position=u.position),d});a(c)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:a,nodeOrigin:c,getNodes:u,elevateNodesOnSelect:d}=e();if(n?.length){if(a){const f=_R(n,u()),m=j0(f,s,c,d);t({nodeInternals:m})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:s,getNodes:a}=e();let c,u=null;r?c=n.map(d=>eo(d,!0)):(c=jl(a(),n),u=jl(s,[])),Tf({changedNodes:c,changedEdges:u,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:s,getNodes:a}=e();let c,u=null;r?c=n.map(d=>eo(d,!0)):(c=jl(s,n),u=jl(a(),[])),Tf({changedNodes:u,changedEdges:c,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:s,getNodes:a}=e(),c=n||a(),u=r||s,d=c.map(m=>(m.selected=!1,eo(m.id,!1))),f=u.map(m=>eo(m.id,!1));Tf({changedNodes:d,changedEdges:f,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:s}=e();r?.scaleExtent([n,s]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:s}=e();r?.scaleExtent([s,n]),t({maxZoom:n})},setTranslateExtent:n=>{e().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),a=r().filter(u=>u.selected).map(u=>eo(u.id,!1)),c=n.filter(u=>u.selected).map(u=>eo(u.id,!1));Tf({changedNodes:a,changedEdges:c,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(s=>{s.positionAbsolute=$v(s.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:s,height:a,d3Zoom:c,d3Selection:u,translateExtent:d}=e();if(!c||!u||!n.x&&!n.y)return!1;const f=co.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),m=[[0,0],[s,a]],v=c?.constrain()(f,m,d);return c.transform(u,v),r[0]!==v.x||r[1]!==v.y||r[2]!==v.k},cancelConnection:()=>t({connectionNodeId:Ws.connectionNodeId,connectionHandleId:Ws.connectionHandleId,connectionHandleType:Ws.connectionHandleType,connectionStatus:Ws.connectionStatus,connectionStartHandle:Ws.connectionStartHandle,connectionEndHandle:Ws.connectionEndHandle}),reset:()=>t({...Ws})}),Object.is),DR=({children:t})=>{const e=M.useRef(null);return e.current||(e.current=N5()),fe.createElement(KO,{value:e.current},t)};DR.displayName="ReactFlowProvider";const kR=({children:t})=>M.useContext(Kp)?fe.createElement(fe.Fragment,null,t):fe.createElement(DR,null,t);kR.displayName="ReactFlowWrapper";const I5={input:cR,default:Ly,output:hR,group:Zv},D5={default:pp,straight:Kv,step:Yv,smoothstep:Xp,simplebezier:Gv},k5=[0,0],M5=[15,15],P5={x:0,y:0,zoom:1},O5={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},MR=M.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:a=I5,edgeTypes:c=D5,onNodeClick:u,onEdgeClick:d,onInit:f,onMove:m,onMoveStart:v,onMoveEnd:_,onConnect:w,onConnectStart:T,onConnectEnd:R,onClickConnectStart:C,onClickConnectEnd:D,onNodeMouseEnter:z,onNodeMouseMove:B,onNodeMouseLeave:U,onNodeContextMenu:q,onNodeDoubleClick:X,onNodeDragStart:I,onNodeDrag:A,onNodeDragStop:N,onNodesDelete:H,onEdgesDelete:F,onSelectionChange:$,onSelectionDragStart:k,onSelectionDrag:V,onSelectionDragStop:K,onSelectionContextMenu:L,onSelectionStart:G,onSelectionEnd:ee,connectionMode:J=yo.Strict,connectionLineType:O=to.Bezier,connectionLineStyle:Q,connectionLineComponent:ne,connectionLineContainerStyle:W,deleteKeyCode:re="Backspace",selectionKeyCode:he="Shift",selectionOnDrag:ue=!1,selectionMode:ve=dh.Full,panActivationKeyCode:_e="Space",multiSelectionKeyCode:Ae=fp()?"Meta":"Control",zoomActivationKeyCode:Ce=fp()?"Meta":"Control",snapToGrid:rt=!1,snapGrid:Ye=M5,onlyRenderVisibleElements:De=!1,selectNodesOnDrag:Le=!0,nodesDraggable:st,nodesConnectable:Ht,nodesFocusable:je,nodeOrigin:we=k5,edgesFocusable:Nt,edgesUpdatable:Sn,elementsSelectable:Zt,defaultViewport:er=P5,minZoom:Pn=.5,maxZoom:On=2,translateExtent:Hr=Uy,preventScrolling:at=!0,nodeExtent:Ke,defaultMarkerColor:Ft="#b1b1b7",zoomOnScroll:xt=!0,zoomOnPinch:si=!0,panOnScroll:$t=!1,panOnScrollSpeed:on=.5,panOnScrollMode:Vn=pa.Free,zoomOnDoubleClick:Ln=!0,panOnDrag:an=!0,onPaneClick:mn,onPaneMouseEnter:zn,onPaneMouseMove:ji,onPaneMouseLeave:Bi,onPaneScroll:Fr,onPaneContextMenu:tr,children:br,onEdgeContextMenu:nr,onEdgeDoubleClick:wr,onEdgeMouseEnter:ko,onEdgeMouseMove:oi,onEdgeMouseLeave:Ts,onEdgeUpdate:ai,onEdgeUpdateStart:za,onEdgeUpdateEnd:yt,onReconnect:Lt,onReconnectStart:It,onReconnectEnd:qn,reconnectRadius:Mo=10,edgeUpdaterRadius:Cc=10,onNodesChange:li,onEdgesChange:Ua,noDragClassName:Hi="nodrag",noWheelClassName:ci="nowheel",noPanClassName:Er="nopan",fitView:xr=!1,fitViewOptions:Tr,connectOnClick:gn=!0,attributionPosition:Tt,proOptions:Po,defaultEdgeOptions:Ss,elevateNodesOnSelect:rr=!0,elevateEdgesOnSelect:$r=!1,disableKeyboardA11y:Oo=!1,autoPanOnConnect:ja=!0,autoPanOnNodeDrag:Fi=!0,connectionRadius:Ba=20,isValidConnection:ui,onError:Sr,style:Jt,id:hi,nodeDragThreshold:Ha,...qr},As)=>{const di=hi||"1";return fe.createElement("div",{...qr,style:{...Jt,...O5},ref:As,className:$n(["react-flow",s]),"data-testid":"rf__wrapper",id:hi},fe.createElement(kR,null,fe.createElement(C5,{onInit:f,onMove:m,onMoveStart:v,onMoveEnd:_,onNodeClick:u,onEdgeClick:d,onNodeMouseEnter:z,onNodeMouseMove:B,onNodeMouseLeave:U,onNodeContextMenu:q,onNodeDoubleClick:X,nodeTypes:a,edgeTypes:c,connectionLineType:O,connectionLineStyle:Q,connectionLineComponent:ne,connectionLineContainerStyle:W,selectionKeyCode:he,selectionOnDrag:ue,selectionMode:ve,deleteKeyCode:re,multiSelectionKeyCode:Ae,panActivationKeyCode:_e,zoomActivationKeyCode:Ce,onlyRenderVisibleElements:De,selectNodesOnDrag:Le,defaultViewport:er,translateExtent:Hr,minZoom:Pn,maxZoom:On,preventScrolling:at,zoomOnScroll:xt,zoomOnPinch:si,zoomOnDoubleClick:Ln,panOnScroll:$t,panOnScrollSpeed:on,panOnScrollMode:Vn,panOnDrag:an,onPaneClick:mn,onPaneMouseEnter:zn,onPaneMouseMove:ji,onPaneMouseLeave:Bi,onPaneScroll:Fr,onPaneContextMenu:tr,onSelectionContextMenu:L,onSelectionStart:G,onSelectionEnd:ee,onEdgeContextMenu:nr,onEdgeDoubleClick:wr,onEdgeMouseEnter:ko,onEdgeMouseMove:oi,onEdgeMouseLeave:Ts,onReconnect:Lt??ai,onReconnectStart:It??za,onReconnectEnd:qn??yt,reconnectRadius:Mo??Cc,defaultMarkerColor:Ft,noDragClassName:Hi,noWheelClassName:ci,noPanClassName:Er,elevateEdgesOnSelect:$r,rfId:di,disableKeyboardA11y:Oo,nodeOrigin:we,nodeExtent:Ke}),fe.createElement(SV,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:w,onConnectStart:T,onConnectEnd:R,onClickConnectStart:C,onClickConnectEnd:D,nodesDraggable:st,nodesConnectable:Ht,nodesFocusable:je,edgesFocusable:Nt,edgesUpdatable:Sn,elementsSelectable:Zt,elevateNodesOnSelect:rr,minZoom:Pn,maxZoom:On,nodeExtent:Ke,onNodesChange:li,onEdgesChange:Ua,snapToGrid:rt,snapGrid:Ye,connectionMode:J,translateExtent:Hr,connectOnClick:gn,defaultEdgeOptions:Ss,fitView:xr,fitViewOptions:Tr,onNodesDelete:H,onEdgesDelete:F,onNodeDragStart:I,onNodeDrag:A,onNodeDragStop:N,onSelectionDrag:V,onSelectionDragStart:k,onSelectionDragStop:K,noPanClassName:Er,nodeOrigin:we,rfId:di,autoPanOnConnect:ja,autoPanOnNodeDrag:Fi,onError:Sr,connectionRadius:Ba,isValidConnection:ui,nodeDragThreshold:Ha}),fe.createElement(xV,{onSelectionChange:$}),br,fe.createElement(WO,{proOptions:Po,position:Tt}),fe.createElement(IV,{rfId:di,disableKeyboardA11y:Oo})))});MR.displayName="ReactFlow";function PR(t){return e=>{const[n,r]=M.useState(e),s=M.useCallback(a=>r(c=>t(a,c)),[]);return[n,r,s]}}const V5=PR(_R),L5=PR($V);function z5(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},fe.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function U5(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},fe.createElement("path",{d:"M0 0h32v4.2H0z"}))}function j5(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},fe.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function B5(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},fe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function H5(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},fe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const ju=({children:t,className:e,...n})=>fe.createElement("button",{type:"button",className:$n(["react-flow__controls-button",e]),...n},t);ju.displayName="ControlButton";const F5=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),OR=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:a,onZoomOut:c,onFitView:u,onInteractiveChange:d,className:f,children:m,position:v="bottom-left"})=>{const _=pn(),[w,T]=M.useState(!1),{isInteractive:R,minZoomReached:C,maxZoomReached:D}=Rt(F5,kn),{zoomIn:z,zoomOut:B,fitView:U}=zh();if(M.useEffect(()=>{T(!0)},[]),!w)return null;const q=()=>{z(),a?.()},X=()=>{B(),c?.()},I=()=>{U(s),u?.()},A=()=>{_.setState({nodesDraggable:!R,nodesConnectable:!R,elementsSelectable:!R}),d?.(!R)};return fe.createElement($2,{className:$n(["react-flow__controls",f]),position:v,style:t,"data-testid":"rf__controls"},e&&fe.createElement(fe.Fragment,null,fe.createElement(ju,{onClick:q,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:D},fe.createElement(z5,null)),fe.createElement(ju,{onClick:X,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:C},fe.createElement(U5,null))),n&&fe.createElement(ju,{className:"react-flow__controls-fitview",onClick:I,title:"fit view","aria-label":"fit view"},fe.createElement(j5,null)),r&&fe.createElement(ju,{className:"react-flow__controls-interactive",onClick:A,title:"toggle interactivity","aria-label":"toggle interactivity"},R?fe.createElement(H5,null):fe.createElement(B5,null)),m)};OR.displayName="Controls";var $5=M.memo(OR),jr;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(jr||(jr={}));function q5({color:t,dimensions:e,lineWidth:n}){return fe.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function G5({color:t,radius:e}){return fe.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const Y5={[jr.Dots]:"#91919a",[jr.Lines]:"#eee",[jr.Cross]:"#e2e2e2"},K5={[jr.Dots]:1,[jr.Lines]:1,[jr.Cross]:6},X5=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function VR({id:t,variant:e=jr.Dots,gap:n=20,size:r,lineWidth:s=1,offset:a=2,color:c,style:u,className:d}){const f=M.useRef(null),{transform:m,patternId:v}=Rt(X5,kn),_=c||Y5[e],w=r||K5[e],T=e===jr.Dots,R=e===jr.Cross,C=Array.isArray(n)?n:[n,n],D=[C[0]*m[2]||1,C[1]*m[2]||1],z=w*m[2],B=R?[z,z]:D,U=T?[z/a,z/a]:[B[0]/a,B[1]/a];return fe.createElement("svg",{className:$n(["react-flow__background",d]),style:{...u,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:f,"data-testid":"rf__background"},fe.createElement("pattern",{id:v+t,x:m[0]%D[0],y:m[1]%D[1],width:D[0],height:D[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${U[0]},-${U[1]})`},T?fe.createElement(G5,{color:_,radius:z/a}):fe.createElement(q5,{dimensions:B,color:_,lineWidth:s})),fe.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${v+t})`}))}VR.displayName="Background";var W5=M.memo(VR),Xt=function(){return Xt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Xt.apply(this,arguments)},Zx={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},Jx={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},Af={width:"20px",height:"20px",position:"absolute",zIndex:1},Q5={top:Xt(Xt({},Zx),{top:"-5px"}),right:Xt(Xt({},Jx),{left:void 0,right:"-5px"}),bottom:Xt(Xt({},Zx),{top:void 0,bottom:"-5px"}),left:Xt(Xt({},Jx),{left:"-5px"}),topRight:Xt(Xt({},Af),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:Xt(Xt({},Af),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:Xt(Xt({},Af),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:Xt(Xt({},Af),{left:"-10px",top:"-10px",cursor:"nw-resize"})},Z5=M.memo(function(t){var e=t.onResizeStart,n=t.direction,r=t.children,s=t.replaceStyles,a=t.className,c=M.useCallback(function(f){e(f,n)},[e,n]),u=M.useCallback(function(f){e(f,n)},[e,n]),d=M.useMemo(function(){return Xt(Xt({position:"absolute",userSelect:"none"},Q5[n]),s??{})},[s,n]);return S.jsx("div",{className:a||void 0,style:d,onMouseDown:c,onTouchStart:u,children:r})}),J5=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Si=function(){return Si=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Si.apply(this,arguments)},e6={width:"auto",height:"auto"},Rf=function(t,e,n){return Math.max(Math.min(t,n),e)},eT=function(t,e,n){var r=Math.round(t/e);return r*e+n*(r-1)},kl=function(t,e){return new RegExp(t,"i").test(e)},Cf=function(t){return!!(t.touches&&t.touches.length)},t6=function(t){return!!((t.clientX||t.clientX===0)&&(t.clientY||t.clientY===0))},tT=function(t,e,n){n===void 0&&(n=0);var r=e.reduce(function(a,c,u){return Math.abs(c-t)<Math.abs(e[a]-t)?u:a},0),s=Math.abs(e[r]-t);return n===0||s<n?e[r]:t},$0=function(t){return t=t.toString(),t==="auto"||t.endsWith("px")||t.endsWith("%")||t.endsWith("vh")||t.endsWith("vw")||t.endsWith("vmax")||t.endsWith("vmin")?t:"".concat(t,"px")},Nf=function(t,e,n,r){if(t&&typeof t=="string"){if(t.endsWith("px"))return Number(t.replace("px",""));if(t.endsWith("%")){var s=Number(t.replace("%",""))/100;return e*s}if(t.endsWith("vw")){var s=Number(t.replace("vw",""))/100;return n*s}if(t.endsWith("vh")){var s=Number(t.replace("vh",""))/100;return r*s}}return t},n6=function(t,e,n,r,s,a,c){return r=Nf(r,t.width,e,n),s=Nf(s,t.height,e,n),a=Nf(a,t.width,e,n),c=Nf(c,t.height,e,n),{maxWidth:typeof r>"u"?void 0:Number(r),maxHeight:typeof s>"u"?void 0:Number(s),minWidth:typeof a>"u"?void 0:Number(a),minHeight:typeof c>"u"?void 0:Number(c)}},r6=function(t){return Array.isArray(t)?t:[t,t]},i6=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],nT="__resizable_base__",s6=function(t){J5(e,t);function e(n){var r,s,a,c,u=t.call(this,n)||this;return u.ratio=1,u.resizable=null,u.parentLeft=0,u.parentTop=0,u.resizableLeft=0,u.resizableRight=0,u.resizableTop=0,u.resizableBottom=0,u.targetLeft=0,u.targetTop=0,u.delta={width:0,height:0},u.appendBase=function(){if(!u.resizable||!u.window)return null;var d=u.parentNode;if(!d)return null;var f=u.window.document.createElement("div");return f.style.width="100%",f.style.height="100%",f.style.position="absolute",f.style.transform="scale(0, 0)",f.style.left="0",f.style.flex="0 0 100%",f.classList?f.classList.add(nT):f.className+=nT,d.appendChild(f),f},u.removeBase=function(d){var f=u.parentNode;f&&f.removeChild(d)},u.state={isResizing:!1,width:(s=(r=u.propsSize)===null||r===void 0?void 0:r.width)!==null&&s!==void 0?s:"auto",height:(c=(a=u.propsSize)===null||a===void 0?void 0:a.height)!==null&&c!==void 0?c:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},u.onResizeStart=u.onResizeStart.bind(u),u.onMouseMove=u.onMouseMove.bind(u),u.onMouseUp=u.onMouseUp.bind(u),u}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||e6},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var n=0,r=0;if(this.resizable&&this.window){var s=this.resizable.offsetWidth,a=this.resizable.offsetHeight,c=this.resizable.style.position;c!=="relative"&&(this.resizable.style.position="relative"),n=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:s,r=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:a,this.resizable.style.position=c}return{width:n,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeStyle",{get:function(){var n=this,r=this.props.size,s=function(u){var d;if(typeof n.state[u]>"u"||n.state[u]==="auto")return"auto";if(n.propsSize&&n.propsSize[u]&&(!((d=n.propsSize[u])===null||d===void 0)&&d.toString().endsWith("%"))){if(n.state[u].toString().endsWith("%"))return n.state[u].toString();var f=n.getParentSize(),m=Number(n.state[u].toString().replace("px","")),v=m/f[u]*100;return"".concat(v,"%")}return $0(n.state[u])},a=r&&typeof r.width<"u"&&!this.state.isResizing?$0(r.width):s("width"),c=r&&typeof r.height<"u"&&!this.state.isResizing?$0(r.height):s("height");return{width:a,height:c}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var n=this.appendBase();if(!n)return{width:0,height:0};var r=!1,s=this.parentNode.style.flexWrap;s!=="wrap"&&(r=!0,this.parentNode.style.flexWrap="wrap"),n.style.position="relative",n.style.minWidth="100%",n.style.minHeight="100%";var a={width:n.offsetWidth,height:n.offsetHeight};return r&&(this.parentNode.style.flexWrap=s),this.removeBase(n),a},e.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},e.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var n=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:n.flexBasis!=="auto"?n.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},e.prototype.createSizeForCssProperty=function(n,r){var s=this.propsSize&&this.propsSize[r];return this.state[r]==="auto"&&this.state.original[r]===n&&(typeof s>"u"||s==="auto")?"auto":n},e.prototype.calculateNewMaxFromBoundary=function(n,r){var s=this.props.boundsByDirection,a=this.state.direction,c=s&&kl("left",a),u=s&&kl("top",a),d,f;if(this.props.bounds==="parent"){var m=this.parentNode;m&&(d=c?this.resizableRight-this.parentLeft:m.offsetWidth+(this.parentLeft-this.resizableLeft),f=u?this.resizableBottom-this.parentTop:m.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(d=c?this.resizableRight:this.window.innerWidth-this.resizableLeft,f=u?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(d=c?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),f=u?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return d&&Number.isFinite(d)&&(n=n&&n<d?n:d),f&&Number.isFinite(f)&&(r=r&&r<f?r:f),{maxWidth:n,maxHeight:r}},e.prototype.calculateNewSizeFromDirection=function(n,r){var s=this.props.scale||1,a=r6(this.props.resizeRatio||1),c=a[0],u=a[1],d=this.state,f=d.direction,m=d.original,v=this.props,_=v.lockAspectRatio,w=v.lockAspectRatioExtraHeight,T=v.lockAspectRatioExtraWidth,R=m.width,C=m.height,D=w||0,z=T||0;return kl("right",f)&&(R=m.width+(n-m.x)*c/s,_&&(C=(R-z)/this.ratio+D)),kl("left",f)&&(R=m.width-(n-m.x)*c/s,_&&(C=(R-z)/this.ratio+D)),kl("bottom",f)&&(C=m.height+(r-m.y)*u/s,_&&(R=(C-D)*this.ratio+z)),kl("top",f)&&(C=m.height-(r-m.y)*u/s,_&&(R=(C-D)*this.ratio+z)),{newWidth:R,newHeight:C}},e.prototype.calculateNewSizeFromAspectRatio=function(n,r,s,a){var c=this.props,u=c.lockAspectRatio,d=c.lockAspectRatioExtraHeight,f=c.lockAspectRatioExtraWidth,m=typeof a.width>"u"?10:a.width,v=typeof s.width>"u"||s.width<0?n:s.width,_=typeof a.height>"u"?10:a.height,w=typeof s.height>"u"||s.height<0?r:s.height,T=d||0,R=f||0;if(u){var C=(_-T)*this.ratio+R,D=(w-T)*this.ratio+R,z=(m-R)/this.ratio+T,B=(v-R)/this.ratio+T,U=Math.max(m,C),q=Math.min(v,D),X=Math.max(_,z),I=Math.min(w,B);n=Rf(n,U,q),r=Rf(r,X,I)}else n=Rf(n,m,v),r=Rf(r,_,w);return{newWidth:n,newHeight:r}},e.prototype.setBoundingClientRect=function(){var n=1/(this.props.scale||1);if(this.props.bounds==="parent"){var r=this.parentNode;if(r){var s=r.getBoundingClientRect();this.parentLeft=s.left*n,this.parentTop=s.top*n}}if(this.props.bounds&&typeof this.props.bounds!="string"){var a=this.props.bounds.getBoundingClientRect();this.targetLeft=a.left*n,this.targetTop=a.top*n}if(this.resizable){var c=this.resizable.getBoundingClientRect(),u=c.left,d=c.top,f=c.right,m=c.bottom;this.resizableLeft=u*n,this.resizableRight=f*n,this.resizableTop=d*n,this.resizableBottom=m*n}},e.prototype.onResizeStart=function(n,r){if(!(!this.resizable||!this.window)){var s=0,a=0;if(n.nativeEvent&&t6(n.nativeEvent)?(s=n.nativeEvent.clientX,a=n.nativeEvent.clientY):n.nativeEvent&&Cf(n.nativeEvent)&&(s=n.nativeEvent.touches[0].clientX,a=n.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var c=this.props.onResizeStart(n,r,this.resizable);if(c===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var u,d=this.window.getComputedStyle(this.resizable);if(d.flexBasis!=="auto"){var f=this.parentNode;if(f){var m=this.window.getComputedStyle(f).flexDirection;this.flexDir=m.startsWith("row")?"row":"column",u=d.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var v={original:{x:s,y:a,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:Si(Si({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(n.target).cursor||"auto"}),direction:r,flexBasis:u};this.setState(v)}},e.prototype.onMouseMove=function(n){var r=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&Cf(n))try{n.preventDefault(),n.stopPropagation()}catch{}var s=this.props,a=s.maxWidth,c=s.maxHeight,u=s.minWidth,d=s.minHeight,f=Cf(n)?n.touches[0].clientX:n.clientX,m=Cf(n)?n.touches[0].clientY:n.clientY,v=this.state,_=v.direction,w=v.original,T=v.width,R=v.height,C=this.getParentSize(),D=n6(C,this.window.innerWidth,this.window.innerHeight,a,c,u,d);a=D.maxWidth,c=D.maxHeight,u=D.minWidth,d=D.minHeight;var z=this.calculateNewSizeFromDirection(f,m),B=z.newHeight,U=z.newWidth,q=this.calculateNewMaxFromBoundary(a,c);this.props.snap&&this.props.snap.x&&(U=tT(U,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(B=tT(B,this.props.snap.y,this.props.snapGap));var X=this.calculateNewSizeFromAspectRatio(U,B,{width:q.maxWidth,height:q.maxHeight},{width:u,height:d});if(U=X.newWidth,B=X.newHeight,this.props.grid){var I=eT(U,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),A=eT(B,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),N=this.props.snapGap||0,H=N===0||Math.abs(I-U)<=N?I:U,F=N===0||Math.abs(A-B)<=N?A:B;U=H,B=F}var $={width:U-w.width,height:B-w.height};if(this.delta=$,T&&typeof T=="string"){if(T.endsWith("%")){var k=U/C.width*100;U="".concat(k,"%")}else if(T.endsWith("vw")){var V=U/this.window.innerWidth*100;U="".concat(V,"vw")}else if(T.endsWith("vh")){var K=U/this.window.innerHeight*100;U="".concat(K,"vh")}}if(R&&typeof R=="string"){if(R.endsWith("%")){var k=B/C.height*100;B="".concat(k,"%")}else if(R.endsWith("vw")){var V=B/this.window.innerWidth*100;B="".concat(V,"vw")}else if(R.endsWith("vh")){var K=B/this.window.innerHeight*100;B="".concat(K,"vh")}}var L={width:this.createSizeForCssProperty(U,"width"),height:this.createSizeForCssProperty(B,"height")};this.flexDir==="row"?L.flexBasis=L.width:this.flexDir==="column"&&(L.flexBasis=L.height);var G=this.state.width!==L.width,ee=this.state.height!==L.height,J=this.state.flexBasis!==L.flexBasis,O=G||ee||J;O&&H2.flushSync(function(){r.setState(L)}),this.props.onResize&&O&&this.props.onResize(n,_,this.resizable,$)}},e.prototype.onMouseUp=function(n){var r,s,a=this.state,c=a.isResizing,u=a.direction;a.original,!(!c||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(n,u,this.resizable,this.delta),this.props.size&&this.setState({width:(r=this.props.size.width)!==null&&r!==void 0?r:"auto",height:(s=this.props.size.height)!==null&&s!==void 0?s:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:Si(Si({},this.state.backgroundStyle),{cursor:"auto"})}))},e.prototype.updateSize=function(n){var r,s;this.setState({width:(r=n.width)!==null&&r!==void 0?r:"auto",height:(s=n.height)!==null&&s!==void 0?s:"auto"})},e.prototype.renderResizer=function(){var n=this,r=this.props,s=r.enable,a=r.handleStyles,c=r.handleClasses,u=r.handleWrapperStyle,d=r.handleWrapperClass,f=r.handleComponent;if(!s)return null;var m=Object.keys(s).map(function(v){return s[v]!==!1?S.jsx(Z5,{direction:v,onResizeStart:n.onResizeStart,replaceStyles:a&&a[v],className:c&&c[v],children:f&&f[v]?f[v]:null},v):null});return S.jsx("div",{className:d,style:u,children:m})},e.prototype.render=function(){var n=this,r=Object.keys(this.props).reduce(function(c,u){return i6.indexOf(u)!==-1||(c[u]=n.props[u]),c},{}),s=Si(Si(Si({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(s.flexBasis=this.state.flexBasis);var a=this.props.as||"div";return S.jsxs(a,Si({style:s,className:this.props.className},r,{ref:function(c){c&&(n.resizable=c)},children:[this.state.isResizing&&S.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},e.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e}(M.PureComponent);const Wp=M.createContext(null);Wp.displayName="PanelGroupContext";const Pt={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},e_=10,_a=M.useLayoutEffect,rT=ZM.useId,o6=typeof rT=="function"?rT:()=>null;let a6=0;function t_(t=null){const e=o6(),n=M.useRef(t||e||null);return n.current===null&&(n.current=""+a6++),t??n.current}function LR({children:t,className:e="",collapsedSize:n,collapsible:r,defaultSize:s,forwardedRef:a,id:c,maxSize:u,minSize:d,onCollapse:f,onExpand:m,onResize:v,order:_,style:w,tagName:T="div",...R}){const C=M.useContext(Wp);if(C===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:D,expandPanel:z,getPanelSize:B,getPanelStyle:U,groupId:q,isPanelCollapsed:X,reevaluatePanelConstraints:I,registerPanel:A,resizePanel:N,unregisterPanel:H}=C,F=t_(c),$=M.useRef({callbacks:{onCollapse:f,onExpand:m,onResize:v},constraints:{collapsedSize:n,collapsible:r,defaultSize:s,maxSize:u,minSize:d},id:F,idIsFromProps:c!==void 0,order:_});M.useRef({didLogMissingDefaultSizeWarning:!1}),_a(()=>{const{callbacks:V,constraints:K}=$.current,L={...K};$.current.id=F,$.current.idIsFromProps=c!==void 0,$.current.order=_,V.onCollapse=f,V.onExpand=m,V.onResize=v,K.collapsedSize=n,K.collapsible=r,K.defaultSize=s,K.maxSize=u,K.minSize=d,(L.collapsedSize!==K.collapsedSize||L.collapsible!==K.collapsible||L.maxSize!==K.maxSize||L.minSize!==K.minSize)&&I($.current,L)}),_a(()=>{const V=$.current;return A(V),()=>{H(V)}},[_,F,A,H]),M.useImperativeHandle(a,()=>({collapse:()=>{D($.current)},expand:V=>{z($.current,V)},getId(){return F},getSize(){return B($.current)},isCollapsed(){return X($.current)},isExpanded(){return!X($.current)},resize:V=>{N($.current,V)}}),[D,z,B,X,F,N]);const k=U($.current,s);return M.createElement(T,{...R,children:t,className:e,id:F,style:{...k,...w},[Pt.groupId]:q,[Pt.panel]:"",[Pt.panelCollapsible]:r||void 0,[Pt.panelId]:F,[Pt.panelSize]:parseFloat(""+k.flexGrow).toFixed(1)})}const jy=M.forwardRef((t,e)=>M.createElement(LR,{...t,forwardedRef:e}));LR.displayName="Panel";jy.displayName="forwardRef(Panel)";let By=null,Gf=-1,no=null;function l6(t,e){if(e){const n=(e&HR)!==0,r=(e&FR)!==0,s=(e&$R)!==0,a=(e&qR)!==0;if(n)return s?"se-resize":a?"ne-resize":"e-resize";if(r)return s?"sw-resize":a?"nw-resize":"w-resize";if(s)return"s-resize";if(a)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function c6(){no!==null&&(document.head.removeChild(no),By=null,no=null,Gf=-1)}function q0(t,e){var n,r;const s=l6(t,e);if(By!==s){if(By=s,no===null&&(no=document.createElement("style"),document.head.appendChild(no)),Gf>=0){var a;(a=no.sheet)===null||a===void 0||a.removeRule(Gf)}Gf=(n=(r=no.sheet)===null||r===void 0?void 0:r.insertRule(`*{cursor: ${s} !important;}`))!==null&&n!==void 0?n:-1}}function zR(t){return t.type==="keydown"}function UR(t){return t.type.startsWith("pointer")}function jR(t){return t.type.startsWith("mouse")}function Qp(t){if(UR(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(jR(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function u6(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function h6(t,e,n){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function d6(t,e){if(t===e)throw new Error("Cannot compare node with itself");const n={a:oT(t),b:oT(e)};let r;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),e=n.b.pop(),r=t;He(r,"Stacking order can only be calculated for elements with a common ancestor");const s={a:sT(iT(n.a)),b:sT(iT(n.b))};if(s.a===s.b){const a=r.childNodes,c={a:n.a.at(-1),b:n.b.at(-1)};let u=a.length;for(;u--;){const d=a[u];if(d===c.a)return 1;if(d===c.b)return-1}}return Math.sign(s.a-s.b)}const f6=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function p6(t){var e;const n=getComputedStyle((e=BR(t))!==null&&e!==void 0?e:t).display;return n==="flex"||n==="inline-flex"}function m6(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||p6(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||f6.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function iT(t){let e=t.length;for(;e--;){const n=t[e];if(He(n,"Missing node"),m6(n))return n}return null}function sT(t){return t&&Number(getComputedStyle(t).zIndex)||0}function oT(t){const e=[];for(;t;)e.push(t),t=BR(t);return e}function BR(t){const{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}const HR=1,FR=2,$R=4,qR=8,g6=u6()==="coarse";let ei=[],Zl=!1,ro=new Map,Zp=new Map;const ph=new Set;function y6(t,e,n,r,s){var a;const{ownerDocument:c}=e,u={direction:n,element:e,hitAreaMargins:r,setResizeHandlerState:s},d=(a=ro.get(c))!==null&&a!==void 0?a:0;return ro.set(c,d+1),ph.add(u),mp(),function(){var m;Zp.delete(t),ph.delete(u);const v=(m=ro.get(c))!==null&&m!==void 0?m:1;if(ro.set(c,v-1),mp(),v===1&&ro.delete(c),ei.includes(u)){const _=ei.indexOf(u);_>=0&&ei.splice(_,1),r_(),s("up",!0,null)}}}function v6(t){const{target:e}=t,{x:n,y:r}=Qp(t);Zl=!0,n_({target:e,x:n,y:r}),mp(),ei.length>0&&(gp("down",t),t.preventDefault(),GR(e)||t.stopImmediatePropagation())}function G0(t){const{x:e,y:n}=Qp(t);if(Zl&&t.buttons===0&&(Zl=!1,gp("up",t)),!Zl){const{target:r}=t;n_({target:r,x:e,y:n})}gp("move",t),r_(),ei.length>0&&t.preventDefault()}function Y0(t){const{target:e}=t,{x:n,y:r}=Qp(t);Zp.clear(),Zl=!1,ei.length>0&&(t.preventDefault(),GR(e)||t.stopImmediatePropagation()),gp("up",t),n_({target:e,x:n,y:r}),r_(),mp()}function GR(t){let e=t;for(;e;){if(e.hasAttribute(Pt.resizeHandle))return!0;e=e.parentElement}return!1}function n_({target:t,x:e,y:n}){ei.splice(0);let r=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(r=t),ph.forEach(s=>{const{element:a,hitAreaMargins:c}=s,u=a.getBoundingClientRect(),{bottom:d,left:f,right:m,top:v}=u,_=g6?c.coarse:c.fine;if(e>=f-_&&e<=m+_&&n>=v-_&&n<=d+_){if(r!==null&&document.contains(r)&&a!==r&&!a.contains(r)&&!r.contains(a)&&d6(r,a)>0){let T=r,R=!1;for(;T&&!T.contains(a);){if(h6(T.getBoundingClientRect(),u)){R=!0;break}T=T.parentElement}if(R)return}ei.push(s)}})}function K0(t,e){Zp.set(t,e)}function r_(){let t=!1,e=!1;ei.forEach(r=>{const{direction:s}=r;s==="horizontal"?t=!0:e=!0});let n=0;Zp.forEach(r=>{n|=r}),t&&e?q0("intersection",n):t?q0("horizontal",n):e?q0("vertical",n):c6()}let X0;function mp(){var t;(t=X0)===null||t===void 0||t.abort(),X0=new AbortController;const e={capture:!0,signal:X0.signal};ph.size&&(Zl?(ei.length>0&&ro.forEach((n,r)=>{const{body:s}=r;n>0&&(s.addEventListener("contextmenu",Y0,e),s.addEventListener("pointerleave",G0,e),s.addEventListener("pointermove",G0,e))}),ro.forEach((n,r)=>{const{body:s}=r;s.addEventListener("pointerup",Y0,e),s.addEventListener("pointercancel",Y0,e)})):ro.forEach((n,r)=>{const{body:s}=r;n>0&&(s.addEventListener("pointerdown",v6,e),s.addEventListener("pointermove",G0,e))}))}function gp(t,e){ph.forEach(n=>{const{setResizeHandlerState:r}=n,s=ei.includes(n);r(t,s,e)})}function _6(){const[t,e]=M.useState(0);return M.useCallback(()=>e(n=>n+1),[])}function He(t,e){if(!t)throw console.error(e),Error(e)}function Ta(t,e,n=e_){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function hs(t,e,n=e_){return Ta(t,e,n)===0}function dr(t,e,n){return Ta(t,e,n)===0}function b6(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){const s=t[r],a=e[r];if(!dr(s,a,n))return!1}return!0}function Bl({panelConstraints:t,panelIndex:e,size:n}){const r=t[e];He(r!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:s=0,collapsible:a,maxSize:c=100,minSize:u=0}=r;if(Ta(n,u)<0)if(a){const d=(s+u)/2;Ta(n,d)<0?n=s:n=u}else n=u;return n=Math.min(c,n),n=parseFloat(n.toFixed(e_)),n}function Bu({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:r,prevLayout:s,trigger:a}){if(dr(t,0))return e;const c=[...e],[u,d]=r;He(u!=null,"Invalid first pivot index"),He(d!=null,"Invalid second pivot index");let f=0;if(a==="keyboard"){{const v=t<0?d:u,_=n[v];He(_,`Panel constraints not found for index ${v}`);const{collapsedSize:w=0,collapsible:T,minSize:R=0}=_;if(T){const C=e[v];if(He(C!=null,`Previous layout not found for panel index ${v}`),dr(C,w)){const D=R-C;Ta(D,Math.abs(t))>0&&(t=t<0?0-D:D)}}}{const v=t<0?u:d,_=n[v];He(_,`No panel constraints found for index ${v}`);const{collapsedSize:w=0,collapsible:T,minSize:R=0}=_;if(T){const C=e[v];if(He(C!=null,`Previous layout not found for panel index ${v}`),dr(C,R)){const D=C-w;Ta(D,Math.abs(t))>0&&(t=t<0?0-D:D)}}}}{const v=t<0?1:-1;let _=t<0?d:u,w=0;for(;;){const R=e[_];He(R!=null,`Previous layout not found for panel index ${_}`);const D=Bl({panelConstraints:n,panelIndex:_,size:100})-R;if(w+=D,_+=v,_<0||_>=n.length)break}const T=Math.min(Math.abs(t),Math.abs(w));t=t<0?0-T:T}{let _=t<0?u:d;for(;_>=0&&_<n.length;){const w=Math.abs(t)-Math.abs(f),T=e[_];He(T!=null,`Previous layout not found for panel index ${_}`);const R=T-w,C=Bl({panelConstraints:n,panelIndex:_,size:R});if(!dr(T,C)&&(f+=T-C,c[_]=C,f.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?_--:_++}}if(b6(s,c))return s;{const v=t<0?d:u,_=e[v];He(_!=null,`Previous layout not found for panel index ${v}`);const w=_+f,T=Bl({panelConstraints:n,panelIndex:v,size:w});if(c[v]=T,!dr(T,w)){let R=w-T,D=t<0?d:u;for(;D>=0&&D<n.length;){const z=c[D];He(z!=null,`Previous layout not found for panel index ${D}`);const B=z+R,U=Bl({panelConstraints:n,panelIndex:D,size:B});if(dr(z,U)||(R-=U-z,c[D]=U),dr(R,0))break;t>0?D--:D++}}}const m=c.reduce((v,_)=>_+v,0);return dr(m,100)?c:s}function w6({layout:t,panelsArray:e,pivotIndices:n}){let r=0,s=100,a=0,c=0;const u=n[0];He(u!=null,"No pivot index found"),e.forEach((v,_)=>{const{constraints:w}=v,{maxSize:T=100,minSize:R=0}=w;_===u?(r=R,s=T):(a+=R,c+=T)});const d=Math.min(s,100-a),f=Math.max(r,100-c),m=t[u];return{valueMax:d,valueMin:f,valueNow:m}}function mh(t,e=document){return Array.from(e.querySelectorAll(`[${Pt.resizeHandleId}][data-panel-group-id="${t}"]`))}function YR(t,e,n=document){const s=mh(t,n).findIndex(a=>a.getAttribute(Pt.resizeHandleId)===e);return s??null}function KR(t,e,n){const r=YR(t,e,n);return r!=null?[r,r+1]:[-1,-1]}function E6(t){return t instanceof HTMLElement?!0:typeof t=="object"&&t!==null&&"tagName"in t&&"getAttribute"in t}function XR(t,e=document){if(E6(e)&&e.dataset.panelGroupId==t)return e;const n=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return n||null}function Jp(t,e=document){const n=e.querySelector(`[${Pt.resizeHandleId}="${t}"]`);return n||null}function x6(t,e,n,r=document){var s,a,c,u;const d=Jp(e,r),f=mh(t,r),m=d?f.indexOf(d):-1,v=(s=(a=n[m])===null||a===void 0?void 0:a.id)!==null&&s!==void 0?s:null,_=(c=(u=n[m+1])===null||u===void 0?void 0:u.id)!==null&&c!==void 0?c:null;return[v,_]}function T6({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:r,panelDataArray:s,panelGroupElement:a,setLayout:c}){M.useRef({didWarnAboutMissingResizeHandle:!1}),_a(()=>{if(!a)return;const u=mh(n,a);for(let d=0;d<s.length-1;d++){const{valueMax:f,valueMin:m,valueNow:v}=w6({layout:r,panelsArray:s,pivotIndices:[d,d+1]}),_=u[d];if(_!=null){const w=s[d];He(w,`No panel data found for index "${d}"`),_.setAttribute("aria-controls",w.id),_.setAttribute("aria-valuemax",""+Math.round(f)),_.setAttribute("aria-valuemin",""+Math.round(m)),_.setAttribute("aria-valuenow",v!=null?""+Math.round(v):"")}}return()=>{u.forEach((d,f)=>{d.removeAttribute("aria-controls"),d.removeAttribute("aria-valuemax"),d.removeAttribute("aria-valuemin"),d.removeAttribute("aria-valuenow")})}},[n,r,s,a]),M.useEffect(()=>{if(!a)return;const u=e.current;He(u,"Eager values not found");const{panelDataArray:d}=u,f=XR(n,a);He(f!=null,`No group found for id "${n}"`);const m=mh(n,a);He(m,`No resize handles found for group id "${n}"`);const v=m.map(_=>{const w=_.getAttribute(Pt.resizeHandleId);He(w,"Resize handle element has no handle id attribute");const[T,R]=x6(n,w,d,a);if(T==null||R==null)return()=>{};const C=D=>{if(!D.defaultPrevented)switch(D.key){case"Enter":{D.preventDefault();const z=d.findIndex(B=>B.id===T);if(z>=0){const B=d[z];He(B,`No panel data found for index ${z}`);const U=r[z],{collapsedSize:q=0,collapsible:X,minSize:I=0}=B.constraints;if(U!=null&&X){const A=Bu({delta:dr(U,q)?I-q:q-U,initialLayout:r,panelConstraints:d.map(N=>N.constraints),pivotIndices:KR(n,w,a),prevLayout:r,trigger:"keyboard"});r!==A&&c(A)}}break}}};return _.addEventListener("keydown",C),()=>{_.removeEventListener("keydown",C)}});return()=>{v.forEach(_=>_())}},[a,t,e,n,r,s,c])}function aT(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function WR(t,e){const n=t==="horizontal",{x:r,y:s}=Qp(e);return n?r:s}function S6(t,e,n,r,s){const a=n==="horizontal",c=Jp(e,s);He(c,`No resize handle element found for id "${e}"`);const u=c.getAttribute(Pt.groupId);He(u,"Resize handle element has no group id attribute");let{initialCursorPosition:d}=r;const f=WR(n,t),m=XR(u,s);He(m,`No group element found for id "${u}"`);const v=m.getBoundingClientRect(),_=a?v.width:v.height;return(f-d)/_*100}function A6(t,e,n,r,s,a){if(zR(t)){const c=n==="horizontal";let u=0;t.shiftKey?u=100:s!=null?u=s:u=10;let d=0;switch(t.key){case"ArrowDown":d=c?0:u;break;case"ArrowLeft":d=c?-u:0;break;case"ArrowRight":d=c?u:0;break;case"ArrowUp":d=c?0:-u;break;case"End":d=100;break;case"Home":d=-100;break}return d}else return r==null?0:S6(t,e,n,r,a)}function R6({panelDataArray:t}){const e=Array(t.length),n=t.map(a=>a.constraints);let r=0,s=100;for(let a=0;a<t.length;a++){const c=n[a];He(c,`Panel constraints not found for index ${a}`);const{defaultSize:u}=c;u!=null&&(r++,e[a]=u,s-=u)}for(let a=0;a<t.length;a++){const c=n[a];He(c,`Panel constraints not found for index ${a}`);const{defaultSize:u}=c;if(u!=null)continue;const d=t.length-r,f=s/d;r++,e[a]=f,s-=f}return e}function Ml(t,e,n){e.forEach((r,s)=>{const a=t[s];He(a,`Panel data not found for index ${s}`);const{callbacks:c,constraints:u,id:d}=a,{collapsedSize:f=0,collapsible:m}=u,v=n[d];if(v==null||r!==v){n[d]=r;const{onCollapse:_,onExpand:w,onResize:T}=c;T&&T(r,v),m&&(_||w)&&(w&&(v==null||hs(v,f))&&!hs(r,f)&&w(),_&&(v==null||!hs(v,f))&&hs(r,f)&&_())}})}function If(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function C6({defaultSize:t,dragState:e,layout:n,panelData:r,panelIndex:s,precision:a=3}){const c=n[s];let u;return c==null?u=t!=null?t.toPrecision(a):"1":r.length===1?u="1":u=c.toPrecision(a),{flexBasis:0,flexGrow:u,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function N6(t,e=10){let n=null;return(...s)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...s)},e)}}function lT(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function QR(t){return`react-resizable-panels:${t}`}function ZR(t){return t.map(e=>{const{constraints:n,id:r,idIsFromProps:s,order:a}=e;return s?r:a?`${a}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function JR(t,e){try{const n=QR(t),r=e.getItem(n);if(r){const s=JSON.parse(r);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function I6(t,e,n){var r,s;const a=(r=JR(t,n))!==null&&r!==void 0?r:{},c=ZR(e);return(s=a[c])!==null&&s!==void 0?s:null}function D6(t,e,n,r,s){var a;const c=QR(t),u=ZR(e),d=(a=JR(t,s))!==null&&a!==void 0?a:{};d[u]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{s.setItem(c,JSON.stringify(d))}catch(f){console.error(f)}}function cT({layout:t,panelConstraints:e}){const n=[...t],r=n.reduce((a,c)=>a+c,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(a=>`${a}%`).join(", ")}`);if(!dr(r,100)&&n.length>0)for(let a=0;a<e.length;a++){const c=n[a];He(c!=null,`No layout data found for index ${a}`);const u=100/r*c;n[a]=u}let s=0;for(let a=0;a<e.length;a++){const c=n[a];He(c!=null,`No layout data found for index ${a}`);const u=Bl({panelConstraints:e,panelIndex:a,size:c});c!=u&&(s+=c-u,n[a]=u)}if(!dr(s,0))for(let a=0;a<e.length;a++){const c=n[a];He(c!=null,`No layout data found for index ${a}`);const u=c+s,d=Bl({panelConstraints:e,panelIndex:a,size:u});if(c!==d&&(s-=d-c,n[a]=d,dr(s,0)))break}return n}const k6=100,Hu={getItem:t=>(lT(Hu),Hu.getItem(t)),setItem:(t,e)=>{lT(Hu),Hu.setItem(t,e)}},uT={};function eC({autoSaveId:t=null,children:e,className:n="",direction:r,forwardedRef:s,id:a=null,onLayout:c=null,keyboardResizeBy:u=null,storage:d=Hu,style:f,tagName:m="div",...v}){const _=t_(a),w=M.useRef(null),[T,R]=M.useState(null),[C,D]=M.useState([]),z=_6(),B=M.useRef({}),U=M.useRef(new Map),q=M.useRef(0),X=M.useRef({autoSaveId:t,direction:r,dragState:T,id:_,keyboardResizeBy:u,onLayout:c,storage:d}),I=M.useRef({layout:C,panelDataArray:[],panelDataArrayChanged:!1});M.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),M.useImperativeHandle(s,()=>({getId:()=>X.current.id,getLayout:()=>{const{layout:W}=I.current;return W},setLayout:W=>{const{onLayout:re}=X.current,{layout:he,panelDataArray:ue}=I.current,ve=cT({layout:W,panelConstraints:ue.map(_e=>_e.constraints)});aT(he,ve)||(D(ve),I.current.layout=ve,re&&re(ve),Ml(ue,ve,B.current))}}),[]),_a(()=>{X.current.autoSaveId=t,X.current.direction=r,X.current.dragState=T,X.current.id=_,X.current.onLayout=c,X.current.storage=d}),T6({committedValuesRef:X,eagerValuesRef:I,groupId:_,layout:C,panelDataArray:I.current.panelDataArray,setLayout:D,panelGroupElement:w.current}),M.useEffect(()=>{const{panelDataArray:W}=I.current;if(t){if(C.length===0||C.length!==W.length)return;let re=uT[t];re==null&&(re=N6(D6,k6),uT[t]=re);const he=[...W],ue=new Map(U.current);re(t,he,ue,C,d)}},[t,C,d]),M.useEffect(()=>{});const A=M.useCallback(W=>{const{onLayout:re}=X.current,{layout:he,panelDataArray:ue}=I.current;if(W.constraints.collapsible){const ve=ue.map(rt=>rt.constraints),{collapsedSize:_e=0,panelSize:Ae,pivotIndices:Ce}=la(ue,W,he);if(He(Ae!=null,`Panel size not found for panel "${W.id}"`),!hs(Ae,_e)){U.current.set(W.id,Ae);const Ye=Ol(ue,W)===ue.length-1?Ae-_e:_e-Ae,De=Bu({delta:Ye,initialLayout:he,panelConstraints:ve,pivotIndices:Ce,prevLayout:he,trigger:"imperative-api"});If(he,De)||(D(De),I.current.layout=De,re&&re(De),Ml(ue,De,B.current))}}},[]),N=M.useCallback((W,re)=>{const{onLayout:he}=X.current,{layout:ue,panelDataArray:ve}=I.current;if(W.constraints.collapsible){const _e=ve.map(Le=>Le.constraints),{collapsedSize:Ae=0,panelSize:Ce=0,minSize:rt=0,pivotIndices:Ye}=la(ve,W,ue),De=re??rt;if(hs(Ce,Ae)){const Le=U.current.get(W.id),st=Le!=null&&Le>=De?Le:De,je=Ol(ve,W)===ve.length-1?Ce-st:st-Ce,we=Bu({delta:je,initialLayout:ue,panelConstraints:_e,pivotIndices:Ye,prevLayout:ue,trigger:"imperative-api"});If(ue,we)||(D(we),I.current.layout=we,he&&he(we),Ml(ve,we,B.current))}}},[]),H=M.useCallback(W=>{const{layout:re,panelDataArray:he}=I.current,{panelSize:ue}=la(he,W,re);return He(ue!=null,`Panel size not found for panel "${W.id}"`),ue},[]),F=M.useCallback((W,re)=>{const{panelDataArray:he}=I.current,ue=Ol(he,W);return C6({defaultSize:re,dragState:T,layout:C,panelData:he,panelIndex:ue})},[T,C]),$=M.useCallback(W=>{const{layout:re,panelDataArray:he}=I.current,{collapsedSize:ue=0,collapsible:ve,panelSize:_e}=la(he,W,re);return He(_e!=null,`Panel size not found for panel "${W.id}"`),ve===!0&&hs(_e,ue)},[]),k=M.useCallback(W=>{const{layout:re,panelDataArray:he}=I.current,{collapsedSize:ue=0,collapsible:ve,panelSize:_e}=la(he,W,re);return He(_e!=null,`Panel size not found for panel "${W.id}"`),!ve||Ta(_e,ue)>0},[]),V=M.useCallback(W=>{const{panelDataArray:re}=I.current;re.push(W),re.sort((he,ue)=>{const ve=he.order,_e=ue.order;return ve==null&&_e==null?0:ve==null?-1:_e==null?1:ve-_e}),I.current.panelDataArrayChanged=!0,z()},[z]);_a(()=>{if(I.current.panelDataArrayChanged){I.current.panelDataArrayChanged=!1;const{autoSaveId:W,onLayout:re,storage:he}=X.current,{layout:ue,panelDataArray:ve}=I.current;let _e=null;if(W){const Ce=I6(W,ve,he);Ce&&(U.current=new Map(Object.entries(Ce.expandToSizes)),_e=Ce.layout)}_e==null&&(_e=R6({panelDataArray:ve}));const Ae=cT({layout:_e,panelConstraints:ve.map(Ce=>Ce.constraints)});aT(ue,Ae)||(D(Ae),I.current.layout=Ae,re&&re(Ae),Ml(ve,Ae,B.current))}}),_a(()=>{const W=I.current;return()=>{W.layout=[]}},[]);const K=M.useCallback(W=>{let re=!1;const he=w.current;return he&&window.getComputedStyle(he,null).getPropertyValue("direction")==="rtl"&&(re=!0),function(ve){ve.preventDefault();const _e=w.current;if(!_e)return()=>null;const{direction:Ae,dragState:Ce,id:rt,keyboardResizeBy:Ye,onLayout:De}=X.current,{layout:Le,panelDataArray:st}=I.current,{initialLayout:Ht}=Ce??{},je=KR(rt,W,_e);let we=A6(ve,W,Ae,Ce,Ye,_e);const Nt=Ae==="horizontal";Nt&&re&&(we=-we);const Sn=st.map(Pn=>Pn.constraints),Zt=Bu({delta:we,initialLayout:Ht??Le,panelConstraints:Sn,pivotIndices:je,prevLayout:Le,trigger:zR(ve)?"keyboard":"mouse-or-touch"}),er=!If(Le,Zt);(UR(ve)||jR(ve))&&q.current!=we&&(q.current=we,!er&&we!==0?Nt?K0(W,we<0?HR:FR):K0(W,we<0?$R:qR):K0(W,0)),er&&(D(Zt),I.current.layout=Zt,De&&De(Zt),Ml(st,Zt,B.current))}},[]),L=M.useCallback((W,re)=>{const{onLayout:he}=X.current,{layout:ue,panelDataArray:ve}=I.current,_e=ve.map(Le=>Le.constraints),{panelSize:Ae,pivotIndices:Ce}=la(ve,W,ue);He(Ae!=null,`Panel size not found for panel "${W.id}"`);const Ye=Ol(ve,W)===ve.length-1?Ae-re:re-Ae,De=Bu({delta:Ye,initialLayout:ue,panelConstraints:_e,pivotIndices:Ce,prevLayout:ue,trigger:"imperative-api"});If(ue,De)||(D(De),I.current.layout=De,he&&he(De),Ml(ve,De,B.current))},[]),G=M.useCallback((W,re)=>{const{layout:he,panelDataArray:ue}=I.current,{collapsedSize:ve=0,collapsible:_e}=re,{collapsedSize:Ae=0,collapsible:Ce,maxSize:rt=100,minSize:Ye=0}=W.constraints,{panelSize:De}=la(ue,W,he);De!=null&&(_e&&Ce&&hs(De,ve)?hs(ve,Ae)||L(W,Ae):De<Ye?L(W,Ye):De>rt&&L(W,rt))},[L]),ee=M.useCallback((W,re)=>{const{direction:he}=X.current,{layout:ue}=I.current;if(!w.current)return;const ve=Jp(W,w.current);He(ve,`Drag handle element not found for id "${W}"`);const _e=WR(he,re);R({dragHandleId:W,dragHandleRect:ve.getBoundingClientRect(),initialCursorPosition:_e,initialLayout:ue})},[]),J=M.useCallback(()=>{R(null)},[]),O=M.useCallback(W=>{const{panelDataArray:re}=I.current,he=Ol(re,W);he>=0&&(re.splice(he,1),delete B.current[W.id],I.current.panelDataArrayChanged=!0,z())},[z]),Q=M.useMemo(()=>({collapsePanel:A,direction:r,dragState:T,expandPanel:N,getPanelSize:H,getPanelStyle:F,groupId:_,isPanelCollapsed:$,isPanelExpanded:k,reevaluatePanelConstraints:G,registerPanel:V,registerResizeHandle:K,resizePanel:L,startDragging:ee,stopDragging:J,unregisterPanel:O,panelGroupElement:w.current}),[A,T,r,N,H,F,_,$,k,G,V,K,L,ee,J,O]),ne={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return M.createElement(Wp.Provider,{value:Q},M.createElement(m,{...v,children:e,className:n,id:a,ref:w,style:{...ne,...f},[Pt.group]:"",[Pt.groupDirection]:r,[Pt.groupId]:_}))}const tC=M.forwardRef((t,e)=>M.createElement(eC,{...t,forwardedRef:e}));eC.displayName="PanelGroup";tC.displayName="forwardRef(PanelGroup)";function Ol(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function la(t,e,n){const r=Ol(t,e),a=r===t.length-1?[r-1,r]:[r,r+1],c=n[r];return{...e.constraints,panelSize:c,pivotIndices:a}}function M6({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:r}){M.useEffect(()=>{if(t||n==null||r==null)return;const s=Jp(e,r);if(s==null)return;const a=c=>{if(!c.defaultPrevented)switch(c.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{c.preventDefault(),n(c);break}case"F6":{c.preventDefault();const u=s.getAttribute(Pt.groupId);He(u,`No group element found for id "${u}"`);const d=mh(u,r),f=YR(u,e,r);He(f!==null,`No resize element found for id "${e}"`);const m=c.shiftKey?f>0?f-1:d.length-1:f+1<d.length?f+1:0;d[m].focus();break}}};return s.addEventListener("keydown",a),()=>{s.removeEventListener("keydown",a)}},[r,t,e,n])}function nC({children:t=null,className:e="",disabled:n=!1,hitAreaMargins:r,id:s,onBlur:a,onClick:c,onDragging:u,onFocus:d,onPointerDown:f,onPointerUp:m,style:v={},tabIndex:_=0,tagName:w="div",...T}){var R,C;const D=M.useRef(null),z=M.useRef({onClick:c,onDragging:u,onPointerDown:f,onPointerUp:m});M.useEffect(()=>{z.current.onClick=c,z.current.onDragging=u,z.current.onPointerDown=f,z.current.onPointerUp=m});const B=M.useContext(Wp);if(B===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:U,groupId:q,registerResizeHandle:X,startDragging:I,stopDragging:A,panelGroupElement:N}=B,H=t_(s),[F,$]=M.useState("inactive"),[k,V]=M.useState(!1),[K,L]=M.useState(null),G=M.useRef({state:F});_a(()=>{G.current.state=F}),M.useEffect(()=>{if(n)L(null);else{const Q=X(H);L(()=>Q)}},[n,H,X]);const ee=(R=r?.coarse)!==null&&R!==void 0?R:15,J=(C=r?.fine)!==null&&C!==void 0?C:5;M.useEffect(()=>{if(n||K==null)return;const Q=D.current;He(Q,"Element ref not attached");let ne=!1;return y6(H,Q,U,{coarse:ee,fine:J},(re,he,ue)=>{if(!he){$("inactive");return}switch(re){case"down":{$("drag"),ne=!1,He(ue,'Expected event to be defined for "down" action'),I(H,ue);const{onDragging:ve,onPointerDown:_e}=z.current;ve?.(!0),_e?.();break}case"move":{const{state:ve}=G.current;ne=!0,ve!=="drag"&&$("hover"),He(ue,'Expected event to be defined for "move" action'),K(ue);break}case"up":{$("hover"),A();const{onClick:ve,onDragging:_e,onPointerUp:Ae}=z.current;_e?.(!1),Ae?.(),ne||ve?.();break}}})},[ee,U,n,J,X,H,K,I,A]),M6({disabled:n,handleId:H,resizeHandler:K,panelGroupElement:N});const O={touchAction:"none",userSelect:"none"};return M.createElement(w,{...T,children:t,className:e,id:s,onBlur:()=>{V(!1),a?.()},onFocus:()=>{V(!0),d?.()},ref:D,role:"separator",style:{...O,...v},tabIndex:_,[Pt.groupDirection]:U,[Pt.groupId]:q,[Pt.resizeHandle]:"",[Pt.resizeHandleActive]:F==="drag"?"pointer":k?"keyboard":void 0,[Pt.resizeHandleEnabled]:!n,[Pt.resizeHandleId]:H,[Pt.resizeHandleState]:F})}nC.displayName="PanelResizeHandle";const rC=t=>{const e=[],n=t.split("_");for(let r=0;r<n.length;r++)if(r%2===0)n[r].split(/\s+/).filter(a=>a.trim()!=="").forEach(a=>{e.push({word:a.trim()})});else{const s=n[r].trim();s.split(/\s+/).filter(c=>c.trim()!=="").forEach(c=>{e.push({word:c.trim(),myConcept:s})})}return e},hT=()=>{const t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];return t[Math.floor(Math.random()*t.length)]},yp=(t,e)=>{if(!t)return"#000000";let n=t.startsWith("#")?t.slice(1):t,r=parseInt(n.slice(0,2),16),s=parseInt(n.slice(2,4),16),a=parseInt(n.slice(4,6),16);const c=d=>Math.max(0,Math.min(255,d)),u=1-e;return r=c(Math.round(r*u)),s=c(Math.round(s*u)),a=c(Math.round(a*u)),`#${[r,s,a].map(d=>d.toString(16).padStart(2,"0")).join("")}`},P6=t=>{const e=t.replace("#",""),n=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),s=parseInt(e.substr(4,2),16),a=30,c=Math.min(255,Math.max(0,n+(Math.random()-.5)*a*2)),u=Math.min(255,Math.max(0,r+(Math.random()-.5)*a*2)),d=Math.min(255,Math.max(0,s+(Math.random()-.5)*a*2));return`#${Math.round(c).toString(16).padStart(2,"0")}${Math.round(u).toString(16).padStart(2,"0")}${Math.round(d).toString(16).padStart(2,"0")}`},O6=t=>{const s=(Math.random()-.5)*400*2,a=(Math.random()-.5)*30*2;return{x:t.x+s,y:t.y+650+a}},V6=()=>`node_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,L6=(t,e)=>`edge_${t}_${e}`,z6=(t,e,n,r,s,a,c)=>({id:V6(),type:"draggableEditable",position:t,draggable:!0,data:{label:e,title:e,summary:r,full_text:n,suggestions:[],myColor:s,tokenColors:{},previousNode:c}}),U6=(t,e,n,r)=>({id:L6(t,e),source:t,target:e,sourceHandle:r,targetHandle:null,style:{stroke:n,strokeWidth:3},markerEnd:{type:xa.ArrowClosed,color:n}}),j6="modulepreload",B6=function(t){return"/"+t},dT={},iC=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let d=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");s=d(n.map(f=>{if(f=B6(f),f in dT)return;dT[f]=!0;const m=f.endsWith(".css"),v=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${v}`))return;const _=document.createElement("link");if(_.rel=m?"stylesheet":j6,m||(_.as="script"),_.crossOrigin="",_.href=f,u&&_.setAttribute("nonce",u),document.head.appendChild(_),m)return new Promise((w,T)=>{_.addEventListener("load",w),_.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return s.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})},H6=()=>{};var fT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},F6=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],c=t[n++],u=t[n++],d=((s&7)<<18|(a&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const a=t[n++],c=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|c&63)}}return e.join("")},oC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],c=s+1<t.length,u=c?t[s+1]:0,d=s+2<t.length,f=d?t[s+2]:0,m=a>>2,v=(a&3)<<4|u>>4;let _=(u&15)<<2|f>>6,w=f&63;d||(w=64,c||(_=64)),r.push(n[m],n[v],n[_],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):F6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const v=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||u==null||f==null||v==null)throw new $6;const _=a<<2|u>>4;if(r.push(_),f!==64){const w=u<<4&240|f>>2;if(r.push(w),v!==64){const T=f<<6&192|v;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const q6=function(t){const e=sC(t);return oC.encodeByteArray(e,!0)},vp=function(t){return q6(t).replace(/\./g,"")},aC=function(t){try{return oC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6=()=>G6().__FIREBASE_DEFAULTS__,K6=()=>{if(typeof process>"u"||typeof fT>"u")return;const t=fT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},X6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&aC(t[1]);return e&&JSON.parse(e)},em=()=>{try{return H6()||Y6()||K6()||X6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},lC=t=>{var e,n;return(n=(e=em())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},cC=t=>{const e=lC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},uC=()=>{var t;return(t=em())===null||t===void 0?void 0:t.config},hC=t=>{var e;return(e=em())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ka(t){return t.endsWith(".cloudworkstations.dev")}async function i_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[vp(JSON.stringify(n)),vp(JSON.stringify(c)),""].join(".")}const Xu={};function Z6(){const t={prod:[],emulator:[]};for(const e of Object.keys(Xu))Xu[e]?t.emulator.push(e):t.prod.push(e);return t}function J6(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let pT=!1;function s_(t,e){if(typeof window>"u"||typeof document>"u"||!ka(window.location.host)||Xu[t]===e||Xu[t]||pT)return;Xu[t]=e;function n(_){return`__firebase__banner__${_}`}const r="__firebase__banner",a=Z6().prod.length>0;function c(){const _=document.getElementById(r);_&&_.remove()}function u(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function d(_,w){_.setAttribute("width","24"),_.setAttribute("id",w),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{pT=!0,c()},_}function m(_,w){_.setAttribute("id",w),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){const _=J6(r),w=n("text"),T=document.getElementById(w)||document.createElement("span"),R=n("learnmore"),C=document.getElementById(R)||document.createElement("a"),D=n("preprendIcon"),z=document.getElementById(D)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const B=_.element;u(B),m(C,R);const U=f();d(z,D),B.append(z,T,C,U),document.body.appendChild(B)}a?(T.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mn())}function tL(){var t;const e=(t=em())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function iL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sL(){const t=Mn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function oL(){return!tL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aL(){try{return typeof indexedDB=="object"}catch{return!1}}function lL(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL="FirebaseError";class Ui extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=cL,Object.setPrototypeOf(this,Ui.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uh.prototype.create)}}class Uh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],c=a?uL(a,r):"Error",u=`${this.serviceName}: ${c} (${s}).`;return new Ui(s,u,r)}}function uL(t,e){return t.replace(hL,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const hL=/\{\$([^}]+)}/g;function dL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],c=e[s];if(mT(a)&&mT(c)){if(!Sa(a,c))return!1}else if(a!==c)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function mT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Fu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function $u(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function fL(t,e){const n=new pL(t,e);return n.subscribe.bind(n)}class pL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");mL(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=W0),s.error===void 0&&(s.error=W0),s.complete===void 0&&(s.complete=W0);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function W0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t){return t&&t._delegate?t._delegate:t}class vo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new W6;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vL(e))try{this.getOrInitializeService({instanceIdentifier:ha})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=ha){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ha){return this.instances.has(e)}getOptions(e=ha){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&c.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const c=this.instances.get(s);return c&&e(c,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ha){return this.component?this.component.multipleInstances?e:ha:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yL(t){return t===ha?void 0:t}function vL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Qe||(Qe={}));const bL={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},wL=Qe.INFO,EL={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},xL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=EL[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class o_{constructor(e){this.name=e,this._logLevel=wL,this._logHandler=xL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const TL=(t,e)=>e.some(n=>t instanceof n);let gT,yT;function SL(){return gT||(gT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AL(){return yT||(yT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dC=new WeakMap,Hy=new WeakMap,fC=new WeakMap,Q0=new WeakMap,a_=new WeakMap;function RL(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n(ho(t.result)),s()},c=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&dC.set(n,t)}).catch(()=>{}),a_.set(e,t),e}function CL(t){if(Hy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),s()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});Hy.set(t,e)}let Fy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Hy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||fC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ho(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function NL(t){Fy=t(Fy)}function IL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Z0(this),e,...n);return fC.set(r,e.sort?e.sort():[e]),ho(r)}:AL().includes(t)?function(...e){return t.apply(Z0(this),e),ho(dC.get(this))}:function(...e){return ho(t.apply(Z0(this),e))}}function DL(t){return typeof t=="function"?IL(t):(t instanceof IDBTransaction&&CL(t),TL(t,SL())?new Proxy(t,Fy):t)}function ho(t){if(t instanceof IDBRequest)return RL(t);if(Q0.has(t))return Q0.get(t);const e=DL(t);return e!==t&&(Q0.set(t,e),a_.set(e,t)),e}const Z0=t=>a_.get(t);function kL(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const c=indexedDB.open(t,e),u=ho(c);return r&&c.addEventListener("upgradeneeded",d=>{r(ho(c.result),d.oldVersion,d.newVersion,ho(c.transaction),d)}),n&&c.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),u.then(d=>{a&&d.addEventListener("close",()=>a()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const ML=["get","getKey","getAll","getAllKeys","count"],PL=["put","add","delete","clear"],J0=new Map;function vT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(J0.get(e))return J0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=PL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||ML.includes(n)))return;const a=async function(c,...u){const d=this.transaction(c,s?"readwrite":"readonly");let f=d.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),s&&d.done]))[0]};return J0.set(e,a),a}NL(t=>({...t,get:(e,n,r)=>vT(e,n)||t.get(e,n,r),has:(e,n)=>!!vT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(VL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function VL(t){const e=t.getComponent();return e?.type==="VERSION"}const $y="@firebase/app",_T="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new o_("@firebase/app"),LL="@firebase/app-compat",zL="@firebase/analytics-compat",UL="@firebase/analytics",jL="@firebase/app-check-compat",BL="@firebase/app-check",HL="@firebase/auth",FL="@firebase/auth-compat",$L="@firebase/database",qL="@firebase/data-connect",GL="@firebase/database-compat",YL="@firebase/functions",KL="@firebase/functions-compat",XL="@firebase/installations",WL="@firebase/installations-compat",QL="@firebase/messaging",ZL="@firebase/messaging-compat",JL="@firebase/performance",e9="@firebase/performance-compat",t9="@firebase/remote-config",n9="@firebase/remote-config-compat",r9="@firebase/storage",i9="@firebase/storage-compat",s9="@firebase/firestore",o9="@firebase/ai",a9="@firebase/firestore-compat",l9="firebase",c9="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="[DEFAULT]",u9={[$y]:"fire-core",[LL]:"fire-core-compat",[UL]:"fire-analytics",[zL]:"fire-analytics-compat",[BL]:"fire-app-check",[jL]:"fire-app-check-compat",[HL]:"fire-auth",[FL]:"fire-auth-compat",[$L]:"fire-rtdb",[qL]:"fire-data-connect",[GL]:"fire-rtdb-compat",[YL]:"fire-fn",[KL]:"fire-fn-compat",[XL]:"fire-iid",[WL]:"fire-iid-compat",[QL]:"fire-fcm",[ZL]:"fire-fcm-compat",[JL]:"fire-perf",[e9]:"fire-perf-compat",[t9]:"fire-rc",[n9]:"fire-rc-compat",[r9]:"fire-gcs",[i9]:"fire-gcs-compat",[s9]:"fire-fst",[a9]:"fire-fst-compat",[o9]:"fire-vertex","fire-js":"fire-js",[l9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p=new Map,h9=new Map,Gy=new Map;function bT(t,e){try{t.container.addComponent(e)}catch(n){vs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Aa(t){const e=t.name;if(Gy.has(e))return vs.debug(`There were multiple attempts to register component ${e}.`),!1;Gy.set(e,t);for(const n of _p.values())bT(n,t);for(const n of h9.values())bT(n,t);return!0}function tm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function pr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fo=new Uh("app","Firebase",d9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=c9;function pC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:qy,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw fo.create("bad-app-name",{appName:String(s)});if(n||(n=uC()),!n)throw fo.create("no-options");const a=_p.get(s);if(a){if(Sa(n,a.options)&&Sa(r,a.config))return a;throw fo.create("duplicate-app",{appName:s})}const c=new _L(s);for(const d of Gy.values())c.addComponent(d);const u=new f9(n,r,c);return _p.set(s,u),u}function l_(t=qy){const e=_p.get(t);if(!e&&t===qy&&uC())return pC();if(!e)throw fo.create("no-app",{appName:t});return e}function Ni(t,e,n){var r;let s=(r=u9[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vs.warn(u.join(" "));return}Aa(new vo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9="firebase-heartbeat-database",m9=1,gh="firebase-heartbeat-store";let ey=null;function mC(){return ey||(ey=kL(p9,m9,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(gh)}catch(n){console.warn(n)}}}}).catch(t=>{throw fo.create("idb-open",{originalErrorMessage:t.message})})),ey}async function g9(t){try{const n=(await mC()).transaction(gh),r=await n.objectStore(gh).get(gC(t));return await n.done,r}catch(e){if(e instanceof Ui)vs.warn(e.message);else{const n=fo.create("idb-get",{originalErrorMessage:e?.message});vs.warn(n.message)}}}async function wT(t,e){try{const r=(await mC()).transaction(gh,"readwrite");await r.objectStore(gh).put(e,gC(t)),await r.done}catch(n){if(n instanceof Ui)vs.warn(n.message);else{const r=fo.create("idb-set",{originalErrorMessage:n?.message});vs.warn(r.message)}}}function gC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9=1024,v9=30;class _9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new w9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=ET();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>v9){const c=E9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){vs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ET(),{heartbeatsToSend:r,unsentEntries:s}=b9(this._heartbeatsCache.heartbeats),a=vp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return vs.warn(n),""}}}function ET(){return new Date().toISOString().substring(0,10)}function b9(t,e=y9){const n=[];let r=t.slice();for(const s of t){const a=n.find(c=>c.agent===s.agent);if(a){if(a.dates.push(s.date),xT(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),xT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class w9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aL()?lL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await g9(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return wT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return wT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function xT(t){return vp(JSON.stringify({version:2,heartbeats:t})).length}function E9(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x9(t){Aa(new vo("platform-logger",e=>new OL(e),"PRIVATE")),Aa(new vo("heartbeat",e=>new _9(e),"PRIVATE")),Ni($y,_T,t),Ni($y,_T,"esm2017"),Ni("fire-js","")}x9("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T9="type.googleapis.com/google.protobuf.Int64Value",S9="type.googleapis.com/google.protobuf.UInt64Value";function yC(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function bp(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>bp(e));if(typeof t=="function"||typeof t=="object")return yC(t,e=>bp(e));throw new Error("Data cannot be encoded in JSON: "+t)}function ac(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case T9:case S9:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>ac(e)):typeof t=="function"||typeof t=="object"?yC(t,e=>ac(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Zn extends Ui{constructor(e,n,r){super(`${c_}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Zn.prototype)}}function A9(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function wp(t,e){let n=A9(t),r=n,s;try{const a=e&&e.error;if(a){const c=a.status;if(typeof c=="string"){if(!TT[c])return new Zn("internal","internal");n=TT[c],r=c}const u=a.message;typeof u=="string"&&(r=u),s=a.details,s!==void 0&&(s=ac(s))}}catch{}return n==="ok"?null:new Zn(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,pr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s?.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy="us-central1",C9=/^data: (.*?)(?:\n|$)/;function N9(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Zn("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class I9{constructor(e,n,r,s,a=Yy,c=(...u)=>fetch(...u)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new R9(e,n,r,s),this.cancelAllRequests=new Promise(u=>{this.deleteService=()=>Promise.resolve(u())});try{const u=new URL(a);this.customDomain=u.origin+(u.pathname==="/"?"":u.pathname),this.region=Yy}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function D9(t,e,n){const r=ka(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(i_(t.emulatorOrigin),s_("Functions",!0))}function k9(t,e,n){const r=s=>P9(t,e,s,{});return r.stream=(s,a)=>V9(t,e,s,a),r}async function M9(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}async function vC(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function P9(t,e,n,r){const s=t._url(e);return O9(t,s,n,r)}async function O9(t,e,n,r){n=bp(n);const s={data:n},a=await vC(t,r),c=r.timeout||7e4,u=N9(c),d=await Promise.race([M9(e,s,a,t.fetchImpl),u.promise,t.cancelAllRequests]);if(u.cancel(),!d)throw new Zn("cancelled","Firebase Functions instance was deleted.");const f=wp(d.status,d.json);if(f)throw f;if(!d.json)throw new Zn("internal","Response is not valid JSON object.");let m=d.json.data;if(typeof m>"u"&&(m=d.json.result),typeof m>"u")throw new Zn("internal","Response is missing data field.");return{data:ac(m)}}function V9(t,e,n,r){const s=t._url(e);return L9(t,s,n,r||{})}async function L9(t,e,n,r){var s;n=bp(n);const a={data:n},c=await vC(t,r);c["Content-Type"]="application/json",c.Accept="text/event-stream";let u;try{u=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(a),headers:c,signal:r?.signal})}catch(w){if(w instanceof Error&&w.name==="AbortError"){const R=new Zn("cancelled","Request was cancelled.");return{data:Promise.reject(R),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(R)}}}}}}const T=wp(0,null);return{data:Promise.reject(T),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(T)}}}}}}let d,f;const m=new Promise((w,T)=>{d=w,f=T});(s=r?.signal)===null||s===void 0||s.addEventListener("abort",()=>{const w=new Zn("cancelled","Request was cancelled.");f(w)});const v=u.body.getReader(),_=z9(v,d,f,r?.signal);return{stream:{[Symbol.asyncIterator](){const w=_.getReader();return{async next(){const{value:T,done:R}=await w.read();return{value:T,done:R}},async return(){return await w.cancel(),{done:!0,value:void 0}}}}},data:m}}function z9(t,e,n,r){const s=(c,u)=>{const d=c.match(C9);if(!d)return;const f=d[1];try{const m=JSON.parse(f);if("result"in m){e(ac(m.result));return}if("message"in m){u.enqueue(ac(m.message));return}if("error"in m){const v=wp(0,m);u.error(v),n(v);return}}catch(m){if(m instanceof Zn){u.error(m),n(m);return}}},a=new TextDecoder;return new ReadableStream({start(c){let u="";return d();async function d(){if(r?.aborted){const f=new Zn("cancelled","Request was cancelled");return c.error(f),n(f),Promise.resolve()}try{const{value:f,done:m}=await t.read();if(m){u.trim()&&s(u.trim(),c),c.close();return}if(r?.aborted){const _=new Zn("cancelled","Request was cancelled");c.error(_),n(_),await t.cancel();return}u+=a.decode(f,{stream:!0});const v=u.split(`
`);u=v.pop()||"";for(const _ of v)_.trim()&&s(_.trim(),c);return d()}catch(f){const m=f instanceof Zn?f:wp(0,null);c.error(m),n(m)}}},cancel(){return t.cancel()}})}const ST="@firebase/functions",AT="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9="auth-internal",j9="app-check-internal",B9="messaging-internal";function H9(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),a=n.getProvider(U9),c=n.getProvider(B9),u=n.getProvider(j9);return new I9(s,a,c,u,r)};Aa(new vo(c_,e,"PUBLIC").setMultipleInstances(!0)),Ni(ST,AT,t),Ni(ST,AT,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F9(t=l_(),e=Yy){const r=tm(Vt(t),c_).getImmediate({identifier:e}),s=cC("functions");return s&&$9(r,...s),r}function $9(t,e,n){D9(Vt(t),e,n)}function q9(t,e,n){return k9(Vt(t),e)}H9();var G9="firebase",Y9="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ni(G9,Y9,"app");var RT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var po,_C;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,A){function N(){}N.prototype=A.prototype,I.D=A.prototype,I.prototype=new N,I.prototype.constructor=I,I.C=function(H,F,$){for(var k=Array(arguments.length-2),V=2;V<arguments.length;V++)k[V-2]=arguments[V];return A.prototype[F].apply(H,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,A,N){N||(N=0);var H=Array(16);if(typeof A=="string")for(var F=0;16>F;++F)H[F]=A.charCodeAt(N++)|A.charCodeAt(N++)<<8|A.charCodeAt(N++)<<16|A.charCodeAt(N++)<<24;else for(F=0;16>F;++F)H[F]=A[N++]|A[N++]<<8|A[N++]<<16|A[N++]<<24;A=I.g[0],N=I.g[1],F=I.g[2];var $=I.g[3],k=A+($^N&(F^$))+H[0]+3614090360&4294967295;A=N+(k<<7&4294967295|k>>>25),k=$+(F^A&(N^F))+H[1]+3905402710&4294967295,$=A+(k<<12&4294967295|k>>>20),k=F+(N^$&(A^N))+H[2]+606105819&4294967295,F=$+(k<<17&4294967295|k>>>15),k=N+(A^F&($^A))+H[3]+3250441966&4294967295,N=F+(k<<22&4294967295|k>>>10),k=A+($^N&(F^$))+H[4]+4118548399&4294967295,A=N+(k<<7&4294967295|k>>>25),k=$+(F^A&(N^F))+H[5]+1200080426&4294967295,$=A+(k<<12&4294967295|k>>>20),k=F+(N^$&(A^N))+H[6]+2821735955&4294967295,F=$+(k<<17&4294967295|k>>>15),k=N+(A^F&($^A))+H[7]+4249261313&4294967295,N=F+(k<<22&4294967295|k>>>10),k=A+($^N&(F^$))+H[8]+1770035416&4294967295,A=N+(k<<7&4294967295|k>>>25),k=$+(F^A&(N^F))+H[9]+2336552879&4294967295,$=A+(k<<12&4294967295|k>>>20),k=F+(N^$&(A^N))+H[10]+4294925233&4294967295,F=$+(k<<17&4294967295|k>>>15),k=N+(A^F&($^A))+H[11]+2304563134&4294967295,N=F+(k<<22&4294967295|k>>>10),k=A+($^N&(F^$))+H[12]+1804603682&4294967295,A=N+(k<<7&4294967295|k>>>25),k=$+(F^A&(N^F))+H[13]+4254626195&4294967295,$=A+(k<<12&4294967295|k>>>20),k=F+(N^$&(A^N))+H[14]+2792965006&4294967295,F=$+(k<<17&4294967295|k>>>15),k=N+(A^F&($^A))+H[15]+1236535329&4294967295,N=F+(k<<22&4294967295|k>>>10),k=A+(F^$&(N^F))+H[1]+4129170786&4294967295,A=N+(k<<5&4294967295|k>>>27),k=$+(N^F&(A^N))+H[6]+3225465664&4294967295,$=A+(k<<9&4294967295|k>>>23),k=F+(A^N&($^A))+H[11]+643717713&4294967295,F=$+(k<<14&4294967295|k>>>18),k=N+($^A&(F^$))+H[0]+3921069994&4294967295,N=F+(k<<20&4294967295|k>>>12),k=A+(F^$&(N^F))+H[5]+3593408605&4294967295,A=N+(k<<5&4294967295|k>>>27),k=$+(N^F&(A^N))+H[10]+38016083&4294967295,$=A+(k<<9&4294967295|k>>>23),k=F+(A^N&($^A))+H[15]+3634488961&4294967295,F=$+(k<<14&4294967295|k>>>18),k=N+($^A&(F^$))+H[4]+3889429448&4294967295,N=F+(k<<20&4294967295|k>>>12),k=A+(F^$&(N^F))+H[9]+568446438&4294967295,A=N+(k<<5&4294967295|k>>>27),k=$+(N^F&(A^N))+H[14]+3275163606&4294967295,$=A+(k<<9&4294967295|k>>>23),k=F+(A^N&($^A))+H[3]+4107603335&4294967295,F=$+(k<<14&4294967295|k>>>18),k=N+($^A&(F^$))+H[8]+1163531501&4294967295,N=F+(k<<20&4294967295|k>>>12),k=A+(F^$&(N^F))+H[13]+2850285829&4294967295,A=N+(k<<5&4294967295|k>>>27),k=$+(N^F&(A^N))+H[2]+4243563512&4294967295,$=A+(k<<9&4294967295|k>>>23),k=F+(A^N&($^A))+H[7]+1735328473&4294967295,F=$+(k<<14&4294967295|k>>>18),k=N+($^A&(F^$))+H[12]+2368359562&4294967295,N=F+(k<<20&4294967295|k>>>12),k=A+(N^F^$)+H[5]+4294588738&4294967295,A=N+(k<<4&4294967295|k>>>28),k=$+(A^N^F)+H[8]+2272392833&4294967295,$=A+(k<<11&4294967295|k>>>21),k=F+($^A^N)+H[11]+1839030562&4294967295,F=$+(k<<16&4294967295|k>>>16),k=N+(F^$^A)+H[14]+4259657740&4294967295,N=F+(k<<23&4294967295|k>>>9),k=A+(N^F^$)+H[1]+2763975236&4294967295,A=N+(k<<4&4294967295|k>>>28),k=$+(A^N^F)+H[4]+1272893353&4294967295,$=A+(k<<11&4294967295|k>>>21),k=F+($^A^N)+H[7]+4139469664&4294967295,F=$+(k<<16&4294967295|k>>>16),k=N+(F^$^A)+H[10]+3200236656&4294967295,N=F+(k<<23&4294967295|k>>>9),k=A+(N^F^$)+H[13]+681279174&4294967295,A=N+(k<<4&4294967295|k>>>28),k=$+(A^N^F)+H[0]+3936430074&4294967295,$=A+(k<<11&4294967295|k>>>21),k=F+($^A^N)+H[3]+3572445317&4294967295,F=$+(k<<16&4294967295|k>>>16),k=N+(F^$^A)+H[6]+76029189&4294967295,N=F+(k<<23&4294967295|k>>>9),k=A+(N^F^$)+H[9]+3654602809&4294967295,A=N+(k<<4&4294967295|k>>>28),k=$+(A^N^F)+H[12]+3873151461&4294967295,$=A+(k<<11&4294967295|k>>>21),k=F+($^A^N)+H[15]+530742520&4294967295,F=$+(k<<16&4294967295|k>>>16),k=N+(F^$^A)+H[2]+3299628645&4294967295,N=F+(k<<23&4294967295|k>>>9),k=A+(F^(N|~$))+H[0]+4096336452&4294967295,A=N+(k<<6&4294967295|k>>>26),k=$+(N^(A|~F))+H[7]+1126891415&4294967295,$=A+(k<<10&4294967295|k>>>22),k=F+(A^($|~N))+H[14]+2878612391&4294967295,F=$+(k<<15&4294967295|k>>>17),k=N+($^(F|~A))+H[5]+4237533241&4294967295,N=F+(k<<21&4294967295|k>>>11),k=A+(F^(N|~$))+H[12]+1700485571&4294967295,A=N+(k<<6&4294967295|k>>>26),k=$+(N^(A|~F))+H[3]+2399980690&4294967295,$=A+(k<<10&4294967295|k>>>22),k=F+(A^($|~N))+H[10]+4293915773&4294967295,F=$+(k<<15&4294967295|k>>>17),k=N+($^(F|~A))+H[1]+2240044497&4294967295,N=F+(k<<21&4294967295|k>>>11),k=A+(F^(N|~$))+H[8]+1873313359&4294967295,A=N+(k<<6&4294967295|k>>>26),k=$+(N^(A|~F))+H[15]+4264355552&4294967295,$=A+(k<<10&4294967295|k>>>22),k=F+(A^($|~N))+H[6]+2734768916&4294967295,F=$+(k<<15&4294967295|k>>>17),k=N+($^(F|~A))+H[13]+1309151649&4294967295,N=F+(k<<21&4294967295|k>>>11),k=A+(F^(N|~$))+H[4]+4149444226&4294967295,A=N+(k<<6&4294967295|k>>>26),k=$+(N^(A|~F))+H[11]+3174756917&4294967295,$=A+(k<<10&4294967295|k>>>22),k=F+(A^($|~N))+H[2]+718787259&4294967295,F=$+(k<<15&4294967295|k>>>17),k=N+($^(F|~A))+H[9]+3951481745&4294967295,I.g[0]=I.g[0]+A&4294967295,I.g[1]=I.g[1]+(F+(k<<21&4294967295|k>>>11))&4294967295,I.g[2]=I.g[2]+F&4294967295,I.g[3]=I.g[3]+$&4294967295}r.prototype.u=function(I,A){A===void 0&&(A=I.length);for(var N=A-this.blockSize,H=this.B,F=this.h,$=0;$<A;){if(F==0)for(;$<=N;)s(this,I,$),$+=this.blockSize;if(typeof I=="string"){for(;$<A;)if(H[F++]=I.charCodeAt($++),F==this.blockSize){s(this,H),F=0;break}}else for(;$<A;)if(H[F++]=I[$++],F==this.blockSize){s(this,H),F=0;break}}this.h=F,this.o+=A},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var A=1;A<I.length-8;++A)I[A]=0;var N=8*this.o;for(A=I.length-8;A<I.length;++A)I[A]=N&255,N/=256;for(this.u(I),I=Array(16),A=N=0;4>A;++A)for(var H=0;32>H;H+=8)I[N++]=this.g[A]>>>H&255;return I};function a(I,A){var N=u;return Object.prototype.hasOwnProperty.call(N,I)?N[I]:N[I]=A(I)}function c(I,A){this.h=A;for(var N=[],H=!0,F=I.length-1;0<=F;F--){var $=I[F]|0;H&&$==A||(N[F]=$,H=!1)}this.g=N}var u={};function d(I){return-128<=I&&128>I?a(I,function(A){return new c([A|0],0>A?-1:0)}):new c([I|0],0>I?-1:0)}function f(I){if(isNaN(I)||!isFinite(I))return v;if(0>I)return C(f(-I));for(var A=[],N=1,H=0;I>=N;H++)A[H]=I/N|0,N*=4294967296;return new c(A,0)}function m(I,A){if(I.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(I.charAt(0)=="-")return C(m(I.substring(1),A));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=f(Math.pow(A,8)),H=v,F=0;F<I.length;F+=8){var $=Math.min(8,I.length-F),k=parseInt(I.substring(F,F+$),A);8>$?($=f(Math.pow(A,$)),H=H.j($).add(f(k))):(H=H.j(N),H=H.add(f(k)))}return H}var v=d(0),_=d(1),w=d(16777216);t=c.prototype,t.m=function(){if(R(this))return-C(this).m();for(var I=0,A=1,N=0;N<this.g.length;N++){var H=this.i(N);I+=(0<=H?H:4294967296+H)*A,A*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(T(this))return"0";if(R(this))return"-"+C(this).toString(I);for(var A=f(Math.pow(I,6)),N=this,H="";;){var F=U(N,A).g;N=D(N,F.j(A));var $=((0<N.g.length?N.g[0]:N.h)>>>0).toString(I);if(N=F,T(N))return $+H;for(;6>$.length;)$="0"+$;H=$+H}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function T(I){if(I.h!=0)return!1;for(var A=0;A<I.g.length;A++)if(I.g[A]!=0)return!1;return!0}function R(I){return I.h==-1}t.l=function(I){return I=D(this,I),R(I)?-1:T(I)?0:1};function C(I){for(var A=I.g.length,N=[],H=0;H<A;H++)N[H]=~I.g[H];return new c(N,~I.h).add(_)}t.abs=function(){return R(this)?C(this):this},t.add=function(I){for(var A=Math.max(this.g.length,I.g.length),N=[],H=0,F=0;F<=A;F++){var $=H+(this.i(F)&65535)+(I.i(F)&65535),k=($>>>16)+(this.i(F)>>>16)+(I.i(F)>>>16);H=k>>>16,$&=65535,k&=65535,N[F]=k<<16|$}return new c(N,N[N.length-1]&-2147483648?-1:0)};function D(I,A){return I.add(C(A))}t.j=function(I){if(T(this)||T(I))return v;if(R(this))return R(I)?C(this).j(C(I)):C(C(this).j(I));if(R(I))return C(this.j(C(I)));if(0>this.l(w)&&0>I.l(w))return f(this.m()*I.m());for(var A=this.g.length+I.g.length,N=[],H=0;H<2*A;H++)N[H]=0;for(H=0;H<this.g.length;H++)for(var F=0;F<I.g.length;F++){var $=this.i(H)>>>16,k=this.i(H)&65535,V=I.i(F)>>>16,K=I.i(F)&65535;N[2*H+2*F]+=k*K,z(N,2*H+2*F),N[2*H+2*F+1]+=$*K,z(N,2*H+2*F+1),N[2*H+2*F+1]+=k*V,z(N,2*H+2*F+1),N[2*H+2*F+2]+=$*V,z(N,2*H+2*F+2)}for(H=0;H<A;H++)N[H]=N[2*H+1]<<16|N[2*H];for(H=A;H<2*A;H++)N[H]=0;return new c(N,0)};function z(I,A){for(;(I[A]&65535)!=I[A];)I[A+1]+=I[A]>>>16,I[A]&=65535,A++}function B(I,A){this.g=I,this.h=A}function U(I,A){if(T(A))throw Error("division by zero");if(T(I))return new B(v,v);if(R(I))return A=U(C(I),A),new B(C(A.g),C(A.h));if(R(A))return A=U(I,C(A)),new B(C(A.g),A.h);if(30<I.g.length){if(R(I)||R(A))throw Error("slowDivide_ only works with positive integers.");for(var N=_,H=A;0>=H.l(I);)N=q(N),H=q(H);var F=X(N,1),$=X(H,1);for(H=X(H,2),N=X(N,2);!T(H);){var k=$.add(H);0>=k.l(I)&&(F=F.add(N),$=k),H=X(H,1),N=X(N,1)}return A=D(I,F.j(A)),new B(F,A)}for(F=v;0<=I.l(A);){for(N=Math.max(1,Math.floor(I.m()/A.m())),H=Math.ceil(Math.log(N)/Math.LN2),H=48>=H?1:Math.pow(2,H-48),$=f(N),k=$.j(A);R(k)||0<k.l(I);)N-=H,$=f(N),k=$.j(A);T($)&&($=_),F=F.add($),I=D(I,k)}return new B(F,I)}t.A=function(I){return U(this,I).h},t.and=function(I){for(var A=Math.max(this.g.length,I.g.length),N=[],H=0;H<A;H++)N[H]=this.i(H)&I.i(H);return new c(N,this.h&I.h)},t.or=function(I){for(var A=Math.max(this.g.length,I.g.length),N=[],H=0;H<A;H++)N[H]=this.i(H)|I.i(H);return new c(N,this.h|I.h)},t.xor=function(I){for(var A=Math.max(this.g.length,I.g.length),N=[],H=0;H<A;H++)N[H]=this.i(H)^I.i(H);return new c(N,this.h^I.h)};function q(I){for(var A=I.g.length+1,N=[],H=0;H<A;H++)N[H]=I.i(H)<<1|I.i(H-1)>>>31;return new c(N,I.h)}function X(I,A){var N=A>>5;A%=32;for(var H=I.g.length-N,F=[],$=0;$<H;$++)F[$]=0<A?I.i($+N)>>>A|I.i($+N+1)<<32-A:I.i($+N);return new c(F,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,_C=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=m,po=c}).apply(typeof RT<"u"?RT:typeof self<"u"?self:typeof window<"u"?window:{});var Df=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bC,qu,wC,Yf,Ky,EC,xC,TC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,b,E){return p==Array.prototype||p==Object.prototype||(p[b]=E.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Df=="object"&&Df];for(var b=0;b<p.length;++b){var E=p[b];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function s(p,b){if(b)e:{var E=r;p=p.split(".");for(var j=0;j<p.length-1;j++){var ie=p[j];if(!(ie in E))break e;E=E[ie]}p=p[p.length-1],j=E[p],b=b(j),b!=j&&b!=null&&e(E,p,{configurable:!0,writable:!0,value:b})}}function a(p,b){p instanceof String&&(p+="");var E=0,j=!1,ie={next:function(){if(!j&&E<p.length){var ce=E++;return{value:b(ce,p[ce]),done:!1}}return j=!0,{done:!0,value:void 0}}};return ie[Symbol.iterator]=function(){return ie},ie}s("Array.prototype.values",function(p){return p||function(){return a(this,function(b,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function d(p){var b=typeof p;return b=b!="object"?b:p?Array.isArray(p)?"array":b:"null",b=="array"||b=="object"&&typeof p.length=="number"}function f(p){var b=typeof p;return b=="object"&&p!=null||b=="function"}function m(p,b,E){return p.call.apply(p.bind,arguments)}function v(p,b,E){if(!p)throw Error();if(2<arguments.length){var j=Array.prototype.slice.call(arguments,2);return function(){var ie=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ie,j),p.apply(b,ie)}}return function(){return p.apply(b,arguments)}}function _(p,b,E){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:v,_.apply(null,arguments)}function w(p,b){var E=Array.prototype.slice.call(arguments,1);return function(){var j=E.slice();return j.push.apply(j,arguments),p.apply(this,j)}}function T(p,b){function E(){}E.prototype=b.prototype,p.aa=b.prototype,p.prototype=new E,p.prototype.constructor=p,p.Qb=function(j,ie,ce){for(var be=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)be[Je-2]=arguments[Je];return b.prototype[ie].apply(j,be)}}function R(p){const b=p.length;if(0<b){const E=Array(b);for(let j=0;j<b;j++)E[j]=p[j];return E}return[]}function C(p,b){for(let E=1;E<arguments.length;E++){const j=arguments[E];if(d(j)){const ie=p.length||0,ce=j.length||0;p.length=ie+ce;for(let be=0;be<ce;be++)p[ie+be]=j[be]}else p.push(j)}}class D{constructor(b,E){this.i=b,this.j=E,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function z(p){return/^[\s\xa0]*$/.test(p)}function B(){var p=u.navigator;return p&&(p=p.userAgent)?p:""}function U(p){return U[" "](p),p}U[" "]=function(){};var q=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function X(p,b,E){for(const j in p)b.call(E,p[j],j,p)}function I(p,b){for(const E in p)b.call(void 0,p[E],E,p)}function A(p){const b={};for(const E in p)b[E]=p[E];return b}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function H(p,b){let E,j;for(let ie=1;ie<arguments.length;ie++){j=arguments[ie];for(E in j)p[E]=j[E];for(let ce=0;ce<N.length;ce++)E=N[ce],Object.prototype.hasOwnProperty.call(j,E)&&(p[E]=j[E])}}function F(p){var b=1;p=p.split(":");const E=[];for(;0<b&&p.length;)E.push(p.shift()),b--;return p.length&&E.push(p.join(":")),E}function $(p){u.setTimeout(()=>{throw p},0)}function k(){var p=J;let b=null;return p.g&&(b=p.g,p.g=p.g.next,p.g||(p.h=null),b.next=null),b}class V{constructor(){this.h=this.g=null}add(b,E){const j=K.get();j.set(b,E),this.h?this.h.next=j:this.g=j,this.h=j}}var K=new D(()=>new L,p=>p.reset());class L{constructor(){this.next=this.g=this.h=null}set(b,E){this.h=b,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let G,ee=!1,J=new V,O=()=>{const p=u.Promise.resolve(void 0);G=()=>{p.then(Q)}};var Q=()=>{for(var p;p=k();){try{p.h.call(p.g)}catch(E){$(E)}var b=K;b.j(p),100>b.h&&(b.h++,p.next=b.g,b.g=p)}ee=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(p,b){this.type=p,this.g=this.target=b,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var re=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,b=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const E=()=>{};u.addEventListener("test",E,b),u.removeEventListener("test",E,b)}catch{}return p}();function he(p,b){if(W.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var E=this.type=p.type,j=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=b,b=p.relatedTarget){if(q){e:{try{U(b.nodeName);var ie=!0;break e}catch{}ie=!1}ie||(b=null)}}else E=="mouseover"?b=p.fromElement:E=="mouseout"&&(b=p.toElement);this.relatedTarget=b,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:ue[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&he.aa.h.call(this)}}T(he,W);var ue={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var ve="closure_listenable_"+(1e6*Math.random()|0),_e=0;function Ae(p,b,E,j,ie){this.listener=p,this.proxy=null,this.src=b,this.type=E,this.capture=!!j,this.ha=ie,this.key=++_e,this.da=this.fa=!1}function Ce(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function rt(p){this.src=p,this.g={},this.h=0}rt.prototype.add=function(p,b,E,j,ie){var ce=p.toString();p=this.g[ce],p||(p=this.g[ce]=[],this.h++);var be=De(p,b,j,ie);return-1<be?(b=p[be],E||(b.fa=!1)):(b=new Ae(b,this.src,ce,!!j,ie),b.fa=E,p.push(b)),b};function Ye(p,b){var E=b.type;if(E in p.g){var j=p.g[E],ie=Array.prototype.indexOf.call(j,b,void 0),ce;(ce=0<=ie)&&Array.prototype.splice.call(j,ie,1),ce&&(Ce(b),p.g[E].length==0&&(delete p.g[E],p.h--))}}function De(p,b,E,j){for(var ie=0;ie<p.length;++ie){var ce=p[ie];if(!ce.da&&ce.listener==b&&ce.capture==!!E&&ce.ha==j)return ie}return-1}var Le="closure_lm_"+(1e6*Math.random()|0),st={};function Ht(p,b,E,j,ie){if(Array.isArray(b)){for(var ce=0;ce<b.length;ce++)Ht(p,b[ce],E,j,ie);return null}return E=Hr(E),p&&p[ve]?p.K(b,E,f(j)?!!j.capture:!1,ie):je(p,b,E,!1,j,ie)}function je(p,b,E,j,ie,ce){if(!b)throw Error("Invalid event type");var be=f(ie)?!!ie.capture:!!ie,Je=Pn(p);if(Je||(p[Le]=Je=new rt(p)),E=Je.add(b,E,j,be,ce),E.proxy)return E;if(j=we(),E.proxy=j,j.src=p,j.listener=E,p.addEventListener)re||(ie=be),ie===void 0&&(ie=!1),p.addEventListener(b.toString(),j,ie);else if(p.attachEvent)p.attachEvent(Zt(b.toString()),j);else if(p.addListener&&p.removeListener)p.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return E}function we(){function p(E){return b.call(p.src,p.listener,E)}const b=er;return p}function Nt(p,b,E,j,ie){if(Array.isArray(b))for(var ce=0;ce<b.length;ce++)Nt(p,b[ce],E,j,ie);else j=f(j)?!!j.capture:!!j,E=Hr(E),p&&p[ve]?(p=p.i,b=String(b).toString(),b in p.g&&(ce=p.g[b],E=De(ce,E,j,ie),-1<E&&(Ce(ce[E]),Array.prototype.splice.call(ce,E,1),ce.length==0&&(delete p.g[b],p.h--)))):p&&(p=Pn(p))&&(b=p.g[b.toString()],p=-1,b&&(p=De(b,E,j,ie)),(E=-1<p?b[p]:null)&&Sn(E))}function Sn(p){if(typeof p!="number"&&p&&!p.da){var b=p.src;if(b&&b[ve])Ye(b.i,p);else{var E=p.type,j=p.proxy;b.removeEventListener?b.removeEventListener(E,j,p.capture):b.detachEvent?b.detachEvent(Zt(E),j):b.addListener&&b.removeListener&&b.removeListener(j),(E=Pn(b))?(Ye(E,p),E.h==0&&(E.src=null,b[Le]=null)):Ce(p)}}}function Zt(p){return p in st?st[p]:st[p]="on"+p}function er(p,b){if(p.da)p=!0;else{b=new he(b,this);var E=p.listener,j=p.ha||p.src;p.fa&&Sn(p),p=E.call(j,b)}return p}function Pn(p){return p=p[Le],p instanceof rt?p:null}var On="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hr(p){return typeof p=="function"?p:(p[On]||(p[On]=function(b){return p.handleEvent(b)}),p[On])}function at(){ne.call(this),this.i=new rt(this),this.M=this,this.F=null}T(at,ne),at.prototype[ve]=!0,at.prototype.removeEventListener=function(p,b,E,j){Nt(this,p,b,E,j)};function Ke(p,b){var E,j=p.F;if(j)for(E=[];j;j=j.F)E.push(j);if(p=p.M,j=b.type||b,typeof b=="string")b=new W(b,p);else if(b instanceof W)b.target=b.target||p;else{var ie=b;b=new W(j,p),H(b,ie)}if(ie=!0,E)for(var ce=E.length-1;0<=ce;ce--){var be=b.g=E[ce];ie=Ft(be,j,!0,b)&&ie}if(be=b.g=p,ie=Ft(be,j,!0,b)&&ie,ie=Ft(be,j,!1,b)&&ie,E)for(ce=0;ce<E.length;ce++)be=b.g=E[ce],ie=Ft(be,j,!1,b)&&ie}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var p=this.i,b;for(b in p.g){for(var E=p.g[b],j=0;j<E.length;j++)Ce(E[j]);delete p.g[b],p.h--}}this.F=null},at.prototype.K=function(p,b,E,j){return this.i.add(String(p),b,!1,E,j)},at.prototype.L=function(p,b,E,j){return this.i.add(String(p),b,!0,E,j)};function Ft(p,b,E,j){if(b=p.i.g[String(b)],!b)return!0;b=b.concat();for(var ie=!0,ce=0;ce<b.length;++ce){var be=b[ce];if(be&&!be.da&&be.capture==E){var Je=be.listener,en=be.ha||be.src;be.fa&&Ye(p.i,be),ie=Je.call(en,j)!==!1&&ie}}return ie&&!j.defaultPrevented}function xt(p,b,E){if(typeof p=="function")E&&(p=_(p,E));else if(p&&typeof p.handleEvent=="function")p=_(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:u.setTimeout(p,b||0)}function si(p){p.g=xt(()=>{p.g=null,p.i&&(p.i=!1,si(p))},p.l);const b=p.h;p.h=null,p.m.apply(null,b)}class $t extends ne{constructor(b,E){super(),this.m=b,this.l=E,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:si(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function on(p){ne.call(this),this.h=p,this.g={}}T(on,ne);var Vn=[];function Ln(p){X(p.g,function(b,E){this.g.hasOwnProperty(E)&&Sn(b)},p),p.g={}}on.prototype.N=function(){on.aa.N.call(this),Ln(this)},on.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var an=u.JSON.stringify,mn=u.JSON.parse,zn=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function ji(){}ji.prototype.h=null;function Bi(p){return p.h||(p.h=p.i())}function Fr(){}var tr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function br(){W.call(this,"d")}T(br,W);function nr(){W.call(this,"c")}T(nr,W);var wr={},ko=null;function oi(){return ko=ko||new at}wr.La="serverreachability";function Ts(p){W.call(this,wr.La,p)}T(Ts,W);function ai(p){const b=oi();Ke(b,new Ts(b))}wr.STAT_EVENT="statevent";function za(p,b){W.call(this,wr.STAT_EVENT,p),this.stat=b}T(za,W);function yt(p){const b=oi();Ke(b,new za(b,p))}wr.Ma="timingevent";function Lt(p,b){W.call(this,wr.Ma,p),this.size=b}T(Lt,W);function It(p,b){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},b)}function qn(){this.g=!0}qn.prototype.xa=function(){this.g=!1};function Mo(p,b,E,j,ie,ce){p.info(function(){if(p.g)if(ce)for(var be="",Je=ce.split("&"),en=0;en<Je.length;en++){var et=Je[en].split("=");if(1<et.length){var cn=et[0];et=et[1];var tn=cn.split("_");be=2<=tn.length&&tn[1]=="type"?be+(cn+"="+et+"&"):be+(cn+"=redacted&")}}else be=null;else be=ce;return"XMLHTTP REQ ("+j+") [attempt "+ie+"]: "+b+`
`+E+`
`+be})}function Cc(p,b,E,j,ie,ce,be){p.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+ie+"]: "+b+`
`+E+`
`+ce+" "+be})}function li(p,b,E,j){p.info(function(){return"XMLHTTP TEXT ("+b+"): "+Hi(p,E)+(j?" "+j:"")})}function Ua(p,b){p.info(function(){return"TIMEOUT: "+b})}qn.prototype.info=function(){};function Hi(p,b){if(!p.g)return b;if(!b)return null;try{var E=JSON.parse(b);if(E){for(p=0;p<E.length;p++)if(Array.isArray(E[p])){var j=E[p];if(!(2>j.length)){var ie=j[1];if(Array.isArray(ie)&&!(1>ie.length)){var ce=ie[0];if(ce!="noop"&&ce!="stop"&&ce!="close")for(var be=1;be<ie.length;be++)ie[be]=""}}}}return an(E)}catch{return b}}var ci={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Er={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xr;function Tr(){}T(Tr,ji),Tr.prototype.g=function(){return new XMLHttpRequest},Tr.prototype.i=function(){return{}},xr=new Tr;function gn(p,b,E,j){this.j=p,this.i=b,this.l=E,this.R=j||1,this.U=new on(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tt}function Tt(){this.i=null,this.g="",this.h=!1}var Po={},Ss={};function rr(p,b,E){p.L=1,p.v=zo(ir(b)),p.m=E,p.P=!0,$r(p,null)}function $r(p,b){p.F=Date.now(),Fi(p),p.A=ir(p.v);var E=p.A,j=p.R;Array.isArray(j)||(j=[String(j)]),Pc(E.i,"t",j),p.C=0,E=p.j.J,p.h=new Tt,p.g=dd(p.j,E?b:null,!p.m),0<p.O&&(p.M=new $t(_(p.Y,p,p.g),p.O)),b=p.U,E=p.g,j=p.ca;var ie="readystatechange";Array.isArray(ie)||(ie&&(Vn[0]=ie.toString()),ie=Vn);for(var ce=0;ce<ie.length;ce++){var be=Ht(E,ie[ce],j||b.handleEvent,!1,b.h||b);if(!be)break;b.g[be.key]=be}b=p.H?A(p.H):{},p.m?(p.u||(p.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,b)):(p.u="GET",p.g.ea(p.A,p.u,null,b)),ai(),Mo(p.i,p.u,p.A,p.l,p.R,p.m)}gn.prototype.ca=function(p){p=p.target;const b=this.M;b&&Nr(p)==3?b.j():this.Y(p)},gn.prototype.Y=function(p){try{if(p==this.g)e:{const tn=Nr(this.g);var b=this.g.Ba();const Wi=this.g.Z();if(!(3>tn)&&(tn!=3||this.g&&(this.h.h||this.g.oa()||id(this.g)))){this.J||tn!=4||b==7||(b==8||0>=Wi?ai(3):ai(2)),ui(this);var E=this.g.Z();this.X=E;t:if(Oo(this)){var j=id(this.g);p="";var ie=j.length,ce=Nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jt(this),Sr(this);var be="";break t}this.h.i=new u.TextDecoder}for(b=0;b<ie;b++)this.h.h=!0,p+=this.h.i.decode(j[b],{stream:!(ce&&b==ie-1)});j.length=0,this.h.g+=p,this.C=0,be=this.h.g}else be=this.g.oa();if(this.o=E==200,Cc(this.i,this.u,this.A,this.l,this.R,tn,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,en=this.g;if((Je=en.g?en.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(Je)){var et=Je;break t}}et=null}if(E=et)li(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hi(this,E);else{this.o=!1,this.s=3,yt(12),Jt(this),Sr(this);break e}}if(this.P){E=!0;let yn;for(;!this.J&&this.C<be.length;)if(yn=ja(this,be),yn==Ss){tn==4&&(this.s=4,yt(14),E=!1),li(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==Po){this.s=4,yt(15),li(this.i,this.l,be,"[Invalid Chunk]"),E=!1;break}else li(this.i,this.l,yn,null),hi(this,yn);if(Oo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tn!=4||be.length!=0||this.h.h||(this.s=1,yt(16),E=!1),this.o=this.o&&E,!E)li(this.i,this.l,be,"[Invalid Chunked Response]"),Jt(this),Sr(this);else if(0<be.length&&!this.W){this.W=!0;var cn=this.j;cn.g==this&&cn.ba&&!cn.M&&(cn.j.info("Great, no buffering proxy detected. Bytes received: "+be.length),Go(cn),cn.M=!0,yt(11))}}else li(this.i,this.l,be,null),hi(this,be);tn==4&&Jt(this),this.o&&!this.J&&(tn==4?cd(this.j,this):(this.o=!1,Fi(this)))}else Mm(this.g),E==400&&0<be.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),Jt(this),Sr(this)}}}catch{}finally{}};function Oo(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function ja(p,b){var E=p.C,j=b.indexOf(`
`,E);return j==-1?Ss:(E=Number(b.substring(E,j)),isNaN(E)?Po:(j+=1,j+E>b.length?Ss:(b=b.slice(j,j+E),p.C=j+E,b)))}gn.prototype.cancel=function(){this.J=!0,Jt(this)};function Fi(p){p.S=Date.now()+p.I,Ba(p,p.I)}function Ba(p,b){if(p.B!=null)throw Error("WatchDog timer not null");p.B=It(_(p.ba,p),b)}function ui(p){p.B&&(u.clearTimeout(p.B),p.B=null)}gn.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(Ua(this.i,this.A),this.L!=2&&(ai(),yt(17)),Jt(this),this.s=2,Sr(this)):Ba(this,this.S-p)};function Sr(p){p.j.G==0||p.J||cd(p.j,p)}function Jt(p){ui(p);var b=p.M;b&&typeof b.ma=="function"&&b.ma(),p.M=null,Ln(p.U),p.g&&(b=p.g,p.g=null,b.abort(),b.ma())}function hi(p,b){try{var E=p.j;if(E.G!=0&&(E.g==p||Nc(E.h,p))){if(!p.K&&Nc(E.h,p)&&E.G==3){try{var j=E.Da.g.parse(b)}catch{j=null}if(Array.isArray(j)&&j.length==3){var ie=j;if(ie[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<p.F)Za(E),Wa(E);else break e;Uc(E),yt(18)}}else E.za=ie[1],0<E.za-E.T&&37500>ie[2]&&E.F&&E.v==0&&!E.C&&(E.C=It(_(E.Za,E),6e3));if(1>=di(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Xi(E,11)}else if((p.K||E.g==p)&&Za(E),!z(b))for(ie=E.Da.g.parse(b),b=0;b<ie.length;b++){let et=ie[b];if(E.T=et[0],et=et[1],E.G==2)if(et[0]=="c"){E.K=et[1],E.ia=et[2];const cn=et[3];cn!=null&&(E.la=cn,E.j.info("VER="+E.la));const tn=et[4];tn!=null&&(E.Aa=tn,E.j.info("SVER="+E.Aa));const Wi=et[5];Wi!=null&&typeof Wi=="number"&&0<Wi&&(j=1.5*Wi,E.L=j,E.j.info("backChannelRequestTimeoutMs_="+j)),j=E;const yn=p.g;if(yn){const _i=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_i){var ce=j.h;ce.g||_i.indexOf("spdy")==-1&&_i.indexOf("quic")==-1&&_i.indexOf("h2")==-1||(ce.j=ce.l,ce.g=new Set,ce.h&&(Fa(ce,ce.h),ce.h=null))}if(j.D){const Bc=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;Bc&&(j.ya=Bc,dt(j.I,j.D,Bc))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-p.F,E.j.info("Handshake RTT: "+E.R+"ms")),j=E;var be=p;if(j.qa=hd(j,j.J?j.ia:null,j.W),be.K){Un(j.h,be);var Je=be,en=j.L;en&&(Je.I=en),Je.B&&(ui(Je),Fi(Je)),j.g=be}else ad(j);0<E.i.length&&Qa(E)}else et[0]!="stop"&&et[0]!="close"||Xi(E,7);else E.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Xi(E,7):Lc(E):et[0]!="noop"&&E.l&&E.l.ta(et),E.v=0)}}ai(4)}catch{}}var Ha=class{constructor(p,b){this.g=p,this.map=b}};function qr(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function As(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function di(p){return p.h?1:p.g?p.g.size:0}function Nc(p,b){return p.h?p.h==b:p.g?p.g.has(b):!1}function Fa(p,b){p.g?p.g.add(b):p.h=b}function Un(p,b){p.h&&p.h==b?p.h=null:p.g&&p.g.has(b)&&p.g.delete(b)}qr.prototype.cancel=function(){if(this.i=Ic(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Ic(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let b=p.i;for(const E of p.g.values())b=b.concat(E.D);return b}return R(p.i)}function Nm(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(d(p)){for(var b=[],E=p.length,j=0;j<E;j++)b.push(p[j]);return b}b=[],E=0;for(j in p)b[E++]=p[j];return b}function $a(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(d(p)||typeof p=="string"){var b=[];p=p.length;for(var E=0;E<p;E++)b.push(E);return b}b=[],E=0;for(const j in p)b[E++]=j;return b}}}function Dc(p,b){if(p.forEach&&typeof p.forEach=="function")p.forEach(b,void 0);else if(d(p)||typeof p=="string")Array.prototype.forEach.call(p,b,void 0);else for(var E=$a(p),j=Nm(p),ie=j.length,ce=0;ce<ie;ce++)b.call(void 0,j[ce],E&&E[ce],p)}var Vo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Im(p,b){if(p){p=p.split("&");for(var E=0;E<p.length;E++){var j=p[E].indexOf("="),ie=null;if(0<=j){var ce=p[E].substring(0,j);ie=p[E].substring(j+1)}else ce=p[E];b(ce,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function qt(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof qt){this.h=p.h,Lo(this,p.j),this.o=p.o,this.g=p.g,Rs(this,p.s),this.l=p.l;var b=p.i,E=new qi;E.i=b.i,b.g&&(E.g=new Map(b.g),E.h=b.h),$i(this,E),this.m=p.m}else p&&(b=String(p).match(Vo))?(this.h=!1,Lo(this,b[1]||"",!0),this.o=Ar(b[2]||""),this.g=Ar(b[3]||"",!0),Rs(this,b[4]),this.l=Ar(b[5]||"",!0),$i(this,b[6]||"",!0),this.m=Ar(b[7]||"")):(this.h=!1,this.i=new qi(null,this.h))}qt.prototype.toString=function(){var p=[],b=this.j;b&&p.push(Uo(b,kc,!0),":");var E=this.g;return(E||b=="file")&&(p.push("//"),(b=this.o)&&p.push(Uo(b,kc,!0),"@"),p.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&p.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&p.push("/"),p.push(Uo(E,E.charAt(0)=="/"?Dm:Mc,!0))),(E=this.i.toString())&&p.push("?",E),(E=this.m)&&p.push("#",Uo(E,qa)),p.join("")};function ir(p){return new qt(p)}function Lo(p,b,E){p.j=E?Ar(b,!0):b,p.j&&(p.j=p.j.replace(/:$/,""))}function Rs(p,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);p.s=b}else p.s=null}function $i(p,b,E){b instanceof qi?(p.i=b,nd(p.i,p.h)):(E||(b=Uo(b,km)),p.i=new qi(b,p.h))}function dt(p,b,E){p.i.set(b,E)}function zo(p){return dt(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Ar(p,b){return p?b?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Uo(p,b,E){return typeof p=="string"?(p=encodeURI(p).replace(b,td),E&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function td(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var kc=/[#\/\?@]/g,Mc=/[#\?:]/g,Dm=/[#\?]/g,km=/[#\?@]/g,qa=/#/g;function qi(p,b){this.h=this.g=null,this.i=p||null,this.j=!!b}function Rr(p){p.g||(p.g=new Map,p.h=0,p.i&&Im(p.i,function(b,E){p.add(decodeURIComponent(b.replace(/\+/g," ")),E)}))}t=qi.prototype,t.add=function(p,b){Rr(this),this.i=null,p=fi(this,p);var E=this.g.get(p);return E||this.g.set(p,E=[]),E.push(b),this.h+=1,this};function Gi(p,b){Rr(p),b=fi(p,b),p.g.has(b)&&(p.i=null,p.h-=p.g.get(b).length,p.g.delete(b))}function Yi(p,b){return Rr(p),b=fi(p,b),p.g.has(b)}t.forEach=function(p,b){Rr(this),this.g.forEach(function(E,j){E.forEach(function(ie){p.call(b,ie,j,this)},this)},this)},t.na=function(){Rr(this);const p=Array.from(this.g.values()),b=Array.from(this.g.keys()),E=[];for(let j=0;j<b.length;j++){const ie=p[j];for(let ce=0;ce<ie.length;ce++)E.push(b[j])}return E},t.V=function(p){Rr(this);let b=[];if(typeof p=="string")Yi(this,p)&&(b=b.concat(this.g.get(fi(this,p))));else{p=Array.from(this.g.values());for(let E=0;E<p.length;E++)b=b.concat(p[E])}return b},t.set=function(p,b){return Rr(this),this.i=null,p=fi(this,p),Yi(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[b]),this.h+=1,this},t.get=function(p,b){return p?(p=this.V(p),0<p.length?String(p[0]):b):b};function Pc(p,b,E){Gi(p,b),0<E.length&&(p.i=null,p.g.set(fi(p,b),R(E)),p.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],b=Array.from(this.g.keys());for(var E=0;E<b.length;E++){var j=b[E];const ce=encodeURIComponent(String(j)),be=this.V(j);for(j=0;j<be.length;j++){var ie=ce;be[j]!==""&&(ie+="="+encodeURIComponent(String(be[j]))),p.push(ie)}}return this.i=p.join("&")};function fi(p,b){return b=String(b),p.j&&(b=b.toLowerCase()),b}function nd(p,b){b&&!p.j&&(Rr(p),p.i=null,p.g.forEach(function(E,j){var ie=j.toLowerCase();j!=ie&&(Gi(this,j),Pc(this,ie,E))},p)),p.j=b}function jo(p,b){const E=new qn;if(u.Image){const j=new Image;j.onload=w(Cr,E,"TestLoadImage: loaded",!0,b,j),j.onerror=w(Cr,E,"TestLoadImage: error",!1,b,j),j.onabort=w(Cr,E,"TestLoadImage: abort",!1,b,j),j.ontimeout=w(Cr,E,"TestLoadImage: timeout",!1,b,j),u.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=p}else b(!1)}function Gr(p,b){const E=new qn,j=new AbortController,ie=setTimeout(()=>{j.abort(),Cr(E,"TestPingServer: timeout",!1,b)},1e4);fetch(p,{signal:j.signal}).then(ce=>{clearTimeout(ie),ce.ok?Cr(E,"TestPingServer: ok",!0,b):Cr(E,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(ie),Cr(E,"TestPingServer: error",!1,b)})}function Cr(p,b,E,j,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),j(E)}catch{}}function Bo(){this.g=new zn}function pi(p,b,E){const j=E||"";try{Dc(p,function(ie,ce){let be=ie;f(ie)&&(be=an(ie)),b.push(j+ce+"="+encodeURIComponent(be))})}catch(ie){throw b.push(j+"type="+encodeURIComponent("_badmap")),ie}}function Cs(p){this.l=p.Ub||null,this.j=p.eb||!1}T(Cs,ji),Cs.prototype.g=function(){return new Ki(this.l,this.j)},Cs.prototype.i=function(p){return function(){return p}}({});function Ki(p,b){at.call(this),this.D=p,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Ki,at),t=Ki.prototype,t.open=function(p,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=b,this.readyState=1,gi(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(b.body=p),(this.D||u).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mi(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,gi(this)),this.g&&(this.readyState=3,gi(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Oc(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function Oc(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var b=p.value?p.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!p.done}))&&(this.response=this.responseText+=b)}p.done?mi(this):gi(this),this.readyState==3&&Oc(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,mi(this))},t.Qa=function(p){this.g&&(this.response=p,mi(this))},t.ga=function(){this.g&&mi(this)};function mi(p){p.readyState=4,p.l=null,p.j=null,p.v=null,gi(p)}t.setRequestHeader=function(p,b){this.u.append(p,b)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],b=this.h.entries();for(var E=b.next();!E.done;)E=E.value,p.push(E[0]+": "+E[1]),E=b.next();return p.join(`\r
`)};function gi(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Vc(p){let b="";return X(p,function(E,j){b+=j,b+=":",b+=E,b+=`\r
`}),b}function ln(p,b,E){e:{for(j in E){var j=!1;break e}j=!0}j||(E=Vc(E),typeof p=="string"?E!=null&&encodeURIComponent(String(E)):dt(p,b,E))}function lt(p){at.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(lt,at);var Ga=/^https?$/i,Ho=["POST","PUT"];t=lt.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,b,E,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);b=b?b.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xr.g(),this.v=this.o?Bi(this.o):Bi(xr),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(b,String(p),!0),this.B=!1}catch(ce){rd(this,ce);return}if(p=E||"",E=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var ie in j)E.set(ie,j[ie]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const ce of j.keys())E.set(ce,j.get(ce));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(E.keys()).find(ce=>ce.toLowerCase()=="content-type"),ie=u.FormData&&p instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Ho,b,void 0))||j||ie||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ce,be]of E)this.g.setRequestHeader(ce,be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fo(this),this.u=!0,this.g.send(p),this.u=!1}catch(ce){rd(this,ce)}};function rd(p,b){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=b,p.m=5,Ya(p),yi(p)}function Ya(p){p.A||(p.A=!0,Ke(p,"complete"),Ke(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Ke(this,"complete"),Ke(this,"abort"),yi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yi(this,!0)),lt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ka(this):this.bb())},t.bb=function(){Ka(this)};function Ka(p){if(p.h&&typeof c<"u"&&(!p.v[1]||Nr(p)!=4||p.Z()!=2)){if(p.u&&Nr(p)==4)xt(p.Ea,0,p);else if(Ke(p,"readystatechange"),Nr(p)==4){p.h=!1;try{const be=p.Z();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var E;if(!(E=b)){var j;if(j=be===0){var ie=String(p.D).match(Vo)[1]||null;!ie&&u.self&&u.self.location&&(ie=u.self.location.protocol.slice(0,-1)),j=!Ga.test(ie?ie.toLowerCase():"")}E=j}if(E)Ke(p,"complete"),Ke(p,"success");else{p.m=6;try{var ce=2<Nr(p)?p.g.statusText:""}catch{ce=""}p.l=ce+" ["+p.Z()+"]",Ya(p)}}finally{yi(p)}}}}function yi(p,b){if(p.g){Fo(p);const E=p.g,j=p.v[0]?()=>{}:null;p.g=null,p.v=null,b||Ke(p,"ready");try{E.onreadystatechange=j}catch{}}}function Fo(p){p.I&&(u.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function Nr(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<Nr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var b=this.g.responseText;return p&&b.indexOf(p)==0&&(b=b.substring(p.length)),mn(b)}};function id(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Mm(p){const b={};p=(p.g&&2<=Nr(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<p.length;j++){if(z(p[j]))continue;var E=F(p[j]);const ie=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ce=b[ie]||[];b[ie]=ce,ce.push(E)}I(b,function(j){return j.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $o(p,b,E){return E&&E.internalChannelParams&&E.internalChannelParams[p]||b}function Xa(p){this.Aa=0,this.i=[],this.j=new qn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$o("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$o("baseRetryDelayMs",5e3,p),this.cb=$o("retryDelaySeedMs",1e4,p),this.Wa=$o("forwardChannelMaxRetries",2,p),this.wa=$o("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new qr(p&&p.concurrentRequestLimit),this.Da=new Bo,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Xa.prototype,t.la=8,t.G=1,t.connect=function(p,b,E,j){yt(0),this.W=p,this.H=b||{},E&&j!==void 0&&(this.H.OSID=E,this.H.OAID=j),this.F=this.X,this.I=hd(this,null,this.W),Qa(this)};function Lc(p){if(sd(p),p.G==3){var b=p.U++,E=ir(p.I);if(dt(E,"SID",p.K),dt(E,"RID",b),dt(E,"TYPE","terminate"),qo(p,E),b=new gn(p,p.j,b),b.L=2,b.v=zo(ir(E)),E=!1,u.navigator&&u.navigator.sendBeacon)try{E=u.navigator.sendBeacon(b.v.toString(),"")}catch{}!E&&u.Image&&(new Image().src=b.v,E=!0),E||(b.g=dd(b.j,null),b.g.ea(b.v)),b.F=Date.now(),Fi(b)}ud(p)}function Wa(p){p.g&&(Go(p),p.g.cancel(),p.g=null)}function sd(p){Wa(p),p.u&&(u.clearTimeout(p.u),p.u=null),Za(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&u.clearTimeout(p.s),p.s=null)}function Qa(p){if(!As(p.h)&&!p.s){p.s=!0;var b=p.Ga;G||O(),ee||(G(),ee=!0),J.add(b,p),p.B=0}}function Pm(p,b){return di(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=b.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=It(_(p.Ga,p,b),jc(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const ie=new gn(this,this.j,p);let ce=this.o;if(this.S&&(ce?(ce=A(ce),H(ce,this.S)):ce=this.S),this.m!==null||this.O||(ie.H=ce,ce=null),this.P)e:{for(var b=0,E=0;E<this.i.length;E++){t:{var j=this.i[E];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(b+=j,4096<b){b=E;break e}if(b===4096||E===this.i.length-1){b=E+1;break e}}b=1e3}else b=1e3;b=od(this,ie,b),E=ir(this.I),dt(E,"RID",p),dt(E,"CVER",22),this.D&&dt(E,"X-HTTP-Session-Id",this.D),qo(this,E),ce&&(this.O?b="headers="+encodeURIComponent(String(Vc(ce)))+"&"+b:this.m&&ln(E,this.m,ce)),Fa(this.h,ie),this.Ua&&dt(E,"TYPE","init"),this.P?(dt(E,"$req",b),dt(E,"SID","null"),ie.T=!0,rr(ie,E,null)):rr(ie,E,b),this.G=2}}else this.G==3&&(p?zc(this,p):this.i.length==0||As(this.h)||zc(this))};function zc(p,b){var E;b?E=b.l:E=p.U++;const j=ir(p.I);dt(j,"SID",p.K),dt(j,"RID",E),dt(j,"AID",p.T),qo(p,j),p.m&&p.o&&ln(j,p.m,p.o),E=new gn(p,p.j,E,p.B+1),p.m===null&&(E.H=p.o),b&&(p.i=b.D.concat(p.i)),b=od(p,E,1e3),E.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Fa(p.h,E),rr(E,j,b)}function qo(p,b){p.H&&X(p.H,function(E,j){dt(b,j,E)}),p.l&&Dc({},function(E,j){dt(b,j,E)})}function od(p,b,E){E=Math.min(p.i.length,E);var j=p.l?_(p.l.Na,p.l,p):null;e:{var ie=p.i;let ce=-1;for(;;){const be=["count="+E];ce==-1?0<E?(ce=ie[0].g,be.push("ofs="+ce)):ce=0:be.push("ofs="+ce);let Je=!0;for(let en=0;en<E;en++){let et=ie[en].g;const cn=ie[en].map;if(et-=ce,0>et)ce=Math.max(0,ie[en].g-100),Je=!1;else try{pi(cn,be,"req"+et+"_")}catch{j&&j(cn)}}if(Je){j=be.join("&");break e}}}return p=p.i.splice(0,E),b.D=p,j}function ad(p){if(!p.g&&!p.u){p.Y=1;var b=p.Fa;G||O(),ee||(G(),ee=!0),J.add(b,p),p.v=0}}function Uc(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=It(_(p.Fa,p),jc(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,ld(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=It(_(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),Wa(this),ld(this))};function Go(p){p.A!=null&&(u.clearTimeout(p.A),p.A=null)}function ld(p){p.g=new gn(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var b=ir(p.qa);dt(b,"RID","rpc"),dt(b,"SID",p.K),dt(b,"AID",p.T),dt(b,"CI",p.F?"0":"1"),!p.F&&p.ja&&dt(b,"TO",p.ja),dt(b,"TYPE","xmlhttp"),qo(p,b),p.m&&p.o&&ln(b,p.m,p.o),p.L&&(p.g.I=p.L);var E=p.g;p=p.ia,E.L=1,E.v=zo(ir(b)),E.m=null,E.P=!0,$r(E,p)}t.Za=function(){this.C!=null&&(this.C=null,Wa(this),Uc(this),yt(19))};function Za(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function cd(p,b){var E=null;if(p.g==b){Za(p),Go(p),p.g=null;var j=2}else if(Nc(p.h,b))E=b.D,Un(p.h,b),j=1;else return;if(p.G!=0){if(b.o)if(j==1){E=b.m?b.m.length:0,b=Date.now()-b.F;var ie=p.B;j=oi(),Ke(j,new Lt(j,E)),Qa(p)}else ad(p);else if(ie=b.s,ie==3||ie==0&&0<b.X||!(j==1&&Pm(p,b)||j==2&&Uc(p)))switch(E&&0<E.length&&(b=p.h,b.i=b.i.concat(E)),ie){case 1:Xi(p,5);break;case 4:Xi(p,10);break;case 3:Xi(p,6);break;default:Xi(p,2)}}}function jc(p,b){let E=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(E*=2),E*b}function Xi(p,b){if(p.j.info("Error code "+b),b==2){var E=_(p.fb,p),j=p.Xa;const ie=!j;j=new qt(j||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Lo(j,"https"),zo(j),ie?jo(j.toString(),E):Gr(j.toString(),E)}else yt(2);p.G=0,p.l&&p.l.sa(b),ud(p),sd(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function ud(p){if(p.G=0,p.ka=[],p.l){const b=Ic(p.h);(b.length!=0||p.i.length!=0)&&(C(p.ka,b),C(p.ka,p.i),p.h.i.length=0,R(p.i),p.i.length=0),p.l.ra()}}function hd(p,b,E){var j=E instanceof qt?ir(E):new qt(E);if(j.g!="")b&&(j.g=b+"."+j.g),Rs(j,j.s);else{var ie=u.location;j=ie.protocol,b=b?b+"."+ie.hostname:ie.hostname,ie=+ie.port;var ce=new qt(null);j&&Lo(ce,j),b&&(ce.g=b),ie&&Rs(ce,ie),E&&(ce.l=E),j=ce}return E=p.D,b=p.ya,E&&b&&dt(j,E,b),dt(j,"VER",p.la),qo(p,j),j}function dd(p,b,E){if(b&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=p.Ca&&!p.pa?new lt(new Cs({eb:E})):new lt(p.pa),b.Ha(p.J),b}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fd(){}t=fd.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ja(){}Ja.prototype.g=function(p,b){return new jn(p,b)};function jn(p,b){at.call(this),this.g=new Xa(b),this.l=p,this.h=b&&b.messageUrlParams||null,p=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(p?p["X-WebChannel-Content-Type"]=b.messageContentType:p={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(p?p["X-WebChannel-Client-Profile"]=b.va:p={"X-WebChannel-Client-Profile":b.va}),this.g.S=p,(p=b&&b.Sb)&&!z(p)&&(this.g.m=p),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!z(b)&&(this.g.D=b,p=this.h,p!==null&&b in p&&(p=this.h,b in p&&delete p[b])),this.j=new vi(this)}T(jn,at),jn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jn.prototype.close=function(){Lc(this.g)},jn.prototype.o=function(p){var b=this.g;if(typeof p=="string"){var E={};E.__data__=p,p=E}else this.u&&(E={},E.__data__=an(p),p=E);b.i.push(new Ha(b.Ya++,p)),b.G==3&&Qa(b)},jn.prototype.N=function(){this.g.l=null,delete this.j,Lc(this.g),delete this.g,jn.aa.N.call(this)};function pd(p){br.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var b=p.__sm__;if(b){e:{for(const E in b){p=E;break e}p=void 0}(this.i=p)&&(p=this.i,b=b!==null&&p in b?b[p]:void 0),this.data=b}else this.data=p}T(pd,br);function md(){nr.call(this),this.status=1}T(md,nr);function vi(p){this.g=p}T(vi,fd),vi.prototype.ua=function(){Ke(this.g,"a")},vi.prototype.ta=function(p){Ke(this.g,new pd(p))},vi.prototype.sa=function(p){Ke(this.g,new md)},vi.prototype.ra=function(){Ke(this.g,"b")},Ja.prototype.createWebChannel=Ja.prototype.g,jn.prototype.send=jn.prototype.o,jn.prototype.open=jn.prototype.m,jn.prototype.close=jn.prototype.close,TC=function(){return new Ja},xC=function(){return oi()},EC=wr,Ky={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ci.NO_ERROR=0,ci.TIMEOUT=8,ci.HTTP_ERROR=6,Yf=ci,Er.COMPLETE="complete",wC=Er,Fr.EventType=tr,tr.OPEN="a",tr.CLOSE="b",tr.ERROR="c",tr.MESSAGE="d",at.prototype.listen=at.prototype.K,qu=Fr,lt.prototype.listenOnce=lt.prototype.L,lt.prototype.getLastError=lt.prototype.Ka,lt.prototype.getLastErrorCode=lt.prototype.Ba,lt.prototype.getStatus=lt.prototype.Z,lt.prototype.getResponseJson=lt.prototype.Oa,lt.prototype.getResponseText=lt.prototype.oa,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Ha,bC=lt}).apply(typeof Df<"u"?Df:typeof self<"u"?self:typeof window<"u"?window:{});const CT="@firebase/firestore",NT="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nn.UNAUTHENTICATED=new Nn(null),Nn.GOOGLE_CREDENTIALS=new Nn("google-credentials-uid"),Nn.FIRST_PARTY=new Nn("first-party-uid"),Nn.MOCK_USER=new Nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vc="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=new o_("@firebase/firestore");function Vl(){return Ra.logLevel}function Ee(t,...e){if(Ra.logLevel<=Qe.DEBUG){const n=e.map(u_);Ra.debug(`Firestore (${vc}): ${t}`,...n)}}function _s(t,...e){if(Ra.logLevel<=Qe.ERROR){const n=e.map(u_);Ra.error(`Firestore (${vc}): ${t}`,...n)}}function lc(t,...e){if(Ra.logLevel<=Qe.WARN){const n=e.map(u_);Ra.warn(`Firestore (${vc}): ${t}`,...n)}}function u_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,SC(t,r,n)}function SC(t,e,n){let r=`FIRESTORE (${vc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw _s(r),new Error(r)}function ct(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||SC(e,s,r)}function Ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Ui{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class K9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Nn.UNAUTHENTICATED))}shutdown(){}}class X9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class W9{constructor(e){this.t=e,this.currentUser=Nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ct(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let a=new mo;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new mo,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const d=a;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},u=d=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new mo)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct(typeof r.accessToken=="string",31837,{l:r}),new AC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string",2055,{h:e}),new Nn(e)}}class Q9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Z9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Q9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class IT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class J9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ct(this.o===void 0,3512);const r=a=>{a.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,Ee("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new IT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ct(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new IT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ez(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=ez(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function $e(t,e){return t<e?-1:t>e?1:0}function Xy(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return $e(r,s);{const a=RC(),c=tz(a.encode(DT(t,n)),a.encode(DT(e,n)));return c!==0?c:$e(r,s)}}n+=r>65535?2:1}return $e(t.length,e.length)}function DT(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function tz(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return $e(t[n],e[n]);return $e(t.length,e.length)}function cc(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=-62135596800,MT=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*MT);return new bt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new xe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<kT)throw new xe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/MT}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-kT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(e){return new ze(e)}static min(){return new ze(new bt(0,0))}static max(){return new ze(new bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="__name__";class Ri{constructor(e,n,r){n===void 0?n=0:n>e.length&&Pe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Pe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ri.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ri?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=Ri.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return $e(e.length,n.length)}static compareSegments(e,n){const r=Ri.isNumericId(e),s=Ri.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ri.extractNumericId(e).compare(Ri.extractNumericId(n)):Xy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return po.fromString(e.substring(4,e.length-2))}}class _t extends Ri{construct(e,n,r){return new _t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new _t(n)}static emptyPath(){return new _t([])}}const nz=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xn extends Ri{construct(e,n,r){return new xn(e,n,r)}static isValidIdentifier(e){return nz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===PT}static keyField(){return new xn([PT])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new xe(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new xe(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new xe(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else u==="`"?(c=!c,s++):u!=="."||c?(r+=u,s++):(a(),s++)}if(a(),c)throw new xe(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xn(n)}static emptyPath(){return new xn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(_t.fromString(e))}static fromName(e){return new Ne(_t.fromString(e).popFirst(5))}static empty(){return new Ne(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _t.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new _t(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh=-1;function rz(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ze.fromTimestamp(r===1e9?new bt(n+1,0):new bt(n,r));return new _o(s,Ne.empty(),e)}function iz(t){return new _o(t.readTime,t.key,yh)}class _o{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new _o(ze.min(),Ne.empty(),yh)}static max(){return new _o(ze.max(),Ne.empty(),yh)}}function sz(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ne.comparator(t.documentKey,e.documentKey),n!==0?n:$e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oz="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class az{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _c(t){if(t.code!==ge.FAILED_PRECONDITION||t.message!==oz)throw t;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ye((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ye?n:ye.resolve(n)}catch(n){return ye.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ye.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ye.reject(n)}static resolve(e){return new ye((n,r)=>{n(e)})}static reject(e){return new ye((n,r)=>{r(e)})}static waitFor(e){return new ye((n,r)=>{let s=0,a=0,c=!1;e.forEach(u=>{++s,u.next(()=>{++a,c&&a===s&&n()},d=>r(d))}),c=!0,a===s&&n()})}static or(e){let n=ye.resolve(!1);for(const r of e)n=n.next(s=>s?ye.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new ye((r,s)=>{const a=e.length,c=new Array(a);let u=0;for(let d=0;d<a;d++){const f=d;n(e[f]).next(m=>{c[f]=m,++u,u===a&&r(c)},m=>s(m))}})}static doWhile(e,n){return new ye((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function lz(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function bc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}nm.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_=-1;function rm(t){return t==null}function Ep(t){return t===0&&1/t==-1/0}function cz(t){return typeof t=="number"&&Number.isInteger(t)&&!Ep(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="";function uz(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=OT(e)),e=hz(t.get(n),e);return OT(e)}function hz(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case NC:n+="";break;default:n+=a}}return n}function OT(t){return t+NC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ro(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function IC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n){this.comparator=e,this.root=n||En.EMPTY}insert(e,n){return new Ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,En.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,En.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kf(this.root,e,this.comparator,!1)}getReverseIterator(){return new kf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kf(this.root,e,this.comparator,!0)}}class kf{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class En{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??En.RED,this.left=s??En.EMPTY,this.right=a??En.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new En(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return En.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return En.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,En.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,En.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Pe(27949);return e+(this.isRed()?0:1)}}En.EMPTY=null,En.RED=!0,En.BLACK=!1;En.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe(57766)}get value(){throw Pe(16141)}get color(){throw Pe(16727)}get left(){throw Pe(29726)}get right(){throw Pe(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new En(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new LT(this.data.getIterator())}getIteratorFrom(e){return new LT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof sn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new sn(this.comparator);return n.data=e,n}}class LT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.fields=e,e.sort(xn.comparator)}static empty(){return new mr([])}unionWith(e){let n=new sn(xn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new mr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return cc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new DC("Invalid base64 string: "+a):a}}(e);return new Tn(n)}static fromUint8Array(e){const n=function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a}(e);return new Tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tn.EMPTY_BYTE_STRING=new Tn("");const dz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bo(t){if(ct(!!t,39018),typeof t=="string"){let e=0;const n=dz.exec(t);if(ct(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Bt(t.seconds),nanos:Bt(t.nanos)}}function Bt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function wo(t){return typeof t=="string"?Tn.fromBase64String(t):Tn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC="server_timestamp",MC="__type__",PC="__previous_value__",OC="__local_write_time__";function d_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[MC])===null||n===void 0?void 0:n.stringValue)===kC}function im(t){const e=t.mapValue.fields[PC];return d_(e)?im(e):e}function vh(t){const e=bo(t.mapValue.fields[OC].timestampValue);return new bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(e,n,r,s,a,c,u,d,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=m}}const xp="(default)";class _h{constructor(e,n){this.projectId=e,this.database=n||xp}static empty(){return new _h("","")}get isDefaultDatabase(){return this.database===xp}isEqual(e){return e instanceof _h&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC="__type__",pz="__max__",Mf={mapValue:{}},LC="__vector__",Tp="value";function Eo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?d_(t)?4:gz(t)?9007199254740991:mz(t)?10:11:Pe(28295,{value:t})}function Li(t,e){if(t===e)return!0;const n=Eo(t);if(n!==Eo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vh(t).isEqual(vh(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=bo(s.timestampValue),u=bo(a.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return wo(s.bytesValue).isEqual(wo(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return Bt(s.geoPointValue.latitude)===Bt(a.geoPointValue.latitude)&&Bt(s.geoPointValue.longitude)===Bt(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Bt(s.integerValue)===Bt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=Bt(s.doubleValue),u=Bt(a.doubleValue);return c===u?Ep(c)===Ep(u):isNaN(c)&&isNaN(u)}return!1}(t,e);case 9:return cc(t.arrayValue.values||[],e.arrayValue.values||[],Li);case 10:case 11:return function(s,a){const c=s.mapValue.fields||{},u=a.mapValue.fields||{};if(VT(c)!==VT(u))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(u[d]===void 0||!Li(c[d],u[d])))return!1;return!0}(t,e);default:return Pe(52216,{left:t})}}function bh(t,e){return(t.values||[]).find(n=>Li(n,e))!==void 0}function uc(t,e){if(t===e)return 0;const n=Eo(t),r=Eo(e);if(n!==r)return $e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return $e(t.booleanValue,e.booleanValue);case 2:return function(a,c){const u=Bt(a.integerValue||a.doubleValue),d=Bt(c.integerValue||c.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(t,e);case 3:return zT(t.timestampValue,e.timestampValue);case 4:return zT(vh(t),vh(e));case 5:return Xy(t.stringValue,e.stringValue);case 6:return function(a,c){const u=wo(a),d=wo(c);return u.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(a,c){const u=a.split("/"),d=c.split("/");for(let f=0;f<u.length&&f<d.length;f++){const m=$e(u[f],d[f]);if(m!==0)return m}return $e(u.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,c){const u=$e(Bt(a.latitude),Bt(c.latitude));return u!==0?u:$e(Bt(a.longitude),Bt(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return UT(t.arrayValue,e.arrayValue);case 10:return function(a,c){var u,d,f,m;const v=a.fields||{},_=c.fields||{},w=(u=v[Tp])===null||u===void 0?void 0:u.arrayValue,T=(d=_[Tp])===null||d===void 0?void 0:d.arrayValue,R=$e(((f=w?.values)===null||f===void 0?void 0:f.length)||0,((m=T?.values)===null||m===void 0?void 0:m.length)||0);return R!==0?R:UT(w,T)}(t.mapValue,e.mapValue);case 11:return function(a,c){if(a===Mf.mapValue&&c===Mf.mapValue)return 0;if(a===Mf.mapValue)return 1;if(c===Mf.mapValue)return-1;const u=a.fields||{},d=Object.keys(u),f=c.fields||{},m=Object.keys(f);d.sort(),m.sort();for(let v=0;v<d.length&&v<m.length;++v){const _=Xy(d[v],m[v]);if(_!==0)return _;const w=uc(u[d[v]],f[m[v]]);if(w!==0)return w}return $e(d.length,m.length)}(t.mapValue,e.mapValue);default:throw Pe(23264,{Pe:n})}}function zT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return $e(t,e);const n=bo(t),r=bo(e),s=$e(n.seconds,r.seconds);return s!==0?s:$e(n.nanos,r.nanos)}function UT(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=uc(n[s],r[s]);if(a)return a}return $e(n.length,r.length)}function hc(t){return Wy(t)}function Wy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=bo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return wo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=Wy(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const c of r)a?a=!1:s+=",",s+=`${c}:${Wy(n.fields[c])}`;return s+"}"}(t.mapValue):Pe(61005,{value:t})}function Kf(t){switch(Eo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=im(t);return e?16+Kf(e):16;case 5:return 2*t.stringValue.length;case 6:return wo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+Kf(a),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ro(r.fields,(a,c)=>{s+=a.length+Kf(c)}),s}(t.mapValue);default:throw Pe(13486,{value:t})}}function jT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Qy(t){return!!t&&"integerValue"in t}function f_(t){return!!t&&"arrayValue"in t}function BT(t){return!!t&&"nullValue"in t}function HT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xf(t){return!!t&&"mapValue"in t}function mz(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[VC])===null||n===void 0?void 0:n.stringValue)===LC}function Wu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ro(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Wu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Wu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function gz(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===pz}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.value=e}static empty(){return new Wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Xf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wu(n)}setAll(e){let n=xn.emptyPath(),r={},s=[];e.forEach((c,u)=>{if(!n.isImmediateParentOf(u)){const d=this.getFieldsMap(n);this.applyChanges(d,r,s),r={},s=[],n=u.popLast()}c?r[u.lastSegment()]=Wu(c):s.push(u.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());Xf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Li(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Xf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ro(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new Wn(Wu(this.value))}}function zC(t){const e=[];return Ro(t.fields,(n,r)=>{const s=new xn([n]);if(Xf(r)){const a=zC(r.mapValue).fields;if(a.length===0)e.push(s);else for(const c of a)e.push(s.child(c))}else e.push(s)}),new mr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n,r,s,a,c,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=c,this.documentState=u}static newInvalidDocument(e){return new In(e,0,ze.min(),ze.min(),ze.min(),Wn.empty(),0)}static newFoundDocument(e,n,r,s){return new In(e,1,n,ze.min(),r,s,0)}static newNoDocument(e,n){return new In(e,2,n,ze.min(),ze.min(),Wn.empty(),0)}static newUnknownDocument(e,n){return new In(e,3,n,ze.min(),ze.min(),Wn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof In&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new In(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,n){this.position=e,this.inclusive=n}}function FT(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],c=t.position[s];if(a.field.isKeyField()?r=Ne.comparator(Ne.fromName(c.referenceValue),n.key):r=uc(c,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function $T(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Li(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,n="asc"){this.field=e,this.dir=n}}function yz(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{}class Qt extends UC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new _z(e,n,r):n==="array-contains"?new Ez(e,r):n==="in"?new xz(e,r):n==="not-in"?new Tz(e,r):n==="array-contains-any"?new Sz(e,r):new Qt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new bz(e,r):new wz(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(uc(n,this.value)):n!==null&&Eo(this.value)===Eo(n)&&this.matchesComparison(uc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ti extends UC{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new ti(e,n)}matches(e){return jC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function jC(t){return t.op==="and"}function BC(t){return vz(t)&&jC(t)}function vz(t){for(const e of t.filters)if(e instanceof ti)return!1;return!0}function Zy(t){if(t instanceof Qt)return t.field.canonicalString()+t.op.toString()+hc(t.value);if(BC(t))return t.filters.map(e=>Zy(e)).join(",");{const e=t.filters.map(n=>Zy(n)).join(",");return`${t.op}(${e})`}}function HC(t,e){return t instanceof Qt?function(r,s){return s instanceof Qt&&r.op===s.op&&r.field.isEqual(s.field)&&Li(r.value,s.value)}(t,e):t instanceof ti?function(r,s){return s instanceof ti&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,c,u)=>a&&HC(c,s.filters[u]),!0):!1}(t,e):void Pe(19439)}function FC(t){return t instanceof Qt?function(n){return`${n.field.canonicalString()} ${n.op} ${hc(n.value)}`}(t):t instanceof ti?function(n){return n.op.toString()+" {"+n.getFilters().map(FC).join(" ,")+"}"}(t):"Filter"}class _z extends Qt{constructor(e,n,r){super(e,n,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const n=Ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class bz extends Qt{constructor(e,n){super(e,"in",n),this.keys=$C("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class wz extends Qt{constructor(e,n){super(e,"not-in",n),this.keys=$C("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function $C(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ne.fromName(r.referenceValue))}class Ez extends Qt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return f_(n)&&bh(n.arrayValue,this.value)}}class xz extends Qt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&bh(this.value.arrayValue,n)}}class Tz extends Qt{constructor(e,n){super(e,"not-in",n)}matches(e){if(bh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!bh(this.value.arrayValue,n)}}class Sz extends Qt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!f_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>bh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(e,n=null,r=[],s=[],a=null,c=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=c,this.endAt=u,this.Ie=null}}function qT(t,e=null,n=[],r=[],s=null,a=null,c=null){return new Az(t,e,n,r,s,a,c)}function p_(t){const e=Ue(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Zy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),rm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>hc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>hc(r)).join(",")),e.Ie=n}return e.Ie}function m_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!yz(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!HC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$T(t.startAt,e.startAt)&&$T(t.endAt,e.endAt)}function Jy(t){return Ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n=null,r=[],s=[],a=null,c="F",u=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=c,this.startAt=u,this.endAt=d,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Rz(t,e,n,r,s,a,c,u){return new wc(t,e,n,r,s,a,c,u)}function qC(t){return new wc(t)}function GT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function GC(t){return t.collectionGroup!==null}function Qu(t){const e=Ue(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new sn(xn.comparator);return c.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new wh(a,r))}),n.has(xn.keyField().canonicalString())||e.Ee.push(new wh(xn.keyField(),r))}return e.Ee}function Ii(t){const e=Ue(t);return e.de||(e.de=Cz(e,Qu(t))),e.de}function Cz(t,e){if(t.limitType==="F")return qT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new wh(s.field,a)});const n=t.endAt?new Sp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Sp(t.startAt.position,t.startAt.inclusive):null;return qT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ev(t,e){const n=t.filters.concat([e]);return new wc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function tv(t,e,n){return new wc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function sm(t,e){return m_(Ii(t),Ii(e))&&t.limitType===e.limitType}function YC(t){return`${p_(Ii(t))}|lt:${t.limitType}`}function Ll(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>FC(s)).join(", ")}]`),rm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>hc(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>hc(s)).join(",")),`Target(${r})`}(Ii(t))}; limitType=${t.limitType})`}function om(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ne.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of Qu(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(c,u,d){const f=FT(c,u,d);return c.inclusive?f<=0:f<0}(r.startAt,Qu(r),s)||r.endAt&&!function(c,u,d){const f=FT(c,u,d);return c.inclusive?f>=0:f>0}(r.endAt,Qu(r),s))}(t,e)}function Nz(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function KC(t){return(e,n)=>{let r=!1;for(const s of Qu(t)){const a=Iz(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function Iz(t,e,n){const r=t.field.isKeyField()?Ne.comparator(e.key,n.key):function(a,c,u){const d=c.data.field(a),f=u.data.field(a);return d!==null&&f!==null?uc(d,f):Pe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Pe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ro(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return IC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dz=new Ct(Ne.comparator);function bs(){return Dz}const XC=new Ct(Ne.comparator);function Gu(...t){let e=XC;for(const n of t)e=e.insert(n.key,n);return e}function WC(t){let e=XC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ma(){return Zu()}function QC(){return Zu()}function Zu(){return new Ma(t=>t.toString(),(t,e)=>t.isEqual(e))}const kz=new Ct(Ne.comparator),Mz=new sn(Ne.comparator);function Ze(...t){let e=Mz;for(const n of t)e=e.add(n);return e}const Pz=new sn($e);function Oz(){return Pz}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ep(e)?"-0":e}}function ZC(t){return{integerValue:""+t}}function Vz(t,e){return cz(e)?ZC(e):g_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(){this._=void 0}}function Lz(t,e,n){return t instanceof Ap?function(s,a){const c={fields:{[MC]:{stringValue:kC},[OC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&d_(a)&&(a=im(a)),a&&(c.fields[PC]=a),{mapValue:c}}(n,e):t instanceof Eh?eN(t,e):t instanceof xh?tN(t,e):function(s,a){const c=JC(s,a),u=YT(c)+YT(s.Re);return Qy(c)&&Qy(s.Re)?ZC(u):g_(s.serializer,u)}(t,e)}function zz(t,e,n){return t instanceof Eh?eN(t,e):t instanceof xh?tN(t,e):n}function JC(t,e){return t instanceof Rp?function(r){return Qy(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Ap extends am{}class Eh extends am{constructor(e){super(),this.elements=e}}function eN(t,e){const n=nN(e);for(const r of t.elements)n.some(s=>Li(s,r))||n.push(r);return{arrayValue:{values:n}}}class xh extends am{constructor(e){super(),this.elements=e}}function tN(t,e){let n=nN(e);for(const r of t.elements)n=n.filter(s=>!Li(s,r));return{arrayValue:{values:n}}}class Rp extends am{constructor(e,n){super(),this.serializer=e,this.Re=n}}function YT(t){return Bt(t.integerValue||t.doubleValue)}function nN(t){return f_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Uz(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Eh&&s instanceof Eh||r instanceof xh&&s instanceof xh?cc(r.elements,s.elements,Li):r instanceof Rp&&s instanceof Rp?Li(r.Re,s.Re):r instanceof Ap&&s instanceof Ap}(t.transform,e.transform)}class jz{constructor(e,n){this.version=e,this.transformResults=n}}class gr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gr}static exists(e){return new gr(void 0,e)}static updateTime(e){return new gr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class lm{}function rN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new cm(t.key,gr.none()):new Bh(t.key,t.data,gr.none());{const n=t.data,r=Wn.empty();let s=new sn(xn.comparator);for(let a of e.fields)if(!s.has(a)){let c=n.field(a);c===null&&a.length>1&&(a=a.popLast(),c=n.field(a)),c===null?r.delete(a):r.set(a,c),s=s.add(a)}return new Co(t.key,r,new mr(s.toArray()),gr.none())}}function Bz(t,e,n){t instanceof Bh?function(s,a,c){const u=s.value.clone(),d=XT(s.fieldTransforms,a,c.transformResults);u.setAll(d),a.convertToFoundDocument(c.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Co?function(s,a,c){if(!Wf(s.precondition,a))return void a.convertToUnknownDocument(c.version);const u=XT(s.fieldTransforms,a,c.transformResults),d=a.data;d.setAll(iN(s)),d.setAll(u),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(t,e,n):function(s,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function Ju(t,e,n,r){return t instanceof Bh?function(a,c,u,d){if(!Wf(a.precondition,c))return u;const f=a.value.clone(),m=WT(a.fieldTransforms,d,c);return f.setAll(m),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof Co?function(a,c,u,d){if(!Wf(a.precondition,c))return u;const f=WT(a.fieldTransforms,d,c),m=c.data;return m.setAll(iN(a)),m.setAll(f),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(v=>v.field))}(t,e,n,r):function(a,c,u){return Wf(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u}(t,e,n)}function Hz(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=JC(r.transform,s||null);a!=null&&(n===null&&(n=Wn.empty()),n.set(r.field,a))}return n||null}function KT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&cc(r,s,(a,c)=>Uz(a,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bh extends lm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Co extends lm{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function iN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function XT(t,e,n){const r=new Map;ct(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const a=t[s],c=a.transform,u=e.data.field(a.field);r.set(a.field,zz(c,u,n[s]))}return r}function WT(t,e,n){const r=new Map;for(const s of t){const a=s.transform,c=n.data.field(s.field);r.set(s.field,Lz(a,c,e))}return r}class cm extends lm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fz extends lm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&Bz(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ju(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ju(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=QC();return this.mutations.forEach(s=>{const a=e.get(s.key),c=a.overlayedDocument;let u=this.applyToLocalView(c,a.mutatedFields);u=n.has(s.key)?null:u;const d=rN(c,u);d!==null&&r.set(s.key,d),c.isValidDocument()||c.convertToNoDocument(ze.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ze())}isEqual(e){return this.batchId===e.batchId&&cc(this.mutations,e.mutations,(n,r)=>KT(n,r))&&cc(this.baseMutations,e.baseMutations,(n,r)=>KT(n,r))}}class y_{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ct(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return kz}();const a=e.mutations;for(let c=0;c<a.length;c++)s=s.insert(a[c].key,r[c].version);return new y_(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qz{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gz{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt,nt;function Yz(t){switch(t){case ge.OK:return Pe(64938);case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0;default:return Pe(15467,{code:t})}}function sN(t){if(t===void 0)return _s("GRPC error has no .code"),ge.UNKNOWN;switch(t){case Kt.OK:return ge.OK;case Kt.CANCELLED:return ge.CANCELLED;case Kt.UNKNOWN:return ge.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return ge.INTERNAL;case Kt.UNAVAILABLE:return ge.UNAVAILABLE;case Kt.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Kt.NOT_FOUND:return ge.NOT_FOUND;case Kt.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Kt.ABORTED:return ge.ABORTED;case Kt.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Kt.DATA_LOSS:return ge.DATA_LOSS;default:return Pe(39323,{code:t})}}(nt=Kt||(Kt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kz=new po([4294967295,4294967295],0);function QT(t){const e=RC().encode(t),n=new _C;return n.update(e),new Uint8Array(n.digest())}function ZT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new po([n,r],0),new po([s,a],0)]}class v_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Yu(`Invalid padding: ${n}`);if(r<0)throw new Yu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Yu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Yu(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=po.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(po.fromNumber(r)));return s.compare(Kz)===1&&(s=new po([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=QT(e),[r,s]=ZT(n);for(let a=0;a<this.hashCount;a++){const c=this.we(r,s,a);if(!this.be(c))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new v_(a,s,n);return r.forEach(u=>c.insert(u)),c}insert(e){if(this.pe===0)return;const n=QT(e),[r,s]=ZT(n);for(let a=0;a<this.hashCount;a++){const c=this.we(r,s,a);this.Se(c)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Yu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Hh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new um(ze.min(),s,new Ct($e),bs(),Ze())}}class Hh{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Hh(r,n,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class oN{constructor(e,n){this.targetId=e,this.Ce=n}}class aN{constructor(e,n,r=Tn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class JT{constructor(){this.Fe=0,this.Me=eS(),this.xe=Tn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ze(),n=Ze(),r=Ze();return this.Me.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Pe(38017,{changeType:a})}}),new Hh(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=eS()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ct(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Xz{constructor(e){this.ze=e,this.je=new Map,this.He=bs(),this.Je=Pf(),this.Ye=Pf(),this.Ze=new Ct($e)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:Pe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const a=s.target;if(Jy(a))if(r===0){const c=new Ne(a.path);this.tt(n,c,In.newNoDocument(c,ze.min()))}else ct(r===1,20013,{expectedCount:r});else{const c=this.ut(n);if(c!==r){const u=this.ct(e),d=u?this.lt(u,e,c):1;if(d!==0){this.st(n);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,f)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let c,u;try{c=wo(r).toUint8Array()}catch(d){if(d instanceof DC)return lc("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new v_(c,s,a)}catch(d){return lc(d instanceof Yu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.pe===0?null:u}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const c=this.ze.Pt(),u=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.tt(n,a,null),s++)}),s}It(e){const n=new Map;this.je.forEach((a,c)=>{const u=this._t(c);if(u){if(a.current&&Jy(u.target)){const d=new Ne(u.target.path);this.Et(d).has(c)||this.dt(c,d)||this.tt(c,d,In.newNoDocument(d,e))}a.Le&&(n.set(c,a.qe()),a.Qe())}});let r=Ze();this.Ye.forEach((a,c)=>{let u=!0;c.forEachWhile(d=>{const f=this._t(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(a))}),this.He.forEach((a,c)=>c.setReadTime(e));const s=new um(e,n,this.Ze,this.He,r);return this.He=bs(),this.Je=Pf(),this.Ye=Pf(),this.Ze=new Ct($e),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new JT,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new sn($e),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new sn($e),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||Ee("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new JT),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Pf(){return new Ct(Ne.comparator)}function eS(){return new Ct(Ne.comparator)}const Wz={asc:"ASCENDING",desc:"DESCENDING"},Qz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Zz={and:"AND",or:"OR"};class Jz{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function nv(t,e){return t.useProto3Json||rm(e)?e:{value:e}}function Cp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function eU(t,e){return Cp(t,e.toTimestamp())}function Di(t){return ct(!!t,49232),ze.fromTimestamp(function(n){const r=bo(n);return new bt(r.seconds,r.nanos)}(t))}function __(t,e){return rv(t,e).canonicalString()}function rv(t,e){const n=function(s){return new _t(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function cN(t){const e=_t.fromString(t);return ct(pN(e),10190,{key:e.toString()}),e}function iv(t,e){return __(t.databaseId,e.path)}function ty(t,e){const n=cN(e);if(n.get(1)!==t.databaseId.projectId)throw new xe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new xe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ne(hN(n))}function uN(t,e){return __(t.databaseId,e)}function tU(t){const e=cN(t);return e.length===4?_t.emptyPath():hN(e)}function sv(t){return new _t(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hN(t){return ct(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function tS(t,e,n){return{name:iv(t,e),fields:n.value.mapValue.fields}}function nU(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Pe(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(f,m){return f.useProto3Json?(ct(m===void 0||typeof m=="string",58123),Tn.fromBase64String(m||"")):(ct(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Tn.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&function(f){const m=f.code===void 0?ge.UNKNOWN:sN(f.code);return new xe(m,f.message||"")}(c);n=new aN(r,s,a,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ty(t,r.document.name),a=Di(r.document.updateTime),c=r.document.createTime?Di(r.document.createTime):ze.min(),u=new Wn({mapValue:{fields:r.document.fields}}),d=In.newFoundDocument(s,a,c,u),f=r.targetIds||[],m=r.removedTargetIds||[];n=new Qf(f,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ty(t,r.document),a=r.readTime?Di(r.readTime):ze.min(),c=In.newNoDocument(s,a),u=r.removedTargetIds||[];n=new Qf([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ty(t,r.document),a=r.removedTargetIds||[];n=new Qf([],a,s,null)}else{if(!("filter"in e))return Pe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,c=new Gz(s,a),u=r.targetId;n=new oN(u,c)}}return n}function rU(t,e){let n;if(e instanceof Bh)n={update:tS(t,e.key,e.value)};else if(e instanceof cm)n={delete:iv(t,e.key)};else if(e instanceof Co)n={update:tS(t,e.key,e.data),updateMask:dU(e.fieldMask)};else{if(!(e instanceof Fz))return Pe(16599,{ft:e.type});n={verify:iv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const u=c.transform;if(u instanceof Ap)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Eh)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof xh)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Rp)return{fieldPath:c.field.canonicalString(),increment:u.Re};throw Pe(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:eU(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Pe(27497)}(t,e.precondition)),n}function iU(t,e){return t&&t.length>0?(ct(e!==void 0,14353),t.map(n=>function(s,a){let c=s.updateTime?Di(s.updateTime):Di(a);return c.isEqual(ze.min())&&(c=Di(a)),new jz(c,s.transformResults||[])}(n,e))):[]}function sU(t,e){return{documents:[uN(t,e.path)]}}function oU(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=uN(t,s);const a=function(f){if(f.length!==0)return fN(ti.create(f,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const c=function(f){if(f.length!==0)return f.map(m=>function(_){return{field:zl(_.field),direction:cU(_.dir)}}(m))}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const u=nv(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{gt:n,parent:s}}function aU(t){let e=tU(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ct(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let a=[];n.where&&(a=function(v){const _=dN(v);return _ instanceof ti&&BC(_)?_.getFilters():[_]}(n.where));let c=[];n.orderBy&&(c=function(v){return v.map(_=>function(T){return new wh(Ul(T.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(_))}(n.orderBy));let u=null;n.limit&&(u=function(v){let _;return _=typeof v=="object"?v.value:v,rm(_)?null:_}(n.limit));let d=null;n.startAt&&(d=function(v){const _=!!v.before,w=v.values||[];return new Sp(w,_)}(n.startAt));let f=null;return n.endAt&&(f=function(v){const _=!v.before,w=v.values||[];return new Sp(w,_)}(n.endAt)),Rz(e,s,c,a,u,"F",d,f)}function lU(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function dN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ul(n.unaryFilter.field);return Qt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ul(n.unaryFilter.field);return Qt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ul(n.unaryFilter.field);return Qt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ul(n.unaryFilter.field);return Qt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pe(61313);default:return Pe(60726)}}(t):t.fieldFilter!==void 0?function(n){return Qt.create(Ul(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pe(58110);default:return Pe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ti.create(n.compositeFilter.filters.map(r=>dN(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Pe(1026)}}(n.compositeFilter.op))}(t):Pe(30097,{filter:t})}function cU(t){return Wz[t]}function uU(t){return Qz[t]}function hU(t){return Zz[t]}function zl(t){return{fieldPath:t.canonicalString()}}function Ul(t){return xn.fromServerFormat(t.fieldPath)}function fN(t){return t instanceof Qt?function(n){if(n.op==="=="){if(HT(n.value))return{unaryFilter:{field:zl(n.field),op:"IS_NAN"}};if(BT(n.value))return{unaryFilter:{field:zl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(HT(n.value))return{unaryFilter:{field:zl(n.field),op:"IS_NOT_NAN"}};if(BT(n.value))return{unaryFilter:{field:zl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zl(n.field),op:uU(n.op),value:n.value}}}(t):t instanceof ti?function(n){const r=n.getFilters().map(s=>fN(s));return r.length===1?r[0]:{compositeFilter:{op:hU(n.op),filters:r}}}(t):Pe(54877,{filter:t})}function dU(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function pN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n,r,s,a=ze.min(),c=ze.min(),u=Tn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new lo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new lo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e){this.wt=e}}function pU(t){const e=aU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?tv(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU{constructor(){this.Cn=new gU}addToCollectionParentIndex(e,n){return this.Cn.add(n),ye.resolve()}getCollectionParents(e,n){return ye.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ye.resolve()}deleteFieldIndex(e,n){return ye.resolve()}deleteAllFieldIndexes(e){return ye.resolve()}createTargetIndexes(e,n){return ye.resolve()}getDocumentsMatchingTarget(e,n){return ye.resolve(null)}getIndexType(e,n){return ye.resolve(0)}getFieldIndexes(e,n){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}getMinOffset(e,n){return ye.resolve(_o.min())}getMinOffsetFromCollectionGroup(e,n){return ye.resolve(_o.min())}updateCollectionGroup(e,n,r){return ye.resolve()}updateIndexEntries(e,n){return ye.resolve()}}class gU{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new sn(_t.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new sn(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mN=41943040;class Xn{static withCacheSize(e){return new Xn(e,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn.DEFAULT_COLLECTION_PERCENTILE=10,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xn.DEFAULT=new Xn(mN,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xn.DISABLED=new Xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new dc(0)}static lr(){return new dc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="LruGarbageCollector",yU=1048576;function iS([t,e],[n,r]){const s=$e(t,n);return s===0?$e(e,r):s}class vU{constructor(e){this.Er=e,this.buffer=new sn(iS),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();iS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class _U{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Ee(rS,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){bc(n)?Ee(rS,"Ignoring IndexedDB error during garbage collection: ",n):await _c(n)}await this.mr(3e5)})}}class bU{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ye.resolve(nm.le);const r=new vU(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(nS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nS):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,a,c,u,d,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,c=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(r=v,u=Date.now(),this.removeTargets(e,r,n))).next(v=>(a=v,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(f=Date.now(),Vl()<=Qe.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-m}ms
	Determined least recently used ${s} in `+(u-c)+`ms
	Removed ${a} targets in `+(d-u)+`ms
	Removed ${v} documents in `+(f-d)+`ms
Total Duration: ${f-m}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:v})))}}function wU(t,e){return new bU(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{constructor(){this.changes=new Ma(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,In.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ye.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ju(r.mutation,s,mr.empty(),bt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ze()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ze()){const s=ma();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let c=Gu();return a.forEach((u,d)=>{c=c.insert(u,d.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const r=ma();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ze()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((c,u)=>{n.set(c,u)})})}computeViews(e,n,r,s){let a=bs();const c=Zu(),u=function(){return Zu()}();return n.forEach((d,f)=>{const m=r.get(f.key);s.has(f.key)&&(m===void 0||m.mutation instanceof Co)?a=a.insert(f.key,f):m!==void 0?(c.set(f.key,m.mutation.getFieldMask()),Ju(m.mutation,f,m.mutation.getFieldMask(),bt.now())):c.set(f.key,mr.empty())}),this.recalculateAndSaveOverlays(e,a).next(d=>(d.forEach((f,m)=>c.set(f,m)),n.forEach((f,m)=>{var v;return u.set(f,new xU(m,(v=c.get(f))!==null&&v!==void 0?v:null))}),u))}recalculateAndSaveOverlays(e,n){const r=Zu();let s=new Ct((c,u)=>c-u),a=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const u of c)u.keys().forEach(d=>{const f=n.get(d);if(f===null)return;let m=r.get(d)||mr.empty();m=u.applyToLocalView(f,m),r.set(d,m);const v=(s.get(u.batchId)||Ze()).add(d);s=s.insert(u.batchId,v)})}).next(()=>{const c=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,m=d.value,v=QC();m.forEach(_=>{if(!a.has(_)){const w=rN(n.get(_),r.get(_));w!==null&&v.set(_,w),a=a.add(_)}}),c.push(this.documentOverlayCache.saveOverlays(e,f,v))}return ye.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(c){return Ne.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):GC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const c=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):ye.resolve(ma());let u=yh,d=a;return c.next(f=>ye.forEach(f,(m,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),a.get(m)?ye.resolve():this.remoteDocumentCache.getEntry(e,m).next(_=>{d=d.insert(m,_)}))).next(()=>this.populateOverlays(e,f,a)).next(()=>this.computeViews(e,d,f,Ze())).next(m=>({batchId:u,changes:WC(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ne(n)).next(r=>{let s=Gu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let c=Gu();return this.indexManager.getCollectionParents(e,a).next(u=>ye.forEach(u,d=>{const f=function(v,_){return new wc(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next(m=>{m.forEach((v,_)=>{c=c.insert(v,_)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(c=>{a.forEach((d,f)=>{const m=f.getKey();c.get(m)===null&&(c=c.insert(m,In.newInvalidDocument(m)))});let u=Gu();return c.forEach((d,f)=>{const m=a.get(d);m!==void 0&&Ju(m.mutation,f,mr.empty(),bt.now()),om(n,f)&&(u=u.insert(d,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return ye.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Di(s.createTime)}}(n)),ye.resolve()}getNamedQuery(e,n){return ye.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:pU(s.bundledQuery),readTime:Di(s.readTime)}}(n)),ye.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(){this.overlays=new Ct(Ne.comparator),this.Qr=new Map}getOverlay(e,n){return ye.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ma();return ye.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.St(e,n,a)}),ye.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Qr.delete(r)),ye.resolve()}getOverlaysForCollection(e,n,r){const s=ma(),a=n.length+1,c=new Ne(n.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===a&&d.largestBatchId>r&&s.set(d.getKey(),d)}return ye.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new Ct((f,m)=>f-m);const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let m=a.get(f.largestBatchId);m===null&&(m=ma(),a=a.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const u=ma(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,m)=>u.set(f,m)),!(u.size()>=s)););return ye.resolve(u)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const c=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new qz(n,r));let a=this.Qr.get(n);a===void 0&&(a=Ze(),this.Qr.set(n,a)),this.Qr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(e){return ye.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ye.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(){this.$r=new sn(fn.Ur),this.Kr=new sn(fn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new fn(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new fn(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new Ne(new _t([])),r=new fn(n,e),s=new fn(n,e+1),a=[];return this.Kr.forEachInRange([r,s],c=>{this.zr(c),a.push(c.key)}),a}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Ne(new _t([])),r=new fn(n,e),s=new fn(n,e+1);let a=Ze();return this.Kr.forEachInRange([r,s],c=>{a=a.add(c.key)}),a}containsKey(e){const n=new fn(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class fn{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Ne.comparator(e.key,n.key)||$e(e.Zr,n.Zr)}static Wr(e,n){return $e(e.Zr,n.Zr)||Ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new sn(fn.Ur)}checkEmpty(e){return ye.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new $z(a,n,r,s);this.mutationQueue.push(c);for(const u of s)this.Xr=this.Xr.add(new fn(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return ye.resolve(c)}lookupMutationBatch(e,n){return ye.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),a=s<0?0:s;return ye.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(this.mutationQueue.length===0?h_:this.nr-1)}getAllMutationBatches(e){return ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new fn(n,0),s=new fn(n,Number.POSITIVE_INFINITY),a=[];return this.Xr.forEachInRange([r,s],c=>{const u=this.ei(c.Zr);a.push(u)}),ye.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new sn($e);return n.forEach(s=>{const a=new fn(s,0),c=new fn(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([a,c],u=>{r=r.add(u.Zr)})}),ye.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;Ne.isDocumentKey(a)||(a=a.child(""));const c=new fn(new Ne(a),0);let u=new sn($e);return this.Xr.forEachWhile(d=>{const f=d.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(u=u.add(d.Zr)),!0)},c),ye.resolve(this.ni(u))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ct(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return ye.forEach(n.mutations,s=>{const a=new fn(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new fn(n,0),s=this.Xr.firstAfterOrEqual(r);return ye.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ye.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(e){this.ii=e,this.docs=function(){return new Ct(Ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,c=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ye.resolve(r?r.document.mutableCopy():In.newInvalidDocument(n))}getEntries(e,n){let r=bs();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():In.newInvalidDocument(s))}),ye.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=bs();const c=n.path,u=new Ne(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:m}}=d.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||sz(iz(m),r)<=0||(s.has(m.key)||om(n,m))&&(a=a.insert(m.key,m.mutableCopy()))}return ye.resolve(a)}getAllFromCollectionGroup(e,n,r,s){Pe(9500)}si(e,n){return ye.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new IU(this)}getSize(e){return ye.resolve(this.size)}}class IU extends EU{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),ye.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(e){this.persistence=e,this.oi=new Ma(n=>p_(n),m_),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this._i=0,this.ai=new b_,this.targetCount=0,this.ui=dc.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),ye.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new dc(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,ye.resolve()}updateTargetData(e,n){return this.Tr(n),ye.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.oi.forEach((c,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.oi.delete(c),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),ye.waitFor(a).next(()=>s)}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return ye.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),ye.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(c=>{a.push(s.markPotentiallyOrphaned(e,c))}),ye.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),ye.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return ye.resolve(r)}containsKey(e,n){return ye.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,n){this.ci={},this.overlays={},this.li=new nm(0),this.hi=!1,this.hi=!0,this.Pi=new RU,this.referenceDelegate=e(this),this.Ti=new DU(this),this.indexManager=new mU,this.remoteDocumentCache=function(s){return new NU(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new fU(n),this.Ei=new SU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new AU,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new CU(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){Ee("MemoryPersistence","Starting transaction:",e);const s=new kU(this.li.next());return this.referenceDelegate.di(),r(s).next(a=>this.referenceDelegate.Ai(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ri(e,n){return ye.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class kU extends az{constructor(e){super(),this.currentSequenceNumber=e}}class w_{constructor(e){this.persistence=e,this.Vi=new b_,this.mi=null}static fi(e){return new w_(e)}get gi(){if(this.mi)return this.mi;throw Pe(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),ye.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),ye.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),ye.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.gi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.gi,r=>{const s=Ne.fromPath(r);return this.pi(e,s).next(a=>{a||n.removeEntry(s,ze.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return ye.or([()=>ye.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Np{constructor(e,n){this.persistence=e,this.yi=new Ma(r=>uz(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=wU(this,n)}static fi(e,n){return new Np(e,n)}di(){}Ai(e){return ye.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return ye.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(a=>a?ye.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.si(e,c=>this.Dr(e,c,n).next(u=>{u||(r++,a.removeEntry(c,ze.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),ye.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),ye.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),ye.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),ye.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Kf(e.data.value)),n}Dr(e,n,r){return ye.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return ye.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=Ze(),s=Ze();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new E_(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return oL()?8:lz(Mn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.ws(e,n).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.bs(e,n,s,r).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new MU;return this.Ss(e,n,c).next(u=>{if(a.result=u,this.fs)return this.Ds(e,n,c,u.size)})}).next(()=>a.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(Vl()<=Qe.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",Ll(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ye.resolve()):(Vl()<=Qe.DEBUG&&Ee("QueryEngine","Query:",Ll(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(Vl()<=Qe.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",Ll(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ii(n))):ye.resolve())}ws(e,n){if(GT(n))return ye.resolve(null);let r=Ii(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=tv(n,null,"F"),r=Ii(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=Ze(...a);return this.ys.getDocuments(e,c).next(u=>this.indexManager.getMinOffset(e,r).next(d=>{const f=this.vs(n,u);return this.Cs(n,f,c,d.readTime)?this.ws(e,tv(n,null,"F")):this.Fs(e,f,n,d)}))})))}bs(e,n,r,s){return GT(n)||s.isEqual(ze.min())?ye.resolve(null):this.ys.getDocuments(e,r).next(a=>{const c=this.vs(n,a);return this.Cs(n,c,r,s)?ye.resolve(null):(Vl()<=Qe.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ll(n)),this.Fs(e,c,n,rz(s,yh)).next(u=>u))})}vs(e,n){let r=new sn(KC(e));return n.forEach((s,a)=>{om(e,a)&&(r=r.add(a))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,n,r){return Vl()<=Qe.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",Ll(n)),this.ys.getDocumentsMatchingQuery(e,n,_o.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="LocalStore",OU=3e8;class VU{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new Ct($e),this.Os=new Ma(a=>p_(a),m_),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TU(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function LU(t,e,n,r){return new VU(t,e,n,r)}async function yN(t,e){const n=Ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],u=[];let d=Ze();for(const f of s){c.push(f.batchId);for(const m of f.mutations)d=d.add(m.key)}for(const f of a){u.push(f.batchId);for(const m of f.mutations)d=d.add(m.key)}return n.localDocuments.getDocuments(r,d).next(f=>({ks:f,removedBatchIds:c,addedBatchIds:u}))})})}function zU(t,e){const n=Ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.Bs.newChangeBuffer({trackRemovals:!0});return function(u,d,f,m){const v=f.batch,_=v.keys();let w=ye.resolve();return _.forEach(T=>{w=w.next(()=>m.getEntry(d,T)).next(R=>{const C=f.docVersions.get(T);ct(C!==null,48541),R.version.compareTo(C)<0&&(v.applyToRemoteDocument(R,f),R.isValidDocument()&&(R.setReadTime(f.commitVersion),m.addEntry(R)))})}),w.next(()=>u.mutationQueue.removeMutationBatch(d,v))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let d=Ze();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function vN(t){const e=Ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function UU(t,e){const n=Ue(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const u=[];e.targetChanges.forEach((m,v)=>{const _=s.get(v);if(!_)return;u.push(n.Ti.removeMatchingKeys(a,m.removedDocuments,v).next(()=>n.Ti.addMatchingKeys(a,m.addedDocuments,v)));let w=_.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(v)!==null?w=w.withResumeToken(Tn.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):m.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(m.resumeToken,r)),s=s.insert(v,w),function(R,C,D){return R.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=OU?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0}(_,w,m)&&u.push(n.Ti.updateTargetData(a,w))});let d=bs(),f=Ze();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(a,m))}),u.push(jU(a,c,e.documentUpdates).next(m=>{d=m.qs,f=m.Qs})),!r.isEqual(ze.min())){const m=n.Ti.getLastRemoteSnapshotVersion(a).next(v=>n.Ti.setTargetsMetadata(a,a.currentSequenceNumber,r));u.push(m)}return ye.waitFor(u).next(()=>c.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,d,f)).next(()=>d)}).then(a=>(n.xs=s,a))}function jU(t,e,n){let r=Ze(),s=Ze();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let c=bs();return n.forEach((u,d)=>{const f=a.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(ze.min())?(e.removeEntry(u,d.readTime),c=c.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),c=c.insert(u,d)):Ee(x_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)}),{qs:c,Qs:s}})}function BU(t,e){const n=Ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=h_),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function HU(t,e){const n=Ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(a=>a?(s=a,ye.resolve(s)):n.Ti.allocateTargetId(r).next(c=>(s=new lo(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function ov(t,e,n){const r=Ue(t),s=r.xs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,s))}catch(c){if(!bc(c))throw c;Ee(x_,`Failed to update sequence numbers for target ${e}: ${c}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function sS(t,e,n){const r=Ue(t);let s=ze.min(),a=Ze();return r.persistence.runTransaction("Execute query","readwrite",c=>function(d,f,m){const v=Ue(d),_=v.Os.get(m);return _!==void 0?ye.resolve(v.xs.get(_)):v.Ti.getTargetData(f,m)}(r,c,Ii(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(c,u.targetId).next(d=>{a=d})}).next(()=>r.Ms.getDocumentsMatchingQuery(c,e,n?s:ze.min(),n?a:Ze())).next(u=>(FU(r,Nz(e),u),{documents:u,$s:a})))}function FU(t,e,n){let r=t.Ns.get(e)||ze.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Ns.set(e,r)}class oS{constructor(){this.activeTargetIds=Oz()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $U{constructor(){this.xo=new oS,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new oS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="ConnectivityMonitor";class lS{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Ee(aS,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Ee(aS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Of=null;function av(){return Of===null?Of=function(){return 268435456+Math.round(2147483648*Math.random())}():Of++,"0x"+Of.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="RestConnection",GU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YU{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===xp?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,a){const c=av(),u=this.jo(e,n.toUriEncodedString());Ee(ny,`Sending RPC '${e}' ${c}:`,u,r);const d={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(d,s,a);const{host:f}=new URL(u),m=ka(f);return this.Jo(e,u,d,r,m).then(v=>(Ee(ny,`Received RPC '${e}' ${c}: `,v),v),v=>{throw lc(ny,`RPC '${e}' ${c} failed with error: `,v,"url: ",u,"request:",r),v})}Yo(e,n,r,s,a,c){return this.zo(e,n,r,s,a)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+vc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}jo(e,n){const r=GU[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="WebChannelConnection";class XU extends YU{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,a){const c=av();return new Promise((u,d)=>{const f=new bC;f.setWithCredentials(!0),f.listenOnce(wC.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Yf.NO_ERROR:const v=f.getResponseJson();Ee(Cn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),u(v);break;case Yf.TIMEOUT:Ee(Cn,`RPC '${e}' ${c} timed out`),d(new xe(ge.DEADLINE_EXCEEDED,"Request time out"));break;case Yf.HTTP_ERROR:const _=f.getStatus();if(Ee(Cn,`RPC '${e}' ${c} failed with status:`,_,"response text:",f.getResponseText()),_>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const T=w?.error;if(T&&T.status&&T.message){const R=function(D){const z=D.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(z)>=0?z:ge.UNKNOWN}(T.status);d(new xe(R,T.message))}else d(new xe(ge.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new xe(ge.UNAVAILABLE,"Connection failed."));break;default:Pe(9055,{h_:e,streamId:c,P_:f.getLastErrorCode(),T_:f.getLastError()})}}finally{Ee(Cn,`RPC '${e}' ${c} completed.`)}});const m=JSON.stringify(s);Ee(Cn,`RPC '${e}' ${c} sending request:`,s),f.send(n,"POST",m,r,15)})}I_(e,n,r){const s=av(),a=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=TC(),u=xC(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Ho(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const m=a.join("");Ee(Cn,`Creating RPC '${e}' stream ${s}: ${m}`,d);const v=c.createWebChannel(m,d);this.E_(v);let _=!1,w=!1;const T=new KU({Zo:C=>{w?Ee(Cn,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(_||(Ee(Cn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),_=!0),Ee(Cn,`RPC '${e}' stream ${s} sending:`,C),v.send(C))},Xo:()=>v.close()}),R=(C,D,z)=>{C.listen(D,B=>{try{z(B)}catch(U){setTimeout(()=>{throw U},0)}})};return R(v,qu.EventType.OPEN,()=>{w||(Ee(Cn,`RPC '${e}' stream ${s} transport opened.`),T.__())}),R(v,qu.EventType.CLOSE,()=>{w||(w=!0,Ee(Cn,`RPC '${e}' stream ${s} transport closed`),T.u_(),this.d_(v))}),R(v,qu.EventType.ERROR,C=>{w||(w=!0,lc(Cn,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),T.u_(new xe(ge.UNAVAILABLE,"The operation could not be completed")))}),R(v,qu.EventType.MESSAGE,C=>{var D;if(!w){const z=C.data[0];ct(!!z,16349);const B=z,U=B?.error||((D=B[0])===null||D===void 0?void 0:D.error);if(U){Ee(Cn,`RPC '${e}' stream ${s} received error:`,U);const q=U.status;let X=function(N){const H=Kt[N];if(H!==void 0)return sN(H)}(q),I=U.message;X===void 0&&(X=ge.INTERNAL,I="Unknown error status: "+q+" with message "+U.message),w=!0,T.u_(new xe(X,I)),v.close()}else Ee(Cn,`RPC '${e}' stream ${s} received:`,z),T.c_(z)}}),R(u,EC.STAT_EVENT,C=>{C.stat===Ky.PROXY?Ee(Cn,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===Ky.NOPROXY&&Ee(Cn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{T.a_()},0),T}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function ry(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(t){return new Jz(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,n,r=1e3,s=1.5,a=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=s,this.V_=a,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&Ee("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="PersistentStream";class bN{constructor(e,n,r,s,a,c,u,d){this.xi=e,this.S_=r,this.D_=s,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new _N(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===ge.RESOURCE_EXHAUSTED?(_s(n.toString()),_s("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{e(()=>{const s=new xe(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return Ee(cS,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(Ee(cS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class WU extends bN{constructor(e,n,r,s,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,c),this.serializer=a}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=nU(this.serializer,e),r=function(a){if(!("targetChange"in a))return ze.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?ze.min():c.readTime?Di(c.readTime):ze.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=sv(this.serializer),n.addTarget=function(a,c){let u;const d=c.target;if(u=Jy(d)?{documents:sU(a,d)}:{query:oU(a,d).gt},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=lN(a,c.resumeToken);const f=nv(a,c.expectedCount);f!==null&&(u.expectedCount=f)}else if(c.snapshotVersion.compareTo(ze.min())>0){u.readTime=Cp(a,c.snapshotVersion.toTimestamp());const f=nv(a,c.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const r=lU(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=sv(this.serializer),n.removeTarget=e,this.Q_(n)}}class QU extends bN{constructor(e,n,r,s,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,c),this.serializer=a}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return ct(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ct(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ct(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=iU(e.writeResults,e.commitTime),r=Di(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=sv(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>rU(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{}class JU extends ZU{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new xe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.zo(e,rv(n,r),s,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new xe(ge.UNKNOWN,a.toString())})}Yo(e,n,r,s,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,u])=>this.connection.Yo(e,rv(n,r),s,c,u,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new xe(ge.UNKNOWN,c.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class e7{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(_s(n),this.ua=!1):Ee("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca="RemoteStore";class t7{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=a,this.Ra.No(c=>{r.enqueueAndForget(async()=>{Pa(this)&&(Ee(Ca,"Restarting streams for network reachability change."),await async function(d){const f=Ue(d);f.da.add(4),await Fh(f),f.Va.set("Unknown"),f.da.delete(4),await dm(f)}(this))})}),this.Va=new e7(r,s)}}async function dm(t){if(Pa(t))for(const e of t.Aa)await e(!0)}async function Fh(t){for(const e of t.Aa)await e(!1)}function wN(t,e){const n=Ue(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),R_(n)?A_(n):Ec(n).N_()&&S_(n,e))}function T_(t,e){const n=Ue(t),r=Ec(n);n.Ea.delete(e),r.N_()&&EN(n,e),n.Ea.size===0&&(r.N_()?r.k_():Pa(n)&&n.Va.set("Unknown"))}function S_(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ec(t).Z_(e)}function EN(t,e){t.ma.Ke(e),Ec(t).X_(e)}function A_(t){t.ma=new Xz({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Ec(t).start(),t.Va.ca()}function R_(t){return Pa(t)&&!Ec(t).O_()&&t.Ea.size>0}function Pa(t){return Ue(t).da.size===0}function xN(t){t.ma=void 0}async function n7(t){t.Va.set("Online")}async function r7(t){t.Ea.forEach((e,n)=>{S_(t,e)})}async function i7(t,e){xN(t),R_(t)?(t.Va.Pa(e),A_(t)):t.Va.set("Unknown")}async function s7(t,e,n){if(t.Va.set("Online"),e instanceof aN&&e.state===2&&e.cause)try{await async function(s,a){const c=a.cause;for(const u of a.targetIds)s.Ea.has(u)&&(await s.remoteSyncer.rejectListen(u,c),s.Ea.delete(u),s.ma.removeTarget(u))}(t,e)}catch(r){Ee(Ca,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ip(t,r)}else if(e instanceof Qf?t.ma.Xe(e):e instanceof oN?t.ma.ot(e):t.ma.nt(e),!n.isEqual(ze.min()))try{const r=await vN(t.localStore);n.compareTo(r)>=0&&await function(a,c){const u=a.ma.It(c);return u.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const m=a.Ea.get(f);m&&a.Ea.set(f,m.withResumeToken(d.resumeToken,c))}}),u.targetMismatches.forEach((d,f)=>{const m=a.Ea.get(d);if(!m)return;a.Ea.set(d,m.withResumeToken(Tn.EMPTY_BYTE_STRING,m.snapshotVersion)),EN(a,d);const v=new lo(m.target,d,f,m.sequenceNumber);S_(a,v)}),a.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){Ee(Ca,"Failed to raise snapshot:",r),await Ip(t,r)}}async function Ip(t,e,n){if(!bc(e))throw e;t.da.add(1),await Fh(t),t.Va.set("Offline"),n||(n=()=>vN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ee(Ca,"Retrying IndexedDB access"),await n(),t.da.delete(1),await dm(t)})}function TN(t,e){return e().catch(n=>Ip(t,n,e))}async function fm(t){const e=Ue(t),n=xo(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:h_;for(;o7(e);)try{const s=await BU(e.localStore,r);if(s===null){e.Ia.length===0&&n.k_();break}r=s.batchId,a7(e,s)}catch(s){await Ip(e,s)}SN(e)&&AN(e)}function o7(t){return Pa(t)&&t.Ia.length<10}function a7(t,e){t.Ia.push(e);const n=xo(t);n.N_()&&n.ea&&n.ta(e.mutations)}function SN(t){return Pa(t)&&!xo(t).O_()&&t.Ia.length>0}function AN(t){xo(t).start()}async function l7(t){xo(t).ia()}async function c7(t){const e=xo(t);for(const n of t.Ia)e.ta(n.mutations)}async function u7(t,e,n){const r=t.Ia.shift(),s=y_.from(r,e,n);await TN(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await fm(t)}async function h7(t,e){e&&xo(t).ea&&await async function(r,s){if(function(c){return Yz(c)&&c!==ge.ABORTED}(s.code)){const a=r.Ia.shift();xo(r).L_(),await TN(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await fm(r)}}(t,e),SN(t)&&AN(t)}async function uS(t,e){const n=Ue(t);n.asyncQueue.verifyOperationInProgress(),Ee(Ca,"RemoteStore received new credentials");const r=Pa(n);n.da.add(3),await Fh(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await dm(n)}async function d7(t,e){const n=Ue(t);e?(n.da.delete(2),await dm(n)):e||(n.da.add(2),await Fh(n),n.Va.set("Unknown"))}function Ec(t){return t.fa||(t.fa=function(n,r,s){const a=Ue(n);return a.oa(),new WU(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{e_:n7.bind(null,t),n_:r7.bind(null,t),i_:i7.bind(null,t),Y_:s7.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),R_(t)?A_(t):t.Va.set("Unknown")):(await t.fa.stop(),xN(t))})),t.fa}function xo(t){return t.ga||(t.ga=function(n,r,s){const a=Ue(n);return a.oa(),new QU(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:l7.bind(null,t),i_:h7.bind(null,t),na:c7.bind(null,t),ra:u7.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await fm(t)):(await t.ga.stop(),t.Ia.length>0&&(Ee(Ca,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new mo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const c=Date.now()+r,u=new C_(e,n,c,s,a);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function N_(t,e){if(_s("AsyncQueue",`${e}: ${t}`),bc(t))return new xe(ge.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{static emptySet(e){return new Jl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ne.comparator(n.key,r.key):(n,r)=>Ne.comparator(n.key,r.key),this.keyedMap=Gu(),this.sortedSet=new Ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Jl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Jl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(){this.pa=new Ct(Ne.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Pe(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class fc{constructor(e,n,r,s,a,c,u,d,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,s,a){const c=[];return n.forEach(u=>{c.push({type:0,doc:u})}),new fc(e,n,Jl.emptySet(n),c,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f7{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class p7{constructor(){this.queries=dS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Ue(n),a=s.queries;s.queries=dS(),a.forEach((c,u)=>{for(const d of u.Sa)d.onError(r)})})(this,new xe(ge.ABORTED,"Firestore shutting down"))}}function dS(){return new Ma(t=>YC(t),sm)}async function m7(t,e){const n=Ue(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.Da()&&e.va()&&(r=2):(a=new f7,r=e.va()?0:1);try{switch(r){case 0:a.ba=await n.onListen(s,!0);break;case 1:a.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(c){const u=N_(c,`Initialization of query '${Ll(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,a),a.Sa.push(e),e.Fa(n.onlineState),a.ba&&e.Ma(a.ba)&&I_(n)}async function g7(t,e){const n=Ue(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const c=a.Sa.indexOf(e);c>=0&&(a.Sa.splice(c,1),a.Sa.length===0?s=e.va()?0:1:!a.Da()&&e.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function y7(t,e){const n=Ue(t);let r=!1;for(const s of e){const a=s.query,c=n.queries.get(a);if(c){for(const u of c.Sa)u.Ma(s)&&(r=!0);c.ba=s}}r&&I_(n)}function v7(t,e,n){const r=Ue(t),s=r.queries.get(e);if(s)for(const a of s.Sa)a.onError(n);r.queries.delete(e)}function I_(t){t.Ca.forEach(e=>{e.next()})}var lv,fS;(fS=lv||(lv={})).xa="default",fS.Cache="cache";class _7{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new fc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=fc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==lv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.key=e}}class CN{constructor(e){this.key=e}}class b7{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ze(),this.mutatedKeys=Ze(),this.Za=KC(e),this.Xa=new Jl(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new hS,s=n?n.Xa:this.Xa;let a=n?n.mutatedKeys:this.mutatedKeys,c=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,v)=>{const _=s.get(m),w=om(this.query,v)?v:null,T=!!_&&this.mutatedKeys.has(_.key),R=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let C=!1;_&&w?_.data.isEqual(w.data)?T!==R&&(r.track({type:3,doc:w}),C=!0):this.ru(_,w)||(r.track({type:2,doc:w}),C=!0,(d&&this.Za(w,d)>0||f&&this.Za(w,f)<0)&&(u=!0)):!_&&w?(r.track({type:0,doc:w}),C=!0):_&&!w&&(r.track({type:1,doc:_}),C=!0,(d||f)&&(u=!0)),C&&(w?(c=c.add(w),a=R?a.add(m):a.delete(m)):(c=c.delete(m),a=a.delete(m)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const m=this.query.limitType==="F"?c.last():c.first();c=c.delete(m.key),a=a.delete(m.key),r.track({type:1,doc:m})}return{Xa:c,nu:r,Cs:u,mutatedKeys:a}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const c=e.nu.wa();c.sort((m,v)=>function(w,T){const R=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe(20277,{Vt:C})}};return R(w)-R(T)}(m.type,v.type)||this.Za(m.doc,v.doc)),this.iu(r),s=s!=null&&s;const u=n&&!s?this.su():[],d=this.Ya.size===0&&this.current&&!s?1:0,f=d!==this.Ja;return this.Ja=d,c.length!==0||f?{snapshot:new fc(this.query,e.Xa,a,c,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:u}:{ou:u}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new hS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Ze(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new CN(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new RN(r))}),n}au(e){this.Ha=e.$s,this.Ya=Ze();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return fc.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const D_="SyncEngine";class w7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class E7{constructor(e){this.key=e,this.cu=!1}}class x7{constructor(e,n,r,s,a,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.lu={},this.hu=new Ma(u=>YC(u),sm),this.Pu=new Map,this.Tu=new Set,this.Iu=new Ct(Ne.comparator),this.Eu=new Map,this.du=new b_,this.Au={},this.Ru=new Map,this.Vu=dc.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function T7(t,e,n=!0){const r=PN(t);let s;const a=r.hu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.uu()):s=await NN(r,e,n,!0),s}async function S7(t,e){const n=PN(t);await NN(n,e,!0,!1)}async function NN(t,e,n,r){const s=await HU(t.localStore,Ii(e)),a=s.targetId,c=t.sharedClientState.addLocalQueryTarget(a,n);let u;return r&&(u=await A7(t,e,a,c==="current",s.resumeToken)),t.isPrimaryClient&&n&&wN(t.remoteStore,s),u}async function A7(t,e,n,r,s){t.fu=(v,_,w)=>async function(R,C,D,z){let B=C.view.tu(D);B.Cs&&(B=await sS(R.localStore,C.query,!1).then(({documents:I})=>C.view.tu(I,B)));const U=z&&z.targetChanges.get(C.targetId),q=z&&z.targetMismatches.get(C.targetId)!=null,X=C.view.applyChanges(B,R.isPrimaryClient,U,q);return mS(R,C.targetId,X.ou),X.snapshot}(t,v,_,w);const a=await sS(t.localStore,e,!0),c=new b7(e,a.$s),u=c.tu(a.documents),d=Hh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),f=c.applyChanges(u,t.isPrimaryClient,d);mS(t,n,f.ou);const m=new w7(e,n,c);return t.hu.set(e,m),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),f.snapshot}async function R7(t,e,n){const r=Ue(t),s=r.hu.get(e),a=r.Pu.get(s.targetId);if(a.length>1)return r.Pu.set(s.targetId,a.filter(c=>!sm(c,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ov(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&T_(r.remoteStore,s.targetId),cv(r,s.targetId)}).catch(_c)):(cv(r,s.targetId),await ov(r.localStore,s.targetId,!0))}async function C7(t,e){const n=Ue(t),r=n.hu.get(e),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),T_(n.remoteStore,r.targetId))}async function N7(t,e,n){const r=V7(t);try{const s=await function(c,u){const d=Ue(c),f=bt.now(),m=u.reduce((w,T)=>w.add(T.key),Ze());let v,_;return d.persistence.runTransaction("Locally write mutations","readwrite",w=>{let T=bs(),R=Ze();return d.Bs.getEntries(w,m).next(C=>{T=C,T.forEach((D,z)=>{z.isValidDocument()||(R=R.add(D))})}).next(()=>d.localDocuments.getOverlayedDocuments(w,T)).next(C=>{v=C;const D=[];for(const z of u){const B=Hz(z,v.get(z.key).overlayedDocument);B!=null&&D.push(new Co(z.key,B,zC(B.value.mapValue),gr.exists(!0)))}return d.mutationQueue.addMutationBatch(w,f,D,u)}).next(C=>{_=C;const D=C.applyToLocalDocumentSet(v,R);return d.documentOverlayCache.saveOverlays(w,C.batchId,D)})}).then(()=>({batchId:_.batchId,changes:WC(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(c,u,d){let f=c.Au[c.currentUser.toKey()];f||(f=new Ct($e)),f=f.insert(u,d),c.Au[c.currentUser.toKey()]=f}(r,s.batchId,n),await $h(r,s.changes),await fm(r.remoteStore)}catch(s){const a=N_(s,"Failed to persist write");n.reject(a)}}async function IN(t,e){const n=Ue(t);try{const r=await UU(n.localStore,e);e.targetChanges.forEach((s,a)=>{const c=n.Eu.get(a);c&&(ct(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.cu=!0:s.modifiedDocuments.size>0?ct(c.cu,14607):s.removedDocuments.size>0&&(ct(c.cu,42227),c.cu=!1))}),await $h(n,r,e)}catch(r){await _c(r)}}function pS(t,e,n){const r=Ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((a,c)=>{const u=c.view.Fa(e);u.snapshot&&s.push(u.snapshot)}),function(c,u){const d=Ue(c);d.onlineState=u;let f=!1;d.queries.forEach((m,v)=>{for(const _ of v.Sa)_.Fa(u)&&(f=!0)}),f&&I_(d)}(r.eventManager,e),s.length&&r.lu.Y_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function I7(t,e,n){const r=Ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),a=s&&s.key;if(a){let c=new Ct(Ne.comparator);c=c.insert(a,In.newNoDocument(a,ze.min()));const u=Ze().add(a),d=new um(ze.min(),new Map,new Ct($e),c,u);await IN(r,d),r.Iu=r.Iu.remove(a),r.Eu.delete(e),k_(r)}else await ov(r.localStore,e,!1).then(()=>cv(r,e,n)).catch(_c)}async function D7(t,e){const n=Ue(t),r=e.batch.batchId;try{const s=await zU(n.localStore,e);kN(n,r,null),DN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await $h(n,s)}catch(s){await _c(s)}}async function k7(t,e,n){const r=Ue(t);try{const s=await function(c,u){const d=Ue(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return d.mutationQueue.lookupMutationBatch(f,u).next(v=>(ct(v!==null,37113),m=v.keys(),d.mutationQueue.removeMutationBatch(f,v))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,m,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>d.localDocuments.getDocuments(f,m))})}(r.localStore,e);kN(r,e,n),DN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await $h(r,s)}catch(s){await _c(s)}}function DN(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function kN(t,e,n){const r=Ue(t);let s=r.Au[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Au[r.currentUser.toKey()]=s}}function cv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||MN(t,r)})}function MN(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(T_(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),k_(t))}function mS(t,e,n){for(const r of n)r instanceof RN?(t.du.addReference(r.key,e),M7(t,r)):r instanceof CN?(Ee(D_,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||MN(t,r.key)):Pe(19791,{pu:r})}function M7(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(Ee(D_,"New document in limbo: "+n),t.Tu.add(r),k_(t))}function k_(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new Ne(_t.fromString(e)),r=t.Vu.next();t.Eu.set(r,new E7(n)),t.Iu=t.Iu.insert(n,r),wN(t.remoteStore,new lo(Ii(qC(n.path)),r,"TargetPurposeLimboResolution",nm.le))}}async function $h(t,e,n){const r=Ue(t),s=[],a=[],c=[];r.hu.isEmpty()||(r.hu.forEach((u,d)=>{c.push(r.fu(d,e,n).then(f=>{var m;if((f||n)&&r.isPrimaryClient){const v=f?!f.fromCache:(m=n?.targetChanges.get(d.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(f){s.push(f);const v=E_.Rs(d.targetId,f);a.push(v)}}))}),await Promise.all(c),r.lu.Y_(s),await async function(d,f){const m=Ue(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>ye.forEach(f,_=>ye.forEach(_.ds,w=>m.persistence.referenceDelegate.addReference(v,_.targetId,w)).next(()=>ye.forEach(_.As,w=>m.persistence.referenceDelegate.removeReference(v,_.targetId,w)))))}catch(v){if(!bc(v))throw v;Ee(x_,"Failed to update sequence numbers: "+v)}for(const v of f){const _=v.targetId;if(!v.fromCache){const w=m.xs.get(_),T=w.snapshotVersion,R=w.withLastLimboFreeSnapshotVersion(T);m.xs=m.xs.insert(_,R)}}}(r.localStore,a))}async function P7(t,e){const n=Ue(t);if(!n.currentUser.isEqual(e)){Ee(D_,"User change. New user:",e.toKey());const r=await yN(n.localStore,e);n.currentUser=e,function(a,c){a.Ru.forEach(u=>{u.forEach(d=>{d.reject(new xe(ge.CANCELLED,c))})}),a.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await $h(n,r.ks)}}function O7(t,e){const n=Ue(t),r=n.Eu.get(e);if(r&&r.cu)return Ze().add(r.key);{let s=Ze();const a=n.Pu.get(e);if(!a)return s;for(const c of a){const u=n.hu.get(c);s=s.unionWith(u.view.eu)}return s}}function PN(t){const e=Ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=IN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=O7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=I7.bind(null,e),e.lu.Y_=y7.bind(null,e.eventManager),e.lu.gu=v7.bind(null,e.eventManager),e}function V7(t){const e=Ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=D7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=k7.bind(null,e),e}class Dp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hm(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return LU(this.persistence,new PU,e.initialUser,this.serializer)}Su(e){return new gN(w_.fi,this.serializer)}bu(e){return new $U}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Dp.provider={build:()=>new Dp};class L7 extends Dp{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){ct(this.persistence.referenceDelegate instanceof Np,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new _U(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Xn.withCacheSize(this.cacheSizeBytes):Xn.DEFAULT;return new gN(r=>Np.fi(r,n),this.serializer)}}class uv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>pS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=P7.bind(null,this.syncEngine),await d7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new p7}()}createDatastore(e){const n=hm(e.databaseInfo.databaseId),r=function(a){return new XU(a)}(e.databaseInfo);return function(a,c,u,d){return new JU(a,c,u,d)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,c,u){return new t7(r,s,a,c,u)}(this.localStore,this.datastore,e.asyncQueue,n=>pS(this.syncEngine,n,0),function(){return lS.C()?new lS:new qU}())}createSyncEngine(e,n){return function(s,a,c,u,d,f,m){const v=new x7(s,a,c,u,d,f);return m&&(v.mu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=Ue(s);Ee(Ca,"RemoteStore shutting down."),a.da.add(5),await Fh(a),a.Ra.shutdown(),a.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}uv.provider={build:()=>new uv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):_s("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To="FirestoreClient";class U7{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Nn.UNAUTHENTICATED,this.clientId=CC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async c=>{Ee(To,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(Ee(To,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=N_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function iy(t,e){t.asyncQueue.verifyOperationInProgress(),Ee(To,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await yN(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function gS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await j7(t);Ee(To,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>uS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>uS(e.remoteStore,s)),t._onlineComponents=e}async function j7(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ee(To,"Using user provided OfflineComponentProvider");try{await iy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ge.FAILED_PRECONDITION||s.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;lc("Error using user provided cache. Falling back to memory cache: "+n),await iy(t,new Dp)}}else Ee(To,"Using default OfflineComponentProvider"),await iy(t,new L7(void 0));return t._offlineComponents}async function ON(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ee(To,"Using user provided OnlineComponentProvider"),await gS(t,t._uninitializedComponentsProvider._online)):(Ee(To,"Using default OnlineComponentProvider"),await gS(t,new uv))),t._onlineComponents}function B7(t){return ON(t).then(e=>e.syncEngine)}async function H7(t){const e=await ON(t),n=e.eventManager;return n.onListen=T7.bind(null,e.syncEngine),n.onUnlisten=R7.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=S7.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=C7.bind(null,e.syncEngine),n}function F7(t,e,n={}){const r=new mo;return t.asyncQueue.enqueueAndForget(async()=>function(a,c,u,d,f){const m=new z7({next:_=>{m.xu(),c.enqueueAndForget(()=>g7(a,v)),_.fromCache&&d.source==="server"?f.reject(new xe(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),v=new _7(u,m,{includeMetadataChanges:!0,Qa:!0});return m7(a,v)}(await H7(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t,e,n){if(!n)throw new xe(ge.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $7(t,e,n,r){if(e===!0&&r===!0)throw new xe(ge.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function vS(t){if(!Ne.isDocumentKey(t))throw new xe(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function _S(t){if(Ne.isDocumentKey(t))throw new xe(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function pm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Pe(12329,{type:typeof t})}function Na(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xe(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pm(t);throw new xe(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN="firestore.googleapis.com",bS=!0;class wS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new xe(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zN,this.ssl=bS}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:bS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<yU)throw new xe(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new xe(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new xe(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new xe(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new K9;switch(r.type){case"firstParty":return new Z9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new xe(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=yS.get(n);r&&(Ee("ComponentProvider","Removing Datastore"),yS.delete(n),r.terminate())}(this),Promise.resolve()}}function q7(t,e,n,r={}){var s;t=Na(t,mm);const a=ka(e),c=t._getSettings(),u=Object.assign(Object.assign({},c),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;a&&(i_(`https://${d}`),s_("Firestore",!0)),c.host!==zN&&c.host!==d&&lc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},c),{host:d,ssl:a,emulatorOptions:r});if(!Sa(f,u)&&(t._setSettings(f),r.mockUserToken)){let m,v;if(typeof r.mockUserToken=="string")m=r.mockUserToken,v=Nn.MOCK_USER;else{m=Q6(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new xe(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Nn(_)}t._authCredentials=new X9(new AC(m,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Oa(this.firestore,e,this._query)}}class yr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new go(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yr(this.firestore,e,this._key)}}class go extends Oa{constructor(e,n,r){super(e,n,qC(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yr(this.firestore,null,new Ne(e))}withConverter(e){return new go(this.firestore,e,this._path)}}function M_(t,e,...n){if(t=Vt(t),LN("collection","path",e),t instanceof mm){const r=_t.fromString(e,...n);return _S(r),new go(t,null,r)}{if(!(t instanceof yr||t instanceof go))throw new xe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_t.fromString(e,...n));return _S(r),new go(t.firestore,null,r)}}function xc(t,e,...n){if(t=Vt(t),arguments.length===1&&(e=CC.newId()),LN("doc","path",e),t instanceof mm){const r=_t.fromString(e,...n);return vS(r),new yr(t,null,new Ne(r))}{if(!(t instanceof yr||t instanceof go))throw new xe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_t.fromString(e,...n));return vS(r),new yr(t.firestore,t instanceof go?t.converter:null,new Ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="AsyncQueue";class xS{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new _N(this,"async_queue_retry"),this.rc=()=>{const r=ry();r&&Ee(ES,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=ry();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=ry();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new mo;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!bc(e))throw e;Ee(ES,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,_s("INTERNAL UNHANDLED ERROR: ",TS(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const s=C_.createAndSchedule(this,e,n,r,a=>this.uc(a));return this.Zu.push(s),s}oc(){this.Xu&&Pe(47125,{cc:TS(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function TS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class qh extends mm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new xS,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xS(e),this._firestoreClient=void 0,await e}}}function G7(t,e){const n=typeof t=="object"?t:l_(),r=typeof t=="string"?t:xp,s=tm(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=cC("firestore");a&&q7(s,...a)}return s}function P_(t){if(t._terminated)throw new xe(ge.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Y7(t),t._firestoreClient}function Y7(t){var e,n,r;const s=t._freezeSettings(),a=function(u,d,f,m){return new fz(u,d,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,VN(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new U7(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(u){const d=u?._online.build();return{_offline:u?._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pc(Tn.fromBase64String(e))}catch(n){throw new xe(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new pc(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new xe(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new xe(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new xe(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K7=/^__.*__$/;class X7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Co(e,this.data,this.fieldMask,n,this.fieldTransforms):new Bh(e,this.data,n,this.fieldTransforms)}}class UN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Co(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function jN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe(40011,{Ic:t})}}class z_{constructor(e,n,r,s,a,c){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Ec(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new z_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Vc(e),s}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Ec(),s}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return kp(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(jN(this.Ic)&&K7.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class W7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||hm(e)}bc(e,n,r,s=!1){return new z_({Ic:e,methodName:n,wc:r,path:xn.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function U_(t){const e=t._freezeSettings(),n=hm(t._databaseId);return new W7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function BN(t,e,n,r,s,a={}){const c=t.bc(a.merge||a.mergeFields?2:0,e,n,s);j_("Data must be an object, but it was:",c,r);const u=HN(r,c);let d,f;if(a.merge)d=new mr(c.fieldMask),f=c.fieldTransforms;else if(a.mergeFields){const m=[];for(const v of a.mergeFields){const _=hv(e,v,n);if(!c.contains(_))throw new xe(ge.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);$N(m,_)||m.push(_)}d=new mr(m),f=c.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,f=c.fieldTransforms;return new X7(new Wn(u),d,f)}class ym extends O_{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ym}}function Q7(t,e,n,r){const s=t.bc(1,e,n);j_("Data must be an object, but it was:",s,r);const a=[],c=Wn.empty();Ro(r,(d,f)=>{const m=B_(e,d,n);f=Vt(f);const v=s.mc(m);if(f instanceof ym)a.push(m);else{const _=Gh(f,v);_!=null&&(a.push(m),c.set(m,_))}});const u=new mr(a);return new UN(c,u,s.fieldTransforms)}function Z7(t,e,n,r,s,a){const c=t.bc(1,e,n),u=[hv(e,r,n)],d=[s];if(a.length%2!=0)throw new xe(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<a.length;_+=2)u.push(hv(e,a[_])),d.push(a[_+1]);const f=[],m=Wn.empty();for(let _=u.length-1;_>=0;--_)if(!$N(f,u[_])){const w=u[_];let T=d[_];T=Vt(T);const R=c.mc(w);if(T instanceof ym)f.push(w);else{const C=Gh(T,R);C!=null&&(f.push(w),m.set(w,C))}}const v=new mr(f);return new UN(m,v,c.fieldTransforms)}function J7(t,e,n,r=!1){return Gh(n,t.bc(r?4:3,e))}function Gh(t,e){if(FN(t=Vt(t)))return j_("Unsupported field value:",e,t),HN(t,e);if(t instanceof O_)return function(r,s){if(!jN(s.Ic))throw s.gc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,s){const a=[];let c=0;for(const u of r){let d=Gh(u,s.fc(c));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),c++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=Vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Vz(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=bt.fromDate(r);return{timestampValue:Cp(s.serializer,a)}}if(r instanceof bt){const a=new bt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cp(s.serializer,a)}}if(r instanceof V_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof pc)return{bytesValue:lN(s.serializer,r._byteString)};if(r instanceof yr){const a=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw s.gc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:__(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof L_)return function(c,u){return{mapValue:{fields:{[VC]:{stringValue:LC},[Tp]:{arrayValue:{values:c.toArray().map(f=>{if(typeof f!="number")throw u.gc("VectorValues must only contain numeric values.");return g_(u.serializer,f)})}}}}}}(r,s);throw s.gc(`Unsupported field value: ${pm(r)}`)}(t,e)}function HN(t,e){const n={};return IC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ro(t,(r,s)=>{const a=Gh(s,e.Ac(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function FN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof bt||t instanceof V_||t instanceof pc||t instanceof yr||t instanceof O_||t instanceof L_)}function j_(t,e,n){if(!FN(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=pm(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function hv(t,e,n){if((e=Vt(e))instanceof gm)return e._internalPath;if(typeof e=="string")return B_(t,e);throw kp("Field path arguments must be of type string or ",t,!1,void 0,n)}const e8=new RegExp("[~\\*/\\[\\]]");function B_(t,e,n){if(e.search(e8)>=0)throw kp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gm(...e.split("."))._internalPath}catch{throw kp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function kp(t,e,n,r,s){const a=r&&!r.isEmpty(),c=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(a||c)&&(d+=" (found",a&&(d+=` in field ${r}`),c&&(d+=` in document ${s}`),d+=")"),new xe(ge.INVALID_ARGUMENT,u+t+d)}function $N(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new yr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new t8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class t8 extends qN{data(){return super.data()}}function vm(t,e){return typeof e=="string"?B_(t,e):e instanceof gm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n8(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new xe(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class H_{}class GN extends H_{}function r8(t,e,...n){let r=[];e instanceof H_&&r.push(e),r=r.concat(n),function(a){const c=a.filter(d=>d instanceof F_).length,u=a.filter(d=>d instanceof _m).length;if(c>1||c>0&&u>0)throw new xe(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class _m extends GN{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new _m(e,n,r)}_apply(e){const n=this._parse(e);return YN(e._query,n),new Oa(e.firestore,e.converter,ev(e._query,n))}_parse(e){const n=U_(e.firestore);return function(a,c,u,d,f,m,v){let _;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new xe(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){AS(v,m);const T=[];for(const R of v)T.push(SS(d,a,R));_={arrayValue:{values:T}}}else _=SS(d,a,v)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||AS(v,m),_=J7(u,c,v,m==="in"||m==="not-in");return Qt.create(f,m,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function i8(t,e,n){const r=e,s=vm("where",t);return _m._create(s,r,n)}class F_ extends H_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new F_(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ti.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let c=s;const u=a.getFlattenedFilters();for(const d of u)YN(c,d),c=ev(c,d)}(e._query,n),new Oa(e.firestore,e.converter,ev(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $_ extends GN{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new $_(e,n)}_apply(e){const n=function(s,a,c){if(s.startAt!==null)throw new xe(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new xe(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wh(a,c)}(e._query,this._field,this._direction);return new Oa(e.firestore,e.converter,function(s,a){const c=s.explicitOrderBy.concat([a]);return new wc(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function s8(t,e="asc"){const n=e,r=vm("orderBy",t);return $_._create(r,n)}function SS(t,e,n){if(typeof(n=Vt(n))=="string"){if(n==="")throw new xe(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!GC(e)&&n.indexOf("/")!==-1)throw new xe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(_t.fromString(n));if(!Ne.isDocumentKey(r))throw new xe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jT(t,new Ne(r))}if(n instanceof yr)return jT(t,n._key);throw new xe(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pm(n)}.`)}function AS(t,e){if(!Array.isArray(t)||t.length===0)throw new xe(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YN(t,e){const n=function(s,a){for(const c of s)for(const u of c.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new xe(ge.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(ge.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class o8{convertValue(e,n="none"){switch(Eo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(wo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ro(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,s;const a=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Tp].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(c=>Bt(c.doubleValue));return new L_(a)}convertGeoPoint(e){return new V_(Bt(e.latitude),Bt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=im(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(vh(e));default:return null}}convertTimestamp(e){const n=bo(e);return new bt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=_t.fromString(e);ct(pN(r),9688,{name:e});const s=new _h(r.get(1),r.get(3)),a=new Ne(r.popFirst(5));return s.isEqual(n)||_s(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class a8 extends qN{constructor(e,n,r,s,a,c){super(e,n,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(vm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Zf extends a8{data(e={}){return super.data(e)}}class l8{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Vf(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Zf(this._firestore,this._userDataWriter,r.key,r,new Vf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new xe(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(u=>{const d=new Zf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Vf(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}})}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>a||u.type!==3).map(u=>{const d=new Zf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Vf(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,m=-1;return u.type!==0&&(f=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),m=c.indexOf(u.doc.key)),{type:c8(u.type),doc:d,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function c8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe(61501,{type:t})}}class u8 extends o8{constructor(e){super(),this.firestore=e}convertBytes(e){return new pc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new yr(this.firestore,null,n)}}function q_(t){t=Na(t,Oa);const e=Na(t.firestore,qh),n=P_(e),r=new u8(e);return n8(t._query),F7(n,t._query).then(s=>new l8(e,r,t,s))}function G_(t,e,n){t=Na(t,yr);const r=Na(t.firestore,qh),s=KN(t.converter,e,n);return Y_(r,[BN(U_(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,gr.none())])}function h8(t){return Y_(Na(t.firestore,qh),[new cm(t._key,gr.none())])}function Y_(t,e){return function(r,s){const a=new mo;return r.asyncQueue.enqueueAndForget(async()=>N7(await B7(r),s,a)),a.promise}(P_(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=U_(e)}set(e,n,r){this._verifyNotCommitted();const s=sy(e,this._firestore),a=KN(s.converter,n,r),c=BN(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,r);return this._mutations.push(c.toMutation(s._key,gr.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const a=sy(e,this._firestore);let c;return c=typeof(n=Vt(n))=="string"||n instanceof gm?Z7(this._dataReader,"WriteBatch.update",a._key,n,r,s):Q7(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(c.toMutation(a._key,gr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=sy(e,this._firestore);return this._mutations=this._mutations.concat(new cm(n._key,gr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function sy(t,e){if((t=Vt(t)).firestore!==e)throw new xe(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(t){return P_(t=Na(t,qh)),new d8(t,e=>Y_(t,e))}(function(e,n=!0){(function(s){vc=s})(yc),Aa(new vo("firestore",(r,{instanceIdentifier:s,options:a})=>{const c=r.getProvider("app").getImmediate(),u=new qh(new W9(r.getProvider("auth-internal")),new J9(c,r.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new xe(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _h(f.options.projectId,m)}(c,s),c);return a=Object.assign({useFetchStreams:n},a),u._setSettings(a),u},"PUBLIC").setMultipleInstances(!0)),Ni(CT,NT,e),Ni(CT,NT,"esm2017")})();function K_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function WN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const f8=WN,QN=new Uh("auth","Firebase",WN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=new o_("@firebase/auth");function p8(t,...e){Mp.logLevel<=Qe.WARN&&Mp.warn(`Auth (${yc}): ${t}`,...e)}function Jf(t,...e){Mp.logLevel<=Qe.ERROR&&Mp.error(`Auth (${yc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(t,...e){throw X_(t,...e)}function ki(t,...e){return X_(t,...e)}function ZN(t,e,n){const r=Object.assign(Object.assign({},f8()),{[e]:n});return new Uh("auth","Firebase",r).create(e,{appName:t.name})}function ms(t){return ZN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function X_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return QN.create(t,...e)}function Me(t,e,...n){if(!t)throw X_(e,...n)}function fs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Jf(e),new Error(e)}function ws(t,e){t||fs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function m8(){return RS()==="http:"||RS()==="https:"}function RS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(m8()||rL()||"connection"in navigator)?navigator.onLine:!0}function y8(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n){this.shortDelay=e,this.longDelay=n,ws(n>e,"Short delay should be less than long delay!"),this.isMobile=eL()||iL()}get(){return g8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(t,e){ws(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _8=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],b8=new Yh(3e4,6e4);function No(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Io(t,e,n,r,s={}){return eI(t,s,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const u=jh(Object.assign({key:t.config.apiKey},c)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:d},a);return nL()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&ka(t.emulatorConfig.host)&&(f.credentials="include"),JN.fetch()(await tI(t,t.config.apiHost,n,u),f)})}async function eI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},v8),e);try{const s=new E8(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Lf(t,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const u=a.ok?c.errorMessage:c.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lf(t,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw Lf(t,"email-already-in-use",c);if(d==="USER_DISABLED")throw Lf(t,"user-disabled",c);const m=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw ZN(t,m,f);ni(t,m)}}catch(s){if(s instanceof Ui)throw s;ni(t,"network-request-failed",{message:String(s)})}}async function Kh(t,e,n,r,s={}){const a=await Io(t,e,n,r,s);return"mfaPendingCredential"in a&&ni(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function tI(t,e,n,r){const s=`${e}${n}?${r}`,a=t,c=a.config.emulator?W_(t.config,s):`${t.config.apiScheme}://${s}`;return _8.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function w8(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class E8{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ki(this.auth,"network-request-failed")),b8.get())})}}function Lf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ki(t,e,r);return s.customData._tokenResponse=n,s}function CS(t){return t!==void 0&&t.enterprise!==void 0}class x8{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return w8(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function T8(t,e){return Io(t,"GET","/v2/recaptchaConfig",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S8(t,e){return Io(t,"POST","/v1/accounts:delete",e)}async function Pp(t,e){return Io(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function A8(t,e=!1){const n=Vt(t),r=await n.getIdToken(e),s=Q_(r);Me(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,c=a?.sign_in_provider;return{claims:s,token:r,authTime:eh(oy(s.auth_time)),issuedAtTime:eh(oy(s.iat)),expirationTime:eh(oy(s.exp)),signInProvider:c||null,signInSecondFactor:a?.sign_in_second_factor||null}}function oy(t){return Number(t)*1e3}function Q_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Jf("JWT malformed, contained fewer than 3 sections"),null;try{const s=aC(n);return s?JSON.parse(s):(Jf("Failed to decode base64 JWT payload"),null)}catch(s){return Jf("Caught error parsing JWT payload as JSON",s?.toString()),null}}function NS(t){const e=Q_(t);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Th(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ui&&R8(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function R8({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=eh(this.lastLoginAt),this.creationTime=eh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Op(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Th(t,Pp(n,{idToken:r}));Me(s?.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?nI(a.providerUserInfo):[],u=I8(t.providerData,c),d=t.isAnonymous,f=!(t.email&&a.passwordHash)&&!u?.length,m=d?f:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new fv(a.createdAt,a.lastLoginAt),isAnonymous:m};Object.assign(t,v)}async function N8(t){const e=Vt(t);await Op(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function I8(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function nI(t){return t.map(e=>{var{providerId:n}=e,r=K_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D8(t,e){const n=await eI(t,{},async()=>{const r=jh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,c=await tI(t,s,"/v1/token",`key=${a}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:r};return t.emulatorConfig&&ka(t.emulatorConfig.host)&&(d.credentials="include"),JN.fetch()(c,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function k8(t,e){return Io(t,"POST","/v2/accounts:revokeToken",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):NS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const n=NS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await D8(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,c=new ec;return r&&(Me(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),s&&(Me(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),a&&(Me(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ec,this.toJSON())}_performRefresh(){return fs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(t,e){Me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Jr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,a=K_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new C8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new fv(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Th(this,this.stsTokenManager.getToken(this.auth,e));return Me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return A8(this,e)}reload(){return N8(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Jr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Op(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pr(this.auth.app))return Promise.reject(ms(this.auth));const e=await this.getIdToken();return await Th(this,S8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,a,c,u,d,f,m;const v=(r=n.displayName)!==null&&r!==void 0?r:void 0,_=(s=n.email)!==null&&s!==void 0?s:void 0,w=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,T=(c=n.photoURL)!==null&&c!==void 0?c:void 0,R=(u=n.tenantId)!==null&&u!==void 0?u:void 0,C=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,D=(f=n.createdAt)!==null&&f!==void 0?f:void 0,z=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:B,emailVerified:U,isAnonymous:q,providerData:X,stsTokenManager:I}=n;Me(B&&I,e,"internal-error");const A=ec.fromJSON(this.name,I);Me(typeof B=="string",e,"internal-error"),Qs(v,e.name),Qs(_,e.name),Me(typeof U=="boolean",e,"internal-error"),Me(typeof q=="boolean",e,"internal-error"),Qs(w,e.name),Qs(T,e.name),Qs(R,e.name),Qs(C,e.name),Qs(D,e.name),Qs(z,e.name);const N=new Jr({uid:B,auth:e,email:_,emailVerified:U,displayName:v,isAnonymous:q,photoURL:T,phoneNumber:w,tenantId:R,stsTokenManager:A,createdAt:D,lastLoginAt:z});return X&&Array.isArray(X)&&(N.providerData=X.map(H=>Object.assign({},H))),C&&(N._redirectEventId=C),N}static async _fromIdTokenResponse(e,n,r=!1){const s=new ec;s.updateFromServerResponse(n);const a=new Jr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Op(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Me(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?nI(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!a?.length,u=new ec;u.updateFromIdToken(r);const d=new Jr({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:c}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new fv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!a?.length};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=new Map;function ps(t){ws(t instanceof Function,"Expected a class definition");let e=IS.get(t);return e?(ws(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,IS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}rI.type="NONE";const DS=rI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(t,e,n){return`firebase:${t}:${e}:${n}`}class tc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=ep(this.userKey,s.apiKey,a),this.fullPersistenceKey=ep("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Pp(this.auth,{idToken:e}).catch(()=>{});return n?Jr._fromGetAccountInfoResponse(this.auth,n,e):null}return Jr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new tc(ps(DS),e,r);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=s[0]||ps(DS);const c=ep(r,e.config.apiKey,e.name);let u=null;for(const f of n)try{const m=await f._get(c);if(m){let v;if(typeof m=="string"){const _=await Pp(e,{idToken:m}).catch(()=>{});if(!_)break;v=await Jr._fromGetAccountInfoResponse(e,_,m)}else v=Jr._fromJSON(e,m);f!==a&&(u=v),a=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new tc(a,e,r):(a=d[0],u&&await a._set(c,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==a)try{await f._remove(c)}catch{}})),new tc(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(aI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cI(e))return"Blackberry";if(uI(e))return"Webos";if(sI(e))return"Safari";if((e.includes("chrome/")||oI(e))&&!e.includes("edge/"))return"Chrome";if(lI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function iI(t=Mn()){return/firefox\//i.test(t)}function sI(t=Mn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oI(t=Mn()){return/crios\//i.test(t)}function aI(t=Mn()){return/iemobile/i.test(t)}function lI(t=Mn()){return/android/i.test(t)}function cI(t=Mn()){return/blackberry/i.test(t)}function uI(t=Mn()){return/webos/i.test(t)}function Z_(t=Mn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function M8(t=Mn()){var e;return Z_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function P8(){return sL()&&document.documentMode===10}function hI(t=Mn()){return Z_(t)||lI(t)||uI(t)||cI(t)||/windows phone/i.test(t)||aI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(t,e=[]){let n;switch(t){case"Browser":n=kS(Mn());break;case"Worker":n=`${kS(Mn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((c,u)=>{try{const d=e(a);c(d)}catch(d){u(d)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V8(t,e={}){return Io(t,"GET","/v2/passwordPolicy",No(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L8=6;class z8{constructor(e){var n,r,s,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:L8,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,a,c,u;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(a=d.containsUppercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(c=d.containsNumericCharacter)!==null&&c!==void 0?c:!0),d.isValid&&(d.isValid=(u=d.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),d}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new MS(this),this.idTokenSubscription=new MS(this),this.beforeStateQueue=new O8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=QN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ps(n)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await tc.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Pp(this,{idToken:e}),r=await Jr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(pr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s?._redirectEventId,d=await this.tryRedirectSignIn(e);(!c||c===u)&&d?.user&&(s=d.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Op(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=y8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pr(this.app))return Promise.reject(ms(this));const n=e?Vt(e):null;return n&&Me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pr(this.app)?Promise.reject(ms(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pr(this.app)?Promise.reject(ms(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ps(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await V8(this),n=new z8(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Uh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await k8(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ps(e)||this._popupRedirectResolver;Me(n,this,"argument-error"),this.redirectPersistenceManager=await tc.create(this,[ps(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(u,this,"internal-error"),u.then(()=>{c||a(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,s);return()=>{c=!0,d()}}else{const d=e.addObserver(n);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(pr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&p8(`Error while retrieving App Check token: ${n.error}`),n?.token}}function Va(t){return Vt(t)}class MS{constructor(e){this.auth=e,this.observer=null,this.addObserver=fL(n=>this.observer=n)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function j8(t){bm=t}function fI(t){return bm.loadJS(t)}function B8(){return bm.recaptchaEnterpriseScript}function H8(){return bm.gapiScript}function F8(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class $8{constructor(){this.enterprise=new q8}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class q8{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const G8="recaptcha-enterprise",pI="NO_RECAPTCHA";class Y8{constructor(e){this.type=G8,this.auth=Va(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,u)=>{T8(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new x8(d);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,c(f.siteKey)}}).catch(d=>{u(d)})})}function s(a,c,u){const d=window.grecaptcha;CS(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(f=>{c(f)}).catch(()=>{c(pI)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new $8().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(u=>{if(!n&&CS(window.grecaptcha))s(u,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=B8();d.length!==0&&(d+=u),fI(d).then(()=>{s(u,a,c)}).catch(f=>{c(f)})}}).catch(u=>{c(u)})})}}async function PS(t,e,n,r=!1,s=!1){const a=new Y8(t);let c;if(s)c=pI;else try{c=await a.verify(n)}catch{c=await a.verify(n,!0)}const u=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function pv(t,e,n,r,s){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await PS(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await PS(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K8(t,e){const n=tm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(Sa(a,e??{}))return s;ni(s,"already-initialized")}return n.initialize({options:e})}function X8(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ps);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function W8(t,e,n){const r=Va(t);Me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=mI(e),{host:c,port:u}=Q8(e),d=u===null?"":`:${u}`,f={url:`${a}//${c}${d}/`},m=Object.freeze({host:c,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Me(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Me(Sa(f,r.config.emulator)&&Sa(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,ka(c)?(i_(`${a}//${c}${d}`),s_("Auth",!0)):Z8()}function mI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Q8(t){const e=mI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:OS(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:OS(c)}}}function OS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Z8(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return fs("not implemented")}_getIdTokenResponse(e){return fs("not implemented")}_linkToIdToken(e,n){return fs("not implemented")}_getReauthenticationResolver(e){return fs("not implemented")}}async function J8(t,e){return Io(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ej(t,e){return Kh(t,"POST","/v1/accounts:signInWithPassword",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tj(t,e){return Kh(t,"POST","/v1/accounts:signInWithEmailLink",No(t,e))}async function nj(t,e){return Kh(t,"POST","/v1/accounts:signInWithEmailLink",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh extends J_{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Sh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Sh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pv(e,n,"signInWithPassword",ej);case"emailLink":return tj(e,{email:this._email,oobCode:this._password});default:ni(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pv(e,r,"signUpPassword",J8);case"emailLink":return nj(e,{idToken:n,email:this._email,oobCode:this._password});default:ni(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nc(t,e){return Kh(t,"POST","/v1/accounts:signInWithIdp",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj="http://localhost";class Ia extends J_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ia(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ni("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,a=K_(n,["providerId","signInMethod"]);if(!r||!s)return null;const c=new Ia(r,s);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return nc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,nc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,nc(e,n)}buildRequest(){const e={requestUri:rj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=jh(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function sj(t){const e=Fu($u(t)).link,n=e?Fu($u(e)).deep_link_id:null,r=Fu($u(t)).deep_link_id;return(r?Fu($u(r)).link:null)||r||n||e||t}class eb{constructor(e){var n,r,s,a,c,u;const d=Fu($u(e)),f=(n=d.apiKey)!==null&&n!==void 0?n:null,m=(r=d.oobCode)!==null&&r!==void 0?r:null,v=ij((s=d.mode)!==null&&s!==void 0?s:null);Me(f&&m&&v,"argument-error"),this.apiKey=f,this.operation=v,this.code=m,this.continueUrl=(a=d.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=d.lang)!==null&&c!==void 0?c:null,this.tenantId=(u=d.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=sj(e);try{return new eb(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(){this.providerId=Tc.PROVIDER_ID}static credential(e,n){return Sh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=eb.parseLink(n);return Me(r,"argument-error"),Sh._fromEmailAndCode(e,r.code,r.tenantId)}}Tc.PROVIDER_ID="password";Tc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Tc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh extends gI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io extends Xh{constructor(){super("facebook.com")}static credential(e){return Ia._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return io.credentialFromTaggedObject(e)}static credentialFromError(e){return io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return io.credential(e.oauthAccessToken)}catch{return null}}}io.FACEBOOK_SIGN_IN_METHOD="facebook.com";io.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends Xh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ia._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return so.credential(n,r)}catch{return null}}}so.GOOGLE_SIGN_IN_METHOD="google.com";so.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo extends Xh{constructor(){super("github.com")}static credential(e){return Ia._fromParams({providerId:oo.PROVIDER_ID,signInMethod:oo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oo.credentialFromTaggedObject(e)}static credentialFromError(e){return oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oo.credential(e.oauthAccessToken)}catch{return null}}}oo.GITHUB_SIGN_IN_METHOD="github.com";oo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao extends Xh{constructor(){super("twitter.com")}static credential(e,n){return Ia._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ao.credentialFromTaggedObject(e)}static credentialFromError(e){return ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ao.credential(n,r)}catch{return null}}}ao.TWITTER_SIGN_IN_METHOD="twitter.com";ao.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oj(t,e){return Kh(t,"POST","/v1/accounts:signUp",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await Jr._fromIdTokenResponse(e,r,s),c=VS(r);return new Da({user:a,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=VS(r);return new Da({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function VS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp extends Ui{constructor(e,n,r,s){var a;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Vp.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Vp(e,n,r,s)}}function yI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Vp._fromErrorAndOperation(t,a,e,r):a})}async function aj(t,e,n=!1){const r=await Th(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Da._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lj(t,e,n=!1){const{auth:r}=t;if(pr(r.app))return Promise.reject(ms(r));const s="reauthenticate";try{const a=await Th(t,yI(r,s,e,t),n);Me(a.idToken,r,"internal-error");const c=Q_(a.idToken);Me(c,r,"internal-error");const{sub:u}=c;return Me(t.uid===u,r,"user-mismatch"),Da._forOperation(t,s,a)}catch(a){throw a?.code==="auth/user-not-found"&&ni(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vI(t,e,n=!1){if(pr(t.app))return Promise.reject(ms(t));const r="signIn",s=await yI(t,r,e),a=await Da._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function cj(t,e){return vI(Va(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _I(t){const e=Va(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function uj(t,e,n){if(pr(t.app))return Promise.reject(ms(t));const r=Va(t),c=await pv(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oj).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&_I(t),d}),u=await Da._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(u.user),u}function hj(t,e,n){return pr(t.app)?Promise.reject(ms(t)):cj(Vt(t),Tc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&_I(t),r})}function dj(t,e,n,r){return Vt(t).onIdTokenChanged(e,n,r)}function fj(t,e,n){return Vt(t).beforeAuthStateChanged(e,n)}function pj(t,e,n,r){return Vt(t).onAuthStateChanged(e,n,r)}function mj(t){return Vt(t).signOut()}const Lp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Lp,"1"),this.storage.removeItem(Lp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=1e3,yj=10;class wI extends bI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,u,d)=>{this.notifyListeners(c,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);P8()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,yj):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},gj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}wI.type="LOCAL";const vj=wI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI extends bI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}EI.type="SESSION";const xI=EI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _j(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new wm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,c=this.handlersMap[s];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(c).map(async f=>f(n.origin,a)),d=await _j(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,c;return new Promise((u,d)=>{const f=tb("",20);s.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(v){const _=v;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(m),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(_.data.response);break;default:clearTimeout(m),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(){return window}function wj(t){Mi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(){return typeof Mi().WorkerGlobalScope<"u"&&typeof Mi().importScripts=="function"}async function Ej(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xj(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Tj(){return TI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI="firebaseLocalStorageDb",Sj=1,zp="firebaseLocalStorage",AI="fbase_key";class Wh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Em(t,e){return t.transaction([zp],e?"readwrite":"readonly").objectStore(zp)}function Aj(){const t=indexedDB.deleteDatabase(SI);return new Wh(t).toPromise()}function mv(){const t=indexedDB.open(SI,Sj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(zp,{keyPath:AI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(zp)?e(r):(r.close(),await Aj(),e(await mv()))})})}async function LS(t,e,n){const r=Em(t,!0).put({[AI]:e,value:n});return new Wh(r).toPromise()}async function Rj(t,e){const n=Em(t,!1).get(e),r=await new Wh(n).toPromise();return r===void 0?null:r.value}function zS(t,e){const n=Em(t,!0).delete(e);return new Wh(n).toPromise()}const Cj=800,Nj=3;class RI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Nj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wm._getInstance(Tj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Ej(),!this.activeServiceWorker)return;this.sender=new bj(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mv();return await LS(e,Lp,"1"),await zS(e,Lp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>LS(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Rj(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>zS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Em(s,!1).getAll();return new Wh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Cj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RI.type="LOCAL";const Ij=RI;new Yh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dj(t,e){return e?ps(e):(Me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb extends J_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return nc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return nc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function kj(t){return vI(t.auth,new nb(t),t.bypassAuthState)}function Mj(t){const{auth:e,user:n}=t;return Me(n,e,"internal-error"),lj(n,new nb(t),t.bypassAuthState)}async function Pj(t){const{auth:e,user:n}=t;return Me(n,e,"internal-error"),aj(n,new nb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:c,type:u}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kj;case"linkViaPopup":case"linkViaRedirect":return Pj;case"reauthViaPopup":case"reauthViaRedirect":return Mj;default:ni(this.auth,"internal-error")}}resolve(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj=new Yh(2e3,1e4);class Hl extends CI{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Hl.currentPopupAction&&Hl.currentPopupAction.cancel(),Hl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){ws(this.filter.length===1,"Popup operations only handle one event");const e=tb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ki(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ki(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ki(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Oj.get())};e()}}Hl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj="pendingRedirect",tp=new Map;class Lj extends CI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=tp.get(this.auth._key());if(!e){try{const r=await zj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}tp.set(this.auth._key(),e)}return this.bypassAuthState||tp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zj(t,e){const n=Bj(e),r=jj(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Uj(t,e){tp.set(t._key(),e)}function jj(t){return ps(t._redirectPersistence)}function Bj(t){return ep(Vj,t.config.apiKey,t.name)}async function Hj(t,e,n=!1){if(pr(t.app))return Promise.reject(ms(t));const r=Va(t),s=Dj(r,e),c=await new Lj(r,s,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj=10*60*1e3;class $j{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!NI(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ki(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Fj&&this.cachedEventUids.clear(),this.cachedEventUids.has(US(e))}saveEventToCache(e){this.cachedEventUids.add(US(e)),this.lastProcessedEventTime=Date.now()}}function US(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function NI({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function qj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gj(t,e={}){return Io(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Kj=/^https?/;async function Xj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Gj(t);for(const n of e)try{if(Wj(n))return}catch{}ni(t,"unauthorized-domain")}function Wj(t){const e=dv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!Kj.test(n))return!1;if(Yj.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj=new Yh(3e4,6e4);function jS(){const t=Mi().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Zj(t){return new Promise((e,n)=>{var r,s,a;function c(){jS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jS(),n(ki(t,"network-request-failed"))},timeout:Qj.get()})}if(!((s=(r=Mi().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Mi().gapi)===null||a===void 0)&&a.load)c();else{const u=F8("iframefcb");return Mi()[u]=()=>{gapi.load?c():n(ki(t,"network-request-failed"))},fI(`${H8()}?onload=${u}`).catch(d=>n(d))}}).catch(e=>{throw np=null,e})}let np=null;function Jj(t){return np=np||Zj(t),np}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eB=new Yh(5e3,15e3),tB="__/auth/iframe",nB="emulator/auth/iframe",rB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sB(t){const e=t.config;Me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?W_(e,nB):`https://${t.config.authDomain}/${tB}`,r={apiKey:e.apiKey,appName:t.name,v:yc},s=iB.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${jh(r).slice(1)}`}async function oB(t){const e=await Jj(t),n=Mi().gapi;return Me(n,t,"internal-error"),e.open({where:document.body,url:sB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rB,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const c=ki(t,"network-request-failed"),u=Mi().setTimeout(()=>{a(c)},eB.get());function d(){Mi().clearTimeout(u),s(r)}r.ping(d).then(d,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lB=500,cB=600,uB="_blank",hB="http://localhost";class BS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dB(t,e,n,r=lB,s=cB){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d=Object.assign(Object.assign({},aB),{width:r.toString(),height:s.toString(),top:a,left:c}),f=Mn().toLowerCase();n&&(u=oI(f)?uB:n),iI(f)&&(e=e||hB,d.scrollbars="yes");const m=Object.entries(d).reduce((_,[w,T])=>`${_}${w}=${T},`,"");if(M8(f)&&u!=="_self")return fB(e||"",u),new BS(null);const v=window.open(e||"",u,m);Me(v,t,"popup-blocked");try{v.focus()}catch{}return new BS(v)}function fB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pB="__/auth/handler",mB="emulator/auth/handler",gB=encodeURIComponent("fac");async function HS(t,e,n,r,s,a){Me(t.config.authDomain,t,"auth-domain-config-required"),Me(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:yc,eventId:s};if(e instanceof gI){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",dL(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,v]of Object.entries({}))c[m]=v}if(e instanceof Xh){const m=e.getScopes().filter(v=>v!=="");m.length>0&&(c.scopes=m.join(","))}t.tenantId&&(c.tid=t.tenantId);const u=c;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const d=await t._getAppCheckToken(),f=d?`#${gB}=${encodeURIComponent(d)}`:"";return`${yB(t)}?${jh(u).slice(1)}${f}`}function yB({config:t}){return t.emulator?W_(t,mB):`https://${t.authDomain}/${pB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay="webStorageSupport";class vB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xI,this._completeRedirectFn=Hj,this._overrideRedirectResult=Uj}async _openPopup(e,n,r,s){var a;ws((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await HS(e,n,r,dv(),s);return dB(e,c,tb())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await HS(e,n,r,dv(),s);return wj(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(ws(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await oB(e),r=new $j(e);return n.register("authEvent",s=>(Me(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ay,{type:ay},s=>{var a;const c=(a=s?.[0])===null||a===void 0?void 0:a[ay];c!==void 0&&n(!!c),ni(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Xj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return hI()||sI()||Z_()}}const _B=vB;var FS="@firebase/auth",$S="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function EB(t){Aa(new vo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;Me(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:c,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dI(t)},f=new U8(r,s,a,d);return X8(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Aa(new vo("auth-internal",e=>{const n=Va(e.getProvider("auth").getImmediate());return(r=>new bB(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ni(FS,$S,wB(t)),Ni(FS,$S,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xB=5*60,TB=hC("authIdTokenMaxAge")||xB;let qS=null;const SB=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>TB)return;const s=n?.token;qS!==s&&(qS=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function AB(t=l_()){const e=tm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=K8(t,{popupRedirectResolver:_B,persistence:[Ij,vj,xI]}),r=hC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=SB(a.toString());fj(n,c,()=>c(n.currentUser)),dj(n,u=>c(u))}}const s=lC("auth");return s&&W8(n,`http://${s}`),n}function RB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}j8({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=ki("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",RB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});EB("Browser");const CB={apiKey:"AIzaSyAO9TXM7A0SNeiEXzYo27fW0wdTXqXDEyc",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},rb=pC(CB),ri=G7(rb),ib=AB(rb),NB=F9(rb,"us-central1"),II={1:"A title on the very top, a large textbar under it and a list of small images on the bottom",2:"A row of images, each with a small text caption below",3:"A mermaid flowchart with a text description at the bottom",4:"A mermaid mindmap with a text description at the bottom",5:"A mermaid piechart with a text description at the bottom",6:"A mermaid quadrant chart with a text description at the bottom",7:"A large image on the left, a title on the top-right and a text description on the bottom-right",8:"A large image on the right, a title on the top-left and a list of small images on the bottom-left",9:"A video player at the top, a text caption below",12:"A single GIF on the left, a bulleted list on the right",13:"A large video on the right, a title and a text on the left"},IB={1:"[title, textbar, [image1_prompt, image2_prompt, ...]]",2:"[[image1_prompt, caption1], [image2_prompt, caption2], ...]",3:"[mermaid_flowchart, description]",4:"[mermaid_mindmap, description]",5:"[mermaid_piechart, description]",6:"[mermaid_quadrant_chart, description]",7:"[image_left_prompt, title, description]",8:"[image_right_prompt, title, [image1_prompt, image2_prompt, ...]]",9:"[video_prompt, caption]",12:"[gif_prompt, [bullet1, bullet2, ...]]",13:"[title, text, video_prompt]"},DB=Object.freeze(Object.defineProperty({__proto__:null,LAYOUT_SCHEMA:IB,LAYOUT_TYPES:II},Symbol.toStringTag,{value:"Module"})),kB=(t,e,n,r)=>`Return ONLY a valid JSON array. Do not include markdown formatting, code blocks, or any text before or after the JSON.
        
        RULES
        • Each object = exactly one tag from SCHEMA; no new tags.
        • You should educate the user about the concept by filling out the SCHEMA with the tags.
        • Use tags to explain the concept in a structured way.
        • Tone: encouraging, professional
        REMEMBER: THIS IS REALLY IMPORTANT 🚨: Focus strictly on the main topic. The provided context should be used only to clarify the topic or provide concrete examples — not as the focus of the explanation. If the context is irrelevant or distracting, ignore it entirely

        OUTPUT FORMAT
        Return ONLY a valid JSON array like this: ["item1", "item2", "item3"]
        NO markdown code blocks, NO explanations, NO extra text.

        INPUT:
        MESSAGE: ${e}
        SCHEMA: ${r}`,MB=(t,e)=>{const n=(r,s)=>`Respond ONLY with a valid JSON array like ["topic1", "topic2"].
        Instructions:
        - Suggest exactly ${r}-${s} logical next topics.
        - Each topic <4 words, double‑quoted.
        - No explanation or extra text.
  
    Concept: ${t}`;switch(e){case"explain":return n(4,5);case"argue":return n(3,5);case"answer":return n(2,3);default:return n(3,5)}},PB=(t,e)=>`RETURN ONLY THE EMOJI CORRESPONDING TO THE CONCEPT "${t}".`,OB=(t,e)=>`Choose the best html layout the would explain "${t} in the most clear way. Reply with the number".
        - Ensure it visually represents the concept.
        - Return ONLY the layout number as an integer.
        LAYOUT TYPES:
        ${JSON.stringify(II)}`,DI=t=>{let e=t.replace(/```json\s*\n?/gi,"").replace(/```\s*$/gi,"");e=e.trim();const n=e.match(/\[[\s\S]*\]|\{[\s\S]*\}/);return n&&(e=n[0]),e},xm=async t=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const e=t.trim();if(!e)throw new Error("Message cannot be empty or just whitespace");const r=await q9(NB,"groqChat")({message:e});return console.log("groqChat response:",r.data),r.data.response}catch(e){throw console.error("Firebase function error:",e),console.error("Message sent:",t),e}},VB=async t=>{try{const e=await xm(MB(t,"default"));console.log("Suggestions response:",e);const n=DI(e),r=JSON.parse(n);return Array.isArray(r)?r:[]}catch(e){return console.error("Error fetching suggestions:",e),[]}},LB=async t=>{try{const e=await xm(PB(t,"default"));return console.log("Icon response:",e),e||"✨"}catch(e){return console.error("Error fetching icon:",e),"✨"}},zB=async t=>{try{const e=await xm(OB(t,"default"));console.log("Layout response:",e);const n=e.replace(/[^\d]/g,""),r=parseInt(n);return isNaN(r)||r<1||r>13?(console.warn(`Invalid layout number: ${r}, defaulting to 1`),1):r}catch(e){return console.error("Error fetching layout:",e),1}},UB=async(t,e,n,r)=>{try{const a=(await iC(()=>Promise.resolve().then(()=>DB),void 0)).LAYOUT_SCHEMA[n.toString()],c=await xm(kB(e,t,r,a));console.log("Content response:",c);const u=DI(c),d=JSON.parse(u);return Array.isArray(d)?d:[]}catch(s){return console.error("Error fetching content:",s),[]}},jB=async(t,e="",n="default")=>{try{const r=await zB(t);console.log("Selected layout:",r);const[s,a,c]=await Promise.all([UB(t,e,r,n),VB(t),LB(t)]);return console.log("Generated content:",s),console.log("Generated suggestions:",a),console.log("Generated icon:",c),{layout:r,content:s,suggestions:a,icon:c,title:t,fullText:t}}catch(r){return console.error("Error in generateNodeContent:",r),{layout:1,content:[t,"Content loading failed",[]],suggestions:[],icon:"✨",title:t,fullText:t}}};var BB={};const HB="AIzaSyD2LVnTgBbk-5Wo1V2sCmY9ebcmIPdS1ng",FB="93fe2cec9d77f4202",$B="https://www.googleapis.com/customsearch/v1",qB=BB.VITE_TENOR_API_KEY||"",GB="https://g.tenor.com/v1/search",YB="AIzaSyDxTJKoi1S8YjJZD12QTa4F9hV8fN8pNqo",KB="https://www.googleapis.com/youtube/v3/search",Pu=new Map,Ou=new Map,Vu=new Map,Ah=async t=>{if(Pu.has(t))return Pu.get(t);try{const e=encodeURIComponent(t),n=`${$B}?key=${HB}&cx=${FB}&q=${e}&searchType=image&num=1&safe=active`,r=await fetch(n);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.items&&s.items.length>0){const c=s.items[0],u=c.link||c.pagemap?.cse_image?.[0]?.src;if(u)return Pu.set(t,u),u}const a=`https://via.placeholder.com/640x360/e5e7eb/6b7280?text=${e}`;return Pu.set(t,a),a}catch(e){console.error("Error fetching Google image:",e);const n="https://via.placeholder.com/640x360/ef4444/ffffff?text=Image+Error";return Pu.set(t,n),n}},XB=async t=>{if(Ou.has(t))return Ou.get(t);try{const e=encodeURIComponent("explained "+t),n=`${GB}?key=${qB}&q=${e}&limit=1&media_filter=basic&contentfilter=medium`,r=await fetch(n);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.results&&s.results.length>0){const c=s.results[0],u=c.media[0]?.gif?.url||c.media[0]?.mediumgif?.url||c.media[0]?.tinygif?.url;if(u)return Ou.set(t,u),u}const a=`https://via.placeholder.com/300x200/9333ea/ffffff?text=${e}+GIF`;return Ou.set(t,a),a}catch(e){console.error("Error fetching Tenor GIF:",e);const n="https://via.placeholder.com/300x200/ef4444/ffffff?text=GIF+Error";return Ou.set(t,n),n}},kI=async t=>{if(Vu.has(t))return Vu.get(t);try{const e=encodeURIComponent(t),n=`${KB}?key=${YB}&q=${e}&part=snippet&type=video&maxResults=1&videoEmbeddable=true&safeSearch=strict`,r=await fetch(n);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.items&&s.items.length>0){const c=s.items[0].id.videoId;if(c)return Vu.set(t,c),c}const a="dQw4w9WgXcQ";return Vu.set(t,a),a}catch(e){console.error("Error fetching YouTube video:",e);const n="dQw4w9WgXcQ";return Vu.set(t,n),n}},MI=t=>`https://www.youtube.com/embed/${t}`;async function Tm(t){const n=(await iC(()=>import("./mermaid.core-BIWRZ7pD.js").then(a=>a.bo),[])).default??window.mermaid?.mermaidAPI;window.___mermaidInitialised||(n.initialize({startOnLoad:!1,theme:"default",securityLevel:"loose",fontFamily:"inherit"}),window.___mermaidInitialised=!0);let r;try{r=(await n.render("m_"+Math.random().toString(36).slice(2),t.trim())).svg}catch(a){throw a}return new DOMParser().parseFromString(r,"image/svg+xml").documentElement}const WB=async(t,e,n)=>{let r="";try{switch(t){case 1:r=await GS(e,n);break;case 2:r=await QB(e,n);break;case 3:r=await ZB(e,n);break;case 4:r=await JB(e,n);break;case 5:r=await eH(e,n);break;case 6:r=await tH(e,n);break;case 7:r=await nH(e,n);break;case 8:r=await rH(e,n);break;case 9:r=await iH(e,n);break;case 12:r=await sH(e,n);break;case 13:r=await oH(e,n);break;default:r=await GS(e,n)}}catch(s){console.error("Error parsing layout content:",s),r='<div class="error-content">Error loading content</div>'}return{html:r}};async function GS(t,e){const[n,r,s]=t;let a=`
        <div class="layout-1">
            <h2 class="layout-title">${n||"Title"}</h2>
            <div class="layout-textbar">${r||"Content"}</div>
            <div class="layout-images">
    `;return Array.isArray(s)&&(await Promise.all(s.map(u=>Ah(u).catch(()=>null)))).forEach((u,d)=>{u?a+=`<img class="layout-small-image" src="${u}" alt="Image ${d+1}" />`:a+=`<div class="image-error">Error loading image ${d+1}</div>`}),a+=`
            </div>
        </div>
    `,a}async function QB(t,e){let n='<div class="layout-2">';const r=[];return t.forEach(a=>{if(Array.isArray(a)&&a.length>=2){const[c,u]=a;r.push(Ah(c).then(d=>({url:d,caption:u})).catch(()=>({url:null,caption:u})))}}),(await Promise.all(r)).forEach(({url:a,caption:c},u)=>{a?n+=`
                <div class="layout-image-caption">
                    <img class="layout-image" src="${a}" alt="Image ${u+1}" />
                    <p class="layout-caption">${c}</p>
                </div>
            `:n+=`
                <div class="layout-image-caption">
                    <div class="image-error">Error loading image ${u+1}</div>
                    <p class="layout-caption">${c}</p>
                </div>
            `}),n+="</div>",n}async function ZB(t,e){const[n,r]=t;let a=`
        <div class="layout-3">
            <div id="${`mermaid-${e}`}" class="layout-mermaid">Loading diagram...</div>
            <p class="layout-description">${r||""}</p>
        </div>
    `;try{const c=await Tm(n);a=a.replace("Loading diagram...",c.outerHTML)}catch{a=a.replace("Loading diagram...",'<div class="mermaid-error">Error loading diagram</div>')}return a}async function JB(t,e){const[n,r]=t;let a=`
        <div class="layout-4">
            <div id="${`mermaid-${e}`}" class="layout-mermaid">Loading mindmap...</div>
            <p class="layout-description">${r||""}</p>
        </div>
    `;try{const c=await Tm(n);a=a.replace("Loading mindmap...",c.outerHTML)}catch{a=a.replace("Loading mindmap...",'<div class="mermaid-error">Error loading mindmap</div>')}return a}async function eH(t,e){const[n,r]=t;let a=`
        <div class="layout-5">
            <div id="${`mermaid-${e}`}" class="layout-mermaid">Loading piechart...</div>
            <p class="layout-description">${r||""}</p>
        </div>
    `;try{const c=await Tm(n);a=a.replace("Loading piechart...",c.outerHTML)}catch{a=a.replace("Loading piechart...",'<div class="mermaid-error">Error loading piechart</div>')}return a}async function tH(t,e){const[n,r]=t;let a=`
        <div class="layout-6">
            <div id="${`mermaid-${e}`}" class="layout-mermaid">Loading quadrant chart...</div>
            <p class="layout-description">${r||""}</p>
        </div>
    `;try{const c=await Tm(n);a=a.replace("Loading quadrant chart...",c.outerHTML)}catch{a=a.replace("Loading quadrant chart...",'<div class="mermaid-error">Error loading quadrant chart</div>')}return a}async function nH(t,e){const[n,r,s]=t,a=`img-${e}`;try{const c=await Ah(n);return`
            <div class="layout-7">
                <div class="layout-left">
                    <img id="${a}" class="layout-large-image" src="${c}" alt="Generated Image" />
                </div>
                <div class="layout-right">
                    <h2 class="layout-title">${r||"Title"}</h2>
                    <p class="layout-description">${s||""}</p>
                </div>
            </div>
        `}catch{return`
            <div class="layout-7">
                <div class="layout-left">
                    <div class="image-error">Error loading image</div>
                </div>
                <div class="layout-right">
                    <h2 class="layout-title">${r||"Title"}</h2>
                    <p class="layout-description">${s||""}</p>
                </div>
            </div>
        `}}async function rH(t,e){const[n,r,s]=t,a=`img-main-${e}`;try{const c=await Ah(n);let u=`
            <div class="layout-8">
                <div class="layout-left">
                    <h2 class="layout-title">${r||"Title"}</h2>
                    <div class="layout-small-images">
        `;return Array.isArray(s)&&(await Promise.all(s.map(f=>Ah(f).catch(()=>null)))).forEach((f,m)=>{f?u+=`<img class="layout-small-image" src="${f}" alt="Small Image ${m+1}" />`:u+=`<div class="image-error">Error loading image ${m+1}</div>`}),u+=`
                    </div>
                </div>
                <div class="layout-right">
                    <img id="${a}" class="layout-large-image" src="${c}" alt="Main Image" />
                </div>
            </div>
        `,u}catch{return`
            <div class="layout-8">
                <div class="layout-left">
                    <h2 class="layout-title">${r||"Title"}</h2>
                    <div class="layout-small-images">
                        <div class="image-error">Error loading images</div>
                    </div>
                </div>
                <div class="layout-right">
                    <div class="image-error">Error loading main image</div>
                </div>
            </div>
        `}}async function iH(t,e){const[n,r]=t,s=`video-${e}`;try{const a=await kI(n),c=MI(a);return`
            <div class="layout-9">
                <div id="${s}" class="layout-video">
                    <iframe src="${c}" frameborder="0" allowfullscreen></iframe>
                </div>
                <p class="layout-caption">${r||""}</p>
            </div>
        `}catch{return`
            <div class="layout-9">
                <div id="${s}" class="layout-video">
                    <div class="video-error">Error loading video</div>
                </div>
                <p class="layout-caption">${r||""}</p>
            </div>
        `}}async function sH(t,e){const[n,r]=t,s=`gif-${e}`;try{const a=await XB(n);let c=`
            <div class="layout-12">
                <div class="layout-left">
                    <img id="${s}" class="layout-gif" src="${a}" alt="Generated GIF" />
                </div>
                <div class="layout-right">
                    <ul class="layout-bullet-list">
        `;return Array.isArray(r)&&r.forEach(u=>{c+=`<li>${u}</li>`}),c+=`
                    </ul>
                </div>
            </div>
        `,c}catch{let c=`
            <div class="layout-12">
                <div class="layout-left">
                    <div class="gif-error">Error loading GIF</div>
                </div>
                <div class="layout-right">
                    <ul class="layout-bullet-list">
        `;return Array.isArray(r)&&r.forEach(u=>{c+=`<li>${u}</li>`}),c+=`
                    </ul>
                </div>
            </div>
        `,c}}async function oH(t,e){const[n,r,s]=t,a=`video-${e}`;try{const c=await kI(s),u=MI(c);return`
            <div class="layout-13">
                <div class="layout-left">
                    <h2 class="layout-title">${n||"Title"}</h2>
                    <p class="layout-text">${r||""}</p>
                </div>
                <div class="layout-right">
                    <div id="${a}" class="layout-video">
                        <iframe src="${u}" frameborder="0" allowfullscreen></iframe>
                    </div>
                </div>
            </div>
        `}catch{return`
            <div class="layout-13">
                <div class="layout-left">
                    <h2 class="layout-title">${n||"Title"}</h2>
                    <p class="layout-text">${r||""}</p>
                </div>
                <div class="layout-right">
                    <div id="${a}" class="layout-video">
                        <div class="video-error">Error loading video</div>
                    </div>
                </div>
            </div>
        `}}const PI=M.createContext(null),OI=(t,e,n,r,s,a,c,u,d,f,m,v,_,w,T)=>{console.log(1);const R=s.find(B=>B.id===e);if(!R)return null;console.log(2);const C=R.data.tokenColors||{};if(console.log(3),!v){const B=t.myConcept||t.word;if(C[B])return console.log(`Token "${B}" is already colored, ignoring click`),null}console.log(4);let D;r==="staticEditable"?D=hT():D=d?P6(d):hT();let z=null;if(v)z=_;else{const B={...C};t.myConcept?B[t.myConcept]=D:B[t.word]=D,a(X=>X.map(I=>I.id===e?{...I,data:{...I.data,tokenColors:B}}:I));const U=O6(n);z=z6(U,t.myConcept||t.word,"Loading...","",D,r,e);const q=U6(e,z.id,D,m);c([{type:"add",item:z}]),u([{type:"add",item:q}])}return z&&(z.data.isLoading=!0,z.data.previousNode=e),v&&a(B=>B.map(U=>U.id===z?.id?{...U,data:{...z.data}}:U)),jB(t.myConcept||t.word,f||"",w||"default").then(async B=>{const{html:U}=await WB(B.layout,B.content,z?.id||"");a(q=>q.map(X=>X.id===z?.id?{...X,data:{...X.data,title:B.title,full_text:B.fullText,suggestions:B.suggestions,layout:B.layout,contents:[U],isLoading:!1,icon:B.icon}}:X))}).catch(B=>{console.error("Error generating node content:",B),a(U=>U.map(q=>q.id===z?.id?{...q,data:{...q.data,title:t.word,full_text:t.word,suggestions:[],layout:1,contents:[`<div class="error-content">Failed to load content for "${t.word}"</div>`],isLoading:!1,icon:"❌"}}:q))}),D},aH=({children:t,nodes:e,onNodesChange:n,onEdgesChange:r,setNodes:s,showExplanation:a})=>{const c=(u,d,f,m,v,_,w,T,R,C)=>OI(u,d,f,m,e,s,n,r,v,_,w,T,R,C);return S.jsx(PI.Provider,{value:{handleTokenClick:c,setNodes:s,showExplanation:a},children:t})},VI=()=>{const t=M.useContext(PI);if(!t)throw new Error("useTokenInteraction must be used within a TokenInteractionProvider");return t};function lH({title:t,titleId:e,...n},r){return M.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?M.createElement("title",{id:e},t):null,M.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const cH=M.forwardRef(lH);function uH({title:t,titleId:e,...n},r){return M.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?M.createElement("title",{id:e},t):null,M.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const hH=M.forwardRef(uH);function dH({title:t,titleId:e,...n},r){return M.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?M.createElement("title",{id:e},t):null,M.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const fH=M.forwardRef(dH);function pH({title:t,titleId:e,...n},r){return M.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?M.createElement("title",{id:e},t):null,M.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const mH=M.forwardRef(pH);function gH({title:t,titleId:e,...n},r){return M.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?M.createElement("title",{id:e},t):null,M.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),M.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const yH=M.forwardRef(gH);function vH({title:t,titleId:e,...n},r){return M.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?M.createElement("title",{id:e},t):null,M.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const _H=M.forwardRef(vH);function bH({title:t,titleId:e,...n},r){return M.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?M.createElement("title",{id:e},t):null,M.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const wH=M.forwardRef(bH),sb=M.createContext({});function ob(t){const e=M.useRef(null);return e.current===null&&(e.current=t()),e.current}const ab=typeof window<"u",LI=ab?M.useLayoutEffect:M.useEffect,Sm=M.createContext(null);function lb(t,e){t.indexOf(e)===-1&&t.push(e)}function cb(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Es=(t,e,n)=>n>e?e:n<t?t:n;let ub=()=>{};const xs={},zI=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function UI(t){return typeof t=="object"&&t!==null}const jI=t=>/^0[^.\s]+$/u.test(t);function hb(t){let e;return()=>(e===void 0&&(e=t()),e)}const Br=t=>t,EH=(t,e)=>n=>e(t(n)),Qh=(...t)=>t.reduce(EH),Rh=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class db{constructor(){this.subscriptions=[]}add(e){return lb(this.subscriptions,e),()=>cb(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let a=0;a<s;a++){const c=this.subscriptions[a];c&&c(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Pi=t=>t*1e3,Oi=t=>t/1e3;function BI(t,e){return e?t*(1e3/e):0}const HI=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,xH=1e-7,TH=12;function SH(t,e,n,r,s){let a,c,u=0;do c=e+(n-e)/2,a=HI(c,r,s)-t,a>0?n=c:e=c;while(Math.abs(a)>xH&&++u<TH);return c}function Zh(t,e,n,r){if(t===e&&n===r)return Br;const s=a=>SH(a,0,1,t,n);return a=>a===0||a===1?a:HI(s(a),e,r)}const FI=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,$I=t=>e=>1-t(1-e),qI=Zh(.33,1.53,.69,.99),fb=$I(qI),GI=FI(fb),YI=t=>(t*=2)<1?.5*fb(t):.5*(2-Math.pow(2,-10*(t-1))),pb=t=>1-Math.sin(Math.acos(t)),KI=$I(pb),XI=FI(pb),AH=Zh(.42,0,1,1),RH=Zh(0,0,.58,1),WI=Zh(.42,0,.58,1),CH=t=>Array.isArray(t)&&typeof t[0]!="number",QI=t=>Array.isArray(t)&&typeof t[0]=="number",NH={linear:Br,easeIn:AH,easeInOut:WI,easeOut:RH,circIn:pb,circInOut:XI,circOut:KI,backIn:fb,backInOut:GI,backOut:qI,anticipate:YI},IH=t=>typeof t=="string",YS=t=>{if(QI(t)){ub(t.length===4);const[e,n,r,s]=t;return Zh(e,n,r,s)}else if(IH(t))return NH[t];return t},zf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function DH(t,e){let n=new Set,r=new Set,s=!1,a=!1;const c=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function d(m){c.has(m)&&(f.schedule(m),t()),m(u)}const f={schedule:(m,v=!1,_=!1)=>{const T=_&&s?n:r;return v&&c.add(m),T.has(m)||T.add(m),m},cancel:m=>{r.delete(m),c.delete(m)},process:m=>{if(u=m,s){a=!0;return}s=!0,[n,r]=[r,n],n.forEach(d),n.clear(),s=!1,a&&(a=!1,f.process(m))}};return f}const kH=40;function ZI(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,c=zf.reduce((B,U)=>(B[U]=DH(a),B),{}),{setup:u,read:d,resolveKeyframes:f,preUpdate:m,update:v,preRender:_,render:w,postRender:T}=c,R=()=>{const B=xs.useManualTiming?s.timestamp:performance.now();n=!1,xs.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(B-s.timestamp,kH),1)),s.timestamp=B,s.isProcessing=!0,u.process(s),d.process(s),f.process(s),m.process(s),v.process(s),_.process(s),w.process(s),T.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(R))},C=()=>{n=!0,r=!0,s.isProcessing||t(R)};return{schedule:zf.reduce((B,U)=>{const q=c[U];return B[U]=(X,I=!1,A=!1)=>(n||C(),q.schedule(X,I,A)),B},{}),cancel:B=>{for(let U=0;U<zf.length;U++)c[zf[U]].cancel(B)},state:s,steps:c}}const{schedule:Et,cancel:So,state:wn,steps:ly}=ZI(typeof requestAnimationFrame<"u"?requestAnimationFrame:Br,!0);let rp;function MH(){rp=void 0}const Jn={now:()=>(rp===void 0&&Jn.set(wn.isProcessing||xs.useManualTiming?wn.timestamp:performance.now()),rp),set:t=>{rp=t,queueMicrotask(MH)}},JI=t=>e=>typeof e=="string"&&e.startsWith(t),mb=JI("--"),PH=JI("var(--"),gb=t=>PH(t)?OH.test(t.split("/*")[0].trim()):!1,OH=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Sc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ch={...Sc,transform:t=>Es(0,1,t)},Uf={...Sc,default:1},th=t=>Math.round(t*1e5)/1e5,yb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function VH(t){return t==null}const LH=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,vb=(t,e)=>n=>!!(typeof n=="string"&&LH.test(n)&&n.startsWith(t)||e&&!VH(n)&&Object.prototype.hasOwnProperty.call(n,e)),eD=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,a,c,u]=r.match(yb);return{[t]:parseFloat(s),[e]:parseFloat(a),[n]:parseFloat(c),alpha:u!==void 0?parseFloat(u):1}},zH=t=>Es(0,255,t),cy={...Sc,transform:t=>Math.round(zH(t))},ga={test:vb("rgb","red"),parse:eD("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+cy.transform(t)+", "+cy.transform(e)+", "+cy.transform(n)+", "+th(Ch.transform(r))+")"};function UH(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const gv={test:vb("#"),parse:UH,transform:ga.transform},Jh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Zs=Jh("deg"),Vi=Jh("%"),Ve=Jh("px"),jH=Jh("vh"),BH=Jh("vw"),KS={...Vi,parse:t=>Vi.parse(t)/100,transform:t=>Vi.transform(t*100)},Fl={test:vb("hsl","hue"),parse:eD("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Vi.transform(th(e))+", "+Vi.transform(th(n))+", "+th(Ch.transform(r))+")"},Wt={test:t=>ga.test(t)||gv.test(t)||Fl.test(t),parse:t=>ga.test(t)?ga.parse(t):Fl.test(t)?Fl.parse(t):gv.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ga.transform(t):Fl.transform(t),getAnimatableNone:t=>{const e=Wt.parse(t);return e.alpha=0,Wt.transform(e)}},HH=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function FH(t){return isNaN(t)&&typeof t=="string"&&(t.match(yb)?.length||0)+(t.match(HH)?.length||0)>0}const tD="number",nD="color",$H="var",qH="var(",XS="${}",GH=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Nh(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const u=e.replace(GH,d=>(Wt.test(d)?(r.color.push(a),s.push(nD),n.push(Wt.parse(d))):d.startsWith(qH)?(r.var.push(a),s.push($H),n.push(d)):(r.number.push(a),s.push(tD),n.push(parseFloat(d))),++a,XS)).split(XS);return{values:n,split:u,indexes:r,types:s}}function rD(t){return Nh(t).values}function iD(t){const{split:e,types:n}=Nh(t),r=e.length;return s=>{let a="";for(let c=0;c<r;c++)if(a+=e[c],s[c]!==void 0){const u=n[c];u===tD?a+=th(s[c]):u===nD?a+=Wt.transform(s[c]):a+=s[c]}return a}}const YH=t=>typeof t=="number"?0:Wt.test(t)?Wt.getAnimatableNone(t):t;function KH(t){const e=rD(t);return iD(t)(e.map(YH))}const Ao={test:FH,parse:rD,createTransformer:iD,getAnimatableNone:KH};function uy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function XH({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,a=0,c=0;if(!e)s=a=c=n;else{const u=n<.5?n*(1+e):n+e-n*e,d=2*n-u;s=uy(d,u,t+1/3),a=uy(d,u,t),c=uy(d,u,t-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(c*255),alpha:r}}function Up(t,e){return n=>n>0?e:t}const At=(t,e,n)=>t+(e-t)*n,hy=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},WH=[gv,ga,Fl],QH=t=>WH.find(e=>e.test(t));function WS(t){const e=QH(t);if(!e)return!1;let n=e.parse(t);return e===Fl&&(n=XH(n)),n}const QS=(t,e)=>{const n=WS(t),r=WS(e);if(!n||!r)return Up(t,e);const s={...n};return a=>(s.red=hy(n.red,r.red,a),s.green=hy(n.green,r.green,a),s.blue=hy(n.blue,r.blue,a),s.alpha=At(n.alpha,r.alpha,a),ga.transform(s))},yv=new Set(["none","hidden"]);function ZH(t,e){return yv.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function JH(t,e){return n=>At(t,e,n)}function _b(t){return typeof t=="number"?JH:typeof t=="string"?gb(t)?Up:Wt.test(t)?QS:nF:Array.isArray(t)?sD:typeof t=="object"?Wt.test(t)?QS:eF:Up}function sD(t,e){const n=[...t],r=n.length,s=t.map((a,c)=>_b(a)(a,e[c]));return a=>{for(let c=0;c<r;c++)n[c]=s[c](a);return n}}function eF(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=_b(t[s])(t[s],e[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function tF(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],c=t.indexes[a][r[a]],u=t.values[c]??0;n[s]=u,r[a]++}return n}const nF=(t,e)=>{const n=Ao.createTransformer(e),r=Nh(t),s=Nh(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?yv.has(t)&&!s.values.length||yv.has(e)&&!r.values.length?ZH(t,e):Qh(sD(tF(r,s),s.values),n):Up(t,e)};function oD(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?At(t,e,n):_b(t)(t,e)}const rF=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Et.update(e,n),stop:()=>So(e),now:()=>wn.isProcessing?wn.timestamp:Jn.now()}},aD=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let a=0;a<s;a++)r+=Math.round(t(a/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},jp=2e4;function bb(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<jp;)e+=n,r=t.next(e);return e>=jp?1/0:e}function iF(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(bb(r),jp);return{type:"keyframes",ease:a=>r.next(s*a).value/e,duration:Oi(s)}}const sF=5;function lD(t,e,n){const r=Math.max(e-sF,0);return BI(n-t(r),e-r)}const Mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},dy=.001;function oF({duration:t=Mt.duration,bounce:e=Mt.bounce,velocity:n=Mt.velocity,mass:r=Mt.mass}){let s,a,c=1-e;c=Es(Mt.minDamping,Mt.maxDamping,c),t=Es(Mt.minDuration,Mt.maxDuration,Oi(t)),c<1?(s=f=>{const m=f*c,v=m*t,_=m-n,w=vv(f,c),T=Math.exp(-v);return dy-_/w*T},a=f=>{const v=f*c*t,_=v*n+n,w=Math.pow(c,2)*Math.pow(f,2)*t,T=Math.exp(-v),R=vv(Math.pow(f,2),c);return(-s(f)+dy>0?-1:1)*((_-w)*T)/R}):(s=f=>{const m=Math.exp(-f*t),v=(f-n)*t+1;return-dy+m*v},a=f=>{const m=Math.exp(-f*t),v=(n-f)*(t*t);return m*v});const u=5/t,d=lF(s,a,u);if(t=Pi(t),isNaN(d))return{stiffness:Mt.stiffness,damping:Mt.damping,duration:t};{const f=Math.pow(d,2)*r;return{stiffness:f,damping:c*2*Math.sqrt(r*f),duration:t}}}const aF=12;function lF(t,e,n){let r=n;for(let s=1;s<aF;s++)r=r-t(r)/e(r);return r}function vv(t,e){return t*Math.sqrt(1-e*e)}const cF=["duration","bounce"],uF=["stiffness","damping","mass"];function ZS(t,e){return e.some(n=>t[n]!==void 0)}function hF(t){let e={velocity:Mt.velocity,stiffness:Mt.stiffness,damping:Mt.damping,mass:Mt.mass,isResolvedFromDuration:!1,...t};if(!ZS(t,uF)&&ZS(t,cF))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,a=2*Es(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Mt.mass,stiffness:s,damping:a}}else{const n=oF(t);e={...e,...n,mass:Mt.mass},e.isResolvedFromDuration=!0}return e}function Bp(t=Mt.visualDuration,e=Mt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],u={done:!1,value:a},{stiffness:d,damping:f,mass:m,duration:v,velocity:_,isResolvedFromDuration:w}=hF({...n,velocity:-Oi(n.velocity||0)}),T=_||0,R=f/(2*Math.sqrt(d*m)),C=c-a,D=Oi(Math.sqrt(d/m)),z=Math.abs(C)<5;r||(r=z?Mt.restSpeed.granular:Mt.restSpeed.default),s||(s=z?Mt.restDelta.granular:Mt.restDelta.default);let B;if(R<1){const q=vv(D,R);B=X=>{const I=Math.exp(-R*D*X);return c-I*((T+R*D*C)/q*Math.sin(q*X)+C*Math.cos(q*X))}}else if(R===1)B=q=>c-Math.exp(-D*q)*(C+(T+D*C)*q);else{const q=D*Math.sqrt(R*R-1);B=X=>{const I=Math.exp(-R*D*X),A=Math.min(q*X,300);return c-I*((T+R*D*C)*Math.sinh(A)+q*C*Math.cosh(A))/q}}const U={calculatedDuration:w&&v||null,next:q=>{const X=B(q);if(w)u.done=q>=v;else{let I=q===0?T:0;R<1&&(I=q===0?Pi(T):lD(B,q,X));const A=Math.abs(I)<=r,N=Math.abs(c-X)<=s;u.done=A&&N}return u.value=u.done?c:X,u},toString:()=>{const q=Math.min(bb(U),jp),X=aD(I=>U.next(q*I).value,q,30);return q+"ms "+X},toTransition:()=>{}};return U}Bp.applyToOptions=t=>{const e=iF(t,100,Bp);return t.ease=e.ease,t.duration=Pi(e.duration),t.type="keyframes",t};function _v({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:c,min:u,max:d,restDelta:f=.5,restSpeed:m}){const v=t[0],_={done:!1,value:v},w=A=>u!==void 0&&A<u||d!==void 0&&A>d,T=A=>u===void 0?d:d===void 0||Math.abs(u-A)<Math.abs(d-A)?u:d;let R=n*e;const C=v+R,D=c===void 0?C:c(C);D!==C&&(R=D-v);const z=A=>-R*Math.exp(-A/r),B=A=>D+z(A),U=A=>{const N=z(A),H=B(A);_.done=Math.abs(N)<=f,_.value=_.done?D:H};let q,X;const I=A=>{w(_.value)&&(q=A,X=Bp({keyframes:[_.value,T(_.value)],velocity:lD(B,A,_.value),damping:s,stiffness:a,restDelta:f,restSpeed:m}))};return I(0),{calculatedDuration:null,next:A=>{let N=!1;return!X&&q===void 0&&(N=!0,U(A),I(A)),q!==void 0&&A>=q?X.next(A-q):(!N&&U(A),_)}}}function dF(t,e,n){const r=[],s=n||xs.mix||oD,a=t.length-1;for(let c=0;c<a;c++){let u=s(t[c],t[c+1]);if(e){const d=Array.isArray(e)?e[c]||Br:e;u=Qh(d,u)}r.push(u)}return r}function fF(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const a=t.length;if(ub(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=dF(e,r,s),d=u.length,f=m=>{if(c&&m<t[0])return e[0];let v=0;if(d>1)for(;v<t.length-2&&!(m<t[v+1]);v++);const _=Rh(t[v],t[v+1],m);return u[v](_)};return n?m=>f(Es(t[0],t[a-1],m)):f}function pF(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Rh(0,e,r);t.push(At(n,1,s))}}function mF(t){const e=[0];return pF(e,t.length-1),e}function gF(t,e){return t.map(n=>n*e)}function yF(t,e){return t.map(()=>e||WI).splice(0,t.length-1)}function nh({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=CH(r)?r.map(YS):YS(r),a={done:!1,value:e[0]},c=gF(n&&n.length===e.length?n:mF(e),t),u=fF(c,e,{ease:Array.isArray(s)?s:yF(e,s)});return{calculatedDuration:t,next:d=>(a.value=u(d),a.done=d>=t,a)}}const vF=t=>t!==null;function wb(t,{repeat:e,repeatType:n="loop"},r,s=1){const a=t.filter(vF),u=s<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!u||r===void 0?a[u]:r}const _F={decay:_v,inertia:_v,tween:nh,keyframes:nh,spring:Bp};function cD(t){typeof t.type=="string"&&(t.type=_F[t.type])}class Eb{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const bF=t=>t/100;class xb extends Eb{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Jn.now()&&this.tick(Jn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;cD(e);const{type:n=nh,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:c=0}=e;let{keyframes:u}=e;const d=n||nh;d!==nh&&typeof u[0]!="number"&&(this.mixKeyframes=Qh(bF,oD(u[0],u[1])),u=[0,100]);const f=d({...e,keyframes:u});a==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...u].reverse(),velocity:-c})),f.calculatedDuration===null&&(f.calculatedDuration=bb(f));const{calculatedDuration:m}=f;this.calculatedDuration=m,this.resolvedDuration=m+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=f}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:c,resolvedDuration:u,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:m,repeat:v,repeatType:_,repeatDelay:w,type:T,onUpdate:R,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const D=this.currentTime-f*(this.playbackSpeed>=0?1:-1),z=this.playbackSpeed>=0?D<0:D>s;this.currentTime=Math.max(D,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let B=this.currentTime,U=r;if(v){const A=Math.min(this.currentTime,s)/u;let N=Math.floor(A),H=A%1;!H&&A>=1&&(H=1),H===1&&N--,N=Math.min(N,v+1),!!(N%2)&&(_==="reverse"?(H=1-H,w&&(H-=w/u)):_==="mirror"&&(U=c)),B=Es(0,1,H)*u}const q=z?{done:!1,value:m[0]}:U.next(B);a&&(q.value=a(q.value));let{done:X}=q;!z&&d!==null&&(X=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&X);return I&&T!==_v&&(q.value=wb(m,this.options,C,this.speed)),R&&R(q.value),I&&this.finish(),q}then(e,n){return this.finished.then(e,n)}get duration(){return Oi(this.calculatedDuration)}get time(){return Oi(this.currentTime)}set time(e){e=Pi(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Jn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Oi(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=rF,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Jn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function wF(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ya=t=>t*180/Math.PI,bv=t=>{const e=ya(Math.atan2(t[1],t[0]));return wv(e)},EF={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:bv,rotateZ:bv,skewX:t=>ya(Math.atan(t[1])),skewY:t=>ya(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},wv=t=>(t=t%360,t<0&&(t+=360),t),JS=bv,eA=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),tA=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),xF={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:eA,scaleY:tA,scale:t=>(eA(t)+tA(t))/2,rotateX:t=>wv(ya(Math.atan2(t[6],t[5]))),rotateY:t=>wv(ya(Math.atan2(-t[2],t[0]))),rotateZ:JS,rotate:JS,skewX:t=>ya(Math.atan(t[4])),skewY:t=>ya(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Ev(t){return t.includes("scale")?1:0}function xv(t,e){if(!t||t==="none")return Ev(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=xF,s=n;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=EF,s=u}if(!s)return Ev(e);const a=r[e],c=s[1].split(",").map(SF);return typeof a=="function"?a(c):c[a]}const TF=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return xv(n,e)};function SF(t){return parseFloat(t.trim())}const Ac=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Rc=new Set(Ac),nA=t=>t===Sc||t===Ve,AF=new Set(["x","y","z"]),RF=Ac.filter(t=>!AF.has(t));function CF(t){const e=[];return RF.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const ba={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>xv(e,"x"),y:(t,{transform:e})=>xv(e,"y")};ba.translateX=ba.x;ba.translateY=ba.y;const wa=new Set;let Tv=!1,Sv=!1,Av=!1;function uD(){if(Sv){const t=Array.from(wa).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=CF(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,c])=>{r.getValue(a)?.set(c)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Sv=!1,Tv=!1,wa.forEach(t=>t.complete(Av)),wa.clear()}function hD(){wa.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Sv=!0)})}function NF(){Av=!0,hD(),uD(),Av=!1}class Tb{constructor(e,n,r,s,a,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(wa.add(this),Tv||(Tv=!0,Et.read(hD),Et.resolveKeyframes(uD))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const a=s?.get(),c=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const u=r.readValue(n,c);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=c),s&&a===void 0&&s.set(e[0])}wF(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),wa.delete(this)}cancel(){this.state==="scheduled"&&(wa.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const IF=t=>t.startsWith("--");function DF(t,e,n){IF(e)?t.style.setProperty(e,n):t.style[e]=n}const kF=hb(()=>window.ScrollTimeline!==void 0),MF={};function PF(t,e){const n=hb(t);return()=>MF[e]??n()}const dD=PF(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ku=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,rA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ku([0,.65,.55,1]),circOut:Ku([.55,0,1,.45]),backIn:Ku([.31,.01,.66,-.59]),backOut:Ku([.33,1.53,.69,.99])};function fD(t,e){if(t)return typeof t=="function"?dD()?aD(t,e):"ease-out":QI(t)?Ku(t):Array.isArray(t)?t.map(n=>fD(n,e)||rA.easeOut):rA[t]}function OF(t,e,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:c="loop",ease:u="easeOut",times:d}={},f=void 0){const m={[e]:n};d&&(m.offset=d);const v=fD(u,s);Array.isArray(v)&&(m.easing=v);const _={delay:r,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:a+1,direction:c==="reverse"?"alternate":"normal"};return f&&(_.pseudoElement=f),t.animate(m,_)}function pD(t){return typeof t=="function"&&"applyToOptions"in t}function VF({type:t,...e}){return pD(t)&&dD()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class LF extends Eb{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:a,allowFlatten:c=!1,finalKeyframe:u,onComplete:d}=e;this.isPseudoElement=!!a,this.allowFlatten=c,this.options=e,ub(typeof e.type!="string");const f=VF(e);this.animation=OF(n,r,s,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const m=wb(s,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(m):DF(n,r,m),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Oi(Number(e))}get time(){return Oi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Pi(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&kF()?(this.animation.timeline=e,Br):n(this)}}const mD={anticipate:YI,backInOut:GI,circInOut:XI};function zF(t){return t in mD}function UF(t){typeof t.ease=="string"&&zF(t.ease)&&(t.ease=mD[t.ease])}const iA=10;class jF extends LF{constructor(e){UF(e),cD(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:a,...c}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const u=new xb({...c,autoplay:!1}),d=Pi(this.finishedTime??this.time);n.setWithVelocity(u.sample(d-iA).value,u.sample(d).value,iA),u.stop()}}const sA=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ao.test(t)||t==="0")&&!t.startsWith("url("));function BF(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function HF(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],c=sA(s,e),u=sA(a,e);return!c||!u?!1:BF(t)||(n==="spring"||pD(n))&&r}const FF=new Set(["opacity","clipPath","filter","transform"]),$F=hb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function qF(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:a,type:c}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=e.owner.getProps();return $F()&&n&&FF.has(n)&&(n!=="transform"||!f)&&!d&&!r&&s!=="mirror"&&a!==0&&c!=="inertia"}const GF=40;class YF extends Eb{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:c="loop",keyframes:u,name:d,motionValue:f,element:m,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Jn.now();const _={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:c,name:d,motionValue:f,element:m,...v},w=m?.KeyframeResolver||Tb;this.keyframeResolver=new w(u,(T,R,C)=>this.onKeyframesResolved(T,R,_,!C),d,f,m),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:a,type:c,velocity:u,delay:d,isHandoff:f,onUpdate:m}=r;this.resolvedAt=Jn.now(),HF(e,a,c,u)||((xs.instantAnimations||!d)&&m?.(wb(e,r,n)),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const _={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>GF?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},w=!f&&qF(_)?new jF({..._,element:_.motionValue.owner.current}):new xb(_);w.finished.then(()=>this.notifyFinished()).catch(Br),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),NF()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const KF=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function XF(t){const e=KF.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function gD(t,e,n=1){const[r,s]=XF(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const c=a.trim();return zI(c)?parseFloat(c):c}return gb(s)?gD(s,e,n+1):s}function Sb(t,e){return t?.[e]??t?.default??t}const yD=new Set(["width","height","top","left","right","bottom",...Ac]),WF={test:t=>t==="auto",parse:t=>t},vD=t=>e=>e.test(t),_D=[Sc,Ve,Vi,Zs,BH,jH,WF],oA=t=>_D.find(vD(t));function QF(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||jI(t):!0}const ZF=new Set(["brightness","contrast","saturate","opacity"]);function JF(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(yb)||[];if(!r)return t;const s=n.replace(r,"");let a=ZF.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+s+")"}const e$=/\b([a-z-]*)\(.*?\)/gu,Rv={...Ao,getAnimatableNone:t=>{const e=t.match(e$);return e?e.map(JF).join(" "):t}},aA={...Sc,transform:Math.round},t$={rotate:Zs,rotateX:Zs,rotateY:Zs,rotateZ:Zs,scale:Uf,scaleX:Uf,scaleY:Uf,scaleZ:Uf,skew:Zs,skewX:Zs,skewY:Zs,distance:Ve,translateX:Ve,translateY:Ve,translateZ:Ve,x:Ve,y:Ve,z:Ve,perspective:Ve,transformPerspective:Ve,opacity:Ch,originX:KS,originY:KS,originZ:Ve},Ab={borderWidth:Ve,borderTopWidth:Ve,borderRightWidth:Ve,borderBottomWidth:Ve,borderLeftWidth:Ve,borderRadius:Ve,radius:Ve,borderTopLeftRadius:Ve,borderTopRightRadius:Ve,borderBottomRightRadius:Ve,borderBottomLeftRadius:Ve,width:Ve,maxWidth:Ve,height:Ve,maxHeight:Ve,top:Ve,right:Ve,bottom:Ve,left:Ve,padding:Ve,paddingTop:Ve,paddingRight:Ve,paddingBottom:Ve,paddingLeft:Ve,margin:Ve,marginTop:Ve,marginRight:Ve,marginBottom:Ve,marginLeft:Ve,backgroundPositionX:Ve,backgroundPositionY:Ve,...t$,zIndex:aA,fillOpacity:Ch,strokeOpacity:Ch,numOctaves:aA},n$={...Ab,color:Wt,backgroundColor:Wt,outlineColor:Wt,fill:Wt,stroke:Wt,borderColor:Wt,borderTopColor:Wt,borderRightColor:Wt,borderBottomColor:Wt,borderLeftColor:Wt,filter:Rv,WebkitFilter:Rv},bD=t=>n$[t];function wD(t,e){let n=bD(t);return n!==Rv&&(n=Ao),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const r$=new Set(["auto","none","0"]);function i$(t,e,n){let r=0,s;for(;r<t.length&&!s;){const a=t[r];typeof a=="string"&&!r$.has(a)&&Nh(a).values.length&&(s=t[r]),r++}if(s&&n)for(const a of e)t[a]=wD(n,s)}class s$ extends Tb{constructor(e,n,r,s,a){super(e,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),gb(f))){const m=gD(f,n.current);m!==void 0&&(e[d]=m),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!yD.has(r)||e.length!==2)return;const[s,a]=e,c=oA(s),u=oA(a);if(c!==u)if(nA(c)&&nA(u))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else ba[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||QF(e[s]))&&r.push(s);r.length&&i$(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ba[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,c=r[a];r[a]=ba[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,d])=>{e.getValue(u).set(d)}),this.resolveNoneKeyframes()}}function o$(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=n?.[t]??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const ED=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function xD(t){return UI(t)&&"offsetHeight"in t}const lA=30,a$=t=>!isNaN(parseFloat(t));class l${constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const a=Jn.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty();s&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Jn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=a$(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new db);const r=this.events[e].add(n);return e==="change"?()=>{r(),Et.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Jn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>lA)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,lA);return BI(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function mc(t,e){return new l$(t,e)}const{schedule:Rb}=ZI(queueMicrotask,!1),Wr={x:!1,y:!1};function TD(){return Wr.x||Wr.y}function c$(t){return t==="x"||t==="y"?Wr[t]?null:(Wr[t]=!0,()=>{Wr[t]=!1}):Wr.x||Wr.y?null:(Wr.x=Wr.y=!0,()=>{Wr.x=Wr.y=!1})}function SD(t,e){const n=o$(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function cA(t){return!(t.pointerType==="touch"||TD())}function u$(t,e,n={}){const[r,s,a]=SD(t,n),c=u=>{if(!cA(u))return;const{target:d}=u,f=e(d,u);if(typeof f!="function"||!d)return;const m=v=>{cA(v)&&(f(v),d.removeEventListener("pointerleave",m))};d.addEventListener("pointerleave",m,s)};return r.forEach(u=>{u.addEventListener("pointerenter",c,s)}),a}const AD=(t,e)=>e?t===e?!0:AD(t,e.parentElement):!1,Cb=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,h$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function d$(t){return h$.has(t.tagName)||t.tabIndex!==-1}const ip=new WeakSet;function uA(t){return e=>{e.key==="Enter"&&t(e)}}function fy(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const f$=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=uA(()=>{if(ip.has(n))return;fy(n,"down");const s=uA(()=>{fy(n,"up")}),a=()=>fy(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function hA(t){return Cb(t)&&!TD()}function p$(t,e,n={}){const[r,s,a]=SD(t,n),c=u=>{const d=u.currentTarget;if(!hA(u))return;ip.add(d);const f=e(d,u),m=(w,T)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",_),ip.has(d)&&ip.delete(d),hA(w)&&typeof f=="function"&&f(w,{success:T})},v=w=>{m(w,d===window||d===document||n.useGlobalTarget||AD(d,w.target))},_=w=>{m(w,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",_,s)};return r.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",c,s),xD(u)&&(u.addEventListener("focus",f=>f$(f,s)),!d$(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),a}function RD(t){return UI(t)&&"ownerSVGElement"in t}function m$(t){return RD(t)&&t.tagName==="svg"}const Dn=t=>!!(t&&t.getVelocity),g$=[..._D,Wt,Ao],y$=t=>g$.find(vD(t)),Nb=M.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class v$ extends M.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=xD(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function _$({children:t,isPresent:e,anchorX:n,root:r}){const s=M.useId(),a=M.useRef(null),c=M.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=M.useContext(Nb);return M.useInsertionEffect(()=>{const{width:d,height:f,top:m,left:v,right:_}=c.current;if(e||!a.current||!d||!f)return;const w=n==="left"?`left: ${v}`:`right: ${_}`;a.current.dataset.motionPopId=s;const T=document.createElement("style");u&&(T.nonce=u);const R=r??document.head;return R.appendChild(T),T.sheet&&T.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${f}px !important;
            ${w}px !important;
            top: ${m}px !important;
          }
        `),()=>{R.removeChild(T),R.contains(T)&&R.removeChild(T)}},[e]),S.jsx(v$,{isPresent:e,childRef:a,sizeRef:c,children:M.cloneElement(t,{ref:a})})}const b$=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:c,anchorX:u,root:d})=>{const f=ob(w$),m=M.useId();let v=!0,_=M.useMemo(()=>(v=!1,{id:m,initial:e,isPresent:n,custom:s,onExitComplete:w=>{f.set(w,!0);for(const T of f.values())if(!T)return;r&&r()},register:w=>(f.set(w,!1),()=>f.delete(w))}),[n,f,r]);return a&&v&&(_={..._}),M.useMemo(()=>{f.forEach((w,T)=>f.set(T,!1))},[n]),M.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),c==="popLayout"&&(t=S.jsx(_$,{isPresent:n,anchorX:u,root:d,children:t})),S.jsx(Sm.Provider,{value:_,children:t})};function w$(){return new Map}function CD(t=!0){const e=M.useContext(Sm);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,a=M.useId();M.useEffect(()=>{if(t)return s(a)},[t]);const c=M.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,c]:[!0]}const jf=t=>t.key||"";function dA(t){const e=[];return M.Children.forEach(t,n=>{M.isValidElement(n)&&e.push(n)}),e}const fA=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:a="sync",propagate:c=!1,anchorX:u="left",root:d})=>{const[f,m]=CD(c),v=M.useMemo(()=>dA(t),[t]),_=c&&!f?[]:v.map(jf),w=M.useRef(!0),T=M.useRef(v),R=ob(()=>new Map),[C,D]=M.useState(v),[z,B]=M.useState(v);LI(()=>{w.current=!1,T.current=v;for(let X=0;X<z.length;X++){const I=jf(z[X]);_.includes(I)?R.delete(I):R.get(I)!==!0&&R.set(I,!1)}},[z,_.length,_.join("-")]);const U=[];if(v!==C){let X=[...v];for(let I=0;I<z.length;I++){const A=z[I],N=jf(A);_.includes(N)||(X.splice(I,0,A),U.push(A))}return a==="wait"&&U.length&&(X=U),B(dA(X)),D(v),null}const{forceRender:q}=M.useContext(sb);return S.jsx(S.Fragment,{children:z.map(X=>{const I=jf(X),A=c&&!f?!1:v===z||_.includes(I),N=()=>{if(R.has(I))R.set(I,!0);else return;let H=!0;R.forEach(F=>{F||(H=!1)}),H&&(q?.(),B(T.current),c&&m?.(),r&&r())};return S.jsx(b$,{isPresent:A,initial:!w.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:a,root:d,onExitComplete:A?void 0:N,anchorX:u,children:X},I)})})},ND=M.createContext({strict:!1}),pA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},gc={};for(const t in pA)gc[t]={isEnabled:e=>pA[t].some(n=>!!e[n])};function E$(t){for(const e in t)gc[e]={...gc[e],...t[e]}}const x$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Hp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||x$.has(t)}let ID=t=>!Hp(t);function T$(t){typeof t=="function"&&(ID=e=>e.startsWith("on")?!Hp(e):t(e))}try{T$(require("@emotion/is-prop-valid").default)}catch{}function S$(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(ID(s)||n===!0&&Hp(s)||!e&&!Hp(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const Am=M.createContext({});function Rm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Ih(t){return typeof t=="string"||Array.isArray(t)}const Ib=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Db=["initial",...Ib];function Cm(t){return Rm(t.animate)||Db.some(e=>Ih(t[e]))}function DD(t){return!!(Cm(t)||t.variants)}function A$(t,e){if(Cm(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Ih(n)?n:void 0,animate:Ih(r)?r:void 0}}return t.inherit!==!1?e:{}}function R$(t){const{initial:e,animate:n}=A$(t,M.useContext(Am));return M.useMemo(()=>({initial:e,animate:n}),[mA(e),mA(n)])}function mA(t){return Array.isArray(t)?t.join(" "):t}const Dh={};function C$(t){for(const e in t)Dh[e]=t[e],mb(e)&&(Dh[e].isCSSVariable=!0)}function kD(t,{layout:e,layoutId:n}){return Rc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Dh[t]||t==="opacity")}const N$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},I$=Ac.length;function D$(t,e,n){let r="",s=!0;for(let a=0;a<I$;a++){const c=Ac[a],u=t[c];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(c.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||n){const f=ED(u,Ab[c]);if(!d){s=!1;const m=N$[c]||c;r+=`${m}(${f}) `}n&&(e[c]=f)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function kb(t,e,n){const{style:r,vars:s,transformOrigin:a}=t;let c=!1,u=!1;for(const d in e){const f=e[d];if(Rc.has(d)){c=!0;continue}else if(mb(d)){s[d]=f;continue}else{const m=ED(f,Ab[d]);d.startsWith("origin")?(u=!0,a[d]=m):r[d]=m}}if(e.transform||(c||n?r.transform=D$(e,t.transform,n):r.transform&&(r.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:m=0}=a;r.transformOrigin=`${d} ${f} ${m}`}}const Mb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function MD(t,e,n){for(const r in e)!Dn(e[r])&&!kD(r,n)&&(t[r]=e[r])}function k$({transformTemplate:t},e){return M.useMemo(()=>{const n=Mb();return kb(n,e,t),Object.assign({},n.vars,n.style)},[e])}function M$(t,e){const n=t.style||{},r={};return MD(r,n,t),Object.assign(r,k$(t,e)),r}function P$(t,e){const n={},r=M$(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const O$={offset:"stroke-dashoffset",array:"stroke-dasharray"},V$={offset:"strokeDashoffset",array:"strokeDasharray"};function L$(t,e,n=1,r=0,s=!0){t.pathLength=1;const a=s?O$:V$;t[a.offset]=Ve.transform(-r);const c=Ve.transform(e),u=Ve.transform(n);t[a.array]=`${c} ${u}`}function PD(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:c=0,...u},d,f,m){if(kb(t,u,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:v,style:_}=t;v.transform&&(_.transform=v.transform,delete v.transform),(_.transform||v.transformOrigin)&&(_.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),_.transform&&(_.transformBox=m?.transformBox??"fill-box",delete v.transformBox),e!==void 0&&(v.x=e),n!==void 0&&(v.y=n),r!==void 0&&(v.scale=r),s!==void 0&&L$(v,s,a,c,!1)}const OD=()=>({...Mb(),attrs:{}}),VD=t=>typeof t=="string"&&t.toLowerCase()==="svg";function z$(t,e,n,r){const s=M.useMemo(()=>{const a=OD();return PD(a,e,VD(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};MD(a,t.style,t),s.style={...a,...s.style}}return s}const U$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Pb(t){return typeof t!="string"||t.includes("-")?!1:!!(U$.indexOf(t)>-1||/[A-Z]/u.test(t))}function j$(t,e,n,{latestValues:r},s,a=!1){const u=(Pb(t)?z$:P$)(e,r,s,t),d=S$(e,typeof t=="string",a),f=t!==M.Fragment?{...d,...u,ref:n}:{},{children:m}=e,v=M.useMemo(()=>Dn(m)?m.get():m,[m]);return M.createElement(t,{...f,children:v})}function gA(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Ob(t,e,n,r){if(typeof e=="function"){const[s,a]=gA(r);e=e(n!==void 0?n:t.custom,s,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,a]=gA(r);e=e(n!==void 0?n:t.custom,s,a)}return e}function sp(t){return Dn(t)?t.get():t}function B$({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:H$(n,r,s,t),renderState:e()}}function H$(t,e,n,r){const s={},a=r(t,{});for(const _ in a)s[_]=sp(a[_]);let{initial:c,animate:u}=t;const d=Cm(t),f=DD(t);e&&f&&!d&&t.inherit!==!1&&(c===void 0&&(c=e.initial),u===void 0&&(u=e.animate));let m=n?n.initial===!1:!1;m=m||c===!1;const v=m?u:c;if(v&&typeof v!="boolean"&&!Rm(v)){const _=Array.isArray(v)?v:[v];for(let w=0;w<_.length;w++){const T=Ob(t,_[w]);if(T){const{transitionEnd:R,transition:C,...D}=T;for(const z in D){let B=D[z];if(Array.isArray(B)){const U=m?B.length-1:0;B=B[U]}B!==null&&(s[z]=B)}for(const z in R)s[z]=R[z]}}}return s}const LD=t=>(e,n)=>{const r=M.useContext(Am),s=M.useContext(Sm),a=()=>B$(t,e,r,s);return n?a():ob(a)};function Vb(t,e,n){const{style:r}=t,s={};for(const a in r)(Dn(r[a])||e.style&&Dn(e.style[a])||kD(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(s[a]=r[a]);return s}const F$=LD({scrapeMotionValuesFromProps:Vb,createRenderState:Mb});function zD(t,e,n){const r=Vb(t,e,n);for(const s in t)if(Dn(t[s])||Dn(e[s])){const a=Ac.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=t[s]}return r}const $$=LD({scrapeMotionValuesFromProps:zD,createRenderState:OD}),q$=Symbol.for("motionComponentSymbol");function $l(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function G$(t,e,n){return M.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):$l(n)&&(n.current=r))},[e])}const Lb=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Y$="framerAppearId",UD="data-"+Lb(Y$),jD=M.createContext({});function K$(t,e,n,r,s){const{visualElement:a}=M.useContext(Am),c=M.useContext(ND),u=M.useContext(Sm),d=M.useContext(Nb).reducedMotion,f=M.useRef(null);r=r||c.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:a,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const m=f.current,v=M.useContext(jD);m&&!m.projection&&s&&(m.type==="html"||m.type==="svg")&&X$(f.current,n,s,v);const _=M.useRef(!1);M.useInsertionEffect(()=>{m&&_.current&&m.update(n,u)});const w=n[UD],T=M.useRef(!!w&&!window.MotionHandoffIsComplete?.(w)&&window.MotionHasOptimisedAnimation?.(w));return LI(()=>{m&&(_.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),T.current&&m.animationState&&m.animationState.animateChanges())}),M.useEffect(()=>{m&&(!T.current&&m.animationState&&m.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(w)}),T.current=!1))}),m}function X$(t,e,n,r){const{layoutId:s,layout:a,drag:c,dragConstraints:u,layoutScroll:d,layoutRoot:f,layoutCrossfade:m}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:BD(t.parent)),t.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!c||u&&$l(u),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:m,layoutScroll:d,layoutRoot:f})}function BD(t){if(t)return t.options.allowProjection!==!1?t.projection:BD(t.parent)}function py(t,{forwardMotionProps:e=!1}={},n,r){n&&E$(n);const s=Pb(t)?$$:F$;function a(u,d){let f;const m={...M.useContext(Nb),...u,layoutId:W$(u)},{isStatic:v}=m,_=R$(u),w=s(u,v);if(!v&&ab){Q$();const T=Z$(m);f=T.MeasureLayout,_.visualElement=K$(t,w,m,r,T.ProjectionNode)}return S.jsxs(Am.Provider,{value:_,children:[f&&_.visualElement?S.jsx(f,{visualElement:_.visualElement,...m}):null,j$(t,u,G$(w,_.visualElement,d),w,v,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=M.forwardRef(a);return c[q$]=t,c}function W$({layoutId:t}){const e=M.useContext(sb).id;return e&&t!==void 0?e+"-"+t:t}function Q$(t,e){M.useContext(ND).strict}function Z$(t){const{drag:e,layout:n}=gc;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function J$(t,e){if(typeof Proxy>"u")return py;const n=new Map,r=(a,c)=>py(a,c,t,e),s=(a,c)=>r(a,c);return new Proxy(s,{get:(a,c)=>c==="create"?r:(n.has(c)||n.set(c,py(c,void 0,t,e)),n.get(c))})}function HD({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function eq({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function tq(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function my(t){return t===void 0||t===1}function Cv({scale:t,scaleX:e,scaleY:n}){return!my(t)||!my(e)||!my(n)}function da(t){return Cv(t)||FD(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function FD(t){return yA(t.x)||yA(t.y)}function yA(t){return t&&t!=="0%"}function Fp(t,e,n){const r=t-n,s=e*r;return n+s}function vA(t,e,n,r,s){return s!==void 0&&(t=Fp(t,s,r)),Fp(t,n,r)+e}function Nv(t,e=0,n=1,r,s){t.min=vA(t.min,e,n,r,s),t.max=vA(t.max,e,n,r,s)}function $D(t,{x:e,y:n}){Nv(t.x,e.translate,e.scale,e.originPoint),Nv(t.y,n.translate,n.scale,n.originPoint)}const _A=.999999999999,bA=1.0000000000001;function nq(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let a,c;for(let u=0;u<s;u++){a=n[u],c=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Gl(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,$D(t,c)),r&&da(a.latestValues)&&Gl(t,a.latestValues))}e.x<bA&&e.x>_A&&(e.x=1),e.y<bA&&e.y>_A&&(e.y=1)}function ql(t,e){t.min=t.min+e,t.max=t.max+e}function wA(t,e,n,r,s=.5){const a=At(t.min,t.max,s);Nv(t,e,n,a,r)}function Gl(t,e){wA(t.x,e.x,e.scaleX,e.scale,e.originX),wA(t.y,e.y,e.scaleY,e.scale,e.originY)}function qD(t,e){return HD(tq(t.getBoundingClientRect(),e))}function rq(t,e,n){const r=qD(t,n),{scroll:s}=e;return s&&(ql(r.x,s.offset.x),ql(r.y,s.offset.y)),r}const EA=()=>({translate:0,scale:1,origin:0,originPoint:0}),Yl=()=>({x:EA(),y:EA()}),xA=()=>({min:0,max:0}),jt=()=>({x:xA(),y:xA()}),Iv={current:null},GD={current:!1};function iq(){if(GD.current=!0,!!ab)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Iv.current=t.matches;t.addEventListener("change",e),e()}else Iv.current=!1}const sq=new WeakMap;function oq(t,e,n){for(const r in e){const s=e[r],a=n[r];if(Dn(s))t.addValue(r,s);else if(Dn(a))t.addValue(r,mc(s,{owner:t}));else if(a!==s)if(t.hasValue(r)){const c=t.getValue(r);c.liveStyle===!0?c.jump(s):c.hasAnimated||c.set(s)}else{const c=t.getStaticValue(r);t.addValue(r,mc(c!==void 0?c:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const TA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class aq{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:c},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Tb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=Jn.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,Et.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=c;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=u,this.blockInitialAnimation=!!a,this.isControllingVariants=Cm(n),this.isVariantNode=DD(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...v}=this.scrapeMotionValuesFromProps(n,{},this);for(const _ in v){const w=v[_];d[_]!==void 0&&Dn(w)&&w.set(d[_],!1)}}mount(e){this.current=e,sq.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),GD.current||iq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Iv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),So(this.notifyUpdate),So(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Rc.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Et.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),a(),c&&c(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in gc){const n=gc[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):jt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<TA.length;r++){const s=TA[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,c=e[a];c&&(this.propEventSubscriptions[s]=this.on(s,c))}this.prevMotionValues=oq(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=mc(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(zI(r)||jI(r))?r=parseFloat(r):!y$(r)&&Ao.test(n)&&(r=wD(e,n)),this.setBaseTarget(e,Dn(r)?r.get():r)),Dn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=Ob(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Dn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new db),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Rb.render(this.render)}}class YD extends aq{constructor(){super(...arguments),this.KeyframeResolver=s$}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Dn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function KD(t,{style:e,vars:n},r,s){const a=t.style;let c;for(c in e)a[c]=e[c];s?.applyProjectionStyles(a,r);for(c in n)a.setProperty(c,n[c])}function lq(t){return window.getComputedStyle(t)}class cq extends YD{constructor(){super(...arguments),this.type="html",this.renderInstance=KD}readValueFromInstance(e,n){if(Rc.has(n))return this.projection?.isProjecting?Ev(n):TF(e,n);{const r=lq(e),s=(mb(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return qD(e,n)}build(e,n,r){kb(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Vb(e,n,r)}}const XD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function uq(t,e,n,r){KD(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(XD.has(s)?s:Lb(s),e.attrs[s])}class hq extends YD{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=jt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Rc.has(n)){const r=bD(n);return r&&r.default||0}return n=XD.has(n)?n:Lb(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return zD(e,n,r)}build(e,n,r){PD(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){uq(e,n,r,s)}mount(e){this.isSVGTag=VD(e.tagName),super.mount(e)}}const dq=(t,e)=>Pb(t)?new hq(e):new cq(e,{allowProjection:t!==M.Fragment});function kh(t,e,n){const r=t.getProps();return Ob(r,e,n!==void 0?n:r.custom,t)}const Dv=t=>Array.isArray(t);function fq(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,mc(n))}function pq(t){return Dv(t)?t[t.length-1]||0:t}function mq(t,e){const n=kh(t,e);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const c in a){const u=pq(a[c]);fq(t,c,u)}}function gq(t){return!!(Dn(t)&&t.add)}function kv(t,e){const n=t.getValue("willChange");if(gq(n))return n.add(e);if(!n&&xs.WillChange){const r=new xs.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function WD(t){return t.props[UD]}const yq=t=>t!==null;function vq(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(yq),a=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[a]}const _q={type:"spring",stiffness:500,damping:25,restSpeed:10},bq=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),wq={type:"keyframes",duration:.8},Eq={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},xq=(t,{keyframes:e})=>e.length>2?wq:Rc.has(t)?t.startsWith("scale")?bq(e[1]):_q:Eq;function Tq({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:c,repeatDelay:u,from:d,elapsed:f,...m}){return!!Object.keys(m).length}const zb=(t,e,n,r={},s,a)=>c=>{const u=Sb(r,t)||{},d=u.delay||r.delay||0;let{elapsed:f=0}=r;f=f-Pi(d);const m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:_=>{e.set(_),u.onUpdate&&u.onUpdate(_)},onComplete:()=>{c(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:a?void 0:s};Tq(u)||Object.assign(m,xq(t,m)),m.duration&&(m.duration=Pi(m.duration)),m.repeatDelay&&(m.repeatDelay=Pi(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let v=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(v=!0)),(xs.instantAnimations||xs.skipAnimations)&&(v=!0,m.duration=0,m.delay=0),m.allowFlatten=!u.type&&!u.ease,v&&!a&&e.get()!==void 0){const _=vq(m.keyframes,u);if(_!==void 0){Et.update(()=>{m.onUpdate(_),m.onComplete()});return}}return u.isSync?new xb(m):new YF(m)};function Sq({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function QD(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:c,...u}=e;r&&(a=r);const d=[],f=s&&t.animationState&&t.animationState.getState()[s];for(const m in u){const v=t.getValue(m,t.latestValues[m]??null),_=u[m];if(_===void 0||f&&Sq(f,m))continue;const w={delay:n,...Sb(a||{},m)},T=v.get();if(T!==void 0&&!v.isAnimating&&!Array.isArray(_)&&_===T&&!w.velocity)continue;let R=!1;if(window.MotionHandoffAnimation){const D=WD(t);if(D){const z=window.MotionHandoffAnimation(D,m,Et);z!==null&&(w.startTime=z,R=!0)}}kv(t,m),v.start(zb(m,v,_,t.shouldReduceMotion&&yD.has(m)?{type:!1}:w,t,R));const C=v.animation;C&&d.push(C)}return c&&Promise.all(d).then(()=>{Et.update(()=>{c&&mq(t,c)})}),d}function Mv(t,e,n={}){const r=kh(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(QD(t,r,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:v}=s;return Aq(t,e,d,f,m,v,n)}:()=>Promise.resolve(),{when:u}=s;if(u){const[d,f]=u==="beforeChildren"?[a,c]:[c,a];return d().then(()=>f())}else return Promise.all([a(),c(n.delay)])}function Aq(t,e,n=0,r=0,s=0,a=1,c){const u=[],d=t.variantChildren.size,f=(d-1)*s,m=typeof r=="function",v=m?_=>r(_,d):a===1?(_=0)=>_*s:(_=0)=>f-_*s;return Array.from(t.variantChildren).sort(Rq).forEach((_,w)=>{_.notify("AnimationStart",e),u.push(Mv(_,e,{...c,delay:n+(m?0:r)+v(w)}).then(()=>_.notify("AnimationComplete",e)))}),Promise.all(u)}function Rq(t,e){return t.sortNodePosition(e)}function Cq(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(a=>Mv(t,a,n));r=Promise.all(s)}else if(typeof e=="string")r=Mv(t,e,n);else{const s=typeof e=="function"?kh(t,e,n.custom):e;r=Promise.all(QD(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function ZD(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Nq=Db.length;function JD(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?JD(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Nq;n++){const r=Db[n],s=t.props[r];(Ih(s)||s===!1)&&(e[r]=s)}return e}const Iq=[...Ib].reverse(),Dq=Ib.length;function kq(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Cq(t,n,r)))}function Mq(t){let e=kq(t),n=SA(),r=!0;const s=d=>(f,m)=>{const v=kh(t,m,d==="exit"?t.presenceContext?.custom:void 0);if(v){const{transition:_,transitionEnd:w,...T}=v;f={...f,...T,...w}}return f};function a(d){e=d(t)}function c(d){const{props:f}=t,m=JD(t.parent)||{},v=[],_=new Set;let w={},T=1/0;for(let C=0;C<Dq;C++){const D=Iq[C],z=n[D],B=f[D]!==void 0?f[D]:m[D],U=Ih(B),q=D===d?z.isActive:null;q===!1&&(T=C);let X=B===m[D]&&B!==f[D]&&U;if(X&&r&&t.manuallyAnimateOnMount&&(X=!1),z.protectedKeys={...w},!z.isActive&&q===null||!B&&!z.prevProp||Rm(B)||typeof B=="boolean")continue;const I=Pq(z.prevProp,B);let A=I||D===d&&z.isActive&&!X&&U||C>T&&U,N=!1;const H=Array.isArray(B)?B:[B];let F=H.reduce(s(D),{});q===!1&&(F={});const{prevResolvedValues:$={}}=z,k={...$,...F},V=G=>{A=!0,_.has(G)&&(N=!0,_.delete(G)),z.needsAnimating[G]=!0;const ee=t.getValue(G);ee&&(ee.liveStyle=!1)};for(const G in k){const ee=F[G],J=$[G];if(w.hasOwnProperty(G))continue;let O=!1;Dv(ee)&&Dv(J)?O=!ZD(ee,J):O=ee!==J,O?ee!=null?V(G):_.add(G):ee!==void 0&&_.has(G)?V(G):z.protectedKeys[G]=!0}z.prevProp=B,z.prevResolvedValues=F,z.isActive&&(w={...w,...F}),r&&t.blockInitialAnimation&&(A=!1),A&&(!(X&&I)||N)&&v.push(...H.map(G=>({animation:G,options:{type:D}})))}if(_.size){const C={};if(typeof f.initial!="boolean"){const D=kh(t,Array.isArray(f.initial)?f.initial[0]:f.initial);D&&D.transition&&(C.transition=D.transition)}_.forEach(D=>{const z=t.getBaseTarget(D),B=t.getValue(D);B&&(B.liveStyle=!0),C[D]=z??null}),v.push({animation:C})}let R=!!v.length;return r&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(R=!1),r=!1,R?e(v):Promise.resolve()}function u(d,f){if(n[d].isActive===f)return Promise.resolve();t.variantChildren?.forEach(v=>v.animationState?.setActive(d,f)),n[d].isActive=f;const m=c(d);for(const v in n)n[v].protectedKeys={};return m}return{animateChanges:c,setActive:u,setAnimateFunction:a,getState:()=>n,reset:()=>{n=SA(),r=!0}}}function Pq(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!ZD(e,t):!1}function ca(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function SA(){return{animate:ca(!0),whileInView:ca(),whileHover:ca(),whileTap:ca(),whileDrag:ca(),whileFocus:ca(),exit:ca()}}class Do{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Oq extends Do{constructor(e){super(e),e.animationState||(e.animationState=Mq(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Rm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Vq=0;class Lq extends Do{constructor(){super(...arguments),this.id=Vq++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const zq={animation:{Feature:Oq},exit:{Feature:Lq}};function Mh(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function ed(t){return{point:{x:t.pageX,y:t.pageY}}}const Uq=t=>e=>Cb(e)&&t(e,ed(e));function rh(t,e,n,r){return Mh(t,e,Uq(n),r)}const ek=1e-4,jq=1-ek,Bq=1+ek,tk=.01,Hq=0-tk,Fq=0+tk;function Fn(t){return t.max-t.min}function $q(t,e,n){return Math.abs(t-e)<=n}function AA(t,e,n,r=.5){t.origin=r,t.originPoint=At(e.min,e.max,t.origin),t.scale=Fn(n)/Fn(e),t.translate=At(n.min,n.max,t.origin)-t.originPoint,(t.scale>=jq&&t.scale<=Bq||isNaN(t.scale))&&(t.scale=1),(t.translate>=Hq&&t.translate<=Fq||isNaN(t.translate))&&(t.translate=0)}function ih(t,e,n,r){AA(t.x,e.x,n.x,r?r.originX:void 0),AA(t.y,e.y,n.y,r?r.originY:void 0)}function RA(t,e,n){t.min=n.min+e.min,t.max=t.min+Fn(e)}function qq(t,e,n){RA(t.x,e.x,n.x),RA(t.y,e.y,n.y)}function CA(t,e,n){t.min=e.min-n.min,t.max=t.min+Fn(e)}function sh(t,e,n){CA(t.x,e.x,n.x),CA(t.y,e.y,n.y)}function zr(t){return[t("x"),t("y")]}const nk=({current:t})=>t?t.ownerDocument.defaultView:null,NA=(t,e)=>Math.abs(t-e);function Gq(t,e){const n=NA(t.x,e.x),r=NA(t.y,e.y);return Math.sqrt(n**2+r**2)}class rk{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=yy(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,T=Gq(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!T)return;const{point:R}=_,{timestamp:C}=wn;this.history.push({...R,timestamp:C});const{onStart:D,onMove:z}=this.handlers;w||(D&&D(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),z&&z(this.lastMoveEvent,_)},this.handlePointerMove=(_,w)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=gy(w,this.transformPagePoint),Et.update(this.updatePoint,!0)},this.handlePointerUp=(_,w)=>{this.end();const{onEnd:T,onSessionEnd:R,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=yy(_.type==="pointercancel"?this.lastMoveEventInfo:gy(w,this.transformPagePoint),this.history);this.startEvent&&T&&T(_,D),R&&R(_,D)},!Cb(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=s||window;const u=ed(e),d=gy(u,this.transformPagePoint),{point:f}=d,{timestamp:m}=wn;this.history=[{...f,timestamp:m}];const{onSessionStart:v}=n;v&&v(e,yy(d,this.history)),this.removeListeners=Qh(rh(this.contextWindow,"pointermove",this.handlePointerMove),rh(this.contextWindow,"pointerup",this.handlePointerUp),rh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),So(this.updatePoint)}}function gy(t,e){return e?{point:e(t.point)}:t}function IA(t,e){return{x:t.x-e.x,y:t.y-e.y}}function yy({point:t},e){return{point:t,delta:IA(t,ik(e)),offset:IA(t,Yq(e)),velocity:Kq(e,.1)}}function Yq(t){return t[0]}function ik(t){return t[t.length-1]}function Kq(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=ik(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Pi(e)));)n--;if(!r)return{x:0,y:0};const a=Oi(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const c={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function Xq(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?At(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?At(n,t,r.max):Math.min(t,n)),t}function DA(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Wq(t,{top:e,left:n,bottom:r,right:s}){return{x:DA(t.x,n,s),y:DA(t.y,e,r)}}function kA(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Qq(t,e){return{x:kA(t.x,e.x),y:kA(t.y,e.y)}}function Zq(t,e){let n=.5;const r=Fn(t),s=Fn(e);return s>r?n=Rh(e.min,e.max-r,t.min):r>s&&(n=Rh(t.min,t.max-s,e.min)),Es(0,1,n)}function Jq(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Pv=.35;function eG(t=Pv){return t===!1?t=0:t===!0&&(t=Pv),{x:MA(t,"left","right"),y:MA(t,"top","bottom")}}function MA(t,e,n){return{min:PA(t,e),max:PA(t,n)}}function PA(t,e){return typeof t=="number"?t:t[e]||0}const tG=new WeakMap;class nG{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=jt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=v=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ed(v).point)},c=(v,_)=>{const{drag:w,dragPropagation:T,onDragStart:R}=this.getProps();if(w&&!T&&(this.openDragLock&&this.openDragLock(),this.openDragLock=c$(w),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),zr(D=>{let z=this.getAxisMotionValue(D).get()||0;if(Vi.test(z)){const{projection:B}=this.visualElement;if(B&&B.layout){const U=B.layout.layoutBox[D];U&&(z=Fn(U)*(parseFloat(z)/100))}}this.originPoint[D]=z}),R&&Et.postRender(()=>R(v,_)),kv(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},u=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_;const{dragPropagation:w,dragDirectionLock:T,onDirectionLock:R,onDrag:C}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:D}=_;if(T&&this.currentDirection===null){this.currentDirection=rG(D),this.currentDirection!==null&&R&&R(this.currentDirection);return}this.updateAxis("x",_.point,D),this.updateAxis("y",_.point,D),this.visualElement.render(),C&&C(v,_)},d=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_,this.stop(v,_),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>zr(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:m}=this.getProps();this.panSession=new rk(e,{onSessionStart:a,onStart:c,onMove:u,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:r,contextWindow:nk(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!r)return;const{velocity:c}=s;this.startAnimation(c);const{onDragEnd:u}=this.getProps();u&&Et.postRender(()=>u(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Bf(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=Xq(c,this.constraints[e],this.elastic[e])),a.set(c)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&$l(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Wq(r.layoutBox,e):this.constraints=!1,this.elastic=eG(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&zr(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Jq(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!$l(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=rq(r,s.root,this.visualElement.getTransformPagePoint());let c=Qq(s.layout.layoutBox,a);if(n){const u=n(eq(c));this.hasMutatedConstraints=!!u,u&&(c=HD(u))}return c}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:c,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},f=zr(m=>{if(!Bf(m,n,this.currentDirection))return;let v=d&&d[m]||{};c&&(v={min:0,max:0});const _=s?200:1e6,w=s?40:1e7,T={type:"inertia",velocity:r?e[m]:0,bounceStiffness:_,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...a,...v};return this.startAxisValueAnimation(m,T)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return kv(this.visualElement,e),r.start(zb(e,r,0,n,this.visualElement,!1))}stopAnimation(){zr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){zr(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){zr(n=>{const{drag:r}=this.getProps();if(!Bf(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:c,max:u}=s.layout.layoutBox[n];a.set(e[n]-At(c,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!$l(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};zr(c=>{const u=this.getAxisMotionValue(c);if(u&&this.constraints!==!1){const d=u.get();s[c]=Zq({min:d,max:d},this.constraints[c])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),zr(c=>{if(!Bf(c,e,null))return;const u=this.getAxisMotionValue(c),{min:d,max:f}=this.constraints[c];u.set(At(d,f,s[c]))})}addListeners(){if(!this.visualElement.current)return;tG.set(this.visualElement,this);const e=this.visualElement.current,n=rh(e,"pointerdown",d=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();$l(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Et.read(r);const c=Mh(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(zr(m=>{const v=this.getAxisMotionValue(m);v&&(this.originPoint[m]+=d[m].translate,v.set(v.get()+d[m].translate))}),this.visualElement.render())});return()=>{c(),n(),a(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:c=Pv,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:c,dragMomentum:u}}}function Bf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function rG(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class iG extends Do{constructor(e){super(e),this.removeGroupControls=Br,this.removeListeners=Br,this.controls=new nG(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Br}unmount(){this.removeGroupControls(),this.removeListeners()}}const OA=t=>(e,n)=>{t&&Et.postRender(()=>t(e,n))};class sG extends Do{constructor(){super(...arguments),this.removePointerDownListener=Br}onPointerDown(e){this.session=new rk(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:nk(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:OA(e),onStart:OA(n),onMove:r,onEnd:(a,c)=>{delete this.session,s&&Et.postRender(()=>s(a,c))}}}mount(){this.removePointerDownListener=rh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const op={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function VA(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Lu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ve.test(t))t=parseFloat(t);else return t;const n=VA(t,e.target.x),r=VA(t,e.target.y);return`${n}% ${r}%`}},oG={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Ao.parse(t);if(s.length>5)return r;const a=Ao.createTransformer(t),c=typeof s[0]!="number"?1:0,u=n.x.scale*e.x,d=n.y.scale*e.y;s[0+c]/=u,s[1+c]/=d;const f=At(u,d,.5);return typeof s[2+c]=="number"&&(s[2+c]/=f),typeof s[3+c]=="number"&&(s[3+c]/=f),a(s)}};let LA=!1;class aG extends M.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=e;C$(lG),a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),LA&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),op.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,{projection:c}=r;return c&&(c.isPresent=a,LA=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==a?c.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?c.promote():c.relegate()||Et.postRender(()=>{const u=c.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Rb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function sk(t){const[e,n]=CD(),r=M.useContext(sb);return S.jsx(aG,{...t,layoutGroup:r,switchLayoutGroup:M.useContext(jD),isPresent:e,safeToRemove:n})}const lG={borderRadius:{...Lu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Lu,borderTopRightRadius:Lu,borderBottomLeftRadius:Lu,borderBottomRightRadius:Lu,boxShadow:oG};function cG(t,e,n){const r=Dn(t)?t:mc(t);return r.start(zb("",r,e,n)),r.animation}const uG=(t,e)=>t.depth-e.depth;class hG{constructor(){this.children=[],this.isDirty=!1}add(e){lb(this.children,e),this.isDirty=!0}remove(e){cb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(uG),this.isDirty=!1,this.children.forEach(e)}}function dG(t,e){const n=Jn.now(),r=({timestamp:s})=>{const a=s-n;a>=e&&(So(r),t(a-e))};return Et.setup(r,!0),()=>So(r)}const ok=["TopLeft","TopRight","BottomLeft","BottomRight"],fG=ok.length,zA=t=>typeof t=="string"?parseFloat(t):t,UA=t=>typeof t=="number"||Ve.test(t);function pG(t,e,n,r,s,a){s?(t.opacity=At(0,n.opacity??1,mG(r)),t.opacityExit=At(e.opacity??1,0,gG(r))):a&&(t.opacity=At(e.opacity??1,n.opacity??1,r));for(let c=0;c<fG;c++){const u=`border${ok[c]}Radius`;let d=jA(e,u),f=jA(n,u);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||UA(d)===UA(f)?(t[u]=Math.max(At(zA(d),zA(f),r),0),(Vi.test(f)||Vi.test(d))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=At(e.rotate||0,n.rotate||0,r))}function jA(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const mG=ak(0,.5,KI),gG=ak(.5,.95,Br);function ak(t,e,n){return r=>r<t?0:r>e?1:n(Rh(t,e,r))}function BA(t,e){t.min=e.min,t.max=e.max}function Lr(t,e){BA(t.x,e.x),BA(t.y,e.y)}function HA(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function FA(t,e,n,r,s){return t-=e,t=Fp(t,1/n,r),s!==void 0&&(t=Fp(t,1/s,r)),t}function yG(t,e=0,n=1,r=.5,s,a=t,c=t){if(Vi.test(e)&&(e=parseFloat(e),e=At(c.min,c.max,e/100)-c.min),typeof e!="number")return;let u=At(a.min,a.max,r);t===a&&(u-=e),t.min=FA(t.min,e,n,u,s),t.max=FA(t.max,e,n,u,s)}function $A(t,e,[n,r,s],a,c){yG(t,e[n],e[r],e[s],e.scale,a,c)}const vG=["x","scaleX","originX"],_G=["y","scaleY","originY"];function qA(t,e,n,r){$A(t.x,e,vG,n?n.x:void 0,r?r.x:void 0),$A(t.y,e,_G,n?n.y:void 0,r?r.y:void 0)}function GA(t){return t.translate===0&&t.scale===1}function lk(t){return GA(t.x)&&GA(t.y)}function YA(t,e){return t.min===e.min&&t.max===e.max}function bG(t,e){return YA(t.x,e.x)&&YA(t.y,e.y)}function KA(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function ck(t,e){return KA(t.x,e.x)&&KA(t.y,e.y)}function XA(t){return Fn(t.x)/Fn(t.y)}function WA(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class wG{constructor(){this.members=[]}add(e){lb(this.members,e),e.scheduleRender()}remove(e){if(cb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function EG(t,e,n){let r="";const s=t.x.translate/e.x,a=t.y.translate/e.y,c=n?.z||0;if((s||a||c)&&(r=`translate3d(${s}px, ${a}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:m,rotateX:v,rotateY:_,skewX:w,skewY:T}=n;f&&(r=`perspective(${f}px) ${r}`),m&&(r+=`rotate(${m}deg) `),v&&(r+=`rotateX(${v}deg) `),_&&(r+=`rotateY(${_}deg) `),w&&(r+=`skewX(${w}deg) `),T&&(r+=`skewY(${T}deg) `)}const u=t.x.scale*e.x,d=t.y.scale*e.y;return(u!==1||d!==1)&&(r+=`scale(${u}, ${d})`),r||"none"}const vy=["","X","Y","Z"],xG=1e3;let TG=0;function _y(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function uk(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=WD(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Et,!(s||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&uk(r)}function hk({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(c={},u=e?.()){this.id=TG++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(RG),this.nodes.forEach(DG),this.nodes.forEach(kG),this.nodes.forEach(CG)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new hG)}addEventListener(c,u){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new db),this.eventHandlers.get(c).add(u)}notifyListeners(c,...u){const d=this.eventHandlers.get(c);d&&d.notify(...u)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=RD(c)&&!m$(c),this.instance=c;const{layoutId:u,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||u)&&(this.isLayoutDirty=!0),t){let m,v=0;const _=()=>this.root.updateBlockedByResize=!1;Et.read(()=>{v=window.innerWidth}),t(c,()=>{const w=window.innerWidth;w!==v&&(v=w,this.root.updateBlockedByResize=!0,m&&m(),m=dG(_,250),op.hasAnimatedSinceResize&&(op.hasAnimatedSinceResize=!1,this.nodes.forEach(JA)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:v,hasRelativeLayoutChanged:_,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||f.getDefaultTransition()||LG,{onLayoutAnimationStart:R,onLayoutAnimationComplete:C}=f.getProps(),D=!this.targetLayout||!ck(this.targetLayout,w),z=!v&&_;if(this.options.layoutRoot||this.resumeFrom||z||v&&(D||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const B={...Sb(T,"layout"),onPlay:R,onComplete:C};(f.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B),this.setAnimationOrigin(m,z)}else v||JA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),So(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(MG),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&uk(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const v=this.path[m];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(QA);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(ZA);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(IG),this.nodes.forEach(SG),this.nodes.forEach(AG)):this.nodes.forEach(ZA),this.clearAllSnapshots();const u=Jn.now();wn.delta=Es(0,1e3/60,u-wn.timestamp),wn.timestamp=u,wn.isProcessing=!0,ly.update.process(wn),ly.preRender.process(wn),ly.render.process(wn),wn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Rb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(NG),this.sharedNodes.forEach(PG)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Fn(this.snapshot.measuredBox.x)&&!Fn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=jt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(u=!1),u&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!lk(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;c&&this.instance&&(u||da(this.latestValues)||m)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return c&&(d=this.removeTransform(d)),zG(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return jt();const u=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(UG))){const{scroll:f}=this.root;f&&(ql(u.x,f.offset.x),ql(u.y,f.offset.y))}return u}removeElementScroll(c){const u=jt();if(Lr(u,c),this.scroll?.wasRoot)return u;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:m,options:v}=f;f!==this.root&&m&&v.layoutScroll&&(m.wasRoot&&Lr(u,c),ql(u.x,m.offset.x),ql(u.y,m.offset.y))}return u}applyTransform(c,u=!1){const d=jt();Lr(d,c);for(let f=0;f<this.path.length;f++){const m=this.path[f];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Gl(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),da(m.latestValues)&&Gl(d,m.latestValues)}return da(this.latestValues)&&Gl(d,this.latestValues),d}removeTransform(c){const u=jt();Lr(u,c);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!da(f.latestValues))continue;Cv(f.latestValues)&&f.updateSnapshot();const m=jt(),v=f.measurePageBox();Lr(m,v),qA(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return da(this.latestValues)&&qA(u,this.latestValues),u}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==wn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(c||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:v}=this.options;if(!(!this.layout||!(m||v))){if(this.resolvedRelativeTargetAt=wn.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jt(),this.relativeTargetOrigin=jt(),sh(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),Lr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=jt(),this.targetWithTransforms=jt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),qq(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Lr(this.target,this.layout.layoutBox),$D(this.target,this.targetDelta)):Lr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jt(),this.relativeTargetOrigin=jt(),sh(this.relativeTargetOrigin,this.target,_.target),Lr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Cv(this.parent.latestValues)||FD(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const c=this.getLead(),u=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===wn.timestamp&&(d=!1),d)return;const{layout:f,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||m))return;Lr(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,_=this.treeScale.y;nq(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=jt());const{target:w}=c;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(HA(this.prevProjectionDelta.x,this.projectionDelta.x),HA(this.prevProjectionDelta.y,this.projectionDelta.y)),ih(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==_||!WA(this.projectionDelta.x,this.prevProjectionDelta.x)||!WA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Yl(),this.projectionDelta=Yl(),this.projectionDeltaWithTransform=Yl()}setAnimationOrigin(c,u=!1){const d=this.snapshot,f=d?d.latestValues:{},m={...this.latestValues},v=Yl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const _=jt(),w=d?d.source:void 0,T=this.layout?this.layout.source:void 0,R=w!==T,C=this.getStack(),D=!C||C.members.length<=1,z=!!(R&&!D&&this.options.crossfade===!0&&!this.path.some(VG));this.animationProgress=0;let B;this.mixTargetDelta=U=>{const q=U/1e3;e2(v.x,c.x,q),e2(v.y,c.y,q),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(sh(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),OG(this.relativeTarget,this.relativeTargetOrigin,_,q),B&&bG(this.relativeTarget,B)&&(this.isProjectionDirty=!1),B||(B=jt()),Lr(B,this.relativeTarget)),R&&(this.animationValues=m,pG(m,f,this.latestValues,q,z,D)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(So(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Et.update(()=>{op.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=mc(0)),this.currentAnimation=cG(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),c.onUpdate&&c.onUpdate(u)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(xG),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:u,target:d,layout:f,latestValues:m}=c;if(!(!u||!d||!f)){if(this!==c&&this.layout&&f&&dk(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||jt();const v=Fn(this.layout.layoutBox.x);d.x.min=c.target.x.min,d.x.max=d.x.min+v;const _=Fn(this.layout.layoutBox.y);d.y.min=c.target.y.min,d.y.max=d.y.min+_}Lr(u,d),Gl(u,m),ih(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(c,u){this.sharedNodes.has(c)||this.sharedNodes.set(c,new wG),this.sharedNodes.get(c).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:u,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),c&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let u=!1;const{latestValues:d}=c;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const f={};d.z&&_y("z",c,f,this.animationValues);for(let m=0;m<vy.length;m++)_y(`rotate${vy[m]}`,c,f,this.animationValues),_y(`skew${vy[m]}`,c,f,this.animationValues);c.render();for(const m in f)c.setStaticValue(m,f[m]),this.animationValues&&(this.animationValues[m]=f[m]);c.scheduleRender()}applyProjectionStyles(c,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=sp(u?.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=sp(u?.pointerEvents)||""),this.hasProjected&&!da(this.latestValues)&&(c.transform=d?d({},""):"none",this.hasProjected=!1);return}c.visibility="";const m=f.animationValues||f.latestValues;this.applyTransformsToTarget();let v=EG(this.projectionDeltaWithTransform,this.treeScale,m);d&&(v=d(m,v)),c.transform=v;const{x:_,y:w}=this.projectionDelta;c.transformOrigin=`${_.origin*100}% ${w.origin*100}% 0`,f.animationValues?c.opacity=f===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const T in Dh){if(m[T]===void 0)continue;const{correct:R,applyTo:C,isCSSVariable:D}=Dh[T],z=v==="none"?m[T]:R(m[T],f);if(C){const B=C.length;for(let U=0;U<B;U++)c[C[U]]=z}else D?this.options.visualElement.renderState.vars[T]=z:c[T]=z}this.options.layoutId&&(c.pointerEvents=f===this?sp(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(QA),this.root.sharedNodes.clear()}}}function SG(t){t.updateLayout()}function AG(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:s}=t.options,a=e.source!==t.layout.source;s==="size"?zr(m=>{const v=a?e.measuredBox[m]:e.layoutBox[m],_=Fn(v);v.min=n[m].min,v.max=v.min+_}):dk(s,e.layoutBox,n)&&zr(m=>{const v=a?e.measuredBox[m]:e.layoutBox[m],_=Fn(n[m]);v.max=v.min+_,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+_)});const c=Yl();ih(c,n,e.layoutBox);const u=Yl();a?ih(u,t.applyTransform(r,!0),e.measuredBox):ih(u,n,e.layoutBox);const d=!lk(c);let f=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:v,layout:_}=m;if(v&&_){const w=jt();sh(w,e.layoutBox,v.layoutBox);const T=jt();sh(T,n,_.layoutBox),ck(w,T)||(f=!0),m.options.layoutRoot&&(t.relativeTarget=T,t.relativeTargetOrigin=w,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:u,layoutDelta:c,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function RG(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function CG(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function NG(t){t.clearSnapshot()}function QA(t){t.clearMeasurements()}function ZA(t){t.isLayoutDirty=!1}function IG(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function JA(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function DG(t){t.resolveTargetDelta()}function kG(t){t.calcProjection()}function MG(t){t.resetSkewAndRotation()}function PG(t){t.removeLeadSnapshot()}function e2(t,e,n){t.translate=At(e.translate,0,n),t.scale=At(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function t2(t,e,n,r){t.min=At(e.min,n.min,r),t.max=At(e.max,n.max,r)}function OG(t,e,n,r){t2(t.x,e.x,n.x,r),t2(t.y,e.y,n.y,r)}function VG(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const LG={duration:.45,ease:[.4,0,.1,1]},n2=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),r2=n2("applewebkit/")&&!n2("chrome/")?Math.round:Br;function i2(t){t.min=r2(t.min),t.max=r2(t.max)}function zG(t){i2(t.x),i2(t.y)}function dk(t,e,n){return t==="position"||t==="preserve-aspect"&&!$q(XA(e),XA(n),.2)}function UG(t){return t!==t.root&&t.scroll?.wasRoot}const jG=hk({attachResizeListener:(t,e)=>Mh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),by={current:void 0},fk=hk({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!by.current){const t=new jG({});t.mount(window),t.setOptions({layoutScroll:!0}),by.current=t}return by.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),BG={pan:{Feature:sG},drag:{Feature:iG,ProjectionNode:fk,MeasureLayout:sk}};function s2(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,a=r[s];a&&Et.postRender(()=>a(e,ed(e)))}class HG extends Do{mount(){const{current:e}=this.node;e&&(this.unmount=u$(e,(n,r)=>(s2(this.node,r,"Start"),s=>s2(this.node,s,"End"))))}unmount(){}}class FG extends Do{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Qh(Mh(this.node.current,"focus",()=>this.onFocus()),Mh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function o2(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),a=r[s];a&&Et.postRender(()=>a(e,ed(e)))}class $G extends Do{mount(){const{current:e}=this.node;e&&(this.unmount=p$(e,(n,r)=>(o2(this.node,r,"Start"),(s,{success:a})=>o2(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ov=new WeakMap,wy=new WeakMap,qG=t=>{const e=Ov.get(t.target);e&&e(t)},GG=t=>{t.forEach(qG)};function YG({root:t,...e}){const n=t||document;wy.has(n)||wy.set(n,{});const r=wy.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(GG,{root:t,...e})),r[s]}function KG(t,e,n){const r=YG(e);return Ov.set(t,n),r.observe(t),()=>{Ov.delete(t),r.unobserve(t)}}const XG={some:0,all:1};class WG extends Do{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=e,c={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:XG[s]},u=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:v}=this.node.getProps(),_=f?m:v;_&&_(d)};return KG(this.node.current,c,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(QG(e,n))&&this.startObserver()}unmount(){}}function QG({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const ZG={inView:{Feature:WG},tap:{Feature:$G},focus:{Feature:FG},hover:{Feature:HG}},JG={layout:{ProjectionNode:fk,MeasureLayout:sk}},eY={...zq,...ZG,...BG,...JG},Ey=J$(eY,dq),_r={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},fr={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function tY(){const[t,e]=M.useState(""),[n,r]=M.useState(""),[s,a]=M.useState(!1),[c,u]=M.useState(!1),[d,f]=M.useState(!1),[m,v]=M.useState(""),_=async R=>{R.preventDefault(),f(!0),v("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(fr.INVALID_EMAIL);if(n.length<6)throw new Error(fr.WEAK_PASSWORD);const D=s?uj:hj,{user:z}=await D(ib,t,n);console.info("Auth success • uid:",z.uid)}catch(C){v(w(C))}finally{f(!1)}},w=R=>{switch(R.code){case"auth/email-already-in-use":return fr.EMAIL_IN_USE;case"auth/invalid-email":return fr.INVALID_EMAIL;case"auth/weak-password":return fr.WEAK_PASSWORD;case"auth/user-not-found":return fr.USER_NOT_FOUND;case"auth/wrong-password":return fr.WRONG_PASSWORD;case"auth/too-many-requests":return fr.TOO_MANY_REQUESTS;case"auth/user-disabled":return"This account has been disabled. Please contact support.";default:return R.message||"Authentication error"}},T="w-full px-4 py-3 rounded-lg border bg-white/80 dark:bg-gray-800/80 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 transition";return S.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900/40 dark:bg-gray-950/60 backdrop-blur-sm p-4",children:S.jsxs(Ey.div,{initial:{opacity:0,scale:.96},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.25},className:"w-full max-w-md rounded-3xl shadow-lg bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 overflow-hidden",children:[S.jsxs("div",{className:"px-8 pt-8 pb-4 text-center",children:[S.jsx(fA,{mode:"wait",children:S.jsx(Ey.h2,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.25},className:"text-3xl font-semibold text-gray-900 dark:text-gray-100",children:s?"Create an account":"Welcome back"},s?"signup-header":"signin-header")}),S.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:s?"Start your AI‑powered journey.":"Sign in to continue."})]}),S.jsxs("form",{onSubmit:_,className:"px-8 pb-8 space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),S.jsxs("div",{className:"relative",children:[S.jsx(hH,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),S.jsx("input",{id:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:R=>e(R.target.value),placeholder:"you@example.com",className:`${T} pl-11`})]})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),S.jsxs("div",{className:"relative",children:[S.jsx(_H,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),S.jsx("input",{id:"password",type:c?"text":"password",autoComplete:s?"new-password":"current-password",required:!0,value:n,onChange:R=>r(R.target.value),placeholder:"••••••••",className:`${T} pl-11 pr-11`}),S.jsx("button",{type:"button",onClick:()=>u(R=>!R),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300","aria-label":c?"Hide password":"Show password",children:c?S.jsx(mH,{className:"h-5 w-5"}):S.jsx(yH,{className:"h-5 w-5"})})]})]}),S.jsx(fA,{children:m&&S.jsxs(Ey.div,{initial:{y:-6,opacity:0},animate:{y:0,opacity:1},exit:{y:-6,opacity:0},className:"flex items-start gap-3 rounded-lg border border-red-300 dark:border-red-800 bg-red-50 dark:bg-red-900/30 px-4 py-3 text-sm text-red-700 dark:text-red-300",role:"alert",children:[S.jsx(fH,{className:"h-5 w-5 flex-shrink-0"}),S.jsx("span",{children:m})]},"error")}),S.jsxs("button",{type:"submit",disabled:d,className:"inline-flex w-full items-center justify-center gap-2 rounded-lg bg-indigo-600 px-4 py-3 font-medium text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-indigo-500 dark:hover:bg-indigo-400",children:[d?S.jsxs("svg",{className:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}):s?S.jsx(wH,{className:"h-5 w-5"}):S.jsx(cH,{className:"h-5 w-5"}),S.jsx("span",{children:d?s?"Creating account…":"Signing in…":s?"Sign Up":"Sign In"})]})]}),S.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 px-8 py-4 text-center",children:[S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s?"Already have an account?":"New to TinkFlow?"}),S.jsx("button",{onClick:()=>a(R=>!R),type:"button",className:"mt-2 text-sm font-medium text-indigo-600 hover:text-indigo-500 focus:outline-none dark:text-indigo-400 dark:hover:text-indigo-300",children:s?"Sign In":"Create an account"})]})]})})}function nY({show:t,onHide:e,onConfirm:n,isCreating:r=!1}){const[s,a]=M.useState(""),[c,u]=M.useState(!0),d=_=>{const w=_.target.value;a(w),u(w.trim().length>0&&w.trim().length<=50)},f=_=>{_.preventDefault();const w=s.trim();w.length>0&&w.length<=50&&(n(w),a(""),u(!0))},m=()=>{a(""),u(!0),e()},v=_=>{_.key==="Enter"&&f(_)};return t?S.jsx("div",{className:"board-name-modal fixed inset-0 bg-black/60 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-[2001]",children:S.jsxs("div",{className:"bg-gray-800 dark:bg-gray-900 rounded-xl shadow-2xl p-6 w-full max-w-md border border-gray-700 dark:border-gray-600",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h3",{className:"text-lg font-semibold text-white dark:text-white",children:"Create New Board"}),S.jsx("button",{onClick:m,className:`text-gray-400 dark:text-gray-400 hover:text-gray-200 dark:hover:text-gray-200 
                                 bg-gray-700/50 dark:bg-gray-800/50 hover:bg-gray-600/50 dark:hover:bg-gray-700/50
                                 border border-gray-600 dark:border-gray-700 rounded-lg w-8 h-8 flex items-center justify-center
                                 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500/20`,"aria-label":"Close",children:"×"})]}),S.jsxs("form",{onSubmit:f,className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-300 dark:text-gray-300 mb-2",children:"Board Name"}),S.jsx("input",{type:"text",value:s,onChange:d,onKeyDown:v,placeholder:"Enter board name...",maxLength:50,autoFocus:!0,className:`w-full px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border rounded-lg 
                                       text-white dark:text-white placeholder-gray-400 dark:placeholder-gray-500 
                                       focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40 
                                       transition-all duration-200 font-medium
                                       ${c?"border-gray-600/50 dark:border-gray-700/50 focus:border-blue-500/60 dark:focus:border-blue-400/60":"border-red-500/60 dark:border-red-500/60 focus:border-red-500/60 dark:focus:border-red-500/60"}`}),!c&&S.jsx("p",{className:"text-red-400 dark:text-red-400 text-sm mt-2",children:"Board name must be between 1 and 50 characters long."}),S.jsxs("p",{className:`text-xs mt-1 ${s.length===50?"text-red-400 dark:text-red-400":"text-gray-500 dark:text-gray-500"}`,children:[s.length,"/50 characters"]})]}),S.jsxs("div",{className:"flex gap-3 pt-4",children:[S.jsx("button",{type:"button",onClick:m,disabled:r,className:`flex-1 px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border border-gray-600/50 dark:border-gray-700/50
                                     text-gray-300 dark:text-gray-300 rounded-lg font-medium transition-all duration-200
                                     hover:bg-gray-600/60 dark:hover:bg-gray-700/60 hover:border-gray-500/60 dark:hover:border-gray-600/60
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20`,children:"Cancel"}),S.jsx("button",{type:"submit",disabled:!c||s.trim().length===0||r,className:`flex-1 px-4 py-3 bg-blue-600/80 dark:bg-blue-500/80 border border-blue-500/50 dark:border-blue-400/50
                                     text-white rounded-lg font-medium transition-all duration-200 
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     hover:bg-blue-500/90 dark:hover:bg-blue-400/90 hover:border-blue-400/60 dark:hover:border-blue-300/60
                                     focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40`,children:r?"Creating...":"Create Board"})]})]})]})}):null}function rY({allBoards:t,currentBoard:e,onSwitchBoard:n,onCreateBoard:r,onDeleteBoard:s,onSignOut:a,isLoading:c}){const[u,d]=M.useState(!1),[f,m]=M.useState(!1),[v,_]=M.useState(null),w=async D=>{try{d(!0),await r(D),m(!1)}catch(z){console.error("Error in sidebar create board:",z)}finally{d(!1)}},T=()=>{m(!0)},R=()=>{m(!1)},C=(D,z)=>{D.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&s(z)};return S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"left-0 top-0 w-[100%] h-screen bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:S.jsxs("div",{className:"flex flex-col h-full",children:[S.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/50",children:[S.jsx("h2",{className:"m-0 mb-3 text-sm font-semibold text-gray-900 dark:text-gray-100 tracking-tight",children:"TinkFlow Boards"}),S.jsx("button",{onClick:T,disabled:c||u,className:`w-full bg-blue-600 dark:bg-blue-600 text-white dark:text-white border border-blue-600 dark:border-blue-600 
                                      px-3 py-2 rounded-lg cursor-pointer text-xs font-medium transition-all duration-200 
                                      ${c||u?"cursor-not-allowed opacity-60":"hover:bg-blue-700 dark:hover:bg-blue-700 hover:border-blue-700 dark:hover:border-blue-700 hover:-translate-y-0.5 hover:shadow-md"}`,children:u?"Creating...":"+ New Board"})]}),S.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:t.map(D=>{const z=e?.id===D.id,B=v===D.id;return S.jsxs("div",{onClick:()=>!c&&n(D.id),onMouseEnter:()=>_(D.id),onMouseLeave:()=>_(null),className:`
                                        min-h-[44px] px-3 py-2.5 mb-1 rounded-lg flex justify-between items-center
                                        transition-all duration-200 cursor-pointer border font-medium text-sm leading-tight
                                        ${c?"cursor-not-allowed opacity-60":"cursor-pointer"}
                                        ${z?"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/30 text-blue-900 dark:text-blue-100 font-semibold shadow-sm":B?"border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50 text-gray-900 dark:text-gray-100 shadow-sm":"border-transparent bg-transparent text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/30"}
                                    `,role:"button",tabIndex:0,onKeyDown:U=>{(U.key==="Enter"||U.key===" ")&&!c&&n(D.id)},children:[S.jsx("span",{className:`
                                        ${z?"font-semibold":"font-medium"} 
                                        flex-1 whitespace-nowrap overflow-hidden text-ellipsis 
                                        text-sm leading-tight
                                    `,children:D.name}),S.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[D.isOpen&&S.jsx("span",{className:"text-green-500 dark:text-green-400 text-xs",children:"●"}),t.length>1&&S.jsx("button",{onClick:U=>{U.stopPropagation(),C(U,D.id)},title:"Delete board",className:`
                                                    w-5 h-5 bg-transparent border-none text-red-500 dark:text-red-400 
                                                    cursor-pointer text-sm leading-none flex items-center justify-center
                                                    rounded transition-all duration-150
                                                    ${B?"opacity-100 visible hover:bg-red-50 dark:hover:bg-red-900/30":"opacity-0 invisible"}
                                                    hover:text-red-600 dark:hover:text-red-300
                                                `,children:"×"})]})]},D.id)})}),c&&S.jsx("div",{className:"p-3 text-center text-gray-500 dark:text-gray-400 text-xs font-medium",children:"Loading boards..."}),S.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:S.jsx("button",{onClick:a,className:`w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 
                                     bg-transparent text-gray-700 dark:text-gray-300 cursor-pointer text-xs font-medium
                                     transition-all duration-200
                                     hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:border-gray-400 dark:hover:border-gray-500 
                                     hover:text-gray-900 dark:hover:text-gray-100`,children:"Sign Out"})})]})}),S.jsx(nY,{show:f,onHide:R,onConfirm:w,isCreating:u})]})}const iY=M.memo(function({explanation:e,onClose:n,isVisible:r}){const[s,a]=M.useState(!1),[c,u]=M.useState(r);M.useEffect(()=>{r?(u(!0),setTimeout(()=>a(!0),100)):(a(!1),setTimeout(()=>u(!1),300))},[r]);const d=()=>{a(!1),setTimeout(()=>n(),300)};return c?S.jsx("div",{className:`bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl
                       border border-gray-200/50 dark:border-gray-700/50
                       fade-in
                       transition-all duration-300 ease-out
                       ring-1 ring-white/20 dark:ring-white/10 rounded-2xl
                       before:absolute before:inset-0 before:bg-gradient-to-br 
                       before:from-white/40 before:to-transparent before:pointer-events-none
                       dark:before:from-gray-800/40 dark:before:to-transparent
                       relative overflow-auto
                       transform ${s?"translate-x-0":"translate-x-full"}`,style:{height:"auto",maxHeight:"80vh",minHeight:"200px"},children:S.jsxs("div",{className:`w-full h-full flex flex-col top-0 right-0 z-50 transition-all duration-300 ease-out ${s?"transform opacity-100":"transform opacity-0"}`,children:[S.jsxs("div",{className:`flex justify-between items-center p-6 border-b border-gray-200/50 dark:border-gray-700/50 
                           transition-all duration-400 ease-out ${s?"transform translate-y-0 opacity-100":"transform -translate-y-4 opacity-0"}`,children:[S.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[S.jsx("span",{className:"text-blue-500",children:"📄"}),e?e.title:"Explanation"]}),S.jsx("button",{className:`text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 
                             p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700/50 
                             transition-all duration-200 transform hover:scale-105`,onClick:d,title:"Close explanation","aria-label":"Close explanation sidebar",children:S.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:S.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),S.jsx("div",{className:"p-6 overflow-y-auto flex-1 scrollbar-thin pt-0.5",children:e?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:`mb-6 transition-all duration-500 ease-out ${s?"transform translate-y-0 opacity-100":"transform translate-y-4 opacity-0"}`}),S.jsx("div",{className:`prose prose-gray dark:prose-invert max-w-none text-gray-700 dark:text-gray-300
                                      [&>h1]:text-gray-900 [&>h1]:dark:text-gray-100 [&>h1]:text-2xl [&>h1]:font-bold [&>h1]:mb-4 [&>h1]:mt-6
                                      [&>h2]:text-gray-900 [&>h2]:dark:text-gray-100 [&>h2]:text-xl [&>h2]:font-semibold [&>h2]:mb-3 [&>h2]:mt-5
                                      [&>h3]:text-gray-900 [&>h3]:dark:text-gray-100 [&>h3]:text-lg [&>h3]:font-medium [&>h3]:mb-2 [&>h3]:mt-4
                                      [&>p]:text-gray-700 [&>p]:dark:text-gray-300 [&>p]:leading-relaxed [&>p]:mb-4
                                      [&>ul]:text-gray-700 [&>ul]:dark:text-gray-300 [&>ul]:mb-4 [&>ul>li]:mb-2
                                      [&>ol]:text-gray-700 [&>ol]:dark:text-gray-300 [&>ol]:mb-4 [&>ol>li]:mb-2
                                      [&>blockquote]:border-l-4 [&>blockquote]:border-blue-400 [&>blockquote]:pl-4 [&>blockquote]:italic [&>blockquote]:text-gray-600 [&>blockquote]:dark:text-gray-400 [&>blockquote]:bg-blue-50 [&>blockquote]:dark:bg-blue-900/20 [&>blockquote]:py-2 [&>blockquote]:rounded-r-lg
                                      [&>code]:bg-gray-100 [&>code]:dark:bg-gray-800 [&>code]:text-blue-600 [&>code]:dark:text-blue-400 [&>code]:px-2 [&>code]:py-1 [&>code]:rounded [&>code]:text-sm [&>code]:font-medium
                                      [&>pre]:bg-gray-100 [&>pre]:dark:bg-gray-800 [&>pre]:text-gray-800 [&>pre]:dark:text-gray-200 [&>pre]:p-4 [&>pre]:rounded-lg [&>pre]:overflow-x-auto [&>pre]:mb-4 [&>pre]:border [&>pre]:border-gray-200 [&>pre]:dark:border-gray-700
                                      transition-all duration-500 ease-out ${s?"transform translate-y-0 opacity-100":"transform translate-y-4 opacity-0"}`,children:S.jsx("div",{dangerouslySetInnerHTML:{__html:e.text}})})]}):S.jsx("div",{className:`flex items-center justify-center h-full text-gray-500 dark:text-gray-400 
                                   transition-all duration-500 ease-out ${s?"transform translate-y-0 opacity-100":"transform translate-y-8 opacity-0"}`,children:S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"text-6xl mb-6 opacity-60",children:"📄"}),S.jsx("p",{className:"text-xl font-medium mb-2",children:"No explanation available"}),S.jsx("p",{className:"text-sm opacity-75",children:"Click on a node to see its explanation"})]})})})]})}):null}),pk=M.createContext(void 0),sY=()=>{const t=M.useContext(pk);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},oY=({children:t})=>{const[e,n]=M.useState(()=>{const s=localStorage.getItem("theme");return s||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});M.useEffect(()=>{const s=window.document.documentElement;s.classList.remove("light","dark"),s.classList.add(e),localStorage.setItem("theme",e)},[e]);const r=()=>{n(s=>s==="light"?"dark":"light")};return S.jsx(pk.Provider,{value:{theme:e,toggleTheme:r},children:t})},mk=()=>{const{theme:t,toggleTheme:e}=sY();return S.jsx("button",{onClick:e,className:`p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 
                     hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600
                     hover:border-gray-300 dark:hover:border-gray-500 transition-all duration-200 
                     focus:outline-none focus:ring-2 focus:ring-blue-500/30 dark:focus:ring-blue-400/30
                     shadow-sm hover:shadow-md`,title:`Switch to ${t==="light"?"dark":"light"} mode`,"aria-label":`Switch to ${t==="light"?"dark":"light"} mode`,children:t==="light"?S.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:S.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):S.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:S.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})})})};function aY({name:t,onSetName:e,user:n,isSaving:r}){const[s,a]=M.useState(!1),[c,u]=M.useState(t||"");M.useEffect(()=>{u(t||"")},[t]);const d=m=>{m.key==="Enter"&&(e(c),a(!1))},f=()=>{a(!0),u(t||"")};return S.jsx(S.Fragment,{children:S.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:S.jsx("div",{className:"max-w-none mx-auto px-4",children:S.jsxs("header",{className:"flex justify-between items-center py-3",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsxs("div",{className:"flex items-center space-x-2",children:[S.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-sm",children:S.jsx("span",{className:"text-white font-bold text-sm",children:"T"})}),S.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"TinkFlow"})]}),S.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"•"}),s?S.jsx("input",{type:"text",value:c,onChange:m=>u(m.target.value),onKeyDown:d,onBlur:()=>{e(c),a(!1)},className:`bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 
                                             rounded-md px-2 py-1 text-gray-900 dark:text-gray-100 text-sm min-w-[120px]
                                             focus:outline-none focus:border-blue-500 dark:focus:border-blue-400 focus:ring-2 focus:ring-blue-500/20`,autoFocus:!0}):S.jsx("button",{onClick:f,className:`bg-transparent border-none text-gray-600 dark:text-gray-400 text-sm cursor-pointer 
                                             px-2 py-1 rounded-md transition-all duration-150 ease-in-out
                                             hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-100`,children:t||"Untitled Board"})]}),S.jsxs("div",{className:"flex items-center gap-3",children:[r&&S.jsxs("div",{className:`text-green-600 dark:text-green-400 text-sm flex items-center gap-2 
                                               bg-green-50 dark:bg-green-900/20 px-3 py-1.5 rounded-full border border-green-200 dark:border-green-700/50
                                               animate-pulse`,children:[S.jsx("div",{className:"w-2 h-2 bg-green-500 dark:bg-green-400 rounded-full animate-bounce"}),S.jsx("span",{className:"font-medium",children:"Saving..."})]}),S.jsx(mk,{}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-gray-400 to-gray-500 rounded-full flex items-center justify-center",children:S.jsx("span",{className:"text-white font-medium text-xs",children:n?.isAnonymous?"G":n?.email?.charAt(0).toUpperCase()||"U"})}),S.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm font-medium",children:n?.isAnonymous?"Guest":n?.email?.split("@")[0]||"User"})]})]})]})})})})}const lY=({notification:t,onRemove:e})=>{const n=s=>{switch(s){case"success":return"✅";case"error":return"❌";case"warning":return"⚠️";case"info":return"ℹ️";default:return"📄"}},r=s=>{switch(s){case"success":return"bg-green-900/20 dark:bg-green-900/30 border-green-500/30 dark:border-green-500/40 text-green-300 dark:text-green-400";case"error":return"bg-red-900/20 dark:bg-red-900/30 border-red-500/30 dark:border-red-500/40 text-red-300 dark:text-red-400";case"warning":return"bg-yellow-900/20 dark:bg-yellow-900/30 border-yellow-500/30 dark:border-yellow-500/40 text-yellow-300 dark:text-yellow-400";case"info":return"bg-blue-900/20 dark:bg-blue-900/30 border-blue-500/30 dark:border-blue-500/40 text-blue-300 dark:text-blue-400";default:return"bg-gray-900/20 dark:bg-gray-900/30 border-gray-500/30 dark:border-gray-500/40 text-gray-300 dark:text-gray-400"}};return S.jsxs("div",{className:`notification relative min-w-80 max-w-md p-4 rounded-xl border shadow-2xl backdrop-blur-sm                         transform transition-all duration-300 ease-out hover:scale-[1.02] hover:shadow-3xl                        ${r(t.type)}`,children:[" ",S.jsxs("div",{className:"flex items-start gap-3",children:[" ",S.jsxs("span",{className:"text-lg flex-shrink-0 mt-0.5",children:[" ",n(t.type)," "]})," ",S.jsxs("div",{className:"flex-1 min-w-0",children:[" ",S.jsxs("p",{className:"text-sm font-medium leading-5 break-words",children:[" ",t.message," "]})," "]})," ",S.jsxs("button",{onClick:()=>e(t.id),className:"flex-shrink-0 text-gray-400 dark:text-gray-500 hover:text-gray-200 dark:hover:text-gray-300                              hover:bg-gray-700/50 dark:hover:bg-gray-600/50                              rounded-full p-1 transition-all duration-200                              focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20","aria-label":"Close notification",children:[" ",S.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[" ",S.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})," "]})," "]})," "]})," "]})},cY=({notifications:t,onRemove:e})=>S.jsxs("div",{className:"notification-container fixed top-4 right-4 space-y-3 z-[2000] pointer-events-none",children:[" ",t.map(n=>S.jsxs("div",{className:"pointer-events-auto",children:[" ",S.jsx(lY,{notification:n,onRemove:e})," "]},n.id))," "]});function uY({onLogin:t}){return S.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 antialiased",children:[" "," ",S.jsxs("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50",children:[" ",S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",S.jsxs("div",{className:"flex justify-between items-center py-4",children:[" ",S.jsxs("div",{className:"flex items-center space-x-3",children:[" ",S.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",S.jsx("span",{className:"text-white font-bold text-lg",children:"T"})," "]})," ",S.jsxs("div",{className:"flex flex-col",children:[" ",S.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white tracking-tight",children:"TinkFlow"})," ",S.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"AI Learning Platform"})," "]})," "]})," ",S.jsxs("div",{className:"flex items-center gap-4",children:[" ",S.jsx(mk,{})," ",S.jsxs("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors duration-200",children:[" ","Get Started"," "]})," "]})," "]})," "]})," "]})," "," ",S.jsxs("section",{className:"relative overflow-hidden",children:[" ",S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-32",children:[" ",S.jsxs("div",{className:"text-center",children:[" ",S.jsxs("div",{className:"inline-flex items-center gap-2 bg-indigo-50 dark:bg-indigo-900/20 px-4 py-2 rounded-full mb-8",children:[" ",S.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"})," ",S.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 font-medium text-sm",children:"AI-Powered Concept Learning"})," "]})," ",S.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-gray-900 dark:text-white mb-6 leading-tight",children:[" ","Learn & Tinker with"," ",S.jsxs("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent block",children:[" ","AI-Powered Concepts"," "]})," "]})," ",S.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-3xl mx-auto leading-relaxed",children:[" ","TinkFlow is the ultimate AI-powered platform for exploring, understanding, and experimenting with new concepts. Transform your learning journey with interactive visual flows and intelligent insights."," "]})," ",S.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[" ",S.jsxs("button",{onClick:t,className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning Now"," "]})," ",S.jsxs("button",{className:"px-8 py-4 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-semibold text-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",children:[" ","Watch Demo"," "]})," "]})," "]})," "]})," "," ",S.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-indigo-400 to-purple-500 rounded-full opacity-10 blur-3xl"})," ",S.jsx("div",{className:"absolute top-1/4 right-1/4 w-64 h-64 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full opacity-10 blur-2xl"})," "]})," "," ",S.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",S.jsxs("div",{className:"text-center mb-16",children:[" ",S.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Everything You Need to Learn"," "]})," ",S.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","AI-powered tools and features designed to accelerate your learning and conceptual understanding"," "]})," "]})," ",S.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",S.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-indigo-200 dark:border-indigo-700/50 hover:transform hover:-translate-y-1",children:[" ",S.jsxs("div",{className:"w-14 h-14 bg-indigo-500 rounded-xl flex items-center justify-center mb-6",children:[" ",S.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})," "]})," "]})," ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI-Powered Insights"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Get intelligent explanations and connections between concepts powered by advanced AI that understands your learning style."," "]})," "]})," ",S.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-purple-200 dark:border-purple-700/50 hover:transform hover:-translate-y-1",children:[" ",S.jsxs("div",{className:"w-14 h-14 bg-purple-500 rounded-xl flex items-center justify-center mb-6",children:[" ",S.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"})," "]})," "]})," ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Interactive Visual Flows"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Build and explore concept maps with interactive nodes that respond to your curiosity and create dynamic learning pathways."," "]})," "]})," ",S.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-green-200 dark:border-green-700/50 hover:transform hover:-translate-y-1",children:[" ",S.jsxs("div",{className:"w-14 h-14 bg-green-500 rounded-xl flex items-center justify-center mb-6",children:[" ",S.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})," "]})," "]})," ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Experimentation Sandbox"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Tinker with concepts in a safe, guided environment where you can test ideas and see instant results with AI feedback."," "]})," "]})," "]})," "]})," "]})," "," ",S.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",S.jsxs("div",{className:"text-center mb-16",children:[" ",S.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","How TinkFlow Works"," "]})," ",S.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Three simple steps to unlock your learning potential with AI-powered concept exploration"," "]})," "]})," ",S.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",S.jsxs("div",{className:"text-center",children:[" ",S.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",S.jsx("span",{className:"text-white font-bold text-xl",children:"1"})," "]})," ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Input Your Concept"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Start by entering any topic, question, or concept you want to explore. Our AI understands context and complexity."," "]})," "]})," ",S.jsxs("div",{className:"text-center",children:[" ",S.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",S.jsx("span",{className:"text-white font-bold text-xl",children:"2"})," "]})," ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI Generates Flow"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Watch as TinkFlow creates an interactive visual map with connected nodes, each representing key aspects of your concept."," "]})," "]})," ",S.jsxs("div",{className:"text-center",children:[" ",S.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",S.jsx("span",{className:"text-white font-bold text-xl",children:"3"})," "]})," ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Explore & Learn"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Click on any node to dive deeper, ask questions, and watch new connections emerge as you explore your learning path."," "]})," "]})," "]})," "]})," "]})," "," ",S.jsxs("section",{className:"py-20 bg-gradient-to-r from-indigo-500 to-purple-600",children:[" ",S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",S.jsxs("div",{className:"grid md:grid-cols-4 gap-8 text-center",children:[" ",S.jsxs("div",{className:"text-white",children:[" ",S.jsx("div",{className:"text-4xl font-bold mb-2",children:"27K+"})," ",S.jsx("div",{className:"text-indigo-100",children:"Concepts Explored"})," "]})," ",S.jsxs("div",{className:"text-white",children:[" ",S.jsx("div",{className:"text-4xl font-bold mb-2",children:"2.4K+"})," ",S.jsx("div",{className:"text-indigo-100",children:"Active Learners"})," "]})," ",S.jsxs("div",{className:"text-white",children:[" ",S.jsx("div",{className:"text-4xl font-bold mb-2",children:"98%"})," ",S.jsx("div",{className:"text-indigo-100",children:"Learning Success"})," "]})," ",S.jsxs("div",{className:"text-white",children:[" ",S.jsx("div",{className:"text-4xl font-bold mb-2",children:"24/7"})," ",S.jsx("div",{className:"text-indigo-100",children:"AI Support"})," "]})," "]})," "]})," "]})," "," ",S.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",S.jsxs("div",{className:"text-center mb-16",children:[" ",S.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Perfect for Every Learning Style"," "]})," ",S.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Whether you're a student, researcher, or curious mind, TinkFlow adapts to your learning needs"," "]})," "]})," ",S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[" ",S.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/10 dark:to-blue-800/10 p-8 rounded-2xl border border-blue-200 dark:border-blue-700/30",children:[" ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","🎓 Academic Learning"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Break down complex academic subjects into digestible, interconnected concepts. Perfect for studying sciences, humanities, and technical topics."," "]})," ",S.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",S.jsx("li",{children:"• Research paper analysis"})," ",S.jsx("li",{children:"• Concept mapping for exams"})," ",S.jsx("li",{children:"• Cross-disciplinary connections"})," "]})," "]})," ",S.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/10 dark:to-purple-800/10 p-8 rounded-2xl border border-purple-200 dark:border-purple-700/30",children:[" ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","💡 Creative Exploration"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Explore ideas, brainstorm solutions, and discover unexpected connections. Great for creative professionals and innovators."," "]})," ",S.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",S.jsx("li",{children:"• Idea generation workflows"})," ",S.jsx("li",{children:"• Problem-solving frameworks"})," ",S.jsx("li",{children:"• Innovation mapping"})," "]})," "]})," ",S.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/10 dark:to-green-800/10 p-8 rounded-2xl border border-green-200 dark:border-green-700/30",children:[" ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","🔬 Technical Deep Dives"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Understand complex systems, architectures, and technologies through interactive exploration and AI-guided explanations."," "]})," ",S.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",S.jsx("li",{children:"• System architecture learning"})," ",S.jsx("li",{children:"• Technology stack exploration"})," ",S.jsx("li",{children:"• Code concept mapping"})," "]})," "]})," ",S.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/10 dark:to-orange-800/10 p-8 rounded-2xl border border-orange-200 dark:border-orange-700/30",children:[" ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","🚀 Professional Development"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Build skills, understand industry trends, and create learning paths for career advancement with AI-powered insights."," "]})," ",S.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",S.jsx("li",{children:"• Skill gap analysis"})," ",S.jsx("li",{children:"• Career pathway planning"})," ",S.jsx("li",{children:"• Industry trend mapping"})," "]})," "]})," "]})," "]})," "]})," "," ",S.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",S.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[" ",S.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-6",children:[" ","Ready to Transform Your Learning?"," "]})," ",S.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10",children:[" ","Join thousands of learners who are already exploring concepts in revolutionary ways with TinkFlow's AI-powered platform."," "]})," ",S.jsxs("button",{onClick:t,className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-12 py-4 rounded-xl text-lg font-semibold hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning for Free"," "]})," ",S.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:[" ","No credit card required • Get started in seconds"," "]})," "]})," "]})," "," ",S.jsxs("footer",{className:"bg-gray-900 text-white py-12",children:[" ",S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",S.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[" ",S.jsxs("div",{className:"col-span-1",children:[" ",S.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[" ",S.jsxs("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",S.jsx("span",{className:"text-white font-bold text-sm",children:"T"})," "]})," ",S.jsx("span",{className:"text-xl font-bold",children:"TinkFlow"})," "]})," ",S.jsxs("p",{className:"text-gray-400 text-sm",children:[" ","AI-powered concept learning platform for curious minds."," "]})," "]})," ",S.jsxs("div",{children:[" ",S.jsx("h4",{className:"font-semibold mb-4",children:"Product"})," ",S.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Features"})})," ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Pricing"})})," ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"API"})})," "]})," "]})," ",S.jsxs("div",{children:[" ",S.jsx("h4",{className:"font-semibold mb-4",children:"Resources"})," ",S.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Documentation"})})," ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Tutorials"})})," ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Blog"})})," "]})," "]})," ",S.jsxs("div",{children:[" ",S.jsx("h4",{className:"font-semibold mb-4",children:"Company"})," ",S.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About"})})," ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})})," ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy"})})," "]})," "]})," "]})," ",S.jsxs("div",{className:"border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[" ",S.jsxs("p",{className:"text-gray-400 text-sm",children:[" ","© 2025 TinkFlow. All rights reserved."," "]})," ",S.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[" ",S.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",S.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",S.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})," "]})," "]})," ",S.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",S.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",S.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})," "]})," "]})," ",S.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",S.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",S.jsx("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.747.099.12.112.225.085.344-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.001 12.017z"})," "]})," "]})," "]})," "]})," "]})," "]})," "]})}/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hY=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dY=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),a2=t=>{const e=dY(t);return e.charAt(0).toUpperCase()+e.slice(1)},gk=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),fY=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pY={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mY=M.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:c,...u},d)=>M.createElement("svg",{ref:d,...pY,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:gk("lucide",s),...!a&&!fY(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,m])=>M.createElement(f,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=(t,e)=>{const n=M.forwardRef(({className:r,...s},a)=>M.createElement(mY,{ref:a,iconNode:e,className:gk(`lucide-${hY(a2(t))}`,`lucide-${t}`,r),...s}));return n.displayName=a2(t),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gY=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],yY=La("arrow-left",gY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vY=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],_Y=La("file-text",vY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bY=[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]],yk=La("gavel",bY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],vk=La("info",wY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EY=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],_k=La("lightbulb",EY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xY=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],TY=La("loader-circle",xY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SY=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],l2=La("sparkles",SY),AY={explain:{border:"border-blue-400",ring:"ring-blue-100 dark:ring-blue-500/30",placeholder:"Explain this concept...",Icon:vk},answer:{border:"border-emerald-400",ring:"ring-emerald-100 dark:ring-emerald-500/30",placeholder:"Answer this question...",Icon:_k},argue:{border:"border-rose-400",ring:"ring-rose-100 dark:ring-rose-500/30",placeholder:"Argue this point...",Icon:yk}};function RY({data:t}){const[e,n]=M.useState(""),r=M.useRef(null);M.useEffect(()=>{const f=r.current;if(!f)return;const m=new IntersectionObserver(([v])=>{v.isIntersecting&&(f.focus(),m.disconnect())});return m.observe(f),()=>m.disconnect()},[]);const s=f=>{f.preventDefault();const m=e.trim();m&&t.onSubmit(m)},{border:a,ring:c,placeholder:u,Icon:d}=AY[t.mode];return S.jsxs("div",{className:`relative bg-white dark:bg-gray-900 shadow-lg rounded-xl px-4 py-3 min-w-[200px] border ${a} ring-1 ${c} transition-shadow`,children:[S.jsxs("form",{onSubmit:s,className:"flex items-center gap-2",children:[S.jsx(d,{size:18,className:"text-gray-400 dark:text-gray-500 shrink-0"}),S.jsx("input",{ref:r,value:e,onChange:f=>n(f.target.value),placeholder:u,className:"flex-1 bg-transparent outline-none text-sm placeholder-gray-400 dark:placeholder-gray-500 caret-gray-900 dark:caret-gray-100 text-gray-900 dark:text-gray-100"})]}),S.jsx(Hn,{type:"target",position:Te.Top}),S.jsx(Hn,{type:"source",position:Te.Bottom})]})}const CY=async()=>{try{await mj(ib),console.log("User signed out successfully")}catch(t){throw console.error("Error signing out:",t),t}},NY=()=>{const[t,e]=M.useState(null);return M.useEffect(()=>{const r=pj(ib,s=>{e(s),s?console.log("User signed in:",s.uid):console.log("No user signed in")});return()=>r()},[]),{user:t,signOut:async()=>{try{await CY(),e(null)}catch(r){console.error("Error in sign out:",r)}}}},bk=t=>!!(t&&t.uid),oh=[{id:"1",type:"staticEditable",data:{label:"The _artificial intelligence_ system processes _natural language_ effectively",title:"AI & Natural Language",suggestions:["Machine Learning","Neural Networks","Deep Learning"],tokenColors:{},previousNode:null},position:{x:250,y:25},draggable:!1}],rc=[],IY=async t=>{if(!bk({uid:t}))throw new Error(fr.AUTH_REQUIRED);try{const e=M_(ri,_r.BOARDS),n=r8(e,i8("userId","==",t),s8("createdAt","desc")),r=await q_(n);if(r.empty){const a={id:`board_${Date.now()}`,userId:t,name:"Default Board",createdAt:bt.now(),isOpen:!0};return await G_(xc(ri,_r.BOARDS,a.id),a),console.log("Created default board:",a),[a]}const s=r.docs.map(a=>({id:a.id,...a.data()}));return console.log("Fetched all boards:",s),s}catch(e){if(console.error("Fetch all boards error:",e),e.code==="failed-precondition"||e.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:t,name:"Fallback Board (Create Index)",createdAt:bt.now(),isOpen:!0,isFallback:!0}]}throw new Error(fr.LOAD_FAILED)}},c2=async t=>{if(!t)return console.warn("No board ID provided for fetching nodes"),oh;try{const e=M_(ri,_r.BOARDS,t,_r.NODES),n=await q_(e);if(n.empty)return console.log("No nodes found for board, using initial nodes"),oh;const r=n.docs.map(s=>{const a=s.data(),c={...a.data,tokenColors:a.data?.tokenColors||{},previousNode:a.data?.previousNode||null};return{id:s.id,type:a.type,position:a.position,data:c,draggable:a.draggable,style:a.style}});return console.log("Fetched nodes from board:",r),r}catch(e){return console.error("Fetch nodes error:",e),oh}},u2=async t=>{if(!t)return console.warn("No board ID provided for fetching edges"),rc;try{const e=M_(ri,_r.BOARDS,t,_r.EDGES),n=await q_(e);if(n.empty)return console.log("No edges found for board, using initial edges"),rc;const r=n.docs.map(s=>({id:s.id,...s.data()}));return console.log("Fetched edges from board:",r),r}catch(e){return console.error("Fetch edges error:",e),rc}},DY=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving nodes:",{boardId:t,nodesCount:e?.length});return}try{const n=XN(ri);e.forEach(r=>{const s=xc(ri,_r.BOARDS,t,_r.NODES,r.id),a={type:r.type,data:r.data,position:r.position,updatedAt:bt.now()};r.draggable!=null&&(a.draggable=r.draggable),r.style!=null&&(a.style=r.style),n.set(s,a)}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(fr.SAVE_FAILED)}},kY=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving edges:",{boardId:t,edgesCount:e?.length});return}try{const n=XN(ri);e.forEach(r=>{const s=xc(ri,_r.BOARDS,t,_r.EDGES,r.id),a={source:r.source,target:r.target,updatedAt:bt.now()};r.sourceHandle!=null&&(a.sourceHandle=r.sourceHandle),r.targetHandle!=null&&(a.targetHandle=r.targetHandle),r.style!=null&&(a.style=r.style),r.markerEnd!=null&&(a.markerEnd=r.markerEnd),n.set(s,a)}),await n.commit(),console.log("Edges saved to board")}catch(n){throw console.error("Save edges error:",n),new Error(fr.SAVE_FAILED)}},MY=async(t,e,n)=>{if(!bk({uid:t}))throw new Error(fr.AUTH_REQUIRED);try{const r={id:`board_${Date.now()}`,userId:t,name:e||`Board ${n.length+1}`,createdAt:bt.now(),isOpen:!1};return console.log("Creating board:",r),await G_(xc(ri,_r.BOARDS,r.id),r),console.log("Board created successfully:",r),r}catch(r){throw console.error("Error creating new board:",r),r.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):r.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},PY=async t=>{if(!t)throw new Error("Board ID is required for deletion");try{await h8(xc(ri,_r.BOARDS,t)),console.log("Board deleted successfully")}catch(e){throw console.error("Error deleting board:",e),e.code==="permission-denied"?new Error("Permission denied. Cannot delete this board."):e}},Pl=async(t,e)=>{if(!t||!e)throw new Error("Board ID and updates are required");try{const n={...e,updatedAt:bt.now()};await G_(xc(ri,_r.BOARDS,t),n,{merge:!0}),console.log("Board status updated:",n)}catch(n){throw console.error("Error updating board status:",n),n}},OY=t=>{if(!t||!t.data)return t;const e={...t},n={...t.data};return n.title||(n.title=n.label||n.summary||"Node"),n.suggestions||(n.suggestions=[]),e.draggable===void 0&&(e.draggable=!0),e.data=n,e},VY=t=>Array.isArray(t)?t.map(OY):[],LY=(t,e={})=>{const[n,r,s]=V5([]),[a,c,u]=L5([]),[d,f]=M.useState(!0),[m,v]=M.useState(!1),[_,w]=M.useState(!1),[T,R]=M.useState([]),[C,D]=M.useState(null),z=M.useRef(null),{showSuccess:B,showError:U,showInfo:q}=e,X=k=>{const V=k.find(K=>K.isOpen===!0);if(V)return V;if(k.length>0){const K={...k[0],isOpen:!0};return Pl(K.id,K).catch(console.error),K}return null};M.useEffect(()=>{(async()=>{if(t)try{f(!0);const V=await IY(t.uid);R(V);const K=V.some(J=>J.isFallback);K&&U&&U("Database index missing. Please create the required Firestore index. Check console for details.");const L=X(V);if(!L){console.error("No board found for user"),U&&U("No boards found. Creating a default board..."),r(oh),c(rc);return}D(L);const[G,ee]=await Promise.all([c2(L.id),u2(L.id)]);r(G),c(ee),q&&!K&&q("Board loaded successfully!")}catch(V){console.error("Error loading initial data:",V),U&&U("Failed to load board data. Using default board."),r(oh),c(rc)}finally{f(!1)}})()},[t,r,c]);const I=async(k,V,K)=>{z.current&&clearTimeout(z.current);const L=setTimeout(async()=>{try{w(!0);const G=[];V&&V.length>0&&G.push(DY(k,V)),K&&K.length>0&&G.push(kY(k,K)),G.length>0&&(await Promise.all(G),console.log("Auto-save completed successfully"))}catch(G){console.error("Auto-save failed:",G),U&&U("Failed to save changes automatically")}finally{w(!1),z.current=null}},1e3);z.current=L};M.useEffect(()=>(!d&&C&&!m&&!C.isFallback&&I(C.id,n,a),()=>{z.current&&clearTimeout(z.current)}),[n,a,d,C,m]);const A=async k=>{try{if(C?.id===k)return;if(C?.isFallback||T.find(K=>K.id===k)?.isFallback){U&&U("Cannot switch to fallback board. Please create the missing Firestore index first.");return}if(v(!0),C&&!C.isFallback){const K={...C,isOpen:!1};await Pl(C.id,K),R(L=>L.map(G=>G.id===C.id?K:G))}const V=T.find(K=>K.id===k);if(V){const K={...V,isOpen:!0};await Pl(k,K),D(K),R(J=>J.map(O=>O.id===k?K:O));const[L,G]=await Promise.all([c2(k),u2(k)]),ee=VY(L);r(ee),c(G),B&&B(`Switched to "${K.name}"`)}else console.error("Board not found:",k),U&&U("Board not found")}catch(V){console.error("Error switching board:",V),U&&U("Failed to switch board. Please try again.")}finally{v(!1)}};return{nodes:n,edges:a,allBoards:T,currentBoard:C,isLoading:d,isSwitchingBoard:m,isSaving:_,onNodesChange:s,onEdgesChange:u,setNodes:r,setEdges:c,switchToBoard:A,createNewBoard:async k=>{try{if(!t)return U&&U("You must be logged in to create a board"),null;q&&q("Creating new board...");const V=await MY(t.uid,k||null,T);if(V){if(C&&!C.isFallback){const L={...C,isOpen:!1};Pl(C.id,L).catch(console.error)}const K={...V,isOpen:!0};return R(L=>{const G=L.map(ee=>ee.id===C?.id?{...ee,isOpen:!1}:ee);return[K,...G]}),D(K),Pl(V.id,K).catch(console.error),r([{id:"1",type:"staticEditable",data:{label:k||"New Board"},position:{x:250,y:25},draggable:!1}]),c(rc),B&&B(`Board "${V.name}" created and opened!`),K}else return U&&U("Failed to create board. Please try again."),null}catch(V){return U&&U(`Failed to create board: ${V.message}`),null}},deleteBoard:async k=>{try{if(T.length<=1){U&&U("Cannot delete the last board!");return}if(!T.find(K=>K.id===k)){console.error("Board not found for deletion"),U&&U("Board not found");return}if(q&&q("Deleting board..."),C?.id===k){const K=T.find(L=>L.id!==k);K&&await A(K.id)}await PY(k),R(K=>K.filter(L=>L.id!==k)),B&&B("Board deleted successfully!")}catch(V){console.error("Error deleting board:",V),U&&U("Failed to delete board. Please try again.")}},updateBoardName:async k=>{if(C&&C.name!==k){const V={...C,name:k};D(V),R(K=>K.map(L=>L.id===C.id?V:L));try{await Pl(C.id,V),console.log("Board name updated successfully")}catch(K){console.error("Error updating board name:",K)}}},clearBoardState:()=>{z.current&&(clearTimeout(z.current),z.current=null),R([]),D(null),r([]),c([]),f(!0),v(!1),w(!1)}}},zY=()=>{const[t,e]=M.useState([]),n=f=>{e(m=>m.filter(v=>v.id!==f))},r=f=>{const m=Date.now().toString(),v={id:m,timestamp:new Date,...f};return e(_=>[..._,v]),f.autoRemove!==!1&&setTimeout(()=>{n(m)},f.duration||5e3),m};return{notifications:t,addNotification:r,removeNotification:n,clearAllNotifications:()=>{e([])},showSuccess:(f,m={})=>r({type:"success",message:f,...m}),showError:(f,m={})=>r({type:"error",message:f,duration:7e3,...m}),showInfo:(f,m={})=>r({type:"info",message:f,...m}),showWarning:(f,m={})=>r({type:"warning",message:f,duration:6e3,...m})}},wk=({size:t="medium",color:e="#4f86f7"})=>{const n={small:"w-4 h-4 border-2",medium:"w-8 h-8 border-3",large:"w-12 h-12 border-4"};return S.jsx("div",{className:"flex items-center justify-center",children:S.jsx("div",{className:`${n[t]} border-gray-200 dark:border-gray-700 border-t-indigo-500 dark:border-t-indigo-400 rounded-full animate-spin`,style:{borderTopColor:e}})})},xy={explain:{classes:"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100 dark:bg-blue-950 dark:text-blue-300 dark:border-blue-700",color:"#3b82f6",Icon:vk},answer:{classes:"bg-emerald-50 text-emerald-700 border-emerald-200 hover:bg-emerald-100 dark:bg-emerald-950 dark:text-emerald-300 dark:border-emerald-700",color:"#10b981",Icon:_k},argue:{classes:"bg-rose-50 text-rose-700 border-rose-200 hover:bg-rose-100 dark:bg-rose-950 dark:text-rose-300 dark:border-rose-700",color:"#fb7185",Icon:yk}};function Ek({dragState:t,handleDragStart:e,handleOrigin:n,getParentCenter:r}){return S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"absolute left-1/2 z-10 flex gap-2 select-none",style:{transform:"translateX(-50%) translateY(24px)"},children:["explain","answer","argue"].map(s=>{const{classes:a,Icon:c}=xy[s],u=t.isDragging&&t.mode===s;return S.jsxs("div",{draggable:!1,onPointerDown:d=>{d.stopPropagation(),d.preventDefault(),d.button===0&&e(s,d.nativeEvent)},className:`px-2 py-1 rounded-lg border text-sm font-medium flex items-center gap-1 shadow-sm cursor-grab transition-opacity duration-150 ${a} ${u?"opacity-0":"opacity-100"}`,style:{position:"relative",zIndex:11},children:[S.jsx(c,{size:16,strokeWidth:2}),s.charAt(0).toUpperCase()+s.slice(1),S.jsx(Hn,{type:"source",position:Te.Bottom,id:s})]},s)})}),t.isDragging&&typeof window<"u"&&H2.createPortal(S.jsxs(S.Fragment,{children:[S.jsx("svg",{className:"fixed inset-0 pointer-events-none z-[9998]",width:"100vw",height:"100vh",children:S.jsx("line",{x1:n?n.x:r().x,y1:n?n.y:r().y,x2:t.x,y2:t.y,stroke:xy[t.mode??"explain"].color,strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round"})}),S.jsx("div",{className:"fixed pointer-events-none z-[9999] -translate-x-1/2 -translate-y-1/2",style:{left:t.x,top:t.y},children:S.jsx("div",{className:"px-4 py-1 rounded-lg shadow-lg font-semibold text-white backdrop-blur-sm",style:{background:xy[t.mode??"explain"].color},children:t.mode&&t.mode.charAt(0).toUpperCase()+t.mode.slice(1)})})]}),document.body)]})}function h2(t){if(!t)return"#ffffff";const e=(t??"000000").replace(/^#/,""),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16),[a,c,u]=[n,r,s].map(f=>{const m=f/255;return m<=.03928?m/12.92:Math.pow((m+.055)/1.055,2.4)});return .2126*a+.7152*c+.0722*u>.179?"#000000":"#ffffff"}function UY({data:t,id:e}){const[n,r]=M.useState(t.summary||t.label||"Static Node"),{screenToFlowPosition:s}=zh(),{handleTokenClick:a,showExplanation:c}=VI(),u=M.useRef(null),[d,f]=M.useState({mode:void 0,x:0,y:0,isDragging:!1}),m=M.useRef(d);M.useEffect(()=>{m.current=d},[d]);const[v,_]=M.useState(null);M.useEffect(()=>{r(t.summary||t.label||"Static Node")},[t.summary,t.label]);const T=rC(n),R=(A,N)=>{N.stopPropagation(),a(A,e,{x:0,y:0},"staticEditable",t.myColor,t.label||"Static Node",A.suggestionId)},C=A=>{A.stopPropagation(),c&&c(t.title||"Explanation",t.full_text||"No detailed information available.")},D=(A,N)=>{const F=N.target.getBoundingClientRect();_({x:F.left+F.width/2,y:F.top+F.height/2}),f({mode:A,x:N.clientX,y:N.clientY,isDragging:!0}),document.addEventListener("pointermove",z),document.addEventListener("pointerup",B)},z=A=>{f(N=>N.isDragging?{...N,x:A.clientX,y:A.clientY}:N)},B=()=>{const A=m.current;if(console.log("handleDragEnd",A),A.isDragging&&t.onNodeCallback){const N=s({x:A.x,y:A.y});console.log("Calling onNodeCallback",A.mode,N),t.onNodeCallback(A.mode||void 0,e,N)}f({mode:"explain",x:0,y:0,isDragging:!1}),_(null),document.removeEventListener("pointermove",z),document.removeEventListener("pointerup",B)},U=()=>{if(!u.current)return{x:0,y:0};const A=u.current.getBoundingClientRect();return{x:A.left+A.width/2,y:A.top+A.height/2}},q=M.useMemo(()=>{const A=t.tokenColors||{};return T.map((N,H)=>{const F=N.myConcept||N.word,$=A[F],k=!$;return S.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-lg font-medium transition-all duration-200 ease-out
                        ${k?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}
                        ${N.myConcept?"bg-blue-500/10 border border-blue-500/30":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:$||"transparent",color:$?h2($):"#f8faff",border:$?`1px solid ${yp($,20)}`:""},onClick:V=>k?R(N,V):V.stopPropagation(),children:[N.word,H<T.length-1?" ":""]},H)})},[T,t.tokenColors]),X=M.useMemo(()=>{const A=t.tokenColors||{};return!t.suggestions||t.suggestions.length===0?S.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"}):t.suggestions.map((N,H)=>{const F=A[N],$=!F;return S.jsx("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                        bg-white/5 border border-white/10 transition-all duration-200 
                        ${$?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:F||"transparent",color:F?h2(F):"#f8faff",border:F?`1px solid ${yp(F,20)}`:""},onClick:k=>$?R({word:N,myConcept:N,suggestionId:(t.label||"")+N+H},k):k.stopPropagation(),children:N},H)})},[t.suggestions,t.tokenColors]),I=M.useMemo(()=>t.isLoading?S.jsxs("div",{className:"flex items-center justify-center gap-2 py-8",children:[S.jsx(wk,{size:"small",color:"#6366f1"}),S.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}):S.jsxs("div",{className:"flex flex-col gap-3",children:[S.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[S.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),S.jsx("div",{className:"flex gap-2",children:S.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                transition-all duration-150 flex items-center justify-center text-sm`,onClick:C,title:"Show full text",children:"📄"})})]}),S.jsx("div",{className:"flex-1",children:S.jsx("div",{className:"cursor-text leading-relaxed break-words text-lg font-medium",children:q})}),S.jsxs("div",{className:"mt-2",children:[S.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),S.jsx("div",{className:"flex flex-wrap gap-1",children:X})]})]}),[t.isLoading,t.title,q,X]);return S.jsxs("div",{ref:u,className:`bg-black border border-white/[0.1] rounded-[20px] p-7 min-w-[320px] max-w-[500px] 
                transition-all duration-150 ease-in-out cursor-pointer select-none overflow-hidden
                opacity-[0.98] border-b-[3px] border-b-white/[0.06]
                hover:opacity-100 hover:bg-[#28282c] hover:border-white/[0.2]`,style:{backgroundColor:"#000000",color:"#f8faff",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[S.jsx("div",{className:"relative pointer-events-auto text-[#f8faff] text-[18px] leading-[1.7] font-semibold",children:I}),S.jsx(Hn,{type:"source",position:Te.Bottom,id:"bottom-source"}),S.jsx(Hn,{type:"target",position:Te.Bottom,id:"bottom-target"}),S.jsx(Ek,{dragState:d,handleDragStart:D,handleOrigin:v,getParentCenter:U})]})}function jY(){return S.jsxs(S.Fragment,{children:[S.jsx(Hn,{type:"source",position:Te.Bottom,id:"bottom-source"}),S.jsx(Hn,{style:{transform:"translateY(100%)"},type:"target",position:Te.Top,id:"top-target"}),S.jsx(Hn,{style:{transform:"translateY(100%)"},type:"source",position:Te.Left,id:"left-source"}),S.jsx(Hn,{style:{transform:"translateY(100%)"},type:"target",position:Te.Left,id:"left-target"}),S.jsx(Hn,{style:{transform:"translateY(100%)"},type:"source",position:Te.Right,id:"right-source"}),S.jsx(Hn,{style:{transform:"translateY(100%)"},type:"target",position:Te.Right,id:"right-target"})]})}function BY({data:t,id:e}){const[n,r]=M.useState(t.summary||t.label||"Draggable Node");M.useEffect(()=>{t.layout||(t.layout=1)},[t.layout]);const{getNodes:s,getNode:a,setViewport:c,screenToFlowPosition:u}=zh(),{handleTokenClick:d,showExplanation:f}=VI(),[m,v]=M.useState(!1),_=M.useRef(null),[w,T]=M.useState({mode:void 0,x:0,y:0,isDragging:!1}),R=M.useRef(w);M.useEffect(()=>{R.current=w},[w]);const[C,D]=M.useState(null);function z(){v(!0)}function B(){v(!1)}M.useEffect(()=>{r(t.summary||t.label||"Draggable Node")},[t.summary,t.label]);const U=rC(n),q=U,X=()=>!0,I=(V,K)=>{if(K.stopPropagation(),_.current){const L=_.current.getBoundingClientRect(),G=u({x:L.left,y:L.top});d(V,e,G,"draggableEditable",t.myColor,t.full_text||n)}},A=M.useMemo(()=>t.contents&&t.contents.length>0?S.jsx("div",{className:"node-rich-content",dangerouslySetInnerHTML:{__html:t.contents[0]}}):t.isLoading?S.jsxs("div",{className:"flex items-center justify-center gap-3 py-6",children:[S.jsx(wk,{}),S.jsx("span",{className:"text-slate-400 text-sm",children:"Generating content..."})]}):S.jsxs("section",{className:"grid gap-4 p-4 rounded-2xl border border-white/10 bg-black/10 shadow-inner backdrop-blur-sm",children:[S.jsxs("div",{className:"rounded-lg border border-slate-600/20 bg-slate-800/40 px-4 py-3 space-y-2",children:[S.jsx("span",{className:"text-xs font-semibold text-slate-400/80",children:t.title||"Content"}),S.jsx("div",{className:"flex flex-wrap gap-1",children:q.map((V,K)=>{const G=(t.tokenColors||{})[V.myConcept||V.word],ee=!G;return S.jsxs("span",{onClick:J=>ee?I(V,J):J.stopPropagation(),style:{backgroundColor:G||void 0,color:N(G||t.myColor),borderColor:G?yp(G,20):"transparent",boxShadow:G?`0 0 0 1px ${G}25`:""},className:["inline-block px-2 py-1 rounded-md text-[0.7rem] font-medium","transition-all duration-300",V.myConcept?"bg-indigo-500/10 border":"border hover:border-indigo-400/40",ee?"cursor-pointer hover:bg-indigo-500/20 hover:scale-105 hover:-translate-y-0.5 active:scale-95 active:translate-y-0":"cursor-not-allowed opacity-70"].join(" "),children:[V.word,K<q.length-1?" ":""]},K)})})]}),t.suggestions&&t.suggestions.length>0&&S.jsxs("div",{className:"rounded-lg border border-slate-600/20 bg-slate-800/40 px-4 py-3 space-y-2",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(l2,{className:"w-4 h-4 text-indigo-400"}),S.jsx("span",{className:"text-xs font-semibold text-slate-400/80",children:"Explore Next"})]}),S.jsx("div",{className:"flex flex-wrap gap-2",children:t.suggestions.map((V,K)=>S.jsx("button",{className:"px-3 py-1 text-xs rounded-full bg-indigo-600/20 text-indigo-300 border border-indigo-500/30 hover:bg-indigo-600/30 transition-colors",onClick:L=>{if(L.stopPropagation(),_.current){const G=_.current.getBoundingClientRect(),ee=u({x:G.left,y:G.top});d({word:V},e,ee,"draggableEditable",t.myColor,t.full_text||t.title||V)}},children:V},K))})]})]}),[t.contents,t.isLoading,t.title,t.suggestions,q,X,t.tokenColors,I,t.myColor,d,e,_,u,t.full_text]),N=V=>{const K=V.replace("#",""),L=parseInt(K.substr(0,2),16),G=parseInt(K.substr(2,2),16),ee=parseInt(K.substr(4,2),16);return(L*299+G*587+ee*114)/1e3>128?"#000000":"#ffffff"},H=()=>{f&&t.title&&t.full_text&&f(t.title,t.full_text)},F=V=>{if(V.stopPropagation(),t.previousNode){const K=a(t.previousNode);K&&c({x:-K.position.x+200,y:-K.position.y+200,zoom:1})}},$=(V,K)=>{T({mode:V,x:K.clientX,y:K.clientY,isDragging:!0})},k=()=>{if(!_.current)return{x:0,y:0};const V=_.current.getBoundingClientRect();return{x:V.left+V.width/2,y:V.top+V.height/2}};return S.jsxs("div",{ref:_,className:`bg-[#202023] border border-white/[0.12] rounded-2xl p-5 min-w-[280px] max-w-[600px] 
                       transition-all duration-200 ease-in-out cursor-grab select-none
                       hover:transform hover:-translate-y-[3px]
                       hover:border-white/[0.18] hover:bg-[#242427]`,style:{background:t.myColor,color:t.myColor?N(t.myColor):"#f0f4f8",border:t.myColor?`2px solid ${yp(t.myColor,.5)}`:"2px solid rgba(255, 255, 255, 0.12)"},onMouseEnter:z,onMouseLeave:B,children:[S.jsxs("div",{className:"relative pointer-events-auto text-[#f0f4f8] text-[17px] leading-[1.7] font-medium",children:[t.isLoading&&S.jsxs("div",{className:"flex items-center justify-center gap-3 py-6 animate-pulse",children:[S.jsx(TY,{className:"w-4 h-4 text-indigo-400 animate-spin"}),S.jsx("span",{className:"text-slate-400 text-sm font-medium",children:"Loading concept…"})]}),S.jsxs("header",{className:"flex flex-col items-center gap-3 mb-6",children:[S.jsxs("div",{className:"flex items-center gap-3 group",children:[t.icon?S.jsx("span",{className:"text-2xl",children:t.icon}):S.jsx(l2,{className:"w-7 h-7 text-indigo-300 drop-shadow-md transition-transform duration-300 group-hover:rotate-6 group-hover:scale-110"}),S.jsx("h2",{className:"text-2xl md:text-3xl font-extrabold tracking-tight text-gray-100 drop-shadow-sm",children:t.title||t.label||"Node"})]}),m&&S.jsxs("div",{className:"flex gap-3",children:[t.previousNode&&S.jsx("button",{onClick:F,title:"Go to previous node",className:`grid place-items-center w-9 h-9 rounded-xl border border-slate-500/30 bg-slate-600/10 text-slate-300 backdrop-blur
                                           transition-all duration-200 hover:-translate-y-0.5 hover:bg-slate-600/20 hover:border-slate-500/50 active:translate-y-0`,children:S.jsx(yY,{className:"w-5 h-5"})}),S.jsx("button",{onClick:H,title:"Show full text",className:`grid place-items-center w-9 h-9 rounded-xl border border-indigo-500/30 bg-indigo-600/10 text-indigo-300 backdrop-blur
                                       transition-all duration-200 hover:-translate-y-0.5 hover:bg-indigo-600/20 hover:border-indigo-500/50 active:translate-y-0`,children:S.jsx(_Y,{className:"w-5 h-5"})})]})]}),A,S.jsx(Ek,{dragState:w,handleDragStart:$,handleOrigin:C,getParentCenter:k})]}),S.jsx(jY,{})]})}const HY={staticEditable:UY,draggableEditable:BY},FY={...HY,tempInput:RY},$Y=M.memo(function({isVisible:e,explanation:n,onClose:r}){return S.jsx(s6,{defaultSize:{width:380},style:{background:"transparent",position:"fixed",right:"12px",top:"80px",borderRadius:"16px",zIndex:1e3},enable:{right:!1,top:!1,bottom:!1,left:!0},children:S.jsx("div",{className:"relative z-10 overflow-auto h-full",children:S.jsx(iY,{explanation:n,onClose:r,isVisible:e})})})});function qY(){const[t,e]=M.useState(!1),[n,r]=M.useState(!1),[s,a]=M.useState(null),c=M.useCallback((O,Q)=>{a({title:O,text:Q}),e(!0)},[]),u=M.useCallback(()=>{e(!1)},[]),{user:d,signOut:f}=NY(),{notifications:m,removeNotification:v,showSuccess:_,showError:w,showInfo:T}=zY(),{nodes:R,edges:C,allBoards:D,currentBoard:z,isSwitchingBoard:B,isSaving:U,onNodesChange:q,onEdgesChange:X,setNodes:I,setEdges:A,switchToBoard:N,createNewBoard:H,deleteBoard:F,updateBoardName:$,clearBoardState:k}=LY(d,{showSuccess:_,showError:w,showInfo:T}),V=async()=>{await f(),k()},K=()=>{r(!0)},L=M.useCallback(O=>{const Q={id:`e${O.source}-${O.target}`,source:O.source,target:O.target,sourceHandle:O.sourceHandle,targetHandle:O.targetHandle};X([{type:"add",item:Q}])},[X]),G=M.useCallback((O,Q,ne,W,re)=>{if(!ne||!re){console.warn("handleNodeCallback called without mode or position",ne,re);return}const he=`temp-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;I(_e=>[..._e,{id:he,type:"tempInput",position:{x:re.x-80,y:re.y-40},data:{mode:ne,parent:W}}]);const ue={default:"#FFFFFF",explain:"#3b82f6",answer:"#10b981",argue:"#fb7185"},ve=ue[ne in ue?ne:"default"];W&&X([{type:"add",item:{id:`e${W}-${he}`,source:W,target:he,sourceHandle:ne,style:{stroke:ve,strokeWidth:3},markerEnd:{type:xa.ArrowClosed,color:ve}}}])},[I]),ee=M.useMemo(()=>R.map(O=>{let Q={...O.data};return Q.onNodeCallback=(ne,W,re)=>G(O.id,O.data,ne,W,re),O.type==="tempInput"&&(Q.onSubmit=ne=>{I(De=>De.map(Le=>Le.id===O.id?{...Le,type:"draggableEditable",data:{...Le.data,label:ne}}:Le));const W=R.find(De=>De.id===O.data.parent),re=W?.data?.color,he=W?.data?.label;console.log(W);const ue={word:ne},ve=O.data.parent,_e={x:O.position.x,y:O.position.y},Ye=OI(ue,ve,_e,"draggableEditable",R,I,q,X,re,he,void 0,!0,O,O.data.mode);if(console.log("Color from handleTokenClick:",Ye),I(De=>De.map(Le=>Le.id===O.id?{...Le,data:{...Le.data,myColor:Ye}}:Le)),O.data.parent){if(!Ye)return;A(De=>De.map(Le=>Le.id===`e${O.data.parent}-${O.id}`?{...Le,style:{...Le.style||{},stroke:Ye,strokeWidth:3},markerEnd:{type:xa.ArrowClosed,color:Ye}}:Le))}}),{...O,data:Q}}),[R,G,I]),J=M.useMemo(()=>S.jsxs(MR,{nodes:ee,edges:C,onNodesChange:q,onEdgesChange:X,onConnect:L,nodeTypes:FY,connectionMode:yo.Loose,fitView:!0,className:"bg-gray-50 dark:bg-gray-900 w-full h-full",children:[S.jsx($5,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg"}),S.jsx(W5,{variant:jr.Cross,gap:30,size:10,lineWidth:.5,color:"#94a3b8",className:"bg-gray-50 dark:bg-gray-900"})]}),[ee,C,q,X,L]);return d?S.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 relative",style:{height:"100vh",width:"100vw",overflow:"hidden"},children:[S.jsx(cY,{notifications:m,onRemove:v}),S.jsxs("div",{style:{height:"100%",position:"relative"},children:[S.jsxs(tC,{direction:"horizontal",children:[S.jsx(jy,{defaultSize:15,minSize:10,maxSize:30,children:S.jsx("div",{className:"bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700",children:S.jsx(rY,{allBoards:D,currentBoard:z,onSwitchBoard:N,onCreateBoard:async O=>{await H(O)},onDeleteBoard:F,onSignOut:V,isLoading:B})})}),S.jsx(nC,{}),S.jsx(jy,{children:S.jsxs("div",{className:"bg-white dark:bg-gray-800",style:{height:"100%",position:"relative"},children:[S.jsx(aY,{name:z?.name||"Loading...",onSetName:$,user:d,isSaving:U}),S.jsx("div",{className:"bg-gray-50 dark:bg-gray-900",style:{height:"calc(100% - 60px)",width:"100%"},children:S.jsx(aH,{nodes:R,onNodesChange:q,onEdgesChange:X,setNodes:I,showExplanation:c,children:J})})]})})]}),S.jsx($Y,{isVisible:t,explanation:s,onClose:u})]})]}):n?S.jsx(tY,{}):S.jsx(uY,{onLogin:K})}function GY(){return S.jsx(oY,{children:S.jsx(qY,{})})}const xk=document.getElementById("root");if(!xk)throw new Error("Failed to find the root element");i4.createRoot(xk).render(S.jsx(M.StrictMode,{children:S.jsx(GY,{})}));export{Vh as C,Qn as R,iC as _,wx as a,w3 as b,Uv as c,uh as d,zv as e,N2 as f,d2 as g,YY as h,Js as i,k2 as n,p3 as r,Qr as s};
