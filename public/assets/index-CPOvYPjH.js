(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function bm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ey={exports:{}},eh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lS;function X6(){if(lS)return eh;lS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,o){var u=null;if(o!==void 0&&(u=""+o),s.key!==void 0&&(u=""+s.key),"key"in s){o={};for(var c in s)c!=="key"&&(o[c]=s[c])}else o=s;return s=o.ref,{$$typeof:t,type:r,key:u,ref:s!==void 0?s:null,props:o}}return eh.Fragment=e,eh.jsx=n,eh.jsxs=n,eh}var cS;function K6(){return cS||(cS=1,ey.exports=X6()),ey.exports}var F=K6(),ty={exports:{}},at={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hS;function Q6(){if(hS)return at;hS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function _(w){return w===null||typeof w!="object"?null:(w=y&&w[y]||w["@@iterator"],typeof w=="function"?w:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,N={};function k(w,ee,ae){this.props=w,this.context=ee,this.refs=N,this.updater=ae||T}k.prototype.isReactComponent={},k.prototype.setState=function(w,ee){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,ee,"setState")},k.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function x(){}x.prototype=k.prototype;function C(w,ee,ae){this.props=w,this.context=ee,this.refs=N,this.updater=ae||T}var L=C.prototype=new x;L.constructor=C,I(L,k.prototype),L.isPureReactComponent=!0;var M=Array.isArray,q={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function S(w,ee,ae,j,ge,Ce){return ae=Ce.ref,{$$typeof:t,type:w,key:ee,ref:ae!==void 0?ae:null,props:Ce}}function A(w,ee){return S(w.type,ee,void 0,void 0,void 0,w.props)}function D(w){return typeof w=="object"&&w!==null&&w.$$typeof===t}function V(w){var ee={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(ae){return ee[ae]})}var H=/\/+/g;function z(w,ee){return typeof w=="object"&&w!==null&&w.key!=null?V(""+w.key):ee.toString(36)}function O(){}function U(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(O,O):(w.status="pending",w.then(function(ee){w.status==="pending"&&(w.status="fulfilled",w.value=ee)},function(ee){w.status==="pending"&&(w.status="rejected",w.reason=ee)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function X(w,ee,ae,j,ge){var Ce=typeof w;(Ce==="undefined"||Ce==="boolean")&&(w=null);var Te=!1;if(w===null)Te=!0;else switch(Ce){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(w.$$typeof){case t:case e:Te=!0;break;case m:return Te=w._init,X(Te(w._payload),ee,ae,j,ge)}}if(Te)return ge=ge(w),Te=j===""?"."+z(w,0):j,M(ge)?(ae="",Te!=null&&(ae=Te.replace(H,"$&/")+"/"),X(ge,ee,ae,"",function(Me){return Me})):ge!=null&&(D(ge)&&(ge=A(ge,ae+(ge.key==null||w&&w.key===ge.key?"":(""+ge.key).replace(H,"$&/")+"/")+Te)),ee.push(ge)),1;Te=0;var Ve=j===""?".":j+":";if(M(w))for(var Ie=0;Ie<w.length;Ie++)j=w[Ie],Ce=Ve+z(j,Ie),Te+=X(j,ee,ae,Ce,ge);else if(Ie=_(w),typeof Ie=="function")for(w=Ie.call(w),Ie=0;!(j=w.next()).done;)j=j.value,Ce=Ve+z(j,Ie++),Te+=X(j,ee,ae,Ce,ge);else if(Ce==="object"){if(typeof w.then=="function")return X(U(w),ee,ae,j,ge);throw ee=String(w),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Te}function Y(w,ee,ae){if(w==null)return w;var j=[],ge=0;return X(w,j,"","",function(Ce){return ee.call(ae,Ce,ge++)}),j}function W(w){if(w._status===-1){var ee=w._result;ee=ee(),ee.then(function(ae){(w._status===0||w._status===-1)&&(w._status=1,w._result=ae)},function(ae){(w._status===0||w._status===-1)&&(w._status=2,w._result=ae)}),w._status===-1&&(w._status=0,w._result=ee)}if(w._status===1)return w._result.default;throw w._result}var se=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)};function re(){}return at.Children={map:Y,forEach:function(w,ee,ae){Y(w,function(){ee.apply(this,arguments)},ae)},count:function(w){var ee=0;return Y(w,function(){ee++}),ee},toArray:function(w){return Y(w,function(ee){return ee})||[]},only:function(w){if(!D(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},at.Component=k,at.Fragment=n,at.Profiler=s,at.PureComponent=C,at.StrictMode=r,at.Suspense=d,at.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,at.__COMPILER_RUNTIME={__proto__:null,c:function(w){return q.H.useMemoCache(w)}},at.cache=function(w){return function(){return w.apply(null,arguments)}},at.cloneElement=function(w,ee,ae){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var j=I({},w.props),ge=w.key,Ce=void 0;if(ee!=null)for(Te in ee.ref!==void 0&&(Ce=void 0),ee.key!==void 0&&(ge=""+ee.key),ee)!B.call(ee,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&ee.ref===void 0||(j[Te]=ee[Te]);var Te=arguments.length-2;if(Te===1)j.children=ae;else if(1<Te){for(var Ve=Array(Te),Ie=0;Ie<Te;Ie++)Ve[Ie]=arguments[Ie+2];j.children=Ve}return S(w.type,ge,void 0,void 0,Ce,j)},at.createContext=function(w){return w={$$typeof:u,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:o,_context:w},w},at.createElement=function(w,ee,ae){var j,ge={},Ce=null;if(ee!=null)for(j in ee.key!==void 0&&(Ce=""+ee.key),ee)B.call(ee,j)&&j!=="key"&&j!=="__self"&&j!=="__source"&&(ge[j]=ee[j]);var Te=arguments.length-2;if(Te===1)ge.children=ae;else if(1<Te){for(var Ve=Array(Te),Ie=0;Ie<Te;Ie++)Ve[Ie]=arguments[Ie+2];ge.children=Ve}if(w&&w.defaultProps)for(j in Te=w.defaultProps,Te)ge[j]===void 0&&(ge[j]=Te[j]);return S(w,Ce,void 0,void 0,null,ge)},at.createRef=function(){return{current:null}},at.forwardRef=function(w){return{$$typeof:c,render:w}},at.isValidElement=D,at.lazy=function(w){return{$$typeof:m,_payload:{_status:-1,_result:w},_init:W}},at.memo=function(w,ee){return{$$typeof:f,type:w,compare:ee===void 0?null:ee}},at.startTransition=function(w){var ee=q.T,ae={};q.T=ae;try{var j=w(),ge=q.S;ge!==null&&ge(ae,j),typeof j=="object"&&j!==null&&typeof j.then=="function"&&j.then(re,se)}catch(Ce){se(Ce)}finally{q.T=ee}},at.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},at.use=function(w){return q.H.use(w)},at.useActionState=function(w,ee,ae){return q.H.useActionState(w,ee,ae)},at.useCallback=function(w,ee){return q.H.useCallback(w,ee)},at.useContext=function(w){return q.H.useContext(w)},at.useDebugValue=function(){},at.useDeferredValue=function(w,ee){return q.H.useDeferredValue(w,ee)},at.useEffect=function(w,ee,ae){var j=q.H;if(typeof ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return j.useEffect(w,ee)},at.useId=function(){return q.H.useId()},at.useImperativeHandle=function(w,ee,ae){return q.H.useImperativeHandle(w,ee,ae)},at.useInsertionEffect=function(w,ee){return q.H.useInsertionEffect(w,ee)},at.useLayoutEffect=function(w,ee){return q.H.useLayoutEffect(w,ee)},at.useMemo=function(w,ee){return q.H.useMemo(w,ee)},at.useOptimistic=function(w,ee){return q.H.useOptimistic(w,ee)},at.useReducer=function(w,ee,ae){return q.H.useReducer(w,ee,ae)},at.useRef=function(w){return q.H.useRef(w)},at.useState=function(w){return q.H.useState(w)},at.useSyncExternalStore=function(w,ee,ae){return q.H.useSyncExternalStore(w,ee,ae)},at.useTransition=function(){return q.H.useTransition()},at.version="19.1.0",at}var dS;function Bs(){return dS||(dS=1,ty.exports=Q6()),ty.exports}var te=Bs();const _e=bm(te);var ny={exports:{}},th={},ry={exports:{}},iy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fS;function W6(){return fS||(fS=1,function(t){function e(Y,W){var se=Y.length;Y.push(W);e:for(;0<se;){var re=se-1>>>1,w=Y[re];if(0<s(w,W))Y[re]=W,Y[se]=w,se=re;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var W=Y[0],se=Y.pop();if(se!==W){Y[0]=se;e:for(var re=0,w=Y.length,ee=w>>>1;re<ee;){var ae=2*(re+1)-1,j=Y[ae],ge=ae+1,Ce=Y[ge];if(0>s(j,se))ge<w&&0>s(Ce,j)?(Y[re]=Ce,Y[ge]=se,re=ge):(Y[re]=j,Y[ae]=se,re=ae);else if(ge<w&&0>s(Ce,se))Y[re]=Ce,Y[ge]=se,re=ge;else break e}}return W}function s(Y,W){var se=Y.sortIndex-W.sortIndex;return se!==0?se:Y.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();t.unstable_now=function(){return u.now()-c}}var d=[],f=[],m=1,y=null,_=3,T=!1,I=!1,N=!1,k=!1,x=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function M(Y){for(var W=n(f);W!==null;){if(W.callback===null)r(f);else if(W.startTime<=Y)r(f),W.sortIndex=W.expirationTime,e(d,W);else break;W=n(f)}}function q(Y){if(N=!1,M(Y),!I)if(n(d)!==null)I=!0,B||(B=!0,z());else{var W=n(f);W!==null&&X(q,W.startTime-Y)}}var B=!1,S=-1,A=5,D=-1;function V(){return k?!0:!(t.unstable_now()-D<A)}function H(){if(k=!1,B){var Y=t.unstable_now();D=Y;var W=!0;try{e:{I=!1,N&&(N=!1,C(S),S=-1),T=!0;var se=_;try{t:{for(M(Y),y=n(d);y!==null&&!(y.expirationTime>Y&&V());){var re=y.callback;if(typeof re=="function"){y.callback=null,_=y.priorityLevel;var w=re(y.expirationTime<=Y);if(Y=t.unstable_now(),typeof w=="function"){y.callback=w,M(Y),W=!0;break t}y===n(d)&&r(d),M(Y)}else r(d);y=n(d)}if(y!==null)W=!0;else{var ee=n(f);ee!==null&&X(q,ee.startTime-Y),W=!1}}break e}finally{y=null,_=se,T=!1}W=void 0}}finally{W?z():B=!1}}}var z;if(typeof L=="function")z=function(){L(H)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,U=O.port2;O.port1.onmessage=H,z=function(){U.postMessage(null)}}else z=function(){x(H,0)};function X(Y,W){S=x(function(){Y(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function(Y){switch(_){case 1:case 2:case 3:var W=3;break;default:W=_}var se=_;_=W;try{return Y()}finally{_=se}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(Y,W){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var se=_;_=Y;try{return W()}finally{_=se}},t.unstable_scheduleCallback=function(Y,W,se){var re=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?re+se:re):se=re,Y){case 1:var w=-1;break;case 2:w=250;break;case 5:w=1073741823;break;case 4:w=1e4;break;default:w=5e3}return w=se+w,Y={id:m++,callback:W,priorityLevel:Y,startTime:se,expirationTime:w,sortIndex:-1},se>re?(Y.sortIndex=se,e(f,Y),n(d)===null&&Y===n(f)&&(N?(C(S),S=-1):N=!0,X(q,se-re))):(Y.sortIndex=w,e(d,Y),I||T||(I=!0,B||(B=!0,z()))),Y},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(Y){var W=_;return function(){var se=_;_=W;try{return Y.apply(this,arguments)}finally{_=se}}}}(iy)),iy}var mS;function Z6(){return mS||(mS=1,ry.exports=W6()),ry.exports}var sy={exports:{}},Sr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pS;function J6(){if(pS)return Sr;pS=1;var t=Bs();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,f,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:d,containerInfo:f,implementation:m}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Sr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Sr.createPortal=function(d,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,m)},Sr.flushSync=function(d){var f=u.T,m=r.p;try{if(u.T=null,r.p=2,d)return d()}finally{u.T=f,r.p=m,r.d.f()}},Sr.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(d,f))},Sr.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},Sr.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var m=f.as,y=c(m,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,T=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?r.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:_,fetchPriority:T}):m==="script"&&r.d.X(d,{crossOrigin:y,integrity:_,fetchPriority:T,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Sr.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=c(f.as,f.crossOrigin);r.d.M(d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(d)},Sr.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,y=c(m,f.crossOrigin);r.d.L(d,m,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Sr.preloadModule=function(d,f){if(typeof d=="string")if(f){var m=c(f.as,f.crossOrigin);r.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(d)},Sr.requestFormReset=function(d){r.d.r(d)},Sr.unstable_batchedUpdates=function(d,f){return d(f)},Sr.useFormState=function(d,f,m){return u.H.useFormState(d,f,m)},Sr.useFormStatus=function(){return u.H.useHostTransitionStatus()},Sr.version="19.1.0",Sr}var gS;function Tm(){if(gS)return sy.exports;gS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),sy.exports=J6(),sy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yS;function eO(){if(yS)return th;yS=1;var t=Z6(),e=Bs(),n=Tm();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function u(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function c(i){if(o(i)!==i)throw Error(r(188))}function d(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(r(188));return a!==i?null:i}for(var l=i,h=a;;){var g=l.return;if(g===null)break;var E=g.alternate;if(E===null){if(h=g.return,h!==null){l=h;continue}break}if(g.child===E.child){for(E=g.child;E;){if(E===l)return c(g),i;if(E===h)return c(g),a;E=E.sibling}throw Error(r(188))}if(l.return!==h.return)l=g,h=E;else{for(var P=!1,G=g.child;G;){if(G===l){P=!0,l=g,h=E;break}if(G===h){P=!0,h=g,l=E;break}G=G.sibling}if(!P){for(G=E.child;G;){if(G===l){P=!0,l=E,h=g;break}if(G===h){P=!0,h=E,l=g;break}G=G.sibling}if(!P)throw Error(r(189))}}if(l.alternate!==h)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:a}function f(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=f(i),a!==null)return a;i=i.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),L=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function z(i){return i===null||typeof i!="object"?null:(i=H&&i[H]||i["@@iterator"],typeof i=="function"?i:null)}var O=Symbol.for("react.client.reference");function U(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===O?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case I:return"Fragment";case k:return"Profiler";case N:return"StrictMode";case q:return"Suspense";case B:return"SuspenseList";case D:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case T:return"Portal";case L:return(i.displayName||"Context")+".Provider";case C:return(i._context.displayName||"Context")+".Consumer";case M:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case S:return a=i.displayName||null,a!==null?a:U(i.type)||"Memo";case A:a=i._payload,i=i._init;try{return U(i(a))}catch{}}return null}var X=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},re=[],w=-1;function ee(i){return{current:i}}function ae(i){0>w||(i.current=re[w],re[w]=null,w--)}function j(i,a){w++,re[w]=i.current,i.current=a}var ge=ee(null),Ce=ee(null),Te=ee(null),Ve=ee(null);function Ie(i,a){switch(j(Te,a),j(Ce,i),j(ge,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?Bv(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=Bv(a),i=Uv(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ae(ge),j(ge,i)}function Me(){ae(ge),ae(Ce),ae(Te)}function ze(i){i.memoizedState!==null&&j(Ve,i);var a=ge.current,l=Uv(a,i.type);a!==l&&(j(Ce,i),j(ge,l))}function Je(i){Ce.current===i&&(ae(ge),ae(Ce)),Ve.current===i&&(ae(Ve),Kc._currentValue=se)}var an=Object.prototype.hasOwnProperty,Jt=t.unstable_scheduleCallback,on=t.unstable_cancelCallback,Dt=t.unstable_shouldYield,Dn=t.unstable_requestPaint,Qe=t.unstable_now,qe=t.unstable_getCurrentPriorityLevel,cn=t.unstable_ImmediatePriority,Vn=t.unstable_UserBlockingPriority,Hn=t.unstable_NormalPriority,Kn=t.unstable_LowPriority,zn=t.unstable_IdlePriority,An=t.log,ur=t.unstable_setDisableYieldValue,de=null,ve=null;function He(i){if(typeof An=="function"&&ur(i),ve&&typeof ve.setStrictMode=="function")try{ve.setStrictMode(de,i)}catch{}}var Ye=Math.clz32?Math.clz32:Ht,ut=Math.log,Tt=Math.LN2;function Ht(i){return i>>>=0,i===0?32:31-(ut(i)/Tt|0)|0}var zt=256,Ft=4194304;function vt(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function lt(i,a,l){var h=i.pendingLanes;if(h===0)return 0;var g=0,E=i.suspendedLanes,P=i.pingedLanes;i=i.warmLanes;var G=h&134217727;return G!==0?(h=G&~E,h!==0?g=vt(h):(P&=G,P!==0?g=vt(P):l||(l=G&~i,l!==0&&(g=vt(l))))):(G=h&~E,G!==0?g=vt(G):P!==0?g=vt(P):l||(l=h&~i,l!==0&&(g=vt(l)))),g===0?0:a!==0&&a!==g&&(a&E)===0&&(E=g&-g,l=a&-a,E>=l||E===32&&(l&4194048)!==0)?a:g}function Wt(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Gt(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gi(){var i=zt;return zt<<=1,(zt&4194048)===0&&(zt=256),i}function br(){var i=Ft;return Ft<<=1,(Ft&62914560)===0&&(Ft=4194304),i}function Fn(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function Dr(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Tr(i,a,l,h,g,E){var P=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var G=i.entanglements,J=i.expirationTimes,he=i.hiddenUpdates;for(l=P&~l;0<l;){var be=31-Ye(l),Ae=1<<be;G[be]=0,J[be]=-1;var fe=he[be];if(fe!==null)for(he[be]=null,be=0;be<fe.length;be++){var me=fe[be];me!==null&&(me.lane&=-536870913)}l&=~Ae}h!==0&&qr(i,h,0),E!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=E&~(P&~a))}function qr(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var h=31-Ye(a);i.entangledLanes|=a,i.entanglements[h]=i.entanglements[h]|1073741824|l&4194090}function zs(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var h=31-Ye(l),g=1<<h;g&a|i[h]&a&&(i[h]|=a),l&=~g}}function ii(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function $i(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Or(){var i=W.p;return i!==0?i:(i=window.event,i===void 0?32:rS(i.type))}function si(i,a){var l=W.p;try{return W.p=i,a()}finally{W.p=l}}var $t=Math.random().toString(36).slice(2),Pt="__reactFiber$"+$t,hn="__reactProps$"+$t,En="__reactContainer$"+$t,us="__reactEvents$"+$t,Co="__reactListeners$"+$t,kr="__reactHandles$"+$t,ls="__reactResources$"+$t,Ai="__reactMarker$"+$t;function ai(i){delete i[Pt],delete i[hn],delete i[us],delete i[Co],delete i[kr]}function Pr(i){var a=i[Pt];if(a)return a;for(var l=i.parentNode;l;){if(a=l[En]||l[Pt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=Fv(i);i!==null;){if(l=i[Pt])return l;i=Fv(i)}return a}i=l,l=i.parentNode}return null}function Qn(i){if(i=i[Pt]||i[En]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function Mr(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function jn(i){var a=i[ls];return a||(a=i[ls]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function ne(i){i[Ai]=!0}var pe=new Set,De={};function Le(i,a){pt(i,a),pt(i+"Capture",a)}function pt(i,a){for(De[i]=a,i=0;i<a.length;i++)pe.add(a[i])}var rt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jt={},Mt={};function Wn(i){return an.call(Mt,i)?!0:an.call(jt,i)?!1:rt.test(i)?Mt[i]=!0:(jt[i]=!0,!1)}function Lt(i,a,l){if(Wn(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function Nt(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function Bt(i,a,l,h){if(h===null)i.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+h)}}var On,_n;function xn(i){if(On===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);On=a&&a[1]||"",_n=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+On+i+_n}var Lr=!1;function Br(i,a){if(!i||Lr)return"";Lr=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var Ae=function(){throw Error()};if(Object.defineProperty(Ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ae,[])}catch(me){var fe=me}Reflect.construct(i,[],Ae)}else{try{Ae.call()}catch(me){fe=me}i.call(Ae.prototype)}}else{try{throw Error()}catch(me){fe=me}(Ae=i())&&typeof Ae.catch=="function"&&Ae.catch(function(){})}}catch(me){if(me&&fe&&typeof me.stack=="string")return[me.stack,fe.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=h.DetermineComponentFrameRoot(),P=E[0],G=E[1];if(P&&G){var J=P.split(`
`),he=G.split(`
`);for(g=h=0;h<J.length&&!J[h].includes("DetermineComponentFrameRoot");)h++;for(;g<he.length&&!he[g].includes("DetermineComponentFrameRoot");)g++;if(h===J.length||g===he.length)for(h=J.length-1,g=he.length-1;1<=h&&0<=g&&J[h]!==he[g];)g--;for(;1<=h&&0<=g;h--,g--)if(J[h]!==he[g]){if(h!==1||g!==1)do if(h--,g--,0>g||J[h]!==he[g]){var be=`
`+J[h].replace(" at new "," at ");return i.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",i.displayName)),be}while(1<=h&&0<=g);break}}}finally{Lr=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?xn(l):""}function xi(i){switch(i.tag){case 26:case 27:case 5:return xn(i.type);case 16:return xn("Lazy");case 13:return xn("Suspense");case 19:return xn("SuspenseList");case 0:case 15:return Br(i.type,!1);case 11:return Br(i.type.render,!1);case 1:return Br(i.type,!0);case 31:return xn("Activity");default:return""}}function wi(i){try{var a="";do a+=xi(i),i=i.return;while(i);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Zn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function No(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ac(i){var a=No(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),h=""+i[a];if(!i.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,E=l.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(P){h=""+P,E.call(this,P)}}),Object.defineProperty(i,a,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(P){h=""+P},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function St(i){i._valueTracker||(i._valueTracker=ac(i))}function bt(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),h="";return i&&(h=No(i)?i.checked?"true":"false":i.value),i=h,i!==l?(a.setValue(i),!0):!1}function Ii(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ci=/[\n"\\]/g;function dn(i){return i.replace(Ci,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function en(i,a,l,h,g,E,P,G){i.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?i.type=P:i.removeAttribute("type"),a!=null?P==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+Zn(a)):i.value!==""+Zn(a)&&(i.value=""+Zn(a)):P!=="submit"&&P!=="reset"||i.removeAttribute("value"),a!=null?cr(i,P,Zn(a)):l!=null?cr(i,P,Zn(l)):h!=null&&i.removeAttribute("value"),g==null&&E!=null&&(i.defaultChecked=!!E),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?i.name=""+Zn(G):i.removeAttribute("name")}function lr(i,a,l,h,g,E,P,G){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(i.type=E),a!=null||l!=null){if(!(E!=="submit"&&E!=="reset"||a!=null))return;l=l!=null?""+Zn(l):"",a=a!=null?""+Zn(a):l,G||a===i.value||(i.value=a),i.defaultValue=a}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=G?i.checked:!!h,i.defaultChecked=!!h,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(i.name=P)}function cr(i,a,l){a==="number"&&Ii(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Ur(i,a,l,h){if(i=i.options,a){a={};for(var g=0;g<l.length;g++)a["$"+l[g]]=!0;for(l=0;l<i.length;l++)g=a.hasOwnProperty("$"+i[l].value),i[l].selected!==g&&(i[l].selected=g),g&&h&&(i[l].defaultSelected=!0)}else{for(l=""+Zn(l),a=null,g=0;g<i.length;g++){if(i[g].value===l){i[g].selected=!0,h&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function Ct(i,a,l){if(a!=null&&(a=""+Zn(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+Zn(l):""}function Xi(i,a,l,h){if(a==null){if(h!=null){if(l!=null)throw Error(r(92));if(X(h)){if(1<h.length)throw Error(r(93));h=h[0]}l=h}l==null&&(l=""),a=l}l=Zn(a),i.defaultValue=l,h=i.textContent,h===l&&h!==""&&h!==null&&(i.value=h)}function hr(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var Vr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ro(i,a,l){var h=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":h?i.setProperty(a,l):typeof l!="number"||l===0||Vr.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function cs(i,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var g in a)h=a[g],a.hasOwnProperty(g)&&l[g]!==h&&Ro(i,g,h)}else for(var E in a)a.hasOwnProperty(E)&&Ro(i,E,a[E])}function Fs(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ba=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ta=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function js(i){return Ta.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Yr=null;function dr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var qs=null,Ys=null;function oc(i){var a=Qn(i);if(a&&(i=a.stateNode)){var l=i[hn]||null;e:switch(i=a.stateNode,a.type){case"input":if(en(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+dn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var h=l[a];if(h!==i&&h.form===i.form){var g=h[hn]||null;if(!g)throw Error(r(90));en(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<l.length;a++)h=l[a],h.form===i.form&&bt(h)}break e;case"textarea":Ct(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&Ur(i,!!l.multiple,a,!1)}}}var hs=!1;function Pd(i,a,l){if(hs)return i(a,l);hs=!0;try{var h=i(a);return h}finally{if(hs=!1,(qs!==null||Ys!==null)&&(Cf(),qs&&(a=qs,i=Ys,Ys=qs=null,oc(a),i)))for(a=0;a<i.length;a++)oc(i[a])}}function Do(i,a){var l=i.stateNode;if(l===null)return null;var h=l[hn]||null;if(h===null)return null;l=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var Ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ni=!1;if(Ki)try{var Oo={};Object.defineProperty(Oo,"passive",{get:function(){Ni=!0}}),window.addEventListener("test",Oo,Oo),window.removeEventListener("test",Oo,Oo)}catch{Ni=!1}var ds=null,va=null,Gs=null;function uc(){if(Gs)return Gs;var i,a=va,l=a.length,h,g="value"in ds?ds.value:ds.textContent,E=g.length;for(i=0;i<l&&a[i]===g[i];i++);var P=l-i;for(h=1;h<=P&&a[l-h]===g[E-h];h++);return Gs=g.slice(i,1<h?1-h:void 0)}function fs(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function ms(){return!0}function lc(){return!1}function Jn(i){function a(l,h,g,E,P){this._reactName=l,this._targetInst=g,this.type=h,this.nativeEvent=E,this.target=P,this.currentTarget=null;for(var G in i)i.hasOwnProperty(G)&&(l=i[G],this[G]=l?l(E):E[G]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?ms:lc,this.isPropagationStopped=lc,this}return m(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ms)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ms)},persist:function(){},isPersistent:ms}),a}var Ut={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Su=Jn(Ut),ko=m({},Ut,{view:0,detail:0}),Md=Jn(ko),Au,xu,ps,Po=m({},ko,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ps&&(ps&&i.type==="mousemove"?(Au=i.screenX-ps.screenX,xu=i.screenY-ps.screenY):xu=Au=0,ps=i),Au)},movementY:function(i){return"movementY"in i?i.movementY:xu}}),Ri=Jn(Po),Ld=m({},Po,{dataTransfer:0}),up=Jn(Ld),Mo=m({},ko,{relatedTarget:0}),wu=Jn(Mo),cc=m({},Ut,{animationName:0,elapsedTime:0,pseudoElement:0}),Iu=Jn(cc),Bd=m({},Ut,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Cu=Jn(Bd),lp=m({},Ut,{data:0}),hc=Jn(lp),Lo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ud={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dc(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Vd[i])?!!a[i]:!1}function Bo(){return dc}var Hd=m({},ko,{key:function(i){if(i.key){var a=Lo[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=fs(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ud[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bo,charCode:function(i){return i.type==="keypress"?fs(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?fs(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Nu=Jn(Hd),zd=m({},Po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fc=Jn(zd),$s=m({},ko,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bo}),Fd=Jn($s),jd=m({},Ut,{propertyName:0,elapsedTime:0,pseudoElement:0}),qd=Jn(jd),Yd=m({},Po,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ru=Jn(Yd),Hr=m({},Ut,{newState:0,oldState:0}),Gd=Jn(Hr),$d=[9,13,27,32],gs=Ki&&"CompositionEvent"in window,p=null;Ki&&"documentMode"in document&&(p=document.documentMode);var v=Ki&&"TextEvent"in window&&!p,R=Ki&&(!gs||p&&8<p&&11>=p),$=" ",ue=!1;function ye(i,a){switch(i){case"keyup":return $d.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pe(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var At=!1;function qn(i,a){switch(i){case"compositionend":return Pe(a);case"keypress":return a.which!==32?null:(ue=!0,$);case"textInput":return i=a.data,i===$&&ue?null:i;default:return null}}function xt(i,a){if(At)return i==="compositionend"||!gs&&ye(i,a)?(i=uc(),Gs=va=ds=null,At=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return R&&a.locale!=="ko"?null:a.data;default:return null}}var er={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yn(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!er[i.type]:a==="textarea"}function Xs(i,a,l,h){qs?Ys?Ys.push(h):Ys=[h]:qs=h,a=Pf(a,"onChange"),0<a.length&&(l=new Su("onChange","change",null,l,h),i.push({event:l,listeners:a}))}var fr=null,ys=null;function mc(i){Ov(i,0)}function Xd(i){var a=Mr(i);if(bt(a))return i}function J_(i,a){if(i==="change")return a}var eb=!1;if(Ki){var cp;if(Ki){var hp="oninput"in document;if(!hp){var tb=document.createElement("div");tb.setAttribute("oninput","return;"),hp=typeof tb.oninput=="function"}cp=hp}else cp=!1;eb=cp&&(!document.documentMode||9<document.documentMode)}function nb(){fr&&(fr.detachEvent("onpropertychange",rb),ys=fr=null)}function rb(i){if(i.propertyName==="value"&&Xd(ys)){var a=[];Xs(a,ys,i,dr(i)),Pd(mc,a)}}function AD(i,a,l){i==="focusin"?(nb(),fr=a,ys=l,fr.attachEvent("onpropertychange",rb)):i==="focusout"&&nb()}function xD(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Xd(ys)}function wD(i,a){if(i==="click")return Xd(a)}function ID(i,a){if(i==="input"||i==="change")return Xd(a)}function CD(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var oi=typeof Object.is=="function"?Object.is:CD;function pc(i,a){if(oi(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),h=Object.keys(a);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var g=l[h];if(!an.call(a,g)||!oi(i[g],a[g]))return!1}return!0}function ib(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function sb(i,a){var l=ib(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=a&&h>=a)return{node:l,offset:a-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=ib(l)}}function ab(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?ab(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function ob(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=Ii(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=Ii(i.document)}return a}function dp(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var ND=Ki&&"documentMode"in document&&11>=document.documentMode,Du=null,fp=null,gc=null,mp=!1;function ub(i,a,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;mp||Du==null||Du!==Ii(h)||(h=Du,"selectionStart"in h&&dp(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),gc&&pc(gc,h)||(gc=h,h=Pf(fp,"onSelect"),0<h.length&&(a=new Su("onSelect","select",null,a,l),i.push({event:a,listeners:h}),a.target=Du)))}function Uo(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var Ou={animationend:Uo("Animation","AnimationEnd"),animationiteration:Uo("Animation","AnimationIteration"),animationstart:Uo("Animation","AnimationStart"),transitionrun:Uo("Transition","TransitionRun"),transitionstart:Uo("Transition","TransitionStart"),transitioncancel:Uo("Transition","TransitionCancel"),transitionend:Uo("Transition","TransitionEnd")},pp={},lb={};Ki&&(lb=document.createElement("div").style,"AnimationEvent"in window||(delete Ou.animationend.animation,delete Ou.animationiteration.animation,delete Ou.animationstart.animation),"TransitionEvent"in window||delete Ou.transitionend.transition);function Vo(i){if(pp[i])return pp[i];if(!Ou[i])return i;var a=Ou[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in lb)return pp[i]=a[l];return i}var cb=Vo("animationend"),hb=Vo("animationiteration"),db=Vo("animationstart"),RD=Vo("transitionrun"),DD=Vo("transitionstart"),OD=Vo("transitioncancel"),fb=Vo("transitionend"),mb=new Map,gp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gp.push("scrollEnd");function Qi(i,a){mb.set(i,a),Le(a,[i])}var pb=new WeakMap;function Di(i,a){if(typeof i=="object"&&i!==null){var l=pb.get(i);return l!==void 0?l:(a={value:i,source:a,stack:wi(a)},pb.set(i,a),a)}return{value:i,source:a,stack:wi(a)}}var Oi=[],ku=0,yp=0;function Kd(){for(var i=ku,a=yp=ku=0;a<i;){var l=Oi[a];Oi[a++]=null;var h=Oi[a];Oi[a++]=null;var g=Oi[a];Oi[a++]=null;var E=Oi[a];if(Oi[a++]=null,h!==null&&g!==null){var P=h.pending;P===null?g.next=g:(g.next=P.next,P.next=g),h.pending=g}E!==0&&gb(l,g,E)}}function Qd(i,a,l,h){Oi[ku++]=i,Oi[ku++]=a,Oi[ku++]=l,Oi[ku++]=h,yp|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function Ep(i,a,l,h){return Qd(i,a,l,h),Wd(i)}function Pu(i,a){return Qd(i,null,null,a),Wd(i)}function gb(i,a,l){i.lanes|=l;var h=i.alternate;h!==null&&(h.lanes|=l);for(var g=!1,E=i.return;E!==null;)E.childLanes|=l,h=E.alternate,h!==null&&(h.childLanes|=l),E.tag===22&&(i=E.stateNode,i===null||i._visibility&1||(g=!0)),i=E,E=E.return;return i.tag===3?(E=i.stateNode,g&&a!==null&&(g=31-Ye(l),i=E.hiddenUpdates,h=i[g],h===null?i[g]=[a]:h.push(a),a.lane=l|536870912),E):null}function Wd(i){if(50<zc)throw zc=0,Ag=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var Mu={};function kD(i,a,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ui(i,a,l,h){return new kD(i,a,l,h)}function _p(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ks(i,a){var l=i.alternate;return l===null?(l=ui(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function yb(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Zd(i,a,l,h,g,E){var P=0;if(h=i,typeof i=="function")_p(i)&&(P=1);else if(typeof i=="string")P=M6(i,l,ge.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case D:return i=ui(31,l,a,g),i.elementType=D,i.lanes=E,i;case I:return Ho(l.children,g,E,a);case N:P=8,g|=24;break;case k:return i=ui(12,l,a,g|2),i.elementType=k,i.lanes=E,i;case q:return i=ui(13,l,a,g),i.elementType=q,i.lanes=E,i;case B:return i=ui(19,l,a,g),i.elementType=B,i.lanes=E,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case x:case L:P=10;break e;case C:P=9;break e;case M:P=11;break e;case S:P=14;break e;case A:P=16,h=null;break e}P=29,l=Error(r(130,i===null?"null":typeof i,"")),h=null}return a=ui(P,l,a,g),a.elementType=i,a.type=h,a.lanes=E,a}function Ho(i,a,l,h){return i=ui(7,i,h,a),i.lanes=l,i}function bp(i,a,l){return i=ui(6,i,null,a),i.lanes=l,i}function Tp(i,a,l){return a=ui(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var Lu=[],Bu=0,Jd=null,ef=0,ki=[],Pi=0,zo=null,Qs=1,Ws="";function Fo(i,a){Lu[Bu++]=ef,Lu[Bu++]=Jd,Jd=i,ef=a}function Eb(i,a,l){ki[Pi++]=Qs,ki[Pi++]=Ws,ki[Pi++]=zo,zo=i;var h=Qs;i=Ws;var g=32-Ye(h)-1;h&=~(1<<g),l+=1;var E=32-Ye(a)+g;if(30<E){var P=g-g%5;E=(h&(1<<P)-1).toString(32),h>>=P,g-=P,Qs=1<<32-Ye(a)+g|l<<g|h,Ws=E+i}else Qs=1<<E|l<<g|h,Ws=i}function vp(i){i.return!==null&&(Fo(i,1),Eb(i,1,0))}function Sp(i){for(;i===Jd;)Jd=Lu[--Bu],Lu[Bu]=null,ef=Lu[--Bu],Lu[Bu]=null;for(;i===zo;)zo=ki[--Pi],ki[Pi]=null,Ws=ki[--Pi],ki[Pi]=null,Qs=ki[--Pi],ki[Pi]=null}var zr=null,bn=null,Ot=!1,jo=null,Es=!1,Ap=Error(r(519));function qo(i){var a=Error(r(418,""));throw _c(Di(a,i)),Ap}function _b(i){var a=i.stateNode,l=i.type,h=i.memoizedProps;switch(a[Pt]=i,a[hn]=h,l){case"dialog":yt("cancel",a),yt("close",a);break;case"iframe":case"object":case"embed":yt("load",a);break;case"video":case"audio":for(l=0;l<jc.length;l++)yt(jc[l],a);break;case"source":yt("error",a);break;case"img":case"image":case"link":yt("error",a),yt("load",a);break;case"details":yt("toggle",a);break;case"input":yt("invalid",a),lr(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),St(a);break;case"select":yt("invalid",a);break;case"textarea":yt("invalid",a),Xi(a,h.value,h.defaultValue,h.children),St(a)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||h.suppressHydrationWarning===!0||Lv(a.textContent,l)?(h.popover!=null&&(yt("beforetoggle",a),yt("toggle",a)),h.onScroll!=null&&yt("scroll",a),h.onScrollEnd!=null&&yt("scrollend",a),h.onClick!=null&&(a.onclick=Mf),a=!0):a=!1,a||qo(i)}function bb(i){for(zr=i.return;zr;)switch(zr.tag){case 5:case 13:Es=!1;return;case 27:case 3:Es=!0;return;default:zr=zr.return}}function yc(i){if(i!==zr)return!1;if(!Ot)return bb(i),Ot=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Hg(i.type,i.memoizedProps)),l=!l),l&&bn&&qo(i),bb(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(l=i.data,l==="/$"){if(a===0){bn=Zi(i.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;i=i.nextSibling}bn=null}}else a===27?(a=bn,Ua(i.type)?(i=qg,qg=null,bn=i):bn=a):bn=zr?Zi(i.stateNode.nextSibling):null;return!0}function Ec(){bn=zr=null,Ot=!1}function Tb(){var i=jo;return i!==null&&(Xr===null?Xr=i:Xr.push.apply(Xr,i),jo=null),i}function _c(i){jo===null?jo=[i]:jo.push(i)}var xp=ee(null),Yo=null,Zs=null;function Sa(i,a,l){j(xp,a._currentValue),a._currentValue=l}function Js(i){i._currentValue=xp.current,ae(xp)}function wp(i,a,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),i===l)break;i=i.return}}function Ip(i,a,l,h){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var E=g.dependencies;if(E!==null){var P=g.child;E=E.firstContext;e:for(;E!==null;){var G=E;E=g;for(var J=0;J<a.length;J++)if(G.context===a[J]){E.lanes|=l,G=E.alternate,G!==null&&(G.lanes|=l),wp(E.return,l,i),h||(P=null);break e}E=G.next}}else if(g.tag===18){if(P=g.return,P===null)throw Error(r(341));P.lanes|=l,E=P.alternate,E!==null&&(E.lanes|=l),wp(P,l,i),P=null}else P=g.child;if(P!==null)P.return=g;else for(P=g;P!==null;){if(P===i){P=null;break}if(g=P.sibling,g!==null){g.return=P.return,P=g;break}P=P.return}g=P}}function bc(i,a,l,h){i=null;for(var g=a,E=!1;g!==null;){if(!E){if((g.flags&524288)!==0)E=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var P=g.alternate;if(P===null)throw Error(r(387));if(P=P.memoizedProps,P!==null){var G=g.type;oi(g.pendingProps.value,P.value)||(i!==null?i.push(G):i=[G])}}else if(g===Ve.current){if(P=g.alternate,P===null)throw Error(r(387));P.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(Kc):i=[Kc])}g=g.return}i!==null&&Ip(a,i,l,h),a.flags|=262144}function tf(i){for(i=i.firstContext;i!==null;){if(!oi(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Go(i){Yo=i,Zs=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function vr(i){return vb(Yo,i)}function nf(i,a){return Yo===null&&Go(i),vb(i,a)}function vb(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Zs===null){if(i===null)throw Error(r(308));Zs=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Zs=Zs.next=a;return l}var PD=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,h){i.push(h)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},MD=t.unstable_scheduleCallback,LD=t.unstable_NormalPriority,Gn={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Cp(){return{controller:new PD,data:new Map,refCount:0}}function Tc(i){i.refCount--,i.refCount===0&&MD(LD,function(){i.controller.abort()})}var vc=null,Np=0,Uu=0,Vu=null;function BD(i,a){if(vc===null){var l=vc=[];Np=0,Uu=Dg(),Vu={status:"pending",value:void 0,then:function(h){l.push(h)}}}return Np++,a.then(Sb,Sb),a}function Sb(){if(--Np===0&&vc!==null){Vu!==null&&(Vu.status="fulfilled");var i=vc;vc=null,Uu=0,Vu=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function UD(i,a){var l=[],h={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return i.then(function(){h.status="fulfilled",h.value=a;for(var g=0;g<l.length;g++)(0,l[g])(a)},function(g){for(h.status="rejected",h.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),h}var Ab=Y.S;Y.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&BD(i,a),Ab!==null&&Ab(i,a)};var $o=ee(null);function Rp(){var i=$o.current;return i!==null?i:tn.pooledCache}function rf(i,a){a===null?j($o,$o.current):j($o,a.pool)}function xb(){var i=Rp();return i===null?null:{parent:Gn._currentValue,pool:i}}var Sc=Error(r(460)),wb=Error(r(474)),sf=Error(r(542)),Dp={then:function(){}};function Ib(i){return i=i.status,i==="fulfilled"||i==="rejected"}function af(){}function Cb(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(af,af),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Rb(i),i;default:if(typeof a.status=="string")a.then(af,af);else{if(i=tn,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(h){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=h}},function(h){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Rb(i),i}throw Ac=a,Sc}}var Ac=null;function Nb(){if(Ac===null)throw Error(r(459));var i=Ac;return Ac=null,i}function Rb(i){if(i===Sc||i===sf)throw Error(r(483))}var Aa=!1;function Op(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function kp(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function xa(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function wa(i,a,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(qt&2)!==0){var g=h.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),h.pending=a,a=Wd(i),gb(i,null,l),a}return Qd(i,h,a,l),Wd(i)}function xc(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,zs(i,l)}}function Pp(i,a){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var g=null,E=null;if(l=l.firstBaseUpdate,l!==null){do{var P={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};E===null?g=E=P:E=E.next=P,l=l.next}while(l!==null);E===null?g=E=a:E=E.next=a}else g=E=a;l={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:E,shared:h.shared,callbacks:h.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var Mp=!1;function wc(){if(Mp){var i=Vu;if(i!==null)throw i}}function Ic(i,a,l,h){Mp=!1;var g=i.updateQueue;Aa=!1;var E=g.firstBaseUpdate,P=g.lastBaseUpdate,G=g.shared.pending;if(G!==null){g.shared.pending=null;var J=G,he=J.next;J.next=null,P===null?E=he:P.next=he,P=J;var be=i.alternate;be!==null&&(be=be.updateQueue,G=be.lastBaseUpdate,G!==P&&(G===null?be.firstBaseUpdate=he:G.next=he,be.lastBaseUpdate=J))}if(E!==null){var Ae=g.baseState;P=0,be=he=J=null,G=E;do{var fe=G.lane&-536870913,me=fe!==G.lane;if(me?(wt&fe)===fe:(h&fe)===fe){fe!==0&&fe===Uu&&(Mp=!0),be!==null&&(be=be.next={lane:0,tag:G.tag,payload:G.payload,callback:null,next:null});e:{var et=i,Xe=G;fe=a;var Qt=l;switch(Xe.tag){case 1:if(et=Xe.payload,typeof et=="function"){Ae=et.call(Qt,Ae,fe);break e}Ae=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=Xe.payload,fe=typeof et=="function"?et.call(Qt,Ae,fe):et,fe==null)break e;Ae=m({},Ae,fe);break e;case 2:Aa=!0}}fe=G.callback,fe!==null&&(i.flags|=64,me&&(i.flags|=8192),me=g.callbacks,me===null?g.callbacks=[fe]:me.push(fe))}else me={lane:fe,tag:G.tag,payload:G.payload,callback:G.callback,next:null},be===null?(he=be=me,J=Ae):be=be.next=me,P|=fe;if(G=G.next,G===null){if(G=g.shared.pending,G===null)break;me=G,G=me.next,me.next=null,g.lastBaseUpdate=me,g.shared.pending=null}}while(!0);be===null&&(J=Ae),g.baseState=J,g.firstBaseUpdate=he,g.lastBaseUpdate=be,E===null&&(g.shared.lanes=0),Pa|=P,i.lanes=P,i.memoizedState=Ae}}function Db(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function Ob(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)Db(l[i],a)}var Hu=ee(null),of=ee(0);function kb(i,a){i=aa,j(of,i),j(Hu,a),aa=i|a.baseLanes}function Lp(){j(of,aa),j(Hu,Hu.current)}function Bp(){aa=of.current,ae(Hu),ae(of)}var Ia=0,ct=null,Xt=null,kn=null,uf=!1,zu=!1,Xo=!1,lf=0,Cc=0,Fu=null,VD=0;function wn(){throw Error(r(321))}function Up(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!oi(i[l],a[l]))return!1;return!0}function Vp(i,a,l,h,g,E){return Ia=E,ct=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Y.H=i===null||i.memoizedState===null?gT:yT,Xo=!1,E=l(h,g),Xo=!1,zu&&(E=Mb(a,l,h,g)),Pb(i),E}function Pb(i){Y.H=pf;var a=Xt!==null&&Xt.next!==null;if(Ia=0,kn=Xt=ct=null,uf=!1,Cc=0,Fu=null,a)throw Error(r(300));i===null||tr||(i=i.dependencies,i!==null&&tf(i)&&(tr=!0))}function Mb(i,a,l,h){ct=i;var g=0;do{if(zu&&(Fu=null),Cc=0,zu=!1,25<=g)throw Error(r(301));if(g+=1,kn=Xt=null,i.updateQueue!=null){var E=i.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}Y.H=GD,E=a(l,h)}while(zu);return E}function HD(){var i=Y.H,a=i.useState()[0];return a=typeof a.then=="function"?Nc(a):a,i=i.useState()[0],(Xt!==null?Xt.memoizedState:null)!==i&&(ct.flags|=1024),a}function Hp(){var i=lf!==0;return lf=0,i}function zp(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function Fp(i){if(uf){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}uf=!1}Ia=0,kn=Xt=ct=null,zu=!1,Cc=lf=0,Fu=null}function Gr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kn===null?ct.memoizedState=kn=i:kn=kn.next=i,kn}function Pn(){if(Xt===null){var i=ct.alternate;i=i!==null?i.memoizedState:null}else i=Xt.next;var a=kn===null?ct.memoizedState:kn.next;if(a!==null)kn=a,Xt=i;else{if(i===null)throw ct.alternate===null?Error(r(467)):Error(r(310));Xt=i,i={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},kn===null?ct.memoizedState=kn=i:kn=kn.next=i}return kn}function jp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nc(i){var a=Cc;return Cc+=1,Fu===null&&(Fu=[]),i=Cb(Fu,i,a),a=ct,(kn===null?a.memoizedState:kn.next)===null&&(a=a.alternate,Y.H=a===null||a.memoizedState===null?gT:yT),i}function cf(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Nc(i);if(i.$$typeof===L)return vr(i)}throw Error(r(438,String(i)))}function qp(i){var a=null,l=ct.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var h=ct.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=jp(),ct.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),h=0;h<i;h++)l[h]=V;return a.index++,l}function ea(i,a){return typeof a=="function"?a(i):a}function hf(i){var a=Pn();return Yp(a,Xt,i)}function Yp(i,a,l){var h=i.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=l;var g=i.baseQueue,E=h.pending;if(E!==null){if(g!==null){var P=g.next;g.next=E.next,E.next=P}a.baseQueue=g=E,h.pending=null}if(E=i.baseState,g===null)i.memoizedState=E;else{a=g.next;var G=P=null,J=null,he=a,be=!1;do{var Ae=he.lane&-536870913;if(Ae!==he.lane?(wt&Ae)===Ae:(Ia&Ae)===Ae){var fe=he.revertLane;if(fe===0)J!==null&&(J=J.next={lane:0,revertLane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),Ae===Uu&&(be=!0);else if((Ia&fe)===fe){he=he.next,fe===Uu&&(be=!0);continue}else Ae={lane:0,revertLane:he.revertLane,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},J===null?(G=J=Ae,P=E):J=J.next=Ae,ct.lanes|=fe,Pa|=fe;Ae=he.action,Xo&&l(E,Ae),E=he.hasEagerState?he.eagerState:l(E,Ae)}else fe={lane:Ae,revertLane:he.revertLane,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},J===null?(G=J=fe,P=E):J=J.next=fe,ct.lanes|=Ae,Pa|=Ae;he=he.next}while(he!==null&&he!==a);if(J===null?P=E:J.next=G,!oi(E,i.memoizedState)&&(tr=!0,be&&(l=Vu,l!==null)))throw l;i.memoizedState=E,i.baseState=P,i.baseQueue=J,h.lastRenderedState=E}return g===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function Gp(i){var a=Pn(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var h=l.dispatch,g=l.pending,E=a.memoizedState;if(g!==null){l.pending=null;var P=g=g.next;do E=i(E,P.action),P=P.next;while(P!==g);oi(E,a.memoizedState)||(tr=!0),a.memoizedState=E,a.baseQueue===null&&(a.baseState=E),l.lastRenderedState=E}return[E,h]}function Lb(i,a,l){var h=ct,g=Pn(),E=Ot;if(E){if(l===void 0)throw Error(r(407));l=l()}else l=a();var P=!oi((Xt||g).memoizedState,l);P&&(g.memoizedState=l,tr=!0),g=g.queue;var G=Vb.bind(null,h,g,i);if(Rc(2048,8,G,[i]),g.getSnapshot!==a||P||kn!==null&&kn.memoizedState.tag&1){if(h.flags|=2048,ju(9,df(),Ub.bind(null,h,g,l,a),null),tn===null)throw Error(r(349));E||(Ia&124)!==0||Bb(h,a,l)}return l}function Bb(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=ct.updateQueue,a===null?(a=jp(),ct.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function Ub(i,a,l,h){a.value=l,a.getSnapshot=h,Hb(a)&&zb(i)}function Vb(i,a,l){return l(function(){Hb(a)&&zb(i)})}function Hb(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!oi(i,l)}catch{return!0}}function zb(i){var a=Pu(i,2);a!==null&&fi(a,i,2)}function $p(i){var a=Gr();if(typeof i=="function"){var l=i;if(i=l(),Xo){He(!0);try{l()}finally{He(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:i},a}function Fb(i,a,l,h){return i.baseState=l,Yp(i,Xt,typeof h=="function"?h:ea)}function zD(i,a,l,h,g){if(mf(i))throw Error(r(485));if(i=a.action,i!==null){var E={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){E.listeners.push(P)}};Y.T!==null?l(!0):E.isTransition=!1,h(E),l=a.pending,l===null?(E.next=a.pending=E,jb(a,E)):(E.next=l.next,a.pending=l.next=E)}}function jb(i,a){var l=a.action,h=a.payload,g=i.state;if(a.isTransition){var E=Y.T,P={};Y.T=P;try{var G=l(g,h),J=Y.S;J!==null&&J(P,G),qb(i,a,G)}catch(he){Xp(i,a,he)}finally{Y.T=E}}else try{E=l(g,h),qb(i,a,E)}catch(he){Xp(i,a,he)}}function qb(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){Yb(i,a,h)},function(h){return Xp(i,a,h)}):Yb(i,a,l)}function Yb(i,a,l){a.status="fulfilled",a.value=l,Gb(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,jb(i,l)))}function Xp(i,a,l){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=l,Gb(a),a=a.next;while(a!==h)}i.action=null}function Gb(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function $b(i,a){return a}function Xb(i,a){if(Ot){var l=tn.formState;if(l!==null){e:{var h=ct;if(Ot){if(bn){t:{for(var g=bn,E=Es;g.nodeType!==8;){if(!E){g=null;break t}if(g=Zi(g.nextSibling),g===null){g=null;break t}}E=g.data,g=E==="F!"||E==="F"?g:null}if(g){bn=Zi(g.nextSibling),h=g.data==="F!";break e}}qo(h)}h=!1}h&&(a=l[0])}}return l=Gr(),l.memoizedState=l.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$b,lastRenderedState:a},l.queue=h,l=fT.bind(null,ct,h),h.dispatch=l,h=$p(!1),E=Jp.bind(null,ct,!1,h.queue),h=Gr(),g={state:a,dispatch:null,action:i,pending:null},h.queue=g,l=zD.bind(null,ct,g,E,l),g.dispatch=l,h.memoizedState=i,[a,l,!1]}function Kb(i){var a=Pn();return Qb(a,Xt,i)}function Qb(i,a,l){if(a=Yp(i,a,$b)[0],i=hf(ea)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=Nc(a)}catch(P){throw P===Sc?sf:P}else h=a;a=Pn();var g=a.queue,E=g.dispatch;return l!==a.memoizedState&&(ct.flags|=2048,ju(9,df(),FD.bind(null,g,l),null)),[h,E,i]}function FD(i,a){i.action=a}function Wb(i){var a=Pn(),l=Xt;if(l!==null)return Qb(a,l,i);Pn(),a=a.memoizedState,l=Pn();var h=l.queue.dispatch;return l.memoizedState=i,[a,h,!1]}function ju(i,a,l,h){return i={tag:i,create:l,deps:h,inst:a,next:null},a=ct.updateQueue,a===null&&(a=jp(),ct.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,a.lastEffect=i),i}function df(){return{destroy:void 0,resource:void 0}}function Zb(){return Pn().memoizedState}function ff(i,a,l,h){var g=Gr();h=h===void 0?null:h,ct.flags|=i,g.memoizedState=ju(1|a,df(),l,h)}function Rc(i,a,l,h){var g=Pn();h=h===void 0?null:h;var E=g.memoizedState.inst;Xt!==null&&h!==null&&Up(h,Xt.memoizedState.deps)?g.memoizedState=ju(a,E,l,h):(ct.flags|=i,g.memoizedState=ju(1|a,E,l,h))}function Jb(i,a){ff(8390656,8,i,a)}function eT(i,a){Rc(2048,8,i,a)}function tT(i,a){return Rc(4,2,i,a)}function nT(i,a){return Rc(4,4,i,a)}function rT(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function iT(i,a,l){l=l!=null?l.concat([i]):null,Rc(4,4,rT.bind(null,a,i),l)}function Kp(){}function sT(i,a){var l=Pn();a=a===void 0?null:a;var h=l.memoizedState;return a!==null&&Up(a,h[1])?h[0]:(l.memoizedState=[i,a],i)}function aT(i,a){var l=Pn();a=a===void 0?null:a;var h=l.memoizedState;if(a!==null&&Up(a,h[1]))return h[0];if(h=i(),Xo){He(!0);try{i()}finally{He(!1)}}return l.memoizedState=[h,a],h}function Qp(i,a,l){return l===void 0||(Ia&1073741824)!==0?i.memoizedState=a:(i.memoizedState=l,i=lv(),ct.lanes|=i,Pa|=i,l)}function oT(i,a,l,h){return oi(l,a)?l:Hu.current!==null?(i=Qp(i,l,h),oi(i,a)||(tr=!0),i):(Ia&42)===0?(tr=!0,i.memoizedState=l):(i=lv(),ct.lanes|=i,Pa|=i,a)}function uT(i,a,l,h,g){var E=W.p;W.p=E!==0&&8>E?E:8;var P=Y.T,G={};Y.T=G,Jp(i,!1,a,l);try{var J=g(),he=Y.S;if(he!==null&&he(G,J),J!==null&&typeof J=="object"&&typeof J.then=="function"){var be=UD(J,h);Dc(i,a,be,di(i))}else Dc(i,a,h,di(i))}catch(Ae){Dc(i,a,{then:function(){},status:"rejected",reason:Ae},di())}finally{W.p=E,Y.T=P}}function jD(){}function Wp(i,a,l,h){if(i.tag!==5)throw Error(r(476));var g=lT(i).queue;uT(i,g,a,se,l===null?jD:function(){return cT(i),l(h)})}function lT(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:se},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function cT(i){var a=lT(i).next.queue;Dc(i,a,{},di())}function Zp(){return vr(Kc)}function hT(){return Pn().memoizedState}function dT(){return Pn().memoizedState}function qD(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=di();i=xa(l);var h=wa(a,i,l);h!==null&&(fi(h,a,l),xc(h,a,l)),a={cache:Cp()},i.payload=a;return}a=a.return}}function YD(i,a,l){var h=di();l={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},mf(i)?mT(a,l):(l=Ep(i,a,l,h),l!==null&&(fi(l,i,h),pT(l,a,h)))}function fT(i,a,l){var h=di();Dc(i,a,l,h)}function Dc(i,a,l,h){var g={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(mf(i))mT(a,g);else{var E=i.alternate;if(i.lanes===0&&(E===null||E.lanes===0)&&(E=a.lastRenderedReducer,E!==null))try{var P=a.lastRenderedState,G=E(P,l);if(g.hasEagerState=!0,g.eagerState=G,oi(G,P))return Qd(i,a,g,0),tn===null&&Kd(),!1}catch{}finally{}if(l=Ep(i,a,g,h),l!==null)return fi(l,i,h),pT(l,a,h),!0}return!1}function Jp(i,a,l,h){if(h={lane:2,revertLane:Dg(),action:h,hasEagerState:!1,eagerState:null,next:null},mf(i)){if(a)throw Error(r(479))}else a=Ep(i,l,h,2),a!==null&&fi(a,i,2)}function mf(i){var a=i.alternate;return i===ct||a!==null&&a===ct}function mT(i,a){zu=uf=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function pT(i,a,l){if((l&4194048)!==0){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,zs(i,l)}}var pf={readContext:vr,use:cf,useCallback:wn,useContext:wn,useEffect:wn,useImperativeHandle:wn,useLayoutEffect:wn,useInsertionEffect:wn,useMemo:wn,useReducer:wn,useRef:wn,useState:wn,useDebugValue:wn,useDeferredValue:wn,useTransition:wn,useSyncExternalStore:wn,useId:wn,useHostTransitionStatus:wn,useFormState:wn,useActionState:wn,useOptimistic:wn,useMemoCache:wn,useCacheRefresh:wn},gT={readContext:vr,use:cf,useCallback:function(i,a){return Gr().memoizedState=[i,a===void 0?null:a],i},useContext:vr,useEffect:Jb,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,ff(4194308,4,rT.bind(null,a,i),l)},useLayoutEffect:function(i,a){return ff(4194308,4,i,a)},useInsertionEffect:function(i,a){ff(4,2,i,a)},useMemo:function(i,a){var l=Gr();a=a===void 0?null:a;var h=i();if(Xo){He(!0);try{i()}finally{He(!1)}}return l.memoizedState=[h,a],h},useReducer:function(i,a,l){var h=Gr();if(l!==void 0){var g=l(a);if(Xo){He(!0);try{l(a)}finally{He(!1)}}}else g=a;return h.memoizedState=h.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},h.queue=i,i=i.dispatch=YD.bind(null,ct,i),[h.memoizedState,i]},useRef:function(i){var a=Gr();return i={current:i},a.memoizedState=i},useState:function(i){i=$p(i);var a=i.queue,l=fT.bind(null,ct,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:Kp,useDeferredValue:function(i,a){var l=Gr();return Qp(l,i,a)},useTransition:function(){var i=$p(!1);return i=uT.bind(null,ct,i.queue,!0,!1),Gr().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var h=ct,g=Gr();if(Ot){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),tn===null)throw Error(r(349));(wt&124)!==0||Bb(h,a,l)}g.memoizedState=l;var E={value:l,getSnapshot:a};return g.queue=E,Jb(Vb.bind(null,h,E,i),[i]),h.flags|=2048,ju(9,df(),Ub.bind(null,h,E,l,a),null),l},useId:function(){var i=Gr(),a=tn.identifierPrefix;if(Ot){var l=Ws,h=Qs;l=(h&~(1<<32-Ye(h)-1)).toString(32)+l,a=""+a+"R"+l,l=lf++,0<l&&(a+="H"+l.toString(32)),a+=""}else l=VD++,a=""+a+"r"+l.toString(32)+"";return i.memoizedState=a},useHostTransitionStatus:Zp,useFormState:Xb,useActionState:Xb,useOptimistic:function(i){var a=Gr();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Jp.bind(null,ct,!0,l),l.dispatch=a,[i,a]},useMemoCache:qp,useCacheRefresh:function(){return Gr().memoizedState=qD.bind(null,ct)}},yT={readContext:vr,use:cf,useCallback:sT,useContext:vr,useEffect:eT,useImperativeHandle:iT,useInsertionEffect:tT,useLayoutEffect:nT,useMemo:aT,useReducer:hf,useRef:Zb,useState:function(){return hf(ea)},useDebugValue:Kp,useDeferredValue:function(i,a){var l=Pn();return oT(l,Xt.memoizedState,i,a)},useTransition:function(){var i=hf(ea)[0],a=Pn().memoizedState;return[typeof i=="boolean"?i:Nc(i),a]},useSyncExternalStore:Lb,useId:hT,useHostTransitionStatus:Zp,useFormState:Kb,useActionState:Kb,useOptimistic:function(i,a){var l=Pn();return Fb(l,Xt,i,a)},useMemoCache:qp,useCacheRefresh:dT},GD={readContext:vr,use:cf,useCallback:sT,useContext:vr,useEffect:eT,useImperativeHandle:iT,useInsertionEffect:tT,useLayoutEffect:nT,useMemo:aT,useReducer:Gp,useRef:Zb,useState:function(){return Gp(ea)},useDebugValue:Kp,useDeferredValue:function(i,a){var l=Pn();return Xt===null?Qp(l,i,a):oT(l,Xt.memoizedState,i,a)},useTransition:function(){var i=Gp(ea)[0],a=Pn().memoizedState;return[typeof i=="boolean"?i:Nc(i),a]},useSyncExternalStore:Lb,useId:hT,useHostTransitionStatus:Zp,useFormState:Wb,useActionState:Wb,useOptimistic:function(i,a){var l=Pn();return Xt!==null?Fb(l,Xt,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:qp,useCacheRefresh:dT},qu=null,Oc=0;function gf(i){var a=Oc;return Oc+=1,qu===null&&(qu=[]),Cb(qu,i,a)}function kc(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function yf(i,a){throw a.$$typeof===y?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function ET(i){var a=i._init;return a(i._payload)}function _T(i){function a(oe,ie){if(i){var le=oe.deletions;le===null?(oe.deletions=[ie],oe.flags|=16):le.push(ie)}}function l(oe,ie){if(!i)return null;for(;ie!==null;)a(oe,ie),ie=ie.sibling;return null}function h(oe){for(var ie=new Map;oe!==null;)oe.key!==null?ie.set(oe.key,oe):ie.set(oe.index,oe),oe=oe.sibling;return ie}function g(oe,ie){return oe=Ks(oe,ie),oe.index=0,oe.sibling=null,oe}function E(oe,ie,le){return oe.index=le,i?(le=oe.alternate,le!==null?(le=le.index,le<ie?(oe.flags|=67108866,ie):le):(oe.flags|=67108866,ie)):(oe.flags|=1048576,ie)}function P(oe){return i&&oe.alternate===null&&(oe.flags|=67108866),oe}function G(oe,ie,le,Se){return ie===null||ie.tag!==6?(ie=bp(le,oe.mode,Se),ie.return=oe,ie):(ie=g(ie,le),ie.return=oe,ie)}function J(oe,ie,le,Se){var Fe=le.type;return Fe===I?be(oe,ie,le.props.children,Se,le.key):ie!==null&&(ie.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===A&&ET(Fe)===ie.type)?(ie=g(ie,le.props),kc(ie,le),ie.return=oe,ie):(ie=Zd(le.type,le.key,le.props,null,oe.mode,Se),kc(ie,le),ie.return=oe,ie)}function he(oe,ie,le,Se){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==le.containerInfo||ie.stateNode.implementation!==le.implementation?(ie=Tp(le,oe.mode,Se),ie.return=oe,ie):(ie=g(ie,le.children||[]),ie.return=oe,ie)}function be(oe,ie,le,Se,Fe){return ie===null||ie.tag!==7?(ie=Ho(le,oe.mode,Se,Fe),ie.return=oe,ie):(ie=g(ie,le),ie.return=oe,ie)}function Ae(oe,ie,le){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return ie=bp(""+ie,oe.mode,le),ie.return=oe,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case _:return le=Zd(ie.type,ie.key,ie.props,null,oe.mode,le),kc(le,ie),le.return=oe,le;case T:return ie=Tp(ie,oe.mode,le),ie.return=oe,ie;case A:var Se=ie._init;return ie=Se(ie._payload),Ae(oe,ie,le)}if(X(ie)||z(ie))return ie=Ho(ie,oe.mode,le,null),ie.return=oe,ie;if(typeof ie.then=="function")return Ae(oe,gf(ie),le);if(ie.$$typeof===L)return Ae(oe,nf(oe,ie),le);yf(oe,ie)}return null}function fe(oe,ie,le,Se){var Fe=ie!==null?ie.key:null;if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return Fe!==null?null:G(oe,ie,""+le,Se);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case _:return le.key===Fe?J(oe,ie,le,Se):null;case T:return le.key===Fe?he(oe,ie,le,Se):null;case A:return Fe=le._init,le=Fe(le._payload),fe(oe,ie,le,Se)}if(X(le)||z(le))return Fe!==null?null:be(oe,ie,le,Se,null);if(typeof le.then=="function")return fe(oe,ie,gf(le),Se);if(le.$$typeof===L)return fe(oe,ie,nf(oe,le),Se);yf(oe,le)}return null}function me(oe,ie,le,Se,Fe){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return oe=oe.get(le)||null,G(ie,oe,""+Se,Fe);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case _:return oe=oe.get(Se.key===null?le:Se.key)||null,J(ie,oe,Se,Fe);case T:return oe=oe.get(Se.key===null?le:Se.key)||null,he(ie,oe,Se,Fe);case A:var dt=Se._init;return Se=dt(Se._payload),me(oe,ie,le,Se,Fe)}if(X(Se)||z(Se))return oe=oe.get(le)||null,be(ie,oe,Se,Fe,null);if(typeof Se.then=="function")return me(oe,ie,le,gf(Se),Fe);if(Se.$$typeof===L)return me(oe,ie,le,nf(ie,Se),Fe);yf(ie,Se)}return null}function et(oe,ie,le,Se){for(var Fe=null,dt=null,Ge=ie,Ke=ie=0,rr=null;Ge!==null&&Ke<le.length;Ke++){Ge.index>Ke?(rr=Ge,Ge=null):rr=Ge.sibling;var Rt=fe(oe,Ge,le[Ke],Se);if(Rt===null){Ge===null&&(Ge=rr);break}i&&Ge&&Rt.alternate===null&&a(oe,Ge),ie=E(Rt,ie,Ke),dt===null?Fe=Rt:dt.sibling=Rt,dt=Rt,Ge=rr}if(Ke===le.length)return l(oe,Ge),Ot&&Fo(oe,Ke),Fe;if(Ge===null){for(;Ke<le.length;Ke++)Ge=Ae(oe,le[Ke],Se),Ge!==null&&(ie=E(Ge,ie,Ke),dt===null?Fe=Ge:dt.sibling=Ge,dt=Ge);return Ot&&Fo(oe,Ke),Fe}for(Ge=h(Ge);Ke<le.length;Ke++)rr=me(Ge,oe,Ke,le[Ke],Se),rr!==null&&(i&&rr.alternate!==null&&Ge.delete(rr.key===null?Ke:rr.key),ie=E(rr,ie,Ke),dt===null?Fe=rr:dt.sibling=rr,dt=rr);return i&&Ge.forEach(function(ja){return a(oe,ja)}),Ot&&Fo(oe,Ke),Fe}function Xe(oe,ie,le,Se){if(le==null)throw Error(r(151));for(var Fe=null,dt=null,Ge=ie,Ke=ie=0,rr=null,Rt=le.next();Ge!==null&&!Rt.done;Ke++,Rt=le.next()){Ge.index>Ke?(rr=Ge,Ge=null):rr=Ge.sibling;var ja=fe(oe,Ge,Rt.value,Se);if(ja===null){Ge===null&&(Ge=rr);break}i&&Ge&&ja.alternate===null&&a(oe,Ge),ie=E(ja,ie,Ke),dt===null?Fe=ja:dt.sibling=ja,dt=ja,Ge=rr}if(Rt.done)return l(oe,Ge),Ot&&Fo(oe,Ke),Fe;if(Ge===null){for(;!Rt.done;Ke++,Rt=le.next())Rt=Ae(oe,Rt.value,Se),Rt!==null&&(ie=E(Rt,ie,Ke),dt===null?Fe=Rt:dt.sibling=Rt,dt=Rt);return Ot&&Fo(oe,Ke),Fe}for(Ge=h(Ge);!Rt.done;Ke++,Rt=le.next())Rt=me(Ge,oe,Ke,Rt.value,Se),Rt!==null&&(i&&Rt.alternate!==null&&Ge.delete(Rt.key===null?Ke:Rt.key),ie=E(Rt,ie,Ke),dt===null?Fe=Rt:dt.sibling=Rt,dt=Rt);return i&&Ge.forEach(function($6){return a(oe,$6)}),Ot&&Fo(oe,Ke),Fe}function Qt(oe,ie,le,Se){if(typeof le=="object"&&le!==null&&le.type===I&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case _:e:{for(var Fe=le.key;ie!==null;){if(ie.key===Fe){if(Fe=le.type,Fe===I){if(ie.tag===7){l(oe,ie.sibling),Se=g(ie,le.props.children),Se.return=oe,oe=Se;break e}}else if(ie.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===A&&ET(Fe)===ie.type){l(oe,ie.sibling),Se=g(ie,le.props),kc(Se,le),Se.return=oe,oe=Se;break e}l(oe,ie);break}else a(oe,ie);ie=ie.sibling}le.type===I?(Se=Ho(le.props.children,oe.mode,Se,le.key),Se.return=oe,oe=Se):(Se=Zd(le.type,le.key,le.props,null,oe.mode,Se),kc(Se,le),Se.return=oe,oe=Se)}return P(oe);case T:e:{for(Fe=le.key;ie!==null;){if(ie.key===Fe)if(ie.tag===4&&ie.stateNode.containerInfo===le.containerInfo&&ie.stateNode.implementation===le.implementation){l(oe,ie.sibling),Se=g(ie,le.children||[]),Se.return=oe,oe=Se;break e}else{l(oe,ie);break}else a(oe,ie);ie=ie.sibling}Se=Tp(le,oe.mode,Se),Se.return=oe,oe=Se}return P(oe);case A:return Fe=le._init,le=Fe(le._payload),Qt(oe,ie,le,Se)}if(X(le))return et(oe,ie,le,Se);if(z(le)){if(Fe=z(le),typeof Fe!="function")throw Error(r(150));return le=Fe.call(le),Xe(oe,ie,le,Se)}if(typeof le.then=="function")return Qt(oe,ie,gf(le),Se);if(le.$$typeof===L)return Qt(oe,ie,nf(oe,le),Se);yf(oe,le)}return typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint"?(le=""+le,ie!==null&&ie.tag===6?(l(oe,ie.sibling),Se=g(ie,le),Se.return=oe,oe=Se):(l(oe,ie),Se=bp(le,oe.mode,Se),Se.return=oe,oe=Se),P(oe)):l(oe,ie)}return function(oe,ie,le,Se){try{Oc=0;var Fe=Qt(oe,ie,le,Se);return qu=null,Fe}catch(Ge){if(Ge===Sc||Ge===sf)throw Ge;var dt=ui(29,Ge,null,oe.mode);return dt.lanes=Se,dt.return=oe,dt}finally{}}}var Yu=_T(!0),bT=_T(!1),Mi=ee(null),_s=null;function Ca(i){var a=i.alternate;j($n,$n.current&1),j(Mi,i),_s===null&&(a===null||Hu.current!==null||a.memoizedState!==null)&&(_s=i)}function TT(i){if(i.tag===22){if(j($n,$n.current),j(Mi,i),_s===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(_s=i)}}else Na()}function Na(){j($n,$n.current),j(Mi,Mi.current)}function ta(i){ae(Mi),_s===i&&(_s=null),ae($n)}var $n=ee(0);function Ef(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||jg(l)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function eg(i,a,l,h){a=i.memoizedState,l=l(h,a),l=l==null?a:m({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var tg={enqueueSetState:function(i,a,l){i=i._reactInternals;var h=di(),g=xa(h);g.payload=a,l!=null&&(g.callback=l),a=wa(i,g,h),a!==null&&(fi(a,i,h),xc(a,i,h))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var h=di(),g=xa(h);g.tag=1,g.payload=a,l!=null&&(g.callback=l),a=wa(i,g,h),a!==null&&(fi(a,i,h),xc(a,i,h))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=di(),h=xa(l);h.tag=2,a!=null&&(h.callback=a),a=wa(i,h,l),a!==null&&(fi(a,i,l),xc(a,i,l))}};function vT(i,a,l,h,g,E,P){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,E,P):a.prototype&&a.prototype.isPureReactComponent?!pc(l,h)||!pc(g,E):!0}function ST(i,a,l,h){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,h),a.state!==i&&tg.enqueueReplaceState(a,a.state,null)}function Ko(i,a){var l=a;if("ref"in a){l={};for(var h in a)h!=="ref"&&(l[h]=a[h])}if(i=i.defaultProps){l===a&&(l=m({},l));for(var g in i)l[g]===void 0&&(l[g]=i[g])}return l}var _f=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function AT(i){_f(i)}function xT(i){console.error(i)}function wT(i){_f(i)}function bf(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function IT(i,a,l){try{var h=i.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function ng(i,a,l){return l=xa(l),l.tag=3,l.payload={element:null},l.callback=function(){bf(i,a)},l}function CT(i){return i=xa(i),i.tag=3,i}function NT(i,a,l,h){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var E=h.value;i.payload=function(){return g(E)},i.callback=function(){IT(a,l,h)}}var P=l.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(i.callback=function(){IT(a,l,h),typeof g!="function"&&(Ma===null?Ma=new Set([this]):Ma.add(this));var G=h.stack;this.componentDidCatch(h.value,{componentStack:G!==null?G:""})})}function $D(i,a,l,h,g){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=l.alternate,a!==null&&bc(a,l,g,!0),l=Mi.current,l!==null){switch(l.tag){case 13:return _s===null?wg():l.alternate===null&&Tn===0&&(Tn=3),l.flags&=-257,l.flags|=65536,l.lanes=g,h===Dp?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([h]):a.add(h),Cg(i,h,g)),!1;case 22:return l.flags|=65536,h===Dp?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([h]):l.add(h)),Cg(i,h,g)),!1}throw Error(r(435,l.tag))}return Cg(i,h,g),wg(),!1}if(Ot)return a=Mi.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,h!==Ap&&(i=Error(r(422),{cause:h}),_c(Di(i,l)))):(h!==Ap&&(a=Error(r(423),{cause:h}),_c(Di(a,l))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,h=Di(h,l),g=ng(i.stateNode,h,g),Pp(i,g),Tn!==4&&(Tn=2)),!1;var E=Error(r(520),{cause:h});if(E=Di(E,l),Hc===null?Hc=[E]:Hc.push(E),Tn!==4&&(Tn=2),a===null)return!0;h=Di(h,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=g&-g,l.lanes|=i,i=ng(l.stateNode,h,i),Pp(l,i),!1;case 1:if(a=l.type,E=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Ma===null||!Ma.has(E))))return l.flags|=65536,g&=-g,l.lanes|=g,g=CT(g),NT(g,i,l,h),Pp(l,g),!1}l=l.return}while(l!==null);return!1}var RT=Error(r(461)),tr=!1;function mr(i,a,l,h){a.child=i===null?bT(a,null,l,h):Yu(a,i.child,l,h)}function DT(i,a,l,h,g){l=l.render;var E=a.ref;if("ref"in h){var P={};for(var G in h)G!=="ref"&&(P[G]=h[G])}else P=h;return Go(a),h=Vp(i,a,l,P,E,g),G=Hp(),i!==null&&!tr?(zp(i,a,g),na(i,a,g)):(Ot&&G&&vp(a),a.flags|=1,mr(i,a,h,g),a.child)}function OT(i,a,l,h,g){if(i===null){var E=l.type;return typeof E=="function"&&!_p(E)&&E.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=E,kT(i,a,E,h,g)):(i=Zd(l.type,null,h,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(E=i.child,!cg(i,g)){var P=E.memoizedProps;if(l=l.compare,l=l!==null?l:pc,l(P,h)&&i.ref===a.ref)return na(i,a,g)}return a.flags|=1,i=Ks(E,h),i.ref=a.ref,i.return=a,a.child=i}function kT(i,a,l,h,g){if(i!==null){var E=i.memoizedProps;if(pc(E,h)&&i.ref===a.ref)if(tr=!1,a.pendingProps=h=E,cg(i,g))(i.flags&131072)!==0&&(tr=!0);else return a.lanes=i.lanes,na(i,a,g)}return rg(i,a,l,h,g)}function PT(i,a,l){var h=a.pendingProps,g=h.children,E=i!==null?i.memoizedState:null;if(h.mode==="hidden"){if((a.flags&128)!==0){if(h=E!==null?E.baseLanes|l:l,i!==null){for(g=a.child=i.child,E=0;g!==null;)E=E|g.lanes|g.childLanes,g=g.sibling;a.childLanes=E&~h}else a.childLanes=0,a.child=null;return MT(i,a,h,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&rf(a,E!==null?E.cachePool:null),E!==null?kb(a,E):Lp(),TT(a);else return a.lanes=a.childLanes=536870912,MT(i,a,E!==null?E.baseLanes|l:l,l)}else E!==null?(rf(a,E.cachePool),kb(a,E),Na(),a.memoizedState=null):(i!==null&&rf(a,null),Lp(),Na());return mr(i,a,g,l),a.child}function MT(i,a,l,h){var g=Rp();return g=g===null?null:{parent:Gn._currentValue,pool:g},a.memoizedState={baseLanes:l,cachePool:g},i!==null&&rf(a,null),Lp(),TT(a),i!==null&&bc(i,a,h,!0),null}function Tf(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function rg(i,a,l,h,g){return Go(a),l=Vp(i,a,l,h,void 0,g),h=Hp(),i!==null&&!tr?(zp(i,a,g),na(i,a,g)):(Ot&&h&&vp(a),a.flags|=1,mr(i,a,l,g),a.child)}function LT(i,a,l,h,g,E){return Go(a),a.updateQueue=null,l=Mb(a,h,l,g),Pb(i),h=Hp(),i!==null&&!tr?(zp(i,a,E),na(i,a,E)):(Ot&&h&&vp(a),a.flags|=1,mr(i,a,l,E),a.child)}function BT(i,a,l,h,g){if(Go(a),a.stateNode===null){var E=Mu,P=l.contextType;typeof P=="object"&&P!==null&&(E=vr(P)),E=new l(h,E),a.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=tg,a.stateNode=E,E._reactInternals=a,E=a.stateNode,E.props=h,E.state=a.memoizedState,E.refs={},Op(a),P=l.contextType,E.context=typeof P=="object"&&P!==null?vr(P):Mu,E.state=a.memoizedState,P=l.getDerivedStateFromProps,typeof P=="function"&&(eg(a,l,P,h),E.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(P=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),P!==E.state&&tg.enqueueReplaceState(E,E.state,null),Ic(a,h,E,g),wc(),E.state=a.memoizedState),typeof E.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(i===null){E=a.stateNode;var G=a.memoizedProps,J=Ko(l,G);E.props=J;var he=E.context,be=l.contextType;P=Mu,typeof be=="object"&&be!==null&&(P=vr(be));var Ae=l.getDerivedStateFromProps;be=typeof Ae=="function"||typeof E.getSnapshotBeforeUpdate=="function",G=a.pendingProps!==G,be||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(G||he!==P)&&ST(a,E,h,P),Aa=!1;var fe=a.memoizedState;E.state=fe,Ic(a,h,E,g),wc(),he=a.memoizedState,G||fe!==he||Aa?(typeof Ae=="function"&&(eg(a,l,Ae,h),he=a.memoizedState),(J=Aa||vT(a,l,J,h,fe,he,P))?(be||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(a.flags|=4194308)):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=he),E.props=h,E.state=he,E.context=P,h=J):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{E=a.stateNode,kp(i,a),P=a.memoizedProps,be=Ko(l,P),E.props=be,Ae=a.pendingProps,fe=E.context,he=l.contextType,J=Mu,typeof he=="object"&&he!==null&&(J=vr(he)),G=l.getDerivedStateFromProps,(he=typeof G=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(P!==Ae||fe!==J)&&ST(a,E,h,J),Aa=!1,fe=a.memoizedState,E.state=fe,Ic(a,h,E,g),wc();var me=a.memoizedState;P!==Ae||fe!==me||Aa||i!==null&&i.dependencies!==null&&tf(i.dependencies)?(typeof G=="function"&&(eg(a,l,G,h),me=a.memoizedState),(be=Aa||vT(a,l,be,h,fe,me,J)||i!==null&&i.dependencies!==null&&tf(i.dependencies))?(he||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,me,J),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,me,J)),typeof E.componentDidUpdate=="function"&&(a.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof E.componentDidUpdate!="function"||P===i.memoizedProps&&fe===i.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||P===i.memoizedProps&&fe===i.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=me),E.props=h,E.state=me,E.context=J,h=be):(typeof E.componentDidUpdate!="function"||P===i.memoizedProps&&fe===i.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||P===i.memoizedProps&&fe===i.memoizedState||(a.flags|=1024),h=!1)}return E=h,Tf(i,a),h=(a.flags&128)!==0,E||h?(E=a.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:E.render(),a.flags|=1,i!==null&&h?(a.child=Yu(a,i.child,null,g),a.child=Yu(a,null,l,g)):mr(i,a,l,g),a.memoizedState=E.state,i=a.child):i=na(i,a,g),i}function UT(i,a,l,h){return Ec(),a.flags|=256,mr(i,a,l,h),a.child}var ig={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sg(i){return{baseLanes:i,cachePool:xb()}}function ag(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=Li),i}function VT(i,a,l){var h=a.pendingProps,g=!1,E=(a.flags&128)!==0,P;if((P=E)||(P=i!==null&&i.memoizedState===null?!1:($n.current&2)!==0),P&&(g=!0,a.flags&=-129),P=(a.flags&32)!==0,a.flags&=-33,i===null){if(Ot){if(g?Ca(a):Na(),Ot){var G=bn,J;if(J=G){e:{for(J=G,G=Es;J.nodeType!==8;){if(!G){G=null;break e}if(J=Zi(J.nextSibling),J===null){G=null;break e}}G=J}G!==null?(a.memoizedState={dehydrated:G,treeContext:zo!==null?{id:Qs,overflow:Ws}:null,retryLane:536870912,hydrationErrors:null},J=ui(18,null,null,0),J.stateNode=G,J.return=a,a.child=J,zr=a,bn=null,J=!0):J=!1}J||qo(a)}if(G=a.memoizedState,G!==null&&(G=G.dehydrated,G!==null))return jg(G)?a.lanes=32:a.lanes=536870912,null;ta(a)}return G=h.children,h=h.fallback,g?(Na(),g=a.mode,G=vf({mode:"hidden",children:G},g),h=Ho(h,g,l,null),G.return=a,h.return=a,G.sibling=h,a.child=G,g=a.child,g.memoizedState=sg(l),g.childLanes=ag(i,P,l),a.memoizedState=ig,h):(Ca(a),og(a,G))}if(J=i.memoizedState,J!==null&&(G=J.dehydrated,G!==null)){if(E)a.flags&256?(Ca(a),a.flags&=-257,a=ug(i,a,l)):a.memoizedState!==null?(Na(),a.child=i.child,a.flags|=128,a=null):(Na(),g=h.fallback,G=a.mode,h=vf({mode:"visible",children:h.children},G),g=Ho(g,G,l,null),g.flags|=2,h.return=a,g.return=a,h.sibling=g,a.child=h,Yu(a,i.child,null,l),h=a.child,h.memoizedState=sg(l),h.childLanes=ag(i,P,l),a.memoizedState=ig,a=g);else if(Ca(a),jg(G)){if(P=G.nextSibling&&G.nextSibling.dataset,P)var he=P.dgst;P=he,h=Error(r(419)),h.stack="",h.digest=P,_c({value:h,source:null,stack:null}),a=ug(i,a,l)}else if(tr||bc(i,a,l,!1),P=(l&i.childLanes)!==0,tr||P){if(P=tn,P!==null&&(h=l&-l,h=(h&42)!==0?1:ii(h),h=(h&(P.suspendedLanes|l))!==0?0:h,h!==0&&h!==J.retryLane))throw J.retryLane=h,Pu(i,h),fi(P,i,h),RT;G.data==="$?"||wg(),a=ug(i,a,l)}else G.data==="$?"?(a.flags|=192,a.child=i.child,a=null):(i=J.treeContext,bn=Zi(G.nextSibling),zr=a,Ot=!0,jo=null,Es=!1,i!==null&&(ki[Pi++]=Qs,ki[Pi++]=Ws,ki[Pi++]=zo,Qs=i.id,Ws=i.overflow,zo=a),a=og(a,h.children),a.flags|=4096);return a}return g?(Na(),g=h.fallback,G=a.mode,J=i.child,he=J.sibling,h=Ks(J,{mode:"hidden",children:h.children}),h.subtreeFlags=J.subtreeFlags&65011712,he!==null?g=Ks(he,g):(g=Ho(g,G,l,null),g.flags|=2),g.return=a,h.return=a,h.sibling=g,a.child=h,h=g,g=a.child,G=i.child.memoizedState,G===null?G=sg(l):(J=G.cachePool,J!==null?(he=Gn._currentValue,J=J.parent!==he?{parent:he,pool:he}:J):J=xb(),G={baseLanes:G.baseLanes|l,cachePool:J}),g.memoizedState=G,g.childLanes=ag(i,P,l),a.memoizedState=ig,h):(Ca(a),l=i.child,i=l.sibling,l=Ks(l,{mode:"visible",children:h.children}),l.return=a,l.sibling=null,i!==null&&(P=a.deletions,P===null?(a.deletions=[i],a.flags|=16):P.push(i)),a.child=l,a.memoizedState=null,l)}function og(i,a){return a=vf({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function vf(i,a){return i=ui(22,i,null,a),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function ug(i,a,l){return Yu(a,i.child,null,l),i=og(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function HT(i,a,l){i.lanes|=a;var h=i.alternate;h!==null&&(h.lanes|=a),wp(i.return,a,l)}function lg(i,a,l,h,g){var E=i.memoizedState;E===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:g}:(E.isBackwards=a,E.rendering=null,E.renderingStartTime=0,E.last=h,E.tail=l,E.tailMode=g)}function zT(i,a,l){var h=a.pendingProps,g=h.revealOrder,E=h.tail;if(mr(i,a,h.children,l),h=$n.current,(h&2)!==0)h=h&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&HT(i,l,a);else if(i.tag===19)HT(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}switch(j($n,h),g){case"forwards":for(l=a.child,g=null;l!==null;)i=l.alternate,i!==null&&Ef(i)===null&&(g=l),l=l.sibling;l=g,l===null?(g=a.child,a.child=null):(g=l.sibling,l.sibling=null),lg(a,!1,g,l,E);break;case"backwards":for(l=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&Ef(i)===null){a.child=g;break}i=g.sibling,g.sibling=l,l=g,g=i}lg(a,!0,l,null,E);break;case"together":lg(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function na(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),Pa|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(bc(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,l=Ks(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=Ks(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function cg(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&tf(i)))}function XD(i,a,l){switch(a.tag){case 3:Ie(a,a.stateNode.containerInfo),Sa(a,Gn,i.memoizedState.cache),Ec();break;case 27:case 5:ze(a);break;case 4:Ie(a,a.stateNode.containerInfo);break;case 10:Sa(a,a.type,a.memoizedProps.value);break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(Ca(a),a.flags|=128,null):(l&a.child.childLanes)!==0?VT(i,a,l):(Ca(a),i=na(i,a,l),i!==null?i.sibling:null);Ca(a);break;case 19:var g=(i.flags&128)!==0;if(h=(l&a.childLanes)!==0,h||(bc(i,a,l,!1),h=(l&a.childLanes)!==0),g){if(h)return zT(i,a,l);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),j($n,$n.current),h)break;return null;case 22:case 23:return a.lanes=0,PT(i,a,l);case 24:Sa(a,Gn,i.memoizedState.cache)}return na(i,a,l)}function FT(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)tr=!0;else{if(!cg(i,l)&&(a.flags&128)===0)return tr=!1,XD(i,a,l);tr=(i.flags&131072)!==0}else tr=!1,Ot&&(a.flags&1048576)!==0&&Eb(a,ef,a.index);switch(a.lanes=0,a.tag){case 16:e:{i=a.pendingProps;var h=a.elementType,g=h._init;if(h=g(h._payload),a.type=h,typeof h=="function")_p(h)?(i=Ko(h,i),a.tag=1,a=BT(null,a,h,i,l)):(a.tag=0,a=rg(null,a,h,i,l));else{if(h!=null){if(g=h.$$typeof,g===M){a.tag=11,a=DT(null,a,h,i,l);break e}else if(g===S){a.tag=14,a=OT(null,a,h,i,l);break e}}throw a=U(h)||h,Error(r(306,a,""))}}return a;case 0:return rg(i,a,a.type,a.pendingProps,l);case 1:return h=a.type,g=Ko(h,a.pendingProps),BT(i,a,h,g,l);case 3:e:{if(Ie(a,a.stateNode.containerInfo),i===null)throw Error(r(387));h=a.pendingProps;var E=a.memoizedState;g=E.element,kp(i,a),Ic(a,h,null,l);var P=a.memoizedState;if(h=P.cache,Sa(a,Gn,h),h!==E.cache&&Ip(a,[Gn],l,!0),wc(),h=P.element,E.isDehydrated)if(E={element:h,isDehydrated:!1,cache:P.cache},a.updateQueue.baseState=E,a.memoizedState=E,a.flags&256){a=UT(i,a,h,l);break e}else if(h!==g){g=Di(Error(r(424)),a),_c(g),a=UT(i,a,h,l);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(bn=Zi(i.firstChild),zr=a,Ot=!0,jo=null,Es=!0,l=bT(a,null,h,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ec(),h===g){a=na(i,a,l);break e}mr(i,a,h,l)}a=a.child}return a;case 26:return Tf(i,a),i===null?(l=Gv(a.type,null,a.pendingProps,null))?a.memoizedState=l:Ot||(l=a.type,i=a.pendingProps,h=Lf(Te.current).createElement(l),h[Pt]=a,h[hn]=i,gr(h,l,i),ne(h),a.stateNode=h):a.memoizedState=Gv(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return ze(a),i===null&&Ot&&(h=a.stateNode=jv(a.type,a.pendingProps,Te.current),zr=a,Es=!0,g=bn,Ua(a.type)?(qg=g,bn=Zi(h.firstChild)):bn=g),mr(i,a,a.pendingProps.children,l),Tf(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&Ot&&((g=h=bn)&&(h=v6(h,a.type,a.pendingProps,Es),h!==null?(a.stateNode=h,zr=a,bn=Zi(h.firstChild),Es=!1,g=!0):g=!1),g||qo(a)),ze(a),g=a.type,E=a.pendingProps,P=i!==null?i.memoizedProps:null,h=E.children,Hg(g,E)?h=null:P!==null&&Hg(g,P)&&(a.flags|=32),a.memoizedState!==null&&(g=Vp(i,a,HD,null,null,l),Kc._currentValue=g),Tf(i,a),mr(i,a,h,l),a.child;case 6:return i===null&&Ot&&((i=l=bn)&&(l=S6(l,a.pendingProps,Es),l!==null?(a.stateNode=l,zr=a,bn=null,i=!0):i=!1),i||qo(a)),null;case 13:return VT(i,a,l);case 4:return Ie(a,a.stateNode.containerInfo),h=a.pendingProps,i===null?a.child=Yu(a,null,h,l):mr(i,a,h,l),a.child;case 11:return DT(i,a,a.type,a.pendingProps,l);case 7:return mr(i,a,a.pendingProps,l),a.child;case 8:return mr(i,a,a.pendingProps.children,l),a.child;case 12:return mr(i,a,a.pendingProps.children,l),a.child;case 10:return h=a.pendingProps,Sa(a,a.type,h.value),mr(i,a,h.children,l),a.child;case 9:return g=a.type._context,h=a.pendingProps.children,Go(a),g=vr(g),h=h(g),a.flags|=1,mr(i,a,h,l),a.child;case 14:return OT(i,a,a.type,a.pendingProps,l);case 15:return kT(i,a,a.type,a.pendingProps,l);case 19:return zT(i,a,l);case 31:return h=a.pendingProps,l=a.mode,h={mode:h.mode,children:h.children},i===null?(l=vf(h,l),l.ref=a.ref,a.child=l,l.return=a,a=l):(l=Ks(i.child,h),l.ref=a.ref,a.child=l,l.return=a,a=l),a;case 22:return PT(i,a,l);case 24:return Go(a),h=vr(Gn),i===null?(g=Rp(),g===null&&(g=tn,E=Cp(),g.pooledCache=E,E.refCount++,E!==null&&(g.pooledCacheLanes|=l),g=E),a.memoizedState={parent:h,cache:g},Op(a),Sa(a,Gn,g)):((i.lanes&l)!==0&&(kp(i,a),Ic(a,null,null,l),wc()),g=i.memoizedState,E=a.memoizedState,g.parent!==h?(g={parent:h,cache:h},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),Sa(a,Gn,h)):(h=E.cache,Sa(a,Gn,h),h!==g.cache&&Ip(a,[Gn],l,!0))),mr(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function ra(i){i.flags|=4}function jT(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Wv(a)){if(a=Mi.current,a!==null&&((wt&4194048)===wt?_s!==null:(wt&62914560)!==wt&&(wt&536870912)===0||a!==_s))throw Ac=Dp,wb;i.flags|=8192}}function Sf(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?br():536870912,i.lanes|=a,Ku|=a)}function Pc(i,a){if(!Ot)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function pn(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(a)for(var g=i.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=h,i.childLanes=l,a}function KD(i,a,l){var h=a.pendingProps;switch(Sp(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(a),null;case 1:return pn(a),null;case 3:return l=a.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),Js(Gn),Me(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(yc(a)?ra(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Tb())),pn(a),null;case 26:return l=a.memoizedState,i===null?(ra(a),l!==null?(pn(a),jT(a,l)):(pn(a),a.flags&=-16777217)):l?l!==i.memoizedState?(ra(a),pn(a),jT(a,l)):(pn(a),a.flags&=-16777217):(i.memoizedProps!==h&&ra(a),pn(a),a.flags&=-16777217),null;case 27:Je(a),l=Te.current;var g=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==h&&ra(a);else{if(!h){if(a.stateNode===null)throw Error(r(166));return pn(a),null}i=ge.current,yc(a)?_b(a):(i=jv(g,h,l),a.stateNode=i,ra(a))}return pn(a),null;case 5:if(Je(a),l=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&ra(a);else{if(!h){if(a.stateNode===null)throw Error(r(166));return pn(a),null}if(i=ge.current,yc(a))_b(a);else{switch(g=Lf(Te.current),i){case 1:i=g.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=g.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=g.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof h.is=="string"?g.createElement("select",{is:h.is}):g.createElement("select"),h.multiple?i.multiple=!0:h.size&&(i.size=h.size);break;default:i=typeof h.is=="string"?g.createElement(l,{is:h.is}):g.createElement(l)}}i[Pt]=a,i[hn]=h;e:for(g=a.child;g!==null;){if(g.tag===5||g.tag===6)i.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===a)break e;for(;g.sibling===null;){if(g.return===null||g.return===a)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}a.stateNode=i;e:switch(gr(i,l,h),l){case"button":case"input":case"select":case"textarea":i=!!h.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&ra(a)}}return pn(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==h&&ra(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(r(166));if(i=Te.current,yc(a)){if(i=a.stateNode,l=a.memoizedProps,h=null,g=zr,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}i[Pt]=a,i=!!(i.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||Lv(i.nodeValue,l)),i||qo(a)}else i=Lf(i).createTextNode(h),i[Pt]=a,a.stateNode=i}return pn(a),null;case 13:if(h=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=yc(a),h!==null&&h.dehydrated!==null){if(i===null){if(!g)throw Error(r(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Pt]=a}else Ec(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;pn(a),g=!1}else g=Tb(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(ta(a),a):(ta(a),null)}if(ta(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=h!==null,i=i!==null&&i.memoizedState!==null,l){h=a.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool);var E=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(E=h.memoizedState.cachePool.pool),E!==g&&(h.flags|=2048)}return l!==i&&l&&(a.child.flags|=8192),Sf(a,a.updateQueue),pn(a),null;case 4:return Me(),i===null&&Mg(a.stateNode.containerInfo),pn(a),null;case 10:return Js(a.type),pn(a),null;case 19:if(ae($n),g=a.memoizedState,g===null)return pn(a),null;if(h=(a.flags&128)!==0,E=g.rendering,E===null)if(h)Pc(g,!1);else{if(Tn!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(E=Ef(i),E!==null){for(a.flags|=128,Pc(g,!1),i=E.updateQueue,a.updateQueue=i,Sf(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)yb(l,i),l=l.sibling;return j($n,$n.current&1|2),a.child}i=i.sibling}g.tail!==null&&Qe()>wf&&(a.flags|=128,h=!0,Pc(g,!1),a.lanes=4194304)}else{if(!h)if(i=Ef(E),i!==null){if(a.flags|=128,h=!0,i=i.updateQueue,a.updateQueue=i,Sf(a,i),Pc(g,!0),g.tail===null&&g.tailMode==="hidden"&&!E.alternate&&!Ot)return pn(a),null}else 2*Qe()-g.renderingStartTime>wf&&l!==536870912&&(a.flags|=128,h=!0,Pc(g,!1),a.lanes=4194304);g.isBackwards?(E.sibling=a.child,a.child=E):(i=g.last,i!==null?i.sibling=E:a.child=E,g.last=E)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=Qe(),a.sibling=null,i=$n.current,j($n,h?i&1|2:i&1),a):(pn(a),null);case 22:case 23:return ta(a),Bp(),h=a.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(l&536870912)!==0&&(a.flags&128)===0&&(pn(a),a.subtreeFlags&6&&(a.flags|=8192)):pn(a),l=a.updateQueue,l!==null&&Sf(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==l&&(a.flags|=2048),i!==null&&ae($o),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Js(Gn),pn(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function QD(i,a){switch(Sp(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Js(Gn),Me(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return Je(a),null;case 13:if(ta(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Ec()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return ae($n),null;case 4:return Me(),null;case 10:return Js(a.type),null;case 22:case 23:return ta(a),Bp(),i!==null&&ae($o),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Js(Gn),null;case 25:return null;default:return null}}function qT(i,a){switch(Sp(a),a.tag){case 3:Js(Gn),Me();break;case 26:case 27:case 5:Je(a);break;case 4:Me();break;case 13:ta(a);break;case 19:ae($n);break;case 10:Js(a.type);break;case 22:case 23:ta(a),Bp(),i!==null&&ae($o);break;case 24:Js(Gn)}}function Mc(i,a){try{var l=a.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var g=h.next;l=g;do{if((l.tag&i)===i){h=void 0;var E=l.create,P=l.inst;h=E(),P.destroy=h}l=l.next}while(l!==g)}}catch(G){Zt(a,a.return,G)}}function Ra(i,a,l){try{var h=a.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var E=g.next;h=E;do{if((h.tag&i)===i){var P=h.inst,G=P.destroy;if(G!==void 0){P.destroy=void 0,g=a;var J=l,he=G;try{he()}catch(be){Zt(g,J,be)}}}h=h.next}while(h!==E)}}catch(be){Zt(a,a.return,be)}}function YT(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{Ob(a,l)}catch(h){Zt(i,i.return,h)}}}function GT(i,a,l){l.props=Ko(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(h){Zt(i,a,h)}}function Lc(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof l=="function"?i.refCleanup=l(h):l.current=h}}catch(g){Zt(i,a,g)}}function bs(i,a){var l=i.ref,h=i.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(g){Zt(i,a,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){Zt(i,a,g)}else l.current=null}function $T(i){var a=i.type,l=i.memoizedProps,h=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(g){Zt(i,i.return,g)}}function hg(i,a,l){try{var h=i.stateNode;y6(h,i.type,l,a),h[hn]=a}catch(g){Zt(i,i.return,g)}}function XT(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ua(i.type)||i.tag===4}function dg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||XT(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ua(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function fg(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Mf));else if(h!==4&&(h===27&&Ua(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(fg(i,a,l),i=i.sibling;i!==null;)fg(i,a,l),i=i.sibling}function Af(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(h!==4&&(h===27&&Ua(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(Af(i,a,l),i=i.sibling;i!==null;)Af(i,a,l),i=i.sibling}function KT(i){var a=i.stateNode,l=i.memoizedProps;try{for(var h=i.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);gr(a,h,l),a[Pt]=i,a[hn]=l}catch(E){Zt(i,i.return,E)}}var ia=!1,In=!1,mg=!1,QT=typeof WeakSet=="function"?WeakSet:Set,nr=null;function WD(i,a){if(i=i.containerInfo,Ug=Ff,i=ob(i),dp(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var g=h.anchorOffset,E=h.focusNode;h=h.focusOffset;try{l.nodeType,E.nodeType}catch{l=null;break e}var P=0,G=-1,J=-1,he=0,be=0,Ae=i,fe=null;t:for(;;){for(var me;Ae!==l||g!==0&&Ae.nodeType!==3||(G=P+g),Ae!==E||h!==0&&Ae.nodeType!==3||(J=P+h),Ae.nodeType===3&&(P+=Ae.nodeValue.length),(me=Ae.firstChild)!==null;)fe=Ae,Ae=me;for(;;){if(Ae===i)break t;if(fe===l&&++he===g&&(G=P),fe===E&&++be===h&&(J=P),(me=Ae.nextSibling)!==null)break;Ae=fe,fe=Ae.parentNode}Ae=me}l=G===-1||J===-1?null:{start:G,end:J}}else l=null}l=l||{start:0,end:0}}else l=null;for(Vg={focusedElem:i,selectionRange:l},Ff=!1,nr=a;nr!==null;)if(a=nr,i=a.child,(a.subtreeFlags&1024)!==0&&i!==null)i.return=a,nr=i;else for(;nr!==null;){switch(a=nr,E=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&E!==null){i=void 0,l=a,g=E.memoizedProps,E=E.memoizedState,h=l.stateNode;try{var et=Ko(l.type,g,l.elementType===l.type);i=h.getSnapshotBeforeUpdate(et,E),h.__reactInternalSnapshotBeforeUpdate=i}catch(Xe){Zt(l,l.return,Xe)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)Fg(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Fg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,nr=i;break}nr=a.return}}function WT(i,a,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:Da(i,l),h&4&&Mc(5,l);break;case 1:if(Da(i,l),h&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(P){Zt(l,l.return,P)}else{var g=Ko(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(g,a,i.__reactInternalSnapshotBeforeUpdate)}catch(P){Zt(l,l.return,P)}}h&64&&YT(l),h&512&&Lc(l,l.return);break;case 3:if(Da(i,l),h&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{Ob(i,a)}catch(P){Zt(l,l.return,P)}}break;case 27:a===null&&h&4&&KT(l);case 26:case 5:Da(i,l),a===null&&h&4&&$T(l),h&512&&Lc(l,l.return);break;case 12:Da(i,l);break;case 13:Da(i,l),h&4&&ev(i,l),h&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=a6.bind(null,l),A6(i,l))));break;case 22:if(h=l.memoizedState!==null||ia,!h){a=a!==null&&a.memoizedState!==null||In,g=ia;var E=In;ia=h,(In=a)&&!E?Oa(i,l,(l.subtreeFlags&8772)!==0):Da(i,l),ia=g,In=E}break;case 30:break;default:Da(i,l)}}function ZT(i){var a=i.alternate;a!==null&&(i.alternate=null,ZT(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&ai(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var fn=null,$r=!1;function sa(i,a,l){for(l=l.child;l!==null;)JT(i,a,l),l=l.sibling}function JT(i,a,l){if(ve&&typeof ve.onCommitFiberUnmount=="function")try{ve.onCommitFiberUnmount(de,l)}catch{}switch(l.tag){case 26:In||bs(l,a),sa(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:In||bs(l,a);var h=fn,g=$r;Ua(l.type)&&(fn=l.stateNode,$r=!1),sa(i,a,l),Yc(l.stateNode),fn=h,$r=g;break;case 5:In||bs(l,a);case 6:if(h=fn,g=$r,fn=null,sa(i,a,l),fn=h,$r=g,fn!==null)if($r)try{(fn.nodeType===9?fn.body:fn.nodeName==="HTML"?fn.ownerDocument.body:fn).removeChild(l.stateNode)}catch(E){Zt(l,a,E)}else try{fn.removeChild(l.stateNode)}catch(E){Zt(l,a,E)}break;case 18:fn!==null&&($r?(i=fn,zv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Jc(i)):zv(fn,l.stateNode));break;case 4:h=fn,g=$r,fn=l.stateNode.containerInfo,$r=!0,sa(i,a,l),fn=h,$r=g;break;case 0:case 11:case 14:case 15:In||Ra(2,l,a),In||Ra(4,l,a),sa(i,a,l);break;case 1:In||(bs(l,a),h=l.stateNode,typeof h.componentWillUnmount=="function"&&GT(l,a,h)),sa(i,a,l);break;case 21:sa(i,a,l);break;case 22:In=(h=In)||l.memoizedState!==null,sa(i,a,l),In=h;break;default:sa(i,a,l)}}function ev(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Jc(i)}catch(l){Zt(a,a.return,l)}}function ZD(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new QT),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new QT),a;default:throw Error(r(435,i.tag))}}function pg(i,a){var l=ZD(i);a.forEach(function(h){var g=o6.bind(null,i,h);l.has(h)||(l.add(h),h.then(g,g))})}function li(i,a){var l=a.deletions;if(l!==null)for(var h=0;h<l.length;h++){var g=l[h],E=i,P=a,G=P;e:for(;G!==null;){switch(G.tag){case 27:if(Ua(G.type)){fn=G.stateNode,$r=!1;break e}break;case 5:fn=G.stateNode,$r=!1;break e;case 3:case 4:fn=G.stateNode.containerInfo,$r=!0;break e}G=G.return}if(fn===null)throw Error(r(160));JT(E,P,g),fn=null,$r=!1,E=g.alternate,E!==null&&(E.return=null),g.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)tv(a,i),a=a.sibling}var Wi=null;function tv(i,a){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:li(a,i),ci(i),h&4&&(Ra(3,i,i.return),Mc(3,i),Ra(5,i,i.return));break;case 1:li(a,i),ci(i),h&512&&(In||l===null||bs(l,l.return)),h&64&&ia&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var g=Wi;if(li(a,i),ci(i),h&512&&(In||l===null||bs(l,l.return)),h&4){var E=l!==null?l.memoizedState:null;if(h=i.memoizedState,l===null)if(h===null)if(i.stateNode===null){e:{h=i.type,l=i.memoizedProps,g=g.ownerDocument||g;t:switch(h){case"title":E=g.getElementsByTagName("title")[0],(!E||E[Ai]||E[Pt]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=g.createElement(h),g.head.insertBefore(E,g.querySelector("head > title"))),gr(E,h,l),E[Pt]=i,ne(E),h=E;break e;case"link":var P=Kv("link","href",g).get(h+(l.href||""));if(P){for(var G=0;G<P.length;G++)if(E=P[G],E.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&E.getAttribute("rel")===(l.rel==null?null:l.rel)&&E.getAttribute("title")===(l.title==null?null:l.title)&&E.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){P.splice(G,1);break t}}E=g.createElement(h),gr(E,h,l),g.head.appendChild(E);break;case"meta":if(P=Kv("meta","content",g).get(h+(l.content||""))){for(G=0;G<P.length;G++)if(E=P[G],E.getAttribute("content")===(l.content==null?null:""+l.content)&&E.getAttribute("name")===(l.name==null?null:l.name)&&E.getAttribute("property")===(l.property==null?null:l.property)&&E.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&E.getAttribute("charset")===(l.charSet==null?null:l.charSet)){P.splice(G,1);break t}}E=g.createElement(h),gr(E,h,l),g.head.appendChild(E);break;default:throw Error(r(468,h))}E[Pt]=i,ne(E),h=E}i.stateNode=h}else Qv(g,i.type,i.stateNode);else i.stateNode=Xv(g,h,i.memoizedProps);else E!==h?(E===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):E.count--,h===null?Qv(g,i.type,i.stateNode):Xv(g,h,i.memoizedProps)):h===null&&i.stateNode!==null&&hg(i,i.memoizedProps,l.memoizedProps)}break;case 27:li(a,i),ci(i),h&512&&(In||l===null||bs(l,l.return)),l!==null&&h&4&&hg(i,i.memoizedProps,l.memoizedProps);break;case 5:if(li(a,i),ci(i),h&512&&(In||l===null||bs(l,l.return)),i.flags&32){g=i.stateNode;try{hr(g,"")}catch(me){Zt(i,i.return,me)}}h&4&&i.stateNode!=null&&(g=i.memoizedProps,hg(i,g,l!==null?l.memoizedProps:g)),h&1024&&(mg=!0);break;case 6:if(li(a,i),ci(i),h&4){if(i.stateNode===null)throw Error(r(162));h=i.memoizedProps,l=i.stateNode;try{l.nodeValue=h}catch(me){Zt(i,i.return,me)}}break;case 3:if(Vf=null,g=Wi,Wi=Bf(a.containerInfo),li(a,i),Wi=g,ci(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Jc(a.containerInfo)}catch(me){Zt(i,i.return,me)}mg&&(mg=!1,nv(i));break;case 4:h=Wi,Wi=Bf(i.stateNode.containerInfo),li(a,i),ci(i),Wi=h;break;case 12:li(a,i),ci(i);break;case 13:li(a,i),ci(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Tg=Qe()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,pg(i,h)));break;case 22:g=i.memoizedState!==null;var J=l!==null&&l.memoizedState!==null,he=ia,be=In;if(ia=he||g,In=be||J,li(a,i),In=be,ia=he,ci(i),h&8192)e:for(a=i.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(l===null||J||ia||In||Qo(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){J=l=a;try{if(E=J.stateNode,g)P=E.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{G=J.stateNode;var Ae=J.memoizedProps.style,fe=Ae!=null&&Ae.hasOwnProperty("display")?Ae.display:null;G.style.display=fe==null||typeof fe=="boolean"?"":(""+fe).trim()}}catch(me){Zt(J,J.return,me)}}}else if(a.tag===6){if(l===null){J=a;try{J.stateNode.nodeValue=g?"":J.memoizedProps}catch(me){Zt(J,J.return,me)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=i.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,pg(i,l))));break;case 19:li(a,i),ci(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,pg(i,h)));break;case 30:break;case 21:break;default:li(a,i),ci(i)}}function ci(i){var a=i.flags;if(a&2){try{for(var l,h=i.return;h!==null;){if(XT(h)){l=h;break}h=h.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var g=l.stateNode,E=dg(i);Af(i,E,g);break;case 5:var P=l.stateNode;l.flags&32&&(hr(P,""),l.flags&=-33);var G=dg(i);Af(i,G,P);break;case 3:case 4:var J=l.stateNode.containerInfo,he=dg(i);fg(i,he,J);break;default:throw Error(r(161))}}catch(be){Zt(i,i.return,be)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function nv(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;nv(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function Da(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)WT(i,a.alternate,a),a=a.sibling}function Qo(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Ra(4,a,a.return),Qo(a);break;case 1:bs(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&GT(a,a.return,l),Qo(a);break;case 27:Yc(a.stateNode);case 26:case 5:bs(a,a.return),Qo(a);break;case 22:a.memoizedState===null&&Qo(a);break;case 30:Qo(a);break;default:Qo(a)}i=i.sibling}}function Oa(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,g=i,E=a,P=E.flags;switch(E.tag){case 0:case 11:case 15:Oa(g,E,l),Mc(4,E);break;case 1:if(Oa(g,E,l),h=E,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(he){Zt(h,h.return,he)}if(h=E,g=h.updateQueue,g!==null){var G=h.stateNode;try{var J=g.shared.hiddenCallbacks;if(J!==null)for(g.shared.hiddenCallbacks=null,g=0;g<J.length;g++)Db(J[g],G)}catch(he){Zt(h,h.return,he)}}l&&P&64&&YT(E),Lc(E,E.return);break;case 27:KT(E);case 26:case 5:Oa(g,E,l),l&&h===null&&P&4&&$T(E),Lc(E,E.return);break;case 12:Oa(g,E,l);break;case 13:Oa(g,E,l),l&&P&4&&ev(g,E);break;case 22:E.memoizedState===null&&Oa(g,E,l),Lc(E,E.return);break;case 30:break;default:Oa(g,E,l)}a=a.sibling}}function gg(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Tc(l))}function yg(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Tc(i))}function Ts(i,a,l,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)rv(i,a,l,h),a=a.sibling}function rv(i,a,l,h){var g=a.flags;switch(a.tag){case 0:case 11:case 15:Ts(i,a,l,h),g&2048&&Mc(9,a);break;case 1:Ts(i,a,l,h);break;case 3:Ts(i,a,l,h),g&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Tc(i)));break;case 12:if(g&2048){Ts(i,a,l,h),i=a.stateNode;try{var E=a.memoizedProps,P=E.id,G=E.onPostCommit;typeof G=="function"&&G(P,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(J){Zt(a,a.return,J)}}else Ts(i,a,l,h);break;case 13:Ts(i,a,l,h);break;case 23:break;case 22:E=a.stateNode,P=a.alternate,a.memoizedState!==null?E._visibility&2?Ts(i,a,l,h):Bc(i,a):E._visibility&2?Ts(i,a,l,h):(E._visibility|=2,Gu(i,a,l,h,(a.subtreeFlags&10256)!==0)),g&2048&&gg(P,a);break;case 24:Ts(i,a,l,h),g&2048&&yg(a.alternate,a);break;default:Ts(i,a,l,h)}}function Gu(i,a,l,h,g){for(g=g&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var E=i,P=a,G=l,J=h,he=P.flags;switch(P.tag){case 0:case 11:case 15:Gu(E,P,G,J,g),Mc(8,P);break;case 23:break;case 22:var be=P.stateNode;P.memoizedState!==null?be._visibility&2?Gu(E,P,G,J,g):Bc(E,P):(be._visibility|=2,Gu(E,P,G,J,g)),g&&he&2048&&gg(P.alternate,P);break;case 24:Gu(E,P,G,J,g),g&&he&2048&&yg(P.alternate,P);break;default:Gu(E,P,G,J,g)}a=a.sibling}}function Bc(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,h=a,g=h.flags;switch(h.tag){case 22:Bc(l,h),g&2048&&gg(h.alternate,h);break;case 24:Bc(l,h),g&2048&&yg(h.alternate,h);break;default:Bc(l,h)}a=a.sibling}}var Uc=8192;function $u(i){if(i.subtreeFlags&Uc)for(i=i.child;i!==null;)iv(i),i=i.sibling}function iv(i){switch(i.tag){case 26:$u(i),i.flags&Uc&&i.memoizedState!==null&&B6(Wi,i.memoizedState,i.memoizedProps);break;case 5:$u(i);break;case 3:case 4:var a=Wi;Wi=Bf(i.stateNode.containerInfo),$u(i),Wi=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=Uc,Uc=16777216,$u(i),Uc=a):$u(i));break;default:$u(i)}}function sv(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function Vc(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];nr=h,ov(h,i)}sv(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)av(i),i=i.sibling}function av(i){switch(i.tag){case 0:case 11:case 15:Vc(i),i.flags&2048&&Ra(9,i,i.return);break;case 3:Vc(i);break;case 12:Vc(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,xf(i)):Vc(i);break;default:Vc(i)}}function xf(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];nr=h,ov(h,i)}sv(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Ra(8,a,a.return),xf(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,xf(a));break;default:xf(a)}i=i.sibling}}function ov(i,a){for(;nr!==null;){var l=nr;switch(l.tag){case 0:case 11:case 15:Ra(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Tc(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,nr=h;else e:for(l=i;nr!==null;){h=nr;var g=h.sibling,E=h.return;if(ZT(h),h===l){nr=null;break e}if(g!==null){g.return=E,nr=g;break e}nr=E}}}var JD={getCacheForType:function(i){var a=vr(Gn),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l}},e6=typeof WeakMap=="function"?WeakMap:Map,qt=0,tn=null,gt=null,wt=0,Yt=0,hi=null,ka=!1,Xu=!1,Eg=!1,aa=0,Tn=0,Pa=0,Wo=0,_g=0,Li=0,Ku=0,Hc=null,Xr=null,bg=!1,Tg=0,wf=1/0,If=null,Ma=null,pr=0,La=null,Qu=null,Wu=0,vg=0,Sg=null,uv=null,zc=0,Ag=null;function di(){if((qt&2)!==0&&wt!==0)return wt&-wt;if(Y.T!==null){var i=Uu;return i!==0?i:Dg()}return Or()}function lv(){Li===0&&(Li=(wt&536870912)===0||Ot?Gi():536870912);var i=Mi.current;return i!==null&&(i.flags|=32),Li}function fi(i,a,l){(i===tn&&(Yt===2||Yt===9)||i.cancelPendingCommit!==null)&&(Zu(i,0),Ba(i,wt,Li,!1)),Dr(i,l),((qt&2)===0||i!==tn)&&(i===tn&&((qt&2)===0&&(Wo|=l),Tn===4&&Ba(i,wt,Li,!1)),vs(i))}function cv(i,a,l){if((qt&6)!==0)throw Error(r(327));var h=!l&&(a&124)===0&&(a&i.expiredLanes)===0||Wt(i,a),g=h?r6(i,a):Ig(i,a,!0),E=h;do{if(g===0){Xu&&!h&&Ba(i,a,0,!1);break}else{if(l=i.current.alternate,E&&!t6(l)){g=Ig(i,a,!1),E=!1;continue}if(g===2){if(E=a,i.errorRecoveryDisabledLanes&E)var P=0;else P=i.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){a=P;e:{var G=i;g=Hc;var J=G.current.memoizedState.isDehydrated;if(J&&(Zu(G,P).flags|=256),P=Ig(G,P,!1),P!==2){if(Eg&&!J){G.errorRecoveryDisabledLanes|=E,Wo|=E,g=4;break e}E=Xr,Xr=g,E!==null&&(Xr===null?Xr=E:Xr.push.apply(Xr,E))}g=P}if(E=!1,g!==2)continue}}if(g===1){Zu(i,0),Ba(i,a,0,!0);break}e:{switch(h=i,E=g,E){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Ba(h,a,Li,!ka);break e;case 2:Xr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(g=Tg+300-Qe(),10<g)){if(Ba(h,a,Li,!ka),lt(h,0,!0)!==0)break e;h.timeoutHandle=Vv(hv.bind(null,h,l,Xr,If,bg,a,Li,Wo,Ku,ka,E,2,-0,0),g);break e}hv(h,l,Xr,If,bg,a,Li,Wo,Ku,ka,E,0,-0,0)}}break}while(!0);vs(i)}function hv(i,a,l,h,g,E,P,G,J,he,be,Ae,fe,me){if(i.timeoutHandle=-1,Ae=a.subtreeFlags,(Ae&8192||(Ae&16785408)===16785408)&&(Xc={stylesheets:null,count:0,unsuspend:L6},iv(a),Ae=U6(),Ae!==null)){i.cancelPendingCommit=Ae(Ev.bind(null,i,a,E,l,h,g,P,G,J,be,1,fe,me)),Ba(i,E,P,!he);return}Ev(i,a,E,l,h,g,P,G,J)}function t6(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var g=l[h],E=g.getSnapshot;g=g.value;try{if(!oi(E(),g))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ba(i,a,l,h){a&=~_g,a&=~Wo,i.suspendedLanes|=a,i.pingedLanes&=~a,h&&(i.warmLanes|=a),h=i.expirationTimes;for(var g=a;0<g;){var E=31-Ye(g),P=1<<E;h[E]=-1,g&=~P}l!==0&&qr(i,l,a)}function Cf(){return(qt&6)===0?(Fc(0),!1):!0}function xg(){if(gt!==null){if(Yt===0)var i=gt.return;else i=gt,Zs=Yo=null,Fp(i),qu=null,Oc=0,i=gt;for(;i!==null;)qT(i.alternate,i),i=i.return;gt=null}}function Zu(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,_6(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),xg(),tn=i,gt=l=Ks(i.current,null),wt=a,Yt=0,hi=null,ka=!1,Xu=Wt(i,a),Eg=!1,Ku=Li=_g=Wo=Pa=Tn=0,Xr=Hc=null,bg=!1,(a&8)!==0&&(a|=a&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=a;0<h;){var g=31-Ye(h),E=1<<g;a|=i[g],h&=~E}return aa=a,Kd(),l}function dv(i,a){ct=null,Y.H=pf,a===Sc||a===sf?(a=Nb(),Yt=3):a===wb?(a=Nb(),Yt=4):Yt=a===RT?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,hi=a,gt===null&&(Tn=1,bf(i,Di(a,i.current)))}function fv(){var i=Y.H;return Y.H=pf,i===null?pf:i}function mv(){var i=Y.A;return Y.A=JD,i}function wg(){Tn=4,ka||(wt&4194048)!==wt&&Mi.current!==null||(Xu=!0),(Pa&134217727)===0&&(Wo&134217727)===0||tn===null||Ba(tn,wt,Li,!1)}function Ig(i,a,l){var h=qt;qt|=2;var g=fv(),E=mv();(tn!==i||wt!==a)&&(If=null,Zu(i,a)),a=!1;var P=Tn;e:do try{if(Yt!==0&&gt!==null){var G=gt,J=hi;switch(Yt){case 8:xg(),P=6;break e;case 3:case 2:case 9:case 6:Mi.current===null&&(a=!0);var he=Yt;if(Yt=0,hi=null,Ju(i,G,J,he),l&&Xu){P=0;break e}break;default:he=Yt,Yt=0,hi=null,Ju(i,G,J,he)}}n6(),P=Tn;break}catch(be){dv(i,be)}while(!0);return a&&i.shellSuspendCounter++,Zs=Yo=null,qt=h,Y.H=g,Y.A=E,gt===null&&(tn=null,wt=0,Kd()),P}function n6(){for(;gt!==null;)pv(gt)}function r6(i,a){var l=qt;qt|=2;var h=fv(),g=mv();tn!==i||wt!==a?(If=null,wf=Qe()+500,Zu(i,a)):Xu=Wt(i,a);e:do try{if(Yt!==0&&gt!==null){a=gt;var E=hi;t:switch(Yt){case 1:Yt=0,hi=null,Ju(i,a,E,1);break;case 2:case 9:if(Ib(E)){Yt=0,hi=null,gv(a);break}a=function(){Yt!==2&&Yt!==9||tn!==i||(Yt=7),vs(i)},E.then(a,a);break e;case 3:Yt=7;break e;case 4:Yt=5;break e;case 7:Ib(E)?(Yt=0,hi=null,gv(a)):(Yt=0,hi=null,Ju(i,a,E,7));break;case 5:var P=null;switch(gt.tag){case 26:P=gt.memoizedState;case 5:case 27:var G=gt;if(!P||Wv(P)){Yt=0,hi=null;var J=G.sibling;if(J!==null)gt=J;else{var he=G.return;he!==null?(gt=he,Nf(he)):gt=null}break t}}Yt=0,hi=null,Ju(i,a,E,5);break;case 6:Yt=0,hi=null,Ju(i,a,E,6);break;case 8:xg(),Tn=6;break e;default:throw Error(r(462))}}i6();break}catch(be){dv(i,be)}while(!0);return Zs=Yo=null,Y.H=h,Y.A=g,qt=l,gt!==null?0:(tn=null,wt=0,Kd(),Tn)}function i6(){for(;gt!==null&&!Dt();)pv(gt)}function pv(i){var a=FT(i.alternate,i,aa);i.memoizedProps=i.pendingProps,a===null?Nf(i):gt=a}function gv(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=LT(l,a,a.pendingProps,a.type,void 0,wt);break;case 11:a=LT(l,a,a.pendingProps,a.type.render,a.ref,wt);break;case 5:Fp(a);default:qT(l,a),a=gt=yb(a,aa),a=FT(l,a,aa)}i.memoizedProps=i.pendingProps,a===null?Nf(i):gt=a}function Ju(i,a,l,h){Zs=Yo=null,Fp(a),qu=null,Oc=0;var g=a.return;try{if($D(i,g,a,l,wt)){Tn=1,bf(i,Di(l,i.current)),gt=null;return}}catch(E){if(g!==null)throw gt=g,E;Tn=1,bf(i,Di(l,i.current)),gt=null;return}a.flags&32768?(Ot||h===1?i=!0:Xu||(wt&536870912)!==0?i=!1:(ka=i=!0,(h===2||h===9||h===3||h===6)&&(h=Mi.current,h!==null&&h.tag===13&&(h.flags|=16384))),yv(a,i)):Nf(a)}function Nf(i){var a=i;do{if((a.flags&32768)!==0){yv(a,ka);return}i=a.return;var l=KD(a.alternate,a,aa);if(l!==null){gt=l;return}if(a=a.sibling,a!==null){gt=a;return}gt=a=i}while(a!==null);Tn===0&&(Tn=5)}function yv(i,a){do{var l=QD(i.alternate,i);if(l!==null){l.flags&=32767,gt=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){gt=i;return}gt=i=l}while(i!==null);Tn=6,gt=null}function Ev(i,a,l,h,g,E,P,G,J){i.cancelPendingCommit=null;do Rf();while(pr!==0);if((qt&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(E=a.lanes|a.childLanes,E|=yp,Tr(i,l,E,P,G,J),i===tn&&(gt=tn=null,wt=0),Qu=a,La=i,Wu=l,vg=E,Sg=g,uv=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,u6(Hn,function(){return Sv(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=Y.T,Y.T=null,g=W.p,W.p=2,P=qt,qt|=4;try{WD(i,a,l)}finally{qt=P,W.p=g,Y.T=h}}pr=1,_v(),bv(),Tv()}}function _v(){if(pr===1){pr=0;var i=La,a=Qu,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null;var h=W.p;W.p=2;var g=qt;qt|=4;try{tv(a,i);var E=Vg,P=ob(i.containerInfo),G=E.focusedElem,J=E.selectionRange;if(P!==G&&G&&G.ownerDocument&&ab(G.ownerDocument.documentElement,G)){if(J!==null&&dp(G)){var he=J.start,be=J.end;if(be===void 0&&(be=he),"selectionStart"in G)G.selectionStart=he,G.selectionEnd=Math.min(be,G.value.length);else{var Ae=G.ownerDocument||document,fe=Ae&&Ae.defaultView||window;if(fe.getSelection){var me=fe.getSelection(),et=G.textContent.length,Xe=Math.min(J.start,et),Qt=J.end===void 0?Xe:Math.min(J.end,et);!me.extend&&Xe>Qt&&(P=Qt,Qt=Xe,Xe=P);var oe=sb(G,Xe),ie=sb(G,Qt);if(oe&&ie&&(me.rangeCount!==1||me.anchorNode!==oe.node||me.anchorOffset!==oe.offset||me.focusNode!==ie.node||me.focusOffset!==ie.offset)){var le=Ae.createRange();le.setStart(oe.node,oe.offset),me.removeAllRanges(),Xe>Qt?(me.addRange(le),me.extend(ie.node,ie.offset)):(le.setEnd(ie.node,ie.offset),me.addRange(le))}}}}for(Ae=[],me=G;me=me.parentNode;)me.nodeType===1&&Ae.push({element:me,left:me.scrollLeft,top:me.scrollTop});for(typeof G.focus=="function"&&G.focus(),G=0;G<Ae.length;G++){var Se=Ae[G];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}Ff=!!Ug,Vg=Ug=null}finally{qt=g,W.p=h,Y.T=l}}i.current=a,pr=2}}function bv(){if(pr===2){pr=0;var i=La,a=Qu,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=Y.T,Y.T=null;var h=W.p;W.p=2;var g=qt;qt|=4;try{WT(i,a.alternate,a)}finally{qt=g,W.p=h,Y.T=l}}pr=3}}function Tv(){if(pr===4||pr===3){pr=0,Dn();var i=La,a=Qu,l=Wu,h=uv;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?pr=5:(pr=0,Qu=La=null,vv(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Ma=null),$i(l),a=a.stateNode,ve&&typeof ve.onCommitFiberRoot=="function")try{ve.onCommitFiberRoot(de,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=Y.T,g=W.p,W.p=2,Y.T=null;try{for(var E=i.onRecoverableError,P=0;P<h.length;P++){var G=h[P];E(G.value,{componentStack:G.stack})}}finally{Y.T=a,W.p=g}}(Wu&3)!==0&&Rf(),vs(i),g=i.pendingLanes,(l&4194090)!==0&&(g&42)!==0?i===Ag?zc++:(zc=0,Ag=i):zc=0,Fc(0)}}function vv(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Tc(a)))}function Rf(i){return _v(),bv(),Tv(),Sv()}function Sv(){if(pr!==5)return!1;var i=La,a=vg;vg=0;var l=$i(Wu),h=Y.T,g=W.p;try{W.p=32>l?32:l,Y.T=null,l=Sg,Sg=null;var E=La,P=Wu;if(pr=0,Qu=La=null,Wu=0,(qt&6)!==0)throw Error(r(331));var G=qt;if(qt|=4,av(E.current),rv(E,E.current,P,l),qt=G,Fc(0,!1),ve&&typeof ve.onPostCommitFiberRoot=="function")try{ve.onPostCommitFiberRoot(de,E)}catch{}return!0}finally{W.p=g,Y.T=h,vv(i,a)}}function Av(i,a,l){a=Di(l,a),a=ng(i.stateNode,a,2),i=wa(i,a,2),i!==null&&(Dr(i,2),vs(i))}function Zt(i,a,l){if(i.tag===3)Av(i,i,l);else for(;a!==null;){if(a.tag===3){Av(a,i,l);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ma===null||!Ma.has(h))){i=Di(l,i),l=CT(2),h=wa(a,l,2),h!==null&&(NT(l,h,a,i),Dr(h,2),vs(h));break}}a=a.return}}function Cg(i,a,l){var h=i.pingCache;if(h===null){h=i.pingCache=new e6;var g=new Set;h.set(a,g)}else g=h.get(a),g===void 0&&(g=new Set,h.set(a,g));g.has(l)||(Eg=!0,g.add(l),i=s6.bind(null,i,a,l),a.then(i,i))}function s6(i,a,l){var h=i.pingCache;h!==null&&h.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,tn===i&&(wt&l)===l&&(Tn===4||Tn===3&&(wt&62914560)===wt&&300>Qe()-Tg?(qt&2)===0&&Zu(i,0):_g|=l,Ku===wt&&(Ku=0)),vs(i)}function xv(i,a){a===0&&(a=br()),i=Pu(i,a),i!==null&&(Dr(i,a),vs(i))}function a6(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),xv(i,l)}function o6(i,a){var l=0;switch(i.tag){case 13:var h=i.stateNode,g=i.memoizedState;g!==null&&(l=g.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(a),xv(i,l)}function u6(i,a){return Jt(i,a)}var Df=null,el=null,Ng=!1,Of=!1,Rg=!1,Zo=0;function vs(i){i!==el&&i.next===null&&(el===null?Df=el=i:el=el.next=i),Of=!0,Ng||(Ng=!0,c6())}function Fc(i,a){if(!Rg&&Of){Rg=!0;do for(var l=!1,h=Df;h!==null;){if(i!==0){var g=h.pendingLanes;if(g===0)var E=0;else{var P=h.suspendedLanes,G=h.pingedLanes;E=(1<<31-Ye(42|i)+1)-1,E&=g&~(P&~G),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(l=!0,Nv(h,E))}else E=wt,E=lt(h,h===tn?E:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(E&3)===0||Wt(h,E)||(l=!0,Nv(h,E));h=h.next}while(l);Rg=!1}}function l6(){wv()}function wv(){Of=Ng=!1;var i=0;Zo!==0&&(E6()&&(i=Zo),Zo=0);for(var a=Qe(),l=null,h=Df;h!==null;){var g=h.next,E=Iv(h,a);E===0?(h.next=null,l===null?Df=g:l.next=g,g===null&&(el=l)):(l=h,(i!==0||(E&3)!==0)&&(Of=!0)),h=g}Fc(i)}function Iv(i,a){for(var l=i.suspendedLanes,h=i.pingedLanes,g=i.expirationTimes,E=i.pendingLanes&-62914561;0<E;){var P=31-Ye(E),G=1<<P,J=g[P];J===-1?((G&l)===0||(G&h)!==0)&&(g[P]=Gt(G,a)):J<=a&&(i.expiredLanes|=G),E&=~G}if(a=tn,l=wt,l=lt(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,l===0||i===a&&(Yt===2||Yt===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&on(h),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Wt(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(h!==null&&on(h),$i(l)){case 2:case 8:l=Vn;break;case 32:l=Hn;break;case 268435456:l=zn;break;default:l=Hn}return h=Cv.bind(null,i),l=Jt(l,h),i.callbackPriority=a,i.callbackNode=l,a}return h!==null&&h!==null&&on(h),i.callbackPriority=2,i.callbackNode=null,2}function Cv(i,a){if(pr!==0&&pr!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(Rf()&&i.callbackNode!==l)return null;var h=wt;return h=lt(i,i===tn?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(cv(i,h,a),Iv(i,Qe()),i.callbackNode!=null&&i.callbackNode===l?Cv.bind(null,i):null)}function Nv(i,a){if(Rf())return null;cv(i,a,!0)}function c6(){b6(function(){(qt&6)!==0?Jt(cn,l6):wv()})}function Dg(){return Zo===0&&(Zo=Gi()),Zo}function Rv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:js(""+i)}function Dv(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function h6(i,a,l,h,g){if(a==="submit"&&l&&l.stateNode===g){var E=Rv((g[hn]||null).action),P=h.submitter;P&&(a=(a=P[hn]||null)?Rv(a.formAction):P.getAttribute("formAction"),a!==null&&(E=a,P=null));var G=new Su("action","action",null,h,g);i.push({event:G,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Zo!==0){var J=P?Dv(g,P):new FormData(g);Wp(l,{pending:!0,data:J,method:g.method,action:E},null,J)}}else typeof E=="function"&&(G.preventDefault(),J=P?Dv(g,P):new FormData(g),Wp(l,{pending:!0,data:J,method:g.method,action:E},E,J))},currentTarget:g}]})}}for(var Og=0;Og<gp.length;Og++){var kg=gp[Og],d6=kg.toLowerCase(),f6=kg[0].toUpperCase()+kg.slice(1);Qi(d6,"on"+f6)}Qi(cb,"onAnimationEnd"),Qi(hb,"onAnimationIteration"),Qi(db,"onAnimationStart"),Qi("dblclick","onDoubleClick"),Qi("focusin","onFocus"),Qi("focusout","onBlur"),Qi(RD,"onTransitionRun"),Qi(DD,"onTransitionStart"),Qi(OD,"onTransitionCancel"),Qi(fb,"onTransitionEnd"),pt("onMouseEnter",["mouseout","mouseover"]),pt("onMouseLeave",["mouseout","mouseover"]),pt("onPointerEnter",["pointerout","pointerover"]),pt("onPointerLeave",["pointerout","pointerover"]),Le("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Le("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Le("onBeforeInput",["compositionend","keypress","textInput","paste"]),Le("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Le("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Le("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),m6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jc));function Ov(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],g=h.event;h=h.listeners;e:{var E=void 0;if(a)for(var P=h.length-1;0<=P;P--){var G=h[P],J=G.instance,he=G.currentTarget;if(G=G.listener,J!==E&&g.isPropagationStopped())break e;E=G,g.currentTarget=he;try{E(g)}catch(be){_f(be)}g.currentTarget=null,E=J}else for(P=0;P<h.length;P++){if(G=h[P],J=G.instance,he=G.currentTarget,G=G.listener,J!==E&&g.isPropagationStopped())break e;E=G,g.currentTarget=he;try{E(g)}catch(be){_f(be)}g.currentTarget=null,E=J}}}}function yt(i,a){var l=a[us];l===void 0&&(l=a[us]=new Set);var h=i+"__bubble";l.has(h)||(kv(a,i,2,!1),l.add(h))}function Pg(i,a,l){var h=0;a&&(h|=4),kv(l,i,h,a)}var kf="_reactListening"+Math.random().toString(36).slice(2);function Mg(i){if(!i[kf]){i[kf]=!0,pe.forEach(function(l){l!=="selectionchange"&&(m6.has(l)||Pg(l,!1,i),Pg(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[kf]||(a[kf]=!0,Pg("selectionchange",!1,a))}}function kv(i,a,l,h){switch(rS(a)){case 2:var g=z6;break;case 8:g=F6;break;default:g=Kg}l=g.bind(null,a,l,i),g=void 0,!Ni||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),h?g!==void 0?i.addEventListener(a,l,{capture:!0,passive:g}):i.addEventListener(a,l,!0):g!==void 0?i.addEventListener(a,l,{passive:g}):i.addEventListener(a,l,!1)}function Lg(i,a,l,h,g){var E=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var P=h.tag;if(P===3||P===4){var G=h.stateNode.containerInfo;if(G===g)break;if(P===4)for(P=h.return;P!==null;){var J=P.tag;if((J===3||J===4)&&P.stateNode.containerInfo===g)return;P=P.return}for(;G!==null;){if(P=Pr(G),P===null)return;if(J=P.tag,J===5||J===6||J===26||J===27){h=E=P;continue e}G=G.parentNode}}h=h.return}Pd(function(){var he=E,be=dr(l),Ae=[];e:{var fe=mb.get(i);if(fe!==void 0){var me=Su,et=i;switch(i){case"keypress":if(fs(l)===0)break e;case"keydown":case"keyup":me=Nu;break;case"focusin":et="focus",me=wu;break;case"focusout":et="blur",me=wu;break;case"beforeblur":case"afterblur":me=wu;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=Ri;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=up;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=Fd;break;case cb:case hb:case db:me=Iu;break;case fb:me=qd;break;case"scroll":case"scrollend":me=Md;break;case"wheel":me=Ru;break;case"copy":case"cut":case"paste":me=Cu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=fc;break;case"toggle":case"beforetoggle":me=Gd}var Xe=(a&4)!==0,Qt=!Xe&&(i==="scroll"||i==="scrollend"),oe=Xe?fe!==null?fe+"Capture":null:fe;Xe=[];for(var ie=he,le;ie!==null;){var Se=ie;if(le=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||le===null||oe===null||(Se=Do(ie,oe),Se!=null&&Xe.push(qc(ie,Se,le))),Qt)break;ie=ie.return}0<Xe.length&&(fe=new me(fe,et,null,l,be),Ae.push({event:fe,listeners:Xe}))}}if((a&7)===0){e:{if(fe=i==="mouseover"||i==="pointerover",me=i==="mouseout"||i==="pointerout",fe&&l!==Yr&&(et=l.relatedTarget||l.fromElement)&&(Pr(et)||et[En]))break e;if((me||fe)&&(fe=be.window===be?be:(fe=be.ownerDocument)?fe.defaultView||fe.parentWindow:window,me?(et=l.relatedTarget||l.toElement,me=he,et=et?Pr(et):null,et!==null&&(Qt=o(et),Xe=et.tag,et!==Qt||Xe!==5&&Xe!==27&&Xe!==6)&&(et=null)):(me=null,et=he),me!==et)){if(Xe=Ri,Se="onMouseLeave",oe="onMouseEnter",ie="mouse",(i==="pointerout"||i==="pointerover")&&(Xe=fc,Se="onPointerLeave",oe="onPointerEnter",ie="pointer"),Qt=me==null?fe:Mr(me),le=et==null?fe:Mr(et),fe=new Xe(Se,ie+"leave",me,l,be),fe.target=Qt,fe.relatedTarget=le,Se=null,Pr(be)===he&&(Xe=new Xe(oe,ie+"enter",et,l,be),Xe.target=le,Xe.relatedTarget=Qt,Se=Xe),Qt=Se,me&&et)t:{for(Xe=me,oe=et,ie=0,le=Xe;le;le=tl(le))ie++;for(le=0,Se=oe;Se;Se=tl(Se))le++;for(;0<ie-le;)Xe=tl(Xe),ie--;for(;0<le-ie;)oe=tl(oe),le--;for(;ie--;){if(Xe===oe||oe!==null&&Xe===oe.alternate)break t;Xe=tl(Xe),oe=tl(oe)}Xe=null}else Xe=null;me!==null&&Pv(Ae,fe,me,Xe,!1),et!==null&&Qt!==null&&Pv(Ae,Qt,et,Xe,!0)}}e:{if(fe=he?Mr(he):window,me=fe.nodeName&&fe.nodeName.toLowerCase(),me==="select"||me==="input"&&fe.type==="file")var Fe=J_;else if(Yn(fe))if(eb)Fe=ID;else{Fe=xD;var dt=AD}else me=fe.nodeName,!me||me.toLowerCase()!=="input"||fe.type!=="checkbox"&&fe.type!=="radio"?he&&Fs(he.elementType)&&(Fe=J_):Fe=wD;if(Fe&&(Fe=Fe(i,he))){Xs(Ae,Fe,l,be);break e}dt&&dt(i,fe,he),i==="focusout"&&he&&fe.type==="number"&&he.memoizedProps.value!=null&&cr(fe,"number",fe.value)}switch(dt=he?Mr(he):window,i){case"focusin":(Yn(dt)||dt.contentEditable==="true")&&(Du=dt,fp=he,gc=null);break;case"focusout":gc=fp=Du=null;break;case"mousedown":mp=!0;break;case"contextmenu":case"mouseup":case"dragend":mp=!1,ub(Ae,l,be);break;case"selectionchange":if(ND)break;case"keydown":case"keyup":ub(Ae,l,be)}var Ge;if(gs)e:{switch(i){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else At?ye(i,l)&&(Ke="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Ke="onCompositionStart");Ke&&(R&&l.locale!=="ko"&&(At||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&At&&(Ge=uc()):(ds=be,va="value"in ds?ds.value:ds.textContent,At=!0)),dt=Pf(he,Ke),0<dt.length&&(Ke=new hc(Ke,i,null,l,be),Ae.push({event:Ke,listeners:dt}),Ge?Ke.data=Ge:(Ge=Pe(l),Ge!==null&&(Ke.data=Ge)))),(Ge=v?qn(i,l):xt(i,l))&&(Ke=Pf(he,"onBeforeInput"),0<Ke.length&&(dt=new hc("onBeforeInput","beforeinput",null,l,be),Ae.push({event:dt,listeners:Ke}),dt.data=Ge)),h6(Ae,i,he,l,be)}Ov(Ae,a)})}function qc(i,a,l){return{instance:i,listener:a,currentTarget:l}}function Pf(i,a){for(var l=a+"Capture",h=[];i!==null;){var g=i,E=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||E===null||(g=Do(i,l),g!=null&&h.unshift(qc(i,g,E)),g=Do(i,a),g!=null&&h.push(qc(i,g,E))),i.tag===3)return h;i=i.return}return[]}function tl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Pv(i,a,l,h,g){for(var E=a._reactName,P=[];l!==null&&l!==h;){var G=l,J=G.alternate,he=G.stateNode;if(G=G.tag,J!==null&&J===h)break;G!==5&&G!==26&&G!==27||he===null||(J=he,g?(he=Do(l,E),he!=null&&P.unshift(qc(l,he,J))):g||(he=Do(l,E),he!=null&&P.push(qc(l,he,J)))),l=l.return}P.length!==0&&i.push({event:a,listeners:P})}var p6=/\r\n?/g,g6=/\u0000|\uFFFD/g;function Mv(i){return(typeof i=="string"?i:""+i).replace(p6,`
`).replace(g6,"")}function Lv(i,a){return a=Mv(a),Mv(i)===a}function Mf(){}function Kt(i,a,l,h,g,E){switch(l){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||hr(i,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&hr(i,""+h);break;case"className":Nt(i,"class",h);break;case"tabIndex":Nt(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Nt(i,l,h);break;case"style":cs(i,h,E);break;case"data":if(a!=="object"){Nt(i,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=js(""+h),i.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(l==="formAction"?(a!=="input"&&Kt(i,a,"name",g.name,g,null),Kt(i,a,"formEncType",g.formEncType,g,null),Kt(i,a,"formMethod",g.formMethod,g,null),Kt(i,a,"formTarget",g.formTarget,g,null)):(Kt(i,a,"encType",g.encType,g,null),Kt(i,a,"method",g.method,g,null),Kt(i,a,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=js(""+h),i.setAttribute(l,h);break;case"onClick":h!=null&&(i.onclick=Mf);break;case"onScroll":h!=null&&yt("scroll",i);break;case"onScrollEnd":h!=null&&yt("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}l=js(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""+h):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":h===!0?i.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,h):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(l,h):i.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(l):i.setAttribute(l,h);break;case"popover":yt("beforetoggle",i),yt("toggle",i),Lt(i,"popover",h);break;case"xlinkActuate":Bt(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Bt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Bt(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Bt(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Bt(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Bt(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Bt(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Bt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Bt(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Lt(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=ba.get(l)||l,Lt(i,l,h))}}function Bg(i,a,l,h,g,E){switch(l){case"style":cs(i,h,E);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"children":typeof h=="string"?hr(i,h):(typeof h=="number"||typeof h=="bigint")&&hr(i,""+h);break;case"onScroll":h!=null&&yt("scroll",i);break;case"onScrollEnd":h!=null&&yt("scrollend",i);break;case"onClick":h!=null&&(i.onclick=Mf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!De.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),a=l.slice(2,g?l.length-7:void 0),E=i[hn]||null,E=E!=null?E[l]:null,typeof E=="function"&&i.removeEventListener(a,E,g),typeof h=="function")){typeof E!="function"&&E!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,h,g);break e}l in i?i[l]=h:h===!0?i.setAttribute(l,""):Lt(i,l,h)}}}function gr(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yt("error",i),yt("load",i);var h=!1,g=!1,E;for(E in l)if(l.hasOwnProperty(E)){var P=l[E];if(P!=null)switch(E){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Kt(i,a,E,P,l,null)}}g&&Kt(i,a,"srcSet",l.srcSet,l,null),h&&Kt(i,a,"src",l.src,l,null);return;case"input":yt("invalid",i);var G=E=P=g=null,J=null,he=null;for(h in l)if(l.hasOwnProperty(h)){var be=l[h];if(be!=null)switch(h){case"name":g=be;break;case"type":P=be;break;case"checked":J=be;break;case"defaultChecked":he=be;break;case"value":E=be;break;case"defaultValue":G=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(r(137,a));break;default:Kt(i,a,h,be,l,null)}}lr(i,E,G,J,he,P,g,!1),St(i);return;case"select":yt("invalid",i),h=P=E=null;for(g in l)if(l.hasOwnProperty(g)&&(G=l[g],G!=null))switch(g){case"value":E=G;break;case"defaultValue":P=G;break;case"multiple":h=G;default:Kt(i,a,g,G,l,null)}a=E,l=P,i.multiple=!!h,a!=null?Ur(i,!!h,a,!1):l!=null&&Ur(i,!!h,l,!0);return;case"textarea":yt("invalid",i),E=g=h=null;for(P in l)if(l.hasOwnProperty(P)&&(G=l[P],G!=null))switch(P){case"value":h=G;break;case"defaultValue":g=G;break;case"children":E=G;break;case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(91));break;default:Kt(i,a,P,G,l,null)}Xi(i,h,g,E),St(i);return;case"option":for(J in l)if(l.hasOwnProperty(J)&&(h=l[J],h!=null))switch(J){case"selected":i.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Kt(i,a,J,h,l,null)}return;case"dialog":yt("beforetoggle",i),yt("toggle",i),yt("cancel",i),yt("close",i);break;case"iframe":case"object":yt("load",i);break;case"video":case"audio":for(h=0;h<jc.length;h++)yt(jc[h],i);break;case"image":yt("error",i),yt("load",i);break;case"details":yt("toggle",i);break;case"embed":case"source":case"link":yt("error",i),yt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(he in l)if(l.hasOwnProperty(he)&&(h=l[he],h!=null))switch(he){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Kt(i,a,he,h,l,null)}return;default:if(Fs(a)){for(be in l)l.hasOwnProperty(be)&&(h=l[be],h!==void 0&&Bg(i,a,be,h,l,void 0));return}}for(G in l)l.hasOwnProperty(G)&&(h=l[G],h!=null&&Kt(i,a,G,h,l,null))}function y6(i,a,l,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,E=null,P=null,G=null,J=null,he=null,be=null;for(me in l){var Ae=l[me];if(l.hasOwnProperty(me)&&Ae!=null)switch(me){case"checked":break;case"value":break;case"defaultValue":J=Ae;default:h.hasOwnProperty(me)||Kt(i,a,me,null,h,Ae)}}for(var fe in h){var me=h[fe];if(Ae=l[fe],h.hasOwnProperty(fe)&&(me!=null||Ae!=null))switch(fe){case"type":E=me;break;case"name":g=me;break;case"checked":he=me;break;case"defaultChecked":be=me;break;case"value":P=me;break;case"defaultValue":G=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(r(137,a));break;default:me!==Ae&&Kt(i,a,fe,me,h,Ae)}}en(i,P,G,J,he,be,E,g);return;case"select":me=P=G=fe=null;for(E in l)if(J=l[E],l.hasOwnProperty(E)&&J!=null)switch(E){case"value":break;case"multiple":me=J;default:h.hasOwnProperty(E)||Kt(i,a,E,null,h,J)}for(g in h)if(E=h[g],J=l[g],h.hasOwnProperty(g)&&(E!=null||J!=null))switch(g){case"value":fe=E;break;case"defaultValue":G=E;break;case"multiple":P=E;default:E!==J&&Kt(i,a,g,E,h,J)}a=G,l=P,h=me,fe!=null?Ur(i,!!l,fe,!1):!!h!=!!l&&(a!=null?Ur(i,!!l,a,!0):Ur(i,!!l,l?[]:"",!1));return;case"textarea":me=fe=null;for(G in l)if(g=l[G],l.hasOwnProperty(G)&&g!=null&&!h.hasOwnProperty(G))switch(G){case"value":break;case"children":break;default:Kt(i,a,G,null,h,g)}for(P in h)if(g=h[P],E=l[P],h.hasOwnProperty(P)&&(g!=null||E!=null))switch(P){case"value":fe=g;break;case"defaultValue":me=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==E&&Kt(i,a,P,g,h,E)}Ct(i,fe,me);return;case"option":for(var et in l)if(fe=l[et],l.hasOwnProperty(et)&&fe!=null&&!h.hasOwnProperty(et))switch(et){case"selected":i.selected=!1;break;default:Kt(i,a,et,null,h,fe)}for(J in h)if(fe=h[J],me=l[J],h.hasOwnProperty(J)&&fe!==me&&(fe!=null||me!=null))switch(J){case"selected":i.selected=fe&&typeof fe!="function"&&typeof fe!="symbol";break;default:Kt(i,a,J,fe,h,me)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xe in l)fe=l[Xe],l.hasOwnProperty(Xe)&&fe!=null&&!h.hasOwnProperty(Xe)&&Kt(i,a,Xe,null,h,fe);for(he in h)if(fe=h[he],me=l[he],h.hasOwnProperty(he)&&fe!==me&&(fe!=null||me!=null))switch(he){case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,a));break;default:Kt(i,a,he,fe,h,me)}return;default:if(Fs(a)){for(var Qt in l)fe=l[Qt],l.hasOwnProperty(Qt)&&fe!==void 0&&!h.hasOwnProperty(Qt)&&Bg(i,a,Qt,void 0,h,fe);for(be in h)fe=h[be],me=l[be],!h.hasOwnProperty(be)||fe===me||fe===void 0&&me===void 0||Bg(i,a,be,fe,h,me);return}}for(var oe in l)fe=l[oe],l.hasOwnProperty(oe)&&fe!=null&&!h.hasOwnProperty(oe)&&Kt(i,a,oe,null,h,fe);for(Ae in h)fe=h[Ae],me=l[Ae],!h.hasOwnProperty(Ae)||fe===me||fe==null&&me==null||Kt(i,a,Ae,fe,h,me)}var Ug=null,Vg=null;function Lf(i){return i.nodeType===9?i:i.ownerDocument}function Bv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Uv(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Hg(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var zg=null;function E6(){var i=window.event;return i&&i.type==="popstate"?i===zg?!1:(zg=i,!0):(zg=null,!1)}var Vv=typeof setTimeout=="function"?setTimeout:void 0,_6=typeof clearTimeout=="function"?clearTimeout:void 0,Hv=typeof Promise=="function"?Promise:void 0,b6=typeof queueMicrotask=="function"?queueMicrotask:typeof Hv<"u"?function(i){return Hv.resolve(null).then(i).catch(T6)}:Vv;function T6(i){setTimeout(function(){throw i})}function Ua(i){return i==="head"}function zv(i,a){var l=a,h=0,g=0;do{var E=l.nextSibling;if(i.removeChild(l),E&&E.nodeType===8)if(l=E.data,l==="/$"){if(0<h&&8>h){l=h;var P=i.ownerDocument;if(l&1&&Yc(P.documentElement),l&2&&Yc(P.body),l&4)for(l=P.head,Yc(l),P=l.firstChild;P;){var G=P.nextSibling,J=P.nodeName;P[Ai]||J==="SCRIPT"||J==="STYLE"||J==="LINK"&&P.rel.toLowerCase()==="stylesheet"||l.removeChild(P),P=G}}if(g===0){i.removeChild(E),Jc(a);return}g--}else l==="$"||l==="$?"||l==="$!"?g++:h=l.charCodeAt(0)-48;else h=0;l=E}while(l);Jc(a)}function Fg(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Fg(l),ai(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function v6(i,a,l,h){for(;i.nodeType===1;){var g=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[Ai])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(E=i.getAttribute("rel"),E==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(E!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(E=i.getAttribute("src"),(E!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&E&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var E=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===E)return i}else return i;if(i=Zi(i.nextSibling),i===null)break}return null}function S6(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Zi(i.nextSibling),i===null))return null;return i}function jg(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function A6(i,a){var l=i.ownerDocument;if(i.data!=="$?"||l.readyState==="complete")a();else{var h=function(){a(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Zi(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}var qg=null;function Fv(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return i;a--}else l==="/$"&&a++}i=i.previousSibling}return null}function jv(i,a,l){switch(a=Lf(l),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Yc(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);ai(i)}var Bi=new Map,qv=new Set;function Bf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var oa=W.d;W.d={f:x6,r:w6,D:I6,C:C6,L:N6,m:R6,X:O6,S:D6,M:k6};function x6(){var i=oa.f(),a=Cf();return i||a}function w6(i){var a=Qn(i);a!==null&&a.tag===5&&a.type==="form"?cT(a):oa.r(i)}var nl=typeof document>"u"?null:document;function Yv(i,a,l){var h=nl;if(h&&typeof a=="string"&&a){var g=dn(a);g='link[rel="'+i+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),qv.has(g)||(qv.add(g),i={rel:i,crossOrigin:l,href:a},h.querySelector(g)===null&&(a=h.createElement("link"),gr(a,"link",i),ne(a),h.head.appendChild(a)))}}function I6(i){oa.D(i),Yv("dns-prefetch",i,null)}function C6(i,a){oa.C(i,a),Yv("preconnect",i,a)}function N6(i,a,l){oa.L(i,a,l);var h=nl;if(h&&i&&a){var g='link[rel="preload"][as="'+dn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+dn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+dn(l.imageSizes)+'"]')):g+='[href="'+dn(i)+'"]';var E=g;switch(a){case"style":E=rl(i);break;case"script":E=il(i)}Bi.has(E)||(i=m({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),Bi.set(E,i),h.querySelector(g)!==null||a==="style"&&h.querySelector(Gc(E))||a==="script"&&h.querySelector($c(E))||(a=h.createElement("link"),gr(a,"link",i),ne(a),h.head.appendChild(a)))}}function R6(i,a){oa.m(i,a);var l=nl;if(l&&i){var h=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+dn(h)+'"][href="'+dn(i)+'"]',E=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=il(i)}if(!Bi.has(E)&&(i=m({rel:"modulepreload",href:i},a),Bi.set(E,i),l.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector($c(E)))return}h=l.createElement("link"),gr(h,"link",i),ne(h),l.head.appendChild(h)}}}function D6(i,a,l){oa.S(i,a,l);var h=nl;if(h&&i){var g=jn(h).hoistableStyles,E=rl(i);a=a||"default";var P=g.get(E);if(!P){var G={loading:0,preload:null};if(P=h.querySelector(Gc(E)))G.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":a},l),(l=Bi.get(E))&&Yg(i,l);var J=P=h.createElement("link");ne(J),gr(J,"link",i),J._p=new Promise(function(he,be){J.onload=he,J.onerror=be}),J.addEventListener("load",function(){G.loading|=1}),J.addEventListener("error",function(){G.loading|=2}),G.loading|=4,Uf(P,a,h)}P={type:"stylesheet",instance:P,count:1,state:G},g.set(E,P)}}}function O6(i,a){oa.X(i,a);var l=nl;if(l&&i){var h=jn(l).hoistableScripts,g=il(i),E=h.get(g);E||(E=l.querySelector($c(g)),E||(i=m({src:i,async:!0},a),(a=Bi.get(g))&&Gg(i,a),E=l.createElement("script"),ne(E),gr(E,"link",i),l.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(g,E))}}function k6(i,a){oa.M(i,a);var l=nl;if(l&&i){var h=jn(l).hoistableScripts,g=il(i),E=h.get(g);E||(E=l.querySelector($c(g)),E||(i=m({src:i,async:!0,type:"module"},a),(a=Bi.get(g))&&Gg(i,a),E=l.createElement("script"),ne(E),gr(E,"link",i),l.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(g,E))}}function Gv(i,a,l,h){var g=(g=Te.current)?Bf(g):null;if(!g)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=rl(l.href),l=jn(g).hoistableStyles,h=l.get(a),h||(h={type:"style",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=rl(l.href);var E=jn(g).hoistableStyles,P=E.get(i);if(P||(g=g.ownerDocument||g,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(i,P),(E=g.querySelector(Gc(i)))&&!E._p&&(P.instance=E,P.state.loading=5),Bi.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Bi.set(i,l),E||P6(g,i,l,P.state))),a&&h===null)throw Error(r(528,""));return P}if(a&&h!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=il(l),l=jn(g).hoistableScripts,h=l.get(a),h||(h={type:"script",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function rl(i){return'href="'+dn(i)+'"'}function Gc(i){return'link[rel="stylesheet"]['+i+"]"}function $v(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function P6(i,a,l,h){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=i.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),gr(a,"link",l),ne(a),i.head.appendChild(a))}function il(i){return'[src="'+dn(i)+'"]'}function $c(i){return"script[async]"+i}function Xv(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var h=i.querySelector('style[data-href~="'+dn(l.href)+'"]');if(h)return a.instance=h,ne(h),h;var g=m({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),ne(h),gr(h,"style",g),Uf(h,l.precedence,i),a.instance=h;case"stylesheet":g=rl(l.href);var E=i.querySelector(Gc(g));if(E)return a.state.loading|=4,a.instance=E,ne(E),E;h=$v(l),(g=Bi.get(g))&&Yg(h,g),E=(i.ownerDocument||i).createElement("link"),ne(E);var P=E;return P._p=new Promise(function(G,J){P.onload=G,P.onerror=J}),gr(E,"link",h),a.state.loading|=4,Uf(E,l.precedence,i),a.instance=E;case"script":return E=il(l.src),(g=i.querySelector($c(E)))?(a.instance=g,ne(g),g):(h=l,(g=Bi.get(E))&&(h=m({},l),Gg(h,g)),i=i.ownerDocument||i,g=i.createElement("script"),ne(g),gr(g,"link",h),i.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Uf(h,l.precedence,i));return a.instance}function Uf(i,a,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,E=g,P=0;P<h.length;P++){var G=h[P];if(G.dataset.precedence===a)E=G;else if(E!==g)break}E?E.parentNode.insertBefore(i,E.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function Yg(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function Gg(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Vf=null;function Kv(i,a,l){if(Vf===null){var h=new Map,g=Vf=new Map;g.set(l,h)}else g=Vf,h=g.get(l),h||(h=new Map,g.set(l,h));if(h.has(i))return h;for(h.set(i,null),l=l.getElementsByTagName(i),g=0;g<l.length;g++){var E=l[g];if(!(E[Ai]||E[Pt]||i==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var P=E.getAttribute(a)||"";P=i+P;var G=h.get(P);G?G.push(E):h.set(P,[E])}}return h}function Qv(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function M6(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Wv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Xc=null;function L6(){}function B6(i,a,l){if(Xc===null)throw Error(r(475));var h=Xc;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=rl(l.href),E=i.querySelector(Gc(g));if(E){i=E._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(h.count++,h=Hf.bind(h),i.then(h,h)),a.state.loading|=4,a.instance=E,ne(E);return}E=i.ownerDocument||i,l=$v(l),(g=Bi.get(g))&&Yg(l,g),E=E.createElement("link"),ne(E);var P=E;P._p=new Promise(function(G,J){P.onload=G,P.onerror=J}),gr(E,"link",l),a.instance=E}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(h.count++,a=Hf.bind(h),i.addEventListener("load",a),i.addEventListener("error",a))}}function U6(){if(Xc===null)throw Error(r(475));var i=Xc;return i.stylesheets&&i.count===0&&$g(i,i.stylesheets),0<i.count?function(a){var l=setTimeout(function(){if(i.stylesheets&&$g(i,i.stylesheets),i.unsuspend){var h=i.unsuspend;i.unsuspend=null,h()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(l)}}:null}function Hf(){if(this.count--,this.count===0){if(this.stylesheets)$g(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var zf=null;function $g(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,zf=new Map,a.forEach(V6,i),zf=null,Hf.call(i))}function V6(i,a){if(!(a.state.loading&4)){var l=zf.get(i);if(l)var h=l.get(null);else{l=new Map,zf.set(i,l);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<g.length;E++){var P=g[E];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(l.set(P.dataset.precedence,P),h=P)}h&&l.set(null,h)}g=a.instance,P=g.getAttribute("data-precedence"),E=l.get(P)||h,E===h&&l.set(null,g),l.set(P,g),this.count++,h=Hf.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),E?E.parentNode.insertBefore(g,E.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),a.state.loading|=4}}var Kc={$$typeof:L,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function H6(i,a,l,h,g,E,P,G){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fn(0),this.hiddenUpdates=Fn(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=E,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function Zv(i,a,l,h,g,E,P,G,J,he,be,Ae){return i=new H6(i,a,l,P,G,J,he,Ae),a=1,E===!0&&(a|=24),E=ui(3,null,null,a),i.current=E,E.stateNode=i,a=Cp(),a.refCount++,i.pooledCache=a,a.refCount++,E.memoizedState={element:h,isDehydrated:l,cache:a},Op(E),i}function Jv(i){return i?(i=Mu,i):Mu}function eS(i,a,l,h,g,E){g=Jv(g),h.context===null?h.context=g:h.pendingContext=g,h=xa(a),h.payload={element:l},E=E===void 0?null:E,E!==null&&(h.callback=E),l=wa(i,h,a),l!==null&&(fi(l,i,a),xc(l,i,a))}function tS(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function Xg(i,a){tS(i,a),(i=i.alternate)&&tS(i,a)}function nS(i){if(i.tag===13){var a=Pu(i,67108864);a!==null&&fi(a,i,67108864),Xg(i,67108864)}}var Ff=!0;function z6(i,a,l,h){var g=Y.T;Y.T=null;var E=W.p;try{W.p=2,Kg(i,a,l,h)}finally{W.p=E,Y.T=g}}function F6(i,a,l,h){var g=Y.T;Y.T=null;var E=W.p;try{W.p=8,Kg(i,a,l,h)}finally{W.p=E,Y.T=g}}function Kg(i,a,l,h){if(Ff){var g=Qg(h);if(g===null)Lg(i,a,h,jf,l),iS(i,h);else if(q6(g,i,a,l,h))h.stopPropagation();else if(iS(i,h),a&4&&-1<j6.indexOf(i)){for(;g!==null;){var E=Qn(g);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var P=vt(E.pendingLanes);if(P!==0){var G=E;for(G.pendingLanes|=2,G.entangledLanes|=2;P;){var J=1<<31-Ye(P);G.entanglements[1]|=J,P&=~J}vs(E),(qt&6)===0&&(wf=Qe()+500,Fc(0))}}break;case 13:G=Pu(E,2),G!==null&&fi(G,E,2),Cf(),Xg(E,2)}if(E=Qg(h),E===null&&Lg(i,a,h,jf,l),E===g)break;g=E}g!==null&&h.stopPropagation()}else Lg(i,a,h,null,l)}}function Qg(i){return i=dr(i),Wg(i)}var jf=null;function Wg(i){if(jf=null,i=Pr(i),i!==null){var a=o(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=u(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return jf=i,null}function rS(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qe()){case cn:return 2;case Vn:return 8;case Hn:case Kn:return 32;case zn:return 268435456;default:return 32}default:return 32}}var Zg=!1,Va=null,Ha=null,za=null,Qc=new Map,Wc=new Map,Fa=[],j6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iS(i,a){switch(i){case"focusin":case"focusout":Va=null;break;case"dragenter":case"dragleave":Ha=null;break;case"mouseover":case"mouseout":za=null;break;case"pointerover":case"pointerout":Qc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wc.delete(a.pointerId)}}function Zc(i,a,l,h,g,E){return i===null||i.nativeEvent!==E?(i={blockedOn:a,domEventName:l,eventSystemFlags:h,nativeEvent:E,targetContainers:[g]},a!==null&&(a=Qn(a),a!==null&&nS(a)),i):(i.eventSystemFlags|=h,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function q6(i,a,l,h,g){switch(a){case"focusin":return Va=Zc(Va,i,a,l,h,g),!0;case"dragenter":return Ha=Zc(Ha,i,a,l,h,g),!0;case"mouseover":return za=Zc(za,i,a,l,h,g),!0;case"pointerover":var E=g.pointerId;return Qc.set(E,Zc(Qc.get(E)||null,i,a,l,h,g)),!0;case"gotpointercapture":return E=g.pointerId,Wc.set(E,Zc(Wc.get(E)||null,i,a,l,h,g)),!0}return!1}function sS(i){var a=Pr(i.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){i.blockedOn=a,si(i.priority,function(){if(l.tag===13){var h=di();h=ii(h);var g=Pu(l,h);g!==null&&fi(g,l,h),Xg(l,h)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function qf(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=Qg(i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);Yr=h,l.target.dispatchEvent(h),Yr=null}else return a=Qn(l),a!==null&&nS(a),i.blockedOn=l,!1;a.shift()}return!0}function aS(i,a,l){qf(i)&&l.delete(a)}function Y6(){Zg=!1,Va!==null&&qf(Va)&&(Va=null),Ha!==null&&qf(Ha)&&(Ha=null),za!==null&&qf(za)&&(za=null),Qc.forEach(aS),Wc.forEach(aS)}function Yf(i,a){i.blockedOn===a&&(i.blockedOn=null,Zg||(Zg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Y6)))}var Gf=null;function oS(i){Gf!==i&&(Gf=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Gf===i&&(Gf=null);for(var a=0;a<i.length;a+=3){var l=i[a],h=i[a+1],g=i[a+2];if(typeof h!="function"){if(Wg(h||l)===null)continue;break}var E=Qn(l);E!==null&&(i.splice(a,3),a-=3,Wp(E,{pending:!0,data:g,method:l.method,action:h},h,g))}}))}function Jc(i){function a(J){return Yf(J,i)}Va!==null&&Yf(Va,i),Ha!==null&&Yf(Ha,i),za!==null&&Yf(za,i),Qc.forEach(a),Wc.forEach(a);for(var l=0;l<Fa.length;l++){var h=Fa[l];h.blockedOn===i&&(h.blockedOn=null)}for(;0<Fa.length&&(l=Fa[0],l.blockedOn===null);)sS(l),l.blockedOn===null&&Fa.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var g=l[h],E=l[h+1],P=g[hn]||null;if(typeof E=="function")P||oS(l);else if(P){var G=null;if(E&&E.hasAttribute("formAction")){if(g=E,P=E[hn]||null)G=P.formAction;else if(Wg(g)!==null)continue}else G=P.action;typeof G=="function"?l[h+1]=G:(l.splice(h,3),h-=3),oS(l)}}}function Jg(i){this._internalRoot=i}$f.prototype.render=Jg.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,h=di();eS(l,h,i,a,null,null)},$f.prototype.unmount=Jg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;eS(i.current,2,null,i,null,null),Cf(),a[En]=null}};function $f(i){this._internalRoot=i}$f.prototype.unstable_scheduleHydration=function(i){if(i){var a=Or();i={blockedOn:null,target:i,priority:a};for(var l=0;l<Fa.length&&a!==0&&a<Fa[l].priority;l++);Fa.splice(l,0,i),l===0&&sS(i)}};var uS=e.version;if(uS!=="19.1.0")throw Error(r(527,uS,"19.1.0"));W.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=d(a),i=i!==null?f(i):null,i=i===null?null:i.stateNode,i};var G6={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xf.isDisabled&&Xf.supportsFiber)try{de=Xf.inject(G6),ve=Xf}catch{}}return th.createRoot=function(i,a){if(!s(i))throw Error(r(299));var l=!1,h="",g=AT,E=xT,P=wT,G=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(P=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(G=a.unstable_transitionCallbacks)),a=Zv(i,1,!1,null,null,l,h,g,E,P,G,null),i[En]=a.current,Mg(i),new Jg(a)},th.hydrateRoot=function(i,a,l){if(!s(i))throw Error(r(299));var h=!1,g="",E=AT,P=xT,G=wT,J=null,he=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(E=l.onUncaughtError),l.onCaughtError!==void 0&&(P=l.onCaughtError),l.onRecoverableError!==void 0&&(G=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(J=l.unstable_transitionCallbacks),l.formState!==void 0&&(he=l.formState)),a=Zv(i,1,!0,a,l??null,h,g,E,P,G,J,he),a.context=Jv(null),l=a.current,h=di(),h=ii(h),g=xa(h),g.callback=null,wa(l,g,h),l=h,a.current.lanes=l,Dr(a,l),vs(a),i[En]=a.current,Mg(i),new $f(a)},th.version="19.1.0",th}var ES;function tO(){if(ES)return ny.exports;ES=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ny.exports=eO(),ny.exports}var nO=tO();function jr(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=jr(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var ay={exports:{}},oy={},uy={exports:{}},ly={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _S;function rO(){if(_S)return ly;_S=1;var t=Bs();function e(y,_){return y===_&&(y!==0||1/y===1/_)||y!==y&&_!==_}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,o=t.useLayoutEffect,u=t.useDebugValue;function c(y,_){var T=_(),I=r({inst:{value:T,getSnapshot:_}}),N=I[0].inst,k=I[1];return o(function(){N.value=T,N.getSnapshot=_,d(N)&&k({inst:N})},[y,T,_]),s(function(){return d(N)&&k({inst:N}),y(function(){d(N)&&k({inst:N})})},[y]),u(T),T}function d(y){var _=y.getSnapshot;y=y.value;try{var T=_();return!n(y,T)}catch{return!0}}function f(y,_){return _()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:c;return ly.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,ly}var bS;function iO(){return bS||(bS=1,uy.exports=rO()),uy.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TS;function sO(){if(TS)return oy;TS=1;var t=Bs(),e=iO();function n(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,o=t.useRef,u=t.useEffect,c=t.useMemo,d=t.useDebugValue;return oy.useSyncExternalStoreWithSelector=function(f,m,y,_,T){var I=o(null);if(I.current===null){var N={hasValue:!1,value:null};I.current=N}else N=I.current;I=c(function(){function x(B){if(!C){if(C=!0,L=B,B=_(B),T!==void 0&&N.hasValue){var S=N.value;if(T(S,B))return M=S}return M=B}if(S=M,r(L,B))return S;var A=_(B);return T!==void 0&&T(S,A)?(L=B,S):(L=B,M=A)}var C=!1,L,M,q=y===void 0?null:y;return[function(){return x(m())},q===null?void 0:function(){return x(q())}]},[m,y,_,T]);var k=s(f,I[0],I[1]);return u(function(){N.hasValue=!0,N.value=k},[k]),d(k),k},oy}var vS;function aO(){return vS||(vS=1,ay.exports=sO()),ay.exports}var oO=aO();const uO=bm(oO),lO={},SS=t=>{let e;const n=new Set,r=(m,y)=>{const _=typeof m=="function"?m(e):m;if(!Object.is(_,e)){const T=e;e=y??(typeof _!="object"||_===null)?_:Object.assign({},e,_),n.forEach(I=>I(e,T))}},s=()=>e,d={setState:r,getState:s,getInitialState:()=>f,subscribe:m=>(n.add(m),()=>n.delete(m)),destroy:()=>{(lO?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},f=e=t(r,s,d);return d},cO=t=>t?SS(t):SS,{useDebugValue:hO}=_e,{useSyncExternalStoreWithSelector:dO}=uO,fO=t=>t;function Lw(t,e=fO,n){const r=dO(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return hO(r),r}const AS=(t,e)=>{const n=cO(t),r=(s,o=e)=>Lw(n,s,o);return Object.assign(r,n),r},mO=(t,e)=>t?AS(t,e):AS;function Ir(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,s]of t)if(!Object.is(s,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var pO={value:()=>{}};function vm(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new b0(n)}function b0(t){this._=t}function gO(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}b0.prototype=vm.prototype={constructor:b0,on:function(t,e){var n=this._,r=gO(t+"",n),s,o=-1,u=r.length;if(arguments.length<2){for(;++o<u;)if((s=(t=r[o]).type)&&(s=yO(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<u;)if(s=(t=r[o]).type)n[s]=xS(n[s],t.name,e);else if(e==null)for(s in n)n[s]=xS(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new b0(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,o;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,s=o.length;r<s;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,o=r.length;s<o;++s)r[s].value.apply(e,n)}};function yO(t,e){for(var n=0,r=t.length,s;n<r;++n)if((s=t[n]).name===e)return s.value}function xS(t,e,n){for(var r=0,s=t.length;r<s;++r)if(t[r].name===e){t[r]=pO,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var iE="http://www.w3.org/1999/xhtml";const wS={svg:"http://www.w3.org/2000/svg",xhtml:iE,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Sm(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),wS.hasOwnProperty(e)?{space:wS[e],local:t}:t}function EO(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===iE&&e.documentElement.namespaceURI===iE?e.createElement(t):e.createElementNS(n,t)}}function _O(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Bw(t){var e=Sm(t);return(e.local?_O:EO)(e)}function bO(){}function h1(t){return t==null?bO:function(){return this.querySelector(t)}}function TO(t){typeof t!="function"&&(t=h1(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],u=o.length,c=r[s]=new Array(u),d,f,m=0;m<u;++m)(d=o[m])&&(f=t.call(d,d.__data__,m,o))&&("__data__"in d&&(f.__data__=d.__data__),c[m]=f);return new vi(r,this._parents)}function vO(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function SO(){return[]}function Uw(t){return t==null?SO:function(){return this.querySelectorAll(t)}}function AO(t){return function(){return vO(t.apply(this,arguments))}}function xO(t){typeof t=="function"?t=AO(t):t=Uw(t);for(var e=this._groups,n=e.length,r=[],s=[],o=0;o<n;++o)for(var u=e[o],c=u.length,d,f=0;f<c;++f)(d=u[f])&&(r.push(t.call(d,d.__data__,f,u)),s.push(d));return new vi(r,s)}function Vw(t){return function(){return this.matches(t)}}function Hw(t){return function(e){return e.matches(t)}}var wO=Array.prototype.find;function IO(t){return function(){return wO.call(this.children,t)}}function CO(){return this.firstElementChild}function NO(t){return this.select(t==null?CO:IO(typeof t=="function"?t:Hw(t)))}var RO=Array.prototype.filter;function DO(){return Array.from(this.children)}function OO(t){return function(){return RO.call(this.children,t)}}function kO(t){return this.selectAll(t==null?DO:OO(typeof t=="function"?t:Hw(t)))}function PO(t){typeof t!="function"&&(t=Vw(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],u=o.length,c=r[s]=[],d,f=0;f<u;++f)(d=o[f])&&t.call(d,d.__data__,f,o)&&c.push(d);return new vi(r,this._parents)}function zw(t){return new Array(t.length)}function MO(){return new vi(this._enter||this._groups.map(zw),this._parents)}function V0(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}V0.prototype={constructor:V0,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function LO(t){return function(){return t}}function BO(t,e,n,r,s,o){for(var u=0,c,d=e.length,f=o.length;u<f;++u)(c=e[u])?(c.__data__=o[u],r[u]=c):n[u]=new V0(t,o[u]);for(;u<d;++u)(c=e[u])&&(s[u]=c)}function UO(t,e,n,r,s,o,u){var c,d,f=new Map,m=e.length,y=o.length,_=new Array(m),T;for(c=0;c<m;++c)(d=e[c])&&(_[c]=T=u.call(d,d.__data__,c,e)+"",f.has(T)?s[c]=d:f.set(T,d));for(c=0;c<y;++c)T=u.call(t,o[c],c,o)+"",(d=f.get(T))?(r[c]=d,d.__data__=o[c],f.delete(T)):n[c]=new V0(t,o[c]);for(c=0;c<m;++c)(d=e[c])&&f.get(_[c])===d&&(s[c]=d)}function VO(t){return t.__data__}function HO(t,e){if(!arguments.length)return Array.from(this,VO);var n=e?UO:BO,r=this._parents,s=this._groups;typeof t!="function"&&(t=LO(t));for(var o=s.length,u=new Array(o),c=new Array(o),d=new Array(o),f=0;f<o;++f){var m=r[f],y=s[f],_=y.length,T=zO(t.call(m,m&&m.__data__,f,r)),I=T.length,N=c[f]=new Array(I),k=u[f]=new Array(I),x=d[f]=new Array(_);n(m,y,N,k,x,T,e);for(var C=0,L=0,M,q;C<I;++C)if(M=N[C]){for(C>=L&&(L=C+1);!(q=k[L])&&++L<I;);M._next=q||null}}return u=new vi(u,r),u._enter=c,u._exit=d,u}function zO(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function FO(){return new vi(this._exit||this._groups.map(zw),this._parents)}function jO(t,e,n){var r=this.enter(),s=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?o.remove():n(o),r&&s?r.merge(s).order():s}function qO(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,s=n.length,o=r.length,u=Math.min(s,o),c=new Array(s),d=0;d<u;++d)for(var f=n[d],m=r[d],y=f.length,_=c[d]=new Array(y),T,I=0;I<y;++I)(T=f[I]||m[I])&&(_[I]=T);for(;d<s;++d)c[d]=n[d];return new vi(c,this._parents)}function YO(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],s=r.length-1,o=r[s],u;--s>=0;)(u=r[s])&&(o&&u.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(u,o),o=u);return this}function GO(t){t||(t=$O);function e(y,_){return y&&_?t(y.__data__,_.__data__):!y-!_}for(var n=this._groups,r=n.length,s=new Array(r),o=0;o<r;++o){for(var u=n[o],c=u.length,d=s[o]=new Array(c),f,m=0;m<c;++m)(f=u[m])&&(d[m]=f);d.sort(e)}return new vi(s,this._parents).order()}function $O(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function XO(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function KO(){return Array.from(this)}function QO(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,o=r.length;s<o;++s){var u=r[s];if(u)return u}return null}function WO(){let t=0;for(const e of this)++t;return t}function ZO(){return!this.node()}function JO(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],o=0,u=s.length,c;o<u;++o)(c=s[o])&&t.call(c,c.__data__,o,s);return this}function e4(t){return function(){this.removeAttribute(t)}}function t4(t){return function(){this.removeAttributeNS(t.space,t.local)}}function n4(t,e){return function(){this.setAttribute(t,e)}}function r4(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function i4(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function s4(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function a4(t,e){var n=Sm(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?t4:e4:typeof e=="function"?n.local?s4:i4:n.local?r4:n4)(n,e))}function Fw(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function o4(t){return function(){this.style.removeProperty(t)}}function u4(t,e,n){return function(){this.style.setProperty(t,e,n)}}function l4(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function c4(t,e,n){return arguments.length>1?this.each((e==null?o4:typeof e=="function"?l4:u4)(t,e,n??"")):Ol(this.node(),t)}function Ol(t,e){return t.style.getPropertyValue(e)||Fw(t).getComputedStyle(t,null).getPropertyValue(e)}function h4(t){return function(){delete this[t]}}function d4(t,e){return function(){this[t]=e}}function f4(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function m4(t,e){return arguments.length>1?this.each((e==null?h4:typeof e=="function"?f4:d4)(t,e)):this.node()[t]}function jw(t){return t.trim().split(/^|\s+/)}function d1(t){return t.classList||new qw(t)}function qw(t){this._node=t,this._names=jw(t.getAttribute("class")||"")}qw.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Yw(t,e){for(var n=d1(t),r=-1,s=e.length;++r<s;)n.add(e[r])}function Gw(t,e){for(var n=d1(t),r=-1,s=e.length;++r<s;)n.remove(e[r])}function p4(t){return function(){Yw(this,t)}}function g4(t){return function(){Gw(this,t)}}function y4(t,e){return function(){(e.apply(this,arguments)?Yw:Gw)(this,t)}}function E4(t,e){var n=jw(t+"");if(arguments.length<2){for(var r=d1(this.node()),s=-1,o=n.length;++s<o;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?y4:e?p4:g4)(n,e))}function _4(){this.textContent=""}function b4(t){return function(){this.textContent=t}}function T4(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function v4(t){return arguments.length?this.each(t==null?_4:(typeof t=="function"?T4:b4)(t)):this.node().textContent}function S4(){this.innerHTML=""}function A4(t){return function(){this.innerHTML=t}}function x4(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function w4(t){return arguments.length?this.each(t==null?S4:(typeof t=="function"?x4:A4)(t)):this.node().innerHTML}function I4(){this.nextSibling&&this.parentNode.appendChild(this)}function C4(){return this.each(I4)}function N4(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function R4(){return this.each(N4)}function D4(t){var e=typeof t=="function"?t:Bw(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function O4(){return null}function k4(t,e){var n=typeof t=="function"?t:Bw(t),r=e==null?O4:typeof e=="function"?e:h1(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function P4(){var t=this.parentNode;t&&t.removeChild(this)}function M4(){return this.each(P4)}function L4(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function B4(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function U4(t){return this.select(t?B4:L4)}function V4(t){return arguments.length?this.property("__data__",t):this.node().__data__}function H4(t){return function(e){t.call(this,e,this.__data__)}}function z4(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function F4(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,s=e.length,o;n<s;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function j4(t,e,n){return function(){var r=this.__on,s,o=H4(e);if(r){for(var u=0,c=r.length;u<c;++u)if((s=r[u]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=n),s.value=e;return}}this.addEventListener(t.type,o,n),s={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(s):this.__on=[s]}}function q4(t,e,n){var r=z4(t+""),s,o=r.length,u;if(arguments.length<2){var c=this.node().__on;if(c){for(var d=0,f=c.length,m;d<f;++d)for(s=0,m=c[d];s<o;++s)if((u=r[s]).type===m.type&&u.name===m.name)return m.value}return}for(c=e?j4:F4,s=0;s<o;++s)this.each(c(r[s],e,n));return this}function $w(t,e,n){var r=Fw(t),s=r.CustomEvent;typeof s=="function"?s=new s(e,n):(s=r.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function Y4(t,e){return function(){return $w(this,t,e)}}function G4(t,e){return function(){return $w(this,t,e.apply(this,arguments))}}function $4(t,e){return this.each((typeof e=="function"?G4:Y4)(t,e))}function*X4(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,o=r.length,u;s<o;++s)(u=r[s])&&(yield u)}var Xw=[null];function vi(t,e){this._groups=t,this._parents=e}function dd(){return new vi([[document.documentElement]],Xw)}function K4(){return this}vi.prototype=dd.prototype={constructor:vi,select:TO,selectAll:xO,selectChild:NO,selectChildren:kO,filter:PO,data:HO,enter:MO,exit:FO,join:jO,merge:qO,selection:K4,order:YO,sort:GO,call:XO,nodes:KO,node:QO,size:WO,empty:ZO,each:JO,attr:a4,style:c4,property:m4,classed:E4,text:v4,html:w4,raise:C4,lower:R4,append:D4,insert:k4,remove:M4,clone:U4,datum:V4,on:q4,dispatch:$4,[Symbol.iterator]:X4};function es(t){return typeof t=="string"?new vi([[document.querySelector(t)]],[document.documentElement]):new vi([[t]],Xw)}function Q4(t){let e;for(;e=t.sourceEvent;)t=e;return t}function xs(t,e){if(t=Q4(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const W4={passive:!1},Yh={capture:!0,passive:!1};function cy(t){t.stopImmediatePropagation()}function bl(t){t.preventDefault(),t.stopImmediatePropagation()}function Kw(t){var e=t.document.documentElement,n=es(t).on("dragstart.drag",bl,Yh);"onselectstart"in e?n.on("selectstart.drag",bl,Yh):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Qw(t,e){var n=t.document.documentElement,r=es(t).on("dragstart.drag",null);e&&(r.on("click.drag",bl,Yh),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Kf=t=>()=>t;function sE(t,{sourceEvent:e,subject:n,target:r,identifier:s,active:o,x:u,y:c,dx:d,dy:f,dispatch:m}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:m}})}sE.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Z4(t){return!t.ctrlKey&&!t.button}function J4(){return this.parentNode}function ek(t,e){return e??{x:t.x,y:t.y}}function tk(){return navigator.maxTouchPoints||"ontouchstart"in this}function nk(){var t=Z4,e=J4,n=ek,r=tk,s={},o=vm("start","drag","end"),u=0,c,d,f,m,y=0;function _(M){M.on("mousedown.drag",T).filter(r).on("touchstart.drag",k).on("touchmove.drag",x,W4).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function T(M,q){if(!(m||!t.call(this,M,q))){var B=L(this,e.call(this,M,q),M,q,"mouse");B&&(es(M.view).on("mousemove.drag",I,Yh).on("mouseup.drag",N,Yh),Kw(M.view),cy(M),f=!1,c=M.clientX,d=M.clientY,B("start",M))}}function I(M){if(bl(M),!f){var q=M.clientX-c,B=M.clientY-d;f=q*q+B*B>y}s.mouse("drag",M)}function N(M){es(M.view).on("mousemove.drag mouseup.drag",null),Qw(M.view,f),bl(M),s.mouse("end",M)}function k(M,q){if(t.call(this,M,q)){var B=M.changedTouches,S=e.call(this,M,q),A=B.length,D,V;for(D=0;D<A;++D)(V=L(this,S,M,q,B[D].identifier,B[D]))&&(cy(M),V("start",M,B[D]))}}function x(M){var q=M.changedTouches,B=q.length,S,A;for(S=0;S<B;++S)(A=s[q[S].identifier])&&(bl(M),A("drag",M,q[S]))}function C(M){var q=M.changedTouches,B=q.length,S,A;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),S=0;S<B;++S)(A=s[q[S].identifier])&&(cy(M),A("end",M,q[S]))}function L(M,q,B,S,A,D){var V=o.copy(),H=xs(D||B,q),z,O,U;if((U=n.call(M,new sE("beforestart",{sourceEvent:B,target:_,identifier:A,active:u,x:H[0],y:H[1],dx:0,dy:0,dispatch:V}),S))!=null)return z=U.x-H[0]||0,O=U.y-H[1]||0,function X(Y,W,se){var re=H,w;switch(Y){case"start":s[A]=X,w=u++;break;case"end":delete s[A],--u;case"drag":H=xs(se||W,q),w=u;break}V.call(Y,M,new sE(Y,{sourceEvent:W,subject:U,target:_,identifier:A,active:w,x:H[0]+z,y:H[1]+O,dx:H[0]-re[0],dy:H[1]-re[1],dispatch:V}),S)}}return _.filter=function(M){return arguments.length?(t=typeof M=="function"?M:Kf(!!M),_):t},_.container=function(M){return arguments.length?(e=typeof M=="function"?M:Kf(M),_):e},_.subject=function(M){return arguments.length?(n=typeof M=="function"?M:Kf(M),_):n},_.touchable=function(M){return arguments.length?(r=typeof M=="function"?M:Kf(!!M),_):r},_.on=function(){var M=o.on.apply(o,arguments);return M===o?_:M},_.clickDistance=function(M){return arguments.length?(y=(M=+M)*M,_):Math.sqrt(y)},_}function f1(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ww(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function fd(){}var Gh=.7,H0=1/Gh,Tl="\\s*([+-]?\\d+)\\s*",$h="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ns="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rk=/^#([0-9a-f]{3,8})$/,ik=new RegExp(`^rgb\\(${Tl},${Tl},${Tl}\\)$`),sk=new RegExp(`^rgb\\(${Ns},${Ns},${Ns}\\)$`),ak=new RegExp(`^rgba\\(${Tl},${Tl},${Tl},${$h}\\)$`),ok=new RegExp(`^rgba\\(${Ns},${Ns},${Ns},${$h}\\)$`),uk=new RegExp(`^hsl\\(${$h},${Ns},${Ns}\\)$`),lk=new RegExp(`^hsla\\(${$h},${Ns},${Ns},${$h}\\)$`),IS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};f1(fd,Xh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:CS,formatHex:CS,formatHex8:ck,formatHsl:hk,formatRgb:NS,toString:NS});function CS(){return this.rgb().formatHex()}function ck(){return this.rgb().formatHex8()}function hk(){return Zw(this).formatHsl()}function NS(){return this.rgb().formatRgb()}function Xh(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=rk.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?RS(e):n===3?new ei(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Qf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Qf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ik.exec(t))?new ei(e[1],e[2],e[3],1):(e=sk.exec(t))?new ei(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ak.exec(t))?Qf(e[1],e[2],e[3],e[4]):(e=ok.exec(t))?Qf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=uk.exec(t))?kS(e[1],e[2]/100,e[3]/100,1):(e=lk.exec(t))?kS(e[1],e[2]/100,e[3]/100,e[4]):IS.hasOwnProperty(t)?RS(IS[t]):t==="transparent"?new ei(NaN,NaN,NaN,0):null}function RS(t){return new ei(t>>16&255,t>>8&255,t&255,1)}function Qf(t,e,n,r){return r<=0&&(t=e=n=NaN),new ei(t,e,n,r)}function dk(t){return t instanceof fd||(t=Xh(t)),t?(t=t.rgb(),new ei(t.r,t.g,t.b,t.opacity)):new ei}function aE(t,e,n,r){return arguments.length===1?dk(t):new ei(t,e,n,r??1)}function ei(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}f1(ei,aE,Ww(fd,{brighter(t){return t=t==null?H0:Math.pow(H0,t),new ei(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Gh:Math.pow(Gh,t),new ei(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ei(su(this.r),su(this.g),su(this.b),z0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:DS,formatHex:DS,formatHex8:fk,formatRgb:OS,toString:OS}));function DS(){return`#${tu(this.r)}${tu(this.g)}${tu(this.b)}`}function fk(){return`#${tu(this.r)}${tu(this.g)}${tu(this.b)}${tu((isNaN(this.opacity)?1:this.opacity)*255)}`}function OS(){const t=z0(this.opacity);return`${t===1?"rgb(":"rgba("}${su(this.r)}, ${su(this.g)}, ${su(this.b)}${t===1?")":`, ${t})`}`}function z0(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function su(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function tu(t){return t=su(t),(t<16?"0":"")+t.toString(16)}function kS(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ts(t,e,n,r)}function Zw(t){if(t instanceof ts)return new ts(t.h,t.s,t.l,t.opacity);if(t instanceof fd||(t=Xh(t)),!t)return new ts;if(t instanceof ts)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),o=Math.max(e,n,r),u=NaN,c=o-s,d=(o+s)/2;return c?(e===o?u=(n-r)/c+(n<r)*6:n===o?u=(r-e)/c+2:u=(e-n)/c+4,c/=d<.5?o+s:2-o-s,u*=60):c=d>0&&d<1?0:u,new ts(u,c,d,t.opacity)}function mk(t,e,n,r){return arguments.length===1?Zw(t):new ts(t,e,n,r??1)}function ts(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}f1(ts,mk,Ww(fd,{brighter(t){return t=t==null?H0:Math.pow(H0,t),new ts(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Gh:Math.pow(Gh,t),new ts(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new ei(hy(t>=240?t-240:t+120,s,r),hy(t,s,r),hy(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new ts(PS(this.h),Wf(this.s),Wf(this.l),z0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=z0(this.opacity);return`${t===1?"hsl(":"hsla("}${PS(this.h)}, ${Wf(this.s)*100}%, ${Wf(this.l)*100}%${t===1?")":`, ${t})`}`}}));function PS(t){return t=(t||0)%360,t<0?t+360:t}function Wf(t){return Math.max(0,Math.min(1,t||0))}function hy(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Jw=t=>()=>t;function pk(t,e){return function(n){return t+n*e}}function gk(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function yk(t){return(t=+t)==1?eI:function(e,n){return n-e?gk(e,n,t):Jw(isNaN(e)?n:e)}}function eI(t,e){var n=e-t;return n?pk(t,n):Jw(isNaN(t)?e:t)}const MS=function t(e){var n=yk(e);function r(s,o){var u=n((s=aE(s)).r,(o=aE(o)).r),c=n(s.g,o.g),d=n(s.b,o.b),f=eI(s.opacity,o.opacity);return function(m){return s.r=u(m),s.g=c(m),s.b=d(m),s.opacity=f(m),s+""}}return r.gamma=t,r}(1);function Wa(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var oE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dy=new RegExp(oE.source,"g");function Ek(t){return function(){return t}}function _k(t){return function(e){return t(e)+""}}function bk(t,e){var n=oE.lastIndex=dy.lastIndex=0,r,s,o,u=-1,c=[],d=[];for(t=t+"",e=e+"";(r=oE.exec(t))&&(s=dy.exec(e));)(o=s.index)>n&&(o=e.slice(n,o),c[u]?c[u]+=o:c[++u]=o),(r=r[0])===(s=s[0])?c[u]?c[u]+=s:c[++u]=s:(c[++u]=null,d.push({i:u,x:Wa(r,s)})),n=dy.lastIndex;return n<e.length&&(o=e.slice(n),c[u]?c[u]+=o:c[++u]=o),c.length<2?d[0]?_k(d[0].x):Ek(e):(e=d.length,function(f){for(var m=0,y;m<e;++m)c[(y=d[m]).i]=y.x(f);return c.join("")})}var LS=180/Math.PI,uE={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function tI(t,e,n,r,s,o){var u,c,d;return(u=Math.sqrt(t*t+e*e))&&(t/=u,e/=u),(d=t*n+e*r)&&(n-=t*d,r-=e*d),(c=Math.sqrt(n*n+r*r))&&(n/=c,r/=c,d/=c),t*r<e*n&&(t=-t,e=-e,d=-d,u=-u),{translateX:s,translateY:o,rotate:Math.atan2(e,t)*LS,skewX:Math.atan(d)*LS,scaleX:u,scaleY:c}}var Zf;function Tk(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?uE:tI(e.a,e.b,e.c,e.d,e.e,e.f)}function vk(t){return t==null||(Zf||(Zf=document.createElementNS("http://www.w3.org/2000/svg","g")),Zf.setAttribute("transform",t),!(t=Zf.transform.baseVal.consolidate()))?uE:(t=t.matrix,tI(t.a,t.b,t.c,t.d,t.e,t.f))}function nI(t,e,n,r){function s(f){return f.length?f.pop()+" ":""}function o(f,m,y,_,T,I){if(f!==y||m!==_){var N=T.push("translate(",null,e,null,n);I.push({i:N-4,x:Wa(f,y)},{i:N-2,x:Wa(m,_)})}else(y||_)&&T.push("translate("+y+e+_+n)}function u(f,m,y,_){f!==m?(f-m>180?m+=360:m-f>180&&(f+=360),_.push({i:y.push(s(y)+"rotate(",null,r)-2,x:Wa(f,m)})):m&&y.push(s(y)+"rotate("+m+r)}function c(f,m,y,_){f!==m?_.push({i:y.push(s(y)+"skewX(",null,r)-2,x:Wa(f,m)}):m&&y.push(s(y)+"skewX("+m+r)}function d(f,m,y,_,T,I){if(f!==y||m!==_){var N=T.push(s(T)+"scale(",null,",",null,")");I.push({i:N-4,x:Wa(f,y)},{i:N-2,x:Wa(m,_)})}else(y!==1||_!==1)&&T.push(s(T)+"scale("+y+","+_+")")}return function(f,m){var y=[],_=[];return f=t(f),m=t(m),o(f.translateX,f.translateY,m.translateX,m.translateY,y,_),u(f.rotate,m.rotate,y,_),c(f.skewX,m.skewX,y,_),d(f.scaleX,f.scaleY,m.scaleX,m.scaleY,y,_),f=m=null,function(T){for(var I=-1,N=_.length,k;++I<N;)y[(k=_[I]).i]=k.x(T);return y.join("")}}}var Sk=nI(Tk,"px, ","px)","deg)"),Ak=nI(vk,", ",")",")"),xk=1e-12;function BS(t){return((t=Math.exp(t))+1/t)/2}function wk(t){return((t=Math.exp(t))-1/t)/2}function Ik(t){return((t=Math.exp(2*t))-1)/(t+1)}const Ck=function t(e,n,r){function s(o,u){var c=o[0],d=o[1],f=o[2],m=u[0],y=u[1],_=u[2],T=m-c,I=y-d,N=T*T+I*I,k,x;if(N<xk)x=Math.log(_/f)/e,k=function(S){return[c+S*T,d+S*I,f*Math.exp(e*S*x)]};else{var C=Math.sqrt(N),L=(_*_-f*f+r*N)/(2*f*n*C),M=(_*_-f*f-r*N)/(2*_*n*C),q=Math.log(Math.sqrt(L*L+1)-L),B=Math.log(Math.sqrt(M*M+1)-M);x=(B-q)/e,k=function(S){var A=S*x,D=BS(q),V=f/(n*C)*(D*Ik(e*A+q)-wk(q));return[c+V*T,d+V*I,f*D/BS(e*A+q)]}}return k.duration=x*1e3*e/Math.SQRT2,k}return s.rho=function(o){var u=Math.max(.001,+o),c=u*u,d=c*c;return t(u,c,d)},s}(Math.SQRT2,2,4);var kl=0,bh=0,nh=0,rI=1e3,F0,Th,j0=0,ou=0,Am=0,Kh=typeof performance=="object"&&performance.now?performance:Date,iI=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function m1(){return ou||(iI(Nk),ou=Kh.now()+Am)}function Nk(){ou=0}function q0(){this._call=this._time=this._next=null}q0.prototype=sI.prototype={constructor:q0,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?m1():+n)+(e==null?0:+e),!this._next&&Th!==this&&(Th?Th._next=this:F0=this,Th=this),this._call=t,this._time=n,lE()},stop:function(){this._call&&(this._call=null,this._time=1/0,lE())}};function sI(t,e,n){var r=new q0;return r.restart(t,e,n),r}function Rk(){m1(),++kl;for(var t=F0,e;t;)(e=ou-t._time)>=0&&t._call.call(void 0,e),t=t._next;--kl}function US(){ou=(j0=Kh.now())+Am,kl=bh=0;try{Rk()}finally{kl=0,Ok(),ou=0}}function Dk(){var t=Kh.now(),e=t-j0;e>rI&&(Am-=e,j0=t)}function Ok(){for(var t,e=F0,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:F0=n);Th=t,lE(r)}function lE(t){if(!kl){bh&&(bh=clearTimeout(bh));var e=t-ou;e>24?(t<1/0&&(bh=setTimeout(US,t-Kh.now()-Am)),nh&&(nh=clearInterval(nh))):(nh||(j0=Kh.now(),nh=setInterval(Dk,rI)),kl=1,iI(US))}}function VS(t,e,n){var r=new q0;return e=e==null?0:+e,r.restart(s=>{r.stop(),t(s+e)},e,n),r}var kk=vm("start","end","cancel","interrupt"),Pk=[],aI=0,HS=1,cE=2,T0=3,zS=4,hE=5,v0=6;function xm(t,e,n,r,s,o){var u=t.__transition;if(!u)t.__transition={};else if(n in u)return;Mk(t,n,{name:e,index:r,group:s,on:kk,tween:Pk,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:aI})}function p1(t,e){var n=as(t,e);if(n.state>aI)throw new Error("too late; already scheduled");return n}function Us(t,e){var n=as(t,e);if(n.state>T0)throw new Error("too late; already running");return n}function as(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Mk(t,e,n){var r=t.__transition,s;r[e]=n,n.timer=sI(o,0,n.time);function o(f){n.state=HS,n.timer.restart(u,n.delay,n.time),n.delay<=f&&u(f-n.delay)}function u(f){var m,y,_,T;if(n.state!==HS)return d();for(m in r)if(T=r[m],T.name===n.name){if(T.state===T0)return VS(u);T.state===zS?(T.state=v0,T.timer.stop(),T.on.call("interrupt",t,t.__data__,T.index,T.group),delete r[m]):+m<e&&(T.state=v0,T.timer.stop(),T.on.call("cancel",t,t.__data__,T.index,T.group),delete r[m])}if(VS(function(){n.state===T0&&(n.state=zS,n.timer.restart(c,n.delay,n.time),c(f))}),n.state=cE,n.on.call("start",t,t.__data__,n.index,n.group),n.state===cE){for(n.state=T0,s=new Array(_=n.tween.length),m=0,y=-1;m<_;++m)(T=n.tween[m].value.call(t,t.__data__,n.index,n.group))&&(s[++y]=T);s.length=y+1}}function c(f){for(var m=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(d),n.state=hE,1),y=-1,_=s.length;++y<_;)s[y].call(t,m);n.state===hE&&(n.on.call("end",t,t.__data__,n.index,n.group),d())}function d(){n.state=v0,n.timer.stop(),delete r[e];for(var f in r)return;delete t.__transition}}function S0(t,e){var n=t.__transition,r,s,o=!0,u;if(n){e=e==null?null:e+"";for(u in n){if((r=n[u]).name!==e){o=!1;continue}s=r.state>cE&&r.state<hE,r.state=v0,r.timer.stop(),r.on.call(s?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[u]}o&&delete t.__transition}}function Lk(t){return this.each(function(){S0(this,t)})}function Bk(t,e){var n,r;return function(){var s=Us(this,t),o=s.tween;if(o!==n){r=n=o;for(var u=0,c=r.length;u<c;++u)if(r[u].name===e){r=r.slice(),r.splice(u,1);break}}s.tween=r}}function Uk(t,e,n){var r,s;if(typeof n!="function")throw new Error;return function(){var o=Us(this,t),u=o.tween;if(u!==r){s=(r=u).slice();for(var c={name:e,value:n},d=0,f=s.length;d<f;++d)if(s[d].name===e){s[d]=c;break}d===f&&s.push(c)}o.tween=s}}function Vk(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=as(this.node(),n).tween,s=0,o=r.length,u;s<o;++s)if((u=r[s]).name===t)return u.value;return null}return this.each((e==null?Bk:Uk)(n,t,e))}function g1(t,e,n){var r=t._id;return t.each(function(){var s=Us(this,r);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return as(s,r).value[e]}}function oI(t,e){var n;return(typeof e=="number"?Wa:e instanceof Xh?MS:(n=Xh(e))?(e=n,MS):bk)(t,e)}function Hk(t){return function(){this.removeAttribute(t)}}function zk(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Fk(t,e,n){var r,s=n+"",o;return function(){var u=this.getAttribute(t);return u===s?null:u===r?o:o=e(r=u,n)}}function jk(t,e,n){var r,s=n+"",o;return function(){var u=this.getAttributeNS(t.space,t.local);return u===s?null:u===r?o:o=e(r=u,n)}}function qk(t,e,n){var r,s,o;return function(){var u,c=n(this),d;return c==null?void this.removeAttribute(t):(u=this.getAttribute(t),d=c+"",u===d?null:u===r&&d===s?o:(s=d,o=e(r=u,c)))}}function Yk(t,e,n){var r,s,o;return function(){var u,c=n(this),d;return c==null?void this.removeAttributeNS(t.space,t.local):(u=this.getAttributeNS(t.space,t.local),d=c+"",u===d?null:u===r&&d===s?o:(s=d,o=e(r=u,c)))}}function Gk(t,e){var n=Sm(t),r=n==="transform"?Ak:oI;return this.attrTween(t,typeof e=="function"?(n.local?Yk:qk)(n,r,g1(this,"attr."+t,e)):e==null?(n.local?zk:Hk)(n):(n.local?jk:Fk)(n,r,e))}function $k(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Xk(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Kk(t,e){var n,r;function s(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Xk(t,o)),n}return s._value=e,s}function Qk(t,e){var n,r;function s(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&$k(t,o)),n}return s._value=e,s}function Wk(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Sm(t);return this.tween(n,(r.local?Kk:Qk)(r,e))}function Zk(t,e){return function(){p1(this,t).delay=+e.apply(this,arguments)}}function Jk(t,e){return e=+e,function(){p1(this,t).delay=e}}function eP(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Zk:Jk)(e,t)):as(this.node(),e).delay}function tP(t,e){return function(){Us(this,t).duration=+e.apply(this,arguments)}}function nP(t,e){return e=+e,function(){Us(this,t).duration=e}}function rP(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?tP:nP)(e,t)):as(this.node(),e).duration}function iP(t,e){if(typeof e!="function")throw new Error;return function(){Us(this,t).ease=e}}function sP(t){var e=this._id;return arguments.length?this.each(iP(e,t)):as(this.node(),e).ease}function aP(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Us(this,t).ease=n}}function oP(t){if(typeof t!="function")throw new Error;return this.each(aP(this._id,t))}function uP(t){typeof t!="function"&&(t=Vw(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],u=o.length,c=r[s]=[],d,f=0;f<u;++f)(d=o[f])&&t.call(d,d.__data__,f,o)&&c.push(d);return new ma(r,this._parents,this._name,this._id)}function lP(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,s=n.length,o=Math.min(r,s),u=new Array(r),c=0;c<o;++c)for(var d=e[c],f=n[c],m=d.length,y=u[c]=new Array(m),_,T=0;T<m;++T)(_=d[T]||f[T])&&(y[T]=_);for(;c<r;++c)u[c]=e[c];return new ma(u,this._parents,this._name,this._id)}function cP(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function hP(t,e,n){var r,s,o=cP(e)?p1:Us;return function(){var u=o(this,t),c=u.on;c!==r&&(s=(r=c).copy()).on(e,n),u.on=s}}function dP(t,e){var n=this._id;return arguments.length<2?as(this.node(),n).on.on(t):this.each(hP(n,t,e))}function fP(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function mP(){return this.on("end.remove",fP(this._id))}function pP(t){var e=this._name,n=this._id;typeof t!="function"&&(t=h1(t));for(var r=this._groups,s=r.length,o=new Array(s),u=0;u<s;++u)for(var c=r[u],d=c.length,f=o[u]=new Array(d),m,y,_=0;_<d;++_)(m=c[_])&&(y=t.call(m,m.__data__,_,c))&&("__data__"in m&&(y.__data__=m.__data__),f[_]=y,xm(f[_],e,n,_,f,as(m,n)));return new ma(o,this._parents,e,n)}function gP(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Uw(t));for(var r=this._groups,s=r.length,o=[],u=[],c=0;c<s;++c)for(var d=r[c],f=d.length,m,y=0;y<f;++y)if(m=d[y]){for(var _=t.call(m,m.__data__,y,d),T,I=as(m,n),N=0,k=_.length;N<k;++N)(T=_[N])&&xm(T,e,n,N,_,I);o.push(_),u.push(m)}return new ma(o,u,e,n)}var yP=dd.prototype.constructor;function EP(){return new yP(this._groups,this._parents)}function _P(t,e){var n,r,s;return function(){var o=Ol(this,t),u=(this.style.removeProperty(t),Ol(this,t));return o===u?null:o===n&&u===r?s:s=e(n=o,r=u)}}function uI(t){return function(){this.style.removeProperty(t)}}function bP(t,e,n){var r,s=n+"",o;return function(){var u=Ol(this,t);return u===s?null:u===r?o:o=e(r=u,n)}}function TP(t,e,n){var r,s,o;return function(){var u=Ol(this,t),c=n(this),d=c+"";return c==null&&(d=c=(this.style.removeProperty(t),Ol(this,t))),u===d?null:u===r&&d===s?o:(s=d,o=e(r=u,c))}}function vP(t,e){var n,r,s,o="style."+e,u="end."+o,c;return function(){var d=Us(this,t),f=d.on,m=d.value[o]==null?c||(c=uI(e)):void 0;(f!==n||s!==m)&&(r=(n=f).copy()).on(u,s=m),d.on=r}}function SP(t,e,n){var r=(t+="")=="transform"?Sk:oI;return e==null?this.styleTween(t,_P(t,r)).on("end.style."+t,uI(t)):typeof e=="function"?this.styleTween(t,TP(t,r,g1(this,"style."+t,e))).each(vP(this._id,t)):this.styleTween(t,bP(t,r,e),n).on("end.style."+t,null)}function AP(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function xP(t,e,n){var r,s;function o(){var u=e.apply(this,arguments);return u!==s&&(r=(s=u)&&AP(t,u,n)),r}return o._value=e,o}function wP(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,xP(t,e,n??""))}function IP(t){return function(){this.textContent=t}}function CP(t){return function(){var e=t(this);this.textContent=e??""}}function NP(t){return this.tween("text",typeof t=="function"?CP(g1(this,"text",t)):IP(t==null?"":t+""))}function RP(t){return function(e){this.textContent=t.call(this,e)}}function DP(t){var e,n;function r(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&RP(s)),e}return r._value=t,r}function OP(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,DP(t))}function kP(){for(var t=this._name,e=this._id,n=lI(),r=this._groups,s=r.length,o=0;o<s;++o)for(var u=r[o],c=u.length,d,f=0;f<c;++f)if(d=u[f]){var m=as(d,e);xm(d,t,n,f,u,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new ma(r,this._parents,t,n)}function PP(){var t,e,n=this,r=n._id,s=n.size();return new Promise(function(o,u){var c={value:u},d={value:function(){--s===0&&o()}};n.each(function(){var f=Us(this,r),m=f.on;m!==t&&(e=(t=m).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(d)),f.on=e}),s===0&&o()})}var MP=0;function ma(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function lI(){return++MP}var ua=dd.prototype;ma.prototype={constructor:ma,select:pP,selectAll:gP,selectChild:ua.selectChild,selectChildren:ua.selectChildren,filter:uP,merge:lP,selection:EP,transition:kP,call:ua.call,nodes:ua.nodes,node:ua.node,size:ua.size,empty:ua.empty,each:ua.each,on:dP,attr:Gk,attrTween:Wk,style:SP,styleTween:wP,text:NP,textTween:OP,remove:mP,tween:Vk,delay:eP,duration:rP,ease:sP,easeVarying:oP,end:PP,[Symbol.iterator]:ua[Symbol.iterator]};function LP(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var BP={time:null,delay:0,duration:250,ease:LP};function UP(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function VP(t){var e,n;t instanceof ma?(e=t._id,t=t._name):(e=lI(),(n=BP).time=m1(),t=t==null?null:t+"");for(var r=this._groups,s=r.length,o=0;o<s;++o)for(var u=r[o],c=u.length,d,f=0;f<c;++f)(d=u[f])&&xm(d,t,e,f,u,n||UP(d,e));return new ma(r,this._parents,t,e)}dd.prototype.interrupt=Lk;dd.prototype.transition=VP;const Jf=t=>()=>t;function HP(t,{sourceEvent:e,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function ca(t,e,n){this.k=t,this.x=e,this.y=n}ca.prototype={constructor:ca,scale:function(t){return t===1?this:new ca(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ca(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var oo=new ca(1,0,0);ca.prototype;function fy(t){t.stopImmediatePropagation()}function rh(t){t.preventDefault(),t.stopImmediatePropagation()}function zP(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function FP(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function FS(){return this.__zoom||oo}function jP(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function qP(){return navigator.maxTouchPoints||"ontouchstart"in this}function YP(t,e,n){var r=t.invertX(e[0][0])-n[0][0],s=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],u=t.invertY(e[1][1])-n[1][1];return t.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),u>o?(o+u)/2:Math.min(0,o)||Math.max(0,u))}function GP(){var t=zP,e=FP,n=YP,r=jP,s=qP,o=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,d=Ck,f=vm("start","zoom","end"),m,y,_,T=500,I=150,N=0,k=10;function x(U){U.property("__zoom",FS).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",V).filter(s).on("touchstart.zoom",H).on("touchmove.zoom",z).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(U,X,Y,W){var se=U.selection?U.selection():U;se.property("__zoom",FS),U!==se?q(U,X,Y,W):se.interrupt().each(function(){B(this,arguments).event(W).start().zoom(null,typeof X=="function"?X.apply(this,arguments):X).end()})},x.scaleBy=function(U,X,Y,W){x.scaleTo(U,function(){var se=this.__zoom.k,re=typeof X=="function"?X.apply(this,arguments):X;return se*re},Y,W)},x.scaleTo=function(U,X,Y,W){x.transform(U,function(){var se=e.apply(this,arguments),re=this.__zoom,w=Y==null?M(se):typeof Y=="function"?Y.apply(this,arguments):Y,ee=re.invert(w),ae=typeof X=="function"?X.apply(this,arguments):X;return n(L(C(re,ae),w,ee),se,u)},Y,W)},x.translateBy=function(U,X,Y,W){x.transform(U,function(){return n(this.__zoom.translate(typeof X=="function"?X.apply(this,arguments):X,typeof Y=="function"?Y.apply(this,arguments):Y),e.apply(this,arguments),u)},null,W)},x.translateTo=function(U,X,Y,W,se){x.transform(U,function(){var re=e.apply(this,arguments),w=this.__zoom,ee=W==null?M(re):typeof W=="function"?W.apply(this,arguments):W;return n(oo.translate(ee[0],ee[1]).scale(w.k).translate(typeof X=="function"?-X.apply(this,arguments):-X,typeof Y=="function"?-Y.apply(this,arguments):-Y),re,u)},W,se)};function C(U,X){return X=Math.max(o[0],Math.min(o[1],X)),X===U.k?U:new ca(X,U.x,U.y)}function L(U,X,Y){var W=X[0]-Y[0]*U.k,se=X[1]-Y[1]*U.k;return W===U.x&&se===U.y?U:new ca(U.k,W,se)}function M(U){return[(+U[0][0]+ +U[1][0])/2,(+U[0][1]+ +U[1][1])/2]}function q(U,X,Y,W){U.on("start.zoom",function(){B(this,arguments).event(W).start()}).on("interrupt.zoom end.zoom",function(){B(this,arguments).event(W).end()}).tween("zoom",function(){var se=this,re=arguments,w=B(se,re).event(W),ee=e.apply(se,re),ae=Y==null?M(ee):typeof Y=="function"?Y.apply(se,re):Y,j=Math.max(ee[1][0]-ee[0][0],ee[1][1]-ee[0][1]),ge=se.__zoom,Ce=typeof X=="function"?X.apply(se,re):X,Te=d(ge.invert(ae).concat(j/ge.k),Ce.invert(ae).concat(j/Ce.k));return function(Ve){if(Ve===1)Ve=Ce;else{var Ie=Te(Ve),Me=j/Ie[2];Ve=new ca(Me,ae[0]-Ie[0]*Me,ae[1]-Ie[1]*Me)}w.zoom(null,Ve)}})}function B(U,X,Y){return!Y&&U.__zooming||new S(U,X)}function S(U,X){this.that=U,this.args=X,this.active=0,this.sourceEvent=null,this.extent=e.apply(U,X),this.taps=0}S.prototype={event:function(U){return U&&(this.sourceEvent=U),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(U,X){return this.mouse&&U!=="mouse"&&(this.mouse[1]=X.invert(this.mouse[0])),this.touch0&&U!=="touch"&&(this.touch0[1]=X.invert(this.touch0[0])),this.touch1&&U!=="touch"&&(this.touch1[1]=X.invert(this.touch1[0])),this.that.__zoom=X,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(U){var X=es(this.that).datum();f.call(U,this.that,new HP(U,{sourceEvent:this.sourceEvent,target:x,transform:this.that.__zoom,dispatch:f}),X)}};function A(U,...X){if(!t.apply(this,arguments))return;var Y=B(this,X).event(U),W=this.__zoom,se=Math.max(o[0],Math.min(o[1],W.k*Math.pow(2,r.apply(this,arguments)))),re=xs(U);if(Y.wheel)(Y.mouse[0][0]!==re[0]||Y.mouse[0][1]!==re[1])&&(Y.mouse[1]=W.invert(Y.mouse[0]=re)),clearTimeout(Y.wheel);else{if(W.k===se)return;Y.mouse=[re,W.invert(re)],S0(this),Y.start()}rh(U),Y.wheel=setTimeout(w,I),Y.zoom("mouse",n(L(C(W,se),Y.mouse[0],Y.mouse[1]),Y.extent,u));function w(){Y.wheel=null,Y.end()}}function D(U,...X){if(_||!t.apply(this,arguments))return;var Y=U.currentTarget,W=B(this,X,!0).event(U),se=es(U.view).on("mousemove.zoom",ae,!0).on("mouseup.zoom",j,!0),re=xs(U,Y),w=U.clientX,ee=U.clientY;Kw(U.view),fy(U),W.mouse=[re,this.__zoom.invert(re)],S0(this),W.start();function ae(ge){if(rh(ge),!W.moved){var Ce=ge.clientX-w,Te=ge.clientY-ee;W.moved=Ce*Ce+Te*Te>N}W.event(ge).zoom("mouse",n(L(W.that.__zoom,W.mouse[0]=xs(ge,Y),W.mouse[1]),W.extent,u))}function j(ge){se.on("mousemove.zoom mouseup.zoom",null),Qw(ge.view,W.moved),rh(ge),W.event(ge).end()}}function V(U,...X){if(t.apply(this,arguments)){var Y=this.__zoom,W=xs(U.changedTouches?U.changedTouches[0]:U,this),se=Y.invert(W),re=Y.k*(U.shiftKey?.5:2),w=n(L(C(Y,re),W,se),e.apply(this,X),u);rh(U),c>0?es(this).transition().duration(c).call(q,w,W,U):es(this).call(x.transform,w,W,U)}}function H(U,...X){if(t.apply(this,arguments)){var Y=U.touches,W=Y.length,se=B(this,X,U.changedTouches.length===W).event(U),re,w,ee,ae;for(fy(U),w=0;w<W;++w)ee=Y[w],ae=xs(ee,this),ae=[ae,this.__zoom.invert(ae),ee.identifier],se.touch0?!se.touch1&&se.touch0[2]!==ae[2]&&(se.touch1=ae,se.taps=0):(se.touch0=ae,re=!0,se.taps=1+!!m);m&&(m=clearTimeout(m)),re&&(se.taps<2&&(y=ae[0],m=setTimeout(function(){m=null},T)),S0(this),se.start())}}function z(U,...X){if(this.__zooming){var Y=B(this,X).event(U),W=U.changedTouches,se=W.length,re,w,ee,ae;for(rh(U),re=0;re<se;++re)w=W[re],ee=xs(w,this),Y.touch0&&Y.touch0[2]===w.identifier?Y.touch0[0]=ee:Y.touch1&&Y.touch1[2]===w.identifier&&(Y.touch1[0]=ee);if(w=Y.that.__zoom,Y.touch1){var j=Y.touch0[0],ge=Y.touch0[1],Ce=Y.touch1[0],Te=Y.touch1[1],Ve=(Ve=Ce[0]-j[0])*Ve+(Ve=Ce[1]-j[1])*Ve,Ie=(Ie=Te[0]-ge[0])*Ie+(Ie=Te[1]-ge[1])*Ie;w=C(w,Math.sqrt(Ve/Ie)),ee=[(j[0]+Ce[0])/2,(j[1]+Ce[1])/2],ae=[(ge[0]+Te[0])/2,(ge[1]+Te[1])/2]}else if(Y.touch0)ee=Y.touch0[0],ae=Y.touch0[1];else return;Y.zoom("touch",n(L(w,ee,ae),Y.extent,u))}}function O(U,...X){if(this.__zooming){var Y=B(this,X).event(U),W=U.changedTouches,se=W.length,re,w;for(fy(U),_&&clearTimeout(_),_=setTimeout(function(){_=null},T),re=0;re<se;++re)w=W[re],Y.touch0&&Y.touch0[2]===w.identifier?delete Y.touch0:Y.touch1&&Y.touch1[2]===w.identifier&&delete Y.touch1;if(Y.touch1&&!Y.touch0&&(Y.touch0=Y.touch1,delete Y.touch1),Y.touch0)Y.touch0[1]=this.__zoom.invert(Y.touch0[0]);else if(Y.end(),Y.taps===2&&(w=xs(w,this),Math.hypot(y[0]-w[0],y[1]-w[1])<k)){var ee=es(this).on("dblclick.zoom");ee&&ee.apply(this,arguments)}}}return x.wheelDelta=function(U){return arguments.length?(r=typeof U=="function"?U:Jf(+U),x):r},x.filter=function(U){return arguments.length?(t=typeof U=="function"?U:Jf(!!U),x):t},x.touchable=function(U){return arguments.length?(s=typeof U=="function"?U:Jf(!!U),x):s},x.extent=function(U){return arguments.length?(e=typeof U=="function"?U:Jf([[+U[0][0],+U[0][1]],[+U[1][0],+U[1][1]]]),x):e},x.scaleExtent=function(U){return arguments.length?(o[0]=+U[0],o[1]=+U[1],x):[o[0],o[1]]},x.translateExtent=function(U){return arguments.length?(u[0][0]=+U[0][0],u[1][0]=+U[1][0],u[0][1]=+U[0][1],u[1][1]=+U[1][1],x):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},x.constrain=function(U){return arguments.length?(n=U,x):n},x.duration=function(U){return arguments.length?(c=+U,x):c},x.interpolate=function(U){return arguments.length?(d=U,x):d},x.on=function(){var U=f.on.apply(f,arguments);return U===f?x:U},x.clickDistance=function(U){return arguments.length?(N=(U=+U)*U,x):Math.sqrt(N)},x.tapDistance=function(U){return arguments.length?(k=+U,x):k},x}Tm();const wm=te.createContext(null),$P=wm.Provider,pa={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},cI=pa.error001();function gn(t,e){const n=te.useContext(wm);if(n===null)throw new Error(cI);return Lw(n,t,e)}const or=()=>{const t=te.useContext(wm);if(t===null)throw new Error(cI);return te.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},XP=t=>t.userSelectionActive?"none":"all";function hI({position:t,children:e,className:n,style:r,...s}){const o=gn(XP),u=`${t}`.split("-");return _e.createElement("div",{className:jr(["react-flow__panel",n,...u]),style:{...r,pointerEvents:o},...s},e)}function KP({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:_e.createElement(hI,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},_e.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const QP=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:o={},labelBgPadding:u=[2,4],labelBgBorderRadius:c=2,children:d,className:f,...m})=>{const y=te.useRef(null),[_,T]=te.useState({x:0,y:0,width:0,height:0}),I=jr(["react-flow__edge-textwrapper",f]);return te.useEffect(()=>{if(y.current){const N=y.current.getBBox();T({x:N.x,y:N.y,width:N.width,height:N.height})}},[n]),typeof n>"u"||!n?null:_e.createElement("g",{transform:`translate(${t-_.width/2} ${e-_.height/2})`,className:I,visibility:_.width?"visible":"hidden",...m},s&&_e.createElement("rect",{width:_.width+2*u[0],x:-u[0],y:-u[1],height:_.height+2*u[1],className:"react-flow__edge-textbg",style:o,rx:c,ry:c}),_e.createElement("text",{className:"react-flow__edge-text",y:_.height/2,dy:"0.3em",ref:y,style:r},n),d)};var WP=te.memo(QP);const y1=t=>({width:t.offsetWidth,height:t.offsetHeight}),Pl=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),E1=(t={x:0,y:0},e)=>({x:Pl(t.x,e[0][0],e[1][0]),y:Pl(t.y,e[0][1],e[1][1])}),jS=(t,e,n)=>t<e?Pl(Math.abs(t-e),1,50)/50:t>n?-Pl(Math.abs(t-n),1,50)/50:0,dI=(t,e)=>{const n=jS(t.x,35,e.width-35)*20,r=jS(t.y,35,e.height-35)*20;return[n,r]},fI=t=>t.getRootNode?.()||window?.document,ZP=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),_1=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),JP=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),qS=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),dE=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},eM=t=>ji(t.width)&&ji(t.height)&&ji(t.x)&&ji(t.y),ji=t=>!isNaN(t)&&isFinite(t),vn=Symbol.for("internals"),mI=["Enter"," ","Escape"],tM=(t,e)=>{},nM=t=>"nativeEvent"in t;function fE(t){const n=(nM(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const pI=t=>"clientX"in t,uo=(t,e)=>{const n=pI(t),r=n?t.clientX:t.touches?.[0].clientX,s=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:s-(e?.top??0)}},Y0=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,md=({id:t,path:e,labelX:n,labelY:r,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:y,markerStart:_,interactionWidth:T=20})=>_e.createElement(_e.Fragment,null,_e.createElement("path",{id:t,style:m,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:y,markerStart:_}),T&&_e.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:T,className:"react-flow__edge-interaction"}),s&&ji(n)&&ji(r)?_e.createElement(WP,{x:n,y:r,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f}):null);md.displayName="BaseEdge";function ih(t,e,n){return n===void 0?n:r=>{const s=e().edges.find(o=>o.id===t);s&&n(r,{...s})}}function gI({sourceX:t,sourceY:e,targetX:n,targetY:r}){const s=Math.abs(n-t)/2,o=n<t?n+s:n-s,u=Math.abs(r-e)/2,c=r<e?r+u:r-u;return[o,c,s,u]}function yI({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:s,sourceControlY:o,targetControlX:u,targetControlY:c}){const d=t*.125+s*.375+u*.375+n*.125,f=e*.125+o*.375+c*.375+r*.125,m=Math.abs(d-t),y=Math.abs(f-e);return[d,f,m,y]}var po;(function(t){t.Strict="strict",t.Loose="loose"})(po||(po={}));var nu;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(nu||(nu={}));var Qh;(function(t){t.Partial="partial",t.Full="full"})(Qh||(Qh={}));var Ja;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Ja||(Ja={}));var Wh;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Wh||(Wh={}));var je;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(je||(je={}));function YS({pos:t,x1:e,y1:n,x2:r,y2:s}){return t===je.Left||t===je.Right?[.5*(e+r),n]:[e,.5*(n+s)]}function EI({sourceX:t,sourceY:e,sourcePosition:n=je.Bottom,targetX:r,targetY:s,targetPosition:o=je.Top}){const[u,c]=YS({pos:n,x1:t,y1:e,x2:r,y2:s}),[d,f]=YS({pos:o,x1:r,y1:s,x2:t,y2:e}),[m,y,_,T]=yI({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:u,sourceControlY:c,targetControlX:d,targetControlY:f});return[`M${t},${e} C${u},${c} ${d},${f} ${r},${s}`,m,y,_,T]}const b1=te.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=je.Bottom,targetPosition:o=je.Top,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:y,style:_,markerEnd:T,markerStart:I,interactionWidth:N})=>{const[k,x,C]=EI({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:o});return _e.createElement(md,{path:k,labelX:x,labelY:C,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:y,style:_,markerEnd:T,markerStart:I,interactionWidth:N})});b1.displayName="SimpleBezierEdge";const GS={[je.Left]:{x:-1,y:0},[je.Right]:{x:1,y:0},[je.Top]:{x:0,y:-1},[je.Bottom]:{x:0,y:1}},rM=({source:t,sourcePosition:e=je.Bottom,target:n})=>e===je.Left||e===je.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},$S=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function iM({source:t,sourcePosition:e=je.Bottom,target:n,targetPosition:r=je.Top,center:s,offset:o}){const u=GS[e],c=GS[r],d={x:t.x+u.x*o,y:t.y+u.y*o},f={x:n.x+c.x*o,y:n.y+c.y*o},m=rM({source:d,sourcePosition:e,target:f}),y=m.x!==0?"x":"y",_=m[y];let T=[],I,N;const k={x:0,y:0},x={x:0,y:0},[C,L,M,q]=gI({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(u[y]*c[y]===-1){I=s.x??C,N=s.y??L;const S=[{x:I,y:d.y},{x:I,y:f.y}],A=[{x:d.x,y:N},{x:f.x,y:N}];u[y]===_?T=y==="x"?S:A:T=y==="x"?A:S}else{const S=[{x:d.x,y:f.y}],A=[{x:f.x,y:d.y}];if(y==="x"?T=u.x===_?A:S:T=u.y===_?S:A,e===r){const O=Math.abs(t[y]-n[y]);if(O<=o){const U=Math.min(o-1,o-O);u[y]===_?k[y]=(d[y]>t[y]?-1:1)*U:x[y]=(f[y]>n[y]?-1:1)*U}}if(e!==r){const O=y==="x"?"y":"x",U=u[y]===c[O],X=d[O]>f[O],Y=d[O]<f[O];(u[y]===1&&(!U&&X||U&&Y)||u[y]!==1&&(!U&&Y||U&&X))&&(T=y==="x"?S:A)}const D={x:d.x+k.x,y:d.y+k.y},V={x:f.x+x.x,y:f.y+x.y},H=Math.max(Math.abs(D.x-T[0].x),Math.abs(V.x-T[0].x)),z=Math.max(Math.abs(D.y-T[0].y),Math.abs(V.y-T[0].y));H>=z?(I=(D.x+V.x)/2,N=T[0].y):(I=T[0].x,N=(D.y+V.y)/2)}return[[t,{x:d.x+k.x,y:d.y+k.y},...T,{x:f.x+x.x,y:f.y+x.y},n],I,N,M,q]}function sM(t,e,n,r){const s=Math.min($S(t,e)/2,$S(e,n)/2,r),{x:o,y:u}=e;if(t.x===o&&o===n.x||t.y===u&&u===n.y)return`L${o} ${u}`;if(t.y===u){const f=t.x<n.x?-1:1,m=t.y<n.y?1:-1;return`L ${o+s*f},${u}Q ${o},${u} ${o},${u+s*m}`}const c=t.x<n.x?1:-1,d=t.y<n.y?-1:1;return`L ${o},${u+s*d}Q ${o},${u} ${o+s*c},${u}`}function mE({sourceX:t,sourceY:e,sourcePosition:n=je.Bottom,targetX:r,targetY:s,targetPosition:o=je.Top,borderRadius:u=5,centerX:c,centerY:d,offset:f=20}){const[m,y,_,T,I]=iM({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:s},targetPosition:o,center:{x:c,y:d},offset:f});return[m.reduce((k,x,C)=>{let L="";return C>0&&C<m.length-1?L=sM(m[C-1],x,m[C+1],u):L=`${C===0?"M":"L"}${x.x} ${x.y}`,k+=L,k},""),y,_,T,I]}const Im=te.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:m,sourcePosition:y=je.Bottom,targetPosition:_=je.Top,markerEnd:T,markerStart:I,pathOptions:N,interactionWidth:k})=>{const[x,C,L]=mE({sourceX:t,sourceY:e,sourcePosition:y,targetX:n,targetY:r,targetPosition:_,borderRadius:N?.borderRadius,offset:N?.offset});return _e.createElement(md,{path:x,labelX:C,labelY:L,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:T,markerStart:I,interactionWidth:k})});Im.displayName="SmoothStepEdge";const T1=te.memo(t=>_e.createElement(Im,{...t,pathOptions:te.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));T1.displayName="StepEdge";function aM({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[s,o,u,c]=gI({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,s,o,u,c]}const v1=te.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:y,markerStart:_,interactionWidth:T})=>{const[I,N,k]=aM({sourceX:t,sourceY:e,targetX:n,targetY:r});return _e.createElement(md,{path:I,labelX:N,labelY:k,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:y,markerStart:_,interactionWidth:T})});v1.displayName="StraightEdge";function e0(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function XS({pos:t,x1:e,y1:n,x2:r,y2:s,c:o}){switch(t){case je.Left:return[e-e0(e-r,o),n];case je.Right:return[e+e0(r-e,o),n];case je.Top:return[e,n-e0(n-s,o)];case je.Bottom:return[e,n+e0(s-n,o)]}}function _I({sourceX:t,sourceY:e,sourcePosition:n=je.Bottom,targetX:r,targetY:s,targetPosition:o=je.Top,curvature:u=.25}){const[c,d]=XS({pos:n,x1:t,y1:e,x2:r,y2:s,c:u}),[f,m]=XS({pos:o,x1:r,y1:s,x2:t,y2:e,c:u}),[y,_,T,I]=yI({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:c,sourceControlY:d,targetControlX:f,targetControlY:m});return[`M${t},${e} C${c},${d} ${f},${m} ${r},${s}`,y,_,T,I]}const G0=te.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=je.Bottom,targetPosition:o=je.Top,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:y,style:_,markerEnd:T,markerStart:I,pathOptions:N,interactionWidth:k})=>{const[x,C,L]=_I({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:o,curvature:N?.curvature});return _e.createElement(md,{path:x,labelX:C,labelY:L,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:y,style:_,markerEnd:T,markerStart:I,interactionWidth:k})});G0.displayName="BezierEdge";const S1=te.createContext(null),oM=S1.Provider;S1.Consumer;const uM=()=>te.useContext(S1),lM=t=>"id"in t&&"source"in t&&"target"in t,cM=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,pE=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,hM=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),dM=(t,e)=>{if(!t.source||!t.target)return e;let n;return lM(t)?n={...t}:n={...t,id:cM(t)},hM(n,e)?e:e.concat(n)},gE=({x:t,y:e},[n,r,s],o,[u,c])=>{const d={x:(t-n)/s,y:(e-r)/s};return o?{x:u*Math.round(d.x/u),y:c*Math.round(d.y/c)}:d},bI=({x:t,y:e},[n,r,s])=>({x:t*s+n,y:e*s+r}),vl=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],s={x:t.position.x-n,y:t.position.y-r};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:s}},A1=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,s)=>{const{x:o,y:u}=vl(s,e).positionAbsolute;return ZP(r,_1({x:o,y:u,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return JP(n)},TI=(t,e,[n,r,s]=[0,0,1],o=!1,u=!1,c=[0,0])=>{const d={x:(e.x-n)/s,y:(e.y-r)/s,width:e.width/s,height:e.height/s},f=[];return t.forEach(m=>{const{width:y,height:_,selectable:T=!0,hidden:I=!1}=m;if(u&&!T||I)return!1;const{positionAbsolute:N}=vl(m,c),k={x:N.x,y:N.y,width:y||0,height:_||0},x=dE(d,k),C=typeof y>"u"||typeof _>"u"||y===null||_===null,L=o&&x>0,M=(y||0)*(_||0);(C||L||x>=M||m.dragging)&&f.push(m)}),f},vI=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},SI=(t,e,n,r,s,o=.1)=>{const u=e/(t.width*(1+o)),c=n/(t.height*(1+o)),d=Math.min(u,c),f=Pl(d,r,s),m=t.x+t.width/2,y=t.y+t.height/2,_=e/2-m*f,T=n/2-y*f;return{x:_,y:T,zoom:f}},Jo=(t,e=0)=>t.transition().duration(e);function KS(t,e,n,r){return(e[n]||[]).reduce((s,o)=>(`${t.id}-${o.id}-${n}`!==r&&s.push({id:o.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+o.x+o.width/2,y:(t.positionAbsolute?.y??0)+o.y+o.height/2}),s),[])}function fM(t,e,n,r,s,o){const{x:u,y:c}=uo(t),f=e.elementsFromPoint(u,c).find(I=>I.classList.contains("react-flow__handle"));if(f){const I=f.getAttribute("data-nodeid");if(I){const N=x1(void 0,f),k=f.getAttribute("data-handleid"),x=o({nodeId:I,id:k,type:N});if(x){const C=s.find(L=>L.nodeId===I&&L.type===N&&L.id===k);return{handle:{id:k,type:N,nodeId:I,x:C?.x||n.x,y:C?.y||n.y},validHandleResult:x}}}}let m=[],y=1/0;if(s.forEach(I=>{const N=Math.sqrt((I.x-n.x)**2+(I.y-n.y)**2);if(N<=r){const k=o(I);N<=y&&(N<y?m=[{handle:I,validHandleResult:k}]:N===y&&m.push({handle:I,validHandleResult:k}),y=N)}}),!m.length)return{handle:null,validHandleResult:AI()};if(m.length===1)return m[0];const _=m.some(({validHandleResult:I})=>I.isValid),T=m.some(({handle:I})=>I.type==="target");return m.find(({handle:I,validHandleResult:N})=>T?I.type==="target":_?N.isValid:!0)||m[0]}const mM={source:null,target:null,sourceHandle:null,targetHandle:null},AI=()=>({handleDomNode:null,isValid:!1,connection:mM,endHandle:null});function xI(t,e,n,r,s,o,u){const c=s==="target",d=u.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),f={...AI(),handleDomNode:d};if(d){const m=x1(void 0,d),y=d.getAttribute("data-nodeid"),_=d.getAttribute("data-handleid"),T=d.classList.contains("connectable"),I=d.classList.contains("connectableend"),N={source:c?y:n,sourceHandle:c?_:r,target:c?n:y,targetHandle:c?r:_};f.connection=N,T&&I&&(e===po.Strict?c&&m==="source"||!c&&m==="target":y!==n||_!==r)&&(f.endHandle={nodeId:y,handleId:_,type:m},f.isValid=o(N))}return f}function pM({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((s,o)=>{if(o[vn]){const{handleBounds:u}=o[vn];let c=[],d=[];u&&(c=KS(o,u,"source",`${e}-${n}-${r}`),d=KS(o,u,"target",`${e}-${n}-${r}`)),s.push(...c,...d)}return s},[])}function x1(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function my(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function gM(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function wI({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:s,getState:o,setState:u,isValidConnection:c,edgeUpdaterType:d,onReconnectEnd:f}){const m=fI(t.target),{connectionMode:y,domNode:_,autoPanOnConnect:T,connectionRadius:I,onConnectStart:N,panBy:k,getNodes:x,cancelConnection:C}=o();let L=0,M;const{x:q,y:B}=uo(t),S=m?.elementFromPoint(q,B),A=x1(d,S),D=_?.getBoundingClientRect();if(!D||!A)return;let V,H=uo(t,D),z=!1,O=null,U=!1,X=null;const Y=pM({nodes:x(),nodeId:n,handleId:e,handleType:A}),W=()=>{if(!T)return;const[w,ee]=dI(H,D);k({x:w,y:ee}),L=requestAnimationFrame(W)};u({connectionPosition:H,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:A,connectionStartHandle:{nodeId:n,handleId:e,type:A},connectionEndHandle:null}),N?.(t,{nodeId:n,handleId:e,handleType:A});function se(w){const{transform:ee}=o();H=uo(w,D);const{handle:ae,validHandleResult:j}=fM(w,m,gE(H,ee,!1,[1,1]),I,Y,ge=>xI(ge,y,n,e,s?"target":"source",c,m));if(M=ae,z||(W(),z=!0),X=j.handleDomNode,O=j.connection,U=j.isValid,u({connectionPosition:M&&U?bI({x:M.x,y:M.y},ee):H,connectionStatus:gM(!!M,U),connectionEndHandle:j.endHandle}),!M&&!U&&!X)return my(V);O.source!==O.target&&X&&(my(V),V=X,X.classList.add("connecting","react-flow__handle-connecting"),X.classList.toggle("valid",U),X.classList.toggle("react-flow__handle-valid",U))}function re(w){(M||X)&&O&&U&&r?.(O),o().onConnectEnd?.(w),d&&f?.(w),my(V),C(),cancelAnimationFrame(L),z=!1,U=!1,O=null,X=null,m.removeEventListener("mousemove",se),m.removeEventListener("mouseup",re),m.removeEventListener("touchmove",se),m.removeEventListener("touchend",re)}m.addEventListener("mousemove",se),m.addEventListener("mouseup",re),m.addEventListener("touchmove",se),m.addEventListener("touchend",re)}const QS=()=>!0,yM=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),EM=(t,e,n)=>r=>{const{connectionStartHandle:s,connectionEndHandle:o,connectionClickStartHandle:u}=r;return{connecting:s?.nodeId===t&&s?.handleId===e&&s?.type===n||o?.nodeId===t&&o?.handleId===e&&o?.type===n,clickConnecting:u?.nodeId===t&&u?.handleId===e&&u?.type===n}},II=te.forwardRef(({type:t="source",position:e=je.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:o=!0,id:u,onConnect:c,children:d,className:f,onMouseDown:m,onTouchStart:y,..._},T)=>{const I=u||null,N=t==="target",k=or(),x=uM(),{connectOnClick:C,noPanClassName:L}=gn(yM,Ir),{connecting:M,clickConnecting:q}=gn(EM(x,I,t),Ir);x||k.getState().onError?.("010",pa.error010());const B=D=>{const{defaultEdgeOptions:V,onConnect:H,hasDefaultEdges:z}=k.getState(),O={...V,...D};if(z){const{edges:U,setEdges:X}=k.getState();X(dM(O,U))}H?.(O),c?.(O)},S=D=>{if(!x)return;const V=pI(D);s&&(V&&D.button===0||!V)&&wI({event:D,handleId:I,nodeId:x,onConnect:B,isTarget:N,getState:k.getState,setState:k.setState,isValidConnection:n||k.getState().isValidConnection||QS}),V?m?.(D):y?.(D)},A=D=>{const{onClickConnectStart:V,onClickConnectEnd:H,connectionClickStartHandle:z,connectionMode:O,isValidConnection:U}=k.getState();if(!x||!z&&!s)return;if(!z){V?.(D,{nodeId:x,handleId:I,handleType:t}),k.setState({connectionClickStartHandle:{nodeId:x,type:t,handleId:I}});return}const X=fI(D.target),Y=n||U||QS,{connection:W,isValid:se}=xI({nodeId:x,id:I,type:t},O,z.nodeId,z.handleId||null,z.type,Y,X);se&&B(W),H?.(D),k.setState({connectionClickStartHandle:null})};return _e.createElement("div",{"data-handleid":I,"data-nodeid":x,"data-handlepos":e,"data-id":`${x}-${I}-${t}`,className:jr(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",L,f,{source:!N,target:N,connectable:r,connectablestart:s,connectableend:o,connecting:q,connectionindicator:r&&(s&&!M||o&&M)}]),onMouseDown:S,onTouchStart:S,onClick:C?A:void 0,ref:T,..._},d)});II.displayName="Handle";var Zr=te.memo(II);const CI=({data:t,isConnectable:e,targetPosition:n=je.Top,sourcePosition:r=je.Bottom})=>_e.createElement(_e.Fragment,null,_e.createElement(Zr,{type:"target",position:n,isConnectable:e}),t?.label,_e.createElement(Zr,{type:"source",position:r,isConnectable:e}));CI.displayName="DefaultNode";var yE=te.memo(CI);const NI=({data:t,isConnectable:e,sourcePosition:n=je.Bottom})=>_e.createElement(_e.Fragment,null,t?.label,_e.createElement(Zr,{type:"source",position:n,isConnectable:e}));NI.displayName="InputNode";var RI=te.memo(NI);const DI=({data:t,isConnectable:e,targetPosition:n=je.Top})=>_e.createElement(_e.Fragment,null,_e.createElement(Zr,{type:"target",position:n,isConnectable:e}),t?.label);DI.displayName="OutputNode";var OI=te.memo(DI);const w1=()=>null;w1.displayName="GroupNode";const _M=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),t0=t=>t.id;function bM(t,e){return Ir(t.selectedNodes.map(t0),e.selectedNodes.map(t0))&&Ir(t.selectedEdges.map(t0),e.selectedEdges.map(t0))}const kI=te.memo(({onSelectionChange:t})=>{const e=or(),{selectedNodes:n,selectedEdges:r}=gn(_M,bM);return te.useEffect(()=>{const s={nodes:n,edges:r};t?.(s),e.getState().onSelectionChange.forEach(o=>o(s))},[n,r,t]),null});kI.displayName="SelectionListener";const TM=t=>!!t.onSelectionChange;function vM({onSelectionChange:t}){const e=gn(TM);return t||e?_e.createElement(kI,{onSelectionChange:t}):null}const SM=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function sl(t,e){te.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function ft(t,e,n){te.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const AM=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:s,onConnectStart:o,onConnectEnd:u,onClickConnectStart:c,onClickConnectEnd:d,nodesDraggable:f,nodesConnectable:m,nodesFocusable:y,edgesFocusable:_,edgesUpdatable:T,elevateNodesOnSelect:I,minZoom:N,maxZoom:k,nodeExtent:x,onNodesChange:C,onEdgesChange:L,elementsSelectable:M,connectionMode:q,snapGrid:B,snapToGrid:S,translateExtent:A,connectOnClick:D,defaultEdgeOptions:V,fitView:H,fitViewOptions:z,onNodesDelete:O,onEdgesDelete:U,onNodeDrag:X,onNodeDragStart:Y,onNodeDragStop:W,onSelectionDrag:se,onSelectionDragStart:re,onSelectionDragStop:w,noPanClassName:ee,nodeOrigin:ae,rfId:j,autoPanOnConnect:ge,autoPanOnNodeDrag:Ce,onError:Te,connectionRadius:Ve,isValidConnection:Ie,nodeDragThreshold:Me})=>{const{setNodes:ze,setEdges:Je,setDefaultNodesAndEdges:an,setMinZoom:Jt,setMaxZoom:on,setTranslateExtent:Dt,setNodeExtent:Dn,reset:Qe}=gn(SM,Ir),qe=or();return te.useEffect(()=>{const cn=r?.map(Vn=>({...Vn,...V}));return an(n,cn),()=>{Qe()}},[]),ft("defaultEdgeOptions",V,qe.setState),ft("connectionMode",q,qe.setState),ft("onConnect",s,qe.setState),ft("onConnectStart",o,qe.setState),ft("onConnectEnd",u,qe.setState),ft("onClickConnectStart",c,qe.setState),ft("onClickConnectEnd",d,qe.setState),ft("nodesDraggable",f,qe.setState),ft("nodesConnectable",m,qe.setState),ft("nodesFocusable",y,qe.setState),ft("edgesFocusable",_,qe.setState),ft("edgesUpdatable",T,qe.setState),ft("elementsSelectable",M,qe.setState),ft("elevateNodesOnSelect",I,qe.setState),ft("snapToGrid",S,qe.setState),ft("snapGrid",B,qe.setState),ft("onNodesChange",C,qe.setState),ft("onEdgesChange",L,qe.setState),ft("connectOnClick",D,qe.setState),ft("fitViewOnInit",H,qe.setState),ft("fitViewOnInitOptions",z,qe.setState),ft("onNodesDelete",O,qe.setState),ft("onEdgesDelete",U,qe.setState),ft("onNodeDrag",X,qe.setState),ft("onNodeDragStart",Y,qe.setState),ft("onNodeDragStop",W,qe.setState),ft("onSelectionDrag",se,qe.setState),ft("onSelectionDragStart",re,qe.setState),ft("onSelectionDragStop",w,qe.setState),ft("noPanClassName",ee,qe.setState),ft("nodeOrigin",ae,qe.setState),ft("rfId",j,qe.setState),ft("autoPanOnConnect",ge,qe.setState),ft("autoPanOnNodeDrag",Ce,qe.setState),ft("onError",Te,qe.setState),ft("connectionRadius",Ve,qe.setState),ft("isValidConnection",Ie,qe.setState),ft("nodeDragThreshold",Me,qe.setState),sl(t,ze),sl(e,Je),sl(N,Jt),sl(k,on),sl(A,Dt),sl(x,Dn),null},WS={display:"none"},xM={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},PI="react-flow__node-desc",MI="react-flow__edge-desc",wM="react-flow__aria-live",IM=t=>t.ariaLiveMessage;function CM({rfId:t}){const e=gn(IM);return _e.createElement("div",{id:`${wM}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:xM},e)}function NM({rfId:t,disableKeyboardA11y:e}){return _e.createElement(_e.Fragment,null,_e.createElement("div",{id:`${PI}-${t}`,style:WS},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),_e.createElement("div",{id:`${MI}-${t}`,style:WS},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&_e.createElement(CM,{rfId:t}))}var Zh=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=te.useState(!1),s=te.useRef(!1),o=te.useRef(new Set([])),[u,c]=te.useMemo(()=>{if(t!==null){const f=(Array.isArray(t)?t:[t]).filter(y=>typeof y=="string").map(y=>y.split("+")),m=f.reduce((y,_)=>y.concat(..._),[]);return[f,m]}return[[],[]]},[t]);return te.useEffect(()=>{const d=typeof document<"u"?document:null,f=e?.target||d;if(t!==null){const m=T=>{if(s.current=T.ctrlKey||T.metaKey||T.shiftKey,(!s.current||s.current&&!e.actInsideInputWithModifier)&&fE(T))return!1;const N=JS(T.code,c);o.current.add(T[N]),ZS(u,o.current,!1)&&(T.preventDefault(),r(!0))},y=T=>{if((!s.current||s.current&&!e.actInsideInputWithModifier)&&fE(T))return!1;const N=JS(T.code,c);ZS(u,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(T[N]),T.key==="Meta"&&o.current.clear(),s.current=!1},_=()=>{o.current.clear(),r(!1)};return f?.addEventListener("keydown",m),f?.addEventListener("keyup",y),window.addEventListener("blur",_),()=>{f?.removeEventListener("keydown",m),f?.removeEventListener("keyup",y),window.removeEventListener("blur",_)}}},[t,r]),n};function ZS(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(s=>e.has(s)))}function JS(t,e){return e.includes(t)?"code":"key"}function LI(t,e,n,r){const s=t.parentNode||t.parentId;if(!s)return n;const o=e.get(s),u=vl(o,r);return LI(o,e,{x:(n.x??0)+u.x,y:(n.y??0)+u.y,z:(o[vn]?.z??0)>(n.z??0)?o[vn]?.z??0:n.z??0},r)}function BI(t,e,n){t.forEach(r=>{const s=r.parentNode||r.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||n?.[r.id]){const{x:o,y:u,z:c}=LI(r,t,{...r.position,z:r[vn]?.z??0},e);r.positionAbsolute={x:o,y:u},r[vn].z=c,n?.[r.id]&&(r[vn].isParent=!0)}})}function py(t,e,n,r){const s=new Map,o={},u=r?1e3:0;return t.forEach(c=>{const d=(ji(c.zIndex)?c.zIndex:0)+(c.selected?u:0),f=e.get(c.id),m={...c,positionAbsolute:{x:c.position.x,y:c.position.y}},y=c.parentNode||c.parentId;y&&(o[y]=!0);const _=f?.type&&f?.type!==c.type;Object.defineProperty(m,vn,{enumerable:!1,value:{handleBounds:_?void 0:f?.[vn]?.handleBounds,z:d}}),s.set(c.id,m)}),BI(s,n,o),s}function UI(t,e={}){const{getNodes:n,width:r,height:s,minZoom:o,maxZoom:u,d3Zoom:c,d3Selection:d,fitViewOnInitDone:f,fitViewOnInit:m,nodeOrigin:y}=t(),_=e.initial&&!f&&m;if(c&&d&&(_||!e.initial)){const I=n().filter(k=>{const x=e.includeHiddenNodes?k.width&&k.height:!k.hidden;return e.nodes?.length?x&&e.nodes.some(C=>C.id===k.id):x}),N=I.every(k=>k.width&&k.height);if(I.length>0&&N){const k=A1(I,y),{x,y:C,zoom:L}=SI(k,r,s,e.minZoom??o,e.maxZoom??u,e.padding??.1),M=oo.translate(x,C).scale(L);return typeof e.duration=="number"&&e.duration>0?c.transform(Jo(d,e.duration),M):c.transform(d,M),!0}}return!1}function RM(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[vn]:r[vn],selected:n.selected})}),new Map(e)}function DM(t,e){return e.map(n=>{const r=t.find(s=>s.id===n.id);return r&&(n.selected=r.selected),n})}function n0({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:s,edges:o,onNodesChange:u,onEdgesChange:c,hasDefaultNodes:d,hasDefaultEdges:f}=n();t?.length&&(d&&r({nodeInternals:RM(t,s)}),u?.(t)),e?.length&&(f&&r({edges:DM(e,o)}),c?.(e))}const al=()=>{},OM={zoomIn:al,zoomOut:al,zoomTo:al,getZoom:()=>1,setViewport:al,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:al,fitBounds:al,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},kM=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),PM=()=>{const t=or(),{d3Zoom:e,d3Selection:n}=gn(kM,Ir);return te.useMemo(()=>n&&e?{zoomIn:s=>e.scaleBy(Jo(n,s?.duration),1.2),zoomOut:s=>e.scaleBy(Jo(n,s?.duration),1/1.2),zoomTo:(s,o)=>e.scaleTo(Jo(n,o?.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,o)=>{const[u,c,d]=t.getState().transform,f=oo.translate(s.x??u,s.y??c).scale(s.zoom??d);e.transform(Jo(n,o?.duration),f)},getViewport:()=>{const[s,o,u]=t.getState().transform;return{x:s,y:o,zoom:u}},fitView:s=>UI(t.getState,s),setCenter:(s,o,u)=>{const{width:c,height:d,maxZoom:f}=t.getState(),m=typeof u?.zoom<"u"?u.zoom:f,y=c/2-s*m,_=d/2-o*m,T=oo.translate(y,_).scale(m);e.transform(Jo(n,u?.duration),T)},fitBounds:(s,o)=>{const{width:u,height:c,minZoom:d,maxZoom:f}=t.getState(),{x:m,y,zoom:_}=SI(s,u,c,d,f,o?.padding??.1),T=oo.translate(m,y).scale(_);e.transform(Jo(n,o?.duration),T)},project:s=>{const{transform:o,snapToGrid:u,snapGrid:c}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),gE(s,o,u,c)},screenToFlowPosition:s=>{const{transform:o,snapToGrid:u,snapGrid:c,domNode:d}=t.getState();if(!d)return s;const{x:f,y:m}=d.getBoundingClientRect(),y={x:s.x-f,y:s.y-m};return gE(y,o,u,c)},flowToScreenPosition:s=>{const{transform:o,domNode:u}=t.getState();if(!u)return s;const{x:c,y:d}=u.getBoundingClientRect(),f=bI(s,o);return{x:f.x+c,y:f.y+d}},viewportInitialized:!0}:OM,[e,n])};function pd(){const t=PM(),e=or(),n=te.useCallback(()=>e.getState().getNodes().map(N=>({...N})),[]),r=te.useCallback(N=>e.getState().nodeInternals.get(N),[]),s=te.useCallback(()=>{const{edges:N=[]}=e.getState();return N.map(k=>({...k}))},[]),o=te.useCallback(N=>{const{edges:k=[]}=e.getState();return k.find(x=>x.id===N)},[]),u=te.useCallback(N=>{const{getNodes:k,setNodes:x,hasDefaultNodes:C,onNodesChange:L}=e.getState(),M=k(),q=typeof N=="function"?N(M):N;if(C)x(q);else if(L){const B=q.length===0?M.map(S=>({type:"remove",id:S.id})):q.map(S=>({item:S,type:"reset"}));L(B)}},[]),c=te.useCallback(N=>{const{edges:k=[],setEdges:x,hasDefaultEdges:C,onEdgesChange:L}=e.getState(),M=typeof N=="function"?N(k):N;if(C)x(M);else if(L){const q=M.length===0?k.map(B=>({type:"remove",id:B.id})):M.map(B=>({item:B,type:"reset"}));L(q)}},[]),d=te.useCallback(N=>{const k=Array.isArray(N)?N:[N],{getNodes:x,setNodes:C,hasDefaultNodes:L,onNodesChange:M}=e.getState();if(L){const B=[...x(),...k];C(B)}else if(M){const q=k.map(B=>({item:B,type:"add"}));M(q)}},[]),f=te.useCallback(N=>{const k=Array.isArray(N)?N:[N],{edges:x=[],setEdges:C,hasDefaultEdges:L,onEdgesChange:M}=e.getState();if(L)C([...x,...k]);else if(M){const q=k.map(B=>({item:B,type:"add"}));M(q)}},[]),m=te.useCallback(()=>{const{getNodes:N,edges:k=[],transform:x}=e.getState(),[C,L,M]=x;return{nodes:N().map(q=>({...q})),edges:k.map(q=>({...q})),viewport:{x:C,y:L,zoom:M}}},[]),y=te.useCallback(({nodes:N,edges:k})=>{const{nodeInternals:x,getNodes:C,edges:L,hasDefaultNodes:M,hasDefaultEdges:q,onNodesDelete:B,onEdgesDelete:S,onNodesChange:A,onEdgesChange:D}=e.getState(),V=(N||[]).map(X=>X.id),H=(k||[]).map(X=>X.id),z=C().reduce((X,Y)=>{const W=Y.parentNode||Y.parentId,se=!V.includes(Y.id)&&W&&X.find(w=>w.id===W);return(typeof Y.deletable=="boolean"?Y.deletable:!0)&&(V.includes(Y.id)||se)&&X.push(Y),X},[]),O=L.filter(X=>typeof X.deletable=="boolean"?X.deletable:!0),U=O.filter(X=>H.includes(X.id));if(z||U){const X=vI(z,O),Y=[...U,...X],W=Y.reduce((se,re)=>(se.includes(re.id)||se.push(re.id),se),[]);if((q||M)&&(q&&e.setState({edges:L.filter(se=>!W.includes(se.id))}),M&&(z.forEach(se=>{x.delete(se.id)}),e.setState({nodeInternals:new Map(x)}))),W.length>0&&(S?.(Y),D&&D(W.map(se=>({id:se,type:"remove"})))),z.length>0&&(B?.(z),A)){const se=z.map(re=>({id:re.id,type:"remove"}));A(se)}}},[]),_=te.useCallback(N=>{const k=eM(N),x=k?null:e.getState().nodeInternals.get(N.id);return!k&&!x?[null,null,k]:[k?N:qS(x),x,k]},[]),T=te.useCallback((N,k=!0,x)=>{const[C,L,M]=_(N);return C?(x||e.getState().getNodes()).filter(q=>{if(!M&&(q.id===L.id||!q.positionAbsolute))return!1;const B=qS(q),S=dE(B,C);return k&&S>0||S>=C.width*C.height}):[]},[]),I=te.useCallback((N,k,x=!0)=>{const[C]=_(N);if(!C)return!1;const L=dE(C,k);return x&&L>0||L>=C.width*C.height},[]);return te.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:s,getEdge:o,setNodes:u,setEdges:c,addNodes:d,addEdges:f,toObject:m,deleteElements:y,getIntersectingNodes:T,isNodeIntersecting:I}),[t,n,r,s,o,u,c,d,f,m,y,T,I])}const MM={actInsideInputWithModifier:!1};var LM=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=or(),{deleteElements:r}=pd(),s=Zh(t,MM),o=Zh(e);te.useEffect(()=>{if(s){const{edges:u,getNodes:c}=n.getState(),d=c().filter(m=>m.selected),f=u.filter(m=>m.selected);r({nodes:d,edges:f}),n.setState({nodesSelectionActive:!1})}},[s]),te.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])};function BM(t){const e=or();te.useEffect(()=>{let n;const r=()=>{if(!t.current)return;const s=y1(t.current);(s.height===0||s.width===0)&&e.getState().onError?.("004",pa.error004()),e.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const I1={position:"absolute",width:"100%",height:"100%",top:0,left:0},UM=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,r0=t=>({x:t.x,y:t.y,zoom:t.k}),ol=(t,e)=>t.target.closest(`.${e}`),e2=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),t2=t=>{const e=t.ctrlKey&&Y0()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},VM=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),HM=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:o=!0,panOnScroll:u=!1,panOnScrollSpeed:c=.5,panOnScrollMode:d=nu.Free,zoomOnDoubleClick:f=!0,elementsSelectable:m,panOnDrag:y=!0,defaultViewport:_,translateExtent:T,minZoom:I,maxZoom:N,zoomActivationKeyCode:k,preventScrolling:x=!0,children:C,noWheelClassName:L,noPanClassName:M})=>{const q=te.useRef(),B=or(),S=te.useRef(!1),A=te.useRef(!1),D=te.useRef(null),V=te.useRef({x:0,y:0,zoom:0}),{d3Zoom:H,d3Selection:z,d3ZoomHandler:O,userSelectionActive:U}=gn(VM,Ir),X=Zh(k),Y=te.useRef(0),W=te.useRef(!1),se=te.useRef();return BM(D),te.useEffect(()=>{if(D.current){const re=D.current.getBoundingClientRect(),w=GP().scaleExtent([I,N]).translateExtent(T),ee=es(D.current).call(w),ae=oo.translate(_.x,_.y).scale(Pl(_.zoom,I,N)),j=[[0,0],[re.width,re.height]],ge=w.constrain()(ae,j,T);w.transform(ee,ge),w.wheelDelta(t2),B.setState({d3Zoom:w,d3Selection:ee,d3ZoomHandler:ee.on("wheel.zoom"),transform:[ge.x,ge.y,ge.k],domNode:D.current.closest(".react-flow")})}},[]),te.useEffect(()=>{z&&H&&(u&&!X&&!U?z.on("wheel.zoom",re=>{if(ol(re,L))return!1;re.preventDefault(),re.stopImmediatePropagation();const w=z.property("__zoom").k||1;if(re.ctrlKey&&o){const Ie=xs(re),Me=t2(re),ze=w*Math.pow(2,Me);H.scaleTo(z,ze,Ie,re);return}const ee=re.deltaMode===1?20:1;let ae=d===nu.Vertical?0:re.deltaX*ee,j=d===nu.Horizontal?0:re.deltaY*ee;!Y0()&&re.shiftKey&&d!==nu.Vertical&&(ae=re.deltaY*ee,j=0),H.translateBy(z,-(ae/w)*c,-(j/w)*c,{internal:!0});const ge=r0(z.property("__zoom")),{onViewportChangeStart:Ce,onViewportChange:Te,onViewportChangeEnd:Ve}=B.getState();clearTimeout(se.current),W.current||(W.current=!0,e?.(re,ge),Ce?.(ge)),W.current&&(t?.(re,ge),Te?.(ge),se.current=setTimeout(()=>{n?.(re,ge),Ve?.(ge),W.current=!1},150))},{passive:!1}):typeof O<"u"&&z.on("wheel.zoom",function(re,w){if(!x&&re.type==="wheel"&&!re.ctrlKey||ol(re,L))return null;re.preventDefault(),O.call(this,re,w)},{passive:!1}))},[U,u,d,z,H,O,X,o,x,L,e,t,n]),te.useEffect(()=>{H&&H.on("start",re=>{if(!re.sourceEvent||re.sourceEvent.internal)return null;Y.current=re.sourceEvent?.button;const{onViewportChangeStart:w}=B.getState(),ee=r0(re.transform);S.current=!0,V.current=ee,re.sourceEvent?.type==="mousedown"&&B.setState({paneDragging:!0}),w?.(ee),e?.(re.sourceEvent,ee)})},[H,e]),te.useEffect(()=>{H&&(U&&!S.current?H.on("zoom",null):U||H.on("zoom",re=>{const{onViewportChange:w}=B.getState();if(B.setState({transform:[re.transform.x,re.transform.y,re.transform.k]}),A.current=!!(r&&e2(y,Y.current??0)),(t||w)&&!re.sourceEvent?.internal){const ee=r0(re.transform);w?.(ee),t?.(re.sourceEvent,ee)}}))},[U,H,t,y,r]),te.useEffect(()=>{H&&H.on("end",re=>{if(!re.sourceEvent||re.sourceEvent.internal)return null;const{onViewportChangeEnd:w}=B.getState();if(S.current=!1,B.setState({paneDragging:!1}),r&&e2(y,Y.current??0)&&!A.current&&r(re.sourceEvent),A.current=!1,(n||w)&&UM(V.current,re.transform)){const ee=r0(re.transform);V.current=ee,clearTimeout(q.current),q.current=setTimeout(()=>{w?.(ee),n?.(re.sourceEvent,ee)},u?150:0)}})},[H,u,y,n,r]),te.useEffect(()=>{H&&H.filter(re=>{const w=X||s,ee=o&&re.ctrlKey;if((y===!0||Array.isArray(y)&&y.includes(1))&&re.button===1&&re.type==="mousedown"&&(ol(re,"react-flow__node")||ol(re,"react-flow__edge")))return!0;if(!y&&!w&&!u&&!f&&!o||U||!f&&re.type==="dblclick"||ol(re,L)&&re.type==="wheel"||ol(re,M)&&(re.type!=="wheel"||u&&re.type==="wheel"&&!X)||!o&&re.ctrlKey&&re.type==="wheel"||!w&&!u&&!ee&&re.type==="wheel"||!y&&(re.type==="mousedown"||re.type==="touchstart")||Array.isArray(y)&&!y.includes(re.button)&&re.type==="mousedown")return!1;const ae=Array.isArray(y)&&y.includes(re.button)||!re.button||re.button<=1;return(!re.ctrlKey||re.type==="wheel")&&ae})},[U,H,s,o,u,f,y,m,X]),_e.createElement("div",{className:"react-flow__renderer",ref:D,style:I1},C)},zM=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function FM(){const{userSelectionActive:t,userSelectionRect:e}=gn(zM,Ir);return t&&e?_e.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function n2(t,e){const n=e.parentNode||e.parentId,r=t.find(s=>s.id===n);if(r){const s=e.position.x+e.width-r.width,o=e.position.y+e.height-r.height;if(s>0||o>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,s>0&&(r.style.width+=s),o>0&&(r.style.height+=o),e.position.x<0){const u=Math.abs(e.position.x);r.position.x=r.position.x-u,r.style.width+=u,e.position.x=0}if(e.position.y<0){const u=Math.abs(e.position.y);r.position.y=r.position.y-u,r.style.height+=u,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function VI(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,s)=>{const o=t.filter(c=>c.id===s.id);if(o.length===0)return r.push(s),r;const u={...s};for(const c of o)if(c)switch(c.type){case"select":{u.selected=c.selected;break}case"position":{typeof c.position<"u"&&(u.position=c.position),typeof c.positionAbsolute<"u"&&(u.positionAbsolute=c.positionAbsolute),typeof c.dragging<"u"&&(u.dragging=c.dragging),u.expandParent&&n2(r,u);break}case"dimensions":{typeof c.dimensions<"u"&&(u.width=c.dimensions.width,u.height=c.dimensions.height),typeof c.updateStyle<"u"&&(u.style={...u.style||{},...c.dimensions}),typeof c.resizing=="boolean"&&(u.resizing=c.resizing),u.expandParent&&n2(r,u);break}case"remove":return r}return r.push(u),r},n)}function HI(t,e){return VI(t,e)}function jM(t,e){return VI(t,e)}const Za=(t,e)=>({id:t,type:"select",selected:e});function yl(t,e){return t.reduce((n,r)=>{const s=e.includes(r.id);return!r.selected&&s?(r.selected=!0,n.push(Za(r.id,!0))):r.selected&&!s&&(r.selected=!1,n.push(Za(r.id,!1))),n},[])}const gy=(t,e)=>n=>{n.target===e.current&&t?.(n)},qM=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),zI=te.memo(({isSelecting:t,selectionMode:e=Qh.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:s,onPaneClick:o,onPaneContextMenu:u,onPaneScroll:c,onPaneMouseEnter:d,onPaneMouseMove:f,onPaneMouseLeave:m,children:y})=>{const _=te.useRef(null),T=or(),I=te.useRef(0),N=te.useRef(0),k=te.useRef(),{userSelectionActive:x,elementsSelectable:C,dragging:L}=gn(qM,Ir),M=()=>{T.setState({userSelectionActive:!1,userSelectionRect:null}),I.current=0,N.current=0},q=O=>{o?.(O),T.getState().resetSelectedElements(),T.setState({nodesSelectionActive:!1})},B=O=>{if(Array.isArray(n)&&n?.includes(2)){O.preventDefault();return}u?.(O)},S=c?O=>c(O):void 0,A=O=>{const{resetSelectedElements:U,domNode:X}=T.getState();if(k.current=X?.getBoundingClientRect(),!C||!t||O.button!==0||O.target!==_.current||!k.current)return;const{x:Y,y:W}=uo(O,k.current);U(),T.setState({userSelectionRect:{width:0,height:0,startX:Y,startY:W,x:Y,y:W}}),r?.(O)},D=O=>{const{userSelectionRect:U,nodeInternals:X,edges:Y,transform:W,onNodesChange:se,onEdgesChange:re,nodeOrigin:w,getNodes:ee}=T.getState();if(!t||!k.current||!U)return;T.setState({userSelectionActive:!0,nodesSelectionActive:!1});const ae=uo(O,k.current),j=U.startX??0,ge=U.startY??0,Ce={...U,x:ae.x<j?ae.x:j,y:ae.y<ge?ae.y:ge,width:Math.abs(ae.x-j),height:Math.abs(ae.y-ge)},Te=ee(),Ve=TI(X,Ce,W,e===Qh.Partial,!0,w),Ie=vI(Ve,Y).map(ze=>ze.id),Me=Ve.map(ze=>ze.id);if(I.current!==Me.length){I.current=Me.length;const ze=yl(Te,Me);ze.length&&se?.(ze)}if(N.current!==Ie.length){N.current=Ie.length;const ze=yl(Y,Ie);ze.length&&re?.(ze)}T.setState({userSelectionRect:Ce})},V=O=>{if(O.button!==0)return;const{userSelectionRect:U}=T.getState();!x&&U&&O.target===_.current&&q?.(O),T.setState({nodesSelectionActive:I.current>0}),M(),s?.(O)},H=O=>{x&&(T.setState({nodesSelectionActive:I.current>0}),s?.(O)),M()},z=C&&(t||x);return _e.createElement("div",{className:jr(["react-flow__pane",{dragging:L,selection:t}]),onClick:z?void 0:gy(q,_),onContextMenu:gy(B,_),onWheel:gy(S,_),onMouseEnter:z?void 0:d,onMouseDown:z?A:void 0,onMouseMove:z?D:f,onMouseUp:z?V:void 0,onMouseLeave:z?H:m,ref:_,style:I1},y,_e.createElement(FM,null))});zI.displayName="Pane";function FI(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:FI(r,e):!1}function r2(t,e,n){let r=t;do{if(r?.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function YM(t,e,n,r){return Array.from(t.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||s.parentId||!FI(s,t))&&(s.draggable||e&&typeof s.draggable>"u")).map(s=>({id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(s.positionAbsolute?.x??0),y:n.y-(s.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}))}function GM(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function jI(t,e,n,r,s=[0,0],o){const u=GM(t,t.extent||r);let c=u;const d=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(d&&t.width&&t.height){const y=n.get(d),{x:_,y:T}=vl(y,s).positionAbsolute;c=y&&ji(_)&&ji(T)&&ji(y.width)&&ji(y.height)?[[_+t.width*s[0],T+t.height*s[1]],[_+y.width-t.width+t.width*s[0],T+y.height-t.height+t.height*s[1]]]:c}else o?.("005",pa.error005()),c=u;else if(t.extent&&d&&t.extent!=="parent"){const y=n.get(d),{x:_,y:T}=vl(y,s).positionAbsolute;c=[[t.extent[0][0]+_,t.extent[0][1]+T],[t.extent[1][0]+_,t.extent[1][1]+T]]}let f={x:0,y:0};if(d){const y=n.get(d);f=vl(y,s).positionAbsolute}const m=c&&c!=="parent"?E1(e,c):e;return{position:{x:m.x-f.x,y:m.y-f.y},positionAbsolute:m}}function yy({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?r.find(s=>s.id===t):r[0],r]}const i2=(t,e,n,r)=>{const s=e.querySelectorAll(t);if(!s||!s.length)return null;const o=Array.from(s),u=e.getBoundingClientRect(),c={x:u.width*r[0],y:u.height*r[1]};return o.map(d=>{const f=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),position:d.getAttribute("data-handlepos"),x:(f.left-u.left-c.x)/n,y:(f.top-u.top-c.y)/n,...y1(d)}})};function sh(t,e,n){return n===void 0?n:r=>{const s=e().nodeInternals.get(t);s&&n(r,{...s})}}function EE({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:o,multiSelectionActive:u,nodeInternals:c,onError:d}=e.getState(),f=c.get(t);if(!f){d?.("012",pa.error012(t));return}e.setState({nodesSelectionActive:!1}),f.selected?(n||f.selected&&u)&&(o({nodes:[f],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):s([t])}function $M(){const t=or();return te.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:s,snapToGrid:o}=t.getState(),u=n.touches?n.touches[0].clientX:n.clientX,c=n.touches?n.touches[0].clientY:n.clientY,d={x:(u-r[0])/r[2],y:(c-r[1])/r[2]};return{xSnapped:o?s[0]*Math.round(d.x/s[0]):d.x,ySnapped:o?s[1]*Math.round(d.y/s[1]):d.y,...d}},[])}function Ey(t){return(e,n,r)=>t?.(e,r)}function qI({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:o,selectNodesOnDrag:u}){const c=or(),[d,f]=te.useState(!1),m=te.useRef([]),y=te.useRef({x:null,y:null}),_=te.useRef(0),T=te.useRef(null),I=te.useRef({x:0,y:0}),N=te.useRef(null),k=te.useRef(!1),x=te.useRef(!1),C=te.useRef(!1),L=$M();return te.useEffect(()=>{if(t?.current){const M=es(t.current),q=({x:A,y:D})=>{const{nodeInternals:V,onNodeDrag:H,onSelectionDrag:z,updateNodePositions:O,nodeExtent:U,snapGrid:X,snapToGrid:Y,nodeOrigin:W,onError:se}=c.getState();y.current={x:A,y:D};let re=!1,w={x:0,y:0,x2:0,y2:0};if(m.current.length>1&&U){const ae=A1(m.current,W);w=_1(ae)}if(m.current=m.current.map(ae=>{const j={x:A-ae.distance.x,y:D-ae.distance.y};Y&&(j.x=X[0]*Math.round(j.x/X[0]),j.y=X[1]*Math.round(j.y/X[1]));const ge=[[U[0][0],U[0][1]],[U[1][0],U[1][1]]];m.current.length>1&&U&&!ae.extent&&(ge[0][0]=ae.positionAbsolute.x-w.x+U[0][0],ge[1][0]=ae.positionAbsolute.x+(ae.width??0)-w.x2+U[1][0],ge[0][1]=ae.positionAbsolute.y-w.y+U[0][1],ge[1][1]=ae.positionAbsolute.y+(ae.height??0)-w.y2+U[1][1]);const Ce=jI(ae,j,V,ge,W,se);return re=re||ae.position.x!==Ce.position.x||ae.position.y!==Ce.position.y,ae.position=Ce.position,ae.positionAbsolute=Ce.positionAbsolute,ae}),!re)return;O(m.current,!0,!0),f(!0);const ee=s?H:Ey(z);if(ee&&N.current){const[ae,j]=yy({nodeId:s,dragItems:m.current,nodeInternals:V});ee(N.current,ae,j)}},B=()=>{if(!T.current)return;const[A,D]=dI(I.current,T.current);if(A!==0||D!==0){const{transform:V,panBy:H}=c.getState();y.current.x=(y.current.x??0)-A/V[2],y.current.y=(y.current.y??0)-D/V[2],H({x:A,y:D})&&q(y.current)}_.current=requestAnimationFrame(B)},S=A=>{const{nodeInternals:D,multiSelectionActive:V,nodesDraggable:H,unselectNodesAndEdges:z,onNodeDragStart:O,onSelectionDragStart:U}=c.getState();x.current=!0;const X=s?O:Ey(U);(!u||!o)&&!V&&s&&(D.get(s)?.selected||z()),s&&o&&u&&EE({id:s,store:c,nodeRef:t});const Y=L(A);if(y.current=Y,m.current=YM(D,H,Y,s),X&&m.current){const[W,se]=yy({nodeId:s,dragItems:m.current,nodeInternals:D});X(A.sourceEvent,W,se)}};if(e)M.on(".drag",null);else{const A=nk().on("start",D=>{const{domNode:V,nodeDragThreshold:H}=c.getState();H===0&&S(D),C.current=!1;const z=L(D);y.current=z,T.current=V?.getBoundingClientRect()||null,I.current=uo(D.sourceEvent,T.current)}).on("drag",D=>{const V=L(D),{autoPanOnNodeDrag:H,nodeDragThreshold:z}=c.getState();if(D.sourceEvent.type==="touchmove"&&D.sourceEvent.touches.length>1&&(C.current=!0),!C.current){if(!k.current&&x.current&&H&&(k.current=!0,B()),!x.current){const O=V.xSnapped-(y?.current?.x??0),U=V.ySnapped-(y?.current?.y??0);Math.sqrt(O*O+U*U)>z&&S(D)}(y.current.x!==V.xSnapped||y.current.y!==V.ySnapped)&&m.current&&x.current&&(N.current=D.sourceEvent,I.current=uo(D.sourceEvent,T.current),q(V))}}).on("end",D=>{if(!(!x.current||C.current)&&(f(!1),k.current=!1,x.current=!1,cancelAnimationFrame(_.current),m.current)){const{updateNodePositions:V,nodeInternals:H,onNodeDragStop:z,onSelectionDragStop:O}=c.getState(),U=s?z:Ey(O);if(V(m.current,!1,!1),U){const[X,Y]=yy({nodeId:s,dragItems:m.current,nodeInternals:H});U(D.sourceEvent,X,Y)}}}).filter(D=>{const V=D.target;return!D.button&&(!n||!r2(V,`.${n}`,t))&&(!r||r2(V,r,t))});return M.call(A),()=>{M.on(".drag",null)}}}},[t,e,n,r,o,c,s,u,L]),d}function YI(){const t=or();return te.useCallback(n=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:o,getNodes:u,snapToGrid:c,snapGrid:d,onError:f,nodesDraggable:m}=t.getState(),y=u().filter(C=>C.selected&&(C.draggable||m&&typeof C.draggable>"u")),_=c?d[0]:5,T=c?d[1]:5,I=n.isShiftPressed?4:1,N=n.x*_*I,k=n.y*T*I,x=y.map(C=>{if(C.positionAbsolute){const L={x:C.positionAbsolute.x+N,y:C.positionAbsolute.y+k};c&&(L.x=d[0]*Math.round(L.x/d[0]),L.y=d[1]*Math.round(L.y/d[1]));const{positionAbsolute:M,position:q}=jI(C,L,r,s,void 0,f);C.position=q,C.positionAbsolute=M}return C});o(x,!0,!1)},[])}const Sl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var ah=t=>{const e=({id:n,type:r,data:s,xPos:o,yPos:u,xPosOrigin:c,yPosOrigin:d,selected:f,onClick:m,onMouseEnter:y,onMouseMove:_,onMouseLeave:T,onContextMenu:I,onDoubleClick:N,style:k,className:x,isDraggable:C,isSelectable:L,isConnectable:M,isFocusable:q,selectNodesOnDrag:B,sourcePosition:S,targetPosition:A,hidden:D,resizeObserver:V,dragHandle:H,zIndex:z,isParent:O,noDragClassName:U,noPanClassName:X,initialized:Y,disableKeyboardA11y:W,ariaLabel:se,rfId:re,hasHandleBounds:w})=>{const ee=or(),ae=te.useRef(null),j=te.useRef(null),ge=te.useRef(S),Ce=te.useRef(A),Te=te.useRef(r),Ve=L||C||m||y||_||T,Ie=YI(),Me=sh(n,ee.getState,y),ze=sh(n,ee.getState,_),Je=sh(n,ee.getState,T),an=sh(n,ee.getState,I),Jt=sh(n,ee.getState,N),on=Qe=>{const{nodeDragThreshold:qe}=ee.getState();if(L&&(!B||!C||qe>0)&&EE({id:n,store:ee,nodeRef:ae}),m){const cn=ee.getState().nodeInternals.get(n);cn&&m(Qe,{...cn})}},Dt=Qe=>{if(!fE(Qe)&&!W)if(mI.includes(Qe.key)&&L){const qe=Qe.key==="Escape";EE({id:n,store:ee,unselect:qe,nodeRef:ae})}else C&&f&&Object.prototype.hasOwnProperty.call(Sl,Qe.key)&&(ee.setState({ariaLiveMessage:`Moved selected node ${Qe.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~u}`}),Ie({x:Sl[Qe.key].x,y:Sl[Qe.key].y,isShiftPressed:Qe.shiftKey}))};te.useEffect(()=>()=>{j.current&&(V?.unobserve(j.current),j.current=null)},[]),te.useEffect(()=>{if(ae.current&&!D){const Qe=ae.current;(!Y||!w||j.current!==Qe)&&(j.current&&V?.unobserve(j.current),V?.observe(Qe),j.current=Qe)}},[D,Y,w]),te.useEffect(()=>{const Qe=Te.current!==r,qe=ge.current!==S,cn=Ce.current!==A;ae.current&&(Qe||qe||cn)&&(Qe&&(Te.current=r),qe&&(ge.current=S),cn&&(Ce.current=A),ee.getState().updateNodeDimensions([{id:n,nodeElement:ae.current,forceUpdate:!0}]))},[n,r,S,A]);const Dn=qI({nodeRef:ae,disabled:D||!C,noDragClassName:U,handleSelector:H,nodeId:n,isSelectable:L,selectNodesOnDrag:B});return D?null:_e.createElement("div",{className:jr(["react-flow__node",`react-flow__node-${r}`,{[X]:C},x,{selected:f,selectable:L,parent:O,dragging:Dn}]),ref:ae,style:{zIndex:z,transform:`translate(${c}px,${d}px)`,pointerEvents:Ve?"all":"none",visibility:Y?"visible":"hidden",...k},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Me,onMouseMove:ze,onMouseLeave:Je,onContextMenu:an,onClick:on,onDoubleClick:Jt,onKeyDown:q?Dt:void 0,tabIndex:q?0:void 0,role:q?"button":void 0,"aria-describedby":W?void 0:`${PI}-${re}`,"aria-label":se},_e.createElement(oM,{value:n},_e.createElement(t,{id:n,data:s,type:r,xPos:o,yPos:u,selected:f,isConnectable:M,sourcePosition:S,targetPosition:A,dragging:Dn,dragHandle:H,zIndex:z})))};return e.displayName="NodeWrapper",te.memo(e)};const XM=t=>{const e=t.getNodes().filter(n=>n.selected);return{...A1(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function KM({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=or(),{width:s,height:o,x:u,y:c,transformString:d,userSelectionActive:f}=gn(XM,Ir),m=YI(),y=te.useRef(null);if(te.useEffect(()=>{n||y.current?.focus({preventScroll:!0})},[n]),qI({nodeRef:y}),f||!s||!o)return null;const _=t?I=>{const N=r.getState().getNodes().filter(k=>k.selected);t(I,N)}:void 0,T=I=>{Object.prototype.hasOwnProperty.call(Sl,I.key)&&m({x:Sl[I.key].x,y:Sl[I.key].y,isShiftPressed:I.shiftKey})};return _e.createElement("div",{className:jr(["react-flow__nodesselection","react-flow__container",e]),style:{transform:d}},_e.createElement("div",{ref:y,className:"react-flow__nodesselection-rect",onContextMenu:_,tabIndex:n?void 0:-1,onKeyDown:n?void 0:T,style:{width:s,height:o,top:c,left:u}}))}var QM=te.memo(KM);const WM=t=>t.nodesSelectionActive,GI=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:u,deleteKeyCode:c,onMove:d,onMoveStart:f,onMoveEnd:m,selectionKeyCode:y,selectionOnDrag:_,selectionMode:T,onSelectionStart:I,onSelectionEnd:N,multiSelectionKeyCode:k,panActivationKeyCode:x,zoomActivationKeyCode:C,elementsSelectable:L,zoomOnScroll:M,zoomOnPinch:q,panOnScroll:B,panOnScrollSpeed:S,panOnScrollMode:A,zoomOnDoubleClick:D,panOnDrag:V,defaultViewport:H,translateExtent:z,minZoom:O,maxZoom:U,preventScrolling:X,onSelectionContextMenu:Y,noWheelClassName:W,noPanClassName:se,disableKeyboardA11y:re})=>{const w=gn(WM),ee=Zh(y),ae=Zh(x),j=ae||V,ge=ae||B,Ce=ee||_&&j!==!0;return LM({deleteKeyCode:c,multiSelectionKeyCode:k}),_e.createElement(HM,{onMove:d,onMoveStart:f,onMoveEnd:m,onPaneContextMenu:o,elementsSelectable:L,zoomOnScroll:M,zoomOnPinch:q,panOnScroll:ge,panOnScrollSpeed:S,panOnScrollMode:A,zoomOnDoubleClick:D,panOnDrag:!ee&&j,defaultViewport:H,translateExtent:z,minZoom:O,maxZoom:U,zoomActivationKeyCode:C,preventScrolling:X,noWheelClassName:W,noPanClassName:se},_e.createElement(zI,{onSelectionStart:I,onSelectionEnd:N,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:u,panOnDrag:j,isSelecting:!!Ce,selectionMode:T},t,w&&_e.createElement(QM,{onSelectionContextMenu:Y,noPanClassName:se,disableKeyboardA11y:re})))};GI.displayName="FlowRenderer";var ZM=te.memo(GI);function JM(t){return gn(te.useCallback(n=>t?TI(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function eL(t){const e={input:ah(t.input||RI),default:ah(t.default||yE),output:ah(t.output||OI),group:ah(t.group||w1)},n={},r=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,o)=>(s[o]=ah(t[o]||yE),s),n);return{...e,...r}}const tL=({x:t,y:e,width:n,height:r,origin:s})=>!n||!r?{x:t,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:e}:{x:t-n*s[0],y:e-r*s[1]},nL=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),$I=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:o,onError:u}=gn(nL,Ir),c=JM(t.onlyRenderVisibleElements),d=te.useRef(),f=te.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const m=new ResizeObserver(y=>{const _=y.map(T=>({id:T.target.getAttribute("data-id"),nodeElement:T.target,forceUpdate:!0}));o(_)});return d.current=m,m},[]);return te.useEffect(()=>()=>{d?.current?.disconnect()},[]),_e.createElement("div",{className:"react-flow__nodes",style:I1},c.map(m=>{let y=m.type||"default";t.nodeTypes[y]||(u?.("003",pa.error003(y)),y="default");const _=t.nodeTypes[y]||t.nodeTypes.default,T=!!(m.draggable||e&&typeof m.draggable>"u"),I=!!(m.selectable||s&&typeof m.selectable>"u"),N=!!(m.connectable||n&&typeof m.connectable>"u"),k=!!(m.focusable||r&&typeof m.focusable>"u"),x=t.nodeExtent?E1(m.positionAbsolute,t.nodeExtent):m.positionAbsolute,C=x?.x??0,L=x?.y??0,M=tL({x:C,y:L,width:m.width??0,height:m.height??0,origin:t.nodeOrigin});return _e.createElement(_,{key:m.id,id:m.id,className:m.className,style:m.style,type:y,data:m.data,sourcePosition:m.sourcePosition||je.Bottom,targetPosition:m.targetPosition||je.Top,hidden:m.hidden,xPos:C,yPos:L,xPosOrigin:M.x,yPosOrigin:M.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!m.selected,isDraggable:T,isSelectable:I,isConnectable:N,isFocusable:k,resizeObserver:f,dragHandle:m.dragHandle,zIndex:m[vn]?.z??0,isParent:!!m[vn]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!m.width&&!!m.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:m.ariaLabel,hasHandleBounds:!!m[vn]?.handleBounds})}))};$I.displayName="NodeRenderer";var rL=te.memo($I);const iL=(t,e,n)=>n===je.Left?t-e:n===je.Right?t+e:t,sL=(t,e,n)=>n===je.Top?t-e:n===je.Bottom?t+e:t,s2="react-flow__edgeupdater",a2=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:o,onMouseOut:u,type:c})=>_e.createElement("circle",{onMouseDown:s,onMouseEnter:o,onMouseOut:u,className:jr([s2,`${s2}-${c}`]),cx:iL(e,r,t),cy:sL(n,r,t),r,stroke:"transparent",fill:"transparent"}),aL=()=>!0;var ul=t=>{const e=({id:n,className:r,type:s,data:o,onClick:u,onEdgeDoubleClick:c,selected:d,animated:f,label:m,labelStyle:y,labelShowBg:_,labelBgStyle:T,labelBgPadding:I,labelBgBorderRadius:N,style:k,source:x,target:C,sourceX:L,sourceY:M,targetX:q,targetY:B,sourcePosition:S,targetPosition:A,elementsSelectable:D,hidden:V,sourceHandleId:H,targetHandleId:z,onContextMenu:O,onMouseEnter:U,onMouseMove:X,onMouseLeave:Y,reconnectRadius:W,onReconnect:se,onReconnectStart:re,onReconnectEnd:w,markerEnd:ee,markerStart:ae,rfId:j,ariaLabel:ge,isFocusable:Ce,isReconnectable:Te,pathOptions:Ve,interactionWidth:Ie,disableKeyboardA11y:Me})=>{const ze=te.useRef(null),[Je,an]=te.useState(!1),[Jt,on]=te.useState(!1),Dt=or(),Dn=te.useMemo(()=>`url('#${pE(ae,j)}')`,[ae,j]),Qe=te.useMemo(()=>`url('#${pE(ee,j)}')`,[ee,j]);if(V)return null;const qe=Tt=>{const{edges:Ht,addSelectedEdges:zt,unselectNodesAndEdges:Ft,multiSelectionActive:vt}=Dt.getState(),lt=Ht.find(Wt=>Wt.id===n);lt&&(D&&(Dt.setState({nodesSelectionActive:!1}),lt.selected&&vt?(Ft({nodes:[],edges:[lt]}),ze.current?.blur()):zt([n])),u&&u(Tt,lt))},cn=ih(n,Dt.getState,c),Vn=ih(n,Dt.getState,O),Hn=ih(n,Dt.getState,U),Kn=ih(n,Dt.getState,X),zn=ih(n,Dt.getState,Y),An=(Tt,Ht)=>{if(Tt.button!==0)return;const{edges:zt,isValidConnection:Ft}=Dt.getState(),vt=Ht?C:x,lt=(Ht?z:H)||null,Wt=Ht?"target":"source",Gt=Ft||aL,Gi=Ht,br=zt.find(Tr=>Tr.id===n);on(!0),re?.(Tt,br,Wt);const Fn=Tr=>{on(!1),w?.(Tr,br,Wt)};wI({event:Tt,handleId:lt,nodeId:vt,onConnect:Tr=>se?.(br,Tr),isTarget:Gi,getState:Dt.getState,setState:Dt.setState,isValidConnection:Gt,edgeUpdaterType:Wt,onReconnectEnd:Fn})},ur=Tt=>An(Tt,!0),de=Tt=>An(Tt,!1),ve=()=>an(!0),He=()=>an(!1),Ye=!D&&!u,ut=Tt=>{if(!Me&&mI.includes(Tt.key)&&D){const{unselectNodesAndEdges:Ht,addSelectedEdges:zt,edges:Ft}=Dt.getState();Tt.key==="Escape"?(ze.current?.blur(),Ht({edges:[Ft.find(lt=>lt.id===n)]})):zt([n])}};return _e.createElement("g",{className:jr(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:d,animated:f,inactive:Ye,updating:Je}]),onClick:qe,onDoubleClick:cn,onContextMenu:Vn,onMouseEnter:Hn,onMouseMove:Kn,onMouseLeave:zn,onKeyDown:Ce?ut:void 0,tabIndex:Ce?0:void 0,role:Ce?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":ge===null?void 0:ge||`Edge from ${x} to ${C}`,"aria-describedby":Ce?`${MI}-${j}`:void 0,ref:ze},!Jt&&_e.createElement(t,{id:n,source:x,target:C,selected:d,animated:f,label:m,labelStyle:y,labelShowBg:_,labelBgStyle:T,labelBgPadding:I,labelBgBorderRadius:N,data:o,style:k,sourceX:L,sourceY:M,targetX:q,targetY:B,sourcePosition:S,targetPosition:A,sourceHandleId:H,targetHandleId:z,markerStart:Dn,markerEnd:Qe,pathOptions:Ve,interactionWidth:Ie}),Te&&_e.createElement(_e.Fragment,null,(Te==="source"||Te===!0)&&_e.createElement(a2,{position:S,centerX:L,centerY:M,radius:W,onMouseDown:ur,onMouseEnter:ve,onMouseOut:He,type:"source"}),(Te==="target"||Te===!0)&&_e.createElement(a2,{position:A,centerX:q,centerY:B,radius:W,onMouseDown:de,onMouseEnter:ve,onMouseOut:He,type:"target"})))};return e.displayName="EdgeWrapper",te.memo(e)};function oL(t){const e={default:ul(t.default||G0),straight:ul(t.bezier||v1),step:ul(t.step||T1),smoothstep:ul(t.step||Im),simplebezier:ul(t.simplebezier||b1)},n={},r=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,o)=>(s[o]=ul(t[o]||G0),s),n);return{...e,...r}}function o2(t,e,n=null){const r=(n?.x||0)+e.x,s=(n?.y||0)+e.y,o=n?.width||e.width,u=n?.height||e.height;switch(t){case je.Top:return{x:r+o/2,y:s};case je.Right:return{x:r+o,y:s+u/2};case je.Bottom:return{x:r+o/2,y:s+u};case je.Left:return{x:r,y:s+u/2}}}function u2(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const uL=(t,e,n,r,s,o)=>{const u=o2(n,t,e),c=o2(o,r,s);return{sourceX:u.x,sourceY:u.y,targetX:c.x,targetY:c.y}};function lL({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:s,targetHeight:o,width:u,height:c,transform:d}){const f={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+s),y2:Math.max(t.y+r,e.y+o)};f.x===f.x2&&(f.x2+=1),f.y===f.y2&&(f.y2+=1);const m=_1({x:(0-d[0])/d[2],y:(0-d[1])/d[2],width:u/d[2],height:c/d[2]}),y=Math.max(0,Math.min(m.x2,f.x2)-Math.max(m.x,f.x)),_=Math.max(0,Math.min(m.y2,f.y2)-Math.max(m.y,f.y));return Math.ceil(y*_)>0}function l2(t){const e=t?.[vn]?.handleBounds||null,n=e&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},e,!!n]}const cL=[{level:0,isMaxLevel:!0,edges:[]}];function hL(t,e,n=!1){let r=-1;const s=t.reduce((u,c)=>{const d=ji(c.zIndex);let f=d?c.zIndex:0;if(n){const m=e.get(c.target),y=e.get(c.source),_=c.selected||m?.selected||y?.selected,T=Math.max(y?.[vn]?.z||0,m?.[vn]?.z||0,1e3);f=(d?c.zIndex:0)+(_?T:0)}return u[f]?u[f].push(c):u[f]=[c],r=f>r?f:r,u},{}),o=Object.entries(s).map(([u,c])=>{const d=+u;return{edges:c,level:d,isMaxLevel:d===r}});return o.length===0?cL:o}function dL(t,e,n){const r=gn(te.useCallback(s=>t?s.edges.filter(o=>{const u=e.get(o.source),c=e.get(o.target);return u?.width&&u?.height&&c?.width&&c?.height&&lL({sourcePos:u.positionAbsolute||{x:0,y:0},targetPos:c.positionAbsolute||{x:0,y:0},sourceWidth:u.width,sourceHeight:u.height,targetWidth:c.width,targetHeight:c.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,e]));return hL(r,e,n)}const fL=({color:t="none",strokeWidth:e=1})=>_e.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),mL=({color:t="none",strokeWidth:e=1})=>_e.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),c2={[Wh.Arrow]:fL,[Wh.ArrowClosed]:mL};function pL(t){const e=or();return te.useMemo(()=>Object.prototype.hasOwnProperty.call(c2,t)?c2[t]:(e.getState().onError?.("009",pa.error009(t)),null),[t])}const gL=({id:t,type:e,color:n,width:r=12.5,height:s=12.5,markerUnits:o="strokeWidth",strokeWidth:u,orient:c="auto-start-reverse"})=>{const d=pL(e);return d?_e.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:c,refX:"0",refY:"0"},_e.createElement(d,{color:n,strokeWidth:u})):null},yL=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((s,o)=>([o.markerStart,o.markerEnd].forEach(u=>{if(u&&typeof u=="object"){const c=pE(u,e);r.includes(c)||(s.push({id:c,color:u.color||t,...u}),r.push(c))}}),s),[]).sort((s,o)=>s.id.localeCompare(o.id))},XI=({defaultColor:t,rfId:e})=>{const n=gn(te.useCallback(yL({defaultColor:t,rfId:e}),[t,e]),(r,s)=>!(r.length!==s.length||r.some((o,u)=>o.id!==s[u].id)));return _e.createElement("defs",null,n.map(r=>_e.createElement(gL,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};XI.displayName="MarkerDefinitions";var EL=te.memo(XI);const _L=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),KI=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:s,noPanClassName:o,onEdgeContextMenu:u,onEdgeMouseEnter:c,onEdgeMouseMove:d,onEdgeMouseLeave:f,onEdgeClick:m,onEdgeDoubleClick:y,onReconnect:_,onReconnectStart:T,onReconnectEnd:I,reconnectRadius:N,children:k,disableKeyboardA11y:x})=>{const{edgesFocusable:C,edgesUpdatable:L,elementsSelectable:M,width:q,height:B,connectionMode:S,nodeInternals:A,onError:D}=gn(_L,Ir),V=dL(e,A,n);return q?_e.createElement(_e.Fragment,null,V.map(({level:H,edges:z,isMaxLevel:O})=>_e.createElement("svg",{key:H,style:{zIndex:H},width:q,height:B,className:"react-flow__edges react-flow__container"},O&&_e.createElement(EL,{defaultColor:t,rfId:r}),_e.createElement("g",null,z.map(U=>{const[X,Y,W]=l2(A.get(U.source)),[se,re,w]=l2(A.get(U.target));if(!W||!w)return null;let ee=U.type||"default";s[ee]||(D?.("011",pa.error011(ee)),ee="default");const ae=s[ee]||s.default,j=S===po.Strict?re.target:(re.target??[]).concat(re.source??[]),ge=u2(Y.source,U.sourceHandle),Ce=u2(j,U.targetHandle),Te=ge?.position||je.Bottom,Ve=Ce?.position||je.Top,Ie=!!(U.focusable||C&&typeof U.focusable>"u"),Me=U.reconnectable||U.updatable,ze=typeof _<"u"&&(Me||L&&typeof Me>"u");if(!ge||!Ce)return D?.("008",pa.error008(ge,U)),null;const{sourceX:Je,sourceY:an,targetX:Jt,targetY:on}=uL(X,ge,Te,se,Ce,Ve);return _e.createElement(ae,{key:U.id,id:U.id,className:jr([U.className,o]),type:ee,data:U.data,selected:!!U.selected,animated:!!U.animated,hidden:!!U.hidden,label:U.label,labelStyle:U.labelStyle,labelShowBg:U.labelShowBg,labelBgStyle:U.labelBgStyle,labelBgPadding:U.labelBgPadding,labelBgBorderRadius:U.labelBgBorderRadius,style:U.style,source:U.source,target:U.target,sourceHandleId:U.sourceHandle,targetHandleId:U.targetHandle,markerEnd:U.markerEnd,markerStart:U.markerStart,sourceX:Je,sourceY:an,targetX:Jt,targetY:on,sourcePosition:Te,targetPosition:Ve,elementsSelectable:M,onContextMenu:u,onMouseEnter:c,onMouseMove:d,onMouseLeave:f,onClick:m,onEdgeDoubleClick:y,onReconnect:_,onReconnectStart:T,onReconnectEnd:I,reconnectRadius:N,rfId:r,ariaLabel:U.ariaLabel,isFocusable:Ie,isReconnectable:ze,pathOptions:"pathOptions"in U?U.pathOptions:void 0,interactionWidth:U.interactionWidth,disableKeyboardA11y:x})})))),k):null};KI.displayName="EdgeRenderer";var bL=te.memo(KI);const TL=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function vL({children:t}){const e=gn(TL);return _e.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function SL(t){const e=pd(),n=te.useRef(!1);te.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const AL={[je.Left]:je.Right,[je.Right]:je.Left,[je.Top]:je.Bottom,[je.Bottom]:je.Top},QI=({nodeId:t,handleType:e,style:n,type:r=Ja.Bezier,CustomComponent:s,connectionStatus:o})=>{const{fromNode:u,handleId:c,toX:d,toY:f,connectionMode:m}=gn(te.useCallback(B=>({fromNode:B.nodeInternals.get(t),handleId:B.connectionHandleId,toX:(B.connectionPosition.x-B.transform[0])/B.transform[2],toY:(B.connectionPosition.y-B.transform[1])/B.transform[2],connectionMode:B.connectionMode}),[t]),Ir),y=u?.[vn]?.handleBounds;let _=y?.[e];if(m===po.Loose&&(_=_||y?.[e==="source"?"target":"source"]),!u||!_)return null;const T=c?_.find(B=>B.id===c):_[0],I=T?T.x+T.width/2:(u.width??0)/2,N=T?T.y+T.height/2:u.height??0,k=(u.positionAbsolute?.x??0)+I,x=(u.positionAbsolute?.y??0)+N,C=T?.position,L=C?AL[C]:null;if(!C||!L)return null;if(s)return _e.createElement(s,{connectionLineType:r,connectionLineStyle:n,fromNode:u,fromHandle:T,fromX:k,fromY:x,toX:d,toY:f,fromPosition:C,toPosition:L,connectionStatus:o});let M="";const q={sourceX:k,sourceY:x,sourcePosition:C,targetX:d,targetY:f,targetPosition:L};return r===Ja.Bezier?[M]=_I(q):r===Ja.Step?[M]=mE({...q,borderRadius:0}):r===Ja.SmoothStep?[M]=mE(q):r===Ja.SimpleBezier?[M]=EI(q):M=`M${k},${x} ${d},${f}`,_e.createElement("path",{d:M,fill:"none",className:"react-flow__connection-path",style:n})};QI.displayName="ConnectionLine";const xL=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function wL({containerStyle:t,style:e,type:n,component:r}){const{nodeId:s,handleType:o,nodesConnectable:u,width:c,height:d,connectionStatus:f}=gn(xL,Ir);return!(s&&o&&c&&u)?null:_e.createElement("svg",{style:t,width:c,height:d,className:"react-flow__edges react-flow__connectionline react-flow__container"},_e.createElement("g",{className:jr(["react-flow__connection",f])},_e.createElement(QI,{nodeId:s,handleType:o,style:e,type:n,CustomComponent:r,connectionStatus:f})))}function h2(t,e){return te.useRef(null),or(),te.useMemo(()=>e(t),[t])}const WI=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:s,onInit:o,onNodeClick:u,onEdgeClick:c,onNodeDoubleClick:d,onEdgeDoubleClick:f,onNodeMouseEnter:m,onNodeMouseMove:y,onNodeMouseLeave:_,onNodeContextMenu:T,onSelectionContextMenu:I,onSelectionStart:N,onSelectionEnd:k,connectionLineType:x,connectionLineStyle:C,connectionLineComponent:L,connectionLineContainerStyle:M,selectionKeyCode:q,selectionOnDrag:B,selectionMode:S,multiSelectionKeyCode:A,panActivationKeyCode:D,zoomActivationKeyCode:V,deleteKeyCode:H,onlyRenderVisibleElements:z,elementsSelectable:O,selectNodesOnDrag:U,defaultViewport:X,translateExtent:Y,minZoom:W,maxZoom:se,preventScrolling:re,defaultMarkerColor:w,zoomOnScroll:ee,zoomOnPinch:ae,panOnScroll:j,panOnScrollSpeed:ge,panOnScrollMode:Ce,zoomOnDoubleClick:Te,panOnDrag:Ve,onPaneClick:Ie,onPaneMouseEnter:Me,onPaneMouseMove:ze,onPaneMouseLeave:Je,onPaneScroll:an,onPaneContextMenu:Jt,onEdgeContextMenu:on,onEdgeMouseEnter:Dt,onEdgeMouseMove:Dn,onEdgeMouseLeave:Qe,onReconnect:qe,onReconnectStart:cn,onReconnectEnd:Vn,reconnectRadius:Hn,noDragClassName:Kn,noWheelClassName:zn,noPanClassName:An,elevateEdgesOnSelect:ur,disableKeyboardA11y:de,nodeOrigin:ve,nodeExtent:He,rfId:Ye})=>{const ut=h2(t,eL),Tt=h2(e,oL);return SL(o),_e.createElement(ZM,{onPaneClick:Ie,onPaneMouseEnter:Me,onPaneMouseMove:ze,onPaneMouseLeave:Je,onPaneContextMenu:Jt,onPaneScroll:an,deleteKeyCode:H,selectionKeyCode:q,selectionOnDrag:B,selectionMode:S,onSelectionStart:N,onSelectionEnd:k,multiSelectionKeyCode:A,panActivationKeyCode:D,zoomActivationKeyCode:V,elementsSelectable:O,onMove:n,onMoveStart:r,onMoveEnd:s,zoomOnScroll:ee,zoomOnPinch:ae,zoomOnDoubleClick:Te,panOnScroll:j,panOnScrollSpeed:ge,panOnScrollMode:Ce,panOnDrag:Ve,defaultViewport:X,translateExtent:Y,minZoom:W,maxZoom:se,onSelectionContextMenu:I,preventScrolling:re,noDragClassName:Kn,noWheelClassName:zn,noPanClassName:An,disableKeyboardA11y:de},_e.createElement(vL,null,_e.createElement(bL,{edgeTypes:Tt,onEdgeClick:c,onEdgeDoubleClick:f,onlyRenderVisibleElements:z,onEdgeContextMenu:on,onEdgeMouseEnter:Dt,onEdgeMouseMove:Dn,onEdgeMouseLeave:Qe,onReconnect:qe,onReconnectStart:cn,onReconnectEnd:Vn,reconnectRadius:Hn,defaultMarkerColor:w,noPanClassName:An,elevateEdgesOnSelect:!!ur,disableKeyboardA11y:de,rfId:Ye},_e.createElement(wL,{style:C,type:x,component:L,containerStyle:M})),_e.createElement("div",{className:"react-flow__edgelabel-renderer"}),_e.createElement(rL,{nodeTypes:ut,onNodeClick:u,onNodeDoubleClick:d,onNodeMouseEnter:m,onNodeMouseMove:y,onNodeMouseLeave:_,onNodeContextMenu:T,selectNodesOnDrag:U,onlyRenderVisibleElements:z,noPanClassName:An,noDragClassName:Kn,disableKeyboardA11y:de,nodeOrigin:ve,nodeExtent:He,rfId:Ye})))};WI.displayName="GraphView";var IL=te.memo(WI);const _E=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],qa={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:_E,nodeExtent:_E,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:po.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:tM,isValidConnection:void 0},CL=()=>mO((t,e)=>({...qa,setNodes:n=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:o}=e();t({nodeInternals:py(n,r,s,o)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(n,r)=>{const s=typeof n<"u",o=typeof r<"u",u=s?py(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:u,edges:o?r:[],hasDefaultNodes:s,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:o,fitViewOnInitDone:u,fitViewOnInitOptions:c,domNode:d,nodeOrigin:f}=e(),m=d?.querySelector(".react-flow__viewport");if(!m)return;const y=window.getComputedStyle(m),{m22:_}=new window.DOMMatrixReadOnly(y.transform),T=n.reduce((N,k)=>{const x=s.get(k.id);if(x?.hidden)s.set(x.id,{...x,[vn]:{...x[vn],handleBounds:void 0}});else if(x){const C=y1(k.nodeElement);!!(C.width&&C.height&&(x.width!==C.width||x.height!==C.height||k.forceUpdate))&&(s.set(x.id,{...x,[vn]:{...x[vn],handleBounds:{source:i2(".source",k.nodeElement,_,f),target:i2(".target",k.nodeElement,_,f)}},...C}),N.push({id:x.id,type:"dimensions",dimensions:C}))}return N},[]);BI(s,f);const I=u||o&&!u&&UI(e,{initial:!0,...c});t({nodeInternals:new Map(s),fitViewOnInitDone:I}),T?.length>0&&r?.(T)},updateNodePositions:(n,r=!0,s=!1)=>{const{triggerNodeChanges:o}=e(),u=n.map(c=>{const d={id:c.id,type:"position",dragging:s};return r&&(d.positionAbsolute=c.positionAbsolute,d.position=c.position),d});o(u)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:o,nodeOrigin:u,getNodes:c,elevateNodesOnSelect:d}=e();if(n?.length){if(o){const f=HI(n,c()),m=py(f,s,u,d);t({nodeInternals:m})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:s,getNodes:o}=e();let u,c=null;r?u=n.map(d=>Za(d,!0)):(u=yl(o(),n),c=yl(s,[])),n0({changedNodes:u,changedEdges:c,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:s,getNodes:o}=e();let u,c=null;r?u=n.map(d=>Za(d,!0)):(u=yl(s,n),c=yl(o(),[])),n0({changedNodes:c,changedEdges:u,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:s,getNodes:o}=e(),u=n||o(),c=r||s,d=u.map(m=>(m.selected=!1,Za(m.id,!1))),f=c.map(m=>Za(m.id,!1));n0({changedNodes:d,changedEdges:f,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:s}=e();r?.scaleExtent([n,s]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:s}=e();r?.scaleExtent([s,n]),t({maxZoom:n})},setTranslateExtent:n=>{e().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),o=r().filter(c=>c.selected).map(c=>Za(c.id,!1)),u=n.filter(c=>c.selected).map(c=>Za(c.id,!1));n0({changedNodes:o,changedEdges:u,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(s=>{s.positionAbsolute=E1(s.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:s,height:o,d3Zoom:u,d3Selection:c,translateExtent:d}=e();if(!u||!c||!n.x&&!n.y)return!1;const f=oo.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),m=[[0,0],[s,o]],y=u?.constrain()(f,m,d);return u.transform(c,y),r[0]!==y.x||r[1]!==y.y||r[2]!==y.k},cancelConnection:()=>t({connectionNodeId:qa.connectionNodeId,connectionHandleId:qa.connectionHandleId,connectionHandleType:qa.connectionHandleType,connectionStatus:qa.connectionStatus,connectionStartHandle:qa.connectionStartHandle,connectionEndHandle:qa.connectionEndHandle}),reset:()=>t({...qa})}),Object.is),ZI=({children:t})=>{const e=te.useRef(null);return e.current||(e.current=CL()),_e.createElement($P,{value:e.current},t)};ZI.displayName="ReactFlowProvider";const JI=({children:t})=>te.useContext(wm)?_e.createElement(_e.Fragment,null,t):_e.createElement(ZI,null,t);JI.displayName="ReactFlowWrapper";const NL={input:RI,default:yE,output:OI,group:w1},RL={default:G0,straight:v1,step:T1,smoothstep:Im,simplebezier:b1},DL=[0,0],OL=[15,15],kL={x:0,y:0,zoom:1},PL={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},eC=te.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:o=NL,edgeTypes:u=RL,onNodeClick:c,onEdgeClick:d,onInit:f,onMove:m,onMoveStart:y,onMoveEnd:_,onConnect:T,onConnectStart:I,onConnectEnd:N,onClickConnectStart:k,onClickConnectEnd:x,onNodeMouseEnter:C,onNodeMouseMove:L,onNodeMouseLeave:M,onNodeContextMenu:q,onNodeDoubleClick:B,onNodeDragStart:S,onNodeDrag:A,onNodeDragStop:D,onNodesDelete:V,onEdgesDelete:H,onSelectionChange:z,onSelectionDragStart:O,onSelectionDrag:U,onSelectionDragStop:X,onSelectionContextMenu:Y,onSelectionStart:W,onSelectionEnd:se,connectionMode:re=po.Strict,connectionLineType:w=Ja.Bezier,connectionLineStyle:ee,connectionLineComponent:ae,connectionLineContainerStyle:j,deleteKeyCode:ge="Backspace",selectionKeyCode:Ce="Shift",selectionOnDrag:Te=!1,selectionMode:Ve=Qh.Full,panActivationKeyCode:Ie="Space",multiSelectionKeyCode:Me=Y0()?"Meta":"Control",zoomActivationKeyCode:ze=Y0()?"Meta":"Control",snapToGrid:Je=!1,snapGrid:an=OL,onlyRenderVisibleElements:Jt=!1,selectNodesOnDrag:on=!0,nodesDraggable:Dt,nodesConnectable:Dn,nodesFocusable:Qe,nodeOrigin:qe=DL,edgesFocusable:cn,edgesUpdatable:Vn,elementsSelectable:Hn,defaultViewport:Kn=kL,minZoom:zn=.5,maxZoom:An=2,translateExtent:ur=_E,preventScrolling:de=!0,nodeExtent:ve,defaultMarkerColor:He="#b1b1b7",zoomOnScroll:Ye=!0,zoomOnPinch:ut=!0,panOnScroll:Tt=!1,panOnScrollSpeed:Ht=.5,panOnScrollMode:zt=nu.Free,zoomOnDoubleClick:Ft=!0,panOnDrag:vt=!0,onPaneClick:lt,onPaneMouseEnter:Wt,onPaneMouseMove:Gt,onPaneMouseLeave:Gi,onPaneScroll:br,onPaneContextMenu:Fn,children:Dr,onEdgeContextMenu:Tr,onEdgeDoubleClick:qr,onEdgeMouseEnter:zs,onEdgeMouseMove:ii,onEdgeMouseLeave:$i,onEdgeUpdate:Or,onEdgeUpdateStart:si,onEdgeUpdateEnd:$t,onReconnect:Pt,onReconnectStart:hn,onReconnectEnd:En,reconnectRadius:us=10,edgeUpdaterRadius:Co=10,onNodesChange:kr,onEdgesChange:ls,noDragClassName:Ai="nodrag",noWheelClassName:ai="nowheel",noPanClassName:Pr="nopan",fitView:Qn=!1,fitViewOptions:Mr,connectOnClick:jn=!0,attributionPosition:ne,proOptions:pe,defaultEdgeOptions:De,elevateNodesOnSelect:Le=!0,elevateEdgesOnSelect:pt=!1,disableKeyboardA11y:rt=!1,autoPanOnConnect:jt=!0,autoPanOnNodeDrag:Mt=!0,connectionRadius:Wn=20,isValidConnection:Lt,onError:Nt,style:Bt,id:On,nodeDragThreshold:_n,...xn},Lr)=>{const Br=On||"1";return _e.createElement("div",{...xn,style:{...Bt,...PL},ref:Lr,className:jr(["react-flow",s]),"data-testid":"rf__wrapper",id:On},_e.createElement(JI,null,_e.createElement(IL,{onInit:f,onMove:m,onMoveStart:y,onMoveEnd:_,onNodeClick:c,onEdgeClick:d,onNodeMouseEnter:C,onNodeMouseMove:L,onNodeMouseLeave:M,onNodeContextMenu:q,onNodeDoubleClick:B,nodeTypes:o,edgeTypes:u,connectionLineType:w,connectionLineStyle:ee,connectionLineComponent:ae,connectionLineContainerStyle:j,selectionKeyCode:Ce,selectionOnDrag:Te,selectionMode:Ve,deleteKeyCode:ge,multiSelectionKeyCode:Me,panActivationKeyCode:Ie,zoomActivationKeyCode:ze,onlyRenderVisibleElements:Jt,selectNodesOnDrag:on,defaultViewport:Kn,translateExtent:ur,minZoom:zn,maxZoom:An,preventScrolling:de,zoomOnScroll:Ye,zoomOnPinch:ut,zoomOnDoubleClick:Ft,panOnScroll:Tt,panOnScrollSpeed:Ht,panOnScrollMode:zt,panOnDrag:vt,onPaneClick:lt,onPaneMouseEnter:Wt,onPaneMouseMove:Gt,onPaneMouseLeave:Gi,onPaneScroll:br,onPaneContextMenu:Fn,onSelectionContextMenu:Y,onSelectionStart:W,onSelectionEnd:se,onEdgeContextMenu:Tr,onEdgeDoubleClick:qr,onEdgeMouseEnter:zs,onEdgeMouseMove:ii,onEdgeMouseLeave:$i,onReconnect:Pt??Or,onReconnectStart:hn??si,onReconnectEnd:En??$t,reconnectRadius:us??Co,defaultMarkerColor:He,noDragClassName:Ai,noWheelClassName:ai,noPanClassName:Pr,elevateEdgesOnSelect:pt,rfId:Br,disableKeyboardA11y:rt,nodeOrigin:qe,nodeExtent:ve}),_e.createElement(AM,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:T,onConnectStart:I,onConnectEnd:N,onClickConnectStart:k,onClickConnectEnd:x,nodesDraggable:Dt,nodesConnectable:Dn,nodesFocusable:Qe,edgesFocusable:cn,edgesUpdatable:Vn,elementsSelectable:Hn,elevateNodesOnSelect:Le,minZoom:zn,maxZoom:An,nodeExtent:ve,onNodesChange:kr,onEdgesChange:ls,snapToGrid:Je,snapGrid:an,connectionMode:re,translateExtent:ur,connectOnClick:jn,defaultEdgeOptions:De,fitView:Qn,fitViewOptions:Mr,onNodesDelete:V,onEdgesDelete:H,onNodeDragStart:S,onNodeDrag:A,onNodeDragStop:D,onSelectionDrag:U,onSelectionDragStart:O,onSelectionDragStop:X,noPanClassName:Pr,nodeOrigin:qe,rfId:Br,autoPanOnConnect:jt,autoPanOnNodeDrag:Mt,onError:Nt,connectionRadius:Wn,isValidConnection:Lt,nodeDragThreshold:_n}),_e.createElement(vM,{onSelectionChange:z}),Dr,_e.createElement(KP,{proOptions:pe,position:ne}),_e.createElement(NM,{rfId:Br,disableKeyboardA11y:rt})))});eC.displayName="ReactFlow";function tC(t){return e=>{const[n,r]=te.useState(e),s=te.useCallback(o=>r(u=>t(o,u)),[]);return[n,r,s]}}const ML=tC(HI),LL=tC(jM);function BL(){return _e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},_e.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function UL(){return _e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},_e.createElement("path",{d:"M0 0h32v4.2H0z"}))}function VL(){return _e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},_e.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function HL(){return _e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},_e.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function zL(){return _e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},_e.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const vh=({children:t,className:e,...n})=>_e.createElement("button",{type:"button",className:jr(["react-flow__controls-button",e]),...n},t);vh.displayName="ControlButton";const FL=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),nC=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:o,onZoomOut:u,onFitView:c,onInteractiveChange:d,className:f,children:m,position:y="bottom-left"})=>{const _=or(),[T,I]=te.useState(!1),{isInteractive:N,minZoomReached:k,maxZoomReached:x}=gn(FL,Ir),{zoomIn:C,zoomOut:L,fitView:M}=pd();if(te.useEffect(()=>{I(!0)},[]),!T)return null;const q=()=>{C(),o?.()},B=()=>{L(),u?.()},S=()=>{M(s),c?.()},A=()=>{_.setState({nodesDraggable:!N,nodesConnectable:!N,elementsSelectable:!N}),d?.(!N)};return _e.createElement(hI,{className:jr(["react-flow__controls",f]),position:y,style:t,"data-testid":"rf__controls"},e&&_e.createElement(_e.Fragment,null,_e.createElement(vh,{onClick:q,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:x},_e.createElement(BL,null)),_e.createElement(vh,{onClick:B,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:k},_e.createElement(UL,null))),n&&_e.createElement(vh,{className:"react-flow__controls-fitview",onClick:S,title:"fit view","aria-label":"fit view"},_e.createElement(VL,null)),r&&_e.createElement(vh,{className:"react-flow__controls-interactive",onClick:A,title:"toggle interactivity","aria-label":"toggle interactivity"},N?_e.createElement(zL,null):_e.createElement(HL,null)),m)};nC.displayName="Controls";var jL=te.memo(nC),qi;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(qi||(qi={}));function qL({color:t,dimensions:e,lineWidth:n}){return _e.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function YL({color:t,radius:e}){return _e.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const GL={[qi.Dots]:"#91919a",[qi.Lines]:"#eee",[qi.Cross]:"#e2e2e2"},$L={[qi.Dots]:1,[qi.Lines]:1,[qi.Cross]:6},XL=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function rC({id:t,variant:e=qi.Dots,gap:n=20,size:r,lineWidth:s=1,offset:o=2,color:u,style:c,className:d}){const f=te.useRef(null),{transform:m,patternId:y}=gn(XL,Ir),_=u||GL[e],T=r||$L[e],I=e===qi.Dots,N=e===qi.Cross,k=Array.isArray(n)?n:[n,n],x=[k[0]*m[2]||1,k[1]*m[2]||1],C=T*m[2],L=N?[C,C]:x,M=I?[C/o,C/o]:[L[0]/o,L[1]/o];return _e.createElement("svg",{className:jr(["react-flow__background",d]),style:{...c,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:f,"data-testid":"rf__background"},_e.createElement("pattern",{id:y+t,x:m[0]%x[0],y:m[1]%x[1],width:x[0],height:x[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${M[0]},-${M[1]})`},I?_e.createElement(YL,{color:_,radius:C/o}):_e.createElement(qL,{dimensions:L,color:_,lineWidth:s})),_e.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${y+t})`}))}rC.displayName="Background";var KL=te.memo(rC);function Nh(){return Nh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nh.apply(null,arguments)}var io=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var d2,f2={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/var _y,m2,p2,QL=(d2||(d2=1,_y=f2,function(){var t={}.hasOwnProperty;function e(){for(var n=[],r=0;r<arguments.length;r++){var s=arguments[r];if(s){var o=typeof s;if(o==="string"||o==="number")n.push(s);else if(Array.isArray(s)){if(s.length){var u=e.apply(null,s);u&&n.push(u)}}else if(o==="object")if(s.toString===Object.prototype.toString)for(var c in s)t.call(s,c)&&s[c]&&n.push(c);else n.push(s.toString())}}return n.join(" ")}_y.exports?(e.default=e,_y.exports=e):window.classNames=e}()),f2.exports),bE=gd(QL),g2,Ji=gd(function(){if(p2)return m2;p2=1;var t=/^\s+|\s+$/g,e=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,r=/^0o[0-7]+$/i,s=parseInt,o=Object.prototype.toString;function u(d){var f=typeof d;return!!d&&(f=="object"||f=="function")}function c(d){if(typeof d=="number")return d;if(function(y){return typeof y=="symbol"||function(_){return!!_&&typeof _=="object"}(y)&&o.call(y)=="[object Symbol]"}(d))return NaN;if(u(d)){var f=typeof d.valueOf=="function"?d.valueOf():d;d=u(f)?f+"":f}if(typeof d!="string")return d===0?d:+d;d=d.replace(t,"");var m=n.test(d);return m||r.test(d)?s(d.slice(2),m?2:8):e.test(d)?NaN:+d}return m2=function(d,f,m){return m===void 0&&(m=f,f=void 0),m!==void 0&&(m=(m=c(m))==m?m:0),f!==void 0&&(f=(f=c(f))==f?f:0),function(y,_,T){return y==y&&(T!==void 0&&(y=y<=T?y:T),_!==void 0&&(y=y>=_?y:_)),y}(c(d),f,m)}}()),by={exports:{}},WL=(g2||(g2=1,function(t,e){var n="__lodash_hash_undefined__",r=9007199254740991,s="[object Arguments]",o="[object Array]",u="[object Boolean]",c="[object Date]",d="[object Error]",f="[object Function]",m="[object Map]",y="[object Number]",_="[object Object]",T="[object Promise]",I="[object RegExp]",N="[object Set]",k="[object String]",x="[object Symbol]",C="[object WeakMap]",L="[object ArrayBuffer]",M="[object DataView]",q=/^\[object .+?Constructor\]$/,B=/^(?:0|[1-9]\d*)$/,S={};S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S[s]=S[o]=S[L]=S[u]=S[M]=S[c]=S[d]=S[f]=S[m]=S[y]=S[_]=S[I]=S[N]=S[k]=S[C]=!1;var A=typeof io=="object"&&io&&io.Object===Object&&io,D=typeof self=="object"&&self&&self.Object===Object&&self,V=A||D||Function("return this")(),H=e&&!e.nodeType&&e,z=H&&t&&!t.nodeType&&t,O=z&&z.exports===H,U=O&&A.process,X=function(){try{return U&&U.binding&&U.binding("util")}catch{}}(),Y=X&&X.isTypedArray;function W(ne,pe){for(var De=-1,Le=ne==null?0:ne.length;++De<Le;)if(pe(ne[De],De,ne))return!0;return!1}function se(ne){var pe=-1,De=Array(ne.size);return ne.forEach(function(Le,pt){De[++pe]=[pt,Le]}),De}function re(ne){var pe=-1,De=Array(ne.size);return ne.forEach(function(Le){De[++pe]=Le}),De}var w,ee,ae,j=Array.prototype,ge=Function.prototype,Ce=Object.prototype,Te=V["__core-js_shared__"],Ve=ge.toString,Ie=Ce.hasOwnProperty,Me=(w=/[^.]+$/.exec(Te&&Te.keys&&Te.keys.IE_PROTO||""))?"Symbol(src)_1."+w:"",ze=Ce.toString,Je=RegExp("^"+Ve.call(Ie).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),an=O?V.Buffer:void 0,Jt=V.Symbol,on=V.Uint8Array,Dt=Ce.propertyIsEnumerable,Dn=j.splice,Qe=Jt?Jt.toStringTag:void 0,qe=Object.getOwnPropertySymbols,cn=an?an.isBuffer:void 0,Vn=(ee=Object.keys,ae=Object,function(ne){return ee(ae(ne))}),Hn=si(V,"DataView"),Kn=si(V,"Map"),zn=si(V,"Promise"),An=si(V,"Set"),ur=si(V,"WeakMap"),de=si(Object,"create"),ve=En(Hn),He=En(Kn),Ye=En(zn),ut=En(An),Tt=En(ur),Ht=Jt?Jt.prototype:void 0,zt=Ht?Ht.valueOf:void 0;function Ft(ne){var pe=-1,De=ne==null?0:ne.length;for(this.clear();++pe<De;){var Le=ne[pe];this.set(Le[0],Le[1])}}function vt(ne){var pe=-1,De=ne==null?0:ne.length;for(this.clear();++pe<De;){var Le=ne[pe];this.set(Le[0],Le[1])}}function lt(ne){var pe=-1,De=ne==null?0:ne.length;for(this.clear();++pe<De;){var Le=ne[pe];this.set(Le[0],Le[1])}}function Wt(ne){var pe=-1,De=ne==null?0:ne.length;for(this.__data__=new lt;++pe<De;)this.add(ne[pe])}function Gt(ne){var pe=this.__data__=new vt(ne);this.size=pe.size}function Gi(ne,pe){var De=kr(ne),Le=!De&&Co(ne),pt=!De&&!Le&&ls(ne),rt=!De&&!Le&&!pt&&Mr(ne),jt=De||Le||pt||rt,Mt=jt?function(Nt,Bt){for(var On=-1,_n=Array(Nt);++On<Nt;)_n[On]=Bt(On);return _n}(ne.length,String):[],Wn=Mt.length;for(var Lt in ne)!Ie.call(ne,Lt)||jt&&(Lt=="length"||pt&&(Lt=="offset"||Lt=="parent")||rt&&(Lt=="buffer"||Lt=="byteLength"||Lt=="byteOffset")||hn(Lt,Wn))||Mt.push(Lt);return Mt}function br(ne,pe){for(var De=ne.length;De--;)if(us(ne[De][0],pe))return De;return-1}function Fn(ne){return ne==null?ne===void 0?"[object Undefined]":"[object Null]":Qe&&Qe in Object(ne)?function(pe){var De=Ie.call(pe,Qe),Le=pe[Qe];try{pe[Qe]=void 0;var pt=!0}catch{}var rt=ze.call(pe);return pt&&(De?pe[Qe]=Le:delete pe[Qe]),rt}(ne):function(pe){return ze.call(pe)}(ne)}function Dr(ne){return Qn(ne)&&Fn(ne)==s}function Tr(ne,pe,De,Le,pt){return ne===pe||(ne==null||pe==null||!Qn(ne)&&!Qn(pe)?ne!=ne&&pe!=pe:function(rt,jt,Mt,Wn,Lt,Nt){var Bt=kr(rt),On=kr(jt),_n=Bt?o:Pt(rt),xn=On?o:Pt(jt),Lr=(_n=_n==s?_:_n)==_,Br=(xn=xn==s?_:xn)==_,xi=_n==xn;if(xi&&ls(rt)){if(!ls(jt))return!1;Bt=!0,Lr=!1}if(xi&&!Lr)return Nt||(Nt=new Gt),Bt||Mr(rt)?ii(rt,jt,Mt,Wn,Lt,Nt):function(St,bt,Ii,Ci,dn,en,lr){switch(Ii){case M:if(St.byteLength!=bt.byteLength||St.byteOffset!=bt.byteOffset)return!1;St=St.buffer,bt=bt.buffer;case L:return!(St.byteLength!=bt.byteLength||!en(new on(St),new on(bt)));case u:case c:case y:return us(+St,+bt);case d:return St.name==bt.name&&St.message==bt.message;case I:case k:return St==bt+"";case m:var cr=se;case N:var Ur=1&Ci;if(cr||(cr=re),St.size!=bt.size&&!Ur)return!1;var Ct=lr.get(St);if(Ct)return Ct==bt;Ci|=2,lr.set(St,bt);var Xi=ii(cr(St),cr(bt),Ci,dn,en,lr);return lr.delete(St),Xi;case x:if(zt)return zt.call(St)==zt.call(bt)}return!1}(rt,jt,_n,Mt,Wn,Lt,Nt);if(!(1&Mt)){var wi=Lr&&Ie.call(rt,"__wrapped__"),Zn=Br&&Ie.call(jt,"__wrapped__");if(wi||Zn){var No=wi?rt.value():rt,ac=Zn?jt.value():jt;return Nt||(Nt=new Gt),Lt(No,ac,Mt,Wn,Nt)}}return!!xi&&(Nt||(Nt=new Gt),function(St,bt,Ii,Ci,dn,en){var lr=1&Ii,cr=$i(St),Ur=cr.length,Ct=$i(bt),Xi=Ct.length;if(Ur!=Xi&&!lr)return!1;for(var hr=Ur;hr--;){var Vr=cr[hr];if(!(lr?Vr in bt:Ie.call(bt,Vr)))return!1}var Ro=en.get(St);if(Ro&&en.get(bt))return Ro==bt;var cs=!0;en.set(St,bt),en.set(bt,St);for(var Fs=lr;++hr<Ur;){var ba=St[Vr=cr[hr]],Ta=bt[Vr];if(Ci)var js=lr?Ci(Ta,ba,Vr,bt,St,en):Ci(ba,Ta,Vr,St,bt,en);if(!(js===void 0?ba===Ta||dn(ba,Ta,Ii,Ci,en):js)){cs=!1;break}Fs||(Fs=Vr=="constructor")}if(cs&&!Fs){var Yr=St.constructor,dr=bt.constructor;Yr==dr||!("constructor"in St)||!("constructor"in bt)||typeof Yr=="function"&&Yr instanceof Yr&&typeof dr=="function"&&dr instanceof dr||(cs=!1)}return en.delete(St),en.delete(bt),cs}(rt,jt,Mt,Wn,Lt,Nt))}(ne,pe,De,Le,Tr,pt))}function qr(ne){return!(!Pr(ne)||function(pe){return!!Me&&Me in pe}(ne))&&(Ai(ne)?Je:q).test(En(ne))}function zs(ne){if(De=(pe=ne)&&pe.constructor,Le=typeof De=="function"&&De.prototype||Ce,pe!==Le)return Vn(ne);var pe,De,Le,pt=[];for(var rt in Object(ne))Ie.call(ne,rt)&&rt!="constructor"&&pt.push(rt);return pt}function ii(ne,pe,De,Le,pt,rt){var jt=1&De,Mt=ne.length,Wn=pe.length;if(Mt!=Wn&&!(jt&&Wn>Mt))return!1;var Lt=rt.get(ne);if(Lt&&rt.get(pe))return Lt==pe;var Nt=-1,Bt=!0,On=2&De?new Wt:void 0;for(rt.set(ne,pe),rt.set(pe,ne);++Nt<Mt;){var _n=ne[Nt],xn=pe[Nt];if(Le)var Lr=jt?Le(xn,_n,Nt,pe,ne,rt):Le(_n,xn,Nt,ne,pe,rt);if(Lr!==void 0){if(Lr)continue;Bt=!1;break}if(On){if(!W(pe,function(Br,xi){if(wi=xi,!On.has(wi)&&(_n===Br||pt(_n,Br,De,Le,rt)))return On.push(xi);var wi})){Bt=!1;break}}else if(_n!==xn&&!pt(_n,xn,De,Le,rt)){Bt=!1;break}}return rt.delete(ne),rt.delete(pe),Bt}function $i(ne){return function(pe,De,Le){var pt=De(pe);return kr(pe)?pt:function(rt,jt){for(var Mt=-1,Wn=jt.length,Lt=rt.length;++Mt<Wn;)rt[Lt+Mt]=jt[Mt];return rt}(pt,Le(pe))}(ne,jn,$t)}function Or(ne,pe){var De,Le,pt=ne.__data__;return((Le=typeof(De=pe))=="string"||Le=="number"||Le=="symbol"||Le=="boolean"?De!=="__proto__":De===null)?pt[typeof pe=="string"?"string":"hash"]:pt.map}function si(ne,pe){var De=function(Le,pt){return Le?.[pt]}(ne,pe);return qr(De)?De:void 0}Ft.prototype.clear=function(){this.__data__=de?de(null):{},this.size=0},Ft.prototype.delete=function(ne){var pe=this.has(ne)&&delete this.__data__[ne];return this.size-=pe?1:0,pe},Ft.prototype.get=function(ne){var pe=this.__data__;if(de){var De=pe[ne];return De===n?void 0:De}return Ie.call(pe,ne)?pe[ne]:void 0},Ft.prototype.has=function(ne){var pe=this.__data__;return de?pe[ne]!==void 0:Ie.call(pe,ne)},Ft.prototype.set=function(ne,pe){var De=this.__data__;return this.size+=this.has(ne)?0:1,De[ne]=de&&pe===void 0?n:pe,this},vt.prototype.clear=function(){this.__data__=[],this.size=0},vt.prototype.delete=function(ne){var pe=this.__data__,De=br(pe,ne);return!(De<0||(De==pe.length-1?pe.pop():Dn.call(pe,De,1),--this.size,0))},vt.prototype.get=function(ne){var pe=this.__data__,De=br(pe,ne);return De<0?void 0:pe[De][1]},vt.prototype.has=function(ne){return br(this.__data__,ne)>-1},vt.prototype.set=function(ne,pe){var De=this.__data__,Le=br(De,ne);return Le<0?(++this.size,De.push([ne,pe])):De[Le][1]=pe,this},lt.prototype.clear=function(){this.size=0,this.__data__={hash:new Ft,map:new(Kn||vt),string:new Ft}},lt.prototype.delete=function(ne){var pe=Or(this,ne).delete(ne);return this.size-=pe?1:0,pe},lt.prototype.get=function(ne){return Or(this,ne).get(ne)},lt.prototype.has=function(ne){return Or(this,ne).has(ne)},lt.prototype.set=function(ne,pe){var De=Or(this,ne),Le=De.size;return De.set(ne,pe),this.size+=De.size==Le?0:1,this},Wt.prototype.add=Wt.prototype.push=function(ne){return this.__data__.set(ne,n),this},Wt.prototype.has=function(ne){return this.__data__.has(ne)},Gt.prototype.clear=function(){this.__data__=new vt,this.size=0},Gt.prototype.delete=function(ne){var pe=this.__data__,De=pe.delete(ne);return this.size=pe.size,De},Gt.prototype.get=function(ne){return this.__data__.get(ne)},Gt.prototype.has=function(ne){return this.__data__.has(ne)},Gt.prototype.set=function(ne,pe){var De=this.__data__;if(De instanceof vt){var Le=De.__data__;if(!Kn||Le.length<199)return Le.push([ne,pe]),this.size=++De.size,this;De=this.__data__=new lt(Le)}return De.set(ne,pe),this.size=De.size,this};var $t=qe?function(ne){return ne==null?[]:(ne=Object(ne),function(pe,De){for(var Le=-1,pt=pe==null?0:pe.length,rt=0,jt=[];++Le<pt;){var Mt=pe[Le];De(Mt,Le,pe)&&(jt[rt++]=Mt)}return jt}(qe(ne),function(pe){return Dt.call(ne,pe)}))}:function(){return[]},Pt=Fn;function hn(ne,pe){return!!(pe=pe??r)&&(typeof ne=="number"||B.test(ne))&&ne>-1&&ne%1==0&&ne<pe}function En(ne){if(ne!=null){try{return Ve.call(ne)}catch{}try{return ne+""}catch{}}return""}function us(ne,pe){return ne===pe||ne!=ne&&pe!=pe}(Hn&&Pt(new Hn(new ArrayBuffer(1)))!=M||Kn&&Pt(new Kn)!=m||zn&&Pt(zn.resolve())!=T||An&&Pt(new An)!=N||ur&&Pt(new ur)!=C)&&(Pt=function(ne){var pe=Fn(ne),De=pe==_?ne.constructor:void 0,Le=De?En(De):"";if(Le)switch(Le){case ve:return M;case He:return m;case Ye:return T;case ut:return N;case Tt:return C}return pe});var Co=Dr(function(){return arguments}())?Dr:function(ne){return Qn(ne)&&Ie.call(ne,"callee")&&!Dt.call(ne,"callee")},kr=Array.isArray,ls=cn||function(){return!1};function Ai(ne){if(!Pr(ne))return!1;var pe=Fn(ne);return pe==f||pe=="[object GeneratorFunction]"||pe=="[object AsyncFunction]"||pe=="[object Proxy]"}function ai(ne){return typeof ne=="number"&&ne>-1&&ne%1==0&&ne<=r}function Pr(ne){var pe=typeof ne;return ne!=null&&(pe=="object"||pe=="function")}function Qn(ne){return ne!=null&&typeof ne=="object"}var Mr=Y?function(ne){return function(pe){return ne(pe)}}(Y):function(ne){return Qn(ne)&&ai(ne.length)&&!!S[Fn(ne)]};function jn(ne){return(pe=ne)!=null&&ai(pe.length)&&!Ai(pe)?Gi(ne):zs(ne);var pe}t.exports=function(ne,pe){return Tr(ne,pe)}}(by,by.exports)),by.exports),ZL=gd(WL);function y2(t,e,n){return t[e]?t[e][0]?t[e][0][n]:t[e][n]:e==="contentBoxSize"?t.contentRect[n==="inlineSize"?"width":"height"]:void 0}function JL(t){t===void 0&&(t={});var e=t.onResize,n=te.useRef(void 0);n.current=e;var r=t.round||Math.round,s=te.useRef(),o=te.useState({width:void 0,height:void 0}),u=o[0],c=o[1],d=te.useRef(!1);te.useEffect(function(){return d.current=!1,function(){d.current=!0}},[]);var f=te.useRef({width:void 0,height:void 0}),m=function(y,_){var T=te.useRef(null),I=te.useRef(null);I.current=_;var N=te.useRef(null);te.useEffect(function(){k()});var k=te.useCallback(function(){var x=N.current,C=I.current,L=x||(C?C instanceof Element?C:C.current:null);T.current&&T.current.element===L&&T.current.subscriber===y||(T.current&&T.current.cleanup&&T.current.cleanup(),T.current={element:L,subscriber:y,cleanup:L?y(L):void 0})},[y]);return te.useEffect(function(){return function(){T.current&&T.current.cleanup&&(T.current.cleanup(),T.current=null)}},[]),te.useCallback(function(x){N.current=x,k()},[k])}(te.useCallback(function(y){return s.current&&s.current.box===t.box&&s.current.round===r||(s.current={box:t.box,round:r,instance:new ResizeObserver(function(_){var T=_[0],I=t.box==="border-box"?"borderBoxSize":t.box==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",N=y2(T,I,"inlineSize"),k=y2(T,I,"blockSize"),x=N?r(N):void 0,C=k?r(k):void 0;if(f.current.width!==x||f.current.height!==C){var L={width:x,height:C};f.current.width=x,f.current.height=C,n.current?n.current(L):d.current||c(L)}})}),s.current.instance.observe(y,{box:t.box}),function(){s.current&&s.current.instance.unobserve(y)}},[t.box,r]),t.ref);return te.useMemo(function(){return{ref:m,width:u.width,height:u.height}},[m,u.width,u.height])}var e5="allotment-module_splitView__L-yRc",t5="allotment-module_sashContainer__fzwJF",n5="allotment-module_splitViewContainer__rQnVa",iC="allotment-module_splitViewView__MGZ6O",r5="allotment-module_vertical__WSwwa",i5="allotment-module_horizontal__7doS8",s5="allotment-module_separatorBorder__x-rDS";let oh,sC=!1,aC=!1;typeof navigator=="object"&&(oh=navigator.userAgent,aC=oh.indexOf("Macintosh")>=0,sC=(oh.indexOf("Macintosh")>=0||oh.indexOf("iPad")>=0||oh.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0);const oC=sC,a5=aC,E2=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?te.useLayoutEffect:te.useEffect;let o5=class{constructor(){this._size=void 0}getSize(){return this._size}setSize(e){this._size=e}};function i0(t,e){const n=t.length,r=n-e.length;return r>=0&&t.slice(r,n)===e}var _2,b2={exports:{}},T2,v2,u5=(_2||(_2=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}function s(d,f,m){this.fn=d,this.context=f,this.once=m||!1}function o(d,f,m,y,_){if(typeof m!="function")throw new TypeError("The listener must be a function");var T=new s(m,y||d,_),I=n?n+f:f;return d._events[I]?d._events[I].fn?d._events[I]=[d._events[I],T]:d._events[I].push(T):(d._events[I]=T,d._eventsCount++),d}function u(d,f){--d._eventsCount==0?d._events=new r:delete d._events[f]}function c(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1)),c.prototype.eventNames=function(){var d,f,m=[];if(this._eventsCount===0)return m;for(f in d=this._events)e.call(d,f)&&m.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(d)):m},c.prototype.listeners=function(d){var f=n?n+d:d,m=this._events[f];if(!m)return[];if(m.fn)return[m.fn];for(var y=0,_=m.length,T=new Array(_);y<_;y++)T[y]=m[y].fn;return T},c.prototype.listenerCount=function(d){var f=n?n+d:d,m=this._events[f];return m?m.fn?1:m.length:0},c.prototype.emit=function(d,f,m,y,_,T){var I=n?n+d:d;if(!this._events[I])return!1;var N,k,x=this._events[I],C=arguments.length;if(x.fn){switch(x.once&&this.removeListener(d,x.fn,void 0,!0),C){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,f),!0;case 3:return x.fn.call(x.context,f,m),!0;case 4:return x.fn.call(x.context,f,m,y),!0;case 5:return x.fn.call(x.context,f,m,y,_),!0;case 6:return x.fn.call(x.context,f,m,y,_,T),!0}for(k=1,N=new Array(C-1);k<C;k++)N[k-1]=arguments[k];x.fn.apply(x.context,N)}else{var L,M=x.length;for(k=0;k<M;k++)switch(x[k].once&&this.removeListener(d,x[k].fn,void 0,!0),C){case 1:x[k].fn.call(x[k].context);break;case 2:x[k].fn.call(x[k].context,f);break;case 3:x[k].fn.call(x[k].context,f,m);break;case 4:x[k].fn.call(x[k].context,f,m,y);break;default:if(!N)for(L=1,N=new Array(C-1);L<C;L++)N[L-1]=arguments[L];x[k].fn.apply(x[k].context,N)}}return!0},c.prototype.on=function(d,f,m){return o(this,d,f,m,!1)},c.prototype.once=function(d,f,m){return o(this,d,f,m,!0)},c.prototype.removeListener=function(d,f,m,y){var _=n?n+d:d;if(!this._events[_])return this;if(!f)return u(this,_),this;var T=this._events[_];if(T.fn)T.fn!==f||y&&!T.once||m&&T.context!==m||u(this,_);else{for(var I=0,N=[],k=T.length;I<k;I++)(T[I].fn!==f||y&&!T[I].once||m&&T[I].context!==m)&&N.push(T[I]);N.length?this._events[_]=N.length===1?N[0]:N:u(this,_)}return this},c.prototype.removeAllListeners=function(d){var f;return d?(f=n?n+d:d,this._events[f]&&u(this,f)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,t.exports=c}(b2)),b2.exports),C1=gd(u5);function S2(t,e){const n=t.indexOf(e);n>-1&&(t.splice(n,1),t.unshift(e))}function Ty(t,e){const n=t.indexOf(e);n>-1&&(t.splice(n,1),t.push(e))}function Ui(t,e,n=1){const r=Math.max(0,Math.ceil((e-t)/n)),s=new Array(r);let o=-1;for(;++o<r;)s[o]=t+o*n;return s}var l5=gd(function(){if(v2)return T2;v2=1;var t=/^\s+|\s+$/g,e=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,r=/^0o[0-7]+$/i,s=parseInt,o=typeof io=="object"&&io&&io.Object===Object&&io,u=typeof self=="object"&&self&&self.Object===Object&&self,c=o||u||Function("return this")(),d=Object.prototype.toString,f=Math.max,m=Math.min,y=function(){return c.Date.now()};function _(I){var N=typeof I;return!!I&&(N=="object"||N=="function")}function T(I){if(typeof I=="number")return I;if(function(x){return typeof x=="symbol"||function(C){return!!C&&typeof C=="object"}(x)&&d.call(x)=="[object Symbol]"}(I))return NaN;if(_(I)){var N=typeof I.valueOf=="function"?I.valueOf():I;I=_(N)?N+"":N}if(typeof I!="string")return I===0?I:+I;I=I.replace(t,"");var k=n.test(I);return k||r.test(I)?s(I.slice(2),k?2:8):e.test(I)?NaN:+I}return T2=function(I,N,k){var x,C,L,M,q,B,S=0,A=!1,D=!1,V=!0;if(typeof I!="function")throw new TypeError("Expected a function");function H(Y){var W=x,se=C;return x=C=void 0,S=Y,M=I.apply(se,W)}function z(Y){var W=Y-B;return B===void 0||W>=N||W<0||D&&Y-S>=L}function O(){var Y=y();if(z(Y))return U(Y);q=setTimeout(O,function(W){var se=N-(W-B);return D?m(se,L-(W-S)):se}(Y))}function U(Y){return q=void 0,V&&x?H(Y):(x=C=void 0,M)}function X(){var Y=y(),W=z(Y);if(x=arguments,C=this,B=Y,W){if(q===void 0)return function(se){return S=se,q=setTimeout(O,N),A?H(se):M}(B);if(D)return q=setTimeout(O,N),H(B)}return q===void 0&&(q=setTimeout(O,N)),M}return N=T(N)||0,_(k)&&(A=!!k.leading,L=(D="maxWait"in k)?f(T(k.maxWait)||0,N):L,V="trailing"in k?!!k.trailing:V),X.cancel=function(){q!==void 0&&clearTimeout(q),S=0,x=B=C=q=void 0},X.flush=function(){return q===void 0?M:U(y())},X}}()),c5="sash-module_sash__K-9lB",h5="sash-module_disabled__Hm-wx",d5="sash-module_mac__Jf6OJ",A2="sash-module_vertical__pB-rs",f5="sash-module_minimum__-UKxp",m5="sash-module_maximum__TCWxD",x2="sash-module_horizontal__kFbiw",vy="sash-module_hover__80W6I",Sy="sash-module_active__bJspD";let Hi=function(t){return t.Vertical="VERTICAL",t.Horizontal="HORIZONTAL",t}({}),gi=function(t){return t.Disabled="DISABLED",t.Minimum="MINIMUM",t.Maximum="MAXIMUM",t.Enabled="ENABLED",t}({}),uC=oC?20:8;const lC=new C1;class w2 extends C1{get state(){return this._state}set state(e){this._state!==e&&(this.el.classList.toggle(h5,e===gi.Disabled),this.el.classList.toggle("sash-disabled",e===gi.Disabled),this.el.classList.toggle(f5,e===gi.Minimum),this.el.classList.toggle("sash-minimum",e===gi.Minimum),this.el.classList.toggle(m5,e===gi.Maximum),this.el.classList.toggle("sash-maximum",e===gi.Maximum),this._state=e,this.emit("enablementChange",e))}constructor(e,n,r){var s;super(),this.el=void 0,this.layoutProvider=void 0,this.orientation=void 0,this.size=void 0,this.hoverDelay=300,this.hoverDelayer=l5(o=>o.classList.add("sash-hover",vy),this.hoverDelay),this._state=gi.Enabled,this.onPointerStart=o=>{const u=o.pageX,c=o.pageY,d={startX:u,currentX:u,startY:c,currentY:c};this.el.classList.add("sash-active",Sy),this.emit("start",d),this.el.setPointerCapture(o.pointerId);const f=y=>{y.preventDefault();const _={startX:u,currentX:y.pageX,startY:c,currentY:y.pageY};this.emit("change",_)},m=y=>{y.preventDefault(),this.el.classList.remove("sash-active",Sy),this.hoverDelayer.cancel(),this.emit("end"),this.el.releasePointerCapture(y.pointerId),window.removeEventListener("pointermove",f),window.removeEventListener("pointerup",m)};window.addEventListener("pointermove",f),window.addEventListener("pointerup",m)},this.onPointerDoublePress=()=>{this.emit("reset")},this.onMouseEnter=()=>{this.el.classList.contains(Sy)?(this.hoverDelayer.cancel(),this.el.classList.add("sash-hover",vy)):this.hoverDelayer(this.el)},this.onMouseLeave=()=>{this.hoverDelayer.cancel(),this.el.classList.remove("sash-hover",vy)},this.el=document.createElement("div"),this.el.classList.add("sash",c5),this.el.dataset.testid="sash",e.append(this.el),a5&&this.el.classList.add("sash-mac",d5),this.el.addEventListener("pointerdown",this.onPointerStart),this.el.addEventListener("dblclick",this.onPointerDoublePress),this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("mouseleave",this.onMouseLeave),typeof r.size=="number"?(this.size=r.size,r.orientation===Hi.Vertical?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=uC,lC.on("onDidChangeGlobalSize",o=>{this.size=o,this.layout()})),this.layoutProvider=n,this.orientation=(s=r.orientation)!=null?s:Hi.Vertical,this.orientation===Hi.Horizontal?(this.el.classList.add("sash-horizontal",x2),this.el.classList.remove("sash-vertical",A2)):(this.el.classList.remove("sash-horizontal",x2),this.el.classList.add("sash-vertical",A2)),this.layout()}layout(){if(this.orientation===Hi.Vertical){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}dispose(){this.el.removeEventListener("pointerdown",this.onPointerStart),this.el.removeEventListener("dblclick",this.onPointerDoublePress),this.el.removeEventListener("mouseenter",this.onMouseEnter),this.el.removeEventListener("mouseleave",()=>this.onMouseLeave),this.el.remove()}}let $0;var Ay;(Ay=$0||($0={})).Distribute={type:"distribute"},Ay.Split=function(t){return{type:"split",index:t}},Ay.Invisible=function(t){return{type:"invisible",cachedVisibleSize:t}};let Vi=function(t){return t.Normal="NORMAL",t.Low="LOW",t.High="HIGH",t}({});class cC{constructor(e,n,r){this.container=void 0,this.view=void 0,this._size=void 0,this._cachedVisibleSize=void 0,this.container=e,this.view=n,this.container.classList.add("split-view-view",iC),this.container.dataset.testid="split-view-view",typeof r=="number"?(this._size=r,this._cachedVisibleSize=void 0,e.classList.add("split-view-view-visible")):(this._size=0,this._cachedVisibleSize=r.cachedVisibleSize)}set size(e){this._size=e}get size(){return this._size}get priority(){return this.view.priority}get snap(){return!!this.view.snap}get cachedVisibleSize(){return this._cachedVisibleSize}get visible(){return this._cachedVisibleSize===void 0}setVisible(e,n){e!==this.visible&&(e?(this.size=Ji(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof n=="number"?n:this.size,this.size=0),this.container.classList.toggle("split-view-view-visible",e),this.view.setVisible&&this.view.setVisible(e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e){this.layoutContainer(e),this.view.layout(this.size,e)}}class p5 extends cC{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}class g5 extends cC{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class y5 extends C1{get startSnappingEnabled(){return this._startSnappingEnabled}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}get endSnappingEnabled(){return this._endSnappingEnabled}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,n={},r,s,o){var u,c;if(super(),this.onDidChange=void 0,this.onDidDragStart=void 0,this.onDidDragEnd=void 0,this.orientation=void 0,this.sashContainer=void 0,this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.sashDragState=void 0,this.proportionalLayout=void 0,this.getSashOrthogonalSize=void 0,this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onSashEnd=d=>{this.emit("sashchange",d),this.saveProportions();for(const f of this.viewItems)f.enabled=!0},this.orientation=(u=n.orientation)!=null?u:Hi.Vertical,this.proportionalLayout=(c=n.proportionalLayout)!=null?c:!0,this.getSashOrthogonalSize=n.getSashOrthogonalSize,r&&(this.onDidChange=r),s&&(this.onDidDragStart=s),o&&(this.onDidDragEnd=o),this.sashContainer=document.createElement("div"),this.sashContainer.classList.add("sash-container",t5),e.prepend(this.sashContainer),n.descriptor){this.size=n.descriptor.size;for(const[d,f]of n.descriptor.views.entries()){const m=f.size,y=f.container,_=f.view;this.addView(y,_,m,d,!0)}this.contentSize=this.viewItems.reduce((d,f)=>d+f.size,0),this.saveProportions()}}addView(e,n,r,s=this.viewItems.length,o){let u;u=typeof r=="number"?r:r.type==="split"?this.getViewSize(r.index)/2:r.type==="invisible"?{cachedVisibleSize:r.cachedVisibleSize}:n.minimumSize;const c=this.orientation===Hi.Vertical?new g5(e,n,u):new p5(e,n,u);if(this.viewItems.splice(s,0,c),this.viewItems.length>1){const d=this.orientation===Hi.Vertical?new w2(this.sashContainer,{getHorizontalSashTop:y=>this.getSashPosition(y),getHorizontalSashWidth:this.getSashOrthogonalSize},{orientation:Hi.Horizontal}):new w2(this.sashContainer,{getVerticalSashLeft:y=>this.getSashPosition(y),getVerticalSashHeight:this.getSashOrthogonalSize},{orientation:Hi.Vertical}),f=this.orientation===Hi.Vertical?y=>({sash:d,start:y.startY,current:y.currentY}):y=>({sash:d,start:y.startX,current:y.currentX});d.on("start",y=>{var _;this.emit("sashDragStart"),this.onSashStart(f(y));const T=this.viewItems.map(I=>I.size);(_=this.onDidDragStart)==null||_.call(this,T)}),d.on("change",y=>this.onSashChange(f(y))),d.on("end",()=>{var y;this.emit("sashDragEnd"),this.onSashEnd(this.sashItems.findIndex(T=>T.sash===d));const _=this.viewItems.map(T=>T.size);(y=this.onDidDragEnd)==null||y.call(this,_)}),d.on("reset",()=>{const y=this.sashItems.findIndex(k=>k.sash===d),_=Ui(y,-1,-1),T=Ui(y+1,this.viewItems.length),I=this.findFirstSnapIndex(_),N=this.findFirstSnapIndex(T);(typeof I!="number"||this.viewItems[I].visible)&&(typeof N!="number"||this.viewItems[N].visible)&&this.emit("sashreset",y)});const m={sash:d};this.sashItems.splice(s-1,0,m)}o||this.relayout(),o||typeof r=="number"||r.type!=="distribute"||this.distributeViewSizes()}removeView(e,n){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");const r=this.viewItems.splice(e,1)[0].view;if(this.viewItems.length>=1){const s=Math.max(e-1,0);this.sashItems.splice(s,1)[0].sash.dispose()}return this.relayout(),n&&n.type==="distribute"&&this.distributeViewSizes(),r}moveView(e,n,r){const s=this.getViewCachedVisibleSize(n),o=s===void 0?this.getViewSize(n):$0.Invisible(s),u=this.removeView(n);this.addView(e,u,o,r)}getViewCachedVisibleSize(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].cachedVisibleSize}layout(e=this.size){const n=Math.max(this.size,this.contentSize);if(this.size=e,this.proportions)for(let r=0;r<this.viewItems.length;r++){const s=this.viewItems[r];s.size=Ji(Math.round(this.proportions[r]*e),s.minimumSize,s.maximumSize)}else{const r=Ui(0,this.viewItems.length),s=r.filter(u=>this.viewItems[u].priority===Vi.Low),o=r.filter(u=>this.viewItems[u].priority===Vi.High);this.resize(this.viewItems.length-1,e-n,void 0,s,o)}this.distributeEmptySpace(),this.layoutViews()}resizeView(e,n){if(e<0||e>=this.viewItems.length)return;const r=Ui(0,this.viewItems.length).filter(c=>c!==e),s=[...r.filter(c=>this.viewItems[c].priority===Vi.Low),e],o=r.filter(c=>this.viewItems[c].priority===Vi.High),u=this.viewItems[e];n=Math.round(n),n=Ji(n,u.minimumSize,Math.min(u.maximumSize,this.size)),u.size=n,this.relayout(s,o)}resizeViews(e){for(let n=0;n<e.length;n++){const r=this.viewItems[n];let s=e[n];s=Math.round(s),s=Ji(s,r.minimumSize,Math.min(r.maximumSize,this.size)),r.size=s}this.contentSize=this.viewItems.reduce((n,r)=>n+r.size,0),this.saveProportions(),this.layout(this.size)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}isViewVisible(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].visible}setViewVisible(e,n){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");this.viewItems[e].setVisible(n),this.distributeEmptySpace(e),this.layoutViews(),this.saveProportions()}distributeViewSizes(){const e=[];let n=0;for(const c of this.viewItems)c.maximumSize-c.minimumSize>0&&(e.push(c),n+=c.size);const r=Math.floor(n/e.length);for(const c of e)c.size=Ji(r,c.minimumSize,c.maximumSize);const s=Ui(0,this.viewItems.length),o=s.filter(c=>this.viewItems[c].priority===Vi.Low),u=s.filter(c=>this.viewItems[c].priority===Vi.High);this.relayout(o,u)}dispose(){this.sashItems.forEach(e=>e.sash.dispose()),this.sashItems=[],this.sashContainer.remove()}relayout(e,n){const r=this.viewItems.reduce((s,o)=>s+o.size,0);this.resize(this.viewItems.length-1,this.size-r,void 0,e,n),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}onSashStart({sash:e,start:n}){const r=this.sashItems.findIndex(s=>s.sash===e);(s=>{const o=this.viewItems.map(C=>C.size);let u,c,d=Number.NEGATIVE_INFINITY,f=Number.POSITIVE_INFINITY;const m=Ui(r,-1,-1),y=Ui(r+1,this.viewItems.length),_=m.reduce((C,L)=>C+(this.viewItems[L].minimumSize-o[L]),0),T=m.reduce((C,L)=>C+(this.viewItems[L].viewMaximumSize-o[L]),0),I=y.length===0?Number.POSITIVE_INFINITY:y.reduce((C,L)=>C+(o[L]-this.viewItems[L].minimumSize),0),N=y.length===0?Number.NEGATIVE_INFINITY:y.reduce((C,L)=>C+(o[L]-this.viewItems[L].viewMaximumSize),0);d=Math.max(_,N),f=Math.min(I,T);const k=this.findFirstSnapIndex(m),x=this.findFirstSnapIndex(y);if(typeof k=="number"){const C=this.viewItems[k],L=Math.floor(C.viewMinimumSize/2);u={index:k,limitDelta:C.visible?d-L:d+L,size:C.size}}if(typeof x=="number"){const C=this.viewItems[x],L=Math.floor(C.viewMinimumSize/2);c={index:x,limitDelta:C.visible?f+L:f-L,size:C.size}}this.sashDragState={start:s,current:s,index:r,sizes:o,minDelta:d,maxDelta:f,snapBefore:u,snapAfter:c}})(n)}onSashChange({current:e}){const{index:n,start:r,sizes:s,minDelta:o,maxDelta:u,snapBefore:c,snapAfter:d}=this.sashDragState;this.sashDragState.current=e;const f=e-r;this.resize(n,f,s,void 0,void 0,o,u,c,d),this.distributeEmptySpace(),this.layoutViews()}getSashPosition(e){let n=0;for(let r=0;r<this.sashItems.length;r++)if(n+=this.viewItems[r].size,this.sashItems[r].sash===e)return n;return 0}resize(e,n,r=this.viewItems.map(m=>m.size),s,o,u=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY,d,f){if(e<0||e>=this.viewItems.length)return 0;const m=Ui(e,-1,-1),y=Ui(e+1,this.viewItems.length);if(o)for(const S of o)S2(m,S),S2(y,S);if(s)for(const S of s)Ty(m,S),Ty(y,S);const _=m.map(S=>this.viewItems[S]),T=m.map(S=>r[S]),I=y.map(S=>this.viewItems[S]),N=y.map(S=>r[S]),k=m.reduce((S,A)=>S+(this.viewItems[A].minimumSize-r[A]),0),x=m.reduce((S,A)=>S+(this.viewItems[A].maximumSize-r[A]),0),C=y.length===0?Number.POSITIVE_INFINITY:y.reduce((S,A)=>S+(r[A]-this.viewItems[A].minimumSize),0),L=y.length===0?Number.NEGATIVE_INFINITY:y.reduce((S,A)=>S+(r[A]-this.viewItems[A].maximumSize),0),M=Math.max(k,L,u),q=Math.min(C,x,c);let B=!1;if(d){const S=this.viewItems[d.index],A=n>=d.limitDelta;B=A!==S.visible,S.setVisible(A,d.size)}if(!B&&f){const S=this.viewItems[f.index],A=n<f.limitDelta;B=A!==S.visible,S.setVisible(A,f.size)}if(B)return this.resize(e,n,r,s,o,u,c);for(let S=0,A=n=Ji(n,M,q);S<_.length;S++){const D=_[S],V=Ji(T[S]+A,D.minimumSize,D.maximumSize);A-=V-T[S],D.size=V}for(let S=0,A=n;S<I.length;S++){const D=I[S],V=Ji(N[S]-A,D.minimumSize,D.maximumSize);A+=V-N[S],D.size=V}return n}distributeEmptySpace(e){const n=this.viewItems.reduce((f,m)=>f+m.size,0);let r=this.size-n;const s=Ui(0,this.viewItems.length),o=[],u=s.filter(f=>this.viewItems[f].priority===Vi.Low),c=s.filter(f=>this.viewItems[f].priority===Vi.Normal),d=s.filter(f=>this.viewItems[f].priority===Vi.High);o.push(...d,...c,...u),typeof e=="number"&&Ty(o,e);for(let f=0;r!==0&&f<o.length;f++){const m=this.viewItems[o[f]],y=Ji(m.size+r,m.minimumSize,m.maximumSize);r-=y-m.size,m.size=y}}layoutViews(){var e;this.contentSize=this.viewItems.reduce((r,s)=>r+s.size,0);let n=0;for(const r of this.viewItems)r.layout(n),n+=r.size;(e=this.onDidChange)!=null&&e.call(this,this.viewItems.map(r=>r.size)),this.sashItems.forEach(r=>r.sash.layout()),this.updateSashEnablement()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.size/this.contentSize))}updateSashEnablement(){let e=!1;const n=this.viewItems.map(d=>e=d.size-d.minimumSize>0||e);e=!1;const r=this.viewItems.map(d=>e=d.maximumSize-d.size>0||e),s=[...this.viewItems].reverse();e=!1;const o=s.map(d=>e=d.size-d.minimumSize>0||e).reverse();e=!1;const u=s.map(d=>e=d.maximumSize-d.size>0||e).reverse();let c=0;for(let d=0;d<this.sashItems.length;d++){const{sash:f}=this.sashItems[d];c+=this.viewItems[d].size;const m=!(n[d]&&u[d+1]),y=!(r[d]&&o[d+1]);if(m&&y){const _=Ui(d,-1,-1),T=Ui(d+1,this.viewItems.length),I=this.findFirstSnapIndex(_),N=this.findFirstSnapIndex(T),k=typeof I=="number"&&!this.viewItems[I].visible,x=typeof N=="number"&&!this.viewItems[N].visible;k&&o[d]&&(c>0||this.startSnappingEnabled)?f.state=gi.Minimum:x&&n[d]&&(c<this.contentSize||this.endSnappingEnabled)?f.state=gi.Maximum:f.state=gi.Disabled}else f.state=m&&!y?gi.Minimum:!m&&y?gi.Maximum:gi.Enabled}}findFirstSnapIndex(e){for(const n of e){const r=this.viewItems[n];if(r.visible&&r.snap)return n}for(const n of e){const r=this.viewItems[n];if(r.visible&&r.maximumSize-r.minimumSize>0)return;if(!r.visible&&r.snap)return n}}}class ll{constructor(e){this.size=void 0,this.size=e}getPreferredSize(){return this.size}}class I2{constructor(e,n){this.proportion=void 0,this.layoutService=void 0,this.proportion=e,this.layoutService=n}getPreferredSize(){return this.proportion*this.layoutService.getSize()}}class s0{getPreferredSize(){}}class C2{get preferredSize(){return this.layoutStrategy.getPreferredSize()}set preferredSize(e){if(typeof e=="number")this.layoutStrategy=new ll(e);else if(typeof e=="string"){const n=e.trim();if(i0(n,"%")){const r=Number(n.slice(0,-1))/100;this.layoutStrategy=new I2(r,this.layoutService)}else if(i0(n,"px")){const r=Number(n.slice(0,-2))/100;this.layoutStrategy=new ll(r)}else if(typeof Number.parseFloat(n)=="number"){const r=Number.parseFloat(n);this.layoutStrategy=new ll(r)}else this.layoutStrategy=new s0}else this.layoutStrategy=new s0}constructor(e,n){var r;if(this.minimumSize=0,this.maximumSize=Number.POSITIVE_INFINITY,this.element=void 0,this.priority=void 0,this.snap=void 0,this.layoutService=void 0,this.layoutStrategy=void 0,this.layoutService=e,this.element=n.element,this.minimumSize=typeof n.minimumSize=="number"?n.minimumSize:30,this.maximumSize=typeof n.maximumSize=="number"?n.maximumSize:Number.POSITIVE_INFINITY,typeof n.preferredSize=="number")this.layoutStrategy=new ll(n.preferredSize);else if(typeof n.preferredSize=="string"){const s=n.preferredSize.trim();if(i0(s,"%")){const o=Number(s.slice(0,-1))/100;this.layoutStrategy=new I2(o,this.layoutService)}else if(i0(s,"px")){const o=Number(s.slice(0,-2));this.layoutStrategy=new ll(o)}else if(typeof Number.parseFloat(s)=="number"){const o=Number.parseFloat(s);this.layoutStrategy=new ll(o)}else this.layoutStrategy=new s0}else this.layoutStrategy=new s0;this.priority=(r=n.priority)!=null?r:Vi.Normal,this.snap=typeof n.snap=="boolean"&&n.snap}layout(e){}}function N2(t){return t.minSize!==void 0||t.maxSize!==void 0||t.preferredSize!==void 0||t.priority!==void 0||t.visible!==void 0}const N1=te.forwardRef(({className:t,children:e},n)=>_e.createElement("div",{ref:n,className:bE("split-view-view",iC,t)},e));N1.displayName="Allotment.Pane";const hC=te.forwardRef(({children:t,className:e,id:n,maxSize:r=1/0,minSize:s=30,proportionalLayout:o=!0,separator:u=!0,sizes:c,defaultSizes:d=c,snap:f=!1,vertical:m=!1,onChange:y,onReset:_,onVisibleChange:T,onDragStart:I,onDragEnd:N},k)=>{const x=te.useRef(null),C=te.useRef([]),L=te.useRef(new Map),M=te.useRef(null),q=te.useRef(new Map),B=te.useRef(new o5),S=te.useRef([]),[A,D]=te.useState(!1),V=te.useMemo(()=>_e.Children.toArray(t).filter(_e.isValidElement),[t]),H=te.useCallback(z=>{var O,U;const X=(O=S.current)==null?void 0:O[z];return typeof X?.preferredSize=="number"&&((U=M.current)!=null&&U.resizeView(z,Math.round(X.preferredSize)),!0)},[]);return te.useImperativeHandle(k,()=>({reset:()=>{if(_)_();else{var z;(z=M.current)==null||z.distributeViewSizes();for(let O=0;O<S.current.length;O++)H(O)}},resize:z=>{var O;(O=M.current)==null||O.resizeViews(z)}})),E2(()=>{let z=!0;d&&q.current.size!==d.length&&(z=!1,console.warn(`Expected ${d.length} children based on defaultSizes but found ${q.current.size}`)),z&&d&&(C.current=V.map(X=>X.key));const O=Nh({orientation:m?Hi.Vertical:Hi.Horizontal,proportionalLayout:o},z&&d&&{descriptor:{size:d.reduce((X,Y)=>X+Y,0),views:d.map((X,Y)=>{var W,se,re,w;const ee=L.current.get(C.current[Y]),ae=new C2(B.current,Nh({element:document.createElement("div"),minimumSize:(W=ee?.minSize)!=null?W:s,maximumSize:(se=ee?.maxSize)!=null?se:r,priority:(re=ee?.priority)!=null?re:Vi.Normal},ee?.preferredSize&&{preferredSize:ee?.preferredSize},{snap:(w=ee?.snap)!=null?w:f}));return S.current.push(ae),{container:[...q.current.values()][Y],size:X,view:ae}})}});M.current=new y5(x.current,O,y,I,N),M.current.on("sashDragStart",()=>{var X;(X=x.current)==null||X.classList.add("split-view-sash-dragging")}),M.current.on("sashDragEnd",()=>{var X;(X=x.current)==null||X.classList.remove("split-view-sash-dragging")}),M.current.on("sashchange",X=>{if(T&&M.current){const Y=V.map(W=>W.key);for(let W=0;W<Y.length;W++){const se=L.current.get(Y[W]);se?.visible!==void 0&&se.visible!==M.current.isViewVisible(W)&&T(W,M.current.isViewVisible(W))}}}),M.current.on("sashreset",X=>{if(_)_();else{var Y;if(H(X)||H(X+1))return;(Y=M.current)==null||Y.distributeViewSizes()}});const U=M.current;return()=>{U.dispose()}},[]),E2(()=>{if(A){const j=V.map(Ie=>Ie.key),ge=[...C.current],Ce=j.filter(Ie=>!C.current.includes(Ie)),Te=j.filter(Ie=>C.current.includes(Ie)),Ve=C.current.map(Ie=>!j.includes(Ie));for(let Ie=Ve.length-1;Ie>=0;Ie--){var z;Ve[Ie]&&((z=M.current)!=null&&z.removeView(Ie),ge.splice(Ie,1),S.current.splice(Ie,1))}for(const Ie of Ce){var O,U,X,Y,W;const Me=L.current.get(Ie),ze=new C2(B.current,Nh({element:document.createElement("div"),minimumSize:(O=Me?.minSize)!=null?O:s,maximumSize:(U=Me?.maxSize)!=null?U:r,priority:(X=Me?.priority)!=null?X:Vi.Normal},Me?.preferredSize&&{preferredSize:Me?.preferredSize},{snap:(Y=Me?.snap)!=null?Y:f}));(W=M.current)!=null&&W.addView(q.current.get(Ie),ze,$0.Distribute,j.findIndex(Je=>Je===Ie)),ge.splice(j.findIndex(Je=>Je===Ie),0,Ie),S.current.splice(j.findIndex(Je=>Je===Ie),0,ze)}for(;!ZL(j,ge);)for(const[Ie,Me]of j.entries()){const ze=ge.findIndex(Je=>Je===Me);if(ze!==Ie){var se;(se=M.current)==null||se.moveView(q.current.get(Me),ze,Ie);const Je=ge[ze];ge.splice(ze,1),ge.splice(Ie,0,Je);break}}for(const Ie of Ce){var re;const Me=j.findIndex(Je=>Je===Ie),ze=S.current[Me].preferredSize;ze!==void 0&&((re=M.current)==null||re.resizeView(Me,ze))}for(const Ie of[...Ce,...Te]){var w,ee;const Me=L.current.get(Ie),ze=j.findIndex(Je=>Je===Ie);Me&&N2(Me)&&Me.visible!==void 0&&((w=M.current)==null?void 0:w.isViewVisible(ze))!==Me.visible&&((ee=M.current)==null||ee.setViewVisible(ze,Me.visible))}for(const Ie of Te){const Me=L.current.get(Ie),ze=j.findIndex(Je=>Je===Ie);if(Me&&N2(Me)){var ae;Me.preferredSize!==void 0&&S.current[ze].preferredSize!==Me.preferredSize&&(S.current[ze].preferredSize=Me.preferredSize);let Je=!1;Me.minSize!==void 0&&S.current[ze].minimumSize!==Me.minSize&&(S.current[ze].minimumSize=Me.minSize,Je=!0),Me.maxSize!==void 0&&S.current[ze].maximumSize!==Me.maxSize&&(S.current[ze].maximumSize=Me.maxSize,Je=!0),Je&&((ae=M.current)==null||ae.layout())}}(Ce.length>0||Ve.length>0)&&(C.current=j)}},[V,A,r,s,f]),te.useEffect(()=>{M.current&&(M.current.onDidChange=y)},[y]),te.useEffect(()=>{M.current&&(M.current.onDidDragStart=I)},[I]),te.useEffect(()=>{M.current&&(M.current.onDidDragEnd=N)},[N]),JL({ref:x,onResize:({width:z,height:O})=>{var U;z&&O&&((U=M.current)!=null&&U.layout(m?O:z),B.current.setSize(m?O:z),D(!0))}}),te.useEffect(()=>{oC&&E5(20)},[]),_e.createElement("div",{ref:x,className:bE("split-view",m?"split-view-vertical":"split-view-horizontal",{"split-view-separator-border":u},e5,m?r5:i5,{[s5]:u},e),id:n},_e.createElement("div",{className:bE("split-view-container",n5)},_e.Children.toArray(t).map(z=>{if(!_e.isValidElement(z))return null;const O=z.key;return z.type.displayName==="Allotment.Pane"?(L.current.set(O,z.props),_e.cloneElement(z,{key:O,ref:U=>{const X=z.ref;X&&(X.current=U),U?q.current.set(O,U):q.current.delete(O)}})):_e.createElement(N1,{key:O,ref:U=>{U?q.current.set(O,U):q.current.delete(O)}},z)})))});function E5(t){const e=Ji(t,4,20),n=Ji(t,1,8);document.documentElement.style.setProperty("--sash-size",e+"px"),document.documentElement.style.setProperty("--sash-hover-size",n+"px"),function(r){uC=r,lC.emit("onDidChangeGlobalSize",r)}(e)}hC.displayName="Allotment";var xy=Object.assign(hC,{Pane:N1}),uh={exports:{}},lh={},ch={exports:{}},wy={},Iy={exports:{}},Cy,R2;function _5(){if(R2)return Cy;R2=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Cy=t,Cy}var Ny,D2;function b5(){if(D2)return Ny;D2=1;var t=_5();function e(){}function n(){}return n.resetWarningCache=e,Ny=function(){function r(u,c,d,f,m,y){if(y!==t){var _=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _.name="Invariant Violation",_}}r.isRequired=r;function s(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:e};return o.PropTypes=o,o},Ny}var O2;function Cm(){return O2||(O2=1,Iy.exports=b5()()),Iy.exports}var a0={exports:{}},k2;function T5(){if(k2)return a0.exports;k2=1;function t(n){var r,s,o="";if(typeof n=="string"||typeof n=="number")o+=n;else if(typeof n=="object")if(Array.isArray(n)){var u=n.length;for(r=0;r<u;r++)n[r]&&(s=t(n[r]))&&(o&&(o+=" "),o+=s)}else for(s in n)n[s]&&(o&&(o+=" "),o+=s);return o}function e(){for(var n,r,s=0,o="",u=arguments.length;s<u;s++)(n=arguments[s])&&(r=t(n))&&(o&&(o+=" "),o+=r);return o}return a0.exports=e,a0.exports.clsx=e,a0.exports}var Cn={},Ya={},P2;function Nm(){if(P2)return Ya;P2=1,Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.dontSetMe=s,Ya.findInArray=t,Ya.int=r,Ya.isFunction=e,Ya.isNum=n;function t(o,u){for(let c=0,d=o.length;c<d;c++)if(u.apply(u,[o[c],c,o]))return o[c]}function e(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Function]"}function n(o){return typeof o=="number"&&!isNaN(o)}function r(o){return parseInt(o,10)}function s(o,u,c){if(o[u])return new Error(`Invalid prop ${u} passed to ${c} - do not set this, set it on the child.`)}return Ya}var Ga={},M2;function v5(){if(M2)return Ga;M2=1,Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.browserPrefixToKey=n,Ga.browserPrefixToStyle=r,Ga.default=void 0,Ga.getPrefix=e;const t=["Moz","Webkit","O","ms"];function e(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const u=window.document?.documentElement?.style;if(!u||o in u)return"";for(let c=0;c<t.length;c++)if(n(o,t[c])in u)return t[c];return""}function n(o,u){return u?`${u}${s(o)}`:o}function r(o,u){return u?`-${u.toLowerCase()}-${o}`:o}function s(o){let u="",c=!0;for(let d=0;d<o.length;d++)c?(u+=o[d].toUpperCase(),c=!1):o[d]==="-"?c=!0:u+=o[d];return u}return Ga.default=e(),Ga}var L2;function R1(){if(L2)return Cn;L2=1,Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.addClassName=q,Cn.addEvent=u,Cn.addUserSelectStyles=C,Cn.createCSSTransform=T,Cn.createSVGTransform=I,Cn.getTouch=k,Cn.getTouchIdentifier=x,Cn.getTranslation=N,Cn.innerHeight=m,Cn.innerWidth=y,Cn.matchesSelector=s,Cn.matchesSelectorAndParentsTo=o,Cn.offsetXYFromParent=_,Cn.outerHeight=d,Cn.outerWidth=f,Cn.removeClassName=B,Cn.removeEvent=c,Cn.scheduleRemoveUserSelectStyles=L;var t=Nm(),e=n(v5());function n(S,A){if(typeof WeakMap=="function")var D=new WeakMap,V=new WeakMap;return(n=function(H,z){if(!z&&H&&H.__esModule)return H;var O,U,X={__proto__:null,default:H};if(H===null||typeof H!="object"&&typeof H!="function")return X;if(O=z?V:D){if(O.has(H))return O.get(H);O.set(H,X)}for(const Y in H)Y!=="default"&&{}.hasOwnProperty.call(H,Y)&&((U=(O=Object.defineProperty)&&Object.getOwnPropertyDescriptor(H,Y))&&(U.get||U.set)?O(X,Y,U):X[Y]=H[Y]);return X})(S,A)}let r="";function s(S,A){return r||(r=(0,t.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(D){return(0,t.isFunction)(S[D])})),(0,t.isFunction)(S[r])?S[r](A):!1}function o(S,A,D){let V=S;do{if(s(V,A))return!0;if(V===D)return!1;V=V.parentNode}while(V);return!1}function u(S,A,D,V){if(!S)return;const H={capture:!0,...V};S.addEventListener?S.addEventListener(A,D,H):S.attachEvent?S.attachEvent("on"+A,D):S["on"+A]=D}function c(S,A,D,V){if(!S)return;const H={capture:!0,...V};S.removeEventListener?S.removeEventListener(A,D,H):S.detachEvent?S.detachEvent("on"+A,D):S["on"+A]=null}function d(S){let A=S.clientHeight;const D=S.ownerDocument.defaultView.getComputedStyle(S);return A+=(0,t.int)(D.borderTopWidth),A+=(0,t.int)(D.borderBottomWidth),A}function f(S){let A=S.clientWidth;const D=S.ownerDocument.defaultView.getComputedStyle(S);return A+=(0,t.int)(D.borderLeftWidth),A+=(0,t.int)(D.borderRightWidth),A}function m(S){let A=S.clientHeight;const D=S.ownerDocument.defaultView.getComputedStyle(S);return A-=(0,t.int)(D.paddingTop),A-=(0,t.int)(D.paddingBottom),A}function y(S){let A=S.clientWidth;const D=S.ownerDocument.defaultView.getComputedStyle(S);return A-=(0,t.int)(D.paddingLeft),A-=(0,t.int)(D.paddingRight),A}function _(S,A,D){const H=A===A.ownerDocument.body?{left:0,top:0}:A.getBoundingClientRect(),z=(S.clientX+A.scrollLeft-H.left)/D,O=(S.clientY+A.scrollTop-H.top)/D;return{x:z,y:O}}function T(S,A){const D=N(S,A,"px");return{[(0,e.browserPrefixToKey)("transform",e.default)]:D}}function I(S,A){return N(S,A,"")}function N(S,A,D){let{x:V,y:H}=S,z=`translate(${V}${D},${H}${D})`;if(A){const O=`${typeof A.x=="string"?A.x:A.x+D}`,U=`${typeof A.y=="string"?A.y:A.y+D}`;z=`translate(${O}, ${U})`+z}return z}function k(S,A){return S.targetTouches&&(0,t.findInArray)(S.targetTouches,D=>A===D.identifier)||S.changedTouches&&(0,t.findInArray)(S.changedTouches,D=>A===D.identifier)}function x(S){if(S.targetTouches&&S.targetTouches[0])return S.targetTouches[0].identifier;if(S.changedTouches&&S.changedTouches[0])return S.changedTouches[0].identifier}function C(S){if(!S)return;let A=S.getElementById("react-draggable-style-el");A||(A=S.createElement("style"),A.type="text/css",A.id="react-draggable-style-el",A.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,A.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,S.getElementsByTagName("head")[0].appendChild(A)),S.body&&q(S.body,"react-draggable-transparent-selection")}function L(S){window.requestAnimationFrame?window.requestAnimationFrame(()=>{M(S)}):M(S)}function M(S){if(S)try{if(S.body&&B(S.body,"react-draggable-transparent-selection"),S.selection)S.selection.empty();else{const A=(S.defaultView||window).getSelection();A&&A.type!=="Caret"&&A.removeAllRanges()}}catch{}}function q(S,A){S.classList?S.classList.add(A):S.className.match(new RegExp(`(?:^|\\s)${A}(?!\\S)`))||(S.className+=` ${A}`)}function B(S,A){S.classList?S.classList.remove(A):S.className=S.className.replace(new RegExp(`(?:^|\\s)${A}(?!\\S)`,"g"),"")}return Cn}var Ss={},B2;function dC(){if(B2)return Ss;B2=1,Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.canDragX=s,Ss.canDragY=o,Ss.createCoreData=c,Ss.createDraggableData=d,Ss.getBoundPosition=n,Ss.getControlPosition=u,Ss.snapToGrid=r;var t=Nm(),e=R1();function n(y,_,T){if(!y.props.bounds)return[_,T];let{bounds:I}=y.props;I=typeof I=="string"?I:f(I);const N=m(y);if(typeof I=="string"){const{ownerDocument:k}=N,x=k.defaultView;let C;if(I==="parent"?C=N.parentNode:C=N.getRootNode().querySelector(I),!(C instanceof x.HTMLElement))throw new Error('Bounds selector "'+I+'" could not find an element.');const L=C,M=x.getComputedStyle(N),q=x.getComputedStyle(L);I={left:-N.offsetLeft+(0,t.int)(q.paddingLeft)+(0,t.int)(M.marginLeft),top:-N.offsetTop+(0,t.int)(q.paddingTop)+(0,t.int)(M.marginTop),right:(0,e.innerWidth)(L)-(0,e.outerWidth)(N)-N.offsetLeft+(0,t.int)(q.paddingRight)-(0,t.int)(M.marginRight),bottom:(0,e.innerHeight)(L)-(0,e.outerHeight)(N)-N.offsetTop+(0,t.int)(q.paddingBottom)-(0,t.int)(M.marginBottom)}}return(0,t.isNum)(I.right)&&(_=Math.min(_,I.right)),(0,t.isNum)(I.bottom)&&(T=Math.min(T,I.bottom)),(0,t.isNum)(I.left)&&(_=Math.max(_,I.left)),(0,t.isNum)(I.top)&&(T=Math.max(T,I.top)),[_,T]}function r(y,_,T){const I=Math.round(_/y[0])*y[0],N=Math.round(T/y[1])*y[1];return[I,N]}function s(y){return y.props.axis==="both"||y.props.axis==="x"}function o(y){return y.props.axis==="both"||y.props.axis==="y"}function u(y,_,T){const I=typeof _=="number"?(0,e.getTouch)(y,_):null;if(typeof _=="number"&&!I)return null;const N=m(T),k=T.props.offsetParent||N.offsetParent||N.ownerDocument.body;return(0,e.offsetXYFromParent)(I||y,k,T.props.scale)}function c(y,_,T){const I=!(0,t.isNum)(y.lastX),N=m(y);return I?{node:N,deltaX:0,deltaY:0,lastX:_,lastY:T,x:_,y:T}:{node:N,deltaX:_-y.lastX,deltaY:T-y.lastY,lastX:y.lastX,lastY:y.lastY,x:_,y:T}}function d(y,_){const T=y.props.scale;return{node:_.node,x:y.state.x+_.deltaX/T,y:y.state.y+_.deltaY/T,deltaX:_.deltaX/T,deltaY:_.deltaY/T,lastX:y.state.x,lastY:y.state.y}}function f(y){return{left:y.left,top:y.top,right:y.right,bottom:y.bottom}}function m(y){const _=y.findDOMNode();if(!_)throw new Error("<DraggableCore>: Unmounted during event!");return _}return Ss}var hh={},o0={},U2;function fC(){if(U2)return o0;U2=1,Object.defineProperty(o0,"__esModule",{value:!0}),o0.default=t;function t(){}return o0}var V2;function S5(){if(V2)return hh;V2=1,Object.defineProperty(hh,"__esModule",{value:!0}),hh.default=void 0;var t=d(Bs()),e=c(Cm()),n=c(Tm()),r=R1(),s=dC(),o=Nm(),u=c(fC());function c(N){return N&&N.__esModule?N:{default:N}}function d(N,k){if(typeof WeakMap=="function")var x=new WeakMap,C=new WeakMap;return(d=function(L,M){if(!M&&L&&L.__esModule)return L;var q,B,S={__proto__:null,default:L};if(L===null||typeof L!="object"&&typeof L!="function")return S;if(q=M?C:x){if(q.has(L))return q.get(L);q.set(L,S)}for(const A in L)A!=="default"&&{}.hasOwnProperty.call(L,A)&&((B=(q=Object.defineProperty)&&Object.getOwnPropertyDescriptor(L,A))&&(B.get||B.set)?q(S,A,B):S[A]=L[A]);return S})(N,k)}function f(N,k,x){return(k=m(k))in N?Object.defineProperty(N,k,{value:x,enumerable:!0,configurable:!0,writable:!0}):N[k]=x,N}function m(N){var k=y(N,"string");return typeof k=="symbol"?k:k+""}function y(N,k){if(typeof N!="object"||!N)return N;var x=N[Symbol.toPrimitive];if(x!==void 0){var C=x.call(N,k);if(typeof C!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(N)}const _={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let T=_.mouse,I=class extends t.Component{constructor(){super(...arguments),f(this,"dragging",!1),f(this,"lastX",NaN),f(this,"lastY",NaN),f(this,"touchIdentifier",null),f(this,"mounted",!1),f(this,"handleDragStart",k=>{if(this.props.onMouseDown(k),!this.props.allowAnyClick&&typeof k.button=="number"&&k.button!==0)return!1;const x=this.findDOMNode();if(!x||!x.ownerDocument||!x.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:C}=x;if(this.props.disabled||!(k.target instanceof C.defaultView.Node)||this.props.handle&&!(0,r.matchesSelectorAndParentsTo)(k.target,this.props.handle,x)||this.props.cancel&&(0,r.matchesSelectorAndParentsTo)(k.target,this.props.cancel,x))return;k.type==="touchstart"&&!this.props.allowMobileScroll&&k.preventDefault();const L=(0,r.getTouchIdentifier)(k);this.touchIdentifier=L;const M=(0,s.getControlPosition)(k,L,this);if(M==null)return;const{x:q,y:B}=M,S=(0,s.createCoreData)(this,q,B);(0,u.default)("DraggableCore: handleDragStart: %j",S),(0,u.default)("calling",this.props.onStart),!(this.props.onStart(k,S)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,r.addUserSelectStyles)(C),this.dragging=!0,this.lastX=q,this.lastY=B,(0,r.addEvent)(C,T.move,this.handleDrag),(0,r.addEvent)(C,T.stop,this.handleDragStop))}),f(this,"handleDrag",k=>{const x=(0,s.getControlPosition)(k,this.touchIdentifier,this);if(x==null)return;let{x:C,y:L}=x;if(Array.isArray(this.props.grid)){let B=C-this.lastX,S=L-this.lastY;if([B,S]=(0,s.snapToGrid)(this.props.grid,B,S),!B&&!S)return;C=this.lastX+B,L=this.lastY+S}const M=(0,s.createCoreData)(this,C,L);if((0,u.default)("DraggableCore: handleDrag: %j",M),this.props.onDrag(k,M)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const S=document.createEvent("MouseEvents");S.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(S)}return}this.lastX=C,this.lastY=L}),f(this,"handleDragStop",k=>{if(!this.dragging)return;const x=(0,s.getControlPosition)(k,this.touchIdentifier,this);if(x==null)return;let{x:C,y:L}=x;if(Array.isArray(this.props.grid)){let S=C-this.lastX||0,A=L-this.lastY||0;[S,A]=(0,s.snapToGrid)(this.props.grid,S,A),C=this.lastX+S,L=this.lastY+A}const M=(0,s.createCoreData)(this,C,L);if(this.props.onStop(k,M)===!1||this.mounted===!1)return!1;const B=this.findDOMNode();B&&this.props.enableUserSelectHack&&(0,r.scheduleRemoveUserSelectStyles)(B.ownerDocument),(0,u.default)("DraggableCore: handleDragStop: %j",M),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,B&&((0,u.default)("DraggableCore: Removing handlers"),(0,r.removeEvent)(B.ownerDocument,T.move,this.handleDrag),(0,r.removeEvent)(B.ownerDocument,T.stop,this.handleDragStop))}),f(this,"onMouseDown",k=>(T=_.mouse,this.handleDragStart(k))),f(this,"onMouseUp",k=>(T=_.mouse,this.handleDragStop(k))),f(this,"onTouchStart",k=>(T=_.touch,this.handleDragStart(k))),f(this,"onTouchEnd",k=>(T=_.touch,this.handleDragStop(k)))}componentDidMount(){this.mounted=!0;const k=this.findDOMNode();k&&(0,r.addEvent)(k,_.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const k=this.findDOMNode();if(k){const{ownerDocument:x}=k;(0,r.removeEvent)(x,_.mouse.move,this.handleDrag),(0,r.removeEvent)(x,_.touch.move,this.handleDrag),(0,r.removeEvent)(x,_.mouse.stop,this.handleDragStop),(0,r.removeEvent)(x,_.touch.stop,this.handleDragStop),(0,r.removeEvent)(k,_.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,r.scheduleRemoveUserSelectStyles)(x)}}findDOMNode(){return this.props?.nodeRef?this.props?.nodeRef?.current:n.default.findDOMNode(this)}render(){return t.cloneElement(t.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return hh.default=I,f(I,"displayName","DraggableCore"),f(I,"propTypes",{allowAnyClick:e.default.bool,allowMobileScroll:e.default.bool,children:e.default.node.isRequired,disabled:e.default.bool,enableUserSelectHack:e.default.bool,offsetParent:function(N,k){if(N[k]&&N[k].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:e.default.arrayOf(e.default.number),handle:e.default.string,cancel:e.default.string,nodeRef:e.default.object,onStart:e.default.func,onDrag:e.default.func,onStop:e.default.func,onMouseDown:e.default.func,scale:e.default.number,className:o.dontSetMe,style:o.dontSetMe,transform:o.dontSetMe}),f(I,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),hh}var H2;function A5(){return H2||(H2=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return d.default}}),t.default=void 0;var e=y(Bs()),n=m(Cm()),r=m(Tm()),s=T5(),o=R1(),u=dC(),c=Nm(),d=m(S5()),f=m(fC());function m(x){return x&&x.__esModule?x:{default:x}}function y(x,C){if(typeof WeakMap=="function")var L=new WeakMap,M=new WeakMap;return(y=function(q,B){if(!B&&q&&q.__esModule)return q;var S,A,D={__proto__:null,default:q};if(q===null||typeof q!="object"&&typeof q!="function")return D;if(S=B?M:L){if(S.has(q))return S.get(q);S.set(q,D)}for(const V in q)V!=="default"&&{}.hasOwnProperty.call(q,V)&&((A=(S=Object.defineProperty)&&Object.getOwnPropertyDescriptor(q,V))&&(A.get||A.set)?S(D,V,A):D[V]=q[V]);return D})(x,C)}function _(){return _=Object.assign?Object.assign.bind():function(x){for(var C=1;C<arguments.length;C++){var L=arguments[C];for(var M in L)({}).hasOwnProperty.call(L,M)&&(x[M]=L[M])}return x},_.apply(null,arguments)}function T(x,C,L){return(C=I(C))in x?Object.defineProperty(x,C,{value:L,enumerable:!0,configurable:!0,writable:!0}):x[C]=L,x}function I(x){var C=N(x,"string");return typeof C=="symbol"?C:C+""}function N(x,C){if(typeof x!="object"||!x)return x;var L=x[Symbol.toPrimitive];if(L!==void 0){var M=L.call(x,C);if(typeof M!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(x)}class k extends e.Component{static getDerivedStateFromProps(C,L){let{position:M}=C,{prevPropsPosition:q}=L;return M&&(!q||M.x!==q.x||M.y!==q.y)?((0,f.default)("Draggable: getDerivedStateFromProps %j",{position:M,prevPropsPosition:q}),{x:M.x,y:M.y,prevPropsPosition:{...M}}):null}constructor(C){super(C),T(this,"onDragStart",(L,M)=>{if((0,f.default)("Draggable: onDragStart: %j",M),this.props.onStart(L,(0,u.createDraggableData)(this,M))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),T(this,"onDrag",(L,M)=>{if(!this.state.dragging)return!1;(0,f.default)("Draggable: onDrag: %j",M);const q=(0,u.createDraggableData)(this,M),B={x:q.x,y:q.y,slackX:0,slackY:0};if(this.props.bounds){const{x:A,y:D}=B;B.x+=this.state.slackX,B.y+=this.state.slackY;const[V,H]=(0,u.getBoundPosition)(this,B.x,B.y);B.x=V,B.y=H,B.slackX=this.state.slackX+(A-B.x),B.slackY=this.state.slackY+(D-B.y),q.x=B.x,q.y=B.y,q.deltaX=B.x-this.state.x,q.deltaY=B.y-this.state.y}if(this.props.onDrag(L,q)===!1)return!1;this.setState(B)}),T(this,"onDragStop",(L,M)=>{if(!this.state.dragging||this.props.onStop(L,(0,u.createDraggableData)(this,M))===!1)return!1;(0,f.default)("Draggable: onDragStop: %j",M);const B={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:A,y:D}=this.props.position;B.x=A,B.y=D}this.setState(B)}),this.state={dragging:!1,dragged:!1,x:C.position?C.position.x:C.defaultPosition.x,y:C.position?C.position.y:C.defaultPosition.y,prevPropsPosition:{...C.position},slackX:0,slackY:0,isElementSVG:!1},C.position&&!(C.onDrag||C.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){return this.props?.nodeRef?.current??r.default.findDOMNode(this)}render(){const{axis:C,bounds:L,children:M,defaultPosition:q,defaultClassName:B,defaultClassNameDragging:S,defaultClassNameDragged:A,position:D,positionOffset:V,scale:H,...z}=this.props;let O={},U=null;const Y=!!!D||this.state.dragging,W=D||q,se={x:(0,u.canDragX)(this)&&Y?this.state.x:W.x,y:(0,u.canDragY)(this)&&Y?this.state.y:W.y};this.state.isElementSVG?U=(0,o.createSVGTransform)(se,V):O=(0,o.createCSSTransform)(se,V);const re=(0,s.clsx)(M.props.className||"",B,{[S]:this.state.dragging,[A]:this.state.dragged});return e.createElement(d.default,_({},z,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(M),{className:re,style:{...M.props.style,...O},transform:U}))}}t.default=k,T(k,"displayName","Draggable"),T(k,"propTypes",{...d.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:c.dontSetMe,style:c.dontSetMe,transform:c.dontSetMe}),T(k,"defaultProps",{...d.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})}(wy)),wy}var z2;function mC(){if(z2)return ch.exports;z2=1;const{default:t,DraggableCore:e}=A5();return ch.exports=t,ch.exports.default=t,ch.exports.DraggableCore=e,ch.exports}var u0={},F2;function x5(){if(F2)return u0;F2=1,u0.__esModule=!0,u0.cloneElement=c;var t=e(Bs());function e(d){return d&&d.__esModule?d:{default:d}}function n(d,f){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(d);f&&(y=y.filter(function(_){return Object.getOwnPropertyDescriptor(d,_).enumerable})),m.push.apply(m,y)}return m}function r(d){for(var f=1;f<arguments.length;f++){var m=arguments[f]!=null?arguments[f]:{};f%2?n(Object(m),!0).forEach(function(y){s(d,y,m[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):n(Object(m)).forEach(function(y){Object.defineProperty(d,y,Object.getOwnPropertyDescriptor(m,y))})}return d}function s(d,f,m){return f=o(f),f in d?Object.defineProperty(d,f,{value:m,enumerable:!0,configurable:!0,writable:!0}):d[f]=m,d}function o(d){var f=u(d,"string");return typeof f=="symbol"?f:String(f)}function u(d,f){if(typeof d!="object"||d===null)return d;var m=d[Symbol.toPrimitive];if(m!==void 0){var y=m.call(d,f);if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(d)}function c(d,f){return f.style&&d.props.style&&(f.style=r(r({},d.props.style),f.style)),f.className&&d.props.className&&(f.className=d.props.className+" "+f.className),t.default.cloneElement(d,f)}return u0}var dh={},j2;function pC(){if(j2)return dh;j2=1,dh.__esModule=!0,dh.resizableProps=void 0;var t=e(Cm());mC();function e(r){return r&&r.__esModule?r:{default:r}}var n={axis:t.default.oneOf(["both","x","y","none"]),className:t.default.string,children:t.default.element.isRequired,draggableOpts:t.default.shape({allowAnyClick:t.default.bool,cancel:t.default.string,children:t.default.node,disabled:t.default.bool,enableUserSelectHack:t.default.bool,offsetParent:t.default.node,grid:t.default.arrayOf(t.default.number),handle:t.default.string,nodeRef:t.default.object,onStart:t.default.func,onDrag:t.default.func,onStop:t.default.func,onMouseDown:t.default.func,scale:t.default.number}),height:function(){for(var s=arguments.length,o=new Array(s),u=0;u<s;u++)o[u]=arguments[u];var c=o[0];if(c.axis==="both"||c.axis==="y"){var d;return(d=t.default.number).isRequired.apply(d,o)}return t.default.number.apply(t.default,o)},handle:t.default.oneOfType([t.default.node,t.default.func]),handleSize:t.default.arrayOf(t.default.number),lockAspectRatio:t.default.bool,maxConstraints:t.default.arrayOf(t.default.number),minConstraints:t.default.arrayOf(t.default.number),onResizeStop:t.default.func,onResizeStart:t.default.func,onResize:t.default.func,resizeHandles:t.default.arrayOf(t.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:t.default.number,width:function(){for(var s=arguments.length,o=new Array(s),u=0;u<s;u++)o[u]=arguments[u];var c=o[0];if(c.axis==="both"||c.axis==="x"){var d;return(d=t.default.number).isRequired.apply(d,o)}return t.default.number.apply(t.default,o)}};return dh.resizableProps=n,dh}var q2;function gC(){if(q2)return lh;q2=1,lh.__esModule=!0,lh.default=void 0;var t=u(Bs()),e=mC(),n=x5(),r=pC(),s=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function o(x){if(typeof WeakMap!="function")return null;var C=new WeakMap,L=new WeakMap;return(o=function(q){return q?L:C})(x)}function u(x,C){if(x&&x.__esModule)return x;if(x===null||typeof x!="object"&&typeof x!="function")return{default:x};var L=o(C);if(L&&L.has(x))return L.get(x);var M={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in x)if(B!=="default"&&Object.prototype.hasOwnProperty.call(x,B)){var S=q?Object.getOwnPropertyDescriptor(x,B):null;S&&(S.get||S.set)?Object.defineProperty(M,B,S):M[B]=x[B]}return M.default=x,L&&L.set(x,M),M}function c(){return c=Object.assign?Object.assign.bind():function(x){for(var C=1;C<arguments.length;C++){var L=arguments[C];for(var M in L)Object.prototype.hasOwnProperty.call(L,M)&&(x[M]=L[M])}return x},c.apply(this,arguments)}function d(x,C){if(x==null)return{};var L={},M=Object.keys(x),q,B;for(B=0;B<M.length;B++)q=M[B],!(C.indexOf(q)>=0)&&(L[q]=x[q]);return L}function f(x,C){var L=Object.keys(x);if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(x);C&&(M=M.filter(function(q){return Object.getOwnPropertyDescriptor(x,q).enumerable})),L.push.apply(L,M)}return L}function m(x){for(var C=1;C<arguments.length;C++){var L=arguments[C]!=null?arguments[C]:{};C%2?f(Object(L),!0).forEach(function(M){y(x,M,L[M])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(L)):f(Object(L)).forEach(function(M){Object.defineProperty(x,M,Object.getOwnPropertyDescriptor(L,M))})}return x}function y(x,C,L){return C=_(C),C in x?Object.defineProperty(x,C,{value:L,enumerable:!0,configurable:!0,writable:!0}):x[C]=L,x}function _(x){var C=T(x,"string");return typeof C=="symbol"?C:String(C)}function T(x,C){if(typeof x!="object"||x===null)return x;var L=x[Symbol.toPrimitive];if(L!==void 0){var M=L.call(x,C);if(typeof M!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(x)}function I(x,C){x.prototype=Object.create(C.prototype),x.prototype.constructor=x,N(x,C)}function N(x,C){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(M,q){return M.__proto__=q,M},N(x,C)}var k=function(x){I(C,x);function C(){for(var M,q=arguments.length,B=new Array(q),S=0;S<q;S++)B[S]=arguments[S];return M=x.call.apply(x,[this].concat(B))||this,M.handleRefs={},M.lastHandleRect=null,M.slack=null,M}var L=C.prototype;return L.componentWillUnmount=function(){this.resetData()},L.resetData=function(){this.lastHandleRect=this.slack=null},L.runConstraints=function(q,B){var S=this.props,A=S.minConstraints,D=S.maxConstraints,V=S.lockAspectRatio;if(!A&&!D&&!V)return[q,B];if(V){var H=this.props.width/this.props.height,z=q-this.props.width,O=B-this.props.height;Math.abs(z)>Math.abs(O*H)?B=q/H:q=B*H}var U=q,X=B,Y=this.slack||[0,0],W=Y[0],se=Y[1];return q+=W,B+=se,A&&(q=Math.max(A[0],q),B=Math.max(A[1],B)),D&&(q=Math.min(D[0],q),B=Math.min(D[1],B)),this.slack=[W+(U-q),se+(X-B)],[q,B]},L.resizeHandler=function(q,B){var S=this;return function(A,D){var V=D.node,H=D.deltaX,z=D.deltaY;q==="onResizeStart"&&S.resetData();var O=(S.props.axis==="both"||S.props.axis==="x")&&B!=="n"&&B!=="s",U=(S.props.axis==="both"||S.props.axis==="y")&&B!=="e"&&B!=="w";if(!(!O&&!U)){var X=B[0],Y=B[B.length-1],W=V.getBoundingClientRect();if(S.lastHandleRect!=null){if(Y==="w"){var se=W.left-S.lastHandleRect.left;H+=se}if(X==="n"){var re=W.top-S.lastHandleRect.top;z+=re}}S.lastHandleRect=W,Y==="w"&&(H=-H),X==="n"&&(z=-z);var w=S.props.width+(O?H/S.props.transformScale:0),ee=S.props.height+(U?z/S.props.transformScale:0),ae=S.runConstraints(w,ee);w=ae[0],ee=ae[1];var j=w!==S.props.width||ee!==S.props.height,ge=typeof S.props[q]=="function"?S.props[q]:null,Ce=q==="onResize"&&!j;ge&&!Ce&&(A.persist==null||A.persist(),ge(A,{node:V,size:{width:w,height:ee},handle:B})),q==="onResizeStop"&&S.resetData()}}},L.renderResizeHandle=function(q,B){var S=this.props.handle;if(!S)return t.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+q,ref:B});if(typeof S=="function")return S(q,B);var A=typeof S.type=="string",D=m({ref:B},A?{}:{handleAxis:q});return t.cloneElement(S,D)},L.render=function(){var q=this,B=this.props,S=B.children,A=B.className,D=B.draggableOpts;B.width,B.height,B.handle,B.handleSize,B.lockAspectRatio,B.axis,B.minConstraints,B.maxConstraints,B.onResize,B.onResizeStop,B.onResizeStart;var V=B.resizeHandles;B.transformScale;var H=d(B,s);return(0,n.cloneElement)(S,m(m({},H),{},{className:(A?A+" ":"")+"react-resizable",children:[].concat(S.props.children,V.map(function(z){var O,U=(O=q.handleRefs[z])!=null?O:q.handleRefs[z]=t.createRef();return t.createElement(e.DraggableCore,c({},D,{nodeRef:U,key:"resizableHandle-"+z,onStop:q.resizeHandler("onResizeStop",z),onStart:q.resizeHandler("onResizeStart",z),onDrag:q.resizeHandler("onResize",z)}),q.renderResizeHandle(z,U))}))}))},C}(t.Component);return lh.default=k,k.propTypes=r.resizableProps,k.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1},lh}var fh={},Y2;function w5(){if(Y2)return fh;Y2=1,fh.__esModule=!0,fh.default=void 0;var t=c(Bs()),e=o(Cm()),n=o(gC()),r=pC(),s=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function o(C){return C&&C.__esModule?C:{default:C}}function u(C){if(typeof WeakMap!="function")return null;var L=new WeakMap,M=new WeakMap;return(u=function(B){return B?M:L})(C)}function c(C,L){if(C&&C.__esModule)return C;if(C===null||typeof C!="object"&&typeof C!="function")return{default:C};var M=u(L);if(M&&M.has(C))return M.get(C);var q={},B=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in C)if(S!=="default"&&Object.prototype.hasOwnProperty.call(C,S)){var A=B?Object.getOwnPropertyDescriptor(C,S):null;A&&(A.get||A.set)?Object.defineProperty(q,S,A):q[S]=C[S]}return q.default=C,M&&M.set(C,q),q}function d(){return d=Object.assign?Object.assign.bind():function(C){for(var L=1;L<arguments.length;L++){var M=arguments[L];for(var q in M)Object.prototype.hasOwnProperty.call(M,q)&&(C[q]=M[q])}return C},d.apply(this,arguments)}function f(C,L){var M=Object.keys(C);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(C);L&&(q=q.filter(function(B){return Object.getOwnPropertyDescriptor(C,B).enumerable})),M.push.apply(M,q)}return M}function m(C){for(var L=1;L<arguments.length;L++){var M=arguments[L]!=null?arguments[L]:{};L%2?f(Object(M),!0).forEach(function(q){y(C,q,M[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(M)):f(Object(M)).forEach(function(q){Object.defineProperty(C,q,Object.getOwnPropertyDescriptor(M,q))})}return C}function y(C,L,M){return L=_(L),L in C?Object.defineProperty(C,L,{value:M,enumerable:!0,configurable:!0,writable:!0}):C[L]=M,C}function _(C){var L=T(C,"string");return typeof L=="symbol"?L:String(L)}function T(C,L){if(typeof C!="object"||C===null)return C;var M=C[Symbol.toPrimitive];if(M!==void 0){var q=M.call(C,L);if(typeof q!="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(L==="string"?String:Number)(C)}function I(C,L){if(C==null)return{};var M={},q=Object.keys(C),B,S;for(S=0;S<q.length;S++)B=q[S],!(L.indexOf(B)>=0)&&(M[B]=C[B]);return M}function N(C,L){C.prototype=Object.create(L.prototype),C.prototype.constructor=C,k(C,L)}function k(C,L){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(q,B){return q.__proto__=B,q},k(C,L)}var x=function(C){N(L,C);function L(){for(var q,B=arguments.length,S=new Array(B),A=0;A<B;A++)S[A]=arguments[A];return q=C.call.apply(C,[this].concat(S))||this,q.state={width:q.props.width,height:q.props.height,propsWidth:q.props.width,propsHeight:q.props.height},q.onResize=function(D,V){var H=V.size;q.props.onResize?(D.persist==null||D.persist(),q.setState(H,function(){return q.props.onResize&&q.props.onResize(D,V)})):q.setState(H)},q}L.getDerivedStateFromProps=function(B,S){return S.propsWidth!==B.width||S.propsHeight!==B.height?{width:B.width,height:B.height,propsWidth:B.width,propsHeight:B.height}:null};var M=L.prototype;return M.render=function(){var B=this.props,S=B.handle,A=B.handleSize;B.onResize;var D=B.onResizeStart,V=B.onResizeStop,H=B.draggableOpts,z=B.minConstraints,O=B.maxConstraints,U=B.lockAspectRatio,X=B.axis;B.width,B.height;var Y=B.resizeHandles,W=B.style,se=B.transformScale,re=I(B,s);return t.createElement(n.default,{axis:X,draggableOpts:H,handle:S,handleSize:A,height:this.state.height,lockAspectRatio:U,maxConstraints:O,minConstraints:z,onResizeStart:D,onResize:this.onResize,onResizeStop:V,resizeHandles:Y,transformScale:se,width:this.state.width},t.createElement("div",d({},re,{style:m(m({},W),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},L}(t.Component);return fh.default=x,x.propTypes=m(m({},r.resizableProps),{},{children:e.default.element}),fh}var G2;function I5(){return G2||(G2=1,uh.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},uh.exports.Resizable=gC().default,uh.exports.ResizableBox=w5().default),uh.exports}var C5=I5();const N5=()=>{};var $2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},R5=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],u=t[n++],c=t[n++],d=((s&7)<<18|(o&63)<<12|(u&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],u=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|u&63)}}return e.join("")},EC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],u=s+1<t.length,c=u?t[s+1]:0,d=s+2<t.length,f=d?t[s+2]:0,m=o>>2,y=(o&3)<<4|c>>4;let _=(c&15)<<2|f>>6,T=f&63;d||(T=64,u||(_=64)),r.push(n[m],n[y],n[_],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):R5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const y=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||c==null||f==null||y==null)throw new D5;const _=o<<2|c>>4;if(r.push(_),f!==64){const T=c<<4&240|f>>2;if(r.push(T),y!==64){const I=f<<6&192|y;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class D5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const O5=function(t){const e=yC(t);return EC.encodeByteArray(e,!0)},X0=function(t){return O5(t).replace(/\./g,"")},_C=function(t){try{return EC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5=()=>k5().__FIREBASE_DEFAULTS__,M5=()=>{if(typeof process>"u"||typeof $2>"u")return;const t=$2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},L5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&_C(t[1]);return e&&JSON.parse(e)},Rm=()=>{try{return N5()||P5()||M5()||L5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},bC=t=>{var e,n;return(n=(e=Rm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},TC=t=>{const e=bC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},vC=()=>{var t;return(t=Rm())===null||t===void 0?void 0:t.config},SC=t=>{var e;return(e=Rm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(t){return t.endsWith(".cloudworkstations.dev")}async function D1(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U5(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[X0(JSON.stringify(n)),X0(JSON.stringify(u)),""].join(".")}const Rh={};function V5(){const t={prod:[],emulator:[]};for(const e of Object.keys(Rh))Rh[e]?t.emulator.push(e):t.prod.push(e);return t}function H5(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let X2=!1;function O1(t,e){if(typeof window>"u"||typeof document>"u"||!pu(window.location.host)||Rh[t]===e||Rh[t]||X2)return;Rh[t]=e;function n(_){return`__firebase__banner__${_}`}const r="__firebase__banner",o=V5().prod.length>0;function u(){const _=document.getElementById(r);_&&_.remove()}function c(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function d(_,T){_.setAttribute("width","24"),_.setAttribute("id",T),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{X2=!0,u()},_}function m(_,T){_.setAttribute("id",T),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function y(){const _=H5(r),T=n("text"),I=document.getElementById(T)||document.createElement("span"),N=n("learnmore"),k=document.getElementById(N)||document.createElement("a"),x=n("preprendIcon"),C=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const L=_.element;c(L),m(k,N);const M=f();d(C,x),L.append(C,I,k,M),document.body.appendChild(L)}o?(I.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function z5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cr())}function F5(){var t;const e=(t=Rm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function j5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function q5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Y5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function G5(){const t=Cr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function $5(){return!F5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function X5(){try{return typeof indexedDB=="object"}catch{return!1}}function K5(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5="FirebaseError";class Vs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Q5,Object.setPrototypeOf(this,Vs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yd.prototype.create)}}class yd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],u=o?W5(o,r):"Error",c=`${this.serviceName}: ${u} (${s}).`;return new Vs(s,c,r)}}function W5(t,e){return t.replace(Z5,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Z5=/\{\$([^}]+)}/g;function J5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function uu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],u=e[s];if(K2(o)&&K2(u)){if(!uu(o,u))return!1}else if(o!==u)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function K2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Sh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Ah(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function e8(t,e){const n=new t8(t,e);return n.subscribe.bind(n)}class t8{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");n8(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ry),s.error===void 0&&(s.error=Ry),s.complete===void 0&&(s.complete=Ry);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function n8(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ry(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(t){return t&&t._delegate?t._delegate:t}class go{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new B5;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(s8(e))try{this.getOrInitializeService({instanceIdentifier:eu})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=eu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=eu){return this.instances.has(e)}getOptions(e=eu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,u]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&u.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:i8(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=eu){return this.component?this.component.multipleInstances?e:eu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function i8(t){return t===eu?void 0:t}function s8(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new r8(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Et||(Et={}));const o8={debug:Et.DEBUG,verbose:Et.VERBOSE,info:Et.INFO,warn:Et.WARN,error:Et.ERROR,silent:Et.SILENT},u8=Et.INFO,l8={[Et.DEBUG]:"log",[Et.VERBOSE]:"log",[Et.INFO]:"info",[Et.WARN]:"warn",[Et.ERROR]:"error"},c8=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=l8[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class k1{constructor(e){this.name=e,this._logLevel=u8,this._logHandler=c8,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?o8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Et.DEBUG,...e),this._logHandler(this,Et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Et.VERBOSE,...e),this._logHandler(this,Et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Et.INFO,...e),this._logHandler(this,Et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Et.WARN,...e),this._logHandler(this,Et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Et.ERROR,...e),this._logHandler(this,Et.ERROR,...e)}}const h8=(t,e)=>e.some(n=>t instanceof n);let Q2,W2;function d8(){return Q2||(Q2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function f8(){return W2||(W2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AC=new WeakMap,TE=new WeakMap,xC=new WeakMap,Dy=new WeakMap,P1=new WeakMap;function m8(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",u)},o=()=>{n(lo(t.result)),s()},u=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&AC.set(n,t)}).catch(()=>{}),P1.set(e,t),e}function p8(t){if(TE.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",u),t.removeEventListener("abort",u)},o=()=>{n(),s()},u=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",u),t.addEventListener("abort",u)});TE.set(t,e)}let vE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return TE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return lo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function g8(t){vE=t(vE)}function y8(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Oy(this),e,...n);return xC.set(r,e.sort?e.sort():[e]),lo(r)}:f8().includes(t)?function(...e){return t.apply(Oy(this),e),lo(AC.get(this))}:function(...e){return lo(t.apply(Oy(this),e))}}function E8(t){return typeof t=="function"?y8(t):(t instanceof IDBTransaction&&p8(t),h8(t,d8())?new Proxy(t,vE):t)}function lo(t){if(t instanceof IDBRequest)return m8(t);if(Dy.has(t))return Dy.get(t);const e=E8(t);return e!==t&&(Dy.set(t,e),P1.set(e,t)),e}const Oy=t=>P1.get(t);function _8(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const u=indexedDB.open(t,e),c=lo(u);return r&&u.addEventListener("upgradeneeded",d=>{r(lo(u.result),d.oldVersion,d.newVersion,lo(u.transaction),d)}),n&&u.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),c.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const b8=["get","getKey","getAll","getAllKeys","count"],T8=["put","add","delete","clear"],ky=new Map;function Z2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ky.get(e))return ky.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=T8.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||b8.includes(n)))return;const o=async function(u,...c){const d=this.transaction(u,s?"readwrite":"readonly");let f=d.store;return r&&(f=f.index(c.shift())),(await Promise.all([f[n](...c),s&&d.done]))[0]};return ky.set(e,o),o}g8(t=>({...t,get:(e,n,r)=>Z2(e,n)||t.get(e,n,r),has:(e,n)=>!!Z2(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(S8(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function S8(t){const e=t.getComponent();return e?.type==="VERSION"}const SE="@firebase/app",J2="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=new k1("@firebase/app"),A8="@firebase/app-compat",x8="@firebase/analytics-compat",w8="@firebase/analytics",I8="@firebase/app-check-compat",C8="@firebase/app-check",N8="@firebase/auth",R8="@firebase/auth-compat",D8="@firebase/database",O8="@firebase/data-connect",k8="@firebase/database-compat",P8="@firebase/functions",M8="@firebase/functions-compat",L8="@firebase/installations",B8="@firebase/installations-compat",U8="@firebase/messaging",V8="@firebase/messaging-compat",H8="@firebase/performance",z8="@firebase/performance-compat",F8="@firebase/remote-config",j8="@firebase/remote-config-compat",q8="@firebase/storage",Y8="@firebase/storage-compat",G8="@firebase/firestore",$8="@firebase/ai",X8="@firebase/firestore-compat",K8="firebase",Q8="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="[DEFAULT]",W8={[SE]:"fire-core",[A8]:"fire-core-compat",[w8]:"fire-analytics",[x8]:"fire-analytics-compat",[C8]:"fire-app-check",[I8]:"fire-app-check-compat",[N8]:"fire-auth",[R8]:"fire-auth-compat",[D8]:"fire-rtdb",[O8]:"fire-data-connect",[k8]:"fire-rtdb-compat",[P8]:"fire-fn",[M8]:"fire-fn-compat",[L8]:"fire-iid",[B8]:"fire-iid-compat",[U8]:"fire-fcm",[V8]:"fire-fcm-compat",[H8]:"fire-perf",[z8]:"fire-perf-compat",[F8]:"fire-rc",[j8]:"fire-rc-compat",[q8]:"fire-gcs",[Y8]:"fire-gcs-compat",[G8]:"fire-fst",[X8]:"fire-fst-compat",[$8]:"fire-vertex","fire-js":"fire-js",[K8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=new Map,Z8=new Map,xE=new Map;function eA(t,e){try{t.container.addComponent(e)}catch(n){ga.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function lu(t){const e=t.name;if(xE.has(e))return ga.debug(`There were multiple attempts to register component ${e}.`),!1;xE.set(e,t);for(const n of K0.values())eA(n,t);for(const n of Z8.values())eA(n,t);return!0}function Dm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function yi(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},co=new yd("app","Firebase",J8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new go("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw co.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=Q8;function wC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:AE,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw co.create("bad-app-name",{appName:String(s)});if(n||(n=vC()),!n)throw co.create("no-options");const o=K0.get(s);if(o){if(uu(n,o.options)&&uu(r,o.config))return o;throw co.create("duplicate-app",{appName:s})}const u=new a8(s);for(const d of xE.values())u.addComponent(d);const c=new e9(n,r,u);return K0.set(s,c),c}function M1(t=AE){const e=K0.get(t);if(!e&&t===AE&&vC())return wC();if(!e)throw co.create("no-app",{appName:t});return e}function Rs(t,e,n){var r;let s=(r=W8[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ga.warn(c.join(" "));return}lu(new go(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t9="firebase-heartbeat-database",n9=1,Jh="firebase-heartbeat-store";let Py=null;function IC(){return Py||(Py=_8(t9,n9,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Jh)}catch(n){console.warn(n)}}}}).catch(t=>{throw co.create("idb-open",{originalErrorMessage:t.message})})),Py}async function r9(t){try{const n=(await IC()).transaction(Jh),r=await n.objectStore(Jh).get(CC(t));return await n.done,r}catch(e){if(e instanceof Vs)ga.warn(e.message);else{const n=co.create("idb-get",{originalErrorMessage:e?.message});ga.warn(n.message)}}}async function tA(t,e){try{const r=(await IC()).transaction(Jh,"readwrite");await r.objectStore(Jh).put(e,CC(t)),await r.done}catch(n){if(n instanceof Vs)ga.warn(n.message);else{const r=co.create("idb-set",{originalErrorMessage:n?.message});ga.warn(r.message)}}}function CC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i9=1024,s9=30;class a9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new u9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=nA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>s9){const u=l9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ga.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=nA(),{heartbeatsToSend:r,unsentEntries:s}=o9(this._heartbeatsCache.heartbeats),o=X0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return ga.warn(n),""}}}function nA(){return new Date().toISOString().substring(0,10)}function o9(t,e=i9){const n=[];let r=t.slice();for(const s of t){const o=n.find(u=>u.agent===s.agent);if(o){if(o.dates.push(s.date),rA(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),rA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class u9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return X5()?K5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await r9(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return tA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return tA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function rA(t){return X0(JSON.stringify({version:2,heartbeats:t})).length}function l9(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c9(t){lu(new go("platform-logger",e=>new v8(e),"PRIVATE")),lu(new go("heartbeat",e=>new a9(e),"PRIVATE")),Rs(SE,J2,t),Rs(SE,J2,"esm2017"),Rs("fire-js","")}c9("");var h9="firebase",d9="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rs(h9,d9,"app");var iA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ho,NC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,A){function D(){}D.prototype=A.prototype,S.D=A.prototype,S.prototype=new D,S.prototype.constructor=S,S.C=function(V,H,z){for(var O=Array(arguments.length-2),U=2;U<arguments.length;U++)O[U-2]=arguments[U];return A.prototype[H].apply(V,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,A,D){D||(D=0);var V=Array(16);if(typeof A=="string")for(var H=0;16>H;++H)V[H]=A.charCodeAt(D++)|A.charCodeAt(D++)<<8|A.charCodeAt(D++)<<16|A.charCodeAt(D++)<<24;else for(H=0;16>H;++H)V[H]=A[D++]|A[D++]<<8|A[D++]<<16|A[D++]<<24;A=S.g[0],D=S.g[1],H=S.g[2];var z=S.g[3],O=A+(z^D&(H^z))+V[0]+3614090360&4294967295;A=D+(O<<7&4294967295|O>>>25),O=z+(H^A&(D^H))+V[1]+3905402710&4294967295,z=A+(O<<12&4294967295|O>>>20),O=H+(D^z&(A^D))+V[2]+606105819&4294967295,H=z+(O<<17&4294967295|O>>>15),O=D+(A^H&(z^A))+V[3]+3250441966&4294967295,D=H+(O<<22&4294967295|O>>>10),O=A+(z^D&(H^z))+V[4]+4118548399&4294967295,A=D+(O<<7&4294967295|O>>>25),O=z+(H^A&(D^H))+V[5]+1200080426&4294967295,z=A+(O<<12&4294967295|O>>>20),O=H+(D^z&(A^D))+V[6]+2821735955&4294967295,H=z+(O<<17&4294967295|O>>>15),O=D+(A^H&(z^A))+V[7]+4249261313&4294967295,D=H+(O<<22&4294967295|O>>>10),O=A+(z^D&(H^z))+V[8]+1770035416&4294967295,A=D+(O<<7&4294967295|O>>>25),O=z+(H^A&(D^H))+V[9]+2336552879&4294967295,z=A+(O<<12&4294967295|O>>>20),O=H+(D^z&(A^D))+V[10]+4294925233&4294967295,H=z+(O<<17&4294967295|O>>>15),O=D+(A^H&(z^A))+V[11]+2304563134&4294967295,D=H+(O<<22&4294967295|O>>>10),O=A+(z^D&(H^z))+V[12]+1804603682&4294967295,A=D+(O<<7&4294967295|O>>>25),O=z+(H^A&(D^H))+V[13]+4254626195&4294967295,z=A+(O<<12&4294967295|O>>>20),O=H+(D^z&(A^D))+V[14]+2792965006&4294967295,H=z+(O<<17&4294967295|O>>>15),O=D+(A^H&(z^A))+V[15]+1236535329&4294967295,D=H+(O<<22&4294967295|O>>>10),O=A+(H^z&(D^H))+V[1]+4129170786&4294967295,A=D+(O<<5&4294967295|O>>>27),O=z+(D^H&(A^D))+V[6]+3225465664&4294967295,z=A+(O<<9&4294967295|O>>>23),O=H+(A^D&(z^A))+V[11]+643717713&4294967295,H=z+(O<<14&4294967295|O>>>18),O=D+(z^A&(H^z))+V[0]+3921069994&4294967295,D=H+(O<<20&4294967295|O>>>12),O=A+(H^z&(D^H))+V[5]+3593408605&4294967295,A=D+(O<<5&4294967295|O>>>27),O=z+(D^H&(A^D))+V[10]+38016083&4294967295,z=A+(O<<9&4294967295|O>>>23),O=H+(A^D&(z^A))+V[15]+3634488961&4294967295,H=z+(O<<14&4294967295|O>>>18),O=D+(z^A&(H^z))+V[4]+3889429448&4294967295,D=H+(O<<20&4294967295|O>>>12),O=A+(H^z&(D^H))+V[9]+568446438&4294967295,A=D+(O<<5&4294967295|O>>>27),O=z+(D^H&(A^D))+V[14]+3275163606&4294967295,z=A+(O<<9&4294967295|O>>>23),O=H+(A^D&(z^A))+V[3]+4107603335&4294967295,H=z+(O<<14&4294967295|O>>>18),O=D+(z^A&(H^z))+V[8]+1163531501&4294967295,D=H+(O<<20&4294967295|O>>>12),O=A+(H^z&(D^H))+V[13]+2850285829&4294967295,A=D+(O<<5&4294967295|O>>>27),O=z+(D^H&(A^D))+V[2]+4243563512&4294967295,z=A+(O<<9&4294967295|O>>>23),O=H+(A^D&(z^A))+V[7]+1735328473&4294967295,H=z+(O<<14&4294967295|O>>>18),O=D+(z^A&(H^z))+V[12]+2368359562&4294967295,D=H+(O<<20&4294967295|O>>>12),O=A+(D^H^z)+V[5]+4294588738&4294967295,A=D+(O<<4&4294967295|O>>>28),O=z+(A^D^H)+V[8]+2272392833&4294967295,z=A+(O<<11&4294967295|O>>>21),O=H+(z^A^D)+V[11]+1839030562&4294967295,H=z+(O<<16&4294967295|O>>>16),O=D+(H^z^A)+V[14]+4259657740&4294967295,D=H+(O<<23&4294967295|O>>>9),O=A+(D^H^z)+V[1]+2763975236&4294967295,A=D+(O<<4&4294967295|O>>>28),O=z+(A^D^H)+V[4]+1272893353&4294967295,z=A+(O<<11&4294967295|O>>>21),O=H+(z^A^D)+V[7]+4139469664&4294967295,H=z+(O<<16&4294967295|O>>>16),O=D+(H^z^A)+V[10]+3200236656&4294967295,D=H+(O<<23&4294967295|O>>>9),O=A+(D^H^z)+V[13]+681279174&4294967295,A=D+(O<<4&4294967295|O>>>28),O=z+(A^D^H)+V[0]+3936430074&4294967295,z=A+(O<<11&4294967295|O>>>21),O=H+(z^A^D)+V[3]+3572445317&4294967295,H=z+(O<<16&4294967295|O>>>16),O=D+(H^z^A)+V[6]+76029189&4294967295,D=H+(O<<23&4294967295|O>>>9),O=A+(D^H^z)+V[9]+3654602809&4294967295,A=D+(O<<4&4294967295|O>>>28),O=z+(A^D^H)+V[12]+3873151461&4294967295,z=A+(O<<11&4294967295|O>>>21),O=H+(z^A^D)+V[15]+530742520&4294967295,H=z+(O<<16&4294967295|O>>>16),O=D+(H^z^A)+V[2]+3299628645&4294967295,D=H+(O<<23&4294967295|O>>>9),O=A+(H^(D|~z))+V[0]+4096336452&4294967295,A=D+(O<<6&4294967295|O>>>26),O=z+(D^(A|~H))+V[7]+1126891415&4294967295,z=A+(O<<10&4294967295|O>>>22),O=H+(A^(z|~D))+V[14]+2878612391&4294967295,H=z+(O<<15&4294967295|O>>>17),O=D+(z^(H|~A))+V[5]+4237533241&4294967295,D=H+(O<<21&4294967295|O>>>11),O=A+(H^(D|~z))+V[12]+1700485571&4294967295,A=D+(O<<6&4294967295|O>>>26),O=z+(D^(A|~H))+V[3]+2399980690&4294967295,z=A+(O<<10&4294967295|O>>>22),O=H+(A^(z|~D))+V[10]+4293915773&4294967295,H=z+(O<<15&4294967295|O>>>17),O=D+(z^(H|~A))+V[1]+2240044497&4294967295,D=H+(O<<21&4294967295|O>>>11),O=A+(H^(D|~z))+V[8]+1873313359&4294967295,A=D+(O<<6&4294967295|O>>>26),O=z+(D^(A|~H))+V[15]+4264355552&4294967295,z=A+(O<<10&4294967295|O>>>22),O=H+(A^(z|~D))+V[6]+2734768916&4294967295,H=z+(O<<15&4294967295|O>>>17),O=D+(z^(H|~A))+V[13]+1309151649&4294967295,D=H+(O<<21&4294967295|O>>>11),O=A+(H^(D|~z))+V[4]+4149444226&4294967295,A=D+(O<<6&4294967295|O>>>26),O=z+(D^(A|~H))+V[11]+3174756917&4294967295,z=A+(O<<10&4294967295|O>>>22),O=H+(A^(z|~D))+V[2]+718787259&4294967295,H=z+(O<<15&4294967295|O>>>17),O=D+(z^(H|~A))+V[9]+3951481745&4294967295,S.g[0]=S.g[0]+A&4294967295,S.g[1]=S.g[1]+(H+(O<<21&4294967295|O>>>11))&4294967295,S.g[2]=S.g[2]+H&4294967295,S.g[3]=S.g[3]+z&4294967295}r.prototype.u=function(S,A){A===void 0&&(A=S.length);for(var D=A-this.blockSize,V=this.B,H=this.h,z=0;z<A;){if(H==0)for(;z<=D;)s(this,S,z),z+=this.blockSize;if(typeof S=="string"){for(;z<A;)if(V[H++]=S.charCodeAt(z++),H==this.blockSize){s(this,V),H=0;break}}else for(;z<A;)if(V[H++]=S[z++],H==this.blockSize){s(this,V),H=0;break}}this.h=H,this.o+=A},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var A=1;A<S.length-8;++A)S[A]=0;var D=8*this.o;for(A=S.length-8;A<S.length;++A)S[A]=D&255,D/=256;for(this.u(S),S=Array(16),A=D=0;4>A;++A)for(var V=0;32>V;V+=8)S[D++]=this.g[A]>>>V&255;return S};function o(S,A){var D=c;return Object.prototype.hasOwnProperty.call(D,S)?D[S]:D[S]=A(S)}function u(S,A){this.h=A;for(var D=[],V=!0,H=S.length-1;0<=H;H--){var z=S[H]|0;V&&z==A||(D[H]=z,V=!1)}this.g=D}var c={};function d(S){return-128<=S&&128>S?o(S,function(A){return new u([A|0],0>A?-1:0)}):new u([S|0],0>S?-1:0)}function f(S){if(isNaN(S)||!isFinite(S))return y;if(0>S)return k(f(-S));for(var A=[],D=1,V=0;S>=D;V++)A[V]=S/D|0,D*=4294967296;return new u(A,0)}function m(S,A){if(S.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(S.charAt(0)=="-")return k(m(S.substring(1),A));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=f(Math.pow(A,8)),V=y,H=0;H<S.length;H+=8){var z=Math.min(8,S.length-H),O=parseInt(S.substring(H,H+z),A);8>z?(z=f(Math.pow(A,z)),V=V.j(z).add(f(O))):(V=V.j(D),V=V.add(f(O)))}return V}var y=d(0),_=d(1),T=d(16777216);t=u.prototype,t.m=function(){if(N(this))return-k(this).m();for(var S=0,A=1,D=0;D<this.g.length;D++){var V=this.i(D);S+=(0<=V?V:4294967296+V)*A,A*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(I(this))return"0";if(N(this))return"-"+k(this).toString(S);for(var A=f(Math.pow(S,6)),D=this,V="";;){var H=M(D,A).g;D=x(D,H.j(A));var z=((0<D.g.length?D.g[0]:D.h)>>>0).toString(S);if(D=H,I(D))return z+V;for(;6>z.length;)z="0"+z;V=z+V}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function I(S){if(S.h!=0)return!1;for(var A=0;A<S.g.length;A++)if(S.g[A]!=0)return!1;return!0}function N(S){return S.h==-1}t.l=function(S){return S=x(this,S),N(S)?-1:I(S)?0:1};function k(S){for(var A=S.g.length,D=[],V=0;V<A;V++)D[V]=~S.g[V];return new u(D,~S.h).add(_)}t.abs=function(){return N(this)?k(this):this},t.add=function(S){for(var A=Math.max(this.g.length,S.g.length),D=[],V=0,H=0;H<=A;H++){var z=V+(this.i(H)&65535)+(S.i(H)&65535),O=(z>>>16)+(this.i(H)>>>16)+(S.i(H)>>>16);V=O>>>16,z&=65535,O&=65535,D[H]=O<<16|z}return new u(D,D[D.length-1]&-2147483648?-1:0)};function x(S,A){return S.add(k(A))}t.j=function(S){if(I(this)||I(S))return y;if(N(this))return N(S)?k(this).j(k(S)):k(k(this).j(S));if(N(S))return k(this.j(k(S)));if(0>this.l(T)&&0>S.l(T))return f(this.m()*S.m());for(var A=this.g.length+S.g.length,D=[],V=0;V<2*A;V++)D[V]=0;for(V=0;V<this.g.length;V++)for(var H=0;H<S.g.length;H++){var z=this.i(V)>>>16,O=this.i(V)&65535,U=S.i(H)>>>16,X=S.i(H)&65535;D[2*V+2*H]+=O*X,C(D,2*V+2*H),D[2*V+2*H+1]+=z*X,C(D,2*V+2*H+1),D[2*V+2*H+1]+=O*U,C(D,2*V+2*H+1),D[2*V+2*H+2]+=z*U,C(D,2*V+2*H+2)}for(V=0;V<A;V++)D[V]=D[2*V+1]<<16|D[2*V];for(V=A;V<2*A;V++)D[V]=0;return new u(D,0)};function C(S,A){for(;(S[A]&65535)!=S[A];)S[A+1]+=S[A]>>>16,S[A]&=65535,A++}function L(S,A){this.g=S,this.h=A}function M(S,A){if(I(A))throw Error("division by zero");if(I(S))return new L(y,y);if(N(S))return A=M(k(S),A),new L(k(A.g),k(A.h));if(N(A))return A=M(S,k(A)),new L(k(A.g),A.h);if(30<S.g.length){if(N(S)||N(A))throw Error("slowDivide_ only works with positive integers.");for(var D=_,V=A;0>=V.l(S);)D=q(D),V=q(V);var H=B(D,1),z=B(V,1);for(V=B(V,2),D=B(D,2);!I(V);){var O=z.add(V);0>=O.l(S)&&(H=H.add(D),z=O),V=B(V,1),D=B(D,1)}return A=x(S,H.j(A)),new L(H,A)}for(H=y;0<=S.l(A);){for(D=Math.max(1,Math.floor(S.m()/A.m())),V=Math.ceil(Math.log(D)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),z=f(D),O=z.j(A);N(O)||0<O.l(S);)D-=V,z=f(D),O=z.j(A);I(z)&&(z=_),H=H.add(z),S=x(S,O)}return new L(H,S)}t.A=function(S){return M(this,S).h},t.and=function(S){for(var A=Math.max(this.g.length,S.g.length),D=[],V=0;V<A;V++)D[V]=this.i(V)&S.i(V);return new u(D,this.h&S.h)},t.or=function(S){for(var A=Math.max(this.g.length,S.g.length),D=[],V=0;V<A;V++)D[V]=this.i(V)|S.i(V);return new u(D,this.h|S.h)},t.xor=function(S){for(var A=Math.max(this.g.length,S.g.length),D=[],V=0;V<A;V++)D[V]=this.i(V)^S.i(V);return new u(D,this.h^S.h)};function q(S){for(var A=S.g.length+1,D=[],V=0;V<A;V++)D[V]=S.i(V)<<1|S.i(V-1)>>>31;return new u(D,S.h)}function B(S,A){var D=A>>5;A%=32;for(var V=S.g.length-D,H=[],z=0;z<V;z++)H[z]=0<A?S.i(z+D)>>>A|S.i(z+D+1)<<32-A:S.i(z+D);return new u(H,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,NC=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=f,u.fromString=m,ho=u}).apply(typeof iA<"u"?iA:typeof self<"u"?self:typeof window<"u"?window:{});var l0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RC,xh,DC,A0,wE,OC,kC,PC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,v,R){return p==Array.prototype||p==Object.prototype||(p[v]=R.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof l0=="object"&&l0];for(var v=0;v<p.length;++v){var R=p[v];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var r=n(this);function s(p,v){if(v)e:{var R=r;p=p.split(".");for(var $=0;$<p.length-1;$++){var ue=p[$];if(!(ue in R))break e;R=R[ue]}p=p[p.length-1],$=R[p],v=v($),v!=$&&v!=null&&e(R,p,{configurable:!0,writable:!0,value:v})}}function o(p,v){p instanceof String&&(p+="");var R=0,$=!1,ue={next:function(){if(!$&&R<p.length){var ye=R++;return{value:v(ye,p[ye]),done:!1}}return $=!0,{done:!0,value:void 0}}};return ue[Symbol.iterator]=function(){return ue},ue}s("Array.prototype.values",function(p){return p||function(){return o(this,function(v,R){return R})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},c=this||self;function d(p){var v=typeof p;return v=v!="object"?v:p?Array.isArray(p)?"array":v:"null",v=="array"||v=="object"&&typeof p.length=="number"}function f(p){var v=typeof p;return v=="object"&&p!=null||v=="function"}function m(p,v,R){return p.call.apply(p.bind,arguments)}function y(p,v,R){if(!p)throw Error();if(2<arguments.length){var $=Array.prototype.slice.call(arguments,2);return function(){var ue=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ue,$),p.apply(v,ue)}}return function(){return p.apply(v,arguments)}}function _(p,v,R){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:y,_.apply(null,arguments)}function T(p,v){var R=Array.prototype.slice.call(arguments,1);return function(){var $=R.slice();return $.push.apply($,arguments),p.apply(this,$)}}function I(p,v){function R(){}R.prototype=v.prototype,p.aa=v.prototype,p.prototype=new R,p.prototype.constructor=p,p.Qb=function($,ue,ye){for(var Pe=Array(arguments.length-2),At=2;At<arguments.length;At++)Pe[At-2]=arguments[At];return v.prototype[ue].apply($,Pe)}}function N(p){const v=p.length;if(0<v){const R=Array(v);for(let $=0;$<v;$++)R[$]=p[$];return R}return[]}function k(p,v){for(let R=1;R<arguments.length;R++){const $=arguments[R];if(d($)){const ue=p.length||0,ye=$.length||0;p.length=ue+ye;for(let Pe=0;Pe<ye;Pe++)p[ue+Pe]=$[Pe]}else p.push($)}}class x{constructor(v,R){this.i=v,this.j=R,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function C(p){return/^[\s\xa0]*$/.test(p)}function L(){var p=c.navigator;return p&&(p=p.userAgent)?p:""}function M(p){return M[" "](p),p}M[" "]=function(){};var q=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function B(p,v,R){for(const $ in p)v.call(R,p[$],$,p)}function S(p,v){for(const R in p)v.call(void 0,p[R],R,p)}function A(p){const v={};for(const R in p)v[R]=p[R];return v}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(p,v){let R,$;for(let ue=1;ue<arguments.length;ue++){$=arguments[ue];for(R in $)p[R]=$[R];for(let ye=0;ye<D.length;ye++)R=D[ye],Object.prototype.hasOwnProperty.call($,R)&&(p[R]=$[R])}}function H(p){var v=1;p=p.split(":");const R=[];for(;0<v&&p.length;)R.push(p.shift()),v--;return p.length&&R.push(p.join(":")),R}function z(p){c.setTimeout(()=>{throw p},0)}function O(){var p=re;let v=null;return p.g&&(v=p.g,p.g=p.g.next,p.g||(p.h=null),v.next=null),v}class U{constructor(){this.h=this.g=null}add(v,R){const $=X.get();$.set(v,R),this.h?this.h.next=$:this.g=$,this.h=$}}var X=new x(()=>new Y,p=>p.reset());class Y{constructor(){this.next=this.g=this.h=null}set(v,R){this.h=v,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let W,se=!1,re=new U,w=()=>{const p=c.Promise.resolve(void 0);W=()=>{p.then(ee)}};var ee=()=>{for(var p;p=O();){try{p.h.call(p.g)}catch(R){z(R)}var v=X;v.j(p),100>v.h&&(v.h++,p.next=v.g,v.g=p)}se=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(p,v){this.type=p,this.g=this.target=v,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var ge=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var p=!1,v=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const R=()=>{};c.addEventListener("test",R,v),c.removeEventListener("test",R,v)}catch{}return p}();function Ce(p,v){if(j.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var R=this.type=p.type,$=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=v,v=p.relatedTarget){if(q){e:{try{M(v.nodeName);var ue=!0;break e}catch{}ue=!1}ue||(v=null)}}else R=="mouseover"?v=p.fromElement:R=="mouseout"&&(v=p.toElement);this.relatedTarget=v,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:Te[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&Ce.aa.h.call(this)}}I(Ce,j);var Te={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Ve="closure_listenable_"+(1e6*Math.random()|0),Ie=0;function Me(p,v,R,$,ue){this.listener=p,this.proxy=null,this.src=v,this.type=R,this.capture=!!$,this.ha=ue,this.key=++Ie,this.da=this.fa=!1}function ze(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Je(p){this.src=p,this.g={},this.h=0}Je.prototype.add=function(p,v,R,$,ue){var ye=p.toString();p=this.g[ye],p||(p=this.g[ye]=[],this.h++);var Pe=Jt(p,v,$,ue);return-1<Pe?(v=p[Pe],R||(v.fa=!1)):(v=new Me(v,this.src,ye,!!$,ue),v.fa=R,p.push(v)),v};function an(p,v){var R=v.type;if(R in p.g){var $=p.g[R],ue=Array.prototype.indexOf.call($,v,void 0),ye;(ye=0<=ue)&&Array.prototype.splice.call($,ue,1),ye&&(ze(v),p.g[R].length==0&&(delete p.g[R],p.h--))}}function Jt(p,v,R,$){for(var ue=0;ue<p.length;++ue){var ye=p[ue];if(!ye.da&&ye.listener==v&&ye.capture==!!R&&ye.ha==$)return ue}return-1}var on="closure_lm_"+(1e6*Math.random()|0),Dt={};function Dn(p,v,R,$,ue){if(Array.isArray(v)){for(var ye=0;ye<v.length;ye++)Dn(p,v[ye],R,$,ue);return null}return R=ur(R),p&&p[Ve]?p.K(v,R,f($)?!!$.capture:!1,ue):Qe(p,v,R,!1,$,ue)}function Qe(p,v,R,$,ue,ye){if(!v)throw Error("Invalid event type");var Pe=f(ue)?!!ue.capture:!!ue,At=zn(p);if(At||(p[on]=At=new Je(p)),R=At.add(v,R,$,Pe,ye),R.proxy)return R;if($=qe(),R.proxy=$,$.src=p,$.listener=R,p.addEventListener)ge||(ue=Pe),ue===void 0&&(ue=!1),p.addEventListener(v.toString(),$,ue);else if(p.attachEvent)p.attachEvent(Hn(v.toString()),$);else if(p.addListener&&p.removeListener)p.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return R}function qe(){function p(R){return v.call(p.src,p.listener,R)}const v=Kn;return p}function cn(p,v,R,$,ue){if(Array.isArray(v))for(var ye=0;ye<v.length;ye++)cn(p,v[ye],R,$,ue);else $=f($)?!!$.capture:!!$,R=ur(R),p&&p[Ve]?(p=p.i,v=String(v).toString(),v in p.g&&(ye=p.g[v],R=Jt(ye,R,$,ue),-1<R&&(ze(ye[R]),Array.prototype.splice.call(ye,R,1),ye.length==0&&(delete p.g[v],p.h--)))):p&&(p=zn(p))&&(v=p.g[v.toString()],p=-1,v&&(p=Jt(v,R,$,ue)),(R=-1<p?v[p]:null)&&Vn(R))}function Vn(p){if(typeof p!="number"&&p&&!p.da){var v=p.src;if(v&&v[Ve])an(v.i,p);else{var R=p.type,$=p.proxy;v.removeEventListener?v.removeEventListener(R,$,p.capture):v.detachEvent?v.detachEvent(Hn(R),$):v.addListener&&v.removeListener&&v.removeListener($),(R=zn(v))?(an(R,p),R.h==0&&(R.src=null,v[on]=null)):ze(p)}}}function Hn(p){return p in Dt?Dt[p]:Dt[p]="on"+p}function Kn(p,v){if(p.da)p=!0;else{v=new Ce(v,this);var R=p.listener,$=p.ha||p.src;p.fa&&Vn(p),p=R.call($,v)}return p}function zn(p){return p=p[on],p instanceof Je?p:null}var An="__closure_events_fn_"+(1e9*Math.random()>>>0);function ur(p){return typeof p=="function"?p:(p[An]||(p[An]=function(v){return p.handleEvent(v)}),p[An])}function de(){ae.call(this),this.i=new Je(this),this.M=this,this.F=null}I(de,ae),de.prototype[Ve]=!0,de.prototype.removeEventListener=function(p,v,R,$){cn(this,p,v,R,$)};function ve(p,v){var R,$=p.F;if($)for(R=[];$;$=$.F)R.push($);if(p=p.M,$=v.type||v,typeof v=="string")v=new j(v,p);else if(v instanceof j)v.target=v.target||p;else{var ue=v;v=new j($,p),V(v,ue)}if(ue=!0,R)for(var ye=R.length-1;0<=ye;ye--){var Pe=v.g=R[ye];ue=He(Pe,$,!0,v)&&ue}if(Pe=v.g=p,ue=He(Pe,$,!0,v)&&ue,ue=He(Pe,$,!1,v)&&ue,R)for(ye=0;ye<R.length;ye++)Pe=v.g=R[ye],ue=He(Pe,$,!1,v)&&ue}de.prototype.N=function(){if(de.aa.N.call(this),this.i){var p=this.i,v;for(v in p.g){for(var R=p.g[v],$=0;$<R.length;$++)ze(R[$]);delete p.g[v],p.h--}}this.F=null},de.prototype.K=function(p,v,R,$){return this.i.add(String(p),v,!1,R,$)},de.prototype.L=function(p,v,R,$){return this.i.add(String(p),v,!0,R,$)};function He(p,v,R,$){if(v=p.i.g[String(v)],!v)return!0;v=v.concat();for(var ue=!0,ye=0;ye<v.length;++ye){var Pe=v[ye];if(Pe&&!Pe.da&&Pe.capture==R){var At=Pe.listener,qn=Pe.ha||Pe.src;Pe.fa&&an(p.i,Pe),ue=At.call(qn,$)!==!1&&ue}}return ue&&!$.defaultPrevented}function Ye(p,v,R){if(typeof p=="function")R&&(p=_(p,R));else if(p&&typeof p.handleEvent=="function")p=_(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:c.setTimeout(p,v||0)}function ut(p){p.g=Ye(()=>{p.g=null,p.i&&(p.i=!1,ut(p))},p.l);const v=p.h;p.h=null,p.m.apply(null,v)}class Tt extends ae{constructor(v,R){super(),this.m=v,this.l=R,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:ut(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ht(p){ae.call(this),this.h=p,this.g={}}I(Ht,ae);var zt=[];function Ft(p){B(p.g,function(v,R){this.g.hasOwnProperty(R)&&Vn(v)},p),p.g={}}Ht.prototype.N=function(){Ht.aa.N.call(this),Ft(this)},Ht.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vt=c.JSON.stringify,lt=c.JSON.parse,Wt=class{stringify(p){return c.JSON.stringify(p,void 0)}parse(p){return c.JSON.parse(p,void 0)}};function Gt(){}Gt.prototype.h=null;function Gi(p){return p.h||(p.h=p.i())}function br(){}var Fn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dr(){j.call(this,"d")}I(Dr,j);function Tr(){j.call(this,"c")}I(Tr,j);var qr={},zs=null;function ii(){return zs=zs||new de}qr.La="serverreachability";function $i(p){j.call(this,qr.La,p)}I($i,j);function Or(p){const v=ii();ve(v,new $i(v))}qr.STAT_EVENT="statevent";function si(p,v){j.call(this,qr.STAT_EVENT,p),this.stat=v}I(si,j);function $t(p){const v=ii();ve(v,new si(v,p))}qr.Ma="timingevent";function Pt(p,v){j.call(this,qr.Ma,p),this.size=v}I(Pt,j);function hn(p,v){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){p()},v)}function En(){this.g=!0}En.prototype.xa=function(){this.g=!1};function us(p,v,R,$,ue,ye){p.info(function(){if(p.g)if(ye)for(var Pe="",At=ye.split("&"),qn=0;qn<At.length;qn++){var xt=At[qn].split("=");if(1<xt.length){var er=xt[0];xt=xt[1];var Yn=er.split("_");Pe=2<=Yn.length&&Yn[1]=="type"?Pe+(er+"="+xt+"&"):Pe+(er+"=redacted&")}}else Pe=null;else Pe=ye;return"XMLHTTP REQ ("+$+") [attempt "+ue+"]: "+v+`
`+R+`
`+Pe})}function Co(p,v,R,$,ue,ye,Pe){p.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+ue+"]: "+v+`
`+R+`
`+ye+" "+Pe})}function kr(p,v,R,$){p.info(function(){return"XMLHTTP TEXT ("+v+"): "+Ai(p,R)+($?" "+$:"")})}function ls(p,v){p.info(function(){return"TIMEOUT: "+v})}En.prototype.info=function(){};function Ai(p,v){if(!p.g)return v;if(!v)return null;try{var R=JSON.parse(v);if(R){for(p=0;p<R.length;p++)if(Array.isArray(R[p])){var $=R[p];if(!(2>$.length)){var ue=$[1];if(Array.isArray(ue)&&!(1>ue.length)){var ye=ue[0];if(ye!="noop"&&ye!="stop"&&ye!="close")for(var Pe=1;Pe<ue.length;Pe++)ue[Pe]=""}}}}return vt(R)}catch{return v}}var ai={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qn;function Mr(){}I(Mr,Gt),Mr.prototype.g=function(){return new XMLHttpRequest},Mr.prototype.i=function(){return{}},Qn=new Mr;function jn(p,v,R,$){this.j=p,this.i=v,this.l=R,this.R=$||1,this.U=new Ht(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ne}function ne(){this.i=null,this.g="",this.h=!1}var pe={},De={};function Le(p,v,R){p.L=1,p.v=Xi(en(v)),p.m=R,p.P=!0,pt(p,null)}function pt(p,v){p.F=Date.now(),Mt(p),p.A=en(p.v);var R=p.A,$=p.R;Array.isArray($)||($=[String($)]),oc(R.i,"t",$),p.C=0,R=p.j.J,p.h=new ne,p.g=qd(p.j,R?v:null,!p.m),0<p.O&&(p.M=new Tt(_(p.Y,p,p.g),p.O)),v=p.U,R=p.g,$=p.ca;var ue="readystatechange";Array.isArray(ue)||(ue&&(zt[0]=ue.toString()),ue=zt);for(var ye=0;ye<ue.length;ye++){var Pe=Dn(R,ue[ye],$||v.handleEvent,!1,v.h||v);if(!Pe)break;v.g[Pe.key]=Pe}v=p.H?A(p.H):{},p.m?(p.u||(p.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,v)):(p.u="GET",p.g.ea(p.A,p.u,null,v)),Or(),us(p.i,p.u,p.A,p.l,p.R,p.m)}jn.prototype.ca=function(p){p=p.target;const v=this.M;v&&Ri(p)==3?v.j():this.Y(p)},jn.prototype.Y=function(p){try{if(p==this.g)e:{const Yn=Ri(this.g);var v=this.g.Ba();const Xs=this.g.Z();if(!(3>Yn)&&(Yn!=3||this.g&&(this.h.h||this.g.oa()||Ld(this.g)))){this.J||Yn!=4||v==7||(v==8||0>=Xs?Or(3):Or(2)),Lt(this);var R=this.g.Z();this.X=R;t:if(rt(this)){var $=Ld(this.g);p="";var ue=$.length,ye=Ri(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Bt(this),Nt(this);var Pe="";break t}this.h.i=new c.TextDecoder}for(v=0;v<ue;v++)this.h.h=!0,p+=this.h.i.decode($[v],{stream:!(ye&&v==ue-1)});$.length=0,this.h.g+=p,this.C=0,Pe=this.h.g}else Pe=this.g.oa();if(this.o=R==200,Co(this.i,this.u,this.A,this.l,this.R,Yn,R),this.o){if(this.T&&!this.K){t:{if(this.g){var At,qn=this.g;if((At=qn.g?qn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(At)){var xt=At;break t}}xt=null}if(R=xt)kr(this.i,this.l,R,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,On(this,R);else{this.o=!1,this.s=3,$t(12),Bt(this),Nt(this);break e}}if(this.P){R=!0;let fr;for(;!this.J&&this.C<Pe.length;)if(fr=jt(this,Pe),fr==De){Yn==4&&(this.s=4,$t(14),R=!1),kr(this.i,this.l,null,"[Incomplete Response]");break}else if(fr==pe){this.s=4,$t(15),kr(this.i,this.l,Pe,"[Invalid Chunk]"),R=!1;break}else kr(this.i,this.l,fr,null),On(this,fr);if(rt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Yn!=4||Pe.length!=0||this.h.h||(this.s=1,$t(16),R=!1),this.o=this.o&&R,!R)kr(this.i,this.l,Pe,"[Invalid Chunked Response]"),Bt(this),Nt(this);else if(0<Pe.length&&!this.W){this.W=!0;var er=this.j;er.g==this&&er.ba&&!er.M&&(er.j.info("Great, no buffering proxy detected. Bytes received: "+Pe.length),Bo(er),er.M=!0,$t(11))}}else kr(this.i,this.l,Pe,null),On(this,Pe);Yn==4&&Bt(this),this.o&&!this.J&&(Yn==4?zd(this.j,this):(this.o=!1,Mt(this)))}else up(this.g),R==400&&0<Pe.indexOf("Unknown SID")?(this.s=3,$t(12)):(this.s=0,$t(13)),Bt(this),Nt(this)}}}catch{}finally{}};function rt(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function jt(p,v){var R=p.C,$=v.indexOf(`
`,R);return $==-1?De:(R=Number(v.substring(R,$)),isNaN(R)?pe:($+=1,$+R>v.length?De:(v=v.slice($,$+R),p.C=$+R,v)))}jn.prototype.cancel=function(){this.J=!0,Bt(this)};function Mt(p){p.S=Date.now()+p.I,Wn(p,p.I)}function Wn(p,v){if(p.B!=null)throw Error("WatchDog timer not null");p.B=hn(_(p.ba,p),v)}function Lt(p){p.B&&(c.clearTimeout(p.B),p.B=null)}jn.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(ls(this.i,this.A),this.L!=2&&(Or(),$t(17)),Bt(this),this.s=2,Nt(this)):Wn(this,this.S-p)};function Nt(p){p.j.G==0||p.J||zd(p.j,p)}function Bt(p){Lt(p);var v=p.M;v&&typeof v.ma=="function"&&v.ma(),p.M=null,Ft(p.U),p.g&&(v=p.g,p.g=null,v.abort(),v.ma())}function On(p,v){try{var R=p.j;if(R.G!=0&&(R.g==p||xi(R.h,p))){if(!p.K&&xi(R.h,p)&&R.G==3){try{var $=R.Da.g.parse(v)}catch{$=null}if(Array.isArray($)&&$.length==3){var ue=$;if(ue[0]==0){e:if(!R.u){if(R.g)if(R.g.F+3e3<p.F)Nu(R),Iu(R);else break e;dc(R),$t(18)}}else R.za=ue[1],0<R.za-R.T&&37500>ue[2]&&R.F&&R.v==0&&!R.C&&(R.C=hn(_(R.Za,R),6e3));if(1>=Br(R.h)&&R.ca){try{R.ca()}catch{}R.ca=void 0}}else $s(R,11)}else if((p.K||R.g==p)&&Nu(R),!C(v))for(ue=R.Da.g.parse(v),v=0;v<ue.length;v++){let xt=ue[v];if(R.T=xt[0],xt=xt[1],R.G==2)if(xt[0]=="c"){R.K=xt[1],R.ia=xt[2];const er=xt[3];er!=null&&(R.la=er,R.j.info("VER="+R.la));const Yn=xt[4];Yn!=null&&(R.Aa=Yn,R.j.info("SVER="+R.Aa));const Xs=xt[5];Xs!=null&&typeof Xs=="number"&&0<Xs&&($=1.5*Xs,R.L=$,R.j.info("backChannelRequestTimeoutMs_="+$)),$=R;const fr=p.g;if(fr){const ys=fr.g?fr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ys){var ye=$.h;ye.g||ys.indexOf("spdy")==-1&&ys.indexOf("quic")==-1&&ys.indexOf("h2")==-1||(ye.j=ye.l,ye.g=new Set,ye.h&&(wi(ye,ye.h),ye.h=null))}if($.D){const mc=fr.g?fr.g.getResponseHeader("X-HTTP-Session-Id"):null;mc&&($.ya=mc,Ct($.I,$.D,mc))}}R.G=3,R.l&&R.l.ua(),R.ba&&(R.R=Date.now()-p.F,R.j.info("Handshake RTT: "+R.R+"ms")),$=R;var Pe=p;if($.qa=jd($,$.J?$.ia:null,$.W),Pe.K){Zn($.h,Pe);var At=Pe,qn=$.L;qn&&(At.I=qn),At.B&&(Lt(At),Mt(At)),$.g=Pe}else Vd($);0<R.i.length&&Cu(R)}else xt[0]!="stop"&&xt[0]!="close"||$s(R,7);else R.G==3&&(xt[0]=="stop"||xt[0]=="close"?xt[0]=="stop"?$s(R,7):cc(R):xt[0]!="noop"&&R.l&&R.l.ta(xt),R.v=0)}}Or(4)}catch{}}var _n=class{constructor(p,v){this.g=p,this.map=v}};function xn(p){this.l=p||10,c.PerformanceNavigationTiming?(p=c.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Lr(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Br(p){return p.h?1:p.g?p.g.size:0}function xi(p,v){return p.h?p.h==v:p.g?p.g.has(v):!1}function wi(p,v){p.g?p.g.add(v):p.h=v}function Zn(p,v){p.h&&p.h==v?p.h=null:p.g&&p.g.has(v)&&p.g.delete(v)}xn.prototype.cancel=function(){if(this.i=No(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function No(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let v=p.i;for(const R of p.g.values())v=v.concat(R.D);return v}return N(p.i)}function ac(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(d(p)){for(var v=[],R=p.length,$=0;$<R;$++)v.push(p[$]);return v}v=[],R=0;for($ in p)v[R++]=p[$];return v}function St(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(d(p)||typeof p=="string"){var v=[];p=p.length;for(var R=0;R<p;R++)v.push(R);return v}v=[],R=0;for(const $ in p)v[R++]=$;return v}}}function bt(p,v){if(p.forEach&&typeof p.forEach=="function")p.forEach(v,void 0);else if(d(p)||typeof p=="string")Array.prototype.forEach.call(p,v,void 0);else for(var R=St(p),$=ac(p),ue=$.length,ye=0;ye<ue;ye++)v.call(void 0,$[ye],R&&R[ye],p)}var Ii=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ci(p,v){if(p){p=p.split("&");for(var R=0;R<p.length;R++){var $=p[R].indexOf("="),ue=null;if(0<=$){var ye=p[R].substring(0,$);ue=p[R].substring($+1)}else ye=p[R];v(ye,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function dn(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof dn){this.h=p.h,lr(this,p.j),this.o=p.o,this.g=p.g,cr(this,p.s),this.l=p.l;var v=p.i,R=new Yr;R.i=v.i,v.g&&(R.g=new Map(v.g),R.h=v.h),Ur(this,R),this.m=p.m}else p&&(v=String(p).match(Ii))?(this.h=!1,lr(this,v[1]||"",!0),this.o=hr(v[2]||""),this.g=hr(v[3]||"",!0),cr(this,v[4]),this.l=hr(v[5]||"",!0),Ur(this,v[6]||"",!0),this.m=hr(v[7]||"")):(this.h=!1,this.i=new Yr(null,this.h))}dn.prototype.toString=function(){var p=[],v=this.j;v&&p.push(Vr(v,cs,!0),":");var R=this.g;return(R||v=="file")&&(p.push("//"),(v=this.o)&&p.push(Vr(v,cs,!0),"@"),p.push(encodeURIComponent(String(R)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.s,R!=null&&p.push(":",String(R))),(R=this.l)&&(this.g&&R.charAt(0)!="/"&&p.push("/"),p.push(Vr(R,R.charAt(0)=="/"?ba:Fs,!0))),(R=this.i.toString())&&p.push("?",R),(R=this.m)&&p.push("#",Vr(R,js)),p.join("")};function en(p){return new dn(p)}function lr(p,v,R){p.j=R?hr(v,!0):v,p.j&&(p.j=p.j.replace(/:$/,""))}function cr(p,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);p.s=v}else p.s=null}function Ur(p,v,R){v instanceof Yr?(p.i=v,Pd(p.i,p.h)):(R||(v=Vr(v,Ta)),p.i=new Yr(v,p.h))}function Ct(p,v,R){p.i.set(v,R)}function Xi(p){return Ct(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function hr(p,v){return p?v?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Vr(p,v,R){return typeof p=="string"?(p=encodeURI(p).replace(v,Ro),R&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Ro(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var cs=/[#\/\?@]/g,Fs=/[#\?:]/g,ba=/[#\?]/g,Ta=/[#\?@]/g,js=/#/g;function Yr(p,v){this.h=this.g=null,this.i=p||null,this.j=!!v}function dr(p){p.g||(p.g=new Map,p.h=0,p.i&&Ci(p.i,function(v,R){p.add(decodeURIComponent(v.replace(/\+/g," ")),R)}))}t=Yr.prototype,t.add=function(p,v){dr(this),this.i=null,p=hs(this,p);var R=this.g.get(p);return R||this.g.set(p,R=[]),R.push(v),this.h+=1,this};function qs(p,v){dr(p),v=hs(p,v),p.g.has(v)&&(p.i=null,p.h-=p.g.get(v).length,p.g.delete(v))}function Ys(p,v){return dr(p),v=hs(p,v),p.g.has(v)}t.forEach=function(p,v){dr(this),this.g.forEach(function(R,$){R.forEach(function(ue){p.call(v,ue,$,this)},this)},this)},t.na=function(){dr(this);const p=Array.from(this.g.values()),v=Array.from(this.g.keys()),R=[];for(let $=0;$<v.length;$++){const ue=p[$];for(let ye=0;ye<ue.length;ye++)R.push(v[$])}return R},t.V=function(p){dr(this);let v=[];if(typeof p=="string")Ys(this,p)&&(v=v.concat(this.g.get(hs(this,p))));else{p=Array.from(this.g.values());for(let R=0;R<p.length;R++)v=v.concat(p[R])}return v},t.set=function(p,v){return dr(this),this.i=null,p=hs(this,p),Ys(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[v]),this.h+=1,this},t.get=function(p,v){return p?(p=this.V(p),0<p.length?String(p[0]):v):v};function oc(p,v,R){qs(p,v),0<R.length&&(p.i=null,p.g.set(hs(p,v),N(R)),p.h+=R.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],v=Array.from(this.g.keys());for(var R=0;R<v.length;R++){var $=v[R];const ye=encodeURIComponent(String($)),Pe=this.V($);for($=0;$<Pe.length;$++){var ue=ye;Pe[$]!==""&&(ue+="="+encodeURIComponent(String(Pe[$]))),p.push(ue)}}return this.i=p.join("&")};function hs(p,v){return v=String(v),p.j&&(v=v.toLowerCase()),v}function Pd(p,v){v&&!p.j&&(dr(p),p.i=null,p.g.forEach(function(R,$){var ue=$.toLowerCase();$!=ue&&(qs(this,$),oc(this,ue,R))},p)),p.j=v}function Do(p,v){const R=new En;if(c.Image){const $=new Image;$.onload=T(Ni,R,"TestLoadImage: loaded",!0,v,$),$.onerror=T(Ni,R,"TestLoadImage: error",!1,v,$),$.onabort=T(Ni,R,"TestLoadImage: abort",!1,v,$),$.ontimeout=T(Ni,R,"TestLoadImage: timeout",!1,v,$),c.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=p}else v(!1)}function Ki(p,v){const R=new En,$=new AbortController,ue=setTimeout(()=>{$.abort(),Ni(R,"TestPingServer: timeout",!1,v)},1e4);fetch(p,{signal:$.signal}).then(ye=>{clearTimeout(ue),ye.ok?Ni(R,"TestPingServer: ok",!0,v):Ni(R,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(ue),Ni(R,"TestPingServer: error",!1,v)})}function Ni(p,v,R,$,ue){try{ue&&(ue.onload=null,ue.onerror=null,ue.onabort=null,ue.ontimeout=null),$(R)}catch{}}function Oo(){this.g=new Wt}function ds(p,v,R){const $=R||"";try{bt(p,function(ue,ye){let Pe=ue;f(ue)&&(Pe=vt(ue)),v.push($+ye+"="+encodeURIComponent(Pe))})}catch(ue){throw v.push($+"type="+encodeURIComponent("_badmap")),ue}}function va(p){this.l=p.Ub||null,this.j=p.eb||!1}I(va,Gt),va.prototype.g=function(){return new Gs(this.l,this.j)},va.prototype.i=function(p){return function(){return p}}({});function Gs(p,v){de.call(this),this.D=p,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Gs,de),t=Gs.prototype,t.open=function(p,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=v,this.readyState=1,ms(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(v.body=p),(this.D||c).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fs(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,ms(this)),this.g&&(this.readyState=3,ms(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uc(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function uc(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var v=p.value?p.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!p.done}))&&(this.response=this.responseText+=v)}p.done?fs(this):ms(this),this.readyState==3&&uc(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,fs(this))},t.Qa=function(p){this.g&&(this.response=p,fs(this))},t.ga=function(){this.g&&fs(this)};function fs(p){p.readyState=4,p.l=null,p.j=null,p.v=null,ms(p)}t.setRequestHeader=function(p,v){this.u.append(p,v)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],v=this.h.entries();for(var R=v.next();!R.done;)R=R.value,p.push(R[0]+": "+R[1]),R=v.next();return p.join(`\r
`)};function ms(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Gs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function lc(p){let v="";return B(p,function(R,$){v+=$,v+=":",v+=R,v+=`\r
`}),v}function Jn(p,v,R){e:{for($ in R){var $=!1;break e}$=!0}$||(R=lc(R),typeof p=="string"?R!=null&&encodeURIComponent(String(R)):Ct(p,v,R))}function Ut(p){de.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Ut,de);var Su=/^https?$/i,ko=["POST","PUT"];t=Ut.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,v,R,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);v=v?v.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qn.g(),this.v=this.o?Gi(this.o):Gi(Qn),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(v,String(p),!0),this.B=!1}catch(ye){Md(this,ye);return}if(p=R||"",R=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var ue in $)R.set(ue,$[ue]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const ye of $.keys())R.set(ye,$.get(ye));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(R.keys()).find(ye=>ye.toLowerCase()=="content-type"),ue=c.FormData&&p instanceof c.FormData,!(0<=Array.prototype.indexOf.call(ko,v,void 0))||$||ue||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ye,Pe]of R)this.g.setRequestHeader(ye,Pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Po(this),this.u=!0,this.g.send(p),this.u=!1}catch(ye){Md(this,ye)}};function Md(p,v){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=v,p.m=5,Au(p),ps(p)}function Au(p){p.A||(p.A=!0,ve(p,"complete"),ve(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,ve(this,"complete"),ve(this,"abort"),ps(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ps(this,!0)),Ut.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?xu(this):this.bb())},t.bb=function(){xu(this)};function xu(p){if(p.h&&typeof u<"u"&&(!p.v[1]||Ri(p)!=4||p.Z()!=2)){if(p.u&&Ri(p)==4)Ye(p.Ea,0,p);else if(ve(p,"readystatechange"),Ri(p)==4){p.h=!1;try{const Pe=p.Z();e:switch(Pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var R;if(!(R=v)){var $;if($=Pe===0){var ue=String(p.D).match(Ii)[1]||null;!ue&&c.self&&c.self.location&&(ue=c.self.location.protocol.slice(0,-1)),$=!Su.test(ue?ue.toLowerCase():"")}R=$}if(R)ve(p,"complete"),ve(p,"success");else{p.m=6;try{var ye=2<Ri(p)?p.g.statusText:""}catch{ye=""}p.l=ye+" ["+p.Z()+"]",Au(p)}}finally{ps(p)}}}}function ps(p,v){if(p.g){Po(p);const R=p.g,$=p.v[0]?()=>{}:null;p.g=null,p.v=null,v||ve(p,"ready");try{R.onreadystatechange=$}catch{}}}function Po(p){p.I&&(c.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function Ri(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<Ri(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var v=this.g.responseText;return p&&v.indexOf(p)==0&&(v=v.substring(p.length)),lt(v)}};function Ld(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function up(p){const v={};p=(p.g&&2<=Ri(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<p.length;$++){if(C(p[$]))continue;var R=H(p[$]);const ue=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const ye=v[ue]||[];v[ue]=ye,ye.push(R)}S(v,function($){return $.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mo(p,v,R){return R&&R.internalChannelParams&&R.internalChannelParams[p]||v}function wu(p){this.Aa=0,this.i=[],this.j=new En,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Mo("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Mo("baseRetryDelayMs",5e3,p),this.cb=Mo("retryDelaySeedMs",1e4,p),this.Wa=Mo("forwardChannelMaxRetries",2,p),this.wa=Mo("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new xn(p&&p.concurrentRequestLimit),this.Da=new Oo,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=wu.prototype,t.la=8,t.G=1,t.connect=function(p,v,R,$){$t(0),this.W=p,this.H=v||{},R&&$!==void 0&&(this.H.OSID=R,this.H.OAID=$),this.F=this.X,this.I=jd(this,null,this.W),Cu(this)};function cc(p){if(Bd(p),p.G==3){var v=p.U++,R=en(p.I);if(Ct(R,"SID",p.K),Ct(R,"RID",v),Ct(R,"TYPE","terminate"),Lo(p,R),v=new jn(p,p.j,v),v.L=2,v.v=Xi(en(R)),R=!1,c.navigator&&c.navigator.sendBeacon)try{R=c.navigator.sendBeacon(v.v.toString(),"")}catch{}!R&&c.Image&&(new Image().src=v.v,R=!0),R||(v.g=qd(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Mt(v)}Fd(p)}function Iu(p){p.g&&(Bo(p),p.g.cancel(),p.g=null)}function Bd(p){Iu(p),p.u&&(c.clearTimeout(p.u),p.u=null),Nu(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&c.clearTimeout(p.s),p.s=null)}function Cu(p){if(!Lr(p.h)&&!p.s){p.s=!0;var v=p.Ga;W||w(),se||(W(),se=!0),re.add(v,p),p.B=0}}function lp(p,v){return Br(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=v.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=hn(_(p.Ga,p,v),fc(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const ue=new jn(this,this.j,p);let ye=this.o;if(this.S&&(ye?(ye=A(ye),V(ye,this.S)):ye=this.S),this.m!==null||this.O||(ue.H=ye,ye=null),this.P)e:{for(var v=0,R=0;R<this.i.length;R++){t:{var $=this.i[R];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(v+=$,4096<v){v=R;break e}if(v===4096||R===this.i.length-1){v=R+1;break e}}v=1e3}else v=1e3;v=Ud(this,ue,v),R=en(this.I),Ct(R,"RID",p),Ct(R,"CVER",22),this.D&&Ct(R,"X-HTTP-Session-Id",this.D),Lo(this,R),ye&&(this.O?v="headers="+encodeURIComponent(String(lc(ye)))+"&"+v:this.m&&Jn(R,this.m,ye)),wi(this.h,ue),this.Ua&&Ct(R,"TYPE","init"),this.P?(Ct(R,"$req",v),Ct(R,"SID","null"),ue.T=!0,Le(ue,R,null)):Le(ue,R,v),this.G=2}}else this.G==3&&(p?hc(this,p):this.i.length==0||Lr(this.h)||hc(this))};function hc(p,v){var R;v?R=v.l:R=p.U++;const $=en(p.I);Ct($,"SID",p.K),Ct($,"RID",R),Ct($,"AID",p.T),Lo(p,$),p.m&&p.o&&Jn($,p.m,p.o),R=new jn(p,p.j,R,p.B+1),p.m===null&&(R.H=p.o),v&&(p.i=v.D.concat(p.i)),v=Ud(p,R,1e3),R.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),wi(p.h,R),Le(R,$,v)}function Lo(p,v){p.H&&B(p.H,function(R,$){Ct(v,$,R)}),p.l&&bt({},function(R,$){Ct(v,$,R)})}function Ud(p,v,R){R=Math.min(p.i.length,R);var $=p.l?_(p.l.Na,p.l,p):null;e:{var ue=p.i;let ye=-1;for(;;){const Pe=["count="+R];ye==-1?0<R?(ye=ue[0].g,Pe.push("ofs="+ye)):ye=0:Pe.push("ofs="+ye);let At=!0;for(let qn=0;qn<R;qn++){let xt=ue[qn].g;const er=ue[qn].map;if(xt-=ye,0>xt)ye=Math.max(0,ue[qn].g-100),At=!1;else try{ds(er,Pe,"req"+xt+"_")}catch{$&&$(er)}}if(At){$=Pe.join("&");break e}}}return p=p.i.splice(0,R),v.D=p,$}function Vd(p){if(!p.g&&!p.u){p.Y=1;var v=p.Fa;W||w(),se||(W(),se=!0),re.add(v,p),p.v=0}}function dc(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=hn(_(p.Fa,p),fc(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,Hd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=hn(_(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$t(10),Iu(this),Hd(this))};function Bo(p){p.A!=null&&(c.clearTimeout(p.A),p.A=null)}function Hd(p){p.g=new jn(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var v=en(p.qa);Ct(v,"RID","rpc"),Ct(v,"SID",p.K),Ct(v,"AID",p.T),Ct(v,"CI",p.F?"0":"1"),!p.F&&p.ja&&Ct(v,"TO",p.ja),Ct(v,"TYPE","xmlhttp"),Lo(p,v),p.m&&p.o&&Jn(v,p.m,p.o),p.L&&(p.g.I=p.L);var R=p.g;p=p.ia,R.L=1,R.v=Xi(en(v)),R.m=null,R.P=!0,pt(R,p)}t.Za=function(){this.C!=null&&(this.C=null,Iu(this),dc(this),$t(19))};function Nu(p){p.C!=null&&(c.clearTimeout(p.C),p.C=null)}function zd(p,v){var R=null;if(p.g==v){Nu(p),Bo(p),p.g=null;var $=2}else if(xi(p.h,v))R=v.D,Zn(p.h,v),$=1;else return;if(p.G!=0){if(v.o)if($==1){R=v.m?v.m.length:0,v=Date.now()-v.F;var ue=p.B;$=ii(),ve($,new Pt($,R)),Cu(p)}else Vd(p);else if(ue=v.s,ue==3||ue==0&&0<v.X||!($==1&&lp(p,v)||$==2&&dc(p)))switch(R&&0<R.length&&(v=p.h,v.i=v.i.concat(R)),ue){case 1:$s(p,5);break;case 4:$s(p,10);break;case 3:$s(p,6);break;default:$s(p,2)}}}function fc(p,v){let R=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(R*=2),R*v}function $s(p,v){if(p.j.info("Error code "+v),v==2){var R=_(p.fb,p),$=p.Xa;const ue=!$;$=new dn($||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||lr($,"https"),Xi($),ue?Do($.toString(),R):Ki($.toString(),R)}else $t(2);p.G=0,p.l&&p.l.sa(v),Fd(p),Bd(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function Fd(p){if(p.G=0,p.ka=[],p.l){const v=No(p.h);(v.length!=0||p.i.length!=0)&&(k(p.ka,v),k(p.ka,p.i),p.h.i.length=0,N(p.i),p.i.length=0),p.l.ra()}}function jd(p,v,R){var $=R instanceof dn?en(R):new dn(R);if($.g!="")v&&($.g=v+"."+$.g),cr($,$.s);else{var ue=c.location;$=ue.protocol,v=v?v+"."+ue.hostname:ue.hostname,ue=+ue.port;var ye=new dn(null);$&&lr(ye,$),v&&(ye.g=v),ue&&cr(ye,ue),R&&(ye.l=R),$=ye}return R=p.D,v=p.ya,R&&v&&Ct($,R,v),Ct($,"VER",p.la),Lo(p,$),$}function qd(p,v,R){if(v&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=p.Ca&&!p.pa?new Ut(new va({eb:R})):new Ut(p.pa),v.Ha(p.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yd(){}t=Yd.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ru(){}Ru.prototype.g=function(p,v){return new Hr(p,v)};function Hr(p,v){de.call(this),this.g=new wu(v),this.l=p,this.h=v&&v.messageUrlParams||null,p=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(p?p["X-WebChannel-Content-Type"]=v.messageContentType:p={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(p?p["X-WebChannel-Client-Profile"]=v.va:p={"X-WebChannel-Client-Profile":v.va}),this.g.S=p,(p=v&&v.Sb)&&!C(p)&&(this.g.m=p),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!C(v)&&(this.g.D=v,p=this.h,p!==null&&v in p&&(p=this.h,v in p&&delete p[v])),this.j=new gs(this)}I(Hr,de),Hr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Hr.prototype.close=function(){cc(this.g)},Hr.prototype.o=function(p){var v=this.g;if(typeof p=="string"){var R={};R.__data__=p,p=R}else this.u&&(R={},R.__data__=vt(p),p=R);v.i.push(new _n(v.Ya++,p)),v.G==3&&Cu(v)},Hr.prototype.N=function(){this.g.l=null,delete this.j,cc(this.g),delete this.g,Hr.aa.N.call(this)};function Gd(p){Dr.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var v=p.__sm__;if(v){e:{for(const R in v){p=R;break e}p=void 0}(this.i=p)&&(p=this.i,v=v!==null&&p in v?v[p]:void 0),this.data=v}else this.data=p}I(Gd,Dr);function $d(){Tr.call(this),this.status=1}I($d,Tr);function gs(p){this.g=p}I(gs,Yd),gs.prototype.ua=function(){ve(this.g,"a")},gs.prototype.ta=function(p){ve(this.g,new Gd(p))},gs.prototype.sa=function(p){ve(this.g,new $d)},gs.prototype.ra=function(){ve(this.g,"b")},Ru.prototype.createWebChannel=Ru.prototype.g,Hr.prototype.send=Hr.prototype.o,Hr.prototype.open=Hr.prototype.m,Hr.prototype.close=Hr.prototype.close,PC=function(){return new Ru},kC=function(){return ii()},OC=qr,wE={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ai.NO_ERROR=0,ai.TIMEOUT=8,ai.HTTP_ERROR=6,A0=ai,Pr.COMPLETE="complete",DC=Pr,br.EventType=Fn,Fn.OPEN="a",Fn.CLOSE="b",Fn.ERROR="c",Fn.MESSAGE="d",de.prototype.listen=de.prototype.K,xh=br,Ut.prototype.listenOnce=Ut.prototype.L,Ut.prototype.getLastError=Ut.prototype.Ka,Ut.prototype.getLastErrorCode=Ut.prototype.Ba,Ut.prototype.getStatus=Ut.prototype.Z,Ut.prototype.getResponseJson=Ut.prototype.Oa,Ut.prototype.getResponseText=Ut.prototype.oa,Ut.prototype.send=Ut.prototype.ea,Ut.prototype.setWithCredentials=Ut.prototype.Ha,RC=Ut}).apply(typeof l0<"u"?l0:typeof self<"u"?self:typeof window<"u"?window:{});const sA="@firebase/firestore",aA="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xr.UNAUTHENTICATED=new xr(null),xr.GOOGLE_CREDENTIALS=new xr("google-credentials-uid"),xr.FIRST_PARTY=new xr("first-party-uid"),xr.MOCK_USER=new xr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gl="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=new k1("@firebase/firestore");function fl(){return cu.logLevel}function Be(t,...e){if(cu.logLevel<=Et.DEBUG){const n=e.map(L1);cu.debug(`Firestore (${Gl}): ${t}`,...n)}}function ya(t,...e){if(cu.logLevel<=Et.ERROR){const n=e.map(L1);cu.error(`Firestore (${Gl}): ${t}`,...n)}}function Ml(t,...e){if(cu.logLevel<=Et.WARN){const n=e.map(L1);cu.warn(`Firestore (${Gl}): ${t}`,...n)}}function L1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,MC(t,r,n)}function MC(t,e,n){let r=`FIRESTORE (${Gl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ya(r),new Error(r)}function Vt(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||MC(e,s,r)}function it(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends Vs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class f9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(xr.UNAUTHENTICATED))}shutdown(){}}class m9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class p9{constructor(e){this.t=e,this.currentUser=xr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Vt(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let o=new fo;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new fo,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},c=d=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new fo)}},0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Vt(typeof r.accessToken=="string",31837,{l:r}),new LC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Vt(e===null||typeof e=="string",2055,{h:e}),new xr(e)}}class g9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=xr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class y9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new g9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(xr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class E9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Vt(this.o===void 0,3512);const r=o=>{o.error!=null&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,Be("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new oA(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Vt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new oA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=_9(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function ht(t,e){return t<e?-1:t>e?1:0}function IE(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return ht(r,s);{const o=BC(),u=b9(o.encode(uA(t,n)),o.encode(uA(e,n)));return u!==0?u:ht(r,s)}}n+=r>65535?2:1}return ht(t.length,e.length)}function uA(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function b9(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ht(t[n],e[n]);return ht(t.length,e.length)}function Ll(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=-62135596800,cA=1e6;class ln{static now(){return ln.fromMillis(Date.now())}static fromDate(e){return ln.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*cA);return new ln(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ue(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ue(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<lA)throw new Ue(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cA}_compareTo(e){return this.seconds===e.seconds?ht(this.nanoseconds,e.nanoseconds):ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-lA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{static fromTimestamp(e){return new nt(e)}static min(){return new nt(new ln(0,0))}static max(){return new nt(new ln(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="__name__";class ws{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ze(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ze(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ws.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ws?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=ws.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return ht(e.length,n.length)}static compareSegments(e,n){const r=ws.isNumericId(e),s=ws.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?ws.extractNumericId(e).compare(ws.extractNumericId(n)):IE(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ho.fromString(e.substring(4,e.length-2))}}class un extends ws{construct(e,n,r){return new un(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ue(xe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new un(n)}static emptyPath(){return new un([])}}const T9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Er extends ws{construct(e,n,r){return new Er(e,n,r)}static isValidIdentifier(e){return T9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Er.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hA}static keyField(){return new Er([hA])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new Ue(xe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let u=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Ue(xe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Ue(xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else c==="`"?(u=!u,s++):c!=="."||u?(r+=c,s++):(o(),s++)}if(o(),u)throw new Ue(xe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Er(n)}static emptyPath(){return new Er([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.path=e}static fromPath(e){return new $e(un.fromString(e))}static fromName(e){return new $e(un.fromString(e).popFirst(5))}static empty(){return new $e(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&un.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return un.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new un(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed=-1;function v9(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=nt.fromTimestamp(r===1e9?new ln(n+1,0):new ln(n,r));return new yo(s,$e.empty(),e)}function S9(t){return new yo(t.readTime,t.key,ed)}class yo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new yo(nt.min(),$e.empty(),ed)}static max(){return new yo(nt.max(),$e.empty(),ed)}}function A9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=$e.comparator(t.documentKey,e.documentKey),n!==0?n:ht(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class w9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $l(t){if(t.code!==xe.FAILED_PRECONDITION||t.message!==x9)throw t;Be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ze(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new we((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof we?n:we.resolve(n)}catch(n){return we.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):we.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):we.reject(n)}static resolve(e){return new we((n,r)=>{n(e)})}static reject(e){return new we((n,r)=>{r(e)})}static waitFor(e){return new we((n,r)=>{let s=0,o=0,u=!1;e.forEach(c=>{++s,c.next(()=>{++o,u&&o===s&&n()},d=>r(d))}),u=!0,o===s&&n()})}static or(e){let n=we.resolve(!1);for(const r of e)n=n.next(s=>s?we.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,o)=>{r.push(n.call(this,s,o))}),this.waitFor(r)}static mapArray(e,n){return new we((r,s)=>{const o=e.length,u=new Array(o);let c=0;for(let d=0;d<o;d++){const f=d;n(e[f]).next(m=>{u[f]=m,++c,c===o&&r(u)},m=>s(m))}})}static doWhile(e,n){return new we((r,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):r()};o()})}}function I9(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Om.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=-1;function km(t){return t==null}function Q0(t){return t===0&&1/t==-1/0}function C9(t){return typeof t=="number"&&Number.isInteger(t)&&!Q0(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC="";function N9(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=dA(e)),e=R9(t.get(n),e);return dA(e)}function R9(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case VC:n+="";break;default:n+=o}}return n}function dA(t){return t+VC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function So(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function HC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,n){this.comparator=e,this.root=n||yr.EMPTY}insert(e,n){return new yn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yr.BLACK,null,null))}remove(e){return new yn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new c0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new c0(this.root,e,this.comparator,!1)}getReverseIterator(){return new c0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new c0(this.root,e,this.comparator,!0)}}class c0{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yr{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??yr.RED,this.left=s??yr.EMPTY,this.right=o??yr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new yr(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return yr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return yr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ze(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ze(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ze(27949);return e+(this.isRed()?0:1)}}yr.EMPTY=null,yr.RED=!0,yr.BLACK=!1;yr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ze(57766)}get value(){throw Ze(16141)}get color(){throw Ze(16727)}get left(){throw Ze(29726)}get right(){throw Ze(36894)}copy(e,n,r,s,o){return this}insert(e,n,r){return new yr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.comparator=e,this.data=new yn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mA(this.data.getIterator())}getIteratorFrom(e){return new mA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Xn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xn(this.comparator);return n.data=e,n}}class mA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this.fields=e,e.sort(Er.comparator)}static empty(){return new Ei([])}unionWith(e){let n=new Xn(Er.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ei(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ll(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new zC("Invalid base64 string: "+o):o}}(e);return new _r(n)}static fromUint8Array(e){const n=function(s){let o="";for(let u=0;u<s.length;++u)o+=String.fromCharCode(s[u]);return o}(e);return new _r(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_r.EMPTY_BYTE_STRING=new _r("");const D9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Eo(t){if(Vt(!!t,39018),typeof t=="string"){let e=0;const n=D9.exec(t);if(Vt(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Nn(t.seconds),nanos:Nn(t.nanos)}}function Nn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function _o(t){return typeof t=="string"?_r.fromBase64String(t):_r.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC="server_timestamp",jC="__type__",qC="__previous_value__",YC="__local_write_time__";function U1(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[jC])===null||n===void 0?void 0:n.stringValue)===FC}function Pm(t){const e=t.mapValue.fields[qC];return U1(e)?Pm(e):e}function td(t){const e=Eo(t.mapValue.fields[YC].timestampValue);return new ln(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9{constructor(e,n,r,s,o,u,c,d,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=m}}const W0="(default)";class nd{constructor(e,n){this.projectId=e,this.database=n||W0}static empty(){return new nd("","")}get isDefaultDatabase(){return this.database===W0}isEqual(e){return e instanceof nd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC="__type__",k9="__max__",h0={mapValue:{}},$C="__vector__",Z0="value";function bo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?U1(t)?4:M9(t)?9007199254740991:P9(t)?10:11:Ze(28295,{value:t})}function Ms(t,e){if(t===e)return!0;const n=bo(t);if(n!==bo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return td(t).isEqual(td(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const u=Eo(s.timestampValue),c=Eo(o.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return _o(s.bytesValue).isEqual(_o(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return Nn(s.geoPointValue.latitude)===Nn(o.geoPointValue.latitude)&&Nn(s.geoPointValue.longitude)===Nn(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Nn(s.integerValue)===Nn(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const u=Nn(s.doubleValue),c=Nn(o.doubleValue);return u===c?Q0(u)===Q0(c):isNaN(u)&&isNaN(c)}return!1}(t,e);case 9:return Ll(t.arrayValue.values||[],e.arrayValue.values||[],Ms);case 10:case 11:return function(s,o){const u=s.mapValue.fields||{},c=o.mapValue.fields||{};if(fA(u)!==fA(c))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(c[d]===void 0||!Ms(u[d],c[d])))return!1;return!0}(t,e);default:return Ze(52216,{left:t})}}function rd(t,e){return(t.values||[]).find(n=>Ms(n,e))!==void 0}function Bl(t,e){if(t===e)return 0;const n=bo(t),r=bo(e);if(n!==r)return ht(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ht(t.booleanValue,e.booleanValue);case 2:return function(o,u){const c=Nn(o.integerValue||o.doubleValue),d=Nn(u.integerValue||u.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(t,e);case 3:return pA(t.timestampValue,e.timestampValue);case 4:return pA(td(t),td(e));case 5:return IE(t.stringValue,e.stringValue);case 6:return function(o,u){const c=_o(o),d=_o(u);return c.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,u){const c=o.split("/"),d=u.split("/");for(let f=0;f<c.length&&f<d.length;f++){const m=ht(c[f],d[f]);if(m!==0)return m}return ht(c.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,u){const c=ht(Nn(o.latitude),Nn(u.latitude));return c!==0?c:ht(Nn(o.longitude),Nn(u.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return gA(t.arrayValue,e.arrayValue);case 10:return function(o,u){var c,d,f,m;const y=o.fields||{},_=u.fields||{},T=(c=y[Z0])===null||c===void 0?void 0:c.arrayValue,I=(d=_[Z0])===null||d===void 0?void 0:d.arrayValue,N=ht(((f=T?.values)===null||f===void 0?void 0:f.length)||0,((m=I?.values)===null||m===void 0?void 0:m.length)||0);return N!==0?N:gA(T,I)}(t.mapValue,e.mapValue);case 11:return function(o,u){if(o===h0.mapValue&&u===h0.mapValue)return 0;if(o===h0.mapValue)return 1;if(u===h0.mapValue)return-1;const c=o.fields||{},d=Object.keys(c),f=u.fields||{},m=Object.keys(f);d.sort(),m.sort();for(let y=0;y<d.length&&y<m.length;++y){const _=IE(d[y],m[y]);if(_!==0)return _;const T=Bl(c[d[y]],f[m[y]]);if(T!==0)return T}return ht(d.length,m.length)}(t.mapValue,e.mapValue);default:throw Ze(23264,{Pe:n})}}function pA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ht(t,e);const n=Eo(t),r=Eo(e),s=ht(n.seconds,r.seconds);return s!==0?s:ht(n.nanos,r.nanos)}function gA(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=Bl(n[s],r[s]);if(o)return o}return ht(n.length,r.length)}function Ul(t){return CE(t)}function CE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Eo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return _o(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return $e.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=CE(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const u of r)o?o=!1:s+=",",s+=`${u}:${CE(n.fields[u])}`;return s+"}"}(t.mapValue):Ze(61005,{value:t})}function x0(t){switch(bo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pm(t);return e?16+x0(e):16;case 5:return 2*t.stringValue.length;case 6:return _o(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+x0(o),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return So(r.fields,(o,u)=>{s+=o.length+x0(u)}),s}(t.mapValue);default:throw Ze(13486,{value:t})}}function yA(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function NE(t){return!!t&&"integerValue"in t}function V1(t){return!!t&&"arrayValue"in t}function EA(t){return!!t&&"nullValue"in t}function _A(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function w0(t){return!!t&&"mapValue"in t}function P9(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[GC])===null||n===void 0?void 0:n.stringValue)===$C}function Dh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return So(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Dh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Dh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function M9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===k9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e){this.value=e}static empty(){return new Jr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!w0(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dh(n)}setAll(e){let n=Er.emptyPath(),r={},s=[];e.forEach((u,c)=>{if(!n.isImmediateParentOf(c)){const d=this.getFieldsMap(n);this.applyChanges(d,r,s),r={},s=[],n=c.popLast()}u?r[c.lastSegment()]=Dh(u):s.push(c.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());w0(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ms(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];w0(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){So(n,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new Jr(Dh(this.value))}}function XC(t){const e=[];return So(t.fields,(n,r)=>{const s=new Er([n]);if(w0(r)){const o=XC(r.mapValue).fields;if(o.length===0)e.push(s);else for(const u of o)e.push(s.child(u))}else e.push(s)}),new Ei(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n,r,s,o,u,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=u,this.documentState=c}static newInvalidDocument(e){return new wr(e,0,nt.min(),nt.min(),nt.min(),Jr.empty(),0)}static newFoundDocument(e,n,r,s){return new wr(e,1,n,nt.min(),r,s,0)}static newNoDocument(e,n){return new wr(e,2,n,nt.min(),nt.min(),Jr.empty(),0)}static newUnknownDocument(e,n){return new wr(e,3,n,nt.min(),nt.min(),Jr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,n){this.position=e,this.inclusive=n}}function bA(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],u=t.position[s];if(o.field.isKeyField()?r=$e.comparator($e.fromName(u.referenceValue),n.key):r=Bl(u,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function TA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ms(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n="asc"){this.field=e,this.dir=n}}function L9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{}class Un extends KC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new U9(e,n,r):n==="array-contains"?new z9(e,r):n==="in"?new F9(e,r):n==="not-in"?new j9(e,r):n==="array-contains-any"?new q9(e,r):new Un(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new V9(e,r):new H9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Bl(n,this.value)):n!==null&&bo(this.value)===bo(n)&&this.matchesComparison(Bl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ze(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rs extends KC{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new rs(e,n)}matches(e){return QC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function QC(t){return t.op==="and"}function WC(t){return B9(t)&&QC(t)}function B9(t){for(const e of t.filters)if(e instanceof rs)return!1;return!0}function RE(t){if(t instanceof Un)return t.field.canonicalString()+t.op.toString()+Ul(t.value);if(WC(t))return t.filters.map(e=>RE(e)).join(",");{const e=t.filters.map(n=>RE(n)).join(",");return`${t.op}(${e})`}}function ZC(t,e){return t instanceof Un?function(r,s){return s instanceof Un&&r.op===s.op&&r.field.isEqual(s.field)&&Ms(r.value,s.value)}(t,e):t instanceof rs?function(r,s){return s instanceof rs&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,u,c)=>o&&ZC(u,s.filters[c]),!0):!1}(t,e):void Ze(19439)}function JC(t){return t instanceof Un?function(n){return`${n.field.canonicalString()} ${n.op} ${Ul(n.value)}`}(t):t instanceof rs?function(n){return n.op.toString()+" {"+n.getFilters().map(JC).join(" ,")+"}"}(t):"Filter"}class U9 extends Un{constructor(e,n,r){super(e,n,r),this.key=$e.fromName(r.referenceValue)}matches(e){const n=$e.comparator(e.key,this.key);return this.matchesComparison(n)}}class V9 extends Un{constructor(e,n){super(e,"in",n),this.keys=eN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class H9 extends Un{constructor(e,n){super(e,"not-in",n),this.keys=eN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function eN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>$e.fromName(r.referenceValue))}class z9 extends Un{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return V1(n)&&rd(n.arrayValue,this.value)}}class F9 extends Un{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&rd(this.value.arrayValue,n)}}class j9 extends Un{constructor(e,n){super(e,"not-in",n)}matches(e){if(rd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!rd(this.value.arrayValue,n)}}class q9 extends Un{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!V1(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>rd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(e,n=null,r=[],s=[],o=null,u=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=u,this.endAt=c,this.Ie=null}}function vA(t,e=null,n=[],r=[],s=null,o=null,u=null){return new Y9(t,e,n,r,s,o,u)}function H1(t){const e=it(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>RE(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),km(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ul(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ul(r)).join(",")),e.Ie=n}return e.Ie}function z1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!L9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ZC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!TA(t.startAt,e.startAt)&&TA(t.endAt,e.endAt)}function DE(t){return $e.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n=null,r=[],s=[],o=null,u="F",c=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=u,this.startAt=c,this.endAt=d,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function G9(t,e,n,r,s,o,u,c){return new Kl(t,e,n,r,s,o,u,c)}function tN(t){return new Kl(t)}function SA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nN(t){return t.collectionGroup!==null}function Oh(t){const e=it(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ee.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let c=new Xn(Er.comparator);return u.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new id(o,r))}),n.has(Er.keyField().canonicalString())||e.Ee.push(new id(Er.keyField(),r))}return e.Ee}function Ds(t){const e=it(t);return e.de||(e.de=$9(e,Oh(t))),e.de}function $9(t,e){if(t.limitType==="F")return vA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new id(s.field,o)});const n=t.endAt?new J0(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new J0(t.startAt.position,t.startAt.inclusive):null;return vA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function OE(t,e){const n=t.filters.concat([e]);return new Kl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function kE(t,e,n){return new Kl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Mm(t,e){return z1(Ds(t),Ds(e))&&t.limitType===e.limitType}function rN(t){return`${H1(Ds(t))}|lt:${t.limitType}`}function ml(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>JC(s)).join(", ")}]`),km(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ul(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ul(s)).join(",")),`Target(${r})`}(Ds(t))}; limitType=${t.limitType})`}function Lm(t,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$e.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,s){for(const o of Oh(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(u,c,d){const f=bA(u,c,d);return u.inclusive?f<=0:f<0}(r.startAt,Oh(r),s)||r.endAt&&!function(u,c,d){const f=bA(u,c,d);return u.inclusive?f>=0:f>0}(r.endAt,Oh(r),s))}(t,e)}function X9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function iN(t){return(e,n)=>{let r=!1;for(const s of Oh(t)){const o=K9(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function K9(t,e,n){const r=t.field.isKeyField()?$e.comparator(e.key,n.key):function(o,u,c){const d=u.data.field(o),f=c.data.field(o);return d!==null&&f!==null?Bl(d,f):Ze(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ze(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){So(this.inner,(n,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return HC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9=new yn($e.comparator);function Ea(){return Q9}const sN=new yn($e.comparator);function wh(...t){let e=sN;for(const n of t)e=e.insert(n.key,n);return e}function aN(t){let e=sN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ru(){return kh()}function oN(){return kh()}function kh(){return new gu(t=>t.toString(),(t,e)=>t.isEqual(e))}const W9=new yn($e.comparator),Z9=new Xn($e.comparator);function _t(...t){let e=Z9;for(const n of t)e=e.add(n);return e}const J9=new Xn(ht);function e7(){return J9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Q0(e)?"-0":e}}function uN(t){return{integerValue:""+t}}function t7(t,e){return C9(e)?uN(e):F1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(){this._=void 0}}function n7(t,e,n){return t instanceof em?function(s,o){const u={fields:{[jC]:{stringValue:FC},[YC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&U1(o)&&(o=Pm(o)),o&&(u.fields[qC]=o),{mapValue:u}}(n,e):t instanceof sd?cN(t,e):t instanceof ad?hN(t,e):function(s,o){const u=lN(s,o),c=AA(u)+AA(s.Re);return NE(u)&&NE(s.Re)?uN(c):F1(s.serializer,c)}(t,e)}function r7(t,e,n){return t instanceof sd?cN(t,e):t instanceof ad?hN(t,e):n}function lN(t,e){return t instanceof tm?function(r){return NE(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class em extends Bm{}class sd extends Bm{constructor(e){super(),this.elements=e}}function cN(t,e){const n=dN(e);for(const r of t.elements)n.some(s=>Ms(s,r))||n.push(r);return{arrayValue:{values:n}}}class ad extends Bm{constructor(e){super(),this.elements=e}}function hN(t,e){let n=dN(e);for(const r of t.elements)n=n.filter(s=>!Ms(s,r));return{arrayValue:{values:n}}}class tm extends Bm{constructor(e,n){super(),this.serializer=e,this.Re=n}}function AA(t){return Nn(t.integerValue||t.doubleValue)}function dN(t){return V1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function i7(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof sd&&s instanceof sd||r instanceof ad&&s instanceof ad?Ll(r.elements,s.elements,Ms):r instanceof tm&&s instanceof tm?Ms(r.Re,s.Re):r instanceof em&&s instanceof em}(t.transform,e.transform)}class s7{constructor(e,n){this.version=e,this.transformResults=n}}class bi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new bi}static exists(e){return new bi(void 0,e)}static updateTime(e){return new bi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function I0(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Um{}function fN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Vm(t.key,bi.none()):new _d(t.key,t.data,bi.none());{const n=t.data,r=Jr.empty();let s=new Xn(Er.comparator);for(let o of e.fields)if(!s.has(o)){let u=n.field(o);u===null&&o.length>1&&(o=o.popLast(),u=n.field(o)),u===null?r.delete(o):r.set(o,u),s=s.add(o)}return new Ao(t.key,r,new Ei(s.toArray()),bi.none())}}function a7(t,e,n){t instanceof _d?function(s,o,u){const c=s.value.clone(),d=wA(s.fieldTransforms,o,u.transformResults);c.setAll(d),o.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Ao?function(s,o,u){if(!I0(s.precondition,o))return void o.convertToUnknownDocument(u.version);const c=wA(s.fieldTransforms,o,u.transformResults),d=o.data;d.setAll(mN(s)),d.setAll(c),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(t,e,n):function(s,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,n)}function Ph(t,e,n,r){return t instanceof _d?function(o,u,c,d){if(!I0(o.precondition,u))return c;const f=o.value.clone(),m=IA(o.fieldTransforms,d,u);return f.setAll(m),u.convertToFoundDocument(u.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ao?function(o,u,c,d){if(!I0(o.precondition,u))return c;const f=IA(o.fieldTransforms,d,u),m=u.data;return m.setAll(mN(o)),m.setAll(f),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(o,u,c){return I0(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c}(t,e,n)}function o7(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=lN(r.transform,s||null);o!=null&&(n===null&&(n=Jr.empty()),n.set(r.field,o))}return n||null}function xA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ll(r,s,(o,u)=>i7(o,u))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class _d extends Um{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ao extends Um{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function mN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function wA(t,e,n){const r=new Map;Vt(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const o=t[s],u=o.transform,c=e.data.field(o.field);r.set(o.field,r7(u,c,n[s]))}return r}function IA(t,e,n){const r=new Map;for(const s of t){const o=s.transform,u=n.data.field(s.field);r.set(s.field,n7(o,u,e))}return r}class Vm extends Um{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class u7 extends Um{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l7{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&a7(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ph(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ph(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=oN();return this.mutations.forEach(s=>{const o=e.get(s.key),u=o.overlayedDocument;let c=this.applyToLocalView(u,o.mutatedFields);c=n.has(s.key)?null:c;const d=fN(u,c);d!==null&&r.set(s.key,d),u.isValidDocument()||u.convertToNoDocument(nt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_t())}isEqual(e){return this.batchId===e.batchId&&Ll(this.mutations,e.mutations,(n,r)=>xA(n,r))&&Ll(this.baseMutations,e.baseMutations,(n,r)=>xA(n,r))}}class j1{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Vt(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return W9}();const o=e.mutations;for(let u=0;u<o.length;u++)s=s.insert(o[u].key,r[u].version);return new j1(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mn,It;function d7(t){switch(t){case xe.OK:return Ze(64938);case xe.CANCELLED:case xe.UNKNOWN:case xe.DEADLINE_EXCEEDED:case xe.RESOURCE_EXHAUSTED:case xe.INTERNAL:case xe.UNAVAILABLE:case xe.UNAUTHENTICATED:return!1;case xe.INVALID_ARGUMENT:case xe.NOT_FOUND:case xe.ALREADY_EXISTS:case xe.PERMISSION_DENIED:case xe.FAILED_PRECONDITION:case xe.ABORTED:case xe.OUT_OF_RANGE:case xe.UNIMPLEMENTED:case xe.DATA_LOSS:return!0;default:return Ze(15467,{code:t})}}function pN(t){if(t===void 0)return ya("GRPC error has no .code"),xe.UNKNOWN;switch(t){case Mn.OK:return xe.OK;case Mn.CANCELLED:return xe.CANCELLED;case Mn.UNKNOWN:return xe.UNKNOWN;case Mn.DEADLINE_EXCEEDED:return xe.DEADLINE_EXCEEDED;case Mn.RESOURCE_EXHAUSTED:return xe.RESOURCE_EXHAUSTED;case Mn.INTERNAL:return xe.INTERNAL;case Mn.UNAVAILABLE:return xe.UNAVAILABLE;case Mn.UNAUTHENTICATED:return xe.UNAUTHENTICATED;case Mn.INVALID_ARGUMENT:return xe.INVALID_ARGUMENT;case Mn.NOT_FOUND:return xe.NOT_FOUND;case Mn.ALREADY_EXISTS:return xe.ALREADY_EXISTS;case Mn.PERMISSION_DENIED:return xe.PERMISSION_DENIED;case Mn.FAILED_PRECONDITION:return xe.FAILED_PRECONDITION;case Mn.ABORTED:return xe.ABORTED;case Mn.OUT_OF_RANGE:return xe.OUT_OF_RANGE;case Mn.UNIMPLEMENTED:return xe.UNIMPLEMENTED;case Mn.DATA_LOSS:return xe.DATA_LOSS;default:return Ze(39323,{code:t})}}(It=Mn||(Mn={}))[It.OK=0]="OK",It[It.CANCELLED=1]="CANCELLED",It[It.UNKNOWN=2]="UNKNOWN",It[It.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",It[It.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",It[It.NOT_FOUND=5]="NOT_FOUND",It[It.ALREADY_EXISTS=6]="ALREADY_EXISTS",It[It.PERMISSION_DENIED=7]="PERMISSION_DENIED",It[It.UNAUTHENTICATED=16]="UNAUTHENTICATED",It[It.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",It[It.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",It[It.ABORTED=10]="ABORTED",It[It.OUT_OF_RANGE=11]="OUT_OF_RANGE",It[It.UNIMPLEMENTED=12]="UNIMPLEMENTED",It[It.INTERNAL=13]="INTERNAL",It[It.UNAVAILABLE=14]="UNAVAILABLE",It[It.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f7=new ho([4294967295,4294967295],0);function CA(t){const e=BC().encode(t),n=new NC;return n.update(e),new Uint8Array(n.digest())}function NA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ho([n,r],0),new ho([s,o],0)]}class q1{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ih(`Invalid padding: ${n}`);if(r<0)throw new Ih(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ih(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ih(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=ho.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(ho.fromNumber(r)));return s.compare(f7)===1&&(s=new ho([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=CA(e),[r,s]=NA(n);for(let o=0;o<this.hashCount;o++){const u=this.we(r,s,o);if(!this.be(u))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new q1(o,s,n);return r.forEach(c=>u.insert(c)),u}insert(e){if(this.pe===0)return;const n=CA(e),[r,s]=NA(n);for(let o=0;o<this.hashCount;o++){const u=this.we(r,s,o);this.Se(u)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ih extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,bd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Hm(nt.min(),s,new yn(ht),Ea(),_t())}}class bd{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new bd(r,n,_t(),_t(),_t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class gN{constructor(e,n){this.targetId=e,this.Ce=n}}class yN{constructor(e,n,r=_r.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class RA{constructor(){this.Fe=0,this.Me=DA(),this.xe=_r.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=_t(),n=_t(),r=_t();return this.Me.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ze(38017,{changeType:o})}}),new bd(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=DA()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Vt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class m7{constructor(e){this.ze=e,this.je=new Map,this.He=Ea(),this.Je=d0(),this.Ye=d0(),this.Ze=new yn(ht)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:Ze(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const o=s.target;if(DE(o))if(r===0){const u=new $e(o.path);this.tt(n,u,wr.newNoDocument(u,nt.min()))}else Vt(r===1,20013,{expectedCount:r});else{const u=this.ut(n);if(u!==r){const c=this.ct(e),d=c?this.lt(c,e,u):1;if(d!==0){this.st(n);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,f)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let u,c;try{u=_o(r).toUint8Array()}catch(d){if(d instanceof zC)return Ml("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new q1(u,s,o)}catch(d){return Ml(d instanceof Ih?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.pe===0?null:c}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(o=>{const u=this.ze.Pt(),c=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.tt(n,o,null),s++)}),s}It(e){const n=new Map;this.je.forEach((o,u)=>{const c=this._t(u);if(c){if(o.current&&DE(c.target)){const d=new $e(c.target.path);this.Et(d).has(u)||this.dt(u,d)||this.tt(u,d,wr.newNoDocument(d,e))}o.Le&&(n.set(u,o.qe()),o.Qe())}});let r=_t();this.Ye.forEach((o,u)=>{let c=!0;u.forEachWhile(d=>{const f=this._t(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.He.forEach((o,u)=>u.setReadTime(e));const s=new Hm(e,n,this.Ze,this.He,r);return this.He=Ea(),this.Je=d0(),this.Ye=d0(),this.Ze=new yn(ht),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new RA,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Xn(ht),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Xn(ht),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||Be("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new RA),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function d0(){return new yn($e.comparator)}function DA(){return new yn($e.comparator)}const p7={asc:"ASCENDING",desc:"DESCENDING"},g7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},y7={and:"AND",or:"OR"};class E7{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function PE(t,e){return t.useProto3Json||km(e)?e:{value:e}}function nm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function EN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function _7(t,e){return nm(t,e.toTimestamp())}function Os(t){return Vt(!!t,49232),nt.fromTimestamp(function(n){const r=Eo(n);return new ln(r.seconds,r.nanos)}(t))}function Y1(t,e){return ME(t,e).canonicalString()}function ME(t,e){const n=function(s){return new un(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function _N(t){const e=un.fromString(t);return Vt(AN(e),10190,{key:e.toString()}),e}function LE(t,e){return Y1(t.databaseId,e.path)}function My(t,e){const n=_N(e);if(n.get(1)!==t.databaseId.projectId)throw new Ue(xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ue(xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $e(TN(n))}function bN(t,e){return Y1(t.databaseId,e)}function b7(t){const e=_N(t);return e.length===4?un.emptyPath():TN(e)}function BE(t){return new un(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function TN(t){return Vt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function OA(t,e,n){return{name:LE(t,e),fields:n.value.mapValue.fields}}function T7(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ze(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(Vt(m===void 0||typeof m=="string",58123),_r.fromBase64String(m||"")):(Vt(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),_r.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),u=e.targetChange.cause,c=u&&function(f){const m=f.code===void 0?xe.UNKNOWN:pN(f.code);return new Ue(m,f.message||"")}(u);n=new yN(r,s,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=My(t,r.document.name),o=Os(r.document.updateTime),u=r.document.createTime?Os(r.document.createTime):nt.min(),c=new Jr({mapValue:{fields:r.document.fields}}),d=wr.newFoundDocument(s,o,u,c),f=r.targetIds||[],m=r.removedTargetIds||[];n=new C0(f,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=My(t,r.document),o=r.readTime?Os(r.readTime):nt.min(),u=wr.newNoDocument(s,o),c=r.removedTargetIds||[];n=new C0([],c,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=My(t,r.document),o=r.removedTargetIds||[];n=new C0([],o,s,null)}else{if(!("filter"in e))return Ze(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,u=new h7(s,o),c=r.targetId;n=new gN(c,u)}}return n}function v7(t,e){let n;if(e instanceof _d)n={update:OA(t,e.key,e.value)};else if(e instanceof Vm)n={delete:LE(t,e.key)};else if(e instanceof Ao)n={update:OA(t,e.key,e.data),updateMask:D7(e.fieldMask)};else{if(!(e instanceof u7))return Ze(16599,{ft:e.type});n={verify:LE(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const c=u.transform;if(c instanceof em)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof sd)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ad)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof tm)return{fieldPath:u.field.canonicalString(),increment:c.Re};throw Ze(20930,{transform:u.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:_7(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ze(27497)}(t,e.precondition)),n}function S7(t,e){return t&&t.length>0?(Vt(e!==void 0,14353),t.map(n=>function(s,o){let u=s.updateTime?Os(s.updateTime):Os(o);return u.isEqual(nt.min())&&(u=Os(o)),new s7(u,s.transformResults||[])}(n,e))):[]}function A7(t,e){return{documents:[bN(t,e.path)]}}function x7(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=bN(t,s);const o=function(f){if(f.length!==0)return SN(rs.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const u=function(f){if(f.length!==0)return f.map(m=>function(_){return{field:pl(_.field),direction:C7(_.dir)}}(m))}(e.orderBy);u&&(n.structuredQuery.orderBy=u);const c=PE(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{gt:n,parent:s}}function w7(t){let e=b7(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Vt(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(y){const _=vN(y);return _ instanceof rs&&WC(_)?_.getFilters():[_]}(n.where));let u=[];n.orderBy&&(u=function(y){return y.map(_=>function(I){return new id(gl(I.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(_))}(n.orderBy));let c=null;n.limit&&(c=function(y){let _;return _=typeof y=="object"?y.value:y,km(_)?null:_}(n.limit));let d=null;n.startAt&&(d=function(y){const _=!!y.before,T=y.values||[];return new J0(T,_)}(n.startAt));let f=null;return n.endAt&&(f=function(y){const _=!y.before,T=y.values||[];return new J0(T,_)}(n.endAt)),G9(e,s,u,o,c,"F",d,f)}function I7(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ze(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=gl(n.unaryFilter.field);return Un.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=gl(n.unaryFilter.field);return Un.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=gl(n.unaryFilter.field);return Un.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=gl(n.unaryFilter.field);return Un.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ze(61313);default:return Ze(60726)}}(t):t.fieldFilter!==void 0?function(n){return Un.create(gl(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ze(58110);default:return Ze(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return rs.create(n.compositeFilter.filters.map(r=>vN(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ze(1026)}}(n.compositeFilter.op))}(t):Ze(30097,{filter:t})}function C7(t){return p7[t]}function N7(t){return g7[t]}function R7(t){return y7[t]}function pl(t){return{fieldPath:t.canonicalString()}}function gl(t){return Er.fromServerFormat(t.fieldPath)}function SN(t){return t instanceof Un?function(n){if(n.op==="=="){if(_A(n.value))return{unaryFilter:{field:pl(n.field),op:"IS_NAN"}};if(EA(n.value))return{unaryFilter:{field:pl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_A(n.value))return{unaryFilter:{field:pl(n.field),op:"IS_NOT_NAN"}};if(EA(n.value))return{unaryFilter:{field:pl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pl(n.field),op:N7(n.op),value:n.value}}}(t):t instanceof rs?function(n){const r=n.getFilters().map(s=>SN(s));return r.length===1?r[0]:{compositeFilter:{op:R7(n.op),filters:r}}}(t):Ze(54877,{filter:t})}function D7(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function AN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,n,r,s,o=nt.min(),u=nt.min(),c=_r.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new so(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new so(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new so(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new so(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{constructor(e){this.wt=e}}function k7(t){const e=w7({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?kE(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(){this.Cn=new M7}addToCollectionParentIndex(e,n){return this.Cn.add(n),we.resolve()}getCollectionParents(e,n){return we.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return we.resolve()}deleteFieldIndex(e,n){return we.resolve()}deleteAllFieldIndexes(e){return we.resolve()}createTargetIndexes(e,n){return we.resolve()}getDocumentsMatchingTarget(e,n){return we.resolve(null)}getIndexType(e,n){return we.resolve(0)}getFieldIndexes(e,n){return we.resolve([])}getNextCollectionGroupToUpdate(e){return we.resolve(null)}getMinOffset(e,n){return we.resolve(yo.min())}getMinOffsetFromCollectionGroup(e,n){return we.resolve(yo.min())}updateCollectionGroup(e,n,r){return we.resolve()}updateIndexEntries(e,n){return we.resolve()}}class M7{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Xn(un.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Xn(un.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xN=41943040;class Wr{static withCacheSize(e){return new Wr(e,Wr.DEFAULT_COLLECTION_PERCENTILE,Wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wr.DEFAULT_COLLECTION_PERCENTILE=10,Wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wr.DEFAULT=new Wr(xN,Wr.DEFAULT_COLLECTION_PERCENTILE,Wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wr.DISABLED=new Wr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Vl(0)}static lr(){return new Vl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="LruGarbageCollector",L7=1048576;function MA([t,e],[n,r]){const s=ht(t,n);return s===0?ht(e,r):s}class B7{constructor(e){this.Er=e,this.buffer=new Xn(MA),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();MA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class U7{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Be(PA,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xl(n)?Be(PA,"Ignoring IndexedDB error during garbage collection: ",n):await $l(n)}await this.mr(3e5)})}}class V7{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return we.resolve(Om.le);const r=new B7(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),we.resolve(kA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kA):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,o,u,c,d,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,u=Date.now(),this.nthSequenceNumber(e,s))).next(y=>(r=y,c=Date.now(),this.removeTargets(e,r,n))).next(y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(f=Date.now(),fl()<=Et.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-m}ms
	Determined least recently used ${s} in `+(c-u)+`ms
	Removed ${o} targets in `+(d-c)+`ms
	Removed ${y} documents in `+(f-d)+`ms
Total Duration: ${f-m}ms`),we.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:y})))}}function H7(t,e){return new V7(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(){this.changes=new gu(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?we.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j7{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ph(r.mutation,s,Ei.empty(),ln.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,_t()).next(()=>r))}getLocalViewOfDocuments(e,n,r=_t()){const s=ru();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(o=>{let u=wh();return o.forEach((c,d)=>{u=u.insert(c,d.overlayedDocument)}),u}))}getOverlayedDocuments(e,n){const r=ru();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,_t()))}populateOverlays(e,n,r){const s=[];return r.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((u,c)=>{n.set(u,c)})})}computeViews(e,n,r,s){let o=Ea();const u=kh(),c=function(){return kh()}();return n.forEach((d,f)=>{const m=r.get(f.key);s.has(f.key)&&(m===void 0||m.mutation instanceof Ao)?o=o.insert(f.key,f):m!==void 0?(u.set(f.key,m.mutation.getFieldMask()),Ph(m.mutation,f,m.mutation.getFieldMask(),ln.now())):u.set(f.key,Ei.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((f,m)=>u.set(f,m)),n.forEach((f,m)=>{var y;return c.set(f,new F7(m,(y=u.get(f))!==null&&y!==void 0?y:null))}),c))}recalculateAndSaveOverlays(e,n){const r=kh();let s=new yn((u,c)=>u-c),o=_t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(u=>{for(const c of u)c.keys().forEach(d=>{const f=n.get(d);if(f===null)return;let m=r.get(d)||Ei.empty();m=c.applyToLocalView(f,m),r.set(d,m);const y=(s.get(c.batchId)||_t()).add(d);s=s.insert(c.batchId,y)})}).next(()=>{const u=[],c=s.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),f=d.key,m=d.value,y=oN();m.forEach(_=>{if(!o.has(_)){const T=fN(n.get(_),r.get(_));T!==null&&y.set(_,T),o=o.add(_)}}),u.push(this.documentOverlayCache.saveOverlays(e,f,y))}return we.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(u){return $e.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):nN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(o=>{const u=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):we.resolve(ru());let c=ed,d=o;return u.next(f=>we.forEach(f,(m,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),o.get(m)?we.resolve():this.remoteDocumentCache.getEntry(e,m).next(_=>{d=d.insert(m,_)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,d,f,_t())).next(m=>({batchId:c,changes:aN(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $e(n)).next(r=>{let s=wh();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let u=wh();return this.indexManager.getCollectionParents(e,o).next(c=>we.forEach(c,d=>{const f=function(y,_){return new Kl(_,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next(m=>{m.forEach((y,_)=>{u=u.insert(y,_)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s))).next(u=>{o.forEach((d,f)=>{const m=f.getKey();u.get(m)===null&&(u=u.insert(m,wr.newInvalidDocument(m)))});let c=wh();return u.forEach((d,f)=>{const m=o.get(d);m!==void 0&&Ph(m.mutation,f,Ei.empty(),ln.now()),Lm(n,f)&&(c=c.insert(d,f))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return we.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Os(s.createTime)}}(n)),we.resolve()}getNamedQuery(e,n){return we.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:k7(s.bundledQuery),readTime:Os(s.readTime)}}(n)),we.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y7{constructor(){this.overlays=new yn($e.comparator),this.Qr=new Map}getOverlay(e,n){return we.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ru();return we.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,o)=>{this.St(e,n,o)}),we.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),we.resolve()}getOverlaysForCollection(e,n,r){const s=ru(),o=n.length+1,u=new $e(n.child("")),c=this.overlays.getIteratorFrom(u);for(;c.hasNext();){const d=c.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return we.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new yn((f,m)=>f-m);const u=this.overlays.getIterator();for(;u.hasNext();){const f=u.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let m=o.get(f.largestBatchId);m===null&&(m=ru(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const c=ru(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,m)=>c.set(f,m)),!(c.size()>=s)););return we.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new c7(n,r));let o=this.Qr.get(n);o===void 0&&(o=_t(),this.Qr.set(n,o)),this.Qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G7{constructor(){this.sessionToken=_r.EMPTY_BYTE_STRING}getSessionToken(e){return we.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,we.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(){this.$r=new Xn(sr.Ur),this.Kr=new Xn(sr.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new sr(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new sr(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new $e(new un([])),r=new sr(n,e),s=new sr(n,e+1),o=[];return this.Kr.forEachInRange([r,s],u=>{this.zr(u),o.push(u.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new $e(new un([])),r=new sr(n,e),s=new sr(n,e+1);let o=_t();return this.Kr.forEachInRange([r,s],u=>{o=o.add(u.key)}),o}containsKey(e){const n=new sr(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class sr{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return $e.comparator(e.key,n.key)||ht(e.Zr,n.Zr)}static Wr(e,n){return ht(e.Zr,n.Zr)||$e.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $7{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Xn(sr.Ur)}checkEmpty(e){return we.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new l7(o,n,r,s);this.mutationQueue.push(u);for(const c of s)this.Xr=this.Xr.add(new sr(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return we.resolve(u)}lookupMutationBatch(e,n){return we.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),o=s<0?0:s;return we.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(this.mutationQueue.length===0?B1:this.nr-1)}getAllMutationBatches(e){return we.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new sr(n,0),s=new sr(n,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,s],u=>{const c=this.ei(u.Zr);o.push(c)}),we.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xn(ht);return n.forEach(s=>{const o=new sr(s,0),u=new sr(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,u],c=>{r=r.add(c.Zr)})}),we.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;$e.isDocumentKey(o)||(o=o.child(""));const u=new sr(new $e(o),0);let c=new Xn(ht);return this.Xr.forEachWhile(d=>{const f=d.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(c=c.add(d.Zr)),!0)},u),we.resolve(this.ni(c))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Vt(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return we.forEach(n.mutations,s=>{const o=new sr(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new sr(n,0),s=this.Xr.firstAfterOrEqual(r);return we.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,we.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X7{constructor(e){this.ii=e,this.docs=function(){return new yn($e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,u=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return we.resolve(r?r.document.mutableCopy():wr.newInvalidDocument(n))}getEntries(e,n){let r=Ea();return n.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():wr.newInvalidDocument(s))}),we.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=Ea();const u=n.path,c=new $e(u.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:f,value:{document:m}}=d.getNext();if(!u.isPrefixOf(f.path))break;f.path.length>u.length+1||A9(S9(m),r)<=0||(s.has(m.key)||Lm(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return we.resolve(o)}getAllFromCollectionGroup(e,n,r,s){Ze(9500)}si(e,n){return we.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new K7(this)}getSize(e){return we.resolve(this.size)}}class K7 extends z7{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),we.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q7{constructor(e){this.persistence=e,this.oi=new gu(n=>H1(n),z1),this.lastRemoteSnapshotVersion=nt.min(),this.highestTargetId=0,this._i=0,this.ai=new G1,this.targetCount=0,this.ui=Vl.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),we.resolve()}getLastRemoteSnapshotVersion(e){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return we.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),we.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Vl(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,we.resolve()}updateTargetData(e,n){return this.Tr(n),we.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,we.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.oi.forEach((u,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.oi.delete(u),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),we.waitFor(o).next(()=>s)}getTargetCount(e){return we.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return we.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),we.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(u=>{o.push(s.markPotentiallyOrphaned(e,u))}),we.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),we.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return we.resolve(r)}containsKey(e,n){return we.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,n){this.ci={},this.overlays={},this.li=new Om(0),this.hi=!1,this.hi=!0,this.Pi=new G7,this.referenceDelegate=e(this),this.Ti=new Q7(this),this.indexManager=new P7,this.remoteDocumentCache=function(s){return new X7(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new O7(n),this.Ei=new q7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Y7,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new $7(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){Be("MemoryPersistence","Starting transaction:",e);const s=new W7(this.li.next());return this.referenceDelegate.di(),r(s).next(o=>this.referenceDelegate.Ai(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ri(e,n){return we.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class W7 extends w9{constructor(e){super(),this.currentSequenceNumber=e}}class $1{constructor(e){this.persistence=e,this.Vi=new G1,this.mi=null}static fi(e){return new $1(e)}get gi(){if(this.mi)return this.mi;throw Ze(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),we.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),we.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),we.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.gi,r=>{const s=$e.fromPath(r);return this.pi(e,s).next(o=>{o||n.removeEntry(s,nt.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return we.or([()=>we.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class rm{constructor(e,n){this.persistence=e,this.yi=new gu(r=>N9(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=H7(this,n)}static fi(e,n){return new rm(e,n)}di(){}Ai(e){return we.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return we.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(o=>o?we.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.si(e,u=>this.Dr(e,u,n).next(c=>{c||(r++,o.removeEntry(u,nt.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),we.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),we.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),we.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),we.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=x0(e.data.value)),n}Dr(e,n,r){return we.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return we.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=_t(),s=_t();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new X1(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return $5()?8:I9(Cr())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ws(e,n).next(u=>{o.result=u}).next(()=>{if(!o.result)return this.bs(e,n,s,r).next(u=>{o.result=u})}).next(()=>{if(o.result)return;const u=new Z7;return this.Ss(e,n,u).next(c=>{if(o.result=c,this.fs)return this.Ds(e,n,u,c.size)})}).next(()=>o.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(fl()<=Et.DEBUG&&Be("QueryEngine","SDK will not create cache indexes for query:",ml(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),we.resolve()):(fl()<=Et.DEBUG&&Be("QueryEngine","Query:",ml(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(fl()<=Et.DEBUG&&Be("QueryEngine","The SDK decides to create cache indexes for query:",ml(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ds(n))):we.resolve())}ws(e,n){if(SA(n))return we.resolve(null);let r=Ds(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=kE(n,null,"F"),r=Ds(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const u=_t(...o);return this.ys.getDocuments(e,u).next(c=>this.indexManager.getMinOffset(e,r).next(d=>{const f=this.vs(n,c);return this.Cs(n,f,u,d.readTime)?this.ws(e,kE(n,null,"F")):this.Fs(e,f,n,d)}))})))}bs(e,n,r,s){return SA(n)||s.isEqual(nt.min())?we.resolve(null):this.ys.getDocuments(e,r).next(o=>{const u=this.vs(n,o);return this.Cs(n,u,r,s)?we.resolve(null):(fl()<=Et.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ml(n)),this.Fs(e,u,n,v9(s,ed)).next(c=>c))})}vs(e,n){let r=new Xn(iN(e));return n.forEach((s,o)=>{Lm(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,r){return fl()<=Et.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",ml(n)),this.ys.getDocumentsMatchingQuery(e,n,yo.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(o=>(n.forEach(u=>{o=o.insert(u.key,u)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="LocalStore",eB=3e8;class tB{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new yn(ht),this.Os=new gu(o=>H1(o),z1),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new j7(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function nB(t,e,n,r){return new tB(t,e,n,r)}async function IN(t,e){const n=it(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const u=[],c=[];let d=_t();for(const f of s){u.push(f.batchId);for(const m of f.mutations)d=d.add(m.key)}for(const f of o){c.push(f.batchId);for(const m of f.mutations)d=d.add(m.key)}return n.localDocuments.getDocuments(r,d).next(f=>({ks:f,removedBatchIds:u,addedBatchIds:c}))})})}function rB(t,e){const n=it(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=n.Bs.newChangeBuffer({trackRemovals:!0});return function(c,d,f,m){const y=f.batch,_=y.keys();let T=we.resolve();return _.forEach(I=>{T=T.next(()=>m.getEntry(d,I)).next(N=>{const k=f.docVersions.get(I);Vt(k!==null,48541),N.version.compareTo(k)<0&&(y.applyToRemoteDocument(N,f),N.isValidDocument()&&(N.setReadTime(f.commitVersion),m.addEntry(N)))})}),T.next(()=>c.mutationQueue.removeMutationBatch(d,y))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let d=_t();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function CN(t){const e=it(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function iB(t,e){const n=it(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const c=[];e.targetChanges.forEach((m,y)=>{const _=s.get(y);if(!_)return;c.push(n.Ti.removeMatchingKeys(o,m.removedDocuments,y).next(()=>n.Ti.addMatchingKeys(o,m.addedDocuments,y)));let T=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?T=T.withResumeToken(_r.EMPTY_BYTE_STRING,nt.min()).withLastLimboFreeSnapshotVersion(nt.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,r)),s=s.insert(y,T),function(N,k,x){return N.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=eB?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(_,T,m)&&c.push(n.Ti.updateTargetData(o,T))});let d=Ea(),f=_t();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(sB(o,u,e.documentUpdates).next(m=>{d=m.qs,f=m.Qs})),!r.isEqual(nt.min())){const m=n.Ti.getLastRemoteSnapshotVersion(o).next(y=>n.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(m)}return we.waitFor(c).next(()=>u.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,f)).next(()=>d)}).then(o=>(n.xs=s,o))}function sB(t,e,n){let r=_t(),s=_t();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let u=Ea();return n.forEach((c,d)=>{const f=o.get(c);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(c)),d.isNoDocument()&&d.version.isEqual(nt.min())?(e.removeEntry(c,d.readTime),u=u.insert(c,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),u=u.insert(c,d)):Be(K1,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",d.version)}),{qs:u,Qs:s}})}function aB(t,e){const n=it(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=B1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oB(t,e){const n=it(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(o=>o?(s=o,we.resolve(s)):n.Ti.allocateTargetId(r).next(u=>(s=new so(e,u,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function UE(t,e,n){const r=it(t),s=r.xs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,u=>r.persistence.referenceDelegate.removeTarget(u,s))}catch(u){if(!Xl(u))throw u;Be(K1,`Failed to update sequence numbers for target ${e}: ${u}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function LA(t,e,n){const r=it(t);let s=nt.min(),o=_t();return r.persistence.runTransaction("Execute query","readwrite",u=>function(d,f,m){const y=it(d),_=y.Os.get(m);return _!==void 0?we.resolve(y.xs.get(_)):y.Ti.getTargetData(f,m)}(r,u,Ds(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(u,c.targetId).next(d=>{o=d})}).next(()=>r.Ms.getDocumentsMatchingQuery(u,e,n?s:nt.min(),n?o:_t())).next(c=>(uB(r,X9(e),c),{documents:c,$s:o})))}function uB(t,e,n){let r=t.Ns.get(e)||nt.min();n.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Ns.set(e,r)}class BA{constructor(){this.activeTargetIds=e7()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lB{constructor(){this.xo=new BA,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new BA,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cB{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="ConnectivityMonitor";class VA{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Be(UA,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Be(UA,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let f0=null;function VE(){return f0===null?f0=function(){return 268435456+Math.round(2147483648*Math.random())}():f0++,"0x"+f0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly="RestConnection",hB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dB{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===W0?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,o){const u=VE(),c=this.jo(e,n.toUriEncodedString());Be(Ly,`Sending RPC '${e}' ${u}:`,c,r);const d={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(d,s,o);const{host:f}=new URL(c),m=pu(f);return this.Jo(e,c,d,r,m).then(y=>(Be(Ly,`Received RPC '${e}' ${u}: `,y),y),y=>{throw Ml(Ly,`RPC '${e}' ${u} failed with error: `,y,"url: ",c,"request:",r),y})}Yo(e,n,r,s,o,u){return this.zo(e,n,r,s,o)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}jo(e,n){const r=hB[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="WebChannelConnection";class mB extends dB{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,o){const u=VE();return new Promise((c,d)=>{const f=new RC;f.setWithCredentials(!0),f.listenOnce(DC.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case A0.NO_ERROR:const y=f.getResponseJson();Be(Ar,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(y)),c(y);break;case A0.TIMEOUT:Be(Ar,`RPC '${e}' ${u} timed out`),d(new Ue(xe.DEADLINE_EXCEEDED,"Request time out"));break;case A0.HTTP_ERROR:const _=f.getStatus();if(Be(Ar,`RPC '${e}' ${u} failed with status:`,_,"response text:",f.getResponseText()),_>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const I=T?.error;if(I&&I.status&&I.message){const N=function(x){const C=x.toLowerCase().replace(/_/g,"-");return Object.values(xe).indexOf(C)>=0?C:xe.UNKNOWN}(I.status);d(new Ue(N,I.message))}else d(new Ue(xe.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Ue(xe.UNAVAILABLE,"Connection failed."));break;default:Ze(9055,{h_:e,streamId:u,P_:f.getLastErrorCode(),T_:f.getLastError()})}}finally{Be(Ar,`RPC '${e}' ${u} completed.`)}});const m=JSON.stringify(s);Be(Ar,`RPC '${e}' ${u} sending request:`,s),f.send(n,"POST",m,r,15)})}I_(e,n,r){const s=VE(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=PC(),c=kC(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Ho(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const m=o.join("");Be(Ar,`Creating RPC '${e}' stream ${s}: ${m}`,d);const y=u.createWebChannel(m,d);this.E_(y);let _=!1,T=!1;const I=new fB({Zo:k=>{T?Be(Ar,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(_||(Be(Ar,`Opening RPC '${e}' stream ${s} transport.`),y.open(),_=!0),Be(Ar,`RPC '${e}' stream ${s} sending:`,k),y.send(k))},Xo:()=>y.close()}),N=(k,x,C)=>{k.listen(x,L=>{try{C(L)}catch(M){setTimeout(()=>{throw M},0)}})};return N(y,xh.EventType.OPEN,()=>{T||(Be(Ar,`RPC '${e}' stream ${s} transport opened.`),I.__())}),N(y,xh.EventType.CLOSE,()=>{T||(T=!0,Be(Ar,`RPC '${e}' stream ${s} transport closed`),I.u_(),this.d_(y))}),N(y,xh.EventType.ERROR,k=>{T||(T=!0,Ml(Ar,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),I.u_(new Ue(xe.UNAVAILABLE,"The operation could not be completed")))}),N(y,xh.EventType.MESSAGE,k=>{var x;if(!T){const C=k.data[0];Vt(!!C,16349);const L=C,M=L?.error||((x=L[0])===null||x===void 0?void 0:x.error);if(M){Be(Ar,`RPC '${e}' stream ${s} received error:`,M);const q=M.status;let B=function(D){const V=Mn[D];if(V!==void 0)return pN(V)}(q),S=M.message;B===void 0&&(B=xe.INTERNAL,S="Unknown error status: "+q+" with message "+M.message),T=!0,I.u_(new Ue(B,S)),y.close()}else Be(Ar,`RPC '${e}' stream ${s} received:`,C),I.c_(C)}}),N(c,OC.STAT_EVENT,k=>{k.stat===wE.PROXY?Be(Ar,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===wE.NOPROXY&&Be(Ar,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.a_()},0),I}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function By(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t){return new E7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,n,r=1e3,s=1.5,o=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=s,this.V_=o,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&Be("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="PersistentStream";class RN{constructor(e,n,r,s,o,u,c,d){this.xi=e,this.S_=r,this.D_=s,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new NN(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===xe.RESOURCE_EXHAUSTED?(ya(n.toString()),ya("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===xe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{e(()=>{const s=new Ue(xe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return Be(HA,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(Be(HA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pB extends RN{constructor(e,n,r,s,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,u),this.serializer=o}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=T7(this.serializer,e),r=function(o){if(!("targetChange"in o))return nt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?nt.min():u.readTime?Os(u.readTime):nt.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=BE(this.serializer),n.addTarget=function(o,u){let c;const d=u.target;if(c=DE(d)?{documents:A7(o,d)}:{query:x7(o,d).gt},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){c.resumeToken=EN(o,u.resumeToken);const f=PE(o,u.expectedCount);f!==null&&(c.expectedCount=f)}else if(u.snapshotVersion.compareTo(nt.min())>0){c.readTime=nm(o,u.snapshotVersion.toTimestamp());const f=PE(o,u.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,e);const r=I7(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=BE(this.serializer),n.removeTarget=e,this.Q_(n)}}class gB extends RN{constructor(e,n,r,s,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,u),this.serializer=o}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return Vt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Vt(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Vt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=S7(e.writeResults,e.commitTime),r=Os(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=BE(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>v7(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{}class EB extends yB{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new Ue(xe.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.zo(e,ME(n,r),s,o,u)).catch(o=>{throw o.name==="FirebaseError"?(o.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ue(xe.UNKNOWN,o.toString())})}Yo(e,n,r,s,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.Yo(e,ME(n,r),s,u,c,o)).catch(u=>{throw u.name==="FirebaseError"?(u.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ue(xe.UNKNOWN,u.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class _B{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(ya(n),this.ua=!1):Be("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu="RemoteStore";class bB{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=o,this.Ra.No(u=>{r.enqueueAndForget(async()=>{yu(this)&&(Be(hu,"Restarting streams for network reachability change."),await async function(d){const f=it(d);f.da.add(4),await Td(f),f.Va.set("Unknown"),f.da.delete(4),await Fm(f)}(this))})}),this.Va=new _B(r,s)}}async function Fm(t){if(yu(t))for(const e of t.Aa)await e(!0)}async function Td(t){for(const e of t.Aa)await e(!1)}function DN(t,e){const n=it(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),J1(n)?Z1(n):Ql(n).N_()&&W1(n,e))}function Q1(t,e){const n=it(t),r=Ql(n);n.Ea.delete(e),r.N_()&&ON(n,e),n.Ea.size===0&&(r.N_()?r.k_():yu(n)&&n.Va.set("Unknown"))}function W1(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(nt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ql(t).Z_(e)}function ON(t,e){t.ma.Ke(e),Ql(t).X_(e)}function Z1(t){t.ma=new m7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Ql(t).start(),t.Va.ca()}function J1(t){return yu(t)&&!Ql(t).O_()&&t.Ea.size>0}function yu(t){return it(t).da.size===0}function kN(t){t.ma=void 0}async function TB(t){t.Va.set("Online")}async function vB(t){t.Ea.forEach((e,n)=>{W1(t,e)})}async function SB(t,e){kN(t),J1(t)?(t.Va.Pa(e),Z1(t)):t.Va.set("Unknown")}async function AB(t,e,n){if(t.Va.set("Online"),e instanceof yN&&e.state===2&&e.cause)try{await async function(s,o){const u=o.cause;for(const c of o.targetIds)s.Ea.has(c)&&(await s.remoteSyncer.rejectListen(c,u),s.Ea.delete(c),s.ma.removeTarget(c))}(t,e)}catch(r){Be(hu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await im(t,r)}else if(e instanceof C0?t.ma.Xe(e):e instanceof gN?t.ma.ot(e):t.ma.nt(e),!n.isEqual(nt.min()))try{const r=await CN(t.localStore);n.compareTo(r)>=0&&await function(o,u){const c=o.ma.It(u);return c.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const m=o.Ea.get(f);m&&o.Ea.set(f,m.withResumeToken(d.resumeToken,u))}}),c.targetMismatches.forEach((d,f)=>{const m=o.Ea.get(d);if(!m)return;o.Ea.set(d,m.withResumeToken(_r.EMPTY_BYTE_STRING,m.snapshotVersion)),ON(o,d);const y=new so(m.target,d,f,m.sequenceNumber);W1(o,y)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Be(hu,"Failed to raise snapshot:",r),await im(t,r)}}async function im(t,e,n){if(!Xl(e))throw e;t.da.add(1),await Td(t),t.Va.set("Offline"),n||(n=()=>CN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Be(hu,"Retrying IndexedDB access"),await n(),t.da.delete(1),await Fm(t)})}function PN(t,e){return e().catch(n=>im(t,n,e))}async function jm(t){const e=it(t),n=To(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:B1;for(;xB(e);)try{const s=await aB(e.localStore,r);if(s===null){e.Ia.length===0&&n.k_();break}r=s.batchId,wB(e,s)}catch(s){await im(e,s)}MN(e)&&LN(e)}function xB(t){return yu(t)&&t.Ia.length<10}function wB(t,e){t.Ia.push(e);const n=To(t);n.N_()&&n.ea&&n.ta(e.mutations)}function MN(t){return yu(t)&&!To(t).O_()&&t.Ia.length>0}function LN(t){To(t).start()}async function IB(t){To(t).ia()}async function CB(t){const e=To(t);for(const n of t.Ia)e.ta(n.mutations)}async function NB(t,e,n){const r=t.Ia.shift(),s=j1.from(r,e,n);await PN(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await jm(t)}async function RB(t,e){e&&To(t).ea&&await async function(r,s){if(function(u){return d7(u)&&u!==xe.ABORTED}(s.code)){const o=r.Ia.shift();To(r).L_(),await PN(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await jm(r)}}(t,e),MN(t)&&LN(t)}async function zA(t,e){const n=it(t);n.asyncQueue.verifyOperationInProgress(),Be(hu,"RemoteStore received new credentials");const r=yu(n);n.da.add(3),await Td(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Fm(n)}async function DB(t,e){const n=it(t);e?(n.da.delete(2),await Fm(n)):e||(n.da.add(2),await Td(n),n.Va.set("Unknown"))}function Ql(t){return t.fa||(t.fa=function(n,r,s){const o=it(n);return o.oa(),new pB(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{e_:TB.bind(null,t),n_:vB.bind(null,t),i_:SB.bind(null,t),Y_:AB.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),J1(t)?Z1(t):t.Va.set("Unknown")):(await t.fa.stop(),kN(t))})),t.fa}function To(t){return t.ga||(t.ga=function(n,r,s){const o=it(n);return o.oa(),new gB(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:IB.bind(null,t),i_:RB.bind(null,t),na:CB.bind(null,t),ra:NB.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await jm(t)):(await t.ga.stop(),t.Ia.length>0&&(Be(hu,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new fo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const u=Date.now()+r,c=new e_(e,n,u,s,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ue(xe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function t_(t,e){if(ya("AsyncQueue",`${e}: ${t}`),Xl(t))return new Ue(xe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{static emptySet(e){return new Al(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||$e.comparator(n.key,r.key):(n,r)=>$e.comparator(n.key,r.key),this.keyedMap=wh(),this.sortedSet=new yn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Al)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Al;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(){this.pa=new yn($e.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Ze(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Hl{constructor(e,n,r,s,o,u,c,d,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,s,o){const u=[];return n.forEach(c=>{u.push({type:0,doc:c})}),new Hl(e,n,Al.emptySet(n),u,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OB{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class kB{constructor(){this.queries=jA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=it(n),o=s.queries;s.queries=jA(),o.forEach((u,c)=>{for(const d of c.Sa)d.onError(r)})})(this,new Ue(xe.ABORTED,"Firestore shutting down"))}}function jA(){return new gu(t=>rN(t),Mm)}async function PB(t,e){const n=it(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.Da()&&e.va()&&(r=2):(o=new OB,r=e.va()?0:1);try{switch(r){case 0:o.ba=await n.onListen(s,!0);break;case 1:o.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(u){const c=t_(u,`Initialization of query '${ml(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,o),o.Sa.push(e),e.Fa(n.onlineState),o.ba&&e.Ma(o.ba)&&n_(n)}async function MB(t,e){const n=it(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const u=o.Sa.indexOf(e);u>=0&&(o.Sa.splice(u,1),o.Sa.length===0?s=e.va()?0:1:!o.Da()&&e.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function LB(t,e){const n=it(t);let r=!1;for(const s of e){const o=s.query,u=n.queries.get(o);if(u){for(const c of u.Sa)c.Ma(s)&&(r=!0);u.ba=s}}r&&n_(n)}function BB(t,e,n){const r=it(t),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);r.queries.delete(e)}function n_(t){t.Ca.forEach(e=>{e.next()})}var HE,qA;(qA=HE||(HE={})).xa="default",qA.Cache="cache";class UB{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Hl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Hl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==HE.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e){this.key=e}}class UN{constructor(e){this.key=e}}class VB{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=_t(),this.mutatedKeys=_t(),this.Za=iN(e),this.Xa=new Al(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new FA,s=n?n.Xa:this.Xa;let o=n?n.mutatedKeys:this.mutatedKeys,u=s,c=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,y)=>{const _=s.get(m),T=Lm(this.query,y)?y:null,I=!!_&&this.mutatedKeys.has(_.key),N=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let k=!1;_&&T?_.data.isEqual(T.data)?I!==N&&(r.track({type:3,doc:T}),k=!0):this.ru(_,T)||(r.track({type:2,doc:T}),k=!0,(d&&this.Za(T,d)>0||f&&this.Za(T,f)<0)&&(c=!0)):!_&&T?(r.track({type:0,doc:T}),k=!0):_&&!T&&(r.track({type:1,doc:_}),k=!0,(d||f)&&(c=!0)),k&&(T?(u=u.add(T),o=N?o.add(m):o.delete(m)):(u=u.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const m=this.query.limitType==="F"?u.last():u.first();u=u.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{Xa:u,nu:r,Cs:c,mutatedKeys:o}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const u=e.nu.wa();u.sort((m,y)=>function(T,I){const N=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ze(20277,{Vt:k})}};return N(T)-N(I)}(m.type,y.type)||this.Za(m.doc,y.doc)),this.iu(r),s=s!=null&&s;const c=n&&!s?this.su():[],d=this.Ya.size===0&&this.current&&!s?1:0,f=d!==this.Ja;return this.Ja=d,u.length!==0||f?{snapshot:new Hl(this.query,e.Xa,o,u,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:c}:{ou:c}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new FA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=_t(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new UN(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new BN(r))}),n}au(e){this.Ha=e.$s,this.Ya=_t();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Hl.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const r_="SyncEngine";class HB{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class zB{constructor(e){this.key=e,this.cu=!1}}class FB{constructor(e,n,r,s,o,u){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.lu={},this.hu=new gu(c=>rN(c),Mm),this.Pu=new Map,this.Tu=new Set,this.Iu=new yn($e.comparator),this.Eu=new Map,this.du=new G1,this.Au={},this.Ru=new Map,this.Vu=Vl.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function jB(t,e,n=!0){const r=qN(t);let s;const o=r.hu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.uu()):s=await VN(r,e,n,!0),s}async function qB(t,e){const n=qN(t);await VN(n,e,!0,!1)}async function VN(t,e,n,r){const s=await oB(t.localStore,Ds(e)),o=s.targetId,u=t.sharedClientState.addLocalQueryTarget(o,n);let c;return r&&(c=await YB(t,e,o,u==="current",s.resumeToken)),t.isPrimaryClient&&n&&DN(t.remoteStore,s),c}async function YB(t,e,n,r,s){t.fu=(y,_,T)=>async function(N,k,x,C){let L=k.view.tu(x);L.Cs&&(L=await LA(N.localStore,k.query,!1).then(({documents:S})=>k.view.tu(S,L)));const M=C&&C.targetChanges.get(k.targetId),q=C&&C.targetMismatches.get(k.targetId)!=null,B=k.view.applyChanges(L,N.isPrimaryClient,M,q);return GA(N,k.targetId,B.ou),B.snapshot}(t,y,_,T);const o=await LA(t.localStore,e,!0),u=new VB(e,o.$s),c=u.tu(o.documents),d=bd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),f=u.applyChanges(c,t.isPrimaryClient,d);GA(t,n,f.ou);const m=new HB(e,n,u);return t.hu.set(e,m),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),f.snapshot}async function GB(t,e,n){const r=it(t),s=r.hu.get(e),o=r.Pu.get(s.targetId);if(o.length>1)return r.Pu.set(s.targetId,o.filter(u=>!Mm(u,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await UE(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Q1(r.remoteStore,s.targetId),zE(r,s.targetId)}).catch($l)):(zE(r,s.targetId),await UE(r.localStore,s.targetId,!0))}async function $B(t,e){const n=it(t),r=n.hu.get(e),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Q1(n.remoteStore,r.targetId))}async function XB(t,e,n){const r=tU(t);try{const s=await function(u,c){const d=it(u),f=ln.now(),m=c.reduce((T,I)=>T.add(I.key),_t());let y,_;return d.persistence.runTransaction("Locally write mutations","readwrite",T=>{let I=Ea(),N=_t();return d.Bs.getEntries(T,m).next(k=>{I=k,I.forEach((x,C)=>{C.isValidDocument()||(N=N.add(x))})}).next(()=>d.localDocuments.getOverlayedDocuments(T,I)).next(k=>{y=k;const x=[];for(const C of c){const L=o7(C,y.get(C.key).overlayedDocument);L!=null&&x.push(new Ao(C.key,L,XC(L.value.mapValue),bi.exists(!0)))}return d.mutationQueue.addMutationBatch(T,f,x,c)}).next(k=>{_=k;const x=k.applyToLocalDocumentSet(y,N);return d.documentOverlayCache.saveOverlays(T,k.batchId,x)})}).then(()=>({batchId:_.batchId,changes:aN(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,c,d){let f=u.Au[u.currentUser.toKey()];f||(f=new yn(ht)),f=f.insert(c,d),u.Au[u.currentUser.toKey()]=f}(r,s.batchId,n),await vd(r,s.changes),await jm(r.remoteStore)}catch(s){const o=t_(s,"Failed to persist write");n.reject(o)}}async function HN(t,e){const n=it(t);try{const r=await iB(n.localStore,e);e.targetChanges.forEach((s,o)=>{const u=n.Eu.get(o);u&&(Vt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.cu=!0:s.modifiedDocuments.size>0?Vt(u.cu,14607):s.removedDocuments.size>0&&(Vt(u.cu,42227),u.cu=!1))}),await vd(n,r,e)}catch(r){await $l(r)}}function YA(t,e,n){const r=it(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((o,u)=>{const c=u.view.Fa(e);c.snapshot&&s.push(c.snapshot)}),function(u,c){const d=it(u);d.onlineState=c;let f=!1;d.queries.forEach((m,y)=>{for(const _ of y.Sa)_.Fa(c)&&(f=!0)}),f&&n_(d)}(r.eventManager,e),s.length&&r.lu.Y_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function KB(t,e,n){const r=it(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),o=s&&s.key;if(o){let u=new yn($e.comparator);u=u.insert(o,wr.newNoDocument(o,nt.min()));const c=_t().add(o),d=new Hm(nt.min(),new Map,new yn(ht),u,c);await HN(r,d),r.Iu=r.Iu.remove(o),r.Eu.delete(e),i_(r)}else await UE(r.localStore,e,!1).then(()=>zE(r,e,n)).catch($l)}async function QB(t,e){const n=it(t),r=e.batch.batchId;try{const s=await rB(n.localStore,e);FN(n,r,null),zN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await vd(n,s)}catch(s){await $l(s)}}async function WB(t,e,n){const r=it(t);try{const s=await function(u,c){const d=it(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return d.mutationQueue.lookupMutationBatch(f,c).next(y=>(Vt(y!==null,37113),m=y.keys(),d.mutationQueue.removeMutationBatch(f,y))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,m,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>d.localDocuments.getDocuments(f,m))})}(r.localStore,e);FN(r,e,n),zN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await vd(r,s)}catch(s){await $l(s)}}function zN(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function FN(t,e,n){const r=it(t);let s=r.Au[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Au[r.currentUser.toKey()]=s}}function zE(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||jN(t,r)})}function jN(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(Q1(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),i_(t))}function GA(t,e,n){for(const r of n)r instanceof BN?(t.du.addReference(r.key,e),ZB(t,r)):r instanceof UN?(Be(r_,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||jN(t,r.key)):Ze(19791,{pu:r})}function ZB(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(Be(r_,"New document in limbo: "+n),t.Tu.add(r),i_(t))}function i_(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new $e(un.fromString(e)),r=t.Vu.next();t.Eu.set(r,new zB(n)),t.Iu=t.Iu.insert(n,r),DN(t.remoteStore,new so(Ds(tN(n.path)),r,"TargetPurposeLimboResolution",Om.le))}}async function vd(t,e,n){const r=it(t),s=[],o=[],u=[];r.hu.isEmpty()||(r.hu.forEach((c,d)=>{u.push(r.fu(d,e,n).then(f=>{var m;if((f||n)&&r.isPrimaryClient){const y=f?!f.fromCache:(m=n?.targetChanges.get(d.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(f){s.push(f);const y=X1.Rs(d.targetId,f);o.push(y)}}))}),await Promise.all(u),r.lu.Y_(s),await async function(d,f){const m=it(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>we.forEach(f,_=>we.forEach(_.ds,T=>m.persistence.referenceDelegate.addReference(y,_.targetId,T)).next(()=>we.forEach(_.As,T=>m.persistence.referenceDelegate.removeReference(y,_.targetId,T)))))}catch(y){if(!Xl(y))throw y;Be(K1,"Failed to update sequence numbers: "+y)}for(const y of f){const _=y.targetId;if(!y.fromCache){const T=m.xs.get(_),I=T.snapshotVersion,N=T.withLastLimboFreeSnapshotVersion(I);m.xs=m.xs.insert(_,N)}}}(r.localStore,o))}async function JB(t,e){const n=it(t);if(!n.currentUser.isEqual(e)){Be(r_,"User change. New user:",e.toKey());const r=await IN(n.localStore,e);n.currentUser=e,function(o,u){o.Ru.forEach(c=>{c.forEach(d=>{d.reject(new Ue(xe.CANCELLED,u))})}),o.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vd(n,r.ks)}}function eU(t,e){const n=it(t),r=n.Eu.get(e);if(r&&r.cu)return _t().add(r.key);{let s=_t();const o=n.Pu.get(e);if(!o)return s;for(const u of o){const c=n.hu.get(u);s=s.unionWith(c.view.eu)}return s}}function qN(t){const e=it(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=HN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KB.bind(null,e),e.lu.Y_=LB.bind(null,e.eventManager),e.lu.gu=BB.bind(null,e.eventManager),e}function tU(t){const e=it(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WB.bind(null,e),e}class sm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zm(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return nB(this.persistence,new J7,e.initialUser,this.serializer)}Su(e){return new wN($1.fi,this.serializer)}bu(e){return new lB}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sm.provider={build:()=>new sm};class nU extends sm{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){Vt(this.persistence.referenceDelegate instanceof rm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new U7(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Wr.withCacheSize(this.cacheSizeBytes):Wr.DEFAULT;return new wN(r=>rm.fi(r,n),this.serializer)}}class FE{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>YA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=JB.bind(null,this.syncEngine),await DB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kB}()}createDatastore(e){const n=zm(e.databaseInfo.databaseId),r=function(o){return new mB(o)}(e.databaseInfo);return function(o,u,c,d){return new EB(o,u,c,d)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,o,u,c){return new bB(r,s,o,u,c)}(this.localStore,this.datastore,e.asyncQueue,n=>YA(this.syncEngine,n,0),function(){return VA.C()?new VA:new cB}())}createSyncEngine(e,n){return function(s,o,u,c,d,f,m){const y=new FB(s,o,u,c,d,f);return m&&(y.mu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=it(s);Be(hu,"RemoteStore shutting down."),o.da.add(5),await Td(o),o.Ra.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}FE.provider={build:()=>new FE};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):ya("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo="FirestoreClient";class iU{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=xr.UNAUTHENTICATED,this.clientId=UC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async u=>{Be(vo,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(Be(vo,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=t_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Uy(t,e){t.asyncQueue.verifyOperationInProgress(),Be(vo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await IN(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function $A(t,e){t.asyncQueue.verifyOperationInProgress();const n=await sU(t);Be(vo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>zA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>zA(e.remoteStore,s)),t._onlineComponents=e}async function sU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Be(vo,"Using user provided OfflineComponentProvider");try{await Uy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===xe.FAILED_PRECONDITION||s.code===xe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ml("Error using user provided cache. Falling back to memory cache: "+n),await Uy(t,new sm)}}else Be(vo,"Using default OfflineComponentProvider"),await Uy(t,new nU(void 0));return t._offlineComponents}async function YN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Be(vo,"Using user provided OnlineComponentProvider"),await $A(t,t._uninitializedComponentsProvider._online)):(Be(vo,"Using default OnlineComponentProvider"),await $A(t,new FE))),t._onlineComponents}function aU(t){return YN(t).then(e=>e.syncEngine)}async function oU(t){const e=await YN(t),n=e.eventManager;return n.onListen=jB.bind(null,e.syncEngine),n.onUnlisten=GB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=qB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=$B.bind(null,e.syncEngine),n}function uU(t,e,n={}){const r=new fo;return t.asyncQueue.enqueueAndForget(async()=>function(o,u,c,d,f){const m=new rU({next:_=>{m.xu(),u.enqueueAndForget(()=>MB(o,y)),_.fromCache&&d.source==="server"?f.reject(new Ue(xe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),y=new UB(c,m,{includeMetadataChanges:!0,Qa:!0});return PB(o,y)}(await oU(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(t,e,n){if(!n)throw new Ue(xe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lU(t,e,n,r){if(e===!0&&r===!0)throw new Ue(xe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function KA(t){if(!$e.isDocumentKey(t))throw new Ue(xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function QA(t){if($e.isDocumentKey(t))throw new Ue(xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function qm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ze(12329,{type:typeof t})}function du(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ue(xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qm(t);throw new Ue(xe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN="firestore.googleapis.com",WA=!0;class ZA{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ue(xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XN,this.ssl=WA}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:WA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<L7)throw new Ue(xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Ue(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ue(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ue(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ym{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ZA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ue(xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ue(xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ZA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new f9;switch(r.type){case"firstParty":return new y9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ue(xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=XA.get(n);r&&(Be("ComponentProvider","Removing Datastore"),XA.delete(n),r.terminate())}(this),Promise.resolve()}}function cU(t,e,n,r={}){var s;t=du(t,Ym);const o=pu(e),u=t._getSettings(),c=Object.assign(Object.assign({},u),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;o&&(D1(`https://${d}`),O1("Firestore",!0)),u.host!==XN&&u.host!==d&&Ml("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},u),{host:d,ssl:o,emulatorOptions:r});if(!uu(f,c)&&(t._setSettings(f),r.mockUserToken)){let m,y;if(typeof r.mockUserToken=="string")m=r.mockUserToken,y=xr.MOCK_USER;else{m=U5(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Ue(xe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new xr(_)}t._authCredentials=new m9(new LC(m,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Eu(this.firestore,e,this._query)}}class Ti{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ti(this.firestore,e,this._key)}}class mo extends Eu{constructor(e,n,r){super(e,n,tN(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ti(this.firestore,null,new $e(e))}withConverter(e){return new mo(this.firestore,e,this._path)}}function s_(t,e,...n){if(t=Sn(t),$N("collection","path",e),t instanceof Ym){const r=un.fromString(e,...n);return QA(r),new mo(t,null,r)}{if(!(t instanceof Ti||t instanceof mo))throw new Ue(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(un.fromString(e,...n));return QA(r),new mo(t.firestore,null,r)}}function Wl(t,e,...n){if(t=Sn(t),arguments.length===1&&(e=UC.newId()),$N("doc","path",e),t instanceof Ym){const r=un.fromString(e,...n);return KA(r),new Ti(t,null,new $e(r))}{if(!(t instanceof Ti||t instanceof mo))throw new Ue(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(un.fromString(e,...n));return KA(r),new Ti(t.firestore,t instanceof mo?t.converter:null,new $e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="AsyncQueue";class ex{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new NN(this,"async_queue_retry"),this.rc=()=>{const r=By();r&&Be(JA,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=By();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=By();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new fo;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Xl(e))throw e;Be(JA,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,ya("INTERNAL UNHANDLED ERROR: ",tx(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const s=e_.createAndSchedule(this,e,n,r,o=>this.uc(o));return this.Zu.push(s),s}oc(){this.Xu&&Ze(47125,{cc:tx(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function tx(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Sd extends Ym{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new ex,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ex(e),this._firestoreClient=void 0,await e}}}function hU(t,e){const n=typeof t=="object"?t:M1(),r=typeof t=="string"?t:W0,s=Dm(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=TC("firestore");o&&cU(s,...o)}return s}function a_(t){if(t._terminated)throw new Ue(xe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||dU(t),t._firestoreClient}function dU(t){var e,n,r;const s=t._freezeSettings(),o=function(c,d,f,m){return new O9(c,d,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,GN(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new iU(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(c){const d=c?._online.build();return{_offline:c?._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zl(_r.fromBase64String(e))}catch(n){throw new Ue(xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zl(_r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ue(xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ue(xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ue(xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ht(this._lat,e._lat)||ht(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU=/^__.*__$/;class mU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ao(e,this.data,this.fieldMask,n,this.fieldTransforms):new _d(e,this.data,n,this.fieldTransforms)}}class KN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ao(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function QN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ze(40011,{Ic:t})}}class c_{constructor(e,n,r,s,o,u){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Ec(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new c_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Vc(e),s}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Ec(),s}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return am(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(QN(this.Ic)&&fU.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class pU{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zm(e)}bc(e,n,r,s=!1){return new c_({Ic:e,methodName:n,wc:r,path:Er.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function h_(t){const e=t._freezeSettings(),n=zm(t._databaseId);return new pU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function WN(t,e,n,r,s,o={}){const u=t.bc(o.merge||o.mergeFields?2:0,e,n,s);d_("Data must be an object, but it was:",u,r);const c=ZN(r,u);let d,f;if(o.merge)d=new Ei(u.fieldMask),f=u.fieldTransforms;else if(o.mergeFields){const m=[];for(const y of o.mergeFields){const _=jE(e,y,n);if(!u.contains(_))throw new Ue(xe.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);eR(m,_)||m.push(_)}d=new Ei(m),f=u.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,f=u.fieldTransforms;return new mU(new Jr(c),d,f)}class $m extends o_{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $m}}function gU(t,e,n,r){const s=t.bc(1,e,n);d_("Data must be an object, but it was:",s,r);const o=[],u=Jr.empty();So(r,(d,f)=>{const m=f_(e,d,n);f=Sn(f);const y=s.mc(m);if(f instanceof $m)o.push(m);else{const _=Ad(f,y);_!=null&&(o.push(m),u.set(m,_))}});const c=new Ei(o);return new KN(u,c,s.fieldTransforms)}function yU(t,e,n,r,s,o){const u=t.bc(1,e,n),c=[jE(e,r,n)],d=[s];if(o.length%2!=0)throw new Ue(xe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)c.push(jE(e,o[_])),d.push(o[_+1]);const f=[],m=Jr.empty();for(let _=c.length-1;_>=0;--_)if(!eR(f,c[_])){const T=c[_];let I=d[_];I=Sn(I);const N=u.mc(T);if(I instanceof $m)f.push(T);else{const k=Ad(I,N);k!=null&&(f.push(T),m.set(T,k))}}const y=new Ei(f);return new KN(m,y,u.fieldTransforms)}function EU(t,e,n,r=!1){return Ad(n,t.bc(r?4:3,e))}function Ad(t,e){if(JN(t=Sn(t)))return d_("Unsupported field value:",e,t),ZN(t,e);if(t instanceof o_)return function(r,s){if(!QN(s.Ic))throw s.gc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,s){const o=[];let u=0;for(const c of r){let d=Ad(c,s.fc(u));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),u++}return{arrayValue:{values:o}}}(t,e)}return function(r,s){if((r=Sn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return t7(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=ln.fromDate(r);return{timestampValue:nm(s.serializer,o)}}if(r instanceof ln){const o=new ln(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nm(s.serializer,o)}}if(r instanceof u_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zl)return{bytesValue:EN(s.serializer,r._byteString)};if(r instanceof Ti){const o=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(o))throw s.gc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Y1(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof l_)return function(u,c){return{mapValue:{fields:{[GC]:{stringValue:$C},[Z0]:{arrayValue:{values:u.toArray().map(f=>{if(typeof f!="number")throw c.gc("VectorValues must only contain numeric values.");return F1(c.serializer,f)})}}}}}}(r,s);throw s.gc(`Unsupported field value: ${qm(r)}`)}(t,e)}function ZN(t,e){const n={};return HC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):So(t,(r,s)=>{const o=Ad(s,e.Ac(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function JN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ln||t instanceof u_||t instanceof zl||t instanceof Ti||t instanceof o_||t instanceof l_)}function d_(t,e,n){if(!JN(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=qm(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function jE(t,e,n){if((e=Sn(e))instanceof Gm)return e._internalPath;if(typeof e=="string")return f_(t,e);throw am("Field path arguments must be of type string or ",t,!1,void 0,n)}const _U=new RegExp("[~\\*/\\[\\]]");function f_(t,e,n){if(e.search(_U)>=0)throw am(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Gm(...e.split("."))._internalPath}catch{throw am(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function am(t,e,n,r,s){const o=r&&!r.isEmpty(),u=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(o||u)&&(d+=" (found",o&&(d+=` in field ${r}`),u&&(d+=` in document ${s}`),d+=")"),new Ue(xe.INVALID_ARGUMENT,c+t+d)}function eR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ti(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Xm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class bU extends tR{data(){return super.data()}}function Xm(t,e){return typeof e=="string"?f_(t,e):e instanceof Gm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ue(xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class m_{}class nR extends m_{}function vU(t,e,...n){let r=[];e instanceof m_&&r.push(e),r=r.concat(n),function(o){const u=o.filter(d=>d instanceof p_).length,c=o.filter(d=>d instanceof Km).length;if(u>1||u>0&&c>0)throw new Ue(xe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Km extends nR{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Km(e,n,r)}_apply(e){const n=this._parse(e);return rR(e._query,n),new Eu(e.firestore,e.converter,OE(e._query,n))}_parse(e){const n=h_(e.firestore);return function(o,u,c,d,f,m,y){let _;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new Ue(xe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){rx(y,m);const I=[];for(const N of y)I.push(nx(d,o,N));_={arrayValue:{values:I}}}else _=nx(d,o,y)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||rx(y,m),_=EU(c,u,y,m==="in"||m==="not-in");return Un.create(f,m,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function SU(t,e,n){const r=e,s=Xm("where",t);return Km._create(s,r,n)}class p_ extends m_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new p_(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:rs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let u=s;const c=o.getFlattenedFilters();for(const d of c)rR(u,d),u=OE(u,d)}(e._query,n),new Eu(e.firestore,e.converter,OE(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class g_ extends nR{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new g_(e,n)}_apply(e){const n=function(s,o,u){if(s.startAt!==null)throw new Ue(xe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ue(xe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new id(o,u)}(e._query,this._field,this._direction);return new Eu(e.firestore,e.converter,function(s,o){const u=s.explicitOrderBy.concat([o]);return new Kl(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function AU(t,e="asc"){const n=e,r=Xm("orderBy",t);return g_._create(r,n)}function nx(t,e,n){if(typeof(n=Sn(n))=="string"){if(n==="")throw new Ue(xe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nN(e)&&n.indexOf("/")!==-1)throw new Ue(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(un.fromString(n));if(!$e.isDocumentKey(r))throw new Ue(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yA(t,new $e(r))}if(n instanceof Ti)return yA(t,n._key);throw new Ue(xe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qm(n)}.`)}function rx(t,e){if(!Array.isArray(t)||t.length===0)throw new Ue(xe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rR(t,e){const n=function(s,o){for(const u of s)for(const c of u.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ue(xe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ue(xe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class xU{convertValue(e,n="none"){switch(bo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(_o(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ze(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return So(e,(s,o)=>{r[s]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,s;const o=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Z0].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(u=>Nn(u.doubleValue));return new l_(o)}convertGeoPoint(e){return new u_(Nn(e.latitude),Nn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Pm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(td(e));default:return null}}convertTimestamp(e){const n=Eo(e);return new ln(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=un.fromString(e);Vt(AN(r),9688,{name:e});const s=new nd(r.get(1),r.get(3)),o=new $e(r.popFirst(5));return s.isEqual(n)||ya(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wU extends tR{constructor(e,n,r,s,o,u){super(e,n,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new N0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Xm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class N0 extends wU{data(e={}){return super.data(e)}}class IU{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new m0(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new N0(this._firestore,this._userDataWriter,r.key,r,new m0(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ue(xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(c=>{const d=new N0(s._firestore,s._userDataWriter,c.doc.key,c.doc,new m0(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:u++}})}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const d=new N0(s._firestore,s._userDataWriter,c.doc.key,c.doc,new m0(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,m=-1;return c.type!==0&&(f=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),c.type!==1&&(u=u.add(c.doc),m=u.indexOf(c.doc.key)),{type:CU(c.type),doc:d,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function CU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ze(61501,{type:t})}}class NU extends xU{constructor(e){super(),this.firestore=e}convertBytes(e){return new zl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ti(this.firestore,null,n)}}function y_(t){t=du(t,Eu);const e=du(t.firestore,Sd),n=a_(e),r=new NU(e);return TU(t._query),uU(n,t._query).then(s=>new IU(e,r,t,s))}function E_(t,e,n){t=du(t,Ti);const r=du(t.firestore,Sd),s=iR(t.converter,e,n);return __(r,[WN(h_(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,bi.none())])}function RU(t){return __(du(t.firestore,Sd),[new Vm(t._key,bi.none())])}function __(t,e){return function(r,s){const o=new fo;return r.asyncQueue.enqueueAndForget(async()=>XB(await aU(r),s,o)),o.promise}(a_(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=h_(e)}set(e,n,r){this._verifyNotCommitted();const s=Vy(e,this._firestore),o=iR(s.converter,n,r),u=WN(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,r);return this._mutations.push(u.toMutation(s._key,bi.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const o=Vy(e,this._firestore);let u;return u=typeof(n=Sn(n))=="string"||n instanceof Gm?yU(this._dataReader,"WriteBatch.update",o._key,n,r,s):gU(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(u.toMutation(o._key,bi.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Vy(e,this._firestore);return this._mutations=this._mutations.concat(new Vm(n._key,bi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(xe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Vy(t,e){if((t=Sn(t)).firestore!==e)throw new Ue(xe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(t){return a_(t=du(t,Sd)),new DU(t,e=>__(t,e))}(function(e,n=!0){(function(s){Gl=s})(Yl),lu(new go("firestore",(r,{instanceIdentifier:s,options:o})=>{const u=r.getProvider("app").getImmediate(),c=new Sd(new p9(r.getProvider("auth-internal")),new E9(u,r.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ue(xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nd(f.options.projectId,m)}(u,s),u);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Rs(sA,aA,e),Rs(sA,aA,"esm2017")})();function b_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function aR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OU=aR,oR=new yd("auth","Firebase",aR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om=new k1("@firebase/auth");function kU(t,...e){om.logLevel<=Et.WARN&&om.warn(`Auth (${Yl}): ${t}`,...e)}function R0(t,...e){om.logLevel<=Et.ERROR&&om.error(`Auth (${Yl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(t,...e){throw T_(t,...e)}function ks(t,...e){return T_(t,...e)}function uR(t,e,n){const r=Object.assign(Object.assign({},OU()),{[e]:n});return new yd("auth","Firebase",r).create(e,{appName:t.name})}function fa(t){return uR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function T_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return oR.create(t,...e)}function We(t,e,...n){if(!t)throw T_(e,...n)}function ha(t){const e="INTERNAL ASSERTION FAILED: "+t;throw R0(e),new Error(e)}function _a(t,e){t||ha(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function PU(){return ix()==="http:"||ix()==="https:"}function ix(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PU()||q5()||"connection"in navigator)?navigator.onLine:!0}function LU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,n){this.shortDelay=e,this.longDelay=n,_a(n>e,"Short delay should be less than long delay!"),this.isMobile=z5()||Y5()}get(){return MU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(t,e){_a(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ha("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ha("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ha("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],VU=new xd(3e4,6e4);function xo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function wo(t,e,n,r,s={}){return cR(t,s,async()=>{let o={},u={};r&&(e==="GET"?u=r:o={body:JSON.stringify(r)});const c=Ed(Object.assign({key:t.config.apiKey},u)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:d},o);return j5()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&pu(t.emulatorConfig.host)&&(f.credentials="include"),lR.fetch()(await hR(t,t.config.apiHost,n,c),f)})}async function cR(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},BU),e);try{const s=new zU(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw p0(t,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const c=o.ok?u.errorMessage:u.error.message,[d,f]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw p0(t,"credential-already-in-use",u);if(d==="EMAIL_EXISTS")throw p0(t,"email-already-in-use",u);if(d==="USER_DISABLED")throw p0(t,"user-disabled",u);const m=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw uR(t,m,f);is(t,m)}}catch(s){if(s instanceof Vs)throw s;is(t,"network-request-failed",{message:String(s)})}}async function wd(t,e,n,r,s={}){const o=await wo(t,e,n,r,s);return"mfaPendingCredential"in o&&is(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function hR(t,e,n,r){const s=`${e}${n}?${r}`,o=t,u=o.config.emulator?v_(t.config,s):`${t.config.apiScheme}://${s}`;return UU.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}function HU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ks(this.auth,"network-request-failed")),VU.get())})}}function p0(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ks(t,e,r);return s.customData._tokenResponse=n,s}function sx(t){return t!==void 0&&t.enterprise!==void 0}class FU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return HU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function jU(t,e){return wo(t,"GET","/v2/recaptchaConfig",xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qU(t,e){return wo(t,"POST","/v1/accounts:delete",e)}async function um(t,e){return wo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YU(t,e=!1){const n=Sn(t),r=await n.getIdToken(e),s=S_(r);We(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,u=o?.sign_in_provider;return{claims:s,token:r,authTime:Mh(Hy(s.auth_time)),issuedAtTime:Mh(Hy(s.iat)),expirationTime:Mh(Hy(s.exp)),signInProvider:u||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Hy(t){return Number(t)*1e3}function S_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return R0("JWT malformed, contained fewer than 3 sections"),null;try{const s=_C(n);return s?JSON.parse(s):(R0("Failed to decode base64 JWT payload"),null)}catch(s){return R0("Caught error parsing JWT payload as JSON",s?.toString()),null}}function ax(t){const e=S_(t);return We(e,"internal-error"),We(typeof e.exp<"u","internal-error"),We(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function od(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Vs&&GU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function GU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mh(this.lastLoginAt),this.creationTime=Mh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lm(t){var e;const n=t.auth,r=await t.getIdToken(),s=await od(t,um(n,{idToken:r}));We(s?.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const u=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?dR(o.providerUserInfo):[],c=KU(t.providerData,u),d=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!c?.length,m=d?f:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new YE(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(t,y)}async function XU(t){const e=Sn(t);await lm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function KU(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function dR(t){return t.map(e=>{var{providerId:n}=e,r=b_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QU(t,e){const n=await cR(t,{},async()=>{const r=Ed({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,u=await hR(t,s,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:c,body:r};return t.emulatorConfig&&pu(t.emulatorConfig.host)&&(d.credentials="include"),lR.fetch()(u,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function WU(t,e){return wo(t,"POST","/v2/accounts:revokeToken",xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){We(e.idToken,"internal-error"),We(typeof e.idToken<"u","internal-error"),We(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ax(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){We(e.length!==0,"internal-error");const n=ax(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(We(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await QU(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,u=new xl;return r&&(We(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(We(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),o&&(We(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xl,this.toJSON())}_performRefresh(){return ha("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(t,e){We(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ns{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,o=b_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $U(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new YE(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await od(this,this.stsTokenManager.getToken(this.auth,e));return We(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return YU(this,e)}reload(){return XU(this)}_assign(e){this!==e&&(We(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ns(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){We(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await lm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yi(this.auth.app))return Promise.reject(fa(this.auth));const e=await this.getIdToken();return await od(this,qU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,o,u,c,d,f,m;const y=(r=n.displayName)!==null&&r!==void 0?r:void 0,_=(s=n.email)!==null&&s!==void 0?s:void 0,T=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,I=(u=n.photoURL)!==null&&u!==void 0?u:void 0,N=(c=n.tenantId)!==null&&c!==void 0?c:void 0,k=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,x=(f=n.createdAt)!==null&&f!==void 0?f:void 0,C=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:L,emailVerified:M,isAnonymous:q,providerData:B,stsTokenManager:S}=n;We(L&&S,e,"internal-error");const A=xl.fromJSON(this.name,S);We(typeof L=="string",e,"internal-error"),$a(y,e.name),$a(_,e.name),We(typeof M=="boolean",e,"internal-error"),We(typeof q=="boolean",e,"internal-error"),$a(T,e.name),$a(I,e.name),$a(N,e.name),$a(k,e.name),$a(x,e.name),$a(C,e.name);const D=new ns({uid:L,auth:e,email:_,emailVerified:M,displayName:y,isAnonymous:q,photoURL:I,phoneNumber:T,tenantId:N,stsTokenManager:A,createdAt:x,lastLoginAt:C});return B&&Array.isArray(B)&&(D.providerData=B.map(V=>Object.assign({},V))),k&&(D._redirectEventId=k),D}static async _fromIdTokenResponse(e,n,r=!1){const s=new xl;s.updateFromServerResponse(n);const o=new ns({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await lm(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];We(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?dR(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!o?.length,c=new xl;c.updateFromIdToken(r);const d=new ns({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:u}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new YE(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=new Map;function da(t){_a(t instanceof Function,"Expected a class definition");let e=ox.get(t);return e?(_a(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ox.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}fR.type="NONE";const ux=fR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(t,e,n){return`firebase:${t}:${e}:${n}`}class wl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=D0(this.userKey,s.apiKey,o),this.fullPersistenceKey=D0("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await um(this.auth,{idToken:e}).catch(()=>{});return n?ns._fromGetAccountInfoResponse(this.auth,n,e):null}return ns._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new wl(da(ux),e,r);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||da(ux);const u=D0(r,e.config.apiKey,e.name);let c=null;for(const f of n)try{const m=await f._get(u);if(m){let y;if(typeof m=="string"){const _=await um(e,{idToken:m}).catch(()=>{});if(!_)break;y=await ns._fromGetAccountInfoResponse(e,_,m)}else y=ns._fromJSON(e,m);f!==o&&(c=y),o=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new wl(o,e,r):(o=d[0],c&&await o._set(u,c.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(u)}catch{}})),new wl(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_R(e))return"Blackberry";if(bR(e))return"Webos";if(pR(e))return"Safari";if((e.includes("chrome/")||gR(e))&&!e.includes("edge/"))return"Chrome";if(ER(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function mR(t=Cr()){return/firefox\//i.test(t)}function pR(t=Cr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gR(t=Cr()){return/crios\//i.test(t)}function yR(t=Cr()){return/iemobile/i.test(t)}function ER(t=Cr()){return/android/i.test(t)}function _R(t=Cr()){return/blackberry/i.test(t)}function bR(t=Cr()){return/webos/i.test(t)}function A_(t=Cr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ZU(t=Cr()){var e;return A_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function JU(){return G5()&&document.documentMode===10}function TR(t=Cr()){return A_(t)||ER(t)||bR(t)||_R(t)||/windows phone/i.test(t)||yR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(t,e=[]){let n;switch(t){case"Browser":n=lx(Cr());break;case"Worker":n=`${lx(Cr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Yl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((u,c)=>{try{const d=e(o);u(d)}catch(d){c(d)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tV(t,e={}){return wo(t,"GET","/v2/passwordPolicy",xo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=6;class rV{constructor(e){var n,r,s,o;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=u.minPasswordLength)!==null&&n!==void 0?n:nV,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,o,u,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(u=d.containsNumericCharacter)!==null&&u!==void 0?u:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cx(this),this.idTokenSubscription=new cx(this),this.beforeStateQueue=new eV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=da(n)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await wl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await um(this,{idToken:e}),r=await ns._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(yi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s?._redirectEventId,d=await this.tryRedirectSignIn(e);(!u||u===c)&&d?.user&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return We(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await lm(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=LU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yi(this.app))return Promise.reject(fa(this));const n=e?Sn(e):null;return n&&We(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&We(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yi(this.app)?Promise.reject(fa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yi(this.app)?Promise.reject(fa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(da(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await tV(this),n=new rV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await WU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&da(e)||this._popupRedirectResolver;We(n,this,"argument-error"),this.redirectPersistenceManager=await wl.create(this,[da(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let u=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(We(c,this,"internal-error"),c.then(()=>{u||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,s);return()=>{u=!0,d()}}else{const d=e.addObserver(n);return()=>{u=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return We(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(yi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&kU(`Error while retrieving App Check token: ${n.error}`),n?.token}}function _u(t){return Sn(t)}class cx{constructor(e){this.auth=e,this.observer=null,this.addObserver=e8(n=>this.observer=n)}get next(){return We(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sV(t){Qm=t}function SR(t){return Qm.loadJS(t)}function aV(){return Qm.recaptchaEnterpriseScript}function oV(){return Qm.gapiScript}function uV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class lV{constructor(){this.enterprise=new cV}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class cV{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const hV="recaptcha-enterprise",AR="NO_RECAPTCHA";class dV{constructor(e){this.type=hV,this.auth=_u(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,c)=>{jU(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new FU(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,u(f.siteKey)}}).catch(d=>{c(d)})})}function s(o,u,c){const d=window.grecaptcha;sx(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{u(f)}).catch(()=>{u(AR)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new lV().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{r(this.auth).then(c=>{if(!n&&sx(window.grecaptcha))s(c,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let d=aV();d.length!==0&&(d+=c),SR(d).then(()=>{s(c,o,u)}).catch(f=>{u(f)})}}).catch(c=>{u(c)})})}}async function hx(t,e,n,r=!1,s=!1){const o=new dV(t);let u;if(s)u=AR;else try{u=await o.verify(n)}catch{u=await o.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,f=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:u}):Object.assign(c,{captchaResponse:u}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function GE(t,e,n,r,s){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await hx(t,e,n,n==="getOobCode");return r(t,u)}else return r(t,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await hx(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fV(t,e){const n=Dm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(uu(o,e??{}))return s;is(s,"already-initialized")}return n.initialize({options:e})}function mV(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(da);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function pV(t,e,n){const r=_u(t);We(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=xR(e),{host:u,port:c}=gV(e),d=c===null?"":`:${c}`,f={url:`${o}//${u}${d}/`},m=Object.freeze({host:u,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){We(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),We(uu(f,r.config.emulator)&&uu(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,pu(u)?(D1(`${o}//${u}${d}`),O1("Auth",!0)):yV()}function xR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function gV(t){const e=xR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:dx(r.substr(o.length+1))}}else{const[o,u]=r.split(":");return{host:o,port:dx(u)}}}function dx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function yV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ha("not implemented")}_getIdTokenResponse(e){return ha("not implemented")}_linkToIdToken(e,n){return ha("not implemented")}_getReauthenticationResolver(e){return ha("not implemented")}}async function EV(t,e){return wo(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _V(t,e){return wd(t,"POST","/v1/accounts:signInWithPassword",xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bV(t,e){return wd(t,"POST","/v1/accounts:signInWithEmailLink",xo(t,e))}async function TV(t,e){return wd(t,"POST","/v1/accounts:signInWithEmailLink",xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud extends x_{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ud(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ud(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return GE(e,n,"signInWithPassword",_V);case"emailLink":return bV(e,{email:this._email,oobCode:this._password});default:is(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return GE(e,r,"signUpPassword",EV);case"emailLink":return TV(e,{idToken:n,email:this._email,oobCode:this._password});default:is(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Il(t,e){return wd(t,"POST","/v1/accounts:signInWithIdp",xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV="http://localhost";class fu extends x_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):is("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,o=b_(n,["providerId","signInMethod"]);if(!r||!s)return null;const u=new fu(r,s);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return Il(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Il(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Il(e,n)}buildRequest(){const e={requestUri:vV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ed(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function AV(t){const e=Sh(Ah(t)).link,n=e?Sh(Ah(e)).deep_link_id:null,r=Sh(Ah(t)).deep_link_id;return(r?Sh(Ah(r)).link:null)||r||n||e||t}class w_{constructor(e){var n,r,s,o,u,c;const d=Sh(Ah(e)),f=(n=d.apiKey)!==null&&n!==void 0?n:null,m=(r=d.oobCode)!==null&&r!==void 0?r:null,y=SV((s=d.mode)!==null&&s!==void 0?s:null);We(f&&m&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=m,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(u=d.lang)!==null&&u!==void 0?u:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=AV(e);try{return new w_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(){this.providerId=Zl.PROVIDER_ID}static credential(e,n){return ud._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=w_.parseLink(n);return We(r,"argument-error"),ud._fromEmailAndCode(e,r.code,r.tenantId)}}Zl.PROVIDER_ID="password";Zl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id extends wR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo extends Id{constructor(){super("facebook.com")}static credential(e){return fu._fromParams({providerId:eo.PROVIDER_ID,signInMethod:eo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eo.credentialFromTaggedObject(e)}static credentialFromError(e){return eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return eo.credential(e.oauthAccessToken)}catch{return null}}}eo.FACEBOOK_SIGN_IN_METHOD="facebook.com";eo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to extends Id{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fu._fromParams({providerId:to.PROVIDER_ID,signInMethod:to.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return to.credentialFromTaggedObject(e)}static credentialFromError(e){return to.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return to.credential(n,r)}catch{return null}}}to.GOOGLE_SIGN_IN_METHOD="google.com";to.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends Id{constructor(){super("github.com")}static credential(e){return fu._fromParams({providerId:no.PROVIDER_ID,signInMethod:no.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return no.credentialFromTaggedObject(e)}static credentialFromError(e){return no.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return no.credential(e.oauthAccessToken)}catch{return null}}}no.GITHUB_SIGN_IN_METHOD="github.com";no.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro extends Id{constructor(){super("twitter.com")}static credential(e,n){return fu._fromParams({providerId:ro.PROVIDER_ID,signInMethod:ro.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ro.credentialFromTaggedObject(e)}static credentialFromError(e){return ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ro.credential(n,r)}catch{return null}}}ro.TWITTER_SIGN_IN_METHOD="twitter.com";ro.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xV(t,e){return wd(t,"POST","/v1/accounts:signUp",xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await ns._fromIdTokenResponse(e,r,s),u=fx(r);return new mu({user:o,providerId:u,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=fx(r);return new mu({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function fx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm extends Vs{constructor(e,n,r,s){var o;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,cm.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new cm(e,n,r,s)}}function IR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?cm._fromErrorAndOperation(t,o,e,r):o})}async function wV(t,e,n=!1){const r=await od(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return mu._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IV(t,e,n=!1){const{auth:r}=t;if(yi(r.app))return Promise.reject(fa(r));const s="reauthenticate";try{const o=await od(t,IR(r,s,e,t),n);We(o.idToken,r,"internal-error");const u=S_(o.idToken);We(u,r,"internal-error");const{sub:c}=u;return We(t.uid===c,r,"user-mismatch"),mu._forOperation(t,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&is(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CR(t,e,n=!1){if(yi(t.app))return Promise.reject(fa(t));const r="signIn",s=await IR(t,r,e),o=await mu._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function CV(t,e){return CR(_u(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NR(t){const e=_u(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function NV(t,e,n){if(yi(t.app))return Promise.reject(fa(t));const r=_u(t),u=await GE(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xV).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&NR(t),d}),c=await mu._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(c.user),c}function RV(t,e,n){return yi(t.app)?Promise.reject(fa(t)):CV(Sn(t),Zl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&NR(t),r})}function DV(t,e,n,r){return Sn(t).onIdTokenChanged(e,n,r)}function OV(t,e,n){return Sn(t).beforeAuthStateChanged(e,n)}function kV(t,e,n,r){return Sn(t).onAuthStateChanged(e,n,r)}function PV(t){return Sn(t).signOut()}const hm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hm,"1"),this.storage.removeItem(hm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV=1e3,LV=10;class DR extends RR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,c,d)=>{this.notifyListeners(u,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!n&&this.localCache[r]===u||this.notifyListeners(r,u)},o=this.storage.getItem(r);JU()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,LV):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},MV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}DR.type="LOCAL";const BV=DR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR extends RR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}OR.type="SESSION";const kR=OR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Wm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,u=this.handlersMap[s];if(!u?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(u).map(async f=>f(n.origin,o)),d=await UV(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,u;return new Promise((c,d)=>{const f=I_("",20);s.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(y){const _=y;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(_.data.response);break;default:clearTimeout(m),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(){return window}function HV(t){Ps().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(){return typeof Ps().WorkerGlobalScope<"u"&&typeof Ps().importScripts=="function"}async function zV(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FV(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function jV(){return PR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR="firebaseLocalStorageDb",qV=1,dm="firebaseLocalStorage",LR="fbase_key";class Cd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Zm(t,e){return t.transaction([dm],e?"readwrite":"readonly").objectStore(dm)}function YV(){const t=indexedDB.deleteDatabase(MR);return new Cd(t).toPromise()}function $E(){const t=indexedDB.open(MR,qV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(dm,{keyPath:LR})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(dm)?e(r):(r.close(),await YV(),e(await $E()))})})}async function mx(t,e,n){const r=Zm(t,!0).put({[LR]:e,value:n});return new Cd(r).toPromise()}async function GV(t,e){const n=Zm(t,!1).get(e),r=await new Cd(n).toPromise();return r===void 0?null:r.value}function px(t,e){const n=Zm(t,!0).delete(e);return new Cd(n).toPromise()}const $V=800,XV=3;class BR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $E(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>XV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return PR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wm._getInstance(jV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await zV(),!this.activeServiceWorker)return;this.sender=new VV(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $E();return await mx(e,hm,"1"),await px(e,hm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>mx(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>GV(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>px(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Zm(s,!1).getAll();return new Cd(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$V)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BR.type="LOCAL";const KV=BR;new xd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QV(t,e){return e?da(e):(We(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_ extends x_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Il(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Il(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Il(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function WV(t){return CR(t.auth,new C_(t),t.bypassAuthState)}function ZV(t){const{auth:e,user:n}=t;return We(n,e,"internal-error"),IV(n,new C_(t),t.bypassAuthState)}async function JV(t){const{auth:e,user:n}=t;return We(n,e,"internal-error"),wV(n,new C_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:u,type:c}=e;if(u){this.reject(u);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WV;case"linkViaPopup":case"linkViaRedirect":return JV;case"reauthViaPopup":case"reauthViaRedirect":return ZV;default:is(this.auth,"internal-error")}}resolve(e){_a(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_a(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eH=new xd(2e3,1e4);class El extends UR{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,El.currentPopupAction&&El.currentPopupAction.cancel(),El.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return We(e,this.auth,"internal-error"),e}async onExecution(){_a(this.filter.length===1,"Popup operations only handle one event");const e=I_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ks(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ks(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,El.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ks(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,eH.get())};e()}}El.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tH="pendingRedirect",O0=new Map;class nH extends UR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=O0.get(this.auth._key());if(!e){try{const r=await rH(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}O0.set(this.auth._key(),e)}return this.bypassAuthState||O0.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rH(t,e){const n=aH(e),r=sH(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function iH(t,e){O0.set(t._key(),e)}function sH(t){return da(t._redirectPersistence)}function aH(t){return D0(tH,t.config.apiKey,t.name)}async function oH(t,e,n=!1){if(yi(t.app))return Promise.reject(fa(t));const r=_u(t),s=QV(r,e),u=await new nH(r,s,n).execute();return u&&!n&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uH=10*60*1e3;class lH{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cH(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!VR(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ks(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uH&&this.cachedEventUids.clear(),this.cachedEventUids.has(gx(e))}saveEventToCache(e){this.cachedEventUids.add(gx(e)),this.lastProcessedEventTime=Date.now()}}function gx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function VR({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function cH(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hH(t,e={}){return wo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fH=/^https?/;async function mH(t){if(t.config.emulator)return;const{authorizedDomains:e}=await hH(t);for(const n of e)try{if(pH(n))return}catch{}is(t,"unauthorized-domain")}function pH(t){const e=qE(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===r}if(!fH.test(n))return!1;if(dH.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gH=new xd(3e4,6e4);function yx(){const t=Ps().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function yH(t){return new Promise((e,n)=>{var r,s,o;function u(){yx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yx(),n(ks(t,"network-request-failed"))},timeout:gH.get()})}if(!((s=(r=Ps().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Ps().gapi)===null||o===void 0)&&o.load)u();else{const c=uV("iframefcb");return Ps()[c]=()=>{gapi.load?u():n(ks(t,"network-request-failed"))},SR(`${oV()}?onload=${c}`).catch(d=>n(d))}}).catch(e=>{throw k0=null,e})}let k0=null;function EH(t){return k0=k0||yH(t),k0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _H=new xd(5e3,15e3),bH="__/auth/iframe",TH="emulator/auth/iframe",vH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AH(t){const e=t.config;We(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?v_(e,TH):`https://${t.config.authDomain}/${bH}`,r={apiKey:e.apiKey,appName:t.name,v:Yl},s=SH.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Ed(r).slice(1)}`}async function xH(t){const e=await EH(t),n=Ps().gapi;return We(n,t,"internal-error"),e.open({where:document.body,url:AH(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vH,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const u=ks(t,"network-request-failed"),c=Ps().setTimeout(()=>{o(u)},_H.get());function d(){Ps().clearTimeout(c),s(r)}r.ping(d).then(d,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},IH=500,CH=600,NH="_blank",RH="http://localhost";class Ex{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function DH(t,e,n,r=IH,s=CH){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const d=Object.assign(Object.assign({},wH),{width:r.toString(),height:s.toString(),top:o,left:u}),f=Cr().toLowerCase();n&&(c=gR(f)?NH:n),mR(f)&&(e=e||RH,d.scrollbars="yes");const m=Object.entries(d).reduce((_,[T,I])=>`${_}${T}=${I},`,"");if(ZU(f)&&c!=="_self")return OH(e||"",c),new Ex(null);const y=window.open(e||"",c,m);We(y,t,"popup-blocked");try{y.focus()}catch{}return new Ex(y)}function OH(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kH="__/auth/handler",PH="emulator/auth/handler",MH=encodeURIComponent("fac");async function _x(t,e,n,r,s,o){We(t.config.authDomain,t,"auth-domain-config-required"),We(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Yl,eventId:s};if(e instanceof wR){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",J5(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,y]of Object.entries({}))u[m]=y}if(e instanceof Id){const m=e.getScopes().filter(y=>y!=="");m.length>0&&(u.scopes=m.join(","))}t.tenantId&&(u.tid=t.tenantId);const c=u;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const d=await t._getAppCheckToken(),f=d?`#${MH}=${encodeURIComponent(d)}`:"";return`${LH(t)}?${Ed(c).slice(1)}${f}`}function LH({config:t}){return t.emulator?v_(t,PH):`https://${t.authDomain}/${kH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="webStorageSupport";class BH{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kR,this._completeRedirectFn=oH,this._overrideRedirectResult=iH}async _openPopup(e,n,r,s){var o;_a((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const u=await _x(e,n,r,qE(),s);return DH(e,u,I_())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await _x(e,n,r,qE(),s);return HV(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(_a(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await xH(e),r=new lH(e);return n.register("authEvent",s=>(We(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(zy,{type:zy},s=>{var o;const u=(o=s?.[0])===null||o===void 0?void 0:o[zy];u!==void 0&&n(!!u),is(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=mH(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return TR()||pR()||A_()}}const UH=BH;var bx="@firebase/auth",Tx="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VH{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){We(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HH(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zH(t){lu(new go("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:c}=r.options;We(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:u,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vR(t)},f=new iV(r,s,o,d);return mV(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),lu(new go("auth-internal",e=>{const n=_u(e.getProvider("auth").getImmediate());return(r=>new VH(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rs(bx,Tx,HH(t)),Rs(bx,Tx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FH=5*60,jH=SC("authIdTokenMaxAge")||FH;let vx=null;const qH=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>jH)return;const s=n?.token;vx!==s&&(vx=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function YH(t=M1()){const e=Dm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=fV(t,{popupRedirectResolver:UH,persistence:[KV,BV,kR]}),r=SC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const u=qH(o.toString());OV(n,u,()=>u(n.currentUser)),DV(n,c=>u(c))}}const s=bC("auth");return s&&pV(n,`http://${s}`),n}function GH(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}sV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=ks("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",GH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zH("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $H="type.googleapis.com/google.protobuf.Int64Value",XH="type.googleapis.com/google.protobuf.UInt64Value";function HR(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function fm(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>fm(e));if(typeof t=="function"||typeof t=="object")return HR(t,e=>fm(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Fl(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case $H:case XH:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Fl(e)):typeof t=="function"||typeof t=="object"?HR(t,e=>Fl(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ti extends Vs{constructor(e,n,r){super(`${N_}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,ti.prototype)}}function KH(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function mm(t,e){let n=KH(t),r=n,s;try{const o=e&&e.error;if(o){const u=o.status;if(typeof u=="string"){if(!Sx[u])return new ti("internal","internal");n=Sx[u],r=u}const c=o.message;typeof c=="string"&&(r=c),s=o.details,s!==void 0&&(s=Fl(s))}}catch{}return n==="ok"?null:new ti(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QH{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,yi(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||s?.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="us-central1",WH=/^data: (.*?)(?:\n|$)/;function ZH(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new ti("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class JH{constructor(e,n,r,s,o=XE,u=(...c)=>fetch(...c)){this.app=e,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new QH(e,n,r,s),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(o);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=XE}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function ez(t,e,n){const r=pu(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(D1(t.emulatorOrigin),O1("Functions",!0))}function tz(t,e,n){const r=s=>rz(t,e,s,{});return r.stream=(s,o)=>sz(t,e,s,o),r}async function nz(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await s.json()}catch{}return{status:s.status,json:o}}async function zR(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function rz(t,e,n,r){const s=t._url(e);return iz(t,s,n,r)}async function iz(t,e,n,r){n=fm(n);const s={data:n},o=await zR(t,r),u=r.timeout||7e4,c=ZH(u),d=await Promise.race([nz(e,s,o,t.fetchImpl),c.promise,t.cancelAllRequests]);if(c.cancel(),!d)throw new ti("cancelled","Firebase Functions instance was deleted.");const f=mm(d.status,d.json);if(f)throw f;if(!d.json)throw new ti("internal","Response is not valid JSON object.");let m=d.json.data;if(typeof m>"u"&&(m=d.json.result),typeof m>"u")throw new ti("internal","Response is missing data field.");return{data:Fl(m)}}function sz(t,e,n,r){const s=t._url(e);return az(t,s,n,r||{})}async function az(t,e,n,r){var s;n=fm(n);const o={data:n},u=await zR(t,r);u["Content-Type"]="application/json",u.Accept="text/event-stream";let c;try{c=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:u,signal:r?.signal})}catch(T){if(T instanceof Error&&T.name==="AbortError"){const N=new ti("cancelled","Request was cancelled.");return{data:Promise.reject(N),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(N)}}}}}}const I=mm(0,null);return{data:Promise.reject(I),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(I)}}}}}}let d,f;const m=new Promise((T,I)=>{d=T,f=I});(s=r?.signal)===null||s===void 0||s.addEventListener("abort",()=>{const T=new ti("cancelled","Request was cancelled.");f(T)});const y=c.body.getReader(),_=oz(y,d,f,r?.signal);return{stream:{[Symbol.asyncIterator](){const T=_.getReader();return{async next(){const{value:I,done:N}=await T.read();return{value:I,done:N}},async return(){return await T.cancel(),{done:!0,value:void 0}}}}},data:m}}function oz(t,e,n,r){const s=(u,c)=>{const d=u.match(WH);if(!d)return;const f=d[1];try{const m=JSON.parse(f);if("result"in m){e(Fl(m.result));return}if("message"in m){c.enqueue(Fl(m.message));return}if("error"in m){const y=mm(0,m);c.error(y),n(y);return}}catch(m){if(m instanceof ti){c.error(m),n(m);return}}},o=new TextDecoder;return new ReadableStream({start(u){let c="";return d();async function d(){if(r?.aborted){const f=new ti("cancelled","Request was cancelled");return u.error(f),n(f),Promise.resolve()}try{const{value:f,done:m}=await t.read();if(m){c.trim()&&s(c.trim(),u),u.close();return}if(r?.aborted){const _=new ti("cancelled","Request was cancelled");u.error(_),n(_),await t.cancel();return}c+=o.decode(f,{stream:!0});const y=c.split(`
`);c=y.pop()||"";for(const _ of y)_.trim()&&s(_.trim(),u);return d()}catch(f){const m=f instanceof ti?f:mm(0,null);u.error(m),n(m)}}},cancel(){return t.cancel()}})}const Ax="@firebase/functions",xx="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uz="auth-internal",lz="app-check-internal",cz="messaging-internal";function hz(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),o=n.getProvider(uz),u=n.getProvider(cz),c=n.getProvider(lz);return new JH(s,o,u,c,r)};lu(new go(N_,e,"PUBLIC").setMultipleInstances(!0)),Rs(Ax,xx,t),Rs(Ax,xx,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dz(t=M1(),e=XE){const r=Dm(Sn(t),N_).getImmediate({identifier:e}),s=TC("functions");return s&&FR(r,...s),r}function FR(t,e,n){ez(Sn(t),e,n)}function jR(t,e,n){return tz(Sn(t),e)}hz();const fz={apiKey:"AIzaSyAO9TXM7A0SNeiEXzYo27fW0wdTXqXDEyc",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},R_=wC(fz),ss=hU(R_),pm=YH(R_),D_=dz(R_,"us-central1");FR(D_,"localhost",5001);const Si={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},Fr={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function mz(){const[t,e]=te.useState(""),[n,r]=te.useState(""),[s,o]=te.useState(!1),[u,c]=te.useState(!1),[d,f]=te.useState(""),m=async _=>{_.preventDefault(),c(!0),f("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(Fr.INVALID_EMAIL);if(n.length<6)throw new Error(Fr.WEAK_PASSWORD);const I=await NV(pm,t,n);console.log("User created successfully:",I.user.uid)}catch(T){console.error("Sign up error:",T);let I="Failed to create account";T.code==="auth/email-already-in-use"?I=Fr.EMAIL_IN_USE:T.code==="auth/invalid-email"?I=Fr.INVALID_EMAIL:T.code==="auth/weak-password"?I=Fr.WEAK_PASSWORD:T.code==="auth/operation-not-allowed"?I="Email/password accounts are not enabled. Please contact support.":T.message&&(I=T.message),f(I)}finally{c(!1)}},y=async _=>{_.preventDefault(),c(!0),f("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(Fr.INVALID_EMAIL);const I=await RV(pm,t,n);console.log("User signed in successfully:",I.user.uid)}catch(T){console.error("Sign in error:",T);let I="Failed to sign in";T.code==="auth/user-not-found"?I=Fr.USER_NOT_FOUND:T.code==="auth/wrong-password"?I=Fr.WRONG_PASSWORD:T.code==="auth/invalid-email"?I=Fr.INVALID_EMAIL:T.code==="auth/user-disabled"?I="This account has been disabled. Please contact support.":T.code==="auth/too-many-requests"?I=Fr.TOO_MANY_REQUESTS:T.message&&(I=T.message),f(I)}finally{c(!1)}};return F.jsx("div",{className:"fixed inset-0 bg-[#1a1a1d]/90 dark:bg-[#1a1a1d]/90 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:F.jsxs("div",{className:`bg-[#222226] dark:bg-[#222226] rounded-2xl shadow-[0_24px_48px_rgba(0,0,0,0.7),0_10px_20px_rgba(0,0,0,0.5)] 
                          p-8 w-full max-w-md border border-white/12 dark:border-white/12`,children:[F.jsxs("div",{className:"text-center mb-8",children:[F.jsx("div",{className:"flex items-center justify-center mb-4",children:F.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center",children:F.jsx("span",{className:"text-white font-bold text-lg",children:"T"})})}),F.jsx("h2",{className:"text-2xl font-bold text-[#f8faff] dark:text-[#f8faff] mb-2",children:s?"Join TinkFlow":"Welcome Back"}),F.jsx("p",{className:"text-[#b0b3b8] dark:text-[#b0b3b8] text-sm",children:s?"Start your AI-powered learning journey":"Continue exploring concepts with AI"})]}),F.jsxs("form",{onSubmit:s?m:y,className:"space-y-6",children:[F.jsx("div",{children:F.jsx("input",{type:"email",placeholder:"Email address",value:t,onChange:_=>e(_.target.value),required:!0,className:`w-full px-4 py-3 bg-[#2a2a2e] dark:bg-[#2a2a2e] border border-white/15 dark:border-white/15 
                                     rounded-lg text-[#f8faff] dark:text-[#f8faff] placeholder-[#8b949e] dark:placeholder-[#8b949e] 
                                     focus:outline-none focus:border-[#5a9cf8] dark:focus:border-[#5a9cf8] focus:shadow-[0_0_0_3px_rgba(90,156,248,0.25)]
                                     transition-all duration-200`})}),F.jsx("div",{children:F.jsx("input",{type:"password",placeholder:"Password",value:n,onChange:_=>r(_.target.value),required:!0,className:`w-full px-4 py-3 bg-[#2a2a2e] dark:bg-[#2a2a2e] border border-white/15 dark:border-white/15 
                                     rounded-lg text-[#f8faff] dark:text-[#f8faff] placeholder-[#8b949e] dark:placeholder-[#8b949e] 
                                     focus:outline-none focus:border-[#5a9cf8] dark:focus:border-[#5a9cf8] focus:shadow-[0_0_0_3px_rgba(90,156,248,0.25)]
                                     transition-all duration-200`})}),F.jsx("button",{type:"submit",disabled:u,className:`w-full py-3 px-4 rounded-lg font-semibold text-white transition-all duration-200 
                                   ${u?"bg-[#3a3a3e] dark:bg-[#3a3a3e] cursor-not-allowed opacity-60":"bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 active:from-indigo-700 active:to-purple-800 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"}
                                   focus:outline-none focus:shadow-[0_0_0_3px_rgba(99,102,241,0.4)]`,children:u?F.jsx("div",{className:"inline-block w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):s?"Create Account":"Sign In"}),d&&F.jsx("div",{className:`bg-red-900/20 dark:bg-red-900/30 border border-red-500/30 dark:border-red-500/40 
                                       rounded-lg p-3 text-red-400 dark:text-red-400 text-sm`,children:d})]}),F.jsxs("div",{className:"auth-switch text-center mt-6",children:[F.jsx("span",{className:"auth-switch-text text-gray-400 dark:text-gray-400 text-sm",children:s?"Already have an account?":"Don't have an account?"}),F.jsx("button",{type:"button",onClick:()=>o(!s),className:`auth-switch-btn ml-2 text-blue-400 dark:text-blue-400 hover:text-blue-300 dark:hover:text-blue-300 
                                 text-sm font-medium transition-colors duration-200 bg-transparent border-none cursor-pointer`,children:s?"Sign In":"Sign Up"})]})]})})}function pz({show:t,onHide:e,onConfirm:n,isCreating:r=!1}){const[s,o]=te.useState(""),[u,c]=te.useState(!0),d=_=>{const T=_.target.value;o(T),c(T.trim().length>0&&T.trim().length<=50)},f=_=>{_.preventDefault();const T=s.trim();T.length>0&&T.length<=50&&(n(T),o(""),c(!0))},m=()=>{o(""),c(!0),e()},y=_=>{_.key==="Enter"&&f(_)};return t?F.jsx("div",{className:"board-name-modal fixed inset-0 bg-black/60 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-[2001]",children:F.jsxs("div",{className:"bg-gray-800 dark:bg-gray-900 rounded-xl shadow-2xl p-6 w-full max-w-md border border-gray-700 dark:border-gray-600",children:[F.jsxs("div",{className:"flex justify-between items-center mb-6",children:[F.jsx("h3",{className:"text-lg font-semibold text-white dark:text-white",children:"Create New Board"}),F.jsx("button",{onClick:m,className:`text-gray-400 dark:text-gray-400 hover:text-gray-200 dark:hover:text-gray-200 
                                 bg-gray-700/50 dark:bg-gray-800/50 hover:bg-gray-600/50 dark:hover:bg-gray-700/50
                                 border border-gray-600 dark:border-gray-700 rounded-lg w-8 h-8 flex items-center justify-center
                                 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500/20`,"aria-label":"Close",children:""})]}),F.jsxs("form",{onSubmit:f,className:"space-y-4",children:[F.jsxs("div",{children:[F.jsx("label",{className:"block text-sm font-medium text-gray-300 dark:text-gray-300 mb-2",children:"Board Name"}),F.jsx("input",{type:"text",value:s,onChange:d,onKeyDown:y,placeholder:"Enter board name...",maxLength:50,autoFocus:!0,className:`w-full px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border rounded-lg 
                                       text-white dark:text-white placeholder-gray-400 dark:placeholder-gray-500 
                                       focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40 
                                       transition-all duration-200 font-medium
                                       ${u?"border-gray-600/50 dark:border-gray-700/50 focus:border-blue-500/60 dark:focus:border-blue-400/60":"border-red-500/60 dark:border-red-500/60 focus:border-red-500/60 dark:focus:border-red-500/60"}`}),!u&&F.jsx("p",{className:"text-red-400 dark:text-red-400 text-sm mt-2",children:"Board name must be between 1 and 50 characters long."}),F.jsxs("p",{className:`text-xs mt-1 ${s.length===50?"text-red-400 dark:text-red-400":"text-gray-500 dark:text-gray-500"}`,children:[s.length,"/50 characters"]})]}),F.jsxs("div",{className:"flex gap-3 pt-4",children:[F.jsx("button",{type:"button",onClick:m,disabled:r,className:`flex-1 px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border border-gray-600/50 dark:border-gray-700/50
                                     text-gray-300 dark:text-gray-300 rounded-lg font-medium transition-all duration-200
                                     hover:bg-gray-600/60 dark:hover:bg-gray-700/60 hover:border-gray-500/60 dark:hover:border-gray-600/60
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20`,children:"Cancel"}),F.jsx("button",{type:"submit",disabled:!u||s.trim().length===0||r,className:`flex-1 px-4 py-3 bg-blue-600/80 dark:bg-blue-500/80 border border-blue-500/50 dark:border-blue-400/50
                                     text-white rounded-lg font-medium transition-all duration-200 
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     hover:bg-blue-500/90 dark:hover:bg-blue-400/90 hover:border-blue-400/60 dark:hover:border-blue-300/60
                                     focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40`,children:r?"Creating...":"Create Board"})]})]})]})}):null}function gz({allBoards:t,currentBoard:e,onSwitchBoard:n,onCreateBoard:r,onDeleteBoard:s,onSignOut:o,isLoading:u}){const[c,d]=te.useState(!1),[f,m]=te.useState(!1),[y,_]=te.useState(null),T=async x=>{try{d(!0),await r(x),m(!1)}catch(C){console.error("Error in sidebar create board:",C)}finally{d(!1)}},I=()=>{m(!0)},N=()=>{m(!1)},k=(x,C)=>{x.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&s(C)};return F.jsxs(F.Fragment,{children:[F.jsx("div",{className:"fixed left-0 top-0 w-[440px] h-screen bg-[#222226] dark:bg-[#222226] border-r border-white/10 dark:border-white/10 flex flex-col z-[1001] transition-transform duration-[0.35s] ease-[cubic-bezier(0.4,0,0.2,1)]",children:F.jsxs("div",{className:"flex flex-col h-full",children:[F.jsxs("div",{className:"p-[22px] border-b border-white/[0.08] dark:border-white/[0.08] bg-white/[0.03] dark:bg-white/[0.03]",children:[F.jsx("h2",{className:"m-0 mb-[18px] text-[18px] font-semibold text-[#f8faff] dark:text-[#f8faff] tracking-[-0.012em]",children:"TinkFlow Boards"}),F.jsx("button",{onClick:I,disabled:u||c,className:`w-full bg-[#2f2f33] dark:bg-[#2f2f33] text-[#f8faff] dark:text-[#f8faff] border border-white/12 dark:border-white/12 
                                      px-4 py-[10px] rounded-md cursor-pointer text-[13px] font-semibold transition-all duration-200 
                                      tracking-[0.015em] uppercase
                                      ${u||c?"cursor-not-allowed opacity-60":"hover:bg-[#3a3a3e] dark:hover:bg-[#3a3a3e] hover:border-white/18 dark:hover:border-white/18 hover:-translate-y-0.5"}`,children:c?"Creating...":"+ New Board"})]}),F.jsx("div",{className:"flex-1 overflow-y-auto p-[14px] scrollbar-thin scrollbar-track-[#2a2a2e] scrollbar-thumb-[#4a4a4e] hover:scrollbar-thumb-[#5a5a5e]",children:t.map(x=>{const C=e?.id===x.id,L=y===x.id;return F.jsxs("div",{onClick:()=>!u&&n(x.id),onMouseEnter:()=>_(x.id),onMouseLeave:()=>_(null),className:`
                                        min-h-[54px] px-[18px] py-[14px] mb-[8px] rounded-[12px] flex justify-between items-center
                                        transition-all duration-200 cursor-pointer border font-medium text-[14px] leading-[1.4]
                                        ${u?"cursor-not-allowed opacity-60":"cursor-pointer"}
                                        ${C?"border-[#4a90e2] bg-[#2a3850] dark:bg-[#2a3850] text-[#f8faff] dark:text-[#f8faff] font-semibold shadow-[0_2px_8px_rgba(74,144,226,0.3)] transform translate-y-[-1px]":L?"border-white/20 dark:border-white/20 bg-[#2a2a2e] dark:bg-[#2a2a2e] text-[#e8eaed] dark:text-[#e8eaed] shadow-[0_2px_8px_rgba(0,0,0,0.3)] transform translate-y-[-1px]":"border-white/10 dark:border-white/10 bg-[#1e1e22] dark:bg-[#1e1e22] text-[#b0b3b8] dark:text-[#b0b3b8]"}
                                    `,role:"button",tabIndex:0,onKeyDown:M=>{(M.key==="Enter"||M.key===" ")&&!u&&n(x.id)},children:[F.jsx("span",{className:`
                                        ${C?"font-bold":"font-medium"} 
                                        text-lg flex-1 whitespace-nowrap overflow-hidden text-ellipsis 
                                        tracking-wide leading-5
                                    `,children:x.name}),F.jsxs("div",{className:"flex items-center gap-2",children:[x.isOpen&&F.jsx("span",{className:"text-blue-400 dark:text-blue-400 text-lg",children:""}),t.length>1&&F.jsx("button",{onClick:M=>{M.stopPropagation(),k(M,x.id)},title:"Delete board",className:`
                                                    bg-transparent border-none text-red-400 dark:text-red-400 
                                                    cursor-pointer text-xl leading-none px-1 transition-opacity duration-150
                                                    ${L?"opacity-100 visible":"opacity-0 invisible"}
                                                    hover:text-red-300 dark:hover:text-red-300
                                                `,children:""})]})]},x.id)})}),u&&F.jsx("div",{className:"p-4 text-center text-[#b0b3b8] dark:text-[#b0b3b8] text-[13px] font-medium",children:"Loading boards..."}),F.jsx("div",{className:"p-[22px] border-t border-white/[0.08] dark:border-white/[0.08]",children:F.jsx("button",{onClick:o,className:`w-full px-4 py-[10px] rounded-md border border-white/12 dark:border-white/12 
                                     bg-transparent text-[#b0b3b8] dark:text-[#b0b3b8] cursor-pointer text-[13px] font-semibold
                                     transition-all duration-200 tracking-[0.015em] uppercase
                                     hover:bg-[#2a2a2e] dark:hover:bg-[#2a2a2e] hover:border-white/18 dark:hover:border-white/18 
                                     hover:text-[#e8eaed] dark:hover:text-[#e8eaed] hover:-translate-y-0.5`,children:"Sign Out"})})]})}),F.jsx(pz,{show:f,onHide:N,onConfirm:T,isCreating:c})]})}function wx(t){const e=[],n=String(t||"");let r=n.indexOf(","),s=0,o=!1;for(;!o;){r===-1&&(r=n.length,o=!0);const u=n.slice(s,r).trim();(u||!o)&&e.push(u),s=r+1,r=n.indexOf(",",s)}return e}function qR(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const yz=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Ez=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,_z={};function Ix(t,e){return(_z.jsx?Ez:yz).test(t)}const bz=/[ \t\n\f\r]/g;function Tz(t){return typeof t=="object"?t.type==="text"?Cx(t.value):!1:Cx(t)}function Cx(t){return t.replace(bz,"")===""}let Nd=class{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}};Nd.prototype.normal={};Nd.prototype.property={};Nd.prototype.space=void 0;function YR(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new Nd(n,r,e)}function ld(t){return t.toLowerCase()}let ri=class{constructor(e,n){this.attribute=n,this.property=e}};ri.prototype.attribute="";ri.prototype.booleanish=!1;ri.prototype.boolean=!1;ri.prototype.commaOrSpaceSeparated=!1;ri.prototype.commaSeparated=!1;ri.prototype.defined=!1;ri.prototype.mustUseProperty=!1;ri.prototype.number=!1;ri.prototype.overloadedBoolean=!1;ri.prototype.property="";ri.prototype.spaceSeparated=!1;ri.prototype.space=void 0;let vz=0;const ot=bu(),Ln=bu(),KE=bu(),Oe=bu(),nn=bu(),Cl=bu(),mi=bu();function bu(){return 2**++vz}const QE=Object.freeze(Object.defineProperty({__proto__:null,boolean:ot,booleanish:Ln,commaOrSpaceSeparated:mi,commaSeparated:Cl,number:Oe,overloadedBoolean:KE,spaceSeparated:nn},Symbol.toStringTag,{value:"Module"})),Fy=Object.keys(QE);let O_=class extends ri{constructor(e,n,r,s){let o=-1;if(super(e,n),Nx(this,"space",s),typeof r=="number")for(;++o<Fy.length;){const u=Fy[o];Nx(this,Fy[o],(r&QE[u])===QE[u])}}};O_.prototype.defined=!0;function Nx(t,e,n){n&&(t[e]=n)}function Jl(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const o=new O_(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),e[r]=o,n[ld(r)]=r,n[ld(o.attribute)]=r}return new Nd(e,n,t.space)}const GR=Jl({properties:{ariaActiveDescendant:null,ariaAtomic:Ln,ariaAutoComplete:null,ariaBusy:Ln,ariaChecked:Ln,ariaColCount:Oe,ariaColIndex:Oe,ariaColSpan:Oe,ariaControls:nn,ariaCurrent:null,ariaDescribedBy:nn,ariaDetails:null,ariaDisabled:Ln,ariaDropEffect:nn,ariaErrorMessage:null,ariaExpanded:Ln,ariaFlowTo:nn,ariaGrabbed:Ln,ariaHasPopup:null,ariaHidden:Ln,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:nn,ariaLevel:Oe,ariaLive:null,ariaModal:Ln,ariaMultiLine:Ln,ariaMultiSelectable:Ln,ariaOrientation:null,ariaOwns:nn,ariaPlaceholder:null,ariaPosInSet:Oe,ariaPressed:Ln,ariaReadOnly:Ln,ariaRelevant:null,ariaRequired:Ln,ariaRoleDescription:nn,ariaRowCount:Oe,ariaRowIndex:Oe,ariaRowSpan:Oe,ariaSelected:Ln,ariaSetSize:Oe,ariaSort:null,ariaValueMax:Oe,ariaValueMin:Oe,ariaValueNow:Oe,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function $R(t,e){return e in t?t[e]:e}function XR(t,e){return $R(t,e.toLowerCase())}const Sz=Jl({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Cl,acceptCharset:nn,accessKey:nn,action:null,allow:null,allowFullScreen:ot,allowPaymentRequest:ot,allowUserMedia:ot,alt:null,as:null,async:ot,autoCapitalize:null,autoComplete:nn,autoFocus:ot,autoPlay:ot,blocking:nn,capture:null,charSet:null,checked:ot,cite:null,className:nn,cols:Oe,colSpan:null,content:null,contentEditable:Ln,controls:ot,controlsList:nn,coords:Oe|Cl,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ot,defer:ot,dir:null,dirName:null,disabled:ot,download:KE,draggable:Ln,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ot,formTarget:null,headers:nn,height:Oe,hidden:KE,high:Oe,href:null,hrefLang:null,htmlFor:nn,httpEquiv:nn,id:null,imageSizes:null,imageSrcSet:null,inert:ot,inputMode:null,integrity:null,is:null,isMap:ot,itemId:null,itemProp:nn,itemRef:nn,itemScope:ot,itemType:nn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ot,low:Oe,manifest:null,max:null,maxLength:Oe,media:null,method:null,min:null,minLength:Oe,multiple:ot,muted:ot,name:null,nonce:null,noModule:ot,noValidate:ot,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ot,optimum:Oe,pattern:null,ping:nn,placeholder:null,playsInline:ot,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ot,referrerPolicy:null,rel:nn,required:ot,reversed:ot,rows:Oe,rowSpan:Oe,sandbox:nn,scope:null,scoped:ot,seamless:ot,selected:ot,shadowRootClonable:ot,shadowRootDelegatesFocus:ot,shadowRootMode:null,shape:null,size:Oe,sizes:null,slot:null,span:Oe,spellCheck:Ln,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Oe,step:null,style:null,tabIndex:Oe,target:null,title:null,translate:null,type:null,typeMustMatch:ot,useMap:null,value:Ln,width:Oe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:nn,axis:null,background:null,bgColor:null,border:Oe,borderColor:null,bottomMargin:Oe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ot,declare:ot,event:null,face:null,frame:null,frameBorder:null,hSpace:Oe,leftMargin:Oe,link:null,longDesc:null,lowSrc:null,marginHeight:Oe,marginWidth:Oe,noResize:ot,noHref:ot,noShade:ot,noWrap:ot,object:null,profile:null,prompt:null,rev:null,rightMargin:Oe,rules:null,scheme:null,scrolling:Ln,standby:null,summary:null,text:null,topMargin:Oe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Oe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ot,disableRemotePlayback:ot,prefix:null,property:null,results:Oe,security:null,unselectable:null},space:"html",transform:XR}),Az=Jl({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:mi,accentHeight:Oe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Oe,amplitude:Oe,arabicForm:null,ascent:Oe,attributeName:null,attributeType:null,azimuth:Oe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Oe,by:null,calcMode:null,capHeight:Oe,className:nn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Oe,diffuseConstant:Oe,direction:null,display:null,dur:null,divisor:Oe,dominantBaseline:null,download:ot,dx:null,dy:null,edgeMode:null,editable:null,elevation:Oe,enableBackground:null,end:null,event:null,exponent:Oe,externalResourcesRequired:null,fill:null,fillOpacity:Oe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Cl,g2:Cl,glyphName:Cl,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Oe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Oe,horizOriginX:Oe,horizOriginY:Oe,id:null,ideographic:Oe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Oe,k:Oe,k1:Oe,k2:Oe,k3:Oe,k4:Oe,kernelMatrix:mi,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Oe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Oe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Oe,overlineThickness:Oe,paintOrder:null,panose1:null,path:null,pathLength:Oe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:nn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Oe,pointsAtY:Oe,pointsAtZ:Oe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:mi,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:mi,rev:mi,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:mi,requiredFeatures:mi,requiredFonts:mi,requiredFormats:mi,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Oe,specularExponent:Oe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Oe,strikethroughThickness:Oe,string:null,stroke:null,strokeDashArray:mi,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Oe,strokeOpacity:Oe,strokeWidth:null,style:null,surfaceScale:Oe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:mi,tabIndex:Oe,tableValues:null,target:null,targetX:Oe,targetY:Oe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:mi,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Oe,underlineThickness:Oe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Oe,values:null,vAlphabetic:Oe,vMathematical:Oe,vectorEffect:null,vHanging:Oe,vIdeographic:Oe,version:null,vertAdvY:Oe,vertOriginX:Oe,vertOriginY:Oe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Oe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:$R}),KR=Jl({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),QR=Jl({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:XR}),WR=Jl({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),xz={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},wz=/[A-Z]/g,Rx=/-[a-z]/g,Iz=/^data[-\w.:]+$/i;function k_(t,e){const n=ld(e);let r=e,s=ri;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Iz.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(Rx,Nz);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!Rx.test(o)){let u=o.replace(wz,Cz);u.charAt(0)!=="-"&&(u="-"+u),e="data"+u}}s=O_}return new s(r,e)}function Cz(t){return"-"+t.toLowerCase()}function Nz(t){return t.charAt(1).toUpperCase()}const Jm=YR([GR,Sz,KR,QR,WR],"html"),ec=YR([GR,Az,KR,QR,WR],"svg");function Dx(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function ZR(t){return t.join(" ").trim()}var cl={},jy,Ox;function Rz(){if(Ox)return jy;Ox=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,u=/^[;\s]*/,c=/^\s+|\s+$/g,d=`
`,f="/",m="*",y="",_="comment",T="declaration";jy=function(N,k){if(typeof N!="string")throw new TypeError("First argument must be a string");if(!N)return[];k=k||{};var x=1,C=1;function L(O){var U=O.match(e);U&&(x+=U.length);var X=O.lastIndexOf(d);C=~X?O.length-X:C+O.length}function M(){var O={line:x,column:C};return function(U){return U.position=new q(O),A(),U}}function q(O){this.start=O,this.end={line:x,column:C},this.source=k.source}q.prototype.content=N;function B(O){var U=new Error(k.source+":"+x+":"+C+": "+O);if(U.reason=O,U.filename=k.source,U.line=x,U.column=C,U.source=N,!k.silent)throw U}function S(O){var U=O.exec(N);if(U){var X=U[0];return L(X),N=N.slice(X.length),U}}function A(){S(n)}function D(O){var U;for(O=O||[];U=V();)U!==!1&&O.push(U);return O}function V(){var O=M();if(!(f!=N.charAt(0)||m!=N.charAt(1))){for(var U=2;y!=N.charAt(U)&&(m!=N.charAt(U)||f!=N.charAt(U+1));)++U;if(U+=2,y===N.charAt(U-1))return B("End of comment missing");var X=N.slice(2,U-2);return C+=2,L(X),N=N.slice(U),C+=2,O({type:_,comment:X})}}function H(){var O=M(),U=S(r);if(U){if(V(),!S(s))return B("property missing ':'");var X=S(o),Y=O({type:T,property:I(U[0].replace(t,y)),value:X?I(X[0].replace(t,y)):y});return S(u),Y}}function z(){var O=[];D(O);for(var U;U=H();)U!==!1&&(O.push(U),D(O));return O}return A(),z()};function I(N){return N?N.replace(c,y):y}return jy}var kx;function Dz(){if(kx)return cl;kx=1;var t=cl&&cl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(cl,"__esModule",{value:!0}),cl.default=n;var e=t(Rz());function n(r,s){var o=null;if(!r||typeof r!="string")return o;var u=(0,e.default)(r),c=typeof s=="function";return u.forEach(function(d){if(d.type==="declaration"){var f=d.property,m=d.value;c?s(f,m,d):m&&(o=o||{},o[f]=m)}}),o}return cl}var mh={},Px;function Oz(){if(Px)return mh;Px=1,Object.defineProperty(mh,"__esModule",{value:!0}),mh.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,o=function(f){return!f||n.test(f)||t.test(f)},u=function(f,m){return m.toUpperCase()},c=function(f,m){return"".concat(m,"-")},d=function(f,m){return m===void 0&&(m={}),o(f)?f:(f=f.toLowerCase(),m.reactCompat?f=f.replace(s,c):f=f.replace(r,c),f.replace(e,u))};return mh.camelCase=d,mh}var ph,Mx;function kz(){if(Mx)return ph;Mx=1;var t=ph&&ph.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},e=t(Dz()),n=Oz();function r(s,o){var u={};return!s||typeof s!="string"||(0,e.default)(s,function(c,d){c&&d&&(u[(0,n.camelCase)(c,o)]=d)}),u}return r.default=r,ph=r,ph}var Pz=kz();const Mz=bm(Pz),ep=JR("end"),Hs=JR("start");function JR(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Lz(t){const e=Hs(t),n=ep(t);if(e&&n)return{start:e,end:n}}function Lh(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Lx(t.position):"start"in t||"end"in t?Lx(t):"line"in t||"column"in t?WE(t):""}function WE(t){return Bx(t&&t.line)+":"+Bx(t&&t.column)}function Lx(t){return WE(t&&t.start)+"-"+WE(t&&t.end)}function Bx(t){return t&&typeof t=="number"?t:1}class Nr extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",o={},u=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof e=="string"?s=e:!o.cause&&e&&(u=!0,s=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof r=="string"){const d=r.indexOf(":");d===-1?o.ruleId=r:(o.source=r.slice(0,d),o.ruleId=r.slice(d+1))}if(!o.place&&o.ancestors&&o.ancestors){const d=o.ancestors[o.ancestors.length-1];d&&(o.place=d.position)}const c=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file,this.message=s,this.line=c?c.line:void 0,this.name=Lh(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=u&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual,this.expected,this.note,this.url}}Nr.prototype.file="";Nr.prototype.name="";Nr.prototype.reason="";Nr.prototype.message="";Nr.prototype.stack="";Nr.prototype.column=void 0;Nr.prototype.line=void 0;Nr.prototype.ancestors=void 0;Nr.prototype.cause=void 0;Nr.prototype.fatal=void 0;Nr.prototype.place=void 0;Nr.prototype.ruleId=void 0;Nr.prototype.source=void 0;const P_={}.hasOwnProperty,Bz=new Map,Uz=/[A-Z]/g,Vz=new Set(["table","tbody","thead","tfoot","tr"]),Hz=new Set(["td","th"]),e3="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function zz(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Kz(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Xz(n,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?ec:Jm,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},o=t3(s,t,void 0);return o&&typeof o!="string"?o:s.create(t,s.Fragment,{children:o||void 0},void 0)}function t3(t,e,n){if(e.type==="element")return Fz(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return jz(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return Yz(t,e,n);if(e.type==="mdxjsEsm")return qz(t,e);if(e.type==="root")return Gz(t,e,n);if(e.type==="text")return $z(t,e)}function Fz(t,e,n){const r=t.schema;let s=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=ec,t.schema=s),t.ancestors.push(e);const o=r3(t,e.tagName,!1),u=Qz(t,e);let c=L_(t,e);return Vz.has(e.tagName)&&(c=c.filter(function(d){return typeof d=="string"?!Tz(d):!0})),n3(t,u,o,e),M_(u,c),t.ancestors.pop(),t.schema=r,t.create(e,o,u,n)}function jz(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}cd(t,e.position)}function qz(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);cd(t,e.position)}function Yz(t,e,n){const r=t.schema;let s=r;e.name==="svg"&&r.space==="html"&&(s=ec,t.schema=s),t.ancestors.push(e);const o=e.name===null?t.Fragment:r3(t,e.name,!0),u=Wz(t,e),c=L_(t,e);return n3(t,u,o,e),M_(u,c),t.ancestors.pop(),t.schema=r,t.create(e,o,u,n)}function Gz(t,e,n){const r={};return M_(r,L_(t,e)),t.create(e,t.Fragment,r,n)}function $z(t,e){return e.value}function n3(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function M_(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function Xz(t,e,n){return r;function r(s,o,u,c){const f=Array.isArray(u.children)?n:e;return c?f(o,u,c):f(o,u)}}function Kz(t,e){return n;function n(r,s,o,u){const c=Array.isArray(o.children),d=Hs(r);return e(s,o,u,c,{columnNumber:d?d.column-1:void 0,fileName:t,lineNumber:d?d.line:void 0},void 0)}}function Qz(t,e){const n={};let r,s;for(s in e.properties)if(s!=="children"&&P_.call(e.properties,s)){const o=Zz(t,s,e.properties[s]);if(o){const[u,c]=o;t.tableCellAlignToStyle&&u==="align"&&typeof c=="string"&&Hz.has(e.tagName)?r=c:n[u]=c}}if(r){const o=n.style||(n.style={});o[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Wz(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const o=r.data.estree.body[0];o.type;const u=o.expression;u.type;const c=u.properties[0];c.type,Object.assign(n,t.evaluater.evaluateExpression(c.argument))}else cd(t,e.position);else{const s=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const c=r.value.data.estree.body[0];c.type,o=t.evaluater.evaluateExpression(c.expression)}else cd(t,e.position);else o=r.value===null?!0:r.value;n[s]=o}return n}function L_(t,e){const n=[];let r=-1;const s=t.passKeys?new Map:Bz;for(;++r<e.children.length;){const o=e.children[r];let u;if(t.passKeys){const d=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(d){const f=s.get(d)||0;u=d+"-"+f,s.set(d,f+1)}}const c=t3(t,o,u);c!==void 0&&n.push(c)}return n}function Zz(t,e,n){const r=k_(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?qR(n):ZR(n)),r.property==="style"){let s=typeof n=="object"?n:Jz(t,String(n));return t.stylePropertyNameCase==="css"&&(s=eF(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&r.space?xz[r.property]||r.property:r.attribute,n]}}function Jz(t,e){try{return Mz(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,s=new Nr("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=e3+"#cannot-parse-style-attribute",s}}function r3(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let o=-1,u;for(;++o<s.length;){const c=Ix(s[o])?{type:"Identifier",name:s[o]}:{type:"Literal",value:s[o]};u=u?{type:"MemberExpression",object:u,property:c,computed:!!(o&&c.type==="Literal"),optional:!1}:c}r=u}else r=Ix(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const s=r.value;return P_.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(r);cd(t)}function cd(t,e){const n=new Nr("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=e3+"#cannot-handle-mdx-estrees-without-createevaluater",n}function eF(t){const e={};let n;for(n in t)P_.call(t,n)&&(e[tF(n)]=t[n]);return e}function tF(t){let e=t.replace(Uz,nF);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function nF(t){return"-"+t.toLowerCase()}const qy={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},rF={};function iF(t,e){const n=rF,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return i3(t,r,s)}function i3(t,e,n){if(sF(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Ux(t.children,e,n)}return Array.isArray(t)?Ux(t,e,n):""}function Ux(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=i3(t[s],e,n);return r.join("")}function sF(t){return!!(t&&typeof t=="object")}const Vx=document.createElement("i");function B_(t){const e="&"+t+";";Vx.innerHTML=e;const n=Vx.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Ls(t,e,n,r){const s=t.length;let o=0,u;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)u=Array.from(r),u.unshift(e,n),t.splice(...u);else for(n&&t.splice(e,n);o<r.length;)u=r.slice(o,o+1e4),u.unshift(e,0),t.splice(...u),o+=1e4,e+=1e4}function zi(t,e){return t.length>0?(Ls(t,t.length,0,e),t):e}const Hx={}.hasOwnProperty;function aF(t){const e={};let n=-1;for(;++n<t.length;)oF(e,t[n]);return e}function oF(t,e){let n;for(n in e){const s=(Hx.call(t,n)?t[n]:void 0)||(t[n]={}),o=e[n];let u;if(o)for(u in o){Hx.call(s,u)||(s[u]=[]);const c=o[u];uF(s[u],Array.isArray(c)?c:c?[c]:[])}}}function uF(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);Ls(t,0,0,r)}function s3(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Nl(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Cs=Io(/[A-Za-z]/),_i=Io(/[\dA-Za-z]/),lF=Io(/[#-'*+\--9=?A-Z^-~]/);function ZE(t){return t!==null&&(t<32||t===127)}const JE=Io(/\d/),cF=Io(/[\dA-Fa-f]/),hF=Io(/[!-/:-@[-`{-~]/);function tt(t){return t!==null&&t<-2}function ni(t){return t!==null&&(t<0||t===32)}function kt(t){return t===-2||t===-1||t===32}const dF=Io(new RegExp("\\p{P}|\\p{S}","u")),fF=Io(/\s/);function Io(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function tc(t){const e=[];let n=-1,r=0,s=0;for(;++n<t.length;){const o=t.charCodeAt(n);let u="";if(o===37&&_i(t.charCodeAt(n+1))&&_i(t.charCodeAt(n+2)))s=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(u=String.fromCharCode(o));else if(o>55295&&o<57344){const c=t.charCodeAt(n+1);o<56320&&c>56319&&c<57344?(u=String.fromCharCode(o,c),s=1):u=""}else u=String.fromCharCode(o);u&&(e.push(t.slice(r,n),encodeURIComponent(u)),r=n+s+1,u=""),s&&(n+=s,s=0)}return e.join("")+t.slice(r)}function sn(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let o=0;return u;function u(d){return kt(d)?(t.enter(n),c(d)):e(d)}function c(d){return kt(d)&&o++<s?(t.consume(d),c):(t.exit(n),e(d))}}const mF={tokenize:pF};function pF(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(c){if(c===null){t.consume(c);return}return t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),sn(t,e,"linePrefix")}function s(c){return t.enter("paragraph"),o(c)}function o(c){const d=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=d),n=d,u(c)}function u(c){if(c===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(c);return}return tt(c)?(t.consume(c),t.exit("chunkText"),o):(t.consume(c),u)}}const gF={tokenize:yF},zx={tokenize:EF};function yF(t){const e=this,n=[];let r=0,s,o,u;return c;function c(L){if(r<n.length){const M=n[r];return e.containerState=M[1],t.attempt(M[0].continuation,d,f)(L)}return f(L)}function d(L){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&C();const M=e.events.length;let q=M,B;for(;q--;)if(e.events[q][0]==="exit"&&e.events[q][1].type==="chunkFlow"){B=e.events[q][1].end;break}x(r);let S=M;for(;S<e.events.length;)e.events[S][1].end={...B},S++;return Ls(e.events,q+1,0,e.events.slice(M)),e.events.length=S,f(L)}return c(L)}function f(L){if(r===n.length){if(!s)return _(L);if(s.currentConstruct&&s.currentConstruct.concrete)return I(L);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(zx,m,y)(L)}function m(L){return s&&C(),x(r),_(L)}function y(L){return e.parser.lazy[e.now().line]=r!==n.length,u=e.now().offset,I(L)}function _(L){return e.containerState={},t.attempt(zx,T,I)(L)}function T(L){return r++,n.push([e.currentConstruct,e.containerState]),_(L)}function I(L){if(L===null){s&&C(),x(0),t.consume(L);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:o}),N(L)}function N(L){if(L===null){k(t.exit("chunkFlow"),!0),x(0),t.consume(L);return}return tt(L)?(t.consume(L),k(t.exit("chunkFlow")),r=0,e.interrupt=void 0,c):(t.consume(L),N)}function k(L,M){const q=e.sliceStream(L);if(M&&q.push(null),L.previous=o,o&&(o.next=L),o=L,s.defineSkip(L.start),s.write(q),e.parser.lazy[L.start.line]){let B=s.events.length;for(;B--;)if(s.events[B][1].start.offset<u&&(!s.events[B][1].end||s.events[B][1].end.offset>u))return;const S=e.events.length;let A=S,D,V;for(;A--;)if(e.events[A][0]==="exit"&&e.events[A][1].type==="chunkFlow"){if(D){V=e.events[A][1].end;break}D=!0}for(x(r),B=S;B<e.events.length;)e.events[B][1].end={...V},B++;Ls(e.events,A+1,0,e.events.slice(S)),e.events.length=B}}function x(L){let M=n.length;for(;M-- >L;){const q=n[M];e.containerState=q[1],q[0].exit.call(e,t)}n.length=L}function C(){s.write([null]),o=void 0,s=void 0,e.containerState._closeFlow=void 0}}function EF(t,e,n){return sn(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Fx(t){if(t===null||ni(t)||fF(t))return 1;if(dF(t))return 2}function U_(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const o=t[s].resolveAll;o&&!r.includes(o)&&(e=o(e,n),r.push(o))}return e}const e1={name:"attention",resolveAll:_F,tokenize:bF};function _F(t,e){let n=-1,r,s,o,u,c,d,f,m;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;d=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const y={...t[r][1].end},_={...t[n][1].start};jx(y,-d),jx(_,d),u={type:d>1?"strongSequence":"emphasisSequence",start:y,end:{...t[r][1].end}},c={type:d>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:_},o={type:d>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},s={type:d>1?"strong":"emphasis",start:{...u.start},end:{...c.end}},t[r][1].end={...u.start},t[n][1].start={...c.end},f=[],t[r][1].end.offset-t[r][1].start.offset&&(f=zi(f,[["enter",t[r][1],e],["exit",t[r][1],e]])),f=zi(f,[["enter",s,e],["enter",u,e],["exit",u,e],["enter",o,e]]),f=zi(f,U_(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),f=zi(f,[["exit",o,e],["enter",c,e],["exit",c,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(m=2,f=zi(f,[["enter",t[n][1],e],["exit",t[n][1],e]])):m=0,Ls(t,r-1,n-r+3,f),n=r+f.length-m-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function bF(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=Fx(r);let o;return u;function u(d){return o=d,t.enter("attentionSequence"),c(d)}function c(d){if(d===o)return t.consume(d),c;const f=t.exit("attentionSequence"),m=Fx(d),y=!m||m===2&&s||n.includes(d),_=!s||s===2&&m||n.includes(r);return f._open=!!(o===42?y:y&&(s||!_)),f._close=!!(o===42?_:_&&(m||!y)),e(d)}}function jx(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const TF={name:"autolink",tokenize:vF};function vF(t,e,n){let r=0;return s;function s(T){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(T),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),o}function o(T){return Cs(T)?(t.consume(T),u):T===64?n(T):f(T)}function u(T){return T===43||T===45||T===46||_i(T)?(r=1,c(T)):f(T)}function c(T){return T===58?(t.consume(T),r=0,d):(T===43||T===45||T===46||_i(T))&&r++<32?(t.consume(T),c):(r=0,f(T))}function d(T){return T===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(T),t.exit("autolinkMarker"),t.exit("autolink"),e):T===null||T===32||T===60||ZE(T)?n(T):(t.consume(T),d)}function f(T){return T===64?(t.consume(T),m):lF(T)?(t.consume(T),f):n(T)}function m(T){return _i(T)?y(T):n(T)}function y(T){return T===46?(t.consume(T),r=0,m):T===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(T),t.exit("autolinkMarker"),t.exit("autolink"),e):_(T)}function _(T){if((T===45||_i(T))&&r++<63){const I=T===45?_:y;return t.consume(T),I}return n(T)}}const tp={partial:!0,tokenize:SF};function SF(t,e,n){return r;function r(o){return kt(o)?sn(t,s,"linePrefix")(o):s(o)}function s(o){return o===null||tt(o)?e(o):n(o)}}const a3={continuation:{tokenize:xF},exit:wF,name:"blockQuote",tokenize:AF};function AF(t,e,n){const r=this;return s;function s(u){if(u===62){const c=r.containerState;return c.open||(t.enter("blockQuote",{_container:!0}),c.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(u),t.exit("blockQuoteMarker"),o}return n(u)}function o(u){return kt(u)?(t.enter("blockQuotePrefixWhitespace"),t.consume(u),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(u))}}function xF(t,e,n){const r=this;return s;function s(u){return kt(u)?sn(t,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u):o(u)}function o(u){return t.attempt(a3,e,n)(u)}}function wF(t){t.exit("blockQuote")}const o3={name:"characterEscape",tokenize:IF};function IF(t,e,n){return r;function r(o){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(o),t.exit("escapeMarker"),s}function s(o){return hF(o)?(t.enter("characterEscapeValue"),t.consume(o),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(o)}}const u3={name:"characterReference",tokenize:CF};function CF(t,e,n){const r=this;let s=0,o,u;return c;function c(y){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(y),t.exit("characterReferenceMarker"),d}function d(y){return y===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(y),t.exit("characterReferenceMarkerNumeric"),f):(t.enter("characterReferenceValue"),o=31,u=_i,m(y))}function f(y){return y===88||y===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(y),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),o=6,u=cF,m):(t.enter("characterReferenceValue"),o=7,u=JE,m(y))}function m(y){if(y===59&&s){const _=t.exit("characterReferenceValue");return u===_i&&!B_(r.sliceSerialize(_))?n(y):(t.enter("characterReferenceMarker"),t.consume(y),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return u(y)&&s++<o?(t.consume(y),m):n(y)}}const qx={partial:!0,tokenize:RF},Yx={concrete:!0,name:"codeFenced",tokenize:NF};function NF(t,e,n){const r=this,s={partial:!0,tokenize:q};let o=0,u=0,c;return d;function d(B){return f(B)}function f(B){const S=r.events[r.events.length-1];return o=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,c=B,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),m(B)}function m(B){return B===c?(u++,t.consume(B),m):u<3?n(B):(t.exit("codeFencedFenceSequence"),kt(B)?sn(t,y,"whitespace")(B):y(B))}function y(B){return B===null||tt(B)?(t.exit("codeFencedFence"),r.interrupt?e(B):t.check(qx,N,M)(B)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),_(B))}function _(B){return B===null||tt(B)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),y(B)):kt(B)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),sn(t,T,"whitespace")(B)):B===96&&B===c?n(B):(t.consume(B),_)}function T(B){return B===null||tt(B)?y(B):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),I(B))}function I(B){return B===null||tt(B)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),y(B)):B===96&&B===c?n(B):(t.consume(B),I)}function N(B){return t.attempt(s,M,k)(B)}function k(B){return t.enter("lineEnding"),t.consume(B),t.exit("lineEnding"),x}function x(B){return o>0&&kt(B)?sn(t,C,"linePrefix",o+1)(B):C(B)}function C(B){return B===null||tt(B)?t.check(qx,N,M)(B):(t.enter("codeFlowValue"),L(B))}function L(B){return B===null||tt(B)?(t.exit("codeFlowValue"),C(B)):(t.consume(B),L)}function M(B){return t.exit("codeFenced"),e(B)}function q(B,S,A){let D=0;return V;function V(X){return B.enter("lineEnding"),B.consume(X),B.exit("lineEnding"),H}function H(X){return B.enter("codeFencedFence"),kt(X)?sn(B,z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(X):z(X)}function z(X){return X===c?(B.enter("codeFencedFenceSequence"),O(X)):A(X)}function O(X){return X===c?(D++,B.consume(X),O):D>=u?(B.exit("codeFencedFenceSequence"),kt(X)?sn(B,U,"whitespace")(X):U(X)):A(X)}function U(X){return X===null||tt(X)?(B.exit("codeFencedFence"),S(X)):A(X)}}}function RF(t,e,n){const r=this;return s;function s(u){return u===null?n(u):(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),o)}function o(u){return r.parser.lazy[r.now().line]?n(u):e(u)}}const Yy={name:"codeIndented",tokenize:OF},DF={partial:!0,tokenize:kF};function OF(t,e,n){const r=this;return s;function s(f){return t.enter("codeIndented"),sn(t,o,"linePrefix",5)(f)}function o(f){const m=r.events[r.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?u(f):n(f)}function u(f){return f===null?d(f):tt(f)?t.attempt(DF,u,d)(f):(t.enter("codeFlowValue"),c(f))}function c(f){return f===null||tt(f)?(t.exit("codeFlowValue"),u(f)):(t.consume(f),c)}function d(f){return t.exit("codeIndented"),e(f)}}function kF(t,e,n){const r=this;return s;function s(u){return r.parser.lazy[r.now().line]?n(u):tt(u)?(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),s):sn(t,o,"linePrefix",5)(u)}function o(u){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(u):tt(u)?s(u):n(u)}}const PF={name:"codeText",previous:LF,resolve:MF,tokenize:BF};function MF(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function LF(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function BF(t,e,n){let r=0,s,o;return u;function u(y){return t.enter("codeText"),t.enter("codeTextSequence"),c(y)}function c(y){return y===96?(t.consume(y),r++,c):(t.exit("codeTextSequence"),d(y))}function d(y){return y===null?n(y):y===32?(t.enter("space"),t.consume(y),t.exit("space"),d):y===96?(o=t.enter("codeTextSequence"),s=0,m(y)):tt(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),d):(t.enter("codeTextData"),f(y))}function f(y){return y===null||y===32||y===96||tt(y)?(t.exit("codeTextData"),d(y)):(t.consume(y),f)}function m(y){return y===96?(t.consume(y),s++,m):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(y)):(o.type="codeTextData",f(y))}}class UF{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const s=n||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&gh(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),gh(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),gh(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);gh(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);gh(this.left,n.reverse())}}}function gh(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function l3(t){const e={};let n=-1,r,s,o,u,c,d,f;const m=new UF(t);for(;++n<m.length;){for(;n in e;)n=e[n];if(r=m.get(n),n&&r[1].type==="chunkFlow"&&m.get(n-1)[1].type==="listItemPrefix"&&(d=r[1]._tokenizer.events,o=0,o<d.length&&d[o][1].type==="lineEndingBlank"&&(o+=2),o<d.length&&d[o][1].type==="content"))for(;++o<d.length&&d[o][1].type!=="content";)d[o][1].type==="chunkText"&&(d[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,VF(m,n)),n=e[n],f=!0);else if(r[1]._container){for(o=n,s=void 0;o--;)if(u=m.get(o),u[1].type==="lineEnding"||u[1].type==="lineEndingBlank")u[0]==="enter"&&(s&&(m.get(s)[1].type="lineEndingBlank"),u[1].type="lineEnding",s=o);else if(!(u[1].type==="linePrefix"||u[1].type==="listItemIndent"))break;s&&(r[1].end={...m.get(s)[1].start},c=m.slice(s,n),c.unshift(r),m.splice(s,n-s+1,c))}}return Ls(t,0,Number.POSITIVE_INFINITY,m.slice(0)),!f}function VF(t,e){const n=t.get(e)[1],r=t.get(e)[2];let s=e-1;const o=[];let u=n._tokenizer;u||(u=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(u._contentTypeTextTrailing=!0));const c=u.events,d=[],f={};let m,y,_=-1,T=n,I=0,N=0;const k=[N];for(;T;){for(;t.get(++s)[1]!==T;);o.push(s),T._tokenizer||(m=r.sliceStream(T),T.next||m.push(null),y&&u.defineSkip(T.start),T._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=!0),u.write(m),T._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=void 0)),y=T,T=T.next}for(T=n;++_<c.length;)c[_][0]==="exit"&&c[_-1][0]==="enter"&&c[_][1].type===c[_-1][1].type&&c[_][1].start.line!==c[_][1].end.line&&(N=_+1,k.push(N),T._tokenizer=void 0,T.previous=void 0,T=T.next);for(u.events=[],T?(T._tokenizer=void 0,T.previous=void 0):k.pop(),_=k.length;_--;){const x=c.slice(k[_],k[_+1]),C=o.pop();d.push([C,C+x.length-1]),t.splice(C,2,x)}for(d.reverse(),_=-1;++_<d.length;)f[I+d[_][0]]=I+d[_][1],I+=d[_][1]-d[_][0]-1;return f}const HF={resolve:FF,tokenize:jF},zF={partial:!0,tokenize:qF};function FF(t){return l3(t),t}function jF(t,e){let n;return r;function r(c){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(c)}function s(c){return c===null?o(c):tt(c)?t.check(zF,u,o)(c):(t.consume(c),s)}function o(c){return t.exit("chunkContent"),t.exit("content"),e(c)}function u(c){return t.consume(c),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function qF(t,e,n){const r=this;return s;function s(u){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),sn(t,o,"linePrefix")}function o(u){if(u===null||tt(u))return n(u);const c=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(u):t.interrupt(r.parser.constructs.flow,n,e)(u)}}function c3(t,e,n,r,s,o,u,c,d){const f=d||Number.POSITIVE_INFINITY;let m=0;return y;function y(x){return x===60?(t.enter(r),t.enter(s),t.enter(o),t.consume(x),t.exit(o),_):x===null||x===32||x===41||ZE(x)?n(x):(t.enter(r),t.enter(u),t.enter(c),t.enter("chunkString",{contentType:"string"}),N(x))}function _(x){return x===62?(t.enter(o),t.consume(x),t.exit(o),t.exit(s),t.exit(r),e):(t.enter(c),t.enter("chunkString",{contentType:"string"}),T(x))}function T(x){return x===62?(t.exit("chunkString"),t.exit(c),_(x)):x===null||x===60||tt(x)?n(x):(t.consume(x),x===92?I:T)}function I(x){return x===60||x===62||x===92?(t.consume(x),T):T(x)}function N(x){return!m&&(x===null||x===41||ni(x))?(t.exit("chunkString"),t.exit(c),t.exit(u),t.exit(r),e(x)):m<f&&x===40?(t.consume(x),m++,N):x===41?(t.consume(x),m--,N):x===null||x===32||x===40||ZE(x)?n(x):(t.consume(x),x===92?k:N)}function k(x){return x===40||x===41||x===92?(t.consume(x),N):N(x)}}function h3(t,e,n,r,s,o){const u=this;let c=0,d;return f;function f(T){return t.enter(r),t.enter(s),t.consume(T),t.exit(s),t.enter(o),m}function m(T){return c>999||T===null||T===91||T===93&&!d||T===94&&!c&&"_hiddenFootnoteSupport"in u.parser.constructs?n(T):T===93?(t.exit(o),t.enter(s),t.consume(T),t.exit(s),t.exit(r),e):tt(T)?(t.enter("lineEnding"),t.consume(T),t.exit("lineEnding"),m):(t.enter("chunkString",{contentType:"string"}),y(T))}function y(T){return T===null||T===91||T===93||tt(T)||c++>999?(t.exit("chunkString"),m(T)):(t.consume(T),d||(d=!kt(T)),T===92?_:y)}function _(T){return T===91||T===92||T===93?(t.consume(T),c++,y):y(T)}}function d3(t,e,n,r,s,o){let u;return c;function c(_){return _===34||_===39||_===40?(t.enter(r),t.enter(s),t.consume(_),t.exit(s),u=_===40?41:_,d):n(_)}function d(_){return _===u?(t.enter(s),t.consume(_),t.exit(s),t.exit(r),e):(t.enter(o),f(_))}function f(_){return _===u?(t.exit(o),d(u)):_===null?n(_):tt(_)?(t.enter("lineEnding"),t.consume(_),t.exit("lineEnding"),sn(t,f,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),m(_))}function m(_){return _===u||_===null||tt(_)?(t.exit("chunkString"),f(_)):(t.consume(_),_===92?y:m)}function y(_){return _===u||_===92?(t.consume(_),m):m(_)}}function Bh(t,e){let n;return r;function r(s){return tt(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):kt(s)?sn(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}const YF={name:"definition",tokenize:$F},GF={partial:!0,tokenize:XF};function $F(t,e,n){const r=this;let s;return o;function o(T){return t.enter("definition"),u(T)}function u(T){return h3.call(r,t,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(T)}function c(T){return s=Nl(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),T===58?(t.enter("definitionMarker"),t.consume(T),t.exit("definitionMarker"),d):n(T)}function d(T){return ni(T)?Bh(t,f)(T):f(T)}function f(T){return c3(t,m,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(T)}function m(T){return t.attempt(GF,y,y)(T)}function y(T){return kt(T)?sn(t,_,"whitespace")(T):_(T)}function _(T){return T===null||tt(T)?(t.exit("definition"),r.parser.defined.push(s),e(T)):n(T)}}function XF(t,e,n){return r;function r(c){return ni(c)?Bh(t,s)(c):n(c)}function s(c){return d3(t,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function o(c){return kt(c)?sn(t,u,"whitespace")(c):u(c)}function u(c){return c===null||tt(c)?e(c):n(c)}}const KF={name:"hardBreakEscape",tokenize:QF};function QF(t,e,n){return r;function r(o){return t.enter("hardBreakEscape"),t.consume(o),s}function s(o){return tt(o)?(t.exit("hardBreakEscape"),e(o)):n(o)}}const WF={name:"headingAtx",resolve:ZF,tokenize:JF};function ZF(t,e){let n=t.length-2,r=3,s,o;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},o={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},Ls(t,r,n-r+1,[["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e]])),t}function JF(t,e,n){let r=0;return s;function s(m){return t.enter("atxHeading"),o(m)}function o(m){return t.enter("atxHeadingSequence"),u(m)}function u(m){return m===35&&r++<6?(t.consume(m),u):m===null||ni(m)?(t.exit("atxHeadingSequence"),c(m)):n(m)}function c(m){return m===35?(t.enter("atxHeadingSequence"),d(m)):m===null||tt(m)?(t.exit("atxHeading"),e(m)):kt(m)?sn(t,c,"whitespace")(m):(t.enter("atxHeadingText"),f(m))}function d(m){return m===35?(t.consume(m),d):(t.exit("atxHeadingSequence"),c(m))}function f(m){return m===null||m===35||ni(m)?(t.exit("atxHeadingText"),c(m)):(t.consume(m),f)}}const ej=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Gx=["pre","script","style","textarea"],tj={concrete:!0,name:"htmlFlow",resolveTo:ij,tokenize:sj},nj={partial:!0,tokenize:oj},rj={partial:!0,tokenize:aj};function ij(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function sj(t,e,n){const r=this;let s,o,u,c,d;return f;function f(j){return m(j)}function m(j){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(j),y}function y(j){return j===33?(t.consume(j),_):j===47?(t.consume(j),o=!0,N):j===63?(t.consume(j),s=3,r.interrupt?e:w):Cs(j)?(t.consume(j),u=String.fromCharCode(j),k):n(j)}function _(j){return j===45?(t.consume(j),s=2,T):j===91?(t.consume(j),s=5,c=0,I):Cs(j)?(t.consume(j),s=4,r.interrupt?e:w):n(j)}function T(j){return j===45?(t.consume(j),r.interrupt?e:w):n(j)}function I(j){const ge="CDATA[";return j===ge.charCodeAt(c++)?(t.consume(j),c===ge.length?r.interrupt?e:z:I):n(j)}function N(j){return Cs(j)?(t.consume(j),u=String.fromCharCode(j),k):n(j)}function k(j){if(j===null||j===47||j===62||ni(j)){const ge=j===47,Ce=u.toLowerCase();return!ge&&!o&&Gx.includes(Ce)?(s=1,r.interrupt?e(j):z(j)):ej.includes(u.toLowerCase())?(s=6,ge?(t.consume(j),x):r.interrupt?e(j):z(j)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):o?C(j):L(j))}return j===45||_i(j)?(t.consume(j),u+=String.fromCharCode(j),k):n(j)}function x(j){return j===62?(t.consume(j),r.interrupt?e:z):n(j)}function C(j){return kt(j)?(t.consume(j),C):V(j)}function L(j){return j===47?(t.consume(j),V):j===58||j===95||Cs(j)?(t.consume(j),M):kt(j)?(t.consume(j),L):V(j)}function M(j){return j===45||j===46||j===58||j===95||_i(j)?(t.consume(j),M):q(j)}function q(j){return j===61?(t.consume(j),B):kt(j)?(t.consume(j),q):L(j)}function B(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(t.consume(j),d=j,S):kt(j)?(t.consume(j),B):A(j)}function S(j){return j===d?(t.consume(j),d=null,D):j===null||tt(j)?n(j):(t.consume(j),S)}function A(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||ni(j)?q(j):(t.consume(j),A)}function D(j){return j===47||j===62||kt(j)?L(j):n(j)}function V(j){return j===62?(t.consume(j),H):n(j)}function H(j){return j===null||tt(j)?z(j):kt(j)?(t.consume(j),H):n(j)}function z(j){return j===45&&s===2?(t.consume(j),Y):j===60&&s===1?(t.consume(j),W):j===62&&s===4?(t.consume(j),ee):j===63&&s===3?(t.consume(j),w):j===93&&s===5?(t.consume(j),re):tt(j)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(nj,ae,O)(j)):j===null||tt(j)?(t.exit("htmlFlowData"),O(j)):(t.consume(j),z)}function O(j){return t.check(rj,U,ae)(j)}function U(j){return t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),X}function X(j){return j===null||tt(j)?O(j):(t.enter("htmlFlowData"),z(j))}function Y(j){return j===45?(t.consume(j),w):z(j)}function W(j){return j===47?(t.consume(j),u="",se):z(j)}function se(j){if(j===62){const ge=u.toLowerCase();return Gx.includes(ge)?(t.consume(j),ee):z(j)}return Cs(j)&&u.length<8?(t.consume(j),u+=String.fromCharCode(j),se):z(j)}function re(j){return j===93?(t.consume(j),w):z(j)}function w(j){return j===62?(t.consume(j),ee):j===45&&s===2?(t.consume(j),w):z(j)}function ee(j){return j===null||tt(j)?(t.exit("htmlFlowData"),ae(j)):(t.consume(j),ee)}function ae(j){return t.exit("htmlFlow"),e(j)}}function aj(t,e,n){const r=this;return s;function s(u){return tt(u)?(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),o):n(u)}function o(u){return r.parser.lazy[r.now().line]?n(u):e(u)}}function oj(t,e,n){return r;function r(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(tp,e,n)}}const uj={name:"htmlText",tokenize:lj};function lj(t,e,n){const r=this;let s,o,u;return c;function c(w){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(w),d}function d(w){return w===33?(t.consume(w),f):w===47?(t.consume(w),q):w===63?(t.consume(w),L):Cs(w)?(t.consume(w),A):n(w)}function f(w){return w===45?(t.consume(w),m):w===91?(t.consume(w),o=0,I):Cs(w)?(t.consume(w),C):n(w)}function m(w){return w===45?(t.consume(w),T):n(w)}function y(w){return w===null?n(w):w===45?(t.consume(w),_):tt(w)?(u=y,W(w)):(t.consume(w),y)}function _(w){return w===45?(t.consume(w),T):y(w)}function T(w){return w===62?Y(w):w===45?_(w):y(w)}function I(w){const ee="CDATA[";return w===ee.charCodeAt(o++)?(t.consume(w),o===ee.length?N:I):n(w)}function N(w){return w===null?n(w):w===93?(t.consume(w),k):tt(w)?(u=N,W(w)):(t.consume(w),N)}function k(w){return w===93?(t.consume(w),x):N(w)}function x(w){return w===62?Y(w):w===93?(t.consume(w),x):N(w)}function C(w){return w===null||w===62?Y(w):tt(w)?(u=C,W(w)):(t.consume(w),C)}function L(w){return w===null?n(w):w===63?(t.consume(w),M):tt(w)?(u=L,W(w)):(t.consume(w),L)}function M(w){return w===62?Y(w):L(w)}function q(w){return Cs(w)?(t.consume(w),B):n(w)}function B(w){return w===45||_i(w)?(t.consume(w),B):S(w)}function S(w){return tt(w)?(u=S,W(w)):kt(w)?(t.consume(w),S):Y(w)}function A(w){return w===45||_i(w)?(t.consume(w),A):w===47||w===62||ni(w)?D(w):n(w)}function D(w){return w===47?(t.consume(w),Y):w===58||w===95||Cs(w)?(t.consume(w),V):tt(w)?(u=D,W(w)):kt(w)?(t.consume(w),D):Y(w)}function V(w){return w===45||w===46||w===58||w===95||_i(w)?(t.consume(w),V):H(w)}function H(w){return w===61?(t.consume(w),z):tt(w)?(u=H,W(w)):kt(w)?(t.consume(w),H):D(w)}function z(w){return w===null||w===60||w===61||w===62||w===96?n(w):w===34||w===39?(t.consume(w),s=w,O):tt(w)?(u=z,W(w)):kt(w)?(t.consume(w),z):(t.consume(w),U)}function O(w){return w===s?(t.consume(w),s=void 0,X):w===null?n(w):tt(w)?(u=O,W(w)):(t.consume(w),O)}function U(w){return w===null||w===34||w===39||w===60||w===61||w===96?n(w):w===47||w===62||ni(w)?D(w):(t.consume(w),U)}function X(w){return w===47||w===62||ni(w)?D(w):n(w)}function Y(w){return w===62?(t.consume(w),t.exit("htmlTextData"),t.exit("htmlText"),e):n(w)}function W(w){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(w),t.exit("lineEnding"),se}function se(w){return kt(w)?sn(t,re,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(w):re(w)}function re(w){return t.enter("htmlTextData"),u(w)}}const V_={name:"labelEnd",resolveAll:fj,resolveTo:mj,tokenize:pj},cj={tokenize:gj},hj={tokenize:yj},dj={tokenize:Ej};function fj(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",e+=s}}return t.length!==n.length&&Ls(t,0,t.length,n),t}function mj(t,e){let n=t.length,r=0,s,o,u,c;for(;n--;)if(s=t[n][1],o){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(u){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(o=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(u=n);const d={type:t[o][1].type==="labelLink"?"link":"image",start:{...t[o][1].start},end:{...t[t.length-1][1].end}},f={type:"label",start:{...t[o][1].start},end:{...t[u][1].end}},m={type:"labelText",start:{...t[o+r+2][1].end},end:{...t[u-2][1].start}};return c=[["enter",d,e],["enter",f,e]],c=zi(c,t.slice(o+1,o+r+3)),c=zi(c,[["enter",m,e]]),c=zi(c,U_(e.parser.constructs.insideSpan.null,t.slice(o+r+4,u-3),e)),c=zi(c,[["exit",m,e],t[u-2],t[u-1],["exit",f,e]]),c=zi(c,t.slice(u+1)),c=zi(c,[["exit",d,e]]),Ls(t,o,t.length,c),t}function pj(t,e,n){const r=this;let s=r.events.length,o,u;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){o=r.events[s][1];break}return c;function c(_){return o?o._inactive?y(_):(u=r.parser.defined.includes(Nl(r.sliceSerialize({start:o.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(_),t.exit("labelMarker"),t.exit("labelEnd"),d):n(_)}function d(_){return _===40?t.attempt(cj,m,u?m:y)(_):_===91?t.attempt(hj,m,u?f:y)(_):u?m(_):y(_)}function f(_){return t.attempt(dj,m,y)(_)}function m(_){return e(_)}function y(_){return o._balanced=!0,n(_)}}function gj(t,e,n){return r;function r(y){return t.enter("resource"),t.enter("resourceMarker"),t.consume(y),t.exit("resourceMarker"),s}function s(y){return ni(y)?Bh(t,o)(y):o(y)}function o(y){return y===41?m(y):c3(t,u,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(y)}function u(y){return ni(y)?Bh(t,d)(y):m(y)}function c(y){return n(y)}function d(y){return y===34||y===39||y===40?d3(t,f,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(y):m(y)}function f(y){return ni(y)?Bh(t,m)(y):m(y)}function m(y){return y===41?(t.enter("resourceMarker"),t.consume(y),t.exit("resourceMarker"),t.exit("resource"),e):n(y)}}function yj(t,e,n){const r=this;return s;function s(c){return h3.call(r,t,o,u,"reference","referenceMarker","referenceString")(c)}function o(c){return r.parser.defined.includes(Nl(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(c):n(c)}function u(c){return n(c)}}function Ej(t,e,n){return r;function r(o){return t.enter("reference"),t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),s}function s(o){return o===93?(t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),t.exit("reference"),e):n(o)}}const _j={name:"labelStartImage",resolveAll:V_.resolveAll,tokenize:bj};function bj(t,e,n){const r=this;return s;function s(c){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(c),t.exit("labelImageMarker"),o}function o(c){return c===91?(t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelImage"),u):n(c)}function u(c){return c===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(c):e(c)}}const Tj={name:"labelStartLink",resolveAll:V_.resolveAll,tokenize:vj};function vj(t,e,n){const r=this;return s;function s(u){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(u),t.exit("labelMarker"),t.exit("labelLink"),o}function o(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(u):e(u)}}const Gy={name:"lineEnding",tokenize:Sj};function Sj(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),sn(t,e,"linePrefix")}}const P0={name:"thematicBreak",tokenize:Aj};function Aj(t,e,n){let r=0,s;return o;function o(f){return t.enter("thematicBreak"),u(f)}function u(f){return s=f,c(f)}function c(f){return f===s?(t.enter("thematicBreakSequence"),d(f)):r>=3&&(f===null||tt(f))?(t.exit("thematicBreak"),e(f)):n(f)}function d(f){return f===s?(t.consume(f),r++,d):(t.exit("thematicBreakSequence"),kt(f)?sn(t,c,"whitespace")(f):c(f))}}const Qr={continuation:{tokenize:Cj},exit:Rj,name:"list",tokenize:Ij},xj={partial:!0,tokenize:Dj},wj={partial:!0,tokenize:Nj};function Ij(t,e,n){const r=this,s=r.events[r.events.length-1];let o=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,u=0;return c;function c(T){const I=r.containerState.type||(T===42||T===43||T===45?"listUnordered":"listOrdered");if(I==="listUnordered"?!r.containerState.marker||T===r.containerState.marker:JE(T)){if(r.containerState.type||(r.containerState.type=I,t.enter(I,{_container:!0})),I==="listUnordered")return t.enter("listItemPrefix"),T===42||T===45?t.check(P0,n,f)(T):f(T);if(!r.interrupt||T===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),d(T)}return n(T)}function d(T){return JE(T)&&++u<10?(t.consume(T),d):(!r.interrupt||u<2)&&(r.containerState.marker?T===r.containerState.marker:T===41||T===46)?(t.exit("listItemValue"),f(T)):n(T)}function f(T){return t.enter("listItemMarker"),t.consume(T),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||T,t.check(tp,r.interrupt?n:m,t.attempt(xj,_,y))}function m(T){return r.containerState.initialBlankLine=!0,o++,_(T)}function y(T){return kt(T)?(t.enter("listItemPrefixWhitespace"),t.consume(T),t.exit("listItemPrefixWhitespace"),_):n(T)}function _(T){return r.containerState.size=o+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(T)}}function Cj(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(tp,s,o);function s(c){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,sn(t,e,"listItemIndent",r.containerState.size+1)(c)}function o(c){return r.containerState.furtherBlankLines||!kt(c)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,u(c)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(wj,e,u)(c))}function u(c){return r.containerState._closeFlow=!0,r.interrupt=void 0,sn(t,t.attempt(Qr,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function Nj(t,e,n){const r=this;return sn(t,s,"listItemIndent",r.containerState.size+1);function s(o){const u=r.events[r.events.length-1];return u&&u[1].type==="listItemIndent"&&u[2].sliceSerialize(u[1],!0).length===r.containerState.size?e(o):n(o)}}function Rj(t){t.exit(this.containerState.type)}function Dj(t,e,n){const r=this;return sn(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(o){const u=r.events[r.events.length-1];return!kt(o)&&u&&u[1].type==="listItemPrefixWhitespace"?e(o):n(o)}}const $x={name:"setextUnderline",resolveTo:Oj,tokenize:kj};function Oj(t,e){let n=t.length,r,s,o;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!o&&t[n][1].type==="definition"&&(o=n);const u={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",o?(t.splice(s,0,["enter",u,e]),t.splice(o+1,0,["exit",t[r][1],e]),t[r][1].end={...t[o][1].end}):t[r][1]=u,t.push(["exit",u,e]),t}function kj(t,e,n){const r=this;let s;return o;function o(f){let m=r.events.length,y;for(;m--;)if(r.events[m][1].type!=="lineEnding"&&r.events[m][1].type!=="linePrefix"&&r.events[m][1].type!=="content"){y=r.events[m][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||y)?(t.enter("setextHeadingLine"),s=f,u(f)):n(f)}function u(f){return t.enter("setextHeadingLineSequence"),c(f)}function c(f){return f===s?(t.consume(f),c):(t.exit("setextHeadingLineSequence"),kt(f)?sn(t,d,"lineSuffix")(f):d(f))}function d(f){return f===null||tt(f)?(t.exit("setextHeadingLine"),e(f)):n(f)}}const Pj={tokenize:Mj};function Mj(t){const e=this,n=t.attempt(tp,r,t.attempt(this.parser.constructs.flowInitial,s,sn(t,t.attempt(this.parser.constructs.flow,s,t.attempt(HF,s)),"linePrefix")));return n;function r(o){if(o===null){t.consume(o);return}return t.enter("lineEndingBlank"),t.consume(o),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const Lj={resolveAll:m3()},Bj=f3("string"),Uj=f3("text");function f3(t){return{resolveAll:m3(t==="text"?Vj:void 0),tokenize:e};function e(n){const r=this,s=this.parser.constructs[t],o=n.attempt(s,u,c);return u;function u(m){return f(m)?o(m):c(m)}function c(m){if(m===null){n.consume(m);return}return n.enter("data"),n.consume(m),d}function d(m){return f(m)?(n.exit("data"),o(m)):(n.consume(m),d)}function f(m){if(m===null)return!0;const y=s[m];let _=-1;if(y)for(;++_<y.length;){const T=y[_];if(!T.previous||T.previous.call(r,r.previous))return!0}return!1}}}function m3(t){return e;function e(n,r){let s=-1,o;for(;++s<=n.length;)o===void 0?n[s]&&n[s][1].type==="data"&&(o=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==o+2&&(n[o][1].end=n[s-1][1].end,n.splice(o+2,s-o-2),s=o+2),o=void 0);return t?t(n,r):n}}function Vj(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let o=s.length,u=-1,c=0,d;for(;o--;){const f=s[o];if(typeof f=="string"){for(u=f.length;f.charCodeAt(u-1)===32;)c++,u--;if(u)break;u=-1}else if(f===-2)d=!0,c++;else if(f!==-1){o++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(c=0),c){const f={type:n===t.length||d||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?u:r.start._bufferIndex+u,_index:r.start._index+o,line:r.end.line,column:r.end.column-c,offset:r.end.offset-c},end:{...r.end}};r.end={...f.start},r.start.offset===r.end.offset?Object.assign(r,f):(t.splice(n,0,["enter",f,e],["exit",f,e]),n+=2)}n++}return t}const Hj={42:Qr,43:Qr,45:Qr,48:Qr,49:Qr,50:Qr,51:Qr,52:Qr,53:Qr,54:Qr,55:Qr,56:Qr,57:Qr,62:a3},zj={91:YF},Fj={[-2]:Yy,[-1]:Yy,32:Yy},jj={35:WF,42:P0,45:[$x,P0],60:tj,61:$x,95:P0,96:Yx,126:Yx},qj={38:u3,92:o3},Yj={[-5]:Gy,[-4]:Gy,[-3]:Gy,33:_j,38:u3,42:e1,60:[TF,uj],91:Tj,92:[KF,o3],93:V_,95:e1,96:PF},Gj={null:[e1,Lj]},$j={null:[42,95]},Xj={null:[]},Kj=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:$j,contentInitial:zj,disable:Xj,document:Hj,flow:jj,flowInitial:Fj,insideSpan:Gj,string:qj,text:Yj},Symbol.toStringTag,{value:"Module"}));function Qj(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},o=[];let u=[],c=[];const d={attempt:S(q),check:S(B),consume:C,enter:L,exit:M,interrupt:S(B,{interrupt:!0})},f={code:null,containerState:{},defineSkip:N,events:[],now:I,parser:t,previous:null,sliceSerialize:_,sliceStream:T,write:y};let m=e.tokenize.call(f,d);return e.resolveAll&&o.push(e),f;function y(H){return u=zi(u,H),k(),u[u.length-1]!==null?[]:(A(e,0),f.events=U_(o,f.events,f),f.events)}function _(H,z){return Zj(T(H),z)}function T(H){return Wj(u,H)}function I(){const{_bufferIndex:H,_index:z,line:O,column:U,offset:X}=r;return{_bufferIndex:H,_index:z,line:O,column:U,offset:X}}function N(H){s[H.line]=H.column,V()}function k(){let H;for(;r._index<u.length;){const z=u[r._index];if(typeof z=="string")for(H=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===H&&r._bufferIndex<z.length;)x(z.charCodeAt(r._bufferIndex));else x(z)}}function x(H){m=m(H)}function C(H){tt(H)?(r.line++,r.column=1,r.offset+=H===-3?2:1,V()):H!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===u[r._index].length&&(r._bufferIndex=-1,r._index++)),f.previous=H}function L(H,z){const O=z||{};return O.type=H,O.start=I(),f.events.push(["enter",O,f]),c.push(O),O}function M(H){const z=c.pop();return z.end=I(),f.events.push(["exit",z,f]),z}function q(H,z){A(H,z.from)}function B(H,z){z.restore()}function S(H,z){return O;function O(U,X,Y){let W,se,re,w;return Array.isArray(U)?ae(U):"tokenize"in U?ae([U]):ee(U);function ee(Te){return Ve;function Ve(Ie){const Me=Ie!==null&&Te[Ie],ze=Ie!==null&&Te.null,Je=[...Array.isArray(Me)?Me:Me?[Me]:[],...Array.isArray(ze)?ze:ze?[ze]:[]];return ae(Je)(Ie)}}function ae(Te){return W=Te,se=0,Te.length===0?Y:j(Te[se])}function j(Te){return Ve;function Ve(Ie){return w=D(),re=Te,Te.partial||(f.currentConstruct=Te),Te.name&&f.parser.constructs.disable.null.includes(Te.name)?Ce():Te.tokenize.call(z?Object.assign(Object.create(f),z):f,d,ge,Ce)(Ie)}}function ge(Te){return H(re,w),X}function Ce(Te){return w.restore(),++se<W.length?j(W[se]):Y}}}function A(H,z){H.resolveAll&&!o.includes(H)&&o.push(H),H.resolve&&Ls(f.events,z,f.events.length-z,H.resolve(f.events.slice(z),f)),H.resolveTo&&(f.events=H.resolveTo(f.events,f))}function D(){const H=I(),z=f.previous,O=f.currentConstruct,U=f.events.length,X=Array.from(c);return{from:U,restore:Y};function Y(){r=H,f.previous=z,f.currentConstruct=O,f.events.length=U,c=X,V()}}function V(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function Wj(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,o=e.end._bufferIndex;let u;if(n===s)u=[t[n].slice(r,o)];else{if(u=t.slice(n,s),r>-1){const c=u[0];typeof c=="string"?u[0]=c.slice(r):u.shift()}o>0&&u.push(t[s].slice(0,o))}return u}function Zj(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const o=t[n];let u;if(typeof o=="string")u=o;else switch(o){case-5:{u="\r";break}case-4:{u=`
`;break}case-3:{u=`\r
`;break}case-2:{u=e?" ":"	";break}case-1:{if(!e&&s)continue;u=" ";break}default:u=String.fromCharCode(o)}s=o===-2,r.push(u)}return r.join("")}function Jj(t){const r={constructs:aF([Kj,...(t||{}).extensions||[]]),content:s(mF),defined:[],document:s(gF),flow:s(Pj),lazy:{},string:s(Bj),text:s(Uj)};return r;function s(o){return u;function u(c){return Qj(r,o,c)}}}function eq(t){for(;!l3(t););return t}const Xx=/[\0\t\n\r]/g;function tq(){let t=1,e="",n=!0,r;return s;function s(o,u,c){const d=[];let f,m,y,_,T;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(u||void 0).decode(o)),y=0,e="",n&&(o.charCodeAt(0)===65279&&y++,n=void 0);y<o.length;){if(Xx.lastIndex=y,f=Xx.exec(o),_=f&&f.index!==void 0?f.index:o.length,T=o.charCodeAt(_),!f){e=o.slice(y);break}if(T===10&&y===_&&r)d.push(-3),r=void 0;else switch(r&&(d.push(-5),r=void 0),y<_&&(d.push(o.slice(y,_)),t+=_-y),T){case 0:{d.push(65533),t++;break}case 9:{for(m=Math.ceil(t/4)*4,d.push(-2);t++<m;)d.push(-1);break}case 10:{d.push(-4),t=1;break}default:r=!0,t=1}y=_+1}return c&&(r&&d.push(-5),e&&d.push(e),d.push(null)),d}}const nq=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function rq(t){return t.replace(nq,iq)}function iq(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),o=s===120||s===88;return s3(n.slice(o?2:1),o?16:10)}return B_(n)||t}const p3={}.hasOwnProperty;function sq(t,e,n){return typeof e!="string"&&(n=e,e=void 0),aq(n)(eq(Jj(n).document().write(tq()(t,e,!0))))}function aq(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(cn),autolinkProtocol:D,autolinkEmail:D,atxHeading:o(Dt),blockQuote:o(ze),characterEscape:D,characterReference:D,codeFenced:o(Je),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:o(Je,u),codeText:o(an,u),codeTextData:D,data:D,codeFlowValue:D,definition:o(Jt),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:o(on),hardBreakEscape:o(Dn),hardBreakTrailing:o(Dn),htmlFlow:o(Qe,u),htmlFlowData:D,htmlText:o(Qe,u),htmlTextData:D,image:o(qe),label:u,link:o(cn),listItem:o(Hn),listItemValue:_,listOrdered:o(Vn,y),listUnordered:o(Vn),paragraph:o(Kn),reference:j,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:o(Dt),strong:o(zn),thematicBreak:o(ur)},exit:{atxHeading:d(),atxHeadingSequence:q,autolink:d(),autolinkEmail:Me,autolinkProtocol:Ie,blockQuote:d(),characterEscapeValue:V,characterReferenceMarkerHexadecimal:Ce,characterReferenceMarkerNumeric:Ce,characterReferenceValue:Te,characterReference:Ve,codeFenced:d(k),codeFencedFence:N,codeFencedFenceInfo:T,codeFencedFenceMeta:I,codeFlowValue:V,codeIndented:d(x),codeText:d(X),codeTextData:V,data:V,definition:d(),definitionDestinationString:M,definitionLabelString:C,definitionTitleString:L,emphasis:d(),hardBreakEscape:d(z),hardBreakTrailing:d(z),htmlFlow:d(O),htmlFlowData:V,htmlText:d(U),htmlTextData:V,image:d(W),label:re,labelText:se,lineEnding:H,link:d(Y),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:ge,resourceDestinationString:w,resourceTitleString:ee,resource:ae,setextHeading:d(A),setextHeadingLineSequence:S,setextHeadingText:B,strong:d(),thematicBreak:d()}};g3(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(de){let ve={type:"root",children:[]};const He={stack:[ve],tokenStack:[],config:e,enter:c,exit:f,buffer:u,resume:m,data:n},Ye=[];let ut=-1;for(;++ut<de.length;)if(de[ut][1].type==="listOrdered"||de[ut][1].type==="listUnordered")if(de[ut][0]==="enter")Ye.push(ut);else{const Tt=Ye.pop();ut=s(de,Tt,ut)}for(ut=-1;++ut<de.length;){const Tt=e[de[ut][0]];p3.call(Tt,de[ut][1].type)&&Tt[de[ut][1].type].call(Object.assign({sliceSerialize:de[ut][2].sliceSerialize},He),de[ut][1])}if(He.tokenStack.length>0){const Tt=He.tokenStack[He.tokenStack.length-1];(Tt[1]||Kx).call(He,void 0,Tt[0])}for(ve.position={start:Xa(de.length>0?de[0][1].start:{line:1,column:1,offset:0}),end:Xa(de.length>0?de[de.length-2][1].end:{line:1,column:1,offset:0})},ut=-1;++ut<e.transforms.length;)ve=e.transforms[ut](ve)||ve;return ve}function s(de,ve,He){let Ye=ve-1,ut=-1,Tt=!1,Ht,zt,Ft,vt;for(;++Ye<=He;){const lt=de[Ye];switch(lt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{lt[0]==="enter"?ut++:ut--,vt=void 0;break}case"lineEndingBlank":{lt[0]==="enter"&&(Ht&&!vt&&!ut&&!Ft&&(Ft=Ye),vt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:vt=void 0}if(!ut&&lt[0]==="enter"&&lt[1].type==="listItemPrefix"||ut===-1&&lt[0]==="exit"&&(lt[1].type==="listUnordered"||lt[1].type==="listOrdered")){if(Ht){let Wt=Ye;for(zt=void 0;Wt--;){const Gt=de[Wt];if(Gt[1].type==="lineEnding"||Gt[1].type==="lineEndingBlank"){if(Gt[0]==="exit")continue;zt&&(de[zt][1].type="lineEndingBlank",Tt=!0),Gt[1].type="lineEnding",zt=Wt}else if(!(Gt[1].type==="linePrefix"||Gt[1].type==="blockQuotePrefix"||Gt[1].type==="blockQuotePrefixWhitespace"||Gt[1].type==="blockQuoteMarker"||Gt[1].type==="listItemIndent"))break}Ft&&(!zt||Ft<zt)&&(Ht._spread=!0),Ht.end=Object.assign({},zt?de[zt][1].start:lt[1].end),de.splice(zt||Ye,0,["exit",Ht,lt[2]]),Ye++,He++}if(lt[1].type==="listItemPrefix"){const Wt={type:"listItem",_spread:!1,start:Object.assign({},lt[1].start),end:void 0};Ht=Wt,de.splice(Ye,0,["enter",Wt,lt[2]]),Ye++,He++,Ft=void 0,vt=!0}}}return de[ve][1]._spread=Tt,He}function o(de,ve){return He;function He(Ye){c.call(this,de(Ye),Ye),ve&&ve.call(this,Ye)}}function u(){this.stack.push({type:"fragment",children:[]})}function c(de,ve,He){this.stack[this.stack.length-1].children.push(de),this.stack.push(de),this.tokenStack.push([ve,He||void 0]),de.position={start:Xa(ve.start),end:void 0}}function d(de){return ve;function ve(He){de&&de.call(this,He),f.call(this,He)}}function f(de,ve){const He=this.stack.pop(),Ye=this.tokenStack.pop();if(Ye)Ye[0].type!==de.type&&(ve?ve.call(this,de,Ye[0]):(Ye[1]||Kx).call(this,de,Ye[0]));else throw new Error("Cannot close `"+de.type+"` ("+Lh({start:de.start,end:de.end})+"): its not open");He.position.end=Xa(de.end)}function m(){return iF(this.stack.pop())}function y(){this.data.expectingFirstListItemValue=!0}function _(de){if(this.data.expectingFirstListItemValue){const ve=this.stack[this.stack.length-2];ve.start=Number.parseInt(this.sliceSerialize(de),10),this.data.expectingFirstListItemValue=void 0}}function T(){const de=this.resume(),ve=this.stack[this.stack.length-1];ve.lang=de}function I(){const de=this.resume(),ve=this.stack[this.stack.length-1];ve.meta=de}function N(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function k(){const de=this.resume(),ve=this.stack[this.stack.length-1];ve.value=de.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function x(){const de=this.resume(),ve=this.stack[this.stack.length-1];ve.value=de.replace(/(\r?\n|\r)$/g,"")}function C(de){const ve=this.resume(),He=this.stack[this.stack.length-1];He.label=ve,He.identifier=Nl(this.sliceSerialize(de)).toLowerCase()}function L(){const de=this.resume(),ve=this.stack[this.stack.length-1];ve.title=de}function M(){const de=this.resume(),ve=this.stack[this.stack.length-1];ve.url=de}function q(de){const ve=this.stack[this.stack.length-1];if(!ve.depth){const He=this.sliceSerialize(de).length;ve.depth=He}}function B(){this.data.setextHeadingSlurpLineEnding=!0}function S(de){const ve=this.stack[this.stack.length-1];ve.depth=this.sliceSerialize(de).codePointAt(0)===61?1:2}function A(){this.data.setextHeadingSlurpLineEnding=void 0}function D(de){const He=this.stack[this.stack.length-1].children;let Ye=He[He.length-1];(!Ye||Ye.type!=="text")&&(Ye=An(),Ye.position={start:Xa(de.start),end:void 0},He.push(Ye)),this.stack.push(Ye)}function V(de){const ve=this.stack.pop();ve.value+=this.sliceSerialize(de),ve.position.end=Xa(de.end)}function H(de){const ve=this.stack[this.stack.length-1];if(this.data.atHardBreak){const He=ve.children[ve.children.length-1];He.position.end=Xa(de.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ve.type)&&(D.call(this,de),V.call(this,de))}function z(){this.data.atHardBreak=!0}function O(){const de=this.resume(),ve=this.stack[this.stack.length-1];ve.value=de}function U(){const de=this.resume(),ve=this.stack[this.stack.length-1];ve.value=de}function X(){const de=this.resume(),ve=this.stack[this.stack.length-1];ve.value=de}function Y(){const de=this.stack[this.stack.length-1];if(this.data.inReference){const ve=this.data.referenceType||"shortcut";de.type+="Reference",de.referenceType=ve,delete de.url,delete de.title}else delete de.identifier,delete de.label;this.data.referenceType=void 0}function W(){const de=this.stack[this.stack.length-1];if(this.data.inReference){const ve=this.data.referenceType||"shortcut";de.type+="Reference",de.referenceType=ve,delete de.url,delete de.title}else delete de.identifier,delete de.label;this.data.referenceType=void 0}function se(de){const ve=this.sliceSerialize(de),He=this.stack[this.stack.length-2];He.label=rq(ve),He.identifier=Nl(ve).toLowerCase()}function re(){const de=this.stack[this.stack.length-1],ve=this.resume(),He=this.stack[this.stack.length-1];if(this.data.inReference=!0,He.type==="link"){const Ye=de.children;He.children=Ye}else He.alt=ve}function w(){const de=this.resume(),ve=this.stack[this.stack.length-1];ve.url=de}function ee(){const de=this.resume(),ve=this.stack[this.stack.length-1];ve.title=de}function ae(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function ge(de){const ve=this.resume(),He=this.stack[this.stack.length-1];He.label=ve,He.identifier=Nl(this.sliceSerialize(de)).toLowerCase(),this.data.referenceType="full"}function Ce(de){this.data.characterReferenceType=de.type}function Te(de){const ve=this.sliceSerialize(de),He=this.data.characterReferenceType;let Ye;He?(Ye=s3(ve,He==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ye=B_(ve);const ut=this.stack[this.stack.length-1];ut.value+=Ye}function Ve(de){const ve=this.stack.pop();ve.position.end=Xa(de.end)}function Ie(de){V.call(this,de);const ve=this.stack[this.stack.length-1];ve.url=this.sliceSerialize(de)}function Me(de){V.call(this,de);const ve=this.stack[this.stack.length-1];ve.url="mailto:"+this.sliceSerialize(de)}function ze(){return{type:"blockquote",children:[]}}function Je(){return{type:"code",lang:null,meta:null,value:""}}function an(){return{type:"inlineCode",value:""}}function Jt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function on(){return{type:"emphasis",children:[]}}function Dt(){return{type:"heading",depth:0,children:[]}}function Dn(){return{type:"break"}}function Qe(){return{type:"html",value:""}}function qe(){return{type:"image",title:null,url:"",alt:null}}function cn(){return{type:"link",title:null,url:"",children:[]}}function Vn(de){return{type:"list",ordered:de.type==="listOrdered",start:null,spread:de._spread,children:[]}}function Hn(de){return{type:"listItem",spread:de._spread,checked:null,children:[]}}function Kn(){return{type:"paragraph",children:[]}}function zn(){return{type:"strong",children:[]}}function An(){return{type:"text",value:""}}function ur(){return{type:"thematicBreak"}}}function Xa(t){return{line:t.line,column:t.column,offset:t.offset}}function g3(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?g3(t,r):oq(t,r)}}function oq(t,e){let n;for(n in e)if(p3.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function Kx(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Lh({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Lh({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Lh({start:e.start,end:e.end})+") is still open")}function uq(t){const e=this;e.parser=n;function n(r){return sq(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function lq(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function cq(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function hq(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function dq(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function fq(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function mq(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),s=tc(r.toLowerCase()),o=t.footnoteOrder.indexOf(r);let u,c=t.footnoteCounts.get(r);c===void 0?(c=0,t.footnoteOrder.push(r),u=t.footnoteOrder.length):u=o+1,c+=1,t.footnoteCounts.set(r,c);const d={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(u)}]};t.patch(e,d);const f={type:"element",tagName:"sup",properties:{},children:[d]};return t.patch(e,f),t.applyData(e,f)}function pq(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function gq(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function y3(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const s=t.all(e),o=s[0];o&&o.type==="text"?o.value="["+o.value:s.unshift({type:"text",value:"["});const u=s[s.length-1];return u&&u.type==="text"?u.value+=r:s.push({type:"text",value:r}),s}function yq(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return y3(t,e);const s={src:tc(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const o={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,o),t.applyData(e,o)}function Eq(t,e){const n={src:tc(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function _q(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function bq(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return y3(t,e);const s={href:tc(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const o={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,o),t.applyData(e,o)}function Tq(t,e){const n={href:tc(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function vq(t,e,n){const r=t.all(e),s=n?Sq(n):E3(e),o={},u=[];if(typeof e.checked=="boolean"){const m=r[0];let y;m&&m.type==="element"&&m.tagName==="p"?y=m:(y={type:"element",tagName:"p",properties:{},children:[]},r.unshift(y)),y.children.length>0&&y.children.unshift({type:"text",value:" "}),y.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let c=-1;for(;++c<r.length;){const m=r[c];(s||c!==0||m.type!=="element"||m.tagName!=="p")&&u.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!s?u.push(...m.children):u.push(m)}const d=r[r.length-1];d&&(s||d.type!=="element"||d.tagName!=="p")&&u.push({type:"text",value:`
`});const f={type:"element",tagName:"li",properties:o,children:u};return t.patch(e,f),t.applyData(e,f)}function Sq(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=E3(n[r])}return e}function E3(t){const e=t.spread;return e??t.children.length>1}function Aq(t,e){const n={},r=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<r.length;){const u=r[s];if(u.type==="element"&&u.tagName==="li"&&u.properties&&Array.isArray(u.properties.className)&&u.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,o),t.applyData(e,o)}function xq(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function wq(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function Iq(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Cq(t,e){const n=t.all(e),r=n.shift(),s=[];if(r){const u={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],u),s.push(u)}if(n.length>0){const u={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},c=Hs(e.children[1]),d=ep(e.children[e.children.length-1]);c&&d&&(u.position={start:c,end:d}),s.push(u)}const o={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,o),t.applyData(e,o)}function Nq(t,e,n){const r=n?n.children:void 0,o=(r?r.indexOf(e):1)===0?"th":"td",u=n&&n.type==="table"?n.align:void 0,c=u?u.length:e.children.length;let d=-1;const f=[];for(;++d<c;){const y=e.children[d],_={},T=u?u[d]:void 0;T&&(_.align=T);let I={type:"element",tagName:o,properties:_,children:[]};y&&(I.children=t.all(y),t.patch(y,I),I=t.applyData(y,I)),f.push(I)}const m={type:"element",tagName:"tr",properties:{},children:t.wrap(f,!0)};return t.patch(e,m),t.applyData(e,m)}function Rq(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const Qx=9,Wx=32;function Dq(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),s=0;const o=[];for(;r;)o.push(Zx(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(e);return o.push(Zx(e.slice(s),s>0,!1)),o.join("")}function Zx(t,e,n){let r=0,s=t.length;if(e){let o=t.codePointAt(r);for(;o===Qx||o===Wx;)r++,o=t.codePointAt(r)}if(n){let o=t.codePointAt(s-1);for(;o===Qx||o===Wx;)s--,o=t.codePointAt(s-1)}return s>r?t.slice(r,s):""}function Oq(t,e){const n={type:"text",value:Dq(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function kq(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const Pq={blockquote:lq,break:cq,code:hq,delete:dq,emphasis:fq,footnoteReference:mq,heading:pq,html:gq,imageReference:yq,image:Eq,inlineCode:_q,linkReference:bq,link:Tq,listItem:vq,list:Aq,paragraph:xq,root:wq,strong:Iq,table:Cq,tableCell:Rq,tableRow:Nq,text:Oq,thematicBreak:kq,toml:g0,yaml:g0,definition:g0,footnoteDefinition:g0};function g0(){}const _3=-1,np=0,Uh=1,gm=2,H_=3,z_=4,F_=5,j_=6,b3=7,T3=8,Jx=typeof self=="object"?self:globalThis,Mq=(t,e)=>{const n=(s,o)=>(t.set(o,s),s),r=s=>{if(t.has(s))return t.get(s);const[o,u]=e[s];switch(o){case np:case _3:return n(u,s);case Uh:{const c=n([],s);for(const d of u)c.push(r(d));return c}case gm:{const c=n({},s);for(const[d,f]of u)c[r(d)]=r(f);return c}case H_:return n(new Date(u),s);case z_:{const{source:c,flags:d}=u;return n(new RegExp(c,d),s)}case F_:{const c=n(new Map,s);for(const[d,f]of u)c.set(r(d),r(f));return c}case j_:{const c=n(new Set,s);for(const d of u)c.add(r(d));return c}case b3:{const{name:c,message:d}=u;return n(new Jx[c](d),s)}case T3:return n(BigInt(u),s);case"BigInt":return n(Object(BigInt(u)),s);case"ArrayBuffer":return n(new Uint8Array(u).buffer,u);case"DataView":{const{buffer:c}=new Uint8Array(u);return n(new DataView(c),u)}}return n(new Jx[o](u),s)};return r},ew=t=>Mq(new Map,t)(0),hl="",{toString:Lq}={},{keys:Bq}=Object,yh=t=>{const e=typeof t;if(e!=="object"||!t)return[np,e];const n=Lq.call(t).slice(8,-1);switch(n){case"Array":return[Uh,hl];case"Object":return[gm,hl];case"Date":return[H_,hl];case"RegExp":return[z_,hl];case"Map":return[F_,hl];case"Set":return[j_,hl];case"DataView":return[Uh,n]}return n.includes("Array")?[Uh,n]:n.includes("Error")?[b3,n]:[gm,n]},y0=([t,e])=>t===np&&(e==="function"||e==="symbol"),Uq=(t,e,n,r)=>{const s=(u,c)=>{const d=r.push(u)-1;return n.set(c,d),d},o=u=>{if(n.has(u))return n.get(u);let[c,d]=yh(u);switch(c){case np:{let m=u;switch(d){case"bigint":c=T3,m=u.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+d);m=null;break;case"undefined":return s([_3],u)}return s([c,m],u)}case Uh:{if(d){let _=u;return d==="DataView"?_=new Uint8Array(u.buffer):d==="ArrayBuffer"&&(_=new Uint8Array(u)),s([d,[..._]],u)}const m=[],y=s([c,m],u);for(const _ of u)m.push(o(_));return y}case gm:{if(d)switch(d){case"BigInt":return s([d,u.toString()],u);case"Boolean":case"Number":case"String":return s([d,u.valueOf()],u)}if(e&&"toJSON"in u)return o(u.toJSON());const m=[],y=s([c,m],u);for(const _ of Bq(u))(t||!y0(yh(u[_])))&&m.push([o(_),o(u[_])]);return y}case H_:return s([c,u.toISOString()],u);case z_:{const{source:m,flags:y}=u;return s([c,{source:m,flags:y}],u)}case F_:{const m=[],y=s([c,m],u);for(const[_,T]of u)(t||!(y0(yh(_))||y0(yh(T))))&&m.push([o(_),o(T)]);return y}case j_:{const m=[],y=s([c,m],u);for(const _ of u)(t||!y0(yh(_)))&&m.push(o(_));return y}}const{message:f}=u;return s([c,{name:d,message:f}],u)};return o},tw=(t,{json:e,lossy:n}={})=>{const r=[];return Uq(!(e||n),!!e,new Map,r)(t),r},jl=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?ew(tw(t,e)):structuredClone(t):(t,e)=>ew(tw(t,e));function Vq(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function Hq(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function zq(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||Vq,r=t.options.footnoteBackLabel||Hq,s=t.options.footnoteLabel||"Footnotes",o=t.options.footnoteLabelTagName||"h2",u=t.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let d=-1;for(;++d<t.footnoteOrder.length;){const f=t.footnoteById.get(t.footnoteOrder[d]);if(!f)continue;const m=t.all(f),y=String(f.identifier).toUpperCase(),_=tc(y.toLowerCase());let T=0;const I=[],N=t.footnoteCounts.get(y);for(;N!==void 0&&++T<=N;){I.length>0&&I.push({type:"text",value:" "});let C=typeof n=="string"?n:n(d,T);typeof C=="string"&&(C={type:"text",value:C}),I.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+_+(T>1?"-"+T:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(d,T),className:["data-footnote-backref"]},children:Array.isArray(C)?C:[C]})}const k=m[m.length-1];if(k&&k.type==="element"&&k.tagName==="p"){const C=k.children[k.children.length-1];C&&C.type==="text"?C.value+=" ":k.children.push({type:"text",value:" "}),k.children.push(...I)}else m.push(...I);const x={type:"element",tagName:"li",properties:{id:e+"fn-"+_},children:t.wrap(m,!0)};t.patch(f,x),c.push(x)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...jl(u),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(c,!0)},{type:"text",value:`
`}]}}const v3=function(t){if(t==null)return Yq;if(typeof t=="function")return rp(t);if(typeof t=="object")return Array.isArray(t)?Fq(t):jq(t);if(typeof t=="string")return qq(t);throw new Error("Expected function, string, or object as test")};function Fq(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=v3(t[n]);return rp(r);function r(...s){let o=-1;for(;++o<e.length;)if(e[o].apply(this,s))return!0;return!1}}function jq(t){const e=t;return rp(n);function n(r){const s=r;let o;for(o in t)if(s[o]!==e[o])return!1;return!0}}function qq(t){return rp(e);function e(n){return n&&n.type===t}}function rp(t){return e;function e(n,r,s){return!!(Gq(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function Yq(){return!0}function Gq(t){return t!==null&&typeof t=="object"&&"type"in t}const S3=[],$q=!0,nw=!1,Xq="skip";function Kq(t,e,n,r){let s;typeof e=="function"&&typeof n!="function"?(r=n,n=e):s=e;const o=v3(s),u=r?-1:1;c(t,void 0,[])();function c(d,f,m){const y=d&&typeof d=="object"?d:{};if(typeof y.type=="string"){const T=typeof y.tagName=="string"?y.tagName:typeof y.name=="string"?y.name:void 0;Object.defineProperty(_,"name",{value:"node ("+(d.type+(T?"<"+T+">":""))+")"})}return _;function _(){let T=S3,I,N,k;if((!e||o(d,f,m[m.length-1]||void 0))&&(T=Qq(n(d,m)),T[0]===nw))return T;if("children"in d&&d.children){const x=d;if(x.children&&T[0]!==Xq)for(N=(r?x.children.length:-1)+u,k=m.concat(x);N>-1&&N<x.children.length;){const C=x.children[N];if(I=c(C,N,k)(),I[0]===nw)return I;N=typeof I[1]=="number"?I[1]:N+u}}return T}}}function Qq(t){return Array.isArray(t)?t:typeof t=="number"?[$q,t]:t==null?S3:[t]}function q_(t,e,n,r){let s,o,u;typeof e=="function"&&typeof n!="function"?(o=void 0,u=e,s=n):(o=e,u=n,s=r),Kq(t,o,c,s);function c(d,f){const m=f[f.length-1],y=m?m.children.indexOf(d):void 0;return u(d,y,m)}}const t1={}.hasOwnProperty,Wq={};function Zq(t,e){const n=e||Wq,r=new Map,s=new Map,o=new Map,u={...Pq,...n.handlers},c={all:f,applyData:eY,definitionById:r,footnoteById:s,footnoteCounts:o,footnoteOrder:[],handlers:u,one:d,options:n,patch:Jq,wrap:nY};return q_(t,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const y=m.type==="definition"?r:s,_=String(m.identifier).toUpperCase();y.has(_)||y.set(_,m)}}),c;function d(m,y){const _=m.type,T=c.handlers[_];if(t1.call(c.handlers,_)&&T)return T(c,m,y);if(c.options.passThrough&&c.options.passThrough.includes(_)){if("children"in m){const{children:N,...k}=m,x=jl(k);return x.children=c.all(m),x}return jl(m)}return(c.options.unknownHandler||tY)(c,m,y)}function f(m){const y=[];if("children"in m){const _=m.children;let T=-1;for(;++T<_.length;){const I=c.one(_[T],m);if(I){if(T&&_[T-1].type==="break"&&(!Array.isArray(I)&&I.type==="text"&&(I.value=rw(I.value)),!Array.isArray(I)&&I.type==="element")){const N=I.children[0];N&&N.type==="text"&&(N.value=rw(N.value))}Array.isArray(I)?y.push(...I):y.push(I)}}}return y}}function Jq(t,e){t.position&&(e.position=Lz(t))}function eY(t,e){let n=e;if(t&&t.data){const r=t.data.hName,s=t.data.hChildren,o=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const u="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:u}}n.type==="element"&&o&&Object.assign(n.properties,jl(o)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function tY(t,e){const n=e.data||{},r="value"in e&&!(t1.call(n,"hProperties")||t1.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function nY(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function rw(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function iw(t,e){const n=Zq(t,e),r=n.one(t,void 0),s=zq(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&o.children.push({type:"text",value:`
`},s),o}function rY(t,e){return t&&"run"in t?async function(n,r){const s=iw(n,{file:r,...e});await t.run(s,r)}:function(n,r){return iw(n,{file:r,...t||e})}}function sw(t){if(t)throw t}var $y,aw;function iY(){if(aw)return $y;aw=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(f){return typeof Array.isArray=="function"?Array.isArray(f):e.call(f)==="[object Array]"},o=function(f){if(!f||e.call(f)!=="[object Object]")return!1;var m=t.call(f,"constructor"),y=f.constructor&&f.constructor.prototype&&t.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!m&&!y)return!1;var _;for(_ in f);return typeof _>"u"||t.call(f,_)},u=function(f,m){n&&m.name==="__proto__"?n(f,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):f[m.name]=m.newValue},c=function(f,m){if(m==="__proto__")if(t.call(f,m)){if(r)return r(f,m).value}else return;return f[m]};return $y=function d(){var f,m,y,_,T,I,N=arguments[0],k=1,x=arguments.length,C=!1;for(typeof N=="boolean"&&(C=N,N=arguments[1]||{},k=2),(N==null||typeof N!="object"&&typeof N!="function")&&(N={});k<x;++k)if(f=arguments[k],f!=null)for(m in f)y=c(N,m),_=c(f,m),N!==_&&(C&&_&&(o(_)||(T=s(_)))?(T?(T=!1,I=y&&s(y)?y:[]):I=y&&o(y)?y:{},u(N,{name:m,newValue:d(C,I,_)})):typeof _<"u"&&u(N,{name:m,newValue:_}));return N},$y}var sY=iY();const Xy=bm(sY);function n1(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function aY(){const t=[],e={run:n,use:r};return e;function n(...s){let o=-1;const u=s.pop();if(typeof u!="function")throw new TypeError("Expected function as last argument, not "+u);c(null,...s);function c(d,...f){const m=t[++o];let y=-1;if(d){u(d);return}for(;++y<s.length;)(f[y]===null||f[y]===void 0)&&(f[y]=s[y]);s=f,m?oY(m,c)(...f):u(null,...f)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function oY(t,e){let n;return r;function r(...u){const c=t.length>u.length;let d;c&&u.push(s);try{d=t.apply(this,u)}catch(f){const m=f;if(c&&n)throw m;return s(m)}c||(d&&d.then&&typeof d.then=="function"?d.then(o,s):d instanceof Error?s(d):o(d))}function s(u,...c){n||(n=!0,e(u,...c))}function o(u){s(null,u)}}const As={basename:uY,dirname:lY,extname:cY,join:hY,sep:"/"};function uY(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Rd(t);let n=0,r=-1,s=t.length,o;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(o){n=s+1;break}}else r<0&&(o=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let u=-1,c=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(o){n=s+1;break}}else u<0&&(o=!0,u=s+1),c>-1&&(t.codePointAt(s)===e.codePointAt(c--)?c<0&&(r=s):(c=-1,r=u));return n===r?r=u:r<0&&(r=t.length),t.slice(n,r)}function lY(t){if(Rd(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function cY(t){Rd(t);let e=t.length,n=-1,r=0,s=-1,o=0,u;for(;e--;){const c=t.codePointAt(e);if(c===47){if(u){r=e+1;break}continue}n<0&&(u=!0,n=e+1),c===46?s<0?s=e:o!==1&&(o=1):s>-1&&(o=-1)}return s<0||n<0||o===0||o===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function hY(...t){let e=-1,n;for(;++e<t.length;)Rd(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":dY(n)}function dY(t){Rd(t);const e=t.codePointAt(0)===47;let n=fY(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function fY(t,e){let n="",r=0,s=-1,o=0,u=-1,c,d;for(;++u<=t.length;){if(u<t.length)c=t.codePointAt(u);else{if(c===47)break;c=47}if(c===47){if(!(s===u-1||o===1))if(s!==u-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(d=n.lastIndexOf("/"),d!==n.length-1){d<0?(n="",r=0):(n=n.slice(0,d),r=n.length-1-n.lastIndexOf("/")),s=u,o=0;continue}}else if(n.length>0){n="",r=0,s=u,o=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,u):n=t.slice(s+1,u),r=u-s-1;s=u,o=0}else c===46&&o>-1?o++:o=-1}return n}function Rd(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const mY={cwd:pY};function pY(){return"/"}function r1(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function gY(t){if(typeof t=="string")t=new URL(t);else if(!r1(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return yY(t)}function yY(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const Ky=["history","path","basename","stem","extname","dirname"];class A3{constructor(e){let n;e?r1(e)?n={path:e}:typeof e=="string"||EY(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":mY.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Ky.length;){const o=Ky[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let s;for(s in n)Ky.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?As.basename(this.path):void 0}set basename(e){Wy(e,"basename"),Qy(e,"basename"),this.path=As.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?As.dirname(this.path):void 0}set dirname(e){ow(this.basename,"dirname"),this.path=As.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?As.extname(this.path):void 0}set extname(e){if(Qy(e,"extname"),ow(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=As.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){r1(e)&&(e=gY(e)),Wy(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?As.basename(this.path,this.extname):void 0}set stem(e){Wy(e,"stem"),Qy(e,"stem"),this.path=As.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new Nr(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Qy(t,e){if(t&&t.includes(As.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+As.sep+"`")}function Wy(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function ow(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function EY(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const _Y=function(t){const r=this.constructor.prototype,s=r[t],o=function(){return s.apply(o,arguments)};return Object.setPrototypeOf(o,r),o},bY={}.hasOwnProperty;class Y_ extends _Y{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=aY()}copy(){const e=new Y_;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(Xy(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(eE("data",this.frozen),this.namespace[e]=n,this):bY.call(this.namespace,e)&&this.namespace[e]||void 0:e?(eE("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(e,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=E0(e),r=this.parser||this.Parser;return Zy("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),Zy("process",this.parser||this.Parser),Jy("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(o,u){const c=E0(e),d=r.parse(c);r.run(d,c,function(m,y,_){if(m||!y||!_)return f(m);const T=y,I=r.stringify(T,_);SY(I)?_.value=I:_.result=I,f(m,_)});function f(m,y){m||!y?u(m):o?o(y):n(void 0,y)}}}processSync(e){let n=!1,r;return this.freeze(),Zy("processSync",this.parser||this.Parser),Jy("processSync",this.compiler||this.Compiler),this.process(e,s),lw("processSync","process",n),r;function s(o,u){n=!0,sw(o),r=u}}run(e,n,r){uw(e),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(u,c){const d=E0(n);s.run(e,d,f);function f(m,y,_){const T=y||e;m?c(m):u?u(T):r(void 0,T,_)}}}runSync(e,n){let r=!1,s;return this.run(e,n,o),lw("runSync","run",r),s;function o(u,c){sw(u),s=c,r=!0}}stringify(e,n){this.freeze();const r=E0(n),s=this.compiler||this.Compiler;return Jy("stringify",s),uw(e),s(e,r)}use(e,...n){const r=this.attachers,s=this.namespace;if(eE("use",this.frozen),e!=null)if(typeof e=="function")d(e,n);else if(typeof e=="object")Array.isArray(e)?c(e):u(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(f){if(typeof f=="function")d(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[m,...y]=f;d(m,y)}else u(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function u(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(f.plugins),f.settings&&(s.settings=Xy(!0,s.settings,f.settings))}function c(f){let m=-1;if(f!=null)if(Array.isArray(f))for(;++m<f.length;){const y=f[m];o(y)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function d(f,m){let y=-1,_=-1;for(;++y<r.length;)if(r[y][0]===f){_=y;break}if(_===-1)r.push([f,...m]);else if(m.length>0){let[T,...I]=m;const N=r[_][1];n1(N)&&n1(T)&&(T=Xy(!0,N,T)),r[_]=[f,T,...I]}}}}const TY=new Y_().freeze();function Zy(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Jy(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function eE(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function uw(t){if(!n1(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function lw(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function E0(t){return vY(t)?t:new A3(t)}function vY(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function SY(t){return typeof t=="string"||AY(t)}function AY(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const xY="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",cw=[],hw={allowDangerousHtml:!0},wY=/^(https?|ircs?|mailto|xmpp)$/i,IY=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function CY(t){const e=NY(t),n=RY(t);return DY(e.runSync(e.parse(n),n),t)}function NY(t){const e=t.rehypePlugins||cw,n=t.remarkPlugins||cw,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...hw}:hw;return TY().use(uq).use(n).use(rY,r).use(e)}function RY(t){const e=t.children||"",n=new A3;return typeof e=="string"&&(n.value=e),n}function DY(t,e){const n=e.allowedElements,r=e.allowElement,s=e.components,o=e.disallowedElements,u=e.skipHtml,c=e.unwrapDisallowed,d=e.urlTransform||OY;for(const m of IY)Object.hasOwn(e,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+xY+m.id,void 0);return q_(t,f),zz(t,{Fragment:F.Fragment,components:s,ignoreInvalidStyle:!0,jsx:F.jsx,jsxs:F.jsxs,passKeys:!0,passNode:!0});function f(m,y,_){if(m.type==="raw"&&_&&typeof y=="number")return u?_.children.splice(y,1):_.children[y]={type:"text",value:m.value},y;if(m.type==="element"){let T;for(T in qy)if(Object.hasOwn(qy,T)&&Object.hasOwn(m.properties,T)){const I=m.properties[T],N=qy[T];(N===null||N.includes(m.tagName))&&(m.properties[T]=d(String(I||""),T,m))}}if(m.type==="element"){let T=n?!n.includes(m.tagName):o?o.includes(m.tagName):!1;if(!T&&r&&typeof y=="number"&&(T=!r(m,y,_)),T&&_&&typeof y=="number")return c&&m.children?_.children.splice(y,1,...m.children):_.children.splice(y,1),y}}}function OY(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),s=t.indexOf("/");return e===-1||s!==-1&&e>s||n!==-1&&e>n||r!==-1&&e>r||wY.test(t.slice(0,e))?t:""}const dw=/[#.]/g;function kY(t,e){const n=t||"",r={};let s=0,o,u;for(;s<n.length;){dw.lastIndex=s;const c=dw.exec(n),d=n.slice(s,c?c.index:n.length);d&&(o?o==="#"?r.id=d:Array.isArray(r.className)?r.className.push(d):r.className=[d]:u=d,s+=d.length),c&&(o=c[0],s++)}return{type:"element",tagName:u||e||"div",properties:r,children:[]}}function x3(t,e,n){const r=n?BY(n):void 0;function s(o,u,...c){let d;if(o==null){d={type:"root",children:[]};const f=u;c.unshift(f)}else{d=kY(o,e);const f=d.tagName.toLowerCase(),m=r?r.get(f):void 0;if(d.tagName=m||f,PY(u))c.unshift(u);else for(const[y,_]of Object.entries(u))MY(t,d.properties,y,_)}for(const f of c)i1(d.children,f);return d.type==="element"&&d.tagName==="template"&&(d.content={type:"root",children:d.children},d.children=[]),d}return s}function PY(t){if(t===null||typeof t!="object"||Array.isArray(t))return!0;if(typeof t.type!="string")return!1;const e=t,n=Object.keys(t);for(const r of n){const s=e[r];if(s&&typeof s=="object"){if(!Array.isArray(s))return!0;const o=s;for(const u of o)if(typeof u!="number"&&typeof u!="string")return!0}}return!!("children"in t&&Array.isArray(t.children))}function MY(t,e,n,r){const s=k_(t,n);let o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?s.spaceSeparated?o=Dx(r):s.commaSeparated?o=wx(r):s.commaOrSpaceSeparated?o=Dx(wx(r).join(" ")):o=fw(s,s.property,r):Array.isArray(r)?o=[...r]:o=s.property==="style"?LY(r):String(r);if(Array.isArray(o)){const u=[];for(const c of o)u.push(fw(s,s.property,c));o=u}s.property==="className"&&Array.isArray(e.className)&&(o=e.className.concat(o)),e[s.property]=o}}function i1(t,e){if(e!=null)if(typeof e=="number"||typeof e=="string")t.push({type:"text",value:String(e)});else if(Array.isArray(e))for(const n of e)i1(t,n);else if(typeof e=="object"&&"type"in e)e.type==="root"?i1(t,e.children):t.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function fw(t,e,n){if(typeof n=="string"){if(t.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((t.boolean||t.overloadedBoolean)&&(n===""||ld(n)===ld(e)))return!0}return n}function LY(t){const e=[];for(const[n,r]of Object.entries(t))e.push([n,r].join(": "));return e.join("; ")}function BY(t){const e=new Map;for(const n of t)e.set(n.toLowerCase(),n);return e}const UY=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],VY=x3(Jm,"div"),HY=x3(ec,"g",UY);function zY(t){const e=String(t),n=[];return{toOffset:s,toPoint:r};function r(o){if(typeof o=="number"&&o>-1&&o<=e.length){let u=0;for(;;){let c=n[u];if(c===void 0){const d=mw(e,n[u-1]);c=d===-1?e.length+1:d+1,n[u]=c}if(c>o)return{line:u+1,column:o-(u>0?n[u-1]:0)+1,offset:o};u++}}}function s(o){if(o&&typeof o.line=="number"&&typeof o.column=="number"&&!Number.isNaN(o.line)&&!Number.isNaN(o.column)){for(;n.length<o.line;){const c=n[n.length-1],d=mw(e,c),f=d===-1?e.length+1:d+1;if(c===f)break;n.push(f)}const u=(o.line>1?n[o.line-2]:0)+o.column-1;if(u<n[o.line-1])return u}}}function mw(t,e){const n=t.indexOf("\r",e),r=t.indexOf(`
`,e);return r===-1?n:n===-1||n+1===r?r:n<r?n:r}const iu={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},w3={}.hasOwnProperty,FY=Object.prototype;function jY(t,e){const n=e||{};return G_({file:n.file||void 0,location:!1,schema:n.space==="svg"?ec:Jm,verbose:n.verbose||!1},t)}function G_(t,e){let n;switch(e.nodeName){case"#comment":{const r=e;return n={type:"comment",value:r.data},M0(t,r,n),n}case"#document":case"#document-fragment":{const r=e,s="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:I3(t,e.childNodes),data:{quirksMode:s}},t.file&&t.location){const o=String(t.file),u=zY(o),c=u.toPoint(0),d=u.toPoint(o.length);n.position={start:c,end:d}}return n}case"#documentType":{const r=e;return n={type:"doctype"},M0(t,r,n),n}case"#text":{const r=e;return n={type:"text",value:r.value},M0(t,r,n),n}default:return n=qY(t,e),n}}function I3(t,e){let n=-1;const r=[];for(;++n<e.length;){const s=G_(t,e[n]);r.push(s)}return r}function qY(t,e){const n=t.schema;t.schema=e.namespaceURI===iu.svg?ec:Jm;let r=-1;const s={};for(;++r<e.attrs.length;){const c=e.attrs[r],d=(c.prefix?c.prefix+":":"")+c.name;w3.call(FY,d)||(s[d]=c.value)}const u=(t.schema.space==="svg"?HY:VY)(e.tagName,s,I3(t,e.childNodes));if(M0(t,e,u),u.tagName==="template"){const c=e,d=c.sourceCodeLocation,f=d&&d.startTag&&_l(d.startTag),m=d&&d.endTag&&_l(d.endTag),y=G_(t,c.content);f&&m&&t.file&&(y.position={start:f.end,end:m.start}),u.content=y}return t.schema=n,u}function M0(t,e,n){if("sourceCodeLocation"in e&&e.sourceCodeLocation&&t.file){const r=YY(t,n,e.sourceCodeLocation);r&&(t.location=!0,n.position=r)}}function YY(t,e,n){const r=_l(n);if(e.type==="element"){const s=e.children[e.children.length-1];if(r&&!n.endTag&&s&&s.position&&s.position.end&&(r.end=Object.assign({},s.position.end)),t.verbose){const o={};let u;if(n.attrs)for(u in n.attrs)w3.call(n.attrs,u)&&(o[k_(t.schema,u).property]=_l(n.attrs[u]));n.startTag;const c=_l(n.startTag),d=n.endTag?_l(n.endTag):void 0,f={opening:c};d&&(f.closing=d),f.properties=o,e.data={position:f}}}return r}function _l(t){const e=pw({line:t.startLine,column:t.startCol,offset:t.startOffset}),n=pw({line:t.endLine,column:t.endCol,offset:t.endOffset});return e||n?{start:e,end:n}:void 0}function pw(t){return t.line&&t.column?t:void 0}class Dd{constructor(e,n,r){this.property=e,this.normal=n,r&&(this.space=r)}}Dd.prototype.property={};Dd.prototype.normal={};Dd.prototype.space=null;function C3(t,e){const n={},r={};let s=-1;for(;++s<t.length;)Object.assign(n,t[s].property),Object.assign(r,t[s].normal);return new Dd(n,r,e)}function s1(t){return t.toLowerCase()}class Yi{constructor(e,n){this.property=e,this.attribute=n}}Yi.prototype.space=null;Yi.prototype.boolean=!1;Yi.prototype.booleanish=!1;Yi.prototype.overloadedBoolean=!1;Yi.prototype.number=!1;Yi.prototype.commaSeparated=!1;Yi.prototype.spaceSeparated=!1;Yi.prototype.commaOrSpaceSeparated=!1;Yi.prototype.mustUseProperty=!1;Yi.prototype.defined=!1;let GY=0;const st=Tu(),Bn=Tu(),N3=Tu(),ke=Tu(),rn=Tu(),Rl=Tu(),pi=Tu();function Tu(){return 2**++GY}const a1=Object.freeze(Object.defineProperty({__proto__:null,boolean:st,booleanish:Bn,commaOrSpaceSeparated:pi,commaSeparated:Rl,number:ke,overloadedBoolean:N3,spaceSeparated:rn},Symbol.toStringTag,{value:"Module"})),tE=Object.keys(a1);class $_ extends Yi{constructor(e,n,r,s){let o=-1;if(super(e,n),gw(this,"space",s),typeof r=="number")for(;++o<tE.length;){const u=tE[o];gw(this,tE[o],(r&a1[u])===a1[u])}}}$_.prototype.defined=!0;function gw(t,e,n){n&&(t[e]=n)}const $Y={}.hasOwnProperty;function nc(t){const e={},n={};let r;for(r in t.properties)if($Y.call(t.properties,r)){const s=t.properties[r],o=new $_(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),e[r]=o,n[s1(r)]=r,n[s1(o.attribute)]=r}return new Dd(e,n,t.space)}const R3=nc({space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),D3=nc({space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function O3(t,e){return e in t?t[e]:e}function k3(t,e){return O3(t,e.toLowerCase())}const P3=nc({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:k3,properties:{xmlns:null,xmlnsXLink:null}}),M3=nc({transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Bn,ariaAutoComplete:null,ariaBusy:Bn,ariaChecked:Bn,ariaColCount:ke,ariaColIndex:ke,ariaColSpan:ke,ariaControls:rn,ariaCurrent:null,ariaDescribedBy:rn,ariaDetails:null,ariaDisabled:Bn,ariaDropEffect:rn,ariaErrorMessage:null,ariaExpanded:Bn,ariaFlowTo:rn,ariaGrabbed:Bn,ariaHasPopup:null,ariaHidden:Bn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:rn,ariaLevel:ke,ariaLive:null,ariaModal:Bn,ariaMultiLine:Bn,ariaMultiSelectable:Bn,ariaOrientation:null,ariaOwns:rn,ariaPlaceholder:null,ariaPosInSet:ke,ariaPressed:Bn,ariaReadOnly:Bn,ariaRelevant:null,ariaRequired:Bn,ariaRoleDescription:rn,ariaRowCount:ke,ariaRowIndex:ke,ariaRowSpan:ke,ariaSelected:Bn,ariaSetSize:ke,ariaSort:null,ariaValueMax:ke,ariaValueMin:ke,ariaValueNow:ke,ariaValueText:null,role:null}}),XY=nc({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:k3,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Rl,acceptCharset:rn,accessKey:rn,action:null,allow:null,allowFullScreen:st,allowPaymentRequest:st,allowUserMedia:st,alt:null,as:null,async:st,autoCapitalize:null,autoComplete:rn,autoFocus:st,autoPlay:st,blocking:rn,capture:null,charSet:null,checked:st,cite:null,className:rn,cols:ke,colSpan:null,content:null,contentEditable:Bn,controls:st,controlsList:rn,coords:ke|Rl,crossOrigin:null,data:null,dateTime:null,decoding:null,default:st,defer:st,dir:null,dirName:null,disabled:st,download:N3,draggable:Bn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:st,formTarget:null,headers:rn,height:ke,hidden:st,high:ke,href:null,hrefLang:null,htmlFor:rn,httpEquiv:rn,id:null,imageSizes:null,imageSrcSet:null,inert:st,inputMode:null,integrity:null,is:null,isMap:st,itemId:null,itemProp:rn,itemRef:rn,itemScope:st,itemType:rn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:st,low:ke,manifest:null,max:null,maxLength:ke,media:null,method:null,min:null,minLength:ke,multiple:st,muted:st,name:null,nonce:null,noModule:st,noValidate:st,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:st,optimum:ke,pattern:null,ping:rn,placeholder:null,playsInline:st,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:st,referrerPolicy:null,rel:rn,required:st,reversed:st,rows:ke,rowSpan:ke,sandbox:rn,scope:null,scoped:st,seamless:st,selected:st,shadowRootClonable:st,shadowRootDelegatesFocus:st,shadowRootMode:null,shape:null,size:ke,sizes:null,slot:null,span:ke,spellCheck:Bn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ke,step:null,style:null,tabIndex:ke,target:null,title:null,translate:null,type:null,typeMustMatch:st,useMap:null,value:Bn,width:ke,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:rn,axis:null,background:null,bgColor:null,border:ke,borderColor:null,bottomMargin:ke,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:st,declare:st,event:null,face:null,frame:null,frameBorder:null,hSpace:ke,leftMargin:ke,link:null,longDesc:null,lowSrc:null,marginHeight:ke,marginWidth:ke,noResize:st,noHref:st,noShade:st,noWrap:st,object:null,profile:null,prompt:null,rev:null,rightMargin:ke,rules:null,scheme:null,scrolling:Bn,standby:null,summary:null,text:null,topMargin:ke,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ke,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:st,disableRemotePlayback:st,prefix:null,property:null,results:ke,security:null,unselectable:null}}),KY=nc({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:O3,properties:{about:pi,accentHeight:ke,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ke,amplitude:ke,arabicForm:null,ascent:ke,attributeName:null,attributeType:null,azimuth:ke,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ke,by:null,calcMode:null,capHeight:ke,className:rn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ke,diffuseConstant:ke,direction:null,display:null,dur:null,divisor:ke,dominantBaseline:null,download:st,dx:null,dy:null,edgeMode:null,editable:null,elevation:ke,enableBackground:null,end:null,event:null,exponent:ke,externalResourcesRequired:null,fill:null,fillOpacity:ke,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Rl,g2:Rl,glyphName:Rl,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ke,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ke,horizOriginX:ke,horizOriginY:ke,id:null,ideographic:ke,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ke,k:ke,k1:ke,k2:ke,k3:ke,k4:ke,kernelMatrix:pi,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ke,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ke,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ke,overlineThickness:ke,paintOrder:null,panose1:null,path:null,pathLength:ke,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:rn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ke,pointsAtY:ke,pointsAtZ:ke,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:pi,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:pi,rev:pi,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:pi,requiredFeatures:pi,requiredFonts:pi,requiredFormats:pi,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ke,specularExponent:ke,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ke,strikethroughThickness:ke,string:null,stroke:null,strokeDashArray:pi,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ke,strokeOpacity:ke,strokeWidth:null,style:null,surfaceScale:ke,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:pi,tabIndex:ke,tableValues:null,target:null,targetX:ke,targetY:ke,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:pi,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ke,underlineThickness:ke,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ke,values:null,vAlphabetic:ke,vMathematical:ke,vectorEffect:null,vHanging:ke,vIdeographic:ke,version:null,vertAdvY:ke,vertOriginX:ke,vertOriginY:ke,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ke,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),QY=/^data[-\w.:]+$/i,yw=/-[a-z]/g,WY=/[A-Z]/g;function ZY(t,e){const n=s1(e);let r=e,s=Yi;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&QY.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(yw,eG);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!yw.test(o)){let u=o.replace(WY,JY);u.charAt(0)!=="-"&&(u="-"+u),e="data"+u}}s=$_}return new s(r,e)}function JY(t){return"-"+t.toLowerCase()}function eG(t){return t.charAt(1).toUpperCase()}const tG=C3([D3,R3,P3,M3,XY],"html"),L3=C3([D3,R3,P3,M3,KY],"svg"),Ew={}.hasOwnProperty;function B3(t,e){const n=e||{};function r(s,...o){let u=r.invalid;const c=r.handlers;if(s&&Ew.call(s,t)){const d=String(s[t]);u=Ew.call(c,d)?c[d]:r.unknown}if(u)return u.call(this,s,...o)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const nG={},rG={}.hasOwnProperty,U3=B3("type",{handlers:{root:sG,element:cG,text:uG,comment:lG,doctype:oG}});function iG(t,e){const r=(e||nG).space;return U3(t,r==="svg"?L3:tG)}function sG(t,e){const n={nodeName:"#document",mode:(t.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=X_(t.children,n,e),rc(t,n),n}function aG(t,e){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=X_(t.children,n,e),rc(t,n),n}function oG(t){const e={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return rc(t,e),e}function uG(t){const e={nodeName:"#text",value:t.value,parentNode:null};return rc(t,e),e}function lG(t){const e={nodeName:"#comment",data:t.value,parentNode:null};return rc(t,e),e}function cG(t,e){const n=e;let r=n;t.type==="element"&&t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=L3);const s=[];let o;if(t.properties){for(o in t.properties)if(o!=="children"&&rG.call(t.properties,o)){const d=hG(r,o,t.properties[o]);d&&s.push(d)}}const u=r.space,c={nodeName:t.tagName,tagName:t.tagName,attrs:s,namespaceURI:iu[u],childNodes:[],parentNode:null};return c.childNodes=X_(t.children,c,r),rc(t,c),t.tagName==="template"&&t.content&&(c.content=aG(t.content,r)),c}function hG(t,e,n){const r=ZY(t,e);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?qR(n):ZR(n));const s={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const o=s.name.indexOf(":");o<0?s.prefix="":(s.name=s.name.slice(o+1),s.prefix=r.attribute.slice(0,o)),s.namespace=iu[r.space]}return s}function X_(t,e,n){let r=-1;const s=[];if(t)for(;++r<t.length;){const o=U3(t[r],n);o.parentNode=e,s.push(o)}return s}function rc(t,e){const n=t.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,e.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const dG=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],fG=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),mn="";var K;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(K||(K={}));const Kr={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function V3(t){return t>=55296&&t<=57343}function mG(t){return t>=56320&&t<=57343}function pG(t,e){return(t-55296)*1024+9216+e}function H3(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function z3(t){return t>=64976&&t<=65007||fG.has(t)}var Ee;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ee||(Ee={}));const gG=65536;class yG{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=gG,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,n){const{line:r,col:s,offset:o}=this,u=s+n,c=o+n;return{code:e,startLine:r,endLine:r,startCol:u,endCol:u,startOffset:c,endOffset:c}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(mG(n))return this.pos++,this._addGap(),pG(e,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,K.EOF;return this._err(Ee.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,n){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,n){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(e,this.pos);for(let r=0;r<e.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==e.charCodeAt(r))return!1;return!0}peek(e){const n=this.pos+e;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,K.EOF;const r=this.html.charCodeAt(n);return r===K.CARRIAGE_RETURN?K.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,K.EOF;let e=this.html.charCodeAt(this.pos);return e===K.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,K.LINE_FEED):e===K.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,V3(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===K.LINE_FEED||e===K.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){H3(e)?this._err(Ee.controlCharacterInInputStream):z3(e)&&this._err(Ee.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var mt;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(mt||(mt={}));function F3(t,e){for(let n=t.attrs.length-1;n>=0;n--)if(t.attrs[n].name===e)return t.attrs[n].value;return null}const EG=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),_G=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function bG(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=_G.get(t))!==null&&e!==void 0?e:t}var ar;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(ar||(ar={}));const TG=32;var ao;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(ao||(ao={}));function o1(t){return t>=ar.ZERO&&t<=ar.NINE}function vG(t){return t>=ar.UPPER_A&&t<=ar.UPPER_F||t>=ar.LOWER_A&&t<=ar.LOWER_F}function SG(t){return t>=ar.UPPER_A&&t<=ar.UPPER_Z||t>=ar.LOWER_A&&t<=ar.LOWER_Z||o1(t)}function AG(t){return t===ar.EQUALS||SG(t)}var ir;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(ir||(ir={}));var la;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(la||(la={}));class xG{constructor(e,n,r){this.decodeTree=e,this.emitCodePoint=n,this.errors=r,this.state=ir.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=la.Strict}startEntity(e){this.decodeMode=e,this.state=ir.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case ir.EntityStart:return e.charCodeAt(n)===ar.NUM?(this.state=ir.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=ir.NamedEntity,this.stateNamedEntity(e,n));case ir.NumericStart:return this.stateNumericStart(e,n);case ir.NumericDecimal:return this.stateNumericDecimal(e,n);case ir.NumericHex:return this.stateNumericHex(e,n);case ir.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|TG)===ar.LOWER_X?(this.state=ir.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=ir.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,r,s){if(n!==r){const o=r-n;this.result=this.result*Math.pow(s,o)+Number.parseInt(e.substr(n,o),s),this.consumed+=o}}stateNumericHex(e,n){const r=n;for(;n<e.length;){const s=e.charCodeAt(n);if(o1(s)||vG(s))n+=1;else return this.addToNumericResult(e,r,n,16),this.emitNumericEntity(s,3)}return this.addToNumericResult(e,r,n,16),-1}stateNumericDecimal(e,n){const r=n;for(;n<e.length;){const s=e.charCodeAt(n);if(o1(s))n+=1;else return this.addToNumericResult(e,r,n,10),this.emitNumericEntity(s,2)}return this.addToNumericResult(e,r,n,10),-1}emitNumericEntity(e,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===ar.SEMI)this.consumed+=1;else if(this.decodeMode===la.Strict)return 0;return this.emitCodePoint(bG(this.result),this.consumed),this.errors&&(e!==ar.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:r}=this;let s=r[this.treeIndex],o=(s&ao.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const u=e.charCodeAt(n);if(this.treeIndex=wG(r,s,this.treeIndex+Math.max(1,o),u),this.treeIndex<0)return this.result===0||this.decodeMode===la.Attribute&&(o===0||AG(u))?0:this.emitNotTerminatedNamedEntity();if(s=r[this.treeIndex],o=(s&ao.VALUE_LENGTH)>>14,o!==0){if(u===ar.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==la.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:r}=this,s=(r[n]&ao.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,s,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,r){const{decodeTree:s}=this;return this.emitCodePoint(n===1?s[e]&~ao.VALUE_LENGTH:s[e+1],r),n===3&&this.emitCodePoint(s[e+2],r),r}end(){var e;switch(this.state){case ir.NamedEntity:return this.result!==0&&(this.decodeMode!==la.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case ir.NumericDecimal:return this.emitNumericEntity(0,2);case ir.NumericHex:return this.emitNumericEntity(0,3);case ir.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case ir.EntityStart:return 0}}}function wG(t,e,n,r){const s=(e&ao.BRANCH_LENGTH)>>7,o=e&ao.JUMP_TABLE;if(s===0)return o!==0&&r===o?n:-1;if(o){const d=r-o;return d<0||d>=s?-1:t[n+d]-1}let u=n,c=u+s-1;for(;u<=c;){const d=u+c>>>1,f=t[d];if(f<r)u=d+1;else if(f>r)c=d-1;else return t[d+s]}return-1}var Ne;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(Ne||(Ne={}));var au;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})(au||(au={}));var Fi;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(Fi||(Fi={}));var ce;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SEARCH="search",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(ce||(ce={}));var b;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SEARCH=94]="SEARCH",t[t.SECTION=95]="SECTION",t[t.SELECT=96]="SELECT",t[t.SOURCE=97]="SOURCE",t[t.SMALL=98]="SMALL",t[t.SPAN=99]="SPAN",t[t.STRIKE=100]="STRIKE",t[t.STRONG=101]="STRONG",t[t.STYLE=102]="STYLE",t[t.SUB=103]="SUB",t[t.SUMMARY=104]="SUMMARY",t[t.SUP=105]="SUP",t[t.TABLE=106]="TABLE",t[t.TBODY=107]="TBODY",t[t.TEMPLATE=108]="TEMPLATE",t[t.TEXTAREA=109]="TEXTAREA",t[t.TFOOT=110]="TFOOT",t[t.TD=111]="TD",t[t.TH=112]="TH",t[t.THEAD=113]="THEAD",t[t.TITLE=114]="TITLE",t[t.TR=115]="TR",t[t.TRACK=116]="TRACK",t[t.TT=117]="TT",t[t.U=118]="U",t[t.UL=119]="UL",t[t.SVG=120]="SVG",t[t.VAR=121]="VAR",t[t.WBR=122]="WBR",t[t.XMP=123]="XMP"})(b||(b={}));const IG=new Map([[ce.A,b.A],[ce.ADDRESS,b.ADDRESS],[ce.ANNOTATION_XML,b.ANNOTATION_XML],[ce.APPLET,b.APPLET],[ce.AREA,b.AREA],[ce.ARTICLE,b.ARTICLE],[ce.ASIDE,b.ASIDE],[ce.B,b.B],[ce.BASE,b.BASE],[ce.BASEFONT,b.BASEFONT],[ce.BGSOUND,b.BGSOUND],[ce.BIG,b.BIG],[ce.BLOCKQUOTE,b.BLOCKQUOTE],[ce.BODY,b.BODY],[ce.BR,b.BR],[ce.BUTTON,b.BUTTON],[ce.CAPTION,b.CAPTION],[ce.CENTER,b.CENTER],[ce.CODE,b.CODE],[ce.COL,b.COL],[ce.COLGROUP,b.COLGROUP],[ce.DD,b.DD],[ce.DESC,b.DESC],[ce.DETAILS,b.DETAILS],[ce.DIALOG,b.DIALOG],[ce.DIR,b.DIR],[ce.DIV,b.DIV],[ce.DL,b.DL],[ce.DT,b.DT],[ce.EM,b.EM],[ce.EMBED,b.EMBED],[ce.FIELDSET,b.FIELDSET],[ce.FIGCAPTION,b.FIGCAPTION],[ce.FIGURE,b.FIGURE],[ce.FONT,b.FONT],[ce.FOOTER,b.FOOTER],[ce.FOREIGN_OBJECT,b.FOREIGN_OBJECT],[ce.FORM,b.FORM],[ce.FRAME,b.FRAME],[ce.FRAMESET,b.FRAMESET],[ce.H1,b.H1],[ce.H2,b.H2],[ce.H3,b.H3],[ce.H4,b.H4],[ce.H5,b.H5],[ce.H6,b.H6],[ce.HEAD,b.HEAD],[ce.HEADER,b.HEADER],[ce.HGROUP,b.HGROUP],[ce.HR,b.HR],[ce.HTML,b.HTML],[ce.I,b.I],[ce.IMG,b.IMG],[ce.IMAGE,b.IMAGE],[ce.INPUT,b.INPUT],[ce.IFRAME,b.IFRAME],[ce.KEYGEN,b.KEYGEN],[ce.LABEL,b.LABEL],[ce.LI,b.LI],[ce.LINK,b.LINK],[ce.LISTING,b.LISTING],[ce.MAIN,b.MAIN],[ce.MALIGNMARK,b.MALIGNMARK],[ce.MARQUEE,b.MARQUEE],[ce.MATH,b.MATH],[ce.MENU,b.MENU],[ce.META,b.META],[ce.MGLYPH,b.MGLYPH],[ce.MI,b.MI],[ce.MO,b.MO],[ce.MN,b.MN],[ce.MS,b.MS],[ce.MTEXT,b.MTEXT],[ce.NAV,b.NAV],[ce.NOBR,b.NOBR],[ce.NOFRAMES,b.NOFRAMES],[ce.NOEMBED,b.NOEMBED],[ce.NOSCRIPT,b.NOSCRIPT],[ce.OBJECT,b.OBJECT],[ce.OL,b.OL],[ce.OPTGROUP,b.OPTGROUP],[ce.OPTION,b.OPTION],[ce.P,b.P],[ce.PARAM,b.PARAM],[ce.PLAINTEXT,b.PLAINTEXT],[ce.PRE,b.PRE],[ce.RB,b.RB],[ce.RP,b.RP],[ce.RT,b.RT],[ce.RTC,b.RTC],[ce.RUBY,b.RUBY],[ce.S,b.S],[ce.SCRIPT,b.SCRIPT],[ce.SEARCH,b.SEARCH],[ce.SECTION,b.SECTION],[ce.SELECT,b.SELECT],[ce.SOURCE,b.SOURCE],[ce.SMALL,b.SMALL],[ce.SPAN,b.SPAN],[ce.STRIKE,b.STRIKE],[ce.STRONG,b.STRONG],[ce.STYLE,b.STYLE],[ce.SUB,b.SUB],[ce.SUMMARY,b.SUMMARY],[ce.SUP,b.SUP],[ce.TABLE,b.TABLE],[ce.TBODY,b.TBODY],[ce.TEMPLATE,b.TEMPLATE],[ce.TEXTAREA,b.TEXTAREA],[ce.TFOOT,b.TFOOT],[ce.TD,b.TD],[ce.TH,b.TH],[ce.THEAD,b.THEAD],[ce.TITLE,b.TITLE],[ce.TR,b.TR],[ce.TRACK,b.TRACK],[ce.TT,b.TT],[ce.U,b.U],[ce.UL,b.UL],[ce.SVG,b.SVG],[ce.VAR,b.VAR],[ce.WBR,b.WBR],[ce.XMP,b.XMP]]);function ic(t){var e;return(e=IG.get(t))!==null&&e!==void 0?e:b.UNKNOWN}const Re=b,CG={[Ne.HTML]:new Set([Re.ADDRESS,Re.APPLET,Re.AREA,Re.ARTICLE,Re.ASIDE,Re.BASE,Re.BASEFONT,Re.BGSOUND,Re.BLOCKQUOTE,Re.BODY,Re.BR,Re.BUTTON,Re.CAPTION,Re.CENTER,Re.COL,Re.COLGROUP,Re.DD,Re.DETAILS,Re.DIR,Re.DIV,Re.DL,Re.DT,Re.EMBED,Re.FIELDSET,Re.FIGCAPTION,Re.FIGURE,Re.FOOTER,Re.FORM,Re.FRAME,Re.FRAMESET,Re.H1,Re.H2,Re.H3,Re.H4,Re.H5,Re.H6,Re.HEAD,Re.HEADER,Re.HGROUP,Re.HR,Re.HTML,Re.IFRAME,Re.IMG,Re.INPUT,Re.LI,Re.LINK,Re.LISTING,Re.MAIN,Re.MARQUEE,Re.MENU,Re.META,Re.NAV,Re.NOEMBED,Re.NOFRAMES,Re.NOSCRIPT,Re.OBJECT,Re.OL,Re.P,Re.PARAM,Re.PLAINTEXT,Re.PRE,Re.SCRIPT,Re.SECTION,Re.SELECT,Re.SOURCE,Re.STYLE,Re.SUMMARY,Re.TABLE,Re.TBODY,Re.TD,Re.TEMPLATE,Re.TEXTAREA,Re.TFOOT,Re.TH,Re.THEAD,Re.TITLE,Re.TR,Re.TRACK,Re.UL,Re.WBR,Re.XMP]),[Ne.MATHML]:new Set([Re.MI,Re.MO,Re.MN,Re.MS,Re.MTEXT,Re.ANNOTATION_XML]),[Ne.SVG]:new Set([Re.TITLE,Re.FOREIGN_OBJECT,Re.DESC]),[Ne.XLINK]:new Set,[Ne.XML]:new Set,[Ne.XMLNS]:new Set},u1=new Set([Re.H1,Re.H2,Re.H3,Re.H4,Re.H5,Re.H6]);ce.STYLE,ce.SCRIPT,ce.XMP,ce.IFRAME,ce.NOEMBED,ce.NOFRAMES,ce.PLAINTEXT;var Q;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(Q||(Q={}));const Rn={DATA:Q.DATA,RCDATA:Q.RCDATA,RAWTEXT:Q.RAWTEXT,SCRIPT_DATA:Q.SCRIPT_DATA,PLAINTEXT:Q.PLAINTEXT,CDATA_SECTION:Q.CDATA_SECTION};function NG(t){return t>=K.DIGIT_0&&t<=K.DIGIT_9}function Ch(t){return t>=K.LATIN_CAPITAL_A&&t<=K.LATIN_CAPITAL_Z}function RG(t){return t>=K.LATIN_SMALL_A&&t<=K.LATIN_SMALL_Z}function Ka(t){return RG(t)||Ch(t)}function _w(t){return Ka(t)||NG(t)}function _0(t){return t+32}function j3(t){return t===K.SPACE||t===K.LINE_FEED||t===K.TABULATION||t===K.FORM_FEED}function bw(t){return j3(t)||t===K.SOLIDUS||t===K.GREATER_THAN_SIGN}function DG(t){return t===K.NULL?Ee.nullCharacterReference:t>1114111?Ee.characterReferenceOutsideUnicodeRange:V3(t)?Ee.surrogateCharacterReference:z3(t)?Ee.noncharacterCharacterReference:H3(t)||t===K.CARRIAGE_RETURN?Ee.controlCharacterReference:null}class OG{constructor(e,n){this.options=e,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=Q.DATA,this.returnState=Q.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new yG(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new xG(EG,(r,s)=>{this.preprocessor.pos=this.entityStartPos+s-1,this._flushCodePointConsumedAsCharacterReference(r)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(Ee.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err(Ee.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{const s=DG(r);s&&this._err(s,1)}}:void 0)}_err(e,n=0){var r,s;(s=(r=this.handler).onParseError)===null||s===void 0||s.call(r,this.preprocessor.getError(e,n))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e?.())}write(e,n,r){this.active=!0,this.preprocessor.write(e,n),this._runParsingLoop(),this.paused||r?.()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let n=0;n<e;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,n){return this.preprocessor.startsWith(e,n)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:mt.START_TAG,tagName:"",tagID:b.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:mt.END_TAG,tagName:"",tagID:b.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:mt.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:mt.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,n){this.currentCharacterToken={type:e,chars:n,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,n;const r=this.currentToken;if(F3(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const s=(e=(n=r.location).attrs)!==null&&e!==void 0?e:n.attrs=Object.create(null);s[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ee.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=ic(e.tagName),e.type===mt.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(Ee.endTagWithAttributes),e.selfClosing&&this._err(Ee.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case mt.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case mt.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case mt.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:mt.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===e){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(e,n)}_emitCodePoint(e){const n=j3(e)?mt.WHITESPACE_CHARACTER:e===K.NULL?mt.NULL_CHARACTER:mt.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(mt.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=Q.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?la.Attribute:la.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===Q.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===Q.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===Q.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case Q.DATA:{this._stateData(e);break}case Q.RCDATA:{this._stateRcdata(e);break}case Q.RAWTEXT:{this._stateRawtext(e);break}case Q.SCRIPT_DATA:{this._stateScriptData(e);break}case Q.PLAINTEXT:{this._statePlaintext(e);break}case Q.TAG_OPEN:{this._stateTagOpen(e);break}case Q.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case Q.TAG_NAME:{this._stateTagName(e);break}case Q.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case Q.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case Q.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case Q.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case Q.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case Q.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case Q.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case Q.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case Q.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case Q.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case Q.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case Q.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case Q.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case Q.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case Q.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case Q.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case Q.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case Q.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case Q.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case Q.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case Q.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case Q.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case Q.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case Q.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case Q.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case Q.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case Q.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case Q.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case Q.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case Q.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case Q.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case Q.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case Q.BOGUS_COMMENT:{this._stateBogusComment(e);break}case Q.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case Q.COMMENT_START:{this._stateCommentStart(e);break}case Q.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case Q.COMMENT:{this._stateComment(e);break}case Q.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case Q.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case Q.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case Q.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case Q.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case Q.COMMENT_END:{this._stateCommentEnd(e);break}case Q.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case Q.DOCTYPE:{this._stateDoctype(e);break}case Q.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case Q.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case Q.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case Q.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case Q.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case Q.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case Q.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case Q.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case Q.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case Q.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case Q.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case Q.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case Q.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case Q.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case Q.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case Q.CDATA_SECTION:{this._stateCdataSection(e);break}case Q.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case Q.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case Q.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case Q.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case K.LESS_THAN_SIGN:{this.state=Q.TAG_OPEN;break}case K.AMPERSAND:{this._startCharacterReference();break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitCodePoint(e);break}case K.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case K.AMPERSAND:{this._startCharacterReference();break}case K.LESS_THAN_SIGN:{this.state=Q.RCDATA_LESS_THAN_SIGN;break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(mn);break}case K.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case K.LESS_THAN_SIGN:{this.state=Q.RAWTEXT_LESS_THAN_SIGN;break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(mn);break}case K.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case K.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_LESS_THAN_SIGN;break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(mn);break}case K.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case K.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(mn);break}case K.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(Ka(e))this._createStartTagToken(),this.state=Q.TAG_NAME,this._stateTagName(e);else switch(e){case K.EXCLAMATION_MARK:{this.state=Q.MARKUP_DECLARATION_OPEN;break}case K.SOLIDUS:{this.state=Q.END_TAG_OPEN;break}case K.QUESTION_MARK:{this._err(Ee.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=Q.BOGUS_COMMENT,this._stateBogusComment(e);break}case K.EOF:{this._err(Ee.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ee.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=Q.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(Ka(e))this._createEndTagToken(),this.state=Q.TAG_NAME,this._stateTagName(e);else switch(e){case K.GREATER_THAN_SIGN:{this._err(Ee.missingEndTagName),this.state=Q.DATA;break}case K.EOF:{this._err(Ee.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ee.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=Q.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const n=this.currentToken;switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:{this.state=Q.BEFORE_ATTRIBUTE_NAME;break}case K.SOLIDUS:{this.state=Q.SELF_CLOSING_START_TAG;break}case K.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentTagToken();break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),n.tagName+=mn;break}case K.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(Ch(e)?_0(e):e)}}_stateRcdataLessThanSign(e){e===K.SOLIDUS?this.state=Q.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=Q.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){Ka(e)?(this.state=Q.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=Q.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=Q.BEFORE_ATTRIBUTE_NAME,!1;case K.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=Q.SELF_CLOSING_START_TAG,!1;case K.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=Q.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Q.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===K.SOLIDUS?this.state=Q.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=Q.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){Ka(e)?(this.state=Q.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=Q.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Q.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case K.SOLIDUS:{this.state=Q.SCRIPT_DATA_END_TAG_OPEN;break}case K.EXCLAMATION_MARK:{this.state=Q.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=Q.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){Ka(e)?(this.state=Q.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=Q.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Q.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===K.HYPHEN_MINUS?(this.state=Q.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=Q.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===K.HYPHEN_MINUS?(this.state=Q.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=Q.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case K.HYPHEN_MINUS:{this.state=Q.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case K.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(mn);break}case K.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case K.HYPHEN_MINUS:{this.state=Q.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case K.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this.state=Q.SCRIPT_DATA_ESCAPED,this._emitChars(mn);break}case K.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Q.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case K.HYPHEN_MINUS:{this._emitChars("-");break}case K.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case K.GREATER_THAN_SIGN:{this.state=Q.SCRIPT_DATA,this._emitChars(">");break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this.state=Q.SCRIPT_DATA_ESCAPED,this._emitChars(mn);break}case K.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Q.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===K.SOLIDUS?this.state=Q.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Ka(e)?(this._emitChars("<"),this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=Q.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){Ka(e)?(this.state=Q.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=Q.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Q.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(Kr.SCRIPT,!1)&&bw(this.preprocessor.peek(Kr.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<Kr.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=Q.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case K.HYPHEN_MINUS:{this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case K.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(mn);break}case K.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case K.HYPHEN_MINUS:{this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case K.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(mn);break}case K.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case K.HYPHEN_MINUS:{this._emitChars("-");break}case K.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case K.GREATER_THAN_SIGN:{this.state=Q.SCRIPT_DATA,this._emitChars(">");break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(mn);break}case K.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===K.SOLIDUS?(this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(Kr.SCRIPT,!1)&&bw(this.preprocessor.peek(Kr.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<Kr.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Q.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.SOLIDUS:case K.GREATER_THAN_SIGN:case K.EOF:{this.state=Q.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case K.EQUALS_SIGN:{this._err(Ee.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=Q.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=Q.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:case K.SOLIDUS:case K.GREATER_THAN_SIGN:case K.EOF:{this._leaveAttrName(),this.state=Q.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case K.EQUALS_SIGN:{this._leaveAttrName(),this.state=Q.BEFORE_ATTRIBUTE_VALUE;break}case K.QUOTATION_MARK:case K.APOSTROPHE:case K.LESS_THAN_SIGN:{this._err(Ee.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this.currentAttr.name+=mn;break}default:this.currentAttr.name+=String.fromCodePoint(Ch(e)?_0(e):e)}}_stateAfterAttributeName(e){switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.SOLIDUS:{this.state=Q.SELF_CLOSING_START_TAG;break}case K.EQUALS_SIGN:{this.state=Q.BEFORE_ATTRIBUTE_VALUE;break}case K.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentTagToken();break}case K.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=Q.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.QUOTATION_MARK:{this.state=Q.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case K.APOSTROPHE:{this.state=Q.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case K.GREATER_THAN_SIGN:{this._err(Ee.missingAttributeValue),this.state=Q.DATA,this.emitCurrentTagToken();break}default:this.state=Q.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case K.QUOTATION_MARK:{this.state=Q.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case K.AMPERSAND:{this._startCharacterReference();break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this.currentAttr.value+=mn;break}case K.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case K.APOSTROPHE:{this.state=Q.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case K.AMPERSAND:{this._startCharacterReference();break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this.currentAttr.value+=mn;break}case K.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:{this._leaveAttrValue(),this.state=Q.BEFORE_ATTRIBUTE_NAME;break}case K.AMPERSAND:{this._startCharacterReference();break}case K.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Q.DATA,this.emitCurrentTagToken();break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this.currentAttr.value+=mn;break}case K.QUOTATION_MARK:case K.APOSTROPHE:case K.LESS_THAN_SIGN:case K.EQUALS_SIGN:case K.GRAVE_ACCENT:{this._err(Ee.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case K.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:{this._leaveAttrValue(),this.state=Q.BEFORE_ATTRIBUTE_NAME;break}case K.SOLIDUS:{this._leaveAttrValue(),this.state=Q.SELF_CLOSING_START_TAG;break}case K.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Q.DATA,this.emitCurrentTagToken();break}case K.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this._err(Ee.missingWhitespaceBetweenAttributes),this.state=Q.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case K.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=Q.DATA,this.emitCurrentTagToken();break}case K.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this._err(Ee.unexpectedSolidusInTag),this.state=Q.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const n=this.currentToken;switch(e){case K.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentComment(n);break}case K.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),n.data+=mn;break}default:n.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(Kr.DASH_DASH,!0)?(this._createCommentToken(Kr.DASH_DASH.length+1),this.state=Q.COMMENT_START):this._consumeSequenceIfMatch(Kr.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Kr.DOCTYPE.length+1),this.state=Q.DOCTYPE):this._consumeSequenceIfMatch(Kr.CDATA_START,!0)?this.inForeignNode?this.state=Q.CDATA_SECTION:(this._err(Ee.cdataInHtmlContent),this._createCommentToken(Kr.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=Q.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ee.incorrectlyOpenedComment),this._createCommentToken(2),this.state=Q.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case K.HYPHEN_MINUS:{this.state=Q.COMMENT_START_DASH;break}case K.GREATER_THAN_SIGN:{this._err(Ee.abruptClosingOfEmptyComment),this.state=Q.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=Q.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const n=this.currentToken;switch(e){case K.HYPHEN_MINUS:{this.state=Q.COMMENT_END;break}case K.GREATER_THAN_SIGN:{this._err(Ee.abruptClosingOfEmptyComment),this.state=Q.DATA,this.emitCurrentComment(n);break}case K.EOF:{this._err(Ee.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Q.COMMENT,this._stateComment(e)}}_stateComment(e){const n=this.currentToken;switch(e){case K.HYPHEN_MINUS:{this.state=Q.COMMENT_END_DASH;break}case K.LESS_THAN_SIGN:{n.data+="<",this.state=Q.COMMENT_LESS_THAN_SIGN;break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),n.data+=mn;break}case K.EOF:{this._err(Ee.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const n=this.currentToken;switch(e){case K.EXCLAMATION_MARK:{n.data+="!",this.state=Q.COMMENT_LESS_THAN_SIGN_BANG;break}case K.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=Q.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===K.HYPHEN_MINUS?this.state=Q.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=Q.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===K.HYPHEN_MINUS?this.state=Q.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=Q.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==K.GREATER_THAN_SIGN&&e!==K.EOF&&this._err(Ee.nestedComment),this.state=Q.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const n=this.currentToken;switch(e){case K.HYPHEN_MINUS:{this.state=Q.COMMENT_END;break}case K.EOF:{this._err(Ee.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Q.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const n=this.currentToken;switch(e){case K.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentComment(n);break}case K.EXCLAMATION_MARK:{this.state=Q.COMMENT_END_BANG;break}case K.HYPHEN_MINUS:{n.data+="-";break}case K.EOF:{this._err(Ee.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=Q.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const n=this.currentToken;switch(e){case K.HYPHEN_MINUS:{n.data+="--!",this.state=Q.COMMENT_END_DASH;break}case K.GREATER_THAN_SIGN:{this._err(Ee.incorrectlyClosedComment),this.state=Q.DATA,this.emitCurrentComment(n);break}case K.EOF:{this._err(Ee.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=Q.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:{this.state=Q.BEFORE_DOCTYPE_NAME;break}case K.GREATER_THAN_SIGN:{this.state=Q.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case K.EOF:{this._err(Ee.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingWhitespaceBeforeDoctypeName),this.state=Q.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(Ch(e))this._createDoctypeToken(String.fromCharCode(_0(e))),this.state=Q.DOCTYPE_NAME;else switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.NULL:{this._err(Ee.unexpectedNullCharacter),this._createDoctypeToken(mn),this.state=Q.DOCTYPE_NAME;break}case K.GREATER_THAN_SIGN:{this._err(Ee.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Q.DATA;break}case K.EOF:{this._err(Ee.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=Q.DOCTYPE_NAME}}_stateDoctypeName(e){const n=this.currentToken;switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:{this.state=Q.AFTER_DOCTYPE_NAME;break}case K.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentDoctype(n);break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),n.name+=mn;break}case K.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(Ch(e)?_0(e):e)}}_stateAfterDoctypeName(e){const n=this.currentToken;switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentDoctype(n);break}case K.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Kr.PUBLIC,!1)?this.state=Q.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Kr.SYSTEM,!1)?this.state=Q.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ee.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const n=this.currentToken;switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:{this.state=Q.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case K.QUOTATION_MARK:{this._err(Ee.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Q.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case K.APOSTROPHE:{this._err(Ee.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Q.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case K.GREATER_THAN_SIGN:{this._err(Ee.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Q.DATA,this.emitCurrentDoctype(n);break}case K.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.QUOTATION_MARK:{n.publicId="",this.state=Q.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case K.APOSTROPHE:{n.publicId="",this.state=Q.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case K.GREATER_THAN_SIGN:{this._err(Ee.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Q.DATA,this.emitCurrentDoctype(n);break}case K.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case K.QUOTATION_MARK:{this.state=Q.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),n.publicId+=mn;break}case K.GREATER_THAN_SIGN:{this._err(Ee.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Q.DATA;break}case K.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case K.APOSTROPHE:{this.state=Q.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),n.publicId+=mn;break}case K.GREATER_THAN_SIGN:{this._err(Ee.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Q.DATA;break}case K.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:{this.state=Q.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case K.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentDoctype(n);break}case K.QUOTATION_MARK:{this._err(Ee.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case K.APOSTROPHE:{this._err(Ee.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case K.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const n=this.currentToken;switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Q.DATA;break}case K.QUOTATION_MARK:{n.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case K.APOSTROPHE:{n.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case K.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const n=this.currentToken;switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:{this.state=Q.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case K.QUOTATION_MARK:{this._err(Ee.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case K.APOSTROPHE:{this._err(Ee.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case K.GREATER_THAN_SIGN:{this._err(Ee.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Q.DATA,this.emitCurrentDoctype(n);break}case K.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.QUOTATION_MARK:{n.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case K.APOSTROPHE:{n.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case K.GREATER_THAN_SIGN:{this._err(Ee.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Q.DATA,this.emitCurrentDoctype(n);break}case K.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case K.QUOTATION_MARK:{this.state=Q.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),n.systemId+=mn;break}case K.GREATER_THAN_SIGN:{this._err(Ee.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Q.DATA;break}case K.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case K.APOSTROPHE:{this.state=Q.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),n.systemId+=mn;break}case K.GREATER_THAN_SIGN:{this._err(Ee.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Q.DATA;break}case K.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Q.DATA;break}case K.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const n=this.currentToken;switch(e){case K.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Q.DATA;break}case K.NULL:{this._err(Ee.unexpectedNullCharacter);break}case K.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case K.RIGHT_SQUARE_BRACKET:{this.state=Q.CDATA_SECTION_BRACKET;break}case K.EOF:{this._err(Ee.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===K.RIGHT_SQUARE_BRACKET?this.state=Q.CDATA_SECTION_END:(this._emitChars("]"),this.state=Q.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case K.GREATER_THAN_SIGN:{this.state=Q.DATA;break}case K.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=Q.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0)if(this.preprocessor.lastChunkWritten)e=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}e===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(K.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&_w(this.preprocessor.peek(1))?Q.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){_w(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===K.SEMICOLON&&this._err(Ee.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const q3=new Set([b.DD,b.DT,b.LI,b.OPTGROUP,b.OPTION,b.P,b.RB,b.RP,b.RT,b.RTC]),Tw=new Set([...q3,b.CAPTION,b.COLGROUP,b.TBODY,b.TD,b.TFOOT,b.TH,b.THEAD,b.TR]),ym=new Set([b.APPLET,b.CAPTION,b.HTML,b.MARQUEE,b.OBJECT,b.TABLE,b.TD,b.TEMPLATE,b.TH]),kG=new Set([...ym,b.OL,b.UL]),PG=new Set([...ym,b.BUTTON]),vw=new Set([b.ANNOTATION_XML,b.MI,b.MN,b.MO,b.MS,b.MTEXT]),Sw=new Set([b.DESC,b.FOREIGN_OBJECT,b.TITLE]),MG=new Set([b.TR,b.TEMPLATE,b.HTML]),LG=new Set([b.TBODY,b.TFOOT,b.THEAD,b.TEMPLATE,b.HTML]),BG=new Set([b.TABLE,b.TEMPLATE,b.HTML]),UG=new Set([b.TD,b.TH]);class VG{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=b.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===b.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Ne.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,n){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,n,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,n){const r=this._indexOf(e);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(e,n,r){const s=this._indexOf(e)+1;this.items.splice(s,0,n),this.tagIDs.splice(s,0,r),this.stackTop++,s===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,s===this.stackTop)}popUntilTagNamePopped(e){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(e,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Ne.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(e){for(;this.stackTop>=e;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<e)}}popUntilElementPopped(e){const n=this._indexOf(e);this.shortenToLength(Math.max(n,0))}popUntilPopped(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(Math.max(r,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(u1,Ne.HTML)}popUntilTableCellPopped(){this.popUntilPopped(UG,Ne.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,n){for(let r=this.stackTop;r>=0;r--)if(e.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(BG,Ne.HTML)}clearBackToTableBodyContext(){this.clearBackTo(LG,Ne.HTML)}clearBackToTableRowContext(){this.clearBackTo(MG,Ne.HTML)}remove(e){const n=this._indexOf(e);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===b.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const n=this._indexOf(e)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===b.HTML}hasInDynamicScope(e,n){for(let r=this.stackTop;r>=0;r--){const s=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case Ne.HTML:{if(s===e)return!0;if(n.has(s))return!1;break}case Ne.SVG:{if(Sw.has(s))return!1;break}case Ne.MATHML:{if(vw.has(s))return!1;break}}}return!0}hasInScope(e){return this.hasInDynamicScope(e,ym)}hasInListItemScope(e){return this.hasInDynamicScope(e,kG)}hasInButtonScope(e){return this.hasInDynamicScope(e,PG)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const n=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case Ne.HTML:{if(u1.has(n))return!0;if(ym.has(n))return!1;break}case Ne.SVG:{if(Sw.has(n))return!1;break}case Ne.MATHML:{if(vw.has(n))return!1;break}}}return!0}hasInTableScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===Ne.HTML)switch(this.tagIDs[n]){case e:return!0;case b.TABLE:case b.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===Ne.HTML)switch(this.tagIDs[e]){case b.TBODY:case b.THEAD:case b.TFOOT:return!0;case b.TABLE:case b.HTML:return!1}return!0}hasInSelectScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===Ne.HTML)switch(this.tagIDs[n]){case e:return!0;case b.OPTION:case b.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&q3.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&Tw.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==void 0&&this.currentTagId!==e&&Tw.has(this.currentTagId);)this.pop()}}const nE=3;var Is;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})(Is||(Is={}));const Aw={type:Is.Marker};class HG{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,n){const r=[],s=n.length,o=this.treeAdapter.getTagName(e),u=this.treeAdapter.getNamespaceURI(e);for(let c=0;c<this.entries.length;c++){const d=this.entries[c];if(d.type===Is.Marker)break;const{element:f}=d;if(this.treeAdapter.getTagName(f)===o&&this.treeAdapter.getNamespaceURI(f)===u){const m=this.treeAdapter.getAttrList(f);m.length===s&&r.push({idx:c,attrs:m})}}return r}_ensureNoahArkCondition(e){if(this.entries.length<nE)return;const n=this.treeAdapter.getAttrList(e),r=this._getNoahArkConditionCandidates(e,n);if(r.length<nE)return;const s=new Map(n.map(u=>[u.name,u.value]));let o=0;for(let u=0;u<r.length;u++){const c=r[u];c.attrs.every(d=>s.get(d.name)===d.value)&&(o+=1,o>=nE&&this.entries.splice(c.idx,1))}}insertMarker(){this.entries.unshift(Aw)}pushElement(e,n){this._ensureNoahArkCondition(e),this.entries.unshift({type:Is.Element,element:e,token:n})}insertElementAfterBookmark(e,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Is.Element,element:e,token:n})}removeEntry(e){const n=this.entries.indexOf(e);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const e=this.entries.indexOf(Aw);e===-1?this.entries.length=0:this.entries.splice(0,e+1)}getElementEntryInScopeWithTagName(e){const n=this.entries.find(r=>r.type===Is.Marker||this.treeAdapter.getTagName(r.element)===e);return n&&n.type===Is.Element?n:null}getElementEntry(e){return this.entries.find(n=>n.type===Is.Element&&n.element===e)}}const Qa={createDocument(){return{nodeName:"#document",mode:Fi.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,e,n){return{nodeName:t,tagName:t,attrs:n,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},createTextNode(t){return{nodeName:"#text",value:t,parentNode:null}},appendChild(t,e){t.childNodes.push(e),e.parentNode=t},insertBefore(t,e,n){const r=t.childNodes.indexOf(n);t.childNodes.splice(r,0,e),e.parentNode=t},setTemplateContent(t,e){t.content=e},getTemplateContent(t){return t.content},setDocumentType(t,e,n,r){const s=t.childNodes.find(o=>o.nodeName==="#documentType");if(s)s.name=e,s.publicId=n,s.systemId=r;else{const o={nodeName:"#documentType",name:e,publicId:n,systemId:r,parentNode:null};Qa.appendChild(t,o)}},setDocumentMode(t,e){t.mode=e},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},insertText(t,e){if(t.childNodes.length>0){const n=t.childNodes[t.childNodes.length-1];if(Qa.isTextNode(n)){n.value+=e;return}}Qa.appendChild(t,Qa.createTextNode(e))},insertTextBefore(t,e,n){const r=t.childNodes[t.childNodes.indexOf(n)-1];r&&Qa.isTextNode(r)?r.value+=e:Qa.insertBefore(t,Qa.createTextNode(e),n)},adoptAttributes(t,e){const n=new Set(t.attrs.map(r=>r.name));for(let r=0;r<e.length;r++)n.has(e[r].name)||t.attrs.push(e[r])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,e){t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){t.sourceCodeLocation={...t.sourceCodeLocation,...e}}},Y3="html",zG="about:legacy-compat",FG="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",G3=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],jG=[...G3,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],qG=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),$3=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],YG=[...$3,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function xw(t,e){return e.some(n=>t.startsWith(n))}function GG(t){return t.name===Y3&&t.publicId===null&&(t.systemId===null||t.systemId===zG)}function $G(t){if(t.name!==Y3)return Fi.QUIRKS;const{systemId:e}=t;if(e&&e.toLowerCase()===FG)return Fi.QUIRKS;let{publicId:n}=t;if(n!==null){if(n=n.toLowerCase(),qG.has(n))return Fi.QUIRKS;let r=e===null?jG:G3;if(xw(n,r))return Fi.QUIRKS;if(r=e===null?$3:YG,xw(n,r))return Fi.LIMITED_QUIRKS}return Fi.NO_QUIRKS}const ww={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},XG="definitionurl",KG="definitionURL",QG=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),WG=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Ne.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Ne.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Ne.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Ne.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Ne.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Ne.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Ne.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:Ne.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Ne.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Ne.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Ne.XMLNS}]]),ZG=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),JG=new Set([b.B,b.BIG,b.BLOCKQUOTE,b.BODY,b.BR,b.CENTER,b.CODE,b.DD,b.DIV,b.DL,b.DT,b.EM,b.EMBED,b.H1,b.H2,b.H3,b.H4,b.H5,b.H6,b.HEAD,b.HR,b.I,b.IMG,b.LI,b.LISTING,b.MENU,b.META,b.NOBR,b.OL,b.P,b.PRE,b.RUBY,b.S,b.SMALL,b.SPAN,b.STRONG,b.STRIKE,b.SUB,b.SUP,b.TABLE,b.TT,b.U,b.UL,b.VAR]);function e$(t){const e=t.tagID;return e===b.FONT&&t.attrs.some(({name:r})=>r===au.COLOR||r===au.SIZE||r===au.FACE)||JG.has(e)}function X3(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===XG){t.attrs[e].name=KG;break}}function K3(t){for(let e=0;e<t.attrs.length;e++){const n=QG.get(t.attrs[e].name);n!=null&&(t.attrs[e].name=n)}}function K_(t){for(let e=0;e<t.attrs.length;e++){const n=WG.get(t.attrs[e].name);n&&(t.attrs[e].prefix=n.prefix,t.attrs[e].name=n.name,t.attrs[e].namespace=n.namespace)}}function t$(t){const e=ZG.get(t.tagName);e!=null&&(t.tagName=e,t.tagID=ic(t.tagName))}function n$(t,e){return e===Ne.MATHML&&(t===b.MI||t===b.MO||t===b.MN||t===b.MS||t===b.MTEXT)}function r$(t,e,n){if(e===Ne.MATHML&&t===b.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===au.ENCODING){const s=n[r].value.toLowerCase();return s===ww.TEXT_HTML||s===ww.APPLICATION_XML}}return e===Ne.SVG&&(t===b.FOREIGN_OBJECT||t===b.DESC||t===b.TITLE)}function i$(t,e,n,r){return(!r||r===Ne.HTML)&&r$(t,e,n)||(!r||r===Ne.MATHML)&&n$(t,e)}const s$="hidden",a$=8,o$=3;var Z;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(Z||(Z={}));const u$={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Q3=new Set([b.TABLE,b.TBODY,b.TFOOT,b.THEAD,b.TR]),Iw={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Qa,onParseError:null};class Cw{constructor(e,n,r=null,s=null){this.fragmentContext=r,this.scriptHandler=s,this.currentToken=null,this.stopped=!1,this.insertionMode=Z.INITIAL,this.originalInsertionMode=Z.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Iw,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new OG(this.options,this),this.activeFormattingElements=new HG(this.treeAdapter),this.fragmentContextID=r?ic(this.treeAdapter.getTagName(r)):b.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new VG(this.document,this.treeAdapter,this)}static parse(e,n){const r=new this(n);return r.tokenizer.write(e,!0),r.document}static getFragmentParser(e,n){const r={...Iw,...n};e??(e=r.treeAdapter.createElement(ce.TEMPLATE,Ne.HTML,[]));const s=r.treeAdapter.createElement("documentmock",Ne.HTML,[]),o=new this(r,s,e);return o.fragmentContextID===b.TEMPLATE&&o.tmplInsertionModeStack.unshift(Z.IN_TEMPLATE),o._initTokenizerForFragmentParsing(),o._insertFakeRootElement(),o._resetInsertionMode(),o._findFormInFragmentContext(),o}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,n),n}_err(e,n,r){var s;if(!this.onParseError)return;const o=(s=e.location)!==null&&s!==void 0?s:u$,u={code:n,startLine:o.startLine,startCol:o.startCol,startOffset:o.startOffset,endLine:r?o.startLine:o.endLine,endCol:r?o.startCol:o.endCol,endOffset:r?o.startOffset:o.endOffset};this.onParseError(u)}onItemPush(e,n,r){var s,o;(o=(s=this.treeAdapter).onItemPush)===null||o===void 0||o.call(s,e),r&&this.openElements.stackTop>0&&this._setContextModes(e,n)}onItemPop(e,n){var r,s;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(s=(r=this.treeAdapter).onItemPop)===null||s===void 0||s.call(r,e,this.openElements.current),n){let o,u;this.openElements.stackTop===0&&this.fragmentContext?(o=this.fragmentContext,u=this.fragmentContextID):{current:o,currentTagId:u}=this.openElements,this._setContextModes(o,u)}}_setContextModes(e,n){const r=e===this.document||e&&this.treeAdapter.getNamespaceURI(e)===Ne.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&e!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,e)}_switchToTextParsing(e,n){this._insertElement(e,Ne.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=Z.TEXT}switchToPlaintextParsing(){this.insertionMode=Z.TEXT,this.originalInsertionMode=Z.IN_BODY,this.tokenizer.state=Rn.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===ce.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Ne.HTML))switch(this.fragmentContextID){case b.TITLE:case b.TEXTAREA:{this.tokenizer.state=Rn.RCDATA;break}case b.STYLE:case b.XMP:case b.IFRAME:case b.NOEMBED:case b.NOFRAMES:case b.NOSCRIPT:{this.tokenizer.state=Rn.RAWTEXT;break}case b.SCRIPT:{this.tokenizer.state=Rn.SCRIPT_DATA;break}case b.PLAINTEXT:{this.tokenizer.state=Rn.PLAINTEXT;break}}}_setDocumentType(e){const n=e.name||"",r=e.publicId||"",s=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,s),e.location){const u=this.treeAdapter.getChildNodes(this.document).find(c=>this.treeAdapter.isDocumentTypeNode(c));u&&this.treeAdapter.setNodeSourceCodeLocation(u,e.location)}}_attachElementToTree(e,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(e,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r??this.document,e)}}_appendElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location)}_insertElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location),this.openElements.push(r,e.tagID)}_insertFakeElement(e,n){const r=this.treeAdapter.createElement(e,Ne.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(e){const n=this.treeAdapter.createElement(e.tagName,Ne.HTML,e.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(ce.HTML,Ne.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,b.HTML)}_appendCommentNode(e,n){const r=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,e.location)}_insertCharacters(e){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,e.chars,r):this.treeAdapter.insertText(n,e.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,e.chars)),!e.location)return;const s=this.treeAdapter.getChildNodes(n),o=r?s.lastIndexOf(r):s.length,u=s[o-1];if(this.treeAdapter.getNodeSourceCodeLocation(u)){const{endLine:d,endCol:f,endOffset:m}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(u,{endLine:d,endCol:f,endOffset:m})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(u,e.location)}_adoptNodes(e,n){for(let r=this.treeAdapter.getFirstChild(e);r;r=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(e,n){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&n.location){const r=n.location,s=this.treeAdapter.getTagName(e),o=n.type===mt.END_TAG&&s===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,o)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,e.tagID===b.SVG&&this.treeAdapter.getTagName(n)===ce.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Ne.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===b.MGLYPH||e.tagID===b.MALIGNMARK)&&r!==void 0&&!this._isIntegrationPoint(r,n,Ne.HTML)}_processToken(e){switch(e.type){case mt.CHARACTER:{this.onCharacter(e);break}case mt.NULL_CHARACTER:{this.onNullCharacter(e);break}case mt.COMMENT:{this.onComment(e);break}case mt.DOCTYPE:{this.onDoctype(e);break}case mt.START_TAG:{this._processStartTag(e);break}case mt.END_TAG:{this.onEndTag(e);break}case mt.EOF:{this.onEof(e);break}case mt.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,n,r){const s=this.treeAdapter.getNamespaceURI(n),o=this.treeAdapter.getAttrList(n);return i$(e,s,o,r)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const n=this.activeFormattingElements.entries.findIndex(s=>s.type===Is.Marker||this.openElements.contains(s.element)),r=n===-1?e-1:n-1;for(let s=r;s>=0;s--){const o=this.activeFormattingElements.entries[s];this._insertElement(o.token,this.treeAdapter.getNamespaceURI(o.element)),o.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=Z.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(b.P),this.openElements.popUntilTagNamePopped(b.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case b.TR:{this.insertionMode=Z.IN_ROW;return}case b.TBODY:case b.THEAD:case b.TFOOT:{this.insertionMode=Z.IN_TABLE_BODY;return}case b.CAPTION:{this.insertionMode=Z.IN_CAPTION;return}case b.COLGROUP:{this.insertionMode=Z.IN_COLUMN_GROUP;return}case b.TABLE:{this.insertionMode=Z.IN_TABLE;return}case b.BODY:{this.insertionMode=Z.IN_BODY;return}case b.FRAMESET:{this.insertionMode=Z.IN_FRAMESET;return}case b.SELECT:{this._resetInsertionModeForSelect(e);return}case b.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case b.HTML:{this.insertionMode=this.headElement?Z.AFTER_HEAD:Z.BEFORE_HEAD;return}case b.TD:case b.TH:{if(e>0){this.insertionMode=Z.IN_CELL;return}break}case b.HEAD:{if(e>0){this.insertionMode=Z.IN_HEAD;return}break}}this.insertionMode=Z.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let n=e-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===b.TEMPLATE)break;if(r===b.TABLE){this.insertionMode=Z.IN_SELECT_IN_TABLE;return}}this.insertionMode=Z.IN_SELECT}_isElementCausesFosterParenting(e){return Q3.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const n=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case b.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Ne.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case b.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,e,n.beforeElement):this.treeAdapter.appendChild(n.parent,e)}_isSpecialElement(e,n){const r=this.treeAdapter.getNamespaceURI(e);return CG[r].has(n)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){UX(this,e);return}switch(this.insertionMode){case Z.INITIAL:{Eh(this,e);break}case Z.BEFORE_HTML:{Vh(this,e);break}case Z.BEFORE_HEAD:{Hh(this,e);break}case Z.IN_HEAD:{zh(this,e);break}case Z.IN_HEAD_NO_SCRIPT:{Fh(this,e);break}case Z.AFTER_HEAD:{jh(this,e);break}case Z.IN_BODY:case Z.IN_CAPTION:case Z.IN_CELL:case Z.IN_TEMPLATE:{Z3(this,e);break}case Z.TEXT:case Z.IN_SELECT:case Z.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case Z.IN_TABLE:case Z.IN_TABLE_BODY:case Z.IN_ROW:{rE(this,e);break}case Z.IN_TABLE_TEXT:{iD(this,e);break}case Z.IN_COLUMN_GROUP:{Em(this,e);break}case Z.AFTER_BODY:{_m(this,e);break}case Z.AFTER_AFTER_BODY:{L0(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){BX(this,e);return}switch(this.insertionMode){case Z.INITIAL:{Eh(this,e);break}case Z.BEFORE_HTML:{Vh(this,e);break}case Z.BEFORE_HEAD:{Hh(this,e);break}case Z.IN_HEAD:{zh(this,e);break}case Z.IN_HEAD_NO_SCRIPT:{Fh(this,e);break}case Z.AFTER_HEAD:{jh(this,e);break}case Z.TEXT:{this._insertCharacters(e);break}case Z.IN_TABLE:case Z.IN_TABLE_BODY:case Z.IN_ROW:{rE(this,e);break}case Z.IN_COLUMN_GROUP:{Em(this,e);break}case Z.AFTER_BODY:{_m(this,e);break}case Z.AFTER_AFTER_BODY:{L0(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){l1(this,e);return}switch(this.insertionMode){case Z.INITIAL:case Z.BEFORE_HTML:case Z.BEFORE_HEAD:case Z.IN_HEAD:case Z.IN_HEAD_NO_SCRIPT:case Z.AFTER_HEAD:case Z.IN_BODY:case Z.IN_TABLE:case Z.IN_CAPTION:case Z.IN_COLUMN_GROUP:case Z.IN_TABLE_BODY:case Z.IN_ROW:case Z.IN_CELL:case Z.IN_SELECT:case Z.IN_SELECT_IN_TABLE:case Z.IN_TEMPLATE:case Z.IN_FRAMESET:case Z.AFTER_FRAMESET:{l1(this,e);break}case Z.IN_TABLE_TEXT:{_h(this,e);break}case Z.AFTER_BODY:{p$(this,e);break}case Z.AFTER_AFTER_BODY:case Z.AFTER_AFTER_FRAMESET:{g$(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case Z.INITIAL:{y$(this,e);break}case Z.BEFORE_HEAD:case Z.IN_HEAD:case Z.IN_HEAD_NO_SCRIPT:case Z.AFTER_HEAD:{this._err(e,Ee.misplacedDoctype);break}case Z.IN_TABLE_TEXT:{_h(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,Ee.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?VX(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case Z.INITIAL:{Eh(this,e);break}case Z.BEFORE_HTML:{E$(this,e);break}case Z.BEFORE_HEAD:{b$(this,e);break}case Z.IN_HEAD:{os(this,e);break}case Z.IN_HEAD_NO_SCRIPT:{S$(this,e);break}case Z.AFTER_HEAD:{x$(this,e);break}case Z.IN_BODY:{Rr(this,e);break}case Z.IN_TABLE:{ql(this,e);break}case Z.IN_TABLE_TEXT:{_h(this,e);break}case Z.IN_CAPTION:{TX(this,e);break}case Z.IN_COLUMN_GROUP:{Z_(this,e);break}case Z.IN_TABLE_BODY:{ap(this,e);break}case Z.IN_ROW:{op(this,e);break}case Z.IN_CELL:{AX(this,e);break}case Z.IN_SELECT:{oD(this,e);break}case Z.IN_SELECT_IN_TABLE:{wX(this,e);break}case Z.IN_TEMPLATE:{CX(this,e);break}case Z.AFTER_BODY:{RX(this,e);break}case Z.IN_FRAMESET:{DX(this,e);break}case Z.AFTER_FRAMESET:{kX(this,e);break}case Z.AFTER_AFTER_BODY:{MX(this,e);break}case Z.AFTER_AFTER_FRAMESET:{LX(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?HX(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case Z.INITIAL:{Eh(this,e);break}case Z.BEFORE_HTML:{_$(this,e);break}case Z.BEFORE_HEAD:{T$(this,e);break}case Z.IN_HEAD:{v$(this,e);break}case Z.IN_HEAD_NO_SCRIPT:{A$(this,e);break}case Z.AFTER_HEAD:{w$(this,e);break}case Z.IN_BODY:{sp(this,e);break}case Z.TEXT:{hX(this,e);break}case Z.IN_TABLE:{hd(this,e);break}case Z.IN_TABLE_TEXT:{_h(this,e);break}case Z.IN_CAPTION:{vX(this,e);break}case Z.IN_COLUMN_GROUP:{SX(this,e);break}case Z.IN_TABLE_BODY:{c1(this,e);break}case Z.IN_ROW:{aD(this,e);break}case Z.IN_CELL:{xX(this,e);break}case Z.IN_SELECT:{uD(this,e);break}case Z.IN_SELECT_IN_TABLE:{IX(this,e);break}case Z.IN_TEMPLATE:{NX(this,e);break}case Z.AFTER_BODY:{cD(this,e);break}case Z.IN_FRAMESET:{OX(this,e);break}case Z.AFTER_FRAMESET:{PX(this,e);break}case Z.AFTER_AFTER_BODY:{L0(this,e);break}}}onEof(e){switch(this.insertionMode){case Z.INITIAL:{Eh(this,e);break}case Z.BEFORE_HTML:{Vh(this,e);break}case Z.BEFORE_HEAD:{Hh(this,e);break}case Z.IN_HEAD:{zh(this,e);break}case Z.IN_HEAD_NO_SCRIPT:{Fh(this,e);break}case Z.AFTER_HEAD:{jh(this,e);break}case Z.IN_BODY:case Z.IN_TABLE:case Z.IN_CAPTION:case Z.IN_COLUMN_GROUP:case Z.IN_TABLE_BODY:case Z.IN_ROW:case Z.IN_CELL:case Z.IN_SELECT:case Z.IN_SELECT_IN_TABLE:{nD(this,e);break}case Z.TEXT:{dX(this,e);break}case Z.IN_TABLE_TEXT:{_h(this,e);break}case Z.IN_TEMPLATE:{lD(this,e);break}case Z.AFTER_BODY:case Z.IN_FRAMESET:case Z.AFTER_FRAMESET:case Z.AFTER_AFTER_BODY:case Z.AFTER_AFTER_FRAMESET:{W_(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===K.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case Z.IN_HEAD:case Z.IN_HEAD_NO_SCRIPT:case Z.AFTER_HEAD:case Z.TEXT:case Z.IN_COLUMN_GROUP:case Z.IN_SELECT:case Z.IN_SELECT_IN_TABLE:case Z.IN_FRAMESET:case Z.AFTER_FRAMESET:{this._insertCharacters(e);break}case Z.IN_BODY:case Z.IN_CAPTION:case Z.IN_CELL:case Z.IN_TEMPLATE:case Z.AFTER_BODY:case Z.AFTER_AFTER_BODY:case Z.AFTER_AFTER_FRAMESET:{W3(this,e);break}case Z.IN_TABLE:case Z.IN_TABLE_BODY:case Z.IN_ROW:{rE(this,e);break}case Z.IN_TABLE_TEXT:{rD(this,e);break}}}}function l$(t,e){let n=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return n?t.openElements.contains(n.element)?t.openElements.hasInScope(e.tagID)||(n=null):(t.activeFormattingElements.removeEntry(n),n=null):tD(t,e),n}function c$(t,e){let n=null,r=t.openElements.stackTop;for(;r>=0;r--){const s=t.openElements.items[r];if(s===e.element)break;t._isSpecialElement(s,t.openElements.tagIDs[r])&&(n=s)}return n||(t.openElements.shortenToLength(Math.max(r,0)),t.activeFormattingElements.removeEntry(e)),n}function h$(t,e,n){let r=e,s=t.openElements.getCommonAncestor(e);for(let o=0,u=s;u!==n;o++,u=s){s=t.openElements.getCommonAncestor(u);const c=t.activeFormattingElements.getElementEntry(u),d=c&&o>=o$;!c||d?(d&&t.activeFormattingElements.removeEntry(c),t.openElements.remove(u)):(u=d$(t,c),r===e&&(t.activeFormattingElements.bookmark=c),t.treeAdapter.detachNode(r),t.treeAdapter.appendChild(u,r),r=u)}return r}function d$(t,e){const n=t.treeAdapter.getNamespaceURI(e.element),r=t.treeAdapter.createElement(e.token.tagName,n,e.token.attrs);return t.openElements.replace(e.element,r),e.element=r,r}function f$(t,e,n){const r=t.treeAdapter.getTagName(e),s=ic(r);if(t._isElementCausesFosterParenting(s))t._fosterParentElement(n);else{const o=t.treeAdapter.getNamespaceURI(e);s===b.TEMPLATE&&o===Ne.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,n)}}function m$(t,e,n){const r=t.treeAdapter.getNamespaceURI(n.element),{token:s}=n,o=t.treeAdapter.createElement(s.tagName,r,s.attrs);t._adoptNodes(e,o),t.treeAdapter.appendChild(e,o),t.activeFormattingElements.insertElementAfterBookmark(o,s),t.activeFormattingElements.removeEntry(n),t.openElements.remove(n.element),t.openElements.insertAfter(e,o,s.tagID)}function Q_(t,e){for(let n=0;n<a$;n++){const r=l$(t,e);if(!r)break;const s=c$(t,r);if(!s)break;t.activeFormattingElements.bookmark=r;const o=h$(t,s,r.element),u=t.openElements.getCommonAncestor(r.element);t.treeAdapter.detachNode(o),u&&f$(t,u,o),m$(t,s,r)}}function l1(t,e){t._appendCommentNode(e,t.openElements.currentTmplContentOrNode)}function p$(t,e){t._appendCommentNode(e,t.openElements.items[0])}function g$(t,e){t._appendCommentNode(e,t.document)}function W_(t,e){if(t.stopped=!0,e.location){const n=t.fragmentContext?0:2;for(let r=t.openElements.stackTop;r>=n;r--)t._setEndLocation(t.openElements.items[r],e);if(!t.fragmentContext&&t.openElements.stackTop>=0){const r=t.openElements.items[0],s=t.treeAdapter.getNodeSourceCodeLocation(r);if(s&&!s.endTag&&(t._setEndLocation(r,e),t.openElements.stackTop>=1)){const o=t.openElements.items[1],u=t.treeAdapter.getNodeSourceCodeLocation(o);u&&!u.endTag&&t._setEndLocation(o,e)}}}}function y$(t,e){t._setDocumentType(e);const n=e.forceQuirks?Fi.QUIRKS:$G(e);GG(e)||t._err(e,Ee.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,n),t.insertionMode=Z.BEFORE_HTML}function Eh(t,e){t._err(e,Ee.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,Fi.QUIRKS),t.insertionMode=Z.BEFORE_HTML,t._processToken(e)}function E$(t,e){e.tagID===b.HTML?(t._insertElement(e,Ne.HTML),t.insertionMode=Z.BEFORE_HEAD):Vh(t,e)}function _$(t,e){const n=e.tagID;(n===b.HTML||n===b.HEAD||n===b.BODY||n===b.BR)&&Vh(t,e)}function Vh(t,e){t._insertFakeRootElement(),t.insertionMode=Z.BEFORE_HEAD,t._processToken(e)}function b$(t,e){switch(e.tagID){case b.HTML:{Rr(t,e);break}case b.HEAD:{t._insertElement(e,Ne.HTML),t.headElement=t.openElements.current,t.insertionMode=Z.IN_HEAD;break}default:Hh(t,e)}}function T$(t,e){const n=e.tagID;n===b.HEAD||n===b.BODY||n===b.HTML||n===b.BR?Hh(t,e):t._err(e,Ee.endTagWithoutMatchingOpenElement)}function Hh(t,e){t._insertFakeElement(ce.HEAD,b.HEAD),t.headElement=t.openElements.current,t.insertionMode=Z.IN_HEAD,t._processToken(e)}function os(t,e){switch(e.tagID){case b.HTML:{Rr(t,e);break}case b.BASE:case b.BASEFONT:case b.BGSOUND:case b.LINK:case b.META:{t._appendElement(e,Ne.HTML),e.ackSelfClosing=!0;break}case b.TITLE:{t._switchToTextParsing(e,Rn.RCDATA);break}case b.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(e,Rn.RAWTEXT):(t._insertElement(e,Ne.HTML),t.insertionMode=Z.IN_HEAD_NO_SCRIPT);break}case b.NOFRAMES:case b.STYLE:{t._switchToTextParsing(e,Rn.RAWTEXT);break}case b.SCRIPT:{t._switchToTextParsing(e,Rn.SCRIPT_DATA);break}case b.TEMPLATE:{t._insertTemplate(e),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=Z.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(Z.IN_TEMPLATE);break}case b.HEAD:{t._err(e,Ee.misplacedStartTagForHeadElement);break}default:zh(t,e)}}function v$(t,e){switch(e.tagID){case b.HEAD:{t.openElements.pop(),t.insertionMode=Z.AFTER_HEAD;break}case b.BODY:case b.BR:case b.HTML:{zh(t,e);break}case b.TEMPLATE:{vu(t,e);break}default:t._err(e,Ee.endTagWithoutMatchingOpenElement)}}function vu(t,e){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==b.TEMPLATE&&t._err(e,Ee.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(b.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(e,Ee.endTagWithoutMatchingOpenElement)}function zh(t,e){t.openElements.pop(),t.insertionMode=Z.AFTER_HEAD,t._processToken(e)}function S$(t,e){switch(e.tagID){case b.HTML:{Rr(t,e);break}case b.BASEFONT:case b.BGSOUND:case b.HEAD:case b.LINK:case b.META:case b.NOFRAMES:case b.STYLE:{os(t,e);break}case b.NOSCRIPT:{t._err(e,Ee.nestedNoscriptInHead);break}default:Fh(t,e)}}function A$(t,e){switch(e.tagID){case b.NOSCRIPT:{t.openElements.pop(),t.insertionMode=Z.IN_HEAD;break}case b.BR:{Fh(t,e);break}default:t._err(e,Ee.endTagWithoutMatchingOpenElement)}}function Fh(t,e){const n=e.type===mt.EOF?Ee.openElementsLeftAfterEof:Ee.disallowedContentInNoscriptInHead;t._err(e,n),t.openElements.pop(),t.insertionMode=Z.IN_HEAD,t._processToken(e)}function x$(t,e){switch(e.tagID){case b.HTML:{Rr(t,e);break}case b.BODY:{t._insertElement(e,Ne.HTML),t.framesetOk=!1,t.insertionMode=Z.IN_BODY;break}case b.FRAMESET:{t._insertElement(e,Ne.HTML),t.insertionMode=Z.IN_FRAMESET;break}case b.BASE:case b.BASEFONT:case b.BGSOUND:case b.LINK:case b.META:case b.NOFRAMES:case b.SCRIPT:case b.STYLE:case b.TEMPLATE:case b.TITLE:{t._err(e,Ee.abandonedHeadElementChild),t.openElements.push(t.headElement,b.HEAD),os(t,e),t.openElements.remove(t.headElement);break}case b.HEAD:{t._err(e,Ee.misplacedStartTagForHeadElement);break}default:jh(t,e)}}function w$(t,e){switch(e.tagID){case b.BODY:case b.HTML:case b.BR:{jh(t,e);break}case b.TEMPLATE:{vu(t,e);break}default:t._err(e,Ee.endTagWithoutMatchingOpenElement)}}function jh(t,e){t._insertFakeElement(ce.BODY,b.BODY),t.insertionMode=Z.IN_BODY,ip(t,e)}function ip(t,e){switch(e.type){case mt.CHARACTER:{Z3(t,e);break}case mt.WHITESPACE_CHARACTER:{W3(t,e);break}case mt.COMMENT:{l1(t,e);break}case mt.START_TAG:{Rr(t,e);break}case mt.END_TAG:{sp(t,e);break}case mt.EOF:{nD(t,e);break}}}function W3(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function Z3(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function I$(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function C$(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(n,e.attrs))}function N$(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&n&&(t.treeAdapter.detachNode(n),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,Ne.HTML),t.insertionMode=Z.IN_FRAMESET)}function R$(t,e){t.openElements.hasInButtonScope(b.P)&&t._closePElement(),t._insertElement(e,Ne.HTML)}function D$(t,e){t.openElements.hasInButtonScope(b.P)&&t._closePElement(),t.openElements.currentTagId!==void 0&&u1.has(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(e,Ne.HTML)}function O$(t,e){t.openElements.hasInButtonScope(b.P)&&t._closePElement(),t._insertElement(e,Ne.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function k$(t,e){const n=t.openElements.tmplCount>0;(!t.formElement||n)&&(t.openElements.hasInButtonScope(b.P)&&t._closePElement(),t._insertElement(e,Ne.HTML),n||(t.formElement=t.openElements.current))}function P$(t,e){t.framesetOk=!1;const n=e.tagID;for(let r=t.openElements.stackTop;r>=0;r--){const s=t.openElements.tagIDs[r];if(n===b.LI&&s===b.LI||(n===b.DD||n===b.DT)&&(s===b.DD||s===b.DT)){t.openElements.generateImpliedEndTagsWithExclusion(s),t.openElements.popUntilTagNamePopped(s);break}if(s!==b.ADDRESS&&s!==b.DIV&&s!==b.P&&t._isSpecialElement(t.openElements.items[r],s))break}t.openElements.hasInButtonScope(b.P)&&t._closePElement(),t._insertElement(e,Ne.HTML)}function M$(t,e){t.openElements.hasInButtonScope(b.P)&&t._closePElement(),t._insertElement(e,Ne.HTML),t.tokenizer.state=Rn.PLAINTEXT}function L$(t,e){t.openElements.hasInScope(b.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(b.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,Ne.HTML),t.framesetOk=!1}function B$(t,e){const n=t.activeFormattingElements.getElementEntryInScopeWithTagName(ce.A);n&&(Q_(t,e),t.openElements.remove(n.element),t.activeFormattingElements.removeEntry(n)),t._reconstructActiveFormattingElements(),t._insertElement(e,Ne.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function U$(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Ne.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function V$(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(b.NOBR)&&(Q_(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,Ne.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function H$(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Ne.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function z$(t,e){t.treeAdapter.getDocumentMode(t.document)!==Fi.QUIRKS&&t.openElements.hasInButtonScope(b.P)&&t._closePElement(),t._insertElement(e,Ne.HTML),t.framesetOk=!1,t.insertionMode=Z.IN_TABLE}function J3(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,Ne.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function eD(t){const e=F3(t,au.TYPE);return e!=null&&e.toLowerCase()===s$}function F$(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,Ne.HTML),eD(e)||(t.framesetOk=!1),e.ackSelfClosing=!0}function j$(t,e){t._appendElement(e,Ne.HTML),e.ackSelfClosing=!0}function q$(t,e){t.openElements.hasInButtonScope(b.P)&&t._closePElement(),t._appendElement(e,Ne.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function Y$(t,e){e.tagName=ce.IMG,e.tagID=b.IMG,J3(t,e)}function G$(t,e){t._insertElement(e,Ne.HTML),t.skipNextNewLine=!0,t.tokenizer.state=Rn.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=Z.TEXT}function $$(t,e){t.openElements.hasInButtonScope(b.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,Rn.RAWTEXT)}function X$(t,e){t.framesetOk=!1,t._switchToTextParsing(e,Rn.RAWTEXT)}function Nw(t,e){t._switchToTextParsing(e,Rn.RAWTEXT)}function K$(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Ne.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===Z.IN_TABLE||t.insertionMode===Z.IN_CAPTION||t.insertionMode===Z.IN_TABLE_BODY||t.insertionMode===Z.IN_ROW||t.insertionMode===Z.IN_CELL?Z.IN_SELECT_IN_TABLE:Z.IN_SELECT}function Q$(t,e){t.openElements.currentTagId===b.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,Ne.HTML)}function W$(t,e){t.openElements.hasInScope(b.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,Ne.HTML)}function Z$(t,e){t.openElements.hasInScope(b.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(b.RTC),t._insertElement(e,Ne.HTML)}function J$(t,e){t._reconstructActiveFormattingElements(),X3(e),K_(e),e.selfClosing?t._appendElement(e,Ne.MATHML):t._insertElement(e,Ne.MATHML),e.ackSelfClosing=!0}function eX(t,e){t._reconstructActiveFormattingElements(),K3(e),K_(e),e.selfClosing?t._appendElement(e,Ne.SVG):t._insertElement(e,Ne.SVG),e.ackSelfClosing=!0}function Rw(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Ne.HTML)}function Rr(t,e){switch(e.tagID){case b.I:case b.S:case b.B:case b.U:case b.EM:case b.TT:case b.BIG:case b.CODE:case b.FONT:case b.SMALL:case b.STRIKE:case b.STRONG:{U$(t,e);break}case b.A:{B$(t,e);break}case b.H1:case b.H2:case b.H3:case b.H4:case b.H5:case b.H6:{D$(t,e);break}case b.P:case b.DL:case b.OL:case b.UL:case b.DIV:case b.DIR:case b.NAV:case b.MAIN:case b.MENU:case b.ASIDE:case b.CENTER:case b.FIGURE:case b.FOOTER:case b.HEADER:case b.HGROUP:case b.DIALOG:case b.DETAILS:case b.ADDRESS:case b.ARTICLE:case b.SEARCH:case b.SECTION:case b.SUMMARY:case b.FIELDSET:case b.BLOCKQUOTE:case b.FIGCAPTION:{R$(t,e);break}case b.LI:case b.DD:case b.DT:{P$(t,e);break}case b.BR:case b.IMG:case b.WBR:case b.AREA:case b.EMBED:case b.KEYGEN:{J3(t,e);break}case b.HR:{q$(t,e);break}case b.RB:case b.RTC:{W$(t,e);break}case b.RT:case b.RP:{Z$(t,e);break}case b.PRE:case b.LISTING:{O$(t,e);break}case b.XMP:{$$(t,e);break}case b.SVG:{eX(t,e);break}case b.HTML:{I$(t,e);break}case b.BASE:case b.LINK:case b.META:case b.STYLE:case b.TITLE:case b.SCRIPT:case b.BGSOUND:case b.BASEFONT:case b.TEMPLATE:{os(t,e);break}case b.BODY:{C$(t,e);break}case b.FORM:{k$(t,e);break}case b.NOBR:{V$(t,e);break}case b.MATH:{J$(t,e);break}case b.TABLE:{z$(t,e);break}case b.INPUT:{F$(t,e);break}case b.PARAM:case b.TRACK:case b.SOURCE:{j$(t,e);break}case b.IMAGE:{Y$(t,e);break}case b.BUTTON:{L$(t,e);break}case b.APPLET:case b.OBJECT:case b.MARQUEE:{H$(t,e);break}case b.IFRAME:{X$(t,e);break}case b.SELECT:{K$(t,e);break}case b.OPTION:case b.OPTGROUP:{Q$(t,e);break}case b.NOEMBED:case b.NOFRAMES:{Nw(t,e);break}case b.FRAMESET:{N$(t,e);break}case b.TEXTAREA:{G$(t,e);break}case b.NOSCRIPT:{t.options.scriptingEnabled?Nw(t,e):Rw(t,e);break}case b.PLAINTEXT:{M$(t,e);break}case b.COL:case b.TH:case b.TD:case b.TR:case b.HEAD:case b.FRAME:case b.TBODY:case b.TFOOT:case b.THEAD:case b.CAPTION:case b.COLGROUP:break;default:Rw(t,e)}}function tX(t,e){if(t.openElements.hasInScope(b.BODY)&&(t.insertionMode=Z.AFTER_BODY,t.options.sourceCodeLocationInfo)){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t._setEndLocation(n,e)}}function nX(t,e){t.openElements.hasInScope(b.BODY)&&(t.insertionMode=Z.AFTER_BODY,cD(t,e))}function rX(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n))}function iX(t){const e=t.openElements.tmplCount>0,{formElement:n}=t;e||(t.formElement=null),(n||e)&&t.openElements.hasInScope(b.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(b.FORM):n&&t.openElements.remove(n))}function sX(t){t.openElements.hasInButtonScope(b.P)||t._insertFakeElement(ce.P,b.P),t._closePElement()}function aX(t){t.openElements.hasInListItemScope(b.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(b.LI),t.openElements.popUntilTagNamePopped(b.LI))}function oX(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.popUntilTagNamePopped(n))}function uX(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function lX(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker())}function cX(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(ce.BR,b.BR),t.openElements.pop(),t.framesetOk=!1}function tD(t,e){const n=e.tagName,r=e.tagID;for(let s=t.openElements.stackTop;s>0;s--){const o=t.openElements.items[s],u=t.openElements.tagIDs[s];if(r===u&&(r!==b.UNKNOWN||t.treeAdapter.getTagName(o)===n)){t.openElements.generateImpliedEndTagsWithExclusion(r),t.openElements.stackTop>=s&&t.openElements.shortenToLength(s);break}if(t._isSpecialElement(o,u))break}}function sp(t,e){switch(e.tagID){case b.A:case b.B:case b.I:case b.S:case b.U:case b.EM:case b.TT:case b.BIG:case b.CODE:case b.FONT:case b.NOBR:case b.SMALL:case b.STRIKE:case b.STRONG:{Q_(t,e);break}case b.P:{sX(t);break}case b.DL:case b.UL:case b.OL:case b.DIR:case b.DIV:case b.NAV:case b.PRE:case b.MAIN:case b.MENU:case b.ASIDE:case b.BUTTON:case b.CENTER:case b.FIGURE:case b.FOOTER:case b.HEADER:case b.HGROUP:case b.DIALOG:case b.ADDRESS:case b.ARTICLE:case b.DETAILS:case b.SEARCH:case b.SECTION:case b.SUMMARY:case b.LISTING:case b.FIELDSET:case b.BLOCKQUOTE:case b.FIGCAPTION:{rX(t,e);break}case b.LI:{aX(t);break}case b.DD:case b.DT:{oX(t,e);break}case b.H1:case b.H2:case b.H3:case b.H4:case b.H5:case b.H6:{uX(t);break}case b.BR:{cX(t);break}case b.BODY:{tX(t,e);break}case b.HTML:{nX(t,e);break}case b.FORM:{iX(t);break}case b.APPLET:case b.OBJECT:case b.MARQUEE:{lX(t,e);break}case b.TEMPLATE:{vu(t,e);break}default:tD(t,e)}}function nD(t,e){t.tmplInsertionModeStack.length>0?lD(t,e):W_(t,e)}function hX(t,e){var n;e.tagID===b.SCRIPT&&((n=t.scriptHandler)===null||n===void 0||n.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function dX(t,e){t._err(e,Ee.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(e)}function rE(t,e){if(t.openElements.currentTagId!==void 0&&Q3.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=Z.IN_TABLE_TEXT,e.type){case mt.CHARACTER:{iD(t,e);break}case mt.WHITESPACE_CHARACTER:{rD(t,e);break}}else Od(t,e)}function fX(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,Ne.HTML),t.insertionMode=Z.IN_CAPTION}function mX(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,Ne.HTML),t.insertionMode=Z.IN_COLUMN_GROUP}function pX(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(ce.COLGROUP,b.COLGROUP),t.insertionMode=Z.IN_COLUMN_GROUP,Z_(t,e)}function gX(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,Ne.HTML),t.insertionMode=Z.IN_TABLE_BODY}function yX(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(ce.TBODY,b.TBODY),t.insertionMode=Z.IN_TABLE_BODY,ap(t,e)}function EX(t,e){t.openElements.hasInTableScope(b.TABLE)&&(t.openElements.popUntilTagNamePopped(b.TABLE),t._resetInsertionMode(),t._processStartTag(e))}function _X(t,e){eD(e)?t._appendElement(e,Ne.HTML):Od(t,e),e.ackSelfClosing=!0}function bX(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,Ne.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function ql(t,e){switch(e.tagID){case b.TD:case b.TH:case b.TR:{yX(t,e);break}case b.STYLE:case b.SCRIPT:case b.TEMPLATE:{os(t,e);break}case b.COL:{pX(t,e);break}case b.FORM:{bX(t,e);break}case b.TABLE:{EX(t,e);break}case b.TBODY:case b.TFOOT:case b.THEAD:{gX(t,e);break}case b.INPUT:{_X(t,e);break}case b.CAPTION:{fX(t,e);break}case b.COLGROUP:{mX(t,e);break}default:Od(t,e)}}function hd(t,e){switch(e.tagID){case b.TABLE:{t.openElements.hasInTableScope(b.TABLE)&&(t.openElements.popUntilTagNamePopped(b.TABLE),t._resetInsertionMode());break}case b.TEMPLATE:{vu(t,e);break}case b.BODY:case b.CAPTION:case b.COL:case b.COLGROUP:case b.HTML:case b.TBODY:case b.TD:case b.TFOOT:case b.TH:case b.THEAD:case b.TR:break;default:Od(t,e)}}function Od(t,e){const n=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,ip(t,e),t.fosterParentingEnabled=n}function rD(t,e){t.pendingCharacterTokens.push(e)}function iD(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function _h(t,e){let n=0;if(t.hasNonWhitespacePendingCharacterToken)for(;n<t.pendingCharacterTokens.length;n++)Od(t,t.pendingCharacterTokens[n]);else for(;n<t.pendingCharacterTokens.length;n++)t._insertCharacters(t.pendingCharacterTokens[n]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}const sD=new Set([b.CAPTION,b.COL,b.COLGROUP,b.TBODY,b.TD,b.TFOOT,b.TH,b.THEAD,b.TR]);function TX(t,e){const n=e.tagID;sD.has(n)?t.openElements.hasInTableScope(b.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(b.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=Z.IN_TABLE,ql(t,e)):Rr(t,e)}function vX(t,e){const n=e.tagID;switch(n){case b.CAPTION:case b.TABLE:{t.openElements.hasInTableScope(b.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(b.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=Z.IN_TABLE,n===b.TABLE&&hd(t,e));break}case b.BODY:case b.COL:case b.COLGROUP:case b.HTML:case b.TBODY:case b.TD:case b.TFOOT:case b.TH:case b.THEAD:case b.TR:break;default:sp(t,e)}}function Z_(t,e){switch(e.tagID){case b.HTML:{Rr(t,e);break}case b.COL:{t._appendElement(e,Ne.HTML),e.ackSelfClosing=!0;break}case b.TEMPLATE:{os(t,e);break}default:Em(t,e)}}function SX(t,e){switch(e.tagID){case b.COLGROUP:{t.openElements.currentTagId===b.COLGROUP&&(t.openElements.pop(),t.insertionMode=Z.IN_TABLE);break}case b.TEMPLATE:{vu(t,e);break}case b.COL:break;default:Em(t,e)}}function Em(t,e){t.openElements.currentTagId===b.COLGROUP&&(t.openElements.pop(),t.insertionMode=Z.IN_TABLE,t._processToken(e))}function ap(t,e){switch(e.tagID){case b.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(e,Ne.HTML),t.insertionMode=Z.IN_ROW;break}case b.TH:case b.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(ce.TR,b.TR),t.insertionMode=Z.IN_ROW,op(t,e);break}case b.CAPTION:case b.COL:case b.COLGROUP:case b.TBODY:case b.TFOOT:case b.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=Z.IN_TABLE,ql(t,e));break}default:ql(t,e)}}function c1(t,e){const n=e.tagID;switch(e.tagID){case b.TBODY:case b.TFOOT:case b.THEAD:{t.openElements.hasInTableScope(n)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=Z.IN_TABLE);break}case b.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=Z.IN_TABLE,hd(t,e));break}case b.BODY:case b.CAPTION:case b.COL:case b.COLGROUP:case b.HTML:case b.TD:case b.TH:case b.TR:break;default:hd(t,e)}}function op(t,e){switch(e.tagID){case b.TH:case b.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(e,Ne.HTML),t.insertionMode=Z.IN_CELL,t.activeFormattingElements.insertMarker();break}case b.CAPTION:case b.COL:case b.COLGROUP:case b.TBODY:case b.TFOOT:case b.THEAD:case b.TR:{t.openElements.hasInTableScope(b.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=Z.IN_TABLE_BODY,ap(t,e));break}default:ql(t,e)}}function aD(t,e){switch(e.tagID){case b.TR:{t.openElements.hasInTableScope(b.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=Z.IN_TABLE_BODY);break}case b.TABLE:{t.openElements.hasInTableScope(b.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=Z.IN_TABLE_BODY,c1(t,e));break}case b.TBODY:case b.TFOOT:case b.THEAD:{(t.openElements.hasInTableScope(e.tagID)||t.openElements.hasInTableScope(b.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=Z.IN_TABLE_BODY,c1(t,e));break}case b.BODY:case b.CAPTION:case b.COL:case b.COLGROUP:case b.HTML:case b.TD:case b.TH:break;default:hd(t,e)}}function AX(t,e){const n=e.tagID;sD.has(n)?(t.openElements.hasInTableScope(b.TD)||t.openElements.hasInTableScope(b.TH))&&(t._closeTableCell(),op(t,e)):Rr(t,e)}function xX(t,e){const n=e.tagID;switch(n){case b.TD:case b.TH:{t.openElements.hasInTableScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=Z.IN_ROW);break}case b.TABLE:case b.TBODY:case b.TFOOT:case b.THEAD:case b.TR:{t.openElements.hasInTableScope(n)&&(t._closeTableCell(),aD(t,e));break}case b.BODY:case b.CAPTION:case b.COL:case b.COLGROUP:case b.HTML:break;default:sp(t,e)}}function oD(t,e){switch(e.tagID){case b.HTML:{Rr(t,e);break}case b.OPTION:{t.openElements.currentTagId===b.OPTION&&t.openElements.pop(),t._insertElement(e,Ne.HTML);break}case b.OPTGROUP:{t.openElements.currentTagId===b.OPTION&&t.openElements.pop(),t.openElements.currentTagId===b.OPTGROUP&&t.openElements.pop(),t._insertElement(e,Ne.HTML);break}case b.HR:{t.openElements.currentTagId===b.OPTION&&t.openElements.pop(),t.openElements.currentTagId===b.OPTGROUP&&t.openElements.pop(),t._appendElement(e,Ne.HTML),e.ackSelfClosing=!0;break}case b.INPUT:case b.KEYGEN:case b.TEXTAREA:case b.SELECT:{t.openElements.hasInSelectScope(b.SELECT)&&(t.openElements.popUntilTagNamePopped(b.SELECT),t._resetInsertionMode(),e.tagID!==b.SELECT&&t._processStartTag(e));break}case b.SCRIPT:case b.TEMPLATE:{os(t,e);break}}}function uD(t,e){switch(e.tagID){case b.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===b.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===b.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===b.OPTGROUP&&t.openElements.pop();break}case b.OPTION:{t.openElements.currentTagId===b.OPTION&&t.openElements.pop();break}case b.SELECT:{t.openElements.hasInSelectScope(b.SELECT)&&(t.openElements.popUntilTagNamePopped(b.SELECT),t._resetInsertionMode());break}case b.TEMPLATE:{vu(t,e);break}}}function wX(t,e){const n=e.tagID;n===b.CAPTION||n===b.TABLE||n===b.TBODY||n===b.TFOOT||n===b.THEAD||n===b.TR||n===b.TD||n===b.TH?(t.openElements.popUntilTagNamePopped(b.SELECT),t._resetInsertionMode(),t._processStartTag(e)):oD(t,e)}function IX(t,e){const n=e.tagID;n===b.CAPTION||n===b.TABLE||n===b.TBODY||n===b.TFOOT||n===b.THEAD||n===b.TR||n===b.TD||n===b.TH?t.openElements.hasInTableScope(n)&&(t.openElements.popUntilTagNamePopped(b.SELECT),t._resetInsertionMode(),t.onEndTag(e)):uD(t,e)}function CX(t,e){switch(e.tagID){case b.BASE:case b.BASEFONT:case b.BGSOUND:case b.LINK:case b.META:case b.NOFRAMES:case b.SCRIPT:case b.STYLE:case b.TEMPLATE:case b.TITLE:{os(t,e);break}case b.CAPTION:case b.COLGROUP:case b.TBODY:case b.TFOOT:case b.THEAD:{t.tmplInsertionModeStack[0]=Z.IN_TABLE,t.insertionMode=Z.IN_TABLE,ql(t,e);break}case b.COL:{t.tmplInsertionModeStack[0]=Z.IN_COLUMN_GROUP,t.insertionMode=Z.IN_COLUMN_GROUP,Z_(t,e);break}case b.TR:{t.tmplInsertionModeStack[0]=Z.IN_TABLE_BODY,t.insertionMode=Z.IN_TABLE_BODY,ap(t,e);break}case b.TD:case b.TH:{t.tmplInsertionModeStack[0]=Z.IN_ROW,t.insertionMode=Z.IN_ROW,op(t,e);break}default:t.tmplInsertionModeStack[0]=Z.IN_BODY,t.insertionMode=Z.IN_BODY,Rr(t,e)}}function NX(t,e){e.tagID===b.TEMPLATE&&vu(t,e)}function lD(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(b.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(e)):W_(t,e)}function RX(t,e){e.tagID===b.HTML?Rr(t,e):_m(t,e)}function cD(t,e){var n;if(e.tagID===b.HTML){if(t.fragmentContext||(t.insertionMode=Z.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===b.HTML){t._setEndLocation(t.openElements.items[0],e);const r=t.openElements.items[1];r&&!(!((n=t.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&t._setEndLocation(r,e)}}else _m(t,e)}function _m(t,e){t.insertionMode=Z.IN_BODY,ip(t,e)}function DX(t,e){switch(e.tagID){case b.HTML:{Rr(t,e);break}case b.FRAMESET:{t._insertElement(e,Ne.HTML);break}case b.FRAME:{t._appendElement(e,Ne.HTML),e.ackSelfClosing=!0;break}case b.NOFRAMES:{os(t,e);break}}}function OX(t,e){e.tagID===b.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==b.FRAMESET&&(t.insertionMode=Z.AFTER_FRAMESET))}function kX(t,e){switch(e.tagID){case b.HTML:{Rr(t,e);break}case b.NOFRAMES:{os(t,e);break}}}function PX(t,e){e.tagID===b.HTML&&(t.insertionMode=Z.AFTER_AFTER_FRAMESET)}function MX(t,e){e.tagID===b.HTML?Rr(t,e):L0(t,e)}function L0(t,e){t.insertionMode=Z.IN_BODY,ip(t,e)}function LX(t,e){switch(e.tagID){case b.HTML:{Rr(t,e);break}case b.NOFRAMES:{os(t,e);break}}}function BX(t,e){e.chars=mn,t._insertCharacters(e)}function UX(t,e){t._insertCharacters(e),t.framesetOk=!1}function hD(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==Ne.HTML&&t.openElements.currentTagId!==void 0&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function VX(t,e){if(e$(e))hD(t),t._startTagOutsideForeignContent(e);else{const n=t._getAdjustedCurrentElement(),r=t.treeAdapter.getNamespaceURI(n);r===Ne.MATHML?X3(e):r===Ne.SVG&&(t$(e),K3(e)),K_(e),e.selfClosing?t._appendElement(e,r):t._insertElement(e,r),e.ackSelfClosing=!0}}function HX(t,e){if(e.tagID===b.P||e.tagID===b.BR){hD(t),t._endTagOutsideForeignContent(e);return}for(let n=t.openElements.stackTop;n>0;n--){const r=t.openElements.items[n];if(t.treeAdapter.getNamespaceURI(r)===Ne.HTML){t._endTagOutsideForeignContent(e);break}const s=t.treeAdapter.getTagName(r);if(s.toLowerCase()===e.tagName){e.tagName=s,t.openElements.shortenToLength(n);break}}}ce.AREA,ce.BASE,ce.BASEFONT,ce.BGSOUND,ce.BR,ce.COL,ce.EMBED,ce.FRAME,ce.HR,ce.IMG,ce.INPUT,ce.KEYGEN,ce.LINK,ce.META,ce.PARAM,ce.SOURCE,ce.TRACK,ce.WBR;const zX=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,FX=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Dw={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function dD(t,e){const n=ZX(t),r=B3("type",{handlers:{root:jX,element:qX,text:YX,comment:mD,doctype:GX,raw:XX},unknown:KX}),s={parser:n?new Cw(Dw):Cw.getFragmentParser(void 0,Dw),handle(c){r(c,s)},stitches:!1,options:e||{}};r(t,s),sc(s,Hs());const o=n?s.parser.document:s.parser.getFragment(),u=jY(o,{file:s.options.file});return s.stitches&&q_(u,"comment",function(c,d,f){const m=c;if(m.value.stitch&&f&&d!==void 0){const y=f.children;return y[d]=m.value.stitch,d}}),u.type==="root"&&u.children.length===1&&u.children[0].type===t.type?u.children[0]:u}function fD(t,e){let n=-1;if(t)for(;++n<t.length;)e.handle(t[n])}function jX(t,e){fD(t.children,e)}function qX(t,e){QX(t,e),fD(t.children,e),WX(t,e)}function YX(t,e){e.parser.tokenizer.state>4&&(e.parser.tokenizer.state=0);const n={type:mt.CHARACTER,chars:t.value,location:kd(t)};sc(e,Hs(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function GX(t,e){const n={type:mt.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:kd(t)};sc(e,Hs(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function $X(t,e){e.stitches=!0;const n=JX(t);if("children"in t&&"children"in n){const r=dD({type:"root",children:t.children},e.options);n.children=r.children}mD({type:"comment",value:{stitch:n}},e)}function mD(t,e){const n=t.value,r={type:mt.COMMENT,data:n,location:kd(t)};sc(e,Hs(t)),e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken)}function XX(t,e){if(e.parser.tokenizer.preprocessor.html="",e.parser.tokenizer.preprocessor.pos=-1,e.parser.tokenizer.preprocessor.lastGapPos=-2,e.parser.tokenizer.preprocessor.gapStack=[],e.parser.tokenizer.preprocessor.skipNextNewLine=!1,e.parser.tokenizer.preprocessor.lastChunkWritten=!1,e.parser.tokenizer.preprocessor.endOfChunkHit=!1,e.parser.tokenizer.preprocessor.isEol=!1,pD(e,Hs(t)),e.parser.tokenizer.write(e.options.tagfilter?t.value.replace(zX,"&lt;$1$2"):t.value,!1),e.parser.tokenizer._runParsingLoop(),e.parser.tokenizer.state===72||e.parser.tokenizer.state===78){e.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=e.parser.tokenizer._consume();e.parser.tokenizer._callState(n)}}function KX(t,e){const n=t;if(e.options.passThrough&&e.options.passThrough.includes(n.type))$X(n,e);else{let r="";throw FX.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function sc(t,e){pD(t,e);const n=t.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=t.parser.tokenizer.preprocessor.line,n.location.endCol=t.parser.tokenizer.preprocessor.col+1,n.location.endOffset=t.parser.tokenizer.preprocessor.offset+1,t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)),t.parser.tokenizer.paused=!1,t.parser.tokenizer.inLoop=!1,t.parser.tokenizer.active=!1,t.parser.tokenizer.returnState=Rn.DATA,t.parser.tokenizer.charRefCode=-1,t.parser.tokenizer.consumedAfterSnapshot=-1,t.parser.tokenizer.currentLocation=null,t.parser.tokenizer.currentCharacterToken=null,t.parser.tokenizer.currentToken=null,t.parser.tokenizer.currentAttr={name:"",value:""}}function pD(t,e){if(e&&e.offset!==void 0){const n={startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:-1,endCol:-1,endOffset:-1};t.parser.tokenizer.preprocessor.lineStartPos=-e.column+1,t.parser.tokenizer.preprocessor.droppedBufferSize=e.offset,t.parser.tokenizer.preprocessor.line=e.line,t.parser.tokenizer.currentLocation=n}}function QX(t,e){const n=t.tagName.toLowerCase();if(e.parser.tokenizer.state===Rn.PLAINTEXT)return;sc(e,Hs(t));const r=e.parser.openElements.current;let s="namespaceURI"in r?r.namespaceURI:iu.html;s===iu.html&&n==="svg"&&(s=iu.svg);const o=iG({...t,children:[]},{space:s===iu.svg?"svg":"html"}),u={type:mt.START_TAG,tagName:n,tagID:ic(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in o?o.attrs:[],location:kd(t)};e.parser.currentToken=u,e.parser._processToken(e.parser.currentToken),e.parser.tokenizer.lastStartTagName=n}function WX(t,e){const n=t.tagName.toLowerCase();if(!e.parser.tokenizer.inForeignNode&&dG.includes(n)||e.parser.tokenizer.state===Rn.PLAINTEXT)return;sc(e,ep(t));const r={type:mt.END_TAG,tagName:n,tagID:ic(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:kd(t)};e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken),n===e.parser.tokenizer.lastStartTagName&&(e.parser.tokenizer.state===Rn.RCDATA||e.parser.tokenizer.state===Rn.RAWTEXT||e.parser.tokenizer.state===Rn.SCRIPT_DATA)&&(e.parser.tokenizer.state=Rn.DATA)}function ZX(t){const e=t.type==="root"?t.children[0]:t;return!!(e&&(e.type==="doctype"||e.type==="element"&&e.tagName.toLowerCase()==="html"))}function kd(t){const e=Hs(t)||{line:void 0,column:void 0,offset:void 0},n=ep(t)||{line:void 0,column:void 0,offset:void 0};return{startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function JX(t){return"children"in t?jl({...t,children:[]}):jl(t)}function eK(t){return function(e,n){return dD(e,{...t,file:n})}}function tK({explanation:t,onClose:e,isVisible:n}){return n?F.jsxs("div",{className:"h-full flex flex-col",children:[F.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200/50 dark:border-gray-700/50",children:[F.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[F.jsx("span",{className:"text-blue-500",children:""}),"Explanation"]}),F.jsx("button",{className:`text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 
                             p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700/50 
                             transition-all duration-200 transform hover:scale-105`,onClick:e,title:"Close explanation","aria-label":"Close explanation sidebar",children:F.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:F.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),F.jsx("div",{className:"p-6 overflow-y-auto flex-1 scrollbar-thin",children:t?F.jsxs(F.Fragment,{children:[F.jsx("div",{className:"mb-6",children:F.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 leading-tight",children:t.title})}),F.jsx("div",{className:`prose prose-gray dark:prose-invert max-w-none text-gray-700 dark:text-gray-300
                                      [&>h1]:text-gray-900 [&>h1]:dark:text-gray-100 [&>h1]:text-2xl [&>h1]:font-bold [&>h1]:mb-4 [&>h1]:mt-6
                                      [&>h2]:text-gray-900 [&>h2]:dark:text-gray-100 [&>h2]:text-xl [&>h2]:font-semibold [&>h2]:mb-3 [&>h2]:mt-5
                                      [&>h3]:text-gray-900 [&>h3]:dark:text-gray-100 [&>h3]:text-lg [&>h3]:font-medium [&>h3]:mb-2 [&>h3]:mt-4
                                      [&>p]:text-gray-700 [&>p]:dark:text-gray-300 [&>p]:leading-relaxed [&>p]:mb-4
                                      [&>ul]:text-gray-700 [&>ul]:dark:text-gray-300 [&>ul]:mb-4 [&>ul>li]:mb-2
                                      [&>ol]:text-gray-700 [&>ol]:dark:text-gray-300 [&>ol]:mb-4 [&>ol>li]:mb-2
                                      [&>blockquote]:border-l-4 [&>blockquote]:border-blue-400 [&>blockquote]:pl-4 [&>blockquote]:italic [&>blockquote]:text-gray-600 [&>blockquote]:dark:text-gray-400 [&>blockquote]:bg-blue-50 [&>blockquote]:dark:bg-blue-900/20 [&>blockquote]:py-2 [&>blockquote]:rounded-r-lg
                                      [&>code]:bg-gray-100 [&>code]:dark:bg-gray-800 [&>code]:text-blue-600 [&>code]:dark:text-blue-400 [&>code]:px-2 [&>code]:py-1 [&>code]:rounded [&>code]:text-sm [&>code]:font-medium
                                      [&>pre]:bg-gray-100 [&>pre]:dark:bg-gray-800 [&>pre]:text-gray-800 [&>pre]:dark:text-gray-200 [&>pre]:p-4 [&>pre]:rounded-lg [&>pre]:overflow-x-auto [&>pre]:mb-4 [&>pre]:border [&>pre]:border-gray-200 [&>pre]:dark:border-gray-700`,children:F.jsx(CY,{rehypePlugins:[eK],children:t.text})})]}):F.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:F.jsxs("div",{className:"text-center",children:[F.jsx("div",{className:"text-6xl mb-6 opacity-60",children:""}),F.jsx("p",{className:"text-xl font-medium mb-2",children:"No explanation available"}),F.jsx("p",{className:"text-sm opacity-75",children:"Click on a node to see its explanation"})]})})})]}):null}const gD=te.createContext(void 0),nK=()=>{const t=te.useContext(gD);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},rK=({children:t})=>{const[e,n]=te.useState(()=>{const s=localStorage.getItem("theme");return s||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});te.useEffect(()=>{const s=window.document.documentElement;s.classList.remove("light","dark"),s.classList.add(e),localStorage.setItem("theme",e)},[e]);const r=()=>{n(s=>s==="light"?"dark":"light")};return F.jsx(gD.Provider,{value:{theme:e,toggleTheme:r},children:t})},yD=()=>{const{theme:t,toggleTheme:e}=nK();return F.jsx("button",{onClick:e,className:`p-2.5 rounded-xl bg-gray-200/80 dark:bg-gray-800/80 text-gray-700 dark:text-gray-300 
                     hover:bg-gray-300/80 dark:hover:bg-gray-700/80 border border-gray-300/60 dark:border-gray-700/60
                     hover:border-gray-400/60 dark:hover:border-gray-600/60 transition-all duration-200 
                     focus:outline-none focus:ring-2 focus:ring-indigo-500/30 dark:focus:ring-indigo-400/30
                     backdrop-blur-sm shadow-sm hover:shadow-md`,title:`Switch to ${t==="light"?"dark":"light"} mode`,"aria-label":`Switch to ${t==="light"?"dark":"light"} mode`,children:t==="light"?F.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:F.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):F.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:F.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})})})};function iK({name:t,onSetName:e,user:n,isSaving:r}){const[s,o]=te.useState(!1),[u,c]=te.useState(t||"");te.useEffect(()=>{c(t||"")},[t]);const d=m=>{m.key==="Enter"&&(e(u),o(!1))},f=()=>{o(!0),c(t||"")};return F.jsx(F.Fragment,{children:F.jsx("div",{className:"name bg-gray-900 dark:bg-gray-950 border-b border-gray-700 dark:border-gray-800",children:F.jsx("div",{className:"app-container max-w-7xl mx-auto px-4",children:F.jsxs("header",{className:"app-header flex justify-between items-center py-4",children:[F.jsxs("div",{className:"flex items-center gap-4",children:[F.jsxs("div",{className:"flex items-center space-x-2",children:[F.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:F.jsx("span",{className:"text-white font-bold text-sm",children:"T"})}),F.jsx("h1",{className:"text-xl font-bold text-white dark:text-white",children:"TinkFlow"})]}),F.jsx("span",{className:"text-slate-500 dark:text-slate-500 text-sm",children:""}),s?F.jsx("input",{type:"text",value:u,onChange:m=>c(m.target.value),onKeyDown:d,onBlur:()=>{e(u),o(!1)},className:`bg-gray-800 dark:bg-gray-800 border border-white/20 dark:border-white/20 
                                             rounded px-2 py-1 text-slate-100 dark:text-slate-100 text-sm min-w-[120px]
                                             focus:outline-none focus:border-blue-400 dark:focus:border-blue-400`,autoFocus:!0}):F.jsx("button",{onClick:f,className:`bg-transparent border-none text-slate-400 dark:text-slate-400 text-sm cursor-pointer 
                                             px-2 py-1 rounded transition-all duration-150 ease-in-out
                                             hover:bg-white/5 dark:hover:bg-white/5 hover:text-slate-100 dark:hover:text-slate-100`,children:t||"Untitled Board"})]}),F.jsxs("div",{className:"user-info flex items-center gap-3",children:[F.jsx(yD,{}),F.jsx("p",{className:"text-slate-700 dark:text-slate-300 text-sm font-medium",children:n?.isAnonymous?"Guest":n?.email?.split("@")[0]||"User"}),r&&F.jsxs("div",{className:`text-emerald-500 dark:text-emerald-400 text-sm flex items-center gap-2 
                                               bg-emerald-50 dark:bg-emerald-900/20 px-3 py-1.5 rounded-full border border-emerald-200 dark:border-emerald-700/50
                                               animate-pulse`,children:[F.jsx("div",{className:"w-2 h-2 bg-emerald-500 dark:bg-emerald-400 rounded-full animate-bounce"}),F.jsx("span",{className:"font-medium",children:"Saving..."})]})]})]})})})})}const sK=({notification:t,onRemove:e})=>{const n=s=>{switch(s){case"success":return"";case"error":return"";case"warning":return"";case"info":return"";default:return""}},r=s=>{switch(s){case"success":return"bg-green-900/20 dark:bg-green-900/30 border-green-500/30 dark:border-green-500/40 text-green-300 dark:text-green-400";case"error":return"bg-red-900/20 dark:bg-red-900/30 border-red-500/30 dark:border-red-500/40 text-red-300 dark:text-red-400";case"warning":return"bg-yellow-900/20 dark:bg-yellow-900/30 border-yellow-500/30 dark:border-yellow-500/40 text-yellow-300 dark:text-yellow-400";case"info":return"bg-blue-900/20 dark:bg-blue-900/30 border-blue-500/30 dark:border-blue-500/40 text-blue-300 dark:text-blue-400";default:return"bg-gray-900/20 dark:bg-gray-900/30 border-gray-500/30 dark:border-gray-500/40 text-gray-300 dark:text-gray-400"}};return F.jsxs("div",{className:`notification relative min-w-80 max-w-md p-4 rounded-xl border shadow-2xl backdrop-blur-sm                         transform transition-all duration-300 ease-out hover:scale-[1.02] hover:shadow-3xl                        ${r(t.type)}`,children:[" ",F.jsxs("div",{className:"flex items-start gap-3",children:[" ",F.jsxs("span",{className:"text-lg flex-shrink-0 mt-0.5",children:[" ",n(t.type)," "]})," ",F.jsxs("div",{className:"flex-1 min-w-0",children:[" ",F.jsxs("p",{className:"text-sm font-medium leading-5 break-words",children:[" ",t.message," "]})," "]})," ",F.jsxs("button",{onClick:()=>e(t.id),className:"flex-shrink-0 text-gray-400 dark:text-gray-500 hover:text-gray-200 dark:hover:text-gray-300                              hover:bg-gray-700/50 dark:hover:bg-gray-600/50                              rounded-full p-1 transition-all duration-200                              focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20","aria-label":"Close notification",children:[" ",F.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[" ",F.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})," "]})," "]})," "]})," "]})},aK=({notifications:t,onRemove:e})=>F.jsxs("div",{className:"notification-container fixed top-4 right-4 space-y-3 z-[2000] pointer-events-none",children:[" ",t.map(n=>F.jsxs("div",{className:"pointer-events-auto",children:[" ",F.jsx(sK,{notification:n,onRemove:e})," "]},n.id))," "]});function oK({onLogin:t}){return F.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 antialiased",children:[" "," ",F.jsxs("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50",children:[" ",F.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",F.jsxs("div",{className:"flex justify-between items-center py-4",children:[" ",F.jsxs("div",{className:"flex items-center space-x-3",children:[" ",F.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",F.jsx("span",{className:"text-white font-bold text-lg",children:"T"})," "]})," ",F.jsxs("div",{className:"flex flex-col",children:[" ",F.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white tracking-tight",children:"TinkFlow"})," ",F.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"AI Learning Platform"})," "]})," "]})," ",F.jsxs("div",{className:"flex items-center gap-4",children:[" ",F.jsx(yD,{})," ",F.jsxs("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors duration-200",children:[" ","Get Started"," "]})," "]})," "]})," "]})," "]})," "," ",F.jsxs("section",{className:"relative overflow-hidden",children:[" ",F.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-32",children:[" ",F.jsxs("div",{className:"text-center",children:[" ",F.jsxs("div",{className:"inline-flex items-center gap-2 bg-indigo-50 dark:bg-indigo-900/20 px-4 py-2 rounded-full mb-8",children:[" ",F.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"})," ",F.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 font-medium text-sm",children:"AI-Powered Concept Learning"})," "]})," ",F.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-gray-900 dark:text-white mb-6 leading-tight",children:[" ","Learn & Tinker with"," ",F.jsxs("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent block",children:[" ","AI-Powered Concepts"," "]})," "]})," ",F.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-3xl mx-auto leading-relaxed",children:[" ","TinkFlow is the ultimate AI-powered platform for exploring, understanding, and experimenting with new concepts. Transform your learning journey with interactive visual flows and intelligent insights."," "]})," ",F.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[" ",F.jsxs("button",{onClick:t,className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning Now"," "]})," ",F.jsxs("button",{className:"px-8 py-4 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-semibold text-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",children:[" ","Watch Demo"," "]})," "]})," "]})," "]})," "," ",F.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-indigo-400 to-purple-500 rounded-full opacity-10 blur-3xl"})," ",F.jsx("div",{className:"absolute top-1/4 right-1/4 w-64 h-64 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full opacity-10 blur-2xl"})," "]})," "," ",F.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",F.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",F.jsxs("div",{className:"text-center mb-16",children:[" ",F.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Everything You Need to Learn"," "]})," ",F.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","AI-powered tools and features designed to accelerate your learning and conceptual understanding"," "]})," "]})," ",F.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",F.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-indigo-200 dark:border-indigo-700/50 hover:transform hover:-translate-y-1",children:[" ",F.jsxs("div",{className:"w-14 h-14 bg-indigo-500 rounded-xl flex items-center justify-center mb-6",children:[" ",F.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})," "]})," "]})," ",F.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI-Powered Insights"," "]})," ",F.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Get intelligent explanations and connections between concepts powered by advanced AI that understands your learning style."," "]})," "]})," ",F.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-purple-200 dark:border-purple-700/50 hover:transform hover:-translate-y-1",children:[" ",F.jsxs("div",{className:"w-14 h-14 bg-purple-500 rounded-xl flex items-center justify-center mb-6",children:[" ",F.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"})," "]})," "]})," ",F.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Interactive Visual Flows"," "]})," ",F.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Build and explore concept maps with interactive nodes that respond to your curiosity and create dynamic learning pathways."," "]})," "]})," ",F.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-green-200 dark:border-green-700/50 hover:transform hover:-translate-y-1",children:[" ",F.jsxs("div",{className:"w-14 h-14 bg-green-500 rounded-xl flex items-center justify-center mb-6",children:[" ",F.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})," "]})," "]})," ",F.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Experimentation Sandbox"," "]})," ",F.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Tinker with concepts in a safe, guided environment where you can test ideas and see instant results with AI feedback."," "]})," "]})," "]})," "]})," "]})," "," ",F.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",F.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",F.jsxs("div",{className:"text-center mb-16",children:[" ",F.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","How TinkFlow Works"," "]})," ",F.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Three simple steps to unlock your learning potential with AI-powered concept exploration"," "]})," "]})," ",F.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",F.jsxs("div",{className:"text-center",children:[" ",F.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",F.jsx("span",{className:"text-white font-bold text-xl",children:"1"})," "]})," ",F.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Input Your Concept"," "]})," ",F.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Start by entering any topic, question, or concept you want to explore. Our AI understands context and complexity."," "]})," "]})," ",F.jsxs("div",{className:"text-center",children:[" ",F.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",F.jsx("span",{className:"text-white font-bold text-xl",children:"2"})," "]})," ",F.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI Generates Flow"," "]})," ",F.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Watch as TinkFlow creates an interactive visual map with connected nodes, each representing key aspects of your concept."," "]})," "]})," ",F.jsxs("div",{className:"text-center",children:[" ",F.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",F.jsx("span",{className:"text-white font-bold text-xl",children:"3"})," "]})," ",F.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Explore & Learn"," "]})," ",F.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Click on any node to dive deeper, ask questions, and watch new connections emerge as you explore your learning path."," "]})," "]})," "]})," "]})," "]})," "," ",F.jsxs("section",{className:"py-20 bg-gradient-to-r from-indigo-500 to-purple-600",children:[" ",F.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",F.jsxs("div",{className:"grid md:grid-cols-4 gap-8 text-center",children:[" ",F.jsxs("div",{className:"text-white",children:[" ",F.jsx("div",{className:"text-4xl font-bold mb-2",children:"10K+"})," ",F.jsx("div",{className:"text-indigo-100",children:"Concepts Explored"})," "]})," ",F.jsxs("div",{className:"text-white",children:[" ",F.jsx("div",{className:"text-4xl font-bold mb-2",children:"5K+"})," ",F.jsx("div",{className:"text-indigo-100",children:"Active Learners"})," "]})," ",F.jsxs("div",{className:"text-white",children:[" ",F.jsx("div",{className:"text-4xl font-bold mb-2",children:"98%"})," ",F.jsx("div",{className:"text-indigo-100",children:"Learning Success"})," "]})," ",F.jsxs("div",{className:"text-white",children:[" ",F.jsx("div",{className:"text-4xl font-bold mb-2",children:"24/7"})," ",F.jsx("div",{className:"text-indigo-100",children:"AI Support"})," "]})," "]})," "]})," "]})," "," ",F.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",F.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",F.jsxs("div",{className:"text-center mb-16",children:[" ",F.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Perfect for Every Learning Style"," "]})," ",F.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Whether you're a student, researcher, or curious mind, TinkFlow adapts to your learning needs"," "]})," "]})," ",F.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[" ",F.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/10 dark:to-blue-800/10 p-8 rounded-2xl border border-blue-200 dark:border-blue-700/30",children:[" ",F.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Academic Learning"," "]})," ",F.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Break down complex academic subjects into digestible, interconnected concepts. Perfect for studying sciences, humanities, and technical topics."," "]})," ",F.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",F.jsx("li",{children:" Research paper analysis"})," ",F.jsx("li",{children:" Concept mapping for exams"})," ",F.jsx("li",{children:" Cross-disciplinary connections"})," "]})," "]})," ",F.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/10 dark:to-purple-800/10 p-8 rounded-2xl border border-purple-200 dark:border-purple-700/30",children:[" ",F.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Creative Exploration"," "]})," ",F.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Explore ideas, brainstorm solutions, and discover unexpected connections. Great for creative professionals and innovators."," "]})," ",F.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",F.jsx("li",{children:" Idea generation workflows"})," ",F.jsx("li",{children:" Problem-solving frameworks"})," ",F.jsx("li",{children:" Innovation mapping"})," "]})," "]})," ",F.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/10 dark:to-green-800/10 p-8 rounded-2xl border border-green-200 dark:border-green-700/30",children:[" ",F.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Technical Deep Dives"," "]})," ",F.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Understand complex systems, architectures, and technologies through interactive exploration and AI-guided explanations."," "]})," ",F.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",F.jsx("li",{children:" System architecture learning"})," ",F.jsx("li",{children:" Technology stack exploration"})," ",F.jsx("li",{children:" Code concept mapping"})," "]})," "]})," ",F.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/10 dark:to-orange-800/10 p-8 rounded-2xl border border-orange-200 dark:border-orange-700/30",children:[" ",F.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Professional Development"," "]})," ",F.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Build skills, understand industry trends, and create learning paths for career advancement with AI-powered insights."," "]})," ",F.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",F.jsx("li",{children:" Skill gap analysis"})," ",F.jsx("li",{children:" Career pathway planning"})," ",F.jsx("li",{children:" Industry trend mapping"})," "]})," "]})," "]})," "]})," "]})," "," ",F.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",F.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[" ",F.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-6",children:[" ","Ready to Transform Your Learning?"," "]})," ",F.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10",children:[" ","Join thousands of learners who are already exploring concepts in revolutionary ways with TinkFlow's AI-powered platform."," "]})," ",F.jsxs("button",{onClick:t,className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-12 py-4 rounded-xl text-lg font-semibold hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning for Free"," "]})," ",F.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:[" ","No credit card required  Get started in seconds"," "]})," "]})," "]})," "," ",F.jsxs("footer",{className:"bg-gray-900 text-white py-12",children:[" ",F.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",F.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[" ",F.jsxs("div",{className:"col-span-1",children:[" ",F.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[" ",F.jsxs("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",F.jsx("span",{className:"text-white font-bold text-sm",children:"T"})," "]})," ",F.jsx("span",{className:"text-xl font-bold",children:"TinkFlow"})," "]})," ",F.jsxs("p",{className:"text-gray-400 text-sm",children:[" ","AI-powered concept learning platform for curious minds."," "]})," "]})," ",F.jsxs("div",{children:[" ",F.jsx("h4",{className:"font-semibold mb-4",children:"Product"})," ",F.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",F.jsx("li",{children:F.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Features"})})," ",F.jsx("li",{children:F.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Pricing"})})," ",F.jsx("li",{children:F.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"API"})})," "]})," "]})," ",F.jsxs("div",{children:[" ",F.jsx("h4",{className:"font-semibold mb-4",children:"Resources"})," ",F.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",F.jsx("li",{children:F.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Documentation"})})," ",F.jsx("li",{children:F.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Tutorials"})})," ",F.jsx("li",{children:F.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Blog"})})," "]})," "]})," ",F.jsxs("div",{children:[" ",F.jsx("h4",{className:"font-semibold mb-4",children:"Company"})," ",F.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",F.jsx("li",{children:F.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About"})})," ",F.jsx("li",{children:F.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})})," ",F.jsx("li",{children:F.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy"})})," "]})," "]})," "]})," ",F.jsxs("div",{className:"border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[" ",F.jsxs("p",{className:"text-gray-400 text-sm",children:[" "," 2024 TinkFlow. All rights reserved."," "]})," ",F.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[" ",F.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",F.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",F.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})," "]})," "]})," ",F.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",F.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",F.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})," "]})," "]})," ",F.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",F.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",F.jsx("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.747.099.12.112.225.085.344-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.001 12.017z"})," "]})," "]})," "]})," "]})," "]})," "]})," "]})}const uK=async()=>{try{await PV(pm),console.log("User signed out successfully")}catch(t){throw console.error("Error signing out:",t),t}},lK=()=>{const[t,e]=te.useState(null);return te.useEffect(()=>{const r=kV(pm,s=>{e(s),s?console.log("User signed in:",s.uid):console.log("No user signed in")});return()=>r()},[]),{user:t,signOut:async()=>{try{await uK(),e(null)}catch(r){console.error("Error in sign out:",r)}}}},ED=t=>!!(t&&t.uid),qh=[{id:"1",type:"staticEditable",data:{label:"The _artificial intelligence_ system processes _natural language_ effectively",title:"AI & Natural Language",suggestions:["Machine Learning","Neural Networks","Deep Learning"],tokenColors:{},previousNode:null},position:{x:250,y:25},draggable:!1}],Dl=[],cK=async t=>{if(!ED({uid:t}))throw new Error(Fr.AUTH_REQUIRED);try{const e=s_(ss,Si.BOARDS),n=vU(e,SU("userId","==",t),AU("createdAt","desc")),r=await y_(n);if(r.empty){const o={id:`board_${Date.now()}`,userId:t,name:"Default Board",createdAt:ln.now(),isOpen:!0};return await E_(Wl(ss,Si.BOARDS,o.id),o),console.log("Created default board:",o),[o]}const s=r.docs.map(o=>({id:o.id,...o.data()}));return console.log("Fetched all boards:",s),s}catch(e){if(console.error("Fetch all boards error:",e),e.code==="failed-precondition"||e.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:t,name:"Fallback Board (Create Index)",createdAt:ln.now(),isOpen:!0,isFallback:!0}]}throw new Error(Fr.LOAD_FAILED)}},Ow=async t=>{if(!t)return console.warn("No board ID provided for fetching nodes"),qh;try{const e=s_(ss,Si.BOARDS,t,Si.NODES),n=await y_(e);if(n.empty)return console.log("No nodes found for board, using initial nodes"),qh;const r=n.docs.map(s=>{const o=s.data(),u={...o.data,tokenColors:o.data?.tokenColors||{},previousNode:o.data?.previousNode||null};return{id:s.id,type:o.type,position:o.position,data:u,draggable:o.draggable,style:o.style}});return console.log("Fetched nodes from board:",r),r}catch(e){return console.error("Fetch nodes error:",e),qh}},kw=async t=>{if(!t)return console.warn("No board ID provided for fetching edges"),Dl;try{const e=s_(ss,Si.BOARDS,t,Si.EDGES),n=await y_(e);if(n.empty)return console.log("No edges found for board, using initial edges"),Dl;const r=n.docs.map(s=>({id:s.id,...s.data()}));return console.log("Fetched edges from board:",r),r}catch(e){return console.error("Fetch edges error:",e),Dl}},hK=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving nodes:",{boardId:t,nodesCount:e?.length});return}try{const n=sR(ss);e.forEach(r=>{const s=Wl(ss,Si.BOARDS,t,Si.NODES,r.id),o={type:r.type,data:r.data,position:r.position,updatedAt:ln.now()};r.draggable!=null&&(o.draggable=r.draggable),r.style!=null&&(o.style=r.style),n.set(s,o)}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(Fr.SAVE_FAILED)}},dK=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving edges:",{boardId:t,edgesCount:e?.length});return}try{const n=sR(ss);e.forEach(r=>{const s=Wl(ss,Si.BOARDS,t,Si.EDGES,r.id),o={source:r.source,target:r.target,updatedAt:ln.now()};r.sourceHandle!=null&&(o.sourceHandle=r.sourceHandle),r.targetHandle!=null&&(o.targetHandle=r.targetHandle),r.style!=null&&(o.style=r.style),r.markerEnd!=null&&(o.markerEnd=r.markerEnd),n.set(s,o)}),await n.commit(),console.log("Edges saved to board")}catch(n){throw console.error("Save edges error:",n),new Error(Fr.SAVE_FAILED)}},fK=async(t,e,n)=>{if(!ED({uid:t}))throw new Error(Fr.AUTH_REQUIRED);try{const r={id:`board_${Date.now()}`,userId:t,name:e||`Board ${n.length+1}`,createdAt:ln.now(),isOpen:!1};return console.log("Creating board:",r),await E_(Wl(ss,Si.BOARDS,r.id),r),console.log("Board created successfully:",r),r}catch(r){throw console.error("Error creating new board:",r),r.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):r.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},mK=async t=>{if(!t)throw new Error("Board ID is required for deletion");try{await RU(Wl(ss,Si.BOARDS,t)),console.log("Board deleted successfully")}catch(e){throw console.error("Error deleting board:",e),e.code==="permission-denied"?new Error("Permission denied. Cannot delete this board."):e}},dl=async(t,e)=>{if(!t||!e)throw new Error("Board ID and updates are required");try{const n={...e,updatedAt:ln.now()};await E_(Wl(ss,Si.BOARDS,t),n,{merge:!0}),console.log("Board status updated:",n)}catch(n){throw console.error("Error updating board status:",n),n}},pK=t=>{if(!t||!t.data)return t;const e={...t},n={...t.data};return n.title||(n.title=n.label||n.summary||"Node"),n.suggestions||(n.suggestions=[]),e.draggable===void 0&&(e.draggable=!0),e.data=n,e},gK=t=>Array.isArray(t)?t.map(pK):[],yK=(t,e={})=>{const[n,r,s]=ML([]),[o,u,c]=LL([]),[d,f]=te.useState(!0),[m,y]=te.useState(!1),[_,T]=te.useState(!1),[I,N]=te.useState([]),[k,x]=te.useState(null),C=te.useRef(null),{showSuccess:L,showError:M,showInfo:q}=e,B=O=>{const U=O.find(X=>X.isOpen===!0);if(U)return U;if(O.length>0){const X={...O[0],isOpen:!0};return dl(X.id,X).catch(console.error),X}return null};te.useEffect(()=>{(async()=>{if(t)try{f(!0);const U=await cK(t.uid);N(U);const X=U.some(re=>re.isFallback);X&&M&&M("Database index missing. Please create the required Firestore index. Check console for details.");const Y=B(U);if(!Y){console.error("No board found for user"),M&&M("No boards found. Creating a default board..."),r(qh),u(Dl);return}x(Y);const[W,se]=await Promise.all([Ow(Y.id),kw(Y.id)]);r(W),u(se),q&&!X&&q("Board loaded successfully!")}catch(U){console.error("Error loading initial data:",U),M&&M("Failed to load board data. Using default board."),r(qh),u(Dl)}finally{f(!1)}})()},[t,r,u]);const S=async(O,U,X)=>{C.current&&clearTimeout(C.current);const Y=setTimeout(async()=>{try{T(!0);const W=[];U&&U.length>0&&W.push(hK(O,U)),X&&X.length>0&&W.push(dK(O,X)),W.length>0&&(await Promise.all(W),console.log("Auto-save completed successfully"))}catch(W){console.error("Auto-save failed:",W),M&&M("Failed to save changes automatically")}finally{T(!1),C.current=null}},1e3);C.current=Y};te.useEffect(()=>(!d&&k&&!m&&!k.isFallback&&S(k.id,n,o),()=>{C.current&&clearTimeout(C.current)}),[n,o,d,k,m]);const A=async O=>{try{if(k?.id===O)return;if(k?.isFallback||I.find(X=>X.id===O)?.isFallback){M&&M("Cannot switch to fallback board. Please create the missing Firestore index first.");return}if(y(!0),k&&!k.isFallback){const X={...k,isOpen:!1};await dl(k.id,X),N(Y=>Y.map(W=>W.id===k.id?X:W))}const U=I.find(X=>X.id===O);if(U){const X={...U,isOpen:!0};await dl(O,X),x(X),N(re=>re.map(w=>w.id===O?X:w));const[Y,W]=await Promise.all([Ow(O),kw(O)]),se=gK(Y);r(se),u(W),L&&L(`Switched to "${X.name}"`)}else console.error("Board not found:",O),M&&M("Board not found")}catch(U){console.error("Error switching board:",U),M&&M("Failed to switch board. Please try again.")}finally{y(!1)}};return{nodes:n,edges:o,allBoards:I,currentBoard:k,isLoading:d,isSwitchingBoard:m,isSaving:_,onNodesChange:s,onEdgesChange:c,setNodes:r,switchToBoard:A,createNewBoard:async O=>{try{if(!t)return M&&M("You must be logged in to create a board"),null;q&&q("Creating new board...");const U=await fK(t.uid,O||null,I);if(U){if(k&&!k.isFallback){const Y={...k,isOpen:!1};dl(k.id,Y).catch(console.error)}const X={...U,isOpen:!0};return N(Y=>{const W=Y.map(se=>se.id===k?.id?{...se,isOpen:!1}:se);return[X,...W]}),x(X),dl(U.id,X).catch(console.error),r([{id:"1",type:"staticEditable",data:{label:O||"New Board"},position:{x:250,y:25},draggable:!1}]),u(Dl),L&&L(`Board "${U.name}" created and opened!`),X}else return M&&M("Failed to create board. Please try again."),null}catch(U){return M&&M(`Failed to create board: ${U.message}`),null}},deleteBoard:async O=>{try{if(I.length<=1){M&&M("Cannot delete the last board!");return}if(!I.find(X=>X.id===O)){console.error("Board not found for deletion"),M&&M("Board not found");return}if(q&&q("Deleting board..."),k?.id===O){const X=I.find(Y=>Y.id!==O);X&&await A(X.id)}await mK(O),N(X=>X.filter(Y=>Y.id!==O)),L&&L("Board deleted successfully!")}catch(U){console.error("Error deleting board:",U),M&&M("Failed to delete board. Please try again.")}},updateBoardName:async O=>{if(k&&k.name!==O){const U={...k,name:O};x(U),N(X=>X.map(Y=>Y.id===k.id?U:Y));try{await dl(k.id,U),console.log("Board name updated successfully")}catch(X){console.error("Error updating board name:",X)}}},clearBoardState:()=>{C.current&&(clearTimeout(C.current),C.current=null),N([]),x(null),r([]),u([]),f(!0),y(!1),T(!1)}}},EK=()=>{const[t,e]=te.useState([]),n=f=>{e(m=>m.filter(y=>y.id!==f))},r=f=>{const m=Date.now().toString(),y={id:m,timestamp:new Date,...f};return e(_=>[..._,y]),f.autoRemove!==!1&&setTimeout(()=>{n(m)},f.duration||5e3),m};return{notifications:t,addNotification:r,removeNotification:n,clearAllNotifications:()=>{e([])},showSuccess:(f,m={})=>r({type:"success",message:f,...m}),showError:(f,m={})=>r({type:"error",message:f,duration:7e3,...m}),showInfo:(f,m={})=>r({type:"info",message:f,...m}),showWarning:(f,m={})=>r({type:"warning",message:f,duration:6e3,...m})}},_K=()=>{const[t,e]=te.useState({width:window.innerWidth,height:window.innerHeight});return te.useEffect(()=>{const n=()=>{e({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),t},bK=()=>{const{width:t,height:e}=_K(),n=t<768,r=t>=768&&t<1024,s=t>=1024;return{width:t,height:e,isMobile:n,isTablet:r,isDesktop:s,getSidebarWidth:()=>n?250:r?280:300,getExplanationMaxWidth:()=>Math.min(t*.6,800),getExplanationMinWidth:()=>n?320:420}},TK=(t,e)=>{const n=te.useRef(null);return te.useCallback((...s)=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{t(...s)},e)},[t,e])},_D=t=>{const e=[],n=t.split("_");for(let r=0;r<n.length;r++)if(r%2===0)n[r].split(/\s+/).filter(o=>o.trim()!=="").forEach(o=>{e.push({word:o.trim()})});else{const s=n[r].trim();s.split(/\s+/).filter(u=>u.trim()!=="").forEach(u=>{e.push({word:u.trim(),myConcept:s})})}return e},Pw=()=>{const t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];return t[Math.floor(Math.random()*t.length)]},B0=t=>{if(!t)return"#000000";const e=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),r=parseInt(t.substring(5,7),16);return(e*299+n*587+r*114)/1e3>=128?"#000000":"#ffffff"},U0=(t,e)=>{if(!t)return"#000000";let n=t.startsWith("#")?t.substring(1):t;const r=parseInt(n,16),s=255,o=e,u=r>>16,c=r>>8&255,d=r&255,f=Math.round((s-u)*o)+u,m=Math.round((s-c)*o)+c,y=Math.round((s-d)*o)+d;return`#${(16777216+f*65536+m*256+y).toString(16).slice(1)}`},vK=t=>{const e=t.replace("#",""),n=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),s=parseInt(e.substr(4,2),16),o=30,u=Math.min(255,Math.max(0,n+(Math.random()-.5)*o*2)),c=Math.min(255,Math.max(0,r+(Math.random()-.5)*o*2)),d=Math.min(255,Math.max(0,s+(Math.random()-.5)*o*2));return`#${Math.round(u).toString(16).padStart(2,"0")}${Math.round(c).toString(16).padStart(2,"0")}${Math.round(d).toString(16).padStart(2,"0")}`},SK=t=>{const r=(Math.random()-.5)*150*2;return{x:t.x+r,y:t.y+200}},AK=()=>`node_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,xK=(t,e)=>`edge_${t}_${e}`,wK=(t,e,n,r,s,o,u)=>({id:AK(),type:"draggableEditable",position:t,draggable:!0,data:{label:e,title:e,summary:r,full_text:n,suggestions:[],myColor:s,tokenColors:{},previousNode:u}}),IK=(t,e,n,r)=>({id:xK(t,e),source:t,target:e,sourceHandle:r,targetHandle:null,style:{stroke:n,strokeWidth:3},markerEnd:{type:Wh.ArrowClosed,color:n}}),Mw=async t=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const e=t.trim();if(!e)throw new Error("Message cannot be empty or just whitespace");const r=await jR(D_,"groqChat")({message:e});return console.log("groqChat response:",r.data),r.data.response}catch(e){throw console.error("Firebase function error:",e),console.error("Message sent:",t),e}},CK=async(t,e)=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const n=t.trim();if(!n)throw new Error("Message cannot be empty or just whitespace");const r=jR(D_,"groqChat");console.log("Starting streaming request...");const{stream:s,data:o}=await r.stream({message:n});console.log("Stream started, waiting for chunks...");let u="";for await(const d of s)if(console.log("Received chunk:",d),d&&typeof d=="object"&&"type"in d&&"content"in d){const f=d;console.log("Processing chunk:",f),f.type==="chunk"&&f.content&&(u+=f.content,e?.(f.content))}console.log("Waiting for final result...");const c=await o;return console.log("Final result received:",c),c&&typeof c=="object"&&"response"in c?(console.log("Returning final result response"),c.response):(console.log("Returning accumulated response:",u),u)}catch(n){throw console.error("Firebase function streaming error:",n),n}},NK=async(t,e,n)=>{try{const r=`You are an expert educator. Explain the following concept to a beginner.

        Context: ${e}

        Instructions:
        - Highlight every key term with [square-braces], e.g., [variable].
        - Use simple language and practical examples or analogies.
        - Use only correct HTML or MARKDOWN for all formatting (headings, lists, tables, images, code).
        - All HTML elements (including headings, lists, tables, images, code) MUST use inline CSS for styling.
        - For inline CSS, use: <span style="color:#fff;background:#222;padding:4px;border-radius:4px;">example</span>
        - For images: <img src="IMAGE_URL" alt="desc" style="max-width:100%;border-radius:8px;">
        - For code: <pre style="background:#222;color:#fff;padding:8px;border-radius:6px;"><code>console.log("Hello World");</code></pre>
        - For tables: <table style="border-collapse:collapse;width:100%;"><tr><th style="background:#222;color:#fff;padding:6px;">Header</th></tr><tr><td style="padding:6px;">Data</td></tr></table>
        - For lists: <ul style="padding-left:20px;"><li style="margin-bottom:4px;">Item 1</li></ul>
        - No introductions, conclusions, or extra commentary.
        - Start directly with the explanation.

        Concept: `,s=`Summarize in exactly 40 words or less.

        CRITICAL:
        - Preserve ALL [square-braces] concepts exactly
        - Every key concept MUST use [square-braces]
        - NO introductory phrases like "Here is..." or "Summary..."
        - NO bullet points or formatting except [square-braces]
        - Start immediately with summary content
        - ONLY the summary text

        Text to summarize: `,o=`You are an expert educator. Respond ONLY with a valid JSON object in the following format: {"topics": ["[concept1]", "[concept2]", "[concept3]"]}. 

        Instructions:
        - Suggest exactly 3 topics that are logical next steps for learning the given concept.
        - Each topic must be no more than 5 words.
        - Each topic MUST be enclosed in double quotes, e.g., "example topic".
        - Do NOT include any explanation, commentary, or formatting outside the JSON object.
        - Only output the JSON object as specified.

        Concept: `,u=Mw(r+t),c=Mw(o+t);let d="";const f=CK(s+t,x=>{d+=x,n(x)}),[m,y,_]=await Promise.all([u,c,f]);let T=y??"";T=T.replace(/^```json\s*/i,"").replace(/^```\s*/i,"").replace(/```$/i,"");let I=[];const N=T.match(/"(.*?)"/g);N&&(I=N.map(x=>x.replace(/"/g,"")));const k={firstResponse:{response:m?.replace(/\[/g,"_").replace(/\]/g,"_").replace(/```/g,"").replace(/markdown/g,"")},secondResponse:{response:_?.replace(/\[/g,"_").replace(/\]/g,"_").replace(/Here is a summary of the text in exactly 40 words or less:/g,"").replace("/Here is a summary of the text in 40 words or less:/g","")},thirdResponse:{response:I}};return console.log("askAITwice response:",k),k}catch(r){throw console.error("Error in askAITwice:",r),r}},bD=te.createContext(null),RK=({children:t,nodes:e,onNodesChange:n,onEdgesChange:r,setNodes:s,showExplanation:o})=>{const u=(c,d,f,m,y,_,T)=>{const I=e.find(B=>B.id===d);if(!I)return null;const N=I.data.tokenColors||{},k=c.myConcept||c.word;if(N[k])return console.log(`Token "${k}" is already colored, ignoring click`),null;let x;m==="staticEditable"?x=Pw():x=y?vK(y):Pw();const C={...N};c.myConcept?C[c.myConcept]=x:C[c.word]=x,s(B=>B.map(S=>S.id===d?{...S,data:{...S.data,tokenColors:C}}:S));const L=SK(f),M=wK(L,c.word,"Loading...","",x,m,d);M.data.isLoading=!0;const q=IK(d,M.id,x,T);return n([{type:"add",item:M}]),r([{type:"add",item:q}]),NK(c.word,_||"",B=>{s(S=>S.map(A=>{if(A.id===M.id){const D=A.data.summary||"";return{...A,data:{...A.data,label:D+B,summary:D+B}}}return A}))}).then(B=>{const S=B.firstResponse?.response||c.word,A=B.secondResponse?.response||c.word,D=B.thirdResponse?.response||{};s(V=>V.map(H=>H.id===M.id?{...H,data:{...H.data,label:A,title:c.word,summary:A,full_text:S,suggestions:D,isLoading:!1}}:H))}).catch(()=>{s(B=>B.map(S=>S.id===M.id?{...S,data:{...S.data,label:c.word,title:c.word,summary:c.word,full_text:c.word,suggestions:[],isLoading:!1}}:S))}),x};return F.jsx(bD.Provider,{value:{handleTokenClick:u,setNodes:s,showExplanation:o},children:t})},TD=()=>{const t=te.useContext(bD);if(!t)throw new Error("useTokenInteraction must be used within a TokenInteractionProvider");return t},vD=({size:t="medium",color:e="#4f86f7"})=>{const n={small:"w-4 h-4 border-2",medium:"w-8 h-8 border-3",large:"w-12 h-12 border-4"};return F.jsx("div",{className:"flex items-center justify-center",children:F.jsx("div",{className:`${n[t]} border-gray-200 dark:border-gray-700 border-t-indigo-500 dark:border-t-indigo-400 rounded-full animate-spin`,style:{borderTopColor:e}})})};function DK({data:t,id:e}){const[n,r]=te.useState(!1),[s,o]=te.useState(t.summary||t.label||"Static Node"),[u,c]=te.useState(!1),{handleTokenClick:d,showExplanation:f}=TD(),{getNode:m,setViewport:y}=pd();te.useEffect(()=>{n||o(t.summary||t.label||"Static Node")},[t.summary,t.label,n]);const _=_D(s),T=(A,D)=>{D.stopPropagation(),console.log("Static Token clicked:",A),d(A,e,{x:0,y:0},"staticEditable",t.myColor,t.summary||t.label||"Draggable Node",A.suggestionId)},I=A=>{A.stopPropagation(),r(!0)},N=()=>{r(!1)},k=A=>{A.stopPropagation()},x=A=>{A.stopPropagation(),A.key==="Enter"&&N(),A.key==="Escape"&&(o(t.summary||t.label||"Static Node"),r(!1))},C=A=>{A.stopPropagation(),c(!u)},L=A=>{A.stopPropagation(),f&&f(t.title||"Explanation",t.full_text||"No detailed information available.")},M=A=>{if(A.stopPropagation(),t.previousNode){const D=m(t.previousNode);if(D){const{x:V,y:H}=D.position;y({x:-V+200,y:-H+100,zoom:1},{duration:500})}}},q=(()=>{const A=t.tokenColors||{};return _.map((D,V)=>{const H=D.myConcept||D.word,z=A[H],O=!z;return F.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-lg font-medium transition-all duration-300 ease-out
                              ${O?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40 hover:shadow-lg hover:shadow-blue-500/25 hover:scale-105 hover:-translate-y-0.5 active:scale-95 active:translate-y-0":"cursor-not-allowed opacity-70"} 
                              ${D.myConcept?"bg-blue-500/10 border border-blue-500/30 shadow-md":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:z||"transparent",color:z?t.myColor||"#ffffff":"inherit",border:z?`1px solid ${z}`:"",boxShadow:z?`0 0 0 1px ${z}25`:""},onClick:U=>O?T(D,U):U.stopPropagation(),children:[D.word,V<_.length-1?" ":""]},V)})})(),B=F.jsxs("div",{className:"node-buttons",children:[t.previousNode&&F.jsx("button",{className:"node-expand-btn previous-node-btn",onClick:M,title:"Go to previous node",children:""}),_.length>5&&F.jsx("button",{className:"node-expand-btn",onClick:C,title:u?"Show less":"Show more",children:u?"":"+"}),F.jsx("button",{className:"node-expand-btn explanation-btn-icon",onClick:L,title:"Show full text",children:""})]}),S=te.useMemo(()=>t.isLoading?F.jsxs("div",{className:"flex items-center justify-center gap-2 py-8",children:[F.jsx(vD,{size:"small",color:t.myColor||"#6366f1"}),F.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}):n?F.jsx("input",{type:"text",value:s,onChange:A=>o(A.target.value),onBlur:N,onKeyDown:x,onClick:k,className:`w-full bg-gray-700/50 border border-white/15 rounded-lg px-4 py-3 text-gray-100 
                             placeholder-gray-500 focus:outline-none focus:border-blue-500/60 focus:bg-gray-600/50 
                             focus:ring-2 focus:ring-blue-500/25 transition-all duration-200 nodrag`,placeholder:"Enter node content...",autoFocus:!0}):F.jsxs("div",{className:"flex flex-col gap-3",children:[F.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[F.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),F.jsxs("div",{className:"flex gap-2",children:[t.previousNode&&F.jsx("button",{className:`w-8 h-8 bg-gray-500/25 text-gray-400 border border-gray-500/35 rounded-lg 
                                         hover:bg-gray-500/35 hover:border-gray-500/55 hover:-translate-y-0.5 
                                         transition-all duration-150 flex items-center justify-center text-sm font-semibold`,onClick:M,title:"Go to previous node",children:""}),_.length>5&&F.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                         hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                         transition-all duration-150 flex items-center justify-center text-sm font-semibold`,onClick:C,title:u?"Show less":"Show more",children:u?"":"+"}),F.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                     hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                     transition-all duration-150 flex items-center justify-center text-sm`,onClick:L,title:"Show full text",children:""})]})]}),F.jsx("div",{className:"flex-1",children:F.jsxs("div",{className:"cursor-text leading-relaxed break-words text-lg font-medium",onClick:I,children:[q,_.length>5&&!u&&F.jsx("span",{className:"text-slate-500 font-normal",children:"..."})]})}),F.jsxs("div",{className:"mt-2",children:[F.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),F.jsx("div",{className:"flex flex-wrap gap-1",children:t.suggestions&&t.suggestions.length>0?t.suggestions.map((A,D)=>{const H=(t.tokenColors||{})[A],z=!H;return F.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                                                  bg-white/5 border border-white/10 transition-all duration-200 
                                                  ${z?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:H||"transparent",color:H?t.myColor||"#ffffff":"inherit",border:H?`1px solid ${H}`:""},onClick:O=>z?T({word:A,myConcept:A,suggestionId:t.label+A+D},O):O.stopPropagation(),children:[A,D<t.suggestions.length-1?" ":"",F.jsx(Zr,{type:"source",position:je.Right,id:t.label+A+D})]},D)}):F.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"})})]})]}),[n,s,u,_.length,I,N,x,k,q,B]);return F.jsxs("div",{className:`bg-[#1a1a1d] border border-white/[0.1] rounded-[20px] p-7 min-w-[320px] max-w-[500px] 
                       shadow-[0_14px_36px_rgba(0,0,0,0.6),0_2px_6px_rgba(0,0,0,0.8)] 
                       transition-all duration-150 ease-in-out cursor-pointer select-none overflow-hidden
                       opacity-[0.98] border-b-[3px] border-b-white/[0.06]
                       hover:opacity-100 hover:bg-[#28282c] hover:border-white/[0.2] 
                       hover:transform hover:scale-[1.03] hover:shadow-[0_14px_36px_rgba(0,0,0,0.6),0_4px_8px_rgba(0,0,0,0.8)]`,style:{backgroundColor:t.myColor,color:t.myColor?B0(t.myColor):"#f8faff",border:t.myColor?`1px solid ${U0(t.myColor,20)}`:"1px solid rgba(255, 255, 255, 0.1)"},children:[F.jsx("div",{className:"relative pointer-events-auto text-[#f8faff] text-[18px] leading-[1.7] font-semibold",children:S}),F.jsx(Zr,{type:"source",position:je.Bottom,id:"bottom-source"}),F.jsx(Zr,{type:"target",position:je.Bottom,id:"bottom-target"})]})}function OK({data:t,id:e}){const[n,r]=te.useState(!1),[s,o]=te.useState(t.summary||t.label||"Draggable Node"),[u,c]=te.useState(t.expanded||!1),{getNodes:d,getNode:f,setViewport:m}=pd(),{handleTokenClick:y,showExplanation:_}=TD();te.useEffect(()=>{n||o(t.summary||t.label||"Draggable Node")},[t.summary,t.label,n]);const T=_D(s),I=u||T.length<=5?T:T.slice(0,5),N=()=>!0,k=(V,H)=>{H.stopPropagation();const O=d().find(X=>X.id===e);return O?y(V,e,O.position,O.type||"draggableEditable",t.myColor,t.summary||t.label||"Draggable Node"):void 0},x=V=>{V.stopPropagation(),r(!0)},C=()=>{r(!1)},L=V=>{V.stopPropagation()},M=V=>{V.stopPropagation(),V.key==="Enter"&&C(),V.key==="Escape"&&(o(t.summary||t.label||"Draggable Node"),r(!1))},q=V=>{V.stopPropagation(),c(!u),!u&&t.onExpand&&t.onExpand()},B=V=>{V.stopPropagation(),_&&_(t.title,t.full_text||"No detailed information available.")},S=V=>{if(V.stopPropagation(),t.previousNode){const H=f(t.previousNode);if(H){const{x:z,y:O}=H.position;m({x:-z+200,y:-O+100,zoom:1},{duration:500})}}},A=te.useMemo(()=>{const V={};return I.forEach(H=>{const z=H.myConcept||H.word;V[z]||(V[z]=[]),V[z].push(H)}),V},[I]),D=te.useMemo(()=>n?F.jsx("input",{type:"text",value:s,onChange:V=>o(V.target.value),onBlur:C,onKeyDown:M,onClick:L,className:`w-full bg-gray-700/50 border border-white/15 rounded-lg px-4 py-3 text-gray-100 
                             placeholder-gray-500 focus:outline-none focus:border-blue-500/60 focus:bg-gray-600/50 
                             focus:ring-2 focus:ring-blue-500/25 transition-all duration-200 nodrag`,placeholder:"Enter node content...",autoFocus:!0}):F.jsxs(F.Fragment,{children:[t.isLoading&&F.jsxs("div",{className:"flex items-center justify-center gap-2 py-5",children:[F.jsx(vD,{size:"small",color:t.myColor||"#6366f1"}),F.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}),F.jsxs("div",{className:"flex flex-col gap-3",children:[F.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[F.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),F.jsxs("div",{className:"flex gap-2",children:[t.previousNode&&F.jsx("button",{className:`w-8 h-8 bg-gray-500/25 text-gray-400 border border-gray-500/35 rounded-lg 
                                             hover:bg-gray-500/35 hover:border-gray-500/55 hover:-translate-y-0.5 
                                             transition-all duration-150 flex items-center justify-center text-sm font-semibold`,onClick:S,title:"Go to previous node",children:""}),T.length>5&&F.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                             hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                             transition-all duration-150 flex items-center justify-center text-sm font-semibold`,onClick:q,title:u?"Show less":"Show more",children:u?"":"+"}),F.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                         hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                         transition-all duration-150 flex items-center justify-center text-sm`,onClick:B,title:"Show full text",children:""})]})]}),F.jsx("div",{className:"flex-1",children:F.jsxs("div",{className:"cursor-text leading-relaxed break-words",onClick:x,children:[I.map((V,H)=>{const z=t.tokenColors||{},O=V.myConcept||V.word,U=z[O],X=!U;return F.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-lg font-medium transition-all duration-300 ease-out
                                                  ${X?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40 hover:shadow-lg hover:shadow-blue-500/25 hover:scale-105 hover:-translate-y-0.5 active:scale-95 active:translate-y-0":"cursor-not-allowed opacity-70"} 
                                                  ${V.myConcept?"bg-blue-500/10 border border-blue-500/30 shadow-md":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:U||"transparent",color:U?B0(U):"inherit",border:U?`1px solid ${U0(U,20)}`:"",boxShadow:U?`0 0 0 1px ${U}25`:""},onClick:Y=>X?k(V,Y):Y.stopPropagation(),children:[V.word,H<I.length-1?" ":""]},H)}),T.length>5&&!u&&F.jsx("span",{className:"text-slate-500 font-normal",children:"..."})]})}),F.jsxs("div",{className:"mt-2",children:[F.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),F.jsx("div",{className:"flex flex-wrap gap-1",children:t.suggestions&&t.suggestions.length>0?t.suggestions.map((V,H)=>{const O=(t.tokenColors||{})[V],U=!O;return F.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                                                      bg-white/5 border border-white/10 transition-all duration-200 
                                                      ${U?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:O||"transparent",color:O?B0(O):"inherit",border:O?`1px solid ${U0(O,20)}`:""},onClick:X=>U?k({word:V,myConcept:V,suggestionId:t.label+V+H},X):X.stopPropagation(),children:[V,F.jsx(Zr,{type:"source",position:je.Bottom,id:t.label+V+H})]},H)}):F.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"})})]})]})]}),[n,s,I,T,u,A,x,C,M,L,q,B,k,N,t.previousNode,S,t.tokenColors,t.myColor,t.isLoading]);return F.jsxs("div",{className:`bg-[#202023] border border-white/[0.12] rounded-2xl p-5 min-w-[280px] max-w-[450px] 
                       shadow-[0_10px_30px_rgba(0,0,0,0.5),0_1px_4px_rgba(0,0,0,0.7)] 
                       transition-all duration-200 ease-in-out cursor-grab select-none overflow-hidden
                       hover:transform hover:-translate-y-[3px] hover:shadow-[0_12px_35px_rgba(0,0,0,0.6),0_2px_6px_rgba(0,0,0,0.8)] 
                       hover:border-white/[0.18] hover:bg-[#242427]`,style:{background:t.myColor,color:t.myColor?B0(t.myColor):"#f0f4f8",border:t.myColor?`1px solid ${U0(t.myColor,20)}`:"1px solid rgba(255, 255, 255, 0.12)"},children:[F.jsx("div",{className:"relative pointer-events-auto text-[#f0f4f8] text-[17px] leading-[1.7] font-medium",children:D}),F.jsx(Zr,{type:"source",position:je.Bottom,id:"bottom-source"}),F.jsx(Zr,{type:"target",position:je.Top,id:"top-target"}),F.jsx(Zr,{type:"source",position:je.Left,id:"left-source"}),F.jsx(Zr,{type:"target",position:je.Left,id:"left-target"}),F.jsx(Zr,{type:"source",position:je.Right,id:"right-source"}),F.jsx(Zr,{type:"target",position:je.Right,id:"right-target"})]})}const kK={staticEditable:DK,draggableEditable:OK};function PK(){const{height:t,isMobile:e,getSidebarWidth:n,getExplanationMaxWidth:r,getExplanationMinWidth:s}=bK(),[o,u]=te.useState(!1),[c,d]=te.useState(!1),[f,m]=te.useState(()=>Math.min(450,r())),[y,_]=te.useState(null),T=te.useCallback(Te=>{m(Te)},[]),I=TK(T,16),N=te.useCallback((Te,Ve)=>{_({title:Te,text:Ve}),u(!0)},[]),k=te.useCallback(()=>{u(!1)},[]),{user:x,signOut:C}=lK(),{notifications:L,removeNotification:M,showSuccess:q,showError:B,showInfo:S}=EK(),{nodes:A,edges:D,allBoards:V,currentBoard:H,isSwitchingBoard:z,isSaving:O,onNodesChange:U,onEdgesChange:X,setNodes:Y,switchToBoard:W,createNewBoard:se,deleteBoard:re,updateBoardName:w,clearBoardState:ee}=yK(x,{showSuccess:q,showError:B,showInfo:S}),ae=async()=>{await C(),ee()},j=()=>{d(!0)},ge=te.useCallback(Te=>{const Ve={id:`e${Te.source}-${Te.target}`,source:Te.source,target:Te.target,sourceHandle:Te.sourceHandle,targetHandle:Te.targetHandle};X([{type:"add",item:Ve}])},[X]),Ce=te.useMemo(()=>F.jsxs(eC,{nodes:A,edges:D,onNodesChange:U,onEdgesChange:X,onConnect:ge,nodeTypes:kK,connectionMode:po.Loose,fitView:!0,className:"bg-gray-50 dark:bg-gray-900 w-full h-full",children:[F.jsx(jL,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg"}),F.jsx(KL,{variant:qi.Cross,gap:30,size:10,lineWidth:.5,color:"#94a3b8",className:"bg-gray-50 dark:bg-gray-900"})]}),[A,D,U,X,ge]);return x?F.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 relative",style:{height:"100vh",width:"100vw",overflow:"hidden"},children:[F.jsx(aK,{notifications:L,onRemove:M}),F.jsxs("div",{style:{height:"100%",position:"relative"},children:[F.jsxs(xy,{defaultSizes:[n(),1e3],minSize:200,proportionalLayout:!0,separator:!0,snap:!1,onChange:Te=>{console.log("Layout sizes changed:",Te)},children:[F.jsx(xy.Pane,{minSize:e?200:250,maxSize:e?400:600,preferredSize:`${n()}px`,children:F.jsx(gz,{allBoards:V,currentBoard:H,onSwitchBoard:W,onCreateBoard:async Te=>{await se(Te)},onDeleteBoard:re,onSignOut:ae,isLoading:z})}),F.jsx(xy.Pane,{minSize:400,children:F.jsxs("div",{className:"bg-white dark:bg-gray-800",style:{height:"100%",position:"relative"},children:[F.jsx(iK,{name:H?.name||"Loading...",onSetName:w,user:x,isSaving:O}),F.jsx("div",{className:"bg-gray-50 dark:bg-gray-900",style:{height:"calc(100% - 60px)"},children:F.jsx(RK,{nodes:A,onNodesChange:U,onEdgesChange:X,setNodes:Y,showExplanation:N,children:Ce})})]})})]}),o&&F.jsx("div",{className:"fixed top-4 right-4 z-50",children:F.jsx(C5.ResizableBox,{width:f,height:t-32,minConstraints:[s(),400],maxConstraints:[r(),t-32],onResize:(Te,{size:Ve})=>{I(Ve.width)},onResizeStart:()=>{document.body.style.cursor="ew-resize",document.body.style.userSelect="none"},onResizeStop:()=>{document.body.style.cursor="default",document.body.style.userSelect="auto"},resizeHandles:e?["w"]:["w","sw","nw"],className:`bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl
                                       border border-gray-200/50 dark:border-gray-700/50 
                                       rounded-3xl shadow-2xl
                                       animate-in slide-in-from-right-5 fade-in duration-300
                                       transition-all ease-out`,children:F.jsx("div",{className:"h-full rounded-3xl overflow-hidden bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900",children:F.jsx(tK,{explanation:y,onClose:k,isVisible:o})})})})]})]}):c?F.jsx(mz,{}):F.jsx(oK,{onLogin:j})}function MK(){return F.jsx(rK,{children:F.jsx(PK,{})})}const SD=document.getElementById("root");if(!SD)throw new Error("Failed to find the root element");nO.createRoot(SD).render(F.jsx(te.StrictMode,{children:F.jsx(MK,{})}));
