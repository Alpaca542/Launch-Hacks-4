(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function jw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var pm={exports:{}},wu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lE;function TI(){if(lE)return wu;lE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:e,type:r,key:c,ref:a!==void 0?a:null,props:l}}return wu.Fragment=t,wu.jsx=n,wu.jsxs=n,wu}var uE;function wI(){return uE||(uE=1,pm.exports=TI()),pm.exports}var mt=wI(),ym={exports:{}},Ut={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cE;function SI(){if(cE)return Ut;cE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function E(N){return N===null||typeof N!="object"?null:(N=v&&N[v]||N["@@iterator"],typeof N=="function"?N:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,k={};function M(N,$,et){this.props=N,this.context=$,this.refs=k,this.updater=et||S}M.prototype.isReactComponent={},M.prototype.setState=function(N,$){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,$,"setState")},M.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function B(){}B.prototype=M.prototype;function q(N,$,et){this.props=N,this.context=$,this.refs=k,this.updater=et||S}var K=q.prototype=new B;K.constructor=q,x(K,M.prototype),K.isPureReactComponent=!0;var L=Array.isArray,Z={H:null,A:null,T:null,S:null,V:null},W=Object.prototype.hasOwnProperty;function V(N,$,et,st,ct,pt){return et=pt.ref,{$$typeof:e,type:N,key:$,ref:et!==void 0?et:null,props:pt}}function R(N,$){return V(N.type,$,void 0,void 0,void 0,N.props)}function I(N){return typeof N=="object"&&N!==null&&N.$$typeof===e}function P(N){var $={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(et){return $[et]})}var U=/\/+/g;function z(N,$){return typeof N=="object"&&N!==null&&N.key!=null?P(""+N.key):$.toString(36)}function A(){}function O(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(A,A):(N.status="pending",N.then(function($){N.status==="pending"&&(N.status="fulfilled",N.value=$)},function($){N.status==="pending"&&(N.status="rejected",N.reason=$)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function Y(N,$,et,st,ct){var pt=typeof N;(pt==="undefined"||pt==="boolean")&&(N=null);var yt=!1;if(N===null)yt=!0;else switch(pt){case"bigint":case"string":case"number":yt=!0;break;case"object":switch(N.$$typeof){case e:case t:yt=!0;break;case y:return yt=N._init,Y(yt(N._payload),$,et,st,ct)}}if(yt)return ct=ct(N),yt=st===""?"."+z(N,0):st,L(ct)?(et="",yt!=null&&(et=yt.replace(U,"$&/")+"/"),Y(ct,$,et,"",function(kt){return kt})):ct!=null&&(I(ct)&&(ct=R(ct,et+(ct.key==null||N&&N.key===ct.key?"":(""+ct.key).replace(U,"$&/")+"/")+yt)),$.push(ct)),1;yt=0;var It=st===""?".":st+":";if(L(N))for(var At=0;At<N.length;At++)st=N[At],pt=It+z(st,At),yt+=Y(st,$,et,pt,ct);else if(At=E(N),typeof At=="function")for(N=At.call(N),At=0;!(st=N.next()).done;)st=st.value,pt=It+z(st,At++),yt+=Y(st,$,et,pt,ct);else if(pt==="object"){if(typeof N.then=="function")return Y(O(N),$,et,st,ct);throw $=String(N),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return yt}function D(N,$,et){if(N==null)return N;var st=[],ct=0;return Y(N,st,"","",function(pt){return $.call(et,pt,ct++)}),st}function j(N){if(N._status===-1){var $=N._result;$=$(),$.then(function(et){(N._status===0||N._status===-1)&&(N._status=1,N._result=et)},function(et){(N._status===0||N._status===-1)&&(N._status=2,N._result=et)}),N._status===-1&&(N._status=0,N._result=$)}if(N._status===1)return N._result.default;throw N._result}var rt=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function X(){}return Ut.Children={map:D,forEach:function(N,$,et){D(N,function(){$.apply(this,arguments)},et)},count:function(N){var $=0;return D(N,function(){$++}),$},toArray:function(N){return D(N,function($){return $})||[]},only:function(N){if(!I(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ut.Component=M,Ut.Fragment=n,Ut.Profiler=a,Ut.PureComponent=q,Ut.StrictMode=r,Ut.Suspense=g,Ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Z,Ut.__COMPILER_RUNTIME={__proto__:null,c:function(N){return Z.H.useMemoCache(N)}},Ut.cache=function(N){return function(){return N.apply(null,arguments)}},Ut.cloneElement=function(N,$,et){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var st=x({},N.props),ct=N.key,pt=void 0;if($!=null)for(yt in $.ref!==void 0&&(pt=void 0),$.key!==void 0&&(ct=""+$.key),$)!W.call($,yt)||yt==="key"||yt==="__self"||yt==="__source"||yt==="ref"&&$.ref===void 0||(st[yt]=$[yt]);var yt=arguments.length-2;if(yt===1)st.children=et;else if(1<yt){for(var It=Array(yt),At=0;At<yt;At++)It[At]=arguments[At+2];st.children=It}return V(N.type,ct,void 0,void 0,pt,st)},Ut.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:l,_context:N},N},Ut.createElement=function(N,$,et){var st,ct={},pt=null;if($!=null)for(st in $.key!==void 0&&(pt=""+$.key),$)W.call($,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(ct[st]=$[st]);var yt=arguments.length-2;if(yt===1)ct.children=et;else if(1<yt){for(var It=Array(yt),At=0;At<yt;At++)It[At]=arguments[At+2];ct.children=It}if(N&&N.defaultProps)for(st in yt=N.defaultProps,yt)ct[st]===void 0&&(ct[st]=yt[st]);return V(N,pt,void 0,void 0,null,ct)},Ut.createRef=function(){return{current:null}},Ut.forwardRef=function(N){return{$$typeof:d,render:N}},Ut.isValidElement=I,Ut.lazy=function(N){return{$$typeof:y,_payload:{_status:-1,_result:N},_init:j}},Ut.memo=function(N,$){return{$$typeof:m,type:N,compare:$===void 0?null:$}},Ut.startTransition=function(N){var $=Z.T,et={};Z.T=et;try{var st=N(),ct=Z.S;ct!==null&&ct(et,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(X,rt)}catch(pt){rt(pt)}finally{Z.T=$}},Ut.unstable_useCacheRefresh=function(){return Z.H.useCacheRefresh()},Ut.use=function(N){return Z.H.use(N)},Ut.useActionState=function(N,$,et){return Z.H.useActionState(N,$,et)},Ut.useCallback=function(N,$){return Z.H.useCallback(N,$)},Ut.useContext=function(N){return Z.H.useContext(N)},Ut.useDebugValue=function(){},Ut.useDeferredValue=function(N,$){return Z.H.useDeferredValue(N,$)},Ut.useEffect=function(N,$,et){var st=Z.H;if(typeof et=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return st.useEffect(N,$)},Ut.useId=function(){return Z.H.useId()},Ut.useImperativeHandle=function(N,$,et){return Z.H.useImperativeHandle(N,$,et)},Ut.useInsertionEffect=function(N,$){return Z.H.useInsertionEffect(N,$)},Ut.useLayoutEffect=function(N,$){return Z.H.useLayoutEffect(N,$)},Ut.useMemo=function(N,$){return Z.H.useMemo(N,$)},Ut.useOptimistic=function(N,$){return Z.H.useOptimistic(N,$)},Ut.useReducer=function(N,$,et){return Z.H.useReducer(N,$,et)},Ut.useRef=function(N){return Z.H.useRef(N)},Ut.useState=function(N){return Z.H.useState(N)},Ut.useSyncExternalStore=function(N,$,et){return Z.H.useSyncExternalStore(N,$,et)},Ut.useTransition=function(){return Z.H.useTransition()},Ut.version="19.1.0",Ut}var hE;function lc(){return hE||(hE=1,ym.exports=SI()),ym.exports}var G=lc();const lt=jw(G);var _m={exports:{}},Su={},vm={exports:{}},Em={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fE;function bI(){return fE||(fE=1,function(e){function t(D,j){var rt=D.length;D.push(j);t:for(;0<rt;){var X=rt-1>>>1,N=D[X];if(0<a(N,j))D[X]=j,D[rt]=N,rt=X;else break t}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var j=D[0],rt=D.pop();if(rt!==j){D[0]=rt;t:for(var X=0,N=D.length,$=N>>>1;X<$;){var et=2*(X+1)-1,st=D[et],ct=et+1,pt=D[ct];if(0>a(st,rt))ct<N&&0>a(pt,st)?(D[X]=pt,D[ct]=rt,X=ct):(D[X]=st,D[et]=rt,X=et);else if(ct<N&&0>a(pt,rt))D[X]=pt,D[ct]=rt,X=ct;else break t}}return j}function a(D,j){var rt=D.sortIndex-j.sortIndex;return rt!==0?rt:D.id-j.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();e.unstable_now=function(){return c.now()-d}}var g=[],m=[],y=1,v=null,E=3,S=!1,x=!1,k=!1,M=!1,B=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function L(D){for(var j=n(m);j!==null;){if(j.callback===null)r(m);else if(j.startTime<=D)r(m),j.sortIndex=j.expirationTime,t(g,j);else break;j=n(m)}}function Z(D){if(k=!1,L(D),!x)if(n(g)!==null)x=!0,W||(W=!0,z());else{var j=n(m);j!==null&&Y(Z,j.startTime-D)}}var W=!1,V=-1,R=5,I=-1;function P(){return M?!0:!(e.unstable_now()-I<R)}function U(){if(M=!1,W){var D=e.unstable_now();I=D;var j=!0;try{t:{x=!1,k&&(k=!1,q(V),V=-1),S=!0;var rt=E;try{e:{for(L(D),v=n(g);v!==null&&!(v.expirationTime>D&&P());){var X=v.callback;if(typeof X=="function"){v.callback=null,E=v.priorityLevel;var N=X(v.expirationTime<=D);if(D=e.unstable_now(),typeof N=="function"){v.callback=N,L(D),j=!0;break e}v===n(g)&&r(g),L(D)}else r(g);v=n(g)}if(v!==null)j=!0;else{var $=n(m);$!==null&&Y(Z,$.startTime-D),j=!1}}break t}finally{v=null,E=rt,S=!1}j=void 0}}finally{j?z():W=!1}}}var z;if(typeof K=="function")z=function(){K(U)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,O=A.port2;A.port1.onmessage=U,z=function(){O.postMessage(null)}}else z=function(){B(U,0)};function Y(D,j){V=B(function(){D(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return E},e.unstable_next=function(D){switch(E){case 1:case 2:case 3:var j=3;break;default:j=E}var rt=E;E=j;try{return D()}finally{E=rt}},e.unstable_requestPaint=function(){M=!0},e.unstable_runWithPriority=function(D,j){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var rt=E;E=D;try{return j()}finally{E=rt}},e.unstable_scheduleCallback=function(D,j,rt){var X=e.unstable_now();switch(typeof rt=="object"&&rt!==null?(rt=rt.delay,rt=typeof rt=="number"&&0<rt?X+rt:X):rt=X,D){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=rt+N,D={id:y++,callback:j,priorityLevel:D,startTime:rt,expirationTime:N,sortIndex:-1},rt>X?(D.sortIndex=rt,t(m,D),n(g)===null&&D===n(m)&&(k?(q(V),V=-1):k=!0,Y(Z,rt-X))):(D.sortIndex=N,t(g,D),x||S||(x=!0,W||(W=!0,z()))),D},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(D){var j=E;return function(){var rt=E;E=j;try{return D.apply(this,arguments)}finally{E=rt}}}}(Em)),Em}var dE;function AI(){return dE||(dE=1,vm.exports=bI()),vm.exports}var Tm={exports:{}},_n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gE;function RI(){if(gE)return _n;gE=1;var e=lc();function t(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,m,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:g,containerInfo:m,implementation:y}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,_n.createPortal=function(g,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return l(g,m,null,y)},_n.flushSync=function(g){var m=c.T,y=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=m,r.p=y,r.d.f()}},_n.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(g,m))},_n.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},_n.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var y=m.as,v=d(y,m.crossOrigin),E=typeof m.integrity=="string"?m.integrity:void 0,S=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?r.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:E,fetchPriority:S}):y==="script"&&r.d.X(g,{crossOrigin:v,integrity:E,fetchPriority:S,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},_n.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=d(m.as,m.crossOrigin);r.d.M(g,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(g)},_n.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,v=d(y,m.crossOrigin);r.d.L(g,y,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},_n.preloadModule=function(g,m){if(typeof g=="string")if(m){var y=d(m.as,m.crossOrigin);r.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(g)},_n.requestFormReset=function(g){r.d.r(g)},_n.unstable_batchedUpdates=function(g,m){return g(m)},_n.useFormState=function(g,m,y){return c.H.useFormState(g,m,y)},_n.useFormStatus=function(){return c.H.useHostTransitionStatus()},_n.version="19.1.0",_n}var mE;function Gw(){if(mE)return Tm.exports;mE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Tm.exports=RI(),Tm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pE;function II(){if(pE)return Su;pE=1;var e=AI(),t=lc(),n=Gw();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,o=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(o=s.return),i=s.return;while(i)}return s.tag===3?o:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(l(i)!==i)throw Error(r(188))}function g(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(r(188));return s!==i?null:i}for(var o=i,u=s;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return d(f),i;if(p===u)return d(f),s;p=p.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=p;else{for(var w=!1,b=f.child;b;){if(b===o){w=!0,o=f,u=p;break}if(b===u){w=!0,u=f,o=p;break}b=b.sibling}if(!w){for(b=p.child;b;){if(b===o){w=!0,o=p,u=f;break}if(b===u){w=!0,u=p,o=f;break}b=b.sibling}if(!w)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?i:s}function m(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=m(i),s!==null)return s;i=i.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),K=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function z(i){return i===null||typeof i!="object"?null:(i=U&&i[U]||i["@@iterator"],typeof i=="function"?i:null)}var A=Symbol.for("react.client.reference");function O(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===A?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case x:return"Fragment";case M:return"Profiler";case k:return"StrictMode";case Z:return"Suspense";case W:return"SuspenseList";case I:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case S:return"Portal";case K:return(i.displayName||"Context")+".Provider";case q:return(i._context.displayName||"Context")+".Consumer";case L:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case V:return s=i.displayName||null,s!==null?s:O(i.type)||"Memo";case R:s=i._payload,i=i._init;try{return O(i(s))}catch{}}return null}var Y=Array.isArray,D=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,rt={pending:!1,data:null,method:null,action:null},X=[],N=-1;function $(i){return{current:i}}function et(i){0>N||(i.current=X[N],X[N]=null,N--)}function st(i,s){N++,X[N]=i.current,i.current=s}var ct=$(null),pt=$(null),yt=$(null),It=$(null);function At(i,s){switch(st(yt,s),st(pt,i),st(ct,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?Pv(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=Pv(s),i=Lv(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}et(ct),st(ct,i)}function kt(){et(ct),et(pt),et(yt)}function Pt(i){i.memoizedState!==null&&st(It,i);var s=ct.current,o=Lv(s,i.type);s!==o&&(st(pt,i),st(ct,o))}function ue(i){pt.current===i&&(et(ct),et(pt)),It.current===i&&(et(It),yu._currentValue=rt)}var ce=Object.prototype.hasOwnProperty,Ee=e.unstable_scheduleCallback,_e=e.unstable_cancelCallback,he=e.unstable_shouldYield,Xe=e.unstable_requestPaint,Lt=e.unstable_now,wt=e.unstable_getCurrentPriorityLevel,xe=e.unstable_ImmediatePriority,pn=e.unstable_UserBlockingPriority,Un=e.unstable_NormalPriority,Ui=e.unstable_LowPriority,zn=e.unstable_IdlePriority,Sn=e.log,Si=e.unstable_setDisableYieldValue,te=null,Ft=null;function Ve(i){if(typeof Sn=="function"&&Si(i),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(te,i)}catch{}}var Te=Math.clz32?Math.clz32:Qe,zi=Math.log,ke=Math.LN2;function Qe(i){return i>>>=0,i===0?32:31-(zi(i)/ke|0)|0}var bn=256,An=4194304;function Ze(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function an(i,s,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,p=i.suspendedLanes,w=i.pingedLanes;i=i.warmLanes;var b=u&134217727;return b!==0?(u=b&~p,u!==0?f=Ze(u):(w&=b,w!==0?f=Ze(w):o||(o=b&~i,o!==0&&(f=Ze(o))))):(b=u&~p,b!==0?f=Ze(b):w!==0?f=Ze(w):o||(o=u&~i,o!==0&&(f=Ze(o)))),f===0?0:s!==0&&s!==f&&(s&p)===0&&(p=f&-f,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:f}function Rn(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function dr(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gr(){var i=bn;return bn<<=1,(bn&4194048)===0&&(bn=256),i}function bi(){var i=An;return An<<=1,(An&62914560)===0&&(An=4194304),i}function Bn(i){for(var s=[],o=0;31>o;o++)s.push(i);return s}function ni(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Hn(i,s,o,u,f,p){var w=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var b=i.entanglements,H=i.expirationTimes,nt=i.hiddenUpdates;for(o=w&~o;0<o;){var ut=31-Te(o),ft=1<<ut;b[ut]=0,H[ut]=-1;var it=nt[ut];if(it!==null)for(nt[ut]=null,ut=0;ut<it.length;ut++){var at=it[ut];at!==null&&(at.lane&=-536870913)}o&=~ft}u!==0&&ii(i,u,0),p!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=p&~(w&~s))}function ii(i,s,o){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-Te(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|o&4194090}function Qs(i,s){var o=i.entangledLanes|=s;for(i=i.entanglements;o;){var u=31-Te(o),f=1<<u;f&s|i[u]&s&&(i[u]|=s),o&=~f}}function Bi(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Qr(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Hi(){var i=j.p;return i!==0?i:(i=window.event,i===void 0?32:nE(i.type))}function $a(i,s){var o=j.p;try{return j.p=i,s()}finally{j.p=o}}var de=Math.random().toString(36).slice(2),Ne="__reactFiber$"+de,Ae="__reactProps$"+de,Dn="__reactContainer$"+de,Zs="__reactEvents$"+de,Sl="__reactListeners$"+de,qi="__reactHandles$"+de,Ya="__reactResources$"+de,mr="__reactMarker$"+de;function Fi(i){delete i[Ne],delete i[Ae],delete i[Zs],delete i[Sl],delete i[qi]}function ri(i){var s=i[Ne];if(s)return s;for(var o=i.parentNode;o;){if(s=o[Dn]||o[Ne]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(i=Hv(i);i!==null;){if(o=i[Ne])return o;i=Hv(i)}return s}i=o,o=i.parentNode}return null}function si(i){if(i=i[Ne]||i[Dn]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function ai(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function on(i){var s=i[Ya];return s||(s=i[Ya]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function we(i){i[mr]=!0}var Ws=new Set,Zr={};function qn(i,s){Ai(i,s),Ai(i+"Capture",s)}function Ai(i,s){for(Zr[i]=s,i=0;i<s.length;i++)Ws.add(s[i])}var Js=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ka={},pr={};function Xa(i){return ce.call(pr,i)?!0:ce.call(Ka,i)?!1:Js.test(i)?pr[i]=!0:(Ka[i]=!0,!1)}function ji(i,s,o){if(Xa(s))if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+o)}}function oi(i,s,o){if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+o)}}function He(i,s,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(s,o,""+u)}}var Gi,Qa;function Ri(i){if(Gi===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Gi=s&&s[1]||"",Qa=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gi+i+Qa}var Wr=!1;function $i(i,s){if(!i||Wr)return"";Wr=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ft=function(){throw Error()};if(Object.defineProperty(ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ft,[])}catch(at){var it=at}Reflect.construct(i,[],ft)}else{try{ft.call()}catch(at){it=at}i.call(ft.prototype)}}else{try{throw Error()}catch(at){it=at}(ft=i())&&typeof ft.catch=="function"&&ft.catch(function(){})}}catch(at){if(at&&it&&typeof at.stack=="string")return[at.stack,it.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),w=p[0],b=p[1];if(w&&b){var H=w.split(`
`),nt=b.split(`
`);for(f=u=0;u<H.length&&!H[u].includes("DetermineComponentFrameRoot");)u++;for(;f<nt.length&&!nt[f].includes("DetermineComponentFrameRoot");)f++;if(u===H.length||f===nt.length)for(u=H.length-1,f=nt.length-1;1<=u&&0<=f&&H[u]!==nt[f];)f--;for(;1<=u&&0<=f;u--,f--)if(H[u]!==nt[f]){if(u!==1||f!==1)do if(u--,f--,0>f||H[u]!==nt[f]){var ut=`
`+H[u].replace(" at new "," at ");return i.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",i.displayName)),ut}while(1<=u&&0<=f);break}}}finally{Wr=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?Ri(o):""}function bl(i){switch(i.tag){case 26:case 27:case 5:return Ri(i.type);case 16:return Ri("Lazy");case 13:return Ri("Suspense");case 19:return Ri("SuspenseList");case 0:case 15:return $i(i.type,!1);case 11:return $i(i.type.render,!1);case 1:return $i(i.type,!0);case 31:return Ri("Activity");default:return""}}function Za(i){try{var s="";do s+=bl(i),i=i.return;while(i);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function In(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Al(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ed(i){var s=Al(i)?"checked":"value",o=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),u=""+i[s];if(!i.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,p=o.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){u=""+w,p.call(this,w)}}),Object.defineProperty(i,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(w){u=""+w},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Wa(i){i._valueTracker||(i._valueTracker=Ed(i))}function Rl(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return i&&(u=Al(i)?i.checked?"true":"false":i.value),i=u,i!==o?(s.setValue(i),!0):!1}function ta(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Td=/[\n"\\]/g;function Pe(i){return i.replace(Td,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Fn(i,s,o,u,f,p,w,b){i.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.type=w:i.removeAttribute("type"),s!=null?w==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+In(s)):i.value!==""+In(s)&&(i.value=""+In(s)):w!=="submit"&&w!=="reset"||i.removeAttribute("value"),s!=null?Jr(i,w,In(s)):o!=null?Jr(i,w,In(o)):u!=null&&i.removeAttribute("value"),f==null&&p!=null&&(i.defaultChecked=!!p),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.name=""+In(b):i.removeAttribute("name")}function ea(i,s,o,u,f,p,w,b){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(i.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null))return;o=o!=null?""+In(o):"",s=s!=null?""+In(s):o,b||s===i.value||(i.value=s),i.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=b?i.checked:!!u,i.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.name=w)}function Jr(i,s,o){s==="number"&&ta(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function yr(i,s,o,u){if(i=i.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<i.length;o++)f=s.hasOwnProperty("$"+i[o].value),i[o].selected!==f&&(i[o].selected=f),f&&u&&(i[o].defaultSelected=!0)}else{for(o=""+In(o),s=null,f=0;f<i.length;f++){if(i[f].value===o){i[f].selected=!0,u&&(i[f].defaultSelected=!0);return}s!==null||i[f].disabled||(s=i[f])}s!==null&&(s.selected=!0)}}function se(i,s,o){if(s!=null&&(s=""+In(s),s!==i.value&&(i.value=s),o==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=o!=null?""+In(o):""}function na(i,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(Y(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=In(s),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u)}function li(i,s){if(s){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=s;return}}i.textContent=s}var ia=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ac(i,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,o):typeof o!="number"||o===0||ia.has(s)?s==="float"?i.cssFloat=o:i[s]=(""+o).trim():i[s]=o+"px"}function Il(i,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&Ac(i,f,u)}else for(var p in s)s.hasOwnProperty(p)&&Ac(i,p,s[p])}function Cl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ja(i){return Sd.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var _r=null;function ui(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var vr=null,Er=null;function xl(i){var s=si(i);if(s&&(i=s.stateNode)){var o=i[Ae]||null;t:switch(i=s.stateNode,s.type){case"input":if(Fn(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Pe(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==i&&u.form===i.form){var f=u[Ae]||null;if(!f)throw Error(r(90));Fn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===i.form&&Rl(u)}break t;case"textarea":se(i,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&yr(i,!!o.multiple,s,!1)}}}var Yi=!1;function Rc(i,s,o){if(Yi)return i(s,o);Yi=!0;try{var u=i(s);return u}finally{if(Yi=!1,(vr!==null||Er!==null)&&(vh(),vr&&(s=vr,i=Er,Er=vr=null,xl(s),i)))for(s=0;s<i.length;s++)xl(i[s])}}function ra(i,s){var o=i.stateNode;if(o===null)return null;var u=o[Ae]||null;if(u===null)return null;o=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break t;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var Ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ci=!1;if(Ii)try{var sa={};Object.defineProperty(sa,"passive",{get:function(){ci=!0}}),window.addEventListener("test",sa,sa),window.removeEventListener("test",sa,sa)}catch{ci=!1}var Ki=null,ts=null,Tr=null;function Nl(){if(Tr)return Tr;var i,s=ts,o=s.length,u,f="value"in Ki?Ki.value:Ki.textContent,p=f.length;for(i=0;i<o&&s[i]===f[i];i++);var w=o-i;for(u=1;u<=w&&s[o-u]===f[p-u];u++);return Tr=f.slice(i,1<u?1-u:void 0)}function Xi(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Qi(){return!0}function Dl(){return!1}function We(i){function s(o,u,f,p,w){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var b in i)i.hasOwnProperty(b)&&(o=i[b],this[b]=o?o(p):p[b]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Qi:Dl,this.isPropagationStopped=Dl,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Qi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Qi)},persist:function(){},isPersistent:Qi}),s}var ee={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},to=We(ee),aa=y({},ee,{view:0,detail:0}),Ic=We(aa),eo,no,Zi,oa=y({},aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ca,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Zi&&(Zi&&i.type==="mousemove"?(eo=i.screenX-Zi.screenX,no=i.screenY-Zi.screenY):no=eo=0,Zi=i),eo)},movementY:function(i){return"movementY"in i?i.movementY:no}}),hi=We(oa),Cc=y({},oa,{dataTransfer:0}),bd=We(Cc),la=y({},aa,{relatedTarget:0}),io=We(la),Ml=y({},ee,{animationName:0,elapsedTime:0,pseudoElement:0}),ro=We(Ml),xc=y({},ee,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),so=We(xc),Ad=y({},ee,{data:0}),Ol=We(Ad),ua={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vl(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Dc[i])?!!s[i]:!1}function ca(){return Vl}var Mc=y({},aa,{key:function(i){if(i.key){var s=ua[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Xi(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Nc[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ca,charCode:function(i){return i.type==="keypress"?Xi(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Xi(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ao=We(Mc),Oc=y({},oa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kl=We(Oc),wr=y({},aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ca}),Vc=We(wr),kc=y({},ee,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pc=We(kc),Lc=y({},oa,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),oo=We(Lc),Cn=y({},ee,{newState:0,oldState:0}),Uc=We(Cn),zc=[9,13,27,32],Wi=Ii&&"CompositionEvent"in window,h=null;Ii&&"documentMode"in document&&(h=document.documentMode);var _=Ii&&"TextEvent"in window&&!h,T=Ii&&(!Wi||h&&8<h&&11>=h),C=" ",J=!1;function ot(i,s){switch(i){case"keyup":return zc.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _t(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Kt=!1;function qe(i,s){switch(i){case"compositionend":return _t(s);case"keypress":return s.which!==32?null:(J=!0,C);case"textInput":return i=s.data,i===C&&J?null:i;default:return null}}function Xt(i,s){if(Kt)return i==="compositionend"||!Wi&&ot(i,s)?(i=Nl(),Tr=ts=Ki=null,Kt=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return T&&s.locale!=="ko"?null:s.data;default:return null}}var Je={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fe(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!Je[i.type]:s==="textarea"}function Sr(i,s,o,u){vr?Er?Er.push(u):Er=[u]:vr=u,s=Ah(s,"onChange"),0<s.length&&(o=new to("onChange","change",null,o,u),i.push({event:o,listeners:s}))}var ln=null,Ji=null;function Pl(i){Dv(i,0)}function Bc(i){var s=ai(i);if(Rl(s))return i}function Wy(i,s){if(i==="change")return s}var Jy=!1;if(Ii){var Rd;if(Ii){var Id="oninput"in document;if(!Id){var t_=document.createElement("div");t_.setAttribute("oninput","return;"),Id=typeof t_.oninput=="function"}Rd=Id}else Rd=!1;Jy=Rd&&(!document.documentMode||9<document.documentMode)}function e_(){ln&&(ln.detachEvent("onpropertychange",n_),Ji=ln=null)}function n_(i){if(i.propertyName==="value"&&Bc(Ji)){var s=[];Sr(s,Ji,i,ui(i)),Rc(Pl,s)}}function ZA(i,s,o){i==="focusin"?(e_(),ln=s,Ji=o,ln.attachEvent("onpropertychange",n_)):i==="focusout"&&e_()}function WA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Bc(Ji)}function JA(i,s){if(i==="click")return Bc(s)}function tR(i,s){if(i==="input"||i==="change")return Bc(s)}function eR(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var jn=typeof Object.is=="function"?Object.is:eR;function Ll(i,s){if(jn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var o=Object.keys(i),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!ce.call(s,f)||!jn(i[f],s[f]))return!1}return!0}function i_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function r_(i,s){var o=i_(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=s&&u>=s)return{node:o,offset:s-i};i=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=i_(o)}}function s_(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?s_(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function a_(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=ta(i.document);s instanceof i.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)i=s.contentWindow;else break;s=ta(i.document)}return s}function Cd(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var nR=Ii&&"documentMode"in document&&11>=document.documentMode,lo=null,xd=null,Ul=null,Nd=!1;function o_(i,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Nd||lo==null||lo!==ta(u)||(u=lo,"selectionStart"in u&&Cd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ul&&Ll(Ul,u)||(Ul=u,u=Ah(xd,"onSelect"),0<u.length&&(s=new to("onSelect","select",null,s,o),i.push({event:s,listeners:u}),s.target=lo)))}function ha(i,s){var o={};return o[i.toLowerCase()]=s.toLowerCase(),o["Webkit"+i]="webkit"+s,o["Moz"+i]="moz"+s,o}var uo={animationend:ha("Animation","AnimationEnd"),animationiteration:ha("Animation","AnimationIteration"),animationstart:ha("Animation","AnimationStart"),transitionrun:ha("Transition","TransitionRun"),transitionstart:ha("Transition","TransitionStart"),transitioncancel:ha("Transition","TransitionCancel"),transitionend:ha("Transition","TransitionEnd")},Dd={},l_={};Ii&&(l_=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function fa(i){if(Dd[i])return Dd[i];if(!uo[i])return i;var s=uo[i],o;for(o in s)if(s.hasOwnProperty(o)&&o in l_)return Dd[i]=s[o];return i}var u_=fa("animationend"),c_=fa("animationiteration"),h_=fa("animationstart"),iR=fa("transitionrun"),rR=fa("transitionstart"),sR=fa("transitioncancel"),f_=fa("transitionend"),d_=new Map,Md="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Md.push("scrollEnd");function Ci(i,s){d_.set(i,s),qn(s,[i])}var g_=new WeakMap;function fi(i,s){if(typeof i=="object"&&i!==null){var o=g_.get(i);return o!==void 0?o:(s={value:i,source:s,stack:Za(s)},g_.set(i,s),s)}return{value:i,source:s,stack:Za(s)}}var di=[],co=0,Od=0;function Hc(){for(var i=co,s=Od=co=0;s<i;){var o=di[s];di[s++]=null;var u=di[s];di[s++]=null;var f=di[s];di[s++]=null;var p=di[s];if(di[s++]=null,u!==null&&f!==null){var w=u.pending;w===null?f.next=f:(f.next=w.next,w.next=f),u.pending=f}p!==0&&m_(o,f,p)}}function qc(i,s,o,u){di[co++]=i,di[co++]=s,di[co++]=o,di[co++]=u,Od|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Vd(i,s,o,u){return qc(i,s,o,u),Fc(i)}function ho(i,s){return qc(i,null,null,s),Fc(i)}function m_(i,s,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var f=!1,p=i.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(i=p.stateNode,i===null||i._visibility&1||(f=!0)),i=p,p=p.return;return i.tag===3?(p=i.stateNode,f&&s!==null&&(f=31-Te(o),i=p.hiddenUpdates,u=i[f],u===null?i[f]=[s]:u.push(s),s.lane=o|536870912),p):null}function Fc(i){if(50<uu)throw uu=0,Bg=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var fo={};function aR(i,s,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(i,s,o,u){return new aR(i,s,o,u)}function kd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function br(i,s){var o=i.alternate;return o===null?(o=Gn(i.tag,s,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=s,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,s=i.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function p_(i,s){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,s=o.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function jc(i,s,o,u,f,p){var w=0;if(u=i,typeof i=="function")kd(i)&&(w=1);else if(typeof i=="string")w=lI(i,o,ct.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case I:return i=Gn(31,o,s,f),i.elementType=I,i.lanes=p,i;case x:return da(o.children,f,p,s);case k:w=8,f|=24;break;case M:return i=Gn(12,o,s,f|2),i.elementType=M,i.lanes=p,i;case Z:return i=Gn(13,o,s,f),i.elementType=Z,i.lanes=p,i;case W:return i=Gn(19,o,s,f),i.elementType=W,i.lanes=p,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case B:case K:w=10;break t;case q:w=9;break t;case L:w=11;break t;case V:w=14;break t;case R:w=16,u=null;break t}w=29,o=Error(r(130,i===null?"null":typeof i,"")),u=null}return s=Gn(w,o,s,f),s.elementType=i,s.type=u,s.lanes=p,s}function da(i,s,o,u){return i=Gn(7,i,u,s),i.lanes=o,i}function Pd(i,s,o){return i=Gn(6,i,null,s),i.lanes=o,i}function Ld(i,s,o){return s=Gn(4,i.children!==null?i.children:[],i.key,s),s.lanes=o,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var go=[],mo=0,Gc=null,$c=0,gi=[],mi=0,ga=null,Ar=1,Rr="";function ma(i,s){go[mo++]=$c,go[mo++]=Gc,Gc=i,$c=s}function y_(i,s,o){gi[mi++]=Ar,gi[mi++]=Rr,gi[mi++]=ga,ga=i;var u=Ar;i=Rr;var f=32-Te(u)-1;u&=~(1<<f),o+=1;var p=32-Te(s)+f;if(30<p){var w=f-f%5;p=(u&(1<<w)-1).toString(32),u>>=w,f-=w,Ar=1<<32-Te(s)+f|o<<f|u,Rr=p+i}else Ar=1<<p|o<<f|u,Rr=i}function Ud(i){i.return!==null&&(ma(i,1),y_(i,1,0))}function zd(i){for(;i===Gc;)Gc=go[--mo],go[mo]=null,$c=go[--mo],go[mo]=null;for(;i===ga;)ga=gi[--mi],gi[mi]=null,Rr=gi[--mi],gi[mi]=null,Ar=gi[--mi],gi[mi]=null}var xn=null,Re=null,Jt=!1,pa=null,tr=!1,Bd=Error(r(519));function ya(i){var s=Error(r(418,""));throw Hl(fi(s,i)),Bd}function __(i){var s=i.stateNode,o=i.type,u=i.memoizedProps;switch(s[Ne]=i,s[Ae]=u,o){case"dialog":Gt("cancel",s),Gt("close",s);break;case"iframe":case"object":case"embed":Gt("load",s);break;case"video":case"audio":for(o=0;o<hu.length;o++)Gt(hu[o],s);break;case"source":Gt("error",s);break;case"img":case"image":case"link":Gt("error",s),Gt("load",s);break;case"details":Gt("toggle",s);break;case"input":Gt("invalid",s),ea(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Wa(s);break;case"select":Gt("invalid",s);break;case"textarea":Gt("invalid",s),na(s,u.value,u.defaultValue,u.children),Wa(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||kv(s.textContent,o)?(u.popover!=null&&(Gt("beforetoggle",s),Gt("toggle",s)),u.onScroll!=null&&Gt("scroll",s),u.onScrollEnd!=null&&Gt("scrollend",s),u.onClick!=null&&(s.onclick=Rh),s=!0):s=!1,s||ya(i)}function v_(i){for(xn=i.return;xn;)switch(xn.tag){case 5:case 13:tr=!1;return;case 27:case 3:tr=!0;return;default:xn=xn.return}}function zl(i){if(i!==xn)return!1;if(!Jt)return v_(i),Jt=!0,!1;var s=i.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||nm(i.type,i.memoizedProps)),o=!o),o&&Re&&ya(i),v_(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));t:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(o=i.data,o==="/$"){if(s===0){Re=Ni(i.nextSibling);break t}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;i=i.nextSibling}Re=null}}else s===27?(s=Re,ps(i.type)?(i=am,am=null,Re=i):Re=s):Re=xn?Ni(i.stateNode.nextSibling):null;return!0}function Bl(){Re=xn=null,Jt=!1}function E_(){var i=pa;return i!==null&&(Vn===null?Vn=i:Vn.push.apply(Vn,i),pa=null),i}function Hl(i){pa===null?pa=[i]:pa.push(i)}var Hd=$(null),_a=null,Ir=null;function es(i,s,o){st(Hd,s._currentValue),s._currentValue=o}function Cr(i){i._currentValue=Hd.current,et(Hd)}function qd(i,s,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===o)break;i=i.return}}function Fd(i,s,o,u){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var p=f.dependencies;if(p!==null){var w=f.child;p=p.firstContext;t:for(;p!==null;){var b=p;p=f;for(var H=0;H<s.length;H++)if(b.context===s[H]){p.lanes|=o,b=p.alternate,b!==null&&(b.lanes|=o),qd(p.return,o,i),u||(w=null);break t}p=b.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(r(341));w.lanes|=o,p=w.alternate,p!==null&&(p.lanes|=o),qd(w,o,i),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===i){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function ql(i,s,o,u){i=null;for(var f=s,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var b=f.type;jn(f.pendingProps.value,w.value)||(i!==null?i.push(b):i=[b])}}else if(f===It.current){if(w=f.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(yu):i=[yu])}f=f.return}i!==null&&Fd(s,i,o,u),s.flags|=262144}function Yc(i){for(i=i.firstContext;i!==null;){if(!jn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function va(i){_a=i,Ir=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function yn(i){return T_(_a,i)}function Kc(i,s){return _a===null&&va(i),T_(i,s)}function T_(i,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Ir===null){if(i===null)throw Error(r(308));Ir=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Ir=Ir.next=s;return o}var oR=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(o){return o()})}},lR=e.unstable_scheduleCallback,uR=e.unstable_NormalPriority,je={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jd(){return{controller:new oR,data:new Map,refCount:0}}function Fl(i){i.refCount--,i.refCount===0&&lR(uR,function(){i.controller.abort()})}var jl=null,Gd=0,po=0,yo=null;function cR(i,s){if(jl===null){var o=jl=[];Gd=0,po=Yg(),yo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Gd++,s.then(w_,w_),s}function w_(){if(--Gd===0&&jl!==null){yo!==null&&(yo.status="fulfilled");var i=jl;jl=null,po=0,yo=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function hR(i,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var S_=D.S;D.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&cR(i,s),S_!==null&&S_(i,s)};var Ea=$(null);function $d(){var i=Ea.current;return i!==null?i:ge.pooledCache}function Xc(i,s){s===null?st(Ea,Ea.current):st(Ea,s.pool)}function b_(){var i=$d();return i===null?null:{parent:je._currentValue,pool:i}}var Gl=Error(r(460)),A_=Error(r(474)),Qc=Error(r(542)),Yd={then:function(){}};function R_(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Zc(){}function I_(i,s,o){switch(o=i[o],o===void 0?i.push(s):o!==s&&(s.then(Zc,Zc),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,x_(i),i;default:if(typeof s.status=="string")s.then(Zc,Zc);else{if(i=ge,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,x_(i),i}throw $l=s,Gl}}var $l=null;function C_(){if($l===null)throw Error(r(459));var i=$l;return $l=null,i}function x_(i){if(i===Gl||i===Qc)throw Error(r(483))}var ns=!1;function Kd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xd(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function is(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function rs(i,s,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(ie&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=Fc(i),m_(i,null,o),s}return qc(i,u,s,o),Fc(i)}function Yl(i,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,Qs(i,o)}}function Qd(i,s){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=w:p=p.next=w,o=o.next}while(o!==null);p===null?f=p=s:p=p.next=s}else f=p=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=s:i.next=s,o.lastBaseUpdate=s}var Zd=!1;function Kl(){if(Zd){var i=yo;if(i!==null)throw i}}function Xl(i,s,o,u){Zd=!1;var f=i.updateQueue;ns=!1;var p=f.firstBaseUpdate,w=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var H=b,nt=H.next;H.next=null,w===null?p=nt:w.next=nt,w=H;var ut=i.alternate;ut!==null&&(ut=ut.updateQueue,b=ut.lastBaseUpdate,b!==w&&(b===null?ut.firstBaseUpdate=nt:b.next=nt,ut.lastBaseUpdate=H))}if(p!==null){var ft=f.baseState;w=0,ut=nt=H=null,b=p;do{var it=b.lane&-536870913,at=it!==b.lane;if(at?(Qt&it)===it:(u&it)===it){it!==0&&it===po&&(Zd=!0),ut!==null&&(ut=ut.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});t:{var Mt=i,Ct=b;it=s;var le=o;switch(Ct.tag){case 1:if(Mt=Ct.payload,typeof Mt=="function"){ft=Mt.call(le,ft,it);break t}ft=Mt;break t;case 3:Mt.flags=Mt.flags&-65537|128;case 0:if(Mt=Ct.payload,it=typeof Mt=="function"?Mt.call(le,ft,it):Mt,it==null)break t;ft=y({},ft,it);break t;case 2:ns=!0}}it=b.callback,it!==null&&(i.flags|=64,at&&(i.flags|=8192),at=f.callbacks,at===null?f.callbacks=[it]:at.push(it))}else at={lane:it,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ut===null?(nt=ut=at,H=ft):ut=ut.next=at,w|=it;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;at=b,b=at.next,at.next=null,f.lastBaseUpdate=at,f.shared.pending=null}}while(!0);ut===null&&(H=ft),f.baseState=H,f.firstBaseUpdate=nt,f.lastBaseUpdate=ut,p===null&&(f.shared.lanes=0),fs|=w,i.lanes=w,i.memoizedState=ft}}function N_(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function D_(i,s){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)N_(o[i],s)}var _o=$(null),Wc=$(0);function M_(i,s){i=kr,st(Wc,i),st(_o,s),kr=i|s.baseLanes}function Wd(){st(Wc,kr),st(_o,_o.current)}function Jd(){kr=Wc.current,et(_o),et(Wc)}var ss=0,zt=null,ae=null,Le=null,Jc=!1,vo=!1,Ta=!1,th=0,Ql=0,Eo=null,fR=0;function De(){throw Error(r(321))}function tg(i,s){if(s===null)return!1;for(var o=0;o<s.length&&o<i.length;o++)if(!jn(i[o],s[o]))return!1;return!0}function eg(i,s,o,u,f,p){return ss=p,zt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,D.H=i===null||i.memoizedState===null?m0:p0,Ta=!1,p=o(u,f),Ta=!1,vo&&(p=V_(s,o,u,f)),O_(i),p}function O_(i){D.H=ah;var s=ae!==null&&ae.next!==null;if(ss=0,Le=ae=zt=null,Jc=!1,Ql=0,Eo=null,s)throw Error(r(300));i===null||tn||(i=i.dependencies,i!==null&&Yc(i)&&(tn=!0))}function V_(i,s,o,u){zt=i;var f=0;do{if(vo&&(Eo=null),Ql=0,vo=!1,25<=f)throw Error(r(301));if(f+=1,Le=ae=null,i.updateQueue!=null){var p=i.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}D.H=vR,p=s(o,u)}while(vo);return p}function dR(){var i=D.H,s=i.useState()[0];return s=typeof s.then=="function"?Zl(s):s,i=i.useState()[0],(ae!==null?ae.memoizedState:null)!==i&&(zt.flags|=1024),s}function ng(){var i=th!==0;return th=0,i}function ig(i,s,o){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~o}function rg(i){if(Jc){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Jc=!1}ss=0,Le=ae=zt=null,vo=!1,Ql=th=0,Eo=null}function Mn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?zt.memoizedState=Le=i:Le=Le.next=i,Le}function Ue(){if(ae===null){var i=zt.alternate;i=i!==null?i.memoizedState:null}else i=ae.next;var s=Le===null?zt.memoizedState:Le.next;if(s!==null)Le=s,ae=i;else{if(i===null)throw zt.alternate===null?Error(r(467)):Error(r(310));ae=i,i={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},Le===null?zt.memoizedState=Le=i:Le=Le.next=i}return Le}function sg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zl(i){var s=Ql;return Ql+=1,Eo===null&&(Eo=[]),i=I_(Eo,i,s),s=zt,(Le===null?s.memoizedState:Le.next)===null&&(s=s.alternate,D.H=s===null||s.memoizedState===null?m0:p0),i}function eh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Zl(i);if(i.$$typeof===K)return yn(i)}throw Error(r(438,String(i)))}function ag(i){var s=null,o=zt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=zt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=sg(),zt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(i),u=0;u<i;u++)o[u]=P;return s.index++,o}function xr(i,s){return typeof s=="function"?s(i):s}function nh(i){var s=Ue();return og(s,ae,i)}function og(i,s,o){var u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=i.baseQueue,p=u.pending;if(p!==null){if(f!==null){var w=f.next;f.next=p.next,p.next=w}s.baseQueue=f=p,u.pending=null}if(p=i.baseState,f===null)i.memoizedState=p;else{s=f.next;var b=w=null,H=null,nt=s,ut=!1;do{var ft=nt.lane&-536870913;if(ft!==nt.lane?(Qt&ft)===ft:(ss&ft)===ft){var it=nt.revertLane;if(it===0)H!==null&&(H=H.next={lane:0,revertLane:0,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null}),ft===po&&(ut=!0);else if((ss&it)===it){nt=nt.next,it===po&&(ut=!0);continue}else ft={lane:0,revertLane:nt.revertLane,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null},H===null?(b=H=ft,w=p):H=H.next=ft,zt.lanes|=it,fs|=it;ft=nt.action,Ta&&o(p,ft),p=nt.hasEagerState?nt.eagerState:o(p,ft)}else it={lane:ft,revertLane:nt.revertLane,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null},H===null?(b=H=it,w=p):H=H.next=it,zt.lanes|=ft,fs|=ft;nt=nt.next}while(nt!==null&&nt!==s);if(H===null?w=p:H.next=b,!jn(p,i.memoizedState)&&(tn=!0,ut&&(o=yo,o!==null)))throw o;i.memoizedState=p,i.baseState=w,i.baseQueue=H,u.lastRenderedState=p}return f===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function lg(i){var s=Ue(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var u=o.dispatch,f=o.pending,p=s.memoizedState;if(f!==null){o.pending=null;var w=f=f.next;do p=i(p,w.action),w=w.next;while(w!==f);jn(p,s.memoizedState)||(tn=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,u]}function k_(i,s,o){var u=zt,f=Ue(),p=Jt;if(p){if(o===void 0)throw Error(r(407));o=o()}else o=s();var w=!jn((ae||f).memoizedState,o);w&&(f.memoizedState=o,tn=!0),f=f.queue;var b=U_.bind(null,u,f,i);if(Wl(2048,8,b,[i]),f.getSnapshot!==s||w||Le!==null&&Le.memoizedState.tag&1){if(u.flags|=2048,To(9,ih(),L_.bind(null,u,f,o,s),null),ge===null)throw Error(r(349));p||(ss&124)!==0||P_(u,s,o)}return o}function P_(i,s,o){i.flags|=16384,i={getSnapshot:s,value:o},s=zt.updateQueue,s===null?(s=sg(),zt.updateQueue=s,s.stores=[i]):(o=s.stores,o===null?s.stores=[i]:o.push(i))}function L_(i,s,o,u){s.value=o,s.getSnapshot=u,z_(s)&&B_(i)}function U_(i,s,o){return o(function(){z_(s)&&B_(i)})}function z_(i){var s=i.getSnapshot;i=i.value;try{var o=s();return!jn(i,o)}catch{return!0}}function B_(i){var s=ho(i,2);s!==null&&Qn(s,i,2)}function ug(i){var s=Mn();if(typeof i=="function"){var o=i;if(i=o(),Ta){Ve(!0);try{o()}finally{Ve(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xr,lastRenderedState:i},s}function H_(i,s,o,u){return i.baseState=o,og(i,ae,typeof u=="function"?u:xr)}function gR(i,s,o,u,f){if(sh(i))throw Error(r(485));if(i=s.action,i!==null){var p={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){p.listeners.push(w)}};D.T!==null?o(!0):p.isTransition=!1,u(p),o=s.pending,o===null?(p.next=s.pending=p,q_(s,p)):(p.next=o.next,s.pending=o.next=p)}}function q_(i,s){var o=s.action,u=s.payload,f=i.state;if(s.isTransition){var p=D.T,w={};D.T=w;try{var b=o(f,u),H=D.S;H!==null&&H(w,b),F_(i,s,b)}catch(nt){cg(i,s,nt)}finally{D.T=p}}else try{p=o(f,u),F_(i,s,p)}catch(nt){cg(i,s,nt)}}function F_(i,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){j_(i,s,u)},function(u){return cg(i,s,u)}):j_(i,s,o)}function j_(i,s,o){s.status="fulfilled",s.value=o,G_(s),i.state=o,s=i.pending,s!==null&&(o=s.next,o===s?i.pending=null:(o=o.next,s.next=o,q_(i,o)))}function cg(i,s,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,G_(s),s=s.next;while(s!==u)}i.action=null}function G_(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function $_(i,s){return s}function Y_(i,s){if(Jt){var o=ge.formState;if(o!==null){t:{var u=zt;if(Jt){if(Re){e:{for(var f=Re,p=tr;f.nodeType!==8;){if(!p){f=null;break e}if(f=Ni(f.nextSibling),f===null){f=null;break e}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){Re=Ni(f.nextSibling),u=f.data==="F!";break t}}ya(u)}u=!1}u&&(s=o[0])}}return o=Mn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$_,lastRenderedState:s},o.queue=u,o=f0.bind(null,zt,u),u.dispatch=o,u=ug(!1),p=mg.bind(null,zt,!1,u.queue),u=Mn(),f={state:s,dispatch:null,action:i,pending:null},u.queue=f,o=gR.bind(null,zt,f,p,o),f.dispatch=o,u.memoizedState=i,[s,o,!1]}function K_(i){var s=Ue();return X_(s,ae,i)}function X_(i,s,o){if(s=og(i,s,$_)[0],i=nh(xr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Zl(s)}catch(w){throw w===Gl?Qc:w}else u=s;s=Ue();var f=s.queue,p=f.dispatch;return o!==s.memoizedState&&(zt.flags|=2048,To(9,ih(),mR.bind(null,f,o),null)),[u,p,i]}function mR(i,s){i.action=s}function Q_(i){var s=Ue(),o=ae;if(o!==null)return X_(s,o,i);Ue(),s=s.memoizedState,o=Ue();var u=o.queue.dispatch;return o.memoizedState=i,[s,u,!1]}function To(i,s,o,u){return i={tag:i,create:o,deps:u,inst:s,next:null},s=zt.updateQueue,s===null&&(s=sg(),zt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,s.lastEffect=i),i}function ih(){return{destroy:void 0,resource:void 0}}function Z_(){return Ue().memoizedState}function rh(i,s,o,u){var f=Mn();u=u===void 0?null:u,zt.flags|=i,f.memoizedState=To(1|s,ih(),o,u)}function Wl(i,s,o,u){var f=Ue();u=u===void 0?null:u;var p=f.memoizedState.inst;ae!==null&&u!==null&&tg(u,ae.memoizedState.deps)?f.memoizedState=To(s,p,o,u):(zt.flags|=i,f.memoizedState=To(1|s,p,o,u))}function W_(i,s){rh(8390656,8,i,s)}function J_(i,s){Wl(2048,8,i,s)}function t0(i,s){return Wl(4,2,i,s)}function e0(i,s){return Wl(4,4,i,s)}function n0(i,s){if(typeof s=="function"){i=i();var o=s(i);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function i0(i,s,o){o=o!=null?o.concat([i]):null,Wl(4,4,n0.bind(null,s,i),o)}function hg(){}function r0(i,s){var o=Ue();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&tg(s,u[1])?u[0]:(o.memoizedState=[i,s],i)}function s0(i,s){var o=Ue();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&tg(s,u[1]))return u[0];if(u=i(),Ta){Ve(!0);try{i()}finally{Ve(!1)}}return o.memoizedState=[u,s],u}function fg(i,s,o){return o===void 0||(ss&1073741824)!==0?i.memoizedState=s:(i.memoizedState=o,i=lv(),zt.lanes|=i,fs|=i,o)}function a0(i,s,o,u){return jn(o,s)?o:_o.current!==null?(i=fg(i,o,u),jn(i,s)||(tn=!0),i):(ss&42)===0?(tn=!0,i.memoizedState=o):(i=lv(),zt.lanes|=i,fs|=i,s)}function o0(i,s,o,u,f){var p=j.p;j.p=p!==0&&8>p?p:8;var w=D.T,b={};D.T=b,mg(i,!1,s,o);try{var H=f(),nt=D.S;if(nt!==null&&nt(b,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var ut=hR(H,u);Jl(i,s,ut,Xn(i))}else Jl(i,s,u,Xn(i))}catch(ft){Jl(i,s,{then:function(){},status:"rejected",reason:ft},Xn())}finally{j.p=p,D.T=w}}function pR(){}function dg(i,s,o,u){if(i.tag!==5)throw Error(r(476));var f=l0(i).queue;o0(i,f,s,rt,o===null?pR:function(){return u0(i),o(u)})}function l0(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:rt,baseState:rt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xr,lastRenderedState:rt},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xr,lastRenderedState:o},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function u0(i){var s=l0(i).next.queue;Jl(i,s,{},Xn())}function gg(){return yn(yu)}function c0(){return Ue().memoizedState}function h0(){return Ue().memoizedState}function yR(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var o=Xn();i=is(o);var u=rs(s,i,o);u!==null&&(Qn(u,s,o),Yl(u,s,o)),s={cache:jd()},i.payload=s;return}s=s.return}}function _R(i,s,o){var u=Xn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},sh(i)?d0(s,o):(o=Vd(i,s,o,u),o!==null&&(Qn(o,i,u),g0(o,s,u)))}function f0(i,s,o){var u=Xn();Jl(i,s,o,u)}function Jl(i,s,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(sh(i))d0(s,f);else{var p=i.alternate;if(i.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var w=s.lastRenderedState,b=p(w,o);if(f.hasEagerState=!0,f.eagerState=b,jn(b,w))return qc(i,s,f,0),ge===null&&Hc(),!1}catch{}finally{}if(o=Vd(i,s,f,u),o!==null)return Qn(o,i,u),g0(o,s,u),!0}return!1}function mg(i,s,o,u){if(u={lane:2,revertLane:Yg(),action:u,hasEagerState:!1,eagerState:null,next:null},sh(i)){if(s)throw Error(r(479))}else s=Vd(i,o,u,2),s!==null&&Qn(s,i,2)}function sh(i){var s=i.alternate;return i===zt||s!==null&&s===zt}function d0(i,s){vo=Jc=!0;var o=i.pending;o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s}function g0(i,s,o){if((o&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,Qs(i,o)}}var ah={readContext:yn,use:eh,useCallback:De,useContext:De,useEffect:De,useImperativeHandle:De,useLayoutEffect:De,useInsertionEffect:De,useMemo:De,useReducer:De,useRef:De,useState:De,useDebugValue:De,useDeferredValue:De,useTransition:De,useSyncExternalStore:De,useId:De,useHostTransitionStatus:De,useFormState:De,useActionState:De,useOptimistic:De,useMemoCache:De,useCacheRefresh:De},m0={readContext:yn,use:eh,useCallback:function(i,s){return Mn().memoizedState=[i,s===void 0?null:s],i},useContext:yn,useEffect:W_,useImperativeHandle:function(i,s,o){o=o!=null?o.concat([i]):null,rh(4194308,4,n0.bind(null,s,i),o)},useLayoutEffect:function(i,s){return rh(4194308,4,i,s)},useInsertionEffect:function(i,s){rh(4,2,i,s)},useMemo:function(i,s){var o=Mn();s=s===void 0?null:s;var u=i();if(Ta){Ve(!0);try{i()}finally{Ve(!1)}}return o.memoizedState=[u,s],u},useReducer:function(i,s,o){var u=Mn();if(o!==void 0){var f=o(s);if(Ta){Ve(!0);try{o(s)}finally{Ve(!1)}}}else f=s;return u.memoizedState=u.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},u.queue=i,i=i.dispatch=_R.bind(null,zt,i),[u.memoizedState,i]},useRef:function(i){var s=Mn();return i={current:i},s.memoizedState=i},useState:function(i){i=ug(i);var s=i.queue,o=f0.bind(null,zt,s);return s.dispatch=o,[i.memoizedState,o]},useDebugValue:hg,useDeferredValue:function(i,s){var o=Mn();return fg(o,i,s)},useTransition:function(){var i=ug(!1);return i=o0.bind(null,zt,i.queue,!0,!1),Mn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,o){var u=zt,f=Mn();if(Jt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),ge===null)throw Error(r(349));(Qt&124)!==0||P_(u,s,o)}f.memoizedState=o;var p={value:o,getSnapshot:s};return f.queue=p,W_(U_.bind(null,u,p,i),[i]),u.flags|=2048,To(9,ih(),L_.bind(null,u,p,o,s),null),o},useId:function(){var i=Mn(),s=ge.identifierPrefix;if(Jt){var o=Rr,u=Ar;o=(u&~(1<<32-Te(u)-1)).toString(32)+o,s=""+s+"R"+o,o=th++,0<o&&(s+="H"+o.toString(32)),s+=""}else o=fR++,s=""+s+"r"+o.toString(32)+"";return i.memoizedState=s},useHostTransitionStatus:gg,useFormState:Y_,useActionState:Y_,useOptimistic:function(i){var s=Mn();s.memoizedState=s.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=mg.bind(null,zt,!0,o),o.dispatch=s,[i,s]},useMemoCache:ag,useCacheRefresh:function(){return Mn().memoizedState=yR.bind(null,zt)}},p0={readContext:yn,use:eh,useCallback:r0,useContext:yn,useEffect:J_,useImperativeHandle:i0,useInsertionEffect:t0,useLayoutEffect:e0,useMemo:s0,useReducer:nh,useRef:Z_,useState:function(){return nh(xr)},useDebugValue:hg,useDeferredValue:function(i,s){var o=Ue();return a0(o,ae.memoizedState,i,s)},useTransition:function(){var i=nh(xr)[0],s=Ue().memoizedState;return[typeof i=="boolean"?i:Zl(i),s]},useSyncExternalStore:k_,useId:c0,useHostTransitionStatus:gg,useFormState:K_,useActionState:K_,useOptimistic:function(i,s){var o=Ue();return H_(o,ae,i,s)},useMemoCache:ag,useCacheRefresh:h0},vR={readContext:yn,use:eh,useCallback:r0,useContext:yn,useEffect:J_,useImperativeHandle:i0,useInsertionEffect:t0,useLayoutEffect:e0,useMemo:s0,useReducer:lg,useRef:Z_,useState:function(){return lg(xr)},useDebugValue:hg,useDeferredValue:function(i,s){var o=Ue();return ae===null?fg(o,i,s):a0(o,ae.memoizedState,i,s)},useTransition:function(){var i=lg(xr)[0],s=Ue().memoizedState;return[typeof i=="boolean"?i:Zl(i),s]},useSyncExternalStore:k_,useId:c0,useHostTransitionStatus:gg,useFormState:Q_,useActionState:Q_,useOptimistic:function(i,s){var o=Ue();return ae!==null?H_(o,ae,i,s):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:ag,useCacheRefresh:h0},wo=null,tu=0;function oh(i){var s=tu;return tu+=1,wo===null&&(wo=[]),I_(wo,i,s)}function eu(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function lh(i,s){throw s.$$typeof===v?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function y0(i){var s=i._init;return s(i._payload)}function _0(i){function s(Q,F){if(i){var tt=Q.deletions;tt===null?(Q.deletions=[F],Q.flags|=16):tt.push(F)}}function o(Q,F){if(!i)return null;for(;F!==null;)s(Q,F),F=F.sibling;return null}function u(Q){for(var F=new Map;Q!==null;)Q.key!==null?F.set(Q.key,Q):F.set(Q.index,Q),Q=Q.sibling;return F}function f(Q,F){return Q=br(Q,F),Q.index=0,Q.sibling=null,Q}function p(Q,F,tt){return Q.index=tt,i?(tt=Q.alternate,tt!==null?(tt=tt.index,tt<F?(Q.flags|=67108866,F):tt):(Q.flags|=67108866,F)):(Q.flags|=1048576,F)}function w(Q){return i&&Q.alternate===null&&(Q.flags|=67108866),Q}function b(Q,F,tt,ht){return F===null||F.tag!==6?(F=Pd(tt,Q.mode,ht),F.return=Q,F):(F=f(F,tt),F.return=Q,F)}function H(Q,F,tt,ht){var Tt=tt.type;return Tt===x?ut(Q,F,tt.props.children,ht,tt.key):F!==null&&(F.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===R&&y0(Tt)===F.type)?(F=f(F,tt.props),eu(F,tt),F.return=Q,F):(F=jc(tt.type,tt.key,tt.props,null,Q.mode,ht),eu(F,tt),F.return=Q,F)}function nt(Q,F,tt,ht){return F===null||F.tag!==4||F.stateNode.containerInfo!==tt.containerInfo||F.stateNode.implementation!==tt.implementation?(F=Ld(tt,Q.mode,ht),F.return=Q,F):(F=f(F,tt.children||[]),F.return=Q,F)}function ut(Q,F,tt,ht,Tt){return F===null||F.tag!==7?(F=da(tt,Q.mode,ht,Tt),F.return=Q,F):(F=f(F,tt),F.return=Q,F)}function ft(Q,F,tt){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Pd(""+F,Q.mode,tt),F.return=Q,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case E:return tt=jc(F.type,F.key,F.props,null,Q.mode,tt),eu(tt,F),tt.return=Q,tt;case S:return F=Ld(F,Q.mode,tt),F.return=Q,F;case R:var ht=F._init;return F=ht(F._payload),ft(Q,F,tt)}if(Y(F)||z(F))return F=da(F,Q.mode,tt,null),F.return=Q,F;if(typeof F.then=="function")return ft(Q,oh(F),tt);if(F.$$typeof===K)return ft(Q,Kc(Q,F),tt);lh(Q,F)}return null}function it(Q,F,tt,ht){var Tt=F!==null?F.key:null;if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return Tt!==null?null:b(Q,F,""+tt,ht);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case E:return tt.key===Tt?H(Q,F,tt,ht):null;case S:return tt.key===Tt?nt(Q,F,tt,ht):null;case R:return Tt=tt._init,tt=Tt(tt._payload),it(Q,F,tt,ht)}if(Y(tt)||z(tt))return Tt!==null?null:ut(Q,F,tt,ht,null);if(typeof tt.then=="function")return it(Q,F,oh(tt),ht);if(tt.$$typeof===K)return it(Q,F,Kc(Q,tt),ht);lh(Q,tt)}return null}function at(Q,F,tt,ht,Tt){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return Q=Q.get(tt)||null,b(F,Q,""+ht,Tt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case E:return Q=Q.get(ht.key===null?tt:ht.key)||null,H(F,Q,ht,Tt);case S:return Q=Q.get(ht.key===null?tt:ht.key)||null,nt(F,Q,ht,Tt);case R:var Ht=ht._init;return ht=Ht(ht._payload),at(Q,F,tt,ht,Tt)}if(Y(ht)||z(ht))return Q=Q.get(tt)||null,ut(F,Q,ht,Tt,null);if(typeof ht.then=="function")return at(Q,F,tt,oh(ht),Tt);if(ht.$$typeof===K)return at(Q,F,tt,Kc(F,ht),Tt);lh(F,ht)}return null}function Mt(Q,F,tt,ht){for(var Tt=null,Ht=null,St=F,xt=F=0,nn=null;St!==null&&xt<tt.length;xt++){St.index>xt?(nn=St,St=null):nn=St.sibling;var Wt=it(Q,St,tt[xt],ht);if(Wt===null){St===null&&(St=nn);break}i&&St&&Wt.alternate===null&&s(Q,St),F=p(Wt,F,xt),Ht===null?Tt=Wt:Ht.sibling=Wt,Ht=Wt,St=nn}if(xt===tt.length)return o(Q,St),Jt&&ma(Q,xt),Tt;if(St===null){for(;xt<tt.length;xt++)St=ft(Q,tt[xt],ht),St!==null&&(F=p(St,F,xt),Ht===null?Tt=St:Ht.sibling=St,Ht=St);return Jt&&ma(Q,xt),Tt}for(St=u(St);xt<tt.length;xt++)nn=at(St,Q,xt,tt[xt],ht),nn!==null&&(i&&nn.alternate!==null&&St.delete(nn.key===null?xt:nn.key),F=p(nn,F,xt),Ht===null?Tt=nn:Ht.sibling=nn,Ht=nn);return i&&St.forEach(function(Ts){return s(Q,Ts)}),Jt&&ma(Q,xt),Tt}function Ct(Q,F,tt,ht){if(tt==null)throw Error(r(151));for(var Tt=null,Ht=null,St=F,xt=F=0,nn=null,Wt=tt.next();St!==null&&!Wt.done;xt++,Wt=tt.next()){St.index>xt?(nn=St,St=null):nn=St.sibling;var Ts=it(Q,St,Wt.value,ht);if(Ts===null){St===null&&(St=nn);break}i&&St&&Ts.alternate===null&&s(Q,St),F=p(Ts,F,xt),Ht===null?Tt=Ts:Ht.sibling=Ts,Ht=Ts,St=nn}if(Wt.done)return o(Q,St),Jt&&ma(Q,xt),Tt;if(St===null){for(;!Wt.done;xt++,Wt=tt.next())Wt=ft(Q,Wt.value,ht),Wt!==null&&(F=p(Wt,F,xt),Ht===null?Tt=Wt:Ht.sibling=Wt,Ht=Wt);return Jt&&ma(Q,xt),Tt}for(St=u(St);!Wt.done;xt++,Wt=tt.next())Wt=at(St,Q,xt,Wt.value,ht),Wt!==null&&(i&&Wt.alternate!==null&&St.delete(Wt.key===null?xt:Wt.key),F=p(Wt,F,xt),Ht===null?Tt=Wt:Ht.sibling=Wt,Ht=Wt);return i&&St.forEach(function(EI){return s(Q,EI)}),Jt&&ma(Q,xt),Tt}function le(Q,F,tt,ht){if(typeof tt=="object"&&tt!==null&&tt.type===x&&tt.key===null&&(tt=tt.props.children),typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case E:t:{for(var Tt=tt.key;F!==null;){if(F.key===Tt){if(Tt=tt.type,Tt===x){if(F.tag===7){o(Q,F.sibling),ht=f(F,tt.props.children),ht.return=Q,Q=ht;break t}}else if(F.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===R&&y0(Tt)===F.type){o(Q,F.sibling),ht=f(F,tt.props),eu(ht,tt),ht.return=Q,Q=ht;break t}o(Q,F);break}else s(Q,F);F=F.sibling}tt.type===x?(ht=da(tt.props.children,Q.mode,ht,tt.key),ht.return=Q,Q=ht):(ht=jc(tt.type,tt.key,tt.props,null,Q.mode,ht),eu(ht,tt),ht.return=Q,Q=ht)}return w(Q);case S:t:{for(Tt=tt.key;F!==null;){if(F.key===Tt)if(F.tag===4&&F.stateNode.containerInfo===tt.containerInfo&&F.stateNode.implementation===tt.implementation){o(Q,F.sibling),ht=f(F,tt.children||[]),ht.return=Q,Q=ht;break t}else{o(Q,F);break}else s(Q,F);F=F.sibling}ht=Ld(tt,Q.mode,ht),ht.return=Q,Q=ht}return w(Q);case R:return Tt=tt._init,tt=Tt(tt._payload),le(Q,F,tt,ht)}if(Y(tt))return Mt(Q,F,tt,ht);if(z(tt)){if(Tt=z(tt),typeof Tt!="function")throw Error(r(150));return tt=Tt.call(tt),Ct(Q,F,tt,ht)}if(typeof tt.then=="function")return le(Q,F,oh(tt),ht);if(tt.$$typeof===K)return le(Q,F,Kc(Q,tt),ht);lh(Q,tt)}return typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint"?(tt=""+tt,F!==null&&F.tag===6?(o(Q,F.sibling),ht=f(F,tt),ht.return=Q,Q=ht):(o(Q,F),ht=Pd(tt,Q.mode,ht),ht.return=Q,Q=ht),w(Q)):o(Q,F)}return function(Q,F,tt,ht){try{tu=0;var Tt=le(Q,F,tt,ht);return wo=null,Tt}catch(St){if(St===Gl||St===Qc)throw St;var Ht=Gn(29,St,null,Q.mode);return Ht.lanes=ht,Ht.return=Q,Ht}finally{}}}var So=_0(!0),v0=_0(!1),pi=$(null),er=null;function as(i){var s=i.alternate;st(Ge,Ge.current&1),st(pi,i),er===null&&(s===null||_o.current!==null||s.memoizedState!==null)&&(er=i)}function E0(i){if(i.tag===22){if(st(Ge,Ge.current),st(pi,i),er===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(er=i)}}else os()}function os(){st(Ge,Ge.current),st(pi,pi.current)}function Nr(i){et(pi),er===i&&(er=null),et(Ge)}var Ge=$(0);function uh(i){for(var s=i;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||sm(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function pg(i,s,o,u){s=i.memoizedState,o=o(u,s),o=o==null?s:y({},s,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var yg={enqueueSetState:function(i,s,o){i=i._reactInternals;var u=Xn(),f=is(u);f.payload=s,o!=null&&(f.callback=o),s=rs(i,f,u),s!==null&&(Qn(s,i,u),Yl(s,i,u))},enqueueReplaceState:function(i,s,o){i=i._reactInternals;var u=Xn(),f=is(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=rs(i,f,u),s!==null&&(Qn(s,i,u),Yl(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var o=Xn(),u=is(o);u.tag=2,s!=null&&(u.callback=s),s=rs(i,u,o),s!==null&&(Qn(s,i,o),Yl(s,i,o))}};function T0(i,s,o,u,f,p,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,p,w):s.prototype&&s.prototype.isPureReactComponent?!Ll(o,u)||!Ll(f,p):!0}function w0(i,s,o,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==i&&yg.enqueueReplaceState(s,s.state,null)}function wa(i,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(i=i.defaultProps){o===s&&(o=y({},o));for(var f in i)o[f]===void 0&&(o[f]=i[f])}return o}var ch=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function S0(i){ch(i)}function b0(i){console.error(i)}function A0(i){ch(i)}function hh(i,s){try{var o=i.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function R0(i,s,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function _g(i,s,o){return o=is(o),o.tag=3,o.payload={element:null},o.callback=function(){hh(i,s)},o}function I0(i){return i=is(i),i.tag=3,i}function C0(i,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;i.payload=function(){return f(p)},i.callback=function(){R0(s,o,u)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(i.callback=function(){R0(s,o,u),typeof f!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function ER(i,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&ql(s,o,f,!0),o=pi.current,o!==null){switch(o.tag){case 13:return er===null?qg():o.alternate===null&&Ie===0&&(Ie=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Yd?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),jg(i,u,f)),!1;case 22:return o.flags|=65536,u===Yd?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),jg(i,u,f)),!1}throw Error(r(435,o.tag))}return jg(i,u,f),qg(),!1}if(Jt)return s=pi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==Bd&&(i=Error(r(422),{cause:u}),Hl(fi(i,o)))):(u!==Bd&&(s=Error(r(423),{cause:u}),Hl(fi(s,o))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,u=fi(u,o),f=_g(i.stateNode,u,f),Qd(i,f),Ie!==4&&(Ie=2)),!1;var p=Error(r(520),{cause:u});if(p=fi(p,o),lu===null?lu=[p]:lu.push(p),Ie!==4&&(Ie=2),s===null)return!0;u=fi(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,i=f&-f,o.lanes|=i,i=_g(o.stateNode,u,i),Qd(o,i),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ds===null||!ds.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=I0(f),C0(f,i,o,u),Qd(o,f),!1}o=o.return}while(o!==null);return!1}var x0=Error(r(461)),tn=!1;function un(i,s,o,u){s.child=i===null?v0(s,null,o,u):So(s,i.child,o,u)}function N0(i,s,o,u,f){o=o.render;var p=s.ref;if("ref"in u){var w={};for(var b in u)b!=="ref"&&(w[b]=u[b])}else w=u;return va(s),u=eg(i,s,o,w,p,f),b=ng(),i!==null&&!tn?(ig(i,s,f),Dr(i,s,f)):(Jt&&b&&Ud(s),s.flags|=1,un(i,s,u,f),s.child)}function D0(i,s,o,u,f){if(i===null){var p=o.type;return typeof p=="function"&&!kd(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,M0(i,s,p,u,f)):(i=jc(o.type,null,u,s,s.mode,f),i.ref=s.ref,i.return=s,s.child=i)}if(p=i.child,!Rg(i,f)){var w=p.memoizedProps;if(o=o.compare,o=o!==null?o:Ll,o(w,u)&&i.ref===s.ref)return Dr(i,s,f)}return s.flags|=1,i=br(p,u),i.ref=s.ref,i.return=s,s.child=i}function M0(i,s,o,u,f){if(i!==null){var p=i.memoizedProps;if(Ll(p,u)&&i.ref===s.ref)if(tn=!1,s.pendingProps=u=p,Rg(i,f))(i.flags&131072)!==0&&(tn=!0);else return s.lanes=i.lanes,Dr(i,s,f)}return vg(i,s,o,u,f)}function O0(i,s,o){var u=s.pendingProps,f=u.children,p=i!==null?i.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=p!==null?p.baseLanes|o:o,i!==null){for(f=s.child=i.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;s.childLanes=p&~u}else s.childLanes=0,s.child=null;return V0(i,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Xc(s,p!==null?p.cachePool:null),p!==null?M_(s,p):Wd(),E0(s);else return s.lanes=s.childLanes=536870912,V0(i,s,p!==null?p.baseLanes|o:o,o)}else p!==null?(Xc(s,p.cachePool),M_(s,p),os(),s.memoizedState=null):(i!==null&&Xc(s,null),Wd(),os());return un(i,s,f,o),s.child}function V0(i,s,o,u){var f=$d();return f=f===null?null:{parent:je._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},i!==null&&Xc(s,null),Wd(),E0(s),i!==null&&ql(i,s,u,!0),null}function fh(i,s){var o=s.ref;if(o===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(i===null||i.ref!==o)&&(s.flags|=4194816)}}function vg(i,s,o,u,f){return va(s),o=eg(i,s,o,u,void 0,f),u=ng(),i!==null&&!tn?(ig(i,s,f),Dr(i,s,f)):(Jt&&u&&Ud(s),s.flags|=1,un(i,s,o,f),s.child)}function k0(i,s,o,u,f,p){return va(s),s.updateQueue=null,o=V_(s,u,o,f),O_(i),u=ng(),i!==null&&!tn?(ig(i,s,p),Dr(i,s,p)):(Jt&&u&&Ud(s),s.flags|=1,un(i,s,o,p),s.child)}function P0(i,s,o,u,f){if(va(s),s.stateNode===null){var p=fo,w=o.contextType;typeof w=="object"&&w!==null&&(p=yn(w)),p=new o(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=yg,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},Kd(s),w=o.contextType,p.context=typeof w=="object"&&w!==null?yn(w):fo,p.state=s.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(pg(s,o,w,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(w=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),w!==p.state&&yg.enqueueReplaceState(p,p.state,null),Xl(s,u,p,f),Kl(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){p=s.stateNode;var b=s.memoizedProps,H=wa(o,b);p.props=H;var nt=p.context,ut=o.contextType;w=fo,typeof ut=="object"&&ut!==null&&(w=yn(ut));var ft=o.getDerivedStateFromProps;ut=typeof ft=="function"||typeof p.getSnapshotBeforeUpdate=="function",b=s.pendingProps!==b,ut||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b||nt!==w)&&w0(s,p,u,w),ns=!1;var it=s.memoizedState;p.state=it,Xl(s,u,p,f),Kl(),nt=s.memoizedState,b||it!==nt||ns?(typeof ft=="function"&&(pg(s,o,ft,u),nt=s.memoizedState),(H=ns||T0(s,o,H,u,it,nt,w))?(ut||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=nt),p.props=u,p.state=nt,p.context=w,u=H):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,Xd(i,s),w=s.memoizedProps,ut=wa(o,w),p.props=ut,ft=s.pendingProps,it=p.context,nt=o.contextType,H=fo,typeof nt=="object"&&nt!==null&&(H=yn(nt)),b=o.getDerivedStateFromProps,(nt=typeof b=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w!==ft||it!==H)&&w0(s,p,u,H),ns=!1,it=s.memoizedState,p.state=it,Xl(s,u,p,f),Kl();var at=s.memoizedState;w!==ft||it!==at||ns||i!==null&&i.dependencies!==null&&Yc(i.dependencies)?(typeof b=="function"&&(pg(s,o,b,u),at=s.memoizedState),(ut=ns||T0(s,o,ut,u,it,at,H)||i!==null&&i.dependencies!==null&&Yc(i.dependencies))?(nt||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,at,H),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,at,H)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||w===i.memoizedProps&&it===i.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&it===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=at),p.props=u,p.state=at,p.context=H,u=ut):(typeof p.componentDidUpdate!="function"||w===i.memoizedProps&&it===i.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&it===i.memoizedState||(s.flags|=1024),u=!1)}return p=u,fh(i,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,i!==null&&u?(s.child=So(s,i.child,null,f),s.child=So(s,null,o,f)):un(i,s,o,f),s.memoizedState=p.state,i=s.child):i=Dr(i,s,f),i}function L0(i,s,o,u){return Bl(),s.flags|=256,un(i,s,o,u),s.child}var Eg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Tg(i){return{baseLanes:i,cachePool:b_()}}function wg(i,s,o){return i=i!==null?i.childLanes&~o:0,s&&(i|=yi),i}function U0(i,s,o){var u=s.pendingProps,f=!1,p=(s.flags&128)!==0,w;if((w=p)||(w=i!==null&&i.memoizedState===null?!1:(Ge.current&2)!==0),w&&(f=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,i===null){if(Jt){if(f?as(s):os(),Jt){var b=Re,H;if(H=b){t:{for(H=b,b=tr;H.nodeType!==8;){if(!b){b=null;break t}if(H=Ni(H.nextSibling),H===null){b=null;break t}}b=H}b!==null?(s.memoizedState={dehydrated:b,treeContext:ga!==null?{id:Ar,overflow:Rr}:null,retryLane:536870912,hydrationErrors:null},H=Gn(18,null,null,0),H.stateNode=b,H.return=s,s.child=H,xn=s,Re=null,H=!0):H=!1}H||ya(s)}if(b=s.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return sm(b)?s.lanes=32:s.lanes=536870912,null;Nr(s)}return b=u.children,u=u.fallback,f?(os(),f=s.mode,b=dh({mode:"hidden",children:b},f),u=da(u,f,o,null),b.return=s,u.return=s,b.sibling=u,s.child=b,f=s.child,f.memoizedState=Tg(o),f.childLanes=wg(i,w,o),s.memoizedState=Eg,u):(as(s),Sg(s,b))}if(H=i.memoizedState,H!==null&&(b=H.dehydrated,b!==null)){if(p)s.flags&256?(as(s),s.flags&=-257,s=bg(i,s,o)):s.memoizedState!==null?(os(),s.child=i.child,s.flags|=128,s=null):(os(),f=u.fallback,b=s.mode,u=dh({mode:"visible",children:u.children},b),f=da(f,b,o,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,So(s,i.child,null,o),u=s.child,u.memoizedState=Tg(o),u.childLanes=wg(i,w,o),s.memoizedState=Eg,s=f);else if(as(s),sm(b)){if(w=b.nextSibling&&b.nextSibling.dataset,w)var nt=w.dgst;w=nt,u=Error(r(419)),u.stack="",u.digest=w,Hl({value:u,source:null,stack:null}),s=bg(i,s,o)}else if(tn||ql(i,s,o,!1),w=(o&i.childLanes)!==0,tn||w){if(w=ge,w!==null&&(u=o&-o,u=(u&42)!==0?1:Bi(u),u=(u&(w.suspendedLanes|o))!==0?0:u,u!==0&&u!==H.retryLane))throw H.retryLane=u,ho(i,u),Qn(w,i,u),x0;b.data==="$?"||qg(),s=bg(i,s,o)}else b.data==="$?"?(s.flags|=192,s.child=i.child,s=null):(i=H.treeContext,Re=Ni(b.nextSibling),xn=s,Jt=!0,pa=null,tr=!1,i!==null&&(gi[mi++]=Ar,gi[mi++]=Rr,gi[mi++]=ga,Ar=i.id,Rr=i.overflow,ga=s),s=Sg(s,u.children),s.flags|=4096);return s}return f?(os(),f=u.fallback,b=s.mode,H=i.child,nt=H.sibling,u=br(H,{mode:"hidden",children:u.children}),u.subtreeFlags=H.subtreeFlags&65011712,nt!==null?f=br(nt,f):(f=da(f,b,o,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,b=i.child.memoizedState,b===null?b=Tg(o):(H=b.cachePool,H!==null?(nt=je._currentValue,H=H.parent!==nt?{parent:nt,pool:nt}:H):H=b_(),b={baseLanes:b.baseLanes|o,cachePool:H}),f.memoizedState=b,f.childLanes=wg(i,w,o),s.memoizedState=Eg,u):(as(s),o=i.child,i=o.sibling,o=br(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,i!==null&&(w=s.deletions,w===null?(s.deletions=[i],s.flags|=16):w.push(i)),s.child=o,s.memoizedState=null,o)}function Sg(i,s){return s=dh({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function dh(i,s){return i=Gn(22,i,null,s),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function bg(i,s,o){return So(s,i.child,null,o),i=Sg(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function z0(i,s,o){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),qd(i.return,s,o)}function Ag(i,s,o,u,f){var p=i.memoizedState;p===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=f)}function B0(i,s,o){var u=s.pendingProps,f=u.revealOrder,p=u.tail;if(un(i,s,u.children,o),u=Ge.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&z0(i,o,s);else if(i.tag===19)z0(i,o,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}switch(st(Ge,u),f){case"forwards":for(o=s.child,f=null;o!==null;)i=o.alternate,i!==null&&uh(i)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Ag(s,!1,f,o,p);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(i=f.alternate,i!==null&&uh(i)===null){s.child=f;break}i=f.sibling,f.sibling=o,o=f,f=i}Ag(s,!0,o,null,p);break;case"together":Ag(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Dr(i,s,o){if(i!==null&&(s.dependencies=i.dependencies),fs|=s.lanes,(o&s.childLanes)===0)if(i!==null){if(ql(i,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,o=br(i,i.pendingProps),s.child=o,o.return=s;i.sibling!==null;)i=i.sibling,o=o.sibling=br(i,i.pendingProps),o.return=s;o.sibling=null}return s.child}function Rg(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Yc(i)))}function TR(i,s,o){switch(s.tag){case 3:At(s,s.stateNode.containerInfo),es(s,je,i.memoizedState.cache),Bl();break;case 27:case 5:Pt(s);break;case 4:At(s,s.stateNode.containerInfo);break;case 10:es(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(as(s),s.flags|=128,null):(o&s.child.childLanes)!==0?U0(i,s,o):(as(s),i=Dr(i,s,o),i!==null?i.sibling:null);as(s);break;case 19:var f=(i.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(ql(i,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return B0(i,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),st(Ge,Ge.current),u)break;return null;case 22:case 23:return s.lanes=0,O0(i,s,o);case 24:es(s,je,i.memoizedState.cache)}return Dr(i,s,o)}function H0(i,s,o){if(i!==null)if(i.memoizedProps!==s.pendingProps)tn=!0;else{if(!Rg(i,o)&&(s.flags&128)===0)return tn=!1,TR(i,s,o);tn=(i.flags&131072)!==0}else tn=!1,Jt&&(s.flags&1048576)!==0&&y_(s,$c,s.index);switch(s.lanes=0,s.tag){case 16:t:{i=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")kd(u)?(i=wa(u,i),s.tag=1,s=P0(null,s,u,i,o)):(s.tag=0,s=vg(null,s,u,i,o));else{if(u!=null){if(f=u.$$typeof,f===L){s.tag=11,s=N0(null,s,u,i,o);break t}else if(f===V){s.tag=14,s=D0(null,s,u,i,o);break t}}throw s=O(u)||u,Error(r(306,s,""))}}return s;case 0:return vg(i,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=wa(u,s.pendingProps),P0(i,s,u,f,o);case 3:t:{if(At(s,s.stateNode.containerInfo),i===null)throw Error(r(387));u=s.pendingProps;var p=s.memoizedState;f=p.element,Xd(i,s),Xl(s,u,null,o);var w=s.memoizedState;if(u=w.cache,es(s,je,u),u!==p.cache&&Fd(s,[je],o,!0),Kl(),u=w.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=L0(i,s,u,o);break t}else if(u!==f){f=fi(Error(r(424)),s),Hl(f),s=L0(i,s,u,o);break t}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Re=Ni(i.firstChild),xn=s,Jt=!0,pa=null,tr=!0,o=v0(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Bl(),u===f){s=Dr(i,s,o);break t}un(i,s,u,o)}s=s.child}return s;case 26:return fh(i,s),i===null?(o=Gv(s.type,null,s.pendingProps,null))?s.memoizedState=o:Jt||(o=s.type,i=s.pendingProps,u=Ih(yt.current).createElement(o),u[Ne]=s,u[Ae]=i,hn(u,o,i),we(u),s.stateNode=u):s.memoizedState=Gv(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Pt(s),i===null&&Jt&&(u=s.stateNode=qv(s.type,s.pendingProps,yt.current),xn=s,tr=!0,f=Re,ps(s.type)?(am=f,Re=Ni(u.firstChild)):Re=f),un(i,s,s.pendingProps.children,o),fh(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Jt&&((f=u=Re)&&(u=XR(u,s.type,s.pendingProps,tr),u!==null?(s.stateNode=u,xn=s,Re=Ni(u.firstChild),tr=!1,f=!0):f=!1),f||ya(s)),Pt(s),f=s.type,p=s.pendingProps,w=i!==null?i.memoizedProps:null,u=p.children,nm(f,p)?u=null:w!==null&&nm(f,w)&&(s.flags|=32),s.memoizedState!==null&&(f=eg(i,s,dR,null,null,o),yu._currentValue=f),fh(i,s),un(i,s,u,o),s.child;case 6:return i===null&&Jt&&((i=o=Re)&&(o=QR(o,s.pendingProps,tr),o!==null?(s.stateNode=o,xn=s,Re=null,i=!0):i=!1),i||ya(s)),null;case 13:return U0(i,s,o);case 4:return At(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=So(s,null,u,o):un(i,s,u,o),s.child;case 11:return N0(i,s,s.type,s.pendingProps,o);case 7:return un(i,s,s.pendingProps,o),s.child;case 8:return un(i,s,s.pendingProps.children,o),s.child;case 12:return un(i,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,es(s,s.type,u.value),un(i,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,va(s),f=yn(f),u=u(f),s.flags|=1,un(i,s,u,o),s.child;case 14:return D0(i,s,s.type,s.pendingProps,o);case 15:return M0(i,s,s.type,s.pendingProps,o);case 19:return B0(i,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},i===null?(o=dh(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=br(i.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return O0(i,s,o);case 24:return va(s),u=yn(je),i===null?(f=$d(),f===null&&(f=ge,p=jd(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),s.memoizedState={parent:u,cache:f},Kd(s),es(s,je,f)):((i.lanes&o)!==0&&(Xd(i,s),Xl(s,null,null,o),Kl()),f=i.memoizedState,p=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),es(s,je,u)):(u=p.cache,es(s,je,u),u!==f.cache&&Fd(s,[je],o,!0))),un(i,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Mr(i){i.flags|=4}function q0(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Qv(s)){if(s=pi.current,s!==null&&((Qt&4194048)===Qt?er!==null:(Qt&62914560)!==Qt&&(Qt&536870912)===0||s!==er))throw $l=Yd,A_;i.flags|=8192}}function gh(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?bi():536870912,i.lanes|=s,Io|=s)}function nu(i,s){if(!Jt)switch(i.tailMode){case"hidden":s=i.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function Se(i){var s=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(s)for(var f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=u,i.childLanes=o,s}function wR(i,s,o){var u=s.pendingProps;switch(zd(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Se(s),null;case 1:return Se(s),null;case 3:return o=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Cr(je),kt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(zl(s)?Mr(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,E_())),Se(s),null;case 26:return o=s.memoizedState,i===null?(Mr(s),o!==null?(Se(s),q0(s,o)):(Se(s),s.flags&=-16777217)):o?o!==i.memoizedState?(Mr(s),Se(s),q0(s,o)):(Se(s),s.flags&=-16777217):(i.memoizedProps!==u&&Mr(s),Se(s),s.flags&=-16777217),null;case 27:ue(s),o=yt.current;var f=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Mr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return Se(s),null}i=ct.current,zl(s)?__(s):(i=qv(f,u,o),s.stateNode=i,Mr(s))}return Se(s),null;case 5:if(ue(s),o=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Mr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return Se(s),null}if(i=ct.current,zl(s))__(s);else{switch(f=Ih(yt.current),i){case 1:i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":i=f.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?i.multiple=!0:u.size&&(i.size=u.size);break;default:i=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}i[Ne]=s,i[Ae]=u;t:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break t;for(;f.sibling===null;){if(f.return===null||f.return===s)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=i;t:switch(hn(i,o,u),o){case"button":case"input":case"select":case"textarea":i=!!u.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&Mr(s)}}return Se(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&Mr(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(i=yt.current,zl(s)){if(i=s.stateNode,o=s.memoizedProps,u=null,f=xn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}i[Ne]=s,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||kv(i.nodeValue,o)),i||ya(s)}else i=Ih(i).createTextNode(u),i[Ne]=s,s.stateNode=i}return Se(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=zl(s),u!==null&&u.dehydrated!==null){if(i===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Ne]=s}else Bl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Se(s),f=!1}else f=E_(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(Nr(s),s):(Nr(s),null)}if(Nr(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,i=i!==null&&i.memoizedState!==null,o){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)}return o!==i&&o&&(s.child.flags|=8192),gh(s,s.updateQueue),Se(s),null;case 4:return kt(),i===null&&Zg(s.stateNode.containerInfo),Se(s),null;case 10:return Cr(s.type),Se(s),null;case 19:if(et(Ge),f=s.memoizedState,f===null)return Se(s),null;if(u=(s.flags&128)!==0,p=f.rendering,p===null)if(u)nu(f,!1);else{if(Ie!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(p=uh(i),p!==null){for(s.flags|=128,nu(f,!1),i=p.updateQueue,s.updateQueue=i,gh(s,i),s.subtreeFlags=0,i=o,o=s.child;o!==null;)p_(o,i),o=o.sibling;return st(Ge,Ge.current&1|2),s.child}i=i.sibling}f.tail!==null&&Lt()>yh&&(s.flags|=128,u=!0,nu(f,!1),s.lanes=4194304)}else{if(!u)if(i=uh(p),i!==null){if(s.flags|=128,u=!0,i=i.updateQueue,s.updateQueue=i,gh(s,i),nu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!Jt)return Se(s),null}else 2*Lt()-f.renderingStartTime>yh&&o!==536870912&&(s.flags|=128,u=!0,nu(f,!1),s.lanes=4194304);f.isBackwards?(p.sibling=s.child,s.child=p):(i=f.last,i!==null?i.sibling=p:s.child=p,f.last=p)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Lt(),s.sibling=null,i=Ge.current,st(Ge,u?i&1|2:i&1),s):(Se(s),null);case 22:case 23:return Nr(s),Jd(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(Se(s),s.subtreeFlags&6&&(s.flags|=8192)):Se(s),o=s.updateQueue,o!==null&&gh(s,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),i!==null&&et(Ea),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Cr(je),Se(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function SR(i,s){switch(zd(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Cr(je),kt(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return ue(s),null;case 13:if(Nr(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Bl()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return et(Ge),null;case 4:return kt(),null;case 10:return Cr(s.type),null;case 22:case 23:return Nr(s),Jd(),i!==null&&et(Ea),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Cr(je),null;case 25:return null;default:return null}}function F0(i,s){switch(zd(s),s.tag){case 3:Cr(je),kt();break;case 26:case 27:case 5:ue(s);break;case 4:kt();break;case 13:Nr(s);break;case 19:et(Ge);break;case 10:Cr(s.type);break;case 22:case 23:Nr(s),Jd(),i!==null&&et(Ea);break;case 24:Cr(je)}}function iu(i,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&i)===i){u=void 0;var p=o.create,w=o.inst;u=p(),w.destroy=u}o=o.next}while(o!==f)}}catch(b){fe(s,s.return,b)}}function ls(i,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&i)===i){var w=u.inst,b=w.destroy;if(b!==void 0){w.destroy=void 0,f=s;var H=o,nt=b;try{nt()}catch(ut){fe(f,H,ut)}}}u=u.next}while(u!==p)}}catch(ut){fe(s,s.return,ut)}}function j0(i){var s=i.updateQueue;if(s!==null){var o=i.stateNode;try{D_(s,o)}catch(u){fe(i,i.return,u)}}}function G0(i,s,o){o.props=wa(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){fe(i,s,u)}}function ru(i,s){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(f){fe(i,s,f)}}function nr(i,s){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){fe(i,s,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){fe(i,s,f)}else o.current=null}function $0(i){var s=i.type,o=i.memoizedProps,u=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){fe(i,i.return,f)}}function Ig(i,s,o){try{var u=i.stateNode;jR(u,i.type,o,s),u[Ae]=s}catch(f){fe(i,i.return,f)}}function Y0(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ps(i.type)||i.tag===4}function Cg(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||Y0(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ps(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function xg(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(i),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Rh));else if(u!==4&&(u===27&&ps(i.type)&&(o=i.stateNode,s=null),i=i.child,i!==null))for(xg(i,s,o),i=i.sibling;i!==null;)xg(i,s,o),i=i.sibling}function mh(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?o.insertBefore(i,s):o.appendChild(i);else if(u!==4&&(u===27&&ps(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(mh(i,s,o),i=i.sibling;i!==null;)mh(i,s,o),i=i.sibling}function K0(i){var s=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);hn(s,u,o),s[Ne]=i,s[Ae]=o}catch(p){fe(i,i.return,p)}}var Or=!1,Me=!1,Ng=!1,X0=typeof WeakSet=="function"?WeakSet:Set,en=null;function bR(i,s){if(i=i.containerInfo,tm=Oh,i=a_(i),Cd(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else t:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break t}var w=0,b=-1,H=-1,nt=0,ut=0,ft=i,it=null;e:for(;;){for(var at;ft!==o||f!==0&&ft.nodeType!==3||(b=w+f),ft!==p||u!==0&&ft.nodeType!==3||(H=w+u),ft.nodeType===3&&(w+=ft.nodeValue.length),(at=ft.firstChild)!==null;)it=ft,ft=at;for(;;){if(ft===i)break e;if(it===o&&++nt===f&&(b=w),it===p&&++ut===u&&(H=w),(at=ft.nextSibling)!==null)break;ft=it,it=ft.parentNode}ft=at}o=b===-1||H===-1?null:{start:b,end:H}}else o=null}o=o||{start:0,end:0}}else o=null;for(em={focusedElem:i,selectionRange:o},Oh=!1,en=s;en!==null;)if(s=en,i=s.child,(s.subtreeFlags&1024)!==0&&i!==null)i.return=s,en=i;else for(;en!==null;){switch(s=en,p=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&p!==null){i=void 0,o=s,f=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Mt=wa(o.type,f,o.elementType===o.type);i=u.getSnapshotBeforeUpdate(Mt,p),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ct){fe(o,o.return,Ct)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,o=i.nodeType,o===9)rm(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":rm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,en=i;break}en=s.return}}function Q0(i,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:us(i,o),u&4&&iu(5,o);break;case 1:if(us(i,o),u&4)if(i=o.stateNode,s===null)try{i.componentDidMount()}catch(w){fe(o,o.return,w)}else{var f=wa(o.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(f,s,i.__reactInternalSnapshotBeforeUpdate)}catch(w){fe(o,o.return,w)}}u&64&&j0(o),u&512&&ru(o,o.return);break;case 3:if(us(i,o),u&64&&(i=o.updateQueue,i!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{D_(i,s)}catch(w){fe(o,o.return,w)}}break;case 27:s===null&&u&4&&K0(o);case 26:case 5:us(i,o),s===null&&u&4&&$0(o),u&512&&ru(o,o.return);break;case 12:us(i,o);break;case 13:us(i,o),u&4&&J0(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=OR.bind(null,o),ZR(i,o))));break;case 22:if(u=o.memoizedState!==null||Or,!u){s=s!==null&&s.memoizedState!==null||Me,f=Or;var p=Me;Or=u,(Me=s)&&!p?cs(i,o,(o.subtreeFlags&8772)!==0):us(i,o),Or=f,Me=p}break;case 30:break;default:us(i,o)}}function Z0(i){var s=i.alternate;s!==null&&(i.alternate=null,Z0(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Fi(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ve=null,On=!1;function Vr(i,s,o){for(o=o.child;o!==null;)W0(i,s,o),o=o.sibling}function W0(i,s,o){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(te,o)}catch{}switch(o.tag){case 26:Me||nr(o,s),Vr(i,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Me||nr(o,s);var u=ve,f=On;ps(o.type)&&(ve=o.stateNode,On=!1),Vr(i,s,o),du(o.stateNode),ve=u,On=f;break;case 5:Me||nr(o,s);case 6:if(u=ve,f=On,ve=null,Vr(i,s,o),ve=u,On=f,ve!==null)if(On)try{(ve.nodeType===9?ve.body:ve.nodeName==="HTML"?ve.ownerDocument.body:ve).removeChild(o.stateNode)}catch(p){fe(o,s,p)}else try{ve.removeChild(o.stateNode)}catch(p){fe(o,s,p)}break;case 18:ve!==null&&(On?(i=ve,Bv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),Tu(i)):Bv(ve,o.stateNode));break;case 4:u=ve,f=On,ve=o.stateNode.containerInfo,On=!0,Vr(i,s,o),ve=u,On=f;break;case 0:case 11:case 14:case 15:Me||ls(2,o,s),Me||ls(4,o,s),Vr(i,s,o);break;case 1:Me||(nr(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&G0(o,s,u)),Vr(i,s,o);break;case 21:Vr(i,s,o);break;case 22:Me=(u=Me)||o.memoizedState!==null,Vr(i,s,o),Me=u;break;default:Vr(i,s,o)}}function J0(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Tu(i)}catch(o){fe(s,s.return,o)}}function AR(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new X0),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new X0),s;default:throw Error(r(435,i.tag))}}function Dg(i,s){var o=AR(i);s.forEach(function(u){var f=VR.bind(null,i,u);o.has(u)||(o.add(u),u.then(f,f))})}function $n(i,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],p=i,w=s,b=w;t:for(;b!==null;){switch(b.tag){case 27:if(ps(b.type)){ve=b.stateNode,On=!1;break t}break;case 5:ve=b.stateNode,On=!1;break t;case 3:case 4:ve=b.stateNode.containerInfo,On=!0;break t}b=b.return}if(ve===null)throw Error(r(160));W0(p,w,f),ve=null,On=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)tv(s,i),s=s.sibling}var xi=null;function tv(i,s){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:$n(s,i),Yn(i),u&4&&(ls(3,i,i.return),iu(3,i),ls(5,i,i.return));break;case 1:$n(s,i),Yn(i),u&512&&(Me||o===null||nr(o,o.return)),u&64&&Or&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=xi;if($n(s,i),Yn(i),u&512&&(Me||o===null||nr(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){t:{u=i.type,o=i.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[mr]||p[Ne]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),hn(p,u,o),p[Ne]=i,we(p),u=p;break t;case"link":var w=Kv("link","href",f).get(u+(o.href||""));if(w){for(var b=0;b<w.length;b++)if(p=w[b],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(b,1);break e}}p=f.createElement(u),hn(p,u,o),f.head.appendChild(p);break;case"meta":if(w=Kv("meta","content",f).get(u+(o.content||""))){for(b=0;b<w.length;b++)if(p=w[b],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(b,1);break e}}p=f.createElement(u),hn(p,u,o),f.head.appendChild(p);break;default:throw Error(r(468,u))}p[Ne]=i,we(p),u=p}i.stateNode=u}else Xv(f,i.type,i.stateNode);else i.stateNode=Yv(f,u,i.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?Xv(f,i.type,i.stateNode):Yv(f,u,i.memoizedProps)):u===null&&i.stateNode!==null&&Ig(i,i.memoizedProps,o.memoizedProps)}break;case 27:$n(s,i),Yn(i),u&512&&(Me||o===null||nr(o,o.return)),o!==null&&u&4&&Ig(i,i.memoizedProps,o.memoizedProps);break;case 5:if($n(s,i),Yn(i),u&512&&(Me||o===null||nr(o,o.return)),i.flags&32){f=i.stateNode;try{li(f,"")}catch(at){fe(i,i.return,at)}}u&4&&i.stateNode!=null&&(f=i.memoizedProps,Ig(i,f,o!==null?o.memoizedProps:f)),u&1024&&(Ng=!0);break;case 6:if($n(s,i),Yn(i),u&4){if(i.stateNode===null)throw Error(r(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch(at){fe(i,i.return,at)}}break;case 3:if(Nh=null,f=xi,xi=Ch(s.containerInfo),$n(s,i),xi=f,Yn(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Tu(s.containerInfo)}catch(at){fe(i,i.return,at)}Ng&&(Ng=!1,ev(i));break;case 4:u=xi,xi=Ch(i.stateNode.containerInfo),$n(s,i),Yn(i),xi=u;break;case 12:$n(s,i),Yn(i);break;case 13:$n(s,i),Yn(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Lg=Lt()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Dg(i,u)));break;case 22:f=i.memoizedState!==null;var H=o!==null&&o.memoizedState!==null,nt=Or,ut=Me;if(Or=nt||f,Me=ut||H,$n(s,i),Me=ut,Or=nt,Yn(i),u&8192)t:for(s=i.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||H||Or||Me||Sa(i)),o=null,s=i;;){if(s.tag===5||s.tag===26){if(o===null){H=o=s;try{if(p=H.stateNode,f)w=p.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{b=H.stateNode;var ft=H.memoizedProps.style,it=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;b.style.display=it==null||typeof it=="boolean"?"":(""+it).trim()}}catch(at){fe(H,H.return,at)}}}else if(s.tag===6){if(o===null){H=s;try{H.stateNode.nodeValue=f?"":H.memoizedProps}catch(at){fe(H,H.return,at)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Dg(i,o))));break;case 19:$n(s,i),Yn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Dg(i,u)));break;case 30:break;case 21:break;default:$n(s,i),Yn(i)}}function Yn(i){var s=i.flags;if(s&2){try{for(var o,u=i.return;u!==null;){if(Y0(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,p=Cg(i);mh(i,p,f);break;case 5:var w=o.stateNode;o.flags&32&&(li(w,""),o.flags&=-33);var b=Cg(i);mh(i,b,w);break;case 3:case 4:var H=o.stateNode.containerInfo,nt=Cg(i);xg(i,nt,H);break;default:throw Error(r(161))}}catch(ut){fe(i,i.return,ut)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function ev(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;ev(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function us(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Q0(i,s.alternate,s),s=s.sibling}function Sa(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:ls(4,s,s.return),Sa(s);break;case 1:nr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&G0(s,s.return,o),Sa(s);break;case 27:du(s.stateNode);case 26:case 5:nr(s,s.return),Sa(s);break;case 22:s.memoizedState===null&&Sa(s);break;case 30:Sa(s);break;default:Sa(s)}i=i.sibling}}function cs(i,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=i,p=s,w=p.flags;switch(p.tag){case 0:case 11:case 15:cs(f,p,o),iu(4,p);break;case 1:if(cs(f,p,o),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(nt){fe(u,u.return,nt)}if(u=p,f=u.updateQueue,f!==null){var b=u.stateNode;try{var H=f.shared.hiddenCallbacks;if(H!==null)for(f.shared.hiddenCallbacks=null,f=0;f<H.length;f++)N_(H[f],b)}catch(nt){fe(u,u.return,nt)}}o&&w&64&&j0(p),ru(p,p.return);break;case 27:K0(p);case 26:case 5:cs(f,p,o),o&&u===null&&w&4&&$0(p),ru(p,p.return);break;case 12:cs(f,p,o);break;case 13:cs(f,p,o),o&&w&4&&J0(f,p);break;case 22:p.memoizedState===null&&cs(f,p,o),ru(p,p.return);break;case 30:break;default:cs(f,p,o)}s=s.sibling}}function Mg(i,s){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&Fl(o))}function Og(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Fl(i))}function ir(i,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)nv(i,s,o,u),s=s.sibling}function nv(i,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:ir(i,s,o,u),f&2048&&iu(9,s);break;case 1:ir(i,s,o,u);break;case 3:ir(i,s,o,u),f&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Fl(i)));break;case 12:if(f&2048){ir(i,s,o,u),i=s.stateNode;try{var p=s.memoizedProps,w=p.id,b=p.onPostCommit;typeof b=="function"&&b(w,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(H){fe(s,s.return,H)}}else ir(i,s,o,u);break;case 13:ir(i,s,o,u);break;case 23:break;case 22:p=s.stateNode,w=s.alternate,s.memoizedState!==null?p._visibility&2?ir(i,s,o,u):su(i,s):p._visibility&2?ir(i,s,o,u):(p._visibility|=2,bo(i,s,o,u,(s.subtreeFlags&10256)!==0)),f&2048&&Mg(w,s);break;case 24:ir(i,s,o,u),f&2048&&Og(s.alternate,s);break;default:ir(i,s,o,u)}}function bo(i,s,o,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var p=i,w=s,b=o,H=u,nt=w.flags;switch(w.tag){case 0:case 11:case 15:bo(p,w,b,H,f),iu(8,w);break;case 23:break;case 22:var ut=w.stateNode;w.memoizedState!==null?ut._visibility&2?bo(p,w,b,H,f):su(p,w):(ut._visibility|=2,bo(p,w,b,H,f)),f&&nt&2048&&Mg(w.alternate,w);break;case 24:bo(p,w,b,H,f),f&&nt&2048&&Og(w.alternate,w);break;default:bo(p,w,b,H,f)}s=s.sibling}}function su(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=i,u=s,f=u.flags;switch(u.tag){case 22:su(o,u),f&2048&&Mg(u.alternate,u);break;case 24:su(o,u),f&2048&&Og(u.alternate,u);break;default:su(o,u)}s=s.sibling}}var au=8192;function Ao(i){if(i.subtreeFlags&au)for(i=i.child;i!==null;)iv(i),i=i.sibling}function iv(i){switch(i.tag){case 26:Ao(i),i.flags&au&&i.memoizedState!==null&&cI(xi,i.memoizedState,i.memoizedProps);break;case 5:Ao(i);break;case 3:case 4:var s=xi;xi=Ch(i.stateNode.containerInfo),Ao(i),xi=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=au,au=16777216,Ao(i),au=s):Ao(i));break;default:Ao(i)}}function rv(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function ou(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];en=u,av(u,i)}rv(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)sv(i),i=i.sibling}function sv(i){switch(i.tag){case 0:case 11:case 15:ou(i),i.flags&2048&&ls(9,i,i.return);break;case 3:ou(i);break;case 12:ou(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,ph(i)):ou(i);break;default:ou(i)}}function ph(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];en=u,av(u,i)}rv(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:ls(8,s,s.return),ph(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,ph(s));break;default:ph(s)}i=i.sibling}}function av(i,s){for(;en!==null;){var o=en;switch(o.tag){case 0:case 11:case 15:ls(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Fl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,en=u;else t:for(o=i;en!==null;){u=en;var f=u.sibling,p=u.return;if(Z0(u),u===o){en=null;break t}if(f!==null){f.return=p,en=f;break t}en=p}}}var RR={getCacheForType:function(i){var s=yn(je),o=s.data.get(i);return o===void 0&&(o=i(),s.data.set(i,o)),o}},IR=typeof WeakMap=="function"?WeakMap:Map,ie=0,ge=null,jt=null,Qt=0,re=0,Kn=null,hs=!1,Ro=!1,Vg=!1,kr=0,Ie=0,fs=0,ba=0,kg=0,yi=0,Io=0,lu=null,Vn=null,Pg=!1,Lg=0,yh=1/0,_h=null,ds=null,cn=0,gs=null,Co=null,xo=0,Ug=0,zg=null,ov=null,uu=0,Bg=null;function Xn(){if((ie&2)!==0&&Qt!==0)return Qt&-Qt;if(D.T!==null){var i=po;return i!==0?i:Yg()}return Hi()}function lv(){yi===0&&(yi=(Qt&536870912)===0||Jt?gr():536870912);var i=pi.current;return i!==null&&(i.flags|=32),yi}function Qn(i,s,o){(i===ge&&(re===2||re===9)||i.cancelPendingCommit!==null)&&(No(i,0),ms(i,Qt,yi,!1)),ni(i,o),((ie&2)===0||i!==ge)&&(i===ge&&((ie&2)===0&&(ba|=o),Ie===4&&ms(i,Qt,yi,!1)),rr(i))}function uv(i,s,o){if((ie&6)!==0)throw Error(r(327));var u=!o&&(s&124)===0&&(s&i.expiredLanes)===0||Rn(i,s),f=u?NR(i,s):Fg(i,s,!0),p=u;do{if(f===0){Ro&&!u&&ms(i,s,0,!1);break}else{if(o=i.current.alternate,p&&!CR(o)){f=Fg(i,s,!1),p=!1;continue}if(f===2){if(p=s,i.errorRecoveryDisabledLanes&p)var w=0;else w=i.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;t:{var b=i;f=lu;var H=b.current.memoizedState.isDehydrated;if(H&&(No(b,w).flags|=256),w=Fg(b,w,!1),w!==2){if(Vg&&!H){b.errorRecoveryDisabledLanes|=p,ba|=p,f=4;break t}p=Vn,Vn=f,p!==null&&(Vn===null?Vn=p:Vn.push.apply(Vn,p))}f=w}if(p=!1,f!==2)continue}}if(f===1){No(i,0),ms(i,s,0,!0);break}t:{switch(u=i,p=f,p){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:ms(u,s,yi,!hs);break t;case 2:Vn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=Lg+300-Lt(),10<f)){if(ms(u,s,yi,!hs),an(u,0,!0)!==0)break t;u.timeoutHandle=Uv(cv.bind(null,u,o,Vn,_h,Pg,s,yi,ba,Io,hs,p,2,-0,0),f);break t}cv(u,o,Vn,_h,Pg,s,yi,ba,Io,hs,p,0,-0,0)}}break}while(!0);rr(i)}function cv(i,s,o,u,f,p,w,b,H,nt,ut,ft,it,at){if(i.timeoutHandle=-1,ft=s.subtreeFlags,(ft&8192||(ft&16785408)===16785408)&&(pu={stylesheets:null,count:0,unsuspend:uI},iv(s),ft=hI(),ft!==null)){i.cancelPendingCommit=ft(yv.bind(null,i,s,p,o,u,f,w,b,H,ut,1,it,at)),ms(i,p,w,!nt);return}yv(i,s,p,o,u,f,w,b,H)}function CR(i){for(var s=i;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],p=f.getSnapshot;f=f.value;try{if(!jn(p(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ms(i,s,o,u){s&=~kg,s&=~ba,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var f=s;0<f;){var p=31-Te(f),w=1<<p;u[p]=-1,f&=~w}o!==0&&ii(i,o,s)}function vh(){return(ie&6)===0?(cu(0),!1):!0}function Hg(){if(jt!==null){if(re===0)var i=jt.return;else i=jt,Ir=_a=null,rg(i),wo=null,tu=0,i=jt;for(;i!==null;)F0(i.alternate,i),i=i.return;jt=null}}function No(i,s){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,$R(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),Hg(),ge=i,jt=o=br(i.current,null),Qt=s,re=0,Kn=null,hs=!1,Ro=Rn(i,s),Vg=!1,Io=yi=kg=ba=fs=Ie=0,Vn=lu=null,Pg=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var f=31-Te(u),p=1<<f;s|=i[f],u&=~p}return kr=s,Hc(),o}function hv(i,s){zt=null,D.H=ah,s===Gl||s===Qc?(s=C_(),re=3):s===A_?(s=C_(),re=4):re=s===x0?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Kn=s,jt===null&&(Ie=1,hh(i,fi(s,i.current)))}function fv(){var i=D.H;return D.H=ah,i===null?ah:i}function dv(){var i=D.A;return D.A=RR,i}function qg(){Ie=4,hs||(Qt&4194048)!==Qt&&pi.current!==null||(Ro=!0),(fs&134217727)===0&&(ba&134217727)===0||ge===null||ms(ge,Qt,yi,!1)}function Fg(i,s,o){var u=ie;ie|=2;var f=fv(),p=dv();(ge!==i||Qt!==s)&&(_h=null,No(i,s)),s=!1;var w=Ie;t:do try{if(re!==0&&jt!==null){var b=jt,H=Kn;switch(re){case 8:Hg(),w=6;break t;case 3:case 2:case 9:case 6:pi.current===null&&(s=!0);var nt=re;if(re=0,Kn=null,Do(i,b,H,nt),o&&Ro){w=0;break t}break;default:nt=re,re=0,Kn=null,Do(i,b,H,nt)}}xR(),w=Ie;break}catch(ut){hv(i,ut)}while(!0);return s&&i.shellSuspendCounter++,Ir=_a=null,ie=u,D.H=f,D.A=p,jt===null&&(ge=null,Qt=0,Hc()),w}function xR(){for(;jt!==null;)gv(jt)}function NR(i,s){var o=ie;ie|=2;var u=fv(),f=dv();ge!==i||Qt!==s?(_h=null,yh=Lt()+500,No(i,s)):Ro=Rn(i,s);t:do try{if(re!==0&&jt!==null){s=jt;var p=Kn;e:switch(re){case 1:re=0,Kn=null,Do(i,s,p,1);break;case 2:case 9:if(R_(p)){re=0,Kn=null,mv(s);break}s=function(){re!==2&&re!==9||ge!==i||(re=7),rr(i)},p.then(s,s);break t;case 3:re=7;break t;case 4:re=5;break t;case 7:R_(p)?(re=0,Kn=null,mv(s)):(re=0,Kn=null,Do(i,s,p,7));break;case 5:var w=null;switch(jt.tag){case 26:w=jt.memoizedState;case 5:case 27:var b=jt;if(!w||Qv(w)){re=0,Kn=null;var H=b.sibling;if(H!==null)jt=H;else{var nt=b.return;nt!==null?(jt=nt,Eh(nt)):jt=null}break e}}re=0,Kn=null,Do(i,s,p,5);break;case 6:re=0,Kn=null,Do(i,s,p,6);break;case 8:Hg(),Ie=6;break t;default:throw Error(r(462))}}DR();break}catch(ut){hv(i,ut)}while(!0);return Ir=_a=null,D.H=u,D.A=f,ie=o,jt!==null?0:(ge=null,Qt=0,Hc(),Ie)}function DR(){for(;jt!==null&&!he();)gv(jt)}function gv(i){var s=H0(i.alternate,i,kr);i.memoizedProps=i.pendingProps,s===null?Eh(i):jt=s}function mv(i){var s=i,o=s.alternate;switch(s.tag){case 15:case 0:s=k0(o,s,s.pendingProps,s.type,void 0,Qt);break;case 11:s=k0(o,s,s.pendingProps,s.type.render,s.ref,Qt);break;case 5:rg(s);default:F0(o,s),s=jt=p_(s,kr),s=H0(o,s,kr)}i.memoizedProps=i.pendingProps,s===null?Eh(i):jt=s}function Do(i,s,o,u){Ir=_a=null,rg(s),wo=null,tu=0;var f=s.return;try{if(ER(i,f,s,o,Qt)){Ie=1,hh(i,fi(o,i.current)),jt=null;return}}catch(p){if(f!==null)throw jt=f,p;Ie=1,hh(i,fi(o,i.current)),jt=null;return}s.flags&32768?(Jt||u===1?i=!0:Ro||(Qt&536870912)!==0?i=!1:(hs=i=!0,(u===2||u===9||u===3||u===6)&&(u=pi.current,u!==null&&u.tag===13&&(u.flags|=16384))),pv(s,i)):Eh(s)}function Eh(i){var s=i;do{if((s.flags&32768)!==0){pv(s,hs);return}i=s.return;var o=wR(s.alternate,s,kr);if(o!==null){jt=o;return}if(s=s.sibling,s!==null){jt=s;return}jt=s=i}while(s!==null);Ie===0&&(Ie=5)}function pv(i,s){do{var o=SR(i.alternate,i);if(o!==null){o.flags&=32767,jt=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(i=i.sibling,i!==null)){jt=i;return}jt=i=o}while(i!==null);Ie=6,jt=null}function yv(i,s,o,u,f,p,w,b,H){i.cancelPendingCommit=null;do Th();while(cn!==0);if((ie&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(p=s.lanes|s.childLanes,p|=Od,Hn(i,o,p,w,b,H),i===ge&&(jt=ge=null,Qt=0),Co=s,gs=i,xo=o,Ug=p,zg=f,ov=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,kR(Un,function(){return wv(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=D.T,D.T=null,f=j.p,j.p=2,w=ie,ie|=4;try{bR(i,s,o)}finally{ie=w,j.p=f,D.T=u}}cn=1,_v(),vv(),Ev()}}function _v(){if(cn===1){cn=0;var i=gs,s=Co,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=D.T,D.T=null;var u=j.p;j.p=2;var f=ie;ie|=4;try{tv(s,i);var p=em,w=a_(i.containerInfo),b=p.focusedElem,H=p.selectionRange;if(w!==b&&b&&b.ownerDocument&&s_(b.ownerDocument.documentElement,b)){if(H!==null&&Cd(b)){var nt=H.start,ut=H.end;if(ut===void 0&&(ut=nt),"selectionStart"in b)b.selectionStart=nt,b.selectionEnd=Math.min(ut,b.value.length);else{var ft=b.ownerDocument||document,it=ft&&ft.defaultView||window;if(it.getSelection){var at=it.getSelection(),Mt=b.textContent.length,Ct=Math.min(H.start,Mt),le=H.end===void 0?Ct:Math.min(H.end,Mt);!at.extend&&Ct>le&&(w=le,le=Ct,Ct=w);var Q=r_(b,Ct),F=r_(b,le);if(Q&&F&&(at.rangeCount!==1||at.anchorNode!==Q.node||at.anchorOffset!==Q.offset||at.focusNode!==F.node||at.focusOffset!==F.offset)){var tt=ft.createRange();tt.setStart(Q.node,Q.offset),at.removeAllRanges(),Ct>le?(at.addRange(tt),at.extend(F.node,F.offset)):(tt.setEnd(F.node,F.offset),at.addRange(tt))}}}}for(ft=[],at=b;at=at.parentNode;)at.nodeType===1&&ft.push({element:at,left:at.scrollLeft,top:at.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ft.length;b++){var ht=ft[b];ht.element.scrollLeft=ht.left,ht.element.scrollTop=ht.top}}Oh=!!tm,em=tm=null}finally{ie=f,j.p=u,D.T=o}}i.current=s,cn=2}}function vv(){if(cn===2){cn=0;var i=gs,s=Co,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=D.T,D.T=null;var u=j.p;j.p=2;var f=ie;ie|=4;try{Q0(i,s.alternate,s)}finally{ie=f,j.p=u,D.T=o}}cn=3}}function Ev(){if(cn===4||cn===3){cn=0,Xe();var i=gs,s=Co,o=xo,u=ov;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?cn=5:(cn=0,Co=gs=null,Tv(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(ds=null),Qr(o),s=s.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(te,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=D.T,f=j.p,j.p=2,D.T=null;try{for(var p=i.onRecoverableError,w=0;w<u.length;w++){var b=u[w];p(b.value,{componentStack:b.stack})}}finally{D.T=s,j.p=f}}(xo&3)!==0&&Th(),rr(i),f=i.pendingLanes,(o&4194090)!==0&&(f&42)!==0?i===Bg?uu++:(uu=0,Bg=i):uu=0,cu(0)}}function Tv(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Fl(s)))}function Th(i){return _v(),vv(),Ev(),wv()}function wv(){if(cn!==5)return!1;var i=gs,s=Ug;Ug=0;var o=Qr(xo),u=D.T,f=j.p;try{j.p=32>o?32:o,D.T=null,o=zg,zg=null;var p=gs,w=xo;if(cn=0,Co=gs=null,xo=0,(ie&6)!==0)throw Error(r(331));var b=ie;if(ie|=4,sv(p.current),nv(p,p.current,w,o),ie=b,cu(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(te,p)}catch{}return!0}finally{j.p=f,D.T=u,Tv(i,s)}}function Sv(i,s,o){s=fi(o,s),s=_g(i.stateNode,s,2),i=rs(i,s,2),i!==null&&(ni(i,2),rr(i))}function fe(i,s,o){if(i.tag===3)Sv(i,i,o);else for(;s!==null;){if(s.tag===3){Sv(s,i,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ds===null||!ds.has(u))){i=fi(o,i),o=I0(2),u=rs(s,o,2),u!==null&&(C0(o,u,s,i),ni(u,2),rr(u));break}}s=s.return}}function jg(i,s,o){var u=i.pingCache;if(u===null){u=i.pingCache=new IR;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(Vg=!0,f.add(o),i=MR.bind(null,i,s,o),s.then(i,i))}function MR(i,s,o){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,ge===i&&(Qt&o)===o&&(Ie===4||Ie===3&&(Qt&62914560)===Qt&&300>Lt()-Lg?(ie&2)===0&&No(i,0):kg|=o,Io===Qt&&(Io=0)),rr(i)}function bv(i,s){s===0&&(s=bi()),i=ho(i,s),i!==null&&(ni(i,s),rr(i))}function OR(i){var s=i.memoizedState,o=0;s!==null&&(o=s.retryLane),bv(i,o)}function VR(i,s){var o=0;switch(i.tag){case 13:var u=i.stateNode,f=i.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),bv(i,o)}function kR(i,s){return Ee(i,s)}var wh=null,Mo=null,Gg=!1,Sh=!1,$g=!1,Aa=0;function rr(i){i!==Mo&&i.next===null&&(Mo===null?wh=Mo=i:Mo=Mo.next=i),Sh=!0,Gg||(Gg=!0,LR())}function cu(i,s){if(!$g&&Sh){$g=!0;do for(var o=!1,u=wh;u!==null;){if(i!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var w=u.suspendedLanes,b=u.pingedLanes;p=(1<<31-Te(42|i)+1)-1,p&=f&~(w&~b),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,Cv(u,p))}else p=Qt,p=an(u,u===ge?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Rn(u,p)||(o=!0,Cv(u,p));u=u.next}while(o);$g=!1}}function PR(){Av()}function Av(){Sh=Gg=!1;var i=0;Aa!==0&&(GR()&&(i=Aa),Aa=0);for(var s=Lt(),o=null,u=wh;u!==null;){var f=u.next,p=Rv(u,s);p===0?(u.next=null,o===null?wh=f:o.next=f,f===null&&(Mo=o)):(o=u,(i!==0||(p&3)!==0)&&(Sh=!0)),u=f}cu(i)}function Rv(i,s){for(var o=i.suspendedLanes,u=i.pingedLanes,f=i.expirationTimes,p=i.pendingLanes&-62914561;0<p;){var w=31-Te(p),b=1<<w,H=f[w];H===-1?((b&o)===0||(b&u)!==0)&&(f[w]=dr(b,s)):H<=s&&(i.expiredLanes|=b),p&=~b}if(s=ge,o=Qt,o=an(i,i===s?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===s&&(re===2||re===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&_e(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||Rn(i,o)){if(s=o&-o,s===i.callbackPriority)return s;switch(u!==null&&_e(u),Qr(o)){case 2:case 8:o=pn;break;case 32:o=Un;break;case 268435456:o=zn;break;default:o=Un}return u=Iv.bind(null,i),o=Ee(o,u),i.callbackPriority=s,i.callbackNode=o,s}return u!==null&&u!==null&&_e(u),i.callbackPriority=2,i.callbackNode=null,2}function Iv(i,s){if(cn!==0&&cn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(Th()&&i.callbackNode!==o)return null;var u=Qt;return u=an(i,i===ge?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(uv(i,u,s),Rv(i,Lt()),i.callbackNode!=null&&i.callbackNode===o?Iv.bind(null,i):null)}function Cv(i,s){if(Th())return null;uv(i,s,!0)}function LR(){YR(function(){(ie&6)!==0?Ee(xe,PR):Av()})}function Yg(){return Aa===0&&(Aa=gr()),Aa}function xv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ja(""+i)}function Nv(i,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,i.id&&o.setAttribute("form",i.id),s.parentNode.insertBefore(o,s),i=new FormData(i),o.parentNode.removeChild(o),i}function UR(i,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var p=xv((f[Ae]||null).action),w=u.submitter;w&&(s=(s=w[Ae]||null)?xv(s.formAction):w.getAttribute("formAction"),s!==null&&(p=s,w=null));var b=new to("action","action",null,u,f);i.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Aa!==0){var H=w?Nv(f,w):new FormData(f);dg(o,{pending:!0,data:H,method:f.method,action:p},null,H)}}else typeof p=="function"&&(b.preventDefault(),H=w?Nv(f,w):new FormData(f),dg(o,{pending:!0,data:H,method:f.method,action:p},p,H))},currentTarget:f}]})}}for(var Kg=0;Kg<Md.length;Kg++){var Xg=Md[Kg],zR=Xg.toLowerCase(),BR=Xg[0].toUpperCase()+Xg.slice(1);Ci(zR,"on"+BR)}Ci(u_,"onAnimationEnd"),Ci(c_,"onAnimationIteration"),Ci(h_,"onAnimationStart"),Ci("dblclick","onDoubleClick"),Ci("focusin","onFocus"),Ci("focusout","onBlur"),Ci(iR,"onTransitionRun"),Ci(rR,"onTransitionStart"),Ci(sR,"onTransitionCancel"),Ci(f_,"onTransitionEnd"),Ai("onMouseEnter",["mouseout","mouseover"]),Ai("onMouseLeave",["mouseout","mouseover"]),Ai("onPointerEnter",["pointerout","pointerover"]),Ai("onPointerLeave",["pointerout","pointerover"]),qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hu));function Dv(i,s){s=(s&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],f=u.event;u=u.listeners;t:{var p=void 0;if(s)for(var w=u.length-1;0<=w;w--){var b=u[w],H=b.instance,nt=b.currentTarget;if(b=b.listener,H!==p&&f.isPropagationStopped())break t;p=b,f.currentTarget=nt;try{p(f)}catch(ut){ch(ut)}f.currentTarget=null,p=H}else for(w=0;w<u.length;w++){if(b=u[w],H=b.instance,nt=b.currentTarget,b=b.listener,H!==p&&f.isPropagationStopped())break t;p=b,f.currentTarget=nt;try{p(f)}catch(ut){ch(ut)}f.currentTarget=null,p=H}}}}function Gt(i,s){var o=s[Zs];o===void 0&&(o=s[Zs]=new Set);var u=i+"__bubble";o.has(u)||(Mv(s,i,2,!1),o.add(u))}function Qg(i,s,o){var u=0;s&&(u|=4),Mv(o,i,u,s)}var bh="_reactListening"+Math.random().toString(36).slice(2);function Zg(i){if(!i[bh]){i[bh]=!0,Ws.forEach(function(o){o!=="selectionchange"&&(HR.has(o)||Qg(o,!1,i),Qg(o,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[bh]||(s[bh]=!0,Qg("selectionchange",!1,s))}}function Mv(i,s,o,u){switch(nE(s)){case 2:var f=gI;break;case 8:f=mI;break;default:f=hm}o=f.bind(null,s,o,i),f=void 0,!ci||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?i.addEventListener(s,o,{capture:!0,passive:f}):i.addEventListener(s,o,!0):f!==void 0?i.addEventListener(s,o,{passive:f}):i.addEventListener(s,o,!1)}function Wg(i,s,o,u,f){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var b=u.stateNode.containerInfo;if(b===f)break;if(w===4)for(w=u.return;w!==null;){var H=w.tag;if((H===3||H===4)&&w.stateNode.containerInfo===f)return;w=w.return}for(;b!==null;){if(w=ri(b),w===null)return;if(H=w.tag,H===5||H===6||H===26||H===27){u=p=w;continue t}b=b.parentNode}}u=u.return}Rc(function(){var nt=p,ut=ui(o),ft=[];t:{var it=d_.get(i);if(it!==void 0){var at=to,Mt=i;switch(i){case"keypress":if(Xi(o)===0)break t;case"keydown":case"keyup":at=ao;break;case"focusin":Mt="focus",at=io;break;case"focusout":Mt="blur",at=io;break;case"beforeblur":case"afterblur":at=io;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=hi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=bd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=Vc;break;case u_:case c_:case h_:at=ro;break;case f_:at=Pc;break;case"scroll":case"scrollend":at=Ic;break;case"wheel":at=oo;break;case"copy":case"cut":case"paste":at=so;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=kl;break;case"toggle":case"beforetoggle":at=Uc}var Ct=(s&4)!==0,le=!Ct&&(i==="scroll"||i==="scrollend"),Q=Ct?it!==null?it+"Capture":null:it;Ct=[];for(var F=nt,tt;F!==null;){var ht=F;if(tt=ht.stateNode,ht=ht.tag,ht!==5&&ht!==26&&ht!==27||tt===null||Q===null||(ht=ra(F,Q),ht!=null&&Ct.push(fu(F,ht,tt))),le)break;F=F.return}0<Ct.length&&(it=new at(it,Mt,null,o,ut),ft.push({event:it,listeners:Ct}))}}if((s&7)===0){t:{if(it=i==="mouseover"||i==="pointerover",at=i==="mouseout"||i==="pointerout",it&&o!==_r&&(Mt=o.relatedTarget||o.fromElement)&&(ri(Mt)||Mt[Dn]))break t;if((at||it)&&(it=ut.window===ut?ut:(it=ut.ownerDocument)?it.defaultView||it.parentWindow:window,at?(Mt=o.relatedTarget||o.toElement,at=nt,Mt=Mt?ri(Mt):null,Mt!==null&&(le=l(Mt),Ct=Mt.tag,Mt!==le||Ct!==5&&Ct!==27&&Ct!==6)&&(Mt=null)):(at=null,Mt=nt),at!==Mt)){if(Ct=hi,ht="onMouseLeave",Q="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(Ct=kl,ht="onPointerLeave",Q="onPointerEnter",F="pointer"),le=at==null?it:ai(at),tt=Mt==null?it:ai(Mt),it=new Ct(ht,F+"leave",at,o,ut),it.target=le,it.relatedTarget=tt,ht=null,ri(ut)===nt&&(Ct=new Ct(Q,F+"enter",Mt,o,ut),Ct.target=tt,Ct.relatedTarget=le,ht=Ct),le=ht,at&&Mt)e:{for(Ct=at,Q=Mt,F=0,tt=Ct;tt;tt=Oo(tt))F++;for(tt=0,ht=Q;ht;ht=Oo(ht))tt++;for(;0<F-tt;)Ct=Oo(Ct),F--;for(;0<tt-F;)Q=Oo(Q),tt--;for(;F--;){if(Ct===Q||Q!==null&&Ct===Q.alternate)break e;Ct=Oo(Ct),Q=Oo(Q)}Ct=null}else Ct=null;at!==null&&Ov(ft,it,at,Ct,!1),Mt!==null&&le!==null&&Ov(ft,le,Mt,Ct,!0)}}t:{if(it=nt?ai(nt):window,at=it.nodeName&&it.nodeName.toLowerCase(),at==="select"||at==="input"&&it.type==="file")var Tt=Wy;else if(Fe(it))if(Jy)Tt=tR;else{Tt=WA;var Ht=ZA}else at=it.nodeName,!at||at.toLowerCase()!=="input"||it.type!=="checkbox"&&it.type!=="radio"?nt&&Cl(nt.elementType)&&(Tt=Wy):Tt=JA;if(Tt&&(Tt=Tt(i,nt))){Sr(ft,Tt,o,ut);break t}Ht&&Ht(i,it,nt),i==="focusout"&&nt&&it.type==="number"&&nt.memoizedProps.value!=null&&Jr(it,"number",it.value)}switch(Ht=nt?ai(nt):window,i){case"focusin":(Fe(Ht)||Ht.contentEditable==="true")&&(lo=Ht,xd=nt,Ul=null);break;case"focusout":Ul=xd=lo=null;break;case"mousedown":Nd=!0;break;case"contextmenu":case"mouseup":case"dragend":Nd=!1,o_(ft,o,ut);break;case"selectionchange":if(nR)break;case"keydown":case"keyup":o_(ft,o,ut)}var St;if(Wi)t:{switch(i){case"compositionstart":var xt="onCompositionStart";break t;case"compositionend":xt="onCompositionEnd";break t;case"compositionupdate":xt="onCompositionUpdate";break t}xt=void 0}else Kt?ot(i,o)&&(xt="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(xt="onCompositionStart");xt&&(T&&o.locale!=="ko"&&(Kt||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&Kt&&(St=Nl()):(Ki=ut,ts="value"in Ki?Ki.value:Ki.textContent,Kt=!0)),Ht=Ah(nt,xt),0<Ht.length&&(xt=new Ol(xt,i,null,o,ut),ft.push({event:xt,listeners:Ht}),St?xt.data=St:(St=_t(o),St!==null&&(xt.data=St)))),(St=_?qe(i,o):Xt(i,o))&&(xt=Ah(nt,"onBeforeInput"),0<xt.length&&(Ht=new Ol("onBeforeInput","beforeinput",null,o,ut),ft.push({event:Ht,listeners:xt}),Ht.data=St)),UR(ft,i,nt,o,ut)}Dv(ft,s)})}function fu(i,s,o){return{instance:i,listener:s,currentTarget:o}}function Ah(i,s){for(var o=s+"Capture",u=[];i!==null;){var f=i,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=ra(i,o),f!=null&&u.unshift(fu(i,f,p)),f=ra(i,s),f!=null&&u.push(fu(i,f,p))),i.tag===3)return u;i=i.return}return[]}function Oo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Ov(i,s,o,u,f){for(var p=s._reactName,w=[];o!==null&&o!==u;){var b=o,H=b.alternate,nt=b.stateNode;if(b=b.tag,H!==null&&H===u)break;b!==5&&b!==26&&b!==27||nt===null||(H=nt,f?(nt=ra(o,p),nt!=null&&w.unshift(fu(o,nt,H))):f||(nt=ra(o,p),nt!=null&&w.push(fu(o,nt,H)))),o=o.return}w.length!==0&&i.push({event:s,listeners:w})}var qR=/\r\n?/g,FR=/\u0000|\uFFFD/g;function Vv(i){return(typeof i=="string"?i:""+i).replace(qR,`
`).replace(FR,"")}function kv(i,s){return s=Vv(s),Vv(i)===s}function Rh(){}function oe(i,s,o,u,f,p){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||li(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&li(i,""+u);break;case"className":oi(i,"class",u);break;case"tabIndex":oi(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":oi(i,o,u);break;case"style":Il(i,u,p);break;case"data":if(s!=="object"){oi(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Ja(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&oe(i,s,"name",f.name,f,null),oe(i,s,"formEncType",f.formEncType,f,null),oe(i,s,"formMethod",f.formMethod,f,null),oe(i,s,"formTarget",f.formTarget,f,null)):(oe(i,s,"encType",f.encType,f,null),oe(i,s,"method",f.method,f,null),oe(i,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Ja(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=Rh);break;case"onScroll":u!=null&&Gt("scroll",i);break;case"onScrollEnd":u!=null&&Gt("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=Ja(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":Gt("beforetoggle",i),Gt("toggle",i),ji(i,"popover",u);break;case"xlinkActuate":He(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":He(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":He(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":He(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":He(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":He(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":He(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":He(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":He(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ji(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=wd.get(o)||o,ji(i,o,u))}}function Jg(i,s,o,u,f,p){switch(o){case"style":Il(i,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"children":typeof u=="string"?li(i,u):(typeof u=="number"||typeof u=="bigint")&&li(i,""+u);break;case"onScroll":u!=null&&Gt("scroll",i);break;case"onScrollEnd":u!=null&&Gt("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Rh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zr.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),p=i[Ae]||null,p=p!=null?p[o]:null,typeof p=="function"&&i.removeEventListener(s,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(s,u,f);break t}o in i?i[o]=u:u===!0?i.setAttribute(o,""):ji(i,o,u)}}}function hn(i,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Gt("error",i),Gt("load",i);var u=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var w=o[p];if(w!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:oe(i,s,p,w,o,null)}}f&&oe(i,s,"srcSet",o.srcSet,o,null),u&&oe(i,s,"src",o.src,o,null);return;case"input":Gt("invalid",i);var b=p=w=f=null,H=null,nt=null;for(u in o)if(o.hasOwnProperty(u)){var ut=o[u];if(ut!=null)switch(u){case"name":f=ut;break;case"type":w=ut;break;case"checked":H=ut;break;case"defaultChecked":nt=ut;break;case"value":p=ut;break;case"defaultValue":b=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(r(137,s));break;default:oe(i,s,u,ut,o,null)}}ea(i,p,b,H,nt,w,f,!1),Wa(i);return;case"select":Gt("invalid",i),u=w=p=null;for(f in o)if(o.hasOwnProperty(f)&&(b=o[f],b!=null))switch(f){case"value":p=b;break;case"defaultValue":w=b;break;case"multiple":u=b;default:oe(i,s,f,b,o,null)}s=p,o=w,i.multiple=!!u,s!=null?yr(i,!!u,s,!1):o!=null&&yr(i,!!u,o,!0);return;case"textarea":Gt("invalid",i),p=f=u=null;for(w in o)if(o.hasOwnProperty(w)&&(b=o[w],b!=null))switch(w){case"value":u=b;break;case"defaultValue":f=b;break;case"children":p=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:oe(i,s,w,b,o,null)}na(i,u,f,p),Wa(i);return;case"option":for(H in o)if(o.hasOwnProperty(H)&&(u=o[H],u!=null))switch(H){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:oe(i,s,H,u,o,null)}return;case"dialog":Gt("beforetoggle",i),Gt("toggle",i),Gt("cancel",i),Gt("close",i);break;case"iframe":case"object":Gt("load",i);break;case"video":case"audio":for(u=0;u<hu.length;u++)Gt(hu[u],i);break;case"image":Gt("error",i),Gt("load",i);break;case"details":Gt("toggle",i);break;case"embed":case"source":case"link":Gt("error",i),Gt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(nt in o)if(o.hasOwnProperty(nt)&&(u=o[nt],u!=null))switch(nt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:oe(i,s,nt,u,o,null)}return;default:if(Cl(s)){for(ut in o)o.hasOwnProperty(ut)&&(u=o[ut],u!==void 0&&Jg(i,s,ut,u,o,void 0));return}}for(b in o)o.hasOwnProperty(b)&&(u=o[b],u!=null&&oe(i,s,b,u,o,null))}function jR(i,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,w=null,b=null,H=null,nt=null,ut=null;for(at in o){var ft=o[at];if(o.hasOwnProperty(at)&&ft!=null)switch(at){case"checked":break;case"value":break;case"defaultValue":H=ft;default:u.hasOwnProperty(at)||oe(i,s,at,null,u,ft)}}for(var it in u){var at=u[it];if(ft=o[it],u.hasOwnProperty(it)&&(at!=null||ft!=null))switch(it){case"type":p=at;break;case"name":f=at;break;case"checked":nt=at;break;case"defaultChecked":ut=at;break;case"value":w=at;break;case"defaultValue":b=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(r(137,s));break;default:at!==ft&&oe(i,s,it,at,u,ft)}}Fn(i,w,b,H,nt,ut,p,f);return;case"select":at=w=b=it=null;for(p in o)if(H=o[p],o.hasOwnProperty(p)&&H!=null)switch(p){case"value":break;case"multiple":at=H;default:u.hasOwnProperty(p)||oe(i,s,p,null,u,H)}for(f in u)if(p=u[f],H=o[f],u.hasOwnProperty(f)&&(p!=null||H!=null))switch(f){case"value":it=p;break;case"defaultValue":b=p;break;case"multiple":w=p;default:p!==H&&oe(i,s,f,p,u,H)}s=b,o=w,u=at,it!=null?yr(i,!!o,it,!1):!!u!=!!o&&(s!=null?yr(i,!!o,s,!0):yr(i,!!o,o?[]:"",!1));return;case"textarea":at=it=null;for(b in o)if(f=o[b],o.hasOwnProperty(b)&&f!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:oe(i,s,b,null,u,f)}for(w in u)if(f=u[w],p=o[w],u.hasOwnProperty(w)&&(f!=null||p!=null))switch(w){case"value":it=f;break;case"defaultValue":at=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==p&&oe(i,s,w,f,u,p)}se(i,it,at);return;case"option":for(var Mt in o)if(it=o[Mt],o.hasOwnProperty(Mt)&&it!=null&&!u.hasOwnProperty(Mt))switch(Mt){case"selected":i.selected=!1;break;default:oe(i,s,Mt,null,u,it)}for(H in u)if(it=u[H],at=o[H],u.hasOwnProperty(H)&&it!==at&&(it!=null||at!=null))switch(H){case"selected":i.selected=it&&typeof it!="function"&&typeof it!="symbol";break;default:oe(i,s,H,it,u,at)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ct in o)it=o[Ct],o.hasOwnProperty(Ct)&&it!=null&&!u.hasOwnProperty(Ct)&&oe(i,s,Ct,null,u,it);for(nt in u)if(it=u[nt],at=o[nt],u.hasOwnProperty(nt)&&it!==at&&(it!=null||at!=null))switch(nt){case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(r(137,s));break;default:oe(i,s,nt,it,u,at)}return;default:if(Cl(s)){for(var le in o)it=o[le],o.hasOwnProperty(le)&&it!==void 0&&!u.hasOwnProperty(le)&&Jg(i,s,le,void 0,u,it);for(ut in u)it=u[ut],at=o[ut],!u.hasOwnProperty(ut)||it===at||it===void 0&&at===void 0||Jg(i,s,ut,it,u,at);return}}for(var Q in o)it=o[Q],o.hasOwnProperty(Q)&&it!=null&&!u.hasOwnProperty(Q)&&oe(i,s,Q,null,u,it);for(ft in u)it=u[ft],at=o[ft],!u.hasOwnProperty(ft)||it===at||it==null&&at==null||oe(i,s,ft,it,u,at)}var tm=null,em=null;function Ih(i){return i.nodeType===9?i:i.ownerDocument}function Pv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Lv(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function nm(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var im=null;function GR(){var i=window.event;return i&&i.type==="popstate"?i===im?!1:(im=i,!0):(im=null,!1)}var Uv=typeof setTimeout=="function"?setTimeout:void 0,$R=typeof clearTimeout=="function"?clearTimeout:void 0,zv=typeof Promise=="function"?Promise:void 0,YR=typeof queueMicrotask=="function"?queueMicrotask:typeof zv<"u"?function(i){return zv.resolve(null).then(i).catch(KR)}:Uv;function KR(i){setTimeout(function(){throw i})}function ps(i){return i==="head"}function Bv(i,s){var o=s,u=0,f=0;do{var p=o.nextSibling;if(i.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(0<u&&8>u){o=u;var w=i.ownerDocument;if(o&1&&du(w.documentElement),o&2&&du(w.body),o&4)for(o=w.head,du(o),w=o.firstChild;w;){var b=w.nextSibling,H=w.nodeName;w[mr]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&w.rel.toLowerCase()==="stylesheet"||o.removeChild(w),w=b}}if(f===0){i.removeChild(p),Tu(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=p}while(o);Tu(s)}function rm(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":rm(o),Fi(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function XR(i,s,o,u){for(;i.nodeType===1;){var f=o;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[mr])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(p=i.getAttribute("rel"),p==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(p!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(p=i.getAttribute("src"),(p!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===p)return i}else return i;if(i=Ni(i.nextSibling),i===null)break}return null}function QR(i,s,o){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Ni(i.nextSibling),i===null))return null;return i}function sm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function ZR(i,s){var o=i.ownerDocument;if(i.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Ni(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}var am=null;function Hv(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return i;s--}else o==="/$"&&s++}i=i.previousSibling}return null}function qv(i,s,o){switch(s=Ih(o),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function du(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Fi(i)}var _i=new Map,Fv=new Set;function Ch(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Pr=j.d;j.d={f:WR,r:JR,D:tI,C:eI,L:nI,m:iI,X:sI,S:rI,M:aI};function WR(){var i=Pr.f(),s=vh();return i||s}function JR(i){var s=si(i);s!==null&&s.tag===5&&s.type==="form"?u0(s):Pr.r(i)}var Vo=typeof document>"u"?null:document;function jv(i,s,o){var u=Vo;if(u&&typeof s=="string"&&s){var f=Pe(s);f='link[rel="'+i+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),Fv.has(f)||(Fv.add(f),i={rel:i,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),hn(s,"link",i),we(s),u.head.appendChild(s)))}}function tI(i){Pr.D(i),jv("dns-prefetch",i,null)}function eI(i,s){Pr.C(i,s),jv("preconnect",i,s)}function nI(i,s,o){Pr.L(i,s,o);var u=Vo;if(u&&i&&s){var f='link[rel="preload"][as="'+Pe(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Pe(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Pe(o.imageSizes)+'"]')):f+='[href="'+Pe(i)+'"]';var p=f;switch(s){case"style":p=ko(i);break;case"script":p=Po(i)}_i.has(p)||(i=y({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:i,as:s},o),_i.set(p,i),u.querySelector(f)!==null||s==="style"&&u.querySelector(gu(p))||s==="script"&&u.querySelector(mu(p))||(s=u.createElement("link"),hn(s,"link",i),we(s),u.head.appendChild(s)))}}function iI(i,s){Pr.m(i,s);var o=Vo;if(o&&i){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Pe(u)+'"][href="'+Pe(i)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Po(i)}if(!_i.has(p)&&(i=y({rel:"modulepreload",href:i},s),_i.set(p,i),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(mu(p)))return}u=o.createElement("link"),hn(u,"link",i),we(u),o.head.appendChild(u)}}}function rI(i,s,o){Pr.S(i,s,o);var u=Vo;if(u&&i){var f=on(u).hoistableStyles,p=ko(i);s=s||"default";var w=f.get(p);if(!w){var b={loading:0,preload:null};if(w=u.querySelector(gu(p)))b.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":s},o),(o=_i.get(p))&&om(i,o);var H=w=u.createElement("link");we(H),hn(H,"link",i),H._p=new Promise(function(nt,ut){H.onload=nt,H.onerror=ut}),H.addEventListener("load",function(){b.loading|=1}),H.addEventListener("error",function(){b.loading|=2}),b.loading|=4,xh(w,s,u)}w={type:"stylesheet",instance:w,count:1,state:b},f.set(p,w)}}}function sI(i,s){Pr.X(i,s);var o=Vo;if(o&&i){var u=on(o).hoistableScripts,f=Po(i),p=u.get(f);p||(p=o.querySelector(mu(f)),p||(i=y({src:i,async:!0},s),(s=_i.get(f))&&lm(i,s),p=o.createElement("script"),we(p),hn(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function aI(i,s){Pr.M(i,s);var o=Vo;if(o&&i){var u=on(o).hoistableScripts,f=Po(i),p=u.get(f);p||(p=o.querySelector(mu(f)),p||(i=y({src:i,async:!0,type:"module"},s),(s=_i.get(f))&&lm(i,s),p=o.createElement("script"),we(p),hn(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function Gv(i,s,o,u){var f=(f=yt.current)?Ch(f):null;if(!f)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=ko(o.href),o=on(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=ko(o.href);var p=on(f).hoistableStyles,w=p.get(i);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(i,w),(p=f.querySelector(gu(i)))&&!p._p&&(w.instance=p,w.state.loading=5),_i.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},_i.set(i,o),p||oI(f,i,o,w.state))),s&&u===null)throw Error(r(528,""));return w}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Po(o),o=on(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function ko(i){return'href="'+Pe(i)+'"'}function gu(i){return'link[rel="stylesheet"]['+i+"]"}function $v(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function oI(i,s,o,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),hn(s,"link",o),we(s),i.head.appendChild(s))}function Po(i){return'[src="'+Pe(i)+'"]'}function mu(i){return"script[async]"+i}function Yv(i,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+Pe(o.href)+'"]');if(u)return s.instance=u,we(u),u;var f=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),we(u),hn(u,"style",f),xh(u,o.precedence,i),s.instance=u;case"stylesheet":f=ko(o.href);var p=i.querySelector(gu(f));if(p)return s.state.loading|=4,s.instance=p,we(p),p;u=$v(o),(f=_i.get(f))&&om(u,f),p=(i.ownerDocument||i).createElement("link"),we(p);var w=p;return w._p=new Promise(function(b,H){w.onload=b,w.onerror=H}),hn(p,"link",u),s.state.loading|=4,xh(p,o.precedence,i),s.instance=p;case"script":return p=Po(o.src),(f=i.querySelector(mu(p)))?(s.instance=f,we(f),f):(u=o,(f=_i.get(p))&&(u=y({},o),lm(u,f)),i=i.ownerDocument||i,f=i.createElement("script"),we(f),hn(f,"link",u),i.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,xh(u,o.precedence,i));return s.instance}function xh(i,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,w=0;w<u.length;w++){var b=u[w];if(b.dataset.precedence===s)p=b;else if(p!==f)break}p?p.parentNode.insertBefore(i,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(i,s.firstChild))}function om(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function lm(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var Nh=null;function Kv(i,s,o){if(Nh===null){var u=new Map,f=Nh=new Map;f.set(o,u)}else f=Nh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),f=0;f<o.length;f++){var p=o[f];if(!(p[mr]||p[Ne]||i==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var w=p.getAttribute(s)||"";w=i+w;var b=u.get(w);b?b.push(p):u.set(w,[p])}}return u}function Xv(i,s,o){i=i.ownerDocument||i,i.head.insertBefore(o,s==="title"?i.querySelector("head > title"):null)}function lI(i,s,o){if(o===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Qv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var pu=null;function uI(){}function cI(i,s,o){if(pu===null)throw Error(r(475));var u=pu;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=ko(o.href),p=i.querySelector(gu(f));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(u.count++,u=Dh.bind(u),i.then(u,u)),s.state.loading|=4,s.instance=p,we(p);return}p=i.ownerDocument||i,o=$v(o),(f=_i.get(f))&&om(o,f),p=p.createElement("link"),we(p);var w=p;w._p=new Promise(function(b,H){w.onload=b,w.onerror=H}),hn(p,"link",o),s.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=Dh.bind(u),i.addEventListener("load",s),i.addEventListener("error",s))}}function hI(){if(pu===null)throw Error(r(475));var i=pu;return i.stylesheets&&i.count===0&&um(i,i.stylesheets),0<i.count?function(s){var o=setTimeout(function(){if(i.stylesheets&&um(i,i.stylesheets),i.unsuspend){var u=i.unsuspend;i.unsuspend=null,u()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(o)}}:null}function Dh(){if(this.count--,this.count===0){if(this.stylesheets)um(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Mh=null;function um(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Mh=new Map,s.forEach(fI,i),Mh=null,Dh.call(i))}function fI(i,s){if(!(s.state.loading&4)){var o=Mh.get(i);if(o)var u=o.get(null);else{o=new Map,Mh.set(i,o);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var w=f[p];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),u=w)}u&&o.set(null,u)}f=s.instance,w=f.getAttribute("data-precedence"),p=o.get(w)||u,p===u&&o.set(null,f),o.set(w,f),this.count++,u=Dh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),s.state.loading|=4}}var yu={$$typeof:K,Provider:null,Consumer:null,_currentValue:rt,_currentValue2:rt,_threadCount:0};function dI(i,s,o,u,f,p,w,b){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bn(0),this.hiddenUpdates=Bn(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function Zv(i,s,o,u,f,p,w,b,H,nt,ut,ft){return i=new dI(i,s,o,w,b,H,nt,ft),s=1,p===!0&&(s|=24),p=Gn(3,null,null,s),i.current=p,p.stateNode=i,s=jd(),s.refCount++,i.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:s},Kd(p),i}function Wv(i){return i?(i=fo,i):fo}function Jv(i,s,o,u,f,p){f=Wv(f),u.context===null?u.context=f:u.pendingContext=f,u=is(s),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=rs(i,u,s),o!==null&&(Qn(o,i,s),Yl(o,i,s))}function tE(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<s?o:s}}function cm(i,s){tE(i,s),(i=i.alternate)&&tE(i,s)}function eE(i){if(i.tag===13){var s=ho(i,67108864);s!==null&&Qn(s,i,67108864),cm(i,67108864)}}var Oh=!0;function gI(i,s,o,u){var f=D.T;D.T=null;var p=j.p;try{j.p=2,hm(i,s,o,u)}finally{j.p=p,D.T=f}}function mI(i,s,o,u){var f=D.T;D.T=null;var p=j.p;try{j.p=8,hm(i,s,o,u)}finally{j.p=p,D.T=f}}function hm(i,s,o,u){if(Oh){var f=fm(u);if(f===null)Wg(i,s,u,Vh,o),iE(i,u);else if(yI(f,i,s,o,u))u.stopPropagation();else if(iE(i,u),s&4&&-1<pI.indexOf(i)){for(;f!==null;){var p=si(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var w=Ze(p.pendingLanes);if(w!==0){var b=p;for(b.pendingLanes|=2,b.entangledLanes|=2;w;){var H=1<<31-Te(w);b.entanglements[1]|=H,w&=~H}rr(p),(ie&6)===0&&(yh=Lt()+500,cu(0))}}break;case 13:b=ho(p,2),b!==null&&Qn(b,p,2),vh(),cm(p,2)}if(p=fm(u),p===null&&Wg(i,s,u,Vh,o),p===f)break;f=p}f!==null&&u.stopPropagation()}else Wg(i,s,u,null,o)}}function fm(i){return i=ui(i),dm(i)}var Vh=null;function dm(i){if(Vh=null,i=ri(i),i!==null){var s=l(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=c(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Vh=i,null}function nE(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wt()){case xe:return 2;case pn:return 8;case Un:case Ui:return 32;case zn:return 268435456;default:return 32}default:return 32}}var gm=!1,ys=null,_s=null,vs=null,_u=new Map,vu=new Map,Es=[],pI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iE(i,s){switch(i){case"focusin":case"focusout":ys=null;break;case"dragenter":case"dragleave":_s=null;break;case"mouseover":case"mouseout":vs=null;break;case"pointerover":case"pointerout":_u.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":vu.delete(s.pointerId)}}function Eu(i,s,o,u,f,p){return i===null||i.nativeEvent!==p?(i={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},s!==null&&(s=si(s),s!==null&&eE(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),i)}function yI(i,s,o,u,f){switch(s){case"focusin":return ys=Eu(ys,i,s,o,u,f),!0;case"dragenter":return _s=Eu(_s,i,s,o,u,f),!0;case"mouseover":return vs=Eu(vs,i,s,o,u,f),!0;case"pointerover":var p=f.pointerId;return _u.set(p,Eu(_u.get(p)||null,i,s,o,u,f)),!0;case"gotpointercapture":return p=f.pointerId,vu.set(p,Eu(vu.get(p)||null,i,s,o,u,f)),!0}return!1}function rE(i){var s=ri(i.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){i.blockedOn=s,$a(i.priority,function(){if(o.tag===13){var u=Xn();u=Bi(u);var f=ho(o,u);f!==null&&Qn(f,o,u),cm(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function kh(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var o=fm(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);_r=u,o.target.dispatchEvent(u),_r=null}else return s=si(o),s!==null&&eE(s),i.blockedOn=o,!1;s.shift()}return!0}function sE(i,s,o){kh(i)&&o.delete(s)}function _I(){gm=!1,ys!==null&&kh(ys)&&(ys=null),_s!==null&&kh(_s)&&(_s=null),vs!==null&&kh(vs)&&(vs=null),_u.forEach(sE),vu.forEach(sE)}function Ph(i,s){i.blockedOn===s&&(i.blockedOn=null,gm||(gm=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,_I)))}var Lh=null;function aE(i){Lh!==i&&(Lh=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Lh===i&&(Lh=null);for(var s=0;s<i.length;s+=3){var o=i[s],u=i[s+1],f=i[s+2];if(typeof u!="function"){if(dm(u||o)===null)continue;break}var p=si(o);p!==null&&(i.splice(s,3),s-=3,dg(p,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Tu(i){function s(H){return Ph(H,i)}ys!==null&&Ph(ys,i),_s!==null&&Ph(_s,i),vs!==null&&Ph(vs,i),_u.forEach(s),vu.forEach(s);for(var o=0;o<Es.length;o++){var u=Es[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Es.length&&(o=Es[0],o.blockedOn===null);)rE(o),o.blockedOn===null&&Es.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],p=o[u+1],w=f[Ae]||null;if(typeof p=="function")w||aE(o);else if(w){var b=null;if(p&&p.hasAttribute("formAction")){if(f=p,w=p[Ae]||null)b=w.formAction;else if(dm(f)!==null)continue}else b=w.action;typeof b=="function"?o[u+1]=b:(o.splice(u,3),u-=3),aE(o)}}}function mm(i){this._internalRoot=i}Uh.prototype.render=mm.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=Xn();Jv(o,u,i,s,null,null)},Uh.prototype.unmount=mm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;Jv(i.current,2,null,i,null,null),vh(),s[Dn]=null}};function Uh(i){this._internalRoot=i}Uh.prototype.unstable_scheduleHydration=function(i){if(i){var s=Hi();i={blockedOn:null,target:i,priority:s};for(var o=0;o<Es.length&&s!==0&&s<Es[o].priority;o++);Es.splice(o,0,i),o===0&&rE(i)}};var oE=t.version;if(oE!=="19.1.0")throw Error(r(527,oE,"19.1.0"));j.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=g(s),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var vI={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zh.isDisabled&&zh.supportsFiber)try{te=zh.inject(vI),Ft=zh}catch{}}return Su.createRoot=function(i,s){if(!a(i))throw Error(r(299));var o=!1,u="",f=S0,p=b0,w=A0,b=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(b=s.unstable_transitionCallbacks)),s=Zv(i,1,!1,null,null,o,u,f,p,w,b,null),i[Dn]=s.current,Zg(i),new mm(s)},Su.hydrateRoot=function(i,s,o){if(!a(i))throw Error(r(299));var u=!1,f="",p=S0,w=b0,b=A0,H=null,nt=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(H=o.unstable_transitionCallbacks),o.formState!==void 0&&(nt=o.formState)),s=Zv(i,1,!0,s,o??null,u,f,p,w,b,H,nt),s.context=Wv(null),o=s.current,u=Xn(),u=Bi(u),f=is(u),f.callback=null,rs(o,f,u),o=u,s.current.lanes=o,ni(s,o),rr(s),i[Dn]=s.current,Zg(i),new Uh(s)},Su.version="19.1.0",Su}var yE;function CI(){if(yE)return _m.exports;yE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),_m.exports=II(),_m.exports}var xI=CI();function mn(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=mn(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var wm={exports:{}},Sm={},bm={exports:{}},Am={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _E;function NI(){if(_E)return Am;_E=1;var e=lc();function t(v,E){return v===E&&(v!==0||1/v===1/E)||v!==v&&E!==E}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,a=e.useEffect,l=e.useLayoutEffect,c=e.useDebugValue;function d(v,E){var S=E(),x=r({inst:{value:S,getSnapshot:E}}),k=x[0].inst,M=x[1];return l(function(){k.value=S,k.getSnapshot=E,g(k)&&M({inst:k})},[v,S,E]),a(function(){return g(k)&&M({inst:k}),v(function(){g(k)&&M({inst:k})})},[v]),c(S),S}function g(v){var E=v.getSnapshot;v=v.value;try{var S=E();return!n(v,S)}catch{return!0}}function m(v,E){return E()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:d;return Am.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:y,Am}var vE;function DI(){return vE||(vE=1,bm.exports=NI()),bm.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EE;function MI(){if(EE)return Sm;EE=1;var e=lc(),t=DI();function n(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var r=typeof Object.is=="function"?Object.is:n,a=t.useSyncExternalStore,l=e.useRef,c=e.useEffect,d=e.useMemo,g=e.useDebugValue;return Sm.useSyncExternalStoreWithSelector=function(m,y,v,E,S){var x=l(null);if(x.current===null){var k={hasValue:!1,value:null};x.current=k}else k=x.current;x=d(function(){function B(W){if(!q){if(q=!0,K=W,W=E(W),S!==void 0&&k.hasValue){var V=k.value;if(S(V,W))return L=V}return L=W}if(V=L,r(K,W))return V;var R=E(W);return S!==void 0&&S(V,R)?(K=W,V):(K=W,L=R)}var q=!1,K,L,Z=v===void 0?null:v;return[function(){return B(y())},Z===null?void 0:function(){return B(Z())}]},[y,v,E,S]);var M=a(m,x[0],x[1]);return c(function(){k.hasValue=!0,k.value=M},[M]),g(M),M},Sm}var TE;function OI(){return TE||(TE=1,wm.exports=MI()),wm.exports}var VI=OI();const kI=jw(VI),PI={},wE=e=>{let t;const n=new Set,r=(y,v)=>{const E=typeof y=="function"?y(t):y;if(!Object.is(E,t)){const S=t;t=v??(typeof E!="object"||E===null)?E:Object.assign({},t,E),n.forEach(x=>x(t,S))}},a=()=>t,g={setState:r,getState:a,getInitialState:()=>m,subscribe:y=>(n.add(y),()=>n.delete(y)),destroy:()=>{(PI?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},m=t=e(r,a,g);return g},LI=e=>e?wE(e):wE,{useDebugValue:UI}=lt,{useSyncExternalStoreWithSelector:zI}=kI,BI=e=>e;function $w(e,t=BI,n){const r=zI(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return UI(r),r}const SE=(e,t)=>{const n=LI(e),r=(a,l=t)=>$w(n,a,l);return Object.assign(r,n),r},HI=(e,t)=>e?SE(e,t):SE;function sn(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,a]of e)if(!Object.is(a,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var qI={value:()=>{}};function Gf(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new nf(n)}function nf(e){this._=e}function FI(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",a=n.indexOf(".");if(a>=0&&(r=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}nf.prototype=Gf.prototype={constructor:nf,on:function(e,t){var n=this._,r=FI(e+"",n),a,l=-1,c=r.length;if(arguments.length<2){for(;++l<c;)if((a=(e=r[l]).type)&&(a=jI(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<c;)if(a=(e=r[l]).type)n[a]=bE(n[a],e.name,t);else if(t==null)for(a in n)n[a]=bE(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new nf(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),r=0,a,l;r<a;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],r=0,a=l.length;r<a;++r)l[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,l=r.length;a<l;++a)r[a].value.apply(t,n)}};function jI(e,t){for(var n=0,r=e.length,a;n<r;++n)if((a=e[n]).name===t)return a.value}function bE(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=qI,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Km="http://www.w3.org/1999/xhtml";const AE={svg:"http://www.w3.org/2000/svg",xhtml:Km,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $f(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),AE.hasOwnProperty(t)?{space:AE[t],local:e}:e}function GI(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Km&&t.documentElement.namespaceURI===Km?t.createElement(e):t.createElementNS(n,e)}}function $I(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Yw(e){var t=$f(e);return(t.local?$I:GI)(t)}function YI(){}function Lp(e){return e==null?YI:function(){return this.querySelector(e)}}function KI(e){typeof e!="function"&&(e=Lp(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,d=r[a]=new Array(c),g,m,y=0;y<c;++y)(g=l[y])&&(m=e.call(g,g.__data__,y,l))&&("__data__"in g&&(m.__data__=g.__data__),d[y]=m);return new ti(r,this._parents)}function XI(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function QI(){return[]}function Kw(e){return e==null?QI:function(){return this.querySelectorAll(e)}}function ZI(e){return function(){return XI(e.apply(this,arguments))}}function WI(e){typeof e=="function"?e=ZI(e):e=Kw(e);for(var t=this._groups,n=t.length,r=[],a=[],l=0;l<n;++l)for(var c=t[l],d=c.length,g,m=0;m<d;++m)(g=c[m])&&(r.push(e.call(g,g.__data__,m,c)),a.push(g));return new ti(r,a)}function Xw(e){return function(){return this.matches(e)}}function Qw(e){return function(t){return t.matches(e)}}var JI=Array.prototype.find;function tC(e){return function(){return JI.call(this.children,e)}}function eC(){return this.firstElementChild}function nC(e){return this.select(e==null?eC:tC(typeof e=="function"?e:Qw(e)))}var iC=Array.prototype.filter;function rC(){return Array.from(this.children)}function sC(e){return function(){return iC.call(this.children,e)}}function aC(e){return this.selectAll(e==null?rC:sC(typeof e=="function"?e:Qw(e)))}function oC(e){typeof e!="function"&&(e=Xw(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,d=r[a]=[],g,m=0;m<c;++m)(g=l[m])&&e.call(g,g.__data__,m,l)&&d.push(g);return new ti(r,this._parents)}function Zw(e){return new Array(e.length)}function lC(){return new ti(this._enter||this._groups.map(Zw),this._parents)}function yf(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}yf.prototype={constructor:yf,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function uC(e){return function(){return e}}function cC(e,t,n,r,a,l){for(var c=0,d,g=t.length,m=l.length;c<m;++c)(d=t[c])?(d.__data__=l[c],r[c]=d):n[c]=new yf(e,l[c]);for(;c<g;++c)(d=t[c])&&(a[c]=d)}function hC(e,t,n,r,a,l,c){var d,g,m=new Map,y=t.length,v=l.length,E=new Array(y),S;for(d=0;d<y;++d)(g=t[d])&&(E[d]=S=c.call(g,g.__data__,d,t)+"",m.has(S)?a[d]=g:m.set(S,g));for(d=0;d<v;++d)S=c.call(e,l[d],d,l)+"",(g=m.get(S))?(r[d]=g,g.__data__=l[d],m.delete(S)):n[d]=new yf(e,l[d]);for(d=0;d<y;++d)(g=t[d])&&m.get(E[d])===g&&(a[d]=g)}function fC(e){return e.__data__}function dC(e,t){if(!arguments.length)return Array.from(this,fC);var n=t?hC:cC,r=this._parents,a=this._groups;typeof e!="function"&&(e=uC(e));for(var l=a.length,c=new Array(l),d=new Array(l),g=new Array(l),m=0;m<l;++m){var y=r[m],v=a[m],E=v.length,S=gC(e.call(y,y&&y.__data__,m,r)),x=S.length,k=d[m]=new Array(x),M=c[m]=new Array(x),B=g[m]=new Array(E);n(y,v,k,M,B,S,t);for(var q=0,K=0,L,Z;q<x;++q)if(L=k[q]){for(q>=K&&(K=q+1);!(Z=M[K])&&++K<x;);L._next=Z||null}}return c=new ti(c,r),c._enter=d,c._exit=g,c}function gC(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function mC(){return new ti(this._exit||this._groups.map(Zw),this._parents)}function pC(e,t,n){var r=this.enter(),a=this,l=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?l.remove():n(l),r&&a?r.merge(a).order():a}function yC(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,a=n.length,l=r.length,c=Math.min(a,l),d=new Array(a),g=0;g<c;++g)for(var m=n[g],y=r[g],v=m.length,E=d[g]=new Array(v),S,x=0;x<v;++x)(S=m[x]||y[x])&&(E[x]=S);for(;g<a;++g)d[g]=n[g];return new ti(d,this._parents)}function _C(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],a=r.length-1,l=r[a],c;--a>=0;)(c=r[a])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function vC(e){e||(e=EC);function t(v,E){return v&&E?e(v.__data__,E.__data__):!v-!E}for(var n=this._groups,r=n.length,a=new Array(r),l=0;l<r;++l){for(var c=n[l],d=c.length,g=a[l]=new Array(d),m,y=0;y<d;++y)(m=c[y])&&(g[y]=m);g.sort(t)}return new ti(a,this._parents).order()}function EC(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function TC(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function wC(){return Array.from(this)}function SC(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,l=r.length;a<l;++a){var c=r[a];if(c)return c}return null}function bC(){let e=0;for(const t of this)++e;return e}function AC(){return!this.node()}function RC(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a=t[n],l=0,c=a.length,d;l<c;++l)(d=a[l])&&e.call(d,d.__data__,l,a);return this}function IC(e){return function(){this.removeAttribute(e)}}function CC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xC(e,t){return function(){this.setAttribute(e,t)}}function NC(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function DC(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function MC(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function OC(e,t){var n=$f(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?CC:IC:typeof t=="function"?n.local?MC:DC:n.local?NC:xC)(n,t))}function Ww(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function VC(e){return function(){this.style.removeProperty(e)}}function kC(e,t,n){return function(){this.style.setProperty(e,t,n)}}function PC(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function LC(e,t,n){return arguments.length>1?this.each((t==null?VC:typeof t=="function"?PC:kC)(e,t,n??"")):il(this.node(),e)}function il(e,t){return e.style.getPropertyValue(t)||Ww(e).getComputedStyle(e,null).getPropertyValue(t)}function UC(e){return function(){delete this[e]}}function zC(e,t){return function(){this[e]=t}}function BC(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function HC(e,t){return arguments.length>1?this.each((t==null?UC:typeof t=="function"?BC:zC)(e,t)):this.node()[e]}function Jw(e){return e.trim().split(/^|\s+/)}function Up(e){return e.classList||new tS(e)}function tS(e){this._node=e,this._names=Jw(e.getAttribute("class")||"")}tS.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function eS(e,t){for(var n=Up(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function nS(e,t){for(var n=Up(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function qC(e){return function(){eS(this,e)}}function FC(e){return function(){nS(this,e)}}function jC(e,t){return function(){(t.apply(this,arguments)?eS:nS)(this,e)}}function GC(e,t){var n=Jw(e+"");if(arguments.length<2){for(var r=Up(this.node()),a=-1,l=n.length;++a<l;)if(!r.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?jC:t?qC:FC)(n,t))}function $C(){this.textContent=""}function YC(e){return function(){this.textContent=e}}function KC(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function XC(e){return arguments.length?this.each(e==null?$C:(typeof e=="function"?KC:YC)(e)):this.node().textContent}function QC(){this.innerHTML=""}function ZC(e){return function(){this.innerHTML=e}}function WC(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function JC(e){return arguments.length?this.each(e==null?QC:(typeof e=="function"?WC:ZC)(e)):this.node().innerHTML}function t2(){this.nextSibling&&this.parentNode.appendChild(this)}function e2(){return this.each(t2)}function n2(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function i2(){return this.each(n2)}function r2(e){var t=typeof e=="function"?e:Yw(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function s2(){return null}function a2(e,t){var n=typeof e=="function"?e:Yw(e),r=t==null?s2:typeof t=="function"?t:Lp(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function o2(){var e=this.parentNode;e&&e.removeChild(this)}function l2(){return this.each(o2)}function u2(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function c2(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function h2(e){return this.select(e?c2:u2)}function f2(e){return arguments.length?this.property("__data__",e):this.node().__data__}function d2(e){return function(t){e.call(this,t,this.__data__)}}function g2(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function m2(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,a=t.length,l;n<a;++n)l=t[n],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):t[++r]=l;++r?t.length=r:delete this.__on}}}function p2(e,t,n){return function(){var r=this.__on,a,l=d2(t);if(r){for(var c=0,d=r.length;c<d;++c)if((a=r[c]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=n),a.value=t;return}}this.addEventListener(e.type,l,n),a={type:e.type,name:e.name,value:t,listener:l,options:n},r?r.push(a):this.__on=[a]}}function y2(e,t,n){var r=g2(e+""),a,l=r.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var g=0,m=d.length,y;g<m;++g)for(a=0,y=d[g];a<l;++a)if((c=r[a]).type===y.type&&c.name===y.name)return y.value}return}for(d=t?p2:m2,a=0;a<l;++a)this.each(d(r[a],t,n));return this}function iS(e,t,n){var r=Ww(e),a=r.CustomEvent;typeof a=="function"?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function _2(e,t){return function(){return iS(this,e,t)}}function v2(e,t){return function(){return iS(this,e,t.apply(this,arguments))}}function E2(e,t){return this.each((typeof t=="function"?v2:_2)(e,t))}function*T2(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,l=r.length,c;a<l;++a)(c=r[a])&&(yield c)}var rS=[null];function ti(e,t){this._groups=e,this._parents=t}function uc(){return new ti([[document.documentElement]],rS)}function w2(){return this}ti.prototype=uc.prototype={constructor:ti,select:KI,selectAll:WI,selectChild:nC,selectChildren:aC,filter:oC,data:dC,enter:lC,exit:mC,join:pC,merge:yC,selection:w2,order:_C,sort:vC,call:TC,nodes:wC,node:SC,size:bC,empty:AC,each:RC,attr:OC,style:LC,property:HC,classed:GC,text:XC,html:JC,raise:e2,lower:i2,append:r2,insert:a2,remove:l2,clone:h2,datum:f2,on:y2,dispatch:E2,[Symbol.iterator]:T2};function vi(e){return typeof e=="string"?new ti([[document.querySelector(e)]],[document.documentElement]):new ti([[e]],rS)}function S2(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Di(e,t){if(e=S2(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const b2={passive:!1},Fu={capture:!0,passive:!1};function Rm(e){e.stopImmediatePropagation()}function Ko(e){e.preventDefault(),e.stopImmediatePropagation()}function sS(e){var t=e.document.documentElement,n=vi(e).on("dragstart.drag",Ko,Fu);"onselectstart"in t?n.on("selectstart.drag",Ko,Fu):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function aS(e,t){var n=e.document.documentElement,r=vi(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ko,Fu),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Bh=e=>()=>e;function Xm(e,{sourceEvent:t,subject:n,target:r,identifier:a,active:l,x:c,y:d,dx:g,dy:m,dispatch:y}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:g,enumerable:!0,configurable:!0},dy:{value:m,enumerable:!0,configurable:!0},_:{value:y}})}Xm.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function A2(e){return!e.ctrlKey&&!e.button}function R2(){return this.parentNode}function I2(e,t){return t??{x:e.x,y:e.y}}function C2(){return navigator.maxTouchPoints||"ontouchstart"in this}function x2(){var e=A2,t=R2,n=I2,r=C2,a={},l=Gf("start","drag","end"),c=0,d,g,m,y,v=0;function E(L){L.on("mousedown.drag",S).filter(r).on("touchstart.drag",M).on("touchmove.drag",B,b2).on("touchend.drag touchcancel.drag",q).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function S(L,Z){if(!(y||!e.call(this,L,Z))){var W=K(this,t.call(this,L,Z),L,Z,"mouse");W&&(vi(L.view).on("mousemove.drag",x,Fu).on("mouseup.drag",k,Fu),sS(L.view),Rm(L),m=!1,d=L.clientX,g=L.clientY,W("start",L))}}function x(L){if(Ko(L),!m){var Z=L.clientX-d,W=L.clientY-g;m=Z*Z+W*W>v}a.mouse("drag",L)}function k(L){vi(L.view).on("mousemove.drag mouseup.drag",null),aS(L.view,m),Ko(L),a.mouse("end",L)}function M(L,Z){if(e.call(this,L,Z)){var W=L.changedTouches,V=t.call(this,L,Z),R=W.length,I,P;for(I=0;I<R;++I)(P=K(this,V,L,Z,W[I].identifier,W[I]))&&(Rm(L),P("start",L,W[I]))}}function B(L){var Z=L.changedTouches,W=Z.length,V,R;for(V=0;V<W;++V)(R=a[Z[V].identifier])&&(Ko(L),R("drag",L,Z[V]))}function q(L){var Z=L.changedTouches,W=Z.length,V,R;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),V=0;V<W;++V)(R=a[Z[V].identifier])&&(Rm(L),R("end",L,Z[V]))}function K(L,Z,W,V,R,I){var P=l.copy(),U=Di(I||W,Z),z,A,O;if((O=n.call(L,new Xm("beforestart",{sourceEvent:W,target:E,identifier:R,active:c,x:U[0],y:U[1],dx:0,dy:0,dispatch:P}),V))!=null)return z=O.x-U[0]||0,A=O.y-U[1]||0,function Y(D,j,rt){var X=U,N;switch(D){case"start":a[R]=Y,N=c++;break;case"end":delete a[R],--c;case"drag":U=Di(rt||j,Z),N=c;break}P.call(D,L,new Xm(D,{sourceEvent:j,subject:O,target:E,identifier:R,active:N,x:U[0]+z,y:U[1]+A,dx:U[0]-X[0],dy:U[1]-X[1],dispatch:P}),V)}}return E.filter=function(L){return arguments.length?(e=typeof L=="function"?L:Bh(!!L),E):e},E.container=function(L){return arguments.length?(t=typeof L=="function"?L:Bh(L),E):t},E.subject=function(L){return arguments.length?(n=typeof L=="function"?L:Bh(L),E):n},E.touchable=function(L){return arguments.length?(r=typeof L=="function"?L:Bh(!!L),E):r},E.on=function(){var L=l.on.apply(l,arguments);return L===l?E:L},E.clickDistance=function(L){return arguments.length?(v=(L=+L)*L,E):Math.sqrt(v)},E}function zp(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function oS(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function cc(){}var ju=.7,_f=1/ju,Xo="\\s*([+-]?\\d+)\\s*",Gu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ar="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",N2=/^#([0-9a-f]{3,8})$/,D2=new RegExp(`^rgb\\(${Xo},${Xo},${Xo}\\)$`),M2=new RegExp(`^rgb\\(${ar},${ar},${ar}\\)$`),O2=new RegExp(`^rgba\\(${Xo},${Xo},${Xo},${Gu}\\)$`),V2=new RegExp(`^rgba\\(${ar},${ar},${ar},${Gu}\\)$`),k2=new RegExp(`^hsl\\(${Gu},${ar},${ar}\\)$`),P2=new RegExp(`^hsla\\(${Gu},${ar},${ar},${Gu}\\)$`),RE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zp(cc,$u,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:IE,formatHex:IE,formatHex8:L2,formatHsl:U2,formatRgb:CE,toString:CE});function IE(){return this.rgb().formatHex()}function L2(){return this.rgb().formatHex8()}function U2(){return lS(this).formatHsl()}function CE(){return this.rgb().formatRgb()}function $u(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=N2.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?xE(t):n===3?new Ln(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Hh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Hh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=D2.exec(e))?new Ln(t[1],t[2],t[3],1):(t=M2.exec(e))?new Ln(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=O2.exec(e))?Hh(t[1],t[2],t[3],t[4]):(t=V2.exec(e))?Hh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=k2.exec(e))?ME(t[1],t[2]/100,t[3]/100,1):(t=P2.exec(e))?ME(t[1],t[2]/100,t[3]/100,t[4]):RE.hasOwnProperty(e)?xE(RE[e]):e==="transparent"?new Ln(NaN,NaN,NaN,0):null}function xE(e){return new Ln(e>>16&255,e>>8&255,e&255,1)}function Hh(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ln(e,t,n,r)}function z2(e){return e instanceof cc||(e=$u(e)),e?(e=e.rgb(),new Ln(e.r,e.g,e.b,e.opacity)):new Ln}function Qm(e,t,n,r){return arguments.length===1?z2(e):new Ln(e,t,n,r??1)}function Ln(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}zp(Ln,Qm,oS(cc,{brighter(e){return e=e==null?_f:Math.pow(_f,e),new Ln(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ju:Math.pow(ju,e),new Ln(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ln(Da(this.r),Da(this.g),Da(this.b),vf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:NE,formatHex:NE,formatHex8:B2,formatRgb:DE,toString:DE}));function NE(){return`#${Ca(this.r)}${Ca(this.g)}${Ca(this.b)}`}function B2(){return`#${Ca(this.r)}${Ca(this.g)}${Ca(this.b)}${Ca((isNaN(this.opacity)?1:this.opacity)*255)}`}function DE(){const e=vf(this.opacity);return`${e===1?"rgb(":"rgba("}${Da(this.r)}, ${Da(this.g)}, ${Da(this.b)}${e===1?")":`, ${e})`}`}function vf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Da(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ca(e){return e=Da(e),(e<16?"0":"")+e.toString(16)}function ME(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Mi(e,t,n,r)}function lS(e){if(e instanceof Mi)return new Mi(e.h,e.s,e.l,e.opacity);if(e instanceof cc||(e=$u(e)),!e)return new Mi;if(e instanceof Mi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),l=Math.max(t,n,r),c=NaN,d=l-a,g=(l+a)/2;return d?(t===l?c=(n-r)/d+(n<r)*6:n===l?c=(r-t)/d+2:c=(t-n)/d+4,d/=g<.5?l+a:2-l-a,c*=60):d=g>0&&g<1?0:c,new Mi(c,d,g,e.opacity)}function H2(e,t,n,r){return arguments.length===1?lS(e):new Mi(e,t,n,r??1)}function Mi(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}zp(Mi,H2,oS(cc,{brighter(e){return e=e==null?_f:Math.pow(_f,e),new Mi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ju:Math.pow(ju,e),new Mi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Ln(Im(e>=240?e-240:e+120,a,r),Im(e,a,r),Im(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new Mi(OE(this.h),qh(this.s),qh(this.l),vf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=vf(this.opacity);return`${e===1?"hsl(":"hsla("}${OE(this.h)}, ${qh(this.s)*100}%, ${qh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function OE(e){return e=(e||0)%360,e<0?e+360:e}function qh(e){return Math.max(0,Math.min(1,e||0))}function Im(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const uS=e=>()=>e;function q2(e,t){return function(n){return e+n*t}}function F2(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function j2(e){return(e=+e)==1?cS:function(t,n){return n-t?F2(t,n,e):uS(isNaN(t)?n:t)}}function cS(e,t){var n=t-e;return n?q2(e,n):uS(isNaN(e)?t:e)}const VE=function e(t){var n=j2(t);function r(a,l){var c=n((a=Qm(a)).r,(l=Qm(l)).r),d=n(a.g,l.g),g=n(a.b,l.b),m=cS(a.opacity,l.opacity);return function(y){return a.r=c(y),a.g=d(y),a.b=g(y),a.opacity=m(y),a+""}}return r.gamma=e,r}(1);function bs(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Zm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Cm=new RegExp(Zm.source,"g");function G2(e){return function(){return e}}function $2(e){return function(t){return e(t)+""}}function Y2(e,t){var n=Zm.lastIndex=Cm.lastIndex=0,r,a,l,c=-1,d=[],g=[];for(e=e+"",t=t+"";(r=Zm.exec(e))&&(a=Cm.exec(t));)(l=a.index)>n&&(l=t.slice(n,l),d[c]?d[c]+=l:d[++c]=l),(r=r[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,g.push({i:c,x:bs(r,a)})),n=Cm.lastIndex;return n<t.length&&(l=t.slice(n),d[c]?d[c]+=l:d[++c]=l),d.length<2?g[0]?$2(g[0].x):G2(t):(t=g.length,function(m){for(var y=0,v;y<t;++y)d[(v=g[y]).i]=v.x(m);return d.join("")})}var kE=180/Math.PI,Wm={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function hS(e,t,n,r,a,l){var c,d,g;return(c=Math.sqrt(e*e+t*t))&&(e/=c,t/=c),(g=e*n+t*r)&&(n-=e*g,r-=t*g),(d=Math.sqrt(n*n+r*r))&&(n/=d,r/=d,g/=d),e*r<t*n&&(e=-e,t=-t,g=-g,c=-c),{translateX:a,translateY:l,rotate:Math.atan2(t,e)*kE,skewX:Math.atan(g)*kE,scaleX:c,scaleY:d}}var Fh;function K2(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Wm:hS(t.a,t.b,t.c,t.d,t.e,t.f)}function X2(e){return e==null||(Fh||(Fh=document.createElementNS("http://www.w3.org/2000/svg","g")),Fh.setAttribute("transform",e),!(e=Fh.transform.baseVal.consolidate()))?Wm:(e=e.matrix,hS(e.a,e.b,e.c,e.d,e.e,e.f))}function fS(e,t,n,r){function a(m){return m.length?m.pop()+" ":""}function l(m,y,v,E,S,x){if(m!==v||y!==E){var k=S.push("translate(",null,t,null,n);x.push({i:k-4,x:bs(m,v)},{i:k-2,x:bs(y,E)})}else(v||E)&&S.push("translate("+v+t+E+n)}function c(m,y,v,E){m!==y?(m-y>180?y+=360:y-m>180&&(m+=360),E.push({i:v.push(a(v)+"rotate(",null,r)-2,x:bs(m,y)})):y&&v.push(a(v)+"rotate("+y+r)}function d(m,y,v,E){m!==y?E.push({i:v.push(a(v)+"skewX(",null,r)-2,x:bs(m,y)}):y&&v.push(a(v)+"skewX("+y+r)}function g(m,y,v,E,S,x){if(m!==v||y!==E){var k=S.push(a(S)+"scale(",null,",",null,")");x.push({i:k-4,x:bs(m,v)},{i:k-2,x:bs(y,E)})}else(v!==1||E!==1)&&S.push(a(S)+"scale("+v+","+E+")")}return function(m,y){var v=[],E=[];return m=e(m),y=e(y),l(m.translateX,m.translateY,y.translateX,y.translateY,v,E),c(m.rotate,y.rotate,v,E),d(m.skewX,y.skewX,v,E),g(m.scaleX,m.scaleY,y.scaleX,y.scaleY,v,E),m=y=null,function(S){for(var x=-1,k=E.length,M;++x<k;)v[(M=E[x]).i]=M.x(S);return v.join("")}}}var Q2=fS(K2,"px, ","px)","deg)"),Z2=fS(X2,", ",")",")"),W2=1e-12;function PE(e){return((e=Math.exp(e))+1/e)/2}function J2(e){return((e=Math.exp(e))-1/e)/2}function tx(e){return((e=Math.exp(2*e))-1)/(e+1)}const ex=function e(t,n,r){function a(l,c){var d=l[0],g=l[1],m=l[2],y=c[0],v=c[1],E=c[2],S=y-d,x=v-g,k=S*S+x*x,M,B;if(k<W2)B=Math.log(E/m)/t,M=function(V){return[d+V*S,g+V*x,m*Math.exp(t*V*B)]};else{var q=Math.sqrt(k),K=(E*E-m*m+r*k)/(2*m*n*q),L=(E*E-m*m-r*k)/(2*E*n*q),Z=Math.log(Math.sqrt(K*K+1)-K),W=Math.log(Math.sqrt(L*L+1)-L);B=(W-Z)/t,M=function(V){var R=V*B,I=PE(Z),P=m/(n*q)*(I*tx(t*R+Z)-J2(Z));return[d+P*S,g+P*x,m*I/PE(t*R+Z)]}}return M.duration=B*1e3*t/Math.SQRT2,M}return a.rho=function(l){var c=Math.max(.001,+l),d=c*c,g=d*d;return e(c,d,g)},a}(Math.SQRT2,2,4);var rl=0,xu=0,bu=0,dS=1e3,Ef,Nu,Tf=0,Oa=0,Yf=0,Yu=typeof performance=="object"&&performance.now?performance:Date,gS=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Bp(){return Oa||(gS(nx),Oa=Yu.now()+Yf)}function nx(){Oa=0}function wf(){this._call=this._time=this._next=null}wf.prototype=mS.prototype={constructor:wf,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Bp():+n)+(t==null?0:+t),!this._next&&Nu!==this&&(Nu?Nu._next=this:Ef=this,Nu=this),this._call=e,this._time=n,Jm()},stop:function(){this._call&&(this._call=null,this._time=1/0,Jm())}};function mS(e,t,n){var r=new wf;return r.restart(e,t,n),r}function ix(){Bp(),++rl;for(var e=Ef,t;e;)(t=Oa-e._time)>=0&&e._call.call(void 0,t),e=e._next;--rl}function LE(){Oa=(Tf=Yu.now())+Yf,rl=xu=0;try{ix()}finally{rl=0,sx(),Oa=0}}function rx(){var e=Yu.now(),t=e-Tf;t>dS&&(Yf-=t,Tf=e)}function sx(){for(var e,t=Ef,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ef=n);Nu=e,Jm(r)}function Jm(e){if(!rl){xu&&(xu=clearTimeout(xu));var t=e-Oa;t>24?(e<1/0&&(xu=setTimeout(LE,e-Yu.now()-Yf)),bu&&(bu=clearInterval(bu))):(bu||(Tf=Yu.now(),bu=setInterval(rx,dS)),rl=1,gS(LE))}}function UE(e,t,n){var r=new wf;return t=t==null?0:+t,r.restart(a=>{r.stop(),e(a+t)},t,n),r}var ax=Gf("start","end","cancel","interrupt"),ox=[],pS=0,zE=1,tp=2,rf=3,BE=4,ep=5,sf=6;function Kf(e,t,n,r,a,l){var c=e.__transition;if(!c)e.__transition={};else if(n in c)return;lx(e,n,{name:t,index:r,group:a,on:ax,tween:ox,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:pS})}function Hp(e,t){var n=Li(e,t);if(n.state>pS)throw new Error("too late; already scheduled");return n}function fr(e,t){var n=Li(e,t);if(n.state>rf)throw new Error("too late; already running");return n}function Li(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function lx(e,t,n){var r=e.__transition,a;r[t]=n,n.timer=mS(l,0,n.time);function l(m){n.state=zE,n.timer.restart(c,n.delay,n.time),n.delay<=m&&c(m-n.delay)}function c(m){var y,v,E,S;if(n.state!==zE)return g();for(y in r)if(S=r[y],S.name===n.name){if(S.state===rf)return UE(c);S.state===BE?(S.state=sf,S.timer.stop(),S.on.call("interrupt",e,e.__data__,S.index,S.group),delete r[y]):+y<t&&(S.state=sf,S.timer.stop(),S.on.call("cancel",e,e.__data__,S.index,S.group),delete r[y])}if(UE(function(){n.state===rf&&(n.state=BE,n.timer.restart(d,n.delay,n.time),d(m))}),n.state=tp,n.on.call("start",e,e.__data__,n.index,n.group),n.state===tp){for(n.state=rf,a=new Array(E=n.tween.length),y=0,v=-1;y<E;++y)(S=n.tween[y].value.call(e,e.__data__,n.index,n.group))&&(a[++v]=S);a.length=v+1}}function d(m){for(var y=m<n.duration?n.ease.call(null,m/n.duration):(n.timer.restart(g),n.state=ep,1),v=-1,E=a.length;++v<E;)a[v].call(e,y);n.state===ep&&(n.on.call("end",e,e.__data__,n.index,n.group),g())}function g(){n.state=sf,n.timer.stop(),delete r[t];for(var m in r)return;delete e.__transition}}function af(e,t){var n=e.__transition,r,a,l=!0,c;if(n){t=t==null?null:t+"";for(c in n){if((r=n[c]).name!==t){l=!1;continue}a=r.state>tp&&r.state<ep,r.state=sf,r.timer.stop(),r.on.call(a?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[c]}l&&delete e.__transition}}function ux(e){return this.each(function(){af(this,e)})}function cx(e,t){var n,r;return function(){var a=fr(this,e),l=a.tween;if(l!==n){r=n=l;for(var c=0,d=r.length;c<d;++c)if(r[c].name===t){r=r.slice(),r.splice(c,1);break}}a.tween=r}}function hx(e,t,n){var r,a;if(typeof n!="function")throw new Error;return function(){var l=fr(this,e),c=l.tween;if(c!==r){a=(r=c).slice();for(var d={name:t,value:n},g=0,m=a.length;g<m;++g)if(a[g].name===t){a[g]=d;break}g===m&&a.push(d)}l.tween=a}}function fx(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Li(this.node(),n).tween,a=0,l=r.length,c;a<l;++a)if((c=r[a]).name===e)return c.value;return null}return this.each((t==null?cx:hx)(n,e,t))}function qp(e,t,n){var r=e._id;return e.each(function(){var a=fr(this,r);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return Li(a,r).value[t]}}function yS(e,t){var n;return(typeof t=="number"?bs:t instanceof $u?VE:(n=$u(t))?(t=n,VE):Y2)(e,t)}function dx(e){return function(){this.removeAttribute(e)}}function gx(e){return function(){this.removeAttributeNS(e.space,e.local)}}function mx(e,t,n){var r,a=n+"",l;return function(){var c=this.getAttribute(e);return c===a?null:c===r?l:l=t(r=c,n)}}function px(e,t,n){var r,a=n+"",l;return function(){var c=this.getAttributeNS(e.space,e.local);return c===a?null:c===r?l:l=t(r=c,n)}}function yx(e,t,n){var r,a,l;return function(){var c,d=n(this),g;return d==null?void this.removeAttribute(e):(c=this.getAttribute(e),g=d+"",c===g?null:c===r&&g===a?l:(a=g,l=t(r=c,d)))}}function _x(e,t,n){var r,a,l;return function(){var c,d=n(this),g;return d==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),g=d+"",c===g?null:c===r&&g===a?l:(a=g,l=t(r=c,d)))}}function vx(e,t){var n=$f(e),r=n==="transform"?Z2:yS;return this.attrTween(e,typeof t=="function"?(n.local?_x:yx)(n,r,qp(this,"attr."+e,t)):t==null?(n.local?gx:dx)(n):(n.local?px:mx)(n,r,t))}function Ex(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Tx(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function wx(e,t){var n,r;function a(){var l=t.apply(this,arguments);return l!==r&&(n=(r=l)&&Tx(e,l)),n}return a._value=t,a}function Sx(e,t){var n,r;function a(){var l=t.apply(this,arguments);return l!==r&&(n=(r=l)&&Ex(e,l)),n}return a._value=t,a}function bx(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=$f(e);return this.tween(n,(r.local?wx:Sx)(r,t))}function Ax(e,t){return function(){Hp(this,e).delay=+t.apply(this,arguments)}}function Rx(e,t){return t=+t,function(){Hp(this,e).delay=t}}function Ix(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ax:Rx)(t,e)):Li(this.node(),t).delay}function Cx(e,t){return function(){fr(this,e).duration=+t.apply(this,arguments)}}function xx(e,t){return t=+t,function(){fr(this,e).duration=t}}function Nx(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Cx:xx)(t,e)):Li(this.node(),t).duration}function Dx(e,t){if(typeof t!="function")throw new Error;return function(){fr(this,e).ease=t}}function Mx(e){var t=this._id;return arguments.length?this.each(Dx(t,e)):Li(this.node(),t).ease}function Ox(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;fr(this,e).ease=n}}function Vx(e){if(typeof e!="function")throw new Error;return this.each(Ox(this._id,e))}function kx(e){typeof e!="function"&&(e=Xw(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,d=r[a]=[],g,m=0;m<c;++m)(g=l[m])&&e.call(g,g.__data__,m,l)&&d.push(g);return new Fr(r,this._parents,this._name,this._id)}function Px(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,a=n.length,l=Math.min(r,a),c=new Array(r),d=0;d<l;++d)for(var g=t[d],m=n[d],y=g.length,v=c[d]=new Array(y),E,S=0;S<y;++S)(E=g[S]||m[S])&&(v[S]=E);for(;d<r;++d)c[d]=t[d];return new Fr(c,this._parents,this._name,this._id)}function Lx(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ux(e,t,n){var r,a,l=Lx(t)?Hp:fr;return function(){var c=l(this,e),d=c.on;d!==r&&(a=(r=d).copy()).on(t,n),c.on=a}}function zx(e,t){var n=this._id;return arguments.length<2?Li(this.node(),n).on.on(e):this.each(Ux(n,e,t))}function Bx(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Hx(){return this.on("end.remove",Bx(this._id))}function qx(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Lp(e));for(var r=this._groups,a=r.length,l=new Array(a),c=0;c<a;++c)for(var d=r[c],g=d.length,m=l[c]=new Array(g),y,v,E=0;E<g;++E)(y=d[E])&&(v=e.call(y,y.__data__,E,d))&&("__data__"in y&&(v.__data__=y.__data__),m[E]=v,Kf(m[E],t,n,E,m,Li(y,n)));return new Fr(l,this._parents,t,n)}function Fx(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Kw(e));for(var r=this._groups,a=r.length,l=[],c=[],d=0;d<a;++d)for(var g=r[d],m=g.length,y,v=0;v<m;++v)if(y=g[v]){for(var E=e.call(y,y.__data__,v,g),S,x=Li(y,n),k=0,M=E.length;k<M;++k)(S=E[k])&&Kf(S,t,n,k,E,x);l.push(E),c.push(y)}return new Fr(l,c,t,n)}var jx=uc.prototype.constructor;function Gx(){return new jx(this._groups,this._parents)}function $x(e,t){var n,r,a;return function(){var l=il(this,e),c=(this.style.removeProperty(e),il(this,e));return l===c?null:l===n&&c===r?a:a=t(n=l,r=c)}}function _S(e){return function(){this.style.removeProperty(e)}}function Yx(e,t,n){var r,a=n+"",l;return function(){var c=il(this,e);return c===a?null:c===r?l:l=t(r=c,n)}}function Kx(e,t,n){var r,a,l;return function(){var c=il(this,e),d=n(this),g=d+"";return d==null&&(g=d=(this.style.removeProperty(e),il(this,e))),c===g?null:c===r&&g===a?l:(a=g,l=t(r=c,d))}}function Xx(e,t){var n,r,a,l="style."+t,c="end."+l,d;return function(){var g=fr(this,e),m=g.on,y=g.value[l]==null?d||(d=_S(t)):void 0;(m!==n||a!==y)&&(r=(n=m).copy()).on(c,a=y),g.on=r}}function Qx(e,t,n){var r=(e+="")=="transform"?Q2:yS;return t==null?this.styleTween(e,$x(e,r)).on("end.style."+e,_S(e)):typeof t=="function"?this.styleTween(e,Kx(e,r,qp(this,"style."+e,t))).each(Xx(this._id,e)):this.styleTween(e,Yx(e,r,t),n).on("end.style."+e,null)}function Zx(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Wx(e,t,n){var r,a;function l(){var c=t.apply(this,arguments);return c!==a&&(r=(a=c)&&Zx(e,c,n)),r}return l._value=t,l}function Jx(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Wx(e,t,n??""))}function tN(e){return function(){this.textContent=e}}function eN(e){return function(){var t=e(this);this.textContent=t??""}}function nN(e){return this.tween("text",typeof e=="function"?eN(qp(this,"text",e)):tN(e==null?"":e+""))}function iN(e){return function(t){this.textContent=e.call(this,t)}}function rN(e){var t,n;function r(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&iN(a)),t}return r._value=e,r}function sN(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,rN(e))}function aN(){for(var e=this._name,t=this._id,n=vS(),r=this._groups,a=r.length,l=0;l<a;++l)for(var c=r[l],d=c.length,g,m=0;m<d;++m)if(g=c[m]){var y=Li(g,t);Kf(g,e,n,m,c,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new Fr(r,this._parents,e,n)}function oN(){var e,t,n=this,r=n._id,a=n.size();return new Promise(function(l,c){var d={value:c},g={value:function(){--a===0&&l()}};n.each(function(){var m=fr(this,r),y=m.on;y!==e&&(t=(e=y).copy(),t._.cancel.push(d),t._.interrupt.push(d),t._.end.push(g)),m.on=t}),a===0&&l()})}var lN=0;function Fr(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function vS(){return++lN}var Lr=uc.prototype;Fr.prototype={constructor:Fr,select:qx,selectAll:Fx,selectChild:Lr.selectChild,selectChildren:Lr.selectChildren,filter:kx,merge:Px,selection:Gx,transition:aN,call:Lr.call,nodes:Lr.nodes,node:Lr.node,size:Lr.size,empty:Lr.empty,each:Lr.each,on:zx,attr:vx,attrTween:bx,style:Qx,styleTween:Jx,text:nN,textTween:sN,remove:Hx,tween:fx,delay:Ix,duration:Nx,ease:Mx,easeVarying:Vx,end:oN,[Symbol.iterator]:Lr[Symbol.iterator]};function uN(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var cN={time:null,delay:0,duration:250,ease:uN};function hN(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function fN(e){var t,n;e instanceof Fr?(t=e._id,e=e._name):(t=vS(),(n=cN).time=Bp(),e=e==null?null:e+"");for(var r=this._groups,a=r.length,l=0;l<a;++l)for(var c=r[l],d=c.length,g,m=0;m<d;++m)(g=c[m])&&Kf(g,e,t,m,c,n||hN(g,t));return new Fr(r,this._parents,e,t)}uc.prototype.interrupt=ux;uc.prototype.transition=fN;const jh=e=>()=>e;function dN(e,{sourceEvent:t,target:n,transform:r,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function Ur(e,t,n){this.k=e,this.x=t,this.y=n}Ur.prototype={constructor:Ur,scale:function(e){return e===1?this:new Ur(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ur(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Hr=new Ur(1,0,0);Ur.prototype;function xm(e){e.stopImmediatePropagation()}function Au(e){e.preventDefault(),e.stopImmediatePropagation()}function gN(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function mN(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function HE(){return this.__zoom||Hr}function pN(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function yN(){return navigator.maxTouchPoints||"ontouchstart"in this}function _N(e,t,n){var r=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],l=e.invertY(t[0][1])-n[0][1],c=e.invertY(t[1][1])-n[1][1];return e.translate(a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function ES(){var e=gN,t=mN,n=_N,r=pN,a=yN,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,g=ex,m=Gf("start","zoom","end"),y,v,E,S=500,x=150,k=0,M=10;function B(O){O.property("__zoom",HE).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",P).filter(a).on("touchstart.zoom",U).on("touchmove.zoom",z).on("touchend.zoom touchcancel.zoom",A).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}B.transform=function(O,Y,D,j){var rt=O.selection?O.selection():O;rt.property("__zoom",HE),O!==rt?Z(O,Y,D,j):rt.interrupt().each(function(){W(this,arguments).event(j).start().zoom(null,typeof Y=="function"?Y.apply(this,arguments):Y).end()})},B.scaleBy=function(O,Y,D,j){B.scaleTo(O,function(){var rt=this.__zoom.k,X=typeof Y=="function"?Y.apply(this,arguments):Y;return rt*X},D,j)},B.scaleTo=function(O,Y,D,j){B.transform(O,function(){var rt=t.apply(this,arguments),X=this.__zoom,N=D==null?L(rt):typeof D=="function"?D.apply(this,arguments):D,$=X.invert(N),et=typeof Y=="function"?Y.apply(this,arguments):Y;return n(K(q(X,et),N,$),rt,c)},D,j)},B.translateBy=function(O,Y,D,j){B.transform(O,function(){return n(this.__zoom.translate(typeof Y=="function"?Y.apply(this,arguments):Y,typeof D=="function"?D.apply(this,arguments):D),t.apply(this,arguments),c)},null,j)},B.translateTo=function(O,Y,D,j,rt){B.transform(O,function(){var X=t.apply(this,arguments),N=this.__zoom,$=j==null?L(X):typeof j=="function"?j.apply(this,arguments):j;return n(Hr.translate($[0],$[1]).scale(N.k).translate(typeof Y=="function"?-Y.apply(this,arguments):-Y,typeof D=="function"?-D.apply(this,arguments):-D),X,c)},j,rt)};function q(O,Y){return Y=Math.max(l[0],Math.min(l[1],Y)),Y===O.k?O:new Ur(Y,O.x,O.y)}function K(O,Y,D){var j=Y[0]-D[0]*O.k,rt=Y[1]-D[1]*O.k;return j===O.x&&rt===O.y?O:new Ur(O.k,j,rt)}function L(O){return[(+O[0][0]+ +O[1][0])/2,(+O[0][1]+ +O[1][1])/2]}function Z(O,Y,D,j){O.on("start.zoom",function(){W(this,arguments).event(j).start()}).on("interrupt.zoom end.zoom",function(){W(this,arguments).event(j).end()}).tween("zoom",function(){var rt=this,X=arguments,N=W(rt,X).event(j),$=t.apply(rt,X),et=D==null?L($):typeof D=="function"?D.apply(rt,X):D,st=Math.max($[1][0]-$[0][0],$[1][1]-$[0][1]),ct=rt.__zoom,pt=typeof Y=="function"?Y.apply(rt,X):Y,yt=g(ct.invert(et).concat(st/ct.k),pt.invert(et).concat(st/pt.k));return function(It){if(It===1)It=pt;else{var At=yt(It),kt=st/At[2];It=new Ur(kt,et[0]-At[0]*kt,et[1]-At[1]*kt)}N.zoom(null,It)}})}function W(O,Y,D){return!D&&O.__zooming||new V(O,Y)}function V(O,Y){this.that=O,this.args=Y,this.active=0,this.sourceEvent=null,this.extent=t.apply(O,Y),this.taps=0}V.prototype={event:function(O){return O&&(this.sourceEvent=O),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(O,Y){return this.mouse&&O!=="mouse"&&(this.mouse[1]=Y.invert(this.mouse[0])),this.touch0&&O!=="touch"&&(this.touch0[1]=Y.invert(this.touch0[0])),this.touch1&&O!=="touch"&&(this.touch1[1]=Y.invert(this.touch1[0])),this.that.__zoom=Y,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(O){var Y=vi(this.that).datum();m.call(O,this.that,new dN(O,{sourceEvent:this.sourceEvent,target:B,transform:this.that.__zoom,dispatch:m}),Y)}};function R(O,...Y){if(!e.apply(this,arguments))return;var D=W(this,Y).event(O),j=this.__zoom,rt=Math.max(l[0],Math.min(l[1],j.k*Math.pow(2,r.apply(this,arguments)))),X=Di(O);if(D.wheel)(D.mouse[0][0]!==X[0]||D.mouse[0][1]!==X[1])&&(D.mouse[1]=j.invert(D.mouse[0]=X)),clearTimeout(D.wheel);else{if(j.k===rt)return;D.mouse=[X,j.invert(X)],af(this),D.start()}Au(O),D.wheel=setTimeout(N,x),D.zoom("mouse",n(K(q(j,rt),D.mouse[0],D.mouse[1]),D.extent,c));function N(){D.wheel=null,D.end()}}function I(O,...Y){if(E||!e.apply(this,arguments))return;var D=O.currentTarget,j=W(this,Y,!0).event(O),rt=vi(O.view).on("mousemove.zoom",et,!0).on("mouseup.zoom",st,!0),X=Di(O,D),N=O.clientX,$=O.clientY;sS(O.view),xm(O),j.mouse=[X,this.__zoom.invert(X)],af(this),j.start();function et(ct){if(Au(ct),!j.moved){var pt=ct.clientX-N,yt=ct.clientY-$;j.moved=pt*pt+yt*yt>k}j.event(ct).zoom("mouse",n(K(j.that.__zoom,j.mouse[0]=Di(ct,D),j.mouse[1]),j.extent,c))}function st(ct){rt.on("mousemove.zoom mouseup.zoom",null),aS(ct.view,j.moved),Au(ct),j.event(ct).end()}}function P(O,...Y){if(e.apply(this,arguments)){var D=this.__zoom,j=Di(O.changedTouches?O.changedTouches[0]:O,this),rt=D.invert(j),X=D.k*(O.shiftKey?.5:2),N=n(K(q(D,X),j,rt),t.apply(this,Y),c);Au(O),d>0?vi(this).transition().duration(d).call(Z,N,j,O):vi(this).call(B.transform,N,j,O)}}function U(O,...Y){if(e.apply(this,arguments)){var D=O.touches,j=D.length,rt=W(this,Y,O.changedTouches.length===j).event(O),X,N,$,et;for(xm(O),N=0;N<j;++N)$=D[N],et=Di($,this),et=[et,this.__zoom.invert(et),$.identifier],rt.touch0?!rt.touch1&&rt.touch0[2]!==et[2]&&(rt.touch1=et,rt.taps=0):(rt.touch0=et,X=!0,rt.taps=1+!!y);y&&(y=clearTimeout(y)),X&&(rt.taps<2&&(v=et[0],y=setTimeout(function(){y=null},S)),af(this),rt.start())}}function z(O,...Y){if(this.__zooming){var D=W(this,Y).event(O),j=O.changedTouches,rt=j.length,X,N,$,et;for(Au(O),X=0;X<rt;++X)N=j[X],$=Di(N,this),D.touch0&&D.touch0[2]===N.identifier?D.touch0[0]=$:D.touch1&&D.touch1[2]===N.identifier&&(D.touch1[0]=$);if(N=D.that.__zoom,D.touch1){var st=D.touch0[0],ct=D.touch0[1],pt=D.touch1[0],yt=D.touch1[1],It=(It=pt[0]-st[0])*It+(It=pt[1]-st[1])*It,At=(At=yt[0]-ct[0])*At+(At=yt[1]-ct[1])*At;N=q(N,Math.sqrt(It/At)),$=[(st[0]+pt[0])/2,(st[1]+pt[1])/2],et=[(ct[0]+yt[0])/2,(ct[1]+yt[1])/2]}else if(D.touch0)$=D.touch0[0],et=D.touch0[1];else return;D.zoom("touch",n(K(N,$,et),D.extent,c))}}function A(O,...Y){if(this.__zooming){var D=W(this,Y).event(O),j=O.changedTouches,rt=j.length,X,N;for(xm(O),E&&clearTimeout(E),E=setTimeout(function(){E=null},S),X=0;X<rt;++X)N=j[X],D.touch0&&D.touch0[2]===N.identifier?delete D.touch0:D.touch1&&D.touch1[2]===N.identifier&&delete D.touch1;if(D.touch1&&!D.touch0&&(D.touch0=D.touch1,delete D.touch1),D.touch0)D.touch0[1]=this.__zoom.invert(D.touch0[0]);else if(D.end(),D.taps===2&&(N=Di(N,this),Math.hypot(v[0]-N[0],v[1]-N[1])<M)){var $=vi(this).on("dblclick.zoom");$&&$.apply(this,arguments)}}}return B.wheelDelta=function(O){return arguments.length?(r=typeof O=="function"?O:jh(+O),B):r},B.filter=function(O){return arguments.length?(e=typeof O=="function"?O:jh(!!O),B):e},B.touchable=function(O){return arguments.length?(a=typeof O=="function"?O:jh(!!O),B):a},B.extent=function(O){return arguments.length?(t=typeof O=="function"?O:jh([[+O[0][0],+O[0][1]],[+O[1][0],+O[1][1]]]),B):t},B.scaleExtent=function(O){return arguments.length?(l[0]=+O[0],l[1]=+O[1],B):[l[0],l[1]]},B.translateExtent=function(O){return arguments.length?(c[0][0]=+O[0][0],c[1][0]=+O[1][0],c[0][1]=+O[0][1],c[1][1]=+O[1][1],B):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},B.constrain=function(O){return arguments.length?(n=O,B):n},B.duration=function(O){return arguments.length?(d=+O,B):d},B.interpolate=function(O){return arguments.length?(g=O,B):g},B.on=function(){var O=m.on.apply(m,arguments);return O===m?B:O},B.clickDistance=function(O){return arguments.length?(k=(O=+O)*O,B):Math.sqrt(k)},B.tapDistance=function(O){return arguments.length?(M=+O,B):M},B}Gw();const Xf=G.createContext(null),vN=Xf.Provider,jr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},TS=jr.error001();function me(e,t){const n=G.useContext(Xf);if(n===null)throw new Error(TS);return $w(n,e,t)}const Ke=()=>{const e=G.useContext(Xf);if(e===null)throw new Error(TS);return G.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},EN=e=>e.userSelectionActive?"none":"all";function Fp({position:e,children:t,className:n,style:r,...a}){const l=me(EN),c=`${e}`.split("-");return lt.createElement("div",{className:mn(["react-flow__panel",n,...c]),style:{...r,pointerEvents:l},...a},t)}function TN({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:lt.createElement(Fp,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},lt.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const wN=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:a=!0,labelBgStyle:l={},labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:g,className:m,...y})=>{const v=G.useRef(null),[E,S]=G.useState({x:0,y:0,width:0,height:0}),x=mn(["react-flow__edge-textwrapper",m]);return G.useEffect(()=>{if(v.current){const k=v.current.getBBox();S({x:k.x,y:k.y,width:k.width,height:k.height})}},[n]),typeof n>"u"||!n?null:lt.createElement("g",{transform:`translate(${e-E.width/2} ${t-E.height/2})`,className:x,visibility:E.width?"visible":"hidden",...y},a&&lt.createElement("rect",{width:E.width+2*c[0],x:-c[0],y:-c[1],height:E.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:d,ry:d}),lt.createElement("text",{className:"react-flow__edge-text",y:E.height/2,dy:"0.3em",ref:v,style:r},n),g)};var SN=G.memo(wN);const jp=e=>({width:e.offsetWidth,height:e.offsetHeight}),sl=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Gp=(e={x:0,y:0},t)=>({x:sl(e.x,t[0][0],t[1][0]),y:sl(e.y,t[0][1],t[1][1])}),qE=(e,t,n)=>e<t?sl(Math.abs(e-t),1,50)/50:e>n?-sl(Math.abs(e-n),1,50)/50:0,wS=(e,t)=>{const n=qE(e.x,35,t.width-35)*20,r=qE(e.y,35,t.height-35)*20;return[n,r]},SS=e=>e.getRootNode?.()||window?.document,bS=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Ku=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),AS=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),FE=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),bN=(e,t)=>AS(bS(Ku(e),Ku(t))),np=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},AN=e=>Ti(e.width)&&Ti(e.height)&&Ti(e.x)&&Ti(e.y),Ti=e=>!isNaN(e)&&isFinite(e),Ce=Symbol.for("internals"),RS=["Enter"," ","Escape"],RN=(e,t)=>{},IN=e=>"nativeEvent"in e;function ip(e){const n=(IN(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const IS=e=>"clientX"in e,Ms=(e,t)=>{const n=IS(e),r=n?e.clientX:e.touches?.[0].clientX,a=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:a-(t?.top??0)}},Sf=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,hc=({id:e,path:t,labelX:n,labelY:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:E,interactionWidth:S=20})=>lt.createElement(lt.Fragment,null,lt.createElement("path",{id:e,style:y,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:v,markerStart:E}),S&&lt.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:S,className:"react-flow__edge-interaction"}),a&&Ti(n)&&Ti(r)?lt.createElement(SN,{x:n,y:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m}):null);hc.displayName="BaseEdge";function Ru(e,t,n){return n===void 0?n:r=>{const a=t().edges.find(l=>l.id===e);a&&n(r,{...a})}}function CS({sourceX:e,sourceY:t,targetX:n,targetY:r}){const a=Math.abs(n-e)/2,l=n<e?n+a:n-a,c=Math.abs(r-t)/2,d=r<t?r+c:r-c;return[l,d,a,c]}function xS({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d}){const g=e*.125+a*.375+c*.375+n*.125,m=t*.125+l*.375+d*.375+r*.125,y=Math.abs(g-e),v=Math.abs(m-t);return[g,m,y,v]}var zs;(function(e){e.Strict="strict",e.Loose="loose"})(zs||(zs={}));var xa;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(xa||(xa={}));var Xu;(function(e){e.Partial="partial",e.Full="full"})(Xu||(Xu={}));var Rs;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Rs||(Rs={}));var Qu;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Qu||(Qu={}));var bt;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(bt||(bt={}));function jE({pos:e,x1:t,y1:n,x2:r,y2:a}){return e===bt.Left||e===bt.Right?[.5*(t+r),n]:[t,.5*(n+a)]}function NS({sourceX:e,sourceY:t,sourcePosition:n=bt.Bottom,targetX:r,targetY:a,targetPosition:l=bt.Top}){const[c,d]=jE({pos:n,x1:e,y1:t,x2:r,y2:a}),[g,m]=jE({pos:l,x1:r,y1:a,x2:e,y2:t}),[y,v,E,S]=xS({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:c,sourceControlY:d,targetControlX:g,targetControlY:m});return[`M${e},${t} C${c},${d} ${g},${m} ${r},${a}`,y,v,E,S]}const $p=G.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:a=bt.Bottom,targetPosition:l=bt.Top,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:E,markerEnd:S,markerStart:x,interactionWidth:k})=>{const[M,B,q]=NS({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:r,targetPosition:l});return lt.createElement(hc,{path:M,labelX:B,labelY:q,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:E,markerEnd:S,markerStart:x,interactionWidth:k})});$p.displayName="SimpleBezierEdge";const GE={[bt.Left]:{x:-1,y:0},[bt.Right]:{x:1,y:0},[bt.Top]:{x:0,y:-1},[bt.Bottom]:{x:0,y:1}},CN=({source:e,sourcePosition:t=bt.Bottom,target:n})=>t===bt.Left||t===bt.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},$E=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function xN({source:e,sourcePosition:t=bt.Bottom,target:n,targetPosition:r=bt.Top,center:a,offset:l}){const c=GE[t],d=GE[r],g={x:e.x+c.x*l,y:e.y+c.y*l},m={x:n.x+d.x*l,y:n.y+d.y*l},y=CN({source:g,sourcePosition:t,target:m}),v=y.x!==0?"x":"y",E=y[v];let S=[],x,k;const M={x:0,y:0},B={x:0,y:0},[q,K,L,Z]=CS({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(c[v]*d[v]===-1){x=a.x??q,k=a.y??K;const V=[{x,y:g.y},{x,y:m.y}],R=[{x:g.x,y:k},{x:m.x,y:k}];c[v]===E?S=v==="x"?V:R:S=v==="x"?R:V}else{const V=[{x:g.x,y:m.y}],R=[{x:m.x,y:g.y}];if(v==="x"?S=c.x===E?R:V:S=c.y===E?V:R,t===r){const A=Math.abs(e[v]-n[v]);if(A<=l){const O=Math.min(l-1,l-A);c[v]===E?M[v]=(g[v]>e[v]?-1:1)*O:B[v]=(m[v]>n[v]?-1:1)*O}}if(t!==r){const A=v==="x"?"y":"x",O=c[v]===d[A],Y=g[A]>m[A],D=g[A]<m[A];(c[v]===1&&(!O&&Y||O&&D)||c[v]!==1&&(!O&&D||O&&Y))&&(S=v==="x"?V:R)}const I={x:g.x+M.x,y:g.y+M.y},P={x:m.x+B.x,y:m.y+B.y},U=Math.max(Math.abs(I.x-S[0].x),Math.abs(P.x-S[0].x)),z=Math.max(Math.abs(I.y-S[0].y),Math.abs(P.y-S[0].y));U>=z?(x=(I.x+P.x)/2,k=S[0].y):(x=S[0].x,k=(I.y+P.y)/2)}return[[e,{x:g.x+M.x,y:g.y+M.y},...S,{x:m.x+B.x,y:m.y+B.y},n],x,k,L,Z]}function NN(e,t,n,r){const a=Math.min($E(e,t)/2,$E(t,n)/2,r),{x:l,y:c}=t;if(e.x===l&&l===n.x||e.y===c&&c===n.y)return`L${l} ${c}`;if(e.y===c){const m=e.x<n.x?-1:1,y=e.y<n.y?1:-1;return`L ${l+a*m},${c}Q ${l},${c} ${l},${c+a*y}`}const d=e.x<n.x?1:-1,g=e.y<n.y?-1:1;return`L ${l},${c+a*g}Q ${l},${c} ${l+a*d},${c}`}function rp({sourceX:e,sourceY:t,sourcePosition:n=bt.Bottom,targetX:r,targetY:a,targetPosition:l=bt.Top,borderRadius:c=5,centerX:d,centerY:g,offset:m=20}){const[y,v,E,S,x]=xN({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:a},targetPosition:l,center:{x:d,y:g},offset:m});return[y.reduce((M,B,q)=>{let K="";return q>0&&q<y.length-1?K=NN(y[q-1],B,y[q+1],c):K=`${q===0?"M":"L"}${B.x} ${B.y}`,M+=K,M},""),v,E,S,x]}const Qf=G.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,sourcePosition:v=bt.Bottom,targetPosition:E=bt.Top,markerEnd:S,markerStart:x,pathOptions:k,interactionWidth:M})=>{const[B,q,K]=rp({sourceX:e,sourceY:t,sourcePosition:v,targetX:n,targetY:r,targetPosition:E,borderRadius:k?.borderRadius,offset:k?.offset});return lt.createElement(hc,{path:B,labelX:q,labelY:K,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:S,markerStart:x,interactionWidth:M})});Qf.displayName="SmoothStepEdge";const Yp=G.memo(e=>lt.createElement(Qf,{...e,pathOptions:G.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));Yp.displayName="StepEdge";function DN({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[a,l,c,d]=CS({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,a,l,c,d]}const Kp=G.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:E,interactionWidth:S})=>{const[x,k,M]=DN({sourceX:e,sourceY:t,targetX:n,targetY:r});return lt.createElement(hc,{path:x,labelX:k,labelY:M,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:E,interactionWidth:S})});Kp.displayName="StraightEdge";function Gh(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function YE({pos:e,x1:t,y1:n,x2:r,y2:a,c:l}){switch(e){case bt.Left:return[t-Gh(t-r,l),n];case bt.Right:return[t+Gh(r-t,l),n];case bt.Top:return[t,n-Gh(n-a,l)];case bt.Bottom:return[t,n+Gh(a-n,l)]}}function DS({sourceX:e,sourceY:t,sourcePosition:n=bt.Bottom,targetX:r,targetY:a,targetPosition:l=bt.Top,curvature:c=.25}){const[d,g]=YE({pos:n,x1:e,y1:t,x2:r,y2:a,c}),[m,y]=YE({pos:l,x1:r,y1:a,x2:e,y2:t,c}),[v,E,S,x]=xS({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:d,sourceControlY:g,targetControlX:m,targetControlY:y});return[`M${e},${t} C${d},${g} ${m},${y} ${r},${a}`,v,E,S,x]}const bf=G.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:a=bt.Bottom,targetPosition:l=bt.Top,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:E,markerEnd:S,markerStart:x,pathOptions:k,interactionWidth:M})=>{const[B,q,K]=DS({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:r,targetPosition:l,curvature:k?.curvature});return lt.createElement(hc,{path:B,labelX:q,labelY:K,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:E,markerEnd:S,markerStart:x,interactionWidth:M})});bf.displayName="BezierEdge";const Xp=G.createContext(null),MN=Xp.Provider;Xp.Consumer;const ON=()=>G.useContext(Xp),VN=e=>"id"in e&&"source"in e&&"target"in e,kN=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,sp=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,PN=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),LN=(e,t)=>{if(!e.source||!e.target)return t;let n;return VN(e)?n={...e}:n={...e,id:kN(e)},PN(n,t)?t:t.concat(n)},ap=({x:e,y:t},[n,r,a],l,[c,d])=>{const g={x:(e-n)/a,y:(t-r)/a};return l?{x:c*Math.round(g.x/c),y:d*Math.round(g.y/d)}:g},MS=({x:e,y:t},[n,r,a])=>({x:e*a+n,y:t*a+r}),Ma=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],a={x:e.position.x-n,y:e.position.y-r};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:a}},Zf=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,a)=>{const{x:l,y:c}=Ma(a,t).positionAbsolute;return bS(r,Ku({x:l,y:c,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return AS(n)},OS=(e,t,[n,r,a]=[0,0,1],l=!1,c=!1,d=[0,0])=>{const g={x:(t.x-n)/a,y:(t.y-r)/a,width:t.width/a,height:t.height/a},m=[];return e.forEach(y=>{const{width:v,height:E,selectable:S=!0,hidden:x=!1}=y;if(c&&!S||x)return!1;const{positionAbsolute:k}=Ma(y,d),M={x:k.x,y:k.y,width:v||0,height:E||0},B=np(g,M),q=typeof v>"u"||typeof E>"u"||v===null||E===null,K=l&&B>0,L=(v||0)*(E||0);(q||K||B>=L||y.dragging)&&m.push(y)}),m},VS=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},kS=(e,t,n,r,a,l=.1)=>{const c=t/(e.width*(1+l)),d=n/(e.height*(1+l)),g=Math.min(c,d),m=sl(g,r,a),y=e.x+e.width/2,v=e.y+e.height/2,E=t/2-y*m,S=n/2-v*m;return{x:E,y:S,zoom:m}},Ra=(e,t=0)=>e.transition().duration(t);function KE(e,t,n,r){return(t[n]||[]).reduce((a,l)=>(`${e.id}-${l.id}-${n}`!==r&&a.push({id:l.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+l.x+l.width/2,y:(e.positionAbsolute?.y??0)+l.y+l.height/2}),a),[])}function UN(e,t,n,r,a,l){const{x:c,y:d}=Ms(e),m=t.elementsFromPoint(c,d).find(x=>x.classList.contains("react-flow__handle"));if(m){const x=m.getAttribute("data-nodeid");if(x){const k=Qp(void 0,m),M=m.getAttribute("data-handleid"),B=l({nodeId:x,id:M,type:k});if(B){const q=a.find(K=>K.nodeId===x&&K.type===k&&K.id===M);return{handle:{id:M,type:k,nodeId:x,x:q?.x||n.x,y:q?.y||n.y},validHandleResult:B}}}}let y=[],v=1/0;if(a.forEach(x=>{const k=Math.sqrt((x.x-n.x)**2+(x.y-n.y)**2);if(k<=r){const M=l(x);k<=v&&(k<v?y=[{handle:x,validHandleResult:M}]:k===v&&y.push({handle:x,validHandleResult:M}),v=k)}}),!y.length)return{handle:null,validHandleResult:PS()};if(y.length===1)return y[0];const E=y.some(({validHandleResult:x})=>x.isValid),S=y.some(({handle:x})=>x.type==="target");return y.find(({handle:x,validHandleResult:k})=>S?x.type==="target":E?k.isValid:!0)||y[0]}const zN={source:null,target:null,sourceHandle:null,targetHandle:null},PS=()=>({handleDomNode:null,isValid:!1,connection:zN,endHandle:null});function LS(e,t,n,r,a,l,c){const d=a==="target",g=c.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),m={...PS(),handleDomNode:g};if(g){const y=Qp(void 0,g),v=g.getAttribute("data-nodeid"),E=g.getAttribute("data-handleid"),S=g.classList.contains("connectable"),x=g.classList.contains("connectableend"),k={source:d?v:n,sourceHandle:d?E:r,target:d?n:v,targetHandle:d?r:E};m.connection=k,S&&x&&(t===zs.Strict?d&&y==="source"||!d&&y==="target":v!==n||E!==r)&&(m.endHandle={nodeId:v,handleId:E,type:y},m.isValid=l(k))}return m}function BN({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((a,l)=>{if(l[Ce]){const{handleBounds:c}=l[Ce];let d=[],g=[];c&&(d=KE(l,c,"source",`${t}-${n}-${r}`),g=KE(l,c,"target",`${t}-${n}-${r}`)),a.push(...d,...g)}return a},[])}function Qp(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Nm(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function HN(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function US({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:a,getState:l,setState:c,isValidConnection:d,edgeUpdaterType:g,onReconnectEnd:m}){const y=SS(e.target),{connectionMode:v,domNode:E,autoPanOnConnect:S,connectionRadius:x,onConnectStart:k,panBy:M,getNodes:B,cancelConnection:q}=l();let K=0,L;const{x:Z,y:W}=Ms(e),V=y?.elementFromPoint(Z,W),R=Qp(g,V),I=E?.getBoundingClientRect();if(!I||!R)return;let P,U=Ms(e,I),z=!1,A=null,O=!1,Y=null;const D=BN({nodes:B(),nodeId:n,handleId:t,handleType:R}),j=()=>{if(!S)return;const[N,$]=wS(U,I);M({x:N,y:$}),K=requestAnimationFrame(j)};c({connectionPosition:U,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:R,connectionStartHandle:{nodeId:n,handleId:t,type:R},connectionEndHandle:null}),k?.(e,{nodeId:n,handleId:t,handleType:R});function rt(N){const{transform:$}=l();U=Ms(N,I);const{handle:et,validHandleResult:st}=UN(N,y,ap(U,$,!1,[1,1]),x,D,ct=>LS(ct,v,n,t,a?"target":"source",d,y));if(L=et,z||(j(),z=!0),Y=st.handleDomNode,A=st.connection,O=st.isValid,c({connectionPosition:L&&O?MS({x:L.x,y:L.y},$):U,connectionStatus:HN(!!L,O),connectionEndHandle:st.endHandle}),!L&&!O&&!Y)return Nm(P);A.source!==A.target&&Y&&(Nm(P),P=Y,Y.classList.add("connecting","react-flow__handle-connecting"),Y.classList.toggle("valid",O),Y.classList.toggle("react-flow__handle-valid",O))}function X(N){(L||Y)&&A&&O&&r?.(A),l().onConnectEnd?.(N),g&&m?.(N),Nm(P),q(),cancelAnimationFrame(K),z=!1,O=!1,A=null,Y=null,y.removeEventListener("mousemove",rt),y.removeEventListener("mouseup",X),y.removeEventListener("touchmove",rt),y.removeEventListener("touchend",X)}y.addEventListener("mousemove",rt),y.addEventListener("mouseup",X),y.addEventListener("touchmove",rt),y.addEventListener("touchend",X)}const XE=()=>!0,qN=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),FN=(e,t,n)=>r=>{const{connectionStartHandle:a,connectionEndHandle:l,connectionClickStartHandle:c}=r;return{connecting:a?.nodeId===e&&a?.handleId===t&&a?.type===n||l?.nodeId===e&&l?.handleId===t&&l?.type===n,clickConnecting:c?.nodeId===e&&c?.handleId===t&&c?.type===n}},zS=G.forwardRef(({type:e="source",position:t=bt.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:c,onConnect:d,children:g,className:m,onMouseDown:y,onTouchStart:v,...E},S)=>{const x=c||null,k=e==="target",M=Ke(),B=ON(),{connectOnClick:q,noPanClassName:K}=me(qN,sn),{connecting:L,clickConnecting:Z}=me(FN(B,x,e),sn);B||M.getState().onError?.("010",jr.error010());const W=I=>{const{defaultEdgeOptions:P,onConnect:U,hasDefaultEdges:z}=M.getState(),A={...P,...I};if(z){const{edges:O,setEdges:Y}=M.getState();Y(LN(A,O))}U?.(A),d?.(A)},V=I=>{if(!B)return;const P=IS(I);a&&(P&&I.button===0||!P)&&US({event:I,handleId:x,nodeId:B,onConnect:W,isTarget:k,getState:M.getState,setState:M.setState,isValidConnection:n||M.getState().isValidConnection||XE}),P?y?.(I):v?.(I)},R=I=>{const{onClickConnectStart:P,onClickConnectEnd:U,connectionClickStartHandle:z,connectionMode:A,isValidConnection:O}=M.getState();if(!B||!z&&!a)return;if(!z){P?.(I,{nodeId:B,handleId:x,handleType:e}),M.setState({connectionClickStartHandle:{nodeId:B,type:e,handleId:x}});return}const Y=SS(I.target),D=n||O||XE,{connection:j,isValid:rt}=LS({nodeId:B,id:x,type:e},A,z.nodeId,z.handleId||null,z.type,D,Y);rt&&W(j),U?.(I),M.setState({connectionClickStartHandle:null})};return lt.createElement("div",{"data-handleid":x,"data-nodeid":B,"data-handlepos":t,"data-id":`${B}-${x}-${e}`,className:mn(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",K,m,{source:!k,target:k,connectable:r,connectablestart:a,connectableend:l,connecting:Z,connectionindicator:r&&(a&&!L||l&&L)}]),onMouseDown:V,onTouchStart:V,onClick:q?R:void 0,ref:S,...E},g)});zS.displayName="Handle";var Va=G.memo(zS);const BS=({data:e,isConnectable:t,targetPosition:n=bt.Top,sourcePosition:r=bt.Bottom})=>lt.createElement(lt.Fragment,null,lt.createElement(Va,{type:"target",position:n,isConnectable:t}),e?.label,lt.createElement(Va,{type:"source",position:r,isConnectable:t}));BS.displayName="DefaultNode";var op=G.memo(BS);const HS=({data:e,isConnectable:t,sourcePosition:n=bt.Bottom})=>lt.createElement(lt.Fragment,null,e?.label,lt.createElement(Va,{type:"source",position:n,isConnectable:t}));HS.displayName="InputNode";var qS=G.memo(HS);const FS=({data:e,isConnectable:t,targetPosition:n=bt.Top})=>lt.createElement(lt.Fragment,null,lt.createElement(Va,{type:"target",position:n,isConnectable:t}),e?.label);FS.displayName="OutputNode";var jS=G.memo(FS);const Zp=()=>null;Zp.displayName="GroupNode";const jN=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),$h=e=>e.id;function GN(e,t){return sn(e.selectedNodes.map($h),t.selectedNodes.map($h))&&sn(e.selectedEdges.map($h),t.selectedEdges.map($h))}const GS=G.memo(({onSelectionChange:e})=>{const t=Ke(),{selectedNodes:n,selectedEdges:r}=me(jN,GN);return G.useEffect(()=>{const a={nodes:n,edges:r};e?.(a),t.getState().onSelectionChange.forEach(l=>l(a))},[n,r,e]),null});GS.displayName="SelectionListener";const $N=e=>!!e.onSelectionChange;function YN({onSelectionChange:e}){const t=me($N);return e||t?lt.createElement(GS,{onSelectionChange:e}):null}const KN=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Lo(e,t){G.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function qt(e,t,n){G.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const XN=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:a,onConnectStart:l,onConnectEnd:c,onClickConnectStart:d,onClickConnectEnd:g,nodesDraggable:m,nodesConnectable:y,nodesFocusable:v,edgesFocusable:E,edgesUpdatable:S,elevateNodesOnSelect:x,minZoom:k,maxZoom:M,nodeExtent:B,onNodesChange:q,onEdgesChange:K,elementsSelectable:L,connectionMode:Z,snapGrid:W,snapToGrid:V,translateExtent:R,connectOnClick:I,defaultEdgeOptions:P,fitView:U,fitViewOptions:z,onNodesDelete:A,onEdgesDelete:O,onNodeDrag:Y,onNodeDragStart:D,onNodeDragStop:j,onSelectionDrag:rt,onSelectionDragStart:X,onSelectionDragStop:N,noPanClassName:$,nodeOrigin:et,rfId:st,autoPanOnConnect:ct,autoPanOnNodeDrag:pt,onError:yt,connectionRadius:It,isValidConnection:At,nodeDragThreshold:kt})=>{const{setNodes:Pt,setEdges:ue,setDefaultNodesAndEdges:ce,setMinZoom:Ee,setMaxZoom:_e,setTranslateExtent:he,setNodeExtent:Xe,reset:Lt}=me(KN,sn),wt=Ke();return G.useEffect(()=>{const xe=r?.map(pn=>({...pn,...P}));return ce(n,xe),()=>{Lt()}},[]),qt("defaultEdgeOptions",P,wt.setState),qt("connectionMode",Z,wt.setState),qt("onConnect",a,wt.setState),qt("onConnectStart",l,wt.setState),qt("onConnectEnd",c,wt.setState),qt("onClickConnectStart",d,wt.setState),qt("onClickConnectEnd",g,wt.setState),qt("nodesDraggable",m,wt.setState),qt("nodesConnectable",y,wt.setState),qt("nodesFocusable",v,wt.setState),qt("edgesFocusable",E,wt.setState),qt("edgesUpdatable",S,wt.setState),qt("elementsSelectable",L,wt.setState),qt("elevateNodesOnSelect",x,wt.setState),qt("snapToGrid",V,wt.setState),qt("snapGrid",W,wt.setState),qt("onNodesChange",q,wt.setState),qt("onEdgesChange",K,wt.setState),qt("connectOnClick",I,wt.setState),qt("fitViewOnInit",U,wt.setState),qt("fitViewOnInitOptions",z,wt.setState),qt("onNodesDelete",A,wt.setState),qt("onEdgesDelete",O,wt.setState),qt("onNodeDrag",Y,wt.setState),qt("onNodeDragStart",D,wt.setState),qt("onNodeDragStop",j,wt.setState),qt("onSelectionDrag",rt,wt.setState),qt("onSelectionDragStart",X,wt.setState),qt("onSelectionDragStop",N,wt.setState),qt("noPanClassName",$,wt.setState),qt("nodeOrigin",et,wt.setState),qt("rfId",st,wt.setState),qt("autoPanOnConnect",ct,wt.setState),qt("autoPanOnNodeDrag",pt,wt.setState),qt("onError",yt,wt.setState),qt("connectionRadius",It,wt.setState),qt("isValidConnection",At,wt.setState),qt("nodeDragThreshold",kt,wt.setState),Lo(e,Pt),Lo(t,ue),Lo(k,Ee),Lo(M,_e),Lo(R,he),Lo(B,Xe),null},QE={display:"none"},QN={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},$S="react-flow__node-desc",YS="react-flow__edge-desc",ZN="react-flow__aria-live",WN=e=>e.ariaLiveMessage;function JN({rfId:e}){const t=me(WN);return lt.createElement("div",{id:`${ZN}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:QN},t)}function tD({rfId:e,disableKeyboardA11y:t}){return lt.createElement(lt.Fragment,null,lt.createElement("div",{id:`${$S}-${e}`,style:QE},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),lt.createElement("div",{id:`${YS}-${e}`,style:QE},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&lt.createElement(JN,{rfId:e}))}var Zu=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=G.useState(!1),a=G.useRef(!1),l=G.useRef(new Set([])),[c,d]=G.useMemo(()=>{if(e!==null){const m=(Array.isArray(e)?e:[e]).filter(v=>typeof v=="string").map(v=>v.split("+")),y=m.reduce((v,E)=>v.concat(...E),[]);return[m,y]}return[[],[]]},[e]);return G.useEffect(()=>{const g=typeof document<"u"?document:null,m=t?.target||g;if(e!==null){const y=S=>{if(a.current=S.ctrlKey||S.metaKey||S.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&ip(S))return!1;const k=WE(S.code,d);l.current.add(S[k]),ZE(c,l.current,!1)&&(S.preventDefault(),r(!0))},v=S=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&ip(S))return!1;const k=WE(S.code,d);ZE(c,l.current,!0)?(r(!1),l.current.clear()):l.current.delete(S[k]),S.key==="Meta"&&l.current.clear(),a.current=!1},E=()=>{l.current.clear(),r(!1)};return m?.addEventListener("keydown",y),m?.addEventListener("keyup",v),window.addEventListener("blur",E),()=>{m?.removeEventListener("keydown",y),m?.removeEventListener("keyup",v),window.removeEventListener("blur",E)}}},[e,r]),n};function ZE(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(a=>t.has(a)))}function WE(e,t){return t.includes(e)?"code":"key"}function KS(e,t,n,r){const a=e.parentNode||e.parentId;if(!a)return n;const l=t.get(a),c=Ma(l,r);return KS(l,t,{x:(n.x??0)+c.x,y:(n.y??0)+c.y,z:(l[Ce]?.z??0)>(n.z??0)?l[Ce]?.z??0:n.z??0},r)}function XS(e,t,n){e.forEach(r=>{const a=r.parentNode||r.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||n?.[r.id]){const{x:l,y:c,z:d}=KS(r,e,{...r.position,z:r[Ce]?.z??0},t);r.positionAbsolute={x:l,y:c},r[Ce].z=d,n?.[r.id]&&(r[Ce].isParent=!0)}})}function Dm(e,t,n,r){const a=new Map,l={},c=r?1e3:0;return e.forEach(d=>{const g=(Ti(d.zIndex)?d.zIndex:0)+(d.selected?c:0),m=t.get(d.id),y={...d,positionAbsolute:{x:d.position.x,y:d.position.y}},v=d.parentNode||d.parentId;v&&(l[v]=!0);const E=m?.type&&m?.type!==d.type;Object.defineProperty(y,Ce,{enumerable:!1,value:{handleBounds:E?void 0:m?.[Ce]?.handleBounds,z:g}}),a.set(d.id,y)}),XS(a,n,l),a}function QS(e,t={}){const{getNodes:n,width:r,height:a,minZoom:l,maxZoom:c,d3Zoom:d,d3Selection:g,fitViewOnInitDone:m,fitViewOnInit:y,nodeOrigin:v}=e(),E=t.initial&&!m&&y;if(d&&g&&(E||!t.initial)){const x=n().filter(M=>{const B=t.includeHiddenNodes?M.width&&M.height:!M.hidden;return t.nodes?.length?B&&t.nodes.some(q=>q.id===M.id):B}),k=x.every(M=>M.width&&M.height);if(x.length>0&&k){const M=Zf(x,v),{x:B,y:q,zoom:K}=kS(M,r,a,t.minZoom??l,t.maxZoom??c,t.padding??.1),L=Hr.translate(B,q).scale(K);return typeof t.duration=="number"&&t.duration>0?d.transform(Ra(g,t.duration),L):d.transform(g,L),!0}}return!1}function eD(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[Ce]:r[Ce],selected:n.selected})}),new Map(t)}function nD(e,t){return t.map(n=>{const r=e.find(a=>a.id===n.id);return r&&(n.selected=r.selected),n})}function Yh({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:a,edges:l,onNodesChange:c,onEdgesChange:d,hasDefaultNodes:g,hasDefaultEdges:m}=n();e?.length&&(g&&r({nodeInternals:eD(e,a)}),c?.(e)),t?.length&&(m&&r({edges:nD(t,l)}),d?.(t))}const Uo=()=>{},iD={zoomIn:Uo,zoomOut:Uo,zoomTo:Uo,getZoom:()=>1,setViewport:Uo,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Uo,fitBounds:Uo,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},rD=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),sD=()=>{const e=Ke(),{d3Zoom:t,d3Selection:n}=me(rD,sn);return G.useMemo(()=>n&&t?{zoomIn:a=>t.scaleBy(Ra(n,a?.duration),1.2),zoomOut:a=>t.scaleBy(Ra(n,a?.duration),1/1.2),zoomTo:(a,l)=>t.scaleTo(Ra(n,l?.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,l)=>{const[c,d,g]=e.getState().transform,m=Hr.translate(a.x??c,a.y??d).scale(a.zoom??g);t.transform(Ra(n,l?.duration),m)},getViewport:()=>{const[a,l,c]=e.getState().transform;return{x:a,y:l,zoom:c}},fitView:a=>QS(e.getState,a),setCenter:(a,l,c)=>{const{width:d,height:g,maxZoom:m}=e.getState(),y=typeof c?.zoom<"u"?c.zoom:m,v=d/2-a*y,E=g/2-l*y,S=Hr.translate(v,E).scale(y);t.transform(Ra(n,c?.duration),S)},fitBounds:(a,l)=>{const{width:c,height:d,minZoom:g,maxZoom:m}=e.getState(),{x:y,y:v,zoom:E}=kS(a,c,d,g,m,l?.padding??.1),S=Hr.translate(y,v).scale(E);t.transform(Ra(n,l?.duration),S)},project:a=>{const{transform:l,snapToGrid:c,snapGrid:d}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),ap(a,l,c,d)},screenToFlowPosition:a=>{const{transform:l,snapToGrid:c,snapGrid:d,domNode:g}=e.getState();if(!g)return a;const{x:m,y}=g.getBoundingClientRect(),v={x:a.x-m,y:a.y-y};return ap(v,l,c,d)},flowToScreenPosition:a=>{const{transform:l,domNode:c}=e.getState();if(!c)return a;const{x:d,y:g}=c.getBoundingClientRect(),m=MS(a,l);return{x:m.x+d,y:m.y+g}},viewportInitialized:!0}:iD,[t,n])};function fc(){const e=sD(),t=Ke(),n=G.useCallback(()=>t.getState().getNodes().map(k=>({...k})),[]),r=G.useCallback(k=>t.getState().nodeInternals.get(k),[]),a=G.useCallback(()=>{const{edges:k=[]}=t.getState();return k.map(M=>({...M}))},[]),l=G.useCallback(k=>{const{edges:M=[]}=t.getState();return M.find(B=>B.id===k)},[]),c=G.useCallback(k=>{const{getNodes:M,setNodes:B,hasDefaultNodes:q,onNodesChange:K}=t.getState(),L=M(),Z=typeof k=="function"?k(L):k;if(q)B(Z);else if(K){const W=Z.length===0?L.map(V=>({type:"remove",id:V.id})):Z.map(V=>({item:V,type:"reset"}));K(W)}},[]),d=G.useCallback(k=>{const{edges:M=[],setEdges:B,hasDefaultEdges:q,onEdgesChange:K}=t.getState(),L=typeof k=="function"?k(M):k;if(q)B(L);else if(K){const Z=L.length===0?M.map(W=>({type:"remove",id:W.id})):L.map(W=>({item:W,type:"reset"}));K(Z)}},[]),g=G.useCallback(k=>{const M=Array.isArray(k)?k:[k],{getNodes:B,setNodes:q,hasDefaultNodes:K,onNodesChange:L}=t.getState();if(K){const W=[...B(),...M];q(W)}else if(L){const Z=M.map(W=>({item:W,type:"add"}));L(Z)}},[]),m=G.useCallback(k=>{const M=Array.isArray(k)?k:[k],{edges:B=[],setEdges:q,hasDefaultEdges:K,onEdgesChange:L}=t.getState();if(K)q([...B,...M]);else if(L){const Z=M.map(W=>({item:W,type:"add"}));L(Z)}},[]),y=G.useCallback(()=>{const{getNodes:k,edges:M=[],transform:B}=t.getState(),[q,K,L]=B;return{nodes:k().map(Z=>({...Z})),edges:M.map(Z=>({...Z})),viewport:{x:q,y:K,zoom:L}}},[]),v=G.useCallback(({nodes:k,edges:M})=>{const{nodeInternals:B,getNodes:q,edges:K,hasDefaultNodes:L,hasDefaultEdges:Z,onNodesDelete:W,onEdgesDelete:V,onNodesChange:R,onEdgesChange:I}=t.getState(),P=(k||[]).map(Y=>Y.id),U=(M||[]).map(Y=>Y.id),z=q().reduce((Y,D)=>{const j=D.parentNode||D.parentId,rt=!P.includes(D.id)&&j&&Y.find(N=>N.id===j);return(typeof D.deletable=="boolean"?D.deletable:!0)&&(P.includes(D.id)||rt)&&Y.push(D),Y},[]),A=K.filter(Y=>typeof Y.deletable=="boolean"?Y.deletable:!0),O=A.filter(Y=>U.includes(Y.id));if(z||O){const Y=VS(z,A),D=[...O,...Y],j=D.reduce((rt,X)=>(rt.includes(X.id)||rt.push(X.id),rt),[]);if((Z||L)&&(Z&&t.setState({edges:K.filter(rt=>!j.includes(rt.id))}),L&&(z.forEach(rt=>{B.delete(rt.id)}),t.setState({nodeInternals:new Map(B)}))),j.length>0&&(V?.(D),I&&I(j.map(rt=>({id:rt,type:"remove"})))),z.length>0&&(W?.(z),R)){const rt=z.map(X=>({id:X.id,type:"remove"}));R(rt)}}},[]),E=G.useCallback(k=>{const M=AN(k),B=M?null:t.getState().nodeInternals.get(k.id);return!M&&!B?[null,null,M]:[M?k:FE(B),B,M]},[]),S=G.useCallback((k,M=!0,B)=>{const[q,K,L]=E(k);return q?(B||t.getState().getNodes()).filter(Z=>{if(!L&&(Z.id===K.id||!Z.positionAbsolute))return!1;const W=FE(Z),V=np(W,q);return M&&V>0||V>=q.width*q.height}):[]},[]),x=G.useCallback((k,M,B=!0)=>{const[q]=E(k);if(!q)return!1;const K=np(q,M);return B&&K>0||K>=q.width*q.height},[]);return G.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:a,getEdge:l,setNodes:c,setEdges:d,addNodes:g,addEdges:m,toObject:y,deleteElements:v,getIntersectingNodes:S,isNodeIntersecting:x}),[e,n,r,a,l,c,d,g,m,y,v,S,x])}const aD={actInsideInputWithModifier:!1};var oD=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=Ke(),{deleteElements:r}=fc(),a=Zu(e,aD),l=Zu(t);G.useEffect(()=>{if(a){const{edges:c,getNodes:d}=n.getState(),g=d().filter(y=>y.selected),m=c.filter(y=>y.selected);r({nodes:g,edges:m}),n.setState({nodesSelectionActive:!1})}},[a]),G.useEffect(()=>{n.setState({multiSelectionActive:l})},[l])};function lD(e){const t=Ke();G.useEffect(()=>{let n;const r=()=>{if(!e.current)return;const a=jp(e.current);(a.height===0||a.width===0)&&t.getState().onError?.("004",jr.error004()),t.setState({width:a.width||500,height:a.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const Wp={position:"absolute",width:"100%",height:"100%",top:0,left:0},uD=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Kh=e=>({x:e.x,y:e.y,zoom:e.k}),zo=(e,t)=>e.target.closest(`.${t}`),JE=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),tT=e=>{const t=e.ctrlKey&&Sf()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},cD=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),hD=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:a=!0,zoomOnPinch:l=!0,panOnScroll:c=!1,panOnScrollSpeed:d=.5,panOnScrollMode:g=xa.Free,zoomOnDoubleClick:m=!0,elementsSelectable:y,panOnDrag:v=!0,defaultViewport:E,translateExtent:S,minZoom:x,maxZoom:k,zoomActivationKeyCode:M,preventScrolling:B=!0,children:q,noWheelClassName:K,noPanClassName:L})=>{const Z=G.useRef(),W=Ke(),V=G.useRef(!1),R=G.useRef(!1),I=G.useRef(null),P=G.useRef({x:0,y:0,zoom:0}),{d3Zoom:U,d3Selection:z,d3ZoomHandler:A,userSelectionActive:O}=me(cD,sn),Y=Zu(M),D=G.useRef(0),j=G.useRef(!1),rt=G.useRef();return lD(I),G.useEffect(()=>{if(I.current){const X=I.current.getBoundingClientRect(),N=ES().scaleExtent([x,k]).translateExtent(S),$=vi(I.current).call(N),et=Hr.translate(E.x,E.y).scale(sl(E.zoom,x,k)),st=[[0,0],[X.width,X.height]],ct=N.constrain()(et,st,S);N.transform($,ct),N.wheelDelta(tT),W.setState({d3Zoom:N,d3Selection:$,d3ZoomHandler:$.on("wheel.zoom"),transform:[ct.x,ct.y,ct.k],domNode:I.current.closest(".react-flow")})}},[]),G.useEffect(()=>{z&&U&&(c&&!Y&&!O?z.on("wheel.zoom",X=>{if(zo(X,K))return!1;X.preventDefault(),X.stopImmediatePropagation();const N=z.property("__zoom").k||1;if(X.ctrlKey&&l){const At=Di(X),kt=tT(X),Pt=N*Math.pow(2,kt);U.scaleTo(z,Pt,At,X);return}const $=X.deltaMode===1?20:1;let et=g===xa.Vertical?0:X.deltaX*$,st=g===xa.Horizontal?0:X.deltaY*$;!Sf()&&X.shiftKey&&g!==xa.Vertical&&(et=X.deltaY*$,st=0),U.translateBy(z,-(et/N)*d,-(st/N)*d,{internal:!0});const ct=Kh(z.property("__zoom")),{onViewportChangeStart:pt,onViewportChange:yt,onViewportChangeEnd:It}=W.getState();clearTimeout(rt.current),j.current||(j.current=!0,t?.(X,ct),pt?.(ct)),j.current&&(e?.(X,ct),yt?.(ct),rt.current=setTimeout(()=>{n?.(X,ct),It?.(ct),j.current=!1},150))},{passive:!1}):typeof A<"u"&&z.on("wheel.zoom",function(X,N){if(!B&&X.type==="wheel"&&!X.ctrlKey||zo(X,K))return null;X.preventDefault(),A.call(this,X,N)},{passive:!1}))},[O,c,g,z,U,A,Y,l,B,K,t,e,n]),G.useEffect(()=>{U&&U.on("start",X=>{if(!X.sourceEvent||X.sourceEvent.internal)return null;D.current=X.sourceEvent?.button;const{onViewportChangeStart:N}=W.getState(),$=Kh(X.transform);V.current=!0,P.current=$,X.sourceEvent?.type==="mousedown"&&W.setState({paneDragging:!0}),N?.($),t?.(X.sourceEvent,$)})},[U,t]),G.useEffect(()=>{U&&(O&&!V.current?U.on("zoom",null):O||U.on("zoom",X=>{const{onViewportChange:N}=W.getState();if(W.setState({transform:[X.transform.x,X.transform.y,X.transform.k]}),R.current=!!(r&&JE(v,D.current??0)),(e||N)&&!X.sourceEvent?.internal){const $=Kh(X.transform);N?.($),e?.(X.sourceEvent,$)}}))},[O,U,e,v,r]),G.useEffect(()=>{U&&U.on("end",X=>{if(!X.sourceEvent||X.sourceEvent.internal)return null;const{onViewportChangeEnd:N}=W.getState();if(V.current=!1,W.setState({paneDragging:!1}),r&&JE(v,D.current??0)&&!R.current&&r(X.sourceEvent),R.current=!1,(n||N)&&uD(P.current,X.transform)){const $=Kh(X.transform);P.current=$,clearTimeout(Z.current),Z.current=setTimeout(()=>{N?.($),n?.(X.sourceEvent,$)},c?150:0)}})},[U,c,v,n,r]),G.useEffect(()=>{U&&U.filter(X=>{const N=Y||a,$=l&&X.ctrlKey;if((v===!0||Array.isArray(v)&&v.includes(1))&&X.button===1&&X.type==="mousedown"&&(zo(X,"react-flow__node")||zo(X,"react-flow__edge")))return!0;if(!v&&!N&&!c&&!m&&!l||O||!m&&X.type==="dblclick"||zo(X,K)&&X.type==="wheel"||zo(X,L)&&(X.type!=="wheel"||c&&X.type==="wheel"&&!Y)||!l&&X.ctrlKey&&X.type==="wheel"||!N&&!c&&!$&&X.type==="wheel"||!v&&(X.type==="mousedown"||X.type==="touchstart")||Array.isArray(v)&&!v.includes(X.button)&&X.type==="mousedown")return!1;const et=Array.isArray(v)&&v.includes(X.button)||!X.button||X.button<=1;return(!X.ctrlKey||X.type==="wheel")&&et})},[O,U,a,l,c,m,v,y,Y]),lt.createElement("div",{className:"react-flow__renderer",ref:I,style:Wp},q)},fD=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function dD(){const{userSelectionActive:e,userSelectionRect:t}=me(fD,sn);return e&&t?lt.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function eT(e,t){const n=t.parentNode||t.parentId,r=e.find(a=>a.id===n);if(r){const a=t.position.x+t.width-r.width,l=t.position.y+t.height-r.height;if(a>0||l>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,a>0&&(r.style.width+=a),l>0&&(r.style.height+=l),t.position.x<0){const c=Math.abs(t.position.x);r.position.x=r.position.x-c,r.style.width+=c,t.position.x=0}if(t.position.y<0){const c=Math.abs(t.position.y);r.position.y=r.position.y-c,r.style.height+=c,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function ZS(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,a)=>{const l=e.filter(d=>d.id===a.id);if(l.length===0)return r.push(a),r;const c={...a};for(const d of l)if(d)switch(d.type){case"select":{c.selected=d.selected;break}case"position":{typeof d.position<"u"&&(c.position=d.position),typeof d.positionAbsolute<"u"&&(c.positionAbsolute=d.positionAbsolute),typeof d.dragging<"u"&&(c.dragging=d.dragging),c.expandParent&&eT(r,c);break}case"dimensions":{typeof d.dimensions<"u"&&(c.width=d.dimensions.width,c.height=d.dimensions.height),typeof d.updateStyle<"u"&&(c.style={...c.style||{},...d.dimensions}),typeof d.resizing=="boolean"&&(c.resizing=d.resizing),c.expandParent&&eT(r,c);break}case"remove":return r}return r.push(c),r},n)}function WS(e,t){return ZS(e,t)}function gD(e,t){return ZS(e,t)}const As=(e,t)=>({id:e,type:"select",selected:t});function $o(e,t){return e.reduce((n,r)=>{const a=t.includes(r.id);return!r.selected&&a?(r.selected=!0,n.push(As(r.id,!0))):r.selected&&!a&&(r.selected=!1,n.push(As(r.id,!1))),n},[])}const Mm=(e,t)=>n=>{n.target===t.current&&e?.(n)},mD=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),JS=G.memo(({isSelecting:e,selectionMode:t=Xu.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:a,onPaneClick:l,onPaneContextMenu:c,onPaneScroll:d,onPaneMouseEnter:g,onPaneMouseMove:m,onPaneMouseLeave:y,children:v})=>{const E=G.useRef(null),S=Ke(),x=G.useRef(0),k=G.useRef(0),M=G.useRef(),{userSelectionActive:B,elementsSelectable:q,dragging:K}=me(mD,sn),L=()=>{S.setState({userSelectionActive:!1,userSelectionRect:null}),x.current=0,k.current=0},Z=A=>{l?.(A),S.getState().resetSelectedElements(),S.setState({nodesSelectionActive:!1})},W=A=>{if(Array.isArray(n)&&n?.includes(2)){A.preventDefault();return}c?.(A)},V=d?A=>d(A):void 0,R=A=>{const{resetSelectedElements:O,domNode:Y}=S.getState();if(M.current=Y?.getBoundingClientRect(),!q||!e||A.button!==0||A.target!==E.current||!M.current)return;const{x:D,y:j}=Ms(A,M.current);O(),S.setState({userSelectionRect:{width:0,height:0,startX:D,startY:j,x:D,y:j}}),r?.(A)},I=A=>{const{userSelectionRect:O,nodeInternals:Y,edges:D,transform:j,onNodesChange:rt,onEdgesChange:X,nodeOrigin:N,getNodes:$}=S.getState();if(!e||!M.current||!O)return;S.setState({userSelectionActive:!0,nodesSelectionActive:!1});const et=Ms(A,M.current),st=O.startX??0,ct=O.startY??0,pt={...O,x:et.x<st?et.x:st,y:et.y<ct?et.y:ct,width:Math.abs(et.x-st),height:Math.abs(et.y-ct)},yt=$(),It=OS(Y,pt,j,t===Xu.Partial,!0,N),At=VS(It,D).map(Pt=>Pt.id),kt=It.map(Pt=>Pt.id);if(x.current!==kt.length){x.current=kt.length;const Pt=$o(yt,kt);Pt.length&&rt?.(Pt)}if(k.current!==At.length){k.current=At.length;const Pt=$o(D,At);Pt.length&&X?.(Pt)}S.setState({userSelectionRect:pt})},P=A=>{if(A.button!==0)return;const{userSelectionRect:O}=S.getState();!B&&O&&A.target===E.current&&Z?.(A),S.setState({nodesSelectionActive:x.current>0}),L(),a?.(A)},U=A=>{B&&(S.setState({nodesSelectionActive:x.current>0}),a?.(A)),L()},z=q&&(e||B);return lt.createElement("div",{className:mn(["react-flow__pane",{dragging:K,selection:e}]),onClick:z?void 0:Mm(Z,E),onContextMenu:Mm(W,E),onWheel:Mm(V,E),onMouseEnter:z?void 0:g,onMouseDown:z?R:void 0,onMouseMove:z?I:m,onMouseUp:z?P:void 0,onMouseLeave:z?U:y,ref:E,style:Wp},v,lt.createElement(dD,null))});JS.displayName="Pane";function t1(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:t1(r,t):!1}function nT(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function pD(e,t,n,r){return Array.from(e.values()).filter(a=>(a.selected||a.id===r)&&(!a.parentNode||a.parentId||!t1(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>({id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:n.x-(a.positionAbsolute?.x??0),y:n.y-(a.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}))}function yD(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function e1(e,t,n,r,a=[0,0],l){const c=yD(e,e.extent||r);let d=c;const g=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(g&&e.width&&e.height){const v=n.get(g),{x:E,y:S}=Ma(v,a).positionAbsolute;d=v&&Ti(E)&&Ti(S)&&Ti(v.width)&&Ti(v.height)?[[E+e.width*a[0],S+e.height*a[1]],[E+v.width-e.width+e.width*a[0],S+v.height-e.height+e.height*a[1]]]:d}else l?.("005",jr.error005()),d=c;else if(e.extent&&g&&e.extent!=="parent"){const v=n.get(g),{x:E,y:S}=Ma(v,a).positionAbsolute;d=[[e.extent[0][0]+E,e.extent[0][1]+S],[e.extent[1][0]+E,e.extent[1][1]+S]]}let m={x:0,y:0};if(g){const v=n.get(g);m=Ma(v,a).positionAbsolute}const y=d&&d!=="parent"?Gp(t,d):t;return{position:{x:y.x-m.x,y:y.y-m.y},positionAbsolute:y}}function Om({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(a=>({...n.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?r.find(a=>a.id===e):r[0],r]}const iT=(e,t,n,r)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const l=Array.from(a),c=t.getBoundingClientRect(),d={x:c.width*r[0],y:c.height*r[1]};return l.map(g=>{const m=g.getBoundingClientRect();return{id:g.getAttribute("data-handleid"),position:g.getAttribute("data-handlepos"),x:(m.left-c.left-d.x)/n,y:(m.top-c.top-d.y)/n,...jp(g)}})};function Iu(e,t,n){return n===void 0?n:r=>{const a=t().nodeInternals.get(e);a&&n(r,{...a})}}function lp({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:a,unselectNodesAndEdges:l,multiSelectionActive:c,nodeInternals:d,onError:g}=t.getState(),m=d.get(e);if(!m){g?.("012",jr.error012(e));return}t.setState({nodesSelectionActive:!1}),m.selected?(n||m.selected&&c)&&(l({nodes:[m],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):a([e])}function _D(){const e=Ke();return G.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:a,snapToGrid:l}=e.getState(),c=n.touches?n.touches[0].clientX:n.clientX,d=n.touches?n.touches[0].clientY:n.clientY,g={x:(c-r[0])/r[2],y:(d-r[1])/r[2]};return{xSnapped:l?a[0]*Math.round(g.x/a[0]):g.x,ySnapped:l?a[1]*Math.round(g.y/a[1]):g.y,...g}},[])}function Vm(e){return(t,n,r)=>e?.(t,r)}function n1({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:a,isSelectable:l,selectNodesOnDrag:c}){const d=Ke(),[g,m]=G.useState(!1),y=G.useRef([]),v=G.useRef({x:null,y:null}),E=G.useRef(0),S=G.useRef(null),x=G.useRef({x:0,y:0}),k=G.useRef(null),M=G.useRef(!1),B=G.useRef(!1),q=G.useRef(!1),K=_D();return G.useEffect(()=>{if(e?.current){const L=vi(e.current),Z=({x:R,y:I})=>{const{nodeInternals:P,onNodeDrag:U,onSelectionDrag:z,updateNodePositions:A,nodeExtent:O,snapGrid:Y,snapToGrid:D,nodeOrigin:j,onError:rt}=d.getState();v.current={x:R,y:I};let X=!1,N={x:0,y:0,x2:0,y2:0};if(y.current.length>1&&O){const et=Zf(y.current,j);N=Ku(et)}if(y.current=y.current.map(et=>{const st={x:R-et.distance.x,y:I-et.distance.y};D&&(st.x=Y[0]*Math.round(st.x/Y[0]),st.y=Y[1]*Math.round(st.y/Y[1]));const ct=[[O[0][0],O[0][1]],[O[1][0],O[1][1]]];y.current.length>1&&O&&!et.extent&&(ct[0][0]=et.positionAbsolute.x-N.x+O[0][0],ct[1][0]=et.positionAbsolute.x+(et.width??0)-N.x2+O[1][0],ct[0][1]=et.positionAbsolute.y-N.y+O[0][1],ct[1][1]=et.positionAbsolute.y+(et.height??0)-N.y2+O[1][1]);const pt=e1(et,st,P,ct,j,rt);return X=X||et.position.x!==pt.position.x||et.position.y!==pt.position.y,et.position=pt.position,et.positionAbsolute=pt.positionAbsolute,et}),!X)return;A(y.current,!0,!0),m(!0);const $=a?U:Vm(z);if($&&k.current){const[et,st]=Om({nodeId:a,dragItems:y.current,nodeInternals:P});$(k.current,et,st)}},W=()=>{if(!S.current)return;const[R,I]=wS(x.current,S.current);if(R!==0||I!==0){const{transform:P,panBy:U}=d.getState();v.current.x=(v.current.x??0)-R/P[2],v.current.y=(v.current.y??0)-I/P[2],U({x:R,y:I})&&Z(v.current)}E.current=requestAnimationFrame(W)},V=R=>{const{nodeInternals:I,multiSelectionActive:P,nodesDraggable:U,unselectNodesAndEdges:z,onNodeDragStart:A,onSelectionDragStart:O}=d.getState();B.current=!0;const Y=a?A:Vm(O);(!c||!l)&&!P&&a&&(I.get(a)?.selected||z()),a&&l&&c&&lp({id:a,store:d,nodeRef:e});const D=K(R);if(v.current=D,y.current=pD(I,U,D,a),Y&&y.current){const[j,rt]=Om({nodeId:a,dragItems:y.current,nodeInternals:I});Y(R.sourceEvent,j,rt)}};if(t)L.on(".drag",null);else{const R=x2().on("start",I=>{const{domNode:P,nodeDragThreshold:U}=d.getState();U===0&&V(I),q.current=!1;const z=K(I);v.current=z,S.current=P?.getBoundingClientRect()||null,x.current=Ms(I.sourceEvent,S.current)}).on("drag",I=>{const P=K(I),{autoPanOnNodeDrag:U,nodeDragThreshold:z}=d.getState();if(I.sourceEvent.type==="touchmove"&&I.sourceEvent.touches.length>1&&(q.current=!0),!q.current){if(!M.current&&B.current&&U&&(M.current=!0,W()),!B.current){const A=P.xSnapped-(v?.current?.x??0),O=P.ySnapped-(v?.current?.y??0);Math.sqrt(A*A+O*O)>z&&V(I)}(v.current.x!==P.xSnapped||v.current.y!==P.ySnapped)&&y.current&&B.current&&(k.current=I.sourceEvent,x.current=Ms(I.sourceEvent,S.current),Z(P))}}).on("end",I=>{if(!(!B.current||q.current)&&(m(!1),M.current=!1,B.current=!1,cancelAnimationFrame(E.current),y.current)){const{updateNodePositions:P,nodeInternals:U,onNodeDragStop:z,onSelectionDragStop:A}=d.getState(),O=a?z:Vm(A);if(P(y.current,!1,!1),O){const[Y,D]=Om({nodeId:a,dragItems:y.current,nodeInternals:U});O(I.sourceEvent,Y,D)}}}).filter(I=>{const P=I.target;return!I.button&&(!n||!nT(P,`.${n}`,e))&&(!r||nT(P,r,e))});return L.call(R),()=>{L.on(".drag",null)}}}},[e,t,n,r,l,d,a,c,K]),g}function i1(){const e=Ke();return G.useCallback(n=>{const{nodeInternals:r,nodeExtent:a,updateNodePositions:l,getNodes:c,snapToGrid:d,snapGrid:g,onError:m,nodesDraggable:y}=e.getState(),v=c().filter(q=>q.selected&&(q.draggable||y&&typeof q.draggable>"u")),E=d?g[0]:5,S=d?g[1]:5,x=n.isShiftPressed?4:1,k=n.x*E*x,M=n.y*S*x,B=v.map(q=>{if(q.positionAbsolute){const K={x:q.positionAbsolute.x+k,y:q.positionAbsolute.y+M};d&&(K.x=g[0]*Math.round(K.x/g[0]),K.y=g[1]*Math.round(K.y/g[1]));const{positionAbsolute:L,position:Z}=e1(q,K,r,a,void 0,m);q.position=Z,q.positionAbsolute=L}return q});l(B,!0,!1)},[])}const Qo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Cu=e=>{const t=({id:n,type:r,data:a,xPos:l,yPos:c,xPosOrigin:d,yPosOrigin:g,selected:m,onClick:y,onMouseEnter:v,onMouseMove:E,onMouseLeave:S,onContextMenu:x,onDoubleClick:k,style:M,className:B,isDraggable:q,isSelectable:K,isConnectable:L,isFocusable:Z,selectNodesOnDrag:W,sourcePosition:V,targetPosition:R,hidden:I,resizeObserver:P,dragHandle:U,zIndex:z,isParent:A,noDragClassName:O,noPanClassName:Y,initialized:D,disableKeyboardA11y:j,ariaLabel:rt,rfId:X,hasHandleBounds:N})=>{const $=Ke(),et=G.useRef(null),st=G.useRef(null),ct=G.useRef(V),pt=G.useRef(R),yt=G.useRef(r),It=K||q||y||v||E||S,At=i1(),kt=Iu(n,$.getState,v),Pt=Iu(n,$.getState,E),ue=Iu(n,$.getState,S),ce=Iu(n,$.getState,x),Ee=Iu(n,$.getState,k),_e=Lt=>{const{nodeDragThreshold:wt}=$.getState();if(K&&(!W||!q||wt>0)&&lp({id:n,store:$,nodeRef:et}),y){const xe=$.getState().nodeInternals.get(n);xe&&y(Lt,{...xe})}},he=Lt=>{if(!ip(Lt)&&!j)if(RS.includes(Lt.key)&&K){const wt=Lt.key==="Escape";lp({id:n,store:$,unselect:wt,nodeRef:et})}else q&&m&&Object.prototype.hasOwnProperty.call(Qo,Lt.key)&&($.setState({ariaLiveMessage:`Moved selected node ${Lt.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~l}, y: ${~~c}`}),At({x:Qo[Lt.key].x,y:Qo[Lt.key].y,isShiftPressed:Lt.shiftKey}))};G.useEffect(()=>()=>{st.current&&(P?.unobserve(st.current),st.current=null)},[]),G.useEffect(()=>{if(et.current&&!I){const Lt=et.current;(!D||!N||st.current!==Lt)&&(st.current&&P?.unobserve(st.current),P?.observe(Lt),st.current=Lt)}},[I,D,N]),G.useEffect(()=>{const Lt=yt.current!==r,wt=ct.current!==V,xe=pt.current!==R;et.current&&(Lt||wt||xe)&&(Lt&&(yt.current=r),wt&&(ct.current=V),xe&&(pt.current=R),$.getState().updateNodeDimensions([{id:n,nodeElement:et.current,forceUpdate:!0}]))},[n,r,V,R]);const Xe=n1({nodeRef:et,disabled:I||!q,noDragClassName:O,handleSelector:U,nodeId:n,isSelectable:K,selectNodesOnDrag:W});return I?null:lt.createElement("div",{className:mn(["react-flow__node",`react-flow__node-${r}`,{[Y]:q},B,{selected:m,selectable:K,parent:A,dragging:Xe}]),ref:et,style:{zIndex:z,transform:`translate(${d}px,${g}px)`,pointerEvents:It?"all":"none",visibility:D?"visible":"hidden",...M},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:kt,onMouseMove:Pt,onMouseLeave:ue,onContextMenu:ce,onClick:_e,onDoubleClick:Ee,onKeyDown:Z?he:void 0,tabIndex:Z?0:void 0,role:Z?"button":void 0,"aria-describedby":j?void 0:`${$S}-${X}`,"aria-label":rt},lt.createElement(MN,{value:n},lt.createElement(e,{id:n,data:a,type:r,xPos:l,yPos:c,selected:m,isConnectable:L,sourcePosition:V,targetPosition:R,dragging:Xe,dragHandle:U,zIndex:z})))};return t.displayName="NodeWrapper",G.memo(t)};const vD=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Zf(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function ED({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Ke(),{width:a,height:l,x:c,y:d,transformString:g,userSelectionActive:m}=me(vD,sn),y=i1(),v=G.useRef(null);if(G.useEffect(()=>{n||v.current?.focus({preventScroll:!0})},[n]),n1({nodeRef:v}),m||!a||!l)return null;const E=e?x=>{const k=r.getState().getNodes().filter(M=>M.selected);e(x,k)}:void 0,S=x=>{Object.prototype.hasOwnProperty.call(Qo,x.key)&&y({x:Qo[x.key].x,y:Qo[x.key].y,isShiftPressed:x.shiftKey})};return lt.createElement("div",{className:mn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:g}},lt.createElement("div",{ref:v,className:"react-flow__nodesselection-rect",onContextMenu:E,tabIndex:n?void 0:-1,onKeyDown:n?void 0:S,style:{width:a,height:l,top:d,left:c}}))}var TD=G.memo(ED);const wD=e=>e.nodesSelectionActive,r1=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,deleteKeyCode:d,onMove:g,onMoveStart:m,onMoveEnd:y,selectionKeyCode:v,selectionOnDrag:E,selectionMode:S,onSelectionStart:x,onSelectionEnd:k,multiSelectionKeyCode:M,panActivationKeyCode:B,zoomActivationKeyCode:q,elementsSelectable:K,zoomOnScroll:L,zoomOnPinch:Z,panOnScroll:W,panOnScrollSpeed:V,panOnScrollMode:R,zoomOnDoubleClick:I,panOnDrag:P,defaultViewport:U,translateExtent:z,minZoom:A,maxZoom:O,preventScrolling:Y,onSelectionContextMenu:D,noWheelClassName:j,noPanClassName:rt,disableKeyboardA11y:X})=>{const N=me(wD),$=Zu(v),et=Zu(B),st=et||P,ct=et||W,pt=$||E&&st!==!0;return oD({deleteKeyCode:d,multiSelectionKeyCode:M}),lt.createElement(hD,{onMove:g,onMoveStart:m,onMoveEnd:y,onPaneContextMenu:l,elementsSelectable:K,zoomOnScroll:L,zoomOnPinch:Z,panOnScroll:ct,panOnScrollSpeed:V,panOnScrollMode:R,zoomOnDoubleClick:I,panOnDrag:!$&&st,defaultViewport:U,translateExtent:z,minZoom:A,maxZoom:O,zoomActivationKeyCode:q,preventScrolling:Y,noWheelClassName:j,noPanClassName:rt},lt.createElement(JS,{onSelectionStart:x,onSelectionEnd:k,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:st,isSelecting:!!pt,selectionMode:S},e,N&&lt.createElement(TD,{onSelectionContextMenu:D,noPanClassName:rt,disableKeyboardA11y:X})))};r1.displayName="FlowRenderer";var SD=G.memo(r1);function bD(e){return me(G.useCallback(n=>e?OS(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function AD(e){const t={input:Cu(e.input||qS),default:Cu(e.default||op),output:Cu(e.output||jS),group:Cu(e.group||Zp)},n={},r=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,l)=>(a[l]=Cu(e[l]||op),a),n);return{...t,...r}}const RD=({x:e,y:t,width:n,height:r,origin:a})=>!n||!r?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-n*a[0],y:t-r*a[1]},ID=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),s1=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:a,updateNodeDimensions:l,onError:c}=me(ID,sn),d=bD(e.onlyRenderVisibleElements),g=G.useRef(),m=G.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const y=new ResizeObserver(v=>{const E=v.map(S=>({id:S.target.getAttribute("data-id"),nodeElement:S.target,forceUpdate:!0}));l(E)});return g.current=y,y},[]);return G.useEffect(()=>()=>{g?.current?.disconnect()},[]),lt.createElement("div",{className:"react-flow__nodes",style:Wp},d.map(y=>{let v=y.type||"default";e.nodeTypes[v]||(c?.("003",jr.error003(v)),v="default");const E=e.nodeTypes[v]||e.nodeTypes.default,S=!!(y.draggable||t&&typeof y.draggable>"u"),x=!!(y.selectable||a&&typeof y.selectable>"u"),k=!!(y.connectable||n&&typeof y.connectable>"u"),M=!!(y.focusable||r&&typeof y.focusable>"u"),B=e.nodeExtent?Gp(y.positionAbsolute,e.nodeExtent):y.positionAbsolute,q=B?.x??0,K=B?.y??0,L=RD({x:q,y:K,width:y.width??0,height:y.height??0,origin:e.nodeOrigin});return lt.createElement(E,{key:y.id,id:y.id,className:y.className,style:y.style,type:v,data:y.data,sourcePosition:y.sourcePosition||bt.Bottom,targetPosition:y.targetPosition||bt.Top,hidden:y.hidden,xPos:q,yPos:K,xPosOrigin:L.x,yPosOrigin:L.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!y.selected,isDraggable:S,isSelectable:x,isConnectable:k,isFocusable:M,resizeObserver:m,dragHandle:y.dragHandle,zIndex:y[Ce]?.z??0,isParent:!!y[Ce]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!y.width&&!!y.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:y.ariaLabel,hasHandleBounds:!!y[Ce]?.handleBounds})}))};s1.displayName="NodeRenderer";var CD=G.memo(s1);const xD=(e,t,n)=>n===bt.Left?e-t:n===bt.Right?e+t:e,ND=(e,t,n)=>n===bt.Top?e-t:n===bt.Bottom?e+t:e,rT="react-flow__edgeupdater",sT=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:a,onMouseEnter:l,onMouseOut:c,type:d})=>lt.createElement("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:c,className:mn([rT,`${rT}-${d}`]),cx:xD(t,r,e),cy:ND(n,r,e),r,stroke:"transparent",fill:"transparent"}),DD=()=>!0;var Bo=e=>{const t=({id:n,className:r,type:a,data:l,onClick:c,onEdgeDoubleClick:d,selected:g,animated:m,label:y,labelStyle:v,labelShowBg:E,labelBgStyle:S,labelBgPadding:x,labelBgBorderRadius:k,style:M,source:B,target:q,sourceX:K,sourceY:L,targetX:Z,targetY:W,sourcePosition:V,targetPosition:R,elementsSelectable:I,hidden:P,sourceHandleId:U,targetHandleId:z,onContextMenu:A,onMouseEnter:O,onMouseMove:Y,onMouseLeave:D,reconnectRadius:j,onReconnect:rt,onReconnectStart:X,onReconnectEnd:N,markerEnd:$,markerStart:et,rfId:st,ariaLabel:ct,isFocusable:pt,isReconnectable:yt,pathOptions:It,interactionWidth:At,disableKeyboardA11y:kt})=>{const Pt=G.useRef(null),[ue,ce]=G.useState(!1),[Ee,_e]=G.useState(!1),he=Ke(),Xe=G.useMemo(()=>`url('#${sp(et,st)}')`,[et,st]),Lt=G.useMemo(()=>`url('#${sp($,st)}')`,[$,st]);if(P)return null;const wt=ke=>{const{edges:Qe,addSelectedEdges:bn,unselectNodesAndEdges:An,multiSelectionActive:Ze}=he.getState(),an=Qe.find(Rn=>Rn.id===n);an&&(I&&(he.setState({nodesSelectionActive:!1}),an.selected&&Ze?(An({nodes:[],edges:[an]}),Pt.current?.blur()):bn([n])),c&&c(ke,an))},xe=Ru(n,he.getState,d),pn=Ru(n,he.getState,A),Un=Ru(n,he.getState,O),Ui=Ru(n,he.getState,Y),zn=Ru(n,he.getState,D),Sn=(ke,Qe)=>{if(ke.button!==0)return;const{edges:bn,isValidConnection:An}=he.getState(),Ze=Qe?q:B,an=(Qe?z:U)||null,Rn=Qe?"target":"source",dr=An||DD,gr=Qe,bi=bn.find(Hn=>Hn.id===n);_e(!0),X?.(ke,bi,Rn);const Bn=Hn=>{_e(!1),N?.(Hn,bi,Rn)};US({event:ke,handleId:an,nodeId:Ze,onConnect:Hn=>rt?.(bi,Hn),isTarget:gr,getState:he.getState,setState:he.setState,isValidConnection:dr,edgeUpdaterType:Rn,onReconnectEnd:Bn})},Si=ke=>Sn(ke,!0),te=ke=>Sn(ke,!1),Ft=()=>ce(!0),Ve=()=>ce(!1),Te=!I&&!c,zi=ke=>{if(!kt&&RS.includes(ke.key)&&I){const{unselectNodesAndEdges:Qe,addSelectedEdges:bn,edges:An}=he.getState();ke.key==="Escape"?(Pt.current?.blur(),Qe({edges:[An.find(an=>an.id===n)]})):bn([n])}};return lt.createElement("g",{className:mn(["react-flow__edge",`react-flow__edge-${a}`,r,{selected:g,animated:m,inactive:Te,updating:ue}]),onClick:wt,onDoubleClick:xe,onContextMenu:pn,onMouseEnter:Un,onMouseMove:Ui,onMouseLeave:zn,onKeyDown:pt?zi:void 0,tabIndex:pt?0:void 0,role:pt?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":ct===null?void 0:ct||`Edge from ${B} to ${q}`,"aria-describedby":pt?`${YS}-${st}`:void 0,ref:Pt},!Ee&&lt.createElement(e,{id:n,source:B,target:q,selected:g,animated:m,label:y,labelStyle:v,labelShowBg:E,labelBgStyle:S,labelBgPadding:x,labelBgBorderRadius:k,data:l,style:M,sourceX:K,sourceY:L,targetX:Z,targetY:W,sourcePosition:V,targetPosition:R,sourceHandleId:U,targetHandleId:z,markerStart:Xe,markerEnd:Lt,pathOptions:It,interactionWidth:At}),yt&&lt.createElement(lt.Fragment,null,(yt==="source"||yt===!0)&&lt.createElement(sT,{position:V,centerX:K,centerY:L,radius:j,onMouseDown:Si,onMouseEnter:Ft,onMouseOut:Ve,type:"source"}),(yt==="target"||yt===!0)&&lt.createElement(sT,{position:R,centerX:Z,centerY:W,radius:j,onMouseDown:te,onMouseEnter:Ft,onMouseOut:Ve,type:"target"})))};return t.displayName="EdgeWrapper",G.memo(t)};function MD(e){const t={default:Bo(e.default||bf),straight:Bo(e.bezier||Kp),step:Bo(e.step||Yp),smoothstep:Bo(e.step||Qf),simplebezier:Bo(e.simplebezier||$p)},n={},r=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,l)=>(a[l]=Bo(e[l]||bf),a),n);return{...t,...r}}function aT(e,t,n=null){const r=(n?.x||0)+t.x,a=(n?.y||0)+t.y,l=n?.width||t.width,c=n?.height||t.height;switch(e){case bt.Top:return{x:r+l/2,y:a};case bt.Right:return{x:r+l,y:a+c/2};case bt.Bottom:return{x:r+l/2,y:a+c};case bt.Left:return{x:r,y:a+c/2}}}function oT(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const OD=(e,t,n,r,a,l)=>{const c=aT(n,e,t),d=aT(l,r,a);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y}};function VD({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:a,targetHeight:l,width:c,height:d,transform:g}){const m={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+a),y2:Math.max(e.y+r,t.y+l)};m.x===m.x2&&(m.x2+=1),m.y===m.y2&&(m.y2+=1);const y=Ku({x:(0-g[0])/g[2],y:(0-g[1])/g[2],width:c/g[2],height:d/g[2]}),v=Math.max(0,Math.min(y.x2,m.x2)-Math.max(y.x,m.x)),E=Math.max(0,Math.min(y.y2,m.y2)-Math.max(y.y,m.y));return Math.ceil(v*E)>0}function lT(e){const t=e?.[Ce]?.handleBounds||null,n=t&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}const kD=[{level:0,isMaxLevel:!0,edges:[]}];function PD(e,t,n=!1){let r=-1;const a=e.reduce((c,d)=>{const g=Ti(d.zIndex);let m=g?d.zIndex:0;if(n){const y=t.get(d.target),v=t.get(d.source),E=d.selected||y?.selected||v?.selected,S=Math.max(v?.[Ce]?.z||0,y?.[Ce]?.z||0,1e3);m=(g?d.zIndex:0)+(E?S:0)}return c[m]?c[m].push(d):c[m]=[d],r=m>r?m:r,c},{}),l=Object.entries(a).map(([c,d])=>{const g=+c;return{edges:d,level:g,isMaxLevel:g===r}});return l.length===0?kD:l}function LD(e,t,n){const r=me(G.useCallback(a=>e?a.edges.filter(l=>{const c=t.get(l.source),d=t.get(l.target);return c?.width&&c?.height&&d?.width&&d?.height&&VD({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:d.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:d.width,targetHeight:d.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return PD(r,t,n)}const UD=({color:e="none",strokeWidth:t=1})=>lt.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),zD=({color:e="none",strokeWidth:t=1})=>lt.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),uT={[Qu.Arrow]:UD,[Qu.ArrowClosed]:zD};function BD(e){const t=Ke();return G.useMemo(()=>Object.prototype.hasOwnProperty.call(uT,e)?uT[e]:(t.getState().onError?.("009",jr.error009(e)),null),[e])}const HD=({id:e,type:t,color:n,width:r=12.5,height:a=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const g=BD(t);return g?lt.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:d,refX:"0",refY:"0"},lt.createElement(g,{color:n,strokeWidth:c})):null},qD=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((a,l)=>([l.markerStart,l.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const d=sp(c,t);r.includes(d)||(a.push({id:d,color:c.color||e,...c}),r.push(d))}}),a),[]).sort((a,l)=>a.id.localeCompare(l.id))},a1=({defaultColor:e,rfId:t})=>{const n=me(G.useCallback(qD({defaultColor:e,rfId:t}),[e,t]),(r,a)=>!(r.length!==a.length||r.some((l,c)=>l.id!==a[c].id)));return lt.createElement("defs",null,n.map(r=>lt.createElement(HD,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};a1.displayName="MarkerDefinitions";var FD=G.memo(a1);const jD=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),o1=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:a,noPanClassName:l,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:g,onEdgeMouseLeave:m,onEdgeClick:y,onEdgeDoubleClick:v,onReconnect:E,onReconnectStart:S,onReconnectEnd:x,reconnectRadius:k,children:M,disableKeyboardA11y:B})=>{const{edgesFocusable:q,edgesUpdatable:K,elementsSelectable:L,width:Z,height:W,connectionMode:V,nodeInternals:R,onError:I}=me(jD,sn),P=LD(t,R,n);return Z?lt.createElement(lt.Fragment,null,P.map(({level:U,edges:z,isMaxLevel:A})=>lt.createElement("svg",{key:U,style:{zIndex:U},width:Z,height:W,className:"react-flow__edges react-flow__container"},A&&lt.createElement(FD,{defaultColor:e,rfId:r}),lt.createElement("g",null,z.map(O=>{const[Y,D,j]=lT(R.get(O.source)),[rt,X,N]=lT(R.get(O.target));if(!j||!N)return null;let $=O.type||"default";a[$]||(I?.("011",jr.error011($)),$="default");const et=a[$]||a.default,st=V===zs.Strict?X.target:(X.target??[]).concat(X.source??[]),ct=oT(D.source,O.sourceHandle),pt=oT(st,O.targetHandle),yt=ct?.position||bt.Bottom,It=pt?.position||bt.Top,At=!!(O.focusable||q&&typeof O.focusable>"u"),kt=O.reconnectable||O.updatable,Pt=typeof E<"u"&&(kt||K&&typeof kt>"u");if(!ct||!pt)return I?.("008",jr.error008(ct,O)),null;const{sourceX:ue,sourceY:ce,targetX:Ee,targetY:_e}=OD(Y,ct,yt,rt,pt,It);return lt.createElement(et,{key:O.id,id:O.id,className:mn([O.className,l]),type:$,data:O.data,selected:!!O.selected,animated:!!O.animated,hidden:!!O.hidden,label:O.label,labelStyle:O.labelStyle,labelShowBg:O.labelShowBg,labelBgStyle:O.labelBgStyle,labelBgPadding:O.labelBgPadding,labelBgBorderRadius:O.labelBgBorderRadius,style:O.style,source:O.source,target:O.target,sourceHandleId:O.sourceHandle,targetHandleId:O.targetHandle,markerEnd:O.markerEnd,markerStart:O.markerStart,sourceX:ue,sourceY:ce,targetX:Ee,targetY:_e,sourcePosition:yt,targetPosition:It,elementsSelectable:L,onContextMenu:c,onMouseEnter:d,onMouseMove:g,onMouseLeave:m,onClick:y,onEdgeDoubleClick:v,onReconnect:E,onReconnectStart:S,onReconnectEnd:x,reconnectRadius:k,rfId:r,ariaLabel:O.ariaLabel,isFocusable:At,isReconnectable:Pt,pathOptions:"pathOptions"in O?O.pathOptions:void 0,interactionWidth:O.interactionWidth,disableKeyboardA11y:B})})))),M):null};o1.displayName="EdgeRenderer";var GD=G.memo(o1);const $D=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function YD({children:e}){const t=me($D);return lt.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function KD(e){const t=fc(),n=G.useRef(!1);G.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const XD={[bt.Left]:bt.Right,[bt.Right]:bt.Left,[bt.Top]:bt.Bottom,[bt.Bottom]:bt.Top},l1=({nodeId:e,handleType:t,style:n,type:r=Rs.Bezier,CustomComponent:a,connectionStatus:l})=>{const{fromNode:c,handleId:d,toX:g,toY:m,connectionMode:y}=me(G.useCallback(W=>({fromNode:W.nodeInternals.get(e),handleId:W.connectionHandleId,toX:(W.connectionPosition.x-W.transform[0])/W.transform[2],toY:(W.connectionPosition.y-W.transform[1])/W.transform[2],connectionMode:W.connectionMode}),[e]),sn),v=c?.[Ce]?.handleBounds;let E=v?.[t];if(y===zs.Loose&&(E=E||v?.[t==="source"?"target":"source"]),!c||!E)return null;const S=d?E.find(W=>W.id===d):E[0],x=S?S.x+S.width/2:(c.width??0)/2,k=S?S.y+S.height/2:c.height??0,M=(c.positionAbsolute?.x??0)+x,B=(c.positionAbsolute?.y??0)+k,q=S?.position,K=q?XD[q]:null;if(!q||!K)return null;if(a)return lt.createElement(a,{connectionLineType:r,connectionLineStyle:n,fromNode:c,fromHandle:S,fromX:M,fromY:B,toX:g,toY:m,fromPosition:q,toPosition:K,connectionStatus:l});let L="";const Z={sourceX:M,sourceY:B,sourcePosition:q,targetX:g,targetY:m,targetPosition:K};return r===Rs.Bezier?[L]=DS(Z):r===Rs.Step?[L]=rp({...Z,borderRadius:0}):r===Rs.SmoothStep?[L]=rp(Z):r===Rs.SimpleBezier?[L]=NS(Z):L=`M${M},${B} ${g},${m}`,lt.createElement("path",{d:L,fill:"none",className:"react-flow__connection-path",style:n})};l1.displayName="ConnectionLine";const QD=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function ZD({containerStyle:e,style:t,type:n,component:r}){const{nodeId:a,handleType:l,nodesConnectable:c,width:d,height:g,connectionStatus:m}=me(QD,sn);return!(a&&l&&d&&c)?null:lt.createElement("svg",{style:e,width:d,height:g,className:"react-flow__edges react-flow__connectionline react-flow__container"},lt.createElement("g",{className:mn(["react-flow__connection",m])},lt.createElement(l1,{nodeId:a,handleType:l,style:t,type:n,CustomComponent:r,connectionStatus:m})))}function cT(e,t){return G.useRef(null),Ke(),G.useMemo(()=>t(e),[e])}const u1=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:a,onInit:l,onNodeClick:c,onEdgeClick:d,onNodeDoubleClick:g,onEdgeDoubleClick:m,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:E,onNodeContextMenu:S,onSelectionContextMenu:x,onSelectionStart:k,onSelectionEnd:M,connectionLineType:B,connectionLineStyle:q,connectionLineComponent:K,connectionLineContainerStyle:L,selectionKeyCode:Z,selectionOnDrag:W,selectionMode:V,multiSelectionKeyCode:R,panActivationKeyCode:I,zoomActivationKeyCode:P,deleteKeyCode:U,onlyRenderVisibleElements:z,elementsSelectable:A,selectNodesOnDrag:O,defaultViewport:Y,translateExtent:D,minZoom:j,maxZoom:rt,preventScrolling:X,defaultMarkerColor:N,zoomOnScroll:$,zoomOnPinch:et,panOnScroll:st,panOnScrollSpeed:ct,panOnScrollMode:pt,zoomOnDoubleClick:yt,panOnDrag:It,onPaneClick:At,onPaneMouseEnter:kt,onPaneMouseMove:Pt,onPaneMouseLeave:ue,onPaneScroll:ce,onPaneContextMenu:Ee,onEdgeContextMenu:_e,onEdgeMouseEnter:he,onEdgeMouseMove:Xe,onEdgeMouseLeave:Lt,onReconnect:wt,onReconnectStart:xe,onReconnectEnd:pn,reconnectRadius:Un,noDragClassName:Ui,noWheelClassName:zn,noPanClassName:Sn,elevateEdgesOnSelect:Si,disableKeyboardA11y:te,nodeOrigin:Ft,nodeExtent:Ve,rfId:Te})=>{const zi=cT(e,AD),ke=cT(t,MD);return KD(l),lt.createElement(SD,{onPaneClick:At,onPaneMouseEnter:kt,onPaneMouseMove:Pt,onPaneMouseLeave:ue,onPaneContextMenu:Ee,onPaneScroll:ce,deleteKeyCode:U,selectionKeyCode:Z,selectionOnDrag:W,selectionMode:V,onSelectionStart:k,onSelectionEnd:M,multiSelectionKeyCode:R,panActivationKeyCode:I,zoomActivationKeyCode:P,elementsSelectable:A,onMove:n,onMoveStart:r,onMoveEnd:a,zoomOnScroll:$,zoomOnPinch:et,zoomOnDoubleClick:yt,panOnScroll:st,panOnScrollSpeed:ct,panOnScrollMode:pt,panOnDrag:It,defaultViewport:Y,translateExtent:D,minZoom:j,maxZoom:rt,onSelectionContextMenu:x,preventScrolling:X,noDragClassName:Ui,noWheelClassName:zn,noPanClassName:Sn,disableKeyboardA11y:te},lt.createElement(YD,null,lt.createElement(GD,{edgeTypes:ke,onEdgeClick:d,onEdgeDoubleClick:m,onlyRenderVisibleElements:z,onEdgeContextMenu:_e,onEdgeMouseEnter:he,onEdgeMouseMove:Xe,onEdgeMouseLeave:Lt,onReconnect:wt,onReconnectStart:xe,onReconnectEnd:pn,reconnectRadius:Un,defaultMarkerColor:N,noPanClassName:Sn,elevateEdgesOnSelect:!!Si,disableKeyboardA11y:te,rfId:Te},lt.createElement(ZD,{style:q,type:B,component:K,containerStyle:L})),lt.createElement("div",{className:"react-flow__edgelabel-renderer"}),lt.createElement(CD,{nodeTypes:zi,onNodeClick:c,onNodeDoubleClick:g,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:E,onNodeContextMenu:S,selectNodesOnDrag:O,onlyRenderVisibleElements:z,noPanClassName:Sn,noDragClassName:Ui,disableKeyboardA11y:te,nodeOrigin:Ft,nodeExtent:Ve,rfId:Te})))};u1.displayName="GraphView";var WD=G.memo(u1);const up=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ws={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:up,nodeExtent:up,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:zs.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:RN,isValidConnection:void 0},JD=()=>HI((e,t)=>({...ws,setNodes:n=>{const{nodeInternals:r,nodeOrigin:a,elevateNodesOnSelect:l}=t();e({nodeInternals:Dm(n,r,a,l)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(a=>({...r,...a}))})},setDefaultNodesAndEdges:(n,r)=>{const a=typeof n<"u",l=typeof r<"u",c=a?Dm(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:c,edges:l?r:[],hasDefaultNodes:a,hasDefaultEdges:l})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:a,fitViewOnInit:l,fitViewOnInitDone:c,fitViewOnInitOptions:d,domNode:g,nodeOrigin:m}=t(),y=g?.querySelector(".react-flow__viewport");if(!y)return;const v=window.getComputedStyle(y),{m22:E}=new window.DOMMatrixReadOnly(v.transform),S=n.reduce((k,M)=>{const B=a.get(M.id);if(B?.hidden)a.set(B.id,{...B,[Ce]:{...B[Ce],handleBounds:void 0}});else if(B){const q=jp(M.nodeElement);!!(q.width&&q.height&&(B.width!==q.width||B.height!==q.height||M.forceUpdate))&&(a.set(B.id,{...B,[Ce]:{...B[Ce],handleBounds:{source:iT(".source",M.nodeElement,E,m),target:iT(".target",M.nodeElement,E,m)}},...q}),k.push({id:B.id,type:"dimensions",dimensions:q}))}return k},[]);XS(a,m);const x=c||l&&!c&&QS(t,{initial:!0,...d});e({nodeInternals:new Map(a),fitViewOnInitDone:x}),S?.length>0&&r?.(S)},updateNodePositions:(n,r=!0,a=!1)=>{const{triggerNodeChanges:l}=t(),c=n.map(d=>{const g={id:d.id,type:"position",dragging:a};return r&&(g.positionAbsolute=d.positionAbsolute,g.position=d.position),g});l(c)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:a,hasDefaultNodes:l,nodeOrigin:c,getNodes:d,elevateNodesOnSelect:g}=t();if(n?.length){if(l){const m=WS(n,d()),y=Dm(m,a,c,g);e({nodeInternals:y})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:a,getNodes:l}=t();let c,d=null;r?c=n.map(g=>As(g,!0)):(c=$o(l(),n),d=$o(a,[])),Yh({changedNodes:c,changedEdges:d,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:a,getNodes:l}=t();let c,d=null;r?c=n.map(g=>As(g,!0)):(c=$o(a,n),d=$o(l(),[])),Yh({changedNodes:d,changedEdges:c,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:a,getNodes:l}=t(),c=n||l(),d=r||a,g=c.map(y=>(y.selected=!1,As(y.id,!1))),m=d.map(y=>As(y.id,!1));Yh({changedNodes:g,changedEdges:m,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:a}=t();r?.scaleExtent([n,a]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:a}=t();r?.scaleExtent([a,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),l=r().filter(d=>d.selected).map(d=>As(d.id,!1)),c=n.filter(d=>d.selected).map(d=>As(d.id,!1));Yh({changedNodes:l,changedEdges:c,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(a=>{a.positionAbsolute=Gp(a.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:a,height:l,d3Zoom:c,d3Selection:d,translateExtent:g}=t();if(!c||!d||!n.x&&!n.y)return!1;const m=Hr.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),y=[[0,0],[a,l]],v=c?.constrain()(m,y,g);return c.transform(d,v),r[0]!==v.x||r[1]!==v.y||r[2]!==v.k},cancelConnection:()=>e({connectionNodeId:ws.connectionNodeId,connectionHandleId:ws.connectionHandleId,connectionHandleType:ws.connectionHandleType,connectionStatus:ws.connectionStatus,connectionStartHandle:ws.connectionStartHandle,connectionEndHandle:ws.connectionEndHandle}),reset:()=>e({...ws})}),Object.is),c1=({children:e})=>{const t=G.useRef(null);return t.current||(t.current=JD()),lt.createElement(vN,{value:t.current},e)};c1.displayName="ReactFlowProvider";const h1=({children:e})=>G.useContext(Xf)?lt.createElement(lt.Fragment,null,e):lt.createElement(c1,null,e);h1.displayName="ReactFlowWrapper";const tM={input:qS,default:op,output:jS,group:Zp},eM={default:bf,straight:Kp,step:Yp,smoothstep:Qf,simplebezier:$p},nM=[0,0],iM=[15,15],rM={x:0,y:0,zoom:1},sM={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},f1=G.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:a,nodeTypes:l=tM,edgeTypes:c=eM,onNodeClick:d,onEdgeClick:g,onInit:m,onMove:y,onMoveStart:v,onMoveEnd:E,onConnect:S,onConnectStart:x,onConnectEnd:k,onClickConnectStart:M,onClickConnectEnd:B,onNodeMouseEnter:q,onNodeMouseMove:K,onNodeMouseLeave:L,onNodeContextMenu:Z,onNodeDoubleClick:W,onNodeDragStart:V,onNodeDrag:R,onNodeDragStop:I,onNodesDelete:P,onEdgesDelete:U,onSelectionChange:z,onSelectionDragStart:A,onSelectionDrag:O,onSelectionDragStop:Y,onSelectionContextMenu:D,onSelectionStart:j,onSelectionEnd:rt,connectionMode:X=zs.Strict,connectionLineType:N=Rs.Bezier,connectionLineStyle:$,connectionLineComponent:et,connectionLineContainerStyle:st,deleteKeyCode:ct="Backspace",selectionKeyCode:pt="Shift",selectionOnDrag:yt=!1,selectionMode:It=Xu.Full,panActivationKeyCode:At="Space",multiSelectionKeyCode:kt=Sf()?"Meta":"Control",zoomActivationKeyCode:Pt=Sf()?"Meta":"Control",snapToGrid:ue=!1,snapGrid:ce=iM,onlyRenderVisibleElements:Ee=!1,selectNodesOnDrag:_e=!0,nodesDraggable:he,nodesConnectable:Xe,nodesFocusable:Lt,nodeOrigin:wt=nM,edgesFocusable:xe,edgesUpdatable:pn,elementsSelectable:Un,defaultViewport:Ui=rM,minZoom:zn=.5,maxZoom:Sn=2,translateExtent:Si=up,preventScrolling:te=!0,nodeExtent:Ft,defaultMarkerColor:Ve="#b1b1b7",zoomOnScroll:Te=!0,zoomOnPinch:zi=!0,panOnScroll:ke=!1,panOnScrollSpeed:Qe=.5,panOnScrollMode:bn=xa.Free,zoomOnDoubleClick:An=!0,panOnDrag:Ze=!0,onPaneClick:an,onPaneMouseEnter:Rn,onPaneMouseMove:dr,onPaneMouseLeave:gr,onPaneScroll:bi,onPaneContextMenu:Bn,children:ni,onEdgeContextMenu:Hn,onEdgeDoubleClick:ii,onEdgeMouseEnter:Qs,onEdgeMouseMove:Bi,onEdgeMouseLeave:Qr,onEdgeUpdate:Hi,onEdgeUpdateStart:$a,onEdgeUpdateEnd:de,onReconnect:Ne,onReconnectStart:Ae,onReconnectEnd:Dn,reconnectRadius:Zs=10,edgeUpdaterRadius:Sl=10,onNodesChange:qi,onEdgesChange:Ya,noDragClassName:mr="nodrag",noWheelClassName:Fi="nowheel",noPanClassName:ri="nopan",fitView:si=!1,fitViewOptions:ai,connectOnClick:on=!0,attributionPosition:we,proOptions:Ws,defaultEdgeOptions:Zr,elevateNodesOnSelect:qn=!0,elevateEdgesOnSelect:Ai=!1,disableKeyboardA11y:Js=!1,autoPanOnConnect:Ka=!0,autoPanOnNodeDrag:pr=!0,connectionRadius:Xa=20,isValidConnection:ji,onError:oi,style:He,id:Gi,nodeDragThreshold:Qa,...Ri},Wr)=>{const $i=Gi||"1";return lt.createElement("div",{...Ri,style:{...He,...sM},ref:Wr,className:mn(["react-flow",a]),"data-testid":"rf__wrapper",id:Gi},lt.createElement(h1,null,lt.createElement(WD,{onInit:m,onMove:y,onMoveStart:v,onMoveEnd:E,onNodeClick:d,onEdgeClick:g,onNodeMouseEnter:q,onNodeMouseMove:K,onNodeMouseLeave:L,onNodeContextMenu:Z,onNodeDoubleClick:W,nodeTypes:l,edgeTypes:c,connectionLineType:N,connectionLineStyle:$,connectionLineComponent:et,connectionLineContainerStyle:st,selectionKeyCode:pt,selectionOnDrag:yt,selectionMode:It,deleteKeyCode:ct,multiSelectionKeyCode:kt,panActivationKeyCode:At,zoomActivationKeyCode:Pt,onlyRenderVisibleElements:Ee,selectNodesOnDrag:_e,defaultViewport:Ui,translateExtent:Si,minZoom:zn,maxZoom:Sn,preventScrolling:te,zoomOnScroll:Te,zoomOnPinch:zi,zoomOnDoubleClick:An,panOnScroll:ke,panOnScrollSpeed:Qe,panOnScrollMode:bn,panOnDrag:Ze,onPaneClick:an,onPaneMouseEnter:Rn,onPaneMouseMove:dr,onPaneMouseLeave:gr,onPaneScroll:bi,onPaneContextMenu:Bn,onSelectionContextMenu:D,onSelectionStart:j,onSelectionEnd:rt,onEdgeContextMenu:Hn,onEdgeDoubleClick:ii,onEdgeMouseEnter:Qs,onEdgeMouseMove:Bi,onEdgeMouseLeave:Qr,onReconnect:Ne??Hi,onReconnectStart:Ae??$a,onReconnectEnd:Dn??de,reconnectRadius:Zs??Sl,defaultMarkerColor:Ve,noDragClassName:mr,noWheelClassName:Fi,noPanClassName:ri,elevateEdgesOnSelect:Ai,rfId:$i,disableKeyboardA11y:Js,nodeOrigin:wt,nodeExtent:Ft}),lt.createElement(XN,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:S,onConnectStart:x,onConnectEnd:k,onClickConnectStart:M,onClickConnectEnd:B,nodesDraggable:he,nodesConnectable:Xe,nodesFocusable:Lt,edgesFocusable:xe,edgesUpdatable:pn,elementsSelectable:Un,elevateNodesOnSelect:qn,minZoom:zn,maxZoom:Sn,nodeExtent:Ft,onNodesChange:qi,onEdgesChange:Ya,snapToGrid:ue,snapGrid:ce,connectionMode:X,translateExtent:Si,connectOnClick:on,defaultEdgeOptions:Zr,fitView:si,fitViewOptions:ai,onNodesDelete:P,onEdgesDelete:U,onNodeDragStart:V,onNodeDrag:R,onNodeDragStop:I,onSelectionDrag:O,onSelectionDragStart:A,onSelectionDragStop:Y,noPanClassName:ri,nodeOrigin:wt,rfId:$i,autoPanOnConnect:Ka,autoPanOnNodeDrag:pr,onError:oi,connectionRadius:Xa,isValidConnection:ji,nodeDragThreshold:Qa}),lt.createElement(YN,{onSelectionChange:z}),ni,lt.createElement(TN,{proOptions:Ws,position:we}),lt.createElement(tD,{rfId:$i,disableKeyboardA11y:Js})))});f1.displayName="ReactFlow";function d1(e){return t=>{const[n,r]=G.useState(t),a=G.useCallback(l=>r(c=>e(l,c)),[]);return[n,r,a]}}const aM=d1(WS),oM=d1(gD),g1=({id:e,x:t,y:n,width:r,height:a,style:l,color:c,strokeColor:d,strokeWidth:g,className:m,borderRadius:y,shapeRendering:v,onClick:E,selected:S})=>{const{background:x,backgroundColor:k}=l||{},M=c||x||k;return lt.createElement("rect",{className:mn(["react-flow__minimap-node",{selected:S},m]),x:t,y:n,rx:y,ry:y,width:r,height:a,fill:M,stroke:d,strokeWidth:g,shapeRendering:v,onClick:E?B=>E(B,e):void 0})};g1.displayName="MiniMapNode";var lM=G.memo(g1);const uM=e=>e.nodeOrigin,cM=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),km=e=>e instanceof Function?e:()=>e;function hM({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:a=2,nodeComponent:l=lM,onClick:c}){const d=me(cM,sn),g=me(uM),m=km(t),y=km(e),v=km(n),E=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return lt.createElement(lt.Fragment,null,d.map(S=>{const{x,y:k}=Ma(S,g).positionAbsolute;return lt.createElement(l,{key:S.id,x,y:k,width:S.width,height:S.height,style:S.style,selected:S.selected,className:v(S),color:m(S),borderRadius:r,strokeColor:y(S),strokeWidth:a,shapeRendering:E,onClick:c,id:S.id})}))}var fM=G.memo(hM);const dM=200,gM=150,mM=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?bN(Zf(t,e.nodeOrigin),n):n,rfId:e.rfId}},pM="react-flow__minimap-desc";function m1({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:a="",nodeBorderRadius:l=5,nodeStrokeWidth:c=2,nodeComponent:d,maskColor:g="rgb(240, 240, 240, 0.6)",maskStrokeColor:m="none",maskStrokeWidth:y=1,position:v="bottom-right",onClick:E,onNodeClick:S,pannable:x=!1,zoomable:k=!1,ariaLabel:M="React Flow mini map",inversePan:B=!1,zoomStep:q=10,offsetScale:K=5}){const L=Ke(),Z=G.useRef(null),{boundingRect:W,viewBB:V,rfId:R}=me(mM,sn),I=e?.width??dM,P=e?.height??gM,U=W.width/I,z=W.height/P,A=Math.max(U,z),O=A*I,Y=A*P,D=K*A,j=W.x-(O-W.width)/2-D,rt=W.y-(Y-W.height)/2-D,X=O+D*2,N=Y+D*2,$=`${pM}-${R}`,et=G.useRef(0);et.current=A,G.useEffect(()=>{if(Z.current){const pt=vi(Z.current),yt=kt=>{const{transform:Pt,d3Selection:ue,d3Zoom:ce}=L.getState();if(kt.sourceEvent.type!=="wheel"||!ue||!ce)return;const Ee=-kt.sourceEvent.deltaY*(kt.sourceEvent.deltaMode===1?.05:kt.sourceEvent.deltaMode?1:.002)*q,_e=Pt[2]*Math.pow(2,Ee);ce.scaleTo(ue,_e)},It=kt=>{const{transform:Pt,d3Selection:ue,d3Zoom:ce,translateExtent:Ee,width:_e,height:he}=L.getState();if(kt.sourceEvent.type!=="mousemove"||!ue||!ce)return;const Xe=et.current*Math.max(1,Pt[2])*(B?-1:1),Lt={x:Pt[0]-kt.sourceEvent.movementX*Xe,y:Pt[1]-kt.sourceEvent.movementY*Xe},wt=[[0,0],[_e,he]],xe=Hr.translate(Lt.x,Lt.y).scale(Pt[2]),pn=ce.constrain()(xe,wt,Ee);ce.transform(ue,pn)},At=ES().on("zoom",x?It:null).on("zoom.wheel",k?yt:null);return pt.call(At),()=>{pt.on("zoom",null)}}},[x,k,B,q]);const st=E?pt=>{const yt=Di(pt);E(pt,{x:yt[0],y:yt[1]})}:void 0,ct=S?(pt,yt)=>{const It=L.getState().nodeInternals.get(yt);S(pt,It)}:void 0;return lt.createElement(Fp,{position:v,style:e,className:mn(["react-flow__minimap",t]),"data-testid":"rf__minimap"},lt.createElement("svg",{width:I,height:P,viewBox:`${j} ${rt} ${X} ${N}`,role:"img","aria-labelledby":$,ref:Z,onClick:st},M&&lt.createElement("title",{id:$},M),lt.createElement(fM,{onClick:ct,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:l,nodeClassName:a,nodeStrokeWidth:c,nodeComponent:d}),lt.createElement("path",{className:"react-flow__minimap-mask",d:`M${j-D},${rt-D}h${X+D*2}v${N+D*2}h${-X-D*2}z
        M${V.x},${V.y}h${V.width}v${V.height}h${-V.width}z`,fill:g,fillRule:"evenodd",stroke:m,strokeWidth:y,pointerEvents:"none"})))}m1.displayName="MiniMap";var yM=G.memo(m1);function _M(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},lt.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function vM(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},lt.createElement("path",{d:"M0 0h32v4.2H0z"}))}function EM(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},lt.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function TM(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},lt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function wM(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},lt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Du=({children:e,className:t,...n})=>lt.createElement("button",{type:"button",className:mn(["react-flow__controls-button",t]),...n},e);Du.displayName="ControlButton";const SM=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),p1=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:a,onZoomIn:l,onZoomOut:c,onFitView:d,onInteractiveChange:g,className:m,children:y,position:v="bottom-left"})=>{const E=Ke(),[S,x]=G.useState(!1),{isInteractive:k,minZoomReached:M,maxZoomReached:B}=me(SM,sn),{zoomIn:q,zoomOut:K,fitView:L}=fc();if(G.useEffect(()=>{x(!0)},[]),!S)return null;const Z=()=>{q(),l?.()},W=()=>{K(),c?.()},V=()=>{L(a),d?.()},R=()=>{E.setState({nodesDraggable:!k,nodesConnectable:!k,elementsSelectable:!k}),g?.(!k)};return lt.createElement(Fp,{className:mn(["react-flow__controls",m]),position:v,style:e,"data-testid":"rf__controls"},t&&lt.createElement(lt.Fragment,null,lt.createElement(Du,{onClick:Z,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:B},lt.createElement(_M,null)),lt.createElement(Du,{onClick:W,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:M},lt.createElement(vM,null))),n&&lt.createElement(Du,{className:"react-flow__controls-fitview",onClick:V,title:"fit view","aria-label":"fit view"},lt.createElement(EM,null)),r&&lt.createElement(Du,{className:"react-flow__controls-interactive",onClick:R,title:"toggle interactivity","aria-label":"toggle interactivity"},k?lt.createElement(wM,null):lt.createElement(TM,null)),y)};p1.displayName="Controls";var bM=G.memo(p1),wi;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(wi||(wi={}));function AM({color:e,dimensions:t,lineWidth:n}){return lt.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function RM({color:e,radius:t}){return lt.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const IM={[wi.Dots]:"#91919a",[wi.Lines]:"#eee",[wi.Cross]:"#e2e2e2"},CM={[wi.Dots]:1,[wi.Lines]:1,[wi.Cross]:6},xM=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function y1({id:e,variant:t=wi.Dots,gap:n=20,size:r,lineWidth:a=1,offset:l=2,color:c,style:d,className:g}){const m=G.useRef(null),{transform:y,patternId:v}=me(xM,sn),E=c||IM[t],S=r||CM[t],x=t===wi.Dots,k=t===wi.Cross,M=Array.isArray(n)?n:[n,n],B=[M[0]*y[2]||1,M[1]*y[2]||1],q=S*y[2],K=k?[q,q]:B,L=x?[q/l,q/l]:[K[0]/l,K[1]/l];return lt.createElement("svg",{className:mn(["react-flow__background",g]),style:{...d,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:m,"data-testid":"rf__background"},lt.createElement("pattern",{id:v+e,x:y[0]%B[0],y:y[1]%B[1],width:B[0],height:B[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${L[0]},-${L[1]})`},x?lt.createElement(RM,{color:E,radius:q/l}):lt.createElement(AM,{dimensions:K,color:E,lineWidth:a})),lt.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${v+e})`}))}y1.displayName="Background";var NM=G.memo(y1);const DM=()=>{};var hT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let a=e.charCodeAt(r);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=a&63|128):(a&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=a&63|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=a&63|128)}return t},MM=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const a=e[n++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=e[n++];t[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=e[n++],c=e[n++],d=e[n++],g=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const l=e[n++],c=e[n++];t[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return t.join("")},v1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<e.length;a+=3){const l=e[a],c=a+1<e.length,d=c?e[a+1]:0,g=a+2<e.length,m=g?e[a+2]:0,y=l>>2,v=(l&3)<<4|d>>4;let E=(d&15)<<2|m>>6,S=m&63;g||(S=64,c||(E=64)),r.push(n[y],n[v],n[E],n[S])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(_1(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):MM(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<e.length;){const l=n[e.charAt(a++)],d=a<e.length?n[e.charAt(a)]:0;++a;const m=a<e.length?n[e.charAt(a)]:64;++a;const v=a<e.length?n[e.charAt(a)]:64;if(++a,l==null||d==null||m==null||v==null)throw new OM;const E=l<<2|d>>4;if(r.push(E),m!==64){const S=d<<4&240|m>>2;if(r.push(S),v!==64){const x=m<<6&192|v;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class OM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VM=function(e){const t=_1(e);return v1.encodeByteArray(t,!0)},Af=function(e){return VM(e).replace(/\./g,"")},E1=function(e){try{return v1.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=()=>kM().__FIREBASE_DEFAULTS__,LM=()=>{if(typeof process>"u"||typeof hT>"u")return;const e=hT.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},UM=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&E1(e[1]);return t&&JSON.parse(t)},Wf=()=>{try{return DM()||PM()||LM()||UM()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},T1=e=>{var t,n;return(n=(t=Wf())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},zM=e=>{const t=T1(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},w1=()=>{var e;return(e=Wf())===null||e===void 0?void 0:e.config},S1=e=>{var t;return(t=Wf())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(e){return e.endsWith(".cloudworkstations.dev")}async function b1(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HM(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",a=e.iat||0,l=e.sub||e.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Af(JSON.stringify(n)),Af(JSON.stringify(c)),""].join(".")}const Lu={};function qM(){const e={prod:[],emulator:[]};for(const t of Object.keys(Lu))Lu[t]?e.emulator.push(t):e.prod.push(t);return e}function FM(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let fT=!1;function A1(e,t){if(typeof window>"u"||typeof document>"u"||!gl(window.location.host)||Lu[e]===t||Lu[e]||fT)return;Lu[e]=t;function n(E){return`__firebase__banner__${E}`}const r="__firebase__banner",l=qM().prod.length>0;function c(){const E=document.getElementById(r);E&&E.remove()}function d(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function g(E,S){E.setAttribute("width","24"),E.setAttribute("id",S),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function m(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{fT=!0,c()},E}function y(E,S){E.setAttribute("id",S),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function v(){const E=FM(r),S=n("text"),x=document.getElementById(S)||document.createElement("span"),k=n("learnmore"),M=document.getElementById(k)||document.createElement("a"),B=n("preprendIcon"),q=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const K=E.element;d(K),y(M,k);const L=m();g(q,B),K.append(q,x,M,L),document.body.appendChild(K)}l?(x.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wn())}function GM(){var e;const t=(e=Wf())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $M(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YM(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function KM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XM(){const e=wn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function QM(){return!GM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ZM(){try{return typeof indexedDB=="object"}catch{return!1}}function WM(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var l;t(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM="FirebaseError";class Xr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=JM,Object.setPrototypeOf(this,Xr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dc.prototype.create)}}class dc{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},a=`${this.service}/${t}`,l=this.errors[t],c=l?tO(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Xr(a,d,r)}}function tO(e,t){return e.replace(eO,(n,r)=>{const a=t[r];return a!=null?String(a):`<${r}?>`})}const eO=/\{\$([^}]+)}/g;function nO(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ka(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const a of n){if(!r.includes(a))return!1;const l=e[a],c=t[a];if(dT(l)&&dT(c)){if(!ka(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!n.includes(a))return!1;return!0}function dT(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(a=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Mu(e){const t={};return e.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");t[decodeURIComponent(a)]=decodeURIComponent(l)}}),t}function Ou(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function iO(e,t){const n=new rO(e,t);return n.subscribe.bind(n)}class rO{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let a;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");sO(t,["next","error","complete"])?a=t:a={next:t,error:n,complete:r},a.next===void 0&&(a.next=Pm),a.error===void 0&&(a.error=Pm),a.complete===void 0&&(a.complete=Pm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sO(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Pm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(e){return e&&e._delegate?e._delegate:e}class Pa{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new BM;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t?.identifier),a=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(lO(t))try{this.getOrInitializeService({instanceIdentifier:Ia})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(t=Ia){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ia){return this.instances.has(t)}getOptions(t=Ia){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(t,n){var r;const a=this.normalizeInstanceIdentifier(n),l=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;l.add(t),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&t(c,a),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const a of r)try{a(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:oO(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Ia){return this.component?this.component.multipleInstances?t:Ia:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oO(e){return e===Ia?void 0:e}function lO(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new aO(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})($t||($t={}));const cO={debug:$t.DEBUG,verbose:$t.VERBOSE,info:$t.INFO,warn:$t.WARN,error:$t.ERROR,silent:$t.SILENT},hO=$t.INFO,fO={[$t.DEBUG]:"log",[$t.VERBOSE]:"log",[$t.INFO]:"info",[$t.WARN]:"warn",[$t.ERROR]:"error"},dO=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),a=fO[t];if(a)console[a](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Jp{constructor(t){this.name=t,this._logLevel=hO,this._logHandler=dO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in $t))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?cO[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,$t.DEBUG,...t),this._logHandler(this,$t.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,$t.VERBOSE,...t),this._logHandler(this,$t.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,$t.INFO,...t),this._logHandler(this,$t.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,$t.WARN,...t),this._logHandler(this,$t.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,$t.ERROR,...t),this._logHandler(this,$t.ERROR,...t)}}const gO=(e,t)=>t.some(n=>e instanceof n);let gT,mT;function mO(){return gT||(gT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pO(){return mT||(mT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const R1=new WeakMap,cp=new WeakMap,I1=new WeakMap,Lm=new WeakMap,ty=new WeakMap;function yO(e){const t=new Promise((n,r)=>{const a=()=>{e.removeEventListener("success",l),e.removeEventListener("error",c)},l=()=>{n(Os(e.result)),a()},c=()=>{r(e.error),a()};e.addEventListener("success",l),e.addEventListener("error",c)});return t.then(n=>{n instanceof IDBCursor&&R1.set(n,e)}).catch(()=>{}),ty.set(t,e),t}function _O(e){if(cp.has(e))return;const t=new Promise((n,r)=>{const a=()=>{e.removeEventListener("complete",l),e.removeEventListener("error",c),e.removeEventListener("abort",c)},l=()=>{n(),a()},c=()=>{r(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",l),e.addEventListener("error",c),e.addEventListener("abort",c)});cp.set(e,t)}let hp={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return cp.get(e);if(t==="objectStoreNames")return e.objectStoreNames||I1.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Os(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function vO(e){hp=e(hp)}function EO(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Um(this),t,...n);return I1.set(r,t.sort?t.sort():[t]),Os(r)}:pO().includes(e)?function(...t){return e.apply(Um(this),t),Os(R1.get(this))}:function(...t){return Os(e.apply(Um(this),t))}}function TO(e){return typeof e=="function"?EO(e):(e instanceof IDBTransaction&&_O(e),gO(e,mO())?new Proxy(e,hp):e)}function Os(e){if(e instanceof IDBRequest)return yO(e);if(Lm.has(e))return Lm.get(e);const t=TO(e);return t!==e&&(Lm.set(e,t),ty.set(t,e)),t}const Um=e=>ty.get(e);function wO(e,t,{blocked:n,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(e,t),d=Os(c);return r&&c.addEventListener("upgradeneeded",g=>{r(Os(c.result),g.oldVersion,g.newVersion,Os(c.transaction),g)}),n&&c.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),d.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",m=>a(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const SO=["get","getKey","getAll","getAllKeys","count"],bO=["put","add","delete","clear"],zm=new Map;function pT(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(zm.get(t))return zm.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,a=bO.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(a||SO.includes(n)))return;const l=async function(c,...d){const g=this.transaction(c,a?"readwrite":"readonly");let m=g.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[n](...d),a&&g.done]))[0]};return zm.set(t,l),l}vO(e=>({...e,get:(t,n,r)=>pT(t,n)||e.get(t,n,r),has:(t,n)=>!!pT(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(RO(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function RO(e){const t=e.getComponent();return t?.type==="VERSION"}const fp="@firebase/app",yT="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=new Jp("@firebase/app"),IO="@firebase/app-compat",CO="@firebase/analytics-compat",xO="@firebase/analytics",NO="@firebase/app-check-compat",DO="@firebase/app-check",MO="@firebase/auth",OO="@firebase/auth-compat",VO="@firebase/database",kO="@firebase/data-connect",PO="@firebase/database-compat",LO="@firebase/functions",UO="@firebase/functions-compat",zO="@firebase/installations",BO="@firebase/installations-compat",HO="@firebase/messaging",qO="@firebase/messaging-compat",FO="@firebase/performance",jO="@firebase/performance-compat",GO="@firebase/remote-config",$O="@firebase/remote-config-compat",YO="@firebase/storage",KO="@firebase/storage-compat",XO="@firebase/firestore",QO="@firebase/ai",ZO="@firebase/firestore-compat",WO="firebase",JO="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="[DEFAULT]",t4={[fp]:"fire-core",[IO]:"fire-core-compat",[xO]:"fire-analytics",[CO]:"fire-analytics-compat",[DO]:"fire-app-check",[NO]:"fire-app-check-compat",[MO]:"fire-auth",[OO]:"fire-auth-compat",[VO]:"fire-rtdb",[kO]:"fire-data-connect",[PO]:"fire-rtdb-compat",[LO]:"fire-fn",[UO]:"fire-fn-compat",[zO]:"fire-iid",[BO]:"fire-iid-compat",[HO]:"fire-fcm",[qO]:"fire-fcm-compat",[FO]:"fire-perf",[jO]:"fire-perf-compat",[GO]:"fire-rc",[$O]:"fire-rc-compat",[YO]:"fire-gcs",[KO]:"fire-gcs-compat",[XO]:"fire-fst",[ZO]:"fire-fst-compat",[QO]:"fire-vertex","fire-js":"fire-js",[WO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf=new Map,e4=new Map,gp=new Map;function _T(e,t){try{e.container.addComponent(t)}catch(n){Gr.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function al(e){const t=e.name;if(gp.has(t))return Gr.debug(`There were multiple attempts to register component ${t}.`),!1;gp.set(t,e);for(const n of Rf.values())_T(n,e);for(const n of e4.values())_T(n,e);return!0}function ey(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ei(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vs=new dc("app","Firebase",n4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Vs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml=JO;function C1(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:dp,automaticDataCollectionEnabled:!0},t),a=r.name;if(typeof a!="string"||!a)throw Vs.create("bad-app-name",{appName:String(a)});if(n||(n=w1()),!n)throw Vs.create("no-options");const l=Rf.get(a);if(l){if(ka(n,l.options)&&ka(r,l.config))return l;throw Vs.create("duplicate-app",{appName:a})}const c=new uO(a);for(const g of gp.values())c.addComponent(g);const d=new i4(n,r,c);return Rf.set(a,d),d}function x1(e=dp){const t=Rf.get(e);if(!t&&e===dp&&w1())return C1();if(!t)throw Vs.create("no-app",{appName:e});return t}function ks(e,t,n){var r;let a=(r=t4[e])!==null&&r!==void 0?r:e;n&&(a+=`-${n}`);const l=a.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${t}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Gr.warn(d.join(" "));return}al(new Pa(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4="firebase-heartbeat-database",s4=1,Wu="firebase-heartbeat-store";let Bm=null;function N1(){return Bm||(Bm=wO(r4,s4,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Wu)}catch(n){console.warn(n)}}}}).catch(e=>{throw Vs.create("idb-open",{originalErrorMessage:e.message})})),Bm}async function a4(e){try{const n=(await N1()).transaction(Wu),r=await n.objectStore(Wu).get(D1(e));return await n.done,r}catch(t){if(t instanceof Xr)Gr.warn(t.message);else{const n=Vs.create("idb-get",{originalErrorMessage:t?.message});Gr.warn(n.message)}}}async function vT(e,t){try{const r=(await N1()).transaction(Wu,"readwrite");await r.objectStore(Wu).put(t,D1(e)),await r.done}catch(n){if(n instanceof Xr)Gr.warn(n.message);else{const r=Vs.create("idb-set",{originalErrorMessage:n?.message});Gr.warn(r.message)}}}function D1(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=1024,l4=30;class u4{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new h4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=ET();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>l4){const c=f4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Gr.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ET(),{heartbeatsToSend:r,unsentEntries:a}=c4(this._heartbeatsCache.heartbeats),l=Af(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return Gr.warn(n),""}}}function ET(){return new Date().toISOString().substring(0,10)}function c4(e,t=o4){const n=[];let r=e.slice();for(const a of e){const l=n.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),TT(n)>t){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),TT(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class h4{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZM()?WM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await a4(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return vT(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return vT(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function TT(e){return Af(JSON.stringify({version:2,heartbeats:e})).length}function f4(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(e){al(new Pa("platform-logger",t=>new AO(t),"PRIVATE")),al(new Pa("heartbeat",t=>new u4(t),"PRIVATE")),ks(fp,yT,e),ks(fp,yT,"esm2017"),ks("fire-js","")}d4("");var g4="firebase",m4="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ks(g4,m4,"app");var wT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ps,M1;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(V,R){function I(){}I.prototype=R.prototype,V.D=R.prototype,V.prototype=new I,V.prototype.constructor=V,V.C=function(P,U,z){for(var A=Array(arguments.length-2),O=2;O<arguments.length;O++)A[O-2]=arguments[O];return R.prototype[U].apply(P,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(V,R,I){I||(I=0);var P=Array(16);if(typeof R=="string")for(var U=0;16>U;++U)P[U]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(U=0;16>U;++U)P[U]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=V.g[0],I=V.g[1],U=V.g[2];var z=V.g[3],A=R+(z^I&(U^z))+P[0]+3614090360&4294967295;R=I+(A<<7&4294967295|A>>>25),A=z+(U^R&(I^U))+P[1]+3905402710&4294967295,z=R+(A<<12&4294967295|A>>>20),A=U+(I^z&(R^I))+P[2]+606105819&4294967295,U=z+(A<<17&4294967295|A>>>15),A=I+(R^U&(z^R))+P[3]+3250441966&4294967295,I=U+(A<<22&4294967295|A>>>10),A=R+(z^I&(U^z))+P[4]+4118548399&4294967295,R=I+(A<<7&4294967295|A>>>25),A=z+(U^R&(I^U))+P[5]+1200080426&4294967295,z=R+(A<<12&4294967295|A>>>20),A=U+(I^z&(R^I))+P[6]+2821735955&4294967295,U=z+(A<<17&4294967295|A>>>15),A=I+(R^U&(z^R))+P[7]+4249261313&4294967295,I=U+(A<<22&4294967295|A>>>10),A=R+(z^I&(U^z))+P[8]+1770035416&4294967295,R=I+(A<<7&4294967295|A>>>25),A=z+(U^R&(I^U))+P[9]+2336552879&4294967295,z=R+(A<<12&4294967295|A>>>20),A=U+(I^z&(R^I))+P[10]+4294925233&4294967295,U=z+(A<<17&4294967295|A>>>15),A=I+(R^U&(z^R))+P[11]+2304563134&4294967295,I=U+(A<<22&4294967295|A>>>10),A=R+(z^I&(U^z))+P[12]+1804603682&4294967295,R=I+(A<<7&4294967295|A>>>25),A=z+(U^R&(I^U))+P[13]+4254626195&4294967295,z=R+(A<<12&4294967295|A>>>20),A=U+(I^z&(R^I))+P[14]+2792965006&4294967295,U=z+(A<<17&4294967295|A>>>15),A=I+(R^U&(z^R))+P[15]+1236535329&4294967295,I=U+(A<<22&4294967295|A>>>10),A=R+(U^z&(I^U))+P[1]+4129170786&4294967295,R=I+(A<<5&4294967295|A>>>27),A=z+(I^U&(R^I))+P[6]+3225465664&4294967295,z=R+(A<<9&4294967295|A>>>23),A=U+(R^I&(z^R))+P[11]+643717713&4294967295,U=z+(A<<14&4294967295|A>>>18),A=I+(z^R&(U^z))+P[0]+3921069994&4294967295,I=U+(A<<20&4294967295|A>>>12),A=R+(U^z&(I^U))+P[5]+3593408605&4294967295,R=I+(A<<5&4294967295|A>>>27),A=z+(I^U&(R^I))+P[10]+38016083&4294967295,z=R+(A<<9&4294967295|A>>>23),A=U+(R^I&(z^R))+P[15]+3634488961&4294967295,U=z+(A<<14&4294967295|A>>>18),A=I+(z^R&(U^z))+P[4]+3889429448&4294967295,I=U+(A<<20&4294967295|A>>>12),A=R+(U^z&(I^U))+P[9]+568446438&4294967295,R=I+(A<<5&4294967295|A>>>27),A=z+(I^U&(R^I))+P[14]+3275163606&4294967295,z=R+(A<<9&4294967295|A>>>23),A=U+(R^I&(z^R))+P[3]+4107603335&4294967295,U=z+(A<<14&4294967295|A>>>18),A=I+(z^R&(U^z))+P[8]+1163531501&4294967295,I=U+(A<<20&4294967295|A>>>12),A=R+(U^z&(I^U))+P[13]+2850285829&4294967295,R=I+(A<<5&4294967295|A>>>27),A=z+(I^U&(R^I))+P[2]+4243563512&4294967295,z=R+(A<<9&4294967295|A>>>23),A=U+(R^I&(z^R))+P[7]+1735328473&4294967295,U=z+(A<<14&4294967295|A>>>18),A=I+(z^R&(U^z))+P[12]+2368359562&4294967295,I=U+(A<<20&4294967295|A>>>12),A=R+(I^U^z)+P[5]+4294588738&4294967295,R=I+(A<<4&4294967295|A>>>28),A=z+(R^I^U)+P[8]+2272392833&4294967295,z=R+(A<<11&4294967295|A>>>21),A=U+(z^R^I)+P[11]+1839030562&4294967295,U=z+(A<<16&4294967295|A>>>16),A=I+(U^z^R)+P[14]+4259657740&4294967295,I=U+(A<<23&4294967295|A>>>9),A=R+(I^U^z)+P[1]+2763975236&4294967295,R=I+(A<<4&4294967295|A>>>28),A=z+(R^I^U)+P[4]+1272893353&4294967295,z=R+(A<<11&4294967295|A>>>21),A=U+(z^R^I)+P[7]+4139469664&4294967295,U=z+(A<<16&4294967295|A>>>16),A=I+(U^z^R)+P[10]+3200236656&4294967295,I=U+(A<<23&4294967295|A>>>9),A=R+(I^U^z)+P[13]+681279174&4294967295,R=I+(A<<4&4294967295|A>>>28),A=z+(R^I^U)+P[0]+3936430074&4294967295,z=R+(A<<11&4294967295|A>>>21),A=U+(z^R^I)+P[3]+3572445317&4294967295,U=z+(A<<16&4294967295|A>>>16),A=I+(U^z^R)+P[6]+76029189&4294967295,I=U+(A<<23&4294967295|A>>>9),A=R+(I^U^z)+P[9]+3654602809&4294967295,R=I+(A<<4&4294967295|A>>>28),A=z+(R^I^U)+P[12]+3873151461&4294967295,z=R+(A<<11&4294967295|A>>>21),A=U+(z^R^I)+P[15]+530742520&4294967295,U=z+(A<<16&4294967295|A>>>16),A=I+(U^z^R)+P[2]+3299628645&4294967295,I=U+(A<<23&4294967295|A>>>9),A=R+(U^(I|~z))+P[0]+4096336452&4294967295,R=I+(A<<6&4294967295|A>>>26),A=z+(I^(R|~U))+P[7]+1126891415&4294967295,z=R+(A<<10&4294967295|A>>>22),A=U+(R^(z|~I))+P[14]+2878612391&4294967295,U=z+(A<<15&4294967295|A>>>17),A=I+(z^(U|~R))+P[5]+4237533241&4294967295,I=U+(A<<21&4294967295|A>>>11),A=R+(U^(I|~z))+P[12]+1700485571&4294967295,R=I+(A<<6&4294967295|A>>>26),A=z+(I^(R|~U))+P[3]+2399980690&4294967295,z=R+(A<<10&4294967295|A>>>22),A=U+(R^(z|~I))+P[10]+4293915773&4294967295,U=z+(A<<15&4294967295|A>>>17),A=I+(z^(U|~R))+P[1]+2240044497&4294967295,I=U+(A<<21&4294967295|A>>>11),A=R+(U^(I|~z))+P[8]+1873313359&4294967295,R=I+(A<<6&4294967295|A>>>26),A=z+(I^(R|~U))+P[15]+4264355552&4294967295,z=R+(A<<10&4294967295|A>>>22),A=U+(R^(z|~I))+P[6]+2734768916&4294967295,U=z+(A<<15&4294967295|A>>>17),A=I+(z^(U|~R))+P[13]+1309151649&4294967295,I=U+(A<<21&4294967295|A>>>11),A=R+(U^(I|~z))+P[4]+4149444226&4294967295,R=I+(A<<6&4294967295|A>>>26),A=z+(I^(R|~U))+P[11]+3174756917&4294967295,z=R+(A<<10&4294967295|A>>>22),A=U+(R^(z|~I))+P[2]+718787259&4294967295,U=z+(A<<15&4294967295|A>>>17),A=I+(z^(U|~R))+P[9]+3951481745&4294967295,V.g[0]=V.g[0]+R&4294967295,V.g[1]=V.g[1]+(U+(A<<21&4294967295|A>>>11))&4294967295,V.g[2]=V.g[2]+U&4294967295,V.g[3]=V.g[3]+z&4294967295}r.prototype.u=function(V,R){R===void 0&&(R=V.length);for(var I=R-this.blockSize,P=this.B,U=this.h,z=0;z<R;){if(U==0)for(;z<=I;)a(this,V,z),z+=this.blockSize;if(typeof V=="string"){for(;z<R;)if(P[U++]=V.charCodeAt(z++),U==this.blockSize){a(this,P),U=0;break}}else for(;z<R;)if(P[U++]=V[z++],U==this.blockSize){a(this,P),U=0;break}}this.h=U,this.o+=R},r.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var R=1;R<V.length-8;++R)V[R]=0;var I=8*this.o;for(R=V.length-8;R<V.length;++R)V[R]=I&255,I/=256;for(this.u(V),V=Array(16),R=I=0;4>R;++R)for(var P=0;32>P;P+=8)V[I++]=this.g[R]>>>P&255;return V};function l(V,R){var I=d;return Object.prototype.hasOwnProperty.call(I,V)?I[V]:I[V]=R(V)}function c(V,R){this.h=R;for(var I=[],P=!0,U=V.length-1;0<=U;U--){var z=V[U]|0;P&&z==R||(I[U]=z,P=!1)}this.g=I}var d={};function g(V){return-128<=V&&128>V?l(V,function(R){return new c([R|0],0>R?-1:0)}):new c([V|0],0>V?-1:0)}function m(V){if(isNaN(V)||!isFinite(V))return v;if(0>V)return M(m(-V));for(var R=[],I=1,P=0;V>=I;P++)R[P]=V/I|0,I*=4294967296;return new c(R,0)}function y(V,R){if(V.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(V.charAt(0)=="-")return M(y(V.substring(1),R));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=m(Math.pow(R,8)),P=v,U=0;U<V.length;U+=8){var z=Math.min(8,V.length-U),A=parseInt(V.substring(U,U+z),R);8>z?(z=m(Math.pow(R,z)),P=P.j(z).add(m(A))):(P=P.j(I),P=P.add(m(A)))}return P}var v=g(0),E=g(1),S=g(16777216);e=c.prototype,e.m=function(){if(k(this))return-M(this).m();for(var V=0,R=1,I=0;I<this.g.length;I++){var P=this.i(I);V+=(0<=P?P:4294967296+P)*R,R*=4294967296}return V},e.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(x(this))return"0";if(k(this))return"-"+M(this).toString(V);for(var R=m(Math.pow(V,6)),I=this,P="";;){var U=L(I,R).g;I=B(I,U.j(R));var z=((0<I.g.length?I.g[0]:I.h)>>>0).toString(V);if(I=U,x(I))return z+P;for(;6>z.length;)z="0"+z;P=z+P}},e.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function x(V){if(V.h!=0)return!1;for(var R=0;R<V.g.length;R++)if(V.g[R]!=0)return!1;return!0}function k(V){return V.h==-1}e.l=function(V){return V=B(this,V),k(V)?-1:x(V)?0:1};function M(V){for(var R=V.g.length,I=[],P=0;P<R;P++)I[P]=~V.g[P];return new c(I,~V.h).add(E)}e.abs=function(){return k(this)?M(this):this},e.add=function(V){for(var R=Math.max(this.g.length,V.g.length),I=[],P=0,U=0;U<=R;U++){var z=P+(this.i(U)&65535)+(V.i(U)&65535),A=(z>>>16)+(this.i(U)>>>16)+(V.i(U)>>>16);P=A>>>16,z&=65535,A&=65535,I[U]=A<<16|z}return new c(I,I[I.length-1]&-2147483648?-1:0)};function B(V,R){return V.add(M(R))}e.j=function(V){if(x(this)||x(V))return v;if(k(this))return k(V)?M(this).j(M(V)):M(M(this).j(V));if(k(V))return M(this.j(M(V)));if(0>this.l(S)&&0>V.l(S))return m(this.m()*V.m());for(var R=this.g.length+V.g.length,I=[],P=0;P<2*R;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(var U=0;U<V.g.length;U++){var z=this.i(P)>>>16,A=this.i(P)&65535,O=V.i(U)>>>16,Y=V.i(U)&65535;I[2*P+2*U]+=A*Y,q(I,2*P+2*U),I[2*P+2*U+1]+=z*Y,q(I,2*P+2*U+1),I[2*P+2*U+1]+=A*O,q(I,2*P+2*U+1),I[2*P+2*U+2]+=z*O,q(I,2*P+2*U+2)}for(P=0;P<R;P++)I[P]=I[2*P+1]<<16|I[2*P];for(P=R;P<2*R;P++)I[P]=0;return new c(I,0)};function q(V,R){for(;(V[R]&65535)!=V[R];)V[R+1]+=V[R]>>>16,V[R]&=65535,R++}function K(V,R){this.g=V,this.h=R}function L(V,R){if(x(R))throw Error("division by zero");if(x(V))return new K(v,v);if(k(V))return R=L(M(V),R),new K(M(R.g),M(R.h));if(k(R))return R=L(V,M(R)),new K(M(R.g),R.h);if(30<V.g.length){if(k(V)||k(R))throw Error("slowDivide_ only works with positive integers.");for(var I=E,P=R;0>=P.l(V);)I=Z(I),P=Z(P);var U=W(I,1),z=W(P,1);for(P=W(P,2),I=W(I,2);!x(P);){var A=z.add(P);0>=A.l(V)&&(U=U.add(I),z=A),P=W(P,1),I=W(I,1)}return R=B(V,U.j(R)),new K(U,R)}for(U=v;0<=V.l(R);){for(I=Math.max(1,Math.floor(V.m()/R.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),z=m(I),A=z.j(R);k(A)||0<A.l(V);)I-=P,z=m(I),A=z.j(R);x(z)&&(z=E),U=U.add(z),V=B(V,A)}return new K(U,V)}e.A=function(V){return L(this,V).h},e.and=function(V){for(var R=Math.max(this.g.length,V.g.length),I=[],P=0;P<R;P++)I[P]=this.i(P)&V.i(P);return new c(I,this.h&V.h)},e.or=function(V){for(var R=Math.max(this.g.length,V.g.length),I=[],P=0;P<R;P++)I[P]=this.i(P)|V.i(P);return new c(I,this.h|V.h)},e.xor=function(V){for(var R=Math.max(this.g.length,V.g.length),I=[],P=0;P<R;P++)I[P]=this.i(P)^V.i(P);return new c(I,this.h^V.h)};function Z(V){for(var R=V.g.length+1,I=[],P=0;P<R;P++)I[P]=V.i(P)<<1|V.i(P-1)>>>31;return new c(I,V.h)}function W(V,R){var I=R>>5;R%=32;for(var P=V.g.length-I,U=[],z=0;z<P;z++)U[z]=0<R?V.i(z+I)>>>R|V.i(z+I+1)<<32-R:V.i(z+I);return new c(U,V.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,M1=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=y,Ps=c}).apply(typeof wT<"u"?wT:typeof self<"u"?self:typeof window<"u"?window:{});var Xh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var O1,Vu,V1,of,mp,k1,P1,L1;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,T){return h==Array.prototype||h==Object.prototype||(h[_]=T.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xh=="object"&&Xh];for(var _=0;_<h.length;++_){var T=h[_];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function a(h,_){if(_)t:{var T=r;h=h.split(".");for(var C=0;C<h.length-1;C++){var J=h[C];if(!(J in T))break t;T=T[J]}h=h[h.length-1],C=T[h],_=_(C),_!=C&&_!=null&&t(T,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var T=0,C=!1,J={next:function(){if(!C&&T<h.length){var ot=T++;return{value:_(ot,h[ot]),done:!1}}return C=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}a("Array.prototype.values",function(h){return h||function(){return l(this,function(_,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function g(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function m(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function y(h,_,T){return h.call.apply(h.bind,arguments)}function v(h,_,T){if(!h)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,C),h.apply(_,J)}}return function(){return h.apply(_,arguments)}}function E(h,_,T){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,E.apply(null,arguments)}function S(h,_){var T=Array.prototype.slice.call(arguments,1);return function(){var C=T.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function x(h,_){function T(){}T.prototype=_.prototype,h.aa=_.prototype,h.prototype=new T,h.prototype.constructor=h,h.Qb=function(C,J,ot){for(var _t=Array(arguments.length-2),Kt=2;Kt<arguments.length;Kt++)_t[Kt-2]=arguments[Kt];return _.prototype[J].apply(C,_t)}}function k(h){const _=h.length;if(0<_){const T=Array(_);for(let C=0;C<_;C++)T[C]=h[C];return T}return[]}function M(h,_){for(let T=1;T<arguments.length;T++){const C=arguments[T];if(g(C)){const J=h.length||0,ot=C.length||0;h.length=J+ot;for(let _t=0;_t<ot;_t++)h[J+_t]=C[_t]}else h.push(C)}}class B{constructor(_,T){this.i=_,this.j=T,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function q(h){return/^[\s\xa0]*$/.test(h)}function K(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function L(h){return L[" "](h),h}L[" "]=function(){};var Z=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function W(h,_,T){for(const C in h)_.call(T,h[C],C,h)}function V(h,_){for(const T in h)_.call(void 0,h[T],T,h)}function R(h){const _={};for(const T in h)_[T]=h[T];return _}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(h,_){let T,C;for(let J=1;J<arguments.length;J++){C=arguments[J];for(T in C)h[T]=C[T];for(let ot=0;ot<I.length;ot++)T=I[ot],Object.prototype.hasOwnProperty.call(C,T)&&(h[T]=C[T])}}function U(h){var _=1;h=h.split(":");const T=[];for(;0<_&&h.length;)T.push(h.shift()),_--;return h.length&&T.push(h.join(":")),T}function z(h){d.setTimeout(()=>{throw h},0)}function A(){var h=X;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class O{constructor(){this.h=this.g=null}add(_,T){const C=Y.get();C.set(_,T),this.h?this.h.next=C:this.g=C,this.h=C}}var Y=new B(()=>new D,h=>h.reset());class D{constructor(){this.next=this.g=this.h=null}set(_,T){this.h=_,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let j,rt=!1,X=new O,N=()=>{const h=d.Promise.resolve(void 0);j=()=>{h.then($)}};var $=()=>{for(var h;h=A();){try{h.h.call(h.g)}catch(T){z(T)}var _=Y;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}rt=!1};function et(){this.s=this.s,this.C=this.C}et.prototype.s=!1,et.prototype.ma=function(){this.s||(this.s=!0,this.N())},et.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var ct=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};d.addEventListener("test",T,_),d.removeEventListener("test",T,_)}catch{}return h}();function pt(h,_){if(st.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var T=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(Z){t:{try{L(_.nodeName);var J=!0;break t}catch{}J=!1}J||(_=null)}}else T=="mouseover"?_=h.fromElement:T=="mouseout"&&(_=h.toElement);this.relatedTarget=_,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:yt[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&pt.aa.h.call(this)}}x(pt,st);var yt={2:"touch",3:"pen",4:"mouse"};pt.prototype.h=function(){pt.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var It="closure_listenable_"+(1e6*Math.random()|0),At=0;function kt(h,_,T,C,J){this.listener=h,this.proxy=null,this.src=_,this.type=T,this.capture=!!C,this.ha=J,this.key=++At,this.da=this.fa=!1}function Pt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ue(h){this.src=h,this.g={},this.h=0}ue.prototype.add=function(h,_,T,C,J){var ot=h.toString();h=this.g[ot],h||(h=this.g[ot]=[],this.h++);var _t=Ee(h,_,C,J);return-1<_t?(_=h[_t],T||(_.fa=!1)):(_=new kt(_,this.src,ot,!!C,J),_.fa=T,h.push(_)),_};function ce(h,_){var T=_.type;if(T in h.g){var C=h.g[T],J=Array.prototype.indexOf.call(C,_,void 0),ot;(ot=0<=J)&&Array.prototype.splice.call(C,J,1),ot&&(Pt(_),h.g[T].length==0&&(delete h.g[T],h.h--))}}function Ee(h,_,T,C){for(var J=0;J<h.length;++J){var ot=h[J];if(!ot.da&&ot.listener==_&&ot.capture==!!T&&ot.ha==C)return J}return-1}var _e="closure_lm_"+(1e6*Math.random()|0),he={};function Xe(h,_,T,C,J){if(Array.isArray(_)){for(var ot=0;ot<_.length;ot++)Xe(h,_[ot],T,C,J);return null}return T=Si(T),h&&h[It]?h.K(_,T,m(C)?!!C.capture:!1,J):Lt(h,_,T,!1,C,J)}function Lt(h,_,T,C,J,ot){if(!_)throw Error("Invalid event type");var _t=m(J)?!!J.capture:!!J,Kt=zn(h);if(Kt||(h[_e]=Kt=new ue(h)),T=Kt.add(_,T,C,_t,ot),T.proxy)return T;if(C=wt(),T.proxy=C,C.src=h,C.listener=T,h.addEventListener)ct||(J=_t),J===void 0&&(J=!1),h.addEventListener(_.toString(),C,J);else if(h.attachEvent)h.attachEvent(Un(_.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return T}function wt(){function h(T){return _.call(h.src,h.listener,T)}const _=Ui;return h}function xe(h,_,T,C,J){if(Array.isArray(_))for(var ot=0;ot<_.length;ot++)xe(h,_[ot],T,C,J);else C=m(C)?!!C.capture:!!C,T=Si(T),h&&h[It]?(h=h.i,_=String(_).toString(),_ in h.g&&(ot=h.g[_],T=Ee(ot,T,C,J),-1<T&&(Pt(ot[T]),Array.prototype.splice.call(ot,T,1),ot.length==0&&(delete h.g[_],h.h--)))):h&&(h=zn(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Ee(_,T,C,J)),(T=-1<h?_[h]:null)&&pn(T))}function pn(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[It])ce(_.i,h);else{var T=h.type,C=h.proxy;_.removeEventListener?_.removeEventListener(T,C,h.capture):_.detachEvent?_.detachEvent(Un(T),C):_.addListener&&_.removeListener&&_.removeListener(C),(T=zn(_))?(ce(T,h),T.h==0&&(T.src=null,_[_e]=null)):Pt(h)}}}function Un(h){return h in he?he[h]:he[h]="on"+h}function Ui(h,_){if(h.da)h=!0;else{_=new pt(_,this);var T=h.listener,C=h.ha||h.src;h.fa&&pn(h),h=T.call(C,_)}return h}function zn(h){return h=h[_e],h instanceof ue?h:null}var Sn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Si(h){return typeof h=="function"?h:(h[Sn]||(h[Sn]=function(_){return h.handleEvent(_)}),h[Sn])}function te(){et.call(this),this.i=new ue(this),this.M=this,this.F=null}x(te,et),te.prototype[It]=!0,te.prototype.removeEventListener=function(h,_,T,C){xe(this,h,_,T,C)};function Ft(h,_){var T,C=h.F;if(C)for(T=[];C;C=C.F)T.push(C);if(h=h.M,C=_.type||_,typeof _=="string")_=new st(_,h);else if(_ instanceof st)_.target=_.target||h;else{var J=_;_=new st(C,h),P(_,J)}if(J=!0,T)for(var ot=T.length-1;0<=ot;ot--){var _t=_.g=T[ot];J=Ve(_t,C,!0,_)&&J}if(_t=_.g=h,J=Ve(_t,C,!0,_)&&J,J=Ve(_t,C,!1,_)&&J,T)for(ot=0;ot<T.length;ot++)_t=_.g=T[ot],J=Ve(_t,C,!1,_)&&J}te.prototype.N=function(){if(te.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var T=h.g[_],C=0;C<T.length;C++)Pt(T[C]);delete h.g[_],h.h--}}this.F=null},te.prototype.K=function(h,_,T,C){return this.i.add(String(h),_,!1,T,C)},te.prototype.L=function(h,_,T,C){return this.i.add(String(h),_,!0,T,C)};function Ve(h,_,T,C){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var J=!0,ot=0;ot<_.length;++ot){var _t=_[ot];if(_t&&!_t.da&&_t.capture==T){var Kt=_t.listener,qe=_t.ha||_t.src;_t.fa&&ce(h.i,_t),J=Kt.call(qe,C)!==!1&&J}}return J&&!C.defaultPrevented}function Te(h,_,T){if(typeof h=="function")T&&(h=E(h,T));else if(h&&typeof h.handleEvent=="function")h=E(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(h,_||0)}function zi(h){h.g=Te(()=>{h.g=null,h.i&&(h.i=!1,zi(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class ke extends et{constructor(_,T){super(),this.m=_,this.l=T,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:zi(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qe(h){et.call(this),this.h=h,this.g={}}x(Qe,et);var bn=[];function An(h){W(h.g,function(_,T){this.g.hasOwnProperty(T)&&pn(_)},h),h.g={}}Qe.prototype.N=function(){Qe.aa.N.call(this),An(this)},Qe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ze=d.JSON.stringify,an=d.JSON.parse,Rn=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function dr(){}dr.prototype.h=null;function gr(h){return h.h||(h.h=h.i())}function bi(){}var Bn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ni(){st.call(this,"d")}x(ni,st);function Hn(){st.call(this,"c")}x(Hn,st);var ii={},Qs=null;function Bi(){return Qs=Qs||new te}ii.La="serverreachability";function Qr(h){st.call(this,ii.La,h)}x(Qr,st);function Hi(h){const _=Bi();Ft(_,new Qr(_))}ii.STAT_EVENT="statevent";function $a(h,_){st.call(this,ii.STAT_EVENT,h),this.stat=_}x($a,st);function de(h){const _=Bi();Ft(_,new $a(_,h))}ii.Ma="timingevent";function Ne(h,_){st.call(this,ii.Ma,h),this.size=_}x(Ne,st);function Ae(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},_)}function Dn(){this.g=!0}Dn.prototype.xa=function(){this.g=!1};function Zs(h,_,T,C,J,ot){h.info(function(){if(h.g)if(ot)for(var _t="",Kt=ot.split("&"),qe=0;qe<Kt.length;qe++){var Xt=Kt[qe].split("=");if(1<Xt.length){var Je=Xt[0];Xt=Xt[1];var Fe=Je.split("_");_t=2<=Fe.length&&Fe[1]=="type"?_t+(Je+"="+Xt+"&"):_t+(Je+"=redacted&")}}else _t=null;else _t=ot;return"XMLHTTP REQ ("+C+") [attempt "+J+"]: "+_+`
`+T+`
`+_t})}function Sl(h,_,T,C,J,ot,_t){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+J+"]: "+_+`
`+T+`
`+ot+" "+_t})}function qi(h,_,T,C){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+mr(h,T)+(C?" "+C:"")})}function Ya(h,_){h.info(function(){return"TIMEOUT: "+_})}Dn.prototype.info=function(){};function mr(h,_){if(!h.g)return _;if(!_)return null;try{var T=JSON.parse(_);if(T){for(h=0;h<T.length;h++)if(Array.isArray(T[h])){var C=T[h];if(!(2>C.length)){var J=C[1];if(Array.isArray(J)&&!(1>J.length)){var ot=J[0];if(ot!="noop"&&ot!="stop"&&ot!="close")for(var _t=1;_t<J.length;_t++)J[_t]=""}}}}return Ze(T)}catch{return _}}var Fi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ri={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},si;function ai(){}x(ai,dr),ai.prototype.g=function(){return new XMLHttpRequest},ai.prototype.i=function(){return{}},si=new ai;function on(h,_,T,C){this.j=h,this.i=_,this.l=T,this.R=C||1,this.U=new Qe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new we}function we(){this.i=null,this.g="",this.h=!1}var Ws={},Zr={};function qn(h,_,T){h.L=1,h.v=na(Fn(_)),h.m=T,h.P=!0,Ai(h,null)}function Ai(h,_){h.F=Date.now(),pr(h),h.A=Fn(h.v);var T=h.A,C=h.R;Array.isArray(C)||(C=[String(C)]),xl(T.i,"t",C),h.C=0,T=h.j.J,h.h=new we,h.g=Pc(h.j,T?_:null,!h.m),0<h.O&&(h.M=new ke(E(h.Y,h,h.g),h.O)),_=h.U,T=h.g,C=h.ca;var J="readystatechange";Array.isArray(J)||(J&&(bn[0]=J.toString()),J=bn);for(var ot=0;ot<J.length;ot++){var _t=Xe(T,J[ot],C||_.handleEvent,!1,_.h||_);if(!_t)break;_.g[_t.key]=_t}_=h.H?R(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Hi(),Zs(h.i,h.u,h.A,h.l,h.R,h.m)}on.prototype.ca=function(h){h=h.target;const _=this.M;_&&hi(h)==3?_.j():this.Y(h)},on.prototype.Y=function(h){try{if(h==this.g)t:{const Fe=hi(this.g);var _=this.g.Ba();const Sr=this.g.Z();if(!(3>Fe)&&(Fe!=3||this.g&&(this.h.h||this.g.oa()||Cc(this.g)))){this.J||Fe!=4||_==7||(_==8||0>=Sr?Hi(3):Hi(2)),ji(this);var T=this.g.Z();this.X=T;e:if(Js(this)){var C=Cc(this.g);h="";var J=C.length,ot=hi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){He(this),oi(this);var _t="";break e}this.h.i=new d.TextDecoder}for(_=0;_<J;_++)this.h.h=!0,h+=this.h.i.decode(C[_],{stream:!(ot&&_==J-1)});C.length=0,this.h.g+=h,this.C=0,_t=this.h.g}else _t=this.g.oa();if(this.o=T==200,Sl(this.i,this.u,this.A,this.l,this.R,Fe,T),this.o){if(this.T&&!this.K){e:{if(this.g){var Kt,qe=this.g;if((Kt=qe.g?qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Kt)){var Xt=Kt;break e}}Xt=null}if(T=Xt)qi(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gi(this,T);else{this.o=!1,this.s=3,de(12),He(this),oi(this);break t}}if(this.P){T=!0;let ln;for(;!this.J&&this.C<_t.length;)if(ln=Ka(this,_t),ln==Zr){Fe==4&&(this.s=4,de(14),T=!1),qi(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==Ws){this.s=4,de(15),qi(this.i,this.l,_t,"[Invalid Chunk]"),T=!1;break}else qi(this.i,this.l,ln,null),Gi(this,ln);if(Js(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||_t.length!=0||this.h.h||(this.s=1,de(16),T=!1),this.o=this.o&&T,!T)qi(this.i,this.l,_t,"[Invalid Chunked Response]"),He(this),oi(this);else if(0<_t.length&&!this.W){this.W=!0;var Je=this.j;Je.g==this&&Je.ba&&!Je.M&&(Je.j.info("Great, no buffering proxy detected. Bytes received: "+_t.length),ca(Je),Je.M=!0,de(11))}}else qi(this.i,this.l,_t,null),Gi(this,_t);Fe==4&&He(this),this.o&&!this.J&&(Fe==4?Oc(this.j,this):(this.o=!1,pr(this)))}else bd(this.g),T==400&&0<_t.indexOf("Unknown SID")?(this.s=3,de(12)):(this.s=0,de(13)),He(this),oi(this)}}}catch{}finally{}};function Js(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Ka(h,_){var T=h.C,C=_.indexOf(`
`,T);return C==-1?Zr:(T=Number(_.substring(T,C)),isNaN(T)?Ws:(C+=1,C+T>_.length?Zr:(_=_.slice(C,C+T),h.C=C+T,_)))}on.prototype.cancel=function(){this.J=!0,He(this)};function pr(h){h.S=Date.now()+h.I,Xa(h,h.I)}function Xa(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ae(E(h.ba,h),_)}function ji(h){h.B&&(d.clearTimeout(h.B),h.B=null)}on.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Ya(this.i,this.A),this.L!=2&&(Hi(),de(17)),He(this),this.s=2,oi(this)):Xa(this,this.S-h)};function oi(h){h.j.G==0||h.J||Oc(h.j,h)}function He(h){ji(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,An(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Gi(h,_){try{var T=h.j;if(T.G!=0&&(T.g==h||bl(T.h,h))){if(!h.K&&bl(T.h,h)&&T.G==3){try{var C=T.Da.g.parse(_)}catch{C=null}if(Array.isArray(C)&&C.length==3){var J=C;if(J[0]==0){t:if(!T.u){if(T.g)if(T.g.F+3e3<h.F)ao(T),ro(T);else break t;Vl(T),de(18)}}else T.za=J[1],0<T.za-T.T&&37500>J[2]&&T.F&&T.v==0&&!T.C&&(T.C=Ae(E(T.Za,T),6e3));if(1>=$i(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else wr(T,11)}else if((h.K||T.g==h)&&ao(T),!q(_))for(J=T.Da.g.parse(_),_=0;_<J.length;_++){let Xt=J[_];if(T.T=Xt[0],Xt=Xt[1],T.G==2)if(Xt[0]=="c"){T.K=Xt[1],T.ia=Xt[2];const Je=Xt[3];Je!=null&&(T.la=Je,T.j.info("VER="+T.la));const Fe=Xt[4];Fe!=null&&(T.Aa=Fe,T.j.info("SVER="+T.Aa));const Sr=Xt[5];Sr!=null&&typeof Sr=="number"&&0<Sr&&(C=1.5*Sr,T.L=C,T.j.info("backChannelRequestTimeoutMs_="+C)),C=T;const ln=h.g;if(ln){const Ji=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ji){var ot=C.h;ot.g||Ji.indexOf("spdy")==-1&&Ji.indexOf("quic")==-1&&Ji.indexOf("h2")==-1||(ot.j=ot.l,ot.g=new Set,ot.h&&(Za(ot,ot.h),ot.h=null))}if(C.D){const Pl=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;Pl&&(C.ya=Pl,se(C.I,C.D,Pl))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-h.F,T.j.info("Handshake RTT: "+T.R+"ms")),C=T;var _t=h;if(C.qa=kc(C,C.J?C.ia:null,C.W),_t.K){In(C.h,_t);var Kt=_t,qe=C.L;qe&&(Kt.I=qe),Kt.B&&(ji(Kt),pr(Kt)),C.g=_t}else Dc(C);0<T.i.length&&so(T)}else Xt[0]!="stop"&&Xt[0]!="close"||wr(T,7);else T.G==3&&(Xt[0]=="stop"||Xt[0]=="close"?Xt[0]=="stop"?wr(T,7):Ml(T):Xt[0]!="noop"&&T.l&&T.l.ta(Xt),T.v=0)}}Hi(4)}catch{}}var Qa=class{constructor(h,_){this.g=h,this.map=_}};function Ri(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wr(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function $i(h){return h.h?1:h.g?h.g.size:0}function bl(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Za(h,_){h.g?h.g.add(_):h.h=_}function In(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Ri.prototype.cancel=function(){if(this.i=Al(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Al(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const T of h.g.values())_=_.concat(T.D);return _}return k(h.i)}function Ed(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(g(h)){for(var _=[],T=h.length,C=0;C<T;C++)_.push(h[C]);return _}_=[],T=0;for(C in h)_[T++]=h[C];return _}function Wa(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(g(h)||typeof h=="string"){var _=[];h=h.length;for(var T=0;T<h;T++)_.push(T);return _}_=[],T=0;for(const C in h)_[T++]=C;return _}}}function Rl(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(g(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var T=Wa(h),C=Ed(h),J=C.length,ot=0;ot<J;ot++)_.call(void 0,C[ot],T&&T[ot],h)}var ta=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Td(h,_){if(h){h=h.split("&");for(var T=0;T<h.length;T++){var C=h[T].indexOf("="),J=null;if(0<=C){var ot=h[T].substring(0,C);J=h[T].substring(C+1)}else ot=h[T];_(ot,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Pe(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Pe){this.h=h.h,ea(this,h.j),this.o=h.o,this.g=h.g,Jr(this,h.s),this.l=h.l;var _=h.i,T=new _r;T.i=_.i,_.g&&(T.g=new Map(_.g),T.h=_.h),yr(this,T),this.m=h.m}else h&&(_=String(h).match(ta))?(this.h=!1,ea(this,_[1]||"",!0),this.o=li(_[2]||""),this.g=li(_[3]||"",!0),Jr(this,_[4]),this.l=li(_[5]||"",!0),yr(this,_[6]||"",!0),this.m=li(_[7]||"")):(this.h=!1,this.i=new _r(null,this.h))}Pe.prototype.toString=function(){var h=[],_=this.j;_&&h.push(ia(_,Il,!0),":");var T=this.g;return(T||_=="file")&&(h.push("//"),(_=this.o)&&h.push(ia(_,Il,!0),"@"),h.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&h.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(ia(T,T.charAt(0)=="/"?wd:Cl,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",ia(T,Ja)),h.join("")};function Fn(h){return new Pe(h)}function ea(h,_,T){h.j=T?li(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Jr(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function yr(h,_,T){_ instanceof _r?(h.i=_,Rc(h.i,h.h)):(T||(_=ia(_,Sd)),h.i=new _r(_,h.h))}function se(h,_,T){h.i.set(_,T)}function na(h){return se(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function li(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ia(h,_,T){return typeof h=="string"?(h=encodeURI(h).replace(_,Ac),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Ac(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Il=/[#\/\?@]/g,Cl=/[#\?:]/g,wd=/[#\?]/g,Sd=/[#\?@]/g,Ja=/#/g;function _r(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function ui(h){h.g||(h.g=new Map,h.h=0,h.i&&Td(h.i,function(_,T){h.add(decodeURIComponent(_.replace(/\+/g," ")),T)}))}e=_r.prototype,e.add=function(h,_){ui(this),this.i=null,h=Yi(this,h);var T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(_),this.h+=1,this};function vr(h,_){ui(h),_=Yi(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Er(h,_){return ui(h),_=Yi(h,_),h.g.has(_)}e.forEach=function(h,_){ui(this),this.g.forEach(function(T,C){T.forEach(function(J){h.call(_,J,C,this)},this)},this)},e.na=function(){ui(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),T=[];for(let C=0;C<_.length;C++){const J=h[C];for(let ot=0;ot<J.length;ot++)T.push(_[C])}return T},e.V=function(h){ui(this);let _=[];if(typeof h=="string")Er(this,h)&&(_=_.concat(this.g.get(Yi(this,h))));else{h=Array.from(this.g.values());for(let T=0;T<h.length;T++)_=_.concat(h[T])}return _},e.set=function(h,_){return ui(this),this.i=null,h=Yi(this,h),Er(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},e.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function xl(h,_,T){vr(h,_),0<T.length&&(h.i=null,h.g.set(Yi(h,_),k(T)),h.h+=T.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var T=0;T<_.length;T++){var C=_[T];const ot=encodeURIComponent(String(C)),_t=this.V(C);for(C=0;C<_t.length;C++){var J=ot;_t[C]!==""&&(J+="="+encodeURIComponent(String(_t[C]))),h.push(J)}}return this.i=h.join("&")};function Yi(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Rc(h,_){_&&!h.j&&(ui(h),h.i=null,h.g.forEach(function(T,C){var J=C.toLowerCase();C!=J&&(vr(this,C),xl(this,J,T))},h)),h.j=_}function ra(h,_){const T=new Dn;if(d.Image){const C=new Image;C.onload=S(ci,T,"TestLoadImage: loaded",!0,_,C),C.onerror=S(ci,T,"TestLoadImage: error",!1,_,C),C.onabort=S(ci,T,"TestLoadImage: abort",!1,_,C),C.ontimeout=S(ci,T,"TestLoadImage: timeout",!1,_,C),d.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else _(!1)}function Ii(h,_){const T=new Dn,C=new AbortController,J=setTimeout(()=>{C.abort(),ci(T,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:C.signal}).then(ot=>{clearTimeout(J),ot.ok?ci(T,"TestPingServer: ok",!0,_):ci(T,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(J),ci(T,"TestPingServer: error",!1,_)})}function ci(h,_,T,C,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),C(T)}catch{}}function sa(){this.g=new Rn}function Ki(h,_,T){const C=T||"";try{Rl(h,function(J,ot){let _t=J;m(J)&&(_t=Ze(J)),_.push(C+ot+"="+encodeURIComponent(_t))})}catch(J){throw _.push(C+"type="+encodeURIComponent("_badmap")),J}}function ts(h){this.l=h.Ub||null,this.j=h.eb||!1}x(ts,dr),ts.prototype.g=function(){return new Tr(this.l,this.j)},ts.prototype.i=function(h){return function(){return h}}({});function Tr(h,_){te.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Tr,te),e=Tr.prototype,e.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Qi(this)},e.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xi(this)),this.readyState=0},e.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Qi(this)),this.g&&(this.readyState=3,Qi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Nl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Nl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}e.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Xi(this):Qi(this),this.readyState==3&&Nl(this)}},e.Ra=function(h){this.g&&(this.response=this.responseText=h,Xi(this))},e.Qa=function(h){this.g&&(this.response=h,Xi(this))},e.ga=function(){this.g&&Xi(this)};function Xi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Qi(h)}e.setRequestHeader=function(h,_){this.u.append(h,_)},e.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var T=_.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=_.next();return h.join(`\r
`)};function Qi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Tr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Dl(h){let _="";return W(h,function(T,C){_+=C,_+=":",_+=T,_+=`\r
`}),_}function We(h,_,T){t:{for(C in T){var C=!1;break t}C=!0}C||(T=Dl(T),typeof h=="string"?T!=null&&encodeURIComponent(String(T)):se(h,_,T))}function ee(h){te.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(ee,te);var to=/^https?$/i,aa=["POST","PUT"];e=ee.prototype,e.Ha=function(h){this.J=h},e.ea=function(h,_,T,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():si.g(),this.v=this.o?gr(this.o):gr(si),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ot){Ic(this,ot);return}if(h=T||"",T=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var J in C)T.set(J,C[J]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const ot of C.keys())T.set(ot,C.get(ot));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(T.keys()).find(ot=>ot.toLowerCase()=="content-type"),J=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(aa,_,void 0))||C||J||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ot,_t]of T)this.g.setRequestHeader(ot,_t);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{oa(this),this.u=!0,this.g.send(h),this.u=!1}catch(ot){Ic(this,ot)}};function Ic(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,eo(h),Zi(h)}function eo(h){h.A||(h.A=!0,Ft(h,"complete"),Ft(h,"error"))}e.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ft(this,"complete"),Ft(this,"abort"),Zi(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zi(this,!0)),ee.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?no(this):this.bb())},e.bb=function(){no(this)};function no(h){if(h.h&&typeof c<"u"&&(!h.v[1]||hi(h)!=4||h.Z()!=2)){if(h.u&&hi(h)==4)Te(h.Ea,0,h);else if(Ft(h,"readystatechange"),hi(h)==4){h.h=!1;try{const _t=h.Z();t:switch(_t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break t;default:_=!1}var T;if(!(T=_)){var C;if(C=_t===0){var J=String(h.D).match(ta)[1]||null;!J&&d.self&&d.self.location&&(J=d.self.location.protocol.slice(0,-1)),C=!to.test(J?J.toLowerCase():"")}T=C}if(T)Ft(h,"complete"),Ft(h,"success");else{h.m=6;try{var ot=2<hi(h)?h.g.statusText:""}catch{ot=""}h.l=ot+" ["+h.Z()+"]",eo(h)}}finally{Zi(h)}}}}function Zi(h,_){if(h.g){oa(h);const T=h.g,C=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Ft(h,"ready");try{T.onreadystatechange=C}catch{}}}function oa(h){h.I&&(d.clearTimeout(h.I),h.I=null)}e.isActive=function(){return!!this.g};function hi(h){return h.g?h.g.readyState:0}e.Z=function(){try{return 2<hi(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),an(_)}};function Cc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function bd(h){const _={};h=(h.g&&2<=hi(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(q(h[C]))continue;var T=U(h[C]);const J=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ot=_[J]||[];_[J]=ot,ot.push(T)}V(_,function(C){return C.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function la(h,_,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||_}function io(h){this.Aa=0,this.i=[],this.j=new Dn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=la("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=la("baseRetryDelayMs",5e3,h),this.cb=la("retryDelaySeedMs",1e4,h),this.Wa=la("forwardChannelMaxRetries",2,h),this.wa=la("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Ri(h&&h.concurrentRequestLimit),this.Da=new sa,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=io.prototype,e.la=8,e.G=1,e.connect=function(h,_,T,C){de(0),this.W=h,this.H=_||{},T&&C!==void 0&&(this.H.OSID=T,this.H.OAID=C),this.F=this.X,this.I=kc(this,null,this.W),so(this)};function Ml(h){if(xc(h),h.G==3){var _=h.U++,T=Fn(h.I);if(se(T,"SID",h.K),se(T,"RID",_),se(T,"TYPE","terminate"),ua(h,T),_=new on(h,h.j,_),_.L=2,_.v=na(Fn(T)),T=!1,d.navigator&&d.navigator.sendBeacon)try{T=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!T&&d.Image&&(new Image().src=_.v,T=!0),T||(_.g=Pc(_.j,null),_.g.ea(_.v)),_.F=Date.now(),pr(_)}Vc(h)}function ro(h){h.g&&(ca(h),h.g.cancel(),h.g=null)}function xc(h){ro(h),h.u&&(d.clearTimeout(h.u),h.u=null),ao(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function so(h){if(!Wr(h.h)&&!h.s){h.s=!0;var _=h.Ga;j||N(),rt||(j(),rt=!0),X.add(_,h),h.B=0}}function Ad(h,_){return $i(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ae(E(h.Ga,h,_),kl(h,h.B)),h.B++,!0)}e.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const J=new on(this,this.j,h);let ot=this.o;if(this.S&&(ot?(ot=R(ot),P(ot,this.S)):ot=this.S),this.m!==null||this.O||(J.H=ot,ot=null),this.P)t:{for(var _=0,T=0;T<this.i.length;T++){e:{var C=this.i[T];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break e}C=void 0}if(C===void 0)break;if(_+=C,4096<_){_=T;break t}if(_===4096||T===this.i.length-1){_=T+1;break t}}_=1e3}else _=1e3;_=Nc(this,J,_),T=Fn(this.I),se(T,"RID",h),se(T,"CVER",22),this.D&&se(T,"X-HTTP-Session-Id",this.D),ua(this,T),ot&&(this.O?_="headers="+encodeURIComponent(String(Dl(ot)))+"&"+_:this.m&&We(T,this.m,ot)),Za(this.h,J),this.Ua&&se(T,"TYPE","init"),this.P?(se(T,"$req",_),se(T,"SID","null"),J.T=!0,qn(J,T,null)):qn(J,T,_),this.G=2}}else this.G==3&&(h?Ol(this,h):this.i.length==0||Wr(this.h)||Ol(this))};function Ol(h,_){var T;_?T=_.l:T=h.U++;const C=Fn(h.I);se(C,"SID",h.K),se(C,"RID",T),se(C,"AID",h.T),ua(h,C),h.m&&h.o&&We(C,h.m,h.o),T=new on(h,h.j,T,h.B+1),h.m===null&&(T.H=h.o),_&&(h.i=_.D.concat(h.i)),_=Nc(h,T,1e3),T.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Za(h.h,T),qn(T,C,_)}function ua(h,_){h.H&&W(h.H,function(T,C){se(_,C,T)}),h.l&&Rl({},function(T,C){se(_,C,T)})}function Nc(h,_,T){T=Math.min(h.i.length,T);var C=h.l?E(h.l.Na,h.l,h):null;t:{var J=h.i;let ot=-1;for(;;){const _t=["count="+T];ot==-1?0<T?(ot=J[0].g,_t.push("ofs="+ot)):ot=0:_t.push("ofs="+ot);let Kt=!0;for(let qe=0;qe<T;qe++){let Xt=J[qe].g;const Je=J[qe].map;if(Xt-=ot,0>Xt)ot=Math.max(0,J[qe].g-100),Kt=!1;else try{Ki(Je,_t,"req"+Xt+"_")}catch{C&&C(Je)}}if(Kt){C=_t.join("&");break t}}}return h=h.i.splice(0,T),_.D=h,C}function Dc(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;j||N(),rt||(j(),rt=!0),X.add(_,h),h.v=0}}function Vl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ae(E(h.Fa,h),kl(h,h.v)),h.v++,!0)}e.Fa=function(){if(this.u=null,Mc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ae(E(this.ab,this),h)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,de(10),ro(this),Mc(this))};function ca(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Mc(h){h.g=new on(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=Fn(h.qa);se(_,"RID","rpc"),se(_,"SID",h.K),se(_,"AID",h.T),se(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&se(_,"TO",h.ja),se(_,"TYPE","xmlhttp"),ua(h,_),h.m&&h.o&&We(_,h.m,h.o),h.L&&(h.g.I=h.L);var T=h.g;h=h.ia,T.L=1,T.v=na(Fn(_)),T.m=null,T.P=!0,Ai(T,h)}e.Za=function(){this.C!=null&&(this.C=null,ro(this),Vl(this),de(19))};function ao(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Oc(h,_){var T=null;if(h.g==_){ao(h),ca(h),h.g=null;var C=2}else if(bl(h.h,_))T=_.D,In(h.h,_),C=1;else return;if(h.G!=0){if(_.o)if(C==1){T=_.m?_.m.length:0,_=Date.now()-_.F;var J=h.B;C=Bi(),Ft(C,new Ne(C,T)),so(h)}else Dc(h);else if(J=_.s,J==3||J==0&&0<_.X||!(C==1&&Ad(h,_)||C==2&&Vl(h)))switch(T&&0<T.length&&(_=h.h,_.i=_.i.concat(T)),J){case 1:wr(h,5);break;case 4:wr(h,10);break;case 3:wr(h,6);break;default:wr(h,2)}}}function kl(h,_){let T=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(T*=2),T*_}function wr(h,_){if(h.j.info("Error code "+_),_==2){var T=E(h.fb,h),C=h.Xa;const J=!C;C=new Pe(C||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ea(C,"https"),na(C),J?ra(C.toString(),T):Ii(C.toString(),T)}else de(2);h.G=0,h.l&&h.l.sa(_),Vc(h),xc(h)}e.fb=function(h){h?(this.j.info("Successfully pinged google.com"),de(2)):(this.j.info("Failed to ping google.com"),de(1))};function Vc(h){if(h.G=0,h.ka=[],h.l){const _=Al(h.h);(_.length!=0||h.i.length!=0)&&(M(h.ka,_),M(h.ka,h.i),h.h.i.length=0,k(h.i),h.i.length=0),h.l.ra()}}function kc(h,_,T){var C=T instanceof Pe?Fn(T):new Pe(T);if(C.g!="")_&&(C.g=_+"."+C.g),Jr(C,C.s);else{var J=d.location;C=J.protocol,_=_?_+"."+J.hostname:J.hostname,J=+J.port;var ot=new Pe(null);C&&ea(ot,C),_&&(ot.g=_),J&&Jr(ot,J),T&&(ot.l=T),C=ot}return T=h.D,_=h.ya,T&&_&&se(C,T,_),se(C,"VER",h.la),ua(h,C),C}function Pc(h,_,T){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new ee(new ts({eb:T})):new ee(h.pa),_.Ha(h.J),_}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lc(){}e=Lc.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function oo(){}oo.prototype.g=function(h,_){return new Cn(h,_)};function Cn(h,_){te.call(this),this.g=new io(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!q(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!q(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Wi(this)}x(Cn,te),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){Ml(this.g)},Cn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.u&&(T={},T.__data__=Ze(h),h=T);_.i.push(new Qa(_.Ya++,h)),_.G==3&&so(_)},Cn.prototype.N=function(){this.g.l=null,delete this.j,Ml(this.g),delete this.g,Cn.aa.N.call(this)};function Uc(h){ni.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){t:{for(const T in _){h=T;break t}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}x(Uc,ni);function zc(){Hn.call(this),this.status=1}x(zc,Hn);function Wi(h){this.g=h}x(Wi,Lc),Wi.prototype.ua=function(){Ft(this.g,"a")},Wi.prototype.ta=function(h){Ft(this.g,new Uc(h))},Wi.prototype.sa=function(h){Ft(this.g,new zc)},Wi.prototype.ra=function(){Ft(this.g,"b")},oo.prototype.createWebChannel=oo.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,L1=function(){return new oo},P1=function(){return Bi()},k1=ii,mp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fi.NO_ERROR=0,Fi.TIMEOUT=8,Fi.HTTP_ERROR=6,of=Fi,ri.COMPLETE="complete",V1=ri,bi.EventType=Bn,Bn.OPEN="a",Bn.CLOSE="b",Bn.ERROR="c",Bn.MESSAGE="d",te.prototype.listen=te.prototype.K,Vu=bi,ee.prototype.listenOnce=ee.prototype.L,ee.prototype.getLastError=ee.prototype.Ka,ee.prototype.getLastErrorCode=ee.prototype.Ba,ee.prototype.getStatus=ee.prototype.Z,ee.prototype.getResponseJson=ee.prototype.Oa,ee.prototype.getResponseText=ee.prototype.oa,ee.prototype.send=ee.prototype.ea,ee.prototype.setWithCredentials=ee.prototype.Ha,O1=ee}).apply(typeof Xh<"u"?Xh:typeof self<"u"?self:typeof window<"u"?window:{});const ST="@firebase/firestore",bT="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pl="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La=new Jp("@firebase/firestore");function qo(){return La.logLevel}function vt(e,...t){if(La.logLevel<=$t.DEBUG){const n=t.map(ny);La.debug(`Firestore (${pl}): ${e}`,...n)}}function $r(e,...t){if(La.logLevel<=$t.ERROR){const n=t.map(ny);La.error(`Firestore (${pl}): ${e}`,...n)}}function ol(e,...t){if(La.logLevel<=$t.WARN){const n=t.map(ny);La.warn(`Firestore (${pl}): ${e}`,...n)}}function ny(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,U1(e,r,n)}function U1(e,t,n){let r=`FIRESTORE (${pl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw $r(r),new Error(r)}function ne(e,t,n,r){let a="Unexpected state";typeof n=="string"?a=n:r=n,e||U1(t,a,r)}function Vt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Et extends Xr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class p4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(En.UNAUTHENTICATED))}shutdown(){}}class y4{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _4{constructor(t){this.t=t,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ne(this.o===void 0,42304);let r=this.i;const a=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let l=new Ls;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ls,t.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const g=l;t.enqueueRetryable(async()=>{await g.promise,await a(this.currentUser)})},d=g=>{vt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(g=>d(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(vt("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ls)}},0),c()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(vt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ne(typeof r.accessToken=="string",31837,{l:r}),new z1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ne(t===null||typeof t=="string",2055,{h:t}),new En(t)}}class v4{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=En.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class E4{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new v4(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(En.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AT{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class T4{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ei(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ne(this.o===void 0,3512);const r=l=>{l.error!=null&&vt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,vt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>r(l))};const a=l=>{vt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):vt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new AT(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ne(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new AT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=w4(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<n&&(r+=t.charAt(a[l]%62))}return r}}function Bt(e,t){return e<t?-1:e>t?1:0}function pp(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),a=t.codePointAt(n);if(r!==a){if(r<128&&a<128)return Bt(r,a);{const l=B1(),c=S4(l.encode(RT(e,n)),l.encode(RT(t,n)));return c!==0?c:Bt(r,a)}}n+=r>65535?2:1}return Bt(e.length,t.length)}function RT(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function S4(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Bt(e[n],t[n]);return Bt(e.length,t.length)}function ll(e,t,n){return e.length===t.length&&e.every((r,a)=>n(r,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=-62135596800,CT=1e6;class ye{static now(){return ye.fromMillis(Date.now())}static fromDate(t){return ye.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*CT);return new ye(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Et(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Et(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<IT)throw new Et(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Et(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/CT}_compareTo(t){return this.seconds===t.seconds?Bt(this.nanoseconds,t.nanoseconds):Bt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-IT;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{static fromTimestamp(t){return new Ot(t)}static min(){return new Ot(new ye(0,0))}static max(){return new Ot(new ye(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="__name__";class sr{constructor(t,n,r){n===void 0?n=0:n>t.length&&Dt(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&Dt(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return sr.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof sr?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let a=0;a<r;a++){const l=sr.compareSegments(t.get(a),n.get(a));if(l!==0)return l}return Bt(t.length,n.length)}static compareSegments(t,n){const r=sr.isNumericId(t),a=sr.isNumericId(n);return r&&!a?-1:!r&&a?1:r&&a?sr.extractNumericId(t).compare(sr.extractNumericId(n)):pp(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ps.fromString(t.substring(4,t.length-2))}}class pe extends sr{construct(t,n,r){return new pe(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Et(dt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(a=>a.length>0))}return new pe(n)}static emptyPath(){return new pe([])}}const b4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends sr{construct(t,n,r){return new dn(t,n,r)}static isValidIdentifier(t){return b4.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xT}static keyField(){return new dn([xT])}static fromServerFormat(t){const n=[];let r="",a=0;const l=()=>{if(r.length===0)throw new Et(dt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;a<t.length;){const d=t[a];if(d==="\\"){if(a+1===t.length)throw new Et(dt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Et(dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new Et(dt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new dn(n)}static emptyPath(){return new dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(t){this.path=t}static fromPath(t){return new Rt(pe.fromString(t))}static fromName(t){return new Rt(pe.fromString(t).popFirst(5))}static empty(){return new Rt(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&pe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return pe.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Rt(new pe(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju=-1;function A4(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,a=Ot.fromTimestamp(r===1e9?new ye(n+1,0):new ye(n,r));return new Bs(a,Rt.empty(),t)}function R4(e){return new Bs(e.readTime,e.key,Ju)}class Bs{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Bs(Ot.min(),Rt.empty(),Ju)}static max(){return new Bs(Ot.max(),Rt.empty(),Ju)}}function I4(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Rt.comparator(e.documentKey,t.documentKey),n!==0?n:Bt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class x4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yl(e){if(e.code!==dt.FAILED_PRECONDITION||e.message!==C4)throw e;vt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Dt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new gt((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(n,l).next(r,a)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof gt?n:gt.resolve(n)}catch(n){return gt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):gt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):gt.reject(n)}static resolve(t){return new gt((n,r)=>{n(t)})}static reject(t){return new gt((n,r)=>{r(t)})}static waitFor(t){return new gt((n,r)=>{let a=0,l=0,c=!1;t.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&n()},g=>r(g))}),c=!0,l===a&&n()})}static or(t){let n=gt.resolve(!1);for(const r of t)n=n.next(a=>a?gt.resolve(a):r());return n}static forEach(t,n){const r=[];return t.forEach((a,l)=>{r.push(n.call(this,a,l))}),this.waitFor(r)}static mapArray(t,n){return new gt((r,a)=>{const l=t.length,c=new Array(l);let d=0;for(let g=0;g<l;g++){const m=g;n(t[m]).next(y=>{c[m]=y,++d,d===l&&r(c)},y=>a(y))}})}static doWhile(t,n){return new gt((r,a)=>{const l=()=>{t()===!0?n().next(()=>{l()},a):r()};l()})}}function N4(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _l(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}Jf.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy=-1;function td(e){return e==null}function If(e){return e===0&&1/e==-1/0}function D4(e){return typeof e=="number"&&Number.isInteger(e)&&!If(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="";function M4(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=NT(t)),t=O4(e.get(n),t);return NT(t)}function O4(e,t){let n=t;const r=e.length;for(let a=0;a<r;a++){const l=e.charAt(a);switch(l){case"\0":n+="";break;case q1:n+="";break;default:n+=l}}return n}function NT(e){return e+q1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function $s(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function F1(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(t,n){this.comparator=t,this.root=n||fn.EMPTY}insert(t,n){return new be(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,fn.BLACK,null,null))}remove(t){return new be(this.comparator,this.root.remove(t,this.comparator).copy(null,null,fn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(t,r.key);if(a===0)return n+r.left.size;a<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Qh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Qh(this.root,t,this.comparator,!1)}getReverseIterator(){return new Qh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Qh(this.root,t,this.comparator,!0)}}class Qh{constructor(t,n,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=n?r(t.key,n):1,n&&a&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class fn{constructor(t,n,r,a,l){this.key=t,this.value=n,this.color=r??fn.RED,this.left=a??fn.EMPTY,this.right=l??fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,a,l){return new fn(t??this.key,n??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let a=this;const l=r(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,n,r),null):l===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(t,n,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return fn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,a=this;if(n(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(t,a.key)===0){if(a.right.isEmpty())return fn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Dt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Dt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Dt(27949);return t+(this.isRed()?0:1)}}fn.EMPTY=null,fn.RED=!0,fn.BLACK=!1;fn.EMPTY=new class{constructor(){this.size=0}get key(){throw Dt(57766)}get value(){throw Dt(16141)}get color(){throw Dt(16727)}get left(){throw Dt(29726)}get right(){throw Dt(36894)}copy(t,n,r,a,l){return this}insert(t,n,r){return new fn(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t){this.comparator=t,this.data=new be(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,t[1])>=0)return;n(a.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new MT(this.data.getIterator())}getIteratorFrom(t){return new MT(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof $e)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new $e(this.comparator);return n.data=t,n}}class MT{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(t){this.fields=t,t.sort(dn.comparator)}static empty(){return new Zn([])}unionWith(t){let n=new $e(dn.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Zn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return ll(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new j1("Invalid base64 string: "+l):l}}(t);return new gn(n)}static fromUint8Array(t){const n=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(t);return new gn(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Bt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const V4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hs(e){if(ne(!!e,39018),typeof e=="string"){let t=0;const n=V4.exec(e);if(ne(!!n,46558,{timestamp:e}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),t=Number(a)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Oe(e.seconds),nanos:Oe(e.nanos)}}function Oe(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function qs(e){return typeof e=="string"?gn.fromBase64String(e):gn.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="server_timestamp",$1="__type__",Y1="__previous_value__",K1="__local_write_time__";function ry(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{})[$1])===null||n===void 0?void 0:n.stringValue)===G1}function ed(e){const t=e.mapValue.fields[Y1];return ry(t)?ed(t):t}function tc(e){const t=Hs(e.mapValue.fields[K1].timestampValue);return new ye(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(t,n,r,a,l,c,d,g,m,y){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=m,this.isUsingEmulator=y}}const Cf="(default)";class ec{constructor(t,n){this.projectId=t,this.database=n||Cf}static empty(){return new ec("","")}get isDefaultDatabase(){return this.database===Cf}isEqual(t){return t instanceof ec&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="__type__",P4="__max__",Zh={mapValue:{}},Q1="__vector__",xf="value";function Fs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ry(e)?4:U4(e)?9007199254740991:L4(e)?10:11:Dt(28295,{value:e})}function hr(e,t){if(e===t)return!0;const n=Fs(e);if(n!==Fs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return tc(e).isEqual(tc(t));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Hs(a.timestampValue),d=Hs(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,l){return qs(a.bytesValue).isEqual(qs(l.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,l){return Oe(a.geoPointValue.latitude)===Oe(l.geoPointValue.latitude)&&Oe(a.geoPointValue.longitude)===Oe(l.geoPointValue.longitude)}(e,t);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return Oe(a.integerValue)===Oe(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Oe(a.doubleValue),d=Oe(l.doubleValue);return c===d?If(c)===If(d):isNaN(c)&&isNaN(d)}return!1}(e,t);case 9:return ll(e.arrayValue.values||[],t.arrayValue.values||[],hr);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(DT(c)!==DT(d))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(d[g]===void 0||!hr(c[g],d[g])))return!1;return!0}(e,t);default:return Dt(52216,{left:e})}}function nc(e,t){return(e.values||[]).find(n=>hr(n,t))!==void 0}function ul(e,t){if(e===t)return 0;const n=Fs(e),r=Fs(t);if(n!==r)return Bt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Bt(e.booleanValue,t.booleanValue);case 2:return function(l,c){const d=Oe(l.integerValue||l.doubleValue),g=Oe(c.integerValue||c.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(e,t);case 3:return OT(e.timestampValue,t.timestampValue);case 4:return OT(tc(e),tc(t));case 5:return pp(e.stringValue,t.stringValue);case 6:return function(l,c){const d=qs(l),g=qs(c);return d.compareTo(g)}(e.bytesValue,t.bytesValue);case 7:return function(l,c){const d=l.split("/"),g=c.split("/");for(let m=0;m<d.length&&m<g.length;m++){const y=Bt(d[m],g[m]);if(y!==0)return y}return Bt(d.length,g.length)}(e.referenceValue,t.referenceValue);case 8:return function(l,c){const d=Bt(Oe(l.latitude),Oe(c.latitude));return d!==0?d:Bt(Oe(l.longitude),Oe(c.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return VT(e.arrayValue,t.arrayValue);case 10:return function(l,c){var d,g,m,y;const v=l.fields||{},E=c.fields||{},S=(d=v[xf])===null||d===void 0?void 0:d.arrayValue,x=(g=E[xf])===null||g===void 0?void 0:g.arrayValue,k=Bt(((m=S?.values)===null||m===void 0?void 0:m.length)||0,((y=x?.values)===null||y===void 0?void 0:y.length)||0);return k!==0?k:VT(S,x)}(e.mapValue,t.mapValue);case 11:return function(l,c){if(l===Zh.mapValue&&c===Zh.mapValue)return 0;if(l===Zh.mapValue)return 1;if(c===Zh.mapValue)return-1;const d=l.fields||{},g=Object.keys(d),m=c.fields||{},y=Object.keys(m);g.sort(),y.sort();for(let v=0;v<g.length&&v<y.length;++v){const E=pp(g[v],y[v]);if(E!==0)return E;const S=ul(d[g[v]],m[y[v]]);if(S!==0)return S}return Bt(g.length,y.length)}(e.mapValue,t.mapValue);default:throw Dt(23264,{Pe:n})}}function OT(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Bt(e,t);const n=Hs(e),r=Hs(t),a=Bt(n.seconds,r.seconds);return a!==0?a:Bt(n.nanos,r.nanos)}function VT(e,t){const n=e.values||[],r=t.values||[];for(let a=0;a<n.length&&a<r.length;++a){const l=ul(n[a],r[a]);if(l)return l}return Bt(n.length,r.length)}function cl(e){return yp(e)}function yp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Hs(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return qs(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Rt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",a=!0;for(const l of n.values||[])a?a=!1:r+=",",r+=yp(l);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${yp(n.fields[c])}`;return a+"}"}(e.mapValue):Dt(61005,{value:e})}function lf(e){switch(Fs(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ed(e);return t?16+lf(t):16;case 5:return 2*e.stringValue.length;case 6:return qs(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,l)=>a+lf(l),0)}(e.arrayValue);case 10:case 11:return function(r){let a=0;return $s(r.fields,(l,c)=>{a+=l.length+lf(c)}),a}(e.mapValue);default:throw Dt(13486,{value:e})}}function kT(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function _p(e){return!!e&&"integerValue"in e}function sy(e){return!!e&&"arrayValue"in e}function PT(e){return!!e&&"nullValue"in e}function LT(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function uf(e){return!!e&&"mapValue"in e}function L4(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{})[X1])===null||n===void 0?void 0:n.stringValue)===Q1}function Uu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return $s(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Uu(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Uu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function U4(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===P4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t){this.value=t}static empty(){return new Pn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!uf(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Uu(n)}setAll(t){let n=dn.emptyPath(),r={},a=[];t.forEach((c,d)=>{if(!n.isImmediateParentOf(d)){const g=this.getFieldsMap(n);this.applyChanges(g,r,a),r={},a=[],n=d.popLast()}c?r[d.lastSegment()]=Uu(c):a.push(d.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,r,a)}delete(t){const n=this.field(t.popLast());uf(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return hr(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let a=n.mapValue.fields[t.get(r)];uf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=a),n=a}return n.mapValue.fields}applyChanges(t,n,r){$s(n,(a,l)=>t[a]=l);for(const a of r)delete t[a]}clone(){return new Pn(Uu(this.value))}}function Z1(e){const t=[];return $s(e.fields,(n,r)=>{const a=new dn([n]);if(uf(r)){const l=Z1(r.mapValue).fields;if(l.length===0)t.push(a);else for(const c of l)t.push(a.child(c))}else t.push(a)}),new Zn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(t,n,r,a,l,c,d){this.key=t,this.documentType=n,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(t){return new Tn(t,0,Ot.min(),Ot.min(),Ot.min(),Pn.empty(),0)}static newFoundDocument(t,n,r,a){return new Tn(t,1,n,Ot.min(),r,a,0)}static newNoDocument(t,n){return new Tn(t,2,n,Ot.min(),Ot.min(),Pn.empty(),0)}static newUnknownDocument(t,n){return new Tn(t,3,n,Ot.min(),Ot.min(),Pn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ot.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Tn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(t,n){this.position=t,this.inclusive=n}}function UT(e,t,n){let r=0;for(let a=0;a<e.position.length;a++){const l=t[a],c=e.position[a];if(l.field.isKeyField()?r=Rt.comparator(Rt.fromName(c.referenceValue),n.key):r=ul(c,n.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function zT(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!hr(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(t,n="asc"){this.field=t,this.dir=n}}function z4(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{}class Be extends W1{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new H4(t,n,r):n==="array-contains"?new j4(t,r):n==="in"?new G4(t,r):n==="not-in"?new $4(t,r):n==="array-contains-any"?new Y4(t,r):new Be(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new q4(t,r):new F4(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ul(n,this.value)):n!==null&&Fs(this.value)===Fs(n)&&this.matchesComparison(ul(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Dt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vi extends W1{constructor(t,n){super(),this.filters=t,this.op=n,this.Te=null}static create(t,n){return new Vi(t,n)}matches(t){return J1(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function J1(e){return e.op==="and"}function tb(e){return B4(e)&&J1(e)}function B4(e){for(const t of e.filters)if(t instanceof Vi)return!1;return!0}function vp(e){if(e instanceof Be)return e.field.canonicalString()+e.op.toString()+cl(e.value);if(tb(e))return e.filters.map(t=>vp(t)).join(",");{const t=e.filters.map(n=>vp(n)).join(",");return`${e.op}(${t})`}}function eb(e,t){return e instanceof Be?function(r,a){return a instanceof Be&&r.op===a.op&&r.field.isEqual(a.field)&&hr(r.value,a.value)}(e,t):e instanceof Vi?function(r,a){return a instanceof Vi&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((l,c,d)=>l&&eb(c,a.filters[d]),!0):!1}(e,t):void Dt(19439)}function nb(e){return e instanceof Be?function(n){return`${n.field.canonicalString()} ${n.op} ${cl(n.value)}`}(e):e instanceof Vi?function(n){return n.op.toString()+" {"+n.getFilters().map(nb).join(" ,")+"}"}(e):"Filter"}class H4 extends Be{constructor(t,n,r){super(t,n,r),this.key=Rt.fromName(r.referenceValue)}matches(t){const n=Rt.comparator(t.key,this.key);return this.matchesComparison(n)}}class q4 extends Be{constructor(t,n){super(t,"in",n),this.keys=ib("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class F4 extends Be{constructor(t,n){super(t,"not-in",n),this.keys=ib("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function ib(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Rt.fromName(r.referenceValue))}class j4 extends Be{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return sy(n)&&nc(n.arrayValue,this.value)}}class G4 extends Be{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&nc(this.value.arrayValue,n)}}class $4 extends Be{constructor(t,n){super(t,"not-in",n)}matches(t){if(nc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!nc(this.value.arrayValue,n)}}class Y4 extends Be{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!sy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>nc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(t,n=null,r=[],a=[],l=null,c=null,d=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Ie=null}}function BT(e,t=null,n=[],r=[],a=null,l=null,c=null){return new K4(e,t,n,r,a,l,c)}function ay(e){const t=Vt(e);if(t.Ie===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>vp(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),td(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>cl(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>cl(r)).join(",")),t.Ie=n}return t.Ie}function oy(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!z4(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!eb(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!zT(e.startAt,t.startAt)&&zT(e.endAt,t.endAt)}function Ep(e){return Rt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(t,n=null,r=[],a=[],l=null,c="F",d=null,g=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=g,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function X4(e,t,n,r,a,l,c,d){return new vl(e,t,n,r,a,l,c,d)}function rb(e){return new vl(e)}function HT(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function sb(e){return e.collectionGroup!==null}function zu(e){const t=Vt(e);if(t.Ee===null){t.Ee=[];const n=new Set;for(const l of t.explicitOrderBy)t.Ee.push(l),n.add(l.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new $e(dn.comparator);return c.filters.forEach(g=>{g.getFlattenedFilters().forEach(m=>{m.isInequality()&&(d=d.add(m.field))})}),d})(t).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||t.Ee.push(new ic(l,r))}),n.has(dn.keyField().canonicalString())||t.Ee.push(new ic(dn.keyField(),r))}return t.Ee}function or(e){const t=Vt(e);return t.de||(t.de=Q4(t,zu(e))),t.de}function Q4(e,t){if(e.limitType==="F")return BT(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new ic(a.field,l)});const n=e.endAt?new Nf(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Nf(e.startAt.position,e.startAt.inclusive):null;return BT(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Tp(e,t){const n=e.filters.concat([t]);return new vl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function wp(e,t,n){return new vl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function nd(e,t){return oy(or(e),or(t))&&e.limitType===t.limitType}function ab(e){return`${ay(or(e))}|lt:${e.limitType}`}function Fo(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(a=>nb(a)).join(", ")}]`),td(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(a=>cl(a)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(a=>cl(a)).join(",")),`Target(${r})`}(or(e))}; limitType=${e.limitType})`}function id(e,t){return t.isFoundDocument()&&function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Rt.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(e,t)&&function(r,a){for(const l of zu(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(e,t)&&function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0}(e,t)&&function(r,a){return!(r.startAt&&!function(c,d,g){const m=UT(c,d,g);return c.inclusive?m<=0:m<0}(r.startAt,zu(r),a)||r.endAt&&!function(c,d,g){const m=UT(c,d,g);return c.inclusive?m>=0:m>0}(r.endAt,zu(r),a))}(e,t)}function Z4(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ob(e){return(t,n)=>{let r=!1;for(const a of zu(e)){const l=W4(a,t,n);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function W4(e,t,n){const r=e.field.isKeyField()?Rt.comparator(t.key,n.key):function(l,c,d){const g=c.data.field(l),m=d.data.field(l);return g!==null&&m!==null?ul(g,m):Dt(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Dt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,t))return l}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),a=this.inner[r];if(a===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],t))return void(a[l]=[t,n]);a.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],t))return r.length===1?delete this.inner[n]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(t){$s(this.inner,(n,r)=>{for(const[a,l]of r)t(a,l)})}isEmpty(){return F1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=new be(Rt.comparator);function Yr(){return J4}const lb=new be(Rt.comparator);function ku(...e){let t=lb;for(const n of e)t=t.insert(n.key,n);return t}function ub(e){let t=lb;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Na(){return Bu()}function cb(){return Bu()}function Bu(){return new qa(e=>e.toString(),(e,t)=>e.isEqual(t))}const tV=new be(Rt.comparator),eV=new $e(Rt.comparator);function Yt(...e){let t=eV;for(const n of e)t=t.add(n);return t}const nV=new $e(Bt);function iV(){return nV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:If(t)?"-0":t}}function hb(e){return{integerValue:""+e}}function rV(e,t){return D4(t)?hb(t):ly(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(){this._=void 0}}function sV(e,t,n){return e instanceof Df?function(a,l){const c={fields:{[$1]:{stringValue:G1},[K1]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&ry(l)&&(l=ed(l)),l&&(c.fields[Y1]=l),{mapValue:c}}(n,t):e instanceof rc?db(e,t):e instanceof sc?gb(e,t):function(a,l){const c=fb(a,l),d=qT(c)+qT(a.Re);return _p(c)&&_p(a.Re)?hb(d):ly(a.serializer,d)}(e,t)}function aV(e,t,n){return e instanceof rc?db(e,t):e instanceof sc?gb(e,t):n}function fb(e,t){return e instanceof Mf?function(r){return _p(r)||function(l){return!!l&&"doubleValue"in l}(r)}(t)?t:{integerValue:0}:null}class Df extends rd{}class rc extends rd{constructor(t){super(),this.elements=t}}function db(e,t){const n=mb(t);for(const r of e.elements)n.some(a=>hr(a,r))||n.push(r);return{arrayValue:{values:n}}}class sc extends rd{constructor(t){super(),this.elements=t}}function gb(e,t){let n=mb(t);for(const r of e.elements)n=n.filter(a=>!hr(a,r));return{arrayValue:{values:n}}}class Mf extends rd{constructor(t,n){super(),this.serializer=t,this.Re=n}}function qT(e){return Oe(e.integerValue||e.doubleValue)}function mb(e){return sy(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function oV(e,t){return e.field.isEqual(t.field)&&function(r,a){return r instanceof rc&&a instanceof rc||r instanceof sc&&a instanceof sc?ll(r.elements,a.elements,hr):r instanceof Mf&&a instanceof Mf?hr(r.Re,a.Re):r instanceof Df&&a instanceof Df}(e.transform,t.transform)}class lV{constructor(t,n){this.version=t,this.transformResults=n}}class Wn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Wn}static exists(t){return new Wn(void 0,t)}static updateTime(t){return new Wn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function cf(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class sd{}function pb(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new ad(e.key,Wn.none()):new mc(e.key,e.data,Wn.none());{const n=e.data,r=Pn.empty();let a=new $e(dn.comparator);for(let l of t.fields)if(!a.has(l)){let c=n.field(l);c===null&&l.length>1&&(l=l.popLast(),c=n.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new Ys(e.key,r,new Zn(a.toArray()),Wn.none())}}function uV(e,t,n){e instanceof mc?function(a,l,c){const d=a.value.clone(),g=jT(a.fieldTransforms,l,c.transformResults);d.setAll(g),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(e,t,n):e instanceof Ys?function(a,l,c){if(!cf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=jT(a.fieldTransforms,l,c.transformResults),g=l.data;g.setAll(yb(a)),g.setAll(d),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()}(e,t,n):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,n)}function Hu(e,t,n,r){return e instanceof mc?function(l,c,d,g){if(!cf(l.precondition,c))return d;const m=l.value.clone(),y=GT(l.fieldTransforms,g,c);return m.setAll(y),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ys?function(l,c,d,g){if(!cf(l.precondition,c))return d;const m=GT(l.fieldTransforms,g,c),y=c.data;return y.setAll(yb(l)),y.setAll(m),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(v=>v.field))}(e,t,n,r):function(l,c,d){return cf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(e,t,n)}function cV(e,t){let n=null;for(const r of e.fieldTransforms){const a=t.data.field(r.field),l=fb(r.transform,a||null);l!=null&&(n===null&&(n=Pn.empty()),n.set(r.field,l))}return n||null}function FT(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&ll(r,a,(l,c)=>oV(l,c))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class mc extends sd{constructor(t,n,r,a=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ys extends sd{constructor(t,n,r,a,l=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function yb(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function jT(e,t,n){const r=new Map;ne(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let a=0;a<n.length;a++){const l=e[a],c=l.transform,d=t.data.field(l.field);r.set(l.field,aV(c,d,n[a]))}return r}function GT(e,t,n){const r=new Map;for(const a of e){const l=a.transform,c=n.data.field(a.field);r.set(a.field,sV(l,c,t))}return r}class ad extends sd{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hV extends sd{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(t,n,r,a){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(t.key)&&uV(l,t,r[a])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Hu(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Hu(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=cb();return this.mutations.forEach(a=>{const l=t.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=n.has(a.key)?null:d;const g=pb(c,d);g!==null&&r.set(a.key,g),c.isValidDocument()||c.convertToNoDocument(Ot.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Yt())}isEqual(t){return this.batchId===t.batchId&&ll(this.mutations,t.mutations,(n,r)=>FT(n,r))&&ll(this.baseMutations,t.baseMutations,(n,r)=>FT(n,r))}}class uy{constructor(t,n,r,a){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}static from(t,n,r){ne(t.mutations.length===r.length,58842,{fe:t.mutations.length,ge:r.length});let a=function(){return tV}();const l=t.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new uy(t,n,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,Zt;function mV(e){switch(e){case dt.OK:return Dt(64938);case dt.CANCELLED:case dt.UNKNOWN:case dt.DEADLINE_EXCEEDED:case dt.RESOURCE_EXHAUSTED:case dt.INTERNAL:case dt.UNAVAILABLE:case dt.UNAUTHENTICATED:return!1;case dt.INVALID_ARGUMENT:case dt.NOT_FOUND:case dt.ALREADY_EXISTS:case dt.PERMISSION_DENIED:case dt.FAILED_PRECONDITION:case dt.ABORTED:case dt.OUT_OF_RANGE:case dt.UNIMPLEMENTED:case dt.DATA_LOSS:return!0;default:return Dt(15467,{code:e})}}function _b(e){if(e===void 0)return $r("GRPC error has no .code"),dt.UNKNOWN;switch(e){case ze.OK:return dt.OK;case ze.CANCELLED:return dt.CANCELLED;case ze.UNKNOWN:return dt.UNKNOWN;case ze.DEADLINE_EXCEEDED:return dt.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return dt.RESOURCE_EXHAUSTED;case ze.INTERNAL:return dt.INTERNAL;case ze.UNAVAILABLE:return dt.UNAVAILABLE;case ze.UNAUTHENTICATED:return dt.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return dt.INVALID_ARGUMENT;case ze.NOT_FOUND:return dt.NOT_FOUND;case ze.ALREADY_EXISTS:return dt.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return dt.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return dt.FAILED_PRECONDITION;case ze.ABORTED:return dt.ABORTED;case ze.OUT_OF_RANGE:return dt.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return dt.UNIMPLEMENTED;case ze.DATA_LOSS:return dt.DATA_LOSS;default:return Dt(39323,{code:e})}}(Zt=ze||(ze={}))[Zt.OK=0]="OK",Zt[Zt.CANCELLED=1]="CANCELLED",Zt[Zt.UNKNOWN=2]="UNKNOWN",Zt[Zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zt[Zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zt[Zt.NOT_FOUND=5]="NOT_FOUND",Zt[Zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zt[Zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zt[Zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zt[Zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zt[Zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zt[Zt.ABORTED=10]="ABORTED",Zt[Zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zt[Zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zt[Zt.INTERNAL=13]="INTERNAL",Zt[Zt.UNAVAILABLE=14]="UNAVAILABLE",Zt[Zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV=new Ps([4294967295,4294967295],0);function $T(e){const t=B1().encode(e),n=new M1;return n.update(t),new Uint8Array(n.digest())}function YT(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),a=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new Ps([n,r],0),new Ps([a,l],0)]}class cy{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Pu(`Invalid padding: ${n}`);if(r<0)throw new Pu(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Pu(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Pu(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*t.length-n,this.ye=Ps.fromNumber(this.pe)}we(t,n,r){let a=t.add(n.multiply(Ps.fromNumber(r)));return a.compare(pV)===1&&(a=new Ps([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const n=$T(t),[r,a]=YT(n);for(let l=0;l<this.hashCount;l++){const c=this.we(r,a,l);if(!this.be(c))return!1}return!0}static create(t,n,r){const a=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),c=new cy(l,a,n);return r.forEach(d=>c.insert(d)),c}insert(t){if(this.pe===0)return;const n=$T(t),[r,a]=YT(n);for(let l=0;l<this.hashCount;l++){const c=this.we(r,a,l);this.Se(c)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Pu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(t,n,r,a,l){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const a=new Map;return a.set(t,pc.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new od(Ot.min(),a,new be(Bt),Yr(),Yt())}}class pc{constructor(t,n,r,a,l){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new pc(r,n,Yt(),Yt(),Yt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(t,n,r,a){this.De=t,this.removedTargetIds=n,this.key=r,this.ve=a}}class vb{constructor(t,n){this.targetId=t,this.Ce=n}}class Eb{constructor(t,n,r=gn.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=a}}class KT{constructor(){this.Fe=0,this.Me=XT(),this.xe=gn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=Yt(),n=Yt(),r=Yt();return this.Me.forEach((a,l)=>{switch(l){case 0:t=t.add(a);break;case 2:n=n.add(a);break;case 1:r=r.add(a);break;default:Dt(38017,{changeType:l})}}),new pc(this.xe,this.Oe,t,n,r)}Qe(){this.Ne=!1,this.Me=XT()}$e(t,n){this.Ne=!0,this.Me=this.Me.insert(t,n)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,ne(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class yV{constructor(t){this.ze=t,this.je=new Map,this.He=Yr(),this.Je=Wh(),this.Ye=Wh(),this.Ze=new be(Bt)}Xe(t){for(const n of t.De)t.ve&&t.ve.isFoundDocument()?this.et(n,t.ve):this.tt(n,t.key,t.ve);for(const n of t.removedTargetIds)this.tt(n,t.key,t.ve)}nt(t){this.forEachTarget(t,n=>{const r=this.rt(n);switch(t.state){case 0:this.it(n)&&r.ke(t.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(t.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(t.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(t.resumeToken));break;default:Dt(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.je.forEach((r,a)=>{this.it(a)&&n(a)})}ot(t){const n=t.targetId,r=t.Ce.count,a=this._t(n);if(a){const l=a.target;if(Ep(l))if(r===0){const c=new Rt(l.path);this.tt(n,c,Tn.newNoDocument(c,Ot.min()))}else ne(r===1,20013,{expectedCount:r});else{const c=this.ut(n);if(c!==r){const d=this.ct(t),g=d?this.lt(d,t,c):1;if(g!==0){this.st(n);const m=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,m)}}}}}ct(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=n;let c,d;try{c=qs(r).toUint8Array()}catch(g){if(g instanceof j1)return ol("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new cy(c,a,l)}catch(g){return ol(g instanceof Pu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.pe===0?null:d}lt(t,n,r){return n.Ce.count===r-this.Tt(t,n.targetId)?0:2}Tt(t,n){const r=this.ze.getRemoteKeysForTarget(n);let a=0;return r.forEach(l=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;t.mightContain(d)||(this.tt(n,l,null),a++)}),a}It(t){const n=new Map;this.je.forEach((l,c)=>{const d=this._t(c);if(d){if(l.current&&Ep(d.target)){const g=new Rt(d.target.path);this.Et(g).has(c)||this.dt(c,g)||this.tt(c,g,Tn.newNoDocument(g,t))}l.Le&&(n.set(c,l.qe()),l.Qe())}});let r=Yt();this.Ye.forEach((l,c)=>{let d=!0;c.forEachWhile(g=>{const m=this._t(g);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(l))}),this.He.forEach((l,c)=>c.setReadTime(t));const a=new od(t,n,this.Ze,this.He,r);return this.He=Yr(),this.Je=Wh(),this.Ye=Wh(),this.Ze=new be(Bt),a}et(t,n){if(!this.it(t))return;const r=this.dt(t,n.key)?2:0;this.rt(t).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(t)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(t))}tt(t,n,r){if(!this.it(t))return;const a=this.rt(t);this.dt(t,n)?a.$e(n,1):a.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(t)),this.Ye=this.Ye.insert(n,this.At(n).add(t)),r&&(this.He=this.He.insert(n,r))}removeTarget(t){this.je.delete(t)}ut(t){const n=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let n=this.je.get(t);return n||(n=new KT,this.je.set(t,n)),n}At(t){let n=this.Ye.get(t);return n||(n=new $e(Bt),this.Ye=this.Ye.insert(t,n)),n}Et(t){let n=this.Je.get(t);return n||(n=new $e(Bt),this.Je=this.Je.insert(t,n)),n}it(t){const n=this._t(t)!==null;return n||vt("WatchChangeAggregator","Detected inactive target",t),n}_t(t){const n=this.je.get(t);return n&&n.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new KT),this.ze.getRemoteKeysForTarget(t).forEach(n=>{this.tt(t,n,null)})}dt(t,n){return this.ze.getRemoteKeysForTarget(t).has(n)}}function Wh(){return new be(Rt.comparator)}function XT(){return new be(Rt.comparator)}const _V={asc:"ASCENDING",desc:"DESCENDING"},vV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EV={and:"AND",or:"OR"};class TV{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Sp(e,t){return e.useProto3Json||td(t)?t:{value:t}}function Of(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Tb(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function wV(e,t){return Of(e,t.toTimestamp())}function lr(e){return ne(!!e,49232),Ot.fromTimestamp(function(n){const r=Hs(n);return new ye(r.seconds,r.nanos)}(e))}function hy(e,t){return bp(e,t).canonicalString()}function bp(e,t){const n=function(a){return new pe(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?n:n.child(t)}function wb(e){const t=pe.fromString(e);return ne(Ib(t),10190,{key:t.toString()}),t}function Ap(e,t){return hy(e.databaseId,t.path)}function Hm(e,t){const n=wb(t);if(n.get(1)!==e.databaseId.projectId)throw new Et(dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Et(dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Rt(bb(n))}function Sb(e,t){return hy(e.databaseId,t)}function SV(e){const t=wb(e);return t.length===4?pe.emptyPath():bb(t)}function Rp(e){return new pe(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function bb(e){return ne(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function QT(e,t,n){return{name:Ap(e,t),fields:n.value.mapValue.fields}}function bV(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Dt(39313,{state:m})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],l=function(m,y){return m.useProto3Json?(ne(y===void 0||typeof y=="string",58123),gn.fromBase64String(y||"")):(ne(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),gn.fromUint8Array(y||new Uint8Array))}(e,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(m){const y=m.code===void 0?dt.UNKNOWN:_b(m.code);return new Et(y,m.message||"")}(c);n=new Eb(r,a,l,d||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const a=Hm(e,r.document.name),l=lr(r.document.updateTime),c=r.document.createTime?lr(r.document.createTime):Ot.min(),d=new Pn({mapValue:{fields:r.document.fields}}),g=Tn.newFoundDocument(a,l,c,d),m=r.targetIds||[],y=r.removedTargetIds||[];n=new hf(m,y,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const a=Hm(e,r.document),l=r.readTime?lr(r.readTime):Ot.min(),c=Tn.newNoDocument(a,l),d=r.removedTargetIds||[];n=new hf([],d,c.key,c)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const a=Hm(e,r.document),l=r.removedTargetIds||[];n=new hf([],l,a,null)}else{if(!("filter"in t))return Dt(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new gV(a,l),d=r.targetId;n=new vb(d,c)}}return n}function AV(e,t){let n;if(t instanceof mc)n={update:QT(e,t.key,t.value)};else if(t instanceof ad)n={delete:Ap(e,t.key)};else if(t instanceof Ys)n={update:QT(e,t.key,t.data),updateMask:VV(t.fieldMask)};else{if(!(t instanceof hV))return Dt(16599,{ft:t.type});n={verify:Ap(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(l,c){const d=c.transform;if(d instanceof Df)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof rc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof sc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Mf)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw Dt(20930,{transform:c.transform})}(0,r))),t.precondition.isNone||(n.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:wV(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Dt(27497)}(e,t.precondition)),n}function RV(e,t){return e&&e.length>0?(ne(t!==void 0,14353),e.map(n=>function(a,l){let c=a.updateTime?lr(a.updateTime):lr(l);return c.isEqual(Ot.min())&&(c=lr(l)),new lV(c,a.transformResults||[])}(n,t))):[]}function IV(e,t){return{documents:[Sb(e,t.path)]}}function CV(e,t){const n={structuredQuery:{}},r=t.path;let a;t.collectionGroup!==null?(a=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Sb(e,a);const l=function(m){if(m.length!==0)return Rb(Vi.create(m,"and"))}(t.filters);l&&(n.structuredQuery.where=l);const c=function(m){if(m.length!==0)return m.map(y=>function(E){return{field:jo(E.field),direction:DV(E.dir)}}(y))}(t.orderBy);c&&(n.structuredQuery.orderBy=c);const d=Sp(e,t.limit);return d!==null&&(n.structuredQuery.limit=d),t.startAt&&(n.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(t.endAt)),{gt:n,parent:a}}function xV(e){let t=SV(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let a=null;if(r>0){ne(r===1,65062);const y=n.from[0];y.allDescendants?a=y.collectionId:t=t.child(y.collectionId)}let l=[];n.where&&(l=function(v){const E=Ab(v);return E instanceof Vi&&tb(E)?E.getFilters():[E]}(n.where));let c=[];n.orderBy&&(c=function(v){return v.map(E=>function(x){return new ic(Go(x.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(E))}(n.orderBy));let d=null;n.limit&&(d=function(v){let E;return E=typeof v=="object"?v.value:v,td(E)?null:E}(n.limit));let g=null;n.startAt&&(g=function(v){const E=!!v.before,S=v.values||[];return new Nf(S,E)}(n.startAt));let m=null;return n.endAt&&(m=function(v){const E=!v.before,S=v.values||[];return new Nf(S,E)}(n.endAt)),X4(t,a,c,l,d,"F",g,m)}function NV(e,t){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Dt(28987,{purpose:a})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Ab(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Go(n.unaryFilter.field);return Be.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Go(n.unaryFilter.field);return Be.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Go(n.unaryFilter.field);return Be.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Go(n.unaryFilter.field);return Be.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Dt(61313);default:return Dt(60726)}}(e):e.fieldFilter!==void 0?function(n){return Be.create(Go(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Dt(58110);default:return Dt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Vi.create(n.compositeFilter.filters.map(r=>Ab(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Dt(1026)}}(n.compositeFilter.op))}(e):Dt(30097,{filter:e})}function DV(e){return _V[e]}function MV(e){return vV[e]}function OV(e){return EV[e]}function jo(e){return{fieldPath:e.canonicalString()}}function Go(e){return dn.fromServerFormat(e.fieldPath)}function Rb(e){return e instanceof Be?function(n){if(n.op==="=="){if(LT(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NAN"}};if(PT(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(LT(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NOT_NAN"}};if(PT(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jo(n.field),op:MV(n.op),value:n.value}}}(e):e instanceof Vi?function(n){const r=n.getFilters().map(a=>Rb(a));return r.length===1?r[0]:{compositeFilter:{op:OV(n.op),filters:r}}}(e):Dt(54877,{filter:e})}function VV(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function Ib(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(t,n,r,a,l=Ot.min(),c=Ot.min(),d=gn.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(t){return new Ds(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(t){this.wt=t}}function PV(e){const t=xV({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?wp(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(){this.Cn=new UV}addToCollectionParentIndex(t,n){return this.Cn.add(n),gt.resolve()}getCollectionParents(t,n){return gt.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return gt.resolve()}deleteFieldIndex(t,n){return gt.resolve()}deleteAllFieldIndexes(t){return gt.resolve()}createTargetIndexes(t,n){return gt.resolve()}getDocumentsMatchingTarget(t,n){return gt.resolve(null)}getIndexType(t,n){return gt.resolve(0)}getFieldIndexes(t,n){return gt.resolve([])}getNextCollectionGroupToUpdate(t){return gt.resolve(null)}getMinOffset(t,n){return gt.resolve(Bs.min())}getMinOffsetFromCollectionGroup(t,n){return gt.resolve(Bs.min())}updateCollectionGroup(t,n,r){return gt.resolve()}updateIndexEntries(t,n){return gt.resolve()}}class UV{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),a=this.index[n]||new $e(pe.comparator),l=!a.has(r);return this.index[n]=a.add(r),l}has(t){const n=t.lastSegment(),r=t.popLast(),a=this.index[n];return a&&a.has(r)}getEntries(t){return(this.index[t]||new $e(pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Cb=41943040;class kn{static withCacheSize(t){return new kn(t,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kn.DEFAULT_COLLECTION_PERCENTILE=10,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kn.DEFAULT=new kn(Cb,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kn.DISABLED=new kn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new hl(0)}static lr(){return new hl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="LruGarbageCollector",zV=1048576;function JT([e,t],[n,r]){const a=Bt(e,n);return a===0?Bt(t,r):a}class BV{constructor(t){this.Er=t,this.buffer=new $e(JT),this.dr=0}Ar(){return++this.dr}Rr(t){const n=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();JT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class HV{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){vt(WT,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){_l(n)?vt(WT,"Ignoring IndexedDB error during garbage collection: ",n):await yl(n)}await this.mr(3e5)})}}class qV{constructor(t,n){this.gr=t,this.params=n}calculateTargetCount(t,n){return this.gr.pr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return gt.resolve(Jf.le);const r=new BV(n);return this.gr.forEachTarget(t,a=>r.Rr(a.sequenceNumber)).next(()=>this.gr.yr(t,a=>r.Rr(a))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.gr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.gr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(vt("LruGarbageCollector","Garbage collection skipped; disabled"),gt.resolve(ZT)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(vt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ZT):this.wr(t,n))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,n){let r,a,l,c,d,g,m;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(vt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,c=Date.now(),this.nthSequenceNumber(t,a))).next(v=>(r=v,d=Date.now(),this.removeTargets(t,r,n))).next(v=>(l=v,g=Date.now(),this.removeOrphanedDocuments(t,r))).next(v=>(m=Date.now(),qo()<=$t.DEBUG&&vt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(g-d)+`ms
	Removed ${v} documents in `+(m-g)+`ms
Total Duration: ${m-y}ms`),gt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v})))}}function FV(e,t){return new qV(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(){this.changes=new qa(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Tn.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?gt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(t,n,r,a){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=a}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(a=>(r=a,this.remoteDocumentCache.getEntry(t,n))).next(a=>(r!==null&&Hu(r.mutation,a,Zn.empty(),ye.now()),a))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Yt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Yt()){const a=Na();return this.populateOverlays(t,a,n).next(()=>this.computeViews(t,n,a,r).next(l=>{let c=ku();return l.forEach((d,g)=>{c=c.insert(d,g.overlayedDocument)}),c}))}getOverlayedDocuments(t,n){const r=Na();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Yt()))}populateOverlays(t,n,r){const a=[];return r.forEach(l=>{n.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(t,a).next(l=>{l.forEach((c,d)=>{n.set(c,d)})})}computeViews(t,n,r,a){let l=Yr();const c=Bu(),d=function(){return Bu()}();return n.forEach((g,m)=>{const y=r.get(m.key);a.has(m.key)&&(y===void 0||y.mutation instanceof Ys)?l=l.insert(m.key,m):y!==void 0?(c.set(m.key,y.mutation.getFieldMask()),Hu(y.mutation,m,y.mutation.getFieldMask(),ye.now())):c.set(m.key,Zn.empty())}),this.recalculateAndSaveOverlays(t,l).next(g=>(g.forEach((m,y)=>c.set(m,y)),n.forEach((m,y)=>{var v;return d.set(m,new GV(y,(v=c.get(m))!==null&&v!==void 0?v:null))}),d))}recalculateAndSaveOverlays(t,n){const r=Bu();let a=new be((c,d)=>c-d),l=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(c=>{for(const d of c)d.keys().forEach(g=>{const m=n.get(g);if(m===null)return;let y=r.get(g)||Zn.empty();y=d.applyToLocalView(m,y),r.set(g,y);const v=(a.get(d.batchId)||Yt()).add(g);a=a.insert(d.batchId,v)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),m=g.key,y=g.value,v=cb();y.forEach(E=>{if(!l.has(E)){const S=pb(n.get(E),r.get(E));S!==null&&v.set(E,S),l=l.add(E)}}),c.push(this.documentOverlayCache.saveOverlays(t,m,v))}return gt.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,a){return function(c){return Rt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):sb(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,a):this.getDocumentsMatchingCollectionQuery(t,n,r,a)}getNextDocuments(t,n,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,a-l.size):gt.resolve(Na());let d=Ju,g=l;return c.next(m=>gt.forEach(m,(y,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),l.get(y)?gt.resolve():this.remoteDocumentCache.getEntry(t,y).next(E=>{g=g.insert(y,E)}))).next(()=>this.populateOverlays(t,m,l)).next(()=>this.computeViews(t,g,m,Yt())).next(y=>({batchId:d,changes:ub(y)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Rt(n)).next(r=>{let a=ku();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(t,n,r,a){const l=n.collectionGroup;let c=ku();return this.indexManager.getCollectionParents(t,l).next(d=>gt.forEach(d,g=>{const m=function(v,E){return new vl(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,g.child(l));return this.getDocumentsMatchingCollectionQuery(t,m,r,a).next(y=>{y.forEach((v,E)=>{c=c.insert(v,E)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,n,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,l,a))).next(c=>{l.forEach((g,m)=>{const y=m.getKey();c.get(y)===null&&(c=c.insert(y,Tn.newInvalidDocument(y)))});let d=ku();return c.forEach((g,m)=>{const y=l.get(g);y!==void 0&&Hu(y.mutation,m,Zn.empty(),ye.now()),id(n,m)&&(d=d.insert(g,m))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,n){return gt.resolve(this.kr.get(n))}saveBundleMetadata(t,n){return this.kr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:lr(a.createTime)}}(n)),gt.resolve()}getNamedQuery(t,n){return gt.resolve(this.qr.get(n))}saveNamedQuery(t,n){return this.qr.set(n.name,function(a){return{name:a.name,query:PV(a.bundledQuery),readTime:lr(a.readTime)}}(n)),gt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(){this.overlays=new be(Rt.comparator),this.Qr=new Map}getOverlay(t,n){return gt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Na();return gt.forEach(n,a=>this.getOverlay(t,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((a,l)=>{this.St(t,n,l)}),gt.resolve()}removeOverlaysForBatchId(t,n,r){const a=this.Qr.get(r);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(r)),gt.resolve()}getOverlaysForCollection(t,n,r){const a=Na(),l=n.length+1,c=new Rt(n.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const g=d.getNext().value,m=g.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===l&&g.largestBatchId>r&&a.set(g.getKey(),g)}return gt.resolve(a)}getOverlaysForCollectionGroup(t,n,r,a){let l=new be((m,y)=>m-y);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let y=l.get(m.largestBatchId);y===null&&(y=Na(),l=l.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const d=Na(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((m,y)=>d.set(m,y)),!(d.size()>=a)););return gt.resolve(d)}St(t,n,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Qr.get(a.largestBatchId).delete(r.key);this.Qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new dV(n,r));let l=this.Qr.get(n);l===void 0&&(l=Yt(),this.Qr.set(n,l)),this.Qr.set(n,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(t){return gt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,gt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(){this.$r=new $e(rn.Ur),this.Kr=new $e(rn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,n){const r=new rn(t,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.zr(new rn(t,n))}jr(t,n){t.forEach(r=>this.removeReference(r,n))}Hr(t){const n=new Rt(new pe([])),r=new rn(n,t),a=new rn(n,t+1),l=[];return this.Kr.forEachInRange([r,a],c=>{this.zr(c),l.push(c.key)}),l}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const n=new Rt(new pe([])),r=new rn(n,t),a=new rn(n,t+1);let l=Yt();return this.Kr.forEachInRange([r,a],c=>{l=l.add(c.key)}),l}containsKey(t){const n=new rn(t,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class rn{constructor(t,n){this.key=t,this.Zr=n}static Ur(t,n){return Rt.comparator(t.key,n.key)||Bt(t.Zr,n.Zr)}static Wr(t,n){return Bt(t.Zr,n.Zr)||Rt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new $e(rn.Ur)}checkEmpty(t){return gt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,a){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new fV(l,n,r,a);this.mutationQueue.push(c);for(const d of a)this.Xr=this.Xr.add(new rn(d.key,l)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return gt.resolve(c)}lookupMutationBatch(t,n){return gt.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,a=this.ti(r),l=a<0?0:a;return gt.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return gt.resolve(this.mutationQueue.length===0?iy:this.nr-1)}getAllMutationBatches(t){return gt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new rn(n,0),a=new rn(n,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([r,a],c=>{const d=this.ei(c.Zr);l.push(d)}),gt.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new $e(Bt);return n.forEach(a=>{const l=new rn(a,0),c=new rn(a,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,c],d=>{r=r.add(d.Zr)})}),gt.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,a=r.length+1;let l=r;Rt.isDocumentKey(l)||(l=l.child(""));const c=new rn(new Rt(l),0);let d=new $e(Bt);return this.Xr.forEachWhile(g=>{const m=g.key.path;return!!r.isPrefixOf(m)&&(m.length===a&&(d=d.add(g.Zr)),!0)},c),gt.resolve(this.ni(d))}ni(t){const n=[];return t.forEach(r=>{const a=this.ei(r);a!==null&&n.push(a)}),n}removeMutationBatch(t,n){ne(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return gt.forEach(n.mutations,a=>{const l=new rn(a.key,n.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Xr=r})}sr(t){}containsKey(t,n){const r=new rn(n,0),a=this.Xr.firstAfterOrEqual(r);return gt.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,gt.resolve()}ri(t,n){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const n=this.ti(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(t){this.ii=t,this.docs=function(){return new be(Rt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,a=this.docs.get(r),l=a?a.size:0,c=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return gt.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(n))}getEntries(t,n){let r=Yr();return n.forEach(a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():Tn.newInvalidDocument(a))}),gt.resolve(r)}getDocumentsMatchingQuery(t,n,r,a){let l=Yr();const c=n.path,d=new Rt(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:m,value:{document:y}}=g.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||I4(R4(y),r)<=0||(a.has(y.key)||id(n,y))&&(l=l.insert(y.key,y.mutableCopy()))}return gt.resolve(l)}getAllFromCollectionGroup(t,n,r,a){Dt(9500)}si(t,n){return gt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new WV(this)}getSize(t){return gt.resolve(this.size)}}class WV extends jV{constructor(t){super(),this.Br=t}applyChanges(t){const n=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?n.push(this.Br.addEntry(t,a)):this.Br.removeEntry(r)}),gt.waitFor(n)}getFromCache(t,n){return this.Br.getEntry(t,n)}getAllFromCache(t,n){return this.Br.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(t){this.persistence=t,this.oi=new qa(n=>ay(n),oy),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this._i=0,this.ai=new fy,this.targetCount=0,this.ui=hl.cr()}forEachTarget(t,n){return this.oi.forEach((r,a)=>n(a)),gt.resolve()}getLastRemoteSnapshotVersion(t){return gt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return gt.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),gt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),gt.resolve()}Tr(t){this.oi.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ui=new hl(n),this.highestTargetId=n),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,n){return this.Tr(n),this.targetCount+=1,gt.resolve()}updateTargetData(t,n){return this.Tr(n),gt.resolve()}removeTargetData(t,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,gt.resolve()}removeTargets(t,n,r){let a=0;const l=[];return this.oi.forEach((c,d)=>{d.sequenceNumber<=n&&r.get(d.targetId)===null&&(this.oi.delete(c),l.push(this.removeMatchingKeysForTargetId(t,d.targetId)),a++)}),gt.waitFor(l).next(()=>a)}getTargetCount(t){return gt.resolve(this.targetCount)}getTargetData(t,n){const r=this.oi.get(n)||null;return gt.resolve(r)}addMatchingKeys(t,n,r){return this.ai.Gr(n,r),gt.resolve()}removeMatchingKeys(t,n,r){this.ai.jr(n,r);const a=this.persistence.referenceDelegate,l=[];return a&&n.forEach(c=>{l.push(a.markPotentiallyOrphaned(t,c))}),gt.waitFor(l)}removeMatchingKeysForTargetId(t,n){return this.ai.Hr(n),gt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.ai.Yr(n);return gt.resolve(r)}containsKey(t,n){return gt.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(t,n){this.ci={},this.overlays={},this.li=new Jf(0),this.hi=!1,this.hi=!0,this.Pi=new XV,this.referenceDelegate=t(this),this.Ti=new JV(this),this.indexManager=new LV,this.remoteDocumentCache=function(a){return new ZV(a)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new kV(n),this.Ei=new YV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new KV,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ci[t.toKey()];return r||(r=new QV(n,this.referenceDelegate),this.ci[t.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,n,r){vt("MemoryPersistence","Starting transaction:",t);const a=new tk(this.li.next());return this.referenceDelegate.di(),r(a).next(l=>this.referenceDelegate.Ai(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ri(t,n){return gt.or(Object.values(this.ci).map(r=>()=>r.containsKey(t,n)))}}class tk extends x4{constructor(t){super(),this.currentSequenceNumber=t}}class dy{constructor(t){this.persistence=t,this.Vi=new fy,this.mi=null}static fi(t){return new dy(t)}get gi(){if(this.mi)return this.mi;throw Dt(60996)}addReference(t,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),gt.resolve()}removeReference(t,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),gt.resolve()}markPotentiallyOrphaned(t,n){return this.gi.add(n.toString()),gt.resolve()}removeTarget(t,n){this.Vi.Hr(n.targetId).forEach(a=>this.gi.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(a=>{a.forEach(l=>this.gi.add(l.toString()))}).next(()=>r.removeTargetData(t,n))}di(){this.mi=new Set}Ai(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gt.forEach(this.gi,r=>{const a=Rt.fromPath(r);return this.pi(t,a).next(l=>{l||n.removeEntry(a,Ot.min())})}).next(()=>(this.mi=null,n.apply(t)))}updateLimboDocument(t,n){return this.pi(t,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(t){return 0}pi(t,n){return gt.or([()=>gt.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ri(t,n)])}}class Vf{constructor(t,n){this.persistence=t,this.yi=new qa(r=>M4(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=FV(this,n)}static fi(t,n){return new Vf(t,n)}di(){}Ai(t){return gt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}pr(t){const n=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(a=>r+a))}br(t){let n=0;return this.yr(t,r=>{n++}).next(()=>n)}yr(t,n){return gt.forEach(this.yi,(r,a)=>this.Dr(t,r,a).next(l=>l?gt.resolve():n(a)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.si(t,c=>this.Dr(t,c,n).next(d=>{d||(r++,l.removeEntry(c,Ot.min()))})).next(()=>l.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.yi.set(n,t.currentSequenceNumber),gt.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),gt.resolve()}removeReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),gt.resolve()}updateLimboDocument(t,n){return this.yi.set(n,t.currentSequenceNumber),gt.resolve()}Ii(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=lf(t.data.value)),n}Dr(t,n,r){return gt.or([()=>this.persistence.Ri(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const a=this.yi.get(n);return gt.resolve(a!==void 0&&a>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(t,n,r,a){this.targetId=t,this.fromCache=n,this.ds=r,this.As=a}static Rs(t,n){let r=Yt(),a=Yt();for(const l of n.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new gy(t,n.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return QM()?8:N4(wn())>0?6:4}()}initialize(t,n){this.ys=t,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(t,n,r,a){const l={result:null};return this.ws(t,n).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.bs(t,n,a,r).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new ek;return this.Ss(t,n,c).next(d=>{if(l.result=d,this.fs)return this.Ds(t,n,c,d.size)})}).next(()=>l.result)}Ds(t,n,r,a){return r.documentReadCount<this.gs?(qo()<=$t.DEBUG&&vt("QueryEngine","SDK will not create cache indexes for query:",Fo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),gt.resolve()):(qo()<=$t.DEBUG&&vt("QueryEngine","Query:",Fo(n),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ps*a?(qo()<=$t.DEBUG&&vt("QueryEngine","The SDK decides to create cache indexes for query:",Fo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,or(n))):gt.resolve())}ws(t,n){if(HT(n))return gt.resolve(null);let r=or(n);return this.indexManager.getIndexType(t,r).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=wp(n,null,"F"),r=or(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(l=>{const c=Yt(...l);return this.ys.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,r).next(g=>{const m=this.vs(n,d);return this.Cs(n,m,c,g.readTime)?this.ws(t,wp(n,null,"F")):this.Fs(t,m,n,g)}))})))}bs(t,n,r,a){return HT(n)||a.isEqual(Ot.min())?gt.resolve(null):this.ys.getDocuments(t,r).next(l=>{const c=this.vs(n,l);return this.Cs(n,c,r,a)?gt.resolve(null):(qo()<=$t.DEBUG&&vt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Fo(n)),this.Fs(t,c,n,A4(a,Ju)).next(d=>d))})}vs(t,n){let r=new $e(ob(t));return n.forEach((a,l)=>{id(t,l)&&(r=r.add(l))}),r}Cs(t,n,r,a){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const l=t.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(t,n,r){return qo()<=$t.DEBUG&&vt("QueryEngine","Using full collection scan to execute query:",Fo(n)),this.ys.getDocumentsMatchingQuery(t,n,Bs.min(),r)}Fs(t,n,r,a){return this.ys.getDocumentsMatchingQuery(t,r,a).next(l=>(n.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my="LocalStore",ik=3e8;class rk{constructor(t,n,r,a){this.persistence=t,this.Ms=n,this.serializer=a,this.xs=new be(Bt),this.Os=new qa(l=>ay(l),oy),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(r)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new $V(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.xs))}}function sk(e,t,n,r){return new rk(e,t,n,r)}async function Nb(e,t){const n=Vt(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let a;return n.mutationQueue.getAllMutationBatches(r).next(l=>(a=l,n.Ls(t),n.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],d=[];let g=Yt();for(const m of a){c.push(m.batchId);for(const y of m.mutations)g=g.add(y.key)}for(const m of l){d.push(m.batchId);for(const y of m.mutations)g=g.add(y.key)}return n.localDocuments.getDocuments(r,g).next(m=>({ks:m,removedBatchIds:c,addedBatchIds:d}))})})}function ak(e,t){const n=Vt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=t.batch.keys(),l=n.Bs.newChangeBuffer({trackRemovals:!0});return function(d,g,m,y){const v=m.batch,E=v.keys();let S=gt.resolve();return E.forEach(x=>{S=S.next(()=>y.getEntry(g,x)).next(k=>{const M=m.docVersions.get(x);ne(M!==null,48541),k.version.compareTo(M)<0&&(v.applyToRemoteDocument(k,m),k.isValidDocument()&&(k.setReadTime(m.commitVersion),y.addEntry(k)))})}),S.next(()=>d.mutationQueue.removeMutationBatch(g,v))}(n,r,t,l).next(()=>l.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,a,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let g=Yt();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(g=g.add(d.batch.mutations[m].key));return g}(t))).next(()=>n.localDocuments.getDocuments(r,a))})}function Db(e){const t=Vt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ti.getLastRemoteSnapshotVersion(n))}function ok(e,t){const n=Vt(e),r=t.snapshotVersion;let a=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=n.Bs.newChangeBuffer({trackRemovals:!0});a=n.xs;const d=[];t.targetChanges.forEach((y,v)=>{const E=a.get(v);if(!E)return;d.push(n.Ti.removeMatchingKeys(l,y.removedDocuments,v).next(()=>n.Ti.addMatchingKeys(l,y.addedDocuments,v)));let S=E.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(v)!==null?S=S.withResumeToken(gn.EMPTY_BYTE_STRING,Ot.min()).withLastLimboFreeSnapshotVersion(Ot.min()):y.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(y.resumeToken,r)),a=a.insert(v,S),function(k,M,B){return k.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=ik?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(E,S,y)&&d.push(n.Ti.updateTargetData(l,S))});let g=Yr(),m=Yt();if(t.documentUpdates.forEach(y=>{t.resolvedLimboDocuments.has(y)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(l,y))}),d.push(lk(l,c,t.documentUpdates).next(y=>{g=y.qs,m=y.Qs})),!r.isEqual(Ot.min())){const y=n.Ti.getLastRemoteSnapshotVersion(l).next(v=>n.Ti.setTargetsMetadata(l,l.currentSequenceNumber,r));d.push(y)}return gt.waitFor(d).next(()=>c.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,g,m)).next(()=>g)}).then(l=>(n.xs=a,l))}function lk(e,t,n){let r=Yt(),a=Yt();return n.forEach(l=>r=r.add(l)),t.getEntries(e,r).next(l=>{let c=Yr();return n.forEach((d,g)=>{const m=l.get(d);g.isFoundDocument()!==m.isFoundDocument()&&(a=a.add(d)),g.isNoDocument()&&g.version.isEqual(Ot.min())?(t.removeEntry(d,g.readTime),c=c.insert(d,g)):!m.isValidDocument()||g.version.compareTo(m.version)>0||g.version.compareTo(m.version)===0&&m.hasPendingWrites?(t.addEntry(g),c=c.insert(d,g)):vt(my,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",g.version)}),{qs:c,Qs:a}})}function uk(e,t){const n=Vt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=iy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function ck(e,t){const n=Vt(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return n.Ti.getTargetData(r,t).next(l=>l?(a=l,gt.resolve(a)):n.Ti.allocateTargetId(r).next(c=>(a=new Ds(t,c,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=n.xs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(t,r.targetId)),r})}async function Ip(e,t,n){const r=Vt(e),a=r.xs.get(t),l=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!_l(c))throw c;vt(my,`Failed to update sequence numbers for target ${t}: ${c}`)}r.xs=r.xs.remove(t),r.Os.delete(a.target)}function tw(e,t,n){const r=Vt(e);let a=Ot.min(),l=Yt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(g,m,y){const v=Vt(g),E=v.Os.get(y);return E!==void 0?gt.resolve(v.xs.get(E)):v.Ti.getTargetData(m,y)}(r,c,or(t)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(c,d.targetId).next(g=>{l=g})}).next(()=>r.Ms.getDocumentsMatchingQuery(c,t,n?a:Ot.min(),n?l:Yt())).next(d=>(hk(r,Z4(t),d),{documents:d,$s:l})))}function hk(e,t,n){let r=e.Ns.get(t)||Ot.min();n.forEach((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),e.Ns.set(t,r)}class ew{constructor(){this.activeTargetIds=iV()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class fk{constructor(){this.xo=new ew,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,n,r){this.Oo[t]=n}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new ew,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="ConnectivityMonitor";class iw{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){vt(nw,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){vt(nw,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jh=null;function Cp(){return Jh===null?Jh=function(){return 268435456+Math.round(2147483648*Math.random())}():Jh++,"0x"+Jh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="RestConnection",gk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mk{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+t.host,this.Wo=`projects/${r}/databases/${a}`,this.Go=this.databaseId.database===Cf?`project_id=${r}`:`project_id=${r}&database_id=${a}`}zo(t,n,r,a,l){const c=Cp(),d=this.jo(t,n.toUriEncodedString());vt(qm,`Sending RPC '${t}' ${c}:`,d,r);const g={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(g,a,l);const{host:m}=new URL(d),y=gl(m);return this.Jo(t,d,g,r,y).then(v=>(vt(qm,`Received RPC '${t}' ${c}: `,v),v),v=>{throw ol(qm,`RPC '${t}' ${c} failed with error: `,v,"url: ",d,"request:",r),v})}Yo(t,n,r,a,l,c){return this.zo(t,n,r,a,l)}Ho(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pl}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,l)=>t[l]=a),r&&r.headers.forEach((a,l)=>t[l]=a)}jo(t,n){const r=gk[t];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn="WebChannelConnection";class yk extends mk{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,a,l){const c=Cp();return new Promise((d,g)=>{const m=new O1;m.setWithCredentials(!0),m.listenOnce(V1.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case of.NO_ERROR:const v=m.getResponseJson();vt(vn,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(v)),d(v);break;case of.TIMEOUT:vt(vn,`RPC '${t}' ${c} timed out`),g(new Et(dt.DEADLINE_EXCEEDED,"Request time out"));break;case of.HTTP_ERROR:const E=m.getStatus();if(vt(vn,`RPC '${t}' ${c} failed with status:`,E,"response text:",m.getResponseText()),E>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const x=S?.error;if(x&&x.status&&x.message){const k=function(B){const q=B.toLowerCase().replace(/_/g,"-");return Object.values(dt).indexOf(q)>=0?q:dt.UNKNOWN}(x.status);g(new Et(k,x.message))}else g(new Et(dt.UNKNOWN,"Server responded with status "+m.getStatus()))}else g(new Et(dt.UNAVAILABLE,"Connection failed."));break;default:Dt(9055,{h_:t,streamId:c,P_:m.getLastErrorCode(),T_:m.getLastError()})}}finally{vt(vn,`RPC '${t}' ${c} completed.`)}});const y=JSON.stringify(a);vt(vn,`RPC '${t}' ${c} sending request:`,a),m.send(n,"POST",y,r,15)})}I_(t,n,r){const a=Cp(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=L1(),d=P1(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(g.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Ho(g.initMessageHeaders,n,r),g.encodeInitMessageHeaders=!0;const y=l.join("");vt(vn,`Creating RPC '${t}' stream ${a}: ${y}`,g);const v=c.createWebChannel(y,g);this.E_(v);let E=!1,S=!1;const x=new pk({Zo:M=>{S?vt(vn,`Not sending because RPC '${t}' stream ${a} is closed:`,M):(E||(vt(vn,`Opening RPC '${t}' stream ${a} transport.`),v.open(),E=!0),vt(vn,`RPC '${t}' stream ${a} sending:`,M),v.send(M))},Xo:()=>v.close()}),k=(M,B,q)=>{M.listen(B,K=>{try{q(K)}catch(L){setTimeout(()=>{throw L},0)}})};return k(v,Vu.EventType.OPEN,()=>{S||(vt(vn,`RPC '${t}' stream ${a} transport opened.`),x.__())}),k(v,Vu.EventType.CLOSE,()=>{S||(S=!0,vt(vn,`RPC '${t}' stream ${a} transport closed`),x.u_(),this.d_(v))}),k(v,Vu.EventType.ERROR,M=>{S||(S=!0,ol(vn,`RPC '${t}' stream ${a} transport errored. Name:`,M.name,"Message:",M.message),x.u_(new Et(dt.UNAVAILABLE,"The operation could not be completed")))}),k(v,Vu.EventType.MESSAGE,M=>{var B;if(!S){const q=M.data[0];ne(!!q,16349);const K=q,L=K?.error||((B=K[0])===null||B===void 0?void 0:B.error);if(L){vt(vn,`RPC '${t}' stream ${a} received error:`,L);const Z=L.status;let W=function(I){const P=ze[I];if(P!==void 0)return _b(P)}(Z),V=L.message;W===void 0&&(W=dt.INTERNAL,V="Unknown error status: "+Z+" with message "+L.message),S=!0,x.u_(new Et(W,V)),v.close()}else vt(vn,`RPC '${t}' stream ${a} received:`,q),x.c_(q)}}),k(d,k1.STAT_EVENT,M=>{M.stat===mp.PROXY?vt(vn,`RPC '${t}' stream ${a} detected buffering proxy`):M.stat===mp.NOPROXY&&vt(vn,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{x.a_()},0),x}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(n=>n===t)}}function Fm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(e){return new TV(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(t,n,r=1e3,a=1.5,l=6e4){this.xi=t,this.timerId=n,this.A_=r,this.R_=a,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),a=Math.max(0,n-r);a>0&&vt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,a,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="PersistentStream";class Ob{constructor(t,n,r,a,l,c,d,g){this.xi=t,this.S_=r,this.D_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Mb(t,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():n&&n.code===dt.RESOURCE_EXHAUSTED?($r(n.toString()),$r("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===dt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(n)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.v_===n&&this.z_(r,a)},r=>{t(()=>{const a=new Et(dt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(a)})})}z_(t,n){const r=this.G_(this.v_);this.stream=this.H_(t,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(a=>{r(()=>this.j_(a))}),this.stream.onMessage(a=>{r(()=>++this.M_==1?this.J_(a):this.onNext(a))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return vt(rw,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return n=>{this.xi.enqueueAndForget(()=>this.v_===t?n():(vt(rw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _k extends Ob{constructor(t,n,r,a,l,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,a,c),this.serializer=l}H_(t,n){return this.connection.I_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const n=bV(this.serializer,t),r=function(l){if(!("targetChange"in l))return Ot.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ot.min():c.readTime?lr(c.readTime):Ot.min()}(t);return this.listener.Y_(n,r)}Z_(t){const n={};n.database=Rp(this.serializer),n.addTarget=function(l,c){let d;const g=c.target;if(d=Ep(g)?{documents:IV(l,g)}:{query:CV(l,g).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Tb(l,c.resumeToken);const m=Sp(l,c.expectedCount);m!==null&&(d.expectedCount=m)}else if(c.snapshotVersion.compareTo(Ot.min())>0){d.readTime=Of(l,c.snapshotVersion.toTimestamp());const m=Sp(l,c.expectedCount);m!==null&&(d.expectedCount=m)}return d}(this.serializer,t);const r=NV(this.serializer,t);r&&(n.labels=r),this.Q_(n)}X_(t){const n={};n.database=Rp(this.serializer),n.removeTarget=t,this.Q_(n)}}class vk extends Ob{constructor(t,n,r,a,l,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,a,c),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(t,n){return this.connection.I_("Write",t,n)}J_(t){return ne(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ne(!t.writeResults||t.writeResults.length===0,55816),this.listener.na()}onNext(t){ne(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.x_.reset();const n=RV(t.writeResults,t.commitTime),r=lr(t.commitTime);return this.listener.ra(r,n)}ia(){const t={};t.database=Rp(this.serializer),this.Q_(t)}ta(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>AV(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{}class Tk extends Ek{constructor(t,n,r,a){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=a,this.sa=!1}oa(){if(this.sa)throw new Et(dt.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,n,r,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.zo(t,bp(n,r),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Et(dt.UNKNOWN,l.toString())})}Yo(t,n,r,a,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Yo(t,bp(n,r),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Et(dt.UNKNOWN,c.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class wk{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?($r(n),this.ua=!1):vt("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua="RemoteStore";class Sk{constructor(t,n,r,a,l){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(c=>{r.enqueueAndForget(async()=>{Fa(this)&&(vt(Ua,"Restarting streams for network reachability change."),await async function(g){const m=Vt(g);m.da.add(4),await yc(m),m.Va.set("Unknown"),m.da.delete(4),await ud(m)}(this))})}),this.Va=new wk(r,a)}}async function ud(e){if(Fa(e))for(const t of e.Aa)await t(!0)}async function yc(e){for(const t of e.Aa)await t(!1)}function Vb(e,t){const n=Vt(e);n.Ea.has(t.targetId)||(n.Ea.set(t.targetId,t),vy(n)?_y(n):El(n).N_()&&yy(n,t))}function py(e,t){const n=Vt(e),r=El(n);n.Ea.delete(t),r.N_()&&kb(n,t),n.Ea.size===0&&(r.N_()?r.k_():Fa(n)&&n.Va.set("Unknown"))}function yy(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ot.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}El(e).Z_(t)}function kb(e,t){e.ma.Ke(t),El(e).X_(t)}function _y(e){e.ma=new yV({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Ea.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),El(e).start(),e.Va.ca()}function vy(e){return Fa(e)&&!El(e).O_()&&e.Ea.size>0}function Fa(e){return Vt(e).da.size===0}function Pb(e){e.ma=void 0}async function bk(e){e.Va.set("Online")}async function Ak(e){e.Ea.forEach((t,n)=>{yy(e,t)})}async function Rk(e,t){Pb(e),vy(e)?(e.Va.Pa(t),_y(e)):e.Va.set("Unknown")}async function Ik(e,t,n){if(e.Va.set("Online"),t instanceof Eb&&t.state===2&&t.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ea.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ea.delete(d),a.ma.removeTarget(d))}(e,t)}catch(r){vt(Ua,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await kf(e,r)}else if(t instanceof hf?e.ma.Xe(t):t instanceof vb?e.ma.ot(t):e.ma.nt(t),!n.isEqual(Ot.min()))try{const r=await Db(e.localStore);n.compareTo(r)>=0&&await function(l,c){const d=l.ma.It(c);return d.targetChanges.forEach((g,m)=>{if(g.resumeToken.approximateByteSize()>0){const y=l.Ea.get(m);y&&l.Ea.set(m,y.withResumeToken(g.resumeToken,c))}}),d.targetMismatches.forEach((g,m)=>{const y=l.Ea.get(g);if(!y)return;l.Ea.set(g,y.withResumeToken(gn.EMPTY_BYTE_STRING,y.snapshotVersion)),kb(l,g);const v=new Ds(y.target,g,m,y.sequenceNumber);yy(l,v)}),l.remoteSyncer.applyRemoteEvent(d)}(e,n)}catch(r){vt(Ua,"Failed to raise snapshot:",r),await kf(e,r)}}async function kf(e,t,n){if(!_l(t))throw t;e.da.add(1),await yc(e),e.Va.set("Offline"),n||(n=()=>Db(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{vt(Ua,"Retrying IndexedDB access"),await n(),e.da.delete(1),await ud(e)})}function Lb(e,t){return t().catch(n=>kf(e,n,t))}async function cd(e){const t=Vt(e),n=js(t);let r=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:iy;for(;Ck(t);)try{const a=await uk(t.localStore,r);if(a===null){t.Ia.length===0&&n.k_();break}r=a.batchId,xk(t,a)}catch(a){await kf(t,a)}Ub(t)&&zb(t)}function Ck(e){return Fa(e)&&e.Ia.length<10}function xk(e,t){e.Ia.push(t);const n=js(e);n.N_()&&n.ea&&n.ta(t.mutations)}function Ub(e){return Fa(e)&&!js(e).O_()&&e.Ia.length>0}function zb(e){js(e).start()}async function Nk(e){js(e).ia()}async function Dk(e){const t=js(e);for(const n of e.Ia)t.ta(n.mutations)}async function Mk(e,t,n){const r=e.Ia.shift(),a=uy.from(r,t,n);await Lb(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await cd(e)}async function Ok(e,t){t&&js(e).ea&&await async function(r,a){if(function(c){return mV(c)&&c!==dt.ABORTED}(a.code)){const l=r.Ia.shift();js(r).L_(),await Lb(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a)),await cd(r)}}(e,t),Ub(e)&&zb(e)}async function sw(e,t){const n=Vt(e);n.asyncQueue.verifyOperationInProgress(),vt(Ua,"RemoteStore received new credentials");const r=Fa(n);n.da.add(3),await yc(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.da.delete(3),await ud(n)}async function Vk(e,t){const n=Vt(e);t?(n.da.delete(2),await ud(n)):t||(n.da.add(2),await yc(n),n.Va.set("Unknown"))}function El(e){return e.fa||(e.fa=function(n,r,a){const l=Vt(n);return l.oa(),new _k(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(e.datastore,e.asyncQueue,{e_:bk.bind(null,e),n_:Ak.bind(null,e),i_:Rk.bind(null,e),Y_:Ik.bind(null,e)}),e.Aa.push(async t=>{t?(e.fa.L_(),vy(e)?_y(e):e.Va.set("Unknown")):(await e.fa.stop(),Pb(e))})),e.fa}function js(e){return e.ga||(e.ga=function(n,r,a){const l=Vt(n);return l.oa(),new vk(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:Nk.bind(null,e),i_:Ok.bind(null,e),na:Dk.bind(null,e),ra:Mk.bind(null,e)}),e.Aa.push(async t=>{t?(e.ga.L_(),await cd(e)):(await e.ga.stop(),e.Ia.length>0&&(vt(Ua,`Stopping write stream with ${e.Ia.length} pending writes`),e.Ia=[]))})),e.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(t,n,r,a,l){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Ls,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,a,l){const c=Date.now()+r,d=new Ey(t,n,c,a,l);return d.start(r),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Et(dt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ty(e,t){if($r("AsyncQueue",`${t}: ${e}`),_l(e))return new Et(dt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{static emptySet(t){return new Zo(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||Rt.comparator(n.key,r.key):(n,r)=>Rt.comparator(n.key,r.key),this.keyedMap=ku(),this.sortedSet=new be(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Zo)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Zo;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(){this.pa=new be(Rt.comparator)}track(t){const n=t.doc.key,r=this.pa.get(n);r?t.type!==0&&r.type===3?this.pa=this.pa.insert(n,t):t.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.pa=this.pa.remove(n):t.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):Dt(63341,{Vt:t,ya:r}):this.pa=this.pa.insert(n,t)}wa(){const t=[];return this.pa.inorderTraversal((n,r)=>{t.push(r)}),t}}class fl{constructor(t,n,r,a,l,c,d,g,m){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=m}static fromInitialDocuments(t,n,r,a,l){const c=[];return n.forEach(d=>{c.push({type:0,doc:d})}),new fl(t,n,Zo.emptySet(n),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&nd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==r[a].type||!n[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class Pk{constructor(){this.queries=ow(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const a=Vt(n),l=a.queries;a.queries=ow(),l.forEach((c,d)=>{for(const g of d.Sa)g.onError(r)})})(this,new Et(dt.ABORTED,"Firestore shutting down"))}}function ow(){return new qa(e=>ab(e),nd)}async function Lk(e,t){const n=Vt(e);let r=3;const a=t.query;let l=n.queries.get(a);l?!l.Da()&&t.va()&&(r=2):(l=new kk,r=t.va()?0:1);try{switch(r){case 0:l.ba=await n.onListen(a,!0);break;case 1:l.ba=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){const d=Ty(c,`Initialization of query '${Fo(t.query)}' failed`);return void t.onError(d)}n.queries.set(a,l),l.Sa.push(t),t.Fa(n.onlineState),l.ba&&t.Ma(l.ba)&&wy(n)}async function Uk(e,t){const n=Vt(e),r=t.query;let a=3;const l=n.queries.get(r);if(l){const c=l.Sa.indexOf(t);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=t.va()?0:1:!l.Da()&&t.va()&&(a=2))}switch(a){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function zk(e,t){const n=Vt(e);let r=!1;for(const a of t){const l=a.query,c=n.queries.get(l);if(c){for(const d of c.Sa)d.Ma(a)&&(r=!0);c.ba=a}}r&&wy(n)}function Bk(e,t,n){const r=Vt(e),a=r.queries.get(t);if(a)for(const l of a.Sa)l.onError(n);r.queries.delete(t)}function wy(e){e.Ca.forEach(t=>{t.next()})}var xp,lw;(lw=xp||(xp={})).xa="default",lw.Cache="cache";class Hk{constructor(t,n,r){this.query=t,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(t){if(!this.options.includeMetadataChanges){const r=[];for(const a of t.docChanges)a.type!==3&&r.push(a);t=new fl(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Na?this.La(t)&&(this.Oa.next(t),n=!0):this.ka(t,this.onlineState)&&(this.qa(t),n=!0),this.Ba=t,n}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),n=!0),n}ka(t,n){if(!t.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}La(t){if(t.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(t){t=fl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==xp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(t){this.key=t}}class Hb{constructor(t){this.key=t}}class qk{constructor(t,n){this.query=t,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Yt(),this.mutatedKeys=Yt(),this.Za=ob(t),this.Xa=new Zo(this.Za)}get eu(){return this.Ha}tu(t,n){const r=n?n.nu:new aw,a=n?n.Xa:this.Xa;let l=n?n.mutatedKeys:this.mutatedKeys,c=a,d=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,m=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((y,v)=>{const E=a.get(y),S=id(this.query,v)?v:null,x=!!E&&this.mutatedKeys.has(E.key),k=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let M=!1;E&&S?E.data.isEqual(S.data)?x!==k&&(r.track({type:3,doc:S}),M=!0):this.ru(E,S)||(r.track({type:2,doc:S}),M=!0,(g&&this.Za(S,g)>0||m&&this.Za(S,m)<0)&&(d=!0)):!E&&S?(r.track({type:0,doc:S}),M=!0):E&&!S&&(r.track({type:1,doc:E}),M=!0,(g||m)&&(d=!0)),M&&(S?(c=c.add(S),l=k?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),r.track({type:1,doc:y})}return{Xa:c,nu:r,Cs:d,mutatedKeys:l}}ru(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,a){const l=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const c=t.nu.wa();c.sort((y,v)=>function(S,x){const k=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dt(20277,{Vt:M})}};return k(S)-k(x)}(y.type,v.type)||this.Za(y.doc,v.doc)),this.iu(r),a=a!=null&&a;const d=n&&!a?this.su():[],g=this.Ya.size===0&&this.current&&!a?1:0,m=g!==this.Ja;return this.Ja=g,c.length!==0||m?{snapshot:new fl(this.query,t.Xa,l,c,t.mutatedKeys,g===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:d}:{ou:d}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new aw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=Yt(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return t.forEach(r=>{this.Ya.has(r)||n.push(new Hb(r))}),this.Ya.forEach(r=>{t.has(r)||n.push(new Bb(r))}),n}au(t){this.Ha=t.$s,this.Ya=Yt();const n=this.tu(t.documents);return this.applyChanges(n,!0)}uu(){return fl.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Sy="SyncEngine";class Fk{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class jk{constructor(t){this.key=t,this.cu=!1}}class Gk{constructor(t,n,r,a,l,c){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.lu={},this.hu=new qa(d=>ab(d),nd),this.Pu=new Map,this.Tu=new Set,this.Iu=new be(Rt.comparator),this.Eu=new Map,this.du=new fy,this.Au={},this.Ru=new Map,this.Vu=hl.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function $k(e,t,n=!0){const r=Yb(e);let a;const l=r.hu.get(t);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.uu()):a=await qb(r,t,n,!0),a}async function Yk(e,t){const n=Yb(e);await qb(n,t,!0,!1)}async function qb(e,t,n,r){const a=await ck(e.localStore,or(t)),l=a.targetId,c=e.sharedClientState.addLocalQueryTarget(l,n);let d;return r&&(d=await Kk(e,t,l,c==="current",a.resumeToken)),e.isPrimaryClient&&n&&Vb(e.remoteStore,a),d}async function Kk(e,t,n,r,a){e.fu=(v,E,S)=>async function(k,M,B,q){let K=M.view.tu(B);K.Cs&&(K=await tw(k.localStore,M.query,!1).then(({documents:V})=>M.view.tu(V,K)));const L=q&&q.targetChanges.get(M.targetId),Z=q&&q.targetMismatches.get(M.targetId)!=null,W=M.view.applyChanges(K,k.isPrimaryClient,L,Z);return cw(k,M.targetId,W.ou),W.snapshot}(e,v,E,S);const l=await tw(e.localStore,t,!0),c=new qk(t,l.$s),d=c.tu(l.documents),g=pc.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",a),m=c.applyChanges(d,e.isPrimaryClient,g);cw(e,n,m.ou);const y=new Fk(t,n,c);return e.hu.set(t,y),e.Pu.has(n)?e.Pu.get(n).push(t):e.Pu.set(n,[t]),m.snapshot}async function Xk(e,t,n){const r=Vt(e),a=r.hu.get(t),l=r.Pu.get(a.targetId);if(l.length>1)return r.Pu.set(a.targetId,l.filter(c=>!nd(c,t))),void r.hu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Ip(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),n&&py(r.remoteStore,a.targetId),Np(r,a.targetId)}).catch(yl)):(Np(r,a.targetId),await Ip(r.localStore,a.targetId,!0))}async function Qk(e,t){const n=Vt(e),r=n.hu.get(t),a=n.Pu.get(r.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),py(n.remoteStore,r.targetId))}async function Zk(e,t,n){const r=r3(e);try{const a=await function(c,d){const g=Vt(c),m=ye.now(),y=d.reduce((S,x)=>S.add(x.key),Yt());let v,E;return g.persistence.runTransaction("Locally write mutations","readwrite",S=>{let x=Yr(),k=Yt();return g.Bs.getEntries(S,y).next(M=>{x=M,x.forEach((B,q)=>{q.isValidDocument()||(k=k.add(B))})}).next(()=>g.localDocuments.getOverlayedDocuments(S,x)).next(M=>{v=M;const B=[];for(const q of d){const K=cV(q,v.get(q.key).overlayedDocument);K!=null&&B.push(new Ys(q.key,K,Z1(K.value.mapValue),Wn.exists(!0)))}return g.mutationQueue.addMutationBatch(S,m,B,d)}).next(M=>{E=M;const B=M.applyToLocalDocumentSet(v,k);return g.documentOverlayCache.saveOverlays(S,M.batchId,B)})}).then(()=>({batchId:E.batchId,changes:ub(v)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(a.batchId),function(c,d,g){let m=c.Au[c.currentUser.toKey()];m||(m=new be(Bt)),m=m.insert(d,g),c.Au[c.currentUser.toKey()]=m}(r,a.batchId,n),await _c(r,a.changes),await cd(r.remoteStore)}catch(a){const l=Ty(a,"Failed to persist write");n.reject(l)}}async function Fb(e,t){const n=Vt(e);try{const r=await ok(n.localStore,t);t.targetChanges.forEach((a,l)=>{const c=n.Eu.get(l);c&&(ne(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.cu=!0:a.modifiedDocuments.size>0?ne(c.cu,14607):a.removedDocuments.size>0&&(ne(c.cu,42227),c.cu=!1))}),await _c(n,r,t)}catch(r){await yl(r)}}function uw(e,t,n){const r=Vt(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const a=[];r.hu.forEach((l,c)=>{const d=c.view.Fa(t);d.snapshot&&a.push(d.snapshot)}),function(c,d){const g=Vt(c);g.onlineState=d;let m=!1;g.queries.forEach((y,v)=>{for(const E of v.Sa)E.Fa(d)&&(m=!0)}),m&&wy(g)}(r.eventManager,t),a.length&&r.lu.Y_(a),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Wk(e,t,n){const r=Vt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const a=r.Eu.get(t),l=a&&a.key;if(l){let c=new be(Rt.comparator);c=c.insert(l,Tn.newNoDocument(l,Ot.min()));const d=Yt().add(l),g=new od(Ot.min(),new Map,new be(Bt),c,d);await Fb(r,g),r.Iu=r.Iu.remove(l),r.Eu.delete(t),by(r)}else await Ip(r.localStore,t,!1).then(()=>Np(r,t,n)).catch(yl)}async function Jk(e,t){const n=Vt(e),r=t.batch.batchId;try{const a=await ak(n.localStore,t);Gb(n,r,null),jb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await _c(n,a)}catch(a){await yl(a)}}async function t3(e,t,n){const r=Vt(e);try{const a=await function(c,d){const g=Vt(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return g.mutationQueue.lookupMutationBatch(m,d).next(v=>(ne(v!==null,37113),y=v.keys(),g.mutationQueue.removeMutationBatch(m,v))).next(()=>g.mutationQueue.performConsistencyCheck(m)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(m,y,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>g.localDocuments.getDocuments(m,y))})}(r.localStore,t);Gb(r,t,n),jb(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await _c(r,a)}catch(a){await yl(a)}}function jb(e,t){(e.Ru.get(t)||[]).forEach(n=>{n.resolve()}),e.Ru.delete(t)}function Gb(e,t,n){const r=Vt(e);let a=r.Au[r.currentUser.toKey()];if(a){const l=a.get(t);l&&(n?l.reject(n):l.resolve(),a=a.remove(t)),r.Au[r.currentUser.toKey()]=a}}function Np(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Pu.get(t))e.hu.delete(r),n&&e.lu.gu(r,n);e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach(r=>{e.du.containsKey(r)||$b(e,r)})}function $b(e,t){e.Tu.delete(t.path.canonicalString());const n=e.Iu.get(t);n!==null&&(py(e.remoteStore,n),e.Iu=e.Iu.remove(t),e.Eu.delete(n),by(e))}function cw(e,t,n){for(const r of n)r instanceof Bb?(e.du.addReference(r.key,t),e3(e,r)):r instanceof Hb?(vt(Sy,"Document no longer in limbo: "+r.key),e.du.removeReference(r.key,t),e.du.containsKey(r.key)||$b(e,r.key)):Dt(19791,{pu:r})}function e3(e,t){const n=t.key,r=n.path.canonicalString();e.Iu.get(n)||e.Tu.has(r)||(vt(Sy,"New document in limbo: "+n),e.Tu.add(r),by(e))}function by(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){const t=e.Tu.values().next().value;e.Tu.delete(t);const n=new Rt(pe.fromString(t)),r=e.Vu.next();e.Eu.set(r,new jk(n)),e.Iu=e.Iu.insert(n,r),Vb(e.remoteStore,new Ds(or(rb(n.path)),r,"TargetPurposeLimboResolution",Jf.le))}}async function _c(e,t,n){const r=Vt(e),a=[],l=[],c=[];r.hu.isEmpty()||(r.hu.forEach((d,g)=>{c.push(r.fu(g,t,n).then(m=>{var y;if((m||n)&&r.isPrimaryClient){const v=m?!m.fromCache:(y=n?.targetChanges.get(g.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(m){a.push(m);const v=gy.Rs(g.targetId,m);l.push(v)}}))}),await Promise.all(c),r.lu.Y_(a),await async function(g,m){const y=Vt(g);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>gt.forEach(m,E=>gt.forEach(E.ds,S=>y.persistence.referenceDelegate.addReference(v,E.targetId,S)).next(()=>gt.forEach(E.As,S=>y.persistence.referenceDelegate.removeReference(v,E.targetId,S)))))}catch(v){if(!_l(v))throw v;vt(my,"Failed to update sequence numbers: "+v)}for(const v of m){const E=v.targetId;if(!v.fromCache){const S=y.xs.get(E),x=S.snapshotVersion,k=S.withLastLimboFreeSnapshotVersion(x);y.xs=y.xs.insert(E,k)}}}(r.localStore,l))}async function n3(e,t){const n=Vt(e);if(!n.currentUser.isEqual(t)){vt(Sy,"User change. New user:",t.toKey());const r=await Nb(n.localStore,t);n.currentUser=t,function(l,c){l.Ru.forEach(d=>{d.forEach(g=>{g.reject(new Et(dt.CANCELLED,c))})}),l.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await _c(n,r.ks)}}function i3(e,t){const n=Vt(e),r=n.Eu.get(t);if(r&&r.cu)return Yt().add(r.key);{let a=Yt();const l=n.Pu.get(t);if(!l)return a;for(const c of l){const d=n.hu.get(c);a=a.unionWith(d.view.eu)}return a}}function Yb(e){const t=Vt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Fb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=i3.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Wk.bind(null,t),t.lu.Y_=zk.bind(null,t.eventManager),t.lu.gu=Bk.bind(null,t.eventManager),t}function r3(e){const t=Vt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Jk.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=t3.bind(null,t),t}class Pf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=ld(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,n){return null}Cu(t,n){return null}Du(t){return sk(this.persistence,new nk,t.initialUser,this.serializer)}Su(t){return new xb(dy.fi,this.serializer)}bu(t){return new fk}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pf.provider={build:()=>new Pf};class s3 extends Pf{constructor(t){super(),this.cacheSizeBytes=t}vu(t,n){ne(this.persistence.referenceDelegate instanceof Vf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new HV(r,t.asyncQueue,n)}Su(t){const n=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new xb(r=>Vf.fi(r,n),this.serializer)}}class Dp{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>uw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=n3.bind(null,this.syncEngine),await Vk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Pk}()}createDatastore(t){const n=ld(t.databaseInfo.databaseId),r=function(l){return new yk(l)}(t.databaseInfo);return function(l,c,d,g){return new Tk(l,c,d,g)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,a,l,c,d){return new Sk(r,a,l,c,d)}(this.localStore,this.datastore,t.asyncQueue,n=>uw(this.syncEngine,n,0),function(){return iw.C()?new iw:new dk}())}createSyncEngine(t,n){return function(a,l,c,d,g,m,y){const v=new Gk(a,l,c,d,g,m);return y&&(v.mu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(a){const l=Vt(a);vt(Ua,"RemoteStore shutting down."),l.da.add(5),await yc(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Dp.provider={build:()=>new Dp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):$r("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="FirestoreClient";class o3{constructor(t,n,r,a,l){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=En.UNAUTHENTICATED,this.clientId=H1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async c=>{vt(Gs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(vt(Gs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ls;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Ty(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function jm(e,t){e.asyncQueue.verifyOperationInProgress(),vt(Gs,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async a=>{r.isEqual(a)||(await Nb(t.localStore,a),r=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function hw(e,t){e.asyncQueue.verifyOperationInProgress();const n=await l3(e);vt(Gs,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>sw(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,a)=>sw(t.remoteStore,a)),e._onlineComponents=t}async function l3(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){vt(Gs,"Using user provided OfflineComponentProvider");try{await jm(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(a){return a.name==="FirebaseError"?a.code===dt.FAILED_PRECONDITION||a.code===dt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;ol("Error using user provided cache. Falling back to memory cache: "+n),await jm(e,new Pf)}}else vt(Gs,"Using default OfflineComponentProvider"),await jm(e,new s3(void 0));return e._offlineComponents}async function Kb(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(vt(Gs,"Using user provided OnlineComponentProvider"),await hw(e,e._uninitializedComponentsProvider._online)):(vt(Gs,"Using default OnlineComponentProvider"),await hw(e,new Dp))),e._onlineComponents}function u3(e){return Kb(e).then(t=>t.syncEngine)}async function c3(e){const t=await Kb(e),n=t.eventManager;return n.onListen=$k.bind(null,t.syncEngine),n.onUnlisten=Xk.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Yk.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Qk.bind(null,t.syncEngine),n}function h3(e,t,n={}){const r=new Ls;return e.asyncQueue.enqueueAndForget(async()=>function(l,c,d,g,m){const y=new a3({next:E=>{y.xu(),c.enqueueAndForget(()=>Uk(l,v)),E.fromCache&&g.source==="server"?m.reject(new Et(dt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(E)},error:E=>m.reject(E)}),v=new Hk(d,y,{includeMetadataChanges:!0,Qa:!0});return Lk(l,v)}(await c3(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(e,t,n){if(!n)throw new Et(dt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function f3(e,t,n,r){if(t===!0&&r===!0)throw new Et(dt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function dw(e){if(!Rt.isDocumentKey(e))throw new Et(dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function gw(e){if(Rt.isDocumentKey(e))throw new Et(dt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function hd(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Dt(12329,{type:typeof e})}function za(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Et(dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hd(e);throw new Et(dt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="firestore.googleapis.com",mw=!0;class pw{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Et(dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Zb,this.ssl=mw}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:mw;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Cb;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<zV)throw new Et(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}f3("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xb((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Et(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Et(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Et(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class fd{constructor(t,n,r,a){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Et(dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Et(dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pw(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new p4;switch(r.type){case"firstParty":return new E4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Et(dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=fw.get(n);r&&(vt("ComponentProvider","Removing Datastore"),fw.delete(n),r.terminate())}(this),Promise.resolve()}}function d3(e,t,n,r={}){var a;e=za(e,fd);const l=gl(t),c=e._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:e._getEmulatorOptions()}),g=`${t}:${n}`;l&&(b1(`https://${g}`),A1("Firestore",!0)),c.host!==Zb&&c.host!==g&&ol("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},c),{host:g,ssl:l,emulatorOptions:r});if(!ka(m,d)&&(e._setSettings(m),r.mockUserToken)){let y,v;if(typeof r.mockUserToken=="string")y=r.mockUserToken,v=En.MOCK_USER;else{y=HM(r.mockUserToken,(a=e._app)===null||a===void 0?void 0:a.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Et(dt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new En(E)}e._authCredentials=new y4(new z1(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new ja(this.firestore,t,this._query)}}class Jn{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Us(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Jn(this.firestore,t,this._key)}}class Us extends ja{constructor(t,n,r){super(t,n,rb(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Jn(this.firestore,null,new Rt(t))}withConverter(t){return new Us(this.firestore,t,this._path)}}function Ay(e,t,...n){if(e=Ye(e),Qb("collection","path",t),e instanceof fd){const r=pe.fromString(t,...n);return gw(r),new Us(e,null,r)}{if(!(e instanceof Jn||e instanceof Us))throw new Et(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(pe.fromString(t,...n));return gw(r),new Us(e.firestore,null,r)}}function Tl(e,t,...n){if(e=Ye(e),arguments.length===1&&(t=H1.newId()),Qb("doc","path",t),e instanceof fd){const r=pe.fromString(t,...n);return dw(r),new Jn(e,null,new Rt(r))}{if(!(e instanceof Jn||e instanceof Us))throw new Et(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(pe.fromString(t,...n));return dw(r),new Jn(e.firestore,e instanceof Us?e.converter:null,new Rt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="AsyncQueue";class _w{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Mb(this,"async_queue_retry"),this.rc=()=>{const r=Fm();r&&vt(yw,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=t;const n=Fm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const n=Fm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Ls;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!_l(t))throw t;vt(yw,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const n=this.sc.then(()=>(this.ec=!0,t().catch(r=>{throw this.Xu=r,this.ec=!1,$r("INTERNAL UNHANDLED ERROR: ",vw(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(t,n,r){this.oc(),this.nc.indexOf(t)>-1&&(n=0);const a=Ey.createAndSchedule(this,t,n,r,l=>this.uc(l));return this.Zu.push(a),a}oc(){this.Xu&&Dt(47125,{cc:vw(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const n of this.Zu)if(n.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const n=this.Zu.indexOf(t);this.Zu.splice(n,1)}}function vw(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class vc extends fd{constructor(t,n,r,a){super(t,n,r,a),this.type="firestore",this._queue=new _w,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new _w(t),this._firestoreClient=void 0,await t}}}function g3(e,t){const n=typeof e=="object"?e:x1(),r=typeof e=="string"?e:Cf,a=ey(n,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=zM("firestore");l&&d3(a,...l)}return a}function Ry(e){if(e._terminated)throw new Et(dt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||m3(e),e._firestoreClient}function m3(e){var t,n,r;const a=e._freezeSettings(),l=function(d,g,m,y){return new k4(d,g,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,Xb(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,a);e._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),e._firestoreClient=new o3(e._authCredentials,e._appCheckCredentials,e._queue,l,e._componentsProvider&&function(d){const g=d?._online.build();return{_offline:d?._offline.build(g),_online:g}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(t){this._byteString=t}static fromBase64String(t){try{return new dl(gn.fromBase64String(t))}catch(n){throw new Et(dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new dl(gn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Et(dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Et(dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Et(dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Bt(this._lat,t._lat)||Bt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3=/^__.*__$/;class y3{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Ys(t,this.data,this.fieldMask,n,this.fieldTransforms):new mc(t,this.data,n,this.fieldTransforms)}}class Wb{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Ys(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Jb(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dt(40011,{Ic:e})}}class Ny{constructor(t,n,r,a,l,c){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new Ny(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),a=this.dc({path:r,Rc:!1});return a.Vc(t),a}mc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),a=this.dc({path:r,Rc:!1});return a.Ec(),a}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return Lf(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(Jb(this.Ic)&&p3.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class _3{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||ld(t)}bc(t,n,r,a=!1){return new Ny({Ic:t,methodName:n,wc:r,path:dn.emptyPath(),Rc:!1,yc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dy(e){const t=e._freezeSettings(),n=ld(e._databaseId);return new _3(e._databaseId,!!t.ignoreUndefinedProperties,n)}function tA(e,t,n,r,a,l={}){const c=e.bc(l.merge||l.mergeFields?2:0,t,n,a);My("Data must be an object, but it was:",c,r);const d=eA(r,c);let g,m;if(l.merge)g=new Zn(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const v of l.mergeFields){const E=Mp(t,v,n);if(!c.contains(E))throw new Et(dt.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);iA(y,E)||y.push(E)}g=new Zn(y),m=c.fieldTransforms.filter(v=>g.covers(v.field))}else g=null,m=c.fieldTransforms;return new y3(new Pn(d),g,m)}class gd extends Iy{_toFieldTransform(t){if(t.Ic!==2)throw t.Ic===1?t.gc(`${this._methodName}() can only appear at the top level of your update data`):t.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof gd}}function v3(e,t,n,r){const a=e.bc(1,t,n);My("Data must be an object, but it was:",a,r);const l=[],c=Pn.empty();$s(r,(g,m)=>{const y=Oy(t,g,n);m=Ye(m);const v=a.mc(y);if(m instanceof gd)l.push(y);else{const E=Ec(m,v);E!=null&&(l.push(y),c.set(y,E))}});const d=new Zn(l);return new Wb(c,d,a.fieldTransforms)}function E3(e,t,n,r,a,l){const c=e.bc(1,t,n),d=[Mp(t,r,n)],g=[a];if(l.length%2!=0)throw new Et(dt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<l.length;E+=2)d.push(Mp(t,l[E])),g.push(l[E+1]);const m=[],y=Pn.empty();for(let E=d.length-1;E>=0;--E)if(!iA(m,d[E])){const S=d[E];let x=g[E];x=Ye(x);const k=c.mc(S);if(x instanceof gd)m.push(S);else{const M=Ec(x,k);M!=null&&(m.push(S),y.set(S,M))}}const v=new Zn(m);return new Wb(y,v,c.fieldTransforms)}function T3(e,t,n,r=!1){return Ec(n,e.bc(r?4:3,t))}function Ec(e,t){if(nA(e=Ye(e)))return My("Unsupported field value:",t,e),eA(e,t);if(e instanceof Iy)return function(r,a){if(!Jb(a.Ic))throw a.gc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.gc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(r,a){const l=[];let c=0;for(const d of r){let g=Ec(d,a.fc(c));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),c++}return{arrayValue:{values:l}}}(e,t)}return function(r,a){if((r=Ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rV(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=ye.fromDate(r);return{timestampValue:Of(a.serializer,l)}}if(r instanceof ye){const l=new ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Of(a.serializer,l)}}if(r instanceof Cy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof dl)return{bytesValue:Tb(a.serializer,r._byteString)};if(r instanceof Jn){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.gc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:hy(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof xy)return function(c,d){return{mapValue:{fields:{[X1]:{stringValue:Q1},[xf]:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw d.gc("VectorValues must only contain numeric values.");return ly(d.serializer,m)})}}}}}}(r,a);throw a.gc(`Unsupported field value: ${hd(r)}`)}(e,t)}function eA(e,t){const n={};return F1(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$s(e,(r,a)=>{const l=Ec(a,t.Ac(r));l!=null&&(n[r]=l)}),{mapValue:{fields:n}}}function nA(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof ye||e instanceof Cy||e instanceof dl||e instanceof Jn||e instanceof Iy||e instanceof xy)}function My(e,t,n){if(!nA(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const r=hd(n);throw r==="an object"?t.gc(e+" a custom object"):t.gc(e+" "+r)}}function Mp(e,t,n){if((t=Ye(t))instanceof dd)return t._internalPath;if(typeof t=="string")return Oy(e,t);throw Lf("Field path arguments must be of type string or ",e,!1,void 0,n)}const w3=new RegExp("[~\\*/\\[\\]]");function Oy(e,t,n){if(t.search(w3)>=0)throw Lf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new dd(...t.split("."))._internalPath}catch{throw Lf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Lf(e,t,n,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${t}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(l||c)&&(g+=" (found",l&&(g+=` in field ${r}`),c&&(g+=` in document ${a}`),g+=")"),new Et(dt.INVALID_ARGUMENT,d+e+g)}function iA(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(t,n,r,a,l){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Jn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new S3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(md("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class S3 extends rA{data(){return super.data()}}function md(e,t){return typeof t=="string"?Oy(e,t):t instanceof dd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Et(dt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vy{}class sA extends Vy{}function A3(e,t,...n){let r=[];t instanceof Vy&&r.push(t),r=r.concat(n),function(l){const c=l.filter(g=>g instanceof ky).length,d=l.filter(g=>g instanceof pd).length;if(c>1||c>0&&d>0)throw new Et(dt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)e=a._apply(e);return e}class pd extends sA{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new pd(t,n,r)}_apply(t){const n=this._parse(t);return aA(t._query,n),new ja(t.firestore,t.converter,Tp(t._query,n))}_parse(t){const n=Dy(t.firestore);return function(l,c,d,g,m,y,v){let E;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Et(dt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Tw(v,y);const x=[];for(const k of v)x.push(Ew(g,l,k));E={arrayValue:{values:x}}}else E=Ew(g,l,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Tw(v,y),E=T3(d,c,v,y==="in"||y==="not-in");return Be.create(m,y,E)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function R3(e,t,n){const r=t,a=md("where",e);return pd._create(a,r,n)}class ky extends Vy{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new ky(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Vi.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const g of d)aA(c,g),c=Tp(c,g)}(t._query,n),new ja(t.firestore,t.converter,Tp(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Py extends sA{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Py(t,n)}_apply(t){const n=function(a,l,c){if(a.startAt!==null)throw new Et(dt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Et(dt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ic(l,c)}(t._query,this._field,this._direction);return new ja(t.firestore,t.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new vl(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,n))}}function I3(e,t="asc"){const n=t,r=md("orderBy",e);return Py._create(r,n)}function Ew(e,t,n){if(typeof(n=Ye(n))=="string"){if(n==="")throw new Et(dt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sb(t)&&n.indexOf("/")!==-1)throw new Et(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(pe.fromString(n));if(!Rt.isDocumentKey(r))throw new Et(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kT(e,new Rt(r))}if(n instanceof Jn)return kT(e,n._key);throw new Et(dt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hd(n)}.`)}function Tw(e,t){if(!Array.isArray(e)||e.length===0)throw new Et(dt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function aA(e,t){const n=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Et(dt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Et(dt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class C3{convertValue(t,n="none"){switch(Fs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Oe(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(qs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Dt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return $s(t,(a,l)=>{r[a]=this.convertValue(l,n)}),r}convertVectorValue(t){var n,r,a;const l=(a=(r=(n=t.fields)===null||n===void 0?void 0:n[xf].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(c=>Oe(c.doubleValue));return new xy(l)}convertGeoPoint(t){return new Cy(Oe(t.latitude),Oe(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=ed(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(tc(t));default:return null}}convertTimestamp(t){const n=Hs(t);return new ye(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=pe.fromString(t);ne(Ib(r),9688,{name:t});const a=new ec(r.get(1),r.get(3)),l=new Rt(r.popFirst(5));return a.isEqual(n)||$r(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class x3 extends rA{constructor(t,n,r,a,l,c){super(t,n,r,a,c),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new ff(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(md("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ff extends x3{data(t={}){return super.data(t)}}class N3{constructor(t,n,r,a){this._firestore=t,this._userDataWriter=n,this._snapshot=a,this.metadata=new tf(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new ff(this._firestore,this._userDataWriter,r.key,r,new tf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Et(dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const g=new ff(a._firestore,a._userDataWriter,d.doc.key,d.doc,new tf(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const g=new ff(a._firestore,a._userDataWriter,d.doc.key,d.doc,new tf(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let m=-1,y=-1;return d.type!==0&&(m=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:D3(d.type),doc:g,oldIndex:m,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function D3(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dt(61501,{type:e})}}class M3 extends C3{constructor(t){super(),this.firestore=t}convertBytes(t){return new dl(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Jn(this.firestore,null,n)}}function Ly(e){e=za(e,ja);const t=za(e.firestore,vc),n=Ry(t),r=new M3(t);return b3(e._query),h3(n,e._query).then(a=>new N3(t,r,e,a))}function Uy(e,t,n){e=za(e,Jn);const r=za(e.firestore,vc),a=oA(e.converter,t,n);return zy(r,[tA(Dy(r),"setDoc",e._key,a,e.converter!==null,n).toMutation(e._key,Wn.none())])}function O3(e){return zy(za(e.firestore,vc),[new ad(e._key,Wn.none())])}function zy(e,t){return function(r,a){const l=new Ls;return r.asyncQueue.enqueueAndForget(async()=>Zk(await u3(r),a,l)),l.promise}(Ry(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Dy(t)}set(t,n,r){this._verifyNotCommitted();const a=Gm(t,this._firestore),l=oA(a.converter,n,r),c=tA(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(c.toMutation(a._key,Wn.none())),this}update(t,n,r,...a){this._verifyNotCommitted();const l=Gm(t,this._firestore);let c;return c=typeof(n=Ye(n))=="string"||n instanceof dd?E3(this._dataReader,"WriteBatch.update",l._key,n,r,a):v3(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(c.toMutation(l._key,Wn.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=Gm(t,this._firestore);return this._mutations=this._mutations.concat(new ad(n._key,Wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Et(dt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Gm(e,t){if((e=Ye(e)).firestore!==t)throw new Et(dt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(e){return Ry(e=za(e,vc)),new V3(e,t=>zy(e,t))}(function(t,n=!0){(function(a){pl=a})(ml),al(new Pa("firestore",(r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new vc(new _4(r.getProvider("auth-internal")),new T4(c,r.getProvider("app-check-internal")),function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Et(dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ec(m.options.projectId,y)}(c,a),c);return l=Object.assign({useFetchStreams:n},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),ks(ST,bT,t),ks(ST,bT,"esm2017")})();function By(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function uA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const k3=uA,cA=new dc("auth","Firebase",uA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=new Jp("@firebase/auth");function P3(e,...t){Uf.logLevel<=$t.WARN&&Uf.warn(`Auth (${ml}): ${e}`,...t)}function df(e,...t){Uf.logLevel<=$t.ERROR&&Uf.error(`Auth (${ml}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(e,...t){throw Hy(e,...t)}function ur(e,...t){return Hy(e,...t)}function hA(e,t,n){const r=Object.assign(Object.assign({},k3()),{[t]:n});return new dc("auth","Firebase",r).create(t,{appName:e.name})}function qr(e){return hA(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hy(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return cA.create(e,...t)}function Nt(e,t,...n){if(!e)throw Hy(t,...n)}function zr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw df(t),new Error(t)}function Kr(e,t){e||zr(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function L3(){return ww()==="http:"||ww()==="https:"}function ww(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(L3()||YM()||"connection"in navigator)?navigator.onLine:!0}function z3(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(t,n){this.shortDelay=t,this.longDelay=n,Kr(n>t,"Short delay should be less than long delay!"),this.isMobile=jM()||KM()}get(){return U3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(e,t){Kr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],q3=new Tc(3e4,6e4);function Ks(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Xs(e,t,n,r,a={}){return dA(e,a,async()=>{let l={},c={};r&&(t==="GET"?c=r:l={body:JSON.stringify(r)});const d=gc(Object.assign({key:e.config.apiKey},c)).slice(1),g=await e._getAdditionalHeaders();g["Content-Type"]="application/json",e.languageCode&&(g["X-Firebase-Locale"]=e.languageCode);const m=Object.assign({method:t,headers:g},l);return $M()||(m.referrerPolicy="no-referrer"),e.emulatorConfig&&gl(e.emulatorConfig.host)&&(m.credentials="include"),fA.fetch()(await gA(e,e.config.apiHost,n,d),m)})}async function dA(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},B3),t);try{const a=new j3(e),l=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw ef(e,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[g,m]=d.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw ef(e,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw ef(e,"email-already-in-use",c);if(g==="USER_DISABLED")throw ef(e,"user-disabled",c);const y=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw hA(e,y,m);ki(e,y)}}catch(a){if(a instanceof Xr)throw a;ki(e,"network-request-failed",{message:String(a)})}}async function wc(e,t,n,r,a={}){const l=await Xs(e,t,n,r,a);return"mfaPendingCredential"in l&&ki(e,"multi-factor-auth-required",{_serverResponse:l}),l}async function gA(e,t,n,r){const a=`${t}${n}?${r}`,l=e,c=l.config.emulator?qy(e.config,a):`${e.config.apiScheme}://${a}`;return H3.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function F3(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class j3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ur(this.auth,"network-request-failed")),q3.get())})}}function ef(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const a=ur(e,t,r);return a.customData._tokenResponse=n,a}function Sw(e){return e!==void 0&&e.enterprise!==void 0}class G3{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return F3(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function $3(e,t){return Xs(e,"GET","/v2/recaptchaConfig",Ks(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y3(e,t){return Xs(e,"POST","/v1/accounts:delete",t)}async function zf(e,t){return Xs(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function K3(e,t=!1){const n=Ye(e),r=await n.getIdToken(t),a=Fy(r);Nt(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:qu($m(a.auth_time)),issuedAtTime:qu($m(a.iat)),expirationTime:qu($m(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function $m(e){return Number(e)*1e3}function Fy(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return df("JWT malformed, contained fewer than 3 sections"),null;try{const a=E1(n);return a?JSON.parse(a):(df("Failed to decode base64 JWT payload"),null)}catch(a){return df("Caught error parsing JWT payload as JSON",a?.toString()),null}}function bw(e){const t=Fy(e);return Nt(t,"internal-error"),Nt(typeof t.exp<"u","internal-error"),Nt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Xr&&X3(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function X3({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=qu(this.lastLoginAt),this.creationTime=qu(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bf(e){var t;const n=e.auth,r=await e.getIdToken(),a=await ac(e,zf(n,{idToken:r}));Nt(a?.users.length,n,"internal-error");const l=a.users[0];e._notifyReloadListener(l);const c=!((t=l.providerUserInfo)===null||t===void 0)&&t.length?mA(l.providerUserInfo):[],d=W3(e.providerData,c),g=e.isAnonymous,m=!(e.email&&l.passwordHash)&&!d?.length,y=g?m:!1,v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Vp(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(e,v)}async function Z3(e){const t=Ye(e);await Bf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function W3(e,t){return[...e.filter(r=>!t.some(a=>a.providerId===r.providerId)),...t]}function mA(e){return e.map(t=>{var{providerId:n}=t,r=By(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J3(e,t){const n=await dA(e,{},async()=>{const r=gc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:l}=e.config,c=await gA(e,a,"/v1/token",`key=${l}`),d=await e._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:d,body:r};return e.emulatorConfig&&gl(e.emulatorConfig.host)&&(g.credentials="include"),fA.fetch()(c,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function tP(e,t){return Xs(e,"POST","/v2/accounts:revokeToken",Ks(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Nt(t.idToken,"internal-error"),Nt(typeof t.idToken<"u","internal-error"),Nt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):bw(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Nt(t.length!==0,"internal-error");const n=bw(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Nt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:a,expiresIn:l}=await J3(t,n);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:a,expirationTime:l}=n,c=new Wo;return r&&(Nt(typeof r=="string","internal-error",{appName:t}),c.refreshToken=r),a&&(Nt(typeof a=="string","internal-error",{appName:t}),c.accessToken=a),l&&(Nt(typeof l=="number","internal-error",{appName:t}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Wo,this.toJSON())}_performRefresh(){return zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(e,t){Nt(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Oi{constructor(t){var{uid:n,auth:r,stsTokenManager:a}=t,l=By(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Q3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Vp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await ac(this,this.stsTokenManager.getToken(this.auth,t));return Nt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return K3(this,t)}reload(){return Z3(this)}_assign(t){this!==t&&(Nt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Oi(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await Bf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ei(this.auth.app))return Promise.reject(qr(this.auth));const t=await this.getIdToken();return await ac(this,Y3(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,a,l,c,d,g,m,y;const v=(r=n.displayName)!==null&&r!==void 0?r:void 0,E=(a=n.email)!==null&&a!==void 0?a:void 0,S=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,x=(c=n.photoURL)!==null&&c!==void 0?c:void 0,k=(d=n.tenantId)!==null&&d!==void 0?d:void 0,M=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,B=(m=n.createdAt)!==null&&m!==void 0?m:void 0,q=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:K,emailVerified:L,isAnonymous:Z,providerData:W,stsTokenManager:V}=n;Nt(K&&V,t,"internal-error");const R=Wo.fromJSON(this.name,V);Nt(typeof K=="string",t,"internal-error"),Ss(v,t.name),Ss(E,t.name),Nt(typeof L=="boolean",t,"internal-error"),Nt(typeof Z=="boolean",t,"internal-error"),Ss(S,t.name),Ss(x,t.name),Ss(k,t.name),Ss(M,t.name),Ss(B,t.name),Ss(q,t.name);const I=new Oi({uid:K,auth:t,email:E,emailVerified:L,displayName:v,isAnonymous:Z,photoURL:x,phoneNumber:S,tenantId:k,stsTokenManager:R,createdAt:B,lastLoginAt:q});return W&&Array.isArray(W)&&(I.providerData=W.map(P=>Object.assign({},P))),M&&(I._redirectEventId=M),I}static async _fromIdTokenResponse(t,n,r=!1){const a=new Wo;a.updateFromServerResponse(n);const l=new Oi({uid:n.localId,auth:t,stsTokenManager:a,isAnonymous:r});return await Bf(l),l}static async _fromGetAccountInfoResponse(t,n,r){const a=n.users[0];Nt(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?mA(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new Wo;d.updateFromIdToken(r);const g=new Oi({uid:a.localId,auth:t,stsTokenManager:d,isAnonymous:c}),m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Vp(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(g,m),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw=new Map;function Br(e){Kr(e instanceof Function,"Expected a class definition");let t=Aw.get(e);return t?(Kr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Aw.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}pA.type="NONE";const Rw=pA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(e,t,n){return`firebase:${e}:${t}:${n}`}class Jo{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=gf(this.userKey,a.apiKey,l),this.fullPersistenceKey=gf("persistence",a.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await zf(this.auth,{idToken:t}).catch(()=>{});return n?Oi._fromGetAccountInfoResponse(this.auth,n,t):null}return Oi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Jo(Br(Rw),t,r);const a=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=a[0]||Br(Rw);const c=gf(r,t.config.apiKey,t.name);let d=null;for(const m of n)try{const y=await m._get(c);if(y){let v;if(typeof y=="string"){const E=await zf(t,{idToken:y}).catch(()=>{});if(!E)break;v=await Oi._fromGetAccountInfoResponse(t,E,y)}else v=Oi._fromJSON(t,y);m!==l&&(d=v),l=m;break}}catch{}const g=a.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Jo(l,t,r):(l=g[0],d&&await l._set(c,d.toJSON()),await Promise.all(n.map(async m=>{if(m!==l)try{await m._remove(c)}catch{}})),new Jo(l,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(EA(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(yA(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(wA(t))return"Blackberry";if(SA(t))return"Webos";if(_A(t))return"Safari";if((t.includes("chrome/")||vA(t))&&!t.includes("edge/"))return"Chrome";if(TA(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if(r?.length===2)return r[1]}return"Other"}function yA(e=wn()){return/firefox\//i.test(e)}function _A(e=wn()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function vA(e=wn()){return/crios\//i.test(e)}function EA(e=wn()){return/iemobile/i.test(e)}function TA(e=wn()){return/android/i.test(e)}function wA(e=wn()){return/blackberry/i.test(e)}function SA(e=wn()){return/webos/i.test(e)}function jy(e=wn()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function eP(e=wn()){var t;return jy(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function nP(){return XM()&&document.documentMode===10}function bA(e=wn()){return jy(e)||TA(e)||SA(e)||wA(e)||/windows phone/i.test(e)||EA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(e,t=[]){let n;switch(e){case"Browser":n=Iw(wn());break;case"Worker":n=`${Iw(wn())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${ml}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=l=>new Promise((c,d)=>{try{const g=t(l);c(g)}catch(g){d(g)}});r.onAbort=n,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rP(e,t={}){return Xs(e,"GET","/v2/passwordPolicy",Ks(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=6;class aP{constructor(t){var n,r,a,l;const c=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:sP,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=t.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,a,l,c,d;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,g),this.validatePasswordCharacterOptions(t,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(r=g.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),g.isValid&&(g.isValid=(a=g.containsLowercaseLetter)!==null&&a!==void 0?a:!0),g.isValid&&(g.isValid=(l=g.containsUppercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(c=g.containsNumericCharacter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(d=g.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),g}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),a&&(n.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let a=0;a<t.length;a++)r=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(t,n,r,a){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cw(this),this.idTokenSubscription=new Cw(this),this.beforeStateQueue=new iP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Br(n)),this._initializationPromise=this.queue(async()=>{var r,a,l;if(!this._deleted&&(this.persistenceManager=await Jo.create(this,t),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await zf(this,{idToken:t}),r=await Oi._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Ei(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=a?._redirectEventId,g=await this.tryRedirectSignIn(t);(!c||c===d)&&g?.user&&(a=g.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Bf(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=z3()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Ei(this.app))return Promise.reject(qr(this));const n=t?Ye(t):null;return n&&Nt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Nt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Ei(this.app)?Promise.reject(qr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Ei(this.app)?Promise.reject(qr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Br(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await rP(this),n=new aP(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new dc("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await tP(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Br(t)||this._popupRedirectResolver;Nt(n,this,"argument-error"),this.redirectPersistenceManager=await Jo.create(this,[Br(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,a){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Nt(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof n=="function"){const g=t.addObserver(n,r,a);return()=>{c=!0,g()}}else{const g=t.addObserver(n);return()=>{c=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=AA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(n["X-Firebase-AppCheck"]=a),n}async _getAppCheckToken(){var t;if(Ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n?.error&&P3(`Error while retrieving App Check token: ${n.error}`),n?.token}}function Ga(e){return Ye(e)}class Cw{constructor(t){this.auth=t,this.observer=null,this.addObserver=iO(n=>this.observer=n)}get next(){return Nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lP(e){yd=e}function RA(e){return yd.loadJS(e)}function uP(){return yd.recaptchaEnterpriseScript}function cP(){return yd.gapiScript}function hP(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class fP{constructor(){this.enterprise=new dP}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class dP{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const gP="recaptcha-enterprise",IA="NO_RECAPTCHA";class mP{constructor(t){this.type=gP,this.auth=Ga(t)}async verify(t="verify",n=!1){async function r(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{$3(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new G3(g);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,c(m.siteKey)}}).catch(g=>{d(g)})})}function a(l,c,d){const g=window.grecaptcha;Sw(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:t}).then(m=>{c(m)}).catch(()=>{c(IA)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new fP().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(d=>{if(!n&&Sw(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let g=uP();g.length!==0&&(g+=d),RA(g).then(()=>{a(d,l,c)}).catch(m=>{c(m)})}}).catch(d=>{c(d)})})}}async function xw(e,t,n,r=!1,a=!1){const l=new mP(e);let c;if(a)c=IA;else try{c=await l.verify(n)}catch{c=await l.verify(n,!0)}const d=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const g=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const g=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function kp(e,t,n,r,a){var l;if(!((l=e._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await xw(e,t,n,n==="getOobCode");return r(e,c)}else return r(e,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await xw(e,t,n,n==="getOobCode");return r(e,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(e,t){const n=ey(e,"auth");if(n.isInitialized()){const a=n.getImmediate(),l=n.getOptions();if(ka(l,t??{}))return a;ki(a,"already-initialized")}return n.initialize({options:t})}function yP(e,t){const n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Br);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function _P(e,t,n){const r=Ga(e);Nt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const a=!1,l=CA(t),{host:c,port:d}=vP(t),g=d===null?"":`:${d}`,m={url:`${l}//${c}${g}/`},y=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Nt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Nt(ka(m,r.config.emulator)&&ka(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,gl(c)?(b1(`${l}//${c}${g}`),A1("Auth",!0)):EP()}function CA(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function vP(e){const t=CA(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:Nw(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:Nw(c)}}}function Nw(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function EP(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return zr("not implemented")}_getIdTokenResponse(t){return zr("not implemented")}_linkToIdToken(t,n){return zr("not implemented")}_getReauthenticationResolver(t){return zr("not implemented")}}async function TP(e,t){return Xs(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wP(e,t){return wc(e,"POST","/v1/accounts:signInWithPassword",Ks(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SP(e,t){return wc(e,"POST","/v1/accounts:signInWithEmailLink",Ks(e,t))}async function bP(e,t){return wc(e,"POST","/v1/accounts:signInWithEmailLink",Ks(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc extends Gy{constructor(t,n,r,a=null){super("password",r),this._email=t,this._password=n,this._tenantId=a}static _fromEmailAndPassword(t,n){return new oc(t,n,"password")}static _fromEmailAndCode(t,n,r=null){return new oc(t,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kp(t,n,"signInWithPassword",wP);case"emailLink":return SP(t,{email:this._email,oobCode:this._password});default:ki(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kp(t,r,"signUpPassword",TP);case"emailLink":return bP(t,{idToken:n,email:this._email,oobCode:this._password});default:ki(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl(e,t){return wc(e,"POST","/v1/accounts:signInWithIdp",Ks(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP="http://localhost";class Ba extends Gy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Ba(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):ki("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:a}=n,l=By(n,["providerId","signInMethod"]);if(!r||!a)return null;const c=new Ba(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(t){const n=this.buildRequest();return tl(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,tl(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,tl(t,n)}buildRequest(){const t={requestUri:AP,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=gc(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IP(e){const t=Mu(Ou(e)).link,n=t?Mu(Ou(t)).deep_link_id:null,r=Mu(Ou(e)).deep_link_id;return(r?Mu(Ou(r)).link:null)||r||n||t||e}class $y{constructor(t){var n,r,a,l,c,d;const g=Mu(Ou(t)),m=(n=g.apiKey)!==null&&n!==void 0?n:null,y=(r=g.oobCode)!==null&&r!==void 0?r:null,v=RP((a=g.mode)!==null&&a!==void 0?a:null);Nt(m&&y&&v,"argument-error"),this.apiKey=m,this.operation=v,this.code=y,this.continueUrl=(l=g.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=g.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=g.tenantId)!==null&&d!==void 0?d:null}static parseLink(t){const n=IP(t);try{return new $y(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(){this.providerId=wl.PROVIDER_ID}static credential(t,n){return oc._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const r=$y.parseLink(n);return Nt(r,"argument-error"),oc._fromEmailAndCode(t,r.code,r.tenantId)}}wl.PROVIDER_ID="password";wl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends xA{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends Sc{constructor(){super("facebook.com")}static credential(t){return Ba._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Is.credentialFromTaggedObject(t)}static credentialFromError(t){return Is.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Is.credential(t.oauthAccessToken)}catch{return null}}}Is.FACEBOOK_SIGN_IN_METHOD="facebook.com";Is.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends Sc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Ba._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Cs.credentialFromTaggedObject(t)}static credentialFromError(t){return Cs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Cs.credential(n,r)}catch{return null}}}Cs.GOOGLE_SIGN_IN_METHOD="google.com";Cs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs extends Sc{constructor(){super("github.com")}static credential(t){return Ba._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return xs.credentialFromTaggedObject(t)}static credentialFromError(t){return xs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return xs.credential(t.oauthAccessToken)}catch{return null}}}xs.GITHUB_SIGN_IN_METHOD="github.com";xs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends Sc{constructor(){super("twitter.com")}static credential(t,n){return Ba._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Ns.credentialFromTaggedObject(t)}static credentialFromError(t){return Ns.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ns.credential(n,r)}catch{return null}}}Ns.TWITTER_SIGN_IN_METHOD="twitter.com";Ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CP(e,t){return wc(e,"POST","/v1/accounts:signUp",Ks(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,a=!1){const l=await Oi._fromIdTokenResponse(t,r,a),c=Dw(r);return new Ha({user:l,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const a=Dw(r);return new Ha({user:t,providerId:a,_tokenResponse:r,operationType:n})}}function Dw(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf extends Xr{constructor(t,n,r,a){var l;super(n.code,n.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Hf.prototype),this.customData={appName:t.name,tenantId:(l=t.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,a){return new Hf(t,n,r,a)}}function NA(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Hf._fromErrorAndOperation(e,l,t,r):l})}async function xP(e,t,n=!1){const r=await ac(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ha._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NP(e,t,n=!1){const{auth:r}=e;if(Ei(r.app))return Promise.reject(qr(r));const a="reauthenticate";try{const l=await ac(e,NA(r,a,t,e),n);Nt(l.idToken,r,"internal-error");const c=Fy(l.idToken);Nt(c,r,"internal-error");const{sub:d}=c;return Nt(e.uid===d,r,"user-mismatch"),Ha._forOperation(e,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&ki(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(e,t,n=!1){if(Ei(e.app))return Promise.reject(qr(e));const r="signIn",a=await NA(e,r,t),l=await Ha._fromIdTokenResponse(e,r,a);return n||await e._updateCurrentUser(l.user),l}async function DP(e,t){return DA(Ga(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(e){const t=Ga(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function MP(e,t,n){if(Ei(e.app))return Promise.reject(qr(e));const r=Ga(e),c=await kp(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",CP).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&MA(e),g}),d=await Ha._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function OP(e,t,n){return Ei(e.app)?Promise.reject(qr(e)):DP(Ye(e),wl.credential(t,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&MA(e),r})}function VP(e,t,n,r){return Ye(e).onIdTokenChanged(t,n,r)}function kP(e,t,n){return Ye(e).beforeAuthStateChanged(t,n)}function PP(e,t,n,r){return Ye(e).onAuthStateChanged(t,n,r)}function LP(e){return Ye(e).signOut()}const qf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qf,"1"),this.storage.removeItem(qf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP=1e3,zP=10;class VA extends OA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bA(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),a=this.localCache[n];r!==a&&t(n,a,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((c,d,g)=>{this.notifyListeners(c,g)});return}const r=t.key;n?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);nP()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,zP):a()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const a of Array.from(r))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},UP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}VA.type="LOCAL";const BP=VA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA extends OA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}kA.type="SESSION";const PA=kA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(a=>a.isListeningto(t));if(n)return n;const r=new _d(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:a,data:l}=n.data,c=this.handlersMap[a];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async m=>m(n.origin,l)),g=await HP(d);n.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:g})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_d.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,g)=>{const m=Yy("",20);a.port1.start();const y=setTimeout(()=>{g(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(v){const E=v;if(E.data.eventId===m)switch(E.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(E.data.response);break;default:clearTimeout(y),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:m,data:n},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(){return window}function FP(e){cr().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(){return typeof cr().WorkerGlobalScope<"u"&&typeof cr().importScripts=="function"}async function jP(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function GP(){var e;return((e=navigator?.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function $P(){return LA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="firebaseLocalStorageDb",YP=1,Ff="firebaseLocalStorage",zA="fbase_key";class bc{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vd(e,t){return e.transaction([Ff],t?"readwrite":"readonly").objectStore(Ff)}function KP(){const e=indexedDB.deleteDatabase(UA);return new bc(e).toPromise()}function Pp(){const e=indexedDB.open(UA,YP);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(Ff,{keyPath:zA})}catch(a){n(a)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(Ff)?t(r):(r.close(),await KP(),t(await Pp()))})})}async function Mw(e,t,n){const r=vd(e,!0).put({[zA]:t,value:n});return new bc(r).toPromise()}async function XP(e,t){const n=vd(e,!1).get(t),r=await new bc(n).toPromise();return r===void 0?null:r.value}function Ow(e,t){const n=vd(e,!0).delete(t);return new bc(n).toPromise()}const QP=800,ZP=3;class BA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pp(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>ZP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_d._getInstance($P()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await jP(),!this.activeServiceWorker)return;this.sender=new qP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||GP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Pp();return await Mw(t,qf,"1"),await Ow(t,qf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Mw(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>XP(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ow(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const l=vd(a,!1).getAll();return new bc(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:a,value:l}of t)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const a of Array.from(r))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BA.type="LOCAL";const WP=BA;new Tc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(e,t){return t?Br(t):(Nt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky extends Gy{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return tl(t,this._buildIdpRequest())}_linkToIdToken(t,n){return tl(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return tl(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function t6(e){return DA(e.auth,new Ky(e),e.bypassAuthState)}function e6(e){const{auth:t,user:n}=e;return Nt(n,t,"internal-error"),NP(n,new Ky(e),e.bypassAuthState)}async function n6(e){const{auth:t,user:n}=e;return Nt(n,t,"internal-error"),xP(n,new Ky(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(t,n,r,a,l=!1){this.auth=t,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:a,tenantId:l,error:c,type:d}=t;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(g))}catch(m){this.reject(m)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return t6;case"linkViaPopup":case"linkViaRedirect":return n6;case"reauthViaPopup":case"reauthViaRedirect":return e6;default:ki(this.auth,"internal-error")}}resolve(t){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6=new Tc(2e3,1e4);class Yo extends HA{constructor(t,n,r,a,l){super(t,n,a,l),this.provider=r,this.authWindow=null,this.pollId=null,Yo.currentPopupAction&&Yo.currentPopupAction.cancel(),Yo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Nt(t,this.auth,"internal-error"),t}async onExecution(){Kr(this.filter.length===1,"Popup operations only handle one event");const t=Yy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ur(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ur(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yo.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ur(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,i6.get())};t()}}Yo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6="pendingRedirect",mf=new Map;class s6 extends HA{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=mf.get(this.auth._key());if(!t){try{const r=await a6(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}mf.set(this.auth._key(),t)}return this.bypassAuthState||mf.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function a6(e,t){const n=u6(t),r=l6(e);if(!await r._isAvailable())return!1;const a=await r._get(n)==="true";return await r._remove(n),a}function o6(e,t){mf.set(e._key(),t)}function l6(e){return Br(e._redirectPersistence)}function u6(e){return gf(r6,e.config.apiKey,e.name)}async function c6(e,t,n=!1){if(Ei(e.app))return Promise.reject(qr(e));const r=Ga(e),a=JP(r,t),c=await new s6(r,a,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6=10*60*1e3;class f6{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!d6(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!qA(t)){const a=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ur(this.auth,a))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=h6&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vw(t))}saveEventToCache(t){this.cachedEventUids.add(Vw(t)),this.lastProcessedEventTime=Date.now()}}function Vw(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function qA({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function d6(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qA(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g6(e,t={}){return Xs(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,p6=/^https?/;async function y6(e){if(e.config.emulator)return;const{authorizedDomains:t}=await g6(e);for(const n of t)try{if(_6(n))return}catch{}ki(e,"unauthorized-domain")}function _6(e){const t=Op(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const c=new URL(e);return c.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!p6.test(n))return!1;if(m6.test(e))return r===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6=new Tc(3e4,6e4);function kw(){const e=cr().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function E6(e){return new Promise((t,n)=>{var r,a,l;function c(){kw(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{kw(),n(ur(e,"network-request-failed"))},timeout:v6.get()})}if(!((a=(r=cr().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)t(gapi.iframes.getContext());else if(!((l=cr().gapi)===null||l===void 0)&&l.load)c();else{const d=hP("iframefcb");return cr()[d]=()=>{gapi.load?c():n(ur(e,"network-request-failed"))},RA(`${cP()}?onload=${d}`).catch(g=>n(g))}}).catch(t=>{throw pf=null,t})}let pf=null;function T6(e){return pf=pf||E6(e),pf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6=new Tc(5e3,15e3),S6="__/auth/iframe",b6="emulator/auth/iframe",A6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},R6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function I6(e){const t=e.config;Nt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?qy(t,b6):`https://${e.config.authDomain}/${S6}`,r={apiKey:t.apiKey,appName:e.name,v:ml},a=R6.get(e.config.apiHost);a&&(r.eid=a);const l=e._getFrameworks();return l.length&&(r.fw=l.join(",")),`${n}?${gc(r).slice(1)}`}async function C6(e){const t=await T6(e),n=cr().gapi;return Nt(n,e,"internal-error"),t.open({where:document.body,url:I6(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:A6,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=ur(e,"network-request-failed"),d=cr().setTimeout(()=>{l(c)},w6.get());function g(){cr().clearTimeout(d),a(r)}r.ping(g).then(g,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},N6=500,D6=600,M6="_blank",O6="http://localhost";class Pw{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function V6(e,t,n,r=N6,a=D6){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const g=Object.assign(Object.assign({},x6),{width:r.toString(),height:a.toString(),top:l,left:c}),m=wn().toLowerCase();n&&(d=vA(m)?M6:n),yA(m)&&(t=t||O6,g.scrollbars="yes");const y=Object.entries(g).reduce((E,[S,x])=>`${E}${S}=${x},`,"");if(eP(m)&&d!=="_self")return k6(t||"",d),new Pw(null);const v=window.open(t||"",d,y);Nt(v,e,"popup-blocked");try{v.focus()}catch{}return new Pw(v)}function k6(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6="__/auth/handler",L6="emulator/auth/handler",U6=encodeURIComponent("fac");async function Lw(e,t,n,r,a,l){Nt(e.config.authDomain,e,"auth-domain-config-required"),Nt(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ml,eventId:a};if(t instanceof xA){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",nO(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[y,v]of Object.entries({}))c[y]=v}if(t instanceof Sc){const y=t.getScopes().filter(v=>v!=="");y.length>0&&(c.scopes=y.join(","))}e.tenantId&&(c.tid=e.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const g=await e._getAppCheckToken(),m=g?`#${U6}=${encodeURIComponent(g)}`:"";return`${z6(e)}?${gc(d).slice(1)}${m}`}function z6({config:e}){return e.emulator?qy(e,L6):`https://${e.authDomain}/${P6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="webStorageSupport";class B6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PA,this._completeRedirectFn=c6,this._overrideRedirectResult=o6}async _openPopup(t,n,r,a){var l;Kr((l=this.eventManagers[t._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await Lw(t,n,r,Op(),a);return V6(t,c,Yy())}async _openRedirect(t,n,r,a){await this._originValidation(t);const l=await Lw(t,n,r,Op(),a);return FP(l),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:a,promise:l}=this.eventManagers[n];return a?Promise.resolve(a):(Kr(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await C6(t),r=new f6(t);return n.register("authEvent",a=>(Nt(a?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Ym,{type:Ym},a=>{var l;const c=(l=a?.[0])===null||l===void 0?void 0:l[Ym];c!==void 0&&n(!!c),ki(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=y6(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return bA()||_A()||jy()}}const H6=B6;var Uw="@firebase/auth",zw="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F6(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function j6(e){al(new Pa("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Nt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:c,authDomain:d,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:AA(e)},m=new oP(r,a,l,g);return yP(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),al(new Pa("auth-internal",t=>{const n=Ga(t.getProvider("auth").getImmediate());return(r=>new q6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ks(Uw,zw,F6(e)),ks(Uw,zw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6=5*60,$6=S1("authIdTokenMaxAge")||G6;let Bw=null;const Y6=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>$6)return;const a=n?.token;Bw!==a&&(Bw=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function K6(e=x1()){const t=ey(e,"auth");if(t.isInitialized())return t.getImmediate();const n=pP(e,{popupRedirectResolver:H6,persistence:[WP,BP,PA]}),r=S1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=Y6(l.toString());kP(n,c,()=>c(n.currentUser)),VP(n,d=>c(d))}}const a=T1("auth");return a&&_P(n,`http://${a}`),n}function X6(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}lP({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=a=>{const l=ur("internal-error");l.customData=a,n(l)},r.type="text/javascript",r.charset="UTF-8",X6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});j6("Browser");const Q6={apiKey:"AIzaSyByTZ08eCsc2wv0VIWUHNtHSdmAA_JI5hM",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},FA=C1(Q6),Pi=g3(FA),jf=K6(FA),ei={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},Nn={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function Z6(){const[e,t]=G.useState(""),[n,r]=G.useState(""),[a,l]=G.useState(!1),[c,d]=G.useState(!1),[g,m]=G.useState(""),y=async E=>{E.preventDefault(),d(!0),m("");try{if(!e||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))throw new Error(Nn.INVALID_EMAIL);if(n.length<6)throw new Error(Nn.WEAK_PASSWORD);const x=await MP(jf,e,n);console.log("User created successfully:",x.user.uid)}catch(S){console.error("Sign up error:",S);let x="Failed to create account";S.code==="auth/email-already-in-use"?x=Nn.EMAIL_IN_USE:S.code==="auth/invalid-email"?x=Nn.INVALID_EMAIL:S.code==="auth/weak-password"?x=Nn.WEAK_PASSWORD:S.code==="auth/operation-not-allowed"?x="Email/password accounts are not enabled. Please contact support.":S.message&&(x=S.message),m(x)}finally{d(!1)}},v=async E=>{E.preventDefault(),d(!0),m("");try{if(!e||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))throw new Error(Nn.INVALID_EMAIL);const x=await OP(jf,e,n);console.log("User signed in successfully:",x.user.uid)}catch(S){console.error("Sign in error:",S);let x="Failed to sign in";S.code==="auth/user-not-found"?x=Nn.USER_NOT_FOUND:S.code==="auth/wrong-password"?x=Nn.WRONG_PASSWORD:S.code==="auth/invalid-email"?x=Nn.INVALID_EMAIL:S.code==="auth/user-disabled"?x="This account has been disabled. Please contact support.":S.code==="auth/too-many-requests"?x=Nn.TOO_MANY_REQUESTS:S.message&&(x=S.message),m(x)}finally{d(!1)}};return mt.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",fontFamily:"Arial, sans-serif",backgroundColor:"#f5f5f5"},children:mt.jsxs("div",{style:{padding:"2rem",border:"1px solid #ccc",borderRadius:"8px",backgroundColor:"white",minWidth:"300px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[mt.jsx("h2",{style:{textAlign:"center",marginBottom:"1.5rem"},children:a?"Sign Up":"Sign In"}),mt.jsxs("form",{onSubmit:a?y:v,children:[mt.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:E=>t(E.target.value),required:!0,style:{width:"100%",padding:"0.75rem",marginBottom:"1rem",border:"1px solid #ccc",borderRadius:"4px",fontSize:"1rem",boxSizing:"border-box"}}),mt.jsx("input",{type:"password",placeholder:"Password",value:n,onChange:E=>r(E.target.value),required:!0,style:{width:"100%",padding:"0.75rem",marginBottom:"1rem",border:"1px solid #ccc",borderRadius:"4px",fontSize:"1rem",boxSizing:"border-box"}}),mt.jsx("button",{type:"submit",disabled:c,style:{width:"100%",padding:"0.75rem",backgroundColor:c?"#ccc":"#007bff",color:"white",border:"none",borderRadius:"4px",fontSize:"1rem",cursor:c?"not-allowed":"pointer",marginBottom:"1rem"},children:c?"Loading...":a?"Sign Up":"Sign In"}),g&&mt.jsx("p",{style:{color:"red",textAlign:"center",marginBottom:"1rem",fontSize:"0.9rem"},children:g})]}),mt.jsxs("p",{style:{textAlign:"center",margin:0},children:[a?"Already have an account?":"Don't have an account?",mt.jsx("button",{type:"button",onClick:()=>l(!a),style:{background:"none",border:"none",color:"#007bff",textDecoration:"underline",cursor:"pointer",marginLeft:"0.5rem",fontSize:"1rem"},children:a?"Sign In":"Sign Up"})]})]})})}function W6({allBoards:e,currentBoard:t,onSwitchBoard:n,onCreateBoard:r,onDeleteBoard:a,onSignOut:l,isLoading:c}){const[d,g]=G.useState(!1),m=async()=>{try{g(!0),await r()}catch(v){console.error("Error in sidebar create board:",v)}finally{g(!1)}},y=(v,E)=>{v.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&a(E)};return mt.jsx(mt.Fragment,{children:mt.jsxs("div",{className:"sidebar",children:[mt.jsxs("div",{className:"sidebar-header",children:[mt.jsx("h2",{children:"Launch Hacks"}),mt.jsx("button",{onClick:m,disabled:c||d,style:{opacity:c||d?.6:1,cursor:c||d?"not-allowed":"pointer"},children:d?"Creating...":"+ New Board"})]}),mt.jsxs("div",{className:"sidebar-content",children:[c&&mt.jsx("div",{className:"loading-indicator",children:"Switching boards..."}),mt.jsxs("div",{style:{padding:"10px",fontSize:"12px",color:"#666"},children:["Boards: ",e?.length||0]}),mt.jsx("ul",{children:e?.map(v=>(console.log("Rendering board:",v),mt.jsxs("li",{onClick:()=>!c&&n(v.id),className:t?.id===v.id?"active":"",children:[mt.jsx("span",{className:"board-name",children:v.name}),mt.jsxs("div",{className:"board-actions",children:[v.isOpen&&mt.jsx("span",{className:"open-indicator",children:""}),e.length>1&&mt.jsx("button",{className:"delete-btn",onClick:E=>y(E,v.id),title:"Delete board",children:""})]})]},v.id)))})]}),mt.jsx("div",{className:"sidebar-footer",children:mt.jsx("button",{onClick:l,children:"Sign Out"})})]})})}function J6({name:e,onSetName:t,user:n,isSaving:r,isConceptMode:a,onToggleMode:l}){const[c,d]=G.useState(!1),[g,m]=G.useState(e||"");G.useEffect(()=>{m(e||"")},[e]);const y=E=>{E.key==="Enter"&&(t(g),d(!1))},v=()=>{d(!0),m(e||"")};return mt.jsx(mt.Fragment,{children:mt.jsxs("div",{className:"name",children:[mt.jsx("div",{className:"app-container",children:mt.jsxs("header",{className:"app-header",children:[mt.jsx("h1",{children:"Tink Flow Editor"}),mt.jsxs("div",{className:"user-info",children:[mt.jsxs("p",{children:["Welcome,"," ",n?.isAnonymous?"Anonymous User":n?.email||"User"]}),r&&mt.jsx("span",{className:"save-indicator",children:" Saving..."}),mt.jsx("button",{className:"mode-toggle-btn",onClick:l,title:`Switch to ${a?"Word":"Concept"} Mode`,children:a?" Word Mode":" Concept Mode"})]})]})}),mt.jsxs("div",{className:"board-title-section",children:[c?mt.jsx("input",{type:"text",value:g,onChange:E=>m(E.target.value),onKeyDown:y,onBlur:()=>{t(g),d(!1)},autoFocus:!0}):mt.jsx("h6",{onClick:v,style:{cursor:"pointer"},children:e||"Untitled Board"}),mt.jsx("div",{className:"keyboard-shortcuts",children:mt.jsx("small",{children:" Tips: Ctrl+N for new board, Ctrl+1-9 to switch boards"})})]})]})})}const t9=({notification:e,onRemove:t})=>{const n=r=>{switch(r){case"success":return"";case"error":return"";case"warning":return"";case"info":return"";default:return""}};return mt.jsxs("div",{className:`notification notification-${e.type}`,children:[mt.jsxs("div",{className:"notification-content",children:[mt.jsx("span",{className:"notification-icon",children:n(e.type)}),mt.jsx("span",{className:"notification-message",children:e.message})]}),mt.jsx("button",{className:"notification-close",onClick:()=>t(e.id),children:""})]})},e9=({notifications:e,onRemove:t})=>e.length===0?null:mt.jsx("div",{className:"notifications-container",children:e.map(n=>mt.jsx(t9,{notification:n,onRemove:t},n.id))}),n9=async()=>{try{await LP(jf),console.log("User signed out successfully")}catch(e){throw console.error("Error signing out:",e),e}},i9=()=>{const[e,t]=G.useState(null);return G.useEffect(()=>{const r=PP(jf,a=>{t(a),a?console.log("User signed in:",a.uid):console.log("No user signed in")});return()=>r()},[]),{user:e,signOut:async()=>{try{await n9(),t(null)}catch(r){console.error("Error in sign out:",r)}}}},jA=e=>!!(e&&e.uid),el=[{id:"1",type:"draggableEditable",data:{label:"The _artificial intelligence_ system processes _natural language_ effectively"},position:{x:250,y:25}},{id:"2",type:"draggableEditable",data:{label:"This is a simple sentence with multiple words to demonstrate word mode functionality"},position:{x:100,y:125}},{id:"3",type:"draggableEditable",data:{label:"_Machine learning_ algorithms can _predict outcomes_ with high accuracy"},position:{x:400,y:125}},{id:"4",type:"staticEditable",data:{label:"Static node with _key concepts_ highlighted"},position:{x:250,y:200},draggable:!1}],nl=[{id:"e1-2",source:"1",target:"2"},{id:"e1-3",source:"1",target:"3"},{id:"e2-4",source:"2",target:"4"},{id:"e3-4",source:"3",target:"4"}],r9=async e=>{if(!jA({uid:e}))throw new Error(Nn.AUTH_REQUIRED);try{const t=Ay(Pi,ei.BOARDS),n=A3(t,R3("userId","==",e),I3("createdAt","desc")),r=await Ly(n);if(r.empty){const l={id:`board_${Date.now()}`,userId:e,name:"Default Board",createdAt:ye.now(),isOpen:!0};return await Uy(Tl(Pi,ei.BOARDS,l.id),l),console.log("Created default board:",l),[l]}const a=r.docs.map(l=>({id:l.id,...l.data()}));return console.log("Fetched all boards:",a),a}catch(t){if(console.error("Fetch all boards error:",t),t.code==="failed-precondition"||t.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:e,name:"Fallback Board (Create Index)",createdAt:ye.now(),isOpen:!0,isFallback:!0}]}throw new Error(Nn.LOAD_FAILED)}},Hw=async e=>{if(!e)return console.warn("No board ID provided for fetching nodes"),el;try{const t=Ay(Pi,ei.BOARDS,e,ei.NODES),n=await Ly(t);if(n.empty)return console.log("No nodes found for board, using initial nodes"),el;const r=n.docs.map(a=>({id:a.id,...a.data()}));return console.log("Fetched nodes from board:",r),r}catch(t){return console.error("Fetch nodes error:",t),el}},qw=async e=>{if(!e)return console.warn("No board ID provided for fetching edges"),nl;try{const t=Ay(Pi,ei.BOARDS,e,ei.EDGES),n=await Ly(t);if(n.empty)return console.log("No edges found for board, using initial edges"),nl;const r=n.docs.map(a=>({id:a.id,...a.data()}));return console.log("Fetched edges from board:",r),r}catch(t){return console.error("Fetch edges error:",t),nl}},s9=async(e,t)=>{if(!e||!t?.length){console.warn("Invalid parameters for saving nodes:",{boardId:e,nodesCount:t?.length});return}try{const n=lA(Pi);t.forEach(r=>{const a=Tl(Pi,ei.BOARDS,e,ei.NODES,r.id),l={type:r.type,data:r.data,position:r.position,updatedAt:ye.now()};r.draggable!==void 0&&(l.draggable=r.draggable),r.style!==void 0&&(l.style=r.style),n.set(a,l)}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(Nn.SAVE_FAILED)}},a9=async(e,t)=>{if(!e||!t?.length){console.warn("Invalid parameters for saving edges:",{boardId:e,edgesCount:t?.length});return}try{const n=lA(Pi);t.forEach(r=>{const a=Tl(Pi,ei.BOARDS,e,ei.EDGES,r.id),l={source:r.source,target:r.target,updatedAt:ye.now()};r.sourceHandle!==void 0&&(l.sourceHandle=r.sourceHandle),r.targetHandle!==void 0&&(l.targetHandle=r.targetHandle),n.set(a,l)}),await n.commit(),console.log("Edges saved to board")}catch(n){throw console.error("Save edges error:",n),new Error(Nn.SAVE_FAILED)}},o9=async(e,t,n)=>{if(!jA({uid:e}))throw new Error(Nn.AUTH_REQUIRED);try{const r={id:`board_${Date.now()}`,userId:e,name:t||`Board ${n.length+1}`,createdAt:ye.now(),isOpen:!1};return console.log("Creating board:",r),await Uy(Tl(Pi,ei.BOARDS,r.id),r),console.log("Board created successfully:",r),r}catch(r){throw console.error("Error creating new board:",r),r.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):r.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},l9=async e=>{if(!e)throw new Error("Board ID is required for deletion");try{await O3(Tl(Pi,ei.BOARDS,e)),console.log("Board deleted successfully")}catch(t){throw console.error("Error deleting board:",t),t.code==="permission-denied"?new Error("Permission denied. Cannot delete this board."):t}},Ho=async(e,t)=>{if(!e||!t)throw new Error("Board ID and updates are required");try{const n={...t,updatedAt:ye.now()};await Uy(Tl(Pi,ei.BOARDS,e),n,{merge:!0}),console.log("Board status updated:",n)}catch(n){throw console.error("Error updating board status:",n),n}},u9=(e,t={})=>{const[n,r,a]=aM([]),[l,c,d]=oM([]),[g,m]=G.useState(!0),[y,v]=G.useState(!1),[E,S]=G.useState(!1),[x,k]=G.useState([]),[M,B]=G.useState(null),q=G.useRef(null),{showSuccess:K,showError:L,showInfo:Z}=t,W=A=>{const O=A.find(Y=>Y.isOpen===!0);if(O)return O;if(A.length>0){const Y={...A[0],isOpen:!0};return Ho(Y.id,Y).catch(console.error),Y}return null};G.useEffect(()=>{(async()=>{if(e)try{m(!0);const O=await r9(e.uid);k(O);const Y=O.some(X=>X.isFallback);Y&&L&&L("Database index missing. Please create the required Firestore index. Check console for details.");const D=W(O);if(!D){console.error("No board found for user"),L&&L("No boards found. Creating a default board..."),r(el),c(nl);return}B(D);const[j,rt]=await Promise.all([Hw(D.id),qw(D.id)]);r(j),c(rt),Z&&!Y&&Z("Board loaded successfully!")}catch(O){console.error("Error loading initial data:",O),L&&L("Failed to load board data. Using default board."),r(el),c(nl)}finally{m(!1)}})()},[e,r,c]);const V=G.useCallback(async(A,O,Y)=>{q.current&&clearTimeout(q.current);const D=setTimeout(async()=>{try{S(!0);const j=[];O&&O.length>0&&j.push(s9(A,O)),Y&&Y.length>0&&j.push(a9(A,Y)),j.length>0&&(await Promise.all(j),console.log("Auto-save completed successfully"))}catch(j){console.error("Auto-save failed:",j),L&&L("Failed to save changes automatically")}finally{S(!1),q.current=null}},1e3);q.current=D},[L]);G.useEffect(()=>(!g&&M&&!y&&!M.isFallback&&V(M.id,n,l),()=>{q.current&&clearTimeout(q.current)}),[n,l,g,M,y]);const R=G.useCallback(async A=>{try{if(M?.id===A)return;if(M?.isFallback||x.find(Y=>Y.id===A)?.isFallback){L&&L("Cannot switch to fallback board. Please create the missing Firestore index first.");return}if(v(!0),M&&!M.isFallback){const Y={...M,isOpen:!1};await Ho(M.id,Y),k(D=>D.map(j=>j.id===M.id?Y:j))}const O=x.find(Y=>Y.id===A);if(O){const Y={...O,isOpen:!0};await Ho(A,Y),B(Y),k(rt=>rt.map(X=>X.id===A?Y:X));const[D,j]=await Promise.all([Hw(A),qw(A)]);r(D),c(j),K&&K(`Switched to "${Y.name}"`)}else console.error("Board not found:",A),L&&L("Board not found")}catch(O){console.error("Error switching board:",O),L&&L("Failed to switch board. Please try again.")}finally{v(!1)}},[M,x,r,c,K,L]),I=G.useCallback(async()=>{try{if(!e)return L&&L("You must be logged in to create a board"),null;Z&&Z("Creating new board..."),console.log("Creating new board for user:",e.uid),console.log("Current boards count:",x.length);const A=await o9(e.uid,null,x);if(A){if(console.log("Board created successfully:",A),M&&!M.isFallback){const Y={...M,isOpen:!1};Ho(M.id,Y).catch(console.error)}const O={...A,isOpen:!0};return k(Y=>{const D=Y.map(j=>j.id===M?.id?{...j,isOpen:!1}:j);return[O,...D]}),B(O),Ho(A.id,O).catch(console.error),r(el),c(nl),K&&K("New board created and opened!"),O}else return L&&L("Failed to create board. Please try again."),null}catch(A){return console.error("Error creating new board:",A),L&&L(`Failed to create board: ${A.message}`),null}},[e,x,M,K,L,Z,r,c]),P=G.useCallback(async A=>{try{if(x.length<=1){L&&L("Cannot delete the last board!");return}if(!x.find(Y=>Y.id===A)){console.error("Board not found for deletion"),L&&L("Board not found");return}if(Z&&Z("Deleting board..."),M?.id===A){const Y=x.find(D=>D.id!==A);Y&&await R(Y.id)}await l9(A),k(Y=>Y.filter(D=>D.id!==A)),K&&K("Board deleted successfully!")}catch(O){console.error("Error deleting board:",O),L&&L("Failed to delete board. Please try again.")}},[x,M,R,K,L,Z]),U=G.useCallback(async A=>{if(M&&M.name!==A){const O={...M,name:A};B(O),k(Y=>Y.map(D=>D.id===M.id?O:D));try{await Ho(M.id,O),console.log("Board name updated successfully")}catch(Y){console.error("Error updating board name:",Y)}}},[M]),z=G.useCallback(()=>{q.current&&(clearTimeout(q.current),q.current=null),k([]),B(null),r([]),c([]),m(!0),v(!1),S(!1)},[r,c,q]);return{nodes:n,edges:l,allBoards:x,currentBoard:M,isLoading:g,isSwitchingBoard:y,isSaving:E,onNodesChange:a,onEdgesChange:d,switchToBoard:R,createNewBoard:I,deleteBoard:P,updateBoardName:U,clearBoardState:z}},c9=({allBoards:e,currentBoard:t,createNewBoard:n,switchToBoard:r})=>{G.useEffect(()=>{const a=l=>{if((l.ctrlKey||l.metaKey)&&l.key==="n"&&(l.preventDefault(),n()),(l.ctrlKey||l.metaKey)&&l.key>="1"&&l.key<="9"){l.preventDefault();const c=parseInt(l.key)-1;e[c]&&e[c].id!==t?.id&&r(e[c].id)}};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[e,t,n,r])},h9=()=>{const[e,t]=G.useState([]),n=G.useCallback(m=>{const y=Date.now().toString(),v={id:y,timestamp:new Date,...m};return t(E=>[...E,v]),m.autoRemove!==!1&&setTimeout(()=>{r(y)},m.duration||5e3),y},[]),r=G.useCallback(m=>{t(y=>y.filter(v=>v.id!==m))},[]),a=G.useCallback(()=>{t([])},[]),l=G.useCallback((m,y={})=>n({type:"success",message:m,...y}),[n]),c=G.useCallback((m,y={})=>n({type:"error",message:m,duration:7e3,...y}),[n]),d=G.useCallback((m,y={})=>n({type:"info",message:m,...y}),[n]),g=G.useCallback((m,y={})=>n({type:"warning",message:m,duration:6e3,...y}),[n]);return{notifications:e,addNotification:n,removeNotification:r,clearAllNotifications:a,showSuccess:l,showError:c,showInfo:d,showWarning:g}},GA=G.createContext(void 0),f9=({children:e})=>{const[t,n]=G.useState("word"),r=G.useCallback(()=>{n(c=>c==="word"?"concept":"word")},[]),a=G.useCallback(c=>{n(c)},[]),l=G.useMemo(()=>({mode:t,toggleMode:r,setMode:a}),[t,r,a]);return mt.jsx(GA.Provider,{value:l,children:e})},Xy=()=>{const e=G.useContext(GA);if(e===void 0)throw new Error("useMode must be used within a ModeProvider");return e},Fw=()=>{const e=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];return e[Math.floor(Math.random()*e.length)]},d9=e=>{const t=e.replace("#",""),n=parseInt(t.substr(0,2),16),r=parseInt(t.substr(2,2),16),a=parseInt(t.substr(4,2),16),l=30,c=Math.min(255,Math.max(0,n+(Math.random()-.5)*l*2)),d=Math.min(255,Math.max(0,r+(Math.random()-.5)*l*2)),g=Math.min(255,Math.max(0,a+(Math.random()-.5)*l*2));return`#${Math.round(c).toString(16).padStart(2,"0")}${Math.round(d).toString(16).padStart(2,"0")}${Math.round(g).toString(16).padStart(2,"0")}`},g9=(e,t)=>{const a=[0,45,90,135,180,225,270,315];for(const c of a){const d=c*Math.PI/180,g=e.x+Math.cos(d)*200,m=e.y+Math.sin(d)*200;if(!t.some(v=>Math.sqrt(Math.pow(v.position.x-g,2)+Math.pow(v.position.y-m,2))<150))return{x:g,y:m}}const l=Math.random()*2*Math.PI;return{x:e.x+Math.cos(l)*(200+Math.random()*100),y:e.y+Math.sin(l)*(200+Math.random()*100)}},m9=()=>`node_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,p9=(e,t)=>`edge_${e}_${t}`,y9=(e,t,n,r)=>({id:m9(),type:"draggableEditable",position:e,data:{label:t,color:n},style:{backgroundColor:n,color:Qy(n),border:`2px solid ${Zy(n,20)}`}}),_9=(e,t,n)=>({id:p9(e,t),source:e,target:t,style:{stroke:n,strokeWidth:3},markerEnd:{type:Qu.ArrowClosed,color:n}}),Qy=e=>{const t=e.replace("#",""),n=parseInt(t.substr(0,2),16),r=parseInt(t.substr(2,2),16),a=parseInt(t.substr(4,2),16);return(.299*n+.587*r+.114*a)/255>.5?"#000000":"#FFFFFF"},Zy=(e,t)=>{const n=e.replace("#",""),r=parseInt(n.substr(0,2),16),a=parseInt(n.substr(2,2),16),l=parseInt(n.substr(4,2),16),c=Math.max(0,Math.floor(r*(1-t/100))),d=Math.max(0,Math.floor(a*(1-t/100))),g=Math.max(0,Math.floor(l*(1-t/100)));return`#${c.toString(16).padStart(2,"0")}${d.toString(16).padStart(2,"0")}${g.toString(16).padStart(2,"0")}`},$A=G.createContext(null),v9=({children:e,nodes:t,onNodesChange:n,onEdgesChange:r})=>{const a=G.useCallback((l,c,d,g,m)=>{let y;g==="staticEditable"?y=Fw():y=m?d9(m):Fw();const v=g9(d,t),E=y9(v,l,y,g),S=_9(c,E.id,y);n([{type:"add",item:E}]),r([{type:"add",item:S}]);const x=t.find(k=>k.id===c);if(x){const k={...x,data:{...x.data,tokenColors:{...x.data.tokenColors,[l]:y}}};n([{id:c,type:"replace",item:k}])}},[t,n,r]);return mt.jsx($A.Provider,{value:{handleTokenClick:a},children:e})},YA=()=>{const e=G.useContext($A);if(!e)throw new Error("useTokenInteraction must be used within a TokenInteractionProvider");return e};function KA({value:e,nodeId:t,nodePosition:n,nodeType:r,nodeColor:a,tokenColor:l}){const{handleTokenClick:c}=YA(),d=g=>{g.stopPropagation(),t&&n&&r&&c(e,t,n,r,a)};return mt.jsx("div",{className:"word-token",onClick:d,style:{backgroundColor:l,color:l?E9(l):void 0,cursor:t?"pointer":"default",padding:l?"2px 4px":void 0,borderRadius:l?"4px":void 0,margin:l?"1px":void 0},children:e})}const E9=e=>{const t=e.replace("#",""),n=parseInt(t.substr(0,2),16),r=parseInt(t.substr(2,2),16),a=parseInt(t.substr(4,2),16);return(.299*n+.587*r+.114*a)/255>.5?"#000000":"#FFFFFF"};function XA({value:e,nodeId:t,nodePosition:n,nodeType:r,nodeColor:a,tokenColor:l}){const{handleTokenClick:c}=YA(),d=g=>{g.stopPropagation(),t&&n&&r&&c(e,t,n,r,a)};return mt.jsx("div",{className:"concept-token",onClick:d,style:{backgroundColor:l,color:l?T9(l):void 0,cursor:t?"pointer":"default",padding:l?"3px 6px":void 0,borderRadius:l?"6px":void 0,margin:l?"2px":void 0,fontWeight:"bold"},children:e})}const T9=e=>{const t=e.replace("#",""),n=parseInt(t.substr(0,2),16),r=parseInt(t.substr(2,2),16),a=parseInt(t.substr(4,2),16);return(.299*n+.587*r+.114*a)/255>.5?"#000000":"#FFFFFF"};function w9({data:e,id:t}){const[n,r]=G.useState(!1),[a,l]=G.useState(e.label||"Static Node"),[c,d]=G.useState(!1),[g,m]=G.useState(!1),{mode:y}=Xy(),S=fc().getNode(t)?.position||{x:0,y:0},x=G.useCallback(L=>{L.stopPropagation(),r(!0)},[]),k=G.useCallback(()=>{r(!1),console.log("Static node text changed to:",a)},[a]),M=G.useCallback(L=>{L.stopPropagation()},[]),B=G.useCallback(L=>{L.stopPropagation(),L.key==="Enter"&&k(),L.key==="Escape"&&(l(e.label||"Static Node"),r(!1))},[k,e.label]),q=G.useCallback(L=>{L.stopPropagation(),m(!g)},[g]),K=G.useMemo(()=>{if(n)return mt.jsx("input",{type:"text",value:a,onChange:L=>l(L.target.value),onBlur:k,onKeyDown:B,onClick:M,className:"node-input nodrag",autoFocus:!0});if(y==="word"){const L=a.split(" ").filter(W=>W.trim()!==""),Z=g?L:L.slice(0,3);return mt.jsxs("div",{className:"node-content-word",children:[mt.jsxs("div",{onClick:x,children:[Z.map((W,V)=>mt.jsxs("span",{style:{display:"inline-block",margin:"2px"},children:[mt.jsx(KA,{value:W,nodeId:t,nodePosition:S,nodeType:"staticEditable",nodeColor:e.color,tokenColor:e.tokenColors?.[W]}),V<Z.length-1?" ":""]},V)),L.length>3&&!g&&mt.jsx("span",{children:"..."})]}),L.length>3&&mt.jsx("button",{className:"node-expand-btn",onClick:q,title:g?"Show less":"Show more",children:g?"":"+"})]})}else{const L=a.split("_");return mt.jsx("div",{className:"node-content-concept",onClick:x,children:L.map((Z,W)=>W%2===1?mt.jsx(XA,{value:Z,nodeId:t,nodePosition:S,nodeType:"staticEditable",nodeColor:e.color,tokenColor:e.tokenColors?.[Z]},W):mt.jsx("span",{children:Z},W))})}},[n,a,y,g,x,k,B,M,q]);return mt.jsxs("div",{className:"static-editable-node nodrag",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),style:{backgroundColor:e.color,color:e.color?Qy(e.color):void 0,border:e.color?`2px solid ${Zy(e.color,20)}`:void 0},children:[mt.jsx(Va,{type:"target",position:bt.Bottom,id:"bottom"}),c&&mt.jsx("div",{className:"node-tooltip",children:mt.jsxs("div",{className:"tooltip-content",children:[mt.jsx("span",{children:" Static Node"}),mt.jsxs("span",{children:["Mode: ",y==="word"?" Word":" Concept"]}),mt.jsx("span",{children:"Click to edit text"})]})}),K,mt.jsx(Va,{type:"source",position:bt.Bottom,id:"bottom-source"})]})}function S9({data:e,id:t}){const[n,r]=G.useState(!1),[a,l]=G.useState(e.label||"Draggable Node"),[c,d]=G.useState(!1),[g,m]=G.useState(!1),{mode:y}=Xy(),S=fc().getNode(t)?.position||{x:0,y:0},x=G.useCallback(L=>{L.stopPropagation(),r(!0)},[]),k=G.useCallback(()=>{r(!1),console.log("Draggable node text changed to:",a)},[a]),M=G.useCallback(L=>{L.stopPropagation()},[]),B=G.useCallback(L=>{L.stopPropagation(),L.key==="Enter"&&k(),L.key==="Escape"&&(l(e.label||"Draggable Node"),r(!1))},[k,e.label]),q=G.useCallback(L=>{L.stopPropagation(),m(!g)},[g]),K=G.useMemo(()=>{if(n)return mt.jsx("input",{type:"text",value:a,onChange:L=>l(L.target.value),onBlur:k,onKeyDown:B,onClick:M,className:"node-input nodrag",autoFocus:!0});if(y==="word"){const L=a.split(" ").filter(W=>W.trim()!==""),Z=g?L:L.slice(0,3);return mt.jsxs("div",{className:"node-content-word",children:[mt.jsxs("div",{onClick:x,children:[Z.map((W,V)=>mt.jsxs("span",{style:{display:"inline-block",margin:"2px"},children:[mt.jsx(KA,{value:W,nodeId:t,nodePosition:S,nodeType:"draggableEditable",nodeColor:e.color,tokenColor:e.tokenColors?.[W]}),V<Z.length-1?" ":""]},V)),L.length>3&&!g&&mt.jsx("span",{children:"..."})]}),L.length>3&&mt.jsx("button",{className:"node-expand-btn",onClick:q,title:g?"Show less":"Show more",children:g?"":"+"})]})}else{const L=a.split("_");return mt.jsx("div",{className:"node-content-concept",onClick:x,children:L.map((Z,W)=>W%2===1?mt.jsx(XA,{value:Z,nodeId:t,nodePosition:S,nodeType:"draggableEditable",nodeColor:e.color,tokenColor:e.tokenColors?.[Z]},W):mt.jsx("span",{children:Z},W))})}},[n,a,y,g,x,k,B,M,q]);return mt.jsxs("div",{className:"draggable-editable-node",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),style:{backgroundColor:e.color,color:e.color?Qy(e.color):void 0,border:e.color?`2px solid ${Zy(e.color,20)}`:void 0},children:[c&&mt.jsx("div",{className:"node-tooltip",children:mt.jsxs("div",{className:"tooltip-content",children:[mt.jsx("span",{children:" Draggable Node"}),mt.jsxs("span",{children:["Mode: ",y==="word"?" Word":" Concept"]}),mt.jsx("span",{children:"Drag me around!"}),mt.jsx("span",{children:"Click to edit text"})]})}),mt.jsx("div",{className:"node-content",children:K}),mt.jsx(Va,{type:"source",position:bt.Bottom,id:"bottom-source"})]})}const b9={staticEditable:w9,draggableEditable:S9};function A9(){const{user:e,signOut:t}=i9(),{mode:n,toggleMode:r}=Xy(),{notifications:a,removeNotification:l,showSuccess:c,showError:d,showInfo:g}=h9(),{nodes:m,edges:y,allBoards:v,currentBoard:E,isSwitchingBoard:S,isSaving:x,onNodesChange:k,onEdgesChange:M,switchToBoard:B,createNewBoard:q,deleteBoard:K,updateBoardName:L,clearBoardState:Z}=u9(e,{showSuccess:c,showError:d,showInfo:g});c9({allBoards:v,currentBoard:E,createNewBoard:q,switchToBoard:B});const W=async()=>{await t(),Z()},V=G.useCallback(R=>{const I={id:`e${R.source}-${R.target}`,source:R.source,target:R.target,sourceHandle:R.sourceHandle,targetHandle:R.targetHandle};M([{type:"add",item:I}])},[M]);return e?mt.jsxs(mt.Fragment,{children:[mt.jsx(W6,{allBoards:v,currentBoard:E,onSwitchBoard:B,onCreateBoard:()=>(q(),Promise.resolve()),onDeleteBoard:K,onSignOut:W,isLoading:S}),mt.jsx(J6,{name:E?.name||"Loading...",onSetName:L,user:e,isSaving:x,isConceptMode:n==="concept",onToggleMode:r}),mt.jsx(e9,{notifications:a,onRemove:l}),mt.jsx("div",{style:{width:"100vw",height:"100vh"},children:mt.jsx(v9,{nodes:m,onNodesChange:k,onEdgesChange:M,children:mt.jsxs(f1,{nodes:m,edges:y,onNodesChange:k,onEdgesChange:M,onConnect:V,nodeTypes:b9,connectionMode:zs.Loose,fitView:!0,children:[mt.jsx(bM,{}),mt.jsx(yM,{}),mt.jsx(NM,{variant:wi.Cross,gap:12,size:1})]})})})]}):mt.jsx(Z6,{})}function R9(){return mt.jsx(f9,{children:mt.jsx(A9,{})})}const QA=document.getElementById("root");if(!QA)throw new Error("Failed to find the root element");xI.createRoot(QA).render(mt.jsx(G.StrictMode,{children:mt.jsx(R9,{})}));
