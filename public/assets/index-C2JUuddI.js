(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function Uc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ig={exports:{}},Xu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iw;function GC(){if(Iw)return Xu;Iw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var f in o)f!=="key"&&(l[f]=o[f])}else l=o;return o=l.ref,{$$typeof:t,type:r,key:u,ref:o!==void 0?o:null,props:l}}return Xu.Fragment=e,Xu.jsx=n,Xu.jsxs=n,Xu}var Cw;function YC(){return Cw||(Cw=1,ig.exports=GC()),ig.exports}var K=YC(),rg={exports:{}},Ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nw;function KC(){if(Nw)return Ye;Nw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function E(L){return L===null||typeof L!="object"?null:(L=v&&L[v]||L["@@iterator"],typeof L=="function"?L:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,M={};function D(L,Y,ie){this.props=L,this.context=Y,this.refs=M,this.updater=ie||b}D.prototype.isReactComponent={},D.prototype.setState=function(L,Y){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Y,"setState")},D.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function P(){}P.prototype=D.prototype;function H(L,Y,ie){this.props=L,this.context=Y,this.refs=M,this.updater=ie||b}var F=H.prototype=new P;F.constructor=H,x(F,D.prototype),F.isPureReactComponent=!0;var j=Array.isArray,X={H:null,A:null,T:null,S:null,V:null},Z=Object.prototype.hasOwnProperty;function R(L,Y,ie,ne,he,_e){return ie=_e.ref,{$$typeof:t,type:L,key:Y,ref:ie!==void 0?ie:null,props:_e}}function T(L,Y){return R(L.type,Y,void 0,void 0,void 0,L.props)}function I(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function N(L){var Y={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ie){return Y[ie]})}var U=/\/+/g;function B(L,Y){return typeof L=="object"&&L!==null&&L.key!=null?N(""+L.key):Y.toString(36)}function A(){}function k(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(A,A):(L.status="pending",L.then(function(Y){L.status==="pending"&&(L.status="fulfilled",L.value=Y)},function(Y){L.status==="pending"&&(L.status="rejected",L.reason=Y)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function q(L,Y,ie,ne,he){var _e=typeof L;(_e==="undefined"||_e==="boolean")&&(L=null);var we=!1;if(L===null)we=!0;else switch(_e){case"bigint":case"string":case"number":we=!0;break;case"object":switch(L.$$typeof){case t:case e:we=!0;break;case g:return we=L._init,q(we(L._payload),Y,ie,ne,he)}}if(we)return he=he(L),we=ne===""?"."+B(L,0):ne,j(he)?(ie="",we!=null&&(ie=we.replace(U,"$&/")+"/"),q(he,Y,ie,"",function(Se){return Se})):he!=null&&(I(he)&&(he=T(he,ie+(he.key==null||L&&L.key===he.key?"":(""+he.key).replace(U,"$&/")+"/")+we)),Y.push(he)),1;we=0;var Oe=ne===""?".":ne+":";if(j(L))for(var ve=0;ve<L.length;ve++)ne=L[ve],_e=Oe+B(ne,ve),we+=q(ne,Y,ie,_e,he);else if(ve=E(L),typeof ve=="function")for(L=ve.call(L),ve=0;!(ne=L.next()).done;)ne=ne.value,_e=Oe+B(ne,ve++),we+=q(ne,Y,ie,_e,he);else if(_e==="object"){if(typeof L.then=="function")return q(k(L),Y,ie,ne,he);throw Y=String(L),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return we}function V(L,Y,ie){if(L==null)return L;var ne=[],he=0;return q(L,ne,"","",function(_e){return Y.call(ie,_e,he++)}),ne}function G(L){if(L._status===-1){var Y=L._result;Y=Y(),Y.then(function(ie){(L._status===0||L._status===-1)&&(L._status=1,L._result=ie)},function(ie){(L._status===0||L._status===-1)&&(L._status=2,L._result=ie)}),L._status===-1&&(L._status=0,L._result=Y)}if(L._status===1)return L._result.default;throw L._result}var ee=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function J(){}return Ye.Children={map:V,forEach:function(L,Y,ie){V(L,function(){Y.apply(this,arguments)},ie)},count:function(L){var Y=0;return V(L,function(){Y++}),Y},toArray:function(L){return V(L,function(Y){return Y})||[]},only:function(L){if(!I(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ye.Component=D,Ye.Fragment=n,Ye.Profiler=o,Ye.PureComponent=H,Ye.StrictMode=r,Ye.Suspense=d,Ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,Ye.__COMPILER_RUNTIME={__proto__:null,c:function(L){return X.H.useMemoCache(L)}},Ye.cache=function(L){return function(){return L.apply(null,arguments)}},Ye.cloneElement=function(L,Y,ie){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var ne=x({},L.props),he=L.key,_e=void 0;if(Y!=null)for(we in Y.ref!==void 0&&(_e=void 0),Y.key!==void 0&&(he=""+Y.key),Y)!Z.call(Y,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&Y.ref===void 0||(ne[we]=Y[we]);var we=arguments.length-2;if(we===1)ne.children=ie;else if(1<we){for(var Oe=Array(we),ve=0;ve<we;ve++)Oe[ve]=arguments[ve+2];ne.children=Oe}return R(L.type,he,void 0,void 0,_e,ne)},Ye.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:l,_context:L},L},Ye.createElement=function(L,Y,ie){var ne,he={},_e=null;if(Y!=null)for(ne in Y.key!==void 0&&(_e=""+Y.key),Y)Z.call(Y,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(he[ne]=Y[ne]);var we=arguments.length-2;if(we===1)he.children=ie;else if(1<we){for(var Oe=Array(we),ve=0;ve<we;ve++)Oe[ve]=arguments[ve+2];he.children=Oe}if(L&&L.defaultProps)for(ne in we=L.defaultProps,we)he[ne]===void 0&&(he[ne]=we[ne]);return R(L,_e,void 0,void 0,null,he)},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(L){return{$$typeof:f,render:L}},Ye.isValidElement=I,Ye.lazy=function(L){return{$$typeof:g,_payload:{_status:-1,_result:L},_init:G}},Ye.memo=function(L,Y){return{$$typeof:p,type:L,compare:Y===void 0?null:Y}},Ye.startTransition=function(L){var Y=X.T,ie={};X.T=ie;try{var ne=L(),he=X.S;he!==null&&he(ie,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(J,ee)}catch(_e){ee(_e)}finally{X.T=Y}},Ye.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},Ye.use=function(L){return X.H.use(L)},Ye.useActionState=function(L,Y,ie){return X.H.useActionState(L,Y,ie)},Ye.useCallback=function(L,Y){return X.H.useCallback(L,Y)},Ye.useContext=function(L){return X.H.useContext(L)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(L,Y){return X.H.useDeferredValue(L,Y)},Ye.useEffect=function(L,Y,ie){var ne=X.H;if(typeof ie=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ne.useEffect(L,Y)},Ye.useId=function(){return X.H.useId()},Ye.useImperativeHandle=function(L,Y,ie){return X.H.useImperativeHandle(L,Y,ie)},Ye.useInsertionEffect=function(L,Y){return X.H.useInsertionEffect(L,Y)},Ye.useLayoutEffect=function(L,Y){return X.H.useLayoutEffect(L,Y)},Ye.useMemo=function(L,Y){return X.H.useMemo(L,Y)},Ye.useOptimistic=function(L,Y){return X.H.useOptimistic(L,Y)},Ye.useReducer=function(L,Y,ie){return X.H.useReducer(L,Y,ie)},Ye.useRef=function(L){return X.H.useRef(L)},Ye.useState=function(L){return X.H.useState(L)},Ye.useSyncExternalStore=function(L,Y,ie){return X.H.useSyncExternalStore(L,Y,ie)},Ye.useTransition=function(){return X.H.useTransition()},Ye.version="19.1.0",Ye}var Dw;function Bc(){return Dw||(Dw=1,rg.exports=KC()),rg.exports}var C=Bc();const fe=Uc(C);var sg={exports:{}},Qu={},og={exports:{}},ag={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ow;function XC(){return Ow||(Ow=1,function(t){function e(V,G){var ee=V.length;V.push(G);e:for(;0<ee;){var J=ee-1>>>1,L=V[J];if(0<o(L,G))V[J]=G,V[ee]=L,ee=J;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var G=V[0],ee=V.pop();if(ee!==G){V[0]=ee;e:for(var J=0,L=V.length,Y=L>>>1;J<Y;){var ie=2*(J+1)-1,ne=V[ie],he=ie+1,_e=V[he];if(0>o(ne,ee))he<L&&0>o(_e,ne)?(V[J]=_e,V[he]=ee,J=he):(V[J]=ne,V[ie]=ee,J=ie);else if(he<L&&0>o(_e,ee))V[J]=_e,V[he]=ee,J=he;else break e}}return G}function o(V,G){var ee=V.sortIndex-G.sortIndex;return ee!==0?ee:V.id-G.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();t.unstable_now=function(){return u.now()-f}}var d=[],p=[],g=1,v=null,E=3,b=!1,x=!1,M=!1,D=!1,P=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function j(V){for(var G=n(p);G!==null;){if(G.callback===null)r(p);else if(G.startTime<=V)r(p),G.sortIndex=G.expirationTime,e(d,G);else break;G=n(p)}}function X(V){if(M=!1,j(V),!x)if(n(d)!==null)x=!0,Z||(Z=!0,B());else{var G=n(p);G!==null&&q(X,G.startTime-V)}}var Z=!1,R=-1,T=5,I=-1;function N(){return D?!0:!(t.unstable_now()-I<T)}function U(){if(D=!1,Z){var V=t.unstable_now();I=V;var G=!0;try{e:{x=!1,M&&(M=!1,H(R),R=-1),b=!0;var ee=E;try{t:{for(j(V),v=n(d);v!==null&&!(v.expirationTime>V&&N());){var J=v.callback;if(typeof J=="function"){v.callback=null,E=v.priorityLevel;var L=J(v.expirationTime<=V);if(V=t.unstable_now(),typeof L=="function"){v.callback=L,j(V),G=!0;break t}v===n(d)&&r(d),j(V)}else r(d);v=n(d)}if(v!==null)G=!0;else{var Y=n(p);Y!==null&&q(X,Y.startTime-V),G=!1}}break e}finally{v=null,E=ee,b=!1}G=void 0}}finally{G?B():Z=!1}}}var B;if(typeof F=="function")B=function(){F(U)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,k=A.port2;A.port1.onmessage=U,B=function(){k.postMessage(null)}}else B=function(){P(U,0)};function q(V,G){R=P(function(){V(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_next=function(V){switch(E){case 1:case 2:case 3:var G=3;break;default:G=E}var ee=E;E=G;try{return V()}finally{E=ee}},t.unstable_requestPaint=function(){D=!0},t.unstable_runWithPriority=function(V,G){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ee=E;E=V;try{return G()}finally{E=ee}},t.unstable_scheduleCallback=function(V,G,ee){var J=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?J+ee:J):ee=J,V){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=ee+L,V={id:g++,callback:G,priorityLevel:V,startTime:ee,expirationTime:L,sortIndex:-1},ee>J?(V.sortIndex=ee,e(p,V),n(d)===null&&V===n(p)&&(M?(H(R),R=-1):M=!0,q(X,ee-J))):(V.sortIndex=L,e(d,V),x||b||(x=!0,Z||(Z=!0,B()))),V},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(V){var G=E;return function(){var ee=E;E=G;try{return V.apply(this,arguments)}finally{E=ee}}}}(ag)),ag}var Mw;function QC(){return Mw||(Mw=1,og.exports=XC()),og.exports}var lg={exports:{}},Jn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kw;function WC(){if(kw)return Jn;kw=1;var t=Bc();function e(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(d,p,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:v==null?null:""+v,children:d,containerInfo:p,implementation:g}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Jn.createPortal=function(d,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(d,p,null,g)},Jn.flushSync=function(d){var p=u.T,g=r.p;try{if(u.T=null,r.p=2,d)return d()}finally{u.T=p,r.p=g,r.d.f()}},Jn.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(d,p))},Jn.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},Jn.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var g=p.as,v=f(g,p.crossOrigin),E=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?r.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:E,fetchPriority:b}):g==="script"&&r.d.X(d,{crossOrigin:v,integrity:E,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Jn.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=f(p.as,p.crossOrigin);r.d.M(d,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(d)},Jn.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,v=f(g,p.crossOrigin);r.d.L(d,g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Jn.preloadModule=function(d,p){if(typeof d=="string")if(p){var g=f(p.as,p.crossOrigin);r.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(d)},Jn.requestFormReset=function(d){r.d.r(d)},Jn.unstable_batchedUpdates=function(d,p){return d(p)},Jn.useFormState=function(d,p,g){return u.H.useFormState(d,p,g)},Jn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Jn.version="19.1.0",Jn}var Vw;function HT(){if(Vw)return lg.exports;Vw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),lg.exports=WC(),lg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pw;function ZC(){if(Pw)return Qu;Pw=1;var t=QC(),e=Bc(),n=HT();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,a=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(a=s.return),i=s.return;while(i)}return s.tag===3?a:null}function u(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function f(i){if(l(i)!==i)throw Error(r(188))}function d(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(r(188));return s!==i?null:i}for(var a=i,c=s;;){var m=a.return;if(m===null)break;var y=m.alternate;if(y===null){if(c=m.return,c!==null){a=c;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===a)return f(m),i;if(y===c)return f(m),s;y=y.sibling}throw Error(r(188))}if(a.return!==c.return)a=m,c=y;else{for(var S=!1,O=m.child;O;){if(O===a){S=!0,a=m,c=y;break}if(O===c){S=!0,c=m,a=y;break}O=O.sibling}if(!S){for(O=y.child;O;){if(O===a){S=!0,a=y,c=m;break}if(O===c){S=!0,c=y,a=m;break}O=O.sibling}if(!S)throw Error(r(189))}}if(a.alternate!==c)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?i:s}function p(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=p(i),s!==null)return s;i=i.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),H=Symbol.for("react.consumer"),F=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function B(i){return i===null||typeof i!="object"?null:(i=U&&i[U]||i["@@iterator"],typeof i=="function"?i:null)}var A=Symbol.for("react.client.reference");function k(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===A?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case x:return"Fragment";case D:return"Profiler";case M:return"StrictMode";case X:return"Suspense";case Z:return"SuspenseList";case I:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case b:return"Portal";case F:return(i.displayName||"Context")+".Provider";case H:return(i._context.displayName||"Context")+".Consumer";case j:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case R:return s=i.displayName||null,s!==null?s:k(i.type)||"Memo";case T:s=i._payload,i=i._init;try{return k(i(s))}catch{}}return null}var q=Array.isArray,V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},J=[],L=-1;function Y(i){return{current:i}}function ie(i){0>L||(i.current=J[L],J[L]=null,L--)}function ne(i,s){L++,J[L]=i.current,i.current=s}var he=Y(null),_e=Y(null),we=Y(null),Oe=Y(null);function ve(i,s){switch(ne(we,s),ne(_e,i),ne(he,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?nw(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=nw(s),i=iw(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ie(he),ne(he,i)}function Se(){ie(he),ie(_e),ie(we)}function Ce(i){i.memoizedState!==null&&ne(Oe,i);var s=he.current,a=iw(s,i.type);s!==a&&(ne(_e,i),ne(he,a))}function je(i){_e.current===i&&(ie(he),ie(_e)),Oe.current===i&&(ie(Oe),qu._currentValue=ee)}var dt=Object.prototype.hasOwnProperty,mt=t.unstable_scheduleCallback,pt=t.unstable_cancelCallback,Ve=t.unstable_shouldYield,Yt=t.unstable_requestPaint,Pe=t.unstable_now,De=t.unstable_getCurrentPriorityLevel,Ht=t.unstable_ImmediatePriority,An=t.unstable_UserBlockingPriority,dn=t.unstable_NormalPriority,Rn=t.unstable_LowPriority,mn=t.unstable_IdlePriority,Kt=t.log,zn=t.unstable_setDisableYieldValue,xe=null,Fe=null;function kt(i){if(typeof Kt=="function"&&zn(i),Fe&&typeof Fe.setStrictMode=="function")try{Fe.setStrictMode(xe,i)}catch{}}var Vt=Math.clz32?Math.clz32:tn,Fi=Math.log,Xt=Math.LN2;function tn(i){return i>>>=0,i===0?32:31-(Fi(i)/Xt|0)|0}var pn=256,Ft=4194304;function At(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Pt(i,s,a){var c=i.pendingLanes;if(c===0)return 0;var m=0,y=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var O=c&134217727;return O!==0?(c=O&~y,c!==0?m=At(c):(S&=O,S!==0?m=At(S):a||(a=O&~i,a!==0&&(m=At(a))))):(O=c&~y,O!==0?m=At(O):S!==0?m=At(S):a||(a=c&~i,a!==0&&(m=At(a)))),m===0?0:s!==0&&s!==m&&(s&y)===0&&(y=m&-m,a=s&-s,y>=a||y===32&&(a&4194048)!==0)?s:m}function an(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function xn(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cr(){var i=pn;return pn<<=1,(pn&4194048)===0&&(pn=256),i}function Qn(){var i=Ft;return Ft<<=1,(Ft&62914560)===0&&(Ft=4194304),i}function gn(i){for(var s=[],a=0;31>a;a++)s.push(i);return s}function oi(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Wn(i,s,a,c,m,y){var S=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var O=i.entanglements,$=i.expirationTimes,oe=i.hiddenUpdates;for(a=S&~a;0<a;){var de=31-Vt(a),pe=1<<de;O[de]=0,$[de]=-1;var ae=oe[de];if(ae!==null)for(oe[de]=null,de=0;de<ae.length;de++){var le=ae[de];le!==null&&(le.lane&=-536870913)}a&=~pe}c!==0&&_i(i,c,0),y!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=y&~(S&~s))}function _i(i,s,a){i.pendingLanes|=s,i.suspendedLanes&=~s;var c=31-Vt(s);i.entangledLanes|=s,i.entanglements[c]=i.entanglements[c]|1073741824|a&4194090}function Xr(i,s){var a=i.entangledLanes|=s;for(i=i.entanglements;a;){var c=31-Vt(a),m=1<<c;m&s|i[c]&s&&(i[c]|=s),a&=~m}}function xi(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function fr(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function ai(){var i=G.p;return i!==0?i:(i=window.event,i===void 0?32:bw(i.type))}function Ii(i,s){var a=G.p;try{return G.p=i,s()}finally{G.p=a}}var Rt=Math.random().toString(36).slice(2),gt="__reactFiber$"+Rt,Ut="__reactProps$"+Rt,Qt="__reactContainer$"+Rt,Ar="__reactEvents$"+Rt,Mo="__reactListeners$"+Rt,li="__reactHandles$"+Rt,Rr="__reactResources$"+Rt,qi="__reactMarker$"+Rt;function Ci(i){delete i[gt],delete i[Ut],delete i[Ar],delete i[Mo],delete i[li]}function ui(i){var s=i[gt];if(s)return s;for(var a=i.parentNode;a;){if(s=a[Qt]||a[gt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(i=aw(i);i!==null;){if(a=i[gt])return a;i=aw(i)}return s}i=a,a=i.parentNode}return null}function In(i){if(i=i[gt]||i[Qt]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function ci(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function yn(i){var s=i[Rr];return s||(s=i[Rr]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Q(i){i[qi]=!0}var ue=new Set,Ee={};function Te(i,s){Ze(i,s),Ze(i+"Capture",s)}function Ze(i,s){for(Ee[i]=s,i=0;i<s.length;i++)ue.add(s[i])}var $e=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bt={},yt={};function Cn(i){return dt.call(yt,i)?!0:dt.call(bt,i)?!1:$e.test(i)?yt[i]=!0:(bt[i]=!0,!1)}function vt(i,s,a){if(Cn(s))if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+a)}}function ct(i,s,a){if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+a)}}function _t(i,s,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(s,a,""+c)}}var ln,Wt;function nn(i){if(ln===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);ln=s&&s[1]||"",Wt=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ln+i+Wt}var fi=!1;function hi(i,s){if(!i||fi)return"";fi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(le){var ae=le}Reflect.construct(i,[],pe)}else{try{pe.call()}catch(le){ae=le}i.call(pe.prototype)}}else{try{throw Error()}catch(le){ae=le}(pe=i())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(le){if(le&&ae&&typeof le.stack=="string")return[le.stack,ae.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),S=y[0],O=y[1];if(S&&O){var $=S.split(`
`),oe=O.split(`
`);for(m=c=0;c<$.length&&!$[c].includes("DetermineComponentFrameRoot");)c++;for(;m<oe.length&&!oe[m].includes("DetermineComponentFrameRoot");)m++;if(c===$.length||m===oe.length)for(c=$.length-1,m=oe.length-1;1<=c&&0<=m&&$[c]!==oe[m];)m--;for(;1<=c&&0<=m;c--,m--)if($[c]!==oe[m]){if(c!==1||m!==1)do if(c--,m--,0>m||$[c]!==oe[m]){var de=`
`+$[c].replace(" at new "," at ");return i.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",i.displayName)),de}while(1<=c&&0<=m);break}}}finally{fi=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?nn(a):""}function $i(i){switch(i.tag){case 26:case 27:case 5:return nn(i.type);case 16:return nn("Lazy");case 13:return nn("Suspense");case 19:return nn("SuspenseList");case 0:case 15:return hi(i.type,!1);case 11:return hi(i.type.render,!1);case 1:return hi(i.type,!0);case 31:return nn("Activity");default:return""}}function Gi(i){try{var s="";do s+=$i(i),i=i.return;while(i);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Nn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ko(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function tu(i){var s=ko(i)?"checked":"value",a=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),c=""+i[s];if(!i.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var m=a.get,y=a.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return m.call(this)},set:function(S){c=""+S,y.call(this,S)}}),Object.defineProperty(i,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(S){c=""+S},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function rt(i){i._valueTracker||(i._valueTracker=tu(i))}function it(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return i&&(c=ko(i)?i.checked?"true":"false":i.value),i=c,i!==a?(s.setValue(i),!0):!1}function Yi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ki=/[\n"\\]/g;function Bt(i){return i.replace(Ki,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Dt(i,s,a,c,m,y,S,O){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),s!=null?S==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+Nn(s)):i.value!==""+Nn(s)&&(i.value=""+Nn(s)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),s!=null?Bn(i,S,Nn(s)):a!=null?Bn(i,S,Nn(a)):c!=null&&i.removeAttribute("value"),m==null&&y!=null&&(i.defaultChecked=!!y),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?i.name=""+Nn(O):i.removeAttribute("name")}function Un(i,s,a,c,m,y,S,O){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),s!=null||a!=null){if(!(y!=="submit"&&y!=="reset"||s!=null))return;a=a!=null?""+Nn(a):"",s=s!=null?""+Nn(s):a,O||s===i.value||(i.value=s),i.defaultValue=s}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=O?i.checked:!!c,i.defaultChecked=!!c,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S)}function Bn(i,s,a){s==="number"&&Yi(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function di(i,s,a,c){if(i=i.options,s){s={};for(var m=0;m<a.length;m++)s["$"+a[m]]=!0;for(a=0;a<i.length;a++)m=s.hasOwnProperty("$"+i[a].value),i[a].selected!==m&&(i[a].selected=m),m&&c&&(i[a].defaultSelected=!0)}else{for(a=""+Nn(a),s=null,m=0;m<i.length;m++){if(i[m].value===a){i[m].selected=!0,c&&(i[m].defaultSelected=!0);return}s!==null||i[m].disabled||(s=i[m])}s!==null&&(s.selected=!0)}}function ut(i,s,a){if(s!=null&&(s=""+Nn(s),s!==i.value&&(i.value=s),a==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=a!=null?""+Nn(a):""}function hr(i,s,a,c){if(s==null){if(c!=null){if(a!=null)throw Error(r(92));if(q(c)){if(1<c.length)throw Error(r(93));c=c[0]}a=c}a==null&&(a=""),s=a}a=Nn(s),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c)}function jn(i,s){if(s){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=s;return}}i.textContent=s}var mi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vo(i,s,a){var c=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":c?i.setProperty(s,a):typeof a!="number"||a===0||mi.has(s)?s==="float"?i.cssFloat=a:i[s]=(""+a).trim():i[s]=a+"px"}function xr(i,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var m in s)c=s[m],s.hasOwnProperty(m)&&a[m]!==c&&Vo(i,m,c)}else for(var y in s)s.hasOwnProperty(y)&&Vo(i,y,s[y])}function Qr(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ds=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Os=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wr(i){return Os.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Ei=null;function Hn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Zr=null,Jr=null;function nu(i){var s=In(i);if(s&&(i=s.stateNode)){var a=i[Ut]||null;e:switch(i=s.stateNode,s.type){case"input":if(Dt(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Bt(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==i&&c.form===i.form){var m=c[Ut]||null;if(!m)throw Error(r(90));Dt(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<a.length;s++)c=a[s],c.form===i.form&&it(c)}break e;case"textarea":ut(i,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&di(i,!!a.multiple,s,!1)}}}var Ir=!1;function of(i,s,a){if(Ir)return i(s,a);Ir=!0;try{var c=i(s);return c}finally{if(Ir=!1,(Zr!==null||Jr!==null)&&(Jf(),Zr&&(s=Zr,i=Jr,Jr=Zr=null,nu(s),i)))for(s=0;s<i.length;s++)nu(i[s])}}function Po(i,s){var a=i.stateNode;if(a===null)return null;var c=a[Ut]||null;if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xi=!1;if(dr)try{var Lo={};Object.defineProperty(Lo,"passive",{get:function(){Xi=!0}}),window.addEventListener("test",Lo,Lo),window.removeEventListener("test",Lo,Lo)}catch{Xi=!1}var Cr=null,Ms=null,es=null;function iu(){if(es)return es;var i,s=Ms,a=s.length,c,m="value"in Cr?Cr.value:Cr.textContent,y=m.length;for(i=0;i<a&&s[i]===m[i];i++);var S=a-i;for(c=1;c<=S&&s[a-c]===m[y-c];c++);return es=m.slice(i,1<c?1-c:void 0)}function Nr(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Dr(){return!0}function ru(){return!1}function Dn(i){function s(a,c,m,y,S){this._reactName=a,this._targetInst=m,this.type=c,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var O in i)i.hasOwnProperty(O)&&(a=i[O],this[O]=a?a(y):y[O]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Dr:ru,this.isPropagationStopped=ru,this}return g(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Dr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Dr)},persist:function(){},isPersistent:Dr}),s}var Et={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ra=Dn(Et),zo=g({},Et,{view:0,detail:0}),af=Dn(zo),xa,Ia,Or,Uo=g({},zo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ho,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Or&&(Or&&i.type==="mousemove"?(xa=i.screenX-Or.screenX,Ia=i.screenY-Or.screenY):Ia=xa=0,Or=i),xa)},movementY:function(i){return"movementY"in i?i.movementY:Ia}}),Qi=Dn(Uo),lf=g({},Uo,{dataTransfer:0}),fm=Dn(lf),Bo=g({},zo,{relatedTarget:0}),Ca=Dn(Bo),su=g({},Et,{animationName:0,elapsedTime:0,pseudoElement:0}),Na=Dn(su),uf=g({},Et,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Da=Dn(uf),hm=g({},Et,{data:0}),ou=Dn(hm),jo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ff={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function au(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=ff[i])?!!s[i]:!1}function Ho(){return au}var hf=g({},zo,{key:function(i){if(i.key){var s=jo[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Nr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?cf[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ho,charCode:function(i){return i.type==="keypress"?Nr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Nr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Oa=Dn(hf),df=g({},Uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lu=Dn(df),ts=g({},zo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ho}),mf=Dn(ts),pf=g({},Et,{propertyName:0,elapsedTime:0,pseudoElement:0}),gf=Dn(pf),yf=g({},Uo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ma=Dn(yf),pi=g({},Et,{newState:0,oldState:0}),vf=Dn(pi),_f=[9,13,27,32],Mr=dr&&"CompositionEvent"in window,h=null;dr&&"documentMode"in document&&(h=document.documentMode);var _=dr&&"TextEvent"in window&&!h,w=dr&&(!Mr||h&&8<h&&11>=h),z=" ",re=!1;function ce(i,s){switch(i){case"keyup":return _f.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function be(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var st=!1;function vn(i,s){switch(i){case"compositionend":return be(s);case"keypress":return s.which!==32?null:(re=!0,z);case"textInput":return i=s.data,i===z&&re?null:i;default:return null}}function ot(i,s){if(st)return i==="compositionend"||!Mr&&ce(i,s)?(i=iu(),es=Ms=Cr=null,st=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return w&&s.locale!=="ko"?null:s.data;default:return null}}var On={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _n(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!On[i.type]:s==="textarea"}function ns(i,s,a,c){Zr?Jr?Jr.push(c):Jr=[c]:Zr=c,s=sh(s,"onChange"),0<s.length&&(a=new Ra("onChange","change",null,a,c),i.push({event:a,listeners:s}))}var Fn=null,kr=null;function uu(i){WE(i,0)}function Ef(i){var s=ci(i);if(it(s))return i}function v_(i,s){if(i==="change")return s}var __=!1;if(dr){var dm;if(dr){var mm="oninput"in document;if(!mm){var E_=document.createElement("div");E_.setAttribute("oninput","return;"),mm=typeof E_.oninput=="function"}dm=mm}else dm=!1;__=dm&&(!document.documentMode||9<document.documentMode)}function w_(){Fn&&(Fn.detachEvent("onpropertychange",b_),kr=Fn=null)}function b_(i){if(i.propertyName==="value"&&Ef(kr)){var s=[];ns(s,kr,i,Hn(i)),of(uu,s)}}function bI(i,s,a){i==="focusin"?(w_(),Fn=s,kr=a,Fn.attachEvent("onpropertychange",b_)):i==="focusout"&&w_()}function SI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ef(kr)}function TI(i,s){if(i==="click")return Ef(s)}function AI(i,s){if(i==="input"||i==="change")return Ef(s)}function RI(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Ni=typeof Object.is=="function"?Object.is:RI;function cu(i,s){if(Ni(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var a=Object.keys(i),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var m=a[c];if(!dt.call(s,m)||!Ni(i[m],s[m]))return!1}return!0}function S_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function T_(i,s){var a=S_(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=s&&c>=s)return{node:a,offset:s-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=S_(a)}}function A_(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?A_(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function R_(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=Yi(i.document);s instanceof i.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)i=s.contentWindow;else break;s=Yi(i.document)}return s}function pm(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var xI=dr&&"documentMode"in document&&11>=document.documentMode,ka=null,gm=null,fu=null,ym=!1;function x_(i,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ym||ka==null||ka!==Yi(c)||(c=ka,"selectionStart"in c&&pm(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),fu&&cu(fu,c)||(fu=c,c=sh(gm,"onSelect"),0<c.length&&(s=new Ra("onSelect","select",null,s,a),i.push({event:s,listeners:c}),s.target=ka)))}function Fo(i,s){var a={};return a[i.toLowerCase()]=s.toLowerCase(),a["Webkit"+i]="webkit"+s,a["Moz"+i]="moz"+s,a}var Va={animationend:Fo("Animation","AnimationEnd"),animationiteration:Fo("Animation","AnimationIteration"),animationstart:Fo("Animation","AnimationStart"),transitionrun:Fo("Transition","TransitionRun"),transitionstart:Fo("Transition","TransitionStart"),transitioncancel:Fo("Transition","TransitionCancel"),transitionend:Fo("Transition","TransitionEnd")},vm={},I_={};dr&&(I_=document.createElement("div").style,"AnimationEvent"in window||(delete Va.animationend.animation,delete Va.animationiteration.animation,delete Va.animationstart.animation),"TransitionEvent"in window||delete Va.transitionend.transition);function qo(i){if(vm[i])return vm[i];if(!Va[i])return i;var s=Va[i],a;for(a in s)if(s.hasOwnProperty(a)&&a in I_)return vm[i]=s[a];return i}var C_=qo("animationend"),N_=qo("animationiteration"),D_=qo("animationstart"),II=qo("transitionrun"),CI=qo("transitionstart"),NI=qo("transitioncancel"),O_=qo("transitionend"),M_=new Map,_m="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_m.push("scrollEnd");function mr(i,s){M_.set(i,s),Te(s,[i])}var k_=new WeakMap;function Wi(i,s){if(typeof i=="object"&&i!==null){var a=k_.get(i);return a!==void 0?a:(s={value:i,source:s,stack:Gi(s)},k_.set(i,s),s)}return{value:i,source:s,stack:Gi(s)}}var Zi=[],Pa=0,Em=0;function wf(){for(var i=Pa,s=Em=Pa=0;s<i;){var a=Zi[s];Zi[s++]=null;var c=Zi[s];Zi[s++]=null;var m=Zi[s];Zi[s++]=null;var y=Zi[s];if(Zi[s++]=null,c!==null&&m!==null){var S=c.pending;S===null?m.next=m:(m.next=S.next,S.next=m),c.pending=m}y!==0&&V_(a,m,y)}}function bf(i,s,a,c){Zi[Pa++]=i,Zi[Pa++]=s,Zi[Pa++]=a,Zi[Pa++]=c,Em|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function wm(i,s,a,c){return bf(i,s,a,c),Sf(i)}function La(i,s){return bf(i,null,null,s),Sf(i)}function V_(i,s,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var m=!1,y=i.return;y!==null;)y.childLanes|=a,c=y.alternate,c!==null&&(c.childLanes|=a),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(m=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,m&&s!==null&&(m=31-Vt(a),i=y.hiddenUpdates,c=i[m],c===null?i[m]=[s]:c.push(s),s.lane=a|536870912),y):null}function Sf(i){if(50<Pu)throw Pu=0,xp=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var za={};function DI(i,s,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Di(i,s,a,c){return new DI(i,s,a,c)}function bm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function is(i,s){var a=i.alternate;return a===null?(a=Di(i.tag,s,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=s,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,s=i.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function P_(i,s){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,s=a.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Tf(i,s,a,c,m,y){var S=0;if(c=i,typeof i=="function")bm(i)&&(S=1);else if(typeof i=="string")S=MC(i,a,he.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case I:return i=Di(31,a,s,m),i.elementType=I,i.lanes=y,i;case x:return $o(a.children,m,y,s);case M:S=8,m|=24;break;case D:return i=Di(12,a,s,m|2),i.elementType=D,i.lanes=y,i;case X:return i=Di(13,a,s,m),i.elementType=X,i.lanes=y,i;case Z:return i=Di(19,a,s,m),i.elementType=Z,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case P:case F:S=10;break e;case H:S=9;break e;case j:S=11;break e;case R:S=14;break e;case T:S=16,c=null;break e}S=29,a=Error(r(130,i===null?"null":typeof i,"")),c=null}return s=Di(S,a,s,m),s.elementType=i,s.type=c,s.lanes=y,s}function $o(i,s,a,c){return i=Di(7,i,c,s),i.lanes=a,i}function Sm(i,s,a){return i=Di(6,i,null,s),i.lanes=a,i}function Tm(i,s,a){return s=Di(4,i.children!==null?i.children:[],i.key,s),s.lanes=a,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var Ua=[],Ba=0,Af=null,Rf=0,Ji=[],er=0,Go=null,rs=1,ss="";function Yo(i,s){Ua[Ba++]=Rf,Ua[Ba++]=Af,Af=i,Rf=s}function L_(i,s,a){Ji[er++]=rs,Ji[er++]=ss,Ji[er++]=Go,Go=i;var c=rs;i=ss;var m=32-Vt(c)-1;c&=~(1<<m),a+=1;var y=32-Vt(s)+m;if(30<y){var S=m-m%5;y=(c&(1<<S)-1).toString(32),c>>=S,m-=S,rs=1<<32-Vt(s)+m|a<<m|c,ss=y+i}else rs=1<<y|a<<m|c,ss=i}function Am(i){i.return!==null&&(Yo(i,1),L_(i,1,0))}function Rm(i){for(;i===Af;)Af=Ua[--Ba],Ua[Ba]=null,Rf=Ua[--Ba],Ua[Ba]=null;for(;i===Go;)Go=Ji[--er],Ji[er]=null,ss=Ji[--er],Ji[er]=null,rs=Ji[--er],Ji[er]=null}var gi=null,Zt=null,ht=!1,Ko=null,Vr=!1,xm=Error(r(519));function Xo(i){var s=Error(r(418,""));throw mu(Wi(s,i)),xm}function z_(i){var s=i.stateNode,a=i.type,c=i.memoizedProps;switch(s[gt]=i,s[Ut]=c,a){case"dialog":et("cancel",s),et("close",s);break;case"iframe":case"object":case"embed":et("load",s);break;case"video":case"audio":for(a=0;a<zu.length;a++)et(zu[a],s);break;case"source":et("error",s);break;case"img":case"image":case"link":et("error",s),et("load",s);break;case"details":et("toggle",s);break;case"input":et("invalid",s),Un(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),rt(s);break;case"select":et("invalid",s);break;case"textarea":et("invalid",s),hr(s,c.value,c.defaultValue,c.children),rt(s)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||c.suppressHydrationWarning===!0||tw(s.textContent,a)?(c.popover!=null&&(et("beforetoggle",s),et("toggle",s)),c.onScroll!=null&&et("scroll",s),c.onScrollEnd!=null&&et("scrollend",s),c.onClick!=null&&(s.onclick=oh),s=!0):s=!1,s||Xo(i)}function U_(i){for(gi=i.return;gi;)switch(gi.tag){case 5:case 13:Vr=!1;return;case 27:case 3:Vr=!0;return;default:gi=gi.return}}function hu(i){if(i!==gi)return!1;if(!ht)return U_(i),ht=!0,!1;var s=i.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||Fp(i.type,i.memoizedProps)),a=!a),a&&Zt&&Xo(i),U_(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(a=i.data,a==="/$"){if(s===0){Zt=gr(i.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;i=i.nextSibling}Zt=null}}else s===27?(s=Zt,Xs(i.type)?(i=Yp,Yp=null,Zt=i):Zt=s):Zt=gi?gr(i.stateNode.nextSibling):null;return!0}function du(){Zt=gi=null,ht=!1}function B_(){var i=Ko;return i!==null&&(Si===null?Si=i:Si.push.apply(Si,i),Ko=null),i}function mu(i){Ko===null?Ko=[i]:Ko.push(i)}var Im=Y(null),Qo=null,os=null;function ks(i,s,a){ne(Im,s._currentValue),s._currentValue=a}function as(i){i._currentValue=Im.current,ie(Im)}function Cm(i,s,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),i===a)break;i=i.return}}function Nm(i,s,a,c){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var y=m.dependencies;if(y!==null){var S=m.child;y=y.firstContext;e:for(;y!==null;){var O=y;y=m;for(var $=0;$<s.length;$++)if(O.context===s[$]){y.lanes|=a,O=y.alternate,O!==null&&(O.lanes|=a),Cm(y.return,a,i),c||(S=null);break e}y=O.next}}else if(m.tag===18){if(S=m.return,S===null)throw Error(r(341));S.lanes|=a,y=S.alternate,y!==null&&(y.lanes|=a),Cm(S,a,i),S=null}else S=m.child;if(S!==null)S.return=m;else for(S=m;S!==null;){if(S===i){S=null;break}if(m=S.sibling,m!==null){m.return=S.return,S=m;break}S=S.return}m=S}}function pu(i,s,a,c){i=null;for(var m=s,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var S=m.alternate;if(S===null)throw Error(r(387));if(S=S.memoizedProps,S!==null){var O=m.type;Ni(m.pendingProps.value,S.value)||(i!==null?i.push(O):i=[O])}}else if(m===Oe.current){if(S=m.alternate,S===null)throw Error(r(387));S.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(qu):i=[qu])}m=m.return}i!==null&&Nm(s,i,a,c),s.flags|=262144}function xf(i){for(i=i.firstContext;i!==null;){if(!Ni(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Wo(i){Qo=i,os=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Zn(i){return j_(Qo,i)}function If(i,s){return Qo===null&&Wo(i),j_(i,s)}function j_(i,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},os===null){if(i===null)throw Error(r(308));os=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else os=os.next=s;return a}var OI=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){s.aborted=!0,i.forEach(function(a){return a()})}},MI=t.unstable_scheduleCallback,kI=t.unstable_NormalPriority,En={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dm(){return{controller:new OI,data:new Map,refCount:0}}function gu(i){i.refCount--,i.refCount===0&&MI(kI,function(){i.controller.abort()})}var yu=null,Om=0,ja=0,Ha=null;function VI(i,s){if(yu===null){var a=yu=[];Om=0,ja=kp(),Ha={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Om++,s.then(H_,H_),s}function H_(){if(--Om===0&&yu!==null){Ha!==null&&(Ha.status="fulfilled");var i=yu;yu=null,ja=0,Ha=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function PI(i,s){var a=[],c={status:"pending",value:null,reason:null,then:function(m){a.push(m)}};return i.then(function(){c.status="fulfilled",c.value=s;for(var m=0;m<a.length;m++)(0,a[m])(s)},function(m){for(c.status="rejected",c.reason=m,m=0;m<a.length;m++)(0,a[m])(void 0)}),c}var F_=V.S;V.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&VI(i,s),F_!==null&&F_(i,s)};var Zo=Y(null);function Mm(){var i=Zo.current;return i!==null?i:Ot.pooledCache}function Cf(i,s){s===null?ne(Zo,Zo.current):ne(Zo,s.pool)}function q_(){var i=Mm();return i===null?null:{parent:En._currentValue,pool:i}}var vu=Error(r(460)),$_=Error(r(474)),Nf=Error(r(542)),km={then:function(){}};function G_(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Df(){}function Y_(i,s,a){switch(a=i[a],a===void 0?i.push(s):a!==s&&(s.then(Df,Df),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,X_(i),i;default:if(typeof s.status=="string")s.then(Df,Df);else{if(i=Ot,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(c){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=c}},function(c){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,X_(i),i}throw _u=s,vu}}var _u=null;function K_(){if(_u===null)throw Error(r(459));var i=_u;return _u=null,i}function X_(i){if(i===vu||i===Nf)throw Error(r(483))}var Vs=!1;function Vm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pm(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ps(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ls(i,s,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(St&2)!==0){var m=c.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),c.pending=s,s=Sf(i),V_(i,null,a),s}return bf(i,c,s,a),Sf(i)}function Eu(i,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var c=s.lanes;c&=i.pendingLanes,a|=c,s.lanes=a,Xr(i,a)}}function Lm(i,s){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var m=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};y===null?m=y=S:y=y.next=S,a=a.next}while(a!==null);y===null?m=y=s:y=y.next=s}else m=y=s;a={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=s:i.next=s,a.lastBaseUpdate=s}var zm=!1;function wu(){if(zm){var i=Ha;if(i!==null)throw i}}function bu(i,s,a,c){zm=!1;var m=i.updateQueue;Vs=!1;var y=m.firstBaseUpdate,S=m.lastBaseUpdate,O=m.shared.pending;if(O!==null){m.shared.pending=null;var $=O,oe=$.next;$.next=null,S===null?y=oe:S.next=oe,S=$;var de=i.alternate;de!==null&&(de=de.updateQueue,O=de.lastBaseUpdate,O!==S&&(O===null?de.firstBaseUpdate=oe:O.next=oe,de.lastBaseUpdate=$))}if(y!==null){var pe=m.baseState;S=0,de=oe=$=null,O=y;do{var ae=O.lane&-536870913,le=ae!==O.lane;if(le?(at&ae)===ae:(c&ae)===ae){ae!==0&&ae===ja&&(zm=!0),de!==null&&(de=de.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var He=i,Le=O;ae=s;var Ct=a;switch(Le.tag){case 1:if(He=Le.payload,typeof He=="function"){pe=He.call(Ct,pe,ae);break e}pe=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=Le.payload,ae=typeof He=="function"?He.call(Ct,pe,ae):He,ae==null)break e;pe=g({},pe,ae);break e;case 2:Vs=!0}}ae=O.callback,ae!==null&&(i.flags|=64,le&&(i.flags|=8192),le=m.callbacks,le===null?m.callbacks=[ae]:le.push(ae))}else le={lane:ae,tag:O.tag,payload:O.payload,callback:O.callback,next:null},de===null?(oe=de=le,$=pe):de=de.next=le,S|=ae;if(O=O.next,O===null){if(O=m.shared.pending,O===null)break;le=O,O=le.next,le.next=null,m.lastBaseUpdate=le,m.shared.pending=null}}while(!0);de===null&&($=pe),m.baseState=$,m.firstBaseUpdate=oe,m.lastBaseUpdate=de,y===null&&(m.shared.lanes=0),$s|=S,i.lanes=S,i.memoizedState=pe}}function Q_(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function W_(i,s){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Q_(a[i],s)}var Fa=Y(null),Of=Y(0);function Z_(i,s){i=ms,ne(Of,i),ne(Fa,s),ms=i|s.baseLanes}function Um(){ne(Of,ms),ne(Fa,Fa.current)}function Bm(){ms=Of.current,ie(Fa),ie(Of)}var zs=0,Ke=null,xt=null,un=null,Mf=!1,qa=!1,Jo=!1,kf=0,Su=0,$a=null,LI=0;function rn(){throw Error(r(321))}function jm(i,s){if(s===null)return!1;for(var a=0;a<s.length&&a<i.length;a++)if(!Ni(i[a],s[a]))return!1;return!0}function Hm(i,s,a,c,m,y){return zs=y,Ke=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,V.H=i===null||i.memoizedState===null?V0:P0,Jo=!1,y=a(c,m),Jo=!1,qa&&(y=e0(s,a,c,m)),J_(i),y}function J_(i){V.H=Bf;var s=xt!==null&&xt.next!==null;if(zs=0,un=xt=Ke=null,Mf=!1,Su=0,$a=null,s)throw Error(r(300));i===null||Mn||(i=i.dependencies,i!==null&&xf(i)&&(Mn=!0))}function e0(i,s,a,c){Ke=i;var m=0;do{if(qa&&($a=null),Su=0,qa=!1,25<=m)throw Error(r(301));if(m+=1,un=xt=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}V.H=qI,y=s(a,c)}while(qa);return y}function zI(){var i=V.H,s=i.useState()[0];return s=typeof s.then=="function"?Tu(s):s,i=i.useState()[0],(xt!==null?xt.memoizedState:null)!==i&&(Ke.flags|=1024),s}function Fm(){var i=kf!==0;return kf=0,i}function qm(i,s,a){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~a}function $m(i){if(Mf){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Mf=!1}zs=0,un=xt=Ke=null,qa=!1,Su=kf=0,$a=null}function wi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?Ke.memoizedState=un=i:un=un.next=i,un}function cn(){if(xt===null){var i=Ke.alternate;i=i!==null?i.memoizedState:null}else i=xt.next;var s=un===null?Ke.memoizedState:un.next;if(s!==null)un=s,xt=i;else{if(i===null)throw Ke.alternate===null?Error(r(467)):Error(r(310));xt=i,i={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},un===null?Ke.memoizedState=un=i:un=un.next=i}return un}function Gm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tu(i){var s=Su;return Su+=1,$a===null&&($a=[]),i=Y_($a,i,s),s=Ke,(un===null?s.memoizedState:un.next)===null&&(s=s.alternate,V.H=s===null||s.memoizedState===null?V0:P0),i}function Vf(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Tu(i);if(i.$$typeof===F)return Zn(i)}throw Error(r(438,String(i)))}function Ym(i){var s=null,a=Ke.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var c=Ke.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Gm(),Ke.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(i),c=0;c<i;c++)a[c]=N;return s.index++,a}function ls(i,s){return typeof s=="function"?s(i):s}function Pf(i){var s=cn();return Km(s,xt,i)}function Km(i,s,a){var c=i.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=a;var m=i.baseQueue,y=c.pending;if(y!==null){if(m!==null){var S=m.next;m.next=y.next,y.next=S}s.baseQueue=m=y,c.pending=null}if(y=i.baseState,m===null)i.memoizedState=y;else{s=m.next;var O=S=null,$=null,oe=s,de=!1;do{var pe=oe.lane&-536870913;if(pe!==oe.lane?(at&pe)===pe:(zs&pe)===pe){var ae=oe.revertLane;if(ae===0)$!==null&&($=$.next={lane:0,revertLane:0,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),pe===ja&&(de=!0);else if((zs&ae)===ae){oe=oe.next,ae===ja&&(de=!0);continue}else pe={lane:0,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},$===null?(O=$=pe,S=y):$=$.next=pe,Ke.lanes|=ae,$s|=ae;pe=oe.action,Jo&&a(y,pe),y=oe.hasEagerState?oe.eagerState:a(y,pe)}else ae={lane:pe,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},$===null?(O=$=ae,S=y):$=$.next=ae,Ke.lanes|=pe,$s|=pe;oe=oe.next}while(oe!==null&&oe!==s);if($===null?S=y:$.next=O,!Ni(y,i.memoizedState)&&(Mn=!0,de&&(a=Ha,a!==null)))throw a;i.memoizedState=y,i.baseState=S,i.baseQueue=$,c.lastRenderedState=y}return m===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Xm(i){var s=cn(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=i;var c=a.dispatch,m=a.pending,y=s.memoizedState;if(m!==null){a.pending=null;var S=m=m.next;do y=i(y,S.action),S=S.next;while(S!==m);Ni(y,s.memoizedState)||(Mn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),a.lastRenderedState=y}return[y,c]}function t0(i,s,a){var c=Ke,m=cn(),y=ht;if(y){if(a===void 0)throw Error(r(407));a=a()}else a=s();var S=!Ni((xt||m).memoizedState,a);S&&(m.memoizedState=a,Mn=!0),m=m.queue;var O=r0.bind(null,c,m,i);if(Au(2048,8,O,[i]),m.getSnapshot!==s||S||un!==null&&un.memoizedState.tag&1){if(c.flags|=2048,Ga(9,Lf(),i0.bind(null,c,m,a,s),null),Ot===null)throw Error(r(349));y||(zs&124)!==0||n0(c,s,a)}return a}function n0(i,s,a){i.flags|=16384,i={getSnapshot:s,value:a},s=Ke.updateQueue,s===null?(s=Gm(),Ke.updateQueue=s,s.stores=[i]):(a=s.stores,a===null?s.stores=[i]:a.push(i))}function i0(i,s,a,c){s.value=a,s.getSnapshot=c,s0(s)&&o0(i)}function r0(i,s,a){return a(function(){s0(s)&&o0(i)})}function s0(i){var s=i.getSnapshot;i=i.value;try{var a=s();return!Ni(i,a)}catch{return!0}}function o0(i){var s=La(i,2);s!==null&&Pi(s,i,2)}function Qm(i){var s=wi();if(typeof i=="function"){var a=i;if(i=a(),Jo){kt(!0);try{a()}finally{kt(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ls,lastRenderedState:i},s}function a0(i,s,a,c){return i.baseState=a,Km(i,xt,typeof c=="function"?c:ls)}function UI(i,s,a,c,m){if(Uf(i))throw Error(r(485));if(i=s.action,i!==null){var y={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){y.listeners.push(S)}};V.T!==null?a(!0):y.isTransition=!1,c(y),a=s.pending,a===null?(y.next=s.pending=y,l0(s,y)):(y.next=a.next,s.pending=a.next=y)}}function l0(i,s){var a=s.action,c=s.payload,m=i.state;if(s.isTransition){var y=V.T,S={};V.T=S;try{var O=a(m,c),$=V.S;$!==null&&$(S,O),u0(i,s,O)}catch(oe){Wm(i,s,oe)}finally{V.T=y}}else try{y=a(m,c),u0(i,s,y)}catch(oe){Wm(i,s,oe)}}function u0(i,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){c0(i,s,c)},function(c){return Wm(i,s,c)}):c0(i,s,a)}function c0(i,s,a){s.status="fulfilled",s.value=a,f0(s),i.state=a,s=i.pending,s!==null&&(a=s.next,a===s?i.pending=null:(a=a.next,s.next=a,l0(i,a)))}function Wm(i,s,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=a,f0(s),s=s.next;while(s!==c)}i.action=null}function f0(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function h0(i,s){return s}function d0(i,s){if(ht){var a=Ot.formState;if(a!==null){e:{var c=Ke;if(ht){if(Zt){t:{for(var m=Zt,y=Vr;m.nodeType!==8;){if(!y){m=null;break t}if(m=gr(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){Zt=gr(m.nextSibling),c=m.data==="F!";break e}}Xo(c)}c=!1}c&&(s=a[0])}}return a=wi(),a.memoizedState=a.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h0,lastRenderedState:s},a.queue=c,a=O0.bind(null,Ke,c),c.dispatch=a,c=Qm(!1),y=np.bind(null,Ke,!1,c.queue),c=wi(),m={state:s,dispatch:null,action:i,pending:null},c.queue=m,a=UI.bind(null,Ke,m,y,a),m.dispatch=a,c.memoizedState=i,[s,a,!1]}function m0(i){var s=cn();return p0(s,xt,i)}function p0(i,s,a){if(s=Km(i,s,h0)[0],i=Pf(ls)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Tu(s)}catch(S){throw S===vu?Nf:S}else c=s;s=cn();var m=s.queue,y=m.dispatch;return a!==s.memoizedState&&(Ke.flags|=2048,Ga(9,Lf(),BI.bind(null,m,a),null)),[c,y,i]}function BI(i,s){i.action=s}function g0(i){var s=cn(),a=xt;if(a!==null)return p0(s,a,i);cn(),s=s.memoizedState,a=cn();var c=a.queue.dispatch;return a.memoizedState=i,[s,c,!1]}function Ga(i,s,a,c){return i={tag:i,create:a,deps:c,inst:s,next:null},s=Ke.updateQueue,s===null&&(s=Gm(),Ke.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,s.lastEffect=i),i}function Lf(){return{destroy:void 0,resource:void 0}}function y0(){return cn().memoizedState}function zf(i,s,a,c){var m=wi();c=c===void 0?null:c,Ke.flags|=i,m.memoizedState=Ga(1|s,Lf(),a,c)}function Au(i,s,a,c){var m=cn();c=c===void 0?null:c;var y=m.memoizedState.inst;xt!==null&&c!==null&&jm(c,xt.memoizedState.deps)?m.memoizedState=Ga(s,y,a,c):(Ke.flags|=i,m.memoizedState=Ga(1|s,y,a,c))}function v0(i,s){zf(8390656,8,i,s)}function _0(i,s){Au(2048,8,i,s)}function E0(i,s){return Au(4,2,i,s)}function w0(i,s){return Au(4,4,i,s)}function b0(i,s){if(typeof s=="function"){i=i();var a=s(i);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function S0(i,s,a){a=a!=null?a.concat([i]):null,Au(4,4,b0.bind(null,s,i),a)}function Zm(){}function T0(i,s){var a=cn();s=s===void 0?null:s;var c=a.memoizedState;return s!==null&&jm(s,c[1])?c[0]:(a.memoizedState=[i,s],i)}function A0(i,s){var a=cn();s=s===void 0?null:s;var c=a.memoizedState;if(s!==null&&jm(s,c[1]))return c[0];if(c=i(),Jo){kt(!0);try{i()}finally{kt(!1)}}return a.memoizedState=[c,s],c}function Jm(i,s,a){return a===void 0||(zs&1073741824)!==0?i.memoizedState=s:(i.memoizedState=a,i=IE(),Ke.lanes|=i,$s|=i,a)}function R0(i,s,a,c){return Ni(a,s)?a:Fa.current!==null?(i=Jm(i,a,c),Ni(i,s)||(Mn=!0),i):(zs&42)===0?(Mn=!0,i.memoizedState=a):(i=IE(),Ke.lanes|=i,$s|=i,s)}function x0(i,s,a,c,m){var y=G.p;G.p=y!==0&&8>y?y:8;var S=V.T,O={};V.T=O,np(i,!1,s,a);try{var $=m(),oe=V.S;if(oe!==null&&oe(O,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var de=PI($,c);Ru(i,s,de,Vi(i))}else Ru(i,s,c,Vi(i))}catch(pe){Ru(i,s,{then:function(){},status:"rejected",reason:pe},Vi())}finally{G.p=y,V.T=S}}function jI(){}function ep(i,s,a,c){if(i.tag!==5)throw Error(r(476));var m=I0(i).queue;x0(i,m,s,ee,a===null?jI:function(){return C0(i),a(c)})}function I0(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ls,lastRenderedState:ee},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ls,lastRenderedState:a},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function C0(i){var s=I0(i).next.queue;Ru(i,s,{},Vi())}function tp(){return Zn(qu)}function N0(){return cn().memoizedState}function D0(){return cn().memoizedState}function HI(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var a=Vi();i=Ps(a);var c=Ls(s,i,a);c!==null&&(Pi(c,s,a),Eu(c,s,a)),s={cache:Dm()},i.payload=s;return}s=s.return}}function FI(i,s,a){var c=Vi();a={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Uf(i)?M0(s,a):(a=wm(i,s,a,c),a!==null&&(Pi(a,i,c),k0(a,s,c)))}function O0(i,s,a){var c=Vi();Ru(i,s,a,c)}function Ru(i,s,a,c){var m={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Uf(i))M0(s,m);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var S=s.lastRenderedState,O=y(S,a);if(m.hasEagerState=!0,m.eagerState=O,Ni(O,S))return bf(i,s,m,0),Ot===null&&wf(),!1}catch{}finally{}if(a=wm(i,s,m,c),a!==null)return Pi(a,i,c),k0(a,s,c),!0}return!1}function np(i,s,a,c){if(c={lane:2,revertLane:kp(),action:c,hasEagerState:!1,eagerState:null,next:null},Uf(i)){if(s)throw Error(r(479))}else s=wm(i,a,c,2),s!==null&&Pi(s,i,2)}function Uf(i){var s=i.alternate;return i===Ke||s!==null&&s===Ke}function M0(i,s){qa=Mf=!0;var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}function k0(i,s,a){if((a&4194048)!==0){var c=s.lanes;c&=i.pendingLanes,a|=c,s.lanes=a,Xr(i,a)}}var Bf={readContext:Zn,use:Vf,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useLayoutEffect:rn,useInsertionEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useSyncExternalStore:rn,useId:rn,useHostTransitionStatus:rn,useFormState:rn,useActionState:rn,useOptimistic:rn,useMemoCache:rn,useCacheRefresh:rn},V0={readContext:Zn,use:Vf,useCallback:function(i,s){return wi().memoizedState=[i,s===void 0?null:s],i},useContext:Zn,useEffect:v0,useImperativeHandle:function(i,s,a){a=a!=null?a.concat([i]):null,zf(4194308,4,b0.bind(null,s,i),a)},useLayoutEffect:function(i,s){return zf(4194308,4,i,s)},useInsertionEffect:function(i,s){zf(4,2,i,s)},useMemo:function(i,s){var a=wi();s=s===void 0?null:s;var c=i();if(Jo){kt(!0);try{i()}finally{kt(!1)}}return a.memoizedState=[c,s],c},useReducer:function(i,s,a){var c=wi();if(a!==void 0){var m=a(s);if(Jo){kt(!0);try{a(s)}finally{kt(!1)}}}else m=s;return c.memoizedState=c.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},c.queue=i,i=i.dispatch=FI.bind(null,Ke,i),[c.memoizedState,i]},useRef:function(i){var s=wi();return i={current:i},s.memoizedState=i},useState:function(i){i=Qm(i);var s=i.queue,a=O0.bind(null,Ke,s);return s.dispatch=a,[i.memoizedState,a]},useDebugValue:Zm,useDeferredValue:function(i,s){var a=wi();return Jm(a,i,s)},useTransition:function(){var i=Qm(!1);return i=x0.bind(null,Ke,i.queue,!0,!1),wi().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,a){var c=Ke,m=wi();if(ht){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),Ot===null)throw Error(r(349));(at&124)!==0||n0(c,s,a)}m.memoizedState=a;var y={value:a,getSnapshot:s};return m.queue=y,v0(r0.bind(null,c,y,i),[i]),c.flags|=2048,Ga(9,Lf(),i0.bind(null,c,y,a,s),null),a},useId:function(){var i=wi(),s=Ot.identifierPrefix;if(ht){var a=ss,c=rs;a=(c&~(1<<32-Vt(c)-1)).toString(32)+a,s="«"+s+"R"+a,a=kf++,0<a&&(s+="H"+a.toString(32)),s+="»"}else a=LI++,s="«"+s+"r"+a.toString(32)+"»";return i.memoizedState=s},useHostTransitionStatus:tp,useFormState:d0,useActionState:d0,useOptimistic:function(i){var s=wi();s.memoizedState=s.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=np.bind(null,Ke,!0,a),a.dispatch=s,[i,s]},useMemoCache:Ym,useCacheRefresh:function(){return wi().memoizedState=HI.bind(null,Ke)}},P0={readContext:Zn,use:Vf,useCallback:T0,useContext:Zn,useEffect:_0,useImperativeHandle:S0,useInsertionEffect:E0,useLayoutEffect:w0,useMemo:A0,useReducer:Pf,useRef:y0,useState:function(){return Pf(ls)},useDebugValue:Zm,useDeferredValue:function(i,s){var a=cn();return R0(a,xt.memoizedState,i,s)},useTransition:function(){var i=Pf(ls)[0],s=cn().memoizedState;return[typeof i=="boolean"?i:Tu(i),s]},useSyncExternalStore:t0,useId:N0,useHostTransitionStatus:tp,useFormState:m0,useActionState:m0,useOptimistic:function(i,s){var a=cn();return a0(a,xt,i,s)},useMemoCache:Ym,useCacheRefresh:D0},qI={readContext:Zn,use:Vf,useCallback:T0,useContext:Zn,useEffect:_0,useImperativeHandle:S0,useInsertionEffect:E0,useLayoutEffect:w0,useMemo:A0,useReducer:Xm,useRef:y0,useState:function(){return Xm(ls)},useDebugValue:Zm,useDeferredValue:function(i,s){var a=cn();return xt===null?Jm(a,i,s):R0(a,xt.memoizedState,i,s)},useTransition:function(){var i=Xm(ls)[0],s=cn().memoizedState;return[typeof i=="boolean"?i:Tu(i),s]},useSyncExternalStore:t0,useId:N0,useHostTransitionStatus:tp,useFormState:g0,useActionState:g0,useOptimistic:function(i,s){var a=cn();return xt!==null?a0(a,xt,i,s):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:Ym,useCacheRefresh:D0},Ya=null,xu=0;function jf(i){var s=xu;return xu+=1,Ya===null&&(Ya=[]),Y_(Ya,i,s)}function Iu(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Hf(i,s){throw s.$$typeof===v?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function L0(i){var s=i._init;return s(i._payload)}function z0(i){function s(te,W){if(i){var se=te.deletions;se===null?(te.deletions=[W],te.flags|=16):se.push(W)}}function a(te,W){if(!i)return null;for(;W!==null;)s(te,W),W=W.sibling;return null}function c(te){for(var W=new Map;te!==null;)te.key!==null?W.set(te.key,te):W.set(te.index,te),te=te.sibling;return W}function m(te,W){return te=is(te,W),te.index=0,te.sibling=null,te}function y(te,W,se){return te.index=se,i?(se=te.alternate,se!==null?(se=se.index,se<W?(te.flags|=67108866,W):se):(te.flags|=67108866,W)):(te.flags|=1048576,W)}function S(te){return i&&te.alternate===null&&(te.flags|=67108866),te}function O(te,W,se,me){return W===null||W.tag!==6?(W=Sm(se,te.mode,me),W.return=te,W):(W=m(W,se),W.return=te,W)}function $(te,W,se,me){var Ne=se.type;return Ne===x?de(te,W,se.props.children,me,se.key):W!==null&&(W.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===T&&L0(Ne)===W.type)?(W=m(W,se.props),Iu(W,se),W.return=te,W):(W=Tf(se.type,se.key,se.props,null,te.mode,me),Iu(W,se),W.return=te,W)}function oe(te,W,se,me){return W===null||W.tag!==4||W.stateNode.containerInfo!==se.containerInfo||W.stateNode.implementation!==se.implementation?(W=Tm(se,te.mode,me),W.return=te,W):(W=m(W,se.children||[]),W.return=te,W)}function de(te,W,se,me,Ne){return W===null||W.tag!==7?(W=$o(se,te.mode,me,Ne),W.return=te,W):(W=m(W,se),W.return=te,W)}function pe(te,W,se){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=Sm(""+W,te.mode,se),W.return=te,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case E:return se=Tf(W.type,W.key,W.props,null,te.mode,se),Iu(se,W),se.return=te,se;case b:return W=Tm(W,te.mode,se),W.return=te,W;case T:var me=W._init;return W=me(W._payload),pe(te,W,se)}if(q(W)||B(W))return W=$o(W,te.mode,se,null),W.return=te,W;if(typeof W.then=="function")return pe(te,jf(W),se);if(W.$$typeof===F)return pe(te,If(te,W),se);Hf(te,W)}return null}function ae(te,W,se,me){var Ne=W!==null?W.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return Ne!==null?null:O(te,W,""+se,me);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case E:return se.key===Ne?$(te,W,se,me):null;case b:return se.key===Ne?oe(te,W,se,me):null;case T:return Ne=se._init,se=Ne(se._payload),ae(te,W,se,me)}if(q(se)||B(se))return Ne!==null?null:de(te,W,se,me,null);if(typeof se.then=="function")return ae(te,W,jf(se),me);if(se.$$typeof===F)return ae(te,W,If(te,se),me);Hf(te,se)}return null}function le(te,W,se,me,Ne){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return te=te.get(se)||null,O(W,te,""+me,Ne);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case E:return te=te.get(me.key===null?se:me.key)||null,$(W,te,me,Ne);case b:return te=te.get(me.key===null?se:me.key)||null,oe(W,te,me,Ne);case T:var Qe=me._init;return me=Qe(me._payload),le(te,W,se,me,Ne)}if(q(me)||B(me))return te=te.get(se)||null,de(W,te,me,Ne,null);if(typeof me.then=="function")return le(te,W,se,jf(me),Ne);if(me.$$typeof===F)return le(te,W,se,If(W,me),Ne);Hf(W,me)}return null}function He(te,W,se,me){for(var Ne=null,Qe=null,Me=W,ze=W=0,Vn=null;Me!==null&&ze<se.length;ze++){Me.index>ze?(Vn=Me,Me=null):Vn=Me.sibling;var ft=ae(te,Me,se[ze],me);if(ft===null){Me===null&&(Me=Vn);break}i&&Me&&ft.alternate===null&&s(te,Me),W=y(ft,W,ze),Qe===null?Ne=ft:Qe.sibling=ft,Qe=ft,Me=Vn}if(ze===se.length)return a(te,Me),ht&&Yo(te,ze),Ne;if(Me===null){for(;ze<se.length;ze++)Me=pe(te,se[ze],me),Me!==null&&(W=y(Me,W,ze),Qe===null?Ne=Me:Qe.sibling=Me,Qe=Me);return ht&&Yo(te,ze),Ne}for(Me=c(Me);ze<se.length;ze++)Vn=le(Me,te,ze,se[ze],me),Vn!==null&&(i&&Vn.alternate!==null&&Me.delete(Vn.key===null?ze:Vn.key),W=y(Vn,W,ze),Qe===null?Ne=Vn:Qe.sibling=Vn,Qe=Vn);return i&&Me.forEach(function(eo){return s(te,eo)}),ht&&Yo(te,ze),Ne}function Le(te,W,se,me){if(se==null)throw Error(r(151));for(var Ne=null,Qe=null,Me=W,ze=W=0,Vn=null,ft=se.next();Me!==null&&!ft.done;ze++,ft=se.next()){Me.index>ze?(Vn=Me,Me=null):Vn=Me.sibling;var eo=ae(te,Me,ft.value,me);if(eo===null){Me===null&&(Me=Vn);break}i&&Me&&eo.alternate===null&&s(te,Me),W=y(eo,W,ze),Qe===null?Ne=eo:Qe.sibling=eo,Qe=eo,Me=Vn}if(ft.done)return a(te,Me),ht&&Yo(te,ze),Ne;if(Me===null){for(;!ft.done;ze++,ft=se.next())ft=pe(te,ft.value,me),ft!==null&&(W=y(ft,W,ze),Qe===null?Ne=ft:Qe.sibling=ft,Qe=ft);return ht&&Yo(te,ze),Ne}for(Me=c(Me);!ft.done;ze++,ft=se.next())ft=le(Me,te,ze,ft.value,me),ft!==null&&(i&&ft.alternate!==null&&Me.delete(ft.key===null?ze:ft.key),W=y(ft,W,ze),Qe===null?Ne=ft:Qe.sibling=ft,Qe=ft);return i&&Me.forEach(function($C){return s(te,$C)}),ht&&Yo(te,ze),Ne}function Ct(te,W,se,me){if(typeof se=="object"&&se!==null&&se.type===x&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case E:e:{for(var Ne=se.key;W!==null;){if(W.key===Ne){if(Ne=se.type,Ne===x){if(W.tag===7){a(te,W.sibling),me=m(W,se.props.children),me.return=te,te=me;break e}}else if(W.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===T&&L0(Ne)===W.type){a(te,W.sibling),me=m(W,se.props),Iu(me,se),me.return=te,te=me;break e}a(te,W);break}else s(te,W);W=W.sibling}se.type===x?(me=$o(se.props.children,te.mode,me,se.key),me.return=te,te=me):(me=Tf(se.type,se.key,se.props,null,te.mode,me),Iu(me,se),me.return=te,te=me)}return S(te);case b:e:{for(Ne=se.key;W!==null;){if(W.key===Ne)if(W.tag===4&&W.stateNode.containerInfo===se.containerInfo&&W.stateNode.implementation===se.implementation){a(te,W.sibling),me=m(W,se.children||[]),me.return=te,te=me;break e}else{a(te,W);break}else s(te,W);W=W.sibling}me=Tm(se,te.mode,me),me.return=te,te=me}return S(te);case T:return Ne=se._init,se=Ne(se._payload),Ct(te,W,se,me)}if(q(se))return He(te,W,se,me);if(B(se)){if(Ne=B(se),typeof Ne!="function")throw Error(r(150));return se=Ne.call(se),Le(te,W,se,me)}if(typeof se.then=="function")return Ct(te,W,jf(se),me);if(se.$$typeof===F)return Ct(te,W,If(te,se),me);Hf(te,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,W!==null&&W.tag===6?(a(te,W.sibling),me=m(W,se),me.return=te,te=me):(a(te,W),me=Sm(se,te.mode,me),me.return=te,te=me),S(te)):a(te,W)}return function(te,W,se,me){try{xu=0;var Ne=Ct(te,W,se,me);return Ya=null,Ne}catch(Me){if(Me===vu||Me===Nf)throw Me;var Qe=Di(29,Me,null,te.mode);return Qe.lanes=me,Qe.return=te,Qe}finally{}}}var Ka=z0(!0),U0=z0(!1),tr=Y(null),Pr=null;function Us(i){var s=i.alternate;ne(wn,wn.current&1),ne(tr,i),Pr===null&&(s===null||Fa.current!==null||s.memoizedState!==null)&&(Pr=i)}function B0(i){if(i.tag===22){if(ne(wn,wn.current),ne(tr,i),Pr===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(Pr=i)}}else Bs()}function Bs(){ne(wn,wn.current),ne(tr,tr.current)}function us(i){ie(tr),Pr===i&&(Pr=null),ie(wn)}var wn=Y(0);function Ff(i){for(var s=i;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Gp(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function ip(i,s,a,c){s=i.memoizedState,a=a(c,s),a=a==null?s:g({},s,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var rp={enqueueSetState:function(i,s,a){i=i._reactInternals;var c=Vi(),m=Ps(c);m.payload=s,a!=null&&(m.callback=a),s=Ls(i,m,c),s!==null&&(Pi(s,i,c),Eu(s,i,c))},enqueueReplaceState:function(i,s,a){i=i._reactInternals;var c=Vi(),m=Ps(c);m.tag=1,m.payload=s,a!=null&&(m.callback=a),s=Ls(i,m,c),s!==null&&(Pi(s,i,c),Eu(s,i,c))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var a=Vi(),c=Ps(a);c.tag=2,s!=null&&(c.callback=s),s=Ls(i,c,a),s!==null&&(Pi(s,i,a),Eu(s,i,a))}};function j0(i,s,a,c,m,y,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,y,S):s.prototype&&s.prototype.isPureReactComponent?!cu(a,c)||!cu(m,y):!0}function H0(i,s,a,c){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==i&&rp.enqueueReplaceState(s,s.state,null)}function ea(i,s){var a=s;if("ref"in s){a={};for(var c in s)c!=="ref"&&(a[c]=s[c])}if(i=i.defaultProps){a===s&&(a=g({},a));for(var m in i)a[m]===void 0&&(a[m]=i[m])}return a}var qf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function F0(i){qf(i)}function q0(i){console.error(i)}function $0(i){qf(i)}function $f(i,s){try{var a=i.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function G0(i,s,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function sp(i,s,a){return a=Ps(a),a.tag=3,a.payload={element:null},a.callback=function(){$f(i,s)},a}function Y0(i){return i=Ps(i),i.tag=3,i}function K0(i,s,a,c){var m=a.type.getDerivedStateFromError;if(typeof m=="function"){var y=c.value;i.payload=function(){return m(y)},i.callback=function(){G0(s,a,c)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){G0(s,a,c),typeof m!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var O=c.stack;this.componentDidCatch(c.value,{componentStack:O!==null?O:""})})}function $I(i,s,a,c,m){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=a.alternate,s!==null&&pu(s,a,m,!0),a=tr.current,a!==null){switch(a.tag){case 13:return Pr===null?Cp():a.alternate===null&&Jt===0&&(Jt=3),a.flags&=-257,a.flags|=65536,a.lanes=m,c===km?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([c]):s.add(c),Dp(i,c,m)),!1;case 22:return a.flags|=65536,c===km?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([c]):a.add(c)),Dp(i,c,m)),!1}throw Error(r(435,a.tag))}return Dp(i,c,m),Cp(),!1}if(ht)return s=tr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,c!==xm&&(i=Error(r(422),{cause:c}),mu(Wi(i,a)))):(c!==xm&&(s=Error(r(423),{cause:c}),mu(Wi(s,a))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,c=Wi(c,a),m=sp(i.stateNode,c,m),Lm(i,m),Jt!==4&&(Jt=2)),!1;var y=Error(r(520),{cause:c});if(y=Wi(y,a),Vu===null?Vu=[y]:Vu.push(y),Jt!==4&&(Jt=2),s===null)return!0;c=Wi(c,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,i=m&-m,a.lanes|=i,i=sp(a.stateNode,c,i),Lm(a,i),!1;case 1:if(s=a.type,y=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Gs===null||!Gs.has(y))))return a.flags|=65536,m&=-m,a.lanes|=m,m=Y0(m),K0(m,i,a,c),Lm(a,m),!1}a=a.return}while(a!==null);return!1}var X0=Error(r(461)),Mn=!1;function qn(i,s,a,c){s.child=i===null?U0(s,null,a,c):Ka(s,i.child,a,c)}function Q0(i,s,a,c,m){a=a.render;var y=s.ref;if("ref"in c){var S={};for(var O in c)O!=="ref"&&(S[O]=c[O])}else S=c;return Wo(s),c=Hm(i,s,a,S,y,m),O=Fm(),i!==null&&!Mn?(qm(i,s,m),cs(i,s,m)):(ht&&O&&Am(s),s.flags|=1,qn(i,s,c,m),s.child)}function W0(i,s,a,c,m){if(i===null){var y=a.type;return typeof y=="function"&&!bm(y)&&y.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=y,Z0(i,s,y,c,m)):(i=Tf(a.type,null,c,s,s.mode,m),i.ref=s.ref,i.return=s,s.child=i)}if(y=i.child,!dp(i,m)){var S=y.memoizedProps;if(a=a.compare,a=a!==null?a:cu,a(S,c)&&i.ref===s.ref)return cs(i,s,m)}return s.flags|=1,i=is(y,c),i.ref=s.ref,i.return=s,s.child=i}function Z0(i,s,a,c,m){if(i!==null){var y=i.memoizedProps;if(cu(y,c)&&i.ref===s.ref)if(Mn=!1,s.pendingProps=c=y,dp(i,m))(i.flags&131072)!==0&&(Mn=!0);else return s.lanes=i.lanes,cs(i,s,m)}return op(i,s,a,c,m)}function J0(i,s,a){var c=s.pendingProps,m=c.children,y=i!==null?i.memoizedState:null;if(c.mode==="hidden"){if((s.flags&128)!==0){if(c=y!==null?y.baseLanes|a:a,i!==null){for(m=s.child=i.child,y=0;m!==null;)y=y|m.lanes|m.childLanes,m=m.sibling;s.childLanes=y&~c}else s.childLanes=0,s.child=null;return eE(i,s,c,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Cf(s,y!==null?y.cachePool:null),y!==null?Z_(s,y):Um(),B0(s);else return s.lanes=s.childLanes=536870912,eE(i,s,y!==null?y.baseLanes|a:a,a)}else y!==null?(Cf(s,y.cachePool),Z_(s,y),Bs(),s.memoizedState=null):(i!==null&&Cf(s,null),Um(),Bs());return qn(i,s,m,a),s.child}function eE(i,s,a,c){var m=Mm();return m=m===null?null:{parent:En._currentValue,pool:m},s.memoizedState={baseLanes:a,cachePool:m},i!==null&&Cf(s,null),Um(),B0(s),i!==null&&pu(i,s,c,!0),null}function Gf(i,s){var a=s.ref;if(a===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(i===null||i.ref!==a)&&(s.flags|=4194816)}}function op(i,s,a,c,m){return Wo(s),a=Hm(i,s,a,c,void 0,m),c=Fm(),i!==null&&!Mn?(qm(i,s,m),cs(i,s,m)):(ht&&c&&Am(s),s.flags|=1,qn(i,s,a,m),s.child)}function tE(i,s,a,c,m,y){return Wo(s),s.updateQueue=null,a=e0(s,c,a,m),J_(i),c=Fm(),i!==null&&!Mn?(qm(i,s,y),cs(i,s,y)):(ht&&c&&Am(s),s.flags|=1,qn(i,s,a,y),s.child)}function nE(i,s,a,c,m){if(Wo(s),s.stateNode===null){var y=za,S=a.contextType;typeof S=="object"&&S!==null&&(y=Zn(S)),y=new a(c,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=rp,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=c,y.state=s.memoizedState,y.refs={},Vm(s),S=a.contextType,y.context=typeof S=="object"&&S!==null?Zn(S):za,y.state=s.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(ip(s,a,S,c),y.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(S=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),S!==y.state&&rp.enqueueReplaceState(y,y.state,null),bu(s,c,y,m),wu(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(i===null){y=s.stateNode;var O=s.memoizedProps,$=ea(a,O);y.props=$;var oe=y.context,de=a.contextType;S=za,typeof de=="object"&&de!==null&&(S=Zn(de));var pe=a.getDerivedStateFromProps;de=typeof pe=="function"||typeof y.getSnapshotBeforeUpdate=="function",O=s.pendingProps!==O,de||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(O||oe!==S)&&H0(s,y,c,S),Vs=!1;var ae=s.memoizedState;y.state=ae,bu(s,c,y,m),wu(),oe=s.memoizedState,O||ae!==oe||Vs?(typeof pe=="function"&&(ip(s,a,pe,c),oe=s.memoizedState),($=Vs||j0(s,a,$,c,ae,oe,S))?(de||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=oe),y.props=c,y.state=oe,y.context=S,c=$):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{y=s.stateNode,Pm(i,s),S=s.memoizedProps,de=ea(a,S),y.props=de,pe=s.pendingProps,ae=y.context,oe=a.contextType,$=za,typeof oe=="object"&&oe!==null&&($=Zn(oe)),O=a.getDerivedStateFromProps,(oe=typeof O=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S!==pe||ae!==$)&&H0(s,y,c,$),Vs=!1,ae=s.memoizedState,y.state=ae,bu(s,c,y,m),wu();var le=s.memoizedState;S!==pe||ae!==le||Vs||i!==null&&i.dependencies!==null&&xf(i.dependencies)?(typeof O=="function"&&(ip(s,a,O,c),le=s.memoizedState),(de=Vs||j0(s,a,de,c,ae,le,$)||i!==null&&i.dependencies!==null&&xf(i.dependencies))?(oe||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,le,$),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,le,$)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||S===i.memoizedProps&&ae===i.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&ae===i.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=le),y.props=c,y.state=le,y.context=$,c=de):(typeof y.componentDidUpdate!="function"||S===i.memoizedProps&&ae===i.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&ae===i.memoizedState||(s.flags|=1024),c=!1)}return y=c,Gf(i,s),c=(s.flags&128)!==0,y||c?(y=s.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,i!==null&&c?(s.child=Ka(s,i.child,null,m),s.child=Ka(s,null,a,m)):qn(i,s,a,m),s.memoizedState=y.state,i=s.child):i=cs(i,s,m),i}function iE(i,s,a,c){return du(),s.flags|=256,qn(i,s,a,c),s.child}var ap={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function lp(i){return{baseLanes:i,cachePool:q_()}}function up(i,s,a){return i=i!==null?i.childLanes&~a:0,s&&(i|=nr),i}function rE(i,s,a){var c=s.pendingProps,m=!1,y=(s.flags&128)!==0,S;if((S=y)||(S=i!==null&&i.memoizedState===null?!1:(wn.current&2)!==0),S&&(m=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,i===null){if(ht){if(m?Us(s):Bs(),ht){var O=Zt,$;if($=O){e:{for($=O,O=Vr;$.nodeType!==8;){if(!O){O=null;break e}if($=gr($.nextSibling),$===null){O=null;break e}}O=$}O!==null?(s.memoizedState={dehydrated:O,treeContext:Go!==null?{id:rs,overflow:ss}:null,retryLane:536870912,hydrationErrors:null},$=Di(18,null,null,0),$.stateNode=O,$.return=s,s.child=$,gi=s,Zt=null,$=!0):$=!1}$||Xo(s)}if(O=s.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return Gp(O)?s.lanes=32:s.lanes=536870912,null;us(s)}return O=c.children,c=c.fallback,m?(Bs(),m=s.mode,O=Yf({mode:"hidden",children:O},m),c=$o(c,m,a,null),O.return=s,c.return=s,O.sibling=c,s.child=O,m=s.child,m.memoizedState=lp(a),m.childLanes=up(i,S,a),s.memoizedState=ap,c):(Us(s),cp(s,O))}if($=i.memoizedState,$!==null&&(O=$.dehydrated,O!==null)){if(y)s.flags&256?(Us(s),s.flags&=-257,s=fp(i,s,a)):s.memoizedState!==null?(Bs(),s.child=i.child,s.flags|=128,s=null):(Bs(),m=c.fallback,O=s.mode,c=Yf({mode:"visible",children:c.children},O),m=$o(m,O,a,null),m.flags|=2,c.return=s,m.return=s,c.sibling=m,s.child=c,Ka(s,i.child,null,a),c=s.child,c.memoizedState=lp(a),c.childLanes=up(i,S,a),s.memoizedState=ap,s=m);else if(Us(s),Gp(O)){if(S=O.nextSibling&&O.nextSibling.dataset,S)var oe=S.dgst;S=oe,c=Error(r(419)),c.stack="",c.digest=S,mu({value:c,source:null,stack:null}),s=fp(i,s,a)}else if(Mn||pu(i,s,a,!1),S=(a&i.childLanes)!==0,Mn||S){if(S=Ot,S!==null&&(c=a&-a,c=(c&42)!==0?1:xi(c),c=(c&(S.suspendedLanes|a))!==0?0:c,c!==0&&c!==$.retryLane))throw $.retryLane=c,La(i,c),Pi(S,i,c),X0;O.data==="$?"||Cp(),s=fp(i,s,a)}else O.data==="$?"?(s.flags|=192,s.child=i.child,s=null):(i=$.treeContext,Zt=gr(O.nextSibling),gi=s,ht=!0,Ko=null,Vr=!1,i!==null&&(Ji[er++]=rs,Ji[er++]=ss,Ji[er++]=Go,rs=i.id,ss=i.overflow,Go=s),s=cp(s,c.children),s.flags|=4096);return s}return m?(Bs(),m=c.fallback,O=s.mode,$=i.child,oe=$.sibling,c=is($,{mode:"hidden",children:c.children}),c.subtreeFlags=$.subtreeFlags&65011712,oe!==null?m=is(oe,m):(m=$o(m,O,a,null),m.flags|=2),m.return=s,c.return=s,c.sibling=m,s.child=c,c=m,m=s.child,O=i.child.memoizedState,O===null?O=lp(a):($=O.cachePool,$!==null?(oe=En._currentValue,$=$.parent!==oe?{parent:oe,pool:oe}:$):$=q_(),O={baseLanes:O.baseLanes|a,cachePool:$}),m.memoizedState=O,m.childLanes=up(i,S,a),s.memoizedState=ap,c):(Us(s),a=i.child,i=a.sibling,a=is(a,{mode:"visible",children:c.children}),a.return=s,a.sibling=null,i!==null&&(S=s.deletions,S===null?(s.deletions=[i],s.flags|=16):S.push(i)),s.child=a,s.memoizedState=null,a)}function cp(i,s){return s=Yf({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Yf(i,s){return i=Di(22,i,null,s),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function fp(i,s,a){return Ka(s,i.child,null,a),i=cp(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function sE(i,s,a){i.lanes|=s;var c=i.alternate;c!==null&&(c.lanes|=s),Cm(i.return,s,a)}function hp(i,s,a,c,m){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:m}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=c,y.tail=a,y.tailMode=m)}function oE(i,s,a){var c=s.pendingProps,m=c.revealOrder,y=c.tail;if(qn(i,s,c.children,a),c=wn.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&sE(i,a,s);else if(i.tag===19)sE(i,a,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}c&=1}switch(ne(wn,c),m){case"forwards":for(a=s.child,m=null;a!==null;)i=a.alternate,i!==null&&Ff(i)===null&&(m=a),a=a.sibling;a=m,a===null?(m=s.child,s.child=null):(m=a.sibling,a.sibling=null),hp(s,!1,m,a,y);break;case"backwards":for(a=null,m=s.child,s.child=null;m!==null;){if(i=m.alternate,i!==null&&Ff(i)===null){s.child=m;break}i=m.sibling,m.sibling=a,a=m,m=i}hp(s,!0,a,null,y);break;case"together":hp(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function cs(i,s,a){if(i!==null&&(s.dependencies=i.dependencies),$s|=s.lanes,(a&s.childLanes)===0)if(i!==null){if(pu(i,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,a=is(i,i.pendingProps),s.child=a,a.return=s;i.sibling!==null;)i=i.sibling,a=a.sibling=is(i,i.pendingProps),a.return=s;a.sibling=null}return s.child}function dp(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&xf(i)))}function GI(i,s,a){switch(s.tag){case 3:ve(s,s.stateNode.containerInfo),ks(s,En,i.memoizedState.cache),du();break;case 27:case 5:Ce(s);break;case 4:ve(s,s.stateNode.containerInfo);break;case 10:ks(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Us(s),s.flags|=128,null):(a&s.child.childLanes)!==0?rE(i,s,a):(Us(s),i=cs(i,s,a),i!==null?i.sibling:null);Us(s);break;case 19:var m=(i.flags&128)!==0;if(c=(a&s.childLanes)!==0,c||(pu(i,s,a,!1),c=(a&s.childLanes)!==0),m){if(c)return oE(i,s,a);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ne(wn,wn.current),c)break;return null;case 22:case 23:return s.lanes=0,J0(i,s,a);case 24:ks(s,En,i.memoizedState.cache)}return cs(i,s,a)}function aE(i,s,a){if(i!==null)if(i.memoizedProps!==s.pendingProps)Mn=!0;else{if(!dp(i,a)&&(s.flags&128)===0)return Mn=!1,GI(i,s,a);Mn=(i.flags&131072)!==0}else Mn=!1,ht&&(s.flags&1048576)!==0&&L_(s,Rf,s.index);switch(s.lanes=0,s.tag){case 16:e:{i=s.pendingProps;var c=s.elementType,m=c._init;if(c=m(c._payload),s.type=c,typeof c=="function")bm(c)?(i=ea(c,i),s.tag=1,s=nE(null,s,c,i,a)):(s.tag=0,s=op(null,s,c,i,a));else{if(c!=null){if(m=c.$$typeof,m===j){s.tag=11,s=Q0(null,s,c,i,a);break e}else if(m===R){s.tag=14,s=W0(null,s,c,i,a);break e}}throw s=k(c)||c,Error(r(306,s,""))}}return s;case 0:return op(i,s,s.type,s.pendingProps,a);case 1:return c=s.type,m=ea(c,s.pendingProps),nE(i,s,c,m,a);case 3:e:{if(ve(s,s.stateNode.containerInfo),i===null)throw Error(r(387));c=s.pendingProps;var y=s.memoizedState;m=y.element,Pm(i,s),bu(s,c,null,a);var S=s.memoizedState;if(c=S.cache,ks(s,En,c),c!==y.cache&&Nm(s,[En],a,!0),wu(),c=S.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=iE(i,s,c,a);break e}else if(c!==m){m=Wi(Error(r(424)),s),mu(m),s=iE(i,s,c,a);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Zt=gr(i.firstChild),gi=s,ht=!0,Ko=null,Vr=!0,a=U0(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(du(),c===m){s=cs(i,s,a);break e}qn(i,s,c,a)}s=s.child}return s;case 26:return Gf(i,s),i===null?(a=fw(s.type,null,s.pendingProps,null))?s.memoizedState=a:ht||(a=s.type,i=s.pendingProps,c=ah(we.current).createElement(a),c[gt]=s,c[Ut]=i,Gn(c,a,i),Q(c),s.stateNode=c):s.memoizedState=fw(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Ce(s),i===null&&ht&&(c=s.stateNode=lw(s.type,s.pendingProps,we.current),gi=s,Vr=!0,m=Zt,Xs(s.type)?(Yp=m,Zt=gr(c.firstChild)):Zt=m),qn(i,s,s.pendingProps.children,a),Gf(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&ht&&((m=c=Zt)&&(c=EC(c,s.type,s.pendingProps,Vr),c!==null?(s.stateNode=c,gi=s,Zt=gr(c.firstChild),Vr=!1,m=!0):m=!1),m||Xo(s)),Ce(s),m=s.type,y=s.pendingProps,S=i!==null?i.memoizedProps:null,c=y.children,Fp(m,y)?c=null:S!==null&&Fp(m,S)&&(s.flags|=32),s.memoizedState!==null&&(m=Hm(i,s,zI,null,null,a),qu._currentValue=m),Gf(i,s),qn(i,s,c,a),s.child;case 6:return i===null&&ht&&((i=a=Zt)&&(a=wC(a,s.pendingProps,Vr),a!==null?(s.stateNode=a,gi=s,Zt=null,i=!0):i=!1),i||Xo(s)),null;case 13:return rE(i,s,a);case 4:return ve(s,s.stateNode.containerInfo),c=s.pendingProps,i===null?s.child=Ka(s,null,c,a):qn(i,s,c,a),s.child;case 11:return Q0(i,s,s.type,s.pendingProps,a);case 7:return qn(i,s,s.pendingProps,a),s.child;case 8:return qn(i,s,s.pendingProps.children,a),s.child;case 12:return qn(i,s,s.pendingProps.children,a),s.child;case 10:return c=s.pendingProps,ks(s,s.type,c.value),qn(i,s,c.children,a),s.child;case 9:return m=s.type._context,c=s.pendingProps.children,Wo(s),m=Zn(m),c=c(m),s.flags|=1,qn(i,s,c,a),s.child;case 14:return W0(i,s,s.type,s.pendingProps,a);case 15:return Z0(i,s,s.type,s.pendingProps,a);case 19:return oE(i,s,a);case 31:return c=s.pendingProps,a=s.mode,c={mode:c.mode,children:c.children},i===null?(a=Yf(c,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=is(i.child,c),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return J0(i,s,a);case 24:return Wo(s),c=Zn(En),i===null?(m=Mm(),m===null&&(m=Ot,y=Dm(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=a),m=y),s.memoizedState={parent:c,cache:m},Vm(s),ks(s,En,m)):((i.lanes&a)!==0&&(Pm(i,s),bu(s,null,null,a),wu()),m=i.memoizedState,y=s.memoizedState,m.parent!==c?(m={parent:c,cache:c},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),ks(s,En,c)):(c=y.cache,ks(s,En,c),c!==m.cache&&Nm(s,[En],a,!0))),qn(i,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function fs(i){i.flags|=4}function lE(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!gw(s)){if(s=tr.current,s!==null&&((at&4194048)===at?Pr!==null:(at&62914560)!==at&&(at&536870912)===0||s!==Pr))throw _u=km,$_;i.flags|=8192}}function Kf(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Qn():536870912,i.lanes|=s,Za|=s)}function Cu(i,s){if(!ht)switch(i.tailMode){case"hidden":s=i.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function qt(i){var s=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(s)for(var m=i.child;m!==null;)a|=m.lanes|m.childLanes,c|=m.subtreeFlags&65011712,c|=m.flags&65011712,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)a|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=c,i.childLanes=a,s}function YI(i,s,a){var c=s.pendingProps;switch(Rm(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(s),null;case 1:return qt(s),null;case 3:return a=s.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),as(En),Se(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(hu(s)?fs(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,B_())),qt(s),null;case 26:return a=s.memoizedState,i===null?(fs(s),a!==null?(qt(s),lE(s,a)):(qt(s),s.flags&=-16777217)):a?a!==i.memoizedState?(fs(s),qt(s),lE(s,a)):(qt(s),s.flags&=-16777217):(i.memoizedProps!==c&&fs(s),qt(s),s.flags&=-16777217),null;case 27:je(s),a=we.current;var m=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==c&&fs(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return qt(s),null}i=he.current,hu(s)?z_(s):(i=lw(m,c,a),s.stateNode=i,fs(s))}return qt(s),null;case 5:if(je(s),a=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==c&&fs(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return qt(s),null}if(i=he.current,hu(s))z_(s);else{switch(m=ah(we.current),i){case 1:i=m.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=m.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=m.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=m.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":i=m.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof c.is=="string"?m.createElement("select",{is:c.is}):m.createElement("select"),c.multiple?i.multiple=!0:c.size&&(i.size=c.size);break;default:i=typeof c.is=="string"?m.createElement(a,{is:c.is}):m.createElement(a)}}i[gt]=s,i[Ut]=c;e:for(m=s.child;m!==null;){if(m.tag===5||m.tag===6)i.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===s)break e;for(;m.sibling===null;){if(m.return===null||m.return===s)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}s.stateNode=i;e:switch(Gn(i,a,c),a){case"button":case"input":case"select":case"textarea":i=!!c.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&fs(s)}}return qt(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==c&&fs(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(r(166));if(i=we.current,hu(s)){if(i=s.stateNode,a=s.memoizedProps,c=null,m=gi,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}i[gt]=s,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||tw(i.nodeValue,a)),i||Xo(s)}else i=ah(i).createTextNode(c),i[gt]=s,s.stateNode=i}return qt(s),null;case 13:if(c=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=hu(s),c!==null&&c.dehydrated!==null){if(i===null){if(!m)throw Error(r(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[gt]=s}else du(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;qt(s),m=!1}else m=B_(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(us(s),s):(us(s),null)}if(us(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=c!==null,i=i!==null&&i.memoizedState!==null,a){c=s.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool);var y=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==m&&(c.flags|=2048)}return a!==i&&a&&(s.child.flags|=8192),Kf(s,s.updateQueue),qt(s),null;case 4:return Se(),i===null&&zp(s.stateNode.containerInfo),qt(s),null;case 10:return as(s.type),qt(s),null;case 19:if(ie(wn),m=s.memoizedState,m===null)return qt(s),null;if(c=(s.flags&128)!==0,y=m.rendering,y===null)if(c)Cu(m,!1);else{if(Jt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(y=Ff(i),y!==null){for(s.flags|=128,Cu(m,!1),i=y.updateQueue,s.updateQueue=i,Kf(s,i),s.subtreeFlags=0,i=a,a=s.child;a!==null;)P_(a,i),a=a.sibling;return ne(wn,wn.current&1|2),s.child}i=i.sibling}m.tail!==null&&Pe()>Wf&&(s.flags|=128,c=!0,Cu(m,!1),s.lanes=4194304)}else{if(!c)if(i=Ff(y),i!==null){if(s.flags|=128,c=!0,i=i.updateQueue,s.updateQueue=i,Kf(s,i),Cu(m,!0),m.tail===null&&m.tailMode==="hidden"&&!y.alternate&&!ht)return qt(s),null}else 2*Pe()-m.renderingStartTime>Wf&&a!==536870912&&(s.flags|=128,c=!0,Cu(m,!1),s.lanes=4194304);m.isBackwards?(y.sibling=s.child,s.child=y):(i=m.last,i!==null?i.sibling=y:s.child=y,m.last=y)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=Pe(),s.sibling=null,i=wn.current,ne(wn,c?i&1|2:i&1),s):(qt(s),null);case 22:case 23:return us(s),Bm(),c=s.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(a&536870912)!==0&&(s.flags&128)===0&&(qt(s),s.subtreeFlags&6&&(s.flags|=8192)):qt(s),a=s.updateQueue,a!==null&&Kf(s,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==a&&(s.flags|=2048),i!==null&&ie(Zo),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),as(En),qt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function KI(i,s){switch(Rm(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return as(En),Se(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return je(s),null;case 13:if(us(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));du()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return ie(wn),null;case 4:return Se(),null;case 10:return as(s.type),null;case 22:case 23:return us(s),Bm(),i!==null&&ie(Zo),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return as(En),null;case 25:return null;default:return null}}function uE(i,s){switch(Rm(s),s.tag){case 3:as(En),Se();break;case 26:case 27:case 5:je(s);break;case 4:Se();break;case 13:us(s);break;case 19:ie(wn);break;case 10:as(s.type);break;case 22:case 23:us(s),Bm(),i!==null&&ie(Zo);break;case 24:as(En)}}function Nu(i,s){try{var a=s.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var m=c.next;a=m;do{if((a.tag&i)===i){c=void 0;var y=a.create,S=a.inst;c=y(),S.destroy=c}a=a.next}while(a!==m)}}catch(O){Nt(s,s.return,O)}}function js(i,s,a){try{var c=s.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var y=m.next;c=y;do{if((c.tag&i)===i){var S=c.inst,O=S.destroy;if(O!==void 0){S.destroy=void 0,m=s;var $=a,oe=O;try{oe()}catch(de){Nt(m,$,de)}}}c=c.next}while(c!==y)}}catch(de){Nt(s,s.return,de)}}function cE(i){var s=i.updateQueue;if(s!==null){var a=i.stateNode;try{W_(s,a)}catch(c){Nt(i,i.return,c)}}}function fE(i,s,a){a.props=ea(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){Nt(i,s,c)}}function Du(i,s){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(m){Nt(i,s,m)}}function Lr(i,s){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(m){Nt(i,s,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(m){Nt(i,s,m)}else a.current=null}function hE(i){var s=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(m){Nt(i,i.return,m)}}function mp(i,s,a){try{var c=i.stateNode;pC(c,i.type,a,s),c[Ut]=s}catch(m){Nt(i,i.return,m)}}function dE(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Xs(i.type)||i.tag===4}function pp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||dE(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Xs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function gp(i,s,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(i),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=oh));else if(c!==4&&(c===27&&Xs(i.type)&&(a=i.stateNode,s=null),i=i.child,i!==null))for(gp(i,s,a),i=i.sibling;i!==null;)gp(i,s,a),i=i.sibling}function Xf(i,s,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?a.insertBefore(i,s):a.appendChild(i);else if(c!==4&&(c===27&&Xs(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(Xf(i,s,a),i=i.sibling;i!==null;)Xf(i,s,a),i=i.sibling}function mE(i){var s=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);Gn(s,c,a),s[gt]=i,s[Ut]=a}catch(y){Nt(i,i.return,y)}}var hs=!1,sn=!1,yp=!1,pE=typeof WeakSet=="function"?WeakSet:Set,kn=null;function XI(i,s){if(i=i.containerInfo,jp=dh,i=R_(i),pm(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var m=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var S=0,O=-1,$=-1,oe=0,de=0,pe=i,ae=null;t:for(;;){for(var le;pe!==a||m!==0&&pe.nodeType!==3||(O=S+m),pe!==y||c!==0&&pe.nodeType!==3||($=S+c),pe.nodeType===3&&(S+=pe.nodeValue.length),(le=pe.firstChild)!==null;)ae=pe,pe=le;for(;;){if(pe===i)break t;if(ae===a&&++oe===m&&(O=S),ae===y&&++de===c&&($=S),(le=pe.nextSibling)!==null)break;pe=ae,ae=pe.parentNode}pe=le}a=O===-1||$===-1?null:{start:O,end:$}}else a=null}a=a||{start:0,end:0}}else a=null;for(Hp={focusedElem:i,selectionRange:a},dh=!1,kn=s;kn!==null;)if(s=kn,i=s.child,(s.subtreeFlags&1024)!==0&&i!==null)i.return=s,kn=i;else for(;kn!==null;){switch(s=kn,y=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,a=s,m=y.memoizedProps,y=y.memoizedState,c=a.stateNode;try{var He=ea(a.type,m,a.elementType===a.type);i=c.getSnapshotBeforeUpdate(He,y),c.__reactInternalSnapshotBeforeUpdate=i}catch(Le){Nt(a,a.return,Le)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,a=i.nodeType,a===9)$p(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":$p(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,kn=i;break}kn=s.return}}function gE(i,s,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Hs(i,a),c&4&&Nu(5,a);break;case 1:if(Hs(i,a),c&4)if(i=a.stateNode,s===null)try{i.componentDidMount()}catch(S){Nt(a,a.return,S)}else{var m=ea(a.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(m,s,i.__reactInternalSnapshotBeforeUpdate)}catch(S){Nt(a,a.return,S)}}c&64&&cE(a),c&512&&Du(a,a.return);break;case 3:if(Hs(i,a),c&64&&(i=a.updateQueue,i!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{W_(i,s)}catch(S){Nt(a,a.return,S)}}break;case 27:s===null&&c&4&&mE(a);case 26:case 5:Hs(i,a),s===null&&c&4&&hE(a),c&512&&Du(a,a.return);break;case 12:Hs(i,a);break;case 13:Hs(i,a),c&4&&_E(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=rC.bind(null,a),bC(i,a))));break;case 22:if(c=a.memoizedState!==null||hs,!c){s=s!==null&&s.memoizedState!==null||sn,m=hs;var y=sn;hs=c,(sn=s)&&!y?Fs(i,a,(a.subtreeFlags&8772)!==0):Hs(i,a),hs=m,sn=y}break;case 30:break;default:Hs(i,a)}}function yE(i){var s=i.alternate;s!==null&&(i.alternate=null,yE(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Ci(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var jt=null,bi=!1;function ds(i,s,a){for(a=a.child;a!==null;)vE(i,s,a),a=a.sibling}function vE(i,s,a){if(Fe&&typeof Fe.onCommitFiberUnmount=="function")try{Fe.onCommitFiberUnmount(xe,a)}catch{}switch(a.tag){case 26:sn||Lr(a,s),ds(i,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:sn||Lr(a,s);var c=jt,m=bi;Xs(a.type)&&(jt=a.stateNode,bi=!1),ds(i,s,a),Bu(a.stateNode),jt=c,bi=m;break;case 5:sn||Lr(a,s);case 6:if(c=jt,m=bi,jt=null,ds(i,s,a),jt=c,bi=m,jt!==null)if(bi)try{(jt.nodeType===9?jt.body:jt.nodeName==="HTML"?jt.ownerDocument.body:jt).removeChild(a.stateNode)}catch(y){Nt(a,s,y)}else try{jt.removeChild(a.stateNode)}catch(y){Nt(a,s,y)}break;case 18:jt!==null&&(bi?(i=jt,ow(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Ku(i)):ow(jt,a.stateNode));break;case 4:c=jt,m=bi,jt=a.stateNode.containerInfo,bi=!0,ds(i,s,a),jt=c,bi=m;break;case 0:case 11:case 14:case 15:sn||js(2,a,s),sn||js(4,a,s),ds(i,s,a);break;case 1:sn||(Lr(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"&&fE(a,s,c)),ds(i,s,a);break;case 21:ds(i,s,a);break;case 22:sn=(c=sn)||a.memoizedState!==null,ds(i,s,a),sn=c;break;default:ds(i,s,a)}}function _E(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ku(i)}catch(a){Nt(s,s.return,a)}}function QI(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new pE),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new pE),s;default:throw Error(r(435,i.tag))}}function vp(i,s){var a=QI(i);s.forEach(function(c){var m=sC.bind(null,i,c);a.has(c)||(a.add(c),c.then(m,m))})}function Oi(i,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var m=a[c],y=i,S=s,O=S;e:for(;O!==null;){switch(O.tag){case 27:if(Xs(O.type)){jt=O.stateNode,bi=!1;break e}break;case 5:jt=O.stateNode,bi=!1;break e;case 3:case 4:jt=O.stateNode.containerInfo,bi=!0;break e}O=O.return}if(jt===null)throw Error(r(160));vE(y,S,m),jt=null,bi=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)EE(s,i),s=s.sibling}var pr=null;function EE(i,s){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Oi(s,i),Mi(i),c&4&&(js(3,i,i.return),Nu(3,i),js(5,i,i.return));break;case 1:Oi(s,i),Mi(i),c&512&&(sn||a===null||Lr(a,a.return)),c&64&&hs&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var m=pr;if(Oi(s,i),Mi(i),c&512&&(sn||a===null||Lr(a,a.return)),c&4){var y=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,m=m.ownerDocument||m;t:switch(c){case"title":y=m.getElementsByTagName("title")[0],(!y||y[qi]||y[gt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(c),m.head.insertBefore(y,m.querySelector("head > title"))),Gn(y,c,a),y[gt]=i,Q(y),c=y;break e;case"link":var S=mw("link","href",m).get(c+(a.href||""));if(S){for(var O=0;O<S.length;O++)if(y=S[O],y.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&y.getAttribute("rel")===(a.rel==null?null:a.rel)&&y.getAttribute("title")===(a.title==null?null:a.title)&&y.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(O,1);break t}}y=m.createElement(c),Gn(y,c,a),m.head.appendChild(y);break;case"meta":if(S=mw("meta","content",m).get(c+(a.content||""))){for(O=0;O<S.length;O++)if(y=S[O],y.getAttribute("content")===(a.content==null?null:""+a.content)&&y.getAttribute("name")===(a.name==null?null:a.name)&&y.getAttribute("property")===(a.property==null?null:a.property)&&y.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&y.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(O,1);break t}}y=m.createElement(c),Gn(y,c,a),m.head.appendChild(y);break;default:throw Error(r(468,c))}y[gt]=i,Q(y),c=y}i.stateNode=c}else pw(m,i.type,i.stateNode);else i.stateNode=dw(m,c,i.memoizedProps);else y!==c?(y===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):y.count--,c===null?pw(m,i.type,i.stateNode):dw(m,c,i.memoizedProps)):c===null&&i.stateNode!==null&&mp(i,i.memoizedProps,a.memoizedProps)}break;case 27:Oi(s,i),Mi(i),c&512&&(sn||a===null||Lr(a,a.return)),a!==null&&c&4&&mp(i,i.memoizedProps,a.memoizedProps);break;case 5:if(Oi(s,i),Mi(i),c&512&&(sn||a===null||Lr(a,a.return)),i.flags&32){m=i.stateNode;try{jn(m,"")}catch(le){Nt(i,i.return,le)}}c&4&&i.stateNode!=null&&(m=i.memoizedProps,mp(i,m,a!==null?a.memoizedProps:m)),c&1024&&(yp=!0);break;case 6:if(Oi(s,i),Mi(i),c&4){if(i.stateNode===null)throw Error(r(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(le){Nt(i,i.return,le)}}break;case 3:if(ch=null,m=pr,pr=lh(s.containerInfo),Oi(s,i),pr=m,Mi(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Ku(s.containerInfo)}catch(le){Nt(i,i.return,le)}yp&&(yp=!1,wE(i));break;case 4:c=pr,pr=lh(i.stateNode.containerInfo),Oi(s,i),Mi(i),pr=c;break;case 12:Oi(s,i),Mi(i);break;case 13:Oi(s,i),Mi(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Tp=Pe()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,vp(i,c)));break;case 22:m=i.memoizedState!==null;var $=a!==null&&a.memoizedState!==null,oe=hs,de=sn;if(hs=oe||m,sn=de||$,Oi(s,i),sn=de,hs=oe,Mi(i),c&8192)e:for(s=i.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(a===null||$||hs||sn||ta(i)),a=null,s=i;;){if(s.tag===5||s.tag===26){if(a===null){$=a=s;try{if(y=$.stateNode,m)S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{O=$.stateNode;var pe=$.memoizedProps.style,ae=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;O.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(le){Nt($,$.return,le)}}}else if(s.tag===6){if(a===null){$=s;try{$.stateNode.nodeValue=m?"":$.memoizedProps}catch(le){Nt($,$.return,le)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,vp(i,a))));break;case 19:Oi(s,i),Mi(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,vp(i,c)));break;case 30:break;case 21:break;default:Oi(s,i),Mi(i)}}function Mi(i){var s=i.flags;if(s&2){try{for(var a,c=i.return;c!==null;){if(dE(c)){a=c;break}c=c.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var m=a.stateNode,y=pp(i);Xf(i,y,m);break;case 5:var S=a.stateNode;a.flags&32&&(jn(S,""),a.flags&=-33);var O=pp(i);Xf(i,O,S);break;case 3:case 4:var $=a.stateNode.containerInfo,oe=pp(i);gp(i,oe,$);break;default:throw Error(r(161))}}catch(de){Nt(i,i.return,de)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function wE(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;wE(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Hs(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)gE(i,s.alternate,s),s=s.sibling}function ta(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:js(4,s,s.return),ta(s);break;case 1:Lr(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&fE(s,s.return,a),ta(s);break;case 27:Bu(s.stateNode);case 26:case 5:Lr(s,s.return),ta(s);break;case 22:s.memoizedState===null&&ta(s);break;case 30:ta(s);break;default:ta(s)}i=i.sibling}}function Fs(i,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,m=i,y=s,S=y.flags;switch(y.tag){case 0:case 11:case 15:Fs(m,y,a),Nu(4,y);break;case 1:if(Fs(m,y,a),c=y,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(oe){Nt(c,c.return,oe)}if(c=y,m=c.updateQueue,m!==null){var O=c.stateNode;try{var $=m.shared.hiddenCallbacks;if($!==null)for(m.shared.hiddenCallbacks=null,m=0;m<$.length;m++)Q_($[m],O)}catch(oe){Nt(c,c.return,oe)}}a&&S&64&&cE(y),Du(y,y.return);break;case 27:mE(y);case 26:case 5:Fs(m,y,a),a&&c===null&&S&4&&hE(y),Du(y,y.return);break;case 12:Fs(m,y,a);break;case 13:Fs(m,y,a),a&&S&4&&_E(m,y);break;case 22:y.memoizedState===null&&Fs(m,y,a),Du(y,y.return);break;case 30:break;default:Fs(m,y,a)}s=s.sibling}}function _p(i,s){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&gu(a))}function Ep(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&gu(i))}function zr(i,s,a,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)bE(i,s,a,c),s=s.sibling}function bE(i,s,a,c){var m=s.flags;switch(s.tag){case 0:case 11:case 15:zr(i,s,a,c),m&2048&&Nu(9,s);break;case 1:zr(i,s,a,c);break;case 3:zr(i,s,a,c),m&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&gu(i)));break;case 12:if(m&2048){zr(i,s,a,c),i=s.stateNode;try{var y=s.memoizedProps,S=y.id,O=y.onPostCommit;typeof O=="function"&&O(S,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch($){Nt(s,s.return,$)}}else zr(i,s,a,c);break;case 13:zr(i,s,a,c);break;case 23:break;case 22:y=s.stateNode,S=s.alternate,s.memoizedState!==null?y._visibility&2?zr(i,s,a,c):Ou(i,s):y._visibility&2?zr(i,s,a,c):(y._visibility|=2,Xa(i,s,a,c,(s.subtreeFlags&10256)!==0)),m&2048&&_p(S,s);break;case 24:zr(i,s,a,c),m&2048&&Ep(s.alternate,s);break;default:zr(i,s,a,c)}}function Xa(i,s,a,c,m){for(m=m&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var y=i,S=s,O=a,$=c,oe=S.flags;switch(S.tag){case 0:case 11:case 15:Xa(y,S,O,$,m),Nu(8,S);break;case 23:break;case 22:var de=S.stateNode;S.memoizedState!==null?de._visibility&2?Xa(y,S,O,$,m):Ou(y,S):(de._visibility|=2,Xa(y,S,O,$,m)),m&&oe&2048&&_p(S.alternate,S);break;case 24:Xa(y,S,O,$,m),m&&oe&2048&&Ep(S.alternate,S);break;default:Xa(y,S,O,$,m)}s=s.sibling}}function Ou(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=i,c=s,m=c.flags;switch(c.tag){case 22:Ou(a,c),m&2048&&_p(c.alternate,c);break;case 24:Ou(a,c),m&2048&&Ep(c.alternate,c);break;default:Ou(a,c)}s=s.sibling}}var Mu=8192;function Qa(i){if(i.subtreeFlags&Mu)for(i=i.child;i!==null;)SE(i),i=i.sibling}function SE(i){switch(i.tag){case 26:Qa(i),i.flags&Mu&&i.memoizedState!==null&&VC(pr,i.memoizedState,i.memoizedProps);break;case 5:Qa(i);break;case 3:case 4:var s=pr;pr=lh(i.stateNode.containerInfo),Qa(i),pr=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=Mu,Mu=16777216,Qa(i),Mu=s):Qa(i));break;default:Qa(i)}}function TE(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function ku(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];kn=c,RE(c,i)}TE(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)AE(i),i=i.sibling}function AE(i){switch(i.tag){case 0:case 11:case 15:ku(i),i.flags&2048&&js(9,i,i.return);break;case 3:ku(i);break;case 12:ku(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,Qf(i)):ku(i);break;default:ku(i)}}function Qf(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];kn=c,RE(c,i)}TE(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:js(8,s,s.return),Qf(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Qf(s));break;default:Qf(s)}i=i.sibling}}function RE(i,s){for(;kn!==null;){var a=kn;switch(a.tag){case 0:case 11:case 15:js(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:gu(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,kn=c;else e:for(a=i;kn!==null;){c=kn;var m=c.sibling,y=c.return;if(yE(c),c===a){kn=null;break e}if(m!==null){m.return=y,kn=m;break e}kn=y}}}var WI={getCacheForType:function(i){var s=Zn(En),a=s.data.get(i);return a===void 0&&(a=i(),s.data.set(i,a)),a}},ZI=typeof WeakMap=="function"?WeakMap:Map,St=0,Ot=null,Je=null,at=0,Tt=0,ki=null,qs=!1,Wa=!1,wp=!1,ms=0,Jt=0,$s=0,na=0,bp=0,nr=0,Za=0,Vu=null,Si=null,Sp=!1,Tp=0,Wf=1/0,Zf=null,Gs=null,$n=0,Ys=null,Ja=null,el=0,Ap=0,Rp=null,xE=null,Pu=0,xp=null;function Vi(){if((St&2)!==0&&at!==0)return at&-at;if(V.T!==null){var i=ja;return i!==0?i:kp()}return ai()}function IE(){nr===0&&(nr=(at&536870912)===0||ht?cr():536870912);var i=tr.current;return i!==null&&(i.flags|=32),nr}function Pi(i,s,a){(i===Ot&&(Tt===2||Tt===9)||i.cancelPendingCommit!==null)&&(tl(i,0),Ks(i,at,nr,!1)),oi(i,a),((St&2)===0||i!==Ot)&&(i===Ot&&((St&2)===0&&(na|=a),Jt===4&&Ks(i,at,nr,!1)),Ur(i))}function CE(i,s,a){if((St&6)!==0)throw Error(r(327));var c=!a&&(s&124)===0&&(s&i.expiredLanes)===0||an(i,s),m=c?tC(i,s):Np(i,s,!0),y=c;do{if(m===0){Wa&&!c&&Ks(i,s,0,!1);break}else{if(a=i.current.alternate,y&&!JI(a)){m=Np(i,s,!1),y=!1;continue}if(m===2){if(y=s,i.errorRecoveryDisabledLanes&y)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var O=i;m=Vu;var $=O.current.memoizedState.isDehydrated;if($&&(tl(O,S).flags|=256),S=Np(O,S,!1),S!==2){if(wp&&!$){O.errorRecoveryDisabledLanes|=y,na|=y,m=4;break e}y=Si,Si=m,y!==null&&(Si===null?Si=y:Si.push.apply(Si,y))}m=S}if(y=!1,m!==2)continue}}if(m===1){tl(i,0),Ks(i,s,0,!0);break}e:{switch(c=i,y=m,y){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Ks(c,s,nr,!qs);break e;case 2:Si=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(m=Tp+300-Pe(),10<m)){if(Ks(c,s,nr,!qs),Pt(c,0,!0)!==0)break e;c.timeoutHandle=rw(NE.bind(null,c,a,Si,Zf,Sp,s,nr,na,Za,qs,y,2,-0,0),m);break e}NE(c,a,Si,Zf,Sp,s,nr,na,Za,qs,y,0,-0,0)}}break}while(!0);Ur(i)}function NE(i,s,a,c,m,y,S,O,$,oe,de,pe,ae,le){if(i.timeoutHandle=-1,pe=s.subtreeFlags,(pe&8192||(pe&16785408)===16785408)&&(Fu={stylesheets:null,count:0,unsuspend:kC},SE(s),pe=PC(),pe!==null)){i.cancelPendingCommit=pe(LE.bind(null,i,s,y,a,c,m,S,O,$,de,1,ae,le)),Ks(i,y,S,!oe);return}LE(i,s,y,a,c,m,S,O,$)}function JI(i){for(var s=i;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var m=a[c],y=m.getSnapshot;m=m.value;try{if(!Ni(y(),m))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ks(i,s,a,c){s&=~bp,s&=~na,i.suspendedLanes|=s,i.pingedLanes&=~s,c&&(i.warmLanes|=s),c=i.expirationTimes;for(var m=s;0<m;){var y=31-Vt(m),S=1<<y;c[y]=-1,m&=~S}a!==0&&_i(i,a,s)}function Jf(){return(St&6)===0?(Lu(0),!1):!0}function Ip(){if(Je!==null){if(Tt===0)var i=Je.return;else i=Je,os=Qo=null,$m(i),Ya=null,xu=0,i=Je;for(;i!==null;)uE(i.alternate,i),i=i.return;Je=null}}function tl(i,s){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,yC(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),Ip(),Ot=i,Je=a=is(i.current,null),at=s,Tt=0,ki=null,qs=!1,Wa=an(i,s),wp=!1,Za=nr=bp=na=$s=Jt=0,Si=Vu=null,Sp=!1,(s&8)!==0&&(s|=s&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=s;0<c;){var m=31-Vt(c),y=1<<m;s|=i[m],c&=~y}return ms=s,wf(),a}function DE(i,s){Ke=null,V.H=Bf,s===vu||s===Nf?(s=K_(),Tt=3):s===$_?(s=K_(),Tt=4):Tt=s===X0?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,ki=s,Je===null&&(Jt=1,$f(i,Wi(s,i.current)))}function OE(){var i=V.H;return V.H=Bf,i===null?Bf:i}function ME(){var i=V.A;return V.A=WI,i}function Cp(){Jt=4,qs||(at&4194048)!==at&&tr.current!==null||(Wa=!0),($s&134217727)===0&&(na&134217727)===0||Ot===null||Ks(Ot,at,nr,!1)}function Np(i,s,a){var c=St;St|=2;var m=OE(),y=ME();(Ot!==i||at!==s)&&(Zf=null,tl(i,s)),s=!1;var S=Jt;e:do try{if(Tt!==0&&Je!==null){var O=Je,$=ki;switch(Tt){case 8:Ip(),S=6;break e;case 3:case 2:case 9:case 6:tr.current===null&&(s=!0);var oe=Tt;if(Tt=0,ki=null,nl(i,O,$,oe),a&&Wa){S=0;break e}break;default:oe=Tt,Tt=0,ki=null,nl(i,O,$,oe)}}eC(),S=Jt;break}catch(de){DE(i,de)}while(!0);return s&&i.shellSuspendCounter++,os=Qo=null,St=c,V.H=m,V.A=y,Je===null&&(Ot=null,at=0,wf()),S}function eC(){for(;Je!==null;)kE(Je)}function tC(i,s){var a=St;St|=2;var c=OE(),m=ME();Ot!==i||at!==s?(Zf=null,Wf=Pe()+500,tl(i,s)):Wa=an(i,s);e:do try{if(Tt!==0&&Je!==null){s=Je;var y=ki;t:switch(Tt){case 1:Tt=0,ki=null,nl(i,s,y,1);break;case 2:case 9:if(G_(y)){Tt=0,ki=null,VE(s);break}s=function(){Tt!==2&&Tt!==9||Ot!==i||(Tt=7),Ur(i)},y.then(s,s);break e;case 3:Tt=7;break e;case 4:Tt=5;break e;case 7:G_(y)?(Tt=0,ki=null,VE(s)):(Tt=0,ki=null,nl(i,s,y,7));break;case 5:var S=null;switch(Je.tag){case 26:S=Je.memoizedState;case 5:case 27:var O=Je;if(!S||gw(S)){Tt=0,ki=null;var $=O.sibling;if($!==null)Je=$;else{var oe=O.return;oe!==null?(Je=oe,eh(oe)):Je=null}break t}}Tt=0,ki=null,nl(i,s,y,5);break;case 6:Tt=0,ki=null,nl(i,s,y,6);break;case 8:Ip(),Jt=6;break e;default:throw Error(r(462))}}nC();break}catch(de){DE(i,de)}while(!0);return os=Qo=null,V.H=c,V.A=m,St=a,Je!==null?0:(Ot=null,at=0,wf(),Jt)}function nC(){for(;Je!==null&&!Ve();)kE(Je)}function kE(i){var s=aE(i.alternate,i,ms);i.memoizedProps=i.pendingProps,s===null?eh(i):Je=s}function VE(i){var s=i,a=s.alternate;switch(s.tag){case 15:case 0:s=tE(a,s,s.pendingProps,s.type,void 0,at);break;case 11:s=tE(a,s,s.pendingProps,s.type.render,s.ref,at);break;case 5:$m(s);default:uE(a,s),s=Je=P_(s,ms),s=aE(a,s,ms)}i.memoizedProps=i.pendingProps,s===null?eh(i):Je=s}function nl(i,s,a,c){os=Qo=null,$m(s),Ya=null,xu=0;var m=s.return;try{if($I(i,m,s,a,at)){Jt=1,$f(i,Wi(a,i.current)),Je=null;return}}catch(y){if(m!==null)throw Je=m,y;Jt=1,$f(i,Wi(a,i.current)),Je=null;return}s.flags&32768?(ht||c===1?i=!0:Wa||(at&536870912)!==0?i=!1:(qs=i=!0,(c===2||c===9||c===3||c===6)&&(c=tr.current,c!==null&&c.tag===13&&(c.flags|=16384))),PE(s,i)):eh(s)}function eh(i){var s=i;do{if((s.flags&32768)!==0){PE(s,qs);return}i=s.return;var a=YI(s.alternate,s,ms);if(a!==null){Je=a;return}if(s=s.sibling,s!==null){Je=s;return}Je=s=i}while(s!==null);Jt===0&&(Jt=5)}function PE(i,s){do{var a=KI(i.alternate,i);if(a!==null){a.flags&=32767,Je=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(i=i.sibling,i!==null)){Je=i;return}Je=i=a}while(i!==null);Jt=6,Je=null}function LE(i,s,a,c,m,y,S,O,$){i.cancelPendingCommit=null;do th();while($n!==0);if((St&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(y=s.lanes|s.childLanes,y|=Em,Wn(i,a,y,S,O,$),i===Ot&&(Je=Ot=null,at=0),Ja=s,Ys=i,el=a,Ap=y,Rp=m,xE=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,oC(dn,function(){return HE(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=V.T,V.T=null,m=G.p,G.p=2,S=St,St|=4;try{XI(i,s,a)}finally{St=S,G.p=m,V.T=c}}$n=1,zE(),UE(),BE()}}function zE(){if($n===1){$n=0;var i=Ys,s=Ja,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=V.T,V.T=null;var c=G.p;G.p=2;var m=St;St|=4;try{EE(s,i);var y=Hp,S=R_(i.containerInfo),O=y.focusedElem,$=y.selectionRange;if(S!==O&&O&&O.ownerDocument&&A_(O.ownerDocument.documentElement,O)){if($!==null&&pm(O)){var oe=$.start,de=$.end;if(de===void 0&&(de=oe),"selectionStart"in O)O.selectionStart=oe,O.selectionEnd=Math.min(de,O.value.length);else{var pe=O.ownerDocument||document,ae=pe&&pe.defaultView||window;if(ae.getSelection){var le=ae.getSelection(),He=O.textContent.length,Le=Math.min($.start,He),Ct=$.end===void 0?Le:Math.min($.end,He);!le.extend&&Le>Ct&&(S=Ct,Ct=Le,Le=S);var te=T_(O,Le),W=T_(O,Ct);if(te&&W&&(le.rangeCount!==1||le.anchorNode!==te.node||le.anchorOffset!==te.offset||le.focusNode!==W.node||le.focusOffset!==W.offset)){var se=pe.createRange();se.setStart(te.node,te.offset),le.removeAllRanges(),Le>Ct?(le.addRange(se),le.extend(W.node,W.offset)):(se.setEnd(W.node,W.offset),le.addRange(se))}}}}for(pe=[],le=O;le=le.parentNode;)le.nodeType===1&&pe.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<pe.length;O++){var me=pe[O];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}dh=!!jp,Hp=jp=null}finally{St=m,G.p=c,V.T=a}}i.current=s,$n=2}}function UE(){if($n===2){$n=0;var i=Ys,s=Ja,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=V.T,V.T=null;var c=G.p;G.p=2;var m=St;St|=4;try{gE(i,s.alternate,s)}finally{St=m,G.p=c,V.T=a}}$n=3}}function BE(){if($n===4||$n===3){$n=0,Yt();var i=Ys,s=Ja,a=el,c=xE;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?$n=5:($n=0,Ja=Ys=null,jE(i,i.pendingLanes));var m=i.pendingLanes;if(m===0&&(Gs=null),fr(a),s=s.stateNode,Fe&&typeof Fe.onCommitFiberRoot=="function")try{Fe.onCommitFiberRoot(xe,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=V.T,m=G.p,G.p=2,V.T=null;try{for(var y=i.onRecoverableError,S=0;S<c.length;S++){var O=c[S];y(O.value,{componentStack:O.stack})}}finally{V.T=s,G.p=m}}(el&3)!==0&&th(),Ur(i),m=i.pendingLanes,(a&4194090)!==0&&(m&42)!==0?i===xp?Pu++:(Pu=0,xp=i):Pu=0,Lu(0)}}function jE(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,gu(s)))}function th(i){return zE(),UE(),BE(),HE()}function HE(){if($n!==5)return!1;var i=Ys,s=Ap;Ap=0;var a=fr(el),c=V.T,m=G.p;try{G.p=32>a?32:a,V.T=null,a=Rp,Rp=null;var y=Ys,S=el;if($n=0,Ja=Ys=null,el=0,(St&6)!==0)throw Error(r(331));var O=St;if(St|=4,AE(y.current),bE(y,y.current,S,a),St=O,Lu(0,!1),Fe&&typeof Fe.onPostCommitFiberRoot=="function")try{Fe.onPostCommitFiberRoot(xe,y)}catch{}return!0}finally{G.p=m,V.T=c,jE(i,s)}}function FE(i,s,a){s=Wi(a,s),s=sp(i.stateNode,s,2),i=Ls(i,s,2),i!==null&&(oi(i,2),Ur(i))}function Nt(i,s,a){if(i.tag===3)FE(i,i,a);else for(;s!==null;){if(s.tag===3){FE(s,i,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Gs===null||!Gs.has(c))){i=Wi(a,i),a=Y0(2),c=Ls(s,a,2),c!==null&&(K0(a,c,s,i),oi(c,2),Ur(c));break}}s=s.return}}function Dp(i,s,a){var c=i.pingCache;if(c===null){c=i.pingCache=new ZI;var m=new Set;c.set(s,m)}else m=c.get(s),m===void 0&&(m=new Set,c.set(s,m));m.has(a)||(wp=!0,m.add(a),i=iC.bind(null,i,s,a),s.then(i,i))}function iC(i,s,a){var c=i.pingCache;c!==null&&c.delete(s),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,Ot===i&&(at&a)===a&&(Jt===4||Jt===3&&(at&62914560)===at&&300>Pe()-Tp?(St&2)===0&&tl(i,0):bp|=a,Za===at&&(Za=0)),Ur(i)}function qE(i,s){s===0&&(s=Qn()),i=La(i,s),i!==null&&(oi(i,s),Ur(i))}function rC(i){var s=i.memoizedState,a=0;s!==null&&(a=s.retryLane),qE(i,a)}function sC(i,s){var a=0;switch(i.tag){case 13:var c=i.stateNode,m=i.memoizedState;m!==null&&(a=m.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(s),qE(i,a)}function oC(i,s){return mt(i,s)}var nh=null,il=null,Op=!1,ih=!1,Mp=!1,ia=0;function Ur(i){i!==il&&i.next===null&&(il===null?nh=il=i:il=il.next=i),ih=!0,Op||(Op=!0,lC())}function Lu(i,s){if(!Mp&&ih){Mp=!0;do for(var a=!1,c=nh;c!==null;){if(i!==0){var m=c.pendingLanes;if(m===0)var y=0;else{var S=c.suspendedLanes,O=c.pingedLanes;y=(1<<31-Vt(42|i)+1)-1,y&=m&~(S&~O),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(a=!0,KE(c,y))}else y=at,y=Pt(c,c===Ot?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(y&3)===0||an(c,y)||(a=!0,KE(c,y));c=c.next}while(a);Mp=!1}}function aC(){$E()}function $E(){ih=Op=!1;var i=0;ia!==0&&(gC()&&(i=ia),ia=0);for(var s=Pe(),a=null,c=nh;c!==null;){var m=c.next,y=GE(c,s);y===0?(c.next=null,a===null?nh=m:a.next=m,m===null&&(il=a)):(a=c,(i!==0||(y&3)!==0)&&(ih=!0)),c=m}Lu(i)}function GE(i,s){for(var a=i.suspendedLanes,c=i.pingedLanes,m=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var S=31-Vt(y),O=1<<S,$=m[S];$===-1?((O&a)===0||(O&c)!==0)&&(m[S]=xn(O,s)):$<=s&&(i.expiredLanes|=O),y&=~O}if(s=Ot,a=at,a=Pt(i,i===s?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===s&&(Tt===2||Tt===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&pt(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||an(i,a)){if(s=a&-a,s===i.callbackPriority)return s;switch(c!==null&&pt(c),fr(a)){case 2:case 8:a=An;break;case 32:a=dn;break;case 268435456:a=mn;break;default:a=dn}return c=YE.bind(null,i),a=mt(a,c),i.callbackPriority=s,i.callbackNode=a,s}return c!==null&&c!==null&&pt(c),i.callbackPriority=2,i.callbackNode=null,2}function YE(i,s){if($n!==0&&$n!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(th()&&i.callbackNode!==a)return null;var c=at;return c=Pt(i,i===Ot?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(CE(i,c,s),GE(i,Pe()),i.callbackNode!=null&&i.callbackNode===a?YE.bind(null,i):null)}function KE(i,s){if(th())return null;CE(i,s,!0)}function lC(){vC(function(){(St&6)!==0?mt(Ht,aC):$E()})}function kp(){return ia===0&&(ia=cr()),ia}function XE(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Wr(""+i)}function QE(i,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,i.id&&a.setAttribute("form",i.id),s.parentNode.insertBefore(a,s),i=new FormData(i),a.parentNode.removeChild(a),i}function uC(i,s,a,c,m){if(s==="submit"&&a&&a.stateNode===m){var y=XE((m[Ut]||null).action),S=c.submitter;S&&(s=(s=S[Ut]||null)?XE(s.formAction):S.getAttribute("formAction"),s!==null&&(y=s,S=null));var O=new Ra("action","action",null,c,m);i.push({event:O,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ia!==0){var $=S?QE(m,S):new FormData(m);ep(a,{pending:!0,data:$,method:m.method,action:y},null,$)}}else typeof y=="function"&&(O.preventDefault(),$=S?QE(m,S):new FormData(m),ep(a,{pending:!0,data:$,method:m.method,action:y},y,$))},currentTarget:m}]})}}for(var Vp=0;Vp<_m.length;Vp++){var Pp=_m[Vp],cC=Pp.toLowerCase(),fC=Pp[0].toUpperCase()+Pp.slice(1);mr(cC,"on"+fC)}mr(C_,"onAnimationEnd"),mr(N_,"onAnimationIteration"),mr(D_,"onAnimationStart"),mr("dblclick","onDoubleClick"),mr("focusin","onFocus"),mr("focusout","onBlur"),mr(II,"onTransitionRun"),mr(CI,"onTransitionStart"),mr(NI,"onTransitionCancel"),mr(O_,"onTransitionEnd"),Ze("onMouseEnter",["mouseout","mouseover"]),Ze("onMouseLeave",["mouseout","mouseover"]),Ze("onPointerEnter",["pointerout","pointerover"]),Ze("onPointerLeave",["pointerout","pointerover"]),Te("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Te("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Te("onBeforeInput",["compositionend","keypress","textInput","paste"]),Te("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Te("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Te("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zu));function WE(i,s){s=(s&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],m=c.event;c=c.listeners;e:{var y=void 0;if(s)for(var S=c.length-1;0<=S;S--){var O=c[S],$=O.instance,oe=O.currentTarget;if(O=O.listener,$!==y&&m.isPropagationStopped())break e;y=O,m.currentTarget=oe;try{y(m)}catch(de){qf(de)}m.currentTarget=null,y=$}else for(S=0;S<c.length;S++){if(O=c[S],$=O.instance,oe=O.currentTarget,O=O.listener,$!==y&&m.isPropagationStopped())break e;y=O,m.currentTarget=oe;try{y(m)}catch(de){qf(de)}m.currentTarget=null,y=$}}}}function et(i,s){var a=s[Ar];a===void 0&&(a=s[Ar]=new Set);var c=i+"__bubble";a.has(c)||(ZE(s,i,2,!1),a.add(c))}function Lp(i,s,a){var c=0;s&&(c|=4),ZE(a,i,c,s)}var rh="_reactListening"+Math.random().toString(36).slice(2);function zp(i){if(!i[rh]){i[rh]=!0,ue.forEach(function(a){a!=="selectionchange"&&(hC.has(a)||Lp(a,!1,i),Lp(a,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[rh]||(s[rh]=!0,Lp("selectionchange",!1,s))}}function ZE(i,s,a,c){switch(bw(s)){case 2:var m=UC;break;case 8:m=BC;break;default:m=Zp}a=m.bind(null,s,a,i),m=void 0,!Xi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),c?m!==void 0?i.addEventListener(s,a,{capture:!0,passive:m}):i.addEventListener(s,a,!0):m!==void 0?i.addEventListener(s,a,{passive:m}):i.addEventListener(s,a,!1)}function Up(i,s,a,c,m){var y=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var O=c.stateNode.containerInfo;if(O===m)break;if(S===4)for(S=c.return;S!==null;){var $=S.tag;if(($===3||$===4)&&S.stateNode.containerInfo===m)return;S=S.return}for(;O!==null;){if(S=ui(O),S===null)return;if($=S.tag,$===5||$===6||$===26||$===27){c=y=S;continue e}O=O.parentNode}}c=c.return}of(function(){var oe=y,de=Hn(a),pe=[];e:{var ae=M_.get(i);if(ae!==void 0){var le=Ra,He=i;switch(i){case"keypress":if(Nr(a)===0)break e;case"keydown":case"keyup":le=Oa;break;case"focusin":He="focus",le=Ca;break;case"focusout":He="blur",le=Ca;break;case"beforeblur":case"afterblur":le=Ca;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Qi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=fm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=mf;break;case C_:case N_:case D_:le=Na;break;case O_:le=gf;break;case"scroll":case"scrollend":le=af;break;case"wheel":le=Ma;break;case"copy":case"cut":case"paste":le=Da;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=lu;break;case"toggle":case"beforetoggle":le=vf}var Le=(s&4)!==0,Ct=!Le&&(i==="scroll"||i==="scrollend"),te=Le?ae!==null?ae+"Capture":null:ae;Le=[];for(var W=oe,se;W!==null;){var me=W;if(se=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||se===null||te===null||(me=Po(W,te),me!=null&&Le.push(Uu(W,me,se))),Ct)break;W=W.return}0<Le.length&&(ae=new le(ae,He,null,a,de),pe.push({event:ae,listeners:Le}))}}if((s&7)===0){e:{if(ae=i==="mouseover"||i==="pointerover",le=i==="mouseout"||i==="pointerout",ae&&a!==Ei&&(He=a.relatedTarget||a.fromElement)&&(ui(He)||He[Qt]))break e;if((le||ae)&&(ae=de.window===de?de:(ae=de.ownerDocument)?ae.defaultView||ae.parentWindow:window,le?(He=a.relatedTarget||a.toElement,le=oe,He=He?ui(He):null,He!==null&&(Ct=l(He),Le=He.tag,He!==Ct||Le!==5&&Le!==27&&Le!==6)&&(He=null)):(le=null,He=oe),le!==He)){if(Le=Qi,me="onMouseLeave",te="onMouseEnter",W="mouse",(i==="pointerout"||i==="pointerover")&&(Le=lu,me="onPointerLeave",te="onPointerEnter",W="pointer"),Ct=le==null?ae:ci(le),se=He==null?ae:ci(He),ae=new Le(me,W+"leave",le,a,de),ae.target=Ct,ae.relatedTarget=se,me=null,ui(de)===oe&&(Le=new Le(te,W+"enter",He,a,de),Le.target=se,Le.relatedTarget=Ct,me=Le),Ct=me,le&&He)t:{for(Le=le,te=He,W=0,se=Le;se;se=rl(se))W++;for(se=0,me=te;me;me=rl(me))se++;for(;0<W-se;)Le=rl(Le),W--;for(;0<se-W;)te=rl(te),se--;for(;W--;){if(Le===te||te!==null&&Le===te.alternate)break t;Le=rl(Le),te=rl(te)}Le=null}else Le=null;le!==null&&JE(pe,ae,le,Le,!1),He!==null&&Ct!==null&&JE(pe,Ct,He,Le,!0)}}e:{if(ae=oe?ci(oe):window,le=ae.nodeName&&ae.nodeName.toLowerCase(),le==="select"||le==="input"&&ae.type==="file")var Ne=v_;else if(_n(ae))if(__)Ne=AI;else{Ne=SI;var Qe=bI}else le=ae.nodeName,!le||le.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?oe&&Qr(oe.elementType)&&(Ne=v_):Ne=TI;if(Ne&&(Ne=Ne(i,oe))){ns(pe,Ne,a,de);break e}Qe&&Qe(i,ae,oe),i==="focusout"&&oe&&ae.type==="number"&&oe.memoizedProps.value!=null&&Bn(ae,"number",ae.value)}switch(Qe=oe?ci(oe):window,i){case"focusin":(_n(Qe)||Qe.contentEditable==="true")&&(ka=Qe,gm=oe,fu=null);break;case"focusout":fu=gm=ka=null;break;case"mousedown":ym=!0;break;case"contextmenu":case"mouseup":case"dragend":ym=!1,x_(pe,a,de);break;case"selectionchange":if(xI)break;case"keydown":case"keyup":x_(pe,a,de)}var Me;if(Mr)e:{switch(i){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else st?ce(i,a)&&(ze="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(ze="onCompositionStart");ze&&(w&&a.locale!=="ko"&&(st||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&st&&(Me=iu()):(Cr=de,Ms="value"in Cr?Cr.value:Cr.textContent,st=!0)),Qe=sh(oe,ze),0<Qe.length&&(ze=new ou(ze,i,null,a,de),pe.push({event:ze,listeners:Qe}),Me?ze.data=Me:(Me=be(a),Me!==null&&(ze.data=Me)))),(Me=_?vn(i,a):ot(i,a))&&(ze=sh(oe,"onBeforeInput"),0<ze.length&&(Qe=new ou("onBeforeInput","beforeinput",null,a,de),pe.push({event:Qe,listeners:ze}),Qe.data=Me)),uC(pe,i,oe,a,de)}WE(pe,s)})}function Uu(i,s,a){return{instance:i,listener:s,currentTarget:a}}function sh(i,s){for(var a=s+"Capture",c=[];i!==null;){var m=i,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=Po(i,a),m!=null&&c.unshift(Uu(i,m,y)),m=Po(i,s),m!=null&&c.push(Uu(i,m,y))),i.tag===3)return c;i=i.return}return[]}function rl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function JE(i,s,a,c,m){for(var y=s._reactName,S=[];a!==null&&a!==c;){var O=a,$=O.alternate,oe=O.stateNode;if(O=O.tag,$!==null&&$===c)break;O!==5&&O!==26&&O!==27||oe===null||($=oe,m?(oe=Po(a,y),oe!=null&&S.unshift(Uu(a,oe,$))):m||(oe=Po(a,y),oe!=null&&S.push(Uu(a,oe,$)))),a=a.return}S.length!==0&&i.push({event:s,listeners:S})}var dC=/\r\n?/g,mC=/\u0000|\uFFFD/g;function ew(i){return(typeof i=="string"?i:""+i).replace(dC,`
`).replace(mC,"")}function tw(i,s){return s=ew(s),ew(i)===s}function oh(){}function It(i,s,a,c,m,y){switch(a){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||jn(i,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&jn(i,""+c);break;case"className":ct(i,"class",c);break;case"tabIndex":ct(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(i,a,c);break;case"style":xr(i,c,y);break;case"data":if(s!=="object"){ct(i,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Wr(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(a==="formAction"?(s!=="input"&&It(i,s,"name",m.name,m,null),It(i,s,"formEncType",m.formEncType,m,null),It(i,s,"formMethod",m.formMethod,m,null),It(i,s,"formTarget",m.formTarget,m,null)):(It(i,s,"encType",m.encType,m,null),It(i,s,"method",m.method,m,null),It(i,s,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Wr(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=oh);break;case"onScroll":c!=null&&et("scroll",i);break;case"onScrollEnd":c!=null&&et("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(a=c.__html,a!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=Wr(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":et("beforetoggle",i),et("toggle",i),vt(i,"popover",c);break;case"xlinkActuate":_t(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":_t(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":_t(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":_t(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":_t(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":_t(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":_t(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":_t(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":_t(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":vt(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ds.get(a)||a,vt(i,a,c))}}function Bp(i,s,a,c,m,y){switch(a){case"style":xr(i,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(a=c.__html,a!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=a}}break;case"children":typeof c=="string"?jn(i,c):(typeof c=="number"||typeof c=="bigint")&&jn(i,""+c);break;case"onScroll":c!=null&&et("scroll",i);break;case"onScrollEnd":c!=null&&et("scrollend",i);break;case"onClick":c!=null&&(i.onclick=oh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ee.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(m=a.endsWith("Capture"),s=a.slice(2,m?a.length-7:void 0),y=i[Ut]||null,y=y!=null?y[a]:null,typeof y=="function"&&i.removeEventListener(s,y,m),typeof c=="function")){typeof y!="function"&&y!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(s,c,m);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):vt(i,a,c)}}}function Gn(i,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":et("error",i),et("load",i);var c=!1,m=!1,y;for(y in a)if(a.hasOwnProperty(y)){var S=a[y];if(S!=null)switch(y){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:It(i,s,y,S,a,null)}}m&&It(i,s,"srcSet",a.srcSet,a,null),c&&It(i,s,"src",a.src,a,null);return;case"input":et("invalid",i);var O=y=S=m=null,$=null,oe=null;for(c in a)if(a.hasOwnProperty(c)){var de=a[c];if(de!=null)switch(c){case"name":m=de;break;case"type":S=de;break;case"checked":$=de;break;case"defaultChecked":oe=de;break;case"value":y=de;break;case"defaultValue":O=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,s));break;default:It(i,s,c,de,a,null)}}Un(i,y,O,$,oe,S,m,!1),rt(i);return;case"select":et("invalid",i),c=S=y=null;for(m in a)if(a.hasOwnProperty(m)&&(O=a[m],O!=null))switch(m){case"value":y=O;break;case"defaultValue":S=O;break;case"multiple":c=O;default:It(i,s,m,O,a,null)}s=y,a=S,i.multiple=!!c,s!=null?di(i,!!c,s,!1):a!=null&&di(i,!!c,a,!0);return;case"textarea":et("invalid",i),y=m=c=null;for(S in a)if(a.hasOwnProperty(S)&&(O=a[S],O!=null))switch(S){case"value":c=O;break;case"defaultValue":m=O;break;case"children":y=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(r(91));break;default:It(i,s,S,O,a,null)}hr(i,c,m,y),rt(i);return;case"option":for($ in a)if(a.hasOwnProperty($)&&(c=a[$],c!=null))switch($){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:It(i,s,$,c,a,null)}return;case"dialog":et("beforetoggle",i),et("toggle",i),et("cancel",i),et("close",i);break;case"iframe":case"object":et("load",i);break;case"video":case"audio":for(c=0;c<zu.length;c++)et(zu[c],i);break;case"image":et("error",i),et("load",i);break;case"details":et("toggle",i);break;case"embed":case"source":case"link":et("error",i),et("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in a)if(a.hasOwnProperty(oe)&&(c=a[oe],c!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:It(i,s,oe,c,a,null)}return;default:if(Qr(s)){for(de in a)a.hasOwnProperty(de)&&(c=a[de],c!==void 0&&Bp(i,s,de,c,a,void 0));return}}for(O in a)a.hasOwnProperty(O)&&(c=a[O],c!=null&&It(i,s,O,c,a,null))}function pC(i,s,a,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,S=null,O=null,$=null,oe=null,de=null;for(le in a){var pe=a[le];if(a.hasOwnProperty(le)&&pe!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":$=pe;default:c.hasOwnProperty(le)||It(i,s,le,null,c,pe)}}for(var ae in c){var le=c[ae];if(pe=a[ae],c.hasOwnProperty(ae)&&(le!=null||pe!=null))switch(ae){case"type":y=le;break;case"name":m=le;break;case"checked":oe=le;break;case"defaultChecked":de=le;break;case"value":S=le;break;case"defaultValue":O=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,s));break;default:le!==pe&&It(i,s,ae,le,c,pe)}}Dt(i,S,O,$,oe,de,y,m);return;case"select":le=S=O=ae=null;for(y in a)if($=a[y],a.hasOwnProperty(y)&&$!=null)switch(y){case"value":break;case"multiple":le=$;default:c.hasOwnProperty(y)||It(i,s,y,null,c,$)}for(m in c)if(y=c[m],$=a[m],c.hasOwnProperty(m)&&(y!=null||$!=null))switch(m){case"value":ae=y;break;case"defaultValue":O=y;break;case"multiple":S=y;default:y!==$&&It(i,s,m,y,c,$)}s=O,a=S,c=le,ae!=null?di(i,!!a,ae,!1):!!c!=!!a&&(s!=null?di(i,!!a,s,!0):di(i,!!a,a?[]:"",!1));return;case"textarea":le=ae=null;for(O in a)if(m=a[O],a.hasOwnProperty(O)&&m!=null&&!c.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:It(i,s,O,null,c,m)}for(S in c)if(m=c[S],y=a[S],c.hasOwnProperty(S)&&(m!=null||y!=null))switch(S){case"value":ae=m;break;case"defaultValue":le=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==y&&It(i,s,S,m,c,y)}ut(i,ae,le);return;case"option":for(var He in a)if(ae=a[He],a.hasOwnProperty(He)&&ae!=null&&!c.hasOwnProperty(He))switch(He){case"selected":i.selected=!1;break;default:It(i,s,He,null,c,ae)}for($ in c)if(ae=c[$],le=a[$],c.hasOwnProperty($)&&ae!==le&&(ae!=null||le!=null))switch($){case"selected":i.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:It(i,s,$,ae,c,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in a)ae=a[Le],a.hasOwnProperty(Le)&&ae!=null&&!c.hasOwnProperty(Le)&&It(i,s,Le,null,c,ae);for(oe in c)if(ae=c[oe],le=a[oe],c.hasOwnProperty(oe)&&ae!==le&&(ae!=null||le!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,s));break;default:It(i,s,oe,ae,c,le)}return;default:if(Qr(s)){for(var Ct in a)ae=a[Ct],a.hasOwnProperty(Ct)&&ae!==void 0&&!c.hasOwnProperty(Ct)&&Bp(i,s,Ct,void 0,c,ae);for(de in c)ae=c[de],le=a[de],!c.hasOwnProperty(de)||ae===le||ae===void 0&&le===void 0||Bp(i,s,de,ae,c,le);return}}for(var te in a)ae=a[te],a.hasOwnProperty(te)&&ae!=null&&!c.hasOwnProperty(te)&&It(i,s,te,null,c,ae);for(pe in c)ae=c[pe],le=a[pe],!c.hasOwnProperty(pe)||ae===le||ae==null&&le==null||It(i,s,pe,ae,c,le)}var jp=null,Hp=null;function ah(i){return i.nodeType===9?i:i.ownerDocument}function nw(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function iw(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Fp(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var qp=null;function gC(){var i=window.event;return i&&i.type==="popstate"?i===qp?!1:(qp=i,!0):(qp=null,!1)}var rw=typeof setTimeout=="function"?setTimeout:void 0,yC=typeof clearTimeout=="function"?clearTimeout:void 0,sw=typeof Promise=="function"?Promise:void 0,vC=typeof queueMicrotask=="function"?queueMicrotask:typeof sw<"u"?function(i){return sw.resolve(null).then(i).catch(_C)}:rw;function _C(i){setTimeout(function(){throw i})}function Xs(i){return i==="head"}function ow(i,s){var a=s,c=0,m=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"){if(0<c&&8>c){a=c;var S=i.ownerDocument;if(a&1&&Bu(S.documentElement),a&2&&Bu(S.body),a&4)for(a=S.head,Bu(a),S=a.firstChild;S;){var O=S.nextSibling,$=S.nodeName;S[qi]||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&S.rel.toLowerCase()==="stylesheet"||a.removeChild(S),S=O}}if(m===0){i.removeChild(y),Ku(s);return}m--}else a==="$"||a==="$?"||a==="$!"?m++:c=a.charCodeAt(0)-48;else c=0;a=y}while(a);Ku(s)}function $p(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":$p(a),Ci(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function EC(i,s,a,c){for(;i.nodeType===1;){var m=a;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[qi])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==m.rel||i.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=gr(i.nextSibling),i===null)break}return null}function wC(i,s,a){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=gr(i.nextSibling),i===null))return null;return i}function Gp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function bC(i,s){var a=i.ownerDocument;if(i.data!=="$?"||a.readyState==="complete")s();else{var c=function(){s(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function gr(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}var Yp=null;function aw(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return i;s--}else a==="/$"&&s++}i=i.previousSibling}return null}function lw(i,s,a){switch(s=ah(a),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Bu(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Ci(i)}var ir=new Map,uw=new Set;function lh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ps=G.d;G.d={f:SC,r:TC,D:AC,C:RC,L:xC,m:IC,X:NC,S:CC,M:DC};function SC(){var i=ps.f(),s=Jf();return i||s}function TC(i){var s=In(i);s!==null&&s.tag===5&&s.type==="form"?C0(s):ps.r(i)}var sl=typeof document>"u"?null:document;function cw(i,s,a){var c=sl;if(c&&typeof s=="string"&&s){var m=Bt(s);m='link[rel="'+i+'"][href="'+m+'"]',typeof a=="string"&&(m+='[crossorigin="'+a+'"]'),uw.has(m)||(uw.add(m),i={rel:i,crossOrigin:a,href:s},c.querySelector(m)===null&&(s=c.createElement("link"),Gn(s,"link",i),Q(s),c.head.appendChild(s)))}}function AC(i){ps.D(i),cw("dns-prefetch",i,null)}function RC(i,s){ps.C(i,s),cw("preconnect",i,s)}function xC(i,s,a){ps.L(i,s,a);var c=sl;if(c&&i&&s){var m='link[rel="preload"][as="'+Bt(s)+'"]';s==="image"&&a&&a.imageSrcSet?(m+='[imagesrcset="'+Bt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(m+='[imagesizes="'+Bt(a.imageSizes)+'"]')):m+='[href="'+Bt(i)+'"]';var y=m;switch(s){case"style":y=ol(i);break;case"script":y=al(i)}ir.has(y)||(i=g({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:i,as:s},a),ir.set(y,i),c.querySelector(m)!==null||s==="style"&&c.querySelector(ju(y))||s==="script"&&c.querySelector(Hu(y))||(s=c.createElement("link"),Gn(s,"link",i),Q(s),c.head.appendChild(s)))}}function IC(i,s){ps.m(i,s);var a=sl;if(a&&i){var c=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+Bt(c)+'"][href="'+Bt(i)+'"]',y=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=al(i)}if(!ir.has(y)&&(i=g({rel:"modulepreload",href:i},s),ir.set(y,i),a.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Hu(y)))return}c=a.createElement("link"),Gn(c,"link",i),Q(c),a.head.appendChild(c)}}}function CC(i,s,a){ps.S(i,s,a);var c=sl;if(c&&i){var m=yn(c).hoistableStyles,y=ol(i);s=s||"default";var S=m.get(y);if(!S){var O={loading:0,preload:null};if(S=c.querySelector(ju(y)))O.loading=5;else{i=g({rel:"stylesheet",href:i,"data-precedence":s},a),(a=ir.get(y))&&Kp(i,a);var $=S=c.createElement("link");Q($),Gn($,"link",i),$._p=new Promise(function(oe,de){$.onload=oe,$.onerror=de}),$.addEventListener("load",function(){O.loading|=1}),$.addEventListener("error",function(){O.loading|=2}),O.loading|=4,uh(S,s,c)}S={type:"stylesheet",instance:S,count:1,state:O},m.set(y,S)}}}function NC(i,s){ps.X(i,s);var a=sl;if(a&&i){var c=yn(a).hoistableScripts,m=al(i),y=c.get(m);y||(y=a.querySelector(Hu(m)),y||(i=g({src:i,async:!0},s),(s=ir.get(m))&&Xp(i,s),y=a.createElement("script"),Q(y),Gn(y,"link",i),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(m,y))}}function DC(i,s){ps.M(i,s);var a=sl;if(a&&i){var c=yn(a).hoistableScripts,m=al(i),y=c.get(m);y||(y=a.querySelector(Hu(m)),y||(i=g({src:i,async:!0,type:"module"},s),(s=ir.get(m))&&Xp(i,s),y=a.createElement("script"),Q(y),Gn(y,"link",i),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(m,y))}}function fw(i,s,a,c){var m=(m=we.current)?lh(m):null;if(!m)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=ol(a.href),a=yn(m).hoistableStyles,c=a.get(s),c||(c={type:"style",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=ol(a.href);var y=yn(m).hoistableStyles,S=y.get(i);if(S||(m=m.ownerDocument||m,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,S),(y=m.querySelector(ju(i)))&&!y._p&&(S.instance=y,S.state.loading=5),ir.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ir.set(i,a),y||OC(m,i,a,S.state))),s&&c===null)throw Error(r(528,""));return S}if(s&&c!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=al(a),a=yn(m).hoistableScripts,c=a.get(s),c||(c={type:"script",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function ol(i){return'href="'+Bt(i)+'"'}function ju(i){return'link[rel="stylesheet"]['+i+"]"}function hw(i){return g({},i,{"data-precedence":i.precedence,precedence:null})}function OC(i,s,a,c){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=i.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Gn(s,"link",a),Q(s),i.head.appendChild(s))}function al(i){return'[src="'+Bt(i)+'"]'}function Hu(i){return"script[async]"+i}function dw(i,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var c=i.querySelector('style[data-href~="'+Bt(a.href)+'"]');if(c)return s.instance=c,Q(c),c;var m=g({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),Q(c),Gn(c,"style",m),uh(c,a.precedence,i),s.instance=c;case"stylesheet":m=ol(a.href);var y=i.querySelector(ju(m));if(y)return s.state.loading|=4,s.instance=y,Q(y),y;c=hw(a),(m=ir.get(m))&&Kp(c,m),y=(i.ownerDocument||i).createElement("link"),Q(y);var S=y;return S._p=new Promise(function(O,$){S.onload=O,S.onerror=$}),Gn(y,"link",c),s.state.loading|=4,uh(y,a.precedence,i),s.instance=y;case"script":return y=al(a.src),(m=i.querySelector(Hu(y)))?(s.instance=m,Q(m),m):(c=a,(m=ir.get(y))&&(c=g({},a),Xp(c,m)),i=i.ownerDocument||i,m=i.createElement("script"),Q(m),Gn(m,"link",c),i.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,uh(c,a.precedence,i));return s.instance}function uh(i,s,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,y=m,S=0;S<c.length;S++){var O=c[S];if(O.dataset.precedence===s)y=O;else if(y!==m)break}y?y.parentNode.insertBefore(i,y.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(i,s.firstChild))}function Kp(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Xp(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var ch=null;function mw(i,s,a){if(ch===null){var c=new Map,m=ch=new Map;m.set(a,c)}else m=ch,c=m.get(a),c||(c=new Map,m.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),m=0;m<a.length;m++){var y=a[m];if(!(y[qi]||y[gt]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var S=y.getAttribute(s)||"";S=i+S;var O=c.get(S);O?O.push(y):c.set(S,[y])}}return c}function pw(i,s,a){i=i.ownerDocument||i,i.head.insertBefore(a,s==="title"?i.querySelector("head > title"):null)}function MC(i,s,a){if(a===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function gw(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Fu=null;function kC(){}function VC(i,s,a){if(Fu===null)throw Error(r(475));var c=Fu;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var m=ol(a.href),y=i.querySelector(ju(m));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(c.count++,c=fh.bind(c),i.then(c,c)),s.state.loading|=4,s.instance=y,Q(y);return}y=i.ownerDocument||i,a=hw(a),(m=ir.get(m))&&Kp(a,m),y=y.createElement("link"),Q(y);var S=y;S._p=new Promise(function(O,$){S.onload=O,S.onerror=$}),Gn(y,"link",a),s.instance=y}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=fh.bind(c),i.addEventListener("load",s),i.addEventListener("error",s))}}function PC(){if(Fu===null)throw Error(r(475));var i=Fu;return i.stylesheets&&i.count===0&&Qp(i,i.stylesheets),0<i.count?function(s){var a=setTimeout(function(){if(i.stylesheets&&Qp(i,i.stylesheets),i.unsuspend){var c=i.unsuspend;i.unsuspend=null,c()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(a)}}:null}function fh(){if(this.count--,this.count===0){if(this.stylesheets)Qp(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var hh=null;function Qp(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,hh=new Map,s.forEach(LC,i),hh=null,fh.call(i))}function LC(i,s){if(!(s.state.loading&4)){var a=hh.get(i);if(a)var c=a.get(null);else{a=new Map,hh.set(i,a);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var S=m[y];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),c=S)}c&&a.set(null,c)}m=s.instance,S=m.getAttribute("data-precedence"),y=a.get(S)||c,y===c&&a.set(null,m),a.set(S,m),this.count++,c=fh.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),y?y.parentNode.insertBefore(m,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),s.state.loading|=4}}var qu={$$typeof:F,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function zC(i,s,a,c,m,y,S,O){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gn(0),this.hiddenUpdates=gn(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function yw(i,s,a,c,m,y,S,O,$,oe,de,pe){return i=new zC(i,s,a,S,O,$,oe,pe),s=1,y===!0&&(s|=24),y=Di(3,null,null,s),i.current=y,y.stateNode=i,s=Dm(),s.refCount++,i.pooledCache=s,s.refCount++,y.memoizedState={element:c,isDehydrated:a,cache:s},Vm(y),i}function vw(i){return i?(i=za,i):za}function _w(i,s,a,c,m,y){m=vw(m),c.context===null?c.context=m:c.pendingContext=m,c=Ps(s),c.payload={element:a},y=y===void 0?null:y,y!==null&&(c.callback=y),a=Ls(i,c,s),a!==null&&(Pi(a,i,s),Eu(a,i,s))}function Ew(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<s?a:s}}function Wp(i,s){Ew(i,s),(i=i.alternate)&&Ew(i,s)}function ww(i){if(i.tag===13){var s=La(i,67108864);s!==null&&Pi(s,i,67108864),Wp(i,67108864)}}var dh=!0;function UC(i,s,a,c){var m=V.T;V.T=null;var y=G.p;try{G.p=2,Zp(i,s,a,c)}finally{G.p=y,V.T=m}}function BC(i,s,a,c){var m=V.T;V.T=null;var y=G.p;try{G.p=8,Zp(i,s,a,c)}finally{G.p=y,V.T=m}}function Zp(i,s,a,c){if(dh){var m=Jp(c);if(m===null)Up(i,s,c,mh,a),Sw(i,c);else if(HC(m,i,s,a,c))c.stopPropagation();else if(Sw(i,c),s&4&&-1<jC.indexOf(i)){for(;m!==null;){var y=In(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var S=At(y.pendingLanes);if(S!==0){var O=y;for(O.pendingLanes|=2,O.entangledLanes|=2;S;){var $=1<<31-Vt(S);O.entanglements[1]|=$,S&=~$}Ur(y),(St&6)===0&&(Wf=Pe()+500,Lu(0))}}break;case 13:O=La(y,2),O!==null&&Pi(O,y,2),Jf(),Wp(y,2)}if(y=Jp(c),y===null&&Up(i,s,c,mh,a),y===m)break;m=y}m!==null&&c.stopPropagation()}else Up(i,s,c,null,a)}}function Jp(i){return i=Hn(i),eg(i)}var mh=null;function eg(i){if(mh=null,i=ui(i),i!==null){var s=l(i);if(s===null)i=null;else{var a=s.tag;if(a===13){if(i=u(s),i!==null)return i;i=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return mh=i,null}function bw(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(De()){case Ht:return 2;case An:return 8;case dn:case Rn:return 32;case mn:return 268435456;default:return 32}default:return 32}}var tg=!1,Qs=null,Ws=null,Zs=null,$u=new Map,Gu=new Map,Js=[],jC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Sw(i,s){switch(i){case"focusin":case"focusout":Qs=null;break;case"dragenter":case"dragleave":Ws=null;break;case"mouseover":case"mouseout":Zs=null;break;case"pointerover":case"pointerout":$u.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gu.delete(s.pointerId)}}function Yu(i,s,a,c,m,y){return i===null||i.nativeEvent!==y?(i={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:y,targetContainers:[m]},s!==null&&(s=In(s),s!==null&&ww(s)),i):(i.eventSystemFlags|=c,s=i.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),i)}function HC(i,s,a,c,m){switch(s){case"focusin":return Qs=Yu(Qs,i,s,a,c,m),!0;case"dragenter":return Ws=Yu(Ws,i,s,a,c,m),!0;case"mouseover":return Zs=Yu(Zs,i,s,a,c,m),!0;case"pointerover":var y=m.pointerId;return $u.set(y,Yu($u.get(y)||null,i,s,a,c,m)),!0;case"gotpointercapture":return y=m.pointerId,Gu.set(y,Yu(Gu.get(y)||null,i,s,a,c,m)),!0}return!1}function Tw(i){var s=ui(i.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){i.blockedOn=s,Ii(i.priority,function(){if(a.tag===13){var c=Vi();c=xi(c);var m=La(a,c);m!==null&&Pi(m,a,c),Wp(a,c)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ph(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var a=Jp(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);Ei=c,a.target.dispatchEvent(c),Ei=null}else return s=In(a),s!==null&&ww(s),i.blockedOn=a,!1;s.shift()}return!0}function Aw(i,s,a){ph(i)&&a.delete(s)}function FC(){tg=!1,Qs!==null&&ph(Qs)&&(Qs=null),Ws!==null&&ph(Ws)&&(Ws=null),Zs!==null&&ph(Zs)&&(Zs=null),$u.forEach(Aw),Gu.forEach(Aw)}function gh(i,s){i.blockedOn===s&&(i.blockedOn=null,tg||(tg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,FC)))}var yh=null;function Rw(i){yh!==i&&(yh=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){yh===i&&(yh=null);for(var s=0;s<i.length;s+=3){var a=i[s],c=i[s+1],m=i[s+2];if(typeof c!="function"){if(eg(c||a)===null)continue;break}var y=In(a);y!==null&&(i.splice(s,3),s-=3,ep(y,{pending:!0,data:m,method:a.method,action:c},c,m))}}))}function Ku(i){function s($){return gh($,i)}Qs!==null&&gh(Qs,i),Ws!==null&&gh(Ws,i),Zs!==null&&gh(Zs,i),$u.forEach(s),Gu.forEach(s);for(var a=0;a<Js.length;a++){var c=Js[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<Js.length&&(a=Js[0],a.blockedOn===null);)Tw(a),a.blockedOn===null&&Js.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var m=a[c],y=a[c+1],S=m[Ut]||null;if(typeof y=="function")S||Rw(a);else if(S){var O=null;if(y&&y.hasAttribute("formAction")){if(m=y,S=y[Ut]||null)O=S.formAction;else if(eg(m)!==null)continue}else O=S.action;typeof O=="function"?a[c+1]=O:(a.splice(c,3),c-=3),Rw(a)}}}function ng(i){this._internalRoot=i}vh.prototype.render=ng.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,c=Vi();_w(a,c,i,s,null,null)},vh.prototype.unmount=ng.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;_w(i.current,2,null,i,null,null),Jf(),s[Qt]=null}};function vh(i){this._internalRoot=i}vh.prototype.unstable_scheduleHydration=function(i){if(i){var s=ai();i={blockedOn:null,target:i,priority:s};for(var a=0;a<Js.length&&s!==0&&s<Js[a].priority;a++);Js.splice(a,0,i),a===0&&Tw(i)}};var xw=e.version;if(xw!=="19.1.0")throw Error(r(527,xw,"19.1.0"));G.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=d(s),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var qC={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_h.isDisabled&&_h.supportsFiber)try{xe=_h.inject(qC),Fe=_h}catch{}}return Qu.createRoot=function(i,s){if(!o(i))throw Error(r(299));var a=!1,c="",m=F0,y=q0,S=$0,O=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(O=s.unstable_transitionCallbacks)),s=yw(i,1,!1,null,null,a,c,m,y,S,O,null),i[Qt]=s.current,zp(i),new ng(s)},Qu.hydrateRoot=function(i,s,a){if(!o(i))throw Error(r(299));var c=!1,m="",y=F0,S=q0,O=$0,$=null,oe=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(O=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&($=a.unstable_transitionCallbacks),a.formState!==void 0&&(oe=a.formState)),s=yw(i,1,!0,s,a??null,c,m,y,S,O,$,oe),s.context=vw(null),a=s.current,c=Vi(),c=xi(c),m=Ps(c),m.callback=null,Ls(a,m,c),a=c,s.current.lanes=a,oi(s,a),Ur(s),i[Qt]=s.current,zp(i),new vh(s)},Qu.version="19.1.0",Qu}var Lw;function JC(){if(Lw)return sg.exports;Lw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),sg.exports=ZC(),sg.exports}var eN=JC();function vi(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=vi(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var ug={exports:{}},cg={},fg={exports:{}},hg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zw;function tN(){if(zw)return hg;zw=1;var t=Bc();function e(v,E){return v===E&&(v!==0||1/v===1/E)||v!==v&&E!==E}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,o=t.useEffect,l=t.useLayoutEffect,u=t.useDebugValue;function f(v,E){var b=E(),x=r({inst:{value:b,getSnapshot:E}}),M=x[0].inst,D=x[1];return l(function(){M.value=b,M.getSnapshot=E,d(M)&&D({inst:M})},[v,b,E]),o(function(){return d(M)&&D({inst:M}),v(function(){d(M)&&D({inst:M})})},[v]),u(b),b}function d(v){var E=v.getSnapshot;v=v.value;try{var b=E();return!n(v,b)}catch{return!0}}function p(v,E){return E()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:f;return hg.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:g,hg}var Uw;function nN(){return Uw||(Uw=1,fg.exports=tN()),fg.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bw;function iN(){if(Bw)return cg;Bw=1;var t=Bc(),e=nN();function n(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var r=typeof Object.is=="function"?Object.is:n,o=e.useSyncExternalStore,l=t.useRef,u=t.useEffect,f=t.useMemo,d=t.useDebugValue;return cg.useSyncExternalStoreWithSelector=function(p,g,v,E,b){var x=l(null);if(x.current===null){var M={hasValue:!1,value:null};x.current=M}else M=x.current;x=f(function(){function P(Z){if(!H){if(H=!0,F=Z,Z=E(Z),b!==void 0&&M.hasValue){var R=M.value;if(b(R,Z))return j=R}return j=Z}if(R=j,r(F,Z))return R;var T=E(Z);return b!==void 0&&b(R,T)?(F=Z,R):(F=Z,j=T)}var H=!1,F,j,X=v===void 0?null:v;return[function(){return P(g())},X===null?void 0:function(){return P(X())}]},[g,v,E,b]);var D=o(p,x[0],x[1]);return u(function(){M.hasValue=!0,M.value=D},[D]),d(D),D},cg}var jw;function rN(){return jw||(jw=1,ug.exports=iN()),ug.exports}var sN=rN();const oN=Uc(sN),aN={},Hw=t=>{let e;const n=new Set,r=(g,v)=>{const E=typeof g=="function"?g(e):g;if(!Object.is(E,e)){const b=e;e=v??(typeof E!="object"||E===null)?E:Object.assign({},e,E),n.forEach(x=>x(e,b))}},o=()=>e,d={setState:r,getState:o,getInitialState:()=>p,subscribe:g=>(n.add(g),()=>n.delete(g)),destroy:()=>{(aN?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},p=e=t(r,o,d);return d},lN=t=>t?Hw(t):Hw,{useDebugValue:uN}=fe,{useSyncExternalStoreWithSelector:cN}=oN,fN=t=>t;function FT(t,e=fN,n){const r=cN(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return uN(r),r}const Fw=(t,e)=>{const n=lN(t),r=(o,l=e)=>FT(n,o,l);return Object.assign(r,n),r},hN=(t,e)=>t?Fw(t,e):Fw;function ri(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,o]of t)if(!Object.is(o,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var dN={value:()=>{}};function kd(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Bh(n)}function Bh(t){this._=t}function mN(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Bh.prototype=kd.prototype={constructor:Bh,on:function(t,e){var n=this._,r=mN(t+"",n),o,l=-1,u=r.length;if(arguments.length<2){for(;++l<u;)if((o=(t=r[l]).type)&&(o=pN(n[o],t.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++l<u;)if(o=(t=r[l]).type)n[o]=qw(n[o],t.name,e);else if(e==null)for(o in n)n[o]=qw(n[o],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Bh(t)},call:function(t,e){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,l;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(l=this._[t],r=0,o=l.length;r<o;++r)l[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,l=r.length;o<l;++o)r[o].value.apply(e,n)}};function pN(t,e){for(var n=0,r=t.length,o;n<r;++n)if((o=t[n]).name===e)return o.value}function qw(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=dN,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Wg="http://www.w3.org/1999/xhtml";const $w={svg:"http://www.w3.org/2000/svg",xhtml:Wg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Vd(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),$w.hasOwnProperty(e)?{space:$w[e],local:t}:t}function gN(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Wg&&e.documentElement.namespaceURI===Wg?e.createElement(t):e.createElementNS(n,t)}}function yN(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function qT(t){var e=Vd(t);return(e.local?yN:gN)(e)}function vN(){}function Ky(t){return t==null?vN:function(){return this.querySelector(t)}}function _N(t){typeof t!="function"&&(t=Ky(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var l=e[o],u=l.length,f=r[o]=new Array(u),d,p,g=0;g<u;++g)(d=l[g])&&(p=t.call(d,d.__data__,g,l))&&("__data__"in d&&(p.__data__=d.__data__),f[g]=p);return new ji(r,this._parents)}function EN(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function wN(){return[]}function $T(t){return t==null?wN:function(){return this.querySelectorAll(t)}}function bN(t){return function(){return EN(t.apply(this,arguments))}}function SN(t){typeof t=="function"?t=bN(t):t=$T(t);for(var e=this._groups,n=e.length,r=[],o=[],l=0;l<n;++l)for(var u=e[l],f=u.length,d,p=0;p<f;++p)(d=u[p])&&(r.push(t.call(d,d.__data__,p,u)),o.push(d));return new ji(r,o)}function GT(t){return function(){return this.matches(t)}}function YT(t){return function(e){return e.matches(t)}}var TN=Array.prototype.find;function AN(t){return function(){return TN.call(this.children,t)}}function RN(){return this.firstElementChild}function xN(t){return this.select(t==null?RN:AN(typeof t=="function"?t:YT(t)))}var IN=Array.prototype.filter;function CN(){return Array.from(this.children)}function NN(t){return function(){return IN.call(this.children,t)}}function DN(t){return this.selectAll(t==null?CN:NN(typeof t=="function"?t:YT(t)))}function ON(t){typeof t!="function"&&(t=GT(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var l=e[o],u=l.length,f=r[o]=[],d,p=0;p<u;++p)(d=l[p])&&t.call(d,d.__data__,p,l)&&f.push(d);return new ji(r,this._parents)}function KT(t){return new Array(t.length)}function MN(){return new ji(this._enter||this._groups.map(KT),this._parents)}function nd(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}nd.prototype={constructor:nd,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function kN(t){return function(){return t}}function VN(t,e,n,r,o,l){for(var u=0,f,d=e.length,p=l.length;u<p;++u)(f=e[u])?(f.__data__=l[u],r[u]=f):n[u]=new nd(t,l[u]);for(;u<d;++u)(f=e[u])&&(o[u]=f)}function PN(t,e,n,r,o,l,u){var f,d,p=new Map,g=e.length,v=l.length,E=new Array(g),b;for(f=0;f<g;++f)(d=e[f])&&(E[f]=b=u.call(d,d.__data__,f,e)+"",p.has(b)?o[f]=d:p.set(b,d));for(f=0;f<v;++f)b=u.call(t,l[f],f,l)+"",(d=p.get(b))?(r[f]=d,d.__data__=l[f],p.delete(b)):n[f]=new nd(t,l[f]);for(f=0;f<g;++f)(d=e[f])&&p.get(E[f])===d&&(o[f]=d)}function LN(t){return t.__data__}function zN(t,e){if(!arguments.length)return Array.from(this,LN);var n=e?PN:VN,r=this._parents,o=this._groups;typeof t!="function"&&(t=kN(t));for(var l=o.length,u=new Array(l),f=new Array(l),d=new Array(l),p=0;p<l;++p){var g=r[p],v=o[p],E=v.length,b=UN(t.call(g,g&&g.__data__,p,r)),x=b.length,M=f[p]=new Array(x),D=u[p]=new Array(x),P=d[p]=new Array(E);n(g,v,M,D,P,b,e);for(var H=0,F=0,j,X;H<x;++H)if(j=M[H]){for(H>=F&&(F=H+1);!(X=D[F])&&++F<x;);j._next=X||null}}return u=new ji(u,r),u._enter=f,u._exit=d,u}function UN(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function BN(){return new ji(this._exit||this._groups.map(KT),this._parents)}function jN(t,e,n){var r=this.enter(),o=this,l=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(o=e(o),o&&(o=o.selection())),n==null?l.remove():n(l),r&&o?r.merge(o).order():o}function HN(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,o=n.length,l=r.length,u=Math.min(o,l),f=new Array(o),d=0;d<u;++d)for(var p=n[d],g=r[d],v=p.length,E=f[d]=new Array(v),b,x=0;x<v;++x)(b=p[x]||g[x])&&(E[x]=b);for(;d<o;++d)f[d]=n[d];return new ji(f,this._parents)}function FN(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],o=r.length-1,l=r[o],u;--o>=0;)(u=r[o])&&(l&&u.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(u,l),l=u);return this}function qN(t){t||(t=$N);function e(v,E){return v&&E?t(v.__data__,E.__data__):!v-!E}for(var n=this._groups,r=n.length,o=new Array(r),l=0;l<r;++l){for(var u=n[l],f=u.length,d=o[l]=new Array(f),p,g=0;g<f;++g)(p=u[g])&&(d[g]=p);d.sort(e)}return new ji(o,this._parents).order()}function $N(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function GN(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function YN(){return Array.from(this)}function KN(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],o=0,l=r.length;o<l;++o){var u=r[o];if(u)return u}return null}function XN(){let t=0;for(const e of this)++t;return t}function QN(){return!this.node()}function WN(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o=e[n],l=0,u=o.length,f;l<u;++l)(f=o[l])&&t.call(f,f.__data__,l,o);return this}function ZN(t){return function(){this.removeAttribute(t)}}function JN(t){return function(){this.removeAttributeNS(t.space,t.local)}}function e2(t,e){return function(){this.setAttribute(t,e)}}function t2(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function n2(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function i2(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function r2(t,e){var n=Vd(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?JN:ZN:typeof e=="function"?n.local?i2:n2:n.local?t2:e2)(n,e))}function XT(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function s2(t){return function(){this.style.removeProperty(t)}}function o2(t,e,n){return function(){this.style.setProperty(t,e,n)}}function a2(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function l2(t,e,n){return arguments.length>1?this.each((e==null?s2:typeof e=="function"?a2:o2)(t,e,n??"")):kl(this.node(),t)}function kl(t,e){return t.style.getPropertyValue(e)||XT(t).getComputedStyle(t,null).getPropertyValue(e)}function u2(t){return function(){delete this[t]}}function c2(t,e){return function(){this[t]=e}}function f2(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function h2(t,e){return arguments.length>1?this.each((e==null?u2:typeof e=="function"?f2:c2)(t,e)):this.node()[t]}function QT(t){return t.trim().split(/^|\s+/)}function Xy(t){return t.classList||new WT(t)}function WT(t){this._node=t,this._names=QT(t.getAttribute("class")||"")}WT.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ZT(t,e){for(var n=Xy(t),r=-1,o=e.length;++r<o;)n.add(e[r])}function JT(t,e){for(var n=Xy(t),r=-1,o=e.length;++r<o;)n.remove(e[r])}function d2(t){return function(){ZT(this,t)}}function m2(t){return function(){JT(this,t)}}function p2(t,e){return function(){(e.apply(this,arguments)?ZT:JT)(this,t)}}function g2(t,e){var n=QT(t+"");if(arguments.length<2){for(var r=Xy(this.node()),o=-1,l=n.length;++o<l;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof e=="function"?p2:e?d2:m2)(n,e))}function y2(){this.textContent=""}function v2(t){return function(){this.textContent=t}}function _2(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function E2(t){return arguments.length?this.each(t==null?y2:(typeof t=="function"?_2:v2)(t)):this.node().textContent}function w2(){this.innerHTML=""}function b2(t){return function(){this.innerHTML=t}}function S2(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function T2(t){return arguments.length?this.each(t==null?w2:(typeof t=="function"?S2:b2)(t)):this.node().innerHTML}function A2(){this.nextSibling&&this.parentNode.appendChild(this)}function R2(){return this.each(A2)}function x2(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function I2(){return this.each(x2)}function C2(t){var e=typeof t=="function"?t:qT(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function N2(){return null}function D2(t,e){var n=typeof t=="function"?t:qT(t),r=e==null?N2:typeof e=="function"?e:Ky(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function O2(){var t=this.parentNode;t&&t.removeChild(this)}function M2(){return this.each(O2)}function k2(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function V2(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function P2(t){return this.select(t?V2:k2)}function L2(t){return arguments.length?this.property("__data__",t):this.node().__data__}function z2(t){return function(e){t.call(this,e,this.__data__)}}function U2(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function B2(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,o=e.length,l;n<o;++n)l=e[n],(!t.type||l.type===t.type)&&l.name===t.name?this.removeEventListener(l.type,l.listener,l.options):e[++r]=l;++r?e.length=r:delete this.__on}}}function j2(t,e,n){return function(){var r=this.__on,o,l=z2(e);if(r){for(var u=0,f=r.length;u<f;++u)if((o=r[u]).type===t.type&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=l,o.options=n),o.value=e;return}}this.addEventListener(t.type,l,n),o={type:t.type,name:t.name,value:e,listener:l,options:n},r?r.push(o):this.__on=[o]}}function H2(t,e,n){var r=U2(t+""),o,l=r.length,u;if(arguments.length<2){var f=this.node().__on;if(f){for(var d=0,p=f.length,g;d<p;++d)for(o=0,g=f[d];o<l;++o)if((u=r[o]).type===g.type&&u.name===g.name)return g.value}return}for(f=e?j2:B2,o=0;o<l;++o)this.each(f(r[o],e,n));return this}function e1(t,e,n){var r=XT(t),o=r.CustomEvent;typeof o=="function"?o=new o(e,n):(o=r.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function F2(t,e){return function(){return e1(this,t,e)}}function q2(t,e){return function(){return e1(this,t,e.apply(this,arguments))}}function $2(t,e){return this.each((typeof e=="function"?q2:F2)(t,e))}function*G2(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],o=0,l=r.length,u;o<l;++o)(u=r[o])&&(yield u)}var t1=[null];function ji(t,e){this._groups=t,this._parents=e}function jc(){return new ji([[document.documentElement]],t1)}function Y2(){return this}ji.prototype=jc.prototype={constructor:ji,select:_N,selectAll:SN,selectChild:xN,selectChildren:DN,filter:ON,data:zN,enter:MN,exit:BN,join:jN,merge:HN,selection:Y2,order:FN,sort:qN,call:GN,nodes:YN,node:KN,size:XN,empty:QN,each:WN,attr:r2,style:l2,property:h2,classed:g2,text:E2,html:T2,raise:R2,lower:I2,append:C2,insert:D2,remove:M2,clone:P2,datum:L2,on:H2,dispatch:$2,[Symbol.iterator]:G2};function vr(t){return typeof t=="string"?new ji([[document.querySelector(t)]],[document.documentElement]):new ji([[t]],t1)}function K2(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Br(t,e){if(t=K2(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}}return[t.pageX,t.pageY]}const X2={passive:!1},wc={capture:!0,passive:!1};function dg(t){t.stopImmediatePropagation()}function Al(t){t.preventDefault(),t.stopImmediatePropagation()}function n1(t){var e=t.document.documentElement,n=vr(t).on("dragstart.drag",Al,wc);"onselectstart"in e?n.on("selectstart.drag",Al,wc):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function i1(t,e){var n=t.document.documentElement,r=vr(t).on("dragstart.drag",null);e&&(r.on("click.drag",Al,wc),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Eh=t=>()=>t;function Zg(t,{sourceEvent:e,subject:n,target:r,identifier:o,active:l,x:u,y:f,dx:d,dy:p,dispatch:g}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:f,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:g}})}Zg.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Q2(t){return!t.ctrlKey&&!t.button}function W2(){return this.parentNode}function Z2(t,e){return e??{x:t.x,y:t.y}}function J2(){return navigator.maxTouchPoints||"ontouchstart"in this}function eD(){var t=Q2,e=W2,n=Z2,r=J2,o={},l=kd("start","drag","end"),u=0,f,d,p,g,v=0;function E(j){j.on("mousedown.drag",b).filter(r).on("touchstart.drag",D).on("touchmove.drag",P,X2).on("touchend.drag touchcancel.drag",H).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(j,X){if(!(g||!t.call(this,j,X))){var Z=F(this,e.call(this,j,X),j,X,"mouse");Z&&(vr(j.view).on("mousemove.drag",x,wc).on("mouseup.drag",M,wc),n1(j.view),dg(j),p=!1,f=j.clientX,d=j.clientY,Z("start",j))}}function x(j){if(Al(j),!p){var X=j.clientX-f,Z=j.clientY-d;p=X*X+Z*Z>v}o.mouse("drag",j)}function M(j){vr(j.view).on("mousemove.drag mouseup.drag",null),i1(j.view,p),Al(j),o.mouse("end",j)}function D(j,X){if(t.call(this,j,X)){var Z=j.changedTouches,R=e.call(this,j,X),T=Z.length,I,N;for(I=0;I<T;++I)(N=F(this,R,j,X,Z[I].identifier,Z[I]))&&(dg(j),N("start",j,Z[I]))}}function P(j){var X=j.changedTouches,Z=X.length,R,T;for(R=0;R<Z;++R)(T=o[X[R].identifier])&&(Al(j),T("drag",j,X[R]))}function H(j){var X=j.changedTouches,Z=X.length,R,T;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),R=0;R<Z;++R)(T=o[X[R].identifier])&&(dg(j),T("end",j,X[R]))}function F(j,X,Z,R,T,I){var N=l.copy(),U=Br(I||Z,X),B,A,k;if((k=n.call(j,new Zg("beforestart",{sourceEvent:Z,target:E,identifier:T,active:u,x:U[0],y:U[1],dx:0,dy:0,dispatch:N}),R))!=null)return B=k.x-U[0]||0,A=k.y-U[1]||0,function q(V,G,ee){var J=U,L;switch(V){case"start":o[T]=q,L=u++;break;case"end":delete o[T],--u;case"drag":U=Br(ee||G,X),L=u;break}N.call(V,j,new Zg(V,{sourceEvent:G,subject:k,target:E,identifier:T,active:L,x:U[0]+B,y:U[1]+A,dx:U[0]-J[0],dy:U[1]-J[1],dispatch:N}),R)}}return E.filter=function(j){return arguments.length?(t=typeof j=="function"?j:Eh(!!j),E):t},E.container=function(j){return arguments.length?(e=typeof j=="function"?j:Eh(j),E):e},E.subject=function(j){return arguments.length?(n=typeof j=="function"?j:Eh(j),E):n},E.touchable=function(j){return arguments.length?(r=typeof j=="function"?j:Eh(!!j),E):r},E.on=function(){var j=l.on.apply(l,arguments);return j===l?E:j},E.clickDistance=function(j){return arguments.length?(v=(j=+j)*j,E):Math.sqrt(v)},E}function Qy(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function r1(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Hc(){}var bc=.7,id=1/bc,Rl="\\s*([+-]?\\d+)\\s*",Sc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Hr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tD=/^#([0-9a-f]{3,8})$/,nD=new RegExp(`^rgb\\(${Rl},${Rl},${Rl}\\)$`),iD=new RegExp(`^rgb\\(${Hr},${Hr},${Hr}\\)$`),rD=new RegExp(`^rgba\\(${Rl},${Rl},${Rl},${Sc}\\)$`),sD=new RegExp(`^rgba\\(${Hr},${Hr},${Hr},${Sc}\\)$`),oD=new RegExp(`^hsl\\(${Sc},${Hr},${Hr}\\)$`),aD=new RegExp(`^hsla\\(${Sc},${Hr},${Hr},${Sc}\\)$`),Gw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Qy(Hc,Tc,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Yw,formatHex:Yw,formatHex8:lD,formatHsl:uD,formatRgb:Kw,toString:Kw});function Yw(){return this.rgb().formatHex()}function lD(){return this.rgb().formatHex8()}function uD(){return s1(this).formatHsl()}function Kw(){return this.rgb().formatRgb()}function Tc(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=tD.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Xw(e):n===3?new Ri(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?wh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?wh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=nD.exec(t))?new Ri(e[1],e[2],e[3],1):(e=iD.exec(t))?new Ri(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=rD.exec(t))?wh(e[1],e[2],e[3],e[4]):(e=sD.exec(t))?wh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=oD.exec(t))?Zw(e[1],e[2]/100,e[3]/100,1):(e=aD.exec(t))?Zw(e[1],e[2]/100,e[3]/100,e[4]):Gw.hasOwnProperty(t)?Xw(Gw[t]):t==="transparent"?new Ri(NaN,NaN,NaN,0):null}function Xw(t){return new Ri(t>>16&255,t>>8&255,t&255,1)}function wh(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ri(t,e,n,r)}function cD(t){return t instanceof Hc||(t=Tc(t)),t?(t=t.rgb(),new Ri(t.r,t.g,t.b,t.opacity)):new Ri}function Jg(t,e,n,r){return arguments.length===1?cD(t):new Ri(t,e,n,r??1)}function Ri(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Qy(Ri,Jg,r1(Hc,{brighter(t){return t=t==null?id:Math.pow(id,t),new Ri(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?bc:Math.pow(bc,t),new Ri(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ri(ha(this.r),ha(this.g),ha(this.b),rd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qw,formatHex:Qw,formatHex8:fD,formatRgb:Ww,toString:Ww}));function Qw(){return`#${ua(this.r)}${ua(this.g)}${ua(this.b)}`}function fD(){return`#${ua(this.r)}${ua(this.g)}${ua(this.b)}${ua((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ww(){const t=rd(this.opacity);return`${t===1?"rgb(":"rgba("}${ha(this.r)}, ${ha(this.g)}, ${ha(this.b)}${t===1?")":`, ${t})`}`}function rd(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ha(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ua(t){return t=ha(t),(t<16?"0":"")+t.toString(16)}function Zw(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new _r(t,e,n,r)}function s1(t){if(t instanceof _r)return new _r(t.h,t.s,t.l,t.opacity);if(t instanceof Hc||(t=Tc(t)),!t)return new _r;if(t instanceof _r)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,o=Math.min(e,n,r),l=Math.max(e,n,r),u=NaN,f=l-o,d=(l+o)/2;return f?(e===l?u=(n-r)/f+(n<r)*6:n===l?u=(r-e)/f+2:u=(e-n)/f+4,f/=d<.5?l+o:2-l-o,u*=60):f=d>0&&d<1?0:u,new _r(u,f,d,t.opacity)}function hD(t,e,n,r){return arguments.length===1?s1(t):new _r(t,e,n,r??1)}function _r(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Qy(_r,hD,r1(Hc,{brighter(t){return t=t==null?id:Math.pow(id,t),new _r(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?bc:Math.pow(bc,t),new _r(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,o=2*n-r;return new Ri(mg(t>=240?t-240:t+120,o,r),mg(t,o,r),mg(t<120?t+240:t-120,o,r),this.opacity)},clamp(){return new _r(Jw(this.h),bh(this.s),bh(this.l),rd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=rd(this.opacity);return`${t===1?"hsl(":"hsla("}${Jw(this.h)}, ${bh(this.s)*100}%, ${bh(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Jw(t){return t=(t||0)%360,t<0?t+360:t}function bh(t){return Math.max(0,Math.min(1,t||0))}function mg(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const o1=t=>()=>t;function dD(t,e){return function(n){return t+n*e}}function mD(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function pD(t){return(t=+t)==1?a1:function(e,n){return n-e?mD(e,n,t):o1(isNaN(e)?n:e)}}function a1(t,e){var n=e-t;return n?dD(t,n):o1(isNaN(t)?e:t)}const eb=function t(e){var n=pD(e);function r(o,l){var u=n((o=Jg(o)).r,(l=Jg(l)).r),f=n(o.g,l.g),d=n(o.b,l.b),p=a1(o.opacity,l.opacity);return function(g){return o.r=u(g),o.g=f(g),o.b=d(g),o.opacity=p(g),o+""}}return r.gamma=t,r}(1);function io(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var ey=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pg=new RegExp(ey.source,"g");function gD(t){return function(){return t}}function yD(t){return function(e){return t(e)+""}}function vD(t,e){var n=ey.lastIndex=pg.lastIndex=0,r,o,l,u=-1,f=[],d=[];for(t=t+"",e=e+"";(r=ey.exec(t))&&(o=pg.exec(e));)(l=o.index)>n&&(l=e.slice(n,l),f[u]?f[u]+=l:f[++u]=l),(r=r[0])===(o=o[0])?f[u]?f[u]+=o:f[++u]=o:(f[++u]=null,d.push({i:u,x:io(r,o)})),n=pg.lastIndex;return n<e.length&&(l=e.slice(n),f[u]?f[u]+=l:f[++u]=l),f.length<2?d[0]?yD(d[0].x):gD(e):(e=d.length,function(p){for(var g=0,v;g<e;++g)f[(v=d[g]).i]=v.x(p);return f.join("")})}var tb=180/Math.PI,ty={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function l1(t,e,n,r,o,l){var u,f,d;return(u=Math.sqrt(t*t+e*e))&&(t/=u,e/=u),(d=t*n+e*r)&&(n-=t*d,r-=e*d),(f=Math.sqrt(n*n+r*r))&&(n/=f,r/=f,d/=f),t*r<e*n&&(t=-t,e=-e,d=-d,u=-u),{translateX:o,translateY:l,rotate:Math.atan2(e,t)*tb,skewX:Math.atan(d)*tb,scaleX:u,scaleY:f}}var Sh;function _D(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ty:l1(e.a,e.b,e.c,e.d,e.e,e.f)}function ED(t){return t==null||(Sh||(Sh=document.createElementNS("http://www.w3.org/2000/svg","g")),Sh.setAttribute("transform",t),!(t=Sh.transform.baseVal.consolidate()))?ty:(t=t.matrix,l1(t.a,t.b,t.c,t.d,t.e,t.f))}function u1(t,e,n,r){function o(p){return p.length?p.pop()+" ":""}function l(p,g,v,E,b,x){if(p!==v||g!==E){var M=b.push("translate(",null,e,null,n);x.push({i:M-4,x:io(p,v)},{i:M-2,x:io(g,E)})}else(v||E)&&b.push("translate("+v+e+E+n)}function u(p,g,v,E){p!==g?(p-g>180?g+=360:g-p>180&&(p+=360),E.push({i:v.push(o(v)+"rotate(",null,r)-2,x:io(p,g)})):g&&v.push(o(v)+"rotate("+g+r)}function f(p,g,v,E){p!==g?E.push({i:v.push(o(v)+"skewX(",null,r)-2,x:io(p,g)}):g&&v.push(o(v)+"skewX("+g+r)}function d(p,g,v,E,b,x){if(p!==v||g!==E){var M=b.push(o(b)+"scale(",null,",",null,")");x.push({i:M-4,x:io(p,v)},{i:M-2,x:io(g,E)})}else(v!==1||E!==1)&&b.push(o(b)+"scale("+v+","+E+")")}return function(p,g){var v=[],E=[];return p=t(p),g=t(g),l(p.translateX,p.translateY,g.translateX,g.translateY,v,E),u(p.rotate,g.rotate,v,E),f(p.skewX,g.skewX,v,E),d(p.scaleX,p.scaleY,g.scaleX,g.scaleY,v,E),p=g=null,function(b){for(var x=-1,M=E.length,D;++x<M;)v[(D=E[x]).i]=D.x(b);return v.join("")}}}var wD=u1(_D,"px, ","px)","deg)"),bD=u1(ED,", ",")",")"),SD=1e-12;function nb(t){return((t=Math.exp(t))+1/t)/2}function TD(t){return((t=Math.exp(t))-1/t)/2}function AD(t){return((t=Math.exp(2*t))-1)/(t+1)}const RD=function t(e,n,r){function o(l,u){var f=l[0],d=l[1],p=l[2],g=u[0],v=u[1],E=u[2],b=g-f,x=v-d,M=b*b+x*x,D,P;if(M<SD)P=Math.log(E/p)/e,D=function(R){return[f+R*b,d+R*x,p*Math.exp(e*R*P)]};else{var H=Math.sqrt(M),F=(E*E-p*p+r*M)/(2*p*n*H),j=(E*E-p*p-r*M)/(2*E*n*H),X=Math.log(Math.sqrt(F*F+1)-F),Z=Math.log(Math.sqrt(j*j+1)-j);P=(Z-X)/e,D=function(R){var T=R*P,I=nb(X),N=p/(n*H)*(I*AD(e*T+X)-TD(X));return[f+N*b,d+N*x,p*I/nb(e*T+X)]}}return D.duration=P*1e3*e/Math.SQRT2,D}return o.rho=function(l){var u=Math.max(.001,+l),f=u*u,d=f*f;return t(u,f,d)},o}(Math.SQRT2,2,4);var Vl=0,rc=0,Wu=0,c1=1e3,sd,sc,od=0,ma=0,Pd=0,Ac=typeof performance=="object"&&performance.now?performance:Date,f1=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Wy(){return ma||(f1(xD),ma=Ac.now()+Pd)}function xD(){ma=0}function ad(){this._call=this._time=this._next=null}ad.prototype=h1.prototype={constructor:ad,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Wy():+n)+(e==null?0:+e),!this._next&&sc!==this&&(sc?sc._next=this:sd=this,sc=this),this._call=t,this._time=n,ny()},stop:function(){this._call&&(this._call=null,this._time=1/0,ny())}};function h1(t,e,n){var r=new ad;return r.restart(t,e,n),r}function ID(){Wy(),++Vl;for(var t=sd,e;t;)(e=ma-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Vl}function ib(){ma=(od=Ac.now())+Pd,Vl=rc=0;try{ID()}finally{Vl=0,ND(),ma=0}}function CD(){var t=Ac.now(),e=t-od;e>c1&&(Pd-=e,od=t)}function ND(){for(var t,e=sd,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:sd=n);sc=t,ny(r)}function ny(t){if(!Vl){rc&&(rc=clearTimeout(rc));var e=t-ma;e>24?(t<1/0&&(rc=setTimeout(ib,t-Ac.now()-Pd)),Wu&&(Wu=clearInterval(Wu))):(Wu||(od=Ac.now(),Wu=setInterval(CD,c1)),Vl=1,f1(ib))}}function rb(t,e,n){var r=new ad;return e=e==null?0:+e,r.restart(o=>{r.stop(),t(o+e)},e,n),r}var DD=kd("start","end","cancel","interrupt"),OD=[],d1=0,sb=1,iy=2,jh=3,ob=4,ry=5,Hh=6;function Ld(t,e,n,r,o,l){var u=t.__transition;if(!u)t.__transition={};else if(n in u)return;MD(t,n,{name:e,index:r,group:o,on:DD,tween:OD,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:d1})}function Zy(t,e){var n=Tr(t,e);if(n.state>d1)throw new Error("too late; already scheduled");return n}function Kr(t,e){var n=Tr(t,e);if(n.state>jh)throw new Error("too late; already running");return n}function Tr(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function MD(t,e,n){var r=t.__transition,o;r[e]=n,n.timer=h1(l,0,n.time);function l(p){n.state=sb,n.timer.restart(u,n.delay,n.time),n.delay<=p&&u(p-n.delay)}function u(p){var g,v,E,b;if(n.state!==sb)return d();for(g in r)if(b=r[g],b.name===n.name){if(b.state===jh)return rb(u);b.state===ob?(b.state=Hh,b.timer.stop(),b.on.call("interrupt",t,t.__data__,b.index,b.group),delete r[g]):+g<e&&(b.state=Hh,b.timer.stop(),b.on.call("cancel",t,t.__data__,b.index,b.group),delete r[g])}if(rb(function(){n.state===jh&&(n.state=ob,n.timer.restart(f,n.delay,n.time),f(p))}),n.state=iy,n.on.call("start",t,t.__data__,n.index,n.group),n.state===iy){for(n.state=jh,o=new Array(E=n.tween.length),g=0,v=-1;g<E;++g)(b=n.tween[g].value.call(t,t.__data__,n.index,n.group))&&(o[++v]=b);o.length=v+1}}function f(p){for(var g=p<n.duration?n.ease.call(null,p/n.duration):(n.timer.restart(d),n.state=ry,1),v=-1,E=o.length;++v<E;)o[v].call(t,g);n.state===ry&&(n.on.call("end",t,t.__data__,n.index,n.group),d())}function d(){n.state=Hh,n.timer.stop(),delete r[e];for(var p in r)return;delete t.__transition}}function Fh(t,e){var n=t.__transition,r,o,l=!0,u;if(n){e=e==null?null:e+"";for(u in n){if((r=n[u]).name!==e){l=!1;continue}o=r.state>iy&&r.state<ry,r.state=Hh,r.timer.stop(),r.on.call(o?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[u]}l&&delete t.__transition}}function kD(t){return this.each(function(){Fh(this,t)})}function VD(t,e){var n,r;return function(){var o=Kr(this,t),l=o.tween;if(l!==n){r=n=l;for(var u=0,f=r.length;u<f;++u)if(r[u].name===e){r=r.slice(),r.splice(u,1);break}}o.tween=r}}function PD(t,e,n){var r,o;if(typeof n!="function")throw new Error;return function(){var l=Kr(this,t),u=l.tween;if(u!==r){o=(r=u).slice();for(var f={name:e,value:n},d=0,p=o.length;d<p;++d)if(o[d].name===e){o[d]=f;break}d===p&&o.push(f)}l.tween=o}}function LD(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Tr(this.node(),n).tween,o=0,l=r.length,u;o<l;++o)if((u=r[o]).name===t)return u.value;return null}return this.each((e==null?VD:PD)(n,t,e))}function Jy(t,e,n){var r=t._id;return t.each(function(){var o=Kr(this,r);(o.value||(o.value={}))[e]=n.apply(this,arguments)}),function(o){return Tr(o,r).value[e]}}function m1(t,e){var n;return(typeof e=="number"?io:e instanceof Tc?eb:(n=Tc(e))?(e=n,eb):vD)(t,e)}function zD(t){return function(){this.removeAttribute(t)}}function UD(t){return function(){this.removeAttributeNS(t.space,t.local)}}function BD(t,e,n){var r,o=n+"",l;return function(){var u=this.getAttribute(t);return u===o?null:u===r?l:l=e(r=u,n)}}function jD(t,e,n){var r,o=n+"",l;return function(){var u=this.getAttributeNS(t.space,t.local);return u===o?null:u===r?l:l=e(r=u,n)}}function HD(t,e,n){var r,o,l;return function(){var u,f=n(this),d;return f==null?void this.removeAttribute(t):(u=this.getAttribute(t),d=f+"",u===d?null:u===r&&d===o?l:(o=d,l=e(r=u,f)))}}function FD(t,e,n){var r,o,l;return function(){var u,f=n(this),d;return f==null?void this.removeAttributeNS(t.space,t.local):(u=this.getAttributeNS(t.space,t.local),d=f+"",u===d?null:u===r&&d===o?l:(o=d,l=e(r=u,f)))}}function qD(t,e){var n=Vd(t),r=n==="transform"?bD:m1;return this.attrTween(t,typeof e=="function"?(n.local?FD:HD)(n,r,Jy(this,"attr."+t,e)):e==null?(n.local?UD:zD)(n):(n.local?jD:BD)(n,r,e))}function $D(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function GD(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function YD(t,e){var n,r;function o(){var l=e.apply(this,arguments);return l!==r&&(n=(r=l)&&GD(t,l)),n}return o._value=e,o}function KD(t,e){var n,r;function o(){var l=e.apply(this,arguments);return l!==r&&(n=(r=l)&&$D(t,l)),n}return o._value=e,o}function XD(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Vd(t);return this.tween(n,(r.local?YD:KD)(r,e))}function QD(t,e){return function(){Zy(this,t).delay=+e.apply(this,arguments)}}function WD(t,e){return e=+e,function(){Zy(this,t).delay=e}}function ZD(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?QD:WD)(e,t)):Tr(this.node(),e).delay}function JD(t,e){return function(){Kr(this,t).duration=+e.apply(this,arguments)}}function eO(t,e){return e=+e,function(){Kr(this,t).duration=e}}function tO(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?JD:eO)(e,t)):Tr(this.node(),e).duration}function nO(t,e){if(typeof e!="function")throw new Error;return function(){Kr(this,t).ease=e}}function iO(t){var e=this._id;return arguments.length?this.each(nO(e,t)):Tr(this.node(),e).ease}function rO(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Kr(this,t).ease=n}}function sO(t){if(typeof t!="function")throw new Error;return this.each(rO(this._id,t))}function oO(t){typeof t!="function"&&(t=GT(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var l=e[o],u=l.length,f=r[o]=[],d,p=0;p<u;++p)(d=l[p])&&t.call(d,d.__data__,p,l)&&f.push(d);return new bs(r,this._parents,this._name,this._id)}function aO(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,o=n.length,l=Math.min(r,o),u=new Array(r),f=0;f<l;++f)for(var d=e[f],p=n[f],g=d.length,v=u[f]=new Array(g),E,b=0;b<g;++b)(E=d[b]||p[b])&&(v[b]=E);for(;f<r;++f)u[f]=e[f];return new bs(u,this._parents,this._name,this._id)}function lO(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function uO(t,e,n){var r,o,l=lO(e)?Zy:Kr;return function(){var u=l(this,t),f=u.on;f!==r&&(o=(r=f).copy()).on(e,n),u.on=o}}function cO(t,e){var n=this._id;return arguments.length<2?Tr(this.node(),n).on.on(t):this.each(uO(n,t,e))}function fO(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function hO(){return this.on("end.remove",fO(this._id))}function dO(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ky(t));for(var r=this._groups,o=r.length,l=new Array(o),u=0;u<o;++u)for(var f=r[u],d=f.length,p=l[u]=new Array(d),g,v,E=0;E<d;++E)(g=f[E])&&(v=t.call(g,g.__data__,E,f))&&("__data__"in g&&(v.__data__=g.__data__),p[E]=v,Ld(p[E],e,n,E,p,Tr(g,n)));return new bs(l,this._parents,e,n)}function mO(t){var e=this._name,n=this._id;typeof t!="function"&&(t=$T(t));for(var r=this._groups,o=r.length,l=[],u=[],f=0;f<o;++f)for(var d=r[f],p=d.length,g,v=0;v<p;++v)if(g=d[v]){for(var E=t.call(g,g.__data__,v,d),b,x=Tr(g,n),M=0,D=E.length;M<D;++M)(b=E[M])&&Ld(b,e,n,M,E,x);l.push(E),u.push(g)}return new bs(l,u,e,n)}var pO=jc.prototype.constructor;function gO(){return new pO(this._groups,this._parents)}function yO(t,e){var n,r,o;return function(){var l=kl(this,t),u=(this.style.removeProperty(t),kl(this,t));return l===u?null:l===n&&u===r?o:o=e(n=l,r=u)}}function p1(t){return function(){this.style.removeProperty(t)}}function vO(t,e,n){var r,o=n+"",l;return function(){var u=kl(this,t);return u===o?null:u===r?l:l=e(r=u,n)}}function _O(t,e,n){var r,o,l;return function(){var u=kl(this,t),f=n(this),d=f+"";return f==null&&(d=f=(this.style.removeProperty(t),kl(this,t))),u===d?null:u===r&&d===o?l:(o=d,l=e(r=u,f))}}function EO(t,e){var n,r,o,l="style."+e,u="end."+l,f;return function(){var d=Kr(this,t),p=d.on,g=d.value[l]==null?f||(f=p1(e)):void 0;(p!==n||o!==g)&&(r=(n=p).copy()).on(u,o=g),d.on=r}}function wO(t,e,n){var r=(t+="")=="transform"?wD:m1;return e==null?this.styleTween(t,yO(t,r)).on("end.style."+t,p1(t)):typeof e=="function"?this.styleTween(t,_O(t,r,Jy(this,"style."+t,e))).each(EO(this._id,t)):this.styleTween(t,vO(t,r,e),n).on("end.style."+t,null)}function bO(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function SO(t,e,n){var r,o;function l(){var u=e.apply(this,arguments);return u!==o&&(r=(o=u)&&bO(t,u,n)),r}return l._value=e,l}function TO(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,SO(t,e,n??""))}function AO(t){return function(){this.textContent=t}}function RO(t){return function(){var e=t(this);this.textContent=e??""}}function xO(t){return this.tween("text",typeof t=="function"?RO(Jy(this,"text",t)):AO(t==null?"":t+""))}function IO(t){return function(e){this.textContent=t.call(this,e)}}function CO(t){var e,n;function r(){var o=t.apply(this,arguments);return o!==n&&(e=(n=o)&&IO(o)),e}return r._value=t,r}function NO(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,CO(t))}function DO(){for(var t=this._name,e=this._id,n=g1(),r=this._groups,o=r.length,l=0;l<o;++l)for(var u=r[l],f=u.length,d,p=0;p<f;++p)if(d=u[p]){var g=Tr(d,e);Ld(d,t,n,p,u,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new bs(r,this._parents,t,n)}function OO(){var t,e,n=this,r=n._id,o=n.size();return new Promise(function(l,u){var f={value:u},d={value:function(){--o===0&&l()}};n.each(function(){var p=Kr(this,r),g=p.on;g!==t&&(e=(t=g).copy(),e._.cancel.push(f),e._.interrupt.push(f),e._.end.push(d)),p.on=e}),o===0&&l()})}var MO=0;function bs(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function g1(){return++MO}var gs=jc.prototype;bs.prototype={constructor:bs,select:dO,selectAll:mO,selectChild:gs.selectChild,selectChildren:gs.selectChildren,filter:oO,merge:aO,selection:gO,transition:DO,call:gs.call,nodes:gs.nodes,node:gs.node,size:gs.size,empty:gs.empty,each:gs.each,on:cO,attr:qD,attrTween:XD,style:wO,styleTween:TO,text:xO,textTween:NO,remove:hO,tween:LD,delay:ZD,duration:tO,ease:iO,easeVarying:sO,end:OO,[Symbol.iterator]:gs[Symbol.iterator]};function kO(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var VO={time:null,delay:0,duration:250,ease:kO};function PO(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function LO(t){var e,n;t instanceof bs?(e=t._id,t=t._name):(e=g1(),(n=VO).time=Wy(),t=t==null?null:t+"");for(var r=this._groups,o=r.length,l=0;l<o;++l)for(var u=r[l],f=u.length,d,p=0;p<f;++p)(d=u[p])&&Ld(d,t,e,p,u,n||PO(d,e));return new bs(r,this._parents,t,e)}jc.prototype.interrupt=kD;jc.prototype.transition=LO;const Th=t=>()=>t;function zO(t,{sourceEvent:e,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function ys(t,e,n){this.k=t,this.x=e,this.y=n}ys.prototype={constructor:ys,scale:function(t){return t===1?this:new ys(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ys(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var mo=new ys(1,0,0);ys.prototype;function gg(t){t.stopImmediatePropagation()}function Zu(t){t.preventDefault(),t.stopImmediatePropagation()}function UO(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function BO(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function ab(){return this.__zoom||mo}function jO(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function HO(){return navigator.maxTouchPoints||"ontouchstart"in this}function FO(t,e,n){var r=t.invertX(e[0][0])-n[0][0],o=t.invertX(e[1][0])-n[1][0],l=t.invertY(e[0][1])-n[0][1],u=t.invertY(e[1][1])-n[1][1];return t.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),u>l?(l+u)/2:Math.min(0,l)||Math.max(0,u))}function qO(){var t=UO,e=BO,n=FO,r=jO,o=HO,l=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],f=250,d=RD,p=kd("start","zoom","end"),g,v,E,b=500,x=150,M=0,D=10;function P(k){k.property("__zoom",ab).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",N).filter(o).on("touchstart.zoom",U).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",A).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}P.transform=function(k,q,V,G){var ee=k.selection?k.selection():k;ee.property("__zoom",ab),k!==ee?X(k,q,V,G):ee.interrupt().each(function(){Z(this,arguments).event(G).start().zoom(null,typeof q=="function"?q.apply(this,arguments):q).end()})},P.scaleBy=function(k,q,V,G){P.scaleTo(k,function(){var ee=this.__zoom.k,J=typeof q=="function"?q.apply(this,arguments):q;return ee*J},V,G)},P.scaleTo=function(k,q,V,G){P.transform(k,function(){var ee=e.apply(this,arguments),J=this.__zoom,L=V==null?j(ee):typeof V=="function"?V.apply(this,arguments):V,Y=J.invert(L),ie=typeof q=="function"?q.apply(this,arguments):q;return n(F(H(J,ie),L,Y),ee,u)},V,G)},P.translateBy=function(k,q,V,G){P.transform(k,function(){return n(this.__zoom.translate(typeof q=="function"?q.apply(this,arguments):q,typeof V=="function"?V.apply(this,arguments):V),e.apply(this,arguments),u)},null,G)},P.translateTo=function(k,q,V,G,ee){P.transform(k,function(){var J=e.apply(this,arguments),L=this.__zoom,Y=G==null?j(J):typeof G=="function"?G.apply(this,arguments):G;return n(mo.translate(Y[0],Y[1]).scale(L.k).translate(typeof q=="function"?-q.apply(this,arguments):-q,typeof V=="function"?-V.apply(this,arguments):-V),J,u)},G,ee)};function H(k,q){return q=Math.max(l[0],Math.min(l[1],q)),q===k.k?k:new ys(q,k.x,k.y)}function F(k,q,V){var G=q[0]-V[0]*k.k,ee=q[1]-V[1]*k.k;return G===k.x&&ee===k.y?k:new ys(k.k,G,ee)}function j(k){return[(+k[0][0]+ +k[1][0])/2,(+k[0][1]+ +k[1][1])/2]}function X(k,q,V,G){k.on("start.zoom",function(){Z(this,arguments).event(G).start()}).on("interrupt.zoom end.zoom",function(){Z(this,arguments).event(G).end()}).tween("zoom",function(){var ee=this,J=arguments,L=Z(ee,J).event(G),Y=e.apply(ee,J),ie=V==null?j(Y):typeof V=="function"?V.apply(ee,J):V,ne=Math.max(Y[1][0]-Y[0][0],Y[1][1]-Y[0][1]),he=ee.__zoom,_e=typeof q=="function"?q.apply(ee,J):q,we=d(he.invert(ie).concat(ne/he.k),_e.invert(ie).concat(ne/_e.k));return function(Oe){if(Oe===1)Oe=_e;else{var ve=we(Oe),Se=ne/ve[2];Oe=new ys(Se,ie[0]-ve[0]*Se,ie[1]-ve[1]*Se)}L.zoom(null,Oe)}})}function Z(k,q,V){return!V&&k.__zooming||new R(k,q)}function R(k,q){this.that=k,this.args=q,this.active=0,this.sourceEvent=null,this.extent=e.apply(k,q),this.taps=0}R.prototype={event:function(k){return k&&(this.sourceEvent=k),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(k,q){return this.mouse&&k!=="mouse"&&(this.mouse[1]=q.invert(this.mouse[0])),this.touch0&&k!=="touch"&&(this.touch0[1]=q.invert(this.touch0[0])),this.touch1&&k!=="touch"&&(this.touch1[1]=q.invert(this.touch1[0])),this.that.__zoom=q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(k){var q=vr(this.that).datum();p.call(k,this.that,new zO(k,{sourceEvent:this.sourceEvent,target:P,transform:this.that.__zoom,dispatch:p}),q)}};function T(k,...q){if(!t.apply(this,arguments))return;var V=Z(this,q).event(k),G=this.__zoom,ee=Math.max(l[0],Math.min(l[1],G.k*Math.pow(2,r.apply(this,arguments)))),J=Br(k);if(V.wheel)(V.mouse[0][0]!==J[0]||V.mouse[0][1]!==J[1])&&(V.mouse[1]=G.invert(V.mouse[0]=J)),clearTimeout(V.wheel);else{if(G.k===ee)return;V.mouse=[J,G.invert(J)],Fh(this),V.start()}Zu(k),V.wheel=setTimeout(L,x),V.zoom("mouse",n(F(H(G,ee),V.mouse[0],V.mouse[1]),V.extent,u));function L(){V.wheel=null,V.end()}}function I(k,...q){if(E||!t.apply(this,arguments))return;var V=k.currentTarget,G=Z(this,q,!0).event(k),ee=vr(k.view).on("mousemove.zoom",ie,!0).on("mouseup.zoom",ne,!0),J=Br(k,V),L=k.clientX,Y=k.clientY;n1(k.view),gg(k),G.mouse=[J,this.__zoom.invert(J)],Fh(this),G.start();function ie(he){if(Zu(he),!G.moved){var _e=he.clientX-L,we=he.clientY-Y;G.moved=_e*_e+we*we>M}G.event(he).zoom("mouse",n(F(G.that.__zoom,G.mouse[0]=Br(he,V),G.mouse[1]),G.extent,u))}function ne(he){ee.on("mousemove.zoom mouseup.zoom",null),i1(he.view,G.moved),Zu(he),G.event(he).end()}}function N(k,...q){if(t.apply(this,arguments)){var V=this.__zoom,G=Br(k.changedTouches?k.changedTouches[0]:k,this),ee=V.invert(G),J=V.k*(k.shiftKey?.5:2),L=n(F(H(V,J),G,ee),e.apply(this,q),u);Zu(k),f>0?vr(this).transition().duration(f).call(X,L,G,k):vr(this).call(P.transform,L,G,k)}}function U(k,...q){if(t.apply(this,arguments)){var V=k.touches,G=V.length,ee=Z(this,q,k.changedTouches.length===G).event(k),J,L,Y,ie;for(gg(k),L=0;L<G;++L)Y=V[L],ie=Br(Y,this),ie=[ie,this.__zoom.invert(ie),Y.identifier],ee.touch0?!ee.touch1&&ee.touch0[2]!==ie[2]&&(ee.touch1=ie,ee.taps=0):(ee.touch0=ie,J=!0,ee.taps=1+!!g);g&&(g=clearTimeout(g)),J&&(ee.taps<2&&(v=ie[0],g=setTimeout(function(){g=null},b)),Fh(this),ee.start())}}function B(k,...q){if(this.__zooming){var V=Z(this,q).event(k),G=k.changedTouches,ee=G.length,J,L,Y,ie;for(Zu(k),J=0;J<ee;++J)L=G[J],Y=Br(L,this),V.touch0&&V.touch0[2]===L.identifier?V.touch0[0]=Y:V.touch1&&V.touch1[2]===L.identifier&&(V.touch1[0]=Y);if(L=V.that.__zoom,V.touch1){var ne=V.touch0[0],he=V.touch0[1],_e=V.touch1[0],we=V.touch1[1],Oe=(Oe=_e[0]-ne[0])*Oe+(Oe=_e[1]-ne[1])*Oe,ve=(ve=we[0]-he[0])*ve+(ve=we[1]-he[1])*ve;L=H(L,Math.sqrt(Oe/ve)),Y=[(ne[0]+_e[0])/2,(ne[1]+_e[1])/2],ie=[(he[0]+we[0])/2,(he[1]+we[1])/2]}else if(V.touch0)Y=V.touch0[0],ie=V.touch0[1];else return;V.zoom("touch",n(F(L,Y,ie),V.extent,u))}}function A(k,...q){if(this.__zooming){var V=Z(this,q).event(k),G=k.changedTouches,ee=G.length,J,L;for(gg(k),E&&clearTimeout(E),E=setTimeout(function(){E=null},b),J=0;J<ee;++J)L=G[J],V.touch0&&V.touch0[2]===L.identifier?delete V.touch0:V.touch1&&V.touch1[2]===L.identifier&&delete V.touch1;if(V.touch1&&!V.touch0&&(V.touch0=V.touch1,delete V.touch1),V.touch0)V.touch0[1]=this.__zoom.invert(V.touch0[0]);else if(V.end(),V.taps===2&&(L=Br(L,this),Math.hypot(v[0]-L[0],v[1]-L[1])<D)){var Y=vr(this).on("dblclick.zoom");Y&&Y.apply(this,arguments)}}}return P.wheelDelta=function(k){return arguments.length?(r=typeof k=="function"?k:Th(+k),P):r},P.filter=function(k){return arguments.length?(t=typeof k=="function"?k:Th(!!k),P):t},P.touchable=function(k){return arguments.length?(o=typeof k=="function"?k:Th(!!k),P):o},P.extent=function(k){return arguments.length?(e=typeof k=="function"?k:Th([[+k[0][0],+k[0][1]],[+k[1][0],+k[1][1]]]),P):e},P.scaleExtent=function(k){return arguments.length?(l[0]=+k[0],l[1]=+k[1],P):[l[0],l[1]]},P.translateExtent=function(k){return arguments.length?(u[0][0]=+k[0][0],u[1][0]=+k[1][0],u[0][1]=+k[0][1],u[1][1]=+k[1][1],P):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},P.constrain=function(k){return arguments.length?(n=k,P):n},P.duration=function(k){return arguments.length?(f=+k,P):f},P.interpolate=function(k){return arguments.length?(d=k,P):d},P.on=function(){var k=p.on.apply(p,arguments);return k===p?P:k},P.clickDistance=function(k){return arguments.length?(M=(k=+k)*k,P):Math.sqrt(M)},P.tapDistance=function(k){return arguments.length?(D=+k,P):D},P}var $O=HT();const bl=Uc($O),zd=C.createContext(null),GO=zd.Provider,Ss={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},y1=Ss.error001();function $t(t,e){const n=C.useContext(zd);if(n===null)throw new Error(y1);return FT(n,t,e)}const Ln=()=>{const t=C.useContext(zd);if(t===null)throw new Error(y1);return C.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},YO=t=>t.userSelectionActive?"none":"all";function v1({position:t,children:e,className:n,style:r,...o}){const l=$t(YO),u=`${t}`.split("-");return fe.createElement("div",{className:vi(["react-flow__panel",n,...u]),style:{...r,pointerEvents:l},...o},e)}function KO({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:fe.createElement(v1,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},fe.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const XO=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:l={},labelBgPadding:u=[2,4],labelBgBorderRadius:f=2,children:d,className:p,...g})=>{const v=C.useRef(null),[E,b]=C.useState({x:0,y:0,width:0,height:0}),x=vi(["react-flow__edge-textwrapper",p]);return C.useEffect(()=>{if(v.current){const M=v.current.getBBox();b({x:M.x,y:M.y,width:M.width,height:M.height})}},[n]),typeof n>"u"||!n?null:fe.createElement("g",{transform:`translate(${t-E.width/2} ${e-E.height/2})`,className:x,visibility:E.width?"visible":"hidden",...g},o&&fe.createElement("rect",{width:E.width+2*u[0],x:-u[0],y:-u[1],height:E.height+2*u[1],className:"react-flow__edge-textbg",style:l,rx:f,ry:f}),fe.createElement("text",{className:"react-flow__edge-text",y:E.height/2,dy:"0.3em",ref:v,style:r},n),d)};var QO=C.memo(XO);const ev=t=>({width:t.offsetWidth,height:t.offsetHeight}),Pl=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),tv=(t={x:0,y:0},e)=>({x:Pl(t.x,e[0][0],e[1][0]),y:Pl(t.y,e[0][1],e[1][1])}),lb=(t,e,n)=>t<e?Pl(Math.abs(t-e),1,50)/50:t>n?-Pl(Math.abs(t-n),1,50)/50:0,_1=(t,e)=>{const n=lb(t.x,35,e.width-35)*20,r=lb(t.y,35,e.height-35)*20;return[n,r]},E1=t=>t.getRootNode?.()||window?.document,WO=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),nv=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),ZO=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),ub=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),sy=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},JO=t=>lr(t.width)&&lr(t.height)&&lr(t.x)&&lr(t.y),lr=t=>!isNaN(t)&&isFinite(t),en=Symbol.for("internals"),w1=["Enter"," ","Escape"],eM=(t,e)=>{},tM=t=>"nativeEvent"in t;function oy(t){const n=(tM(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const b1=t=>"clientX"in t,po=(t,e)=>{const n=b1(t),r=n?t.clientX:t.touches?.[0].clientX,o=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:o-(e?.top??0)}},ld=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Fc=({id:t,path:e,labelX:n,labelY:r,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:p,style:g,markerEnd:v,markerStart:E,interactionWidth:b=20})=>fe.createElement(fe.Fragment,null,fe.createElement("path",{id:t,style:g,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:v,markerStart:E}),b&&fe.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:b,className:"react-flow__edge-interaction"}),o&&lr(n)&&lr(r)?fe.createElement(QO,{x:n,y:r,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:p}):null);Fc.displayName="BaseEdge";function Ju(t,e,n){return n===void 0?n:r=>{const o=e().edges.find(l=>l.id===t);o&&n(r,{...o})}}function S1({sourceX:t,sourceY:e,targetX:n,targetY:r}){const o=Math.abs(n-t)/2,l=n<t?n+o:n-o,u=Math.abs(r-e)/2,f=r<e?r+u:r-u;return[l,f,o,u]}function T1({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:f}){const d=t*.125+o*.375+u*.375+n*.125,p=e*.125+l*.375+f*.375+r*.125,g=Math.abs(d-t),v=Math.abs(p-e);return[d,p,g,v]}var bo;(function(t){t.Strict="strict",t.Loose="loose"})(bo||(bo={}));var ca;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(ca||(ca={}));var Rc;(function(t){t.Partial="partial",t.Full="full"})(Rc||(Rc={}));var oo;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(oo||(oo={}));var xc;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(xc||(xc={}));var Ie;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Ie||(Ie={}));function cb({pos:t,x1:e,y1:n,x2:r,y2:o}){return t===Ie.Left||t===Ie.Right?[.5*(e+r),n]:[e,.5*(n+o)]}function A1({sourceX:t,sourceY:e,sourcePosition:n=Ie.Bottom,targetX:r,targetY:o,targetPosition:l=Ie.Top}){const[u,f]=cb({pos:n,x1:t,y1:e,x2:r,y2:o}),[d,p]=cb({pos:l,x1:r,y1:o,x2:t,y2:e}),[g,v,E,b]=T1({sourceX:t,sourceY:e,targetX:r,targetY:o,sourceControlX:u,sourceControlY:f,targetControlX:d,targetControlY:p});return[`M${t},${e} C${u},${f} ${d},${p} ${r},${o}`,g,v,E,b]}const iv=C.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:o=Ie.Bottom,targetPosition:l=Ie.Top,label:u,labelStyle:f,labelShowBg:d,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:v,style:E,markerEnd:b,markerStart:x,interactionWidth:M})=>{const[D,P,H]=A1({sourceX:t,sourceY:e,sourcePosition:o,targetX:n,targetY:r,targetPosition:l});return fe.createElement(Fc,{path:D,labelX:P,labelY:H,label:u,labelStyle:f,labelShowBg:d,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:v,style:E,markerEnd:b,markerStart:x,interactionWidth:M})});iv.displayName="SimpleBezierEdge";const fb={[Ie.Left]:{x:-1,y:0},[Ie.Right]:{x:1,y:0},[Ie.Top]:{x:0,y:-1},[Ie.Bottom]:{x:0,y:1}},nM=({source:t,sourcePosition:e=Ie.Bottom,target:n})=>e===Ie.Left||e===Ie.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},hb=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function iM({source:t,sourcePosition:e=Ie.Bottom,target:n,targetPosition:r=Ie.Top,center:o,offset:l}){const u=fb[e],f=fb[r],d={x:t.x+u.x*l,y:t.y+u.y*l},p={x:n.x+f.x*l,y:n.y+f.y*l},g=nM({source:d,sourcePosition:e,target:p}),v=g.x!==0?"x":"y",E=g[v];let b=[],x,M;const D={x:0,y:0},P={x:0,y:0},[H,F,j,X]=S1({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(u[v]*f[v]===-1){x=o.x??H,M=o.y??F;const R=[{x,y:d.y},{x,y:p.y}],T=[{x:d.x,y:M},{x:p.x,y:M}];u[v]===E?b=v==="x"?R:T:b=v==="x"?T:R}else{const R=[{x:d.x,y:p.y}],T=[{x:p.x,y:d.y}];if(v==="x"?b=u.x===E?T:R:b=u.y===E?R:T,e===r){const A=Math.abs(t[v]-n[v]);if(A<=l){const k=Math.min(l-1,l-A);u[v]===E?D[v]=(d[v]>t[v]?-1:1)*k:P[v]=(p[v]>n[v]?-1:1)*k}}if(e!==r){const A=v==="x"?"y":"x",k=u[v]===f[A],q=d[A]>p[A],V=d[A]<p[A];(u[v]===1&&(!k&&q||k&&V)||u[v]!==1&&(!k&&V||k&&q))&&(b=v==="x"?R:T)}const I={x:d.x+D.x,y:d.y+D.y},N={x:p.x+P.x,y:p.y+P.y},U=Math.max(Math.abs(I.x-b[0].x),Math.abs(N.x-b[0].x)),B=Math.max(Math.abs(I.y-b[0].y),Math.abs(N.y-b[0].y));U>=B?(x=(I.x+N.x)/2,M=b[0].y):(x=b[0].x,M=(I.y+N.y)/2)}return[[t,{x:d.x+D.x,y:d.y+D.y},...b,{x:p.x+P.x,y:p.y+P.y},n],x,M,j,X]}function rM(t,e,n,r){const o=Math.min(hb(t,e)/2,hb(e,n)/2,r),{x:l,y:u}=e;if(t.x===l&&l===n.x||t.y===u&&u===n.y)return`L${l} ${u}`;if(t.y===u){const p=t.x<n.x?-1:1,g=t.y<n.y?1:-1;return`L ${l+o*p},${u}Q ${l},${u} ${l},${u+o*g}`}const f=t.x<n.x?1:-1,d=t.y<n.y?-1:1;return`L ${l},${u+o*d}Q ${l},${u} ${l+o*f},${u}`}function ay({sourceX:t,sourceY:e,sourcePosition:n=Ie.Bottom,targetX:r,targetY:o,targetPosition:l=Ie.Top,borderRadius:u=5,centerX:f,centerY:d,offset:p=20}){const[g,v,E,b,x]=iM({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:o},targetPosition:l,center:{x:f,y:d},offset:p});return[g.reduce((D,P,H)=>{let F="";return H>0&&H<g.length-1?F=rM(g[H-1],P,g[H+1],u):F=`${H===0?"M":"L"}${P.x} ${P.y}`,D+=F,D},""),v,E,b,x]}const Ud=C.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:p,style:g,sourcePosition:v=Ie.Bottom,targetPosition:E=Ie.Top,markerEnd:b,markerStart:x,pathOptions:M,interactionWidth:D})=>{const[P,H,F]=ay({sourceX:t,sourceY:e,sourcePosition:v,targetX:n,targetY:r,targetPosition:E,borderRadius:M?.borderRadius,offset:M?.offset});return fe.createElement(Fc,{path:P,labelX:H,labelY:F,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:p,style:g,markerEnd:b,markerStart:x,interactionWidth:D})});Ud.displayName="SmoothStepEdge";const rv=C.memo(t=>fe.createElement(Ud,{...t,pathOptions:C.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));rv.displayName="StepEdge";function sM({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[o,l,u,f]=S1({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,o,l,u,f]}const sv=C.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:p,style:g,markerEnd:v,markerStart:E,interactionWidth:b})=>{const[x,M,D]=sM({sourceX:t,sourceY:e,targetX:n,targetY:r});return fe.createElement(Fc,{path:x,labelX:M,labelY:D,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:p,style:g,markerEnd:v,markerStart:E,interactionWidth:b})});sv.displayName="StraightEdge";function Ah(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function db({pos:t,x1:e,y1:n,x2:r,y2:o,c:l}){switch(t){case Ie.Left:return[e-Ah(e-r,l),n];case Ie.Right:return[e+Ah(r-e,l),n];case Ie.Top:return[e,n-Ah(n-o,l)];case Ie.Bottom:return[e,n+Ah(o-n,l)]}}function R1({sourceX:t,sourceY:e,sourcePosition:n=Ie.Bottom,targetX:r,targetY:o,targetPosition:l=Ie.Top,curvature:u=.25}){const[f,d]=db({pos:n,x1:t,y1:e,x2:r,y2:o,c:u}),[p,g]=db({pos:l,x1:r,y1:o,x2:t,y2:e,c:u}),[v,E,b,x]=T1({sourceX:t,sourceY:e,targetX:r,targetY:o,sourceControlX:f,sourceControlY:d,targetControlX:p,targetControlY:g});return[`M${t},${e} C${f},${d} ${p},${g} ${r},${o}`,v,E,b,x]}const ud=C.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:o=Ie.Bottom,targetPosition:l=Ie.Top,label:u,labelStyle:f,labelShowBg:d,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:v,style:E,markerEnd:b,markerStart:x,pathOptions:M,interactionWidth:D})=>{const[P,H,F]=R1({sourceX:t,sourceY:e,sourcePosition:o,targetX:n,targetY:r,targetPosition:l,curvature:M?.curvature});return fe.createElement(Fc,{path:P,labelX:H,labelY:F,label:u,labelStyle:f,labelShowBg:d,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:v,style:E,markerEnd:b,markerStart:x,interactionWidth:D})});ud.displayName="BezierEdge";const ov=C.createContext(null),oM=ov.Provider;ov.Consumer;const aM=()=>C.useContext(ov),lM=t=>"id"in t&&"source"in t&&"target"in t,uM=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,ly=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,cM=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),fM=(t,e)=>{if(!t.source||!t.target)return e;let n;return lM(t)?n={...t}:n={...t,id:uM(t)},cM(n,e)?e:e.concat(n)},uy=({x:t,y:e},[n,r,o],l,[u,f])=>{const d={x:(t-n)/o,y:(e-r)/o};return l?{x:u*Math.round(d.x/u),y:f*Math.round(d.y/f)}:d},x1=({x:t,y:e},[n,r,o])=>({x:t*o+n,y:e*o+r}),xl=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],o={x:t.position.x-n,y:t.position.y-r};return{...o,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:o}},av=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,o)=>{const{x:l,y:u}=xl(o,e).positionAbsolute;return WO(r,nv({x:l,y:u,width:o.width||0,height:o.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return ZO(n)},I1=(t,e,[n,r,o]=[0,0,1],l=!1,u=!1,f=[0,0])=>{const d={x:(e.x-n)/o,y:(e.y-r)/o,width:e.width/o,height:e.height/o},p=[];return t.forEach(g=>{const{width:v,height:E,selectable:b=!0,hidden:x=!1}=g;if(u&&!b||x)return!1;const{positionAbsolute:M}=xl(g,f),D={x:M.x,y:M.y,width:v||0,height:E||0},P=sy(d,D),H=typeof v>"u"||typeof E>"u"||v===null||E===null,F=l&&P>0,j=(v||0)*(E||0);(H||F||P>=j||g.dragging)&&p.push(g)}),p},C1=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},N1=(t,e,n,r,o,l=.1)=>{const u=e/(t.width*(1+l)),f=n/(t.height*(1+l)),d=Math.min(u,f),p=Pl(d,r,o),g=t.x+t.width/2,v=t.y+t.height/2,E=e/2-g*p,b=n/2-v*p;return{x:E,y:b,zoom:p}},ra=(t,e=0)=>t.transition().duration(e);function mb(t,e,n,r){return(e[n]||[]).reduce((o,l)=>(`${t.id}-${l.id}-${n}`!==r&&o.push({id:l.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+l.x+l.width/2,y:(t.positionAbsolute?.y??0)+l.y+l.height/2}),o),[])}function hM(t,e,n,r,o,l){const{x:u,y:f}=po(t),p=e.elementsFromPoint(u,f).find(x=>x.classList.contains("react-flow__handle"));if(p){const x=p.getAttribute("data-nodeid");if(x){const M=lv(void 0,p),D=p.getAttribute("data-handleid"),P=l({nodeId:x,id:D,type:M});if(P){const H=o.find(F=>F.nodeId===x&&F.type===M&&F.id===D);return{handle:{id:D,type:M,nodeId:x,x:H?.x||n.x,y:H?.y||n.y},validHandleResult:P}}}}let g=[],v=1/0;if(o.forEach(x=>{const M=Math.sqrt((x.x-n.x)**2+(x.y-n.y)**2);if(M<=r){const D=l(x);M<=v&&(M<v?g=[{handle:x,validHandleResult:D}]:M===v&&g.push({handle:x,validHandleResult:D}),v=M)}}),!g.length)return{handle:null,validHandleResult:D1()};if(g.length===1)return g[0];const E=g.some(({validHandleResult:x})=>x.isValid),b=g.some(({handle:x})=>x.type==="target");return g.find(({handle:x,validHandleResult:M})=>b?x.type==="target":E?M.isValid:!0)||g[0]}const dM={source:null,target:null,sourceHandle:null,targetHandle:null},D1=()=>({handleDomNode:null,isValid:!1,connection:dM,endHandle:null});function O1(t,e,n,r,o,l,u){const f=o==="target",d=u.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),p={...D1(),handleDomNode:d};if(d){const g=lv(void 0,d),v=d.getAttribute("data-nodeid"),E=d.getAttribute("data-handleid"),b=d.classList.contains("connectable"),x=d.classList.contains("connectableend"),M={source:f?v:n,sourceHandle:f?E:r,target:f?n:v,targetHandle:f?r:E};p.connection=M,b&&x&&(e===bo.Strict?f&&g==="source"||!f&&g==="target":v!==n||E!==r)&&(p.endHandle={nodeId:v,handleId:E,type:g},p.isValid=l(M))}return p}function mM({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((o,l)=>{if(l[en]){const{handleBounds:u}=l[en];let f=[],d=[];u&&(f=mb(l,u,"source",`${e}-${n}-${r}`),d=mb(l,u,"target",`${e}-${n}-${r}`)),o.push(...f,...d)}return o},[])}function lv(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function yg(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function pM(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function M1({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:o,getState:l,setState:u,isValidConnection:f,edgeUpdaterType:d,onReconnectEnd:p}){const g=E1(t.target),{connectionMode:v,domNode:E,autoPanOnConnect:b,connectionRadius:x,onConnectStart:M,panBy:D,getNodes:P,cancelConnection:H}=l();let F=0,j;const{x:X,y:Z}=po(t),R=g?.elementFromPoint(X,Z),T=lv(d,R),I=E?.getBoundingClientRect();if(!I||!T)return;let N,U=po(t,I),B=!1,A=null,k=!1,q=null;const V=mM({nodes:P(),nodeId:n,handleId:e,handleType:T}),G=()=>{if(!b)return;const[L,Y]=_1(U,I);D({x:L,y:Y}),F=requestAnimationFrame(G)};u({connectionPosition:U,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:T,connectionStartHandle:{nodeId:n,handleId:e,type:T},connectionEndHandle:null}),M?.(t,{nodeId:n,handleId:e,handleType:T});function ee(L){const{transform:Y}=l();U=po(L,I);const{handle:ie,validHandleResult:ne}=hM(L,g,uy(U,Y,!1,[1,1]),x,V,he=>O1(he,v,n,e,o?"target":"source",f,g));if(j=ie,B||(G(),B=!0),q=ne.handleDomNode,A=ne.connection,k=ne.isValid,u({connectionPosition:j&&k?x1({x:j.x,y:j.y},Y):U,connectionStatus:pM(!!j,k),connectionEndHandle:ne.endHandle}),!j&&!k&&!q)return yg(N);A.source!==A.target&&q&&(yg(N),N=q,q.classList.add("connecting","react-flow__handle-connecting"),q.classList.toggle("valid",k),q.classList.toggle("react-flow__handle-valid",k))}function J(L){(j||q)&&A&&k&&r?.(A),l().onConnectEnd?.(L),d&&p?.(L),yg(N),H(),cancelAnimationFrame(F),B=!1,k=!1,A=null,q=null,g.removeEventListener("mousemove",ee),g.removeEventListener("mouseup",J),g.removeEventListener("touchmove",ee),g.removeEventListener("touchend",J)}g.addEventListener("mousemove",ee),g.addEventListener("mouseup",J),g.addEventListener("touchmove",ee),g.addEventListener("touchend",J)}const pb=()=>!0,gM=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),yM=(t,e,n)=>r=>{const{connectionStartHandle:o,connectionEndHandle:l,connectionClickStartHandle:u}=r;return{connecting:o?.nodeId===t&&o?.handleId===e&&o?.type===n||l?.nodeId===t&&l?.handleId===e&&l?.type===n,clickConnecting:u?.nodeId===t&&u?.handleId===e&&u?.type===n}},k1=C.forwardRef(({type:t="source",position:e=Ie.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:l=!0,id:u,onConnect:f,children:d,className:p,onMouseDown:g,onTouchStart:v,...E},b)=>{const x=u||null,M=t==="target",D=Ln(),P=aM(),{connectOnClick:H,noPanClassName:F}=$t(gM,ri),{connecting:j,clickConnecting:X}=$t(yM(P,x,t),ri);P||D.getState().onError?.("010",Ss.error010());const Z=I=>{const{defaultEdgeOptions:N,onConnect:U,hasDefaultEdges:B}=D.getState(),A={...N,...I};if(B){const{edges:k,setEdges:q}=D.getState();q(fM(A,k))}U?.(A),f?.(A)},R=I=>{if(!P)return;const N=b1(I);o&&(N&&I.button===0||!N)&&M1({event:I,handleId:x,nodeId:P,onConnect:Z,isTarget:M,getState:D.getState,setState:D.setState,isValidConnection:n||D.getState().isValidConnection||pb}),N?g?.(I):v?.(I)},T=I=>{const{onClickConnectStart:N,onClickConnectEnd:U,connectionClickStartHandle:B,connectionMode:A,isValidConnection:k}=D.getState();if(!P||!B&&!o)return;if(!B){N?.(I,{nodeId:P,handleId:x,handleType:t}),D.setState({connectionClickStartHandle:{nodeId:P,type:t,handleId:x}});return}const q=E1(I.target),V=n||k||pb,{connection:G,isValid:ee}=O1({nodeId:P,id:x,type:t},A,B.nodeId,B.handleId||null,B.type,V,q);ee&&Z(G),U?.(I),D.setState({connectionClickStartHandle:null})};return fe.createElement("div",{"data-handleid":x,"data-nodeid":P,"data-handlepos":e,"data-id":`${P}-${x}-${t}`,className:vi(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",F,p,{source:!M,target:M,connectable:r,connectablestart:o,connectableend:l,connecting:X,connectionindicator:r&&(o&&!j||l&&j)}]),onMouseDown:R,onTouchStart:R,onClick:H?T:void 0,ref:b,...E},d)});k1.displayName="Handle";var ti=C.memo(k1);const V1=({data:t,isConnectable:e,targetPosition:n=Ie.Top,sourcePosition:r=Ie.Bottom})=>fe.createElement(fe.Fragment,null,fe.createElement(ti,{type:"target",position:n,isConnectable:e}),t?.label,fe.createElement(ti,{type:"source",position:r,isConnectable:e}));V1.displayName="DefaultNode";var cy=C.memo(V1);const P1=({data:t,isConnectable:e,sourcePosition:n=Ie.Bottom})=>fe.createElement(fe.Fragment,null,t?.label,fe.createElement(ti,{type:"source",position:n,isConnectable:e}));P1.displayName="InputNode";var L1=C.memo(P1);const z1=({data:t,isConnectable:e,targetPosition:n=Ie.Top})=>fe.createElement(fe.Fragment,null,fe.createElement(ti,{type:"target",position:n,isConnectable:e}),t?.label);z1.displayName="OutputNode";var U1=C.memo(z1);const uv=()=>null;uv.displayName="GroupNode";const vM=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),Rh=t=>t.id;function _M(t,e){return ri(t.selectedNodes.map(Rh),e.selectedNodes.map(Rh))&&ri(t.selectedEdges.map(Rh),e.selectedEdges.map(Rh))}const B1=C.memo(({onSelectionChange:t})=>{const e=Ln(),{selectedNodes:n,selectedEdges:r}=$t(vM,_M);return C.useEffect(()=>{const o={nodes:n,edges:r};t?.(o),e.getState().onSelectionChange.forEach(l=>l(o))},[n,r,t]),null});B1.displayName="SelectionListener";const EM=t=>!!t.onSelectionChange;function wM({onSelectionChange:t}){const e=$t(EM);return t||e?fe.createElement(B1,{onSelectionChange:t}):null}const bM=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function ll(t,e){C.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function We(t,e,n){C.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const SM=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:o,onConnectStart:l,onConnectEnd:u,onClickConnectStart:f,onClickConnectEnd:d,nodesDraggable:p,nodesConnectable:g,nodesFocusable:v,edgesFocusable:E,edgesUpdatable:b,elevateNodesOnSelect:x,minZoom:M,maxZoom:D,nodeExtent:P,onNodesChange:H,onEdgesChange:F,elementsSelectable:j,connectionMode:X,snapGrid:Z,snapToGrid:R,translateExtent:T,connectOnClick:I,defaultEdgeOptions:N,fitView:U,fitViewOptions:B,onNodesDelete:A,onEdgesDelete:k,onNodeDrag:q,onNodeDragStart:V,onNodeDragStop:G,onSelectionDrag:ee,onSelectionDragStart:J,onSelectionDragStop:L,noPanClassName:Y,nodeOrigin:ie,rfId:ne,autoPanOnConnect:he,autoPanOnNodeDrag:_e,onError:we,connectionRadius:Oe,isValidConnection:ve,nodeDragThreshold:Se})=>{const{setNodes:Ce,setEdges:je,setDefaultNodesAndEdges:dt,setMinZoom:mt,setMaxZoom:pt,setTranslateExtent:Ve,setNodeExtent:Yt,reset:Pe}=$t(bM,ri),De=Ln();return C.useEffect(()=>{const Ht=r?.map(An=>({...An,...N}));return dt(n,Ht),()=>{Pe()}},[]),We("defaultEdgeOptions",N,De.setState),We("connectionMode",X,De.setState),We("onConnect",o,De.setState),We("onConnectStart",l,De.setState),We("onConnectEnd",u,De.setState),We("onClickConnectStart",f,De.setState),We("onClickConnectEnd",d,De.setState),We("nodesDraggable",p,De.setState),We("nodesConnectable",g,De.setState),We("nodesFocusable",v,De.setState),We("edgesFocusable",E,De.setState),We("edgesUpdatable",b,De.setState),We("elementsSelectable",j,De.setState),We("elevateNodesOnSelect",x,De.setState),We("snapToGrid",R,De.setState),We("snapGrid",Z,De.setState),We("onNodesChange",H,De.setState),We("onEdgesChange",F,De.setState),We("connectOnClick",I,De.setState),We("fitViewOnInit",U,De.setState),We("fitViewOnInitOptions",B,De.setState),We("onNodesDelete",A,De.setState),We("onEdgesDelete",k,De.setState),We("onNodeDrag",q,De.setState),We("onNodeDragStart",V,De.setState),We("onNodeDragStop",G,De.setState),We("onSelectionDrag",ee,De.setState),We("onSelectionDragStart",J,De.setState),We("onSelectionDragStop",L,De.setState),We("noPanClassName",Y,De.setState),We("nodeOrigin",ie,De.setState),We("rfId",ne,De.setState),We("autoPanOnConnect",he,De.setState),We("autoPanOnNodeDrag",_e,De.setState),We("onError",we,De.setState),We("connectionRadius",Oe,De.setState),We("isValidConnection",ve,De.setState),We("nodeDragThreshold",Se,De.setState),ll(t,Ce),ll(e,je),ll(M,mt),ll(D,pt),ll(T,Ve),ll(P,Yt),null},gb={display:"none"},TM={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},j1="react-flow__node-desc",H1="react-flow__edge-desc",AM="react-flow__aria-live",RM=t=>t.ariaLiveMessage;function xM({rfId:t}){const e=$t(RM);return fe.createElement("div",{id:`${AM}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:TM},e)}function IM({rfId:t,disableKeyboardA11y:e}){return fe.createElement(fe.Fragment,null,fe.createElement("div",{id:`${j1}-${t}`,style:gb},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),fe.createElement("div",{id:`${H1}-${t}`,style:gb},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&fe.createElement(xM,{rfId:t}))}var Ic=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=C.useState(!1),o=C.useRef(!1),l=C.useRef(new Set([])),[u,f]=C.useMemo(()=>{if(t!==null){const p=(Array.isArray(t)?t:[t]).filter(v=>typeof v=="string").map(v=>v.split("+")),g=p.reduce((v,E)=>v.concat(...E),[]);return[p,g]}return[[],[]]},[t]);return C.useEffect(()=>{const d=typeof document<"u"?document:null,p=e?.target||d;if(t!==null){const g=b=>{if(o.current=b.ctrlKey||b.metaKey||b.shiftKey,(!o.current||o.current&&!e.actInsideInputWithModifier)&&oy(b))return!1;const M=vb(b.code,f);l.current.add(b[M]),yb(u,l.current,!1)&&(b.preventDefault(),r(!0))},v=b=>{if((!o.current||o.current&&!e.actInsideInputWithModifier)&&oy(b))return!1;const M=vb(b.code,f);yb(u,l.current,!0)?(r(!1),l.current.clear()):l.current.delete(b[M]),b.key==="Meta"&&l.current.clear(),o.current=!1},E=()=>{l.current.clear(),r(!1)};return p?.addEventListener("keydown",g),p?.addEventListener("keyup",v),window.addEventListener("blur",E),()=>{p?.removeEventListener("keydown",g),p?.removeEventListener("keyup",v),window.removeEventListener("blur",E)}}},[t,r]),n};function yb(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(o=>e.has(o)))}function vb(t,e){return e.includes(t)?"code":"key"}function F1(t,e,n,r){const o=t.parentNode||t.parentId;if(!o)return n;const l=e.get(o),u=xl(l,r);return F1(l,e,{x:(n.x??0)+u.x,y:(n.y??0)+u.y,z:(l[en]?.z??0)>(n.z??0)?l[en]?.z??0:n.z??0},r)}function q1(t,e,n){t.forEach(r=>{const o=r.parentNode||r.parentId;if(o&&!t.has(o))throw new Error(`Parent node ${o} not found`);if(o||n?.[r.id]){const{x:l,y:u,z:f}=F1(r,t,{...r.position,z:r[en]?.z??0},e);r.positionAbsolute={x:l,y:u},r[en].z=f,n?.[r.id]&&(r[en].isParent=!0)}})}function vg(t,e,n,r){const o=new Map,l={},u=r?1e3:0;return t.forEach(f=>{const d=(lr(f.zIndex)?f.zIndex:0)+(f.selected?u:0),p=e.get(f.id),g={...f,positionAbsolute:{x:f.position.x,y:f.position.y}},v=f.parentNode||f.parentId;v&&(l[v]=!0);const E=p?.type&&p?.type!==f.type;Object.defineProperty(g,en,{enumerable:!1,value:{handleBounds:E?void 0:p?.[en]?.handleBounds,z:d}}),o.set(f.id,g)}),q1(o,n,l),o}function $1(t,e={}){const{getNodes:n,width:r,height:o,minZoom:l,maxZoom:u,d3Zoom:f,d3Selection:d,fitViewOnInitDone:p,fitViewOnInit:g,nodeOrigin:v}=t(),E=e.initial&&!p&&g;if(f&&d&&(E||!e.initial)){const x=n().filter(D=>{const P=e.includeHiddenNodes?D.width&&D.height:!D.hidden;return e.nodes?.length?P&&e.nodes.some(H=>H.id===D.id):P}),M=x.every(D=>D.width&&D.height);if(x.length>0&&M){const D=av(x,v),{x:P,y:H,zoom:F}=N1(D,r,o,e.minZoom??l,e.maxZoom??u,e.padding??.1),j=mo.translate(P,H).scale(F);return typeof e.duration=="number"&&e.duration>0?f.transform(ra(d,e.duration),j):f.transform(d,j),!0}}return!1}function CM(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[en]:r[en],selected:n.selected})}),new Map(e)}function NM(t,e){return e.map(n=>{const r=t.find(o=>o.id===n.id);return r&&(n.selected=r.selected),n})}function xh({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:o,edges:l,onNodesChange:u,onEdgesChange:f,hasDefaultNodes:d,hasDefaultEdges:p}=n();t?.length&&(d&&r({nodeInternals:CM(t,o)}),u?.(t)),e?.length&&(p&&r({edges:NM(e,l)}),f?.(e))}const ul=()=>{},DM={zoomIn:ul,zoomOut:ul,zoomTo:ul,getZoom:()=>1,setViewport:ul,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:ul,fitBounds:ul,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},OM=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),MM=()=>{const t=Ln(),{d3Zoom:e,d3Selection:n}=$t(OM,ri);return C.useMemo(()=>n&&e?{zoomIn:o=>e.scaleBy(ra(n,o?.duration),1.2),zoomOut:o=>e.scaleBy(ra(n,o?.duration),1/1.2),zoomTo:(o,l)=>e.scaleTo(ra(n,l?.duration),o),getZoom:()=>t.getState().transform[2],setViewport:(o,l)=>{const[u,f,d]=t.getState().transform,p=mo.translate(o.x??u,o.y??f).scale(o.zoom??d);e.transform(ra(n,l?.duration),p)},getViewport:()=>{const[o,l,u]=t.getState().transform;return{x:o,y:l,zoom:u}},fitView:o=>$1(t.getState,o),setCenter:(o,l,u)=>{const{width:f,height:d,maxZoom:p}=t.getState(),g=typeof u?.zoom<"u"?u.zoom:p,v=f/2-o*g,E=d/2-l*g,b=mo.translate(v,E).scale(g);e.transform(ra(n,u?.duration),b)},fitBounds:(o,l)=>{const{width:u,height:f,minZoom:d,maxZoom:p}=t.getState(),{x:g,y:v,zoom:E}=N1(o,u,f,d,p,l?.padding??.1),b=mo.translate(g,v).scale(E);e.transform(ra(n,l?.duration),b)},project:o=>{const{transform:l,snapToGrid:u,snapGrid:f}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),uy(o,l,u,f)},screenToFlowPosition:o=>{const{transform:l,snapToGrid:u,snapGrid:f,domNode:d}=t.getState();if(!d)return o;const{x:p,y:g}=d.getBoundingClientRect(),v={x:o.x-p,y:o.y-g};return uy(v,l,u,f)},flowToScreenPosition:o=>{const{transform:l,domNode:u}=t.getState();if(!u)return o;const{x:f,y:d}=u.getBoundingClientRect(),p=x1(o,l);return{x:p.x+f,y:p.y+d}},viewportInitialized:!0}:DM,[e,n])};function qc(){const t=MM(),e=Ln(),n=C.useCallback(()=>e.getState().getNodes().map(M=>({...M})),[]),r=C.useCallback(M=>e.getState().nodeInternals.get(M),[]),o=C.useCallback(()=>{const{edges:M=[]}=e.getState();return M.map(D=>({...D}))},[]),l=C.useCallback(M=>{const{edges:D=[]}=e.getState();return D.find(P=>P.id===M)},[]),u=C.useCallback(M=>{const{getNodes:D,setNodes:P,hasDefaultNodes:H,onNodesChange:F}=e.getState(),j=D(),X=typeof M=="function"?M(j):M;if(H)P(X);else if(F){const Z=X.length===0?j.map(R=>({type:"remove",id:R.id})):X.map(R=>({item:R,type:"reset"}));F(Z)}},[]),f=C.useCallback(M=>{const{edges:D=[],setEdges:P,hasDefaultEdges:H,onEdgesChange:F}=e.getState(),j=typeof M=="function"?M(D):M;if(H)P(j);else if(F){const X=j.length===0?D.map(Z=>({type:"remove",id:Z.id})):j.map(Z=>({item:Z,type:"reset"}));F(X)}},[]),d=C.useCallback(M=>{const D=Array.isArray(M)?M:[M],{getNodes:P,setNodes:H,hasDefaultNodes:F,onNodesChange:j}=e.getState();if(F){const Z=[...P(),...D];H(Z)}else if(j){const X=D.map(Z=>({item:Z,type:"add"}));j(X)}},[]),p=C.useCallback(M=>{const D=Array.isArray(M)?M:[M],{edges:P=[],setEdges:H,hasDefaultEdges:F,onEdgesChange:j}=e.getState();if(F)H([...P,...D]);else if(j){const X=D.map(Z=>({item:Z,type:"add"}));j(X)}},[]),g=C.useCallback(()=>{const{getNodes:M,edges:D=[],transform:P}=e.getState(),[H,F,j]=P;return{nodes:M().map(X=>({...X})),edges:D.map(X=>({...X})),viewport:{x:H,y:F,zoom:j}}},[]),v=C.useCallback(({nodes:M,edges:D})=>{const{nodeInternals:P,getNodes:H,edges:F,hasDefaultNodes:j,hasDefaultEdges:X,onNodesDelete:Z,onEdgesDelete:R,onNodesChange:T,onEdgesChange:I}=e.getState(),N=(M||[]).map(q=>q.id),U=(D||[]).map(q=>q.id),B=H().reduce((q,V)=>{const G=V.parentNode||V.parentId,ee=!N.includes(V.id)&&G&&q.find(L=>L.id===G);return(typeof V.deletable=="boolean"?V.deletable:!0)&&(N.includes(V.id)||ee)&&q.push(V),q},[]),A=F.filter(q=>typeof q.deletable=="boolean"?q.deletable:!0),k=A.filter(q=>U.includes(q.id));if(B||k){const q=C1(B,A),V=[...k,...q],G=V.reduce((ee,J)=>(ee.includes(J.id)||ee.push(J.id),ee),[]);if((X||j)&&(X&&e.setState({edges:F.filter(ee=>!G.includes(ee.id))}),j&&(B.forEach(ee=>{P.delete(ee.id)}),e.setState({nodeInternals:new Map(P)}))),G.length>0&&(R?.(V),I&&I(G.map(ee=>({id:ee,type:"remove"})))),B.length>0&&(Z?.(B),T)){const ee=B.map(J=>({id:J.id,type:"remove"}));T(ee)}}},[]),E=C.useCallback(M=>{const D=JO(M),P=D?null:e.getState().nodeInternals.get(M.id);return!D&&!P?[null,null,D]:[D?M:ub(P),P,D]},[]),b=C.useCallback((M,D=!0,P)=>{const[H,F,j]=E(M);return H?(P||e.getState().getNodes()).filter(X=>{if(!j&&(X.id===F.id||!X.positionAbsolute))return!1;const Z=ub(X),R=sy(Z,H);return D&&R>0||R>=H.width*H.height}):[]},[]),x=C.useCallback((M,D,P=!0)=>{const[H]=E(M);if(!H)return!1;const F=sy(H,D);return P&&F>0||F>=H.width*H.height},[]);return C.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:o,getEdge:l,setNodes:u,setEdges:f,addNodes:d,addEdges:p,toObject:g,deleteElements:v,getIntersectingNodes:b,isNodeIntersecting:x}),[t,n,r,o,l,u,f,d,p,g,v,b,x])}const kM={actInsideInputWithModifier:!1};var VM=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=Ln(),{deleteElements:r}=qc(),o=Ic(t,kM),l=Ic(e);C.useEffect(()=>{if(o){const{edges:u,getNodes:f}=n.getState(),d=f().filter(g=>g.selected),p=u.filter(g=>g.selected);r({nodes:d,edges:p}),n.setState({nodesSelectionActive:!1})}},[o]),C.useEffect(()=>{n.setState({multiSelectionActive:l})},[l])};function PM(t){const e=Ln();C.useEffect(()=>{let n;const r=()=>{if(!t.current)return;const o=ev(t.current);(o.height===0||o.width===0)&&e.getState().onError?.("004",Ss.error004()),e.setState({width:o.width||500,height:o.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const cv={position:"absolute",width:"100%",height:"100%",top:0,left:0},LM=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Ih=t=>({x:t.x,y:t.y,zoom:t.k}),cl=(t,e)=>t.target.closest(`.${e}`),_b=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),Eb=t=>{const e=t.ctrlKey&&ld()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},zM=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),UM=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:o=!0,zoomOnPinch:l=!0,panOnScroll:u=!1,panOnScrollSpeed:f=.5,panOnScrollMode:d=ca.Free,zoomOnDoubleClick:p=!0,elementsSelectable:g,panOnDrag:v=!0,defaultViewport:E,translateExtent:b,minZoom:x,maxZoom:M,zoomActivationKeyCode:D,preventScrolling:P=!0,children:H,noWheelClassName:F,noPanClassName:j})=>{const X=C.useRef(),Z=Ln(),R=C.useRef(!1),T=C.useRef(!1),I=C.useRef(null),N=C.useRef({x:0,y:0,zoom:0}),{d3Zoom:U,d3Selection:B,d3ZoomHandler:A,userSelectionActive:k}=$t(zM,ri),q=Ic(D),V=C.useRef(0),G=C.useRef(!1),ee=C.useRef();return PM(I),C.useEffect(()=>{if(I.current){const J=I.current.getBoundingClientRect(),L=qO().scaleExtent([x,M]).translateExtent(b),Y=vr(I.current).call(L),ie=mo.translate(E.x,E.y).scale(Pl(E.zoom,x,M)),ne=[[0,0],[J.width,J.height]],he=L.constrain()(ie,ne,b);L.transform(Y,he),L.wheelDelta(Eb),Z.setState({d3Zoom:L,d3Selection:Y,d3ZoomHandler:Y.on("wheel.zoom"),transform:[he.x,he.y,he.k],domNode:I.current.closest(".react-flow")})}},[]),C.useEffect(()=>{B&&U&&(u&&!q&&!k?B.on("wheel.zoom",J=>{if(cl(J,F))return!1;J.preventDefault(),J.stopImmediatePropagation();const L=B.property("__zoom").k||1;if(J.ctrlKey&&l){const ve=Br(J),Se=Eb(J),Ce=L*Math.pow(2,Se);U.scaleTo(B,Ce,ve,J);return}const Y=J.deltaMode===1?20:1;let ie=d===ca.Vertical?0:J.deltaX*Y,ne=d===ca.Horizontal?0:J.deltaY*Y;!ld()&&J.shiftKey&&d!==ca.Vertical&&(ie=J.deltaY*Y,ne=0),U.translateBy(B,-(ie/L)*f,-(ne/L)*f,{internal:!0});const he=Ih(B.property("__zoom")),{onViewportChangeStart:_e,onViewportChange:we,onViewportChangeEnd:Oe}=Z.getState();clearTimeout(ee.current),G.current||(G.current=!0,e?.(J,he),_e?.(he)),G.current&&(t?.(J,he),we?.(he),ee.current=setTimeout(()=>{n?.(J,he),Oe?.(he),G.current=!1},150))},{passive:!1}):typeof A<"u"&&B.on("wheel.zoom",function(J,L){if(!P&&J.type==="wheel"&&!J.ctrlKey||cl(J,F))return null;J.preventDefault(),A.call(this,J,L)},{passive:!1}))},[k,u,d,B,U,A,q,l,P,F,e,t,n]),C.useEffect(()=>{U&&U.on("start",J=>{if(!J.sourceEvent||J.sourceEvent.internal)return null;V.current=J.sourceEvent?.button;const{onViewportChangeStart:L}=Z.getState(),Y=Ih(J.transform);R.current=!0,N.current=Y,J.sourceEvent?.type==="mousedown"&&Z.setState({paneDragging:!0}),L?.(Y),e?.(J.sourceEvent,Y)})},[U,e]),C.useEffect(()=>{U&&(k&&!R.current?U.on("zoom",null):k||U.on("zoom",J=>{const{onViewportChange:L}=Z.getState();if(Z.setState({transform:[J.transform.x,J.transform.y,J.transform.k]}),T.current=!!(r&&_b(v,V.current??0)),(t||L)&&!J.sourceEvent?.internal){const Y=Ih(J.transform);L?.(Y),t?.(J.sourceEvent,Y)}}))},[k,U,t,v,r]),C.useEffect(()=>{U&&U.on("end",J=>{if(!J.sourceEvent||J.sourceEvent.internal)return null;const{onViewportChangeEnd:L}=Z.getState();if(R.current=!1,Z.setState({paneDragging:!1}),r&&_b(v,V.current??0)&&!T.current&&r(J.sourceEvent),T.current=!1,(n||L)&&LM(N.current,J.transform)){const Y=Ih(J.transform);N.current=Y,clearTimeout(X.current),X.current=setTimeout(()=>{L?.(Y),n?.(J.sourceEvent,Y)},u?150:0)}})},[U,u,v,n,r]),C.useEffect(()=>{U&&U.filter(J=>{const L=q||o,Y=l&&J.ctrlKey;if((v===!0||Array.isArray(v)&&v.includes(1))&&J.button===1&&J.type==="mousedown"&&(cl(J,"react-flow__node")||cl(J,"react-flow__edge")))return!0;if(!v&&!L&&!u&&!p&&!l||k||!p&&J.type==="dblclick"||cl(J,F)&&J.type==="wheel"||cl(J,j)&&(J.type!=="wheel"||u&&J.type==="wheel"&&!q)||!l&&J.ctrlKey&&J.type==="wheel"||!L&&!u&&!Y&&J.type==="wheel"||!v&&(J.type==="mousedown"||J.type==="touchstart")||Array.isArray(v)&&!v.includes(J.button)&&J.type==="mousedown")return!1;const ie=Array.isArray(v)&&v.includes(J.button)||!J.button||J.button<=1;return(!J.ctrlKey||J.type==="wheel")&&ie})},[k,U,o,l,u,p,v,g,q]),fe.createElement("div",{className:"react-flow__renderer",ref:I,style:cv},H)},BM=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function jM(){const{userSelectionActive:t,userSelectionRect:e}=$t(BM,ri);return t&&e?fe.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function wb(t,e){const n=e.parentNode||e.parentId,r=t.find(o=>o.id===n);if(r){const o=e.position.x+e.width-r.width,l=e.position.y+e.height-r.height;if(o>0||l>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,o>0&&(r.style.width+=o),l>0&&(r.style.height+=l),e.position.x<0){const u=Math.abs(e.position.x);r.position.x=r.position.x-u,r.style.width+=u,e.position.x=0}if(e.position.y<0){const u=Math.abs(e.position.y);r.position.y=r.position.y-u,r.style.height+=u,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function G1(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,o)=>{const l=t.filter(f=>f.id===o.id);if(l.length===0)return r.push(o),r;const u={...o};for(const f of l)if(f)switch(f.type){case"select":{u.selected=f.selected;break}case"position":{typeof f.position<"u"&&(u.position=f.position),typeof f.positionAbsolute<"u"&&(u.positionAbsolute=f.positionAbsolute),typeof f.dragging<"u"&&(u.dragging=f.dragging),u.expandParent&&wb(r,u);break}case"dimensions":{typeof f.dimensions<"u"&&(u.width=f.dimensions.width,u.height=f.dimensions.height),typeof f.updateStyle<"u"&&(u.style={...u.style||{},...f.dimensions}),typeof f.resizing=="boolean"&&(u.resizing=f.resizing),u.expandParent&&wb(r,u);break}case"remove":return r}return r.push(u),r},n)}function Y1(t,e){return G1(t,e)}function HM(t,e){return G1(t,e)}const ro=(t,e)=>({id:t,type:"select",selected:e});function Sl(t,e){return t.reduce((n,r)=>{const o=e.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(ro(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(ro(r.id,!1))),n},[])}const _g=(t,e)=>n=>{n.target===e.current&&t?.(n)},FM=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),K1=C.memo(({isSelecting:t,selectionMode:e=Rc.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:o,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:f,onPaneMouseEnter:d,onPaneMouseMove:p,onPaneMouseLeave:g,children:v})=>{const E=C.useRef(null),b=Ln(),x=C.useRef(0),M=C.useRef(0),D=C.useRef(),{userSelectionActive:P,elementsSelectable:H,dragging:F}=$t(FM,ri),j=()=>{b.setState({userSelectionActive:!1,userSelectionRect:null}),x.current=0,M.current=0},X=A=>{l?.(A),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1})},Z=A=>{if(Array.isArray(n)&&n?.includes(2)){A.preventDefault();return}u?.(A)},R=f?A=>f(A):void 0,T=A=>{const{resetSelectedElements:k,domNode:q}=b.getState();if(D.current=q?.getBoundingClientRect(),!H||!t||A.button!==0||A.target!==E.current||!D.current)return;const{x:V,y:G}=po(A,D.current);k(),b.setState({userSelectionRect:{width:0,height:0,startX:V,startY:G,x:V,y:G}}),r?.(A)},I=A=>{const{userSelectionRect:k,nodeInternals:q,edges:V,transform:G,onNodesChange:ee,onEdgesChange:J,nodeOrigin:L,getNodes:Y}=b.getState();if(!t||!D.current||!k)return;b.setState({userSelectionActive:!0,nodesSelectionActive:!1});const ie=po(A,D.current),ne=k.startX??0,he=k.startY??0,_e={...k,x:ie.x<ne?ie.x:ne,y:ie.y<he?ie.y:he,width:Math.abs(ie.x-ne),height:Math.abs(ie.y-he)},we=Y(),Oe=I1(q,_e,G,e===Rc.Partial,!0,L),ve=C1(Oe,V).map(Ce=>Ce.id),Se=Oe.map(Ce=>Ce.id);if(x.current!==Se.length){x.current=Se.length;const Ce=Sl(we,Se);Ce.length&&ee?.(Ce)}if(M.current!==ve.length){M.current=ve.length;const Ce=Sl(V,ve);Ce.length&&J?.(Ce)}b.setState({userSelectionRect:_e})},N=A=>{if(A.button!==0)return;const{userSelectionRect:k}=b.getState();!P&&k&&A.target===E.current&&X?.(A),b.setState({nodesSelectionActive:x.current>0}),j(),o?.(A)},U=A=>{P&&(b.setState({nodesSelectionActive:x.current>0}),o?.(A)),j()},B=H&&(t||P);return fe.createElement("div",{className:vi(["react-flow__pane",{dragging:F,selection:t}]),onClick:B?void 0:_g(X,E),onContextMenu:_g(Z,E),onWheel:_g(R,E),onMouseEnter:B?void 0:d,onMouseDown:B?T:void 0,onMouseMove:B?I:p,onMouseUp:B?N:void 0,onMouseLeave:B?U:g,ref:E,style:cv},v,fe.createElement(jM,null))});K1.displayName="Pane";function X1(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:X1(r,e):!1}function bb(t,e,n){let r=t;do{if(r?.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function qM(t,e,n,r){return Array.from(t.values()).filter(o=>(o.selected||o.id===r)&&(!o.parentNode||o.parentId||!X1(o,t))&&(o.draggable||e&&typeof o.draggable>"u")).map(o=>({id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:n.x-(o.positionAbsolute?.x??0),y:n.y-(o.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode||o.parentId,parentId:o.parentNode||o.parentId,width:o.width,height:o.height,expandParent:o.expandParent}))}function $M(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function Q1(t,e,n,r,o=[0,0],l){const u=$M(t,t.extent||r);let f=u;const d=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(d&&t.width&&t.height){const v=n.get(d),{x:E,y:b}=xl(v,o).positionAbsolute;f=v&&lr(E)&&lr(b)&&lr(v.width)&&lr(v.height)?[[E+t.width*o[0],b+t.height*o[1]],[E+v.width-t.width+t.width*o[0],b+v.height-t.height+t.height*o[1]]]:f}else l?.("005",Ss.error005()),f=u;else if(t.extent&&d&&t.extent!=="parent"){const v=n.get(d),{x:E,y:b}=xl(v,o).positionAbsolute;f=[[t.extent[0][0]+E,t.extent[0][1]+b],[t.extent[1][0]+E,t.extent[1][1]+b]]}let p={x:0,y:0};if(d){const v=n.get(d);p=xl(v,o).positionAbsolute}const g=f&&f!=="parent"?tv(e,f):e;return{position:{x:g.x-p.x,y:g.y-p.y},positionAbsolute:g}}function Eg({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(o=>({...n.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[t?r.find(o=>o.id===t):r[0],r]}const Sb=(t,e,n,r)=>{const o=e.querySelectorAll(t);if(!o||!o.length)return null;const l=Array.from(o),u=e.getBoundingClientRect(),f={x:u.width*r[0],y:u.height*r[1]};return l.map(d=>{const p=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),position:d.getAttribute("data-handlepos"),x:(p.left-u.left-f.x)/n,y:(p.top-u.top-f.y)/n,...ev(d)}})};function ec(t,e,n){return n===void 0?n:r=>{const o=e().nodeInternals.get(t);o&&n(r,{...o})}}function fy({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:l,multiSelectionActive:u,nodeInternals:f,onError:d}=e.getState(),p=f.get(t);if(!p){d?.("012",Ss.error012(t));return}e.setState({nodesSelectionActive:!1}),p.selected?(n||p.selected&&u)&&(l({nodes:[p],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):o([t])}function GM(){const t=Ln();return C.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:o,snapToGrid:l}=t.getState(),u=n.touches?n.touches[0].clientX:n.clientX,f=n.touches?n.touches[0].clientY:n.clientY,d={x:(u-r[0])/r[2],y:(f-r[1])/r[2]};return{xSnapped:l?o[0]*Math.round(d.x/o[0]):d.x,ySnapped:l?o[1]*Math.round(d.y/o[1]):d.y,...d}},[])}function wg(t){return(e,n,r)=>t?.(e,r)}function W1({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:l,selectNodesOnDrag:u}){const f=Ln(),[d,p]=C.useState(!1),g=C.useRef([]),v=C.useRef({x:null,y:null}),E=C.useRef(0),b=C.useRef(null),x=C.useRef({x:0,y:0}),M=C.useRef(null),D=C.useRef(!1),P=C.useRef(!1),H=C.useRef(!1),F=GM();return C.useEffect(()=>{if(t?.current){const j=vr(t.current),X=({x:T,y:I})=>{const{nodeInternals:N,onNodeDrag:U,onSelectionDrag:B,updateNodePositions:A,nodeExtent:k,snapGrid:q,snapToGrid:V,nodeOrigin:G,onError:ee}=f.getState();v.current={x:T,y:I};let J=!1,L={x:0,y:0,x2:0,y2:0};if(g.current.length>1&&k){const ie=av(g.current,G);L=nv(ie)}if(g.current=g.current.map(ie=>{const ne={x:T-ie.distance.x,y:I-ie.distance.y};V&&(ne.x=q[0]*Math.round(ne.x/q[0]),ne.y=q[1]*Math.round(ne.y/q[1]));const he=[[k[0][0],k[0][1]],[k[1][0],k[1][1]]];g.current.length>1&&k&&!ie.extent&&(he[0][0]=ie.positionAbsolute.x-L.x+k[0][0],he[1][0]=ie.positionAbsolute.x+(ie.width??0)-L.x2+k[1][0],he[0][1]=ie.positionAbsolute.y-L.y+k[0][1],he[1][1]=ie.positionAbsolute.y+(ie.height??0)-L.y2+k[1][1]);const _e=Q1(ie,ne,N,he,G,ee);return J=J||ie.position.x!==_e.position.x||ie.position.y!==_e.position.y,ie.position=_e.position,ie.positionAbsolute=_e.positionAbsolute,ie}),!J)return;A(g.current,!0,!0),p(!0);const Y=o?U:wg(B);if(Y&&M.current){const[ie,ne]=Eg({nodeId:o,dragItems:g.current,nodeInternals:N});Y(M.current,ie,ne)}},Z=()=>{if(!b.current)return;const[T,I]=_1(x.current,b.current);if(T!==0||I!==0){const{transform:N,panBy:U}=f.getState();v.current.x=(v.current.x??0)-T/N[2],v.current.y=(v.current.y??0)-I/N[2],U({x:T,y:I})&&X(v.current)}E.current=requestAnimationFrame(Z)},R=T=>{const{nodeInternals:I,multiSelectionActive:N,nodesDraggable:U,unselectNodesAndEdges:B,onNodeDragStart:A,onSelectionDragStart:k}=f.getState();P.current=!0;const q=o?A:wg(k);(!u||!l)&&!N&&o&&(I.get(o)?.selected||B()),o&&l&&u&&fy({id:o,store:f,nodeRef:t});const V=F(T);if(v.current=V,g.current=qM(I,U,V,o),q&&g.current){const[G,ee]=Eg({nodeId:o,dragItems:g.current,nodeInternals:I});q(T.sourceEvent,G,ee)}};if(e)j.on(".drag",null);else{const T=eD().on("start",I=>{const{domNode:N,nodeDragThreshold:U}=f.getState();U===0&&R(I),H.current=!1;const B=F(I);v.current=B,b.current=N?.getBoundingClientRect()||null,x.current=po(I.sourceEvent,b.current)}).on("drag",I=>{const N=F(I),{autoPanOnNodeDrag:U,nodeDragThreshold:B}=f.getState();if(I.sourceEvent.type==="touchmove"&&I.sourceEvent.touches.length>1&&(H.current=!0),!H.current){if(!D.current&&P.current&&U&&(D.current=!0,Z()),!P.current){const A=N.xSnapped-(v?.current?.x??0),k=N.ySnapped-(v?.current?.y??0);Math.sqrt(A*A+k*k)>B&&R(I)}(v.current.x!==N.xSnapped||v.current.y!==N.ySnapped)&&g.current&&P.current&&(M.current=I.sourceEvent,x.current=po(I.sourceEvent,b.current),X(N))}}).on("end",I=>{if(!(!P.current||H.current)&&(p(!1),D.current=!1,P.current=!1,cancelAnimationFrame(E.current),g.current)){const{updateNodePositions:N,nodeInternals:U,onNodeDragStop:B,onSelectionDragStop:A}=f.getState(),k=o?B:wg(A);if(N(g.current,!1,!1),k){const[q,V]=Eg({nodeId:o,dragItems:g.current,nodeInternals:U});k(I.sourceEvent,q,V)}}}).filter(I=>{const N=I.target;return!I.button&&(!n||!bb(N,`.${n}`,t))&&(!r||bb(N,r,t))});return j.call(T),()=>{j.on(".drag",null)}}}},[t,e,n,r,l,f,o,u,F]),d}function Z1(){const t=Ln();return C.useCallback(n=>{const{nodeInternals:r,nodeExtent:o,updateNodePositions:l,getNodes:u,snapToGrid:f,snapGrid:d,onError:p,nodesDraggable:g}=t.getState(),v=u().filter(H=>H.selected&&(H.draggable||g&&typeof H.draggable>"u")),E=f?d[0]:5,b=f?d[1]:5,x=n.isShiftPressed?4:1,M=n.x*E*x,D=n.y*b*x,P=v.map(H=>{if(H.positionAbsolute){const F={x:H.positionAbsolute.x+M,y:H.positionAbsolute.y+D};f&&(F.x=d[0]*Math.round(F.x/d[0]),F.y=d[1]*Math.round(F.y/d[1]));const{positionAbsolute:j,position:X}=Q1(H,F,r,o,void 0,p);H.position=X,H.positionAbsolute=j}return H});l(P,!0,!1)},[])}const Il={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var tc=t=>{const e=({id:n,type:r,data:o,xPos:l,yPos:u,xPosOrigin:f,yPosOrigin:d,selected:p,onClick:g,onMouseEnter:v,onMouseMove:E,onMouseLeave:b,onContextMenu:x,onDoubleClick:M,style:D,className:P,isDraggable:H,isSelectable:F,isConnectable:j,isFocusable:X,selectNodesOnDrag:Z,sourcePosition:R,targetPosition:T,hidden:I,resizeObserver:N,dragHandle:U,zIndex:B,isParent:A,noDragClassName:k,noPanClassName:q,initialized:V,disableKeyboardA11y:G,ariaLabel:ee,rfId:J,hasHandleBounds:L})=>{const Y=Ln(),ie=C.useRef(null),ne=C.useRef(null),he=C.useRef(R),_e=C.useRef(T),we=C.useRef(r),Oe=F||H||g||v||E||b,ve=Z1(),Se=ec(n,Y.getState,v),Ce=ec(n,Y.getState,E),je=ec(n,Y.getState,b),dt=ec(n,Y.getState,x),mt=ec(n,Y.getState,M),pt=Pe=>{const{nodeDragThreshold:De}=Y.getState();if(F&&(!Z||!H||De>0)&&fy({id:n,store:Y,nodeRef:ie}),g){const Ht=Y.getState().nodeInternals.get(n);Ht&&g(Pe,{...Ht})}},Ve=Pe=>{if(!oy(Pe)&&!G)if(w1.includes(Pe.key)&&F){const De=Pe.key==="Escape";fy({id:n,store:Y,unselect:De,nodeRef:ie})}else H&&p&&Object.prototype.hasOwnProperty.call(Il,Pe.key)&&(Y.setState({ariaLiveMessage:`Moved selected node ${Pe.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~l}, y: ${~~u}`}),ve({x:Il[Pe.key].x,y:Il[Pe.key].y,isShiftPressed:Pe.shiftKey}))};C.useEffect(()=>()=>{ne.current&&(N?.unobserve(ne.current),ne.current=null)},[]),C.useEffect(()=>{if(ie.current&&!I){const Pe=ie.current;(!V||!L||ne.current!==Pe)&&(ne.current&&N?.unobserve(ne.current),N?.observe(Pe),ne.current=Pe)}},[I,V,L]),C.useEffect(()=>{const Pe=we.current!==r,De=he.current!==R,Ht=_e.current!==T;ie.current&&(Pe||De||Ht)&&(Pe&&(we.current=r),De&&(he.current=R),Ht&&(_e.current=T),Y.getState().updateNodeDimensions([{id:n,nodeElement:ie.current,forceUpdate:!0}]))},[n,r,R,T]);const Yt=W1({nodeRef:ie,disabled:I||!H,noDragClassName:k,handleSelector:U,nodeId:n,isSelectable:F,selectNodesOnDrag:Z});return I?null:fe.createElement("div",{className:vi(["react-flow__node",`react-flow__node-${r}`,{[q]:H},P,{selected:p,selectable:F,parent:A,dragging:Yt}]),ref:ie,style:{zIndex:B,transform:`translate(${f}px,${d}px)`,pointerEvents:Oe?"all":"none",visibility:V?"visible":"hidden",...D},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Se,onMouseMove:Ce,onMouseLeave:je,onContextMenu:dt,onClick:pt,onDoubleClick:mt,onKeyDown:X?Ve:void 0,tabIndex:X?0:void 0,role:X?"button":void 0,"aria-describedby":G?void 0:`${j1}-${J}`,"aria-label":ee},fe.createElement(oM,{value:n},fe.createElement(t,{id:n,data:o,type:r,xPos:l,yPos:u,selected:p,isConnectable:j,sourcePosition:R,targetPosition:T,dragging:Yt,dragHandle:U,zIndex:B})))};return e.displayName="NodeWrapper",C.memo(e)};const YM=t=>{const e=t.getNodes().filter(n=>n.selected);return{...av(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function KM({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=Ln(),{width:o,height:l,x:u,y:f,transformString:d,userSelectionActive:p}=$t(YM,ri),g=Z1(),v=C.useRef(null);if(C.useEffect(()=>{n||v.current?.focus({preventScroll:!0})},[n]),W1({nodeRef:v}),p||!o||!l)return null;const E=t?x=>{const M=r.getState().getNodes().filter(D=>D.selected);t(x,M)}:void 0,b=x=>{Object.prototype.hasOwnProperty.call(Il,x.key)&&g({x:Il[x.key].x,y:Il[x.key].y,isShiftPressed:x.shiftKey})};return fe.createElement("div",{className:vi(["react-flow__nodesselection","react-flow__container",e]),style:{transform:d}},fe.createElement("div",{ref:v,className:"react-flow__nodesselection-rect",onContextMenu:E,tabIndex:n?void 0:-1,onKeyDown:n?void 0:b,style:{width:o,height:l,top:f,left:u}}))}var XM=C.memo(KM);const QM=t=>t.nodesSelectionActive,J1=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:l,onPaneScroll:u,deleteKeyCode:f,onMove:d,onMoveStart:p,onMoveEnd:g,selectionKeyCode:v,selectionOnDrag:E,selectionMode:b,onSelectionStart:x,onSelectionEnd:M,multiSelectionKeyCode:D,panActivationKeyCode:P,zoomActivationKeyCode:H,elementsSelectable:F,zoomOnScroll:j,zoomOnPinch:X,panOnScroll:Z,panOnScrollSpeed:R,panOnScrollMode:T,zoomOnDoubleClick:I,panOnDrag:N,defaultViewport:U,translateExtent:B,minZoom:A,maxZoom:k,preventScrolling:q,onSelectionContextMenu:V,noWheelClassName:G,noPanClassName:ee,disableKeyboardA11y:J})=>{const L=$t(QM),Y=Ic(v),ie=Ic(P),ne=ie||N,he=ie||Z,_e=Y||E&&ne!==!0;return VM({deleteKeyCode:f,multiSelectionKeyCode:D}),fe.createElement(UM,{onMove:d,onMoveStart:p,onMoveEnd:g,onPaneContextMenu:l,elementsSelectable:F,zoomOnScroll:j,zoomOnPinch:X,panOnScroll:he,panOnScrollSpeed:R,panOnScrollMode:T,zoomOnDoubleClick:I,panOnDrag:!Y&&ne,defaultViewport:U,translateExtent:B,minZoom:A,maxZoom:k,zoomActivationKeyCode:H,preventScrolling:q,noWheelClassName:G,noPanClassName:ee},fe.createElement(K1,{onSelectionStart:x,onSelectionEnd:M,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:l,onPaneScroll:u,panOnDrag:ne,isSelecting:!!_e,selectionMode:b},t,L&&fe.createElement(XM,{onSelectionContextMenu:V,noPanClassName:ee,disableKeyboardA11y:J})))};J1.displayName="FlowRenderer";var WM=C.memo(J1);function ZM(t){return $t(C.useCallback(n=>t?I1(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function JM(t){const e={input:tc(t.input||L1),default:tc(t.default||cy),output:tc(t.output||U1),group:tc(t.group||uv)},n={},r=Object.keys(t).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,l)=>(o[l]=tc(t[l]||cy),o),n);return{...e,...r}}const ek=({x:t,y:e,width:n,height:r,origin:o})=>!n||!r?{x:t,y:e}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:t,y:e}:{x:t-n*o[0],y:e-r*o[1]},tk=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),eA=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,updateNodeDimensions:l,onError:u}=$t(tk,ri),f=ZM(t.onlyRenderVisibleElements),d=C.useRef(),p=C.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const g=new ResizeObserver(v=>{const E=v.map(b=>({id:b.target.getAttribute("data-id"),nodeElement:b.target,forceUpdate:!0}));l(E)});return d.current=g,g},[]);return C.useEffect(()=>()=>{d?.current?.disconnect()},[]),fe.createElement("div",{className:"react-flow__nodes",style:cv},f.map(g=>{let v=g.type||"default";t.nodeTypes[v]||(u?.("003",Ss.error003(v)),v="default");const E=t.nodeTypes[v]||t.nodeTypes.default,b=!!(g.draggable||e&&typeof g.draggable>"u"),x=!!(g.selectable||o&&typeof g.selectable>"u"),M=!!(g.connectable||n&&typeof g.connectable>"u"),D=!!(g.focusable||r&&typeof g.focusable>"u"),P=t.nodeExtent?tv(g.positionAbsolute,t.nodeExtent):g.positionAbsolute,H=P?.x??0,F=P?.y??0,j=ek({x:H,y:F,width:g.width??0,height:g.height??0,origin:t.nodeOrigin});return fe.createElement(E,{key:g.id,id:g.id,className:g.className,style:g.style,type:v,data:g.data,sourcePosition:g.sourcePosition||Ie.Bottom,targetPosition:g.targetPosition||Ie.Top,hidden:g.hidden,xPos:H,yPos:F,xPosOrigin:j.x,yPosOrigin:j.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!g.selected,isDraggable:b,isSelectable:x,isConnectable:M,isFocusable:D,resizeObserver:p,dragHandle:g.dragHandle,zIndex:g[en]?.z??0,isParent:!!g[en]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!g.width&&!!g.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:g.ariaLabel,hasHandleBounds:!!g[en]?.handleBounds})}))};eA.displayName="NodeRenderer";var nk=C.memo(eA);const ik=(t,e,n)=>n===Ie.Left?t-e:n===Ie.Right?t+e:t,rk=(t,e,n)=>n===Ie.Top?t-e:n===Ie.Bottom?t+e:t,Tb="react-flow__edgeupdater",Ab=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:l,onMouseOut:u,type:f})=>fe.createElement("circle",{onMouseDown:o,onMouseEnter:l,onMouseOut:u,className:vi([Tb,`${Tb}-${f}`]),cx:ik(e,r,t),cy:rk(n,r,t),r,stroke:"transparent",fill:"transparent"}),sk=()=>!0;var fl=t=>{const e=({id:n,className:r,type:o,data:l,onClick:u,onEdgeDoubleClick:f,selected:d,animated:p,label:g,labelStyle:v,labelShowBg:E,labelBgStyle:b,labelBgPadding:x,labelBgBorderRadius:M,style:D,source:P,target:H,sourceX:F,sourceY:j,targetX:X,targetY:Z,sourcePosition:R,targetPosition:T,elementsSelectable:I,hidden:N,sourceHandleId:U,targetHandleId:B,onContextMenu:A,onMouseEnter:k,onMouseMove:q,onMouseLeave:V,reconnectRadius:G,onReconnect:ee,onReconnectStart:J,onReconnectEnd:L,markerEnd:Y,markerStart:ie,rfId:ne,ariaLabel:he,isFocusable:_e,isReconnectable:we,pathOptions:Oe,interactionWidth:ve,disableKeyboardA11y:Se})=>{const Ce=C.useRef(null),[je,dt]=C.useState(!1),[mt,pt]=C.useState(!1),Ve=Ln(),Yt=C.useMemo(()=>`url('#${ly(ie,ne)}')`,[ie,ne]),Pe=C.useMemo(()=>`url('#${ly(Y,ne)}')`,[Y,ne]);if(N)return null;const De=Xt=>{const{edges:tn,addSelectedEdges:pn,unselectNodesAndEdges:Ft,multiSelectionActive:At}=Ve.getState(),Pt=tn.find(an=>an.id===n);Pt&&(I&&(Ve.setState({nodesSelectionActive:!1}),Pt.selected&&At?(Ft({nodes:[],edges:[Pt]}),Ce.current?.blur()):pn([n])),u&&u(Xt,Pt))},Ht=Ju(n,Ve.getState,f),An=Ju(n,Ve.getState,A),dn=Ju(n,Ve.getState,k),Rn=Ju(n,Ve.getState,q),mn=Ju(n,Ve.getState,V),Kt=(Xt,tn)=>{if(Xt.button!==0)return;const{edges:pn,isValidConnection:Ft}=Ve.getState(),At=tn?H:P,Pt=(tn?B:U)||null,an=tn?"target":"source",xn=Ft||sk,cr=tn,Qn=pn.find(Wn=>Wn.id===n);pt(!0),J?.(Xt,Qn,an);const gn=Wn=>{pt(!1),L?.(Wn,Qn,an)};M1({event:Xt,handleId:Pt,nodeId:At,onConnect:Wn=>ee?.(Qn,Wn),isTarget:cr,getState:Ve.getState,setState:Ve.setState,isValidConnection:xn,edgeUpdaterType:an,onReconnectEnd:gn})},zn=Xt=>Kt(Xt,!0),xe=Xt=>Kt(Xt,!1),Fe=()=>dt(!0),kt=()=>dt(!1),Vt=!I&&!u,Fi=Xt=>{if(!Se&&w1.includes(Xt.key)&&I){const{unselectNodesAndEdges:tn,addSelectedEdges:pn,edges:Ft}=Ve.getState();Xt.key==="Escape"?(Ce.current?.blur(),tn({edges:[Ft.find(Pt=>Pt.id===n)]})):pn([n])}};return fe.createElement("g",{className:vi(["react-flow__edge",`react-flow__edge-${o}`,r,{selected:d,animated:p,inactive:Vt,updating:je}]),onClick:De,onDoubleClick:Ht,onContextMenu:An,onMouseEnter:dn,onMouseMove:Rn,onMouseLeave:mn,onKeyDown:_e?Fi:void 0,tabIndex:_e?0:void 0,role:_e?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":he===null?void 0:he||`Edge from ${P} to ${H}`,"aria-describedby":_e?`${H1}-${ne}`:void 0,ref:Ce},!mt&&fe.createElement(t,{id:n,source:P,target:H,selected:d,animated:p,label:g,labelStyle:v,labelShowBg:E,labelBgStyle:b,labelBgPadding:x,labelBgBorderRadius:M,data:l,style:D,sourceX:F,sourceY:j,targetX:X,targetY:Z,sourcePosition:R,targetPosition:T,sourceHandleId:U,targetHandleId:B,markerStart:Yt,markerEnd:Pe,pathOptions:Oe,interactionWidth:ve}),we&&fe.createElement(fe.Fragment,null,(we==="source"||we===!0)&&fe.createElement(Ab,{position:R,centerX:F,centerY:j,radius:G,onMouseDown:zn,onMouseEnter:Fe,onMouseOut:kt,type:"source"}),(we==="target"||we===!0)&&fe.createElement(Ab,{position:T,centerX:X,centerY:Z,radius:G,onMouseDown:xe,onMouseEnter:Fe,onMouseOut:kt,type:"target"})))};return e.displayName="EdgeWrapper",C.memo(e)};function ok(t){const e={default:fl(t.default||ud),straight:fl(t.bezier||sv),step:fl(t.step||rv),smoothstep:fl(t.step||Ud),simplebezier:fl(t.simplebezier||iv)},n={},r=Object.keys(t).filter(o=>!["default","bezier"].includes(o)).reduce((o,l)=>(o[l]=fl(t[l]||ud),o),n);return{...e,...r}}function Rb(t,e,n=null){const r=(n?.x||0)+e.x,o=(n?.y||0)+e.y,l=n?.width||e.width,u=n?.height||e.height;switch(t){case Ie.Top:return{x:r+l/2,y:o};case Ie.Right:return{x:r+l,y:o+u/2};case Ie.Bottom:return{x:r+l/2,y:o+u};case Ie.Left:return{x:r,y:o+u/2}}}function xb(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const ak=(t,e,n,r,o,l)=>{const u=Rb(n,t,e),f=Rb(l,r,o);return{sourceX:u.x,sourceY:u.y,targetX:f.x,targetY:f.y}};function lk({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:l,width:u,height:f,transform:d}){const p={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+o),y2:Math.max(t.y+r,e.y+l)};p.x===p.x2&&(p.x2+=1),p.y===p.y2&&(p.y2+=1);const g=nv({x:(0-d[0])/d[2],y:(0-d[1])/d[2],width:u/d[2],height:f/d[2]}),v=Math.max(0,Math.min(g.x2,p.x2)-Math.max(g.x,p.x)),E=Math.max(0,Math.min(g.y2,p.y2)-Math.max(g.y,p.y));return Math.ceil(v*E)>0}function Ib(t){const e=t?.[en]?.handleBounds||null,n=e&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},e,!!n]}const uk=[{level:0,isMaxLevel:!0,edges:[]}];function ck(t,e,n=!1){let r=-1;const o=t.reduce((u,f)=>{const d=lr(f.zIndex);let p=d?f.zIndex:0;if(n){const g=e.get(f.target),v=e.get(f.source),E=f.selected||g?.selected||v?.selected,b=Math.max(v?.[en]?.z||0,g?.[en]?.z||0,1e3);p=(d?f.zIndex:0)+(E?b:0)}return u[p]?u[p].push(f):u[p]=[f],r=p>r?p:r,u},{}),l=Object.entries(o).map(([u,f])=>{const d=+u;return{edges:f,level:d,isMaxLevel:d===r}});return l.length===0?uk:l}function fk(t,e,n){const r=$t(C.useCallback(o=>t?o.edges.filter(l=>{const u=e.get(l.source),f=e.get(l.target);return u?.width&&u?.height&&f?.width&&f?.height&&lk({sourcePos:u.positionAbsolute||{x:0,y:0},targetPos:f.positionAbsolute||{x:0,y:0},sourceWidth:u.width,sourceHeight:u.height,targetWidth:f.width,targetHeight:f.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[t,e]));return ck(r,e,n)}const hk=({color:t="none",strokeWidth:e=1})=>fe.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),dk=({color:t="none",strokeWidth:e=1})=>fe.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Cb={[xc.Arrow]:hk,[xc.ArrowClosed]:dk};function mk(t){const e=Ln();return C.useMemo(()=>Object.prototype.hasOwnProperty.call(Cb,t)?Cb[t]:(e.getState().onError?.("009",Ss.error009(t)),null),[t])}const pk=({id:t,type:e,color:n,width:r=12.5,height:o=12.5,markerUnits:l="strokeWidth",strokeWidth:u,orient:f="auto-start-reverse"})=>{const d=mk(e);return d?fe.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:f,refX:"0",refY:"0"},fe.createElement(d,{color:n,strokeWidth:u})):null},gk=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((o,l)=>([l.markerStart,l.markerEnd].forEach(u=>{if(u&&typeof u=="object"){const f=ly(u,e);r.includes(f)||(o.push({id:f,color:u.color||t,...u}),r.push(f))}}),o),[]).sort((o,l)=>o.id.localeCompare(l.id))},tA=({defaultColor:t,rfId:e})=>{const n=$t(C.useCallback(gk({defaultColor:t,rfId:e}),[t,e]),(r,o)=>!(r.length!==o.length||r.some((l,u)=>l.id!==o[u].id)));return fe.createElement("defs",null,n.map(r=>fe.createElement(pk,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};tA.displayName="MarkerDefinitions";var yk=C.memo(tA);const vk=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),nA=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:o,noPanClassName:l,onEdgeContextMenu:u,onEdgeMouseEnter:f,onEdgeMouseMove:d,onEdgeMouseLeave:p,onEdgeClick:g,onEdgeDoubleClick:v,onReconnect:E,onReconnectStart:b,onReconnectEnd:x,reconnectRadius:M,children:D,disableKeyboardA11y:P})=>{const{edgesFocusable:H,edgesUpdatable:F,elementsSelectable:j,width:X,height:Z,connectionMode:R,nodeInternals:T,onError:I}=$t(vk,ri),N=fk(e,T,n);return X?fe.createElement(fe.Fragment,null,N.map(({level:U,edges:B,isMaxLevel:A})=>fe.createElement("svg",{key:U,style:{zIndex:U},width:X,height:Z,className:"react-flow__edges react-flow__container"},A&&fe.createElement(yk,{defaultColor:t,rfId:r}),fe.createElement("g",null,B.map(k=>{const[q,V,G]=Ib(T.get(k.source)),[ee,J,L]=Ib(T.get(k.target));if(!G||!L)return null;let Y=k.type||"default";o[Y]||(I?.("011",Ss.error011(Y)),Y="default");const ie=o[Y]||o.default,ne=R===bo.Strict?J.target:(J.target??[]).concat(J.source??[]),he=xb(V.source,k.sourceHandle),_e=xb(ne,k.targetHandle),we=he?.position||Ie.Bottom,Oe=_e?.position||Ie.Top,ve=!!(k.focusable||H&&typeof k.focusable>"u"),Se=k.reconnectable||k.updatable,Ce=typeof E<"u"&&(Se||F&&typeof Se>"u");if(!he||!_e)return I?.("008",Ss.error008(he,k)),null;const{sourceX:je,sourceY:dt,targetX:mt,targetY:pt}=ak(q,he,we,ee,_e,Oe);return fe.createElement(ie,{key:k.id,id:k.id,className:vi([k.className,l]),type:Y,data:k.data,selected:!!k.selected,animated:!!k.animated,hidden:!!k.hidden,label:k.label,labelStyle:k.labelStyle,labelShowBg:k.labelShowBg,labelBgStyle:k.labelBgStyle,labelBgPadding:k.labelBgPadding,labelBgBorderRadius:k.labelBgBorderRadius,style:k.style,source:k.source,target:k.target,sourceHandleId:k.sourceHandle,targetHandleId:k.targetHandle,markerEnd:k.markerEnd,markerStart:k.markerStart,sourceX:je,sourceY:dt,targetX:mt,targetY:pt,sourcePosition:we,targetPosition:Oe,elementsSelectable:j,onContextMenu:u,onMouseEnter:f,onMouseMove:d,onMouseLeave:p,onClick:g,onEdgeDoubleClick:v,onReconnect:E,onReconnectStart:b,onReconnectEnd:x,reconnectRadius:M,rfId:r,ariaLabel:k.ariaLabel,isFocusable:ve,isReconnectable:Ce,pathOptions:"pathOptions"in k?k.pathOptions:void 0,interactionWidth:k.interactionWidth,disableKeyboardA11y:P})})))),D):null};nA.displayName="EdgeRenderer";var _k=C.memo(nA);const Ek=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function wk({children:t}){const e=$t(Ek);return fe.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function bk(t){const e=qc(),n=C.useRef(!1);C.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const Sk={[Ie.Left]:Ie.Right,[Ie.Right]:Ie.Left,[Ie.Top]:Ie.Bottom,[Ie.Bottom]:Ie.Top},iA=({nodeId:t,handleType:e,style:n,type:r=oo.Bezier,CustomComponent:o,connectionStatus:l})=>{const{fromNode:u,handleId:f,toX:d,toY:p,connectionMode:g}=$t(C.useCallback(Z=>({fromNode:Z.nodeInternals.get(t),handleId:Z.connectionHandleId,toX:(Z.connectionPosition.x-Z.transform[0])/Z.transform[2],toY:(Z.connectionPosition.y-Z.transform[1])/Z.transform[2],connectionMode:Z.connectionMode}),[t]),ri),v=u?.[en]?.handleBounds;let E=v?.[e];if(g===bo.Loose&&(E=E||v?.[e==="source"?"target":"source"]),!u||!E)return null;const b=f?E.find(Z=>Z.id===f):E[0],x=b?b.x+b.width/2:(u.width??0)/2,M=b?b.y+b.height/2:u.height??0,D=(u.positionAbsolute?.x??0)+x,P=(u.positionAbsolute?.y??0)+M,H=b?.position,F=H?Sk[H]:null;if(!H||!F)return null;if(o)return fe.createElement(o,{connectionLineType:r,connectionLineStyle:n,fromNode:u,fromHandle:b,fromX:D,fromY:P,toX:d,toY:p,fromPosition:H,toPosition:F,connectionStatus:l});let j="";const X={sourceX:D,sourceY:P,sourcePosition:H,targetX:d,targetY:p,targetPosition:F};return r===oo.Bezier?[j]=R1(X):r===oo.Step?[j]=ay({...X,borderRadius:0}):r===oo.SmoothStep?[j]=ay(X):r===oo.SimpleBezier?[j]=A1(X):j=`M${D},${P} ${d},${p}`,fe.createElement("path",{d:j,fill:"none",className:"react-flow__connection-path",style:n})};iA.displayName="ConnectionLine";const Tk=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function Ak({containerStyle:t,style:e,type:n,component:r}){const{nodeId:o,handleType:l,nodesConnectable:u,width:f,height:d,connectionStatus:p}=$t(Tk,ri);return!(o&&l&&f&&u)?null:fe.createElement("svg",{style:t,width:f,height:d,className:"react-flow__edges react-flow__connectionline react-flow__container"},fe.createElement("g",{className:vi(["react-flow__connection",p])},fe.createElement(iA,{nodeId:o,handleType:l,style:e,type:n,CustomComponent:r,connectionStatus:p})))}function Nb(t,e){return C.useRef(null),Ln(),C.useMemo(()=>e(t),[t])}const rA=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:o,onInit:l,onNodeClick:u,onEdgeClick:f,onNodeDoubleClick:d,onEdgeDoubleClick:p,onNodeMouseEnter:g,onNodeMouseMove:v,onNodeMouseLeave:E,onNodeContextMenu:b,onSelectionContextMenu:x,onSelectionStart:M,onSelectionEnd:D,connectionLineType:P,connectionLineStyle:H,connectionLineComponent:F,connectionLineContainerStyle:j,selectionKeyCode:X,selectionOnDrag:Z,selectionMode:R,multiSelectionKeyCode:T,panActivationKeyCode:I,zoomActivationKeyCode:N,deleteKeyCode:U,onlyRenderVisibleElements:B,elementsSelectable:A,selectNodesOnDrag:k,defaultViewport:q,translateExtent:V,minZoom:G,maxZoom:ee,preventScrolling:J,defaultMarkerColor:L,zoomOnScroll:Y,zoomOnPinch:ie,panOnScroll:ne,panOnScrollSpeed:he,panOnScrollMode:_e,zoomOnDoubleClick:we,panOnDrag:Oe,onPaneClick:ve,onPaneMouseEnter:Se,onPaneMouseMove:Ce,onPaneMouseLeave:je,onPaneScroll:dt,onPaneContextMenu:mt,onEdgeContextMenu:pt,onEdgeMouseEnter:Ve,onEdgeMouseMove:Yt,onEdgeMouseLeave:Pe,onReconnect:De,onReconnectStart:Ht,onReconnectEnd:An,reconnectRadius:dn,noDragClassName:Rn,noWheelClassName:mn,noPanClassName:Kt,elevateEdgesOnSelect:zn,disableKeyboardA11y:xe,nodeOrigin:Fe,nodeExtent:kt,rfId:Vt})=>{const Fi=Nb(t,JM),Xt=Nb(e,ok);return bk(l),fe.createElement(WM,{onPaneClick:ve,onPaneMouseEnter:Se,onPaneMouseMove:Ce,onPaneMouseLeave:je,onPaneContextMenu:mt,onPaneScroll:dt,deleteKeyCode:U,selectionKeyCode:X,selectionOnDrag:Z,selectionMode:R,onSelectionStart:M,onSelectionEnd:D,multiSelectionKeyCode:T,panActivationKeyCode:I,zoomActivationKeyCode:N,elementsSelectable:A,onMove:n,onMoveStart:r,onMoveEnd:o,zoomOnScroll:Y,zoomOnPinch:ie,zoomOnDoubleClick:we,panOnScroll:ne,panOnScrollSpeed:he,panOnScrollMode:_e,panOnDrag:Oe,defaultViewport:q,translateExtent:V,minZoom:G,maxZoom:ee,onSelectionContextMenu:x,preventScrolling:J,noDragClassName:Rn,noWheelClassName:mn,noPanClassName:Kt,disableKeyboardA11y:xe},fe.createElement(wk,null,fe.createElement(_k,{edgeTypes:Xt,onEdgeClick:f,onEdgeDoubleClick:p,onlyRenderVisibleElements:B,onEdgeContextMenu:pt,onEdgeMouseEnter:Ve,onEdgeMouseMove:Yt,onEdgeMouseLeave:Pe,onReconnect:De,onReconnectStart:Ht,onReconnectEnd:An,reconnectRadius:dn,defaultMarkerColor:L,noPanClassName:Kt,elevateEdgesOnSelect:!!zn,disableKeyboardA11y:xe,rfId:Vt},fe.createElement(Ak,{style:H,type:P,component:F,containerStyle:j})),fe.createElement("div",{className:"react-flow__edgelabel-renderer"}),fe.createElement(nk,{nodeTypes:Fi,onNodeClick:u,onNodeDoubleClick:d,onNodeMouseEnter:g,onNodeMouseMove:v,onNodeMouseLeave:E,onNodeContextMenu:b,selectNodesOnDrag:k,onlyRenderVisibleElements:B,noPanClassName:Kt,noDragClassName:Rn,disableKeyboardA11y:xe,nodeOrigin:Fe,nodeExtent:kt,rfId:Vt})))};rA.displayName="GraphView";var Rk=C.memo(rA);const hy=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],to={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:hy,nodeExtent:hy,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:bo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:eM,isValidConnection:void 0},xk=()=>hN((t,e)=>({...to,setNodes:n=>{const{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:l}=e();t({nodeInternals:vg(n,r,o,l)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(o=>({...r,...o}))})},setDefaultNodesAndEdges:(n,r)=>{const o=typeof n<"u",l=typeof r<"u",u=o?vg(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:u,edges:l?r:[],hasDefaultNodes:o,hasDefaultEdges:l})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:o,fitViewOnInit:l,fitViewOnInitDone:u,fitViewOnInitOptions:f,domNode:d,nodeOrigin:p}=e(),g=d?.querySelector(".react-flow__viewport");if(!g)return;const v=window.getComputedStyle(g),{m22:E}=new window.DOMMatrixReadOnly(v.transform),b=n.reduce((M,D)=>{const P=o.get(D.id);if(P?.hidden)o.set(P.id,{...P,[en]:{...P[en],handleBounds:void 0}});else if(P){const H=ev(D.nodeElement);!!(H.width&&H.height&&(P.width!==H.width||P.height!==H.height||D.forceUpdate))&&(o.set(P.id,{...P,[en]:{...P[en],handleBounds:{source:Sb(".source",D.nodeElement,E,p),target:Sb(".target",D.nodeElement,E,p)}},...H}),M.push({id:P.id,type:"dimensions",dimensions:H}))}return M},[]);q1(o,p);const x=u||l&&!u&&$1(e,{initial:!0,...f});t({nodeInternals:new Map(o),fitViewOnInitDone:x}),b?.length>0&&r?.(b)},updateNodePositions:(n,r=!0,o=!1)=>{const{triggerNodeChanges:l}=e(),u=n.map(f=>{const d={id:f.id,type:"position",dragging:o};return r&&(d.positionAbsolute=f.positionAbsolute,d.position=f.position),d});l(u)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:o,hasDefaultNodes:l,nodeOrigin:u,getNodes:f,elevateNodesOnSelect:d}=e();if(n?.length){if(l){const p=Y1(n,f()),g=vg(p,o,u,d);t({nodeInternals:g})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:o,getNodes:l}=e();let u,f=null;r?u=n.map(d=>ro(d,!0)):(u=Sl(l(),n),f=Sl(o,[])),xh({changedNodes:u,changedEdges:f,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:o,getNodes:l}=e();let u,f=null;r?u=n.map(d=>ro(d,!0)):(u=Sl(o,n),f=Sl(l(),[])),xh({changedNodes:f,changedEdges:u,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:o,getNodes:l}=e(),u=n||l(),f=r||o,d=u.map(g=>(g.selected=!1,ro(g.id,!1))),p=f.map(g=>ro(g.id,!1));xh({changedNodes:d,changedEdges:p,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:o}=e();r?.scaleExtent([n,o]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:o}=e();r?.scaleExtent([o,n]),t({maxZoom:n})},setTranslateExtent:n=>{e().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),l=r().filter(f=>f.selected).map(f=>ro(f.id,!1)),u=n.filter(f=>f.selected).map(f=>ro(f.id,!1));xh({changedNodes:l,changedEdges:u,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(o=>{o.positionAbsolute=tv(o.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:o,height:l,d3Zoom:u,d3Selection:f,translateExtent:d}=e();if(!u||!f||!n.x&&!n.y)return!1;const p=mo.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),g=[[0,0],[o,l]],v=u?.constrain()(p,g,d);return u.transform(f,v),r[0]!==v.x||r[1]!==v.y||r[2]!==v.k},cancelConnection:()=>t({connectionNodeId:to.connectionNodeId,connectionHandleId:to.connectionHandleId,connectionHandleType:to.connectionHandleType,connectionStatus:to.connectionStatus,connectionStartHandle:to.connectionStartHandle,connectionEndHandle:to.connectionEndHandle}),reset:()=>t({...to})}),Object.is),sA=({children:t})=>{const e=C.useRef(null);return e.current||(e.current=xk()),fe.createElement(GO,{value:e.current},t)};sA.displayName="ReactFlowProvider";const oA=({children:t})=>C.useContext(zd)?fe.createElement(fe.Fragment,null,t):fe.createElement(sA,null,t);oA.displayName="ReactFlowWrapper";const Ik={input:L1,default:cy,output:U1,group:uv},Ck={default:ud,straight:sv,step:rv,smoothstep:Ud,simplebezier:iv},Nk=[0,0],Dk=[15,15],Ok={x:0,y:0,zoom:1},Mk={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},aA=C.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:l=Ik,edgeTypes:u=Ck,onNodeClick:f,onEdgeClick:d,onInit:p,onMove:g,onMoveStart:v,onMoveEnd:E,onConnect:b,onConnectStart:x,onConnectEnd:M,onClickConnectStart:D,onClickConnectEnd:P,onNodeMouseEnter:H,onNodeMouseMove:F,onNodeMouseLeave:j,onNodeContextMenu:X,onNodeDoubleClick:Z,onNodeDragStart:R,onNodeDrag:T,onNodeDragStop:I,onNodesDelete:N,onEdgesDelete:U,onSelectionChange:B,onSelectionDragStart:A,onSelectionDrag:k,onSelectionDragStop:q,onSelectionContextMenu:V,onSelectionStart:G,onSelectionEnd:ee,connectionMode:J=bo.Strict,connectionLineType:L=oo.Bezier,connectionLineStyle:Y,connectionLineComponent:ie,connectionLineContainerStyle:ne,deleteKeyCode:he="Backspace",selectionKeyCode:_e="Shift",selectionOnDrag:we=!1,selectionMode:Oe=Rc.Full,panActivationKeyCode:ve="Space",multiSelectionKeyCode:Se=ld()?"Meta":"Control",zoomActivationKeyCode:Ce=ld()?"Meta":"Control",snapToGrid:je=!1,snapGrid:dt=Dk,onlyRenderVisibleElements:mt=!1,selectNodesOnDrag:pt=!0,nodesDraggable:Ve,nodesConnectable:Yt,nodesFocusable:Pe,nodeOrigin:De=Nk,edgesFocusable:Ht,edgesUpdatable:An,elementsSelectable:dn,defaultViewport:Rn=Ok,minZoom:mn=.5,maxZoom:Kt=2,translateExtent:zn=hy,preventScrolling:xe=!0,nodeExtent:Fe,defaultMarkerColor:kt="#b1b1b7",zoomOnScroll:Vt=!0,zoomOnPinch:Fi=!0,panOnScroll:Xt=!1,panOnScrollSpeed:tn=.5,panOnScrollMode:pn=ca.Free,zoomOnDoubleClick:Ft=!0,panOnDrag:At=!0,onPaneClick:Pt,onPaneMouseEnter:an,onPaneMouseMove:xn,onPaneMouseLeave:cr,onPaneScroll:Qn,onPaneContextMenu:gn,children:oi,onEdgeContextMenu:Wn,onEdgeDoubleClick:_i,onEdgeMouseEnter:Xr,onEdgeMouseMove:xi,onEdgeMouseLeave:fr,onEdgeUpdate:ai,onEdgeUpdateStart:Ii,onEdgeUpdateEnd:Rt,onReconnect:gt,onReconnectStart:Ut,onReconnectEnd:Qt,reconnectRadius:Ar=10,edgeUpdaterRadius:Mo=10,onNodesChange:li,onEdgesChange:Rr,noDragClassName:qi="nodrag",noWheelClassName:Ci="nowheel",noPanClassName:ui="nopan",fitView:In=!1,fitViewOptions:ci,connectOnClick:yn=!0,attributionPosition:Q,proOptions:ue,defaultEdgeOptions:Ee,elevateNodesOnSelect:Te=!0,elevateEdgesOnSelect:Ze=!1,disableKeyboardA11y:$e=!1,autoPanOnConnect:bt=!0,autoPanOnNodeDrag:yt=!0,connectionRadius:Cn=20,isValidConnection:vt,onError:ct,style:_t,id:ln,nodeDragThreshold:Wt,...nn},fi)=>{const hi=ln||"1";return fe.createElement("div",{...nn,style:{..._t,...Mk},ref:fi,className:vi(["react-flow",o]),"data-testid":"rf__wrapper",id:ln},fe.createElement(oA,null,fe.createElement(Rk,{onInit:p,onMove:g,onMoveStart:v,onMoveEnd:E,onNodeClick:f,onEdgeClick:d,onNodeMouseEnter:H,onNodeMouseMove:F,onNodeMouseLeave:j,onNodeContextMenu:X,onNodeDoubleClick:Z,nodeTypes:l,edgeTypes:u,connectionLineType:L,connectionLineStyle:Y,connectionLineComponent:ie,connectionLineContainerStyle:ne,selectionKeyCode:_e,selectionOnDrag:we,selectionMode:Oe,deleteKeyCode:he,multiSelectionKeyCode:Se,panActivationKeyCode:ve,zoomActivationKeyCode:Ce,onlyRenderVisibleElements:mt,selectNodesOnDrag:pt,defaultViewport:Rn,translateExtent:zn,minZoom:mn,maxZoom:Kt,preventScrolling:xe,zoomOnScroll:Vt,zoomOnPinch:Fi,zoomOnDoubleClick:Ft,panOnScroll:Xt,panOnScrollSpeed:tn,panOnScrollMode:pn,panOnDrag:At,onPaneClick:Pt,onPaneMouseEnter:an,onPaneMouseMove:xn,onPaneMouseLeave:cr,onPaneScroll:Qn,onPaneContextMenu:gn,onSelectionContextMenu:V,onSelectionStart:G,onSelectionEnd:ee,onEdgeContextMenu:Wn,onEdgeDoubleClick:_i,onEdgeMouseEnter:Xr,onEdgeMouseMove:xi,onEdgeMouseLeave:fr,onReconnect:gt??ai,onReconnectStart:Ut??Ii,onReconnectEnd:Qt??Rt,reconnectRadius:Ar??Mo,defaultMarkerColor:kt,noDragClassName:qi,noWheelClassName:Ci,noPanClassName:ui,elevateEdgesOnSelect:Ze,rfId:hi,disableKeyboardA11y:$e,nodeOrigin:De,nodeExtent:Fe}),fe.createElement(SM,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:b,onConnectStart:x,onConnectEnd:M,onClickConnectStart:D,onClickConnectEnd:P,nodesDraggable:Ve,nodesConnectable:Yt,nodesFocusable:Pe,edgesFocusable:Ht,edgesUpdatable:An,elementsSelectable:dn,elevateNodesOnSelect:Te,minZoom:mn,maxZoom:Kt,nodeExtent:Fe,onNodesChange:li,onEdgesChange:Rr,snapToGrid:je,snapGrid:dt,connectionMode:J,translateExtent:zn,connectOnClick:yn,defaultEdgeOptions:Ee,fitView:In,fitViewOptions:ci,onNodesDelete:N,onEdgesDelete:U,onNodeDragStart:R,onNodeDrag:T,onNodeDragStop:I,onSelectionDrag:k,onSelectionDragStart:A,onSelectionDragStop:q,noPanClassName:ui,nodeOrigin:De,rfId:hi,autoPanOnConnect:bt,autoPanOnNodeDrag:yt,onError:ct,connectionRadius:Cn,isValidConnection:vt,nodeDragThreshold:Wt}),fe.createElement(wM,{onSelectionChange:B}),oi,fe.createElement(KO,{proOptions:ue,position:Q}),fe.createElement(IM,{rfId:hi,disableKeyboardA11y:$e})))});aA.displayName="ReactFlow";function lA(t){return e=>{const[n,r]=C.useState(e),o=C.useCallback(l=>r(u=>t(l,u)),[]);return[n,r,o]}}const kk=lA(Y1),Vk=lA(HM);function Pk(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},fe.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Lk(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},fe.createElement("path",{d:"M0 0h32v4.2H0z"}))}function zk(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},fe.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Uk(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},fe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Bk(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},fe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const oc=({children:t,className:e,...n})=>fe.createElement("button",{type:"button",className:vi(["react-flow__controls-button",e]),...n},t);oc.displayName="ControlButton";const jk=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),uA=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:l,onZoomOut:u,onFitView:f,onInteractiveChange:d,className:p,children:g,position:v="bottom-left"})=>{const E=Ln(),[b,x]=C.useState(!1),{isInteractive:M,minZoomReached:D,maxZoomReached:P}=$t(jk,ri),{zoomIn:H,zoomOut:F,fitView:j}=qc();if(C.useEffect(()=>{x(!0)},[]),!b)return null;const X=()=>{H(),l?.()},Z=()=>{F(),u?.()},R=()=>{j(o),f?.()},T=()=>{E.setState({nodesDraggable:!M,nodesConnectable:!M,elementsSelectable:!M}),d?.(!M)};return fe.createElement(v1,{className:vi(["react-flow__controls",p]),position:v,style:t,"data-testid":"rf__controls"},e&&fe.createElement(fe.Fragment,null,fe.createElement(oc,{onClick:X,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:P},fe.createElement(Pk,null)),fe.createElement(oc,{onClick:Z,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:D},fe.createElement(Lk,null))),n&&fe.createElement(oc,{className:"react-flow__controls-fitview",onClick:R,title:"fit view","aria-label":"fit view"},fe.createElement(zk,null)),r&&fe.createElement(oc,{className:"react-flow__controls-interactive",onClick:T,title:"toggle interactivity","aria-label":"toggle interactivity"},M?fe.createElement(Bk,null):fe.createElement(Uk,null)),g)};uA.displayName="Controls";var Hk=C.memo(uA),ur;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(ur||(ur={}));function Fk({color:t,dimensions:e,lineWidth:n}){return fe.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function qk({color:t,radius:e}){return fe.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const $k={[ur.Dots]:"#91919a",[ur.Lines]:"#eee",[ur.Cross]:"#e2e2e2"},Gk={[ur.Dots]:1,[ur.Lines]:1,[ur.Cross]:6},Yk=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function cA({id:t,variant:e=ur.Dots,gap:n=20,size:r,lineWidth:o=1,offset:l=2,color:u,style:f,className:d}){const p=C.useRef(null),{transform:g,patternId:v}=$t(Yk,ri),E=u||$k[e],b=r||Gk[e],x=e===ur.Dots,M=e===ur.Cross,D=Array.isArray(n)?n:[n,n],P=[D[0]*g[2]||1,D[1]*g[2]||1],H=b*g[2],F=M?[H,H]:P,j=x?[H/l,H/l]:[F[0]/l,F[1]/l];return fe.createElement("svg",{className:vi(["react-flow__background",d]),style:{...f,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:p,"data-testid":"rf__background"},fe.createElement("pattern",{id:v+t,x:g[0]%P[0],y:g[1]%P[1],width:P[0],height:P[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`},x?fe.createElement(qk,{color:E,radius:H/l}):fe.createElement(Fk,{dimensions:F,color:E,lineWidth:o})),fe.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${v+t})`}))}cA.displayName="Background";var Kk=C.memo(cA);function dc(){return dc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dc.apply(null,arguments)}var fo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $c(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Db,Ob={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/var bg,Mb,kb,Xk=(Db||(Db=1,bg=Ob,function(){var t={}.hasOwnProperty;function e(){for(var n=[],r=0;r<arguments.length;r++){var o=arguments[r];if(o){var l=typeof o;if(l==="string"||l==="number")n.push(o);else if(Array.isArray(o)){if(o.length){var u=e.apply(null,o);u&&n.push(u)}}else if(l==="object")if(o.toString===Object.prototype.toString)for(var f in o)t.call(o,f)&&o[f]&&n.push(f);else n.push(o.toString())}}return n.join(" ")}bg.exports?(e.default=e,bg.exports=e):window.classNames=e}()),Ob.exports),dy=$c(Xk),Vb,yr=$c(function(){if(kb)return Mb;kb=1;var t=/^\s+|\s+$/g,e=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,r=/^0o[0-7]+$/i,o=parseInt,l=Object.prototype.toString;function u(d){var p=typeof d;return!!d&&(p=="object"||p=="function")}function f(d){if(typeof d=="number")return d;if(function(v){return typeof v=="symbol"||function(E){return!!E&&typeof E=="object"}(v)&&l.call(v)=="[object Symbol]"}(d))return NaN;if(u(d)){var p=typeof d.valueOf=="function"?d.valueOf():d;d=u(p)?p+"":p}if(typeof d!="string")return d===0?d:+d;d=d.replace(t,"");var g=n.test(d);return g||r.test(d)?o(d.slice(2),g?2:8):e.test(d)?NaN:+d}return Mb=function(d,p,g){return g===void 0&&(g=p,p=void 0),g!==void 0&&(g=(g=f(g))==g?g:0),p!==void 0&&(p=(p=f(p))==p?p:0),function(v,E,b){return v==v&&(b!==void 0&&(v=v<=b?v:b),E!==void 0&&(v=v>=E?v:E)),v}(f(d),p,g)}}()),Sg={exports:{}},Qk=(Vb||(Vb=1,function(t,e){var n="__lodash_hash_undefined__",r=9007199254740991,o="[object Arguments]",l="[object Array]",u="[object Boolean]",f="[object Date]",d="[object Error]",p="[object Function]",g="[object Map]",v="[object Number]",E="[object Object]",b="[object Promise]",x="[object RegExp]",M="[object Set]",D="[object String]",P="[object Symbol]",H="[object WeakMap]",F="[object ArrayBuffer]",j="[object DataView]",X=/^\[object .+?Constructor\]$/,Z=/^(?:0|[1-9]\d*)$/,R={};R["[object Float32Array]"]=R["[object Float64Array]"]=R["[object Int8Array]"]=R["[object Int16Array]"]=R["[object Int32Array]"]=R["[object Uint8Array]"]=R["[object Uint8ClampedArray]"]=R["[object Uint16Array]"]=R["[object Uint32Array]"]=!0,R[o]=R[l]=R[F]=R[u]=R[j]=R[f]=R[d]=R[p]=R[g]=R[v]=R[E]=R[x]=R[M]=R[D]=R[H]=!1;var T=typeof fo=="object"&&fo&&fo.Object===Object&&fo,I=typeof self=="object"&&self&&self.Object===Object&&self,N=T||I||Function("return this")(),U=e&&!e.nodeType&&e,B=U&&t&&!t.nodeType&&t,A=B&&B.exports===U,k=A&&T.process,q=function(){try{return k&&k.binding&&k.binding("util")}catch{}}(),V=q&&q.isTypedArray;function G(Q,ue){for(var Ee=-1,Te=Q==null?0:Q.length;++Ee<Te;)if(ue(Q[Ee],Ee,Q))return!0;return!1}function ee(Q){var ue=-1,Ee=Array(Q.size);return Q.forEach(function(Te,Ze){Ee[++ue]=[Ze,Te]}),Ee}function J(Q){var ue=-1,Ee=Array(Q.size);return Q.forEach(function(Te){Ee[++ue]=Te}),Ee}var L,Y,ie,ne=Array.prototype,he=Function.prototype,_e=Object.prototype,we=N["__core-js_shared__"],Oe=he.toString,ve=_e.hasOwnProperty,Se=(L=/[^.]+$/.exec(we&&we.keys&&we.keys.IE_PROTO||""))?"Symbol(src)_1."+L:"",Ce=_e.toString,je=RegExp("^"+Oe.call(ve).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),dt=A?N.Buffer:void 0,mt=N.Symbol,pt=N.Uint8Array,Ve=_e.propertyIsEnumerable,Yt=ne.splice,Pe=mt?mt.toStringTag:void 0,De=Object.getOwnPropertySymbols,Ht=dt?dt.isBuffer:void 0,An=(Y=Object.keys,ie=Object,function(Q){return Y(ie(Q))}),dn=Ii(N,"DataView"),Rn=Ii(N,"Map"),mn=Ii(N,"Promise"),Kt=Ii(N,"Set"),zn=Ii(N,"WeakMap"),xe=Ii(Object,"create"),Fe=Qt(dn),kt=Qt(Rn),Vt=Qt(mn),Fi=Qt(Kt),Xt=Qt(zn),tn=mt?mt.prototype:void 0,pn=tn?tn.valueOf:void 0;function Ft(Q){var ue=-1,Ee=Q==null?0:Q.length;for(this.clear();++ue<Ee;){var Te=Q[ue];this.set(Te[0],Te[1])}}function At(Q){var ue=-1,Ee=Q==null?0:Q.length;for(this.clear();++ue<Ee;){var Te=Q[ue];this.set(Te[0],Te[1])}}function Pt(Q){var ue=-1,Ee=Q==null?0:Q.length;for(this.clear();++ue<Ee;){var Te=Q[ue];this.set(Te[0],Te[1])}}function an(Q){var ue=-1,Ee=Q==null?0:Q.length;for(this.__data__=new Pt;++ue<Ee;)this.add(Q[ue])}function xn(Q){var ue=this.__data__=new At(Q);this.size=ue.size}function cr(Q,ue){var Ee=li(Q),Te=!Ee&&Mo(Q),Ze=!Ee&&!Te&&Rr(Q),$e=!Ee&&!Te&&!Ze&&ci(Q),bt=Ee||Te||Ze||$e,yt=bt?function(ct,_t){for(var ln=-1,Wt=Array(ct);++ln<ct;)Wt[ln]=_t(ln);return Wt}(Q.length,String):[],Cn=yt.length;for(var vt in Q)!ve.call(Q,vt)||bt&&(vt=="length"||Ze&&(vt=="offset"||vt=="parent")||$e&&(vt=="buffer"||vt=="byteLength"||vt=="byteOffset")||Ut(vt,Cn))||yt.push(vt);return yt}function Qn(Q,ue){for(var Ee=Q.length;Ee--;)if(Ar(Q[Ee][0],ue))return Ee;return-1}function gn(Q){return Q==null?Q===void 0?"[object Undefined]":"[object Null]":Pe&&Pe in Object(Q)?function(ue){var Ee=ve.call(ue,Pe),Te=ue[Pe];try{ue[Pe]=void 0;var Ze=!0}catch{}var $e=Ce.call(ue);return Ze&&(Ee?ue[Pe]=Te:delete ue[Pe]),$e}(Q):function(ue){return Ce.call(ue)}(Q)}function oi(Q){return In(Q)&&gn(Q)==o}function Wn(Q,ue,Ee,Te,Ze){return Q===ue||(Q==null||ue==null||!In(Q)&&!In(ue)?Q!=Q&&ue!=ue:function($e,bt,yt,Cn,vt,ct){var _t=li($e),ln=li(bt),Wt=_t?l:gt($e),nn=ln?l:gt(bt),fi=(Wt=Wt==o?E:Wt)==E,hi=(nn=nn==o?E:nn)==E,$i=Wt==nn;if($i&&Rr($e)){if(!Rr(bt))return!1;_t=!0,fi=!1}if($i&&!fi)return ct||(ct=new xn),_t||ci($e)?xi($e,bt,yt,Cn,vt,ct):function(rt,it,Yi,Ki,Bt,Dt,Un){switch(Yi){case j:if(rt.byteLength!=it.byteLength||rt.byteOffset!=it.byteOffset)return!1;rt=rt.buffer,it=it.buffer;case F:return!(rt.byteLength!=it.byteLength||!Dt(new pt(rt),new pt(it)));case u:case f:case v:return Ar(+rt,+it);case d:return rt.name==it.name&&rt.message==it.message;case x:case D:return rt==it+"";case g:var Bn=ee;case M:var di=1&Ki;if(Bn||(Bn=J),rt.size!=it.size&&!di)return!1;var ut=Un.get(rt);if(ut)return ut==it;Ki|=2,Un.set(rt,it);var hr=xi(Bn(rt),Bn(it),Ki,Bt,Dt,Un);return Un.delete(rt),hr;case P:if(pn)return pn.call(rt)==pn.call(it)}return!1}($e,bt,Wt,yt,Cn,vt,ct);if(!(1&yt)){var Gi=fi&&ve.call($e,"__wrapped__"),Nn=hi&&ve.call(bt,"__wrapped__");if(Gi||Nn){var ko=Gi?$e.value():$e,tu=Nn?bt.value():bt;return ct||(ct=new xn),vt(ko,tu,yt,Cn,ct)}}return!!$i&&(ct||(ct=new xn),function(rt,it,Yi,Ki,Bt,Dt){var Un=1&Yi,Bn=fr(rt),di=Bn.length,ut=fr(it),hr=ut.length;if(di!=hr&&!Un)return!1;for(var jn=di;jn--;){var mi=Bn[jn];if(!(Un?mi in it:ve.call(it,mi)))return!1}var Vo=Dt.get(rt);if(Vo&&Dt.get(it))return Vo==it;var xr=!0;Dt.set(rt,it),Dt.set(it,rt);for(var Qr=Un;++jn<di;){var Ds=rt[mi=Bn[jn]],Os=it[mi];if(Ki)var Wr=Un?Ki(Os,Ds,mi,it,rt,Dt):Ki(Ds,Os,mi,rt,it,Dt);if(!(Wr===void 0?Ds===Os||Bt(Ds,Os,Yi,Ki,Dt):Wr)){xr=!1;break}Qr||(Qr=mi=="constructor")}if(xr&&!Qr){var Ei=rt.constructor,Hn=it.constructor;Ei==Hn||!("constructor"in rt)||!("constructor"in it)||typeof Ei=="function"&&Ei instanceof Ei&&typeof Hn=="function"&&Hn instanceof Hn||(xr=!1)}return Dt.delete(rt),Dt.delete(it),xr}($e,bt,yt,Cn,vt,ct))}(Q,ue,Ee,Te,Wn,Ze))}function _i(Q){return!(!ui(Q)||function(ue){return!!Se&&Se in ue}(Q))&&(qi(Q)?je:X).test(Qt(Q))}function Xr(Q){if(Ee=(ue=Q)&&ue.constructor,Te=typeof Ee=="function"&&Ee.prototype||_e,ue!==Te)return An(Q);var ue,Ee,Te,Ze=[];for(var $e in Object(Q))ve.call(Q,$e)&&$e!="constructor"&&Ze.push($e);return Ze}function xi(Q,ue,Ee,Te,Ze,$e){var bt=1&Ee,yt=Q.length,Cn=ue.length;if(yt!=Cn&&!(bt&&Cn>yt))return!1;var vt=$e.get(Q);if(vt&&$e.get(ue))return vt==ue;var ct=-1,_t=!0,ln=2&Ee?new an:void 0;for($e.set(Q,ue),$e.set(ue,Q);++ct<yt;){var Wt=Q[ct],nn=ue[ct];if(Te)var fi=bt?Te(nn,Wt,ct,ue,Q,$e):Te(Wt,nn,ct,Q,ue,$e);if(fi!==void 0){if(fi)continue;_t=!1;break}if(ln){if(!G(ue,function(hi,$i){if(Gi=$i,!ln.has(Gi)&&(Wt===hi||Ze(Wt,hi,Ee,Te,$e)))return ln.push($i);var Gi})){_t=!1;break}}else if(Wt!==nn&&!Ze(Wt,nn,Ee,Te,$e)){_t=!1;break}}return $e.delete(Q),$e.delete(ue),_t}function fr(Q){return function(ue,Ee,Te){var Ze=Ee(ue);return li(ue)?Ze:function($e,bt){for(var yt=-1,Cn=bt.length,vt=$e.length;++yt<Cn;)$e[vt+yt]=bt[yt];return $e}(Ze,Te(ue))}(Q,yn,Rt)}function ai(Q,ue){var Ee,Te,Ze=Q.__data__;return((Te=typeof(Ee=ue))=="string"||Te=="number"||Te=="symbol"||Te=="boolean"?Ee!=="__proto__":Ee===null)?Ze[typeof ue=="string"?"string":"hash"]:Ze.map}function Ii(Q,ue){var Ee=function(Te,Ze){return Te?.[Ze]}(Q,ue);return _i(Ee)?Ee:void 0}Ft.prototype.clear=function(){this.__data__=xe?xe(null):{},this.size=0},Ft.prototype.delete=function(Q){var ue=this.has(Q)&&delete this.__data__[Q];return this.size-=ue?1:0,ue},Ft.prototype.get=function(Q){var ue=this.__data__;if(xe){var Ee=ue[Q];return Ee===n?void 0:Ee}return ve.call(ue,Q)?ue[Q]:void 0},Ft.prototype.has=function(Q){var ue=this.__data__;return xe?ue[Q]!==void 0:ve.call(ue,Q)},Ft.prototype.set=function(Q,ue){var Ee=this.__data__;return this.size+=this.has(Q)?0:1,Ee[Q]=xe&&ue===void 0?n:ue,this},At.prototype.clear=function(){this.__data__=[],this.size=0},At.prototype.delete=function(Q){var ue=this.__data__,Ee=Qn(ue,Q);return!(Ee<0||(Ee==ue.length-1?ue.pop():Yt.call(ue,Ee,1),--this.size,0))},At.prototype.get=function(Q){var ue=this.__data__,Ee=Qn(ue,Q);return Ee<0?void 0:ue[Ee][1]},At.prototype.has=function(Q){return Qn(this.__data__,Q)>-1},At.prototype.set=function(Q,ue){var Ee=this.__data__,Te=Qn(Ee,Q);return Te<0?(++this.size,Ee.push([Q,ue])):Ee[Te][1]=ue,this},Pt.prototype.clear=function(){this.size=0,this.__data__={hash:new Ft,map:new(Rn||At),string:new Ft}},Pt.prototype.delete=function(Q){var ue=ai(this,Q).delete(Q);return this.size-=ue?1:0,ue},Pt.prototype.get=function(Q){return ai(this,Q).get(Q)},Pt.prototype.has=function(Q){return ai(this,Q).has(Q)},Pt.prototype.set=function(Q,ue){var Ee=ai(this,Q),Te=Ee.size;return Ee.set(Q,ue),this.size+=Ee.size==Te?0:1,this},an.prototype.add=an.prototype.push=function(Q){return this.__data__.set(Q,n),this},an.prototype.has=function(Q){return this.__data__.has(Q)},xn.prototype.clear=function(){this.__data__=new At,this.size=0},xn.prototype.delete=function(Q){var ue=this.__data__,Ee=ue.delete(Q);return this.size=ue.size,Ee},xn.prototype.get=function(Q){return this.__data__.get(Q)},xn.prototype.has=function(Q){return this.__data__.has(Q)},xn.prototype.set=function(Q,ue){var Ee=this.__data__;if(Ee instanceof At){var Te=Ee.__data__;if(!Rn||Te.length<199)return Te.push([Q,ue]),this.size=++Ee.size,this;Ee=this.__data__=new Pt(Te)}return Ee.set(Q,ue),this.size=Ee.size,this};var Rt=De?function(Q){return Q==null?[]:(Q=Object(Q),function(ue,Ee){for(var Te=-1,Ze=ue==null?0:ue.length,$e=0,bt=[];++Te<Ze;){var yt=ue[Te];Ee(yt,Te,ue)&&(bt[$e++]=yt)}return bt}(De(Q),function(ue){return Ve.call(Q,ue)}))}:function(){return[]},gt=gn;function Ut(Q,ue){return!!(ue=ue??r)&&(typeof Q=="number"||Z.test(Q))&&Q>-1&&Q%1==0&&Q<ue}function Qt(Q){if(Q!=null){try{return Oe.call(Q)}catch{}try{return Q+""}catch{}}return""}function Ar(Q,ue){return Q===ue||Q!=Q&&ue!=ue}(dn&&gt(new dn(new ArrayBuffer(1)))!=j||Rn&&gt(new Rn)!=g||mn&&gt(mn.resolve())!=b||Kt&&gt(new Kt)!=M||zn&&gt(new zn)!=H)&&(gt=function(Q){var ue=gn(Q),Ee=ue==E?Q.constructor:void 0,Te=Ee?Qt(Ee):"";if(Te)switch(Te){case Fe:return j;case kt:return g;case Vt:return b;case Fi:return M;case Xt:return H}return ue});var Mo=oi(function(){return arguments}())?oi:function(Q){return In(Q)&&ve.call(Q,"callee")&&!Ve.call(Q,"callee")},li=Array.isArray,Rr=Ht||function(){return!1};function qi(Q){if(!ui(Q))return!1;var ue=gn(Q);return ue==p||ue=="[object GeneratorFunction]"||ue=="[object AsyncFunction]"||ue=="[object Proxy]"}function Ci(Q){return typeof Q=="number"&&Q>-1&&Q%1==0&&Q<=r}function ui(Q){var ue=typeof Q;return Q!=null&&(ue=="object"||ue=="function")}function In(Q){return Q!=null&&typeof Q=="object"}var ci=V?function(Q){return function(ue){return Q(ue)}}(V):function(Q){return In(Q)&&Ci(Q.length)&&!!R[gn(Q)]};function yn(Q){return(ue=Q)!=null&&Ci(ue.length)&&!qi(ue)?cr(Q):Xr(Q);var ue}t.exports=function(Q,ue){return Wn(Q,ue)}}(Sg,Sg.exports)),Sg.exports),Wk=$c(Qk);function Pb(t,e,n){return t[e]?t[e][0]?t[e][0][n]:t[e][n]:e==="contentBoxSize"?t.contentRect[n==="inlineSize"?"width":"height"]:void 0}function Zk(t){t===void 0&&(t={});var e=t.onResize,n=C.useRef(void 0);n.current=e;var r=t.round||Math.round,o=C.useRef(),l=C.useState({width:void 0,height:void 0}),u=l[0],f=l[1],d=C.useRef(!1);C.useEffect(function(){return d.current=!1,function(){d.current=!0}},[]);var p=C.useRef({width:void 0,height:void 0}),g=function(v,E){var b=C.useRef(null),x=C.useRef(null);x.current=E;var M=C.useRef(null);C.useEffect(function(){D()});var D=C.useCallback(function(){var P=M.current,H=x.current,F=P||(H?H instanceof Element?H:H.current:null);b.current&&b.current.element===F&&b.current.subscriber===v||(b.current&&b.current.cleanup&&b.current.cleanup(),b.current={element:F,subscriber:v,cleanup:F?v(F):void 0})},[v]);return C.useEffect(function(){return function(){b.current&&b.current.cleanup&&(b.current.cleanup(),b.current=null)}},[]),C.useCallback(function(P){M.current=P,D()},[D])}(C.useCallback(function(v){return o.current&&o.current.box===t.box&&o.current.round===r||(o.current={box:t.box,round:r,instance:new ResizeObserver(function(E){var b=E[0],x=t.box==="border-box"?"borderBoxSize":t.box==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",M=Pb(b,x,"inlineSize"),D=Pb(b,x,"blockSize"),P=M?r(M):void 0,H=D?r(D):void 0;if(p.current.width!==P||p.current.height!==H){var F={width:P,height:H};p.current.width=P,p.current.height=H,n.current?n.current(F):d.current||f(F)}})}),o.current.instance.observe(v,{box:t.box}),function(){o.current&&o.current.instance.unobserve(v)}},[t.box,r]),t.ref);return C.useMemo(function(){return{ref:g,width:u.width,height:u.height}},[g,u.width,u.height])}var Jk="allotment-module_splitView__L-yRc",eV="allotment-module_sashContainer__fzwJF",tV="allotment-module_splitViewContainer__rQnVa",fA="allotment-module_splitViewView__MGZ6O",nV="allotment-module_vertical__WSwwa",iV="allotment-module_horizontal__7doS8",rV="allotment-module_separatorBorder__x-rDS";let nc,hA=!1,dA=!1;typeof navigator=="object"&&(nc=navigator.userAgent,dA=nc.indexOf("Macintosh")>=0,hA=(nc.indexOf("Macintosh")>=0||nc.indexOf("iPad")>=0||nc.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0);const mA=hA,sV=dA,Lb=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?C.useLayoutEffect:C.useEffect;let oV=class{constructor(){this._size=void 0}getSize(){return this._size}setSize(e){this._size=e}};function Ch(t,e){const n=t.length,r=n-e.length;return r>=0&&t.slice(r,n)===e}var zb,Ub={exports:{}},Bb,jb,aV=(zb||(zb=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}function o(d,p,g){this.fn=d,this.context=p,this.once=g||!1}function l(d,p,g,v,E){if(typeof g!="function")throw new TypeError("The listener must be a function");var b=new o(g,v||d,E),x=n?n+p:p;return d._events[x]?d._events[x].fn?d._events[x]=[d._events[x],b]:d._events[x].push(b):(d._events[x]=b,d._eventsCount++),d}function u(d,p){--d._eventsCount==0?d._events=new r:delete d._events[p]}function f(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1)),f.prototype.eventNames=function(){var d,p,g=[];if(this._eventsCount===0)return g;for(p in d=this._events)e.call(d,p)&&g.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(d)):g},f.prototype.listeners=function(d){var p=n?n+d:d,g=this._events[p];if(!g)return[];if(g.fn)return[g.fn];for(var v=0,E=g.length,b=new Array(E);v<E;v++)b[v]=g[v].fn;return b},f.prototype.listenerCount=function(d){var p=n?n+d:d,g=this._events[p];return g?g.fn?1:g.length:0},f.prototype.emit=function(d,p,g,v,E,b){var x=n?n+d:d;if(!this._events[x])return!1;var M,D,P=this._events[x],H=arguments.length;if(P.fn){switch(P.once&&this.removeListener(d,P.fn,void 0,!0),H){case 1:return P.fn.call(P.context),!0;case 2:return P.fn.call(P.context,p),!0;case 3:return P.fn.call(P.context,p,g),!0;case 4:return P.fn.call(P.context,p,g,v),!0;case 5:return P.fn.call(P.context,p,g,v,E),!0;case 6:return P.fn.call(P.context,p,g,v,E,b),!0}for(D=1,M=new Array(H-1);D<H;D++)M[D-1]=arguments[D];P.fn.apply(P.context,M)}else{var F,j=P.length;for(D=0;D<j;D++)switch(P[D].once&&this.removeListener(d,P[D].fn,void 0,!0),H){case 1:P[D].fn.call(P[D].context);break;case 2:P[D].fn.call(P[D].context,p);break;case 3:P[D].fn.call(P[D].context,p,g);break;case 4:P[D].fn.call(P[D].context,p,g,v);break;default:if(!M)for(F=1,M=new Array(H-1);F<H;F++)M[F-1]=arguments[F];P[D].fn.apply(P[D].context,M)}}return!0},f.prototype.on=function(d,p,g){return l(this,d,p,g,!1)},f.prototype.once=function(d,p,g){return l(this,d,p,g,!0)},f.prototype.removeListener=function(d,p,g,v){var E=n?n+d:d;if(!this._events[E])return this;if(!p)return u(this,E),this;var b=this._events[E];if(b.fn)b.fn!==p||v&&!b.once||g&&b.context!==g||u(this,E);else{for(var x=0,M=[],D=b.length;x<D;x++)(b[x].fn!==p||v&&!b[x].once||g&&b[x].context!==g)&&M.push(b[x]);M.length?this._events[E]=M.length===1?M[0]:M:u(this,E)}return this},f.prototype.removeAllListeners=function(d){var p;return d?(p=n?n+d:d,this._events[p]&&u(this,p)):(this._events=new r,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=n,f.EventEmitter=f,t.exports=f}(Ub)),Ub.exports),fv=$c(aV);function Hb(t,e){const n=t.indexOf(e);n>-1&&(t.splice(n,1),t.unshift(e))}function Tg(t,e){const n=t.indexOf(e);n>-1&&(t.splice(n,1),t.push(e))}function rr(t,e,n=1){const r=Math.max(0,Math.ceil((e-t)/n)),o=new Array(r);let l=-1;for(;++l<r;)o[l]=t+l*n;return o}var lV=$c(function(){if(jb)return Bb;jb=1;var t=/^\s+|\s+$/g,e=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,r=/^0o[0-7]+$/i,o=parseInt,l=typeof fo=="object"&&fo&&fo.Object===Object&&fo,u=typeof self=="object"&&self&&self.Object===Object&&self,f=l||u||Function("return this")(),d=Object.prototype.toString,p=Math.max,g=Math.min,v=function(){return f.Date.now()};function E(x){var M=typeof x;return!!x&&(M=="object"||M=="function")}function b(x){if(typeof x=="number")return x;if(function(P){return typeof P=="symbol"||function(H){return!!H&&typeof H=="object"}(P)&&d.call(P)=="[object Symbol]"}(x))return NaN;if(E(x)){var M=typeof x.valueOf=="function"?x.valueOf():x;x=E(M)?M+"":M}if(typeof x!="string")return x===0?x:+x;x=x.replace(t,"");var D=n.test(x);return D||r.test(x)?o(x.slice(2),D?2:8):e.test(x)?NaN:+x}return Bb=function(x,M,D){var P,H,F,j,X,Z,R=0,T=!1,I=!1,N=!0;if(typeof x!="function")throw new TypeError("Expected a function");function U(V){var G=P,ee=H;return P=H=void 0,R=V,j=x.apply(ee,G)}function B(V){var G=V-Z;return Z===void 0||G>=M||G<0||I&&V-R>=F}function A(){var V=v();if(B(V))return k(V);X=setTimeout(A,function(G){var ee=M-(G-Z);return I?g(ee,F-(G-R)):ee}(V))}function k(V){return X=void 0,N&&P?U(V):(P=H=void 0,j)}function q(){var V=v(),G=B(V);if(P=arguments,H=this,Z=V,G){if(X===void 0)return function(ee){return R=ee,X=setTimeout(A,M),T?U(ee):j}(Z);if(I)return X=setTimeout(A,M),U(Z)}return X===void 0&&(X=setTimeout(A,M)),j}return M=b(M)||0,E(D)&&(T=!!D.leading,F=(I="maxWait"in D)?p(b(D.maxWait)||0,M):F,N="trailing"in D?!!D.trailing:N),q.cancel=function(){X!==void 0&&clearTimeout(X),R=0,P=Z=H=X=void 0},q.flush=function(){return X===void 0?j:k(v())},q}}()),uV="sash-module_sash__K-9lB",cV="sash-module_disabled__Hm-wx",fV="sash-module_mac__Jf6OJ",Fb="sash-module_vertical__pB-rs",hV="sash-module_minimum__-UKxp",dV="sash-module_maximum__TCWxD",qb="sash-module_horizontal__kFbiw",Ag="sash-module_hover__80W6I",Rg="sash-module_active__bJspD";let or=function(t){return t.Vertical="VERTICAL",t.Horizontal="HORIZONTAL",t}({}),Li=function(t){return t.Disabled="DISABLED",t.Minimum="MINIMUM",t.Maximum="MAXIMUM",t.Enabled="ENABLED",t}({}),pA=mA?20:8;const gA=new fv;class $b extends fv{get state(){return this._state}set state(e){this._state!==e&&(this.el.classList.toggle(cV,e===Li.Disabled),this.el.classList.toggle("sash-disabled",e===Li.Disabled),this.el.classList.toggle(hV,e===Li.Minimum),this.el.classList.toggle("sash-minimum",e===Li.Minimum),this.el.classList.toggle(dV,e===Li.Maximum),this.el.classList.toggle("sash-maximum",e===Li.Maximum),this._state=e,this.emit("enablementChange",e))}constructor(e,n,r){var o;super(),this.el=void 0,this.layoutProvider=void 0,this.orientation=void 0,this.size=void 0,this.hoverDelay=300,this.hoverDelayer=lV(l=>l.classList.add("sash-hover",Ag),this.hoverDelay),this._state=Li.Enabled,this.onPointerStart=l=>{const u=l.pageX,f=l.pageY,d={startX:u,currentX:u,startY:f,currentY:f};this.el.classList.add("sash-active",Rg),this.emit("start",d),this.el.setPointerCapture(l.pointerId);const p=v=>{v.preventDefault();const E={startX:u,currentX:v.pageX,startY:f,currentY:v.pageY};this.emit("change",E)},g=v=>{v.preventDefault(),this.el.classList.remove("sash-active",Rg),this.hoverDelayer.cancel(),this.emit("end"),this.el.releasePointerCapture(v.pointerId),window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",g)};window.addEventListener("pointermove",p),window.addEventListener("pointerup",g)},this.onPointerDoublePress=()=>{this.emit("reset")},this.onMouseEnter=()=>{this.el.classList.contains(Rg)?(this.hoverDelayer.cancel(),this.el.classList.add("sash-hover",Ag)):this.hoverDelayer(this.el)},this.onMouseLeave=()=>{this.hoverDelayer.cancel(),this.el.classList.remove("sash-hover",Ag)},this.el=document.createElement("div"),this.el.classList.add("sash",uV),this.el.dataset.testid="sash",e.append(this.el),sV&&this.el.classList.add("sash-mac",fV),this.el.addEventListener("pointerdown",this.onPointerStart),this.el.addEventListener("dblclick",this.onPointerDoublePress),this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("mouseleave",this.onMouseLeave),typeof r.size=="number"?(this.size=r.size,r.orientation===or.Vertical?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=pA,gA.on("onDidChangeGlobalSize",l=>{this.size=l,this.layout()})),this.layoutProvider=n,this.orientation=(o=r.orientation)!=null?o:or.Vertical,this.orientation===or.Horizontal?(this.el.classList.add("sash-horizontal",qb),this.el.classList.remove("sash-vertical",Fb)):(this.el.classList.remove("sash-horizontal",qb),this.el.classList.add("sash-vertical",Fb)),this.layout()}layout(){if(this.orientation===or.Vertical){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}dispose(){this.el.removeEventListener("pointerdown",this.onPointerStart),this.el.removeEventListener("dblclick",this.onPointerDoublePress),this.el.removeEventListener("mouseenter",this.onMouseEnter),this.el.removeEventListener("mouseleave",()=>this.onMouseLeave),this.el.remove()}}let cd;var xg;(xg=cd||(cd={})).Distribute={type:"distribute"},xg.Split=function(t){return{type:"split",index:t}},xg.Invisible=function(t){return{type:"invisible",cachedVisibleSize:t}};let sr=function(t){return t.Normal="NORMAL",t.Low="LOW",t.High="HIGH",t}({});class yA{constructor(e,n,r){this.container=void 0,this.view=void 0,this._size=void 0,this._cachedVisibleSize=void 0,this.container=e,this.view=n,this.container.classList.add("split-view-view",fA),this.container.dataset.testid="split-view-view",typeof r=="number"?(this._size=r,this._cachedVisibleSize=void 0,e.classList.add("split-view-view-visible")):(this._size=0,this._cachedVisibleSize=r.cachedVisibleSize)}set size(e){this._size=e}get size(){return this._size}get priority(){return this.view.priority}get snap(){return!!this.view.snap}get cachedVisibleSize(){return this._cachedVisibleSize}get visible(){return this._cachedVisibleSize===void 0}setVisible(e,n){e!==this.visible&&(e?(this.size=yr(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof n=="number"?n:this.size,this.size=0),this.container.classList.toggle("split-view-view-visible",e),this.view.setVisible&&this.view.setVisible(e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e){this.layoutContainer(e),this.view.layout(this.size,e)}}class mV extends yA{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}class pV extends yA{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class gV extends fv{get startSnappingEnabled(){return this._startSnappingEnabled}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}get endSnappingEnabled(){return this._endSnappingEnabled}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,n={},r,o,l){var u,f;if(super(),this.onDidChange=void 0,this.onDidDragStart=void 0,this.onDidDragEnd=void 0,this.orientation=void 0,this.sashContainer=void 0,this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.sashDragState=void 0,this.proportionalLayout=void 0,this.getSashOrthogonalSize=void 0,this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onSashEnd=d=>{this.emit("sashchange",d),this.saveProportions();for(const p of this.viewItems)p.enabled=!0},this.orientation=(u=n.orientation)!=null?u:or.Vertical,this.proportionalLayout=(f=n.proportionalLayout)!=null?f:!0,this.getSashOrthogonalSize=n.getSashOrthogonalSize,r&&(this.onDidChange=r),o&&(this.onDidDragStart=o),l&&(this.onDidDragEnd=l),this.sashContainer=document.createElement("div"),this.sashContainer.classList.add("sash-container",eV),e.prepend(this.sashContainer),n.descriptor){this.size=n.descriptor.size;for(const[d,p]of n.descriptor.views.entries()){const g=p.size,v=p.container,E=p.view;this.addView(v,E,g,d,!0)}this.contentSize=this.viewItems.reduce((d,p)=>d+p.size,0),this.saveProportions()}}addView(e,n,r,o=this.viewItems.length,l){let u;u=typeof r=="number"?r:r.type==="split"?this.getViewSize(r.index)/2:r.type==="invisible"?{cachedVisibleSize:r.cachedVisibleSize}:n.minimumSize;const f=this.orientation===or.Vertical?new pV(e,n,u):new mV(e,n,u);if(this.viewItems.splice(o,0,f),this.viewItems.length>1){const d=this.orientation===or.Vertical?new $b(this.sashContainer,{getHorizontalSashTop:v=>this.getSashPosition(v),getHorizontalSashWidth:this.getSashOrthogonalSize},{orientation:or.Horizontal}):new $b(this.sashContainer,{getVerticalSashLeft:v=>this.getSashPosition(v),getVerticalSashHeight:this.getSashOrthogonalSize},{orientation:or.Vertical}),p=this.orientation===or.Vertical?v=>({sash:d,start:v.startY,current:v.currentY}):v=>({sash:d,start:v.startX,current:v.currentX});d.on("start",v=>{var E;this.emit("sashDragStart"),this.onSashStart(p(v));const b=this.viewItems.map(x=>x.size);(E=this.onDidDragStart)==null||E.call(this,b)}),d.on("change",v=>this.onSashChange(p(v))),d.on("end",()=>{var v;this.emit("sashDragEnd"),this.onSashEnd(this.sashItems.findIndex(b=>b.sash===d));const E=this.viewItems.map(b=>b.size);(v=this.onDidDragEnd)==null||v.call(this,E)}),d.on("reset",()=>{const v=this.sashItems.findIndex(D=>D.sash===d),E=rr(v,-1,-1),b=rr(v+1,this.viewItems.length),x=this.findFirstSnapIndex(E),M=this.findFirstSnapIndex(b);(typeof x!="number"||this.viewItems[x].visible)&&(typeof M!="number"||this.viewItems[M].visible)&&this.emit("sashreset",v)});const g={sash:d};this.sashItems.splice(o-1,0,g)}l||this.relayout(),l||typeof r=="number"||r.type!=="distribute"||this.distributeViewSizes()}removeView(e,n){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");const r=this.viewItems.splice(e,1)[0].view;if(this.viewItems.length>=1){const o=Math.max(e-1,0);this.sashItems.splice(o,1)[0].sash.dispose()}return this.relayout(),n&&n.type==="distribute"&&this.distributeViewSizes(),r}moveView(e,n,r){const o=this.getViewCachedVisibleSize(n),l=o===void 0?this.getViewSize(n):cd.Invisible(o),u=this.removeView(n);this.addView(e,u,l,r)}getViewCachedVisibleSize(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].cachedVisibleSize}layout(e=this.size){const n=Math.max(this.size,this.contentSize);if(this.size=e,this.proportions)for(let r=0;r<this.viewItems.length;r++){const o=this.viewItems[r];o.size=yr(Math.round(this.proportions[r]*e),o.minimumSize,o.maximumSize)}else{const r=rr(0,this.viewItems.length),o=r.filter(u=>this.viewItems[u].priority===sr.Low),l=r.filter(u=>this.viewItems[u].priority===sr.High);this.resize(this.viewItems.length-1,e-n,void 0,o,l)}this.distributeEmptySpace(),this.layoutViews()}resizeView(e,n){if(e<0||e>=this.viewItems.length)return;const r=rr(0,this.viewItems.length).filter(f=>f!==e),o=[...r.filter(f=>this.viewItems[f].priority===sr.Low),e],l=r.filter(f=>this.viewItems[f].priority===sr.High),u=this.viewItems[e];n=Math.round(n),n=yr(n,u.minimumSize,Math.min(u.maximumSize,this.size)),u.size=n,this.relayout(o,l)}resizeViews(e){for(let n=0;n<e.length;n++){const r=this.viewItems[n];let o=e[n];o=Math.round(o),o=yr(o,r.minimumSize,Math.min(r.maximumSize,this.size)),r.size=o}this.contentSize=this.viewItems.reduce((n,r)=>n+r.size,0),this.saveProportions(),this.layout(this.size)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}isViewVisible(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].visible}setViewVisible(e,n){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");this.viewItems[e].setVisible(n),this.distributeEmptySpace(e),this.layoutViews(),this.saveProportions()}distributeViewSizes(){const e=[];let n=0;for(const f of this.viewItems)f.maximumSize-f.minimumSize>0&&(e.push(f),n+=f.size);const r=Math.floor(n/e.length);for(const f of e)f.size=yr(r,f.minimumSize,f.maximumSize);const o=rr(0,this.viewItems.length),l=o.filter(f=>this.viewItems[f].priority===sr.Low),u=o.filter(f=>this.viewItems[f].priority===sr.High);this.relayout(l,u)}dispose(){this.sashItems.forEach(e=>e.sash.dispose()),this.sashItems=[],this.sashContainer.remove()}relayout(e,n){const r=this.viewItems.reduce((o,l)=>o+l.size,0);this.resize(this.viewItems.length-1,this.size-r,void 0,e,n),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}onSashStart({sash:e,start:n}){const r=this.sashItems.findIndex(o=>o.sash===e);(o=>{const l=this.viewItems.map(H=>H.size);let u,f,d=Number.NEGATIVE_INFINITY,p=Number.POSITIVE_INFINITY;const g=rr(r,-1,-1),v=rr(r+1,this.viewItems.length),E=g.reduce((H,F)=>H+(this.viewItems[F].minimumSize-l[F]),0),b=g.reduce((H,F)=>H+(this.viewItems[F].viewMaximumSize-l[F]),0),x=v.length===0?Number.POSITIVE_INFINITY:v.reduce((H,F)=>H+(l[F]-this.viewItems[F].minimumSize),0),M=v.length===0?Number.NEGATIVE_INFINITY:v.reduce((H,F)=>H+(l[F]-this.viewItems[F].viewMaximumSize),0);d=Math.max(E,M),p=Math.min(x,b);const D=this.findFirstSnapIndex(g),P=this.findFirstSnapIndex(v);if(typeof D=="number"){const H=this.viewItems[D],F=Math.floor(H.viewMinimumSize/2);u={index:D,limitDelta:H.visible?d-F:d+F,size:H.size}}if(typeof P=="number"){const H=this.viewItems[P],F=Math.floor(H.viewMinimumSize/2);f={index:P,limitDelta:H.visible?p+F:p-F,size:H.size}}this.sashDragState={start:o,current:o,index:r,sizes:l,minDelta:d,maxDelta:p,snapBefore:u,snapAfter:f}})(n)}onSashChange({current:e}){const{index:n,start:r,sizes:o,minDelta:l,maxDelta:u,snapBefore:f,snapAfter:d}=this.sashDragState;this.sashDragState.current=e;const p=e-r;this.resize(n,p,o,void 0,void 0,l,u,f,d),this.distributeEmptySpace(),this.layoutViews()}getSashPosition(e){let n=0;for(let r=0;r<this.sashItems.length;r++)if(n+=this.viewItems[r].size,this.sashItems[r].sash===e)return n;return 0}resize(e,n,r=this.viewItems.map(g=>g.size),o,l,u=Number.NEGATIVE_INFINITY,f=Number.POSITIVE_INFINITY,d,p){if(e<0||e>=this.viewItems.length)return 0;const g=rr(e,-1,-1),v=rr(e+1,this.viewItems.length);if(l)for(const R of l)Hb(g,R),Hb(v,R);if(o)for(const R of o)Tg(g,R),Tg(v,R);const E=g.map(R=>this.viewItems[R]),b=g.map(R=>r[R]),x=v.map(R=>this.viewItems[R]),M=v.map(R=>r[R]),D=g.reduce((R,T)=>R+(this.viewItems[T].minimumSize-r[T]),0),P=g.reduce((R,T)=>R+(this.viewItems[T].maximumSize-r[T]),0),H=v.length===0?Number.POSITIVE_INFINITY:v.reduce((R,T)=>R+(r[T]-this.viewItems[T].minimumSize),0),F=v.length===0?Number.NEGATIVE_INFINITY:v.reduce((R,T)=>R+(r[T]-this.viewItems[T].maximumSize),0),j=Math.max(D,F,u),X=Math.min(H,P,f);let Z=!1;if(d){const R=this.viewItems[d.index],T=n>=d.limitDelta;Z=T!==R.visible,R.setVisible(T,d.size)}if(!Z&&p){const R=this.viewItems[p.index],T=n<p.limitDelta;Z=T!==R.visible,R.setVisible(T,p.size)}if(Z)return this.resize(e,n,r,o,l,u,f);for(let R=0,T=n=yr(n,j,X);R<E.length;R++){const I=E[R],N=yr(b[R]+T,I.minimumSize,I.maximumSize);T-=N-b[R],I.size=N}for(let R=0,T=n;R<x.length;R++){const I=x[R],N=yr(M[R]-T,I.minimumSize,I.maximumSize);T+=N-M[R],I.size=N}return n}distributeEmptySpace(e){const n=this.viewItems.reduce((p,g)=>p+g.size,0);let r=this.size-n;const o=rr(0,this.viewItems.length),l=[],u=o.filter(p=>this.viewItems[p].priority===sr.Low),f=o.filter(p=>this.viewItems[p].priority===sr.Normal),d=o.filter(p=>this.viewItems[p].priority===sr.High);l.push(...d,...f,...u),typeof e=="number"&&Tg(l,e);for(let p=0;r!==0&&p<l.length;p++){const g=this.viewItems[l[p]],v=yr(g.size+r,g.minimumSize,g.maximumSize);r-=v-g.size,g.size=v}}layoutViews(){var e;this.contentSize=this.viewItems.reduce((r,o)=>r+o.size,0);let n=0;for(const r of this.viewItems)r.layout(n),n+=r.size;(e=this.onDidChange)!=null&&e.call(this,this.viewItems.map(r=>r.size)),this.sashItems.forEach(r=>r.sash.layout()),this.updateSashEnablement()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.size/this.contentSize))}updateSashEnablement(){let e=!1;const n=this.viewItems.map(d=>e=d.size-d.minimumSize>0||e);e=!1;const r=this.viewItems.map(d=>e=d.maximumSize-d.size>0||e),o=[...this.viewItems].reverse();e=!1;const l=o.map(d=>e=d.size-d.minimumSize>0||e).reverse();e=!1;const u=o.map(d=>e=d.maximumSize-d.size>0||e).reverse();let f=0;for(let d=0;d<this.sashItems.length;d++){const{sash:p}=this.sashItems[d];f+=this.viewItems[d].size;const g=!(n[d]&&u[d+1]),v=!(r[d]&&l[d+1]);if(g&&v){const E=rr(d,-1,-1),b=rr(d+1,this.viewItems.length),x=this.findFirstSnapIndex(E),M=this.findFirstSnapIndex(b),D=typeof x=="number"&&!this.viewItems[x].visible,P=typeof M=="number"&&!this.viewItems[M].visible;D&&l[d]&&(f>0||this.startSnappingEnabled)?p.state=Li.Minimum:P&&n[d]&&(f<this.contentSize||this.endSnappingEnabled)?p.state=Li.Maximum:p.state=Li.Disabled}else p.state=g&&!v?Li.Minimum:!g&&v?Li.Maximum:Li.Enabled}}findFirstSnapIndex(e){for(const n of e){const r=this.viewItems[n];if(r.visible&&r.snap)return n}for(const n of e){const r=this.viewItems[n];if(r.visible&&r.maximumSize-r.minimumSize>0)return;if(!r.visible&&r.snap)return n}}}class hl{constructor(e){this.size=void 0,this.size=e}getPreferredSize(){return this.size}}class Gb{constructor(e,n){this.proportion=void 0,this.layoutService=void 0,this.proportion=e,this.layoutService=n}getPreferredSize(){return this.proportion*this.layoutService.getSize()}}class Nh{getPreferredSize(){}}class Yb{get preferredSize(){return this.layoutStrategy.getPreferredSize()}set preferredSize(e){if(typeof e=="number")this.layoutStrategy=new hl(e);else if(typeof e=="string"){const n=e.trim();if(Ch(n,"%")){const r=Number(n.slice(0,-1))/100;this.layoutStrategy=new Gb(r,this.layoutService)}else if(Ch(n,"px")){const r=Number(n.slice(0,-2))/100;this.layoutStrategy=new hl(r)}else if(typeof Number.parseFloat(n)=="number"){const r=Number.parseFloat(n);this.layoutStrategy=new hl(r)}else this.layoutStrategy=new Nh}else this.layoutStrategy=new Nh}constructor(e,n){var r;if(this.minimumSize=0,this.maximumSize=Number.POSITIVE_INFINITY,this.element=void 0,this.priority=void 0,this.snap=void 0,this.layoutService=void 0,this.layoutStrategy=void 0,this.layoutService=e,this.element=n.element,this.minimumSize=typeof n.minimumSize=="number"?n.minimumSize:30,this.maximumSize=typeof n.maximumSize=="number"?n.maximumSize:Number.POSITIVE_INFINITY,typeof n.preferredSize=="number")this.layoutStrategy=new hl(n.preferredSize);else if(typeof n.preferredSize=="string"){const o=n.preferredSize.trim();if(Ch(o,"%")){const l=Number(o.slice(0,-1))/100;this.layoutStrategy=new Gb(l,this.layoutService)}else if(Ch(o,"px")){const l=Number(o.slice(0,-2));this.layoutStrategy=new hl(l)}else if(typeof Number.parseFloat(o)=="number"){const l=Number.parseFloat(o);this.layoutStrategy=new hl(l)}else this.layoutStrategy=new Nh}else this.layoutStrategy=new Nh;this.priority=(r=n.priority)!=null?r:sr.Normal,this.snap=typeof n.snap=="boolean"&&n.snap}layout(e){}}function Kb(t){return t.minSize!==void 0||t.maxSize!==void 0||t.preferredSize!==void 0||t.priority!==void 0||t.visible!==void 0}const hv=C.forwardRef(({className:t,children:e},n)=>fe.createElement("div",{ref:n,className:dy("split-view-view",fA,t)},e));hv.displayName="Allotment.Pane";const vA=C.forwardRef(({children:t,className:e,id:n,maxSize:r=1/0,minSize:o=30,proportionalLayout:l=!0,separator:u=!0,sizes:f,defaultSizes:d=f,snap:p=!1,vertical:g=!1,onChange:v,onReset:E,onVisibleChange:b,onDragStart:x,onDragEnd:M},D)=>{const P=C.useRef(null),H=C.useRef([]),F=C.useRef(new Map),j=C.useRef(null),X=C.useRef(new Map),Z=C.useRef(new oV),R=C.useRef([]),[T,I]=C.useState(!1),N=C.useMemo(()=>fe.Children.toArray(t).filter(fe.isValidElement),[t]),U=C.useCallback(B=>{var A,k;const q=(A=R.current)==null?void 0:A[B];return typeof q?.preferredSize=="number"&&((k=j.current)!=null&&k.resizeView(B,Math.round(q.preferredSize)),!0)},[]);return C.useImperativeHandle(D,()=>({reset:()=>{if(E)E();else{var B;(B=j.current)==null||B.distributeViewSizes();for(let A=0;A<R.current.length;A++)U(A)}},resize:B=>{var A;(A=j.current)==null||A.resizeViews(B)}})),Lb(()=>{let B=!0;d&&X.current.size!==d.length&&(B=!1,console.warn(`Expected ${d.length} children based on defaultSizes but found ${X.current.size}`)),B&&d&&(H.current=N.map(q=>q.key));const A=dc({orientation:g?or.Vertical:or.Horizontal,proportionalLayout:l},B&&d&&{descriptor:{size:d.reduce((q,V)=>q+V,0),views:d.map((q,V)=>{var G,ee,J,L;const Y=F.current.get(H.current[V]),ie=new Yb(Z.current,dc({element:document.createElement("div"),minimumSize:(G=Y?.minSize)!=null?G:o,maximumSize:(ee=Y?.maxSize)!=null?ee:r,priority:(J=Y?.priority)!=null?J:sr.Normal},Y?.preferredSize&&{preferredSize:Y?.preferredSize},{snap:(L=Y?.snap)!=null?L:p}));return R.current.push(ie),{container:[...X.current.values()][V],size:q,view:ie}})}});j.current=new gV(P.current,A,v,x,M),j.current.on("sashDragStart",()=>{var q;(q=P.current)==null||q.classList.add("split-view-sash-dragging")}),j.current.on("sashDragEnd",()=>{var q;(q=P.current)==null||q.classList.remove("split-view-sash-dragging")}),j.current.on("sashchange",q=>{if(b&&j.current){const V=N.map(G=>G.key);for(let G=0;G<V.length;G++){const ee=F.current.get(V[G]);ee?.visible!==void 0&&ee.visible!==j.current.isViewVisible(G)&&b(G,j.current.isViewVisible(G))}}}),j.current.on("sashreset",q=>{if(E)E();else{var V;if(U(q)||U(q+1))return;(V=j.current)==null||V.distributeViewSizes()}});const k=j.current;return()=>{k.dispose()}},[]),Lb(()=>{if(T){const ne=N.map(ve=>ve.key),he=[...H.current],_e=ne.filter(ve=>!H.current.includes(ve)),we=ne.filter(ve=>H.current.includes(ve)),Oe=H.current.map(ve=>!ne.includes(ve));for(let ve=Oe.length-1;ve>=0;ve--){var B;Oe[ve]&&((B=j.current)!=null&&B.removeView(ve),he.splice(ve,1),R.current.splice(ve,1))}for(const ve of _e){var A,k,q,V,G;const Se=F.current.get(ve),Ce=new Yb(Z.current,dc({element:document.createElement("div"),minimumSize:(A=Se?.minSize)!=null?A:o,maximumSize:(k=Se?.maxSize)!=null?k:r,priority:(q=Se?.priority)!=null?q:sr.Normal},Se?.preferredSize&&{preferredSize:Se?.preferredSize},{snap:(V=Se?.snap)!=null?V:p}));(G=j.current)!=null&&G.addView(X.current.get(ve),Ce,cd.Distribute,ne.findIndex(je=>je===ve)),he.splice(ne.findIndex(je=>je===ve),0,ve),R.current.splice(ne.findIndex(je=>je===ve),0,Ce)}for(;!Wk(ne,he);)for(const[ve,Se]of ne.entries()){const Ce=he.findIndex(je=>je===Se);if(Ce!==ve){var ee;(ee=j.current)==null||ee.moveView(X.current.get(Se),Ce,ve);const je=he[Ce];he.splice(Ce,1),he.splice(ve,0,je);break}}for(const ve of _e){var J;const Se=ne.findIndex(je=>je===ve),Ce=R.current[Se].preferredSize;Ce!==void 0&&((J=j.current)==null||J.resizeView(Se,Ce))}for(const ve of[..._e,...we]){var L,Y;const Se=F.current.get(ve),Ce=ne.findIndex(je=>je===ve);Se&&Kb(Se)&&Se.visible!==void 0&&((L=j.current)==null?void 0:L.isViewVisible(Ce))!==Se.visible&&((Y=j.current)==null||Y.setViewVisible(Ce,Se.visible))}for(const ve of we){const Se=F.current.get(ve),Ce=ne.findIndex(je=>je===ve);if(Se&&Kb(Se)){var ie;Se.preferredSize!==void 0&&R.current[Ce].preferredSize!==Se.preferredSize&&(R.current[Ce].preferredSize=Se.preferredSize);let je=!1;Se.minSize!==void 0&&R.current[Ce].minimumSize!==Se.minSize&&(R.current[Ce].minimumSize=Se.minSize,je=!0),Se.maxSize!==void 0&&R.current[Ce].maximumSize!==Se.maxSize&&(R.current[Ce].maximumSize=Se.maxSize,je=!0),je&&((ie=j.current)==null||ie.layout())}}(_e.length>0||Oe.length>0)&&(H.current=ne)}},[N,T,r,o,p]),C.useEffect(()=>{j.current&&(j.current.onDidChange=v)},[v]),C.useEffect(()=>{j.current&&(j.current.onDidDragStart=x)},[x]),C.useEffect(()=>{j.current&&(j.current.onDidDragEnd=M)},[M]),Zk({ref:P,onResize:({width:B,height:A})=>{var k;B&&A&&((k=j.current)!=null&&k.layout(g?A:B),Z.current.setSize(g?A:B),I(!0))}}),C.useEffect(()=>{mA&&yV(20)},[]),fe.createElement("div",{ref:P,className:dy("split-view",g?"split-view-vertical":"split-view-horizontal",{"split-view-separator-border":u},Jk,g?nV:iV,{[rV]:u},e),id:n},fe.createElement("div",{className:dy("split-view-container",tV)},fe.Children.toArray(t).map(B=>{if(!fe.isValidElement(B))return null;const A=B.key;return B.type.displayName==="Allotment.Pane"?(F.current.set(A,B.props),fe.cloneElement(B,{key:A,ref:k=>{const q=B.ref;q&&(q.current=k),k?X.current.set(A,k):X.current.delete(A)}})):fe.createElement(hv,{key:A,ref:k=>{k?X.current.set(A,k):X.current.delete(A)}},B)})))});function yV(t){const e=yr(t,4,20),n=yr(t,1,8);document.documentElement.style.setProperty("--sash-size",e+"px"),document.documentElement.style.setProperty("--sash-hover-size",n+"px"),function(r){pA=r,gA.emit("onDidChangeGlobalSize",r)}(e)}vA.displayName="Allotment";var Ig=Object.assign(vA,{Pane:hv});const vV=()=>{};var Xb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},_V=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const o=t[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const l=t[n++];e[r++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=t[n++],u=t[n++],f=t[n++],d=((o&7)<<18|(l&63)<<12|(u&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const l=t[n++],u=t[n++];e[r++]=String.fromCharCode((o&15)<<12|(l&63)<<6|u&63)}}return e.join("")},EA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<t.length;o+=3){const l=t[o],u=o+1<t.length,f=u?t[o+1]:0,d=o+2<t.length,p=d?t[o+2]:0,g=l>>2,v=(l&3)<<4|f>>4;let E=(f&15)<<2|p>>6,b=p&63;d||(b=64,u||(E=64)),r.push(n[g],n[v],n[E],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_A(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_V(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<t.length;){const l=n[t.charAt(o++)],f=o<t.length?n[t.charAt(o)]:0;++o;const p=o<t.length?n[t.charAt(o)]:64;++o;const v=o<t.length?n[t.charAt(o)]:64;if(++o,l==null||f==null||p==null||v==null)throw new EV;const E=l<<2|f>>4;if(r.push(E),p!==64){const b=f<<4&240|p>>2;if(r.push(b),v!==64){const x=p<<6&192|v;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class EV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wV=function(t){const e=_A(t);return EA.encodeByteArray(e,!0)},fd=function(t){return wV(t).replace(/\./g,"")},wA=function(t){try{return EA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV=()=>bV().__FIREBASE_DEFAULTS__,TV=()=>{if(typeof process>"u"||typeof Xb>"u")return;const t=Xb.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},AV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&wA(t[1]);return e&&JSON.parse(e)},Bd=()=>{try{return vV()||SV()||TV()||AV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},bA=t=>{var e,n;return(n=(e=Bd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},RV=t=>{const e=bA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},SA=()=>{var t;return(t=Bd())===null||t===void 0?void 0:t.config},TA=t=>{var e;return(e=Bd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(t){return t.endsWith(".cloudworkstations.dev")}async function AA(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IV(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[fd(JSON.stringify(n)),fd(JSON.stringify(u)),""].join(".")}const mc={};function CV(){const t={prod:[],emulator:[]};for(const e of Object.keys(mc))mc[e]?t.emulator.push(e):t.prod.push(e);return t}function NV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Qb=!1;function RA(t,e){if(typeof window>"u"||typeof document>"u"||!$l(window.location.host)||mc[t]===e||mc[t]||Qb)return;mc[t]=e;function n(E){return`__firebase__banner__${E}`}const r="__firebase__banner",l=CV().prod.length>0;function u(){const E=document.getElementById(r);E&&E.remove()}function f(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function d(E,b){E.setAttribute("width","24"),E.setAttribute("id",b),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Qb=!0,u()},E}function g(E,b){E.setAttribute("id",b),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function v(){const E=NV(r),b=n("text"),x=document.getElementById(b)||document.createElement("span"),M=n("learnmore"),D=document.getElementById(M)||document.createElement("a"),P=n("preprendIcon"),H=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const F=E.element;f(F),g(D,M);const j=p();d(H,P),F.append(H,x,D,j),document.body.appendChild(F)}l?(x.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(si())}function OV(){var t;const e=(t=Bd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kV(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function VV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PV(){const t=si();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function LV(){return!OV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zV(){try{return typeof indexedDB=="object"}catch{return!1}}function UV(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV="FirebaseError";class Cs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=BV,Object.setPrototypeOf(this,Cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gc.prototype.create)}}class Gc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,l=this.errors[e],u=l?jV(l,r):"Error",f=`${this.serviceName}: ${u} (${o}).`;return new Cs(o,f,r)}}function jV(t,e){return t.replace(HV,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const HV=/\{\$([^}]+)}/g;function FV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function pa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const l=t[o],u=e[o];if(Wb(l)&&Wb(u)){if(!pa(l,u))return!1}else if(l!==u)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function Wb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ac(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,l]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function lc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function qV(t,e){const n=new $V(t,e);return n.subscribe.bind(n)}class $V{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");GV(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=Cg),o.error===void 0&&(o.error=Cg),o.complete===void 0&&(o.complete=Cg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function GV(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Cg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(t){return t&&t._delegate?t._delegate:t}class ga{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YV=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new xV;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),o=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XV(e))try{this.getOrInitializeService({instanceIdentifier:sa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:o});r.resolve(l)}catch{}}}}clearInstance(e=sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sa){return this.instances.has(e)}getOptions(e=sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[l,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);r===f&&u.resolve(o)}return o}onInit(e,n){var r;const o=this.normalizeInstanceIdentifier(n),l=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(o,l);const u=this.instances.get(o);return u&&e(u,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:KV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=sa){return this.component?this.component.multipleInstances?e:sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function KV(t){return t===sa?void 0:t}function XV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new YV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(tt||(tt={}));const WV={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},ZV=tt.INFO,JV={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},e4=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),o=JV[e];if(o)console[o](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dv{constructor(e){this.name=e,this._logLevel=ZV,this._logHandler=e4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?WV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...e),this._logHandler(this,tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...e),this._logHandler(this,tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...e),this._logHandler(this,tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...e),this._logHandler(this,tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...e),this._logHandler(this,tt.ERROR,...e)}}const t4=(t,e)=>e.some(n=>t instanceof n);let Zb,Jb;function n4(){return Zb||(Zb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function i4(){return Jb||(Jb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xA=new WeakMap,my=new WeakMap,IA=new WeakMap,Ng=new WeakMap,mv=new WeakMap;function r4(t){const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("success",l),t.removeEventListener("error",u)},l=()=>{n(go(t.result)),o()},u=()=>{r(t.error),o()};t.addEventListener("success",l),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&xA.set(n,t)}).catch(()=>{}),mv.set(e,t),e}function s4(t){if(my.has(t))return;const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",u),t.removeEventListener("abort",u)},l=()=>{n(),o()},u=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",l),t.addEventListener("error",u),t.addEventListener("abort",u)});my.set(t,e)}let py={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return my.get(t);if(e==="objectStoreNames")return t.objectStoreNames||IA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return go(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function o4(t){py=t(py)}function a4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Dg(this),e,...n);return IA.set(r,e.sort?e.sort():[e]),go(r)}:i4().includes(t)?function(...e){return t.apply(Dg(this),e),go(xA.get(this))}:function(...e){return go(t.apply(Dg(this),e))}}function l4(t){return typeof t=="function"?a4(t):(t instanceof IDBTransaction&&s4(t),t4(t,n4())?new Proxy(t,py):t)}function go(t){if(t instanceof IDBRequest)return r4(t);if(Ng.has(t))return Ng.get(t);const e=l4(t);return e!==t&&(Ng.set(t,e),mv.set(e,t)),e}const Dg=t=>mv.get(t);function u4(t,e,{blocked:n,upgrade:r,blocking:o,terminated:l}={}){const u=indexedDB.open(t,e),f=go(u);return r&&u.addEventListener("upgradeneeded",d=>{r(go(u.result),d.oldVersion,d.newVersion,go(u.transaction),d)}),n&&u.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),f.then(d=>{l&&d.addEventListener("close",()=>l()),o&&d.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const c4=["get","getKey","getAll","getAllKeys","count"],f4=["put","add","delete","clear"],Og=new Map;function eS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Og.get(e))return Og.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=f4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||c4.includes(n)))return;const l=async function(u,...f){const d=this.transaction(u,o?"readwrite":"readonly");let p=d.store;return r&&(p=p.index(f.shift())),(await Promise.all([p[n](...f),o&&d.done]))[0]};return Og.set(e,l),l}o4(t=>({...t,get:(e,n,r)=>eS(e,n)||t.get(e,n,r),has:(e,n)=>!!eS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(d4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function d4(t){const e=t.getComponent();return e?.type==="VERSION"}const gy="@firebase/app",tS="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new dv("@firebase/app"),m4="@firebase/app-compat",p4="@firebase/analytics-compat",g4="@firebase/analytics",y4="@firebase/app-check-compat",v4="@firebase/app-check",_4="@firebase/auth",E4="@firebase/auth-compat",w4="@firebase/database",b4="@firebase/data-connect",S4="@firebase/database-compat",T4="@firebase/functions",A4="@firebase/functions-compat",R4="@firebase/installations",x4="@firebase/installations-compat",I4="@firebase/messaging",C4="@firebase/messaging-compat",N4="@firebase/performance",D4="@firebase/performance-compat",O4="@firebase/remote-config",M4="@firebase/remote-config-compat",k4="@firebase/storage",V4="@firebase/storage-compat",P4="@firebase/firestore",L4="@firebase/ai",z4="@firebase/firestore-compat",U4="firebase",B4="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy="[DEFAULT]",j4={[gy]:"fire-core",[m4]:"fire-core-compat",[g4]:"fire-analytics",[p4]:"fire-analytics-compat",[v4]:"fire-app-check",[y4]:"fire-app-check-compat",[_4]:"fire-auth",[E4]:"fire-auth-compat",[w4]:"fire-rtdb",[b4]:"fire-data-connect",[S4]:"fire-rtdb-compat",[T4]:"fire-fn",[A4]:"fire-fn-compat",[R4]:"fire-iid",[x4]:"fire-iid-compat",[I4]:"fire-fcm",[C4]:"fire-fcm-compat",[N4]:"fire-perf",[D4]:"fire-perf-compat",[O4]:"fire-rc",[M4]:"fire-rc-compat",[k4]:"fire-gcs",[V4]:"fire-gcs-compat",[P4]:"fire-fst",[z4]:"fire-fst-compat",[L4]:"fire-vertex","fire-js":"fire-js",[U4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd=new Map,H4=new Map,vy=new Map;function nS(t,e){try{t.container.addComponent(e)}catch(n){Ts.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ll(t){const e=t.name;if(vy.has(e))return Ts.debug(`There were multiple attempts to register component ${e}.`),!1;vy.set(e,t);for(const n of hd.values())nS(n,t);for(const n of H4.values())nS(n,t);return!0}function pv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ar(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yo=new Gc("app","Firebase",F4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ga("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl=B4;function CA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:yy,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw yo.create("bad-app-name",{appName:String(o)});if(n||(n=SA()),!n)throw yo.create("no-options");const l=hd.get(o);if(l){if(pa(n,l.options)&&pa(r,l.config))return l;throw yo.create("duplicate-app",{appName:o})}const u=new QV(o);for(const d of vy.values())u.addComponent(d);const f=new q4(n,r,u);return hd.set(o,f),f}function NA(t=yy){const e=hd.get(t);if(!e&&t===yy&&SA())return CA();if(!e)throw yo.create("no-app",{appName:t});return e}function vo(t,e,n){var r;let o=(r=j4[t])!==null&&r!==void 0?r:t;n&&(o+=`-${n}`);const l=o.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ts.warn(f.join(" "));return}Ll(new ga(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4="firebase-heartbeat-database",G4=1,Cc="firebase-heartbeat-store";let Mg=null;function DA(){return Mg||(Mg=u4($4,G4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Cc)}catch(n){console.warn(n)}}}}).catch(t=>{throw yo.create("idb-open",{originalErrorMessage:t.message})})),Mg}async function Y4(t){try{const n=(await DA()).transaction(Cc),r=await n.objectStore(Cc).get(OA(t));return await n.done,r}catch(e){if(e instanceof Cs)Ts.warn(e.message);else{const n=yo.create("idb-get",{originalErrorMessage:e?.message});Ts.warn(n.message)}}}async function iS(t,e){try{const r=(await DA()).transaction(Cc,"readwrite");await r.objectStore(Cc).put(e,OA(t)),await r.done}catch(n){if(n instanceof Cs)Ts.warn(n.message);else{const r=yo.create("idb-set",{originalErrorMessage:n?.message});Ts.warn(r.message)}}}function OA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4=1024,X4=30;class Q4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Z4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=rS();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>X4){const u=J4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ts.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rS(),{heartbeatsToSend:r,unsentEntries:o}=W4(this._heartbeatsCache.heartbeats),l=fd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return Ts.warn(n),""}}}function rS(){return new Date().toISOString().substring(0,10)}function W4(t,e=K4){const n=[];let r=t.slice();for(const o of t){const l=n.find(u=>u.agent===o.agent);if(l){if(l.dates.push(o.date),sS(n)>e){l.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),sS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Z4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zV()?UV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Y4(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return iS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return iS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function sS(t){return fd(JSON.stringify({version:2,heartbeats:t})).length}function J4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(t){Ll(new ga("platform-logger",e=>new h4(e),"PRIVATE")),Ll(new ga("heartbeat",e=>new Q4(e),"PRIVATE")),vo(gy,tS,t),vo(gy,tS,"esm2017"),vo("fire-js","")}eP("");var tP="firebase",nP="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vo(tP,nP,"app");var oS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _o,MA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,T){function I(){}I.prototype=T.prototype,R.D=T.prototype,R.prototype=new I,R.prototype.constructor=R,R.C=function(N,U,B){for(var A=Array(arguments.length-2),k=2;k<arguments.length;k++)A[k-2]=arguments[k];return T.prototype[U].apply(N,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,T,I){I||(I=0);var N=Array(16);if(typeof T=="string")for(var U=0;16>U;++U)N[U]=T.charCodeAt(I++)|T.charCodeAt(I++)<<8|T.charCodeAt(I++)<<16|T.charCodeAt(I++)<<24;else for(U=0;16>U;++U)N[U]=T[I++]|T[I++]<<8|T[I++]<<16|T[I++]<<24;T=R.g[0],I=R.g[1],U=R.g[2];var B=R.g[3],A=T+(B^I&(U^B))+N[0]+3614090360&4294967295;T=I+(A<<7&4294967295|A>>>25),A=B+(U^T&(I^U))+N[1]+3905402710&4294967295,B=T+(A<<12&4294967295|A>>>20),A=U+(I^B&(T^I))+N[2]+606105819&4294967295,U=B+(A<<17&4294967295|A>>>15),A=I+(T^U&(B^T))+N[3]+3250441966&4294967295,I=U+(A<<22&4294967295|A>>>10),A=T+(B^I&(U^B))+N[4]+4118548399&4294967295,T=I+(A<<7&4294967295|A>>>25),A=B+(U^T&(I^U))+N[5]+1200080426&4294967295,B=T+(A<<12&4294967295|A>>>20),A=U+(I^B&(T^I))+N[6]+2821735955&4294967295,U=B+(A<<17&4294967295|A>>>15),A=I+(T^U&(B^T))+N[7]+4249261313&4294967295,I=U+(A<<22&4294967295|A>>>10),A=T+(B^I&(U^B))+N[8]+1770035416&4294967295,T=I+(A<<7&4294967295|A>>>25),A=B+(U^T&(I^U))+N[9]+2336552879&4294967295,B=T+(A<<12&4294967295|A>>>20),A=U+(I^B&(T^I))+N[10]+4294925233&4294967295,U=B+(A<<17&4294967295|A>>>15),A=I+(T^U&(B^T))+N[11]+2304563134&4294967295,I=U+(A<<22&4294967295|A>>>10),A=T+(B^I&(U^B))+N[12]+1804603682&4294967295,T=I+(A<<7&4294967295|A>>>25),A=B+(U^T&(I^U))+N[13]+4254626195&4294967295,B=T+(A<<12&4294967295|A>>>20),A=U+(I^B&(T^I))+N[14]+2792965006&4294967295,U=B+(A<<17&4294967295|A>>>15),A=I+(T^U&(B^T))+N[15]+1236535329&4294967295,I=U+(A<<22&4294967295|A>>>10),A=T+(U^B&(I^U))+N[1]+4129170786&4294967295,T=I+(A<<5&4294967295|A>>>27),A=B+(I^U&(T^I))+N[6]+3225465664&4294967295,B=T+(A<<9&4294967295|A>>>23),A=U+(T^I&(B^T))+N[11]+643717713&4294967295,U=B+(A<<14&4294967295|A>>>18),A=I+(B^T&(U^B))+N[0]+3921069994&4294967295,I=U+(A<<20&4294967295|A>>>12),A=T+(U^B&(I^U))+N[5]+3593408605&4294967295,T=I+(A<<5&4294967295|A>>>27),A=B+(I^U&(T^I))+N[10]+38016083&4294967295,B=T+(A<<9&4294967295|A>>>23),A=U+(T^I&(B^T))+N[15]+3634488961&4294967295,U=B+(A<<14&4294967295|A>>>18),A=I+(B^T&(U^B))+N[4]+3889429448&4294967295,I=U+(A<<20&4294967295|A>>>12),A=T+(U^B&(I^U))+N[9]+568446438&4294967295,T=I+(A<<5&4294967295|A>>>27),A=B+(I^U&(T^I))+N[14]+3275163606&4294967295,B=T+(A<<9&4294967295|A>>>23),A=U+(T^I&(B^T))+N[3]+4107603335&4294967295,U=B+(A<<14&4294967295|A>>>18),A=I+(B^T&(U^B))+N[8]+1163531501&4294967295,I=U+(A<<20&4294967295|A>>>12),A=T+(U^B&(I^U))+N[13]+2850285829&4294967295,T=I+(A<<5&4294967295|A>>>27),A=B+(I^U&(T^I))+N[2]+4243563512&4294967295,B=T+(A<<9&4294967295|A>>>23),A=U+(T^I&(B^T))+N[7]+1735328473&4294967295,U=B+(A<<14&4294967295|A>>>18),A=I+(B^T&(U^B))+N[12]+2368359562&4294967295,I=U+(A<<20&4294967295|A>>>12),A=T+(I^U^B)+N[5]+4294588738&4294967295,T=I+(A<<4&4294967295|A>>>28),A=B+(T^I^U)+N[8]+2272392833&4294967295,B=T+(A<<11&4294967295|A>>>21),A=U+(B^T^I)+N[11]+1839030562&4294967295,U=B+(A<<16&4294967295|A>>>16),A=I+(U^B^T)+N[14]+4259657740&4294967295,I=U+(A<<23&4294967295|A>>>9),A=T+(I^U^B)+N[1]+2763975236&4294967295,T=I+(A<<4&4294967295|A>>>28),A=B+(T^I^U)+N[4]+1272893353&4294967295,B=T+(A<<11&4294967295|A>>>21),A=U+(B^T^I)+N[7]+4139469664&4294967295,U=B+(A<<16&4294967295|A>>>16),A=I+(U^B^T)+N[10]+3200236656&4294967295,I=U+(A<<23&4294967295|A>>>9),A=T+(I^U^B)+N[13]+681279174&4294967295,T=I+(A<<4&4294967295|A>>>28),A=B+(T^I^U)+N[0]+3936430074&4294967295,B=T+(A<<11&4294967295|A>>>21),A=U+(B^T^I)+N[3]+3572445317&4294967295,U=B+(A<<16&4294967295|A>>>16),A=I+(U^B^T)+N[6]+76029189&4294967295,I=U+(A<<23&4294967295|A>>>9),A=T+(I^U^B)+N[9]+3654602809&4294967295,T=I+(A<<4&4294967295|A>>>28),A=B+(T^I^U)+N[12]+3873151461&4294967295,B=T+(A<<11&4294967295|A>>>21),A=U+(B^T^I)+N[15]+530742520&4294967295,U=B+(A<<16&4294967295|A>>>16),A=I+(U^B^T)+N[2]+3299628645&4294967295,I=U+(A<<23&4294967295|A>>>9),A=T+(U^(I|~B))+N[0]+4096336452&4294967295,T=I+(A<<6&4294967295|A>>>26),A=B+(I^(T|~U))+N[7]+1126891415&4294967295,B=T+(A<<10&4294967295|A>>>22),A=U+(T^(B|~I))+N[14]+2878612391&4294967295,U=B+(A<<15&4294967295|A>>>17),A=I+(B^(U|~T))+N[5]+4237533241&4294967295,I=U+(A<<21&4294967295|A>>>11),A=T+(U^(I|~B))+N[12]+1700485571&4294967295,T=I+(A<<6&4294967295|A>>>26),A=B+(I^(T|~U))+N[3]+2399980690&4294967295,B=T+(A<<10&4294967295|A>>>22),A=U+(T^(B|~I))+N[10]+4293915773&4294967295,U=B+(A<<15&4294967295|A>>>17),A=I+(B^(U|~T))+N[1]+2240044497&4294967295,I=U+(A<<21&4294967295|A>>>11),A=T+(U^(I|~B))+N[8]+1873313359&4294967295,T=I+(A<<6&4294967295|A>>>26),A=B+(I^(T|~U))+N[15]+4264355552&4294967295,B=T+(A<<10&4294967295|A>>>22),A=U+(T^(B|~I))+N[6]+2734768916&4294967295,U=B+(A<<15&4294967295|A>>>17),A=I+(B^(U|~T))+N[13]+1309151649&4294967295,I=U+(A<<21&4294967295|A>>>11),A=T+(U^(I|~B))+N[4]+4149444226&4294967295,T=I+(A<<6&4294967295|A>>>26),A=B+(I^(T|~U))+N[11]+3174756917&4294967295,B=T+(A<<10&4294967295|A>>>22),A=U+(T^(B|~I))+N[2]+718787259&4294967295,U=B+(A<<15&4294967295|A>>>17),A=I+(B^(U|~T))+N[9]+3951481745&4294967295,R.g[0]=R.g[0]+T&4294967295,R.g[1]=R.g[1]+(U+(A<<21&4294967295|A>>>11))&4294967295,R.g[2]=R.g[2]+U&4294967295,R.g[3]=R.g[3]+B&4294967295}r.prototype.u=function(R,T){T===void 0&&(T=R.length);for(var I=T-this.blockSize,N=this.B,U=this.h,B=0;B<T;){if(U==0)for(;B<=I;)o(this,R,B),B+=this.blockSize;if(typeof R=="string"){for(;B<T;)if(N[U++]=R.charCodeAt(B++),U==this.blockSize){o(this,N),U=0;break}}else for(;B<T;)if(N[U++]=R[B++],U==this.blockSize){o(this,N),U=0;break}}this.h=U,this.o+=T},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var T=1;T<R.length-8;++T)R[T]=0;var I=8*this.o;for(T=R.length-8;T<R.length;++T)R[T]=I&255,I/=256;for(this.u(R),R=Array(16),T=I=0;4>T;++T)for(var N=0;32>N;N+=8)R[I++]=this.g[T]>>>N&255;return R};function l(R,T){var I=f;return Object.prototype.hasOwnProperty.call(I,R)?I[R]:I[R]=T(R)}function u(R,T){this.h=T;for(var I=[],N=!0,U=R.length-1;0<=U;U--){var B=R[U]|0;N&&B==T||(I[U]=B,N=!1)}this.g=I}var f={};function d(R){return-128<=R&&128>R?l(R,function(T){return new u([T|0],0>T?-1:0)}):new u([R|0],0>R?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return v;if(0>R)return D(p(-R));for(var T=[],I=1,N=0;R>=I;N++)T[N]=R/I|0,I*=4294967296;return new u(T,0)}function g(R,T){if(R.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(R.charAt(0)=="-")return D(g(R.substring(1),T));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=p(Math.pow(T,8)),N=v,U=0;U<R.length;U+=8){var B=Math.min(8,R.length-U),A=parseInt(R.substring(U,U+B),T);8>B?(B=p(Math.pow(T,B)),N=N.j(B).add(p(A))):(N=N.j(I),N=N.add(p(A)))}return N}var v=d(0),E=d(1),b=d(16777216);t=u.prototype,t.m=function(){if(M(this))return-D(this).m();for(var R=0,T=1,I=0;I<this.g.length;I++){var N=this.i(I);R+=(0<=N?N:4294967296+N)*T,T*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(x(this))return"0";if(M(this))return"-"+D(this).toString(R);for(var T=p(Math.pow(R,6)),I=this,N="";;){var U=j(I,T).g;I=P(I,U.j(T));var B=((0<I.g.length?I.g[0]:I.h)>>>0).toString(R);if(I=U,x(I))return B+N;for(;6>B.length;)B="0"+B;N=B+N}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function x(R){if(R.h!=0)return!1;for(var T=0;T<R.g.length;T++)if(R.g[T]!=0)return!1;return!0}function M(R){return R.h==-1}t.l=function(R){return R=P(this,R),M(R)?-1:x(R)?0:1};function D(R){for(var T=R.g.length,I=[],N=0;N<T;N++)I[N]=~R.g[N];return new u(I,~R.h).add(E)}t.abs=function(){return M(this)?D(this):this},t.add=function(R){for(var T=Math.max(this.g.length,R.g.length),I=[],N=0,U=0;U<=T;U++){var B=N+(this.i(U)&65535)+(R.i(U)&65535),A=(B>>>16)+(this.i(U)>>>16)+(R.i(U)>>>16);N=A>>>16,B&=65535,A&=65535,I[U]=A<<16|B}return new u(I,I[I.length-1]&-2147483648?-1:0)};function P(R,T){return R.add(D(T))}t.j=function(R){if(x(this)||x(R))return v;if(M(this))return M(R)?D(this).j(D(R)):D(D(this).j(R));if(M(R))return D(this.j(D(R)));if(0>this.l(b)&&0>R.l(b))return p(this.m()*R.m());for(var T=this.g.length+R.g.length,I=[],N=0;N<2*T;N++)I[N]=0;for(N=0;N<this.g.length;N++)for(var U=0;U<R.g.length;U++){var B=this.i(N)>>>16,A=this.i(N)&65535,k=R.i(U)>>>16,q=R.i(U)&65535;I[2*N+2*U]+=A*q,H(I,2*N+2*U),I[2*N+2*U+1]+=B*q,H(I,2*N+2*U+1),I[2*N+2*U+1]+=A*k,H(I,2*N+2*U+1),I[2*N+2*U+2]+=B*k,H(I,2*N+2*U+2)}for(N=0;N<T;N++)I[N]=I[2*N+1]<<16|I[2*N];for(N=T;N<2*T;N++)I[N]=0;return new u(I,0)};function H(R,T){for(;(R[T]&65535)!=R[T];)R[T+1]+=R[T]>>>16,R[T]&=65535,T++}function F(R,T){this.g=R,this.h=T}function j(R,T){if(x(T))throw Error("division by zero");if(x(R))return new F(v,v);if(M(R))return T=j(D(R),T),new F(D(T.g),D(T.h));if(M(T))return T=j(R,D(T)),new F(D(T.g),T.h);if(30<R.g.length){if(M(R)||M(T))throw Error("slowDivide_ only works with positive integers.");for(var I=E,N=T;0>=N.l(R);)I=X(I),N=X(N);var U=Z(I,1),B=Z(N,1);for(N=Z(N,2),I=Z(I,2);!x(N);){var A=B.add(N);0>=A.l(R)&&(U=U.add(I),B=A),N=Z(N,1),I=Z(I,1)}return T=P(R,U.j(T)),new F(U,T)}for(U=v;0<=R.l(T);){for(I=Math.max(1,Math.floor(R.m()/T.m())),N=Math.ceil(Math.log(I)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),B=p(I),A=B.j(T);M(A)||0<A.l(R);)I-=N,B=p(I),A=B.j(T);x(B)&&(B=E),U=U.add(B),R=P(R,A)}return new F(U,R)}t.A=function(R){return j(this,R).h},t.and=function(R){for(var T=Math.max(this.g.length,R.g.length),I=[],N=0;N<T;N++)I[N]=this.i(N)&R.i(N);return new u(I,this.h&R.h)},t.or=function(R){for(var T=Math.max(this.g.length,R.g.length),I=[],N=0;N<T;N++)I[N]=this.i(N)|R.i(N);return new u(I,this.h|R.h)},t.xor=function(R){for(var T=Math.max(this.g.length,R.g.length),I=[],N=0;N<T;N++)I[N]=this.i(N)^R.i(N);return new u(I,this.h^R.h)};function X(R){for(var T=R.g.length+1,I=[],N=0;N<T;N++)I[N]=R.i(N)<<1|R.i(N-1)>>>31;return new u(I,R.h)}function Z(R,T){var I=T>>5;T%=32;for(var N=R.g.length-I,U=[],B=0;B<N;B++)U[B]=0<T?R.i(B+I)>>>T|R.i(B+I+1)<<32-T:R.i(B+I);return new u(U,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,MA=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=g,_o=u}).apply(typeof oS<"u"?oS:typeof self<"u"?self:typeof window<"u"?window:{});var Dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kA,uc,VA,qh,_y,PA,LA,zA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,w){return h==Array.prototype||h==Object.prototype||(h[_]=w.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dh=="object"&&Dh];for(var _=0;_<h.length;++_){var w=h[_];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function o(h,_){if(_)e:{var w=r;h=h.split(".");for(var z=0;z<h.length-1;z++){var re=h[z];if(!(re in w))break e;w=w[re]}h=h[h.length-1],z=w[h],_=_(z),_!=z&&_!=null&&e(w,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var w=0,z=!1,re={next:function(){if(!z&&w<h.length){var ce=w++;return{value:_(ce,h[ce]),done:!1}}return z=!0,{done:!0,value:void 0}}};return re[Symbol.iterator]=function(){return re},re}o("Array.prototype.values",function(h){return h||function(){return l(this,function(_,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function d(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function p(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function g(h,_,w){return h.call.apply(h.bind,arguments)}function v(h,_,w){if(!h)throw Error();if(2<arguments.length){var z=Array.prototype.slice.call(arguments,2);return function(){var re=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(re,z),h.apply(_,re)}}return function(){return h.apply(_,arguments)}}function E(h,_,w){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:v,E.apply(null,arguments)}function b(h,_){var w=Array.prototype.slice.call(arguments,1);return function(){var z=w.slice();return z.push.apply(z,arguments),h.apply(this,z)}}function x(h,_){function w(){}w.prototype=_.prototype,h.aa=_.prototype,h.prototype=new w,h.prototype.constructor=h,h.Qb=function(z,re,ce){for(var be=Array(arguments.length-2),st=2;st<arguments.length;st++)be[st-2]=arguments[st];return _.prototype[re].apply(z,be)}}function M(h){const _=h.length;if(0<_){const w=Array(_);for(let z=0;z<_;z++)w[z]=h[z];return w}return[]}function D(h,_){for(let w=1;w<arguments.length;w++){const z=arguments[w];if(d(z)){const re=h.length||0,ce=z.length||0;h.length=re+ce;for(let be=0;be<ce;be++)h[re+be]=z[be]}else h.push(z)}}class P{constructor(_,w){this.i=_,this.j=w,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function H(h){return/^[\s\xa0]*$/.test(h)}function F(){var h=f.navigator;return h&&(h=h.userAgent)?h:""}function j(h){return j[" "](h),h}j[" "]=function(){};var X=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function Z(h,_,w){for(const z in h)_.call(w,h[z],z,h)}function R(h,_){for(const w in h)_.call(void 0,h[w],w,h)}function T(h){const _={};for(const w in h)_[w]=h[w];return _}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(h,_){let w,z;for(let re=1;re<arguments.length;re++){z=arguments[re];for(w in z)h[w]=z[w];for(let ce=0;ce<I.length;ce++)w=I[ce],Object.prototype.hasOwnProperty.call(z,w)&&(h[w]=z[w])}}function U(h){var _=1;h=h.split(":");const w=[];for(;0<_&&h.length;)w.push(h.shift()),_--;return h.length&&w.push(h.join(":")),w}function B(h){f.setTimeout(()=>{throw h},0)}function A(){var h=J;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class k{constructor(){this.h=this.g=null}add(_,w){const z=q.get();z.set(_,w),this.h?this.h.next=z:this.g=z,this.h=z}}var q=new P(()=>new V,h=>h.reset());class V{constructor(){this.next=this.g=this.h=null}set(_,w){this.h=_,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let G,ee=!1,J=new k,L=()=>{const h=f.Promise.resolve(void 0);G=()=>{h.then(Y)}};var Y=()=>{for(var h;h=A();){try{h.h.call(h.g)}catch(w){B(w)}var _=q;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}ee=!1};function ie(){this.s=this.s,this.C=this.C}ie.prototype.s=!1,ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var he=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};f.addEventListener("test",w,_),f.removeEventListener("test",w,_)}catch{}return h}();function _e(h,_){if(ne.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var w=this.type=h.type,z=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(X){e:{try{j(_.nodeName);var re=!0;break e}catch{}re=!1}re||(_=null)}}else w=="mouseover"?_=h.fromElement:w=="mouseout"&&(_=h.toElement);this.relatedTarget=_,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:we[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&_e.aa.h.call(this)}}x(_e,ne);var we={2:"touch",3:"pen",4:"mouse"};_e.prototype.h=function(){_e.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Oe="closure_listenable_"+(1e6*Math.random()|0),ve=0;function Se(h,_,w,z,re){this.listener=h,this.proxy=null,this.src=_,this.type=w,this.capture=!!z,this.ha=re,this.key=++ve,this.da=this.fa=!1}function Ce(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function je(h){this.src=h,this.g={},this.h=0}je.prototype.add=function(h,_,w,z,re){var ce=h.toString();h=this.g[ce],h||(h=this.g[ce]=[],this.h++);var be=mt(h,_,z,re);return-1<be?(_=h[be],w||(_.fa=!1)):(_=new Se(_,this.src,ce,!!z,re),_.fa=w,h.push(_)),_};function dt(h,_){var w=_.type;if(w in h.g){var z=h.g[w],re=Array.prototype.indexOf.call(z,_,void 0),ce;(ce=0<=re)&&Array.prototype.splice.call(z,re,1),ce&&(Ce(_),h.g[w].length==0&&(delete h.g[w],h.h--))}}function mt(h,_,w,z){for(var re=0;re<h.length;++re){var ce=h[re];if(!ce.da&&ce.listener==_&&ce.capture==!!w&&ce.ha==z)return re}return-1}var pt="closure_lm_"+(1e6*Math.random()|0),Ve={};function Yt(h,_,w,z,re){if(Array.isArray(_)){for(var ce=0;ce<_.length;ce++)Yt(h,_[ce],w,z,re);return null}return w=zn(w),h&&h[Oe]?h.K(_,w,p(z)?!!z.capture:!1,re):Pe(h,_,w,!1,z,re)}function Pe(h,_,w,z,re,ce){if(!_)throw Error("Invalid event type");var be=p(re)?!!re.capture:!!re,st=mn(h);if(st||(h[pt]=st=new je(h)),w=st.add(_,w,z,be,ce),w.proxy)return w;if(z=De(),w.proxy=z,z.src=h,z.listener=w,h.addEventListener)he||(re=be),re===void 0&&(re=!1),h.addEventListener(_.toString(),z,re);else if(h.attachEvent)h.attachEvent(dn(_.toString()),z);else if(h.addListener&&h.removeListener)h.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return w}function De(){function h(w){return _.call(h.src,h.listener,w)}const _=Rn;return h}function Ht(h,_,w,z,re){if(Array.isArray(_))for(var ce=0;ce<_.length;ce++)Ht(h,_[ce],w,z,re);else z=p(z)?!!z.capture:!!z,w=zn(w),h&&h[Oe]?(h=h.i,_=String(_).toString(),_ in h.g&&(ce=h.g[_],w=mt(ce,w,z,re),-1<w&&(Ce(ce[w]),Array.prototype.splice.call(ce,w,1),ce.length==0&&(delete h.g[_],h.h--)))):h&&(h=mn(h))&&(_=h.g[_.toString()],h=-1,_&&(h=mt(_,w,z,re)),(w=-1<h?_[h]:null)&&An(w))}function An(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Oe])dt(_.i,h);else{var w=h.type,z=h.proxy;_.removeEventListener?_.removeEventListener(w,z,h.capture):_.detachEvent?_.detachEvent(dn(w),z):_.addListener&&_.removeListener&&_.removeListener(z),(w=mn(_))?(dt(w,h),w.h==0&&(w.src=null,_[pt]=null)):Ce(h)}}}function dn(h){return h in Ve?Ve[h]:Ve[h]="on"+h}function Rn(h,_){if(h.da)h=!0;else{_=new _e(_,this);var w=h.listener,z=h.ha||h.src;h.fa&&An(h),h=w.call(z,_)}return h}function mn(h){return h=h[pt],h instanceof je?h:null}var Kt="__closure_events_fn_"+(1e9*Math.random()>>>0);function zn(h){return typeof h=="function"?h:(h[Kt]||(h[Kt]=function(_){return h.handleEvent(_)}),h[Kt])}function xe(){ie.call(this),this.i=new je(this),this.M=this,this.F=null}x(xe,ie),xe.prototype[Oe]=!0,xe.prototype.removeEventListener=function(h,_,w,z){Ht(this,h,_,w,z)};function Fe(h,_){var w,z=h.F;if(z)for(w=[];z;z=z.F)w.push(z);if(h=h.M,z=_.type||_,typeof _=="string")_=new ne(_,h);else if(_ instanceof ne)_.target=_.target||h;else{var re=_;_=new ne(z,h),N(_,re)}if(re=!0,w)for(var ce=w.length-1;0<=ce;ce--){var be=_.g=w[ce];re=kt(be,z,!0,_)&&re}if(be=_.g=h,re=kt(be,z,!0,_)&&re,re=kt(be,z,!1,_)&&re,w)for(ce=0;ce<w.length;ce++)be=_.g=w[ce],re=kt(be,z,!1,_)&&re}xe.prototype.N=function(){if(xe.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var w=h.g[_],z=0;z<w.length;z++)Ce(w[z]);delete h.g[_],h.h--}}this.F=null},xe.prototype.K=function(h,_,w,z){return this.i.add(String(h),_,!1,w,z)},xe.prototype.L=function(h,_,w,z){return this.i.add(String(h),_,!0,w,z)};function kt(h,_,w,z){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var re=!0,ce=0;ce<_.length;++ce){var be=_[ce];if(be&&!be.da&&be.capture==w){var st=be.listener,vn=be.ha||be.src;be.fa&&dt(h.i,be),re=st.call(vn,z)!==!1&&re}}return re&&!z.defaultPrevented}function Vt(h,_,w){if(typeof h=="function")w&&(h=E(h,w));else if(h&&typeof h.handleEvent=="function")h=E(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:f.setTimeout(h,_||0)}function Fi(h){h.g=Vt(()=>{h.g=null,h.i&&(h.i=!1,Fi(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Xt extends ie{constructor(_,w){super(),this.m=_,this.l=w,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Fi(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tn(h){ie.call(this),this.h=h,this.g={}}x(tn,ie);var pn=[];function Ft(h){Z(h.g,function(_,w){this.g.hasOwnProperty(w)&&An(_)},h),h.g={}}tn.prototype.N=function(){tn.aa.N.call(this),Ft(this)},tn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var At=f.JSON.stringify,Pt=f.JSON.parse,an=class{stringify(h){return f.JSON.stringify(h,void 0)}parse(h){return f.JSON.parse(h,void 0)}};function xn(){}xn.prototype.h=null;function cr(h){return h.h||(h.h=h.i())}function Qn(){}var gn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function oi(){ne.call(this,"d")}x(oi,ne);function Wn(){ne.call(this,"c")}x(Wn,ne);var _i={},Xr=null;function xi(){return Xr=Xr||new xe}_i.La="serverreachability";function fr(h){ne.call(this,_i.La,h)}x(fr,ne);function ai(h){const _=xi();Fe(_,new fr(_))}_i.STAT_EVENT="statevent";function Ii(h,_){ne.call(this,_i.STAT_EVENT,h),this.stat=_}x(Ii,ne);function Rt(h){const _=xi();Fe(_,new Ii(_,h))}_i.Ma="timingevent";function gt(h,_){ne.call(this,_i.Ma,h),this.size=_}x(gt,ne);function Ut(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){h()},_)}function Qt(){this.g=!0}Qt.prototype.xa=function(){this.g=!1};function Ar(h,_,w,z,re,ce){h.info(function(){if(h.g)if(ce)for(var be="",st=ce.split("&"),vn=0;vn<st.length;vn++){var ot=st[vn].split("=");if(1<ot.length){var On=ot[0];ot=ot[1];var _n=On.split("_");be=2<=_n.length&&_n[1]=="type"?be+(On+"="+ot+"&"):be+(On+"=redacted&")}}else be=null;else be=ce;return"XMLHTTP REQ ("+z+") [attempt "+re+"]: "+_+`
`+w+`
`+be})}function Mo(h,_,w,z,re,ce,be){h.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+re+"]: "+_+`
`+w+`
`+ce+" "+be})}function li(h,_,w,z){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+qi(h,w)+(z?" "+z:"")})}function Rr(h,_){h.info(function(){return"TIMEOUT: "+_})}Qt.prototype.info=function(){};function qi(h,_){if(!h.g)return _;if(!_)return null;try{var w=JSON.parse(_);if(w){for(h=0;h<w.length;h++)if(Array.isArray(w[h])){var z=w[h];if(!(2>z.length)){var re=z[1];if(Array.isArray(re)&&!(1>re.length)){var ce=re[0];if(ce!="noop"&&ce!="stop"&&ce!="close")for(var be=1;be<re.length;be++)re[be]=""}}}}return At(w)}catch{return _}}var Ci={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ui={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},In;function ci(){}x(ci,xn),ci.prototype.g=function(){return new XMLHttpRequest},ci.prototype.i=function(){return{}},In=new ci;function yn(h,_,w,z){this.j=h,this.i=_,this.l=w,this.R=z||1,this.U=new tn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Q}function Q(){this.i=null,this.g="",this.h=!1}var ue={},Ee={};function Te(h,_,w){h.L=1,h.v=hr(Dt(_)),h.m=w,h.P=!0,Ze(h,null)}function Ze(h,_){h.F=Date.now(),yt(h),h.A=Dt(h.v);var w=h.A,z=h.R;Array.isArray(z)||(z=[String(z)]),nu(w.i,"t",z),h.C=0,w=h.j.J,h.h=new Q,h.g=gf(h.j,w?_:null,!h.m),0<h.O&&(h.M=new Xt(E(h.Y,h,h.g),h.O)),_=h.U,w=h.g,z=h.ca;var re="readystatechange";Array.isArray(re)||(re&&(pn[0]=re.toString()),re=pn);for(var ce=0;ce<re.length;ce++){var be=Yt(w,re[ce],z||_.handleEvent,!1,_.h||_);if(!be)break;_.g[be.key]=be}_=h.H?T(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),ai(),Ar(h.i,h.u,h.A,h.l,h.R,h.m)}yn.prototype.ca=function(h){h=h.target;const _=this.M;_&&Qi(h)==3?_.j():this.Y(h)},yn.prototype.Y=function(h){try{if(h==this.g)e:{const _n=Qi(this.g);var _=this.g.Ba();const ns=this.g.Z();if(!(3>_n)&&(_n!=3||this.g&&(this.h.h||this.g.oa()||lf(this.g)))){this.J||_n!=4||_==7||(_==8||0>=ns?ai(3):ai(2)),vt(this);var w=this.g.Z();this.X=w;t:if($e(this)){var z=lf(this.g);h="";var re=z.length,ce=Qi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_t(this),ct(this);var be="";break t}this.h.i=new f.TextDecoder}for(_=0;_<re;_++)this.h.h=!0,h+=this.h.i.decode(z[_],{stream:!(ce&&_==re-1)});z.length=0,this.h.g+=h,this.C=0,be=this.h.g}else be=this.g.oa();if(this.o=w==200,Mo(this.i,this.u,this.A,this.l,this.R,_n,w),this.o){if(this.T&&!this.K){t:{if(this.g){var st,vn=this.g;if((st=vn.g?vn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(st)){var ot=st;break t}}ot=null}if(w=ot)li(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ln(this,w);else{this.o=!1,this.s=3,Rt(12),_t(this),ct(this);break e}}if(this.P){w=!0;let Fn;for(;!this.J&&this.C<be.length;)if(Fn=bt(this,be),Fn==Ee){_n==4&&(this.s=4,Rt(14),w=!1),li(this.i,this.l,null,"[Incomplete Response]");break}else if(Fn==ue){this.s=4,Rt(15),li(this.i,this.l,be,"[Invalid Chunk]"),w=!1;break}else li(this.i,this.l,Fn,null),ln(this,Fn);if($e(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_n!=4||be.length!=0||this.h.h||(this.s=1,Rt(16),w=!1),this.o=this.o&&w,!w)li(this.i,this.l,be,"[Invalid Chunked Response]"),_t(this),ct(this);else if(0<be.length&&!this.W){this.W=!0;var On=this.j;On.g==this&&On.ba&&!On.M&&(On.j.info("Great, no buffering proxy detected. Bytes received: "+be.length),Ho(On),On.M=!0,Rt(11))}}else li(this.i,this.l,be,null),ln(this,be);_n==4&&_t(this),this.o&&!this.J&&(_n==4?df(this.j,this):(this.o=!1,yt(this)))}else fm(this.g),w==400&&0<be.indexOf("Unknown SID")?(this.s=3,Rt(12)):(this.s=0,Rt(13)),_t(this),ct(this)}}}catch{}finally{}};function $e(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function bt(h,_){var w=h.C,z=_.indexOf(`
`,w);return z==-1?Ee:(w=Number(_.substring(w,z)),isNaN(w)?ue:(z+=1,z+w>_.length?Ee:(_=_.slice(z,z+w),h.C=z+w,_)))}yn.prototype.cancel=function(){this.J=!0,_t(this)};function yt(h){h.S=Date.now()+h.I,Cn(h,h.I)}function Cn(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ut(E(h.ba,h),_)}function vt(h){h.B&&(f.clearTimeout(h.B),h.B=null)}yn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Rr(this.i,this.A),this.L!=2&&(ai(),Rt(17)),_t(this),this.s=2,ct(this)):Cn(this,this.S-h)};function ct(h){h.j.G==0||h.J||df(h.j,h)}function _t(h){vt(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,Ft(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function ln(h,_){try{var w=h.j;if(w.G!=0&&(w.g==h||$i(w.h,h))){if(!h.K&&$i(w.h,h)&&w.G==3){try{var z=w.Da.g.parse(_)}catch{z=null}if(Array.isArray(z)&&z.length==3){var re=z;if(re[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<h.F)Oa(w),Na(w);else break e;au(w),Rt(18)}}else w.za=re[1],0<w.za-w.T&&37500>re[2]&&w.F&&w.v==0&&!w.C&&(w.C=Ut(E(w.Za,w),6e3));if(1>=hi(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else ts(w,11)}else if((h.K||w.g==h)&&Oa(w),!H(_))for(re=w.Da.g.parse(_),_=0;_<re.length;_++){let ot=re[_];if(w.T=ot[0],ot=ot[1],w.G==2)if(ot[0]=="c"){w.K=ot[1],w.ia=ot[2];const On=ot[3];On!=null&&(w.la=On,w.j.info("VER="+w.la));const _n=ot[4];_n!=null&&(w.Aa=_n,w.j.info("SVER="+w.Aa));const ns=ot[5];ns!=null&&typeof ns=="number"&&0<ns&&(z=1.5*ns,w.L=z,w.j.info("backChannelRequestTimeoutMs_="+z)),z=w;const Fn=h.g;if(Fn){const kr=Fn.g?Fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kr){var ce=z.h;ce.g||kr.indexOf("spdy")==-1&&kr.indexOf("quic")==-1&&kr.indexOf("h2")==-1||(ce.j=ce.l,ce.g=new Set,ce.h&&(Gi(ce,ce.h),ce.h=null))}if(z.D){const uu=Fn.g?Fn.g.getResponseHeader("X-HTTP-Session-Id"):null;uu&&(z.ya=uu,ut(z.I,z.D,uu))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-h.F,w.j.info("Handshake RTT: "+w.R+"ms")),z=w;var be=h;if(z.qa=pf(z,z.J?z.ia:null,z.W),be.K){Nn(z.h,be);var st=be,vn=z.L;vn&&(st.I=vn),st.B&&(vt(st),yt(st)),z.g=be}else ff(z);0<w.i.length&&Da(w)}else ot[0]!="stop"&&ot[0]!="close"||ts(w,7);else w.G==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?ts(w,7):su(w):ot[0]!="noop"&&w.l&&w.l.ta(ot),w.v=0)}}ai(4)}catch{}}var Wt=class{constructor(h,_){this.g=h,this.map=_}};function nn(h){this.l=h||10,f.PerformanceNavigationTiming?(h=f.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fi(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function hi(h){return h.h?1:h.g?h.g.size:0}function $i(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Gi(h,_){h.g?h.g.add(_):h.h=_}function Nn(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}nn.prototype.cancel=function(){if(this.i=ko(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ko(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const w of h.g.values())_=_.concat(w.D);return _}return M(h.i)}function tu(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(d(h)){for(var _=[],w=h.length,z=0;z<w;z++)_.push(h[z]);return _}_=[],w=0;for(z in h)_[w++]=h[z];return _}function rt(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(d(h)||typeof h=="string"){var _=[];h=h.length;for(var w=0;w<h;w++)_.push(w);return _}_=[],w=0;for(const z in h)_[w++]=z;return _}}}function it(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(d(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var w=rt(h),z=tu(h),re=z.length,ce=0;ce<re;ce++)_.call(void 0,z[ce],w&&w[ce],h)}var Yi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ki(h,_){if(h){h=h.split("&");for(var w=0;w<h.length;w++){var z=h[w].indexOf("="),re=null;if(0<=z){var ce=h[w].substring(0,z);re=h[w].substring(z+1)}else ce=h[w];_(ce,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function Bt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Bt){this.h=h.h,Un(this,h.j),this.o=h.o,this.g=h.g,Bn(this,h.s),this.l=h.l;var _=h.i,w=new Ei;w.i=_.i,_.g&&(w.g=new Map(_.g),w.h=_.h),di(this,w),this.m=h.m}else h&&(_=String(h).match(Yi))?(this.h=!1,Un(this,_[1]||"",!0),this.o=jn(_[2]||""),this.g=jn(_[3]||"",!0),Bn(this,_[4]),this.l=jn(_[5]||"",!0),di(this,_[6]||"",!0),this.m=jn(_[7]||"")):(this.h=!1,this.i=new Ei(null,this.h))}Bt.prototype.toString=function(){var h=[],_=this.j;_&&h.push(mi(_,xr,!0),":");var w=this.g;return(w||_=="file")&&(h.push("//"),(_=this.o)&&h.push(mi(_,xr,!0),"@"),h.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&h.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(mi(w,w.charAt(0)=="/"?Ds:Qr,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",mi(w,Wr)),h.join("")};function Dt(h){return new Bt(h)}function Un(h,_,w){h.j=w?jn(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Bn(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function di(h,_,w){_ instanceof Ei?(h.i=_,of(h.i,h.h)):(w||(_=mi(_,Os)),h.i=new Ei(_,h.h))}function ut(h,_,w){h.i.set(_,w)}function hr(h){return ut(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function jn(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function mi(h,_,w){return typeof h=="string"?(h=encodeURI(h).replace(_,Vo),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Vo(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var xr=/[#\/\?@]/g,Qr=/[#\?:]/g,Ds=/[#\?]/g,Os=/[#\?@]/g,Wr=/#/g;function Ei(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Hn(h){h.g||(h.g=new Map,h.h=0,h.i&&Ki(h.i,function(_,w){h.add(decodeURIComponent(_.replace(/\+/g," ")),w)}))}t=Ei.prototype,t.add=function(h,_){Hn(this),this.i=null,h=Ir(this,h);var w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(_),this.h+=1,this};function Zr(h,_){Hn(h),_=Ir(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Jr(h,_){return Hn(h),_=Ir(h,_),h.g.has(_)}t.forEach=function(h,_){Hn(this),this.g.forEach(function(w,z){w.forEach(function(re){h.call(_,re,z,this)},this)},this)},t.na=function(){Hn(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),w=[];for(let z=0;z<_.length;z++){const re=h[z];for(let ce=0;ce<re.length;ce++)w.push(_[z])}return w},t.V=function(h){Hn(this);let _=[];if(typeof h=="string")Jr(this,h)&&(_=_.concat(this.g.get(Ir(this,h))));else{h=Array.from(this.g.values());for(let w=0;w<h.length;w++)_=_.concat(h[w])}return _},t.set=function(h,_){return Hn(this),this.i=null,h=Ir(this,h),Jr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},t.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function nu(h,_,w){Zr(h,_),0<w.length&&(h.i=null,h.g.set(Ir(h,_),M(w)),h.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var w=0;w<_.length;w++){var z=_[w];const ce=encodeURIComponent(String(z)),be=this.V(z);for(z=0;z<be.length;z++){var re=ce;be[z]!==""&&(re+="="+encodeURIComponent(String(be[z]))),h.push(re)}}return this.i=h.join("&")};function Ir(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function of(h,_){_&&!h.j&&(Hn(h),h.i=null,h.g.forEach(function(w,z){var re=z.toLowerCase();z!=re&&(Zr(this,z),nu(this,re,w))},h)),h.j=_}function Po(h,_){const w=new Qt;if(f.Image){const z=new Image;z.onload=b(Xi,w,"TestLoadImage: loaded",!0,_,z),z.onerror=b(Xi,w,"TestLoadImage: error",!1,_,z),z.onabort=b(Xi,w,"TestLoadImage: abort",!1,_,z),z.ontimeout=b(Xi,w,"TestLoadImage: timeout",!1,_,z),f.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=h}else _(!1)}function dr(h,_){const w=new Qt,z=new AbortController,re=setTimeout(()=>{z.abort(),Xi(w,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:z.signal}).then(ce=>{clearTimeout(re),ce.ok?Xi(w,"TestPingServer: ok",!0,_):Xi(w,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(re),Xi(w,"TestPingServer: error",!1,_)})}function Xi(h,_,w,z,re){try{re&&(re.onload=null,re.onerror=null,re.onabort=null,re.ontimeout=null),z(w)}catch{}}function Lo(){this.g=new an}function Cr(h,_,w){const z=w||"";try{it(h,function(re,ce){let be=re;p(re)&&(be=At(re)),_.push(z+ce+"="+encodeURIComponent(be))})}catch(re){throw _.push(z+"type="+encodeURIComponent("_badmap")),re}}function Ms(h){this.l=h.Ub||null,this.j=h.eb||!1}x(Ms,xn),Ms.prototype.g=function(){return new es(this.l,this.j)},Ms.prototype.i=function(h){return function(){return h}}({});function es(h,_){xe.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(es,xe),t=es.prototype,t.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Dr(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||f).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Nr(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Dr(this)),this.g&&(this.readyState=3,Dr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;iu(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function iu(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Nr(this):Dr(this),this.readyState==3&&iu(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Nr(this))},t.Qa=function(h){this.g&&(this.response=h,Nr(this))},t.ga=function(){this.g&&Nr(this)};function Nr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Dr(h)}t.setRequestHeader=function(h,_){this.u.append(h,_)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var w=_.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=_.next();return h.join(`\r
`)};function Dr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(es.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ru(h){let _="";return Z(h,function(w,z){_+=z,_+=":",_+=w,_+=`\r
`}),_}function Dn(h,_,w){e:{for(z in w){var z=!1;break e}z=!0}z||(w=ru(w),typeof h=="string"?w!=null&&encodeURIComponent(String(w)):ut(h,_,w))}function Et(h){xe.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Et,xe);var Ra=/^https?$/i,zo=["POST","PUT"];t=Et.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,_,w,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():In.g(),this.v=this.o?cr(this.o):cr(In),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ce){af(this,ce);return}if(h=w||"",w=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var re in z)w.set(re,z[re]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const ce of z.keys())w.set(ce,z.get(ce));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(w.keys()).find(ce=>ce.toLowerCase()=="content-type"),re=f.FormData&&h instanceof f.FormData,!(0<=Array.prototype.indexOf.call(zo,_,void 0))||z||re||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ce,be]of w)this.g.setRequestHeader(ce,be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Uo(this),this.u=!0,this.g.send(h),this.u=!1}catch(ce){af(this,ce)}};function af(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,xa(h),Or(h)}function xa(h){h.A||(h.A=!0,Fe(h,"complete"),Fe(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Fe(this,"complete"),Fe(this,"abort"),Or(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Or(this,!0)),Et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ia(this):this.bb())},t.bb=function(){Ia(this)};function Ia(h){if(h.h&&typeof u<"u"&&(!h.v[1]||Qi(h)!=4||h.Z()!=2)){if(h.u&&Qi(h)==4)Vt(h.Ea,0,h);else if(Fe(h,"readystatechange"),Qi(h)==4){h.h=!1;try{const be=h.Z();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var w;if(!(w=_)){var z;if(z=be===0){var re=String(h.D).match(Yi)[1]||null;!re&&f.self&&f.self.location&&(re=f.self.location.protocol.slice(0,-1)),z=!Ra.test(re?re.toLowerCase():"")}w=z}if(w)Fe(h,"complete"),Fe(h,"success");else{h.m=6;try{var ce=2<Qi(h)?h.g.statusText:""}catch{ce=""}h.l=ce+" ["+h.Z()+"]",xa(h)}}finally{Or(h)}}}}function Or(h,_){if(h.g){Uo(h);const w=h.g,z=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Fe(h,"ready");try{w.onreadystatechange=z}catch{}}}function Uo(h){h.I&&(f.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function Qi(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<Qi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Pt(_)}};function lf(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function fm(h){const _={};h=(h.g&&2<=Qi(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<h.length;z++){if(H(h[z]))continue;var w=U(h[z]);const re=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const ce=_[re]||[];_[re]=ce,ce.push(w)}R(_,function(z){return z.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bo(h,_,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||_}function Ca(h){this.Aa=0,this.i=[],this.j=new Qt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bo("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bo("baseRetryDelayMs",5e3,h),this.cb=Bo("retryDelaySeedMs",1e4,h),this.Wa=Bo("forwardChannelMaxRetries",2,h),this.wa=Bo("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new nn(h&&h.concurrentRequestLimit),this.Da=new Lo,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ca.prototype,t.la=8,t.G=1,t.connect=function(h,_,w,z){Rt(0),this.W=h,this.H=_||{},w&&z!==void 0&&(this.H.OSID=w,this.H.OAID=z),this.F=this.X,this.I=pf(this,null,this.W),Da(this)};function su(h){if(uf(h),h.G==3){var _=h.U++,w=Dt(h.I);if(ut(w,"SID",h.K),ut(w,"RID",_),ut(w,"TYPE","terminate"),jo(h,w),_=new yn(h,h.j,_),_.L=2,_.v=hr(Dt(w)),w=!1,f.navigator&&f.navigator.sendBeacon)try{w=f.navigator.sendBeacon(_.v.toString(),"")}catch{}!w&&f.Image&&(new Image().src=_.v,w=!0),w||(_.g=gf(_.j,null),_.g.ea(_.v)),_.F=Date.now(),yt(_)}mf(h)}function Na(h){h.g&&(Ho(h),h.g.cancel(),h.g=null)}function uf(h){Na(h),h.u&&(f.clearTimeout(h.u),h.u=null),Oa(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&f.clearTimeout(h.s),h.s=null)}function Da(h){if(!fi(h.h)&&!h.s){h.s=!0;var _=h.Ga;G||L(),ee||(G(),ee=!0),J.add(_,h),h.B=0}}function hm(h,_){return hi(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ut(E(h.Ga,h,_),lu(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const re=new yn(this,this.j,h);let ce=this.o;if(this.S&&(ce?(ce=T(ce),N(ce,this.S)):ce=this.S),this.m!==null||this.O||(re.H=ce,ce=null),this.P)e:{for(var _=0,w=0;w<this.i.length;w++){t:{var z=this.i[w];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(_+=z,4096<_){_=w;break e}if(_===4096||w===this.i.length-1){_=w+1;break e}}_=1e3}else _=1e3;_=cf(this,re,_),w=Dt(this.I),ut(w,"RID",h),ut(w,"CVER",22),this.D&&ut(w,"X-HTTP-Session-Id",this.D),jo(this,w),ce&&(this.O?_="headers="+encodeURIComponent(String(ru(ce)))+"&"+_:this.m&&Dn(w,this.m,ce)),Gi(this.h,re),this.Ua&&ut(w,"TYPE","init"),this.P?(ut(w,"$req",_),ut(w,"SID","null"),re.T=!0,Te(re,w,null)):Te(re,w,_),this.G=2}}else this.G==3&&(h?ou(this,h):this.i.length==0||fi(this.h)||ou(this))};function ou(h,_){var w;_?w=_.l:w=h.U++;const z=Dt(h.I);ut(z,"SID",h.K),ut(z,"RID",w),ut(z,"AID",h.T),jo(h,z),h.m&&h.o&&Dn(z,h.m,h.o),w=new yn(h,h.j,w,h.B+1),h.m===null&&(w.H=h.o),_&&(h.i=_.D.concat(h.i)),_=cf(h,w,1e3),w.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Gi(h.h,w),Te(w,z,_)}function jo(h,_){h.H&&Z(h.H,function(w,z){ut(_,z,w)}),h.l&&it({},function(w,z){ut(_,z,w)})}function cf(h,_,w){w=Math.min(h.i.length,w);var z=h.l?E(h.l.Na,h.l,h):null;e:{var re=h.i;let ce=-1;for(;;){const be=["count="+w];ce==-1?0<w?(ce=re[0].g,be.push("ofs="+ce)):ce=0:be.push("ofs="+ce);let st=!0;for(let vn=0;vn<w;vn++){let ot=re[vn].g;const On=re[vn].map;if(ot-=ce,0>ot)ce=Math.max(0,re[vn].g-100),st=!1;else try{Cr(On,be,"req"+ot+"_")}catch{z&&z(On)}}if(st){z=be.join("&");break e}}}return h=h.i.splice(0,w),_.D=h,z}function ff(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;G||L(),ee||(G(),ee=!0),J.add(_,h),h.v=0}}function au(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ut(E(h.Fa,h),lu(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,hf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ut(E(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rt(10),Na(this),hf(this))};function Ho(h){h.A!=null&&(f.clearTimeout(h.A),h.A=null)}function hf(h){h.g=new yn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=Dt(h.qa);ut(_,"RID","rpc"),ut(_,"SID",h.K),ut(_,"AID",h.T),ut(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&ut(_,"TO",h.ja),ut(_,"TYPE","xmlhttp"),jo(h,_),h.m&&h.o&&Dn(_,h.m,h.o),h.L&&(h.g.I=h.L);var w=h.g;h=h.ia,w.L=1,w.v=hr(Dt(_)),w.m=null,w.P=!0,Ze(w,h)}t.Za=function(){this.C!=null&&(this.C=null,Na(this),au(this),Rt(19))};function Oa(h){h.C!=null&&(f.clearTimeout(h.C),h.C=null)}function df(h,_){var w=null;if(h.g==_){Oa(h),Ho(h),h.g=null;var z=2}else if($i(h.h,_))w=_.D,Nn(h.h,_),z=1;else return;if(h.G!=0){if(_.o)if(z==1){w=_.m?_.m.length:0,_=Date.now()-_.F;var re=h.B;z=xi(),Fe(z,new gt(z,w)),Da(h)}else ff(h);else if(re=_.s,re==3||re==0&&0<_.X||!(z==1&&hm(h,_)||z==2&&au(h)))switch(w&&0<w.length&&(_=h.h,_.i=_.i.concat(w)),re){case 1:ts(h,5);break;case 4:ts(h,10);break;case 3:ts(h,6);break;default:ts(h,2)}}}function lu(h,_){let w=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(w*=2),w*_}function ts(h,_){if(h.j.info("Error code "+_),_==2){var w=E(h.fb,h),z=h.Xa;const re=!z;z=new Bt(z||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Un(z,"https"),hr(z),re?Po(z.toString(),w):dr(z.toString(),w)}else Rt(2);h.G=0,h.l&&h.l.sa(_),mf(h),uf(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function mf(h){if(h.G=0,h.ka=[],h.l){const _=ko(h.h);(_.length!=0||h.i.length!=0)&&(D(h.ka,_),D(h.ka,h.i),h.h.i.length=0,M(h.i),h.i.length=0),h.l.ra()}}function pf(h,_,w){var z=w instanceof Bt?Dt(w):new Bt(w);if(z.g!="")_&&(z.g=_+"."+z.g),Bn(z,z.s);else{var re=f.location;z=re.protocol,_=_?_+"."+re.hostname:re.hostname,re=+re.port;var ce=new Bt(null);z&&Un(ce,z),_&&(ce.g=_),re&&Bn(ce,re),w&&(ce.l=w),z=ce}return w=h.D,_=h.ya,w&&_&&ut(z,w,_),ut(z,"VER",h.la),jo(h,z),z}function gf(h,_,w){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new Et(new Ms({eb:w})):new Et(h.pa),_.Ha(h.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function yf(){}t=yf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ma(){}Ma.prototype.g=function(h,_){return new pi(h,_)};function pi(h,_){xe.call(this),this.g=new Ca(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!H(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!H(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Mr(this)}x(pi,xe),pi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pi.prototype.close=function(){su(this.g)},pi.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.u&&(w={},w.__data__=At(h),h=w);_.i.push(new Wt(_.Ya++,h)),_.G==3&&Da(_)},pi.prototype.N=function(){this.g.l=null,delete this.j,su(this.g),delete this.g,pi.aa.N.call(this)};function vf(h){oi.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const w in _){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}x(vf,oi);function _f(){Wn.call(this),this.status=1}x(_f,Wn);function Mr(h){this.g=h}x(Mr,yf),Mr.prototype.ua=function(){Fe(this.g,"a")},Mr.prototype.ta=function(h){Fe(this.g,new vf(h))},Mr.prototype.sa=function(h){Fe(this.g,new _f)},Mr.prototype.ra=function(){Fe(this.g,"b")},Ma.prototype.createWebChannel=Ma.prototype.g,pi.prototype.send=pi.prototype.o,pi.prototype.open=pi.prototype.m,pi.prototype.close=pi.prototype.close,zA=function(){return new Ma},LA=function(){return xi()},PA=_i,_y={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ci.NO_ERROR=0,Ci.TIMEOUT=8,Ci.HTTP_ERROR=6,qh=Ci,ui.COMPLETE="complete",VA=ui,Qn.EventType=gn,gn.OPEN="a",gn.CLOSE="b",gn.ERROR="c",gn.MESSAGE="d",xe.prototype.listen=xe.prototype.K,uc=Qn,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,kA=Et}).apply(typeof Dh<"u"?Dh:typeof self<"u"?self:typeof window<"u"?window:{});const aS="@firebase/firestore",lS="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ni.UNAUTHENTICATED=new ni(null),ni.GOOGLE_CREDENTIALS=new ni("google-credentials-uid"),ni.FIRST_PARTY=new ni("first-party-uid"),ni.MOCK_USER=new ni("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yl="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=new dv("@firebase/firestore");function vl(){return ya.logLevel}function Ae(t,...e){if(ya.logLevel<=tt.DEBUG){const n=e.map(gv);ya.debug(`Firestore (${Yl}): ${t}`,...n)}}function As(t,...e){if(ya.logLevel<=tt.ERROR){const n=e.map(gv);ya.error(`Firestore (${Yl}): ${t}`,...n)}}function zl(t,...e){if(ya.logLevel<=tt.WARN){const n=e.map(gv);ya.warn(`Firestore (${Yl}): ${t}`,...n)}}function gv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,UA(t,r,n)}function UA(t,e,n){let r=`FIRESTORE (${Yl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw As(r),new Error(r)}function wt(t,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,t||UA(e,o,r)}function Ge(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Cs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ni.UNAUTHENTICATED))}shutdown(){}}class rP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class sP{constructor(e){this.t=e,this.currentUser=ni.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){wt(this.o===void 0,42304);let r=this.i;const o=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let l=new Eo;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Eo,e.enqueueRetryable(()=>o(this.currentUser))};const u=()=>{const d=l;e.enqueueRetryable(async()=>{await d.promise,await o(this.currentUser)})},f=d=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(d=>f(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?f(d):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Eo)}},0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt(typeof r.accessToken=="string",31837,{l:r}),new BA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wt(e===null||typeof e=="string",2055,{h:e}),new ni(e)}}class oP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ni.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class aP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new oP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ni.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ar(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){wt(this.o===void 0,3512);const r=l=>{l.error!=null&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,Ae("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const o=l=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new uS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(wt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new uS(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=uP(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<n&&(r+=e.charAt(o[l]%62))}return r}}function Xe(t,e){return t<e?-1:t>e?1:0}function Ey(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),o=e.codePointAt(n);if(r!==o){if(r<128&&o<128)return Xe(r,o);{const l=jA(),u=cP(l.encode(cS(t,n)),l.encode(cS(e,n)));return u!==0?u:Xe(r,o)}}n+=r>65535?2:1}return Xe(t.length,e.length)}function cS(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function cP(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Xe(t[n],e[n]);return Xe(t.length,e.length)}function Ul(t,e,n){return t.length===e.length&&t.every((r,o)=>n(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=-62135596800,hS=1e6;class zt{static now(){return zt.fromMillis(Date.now())}static fromDate(e){return zt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*hS);return new zt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Re(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Re(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<fS)throw new Re(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hS}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-fS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{static fromTimestamp(e){return new qe(e)}static min(){return new qe(new zt(0,0))}static max(){return new qe(new zt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS="__name__";class jr{constructor(e,n,r){n===void 0?n=0:n>e.length&&Be(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Be(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return jr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof jr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const l=jr.compareSegments(e.get(o),n.get(o));if(l!==0)return l}return Xe(e.length,n.length)}static compareSegments(e,n){const r=jr.isNumericId(e),o=jr.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?jr.extractNumericId(e).compare(jr.extractNumericId(n)):Ey(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _o.fromString(e.substring(4,e.length-2))}}class Lt extends jr{construct(e,n,r){return new Lt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(o=>o.length>0))}return new Lt(n)}static emptyPath(){return new Lt([])}}const fP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kn extends jr{construct(e,n,r){return new Kn(e,n,r)}static isValidIdentifier(e){return fP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===dS}static keyField(){return new Kn([dS])}static fromServerFormat(e){const n=[];let r="",o=0;const l=()=>{if(r.length===0)throw new Re(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let u=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new Re(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[o+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Re(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,o+=2}else f==="`"?(u=!u,o++):f!=="."||u?(r+=f,o++):(l(),o++)}if(l(),u)throw new Re(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kn(n)}static emptyPath(){return new Kn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.path=e}static fromPath(e){return new ke(Lt.fromString(e))}static fromName(e){return new ke(Lt.fromString(e).popFirst(5))}static empty(){return new ke(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new Lt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc=-1;function hP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,o=qe.fromTimestamp(r===1e9?new zt(n+1,0):new zt(n,r));return new So(o,ke.empty(),e)}function dP(t){return new So(t.readTime,t.key,Nc)}class So{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new So(qe.min(),ke.empty(),Nc)}static max(){return new So(qe.max(),ke.empty(),Nc)}}function mP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ke.comparator(t.documentKey,e.documentKey),n!==0?n:Xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kl(t){if(t.code!==ge.FAILED_PRECONDITION||t.message!==pP)throw t;Ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ye((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(n,l).next(r,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ye?n:ye.resolve(n)}catch(n){return ye.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ye.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ye.reject(n)}static resolve(e){return new ye((n,r)=>{n(e)})}static reject(e){return new ye((n,r)=>{r(e)})}static waitFor(e){return new ye((n,r)=>{let o=0,l=0,u=!1;e.forEach(f=>{++o,f.next(()=>{++l,u&&l===o&&n()},d=>r(d))}),u=!0,l===o&&n()})}static or(e){let n=ye.resolve(!1);for(const r of e)n=n.next(o=>o?ye.resolve(o):r());return n}static forEach(e,n){const r=[];return e.forEach((o,l)=>{r.push(n.call(this,o,l))}),this.waitFor(r)}static mapArray(e,n){return new ye((r,o)=>{const l=e.length,u=new Array(l);let f=0;for(let d=0;d<l;d++){const p=d;n(e[p]).next(g=>{u[p]=g,++f,f===l&&r(u)},g=>o(g))}})}static doWhile(e,n){return new ye((r,o)=>{const l=()=>{e()===!0?n().next(()=>{l()},o):r()};l()})}}function yP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}jd.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=-1;function Hd(t){return t==null}function dd(t){return t===0&&1/t==-1/0}function vP(t){return typeof t=="number"&&Number.isInteger(t)&&!dd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA="";function _P(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=mS(e)),e=EP(t.get(n),e);return mS(e)}function EP(t,e){let n=e;const r=t.length;for(let o=0;o<r;o++){const l=t.charAt(o);switch(l){case"\0":n+="";break;case FA:n+="";break;default:n+=l}}return n}function mS(t){return t+FA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Co(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,n){this.comparator=e,this.root=n||Yn.EMPTY}insert(e,n){return new Gt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Yn.BLACK,null,null))}remove(e){return new Gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Oh(this.root,e,this.comparator,!0)}}class Oh{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?r(e.key,n):1,n&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yn{constructor(e,n,r,o,l){this.key=e,this.value=n,this.color=r??Yn.RED,this.left=o??Yn.EMPTY,this.right=l??Yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,l){return new Yn(e??this.key,n??this.value,r??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,n,r),null):l===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Yn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Be(27949);return e+(this.isRed()?0:1)}}Yn.EMPTY=null,Yn.RED=!0,Yn.BLACK=!1;Yn.EMPTY=new class{constructor(){this.size=0}get key(){throw Be(57766)}get value(){throw Be(16141)}get color(){throw Be(16727)}get left(){throw Be(29726)}get right(){throw Be(36894)}copy(e,n,r,o,l){return this}insert(e,n,r){return new Yn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.comparator=e,this.data=new Gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gS(this.data.getIterator())}getIteratorFrom(e){return new gS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof bn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,l=r.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new bn(this.comparator);return n.data=e,n}}class gS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.fields=e,e.sort(Kn.comparator)}static empty(){return new zi([])}unionWith(e){let n=new bn(Kn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ul(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new $A("Invalid base64 string: "+l):l}}(e);return new Xn(n)}static fromUint8Array(e){const n=function(o){let l="";for(let u=0;u<o.length;++u)l+=String.fromCharCode(o[u]);return l}(e);return new Xn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xn.EMPTY_BYTE_STRING=new Xn("");const wP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function To(t){if(wt(!!t,39018),typeof t=="string"){let e=0;const n=wP.exec(t);if(wt(!!n,46558,{timestamp:t}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:on(t.seconds),nanos:on(t.nanos)}}function on(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ao(t){return typeof t=="string"?Xn.fromBase64String(t):Xn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA="server_timestamp",YA="__type__",KA="__previous_value__",XA="__local_write_time__";function vv(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[YA])===null||n===void 0?void 0:n.stringValue)===GA}function Fd(t){const e=t.mapValue.fields[KA];return vv(e)?Fd(e):e}function Dc(t){const e=To(t.mapValue.fields[XA].timestampValue);return new zt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,n,r,o,l,u,f,d,p,g){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=g}}const md="(default)";class Oc{constructor(e,n){this.projectId=e,this.database=n||md}static empty(){return new Oc("","")}get isDefaultDatabase(){return this.database===md}isEqual(e){return e instanceof Oc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="__type__",SP="__max__",Mh={mapValue:{}},WA="__vector__",pd="value";function Ro(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?vv(t)?4:AP(t)?9007199254740991:TP(t)?10:11:Be(28295,{value:t})}function Yr(t,e){if(t===e)return!0;const n=Ro(t);if(n!==Ro(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Dc(t).isEqual(Dc(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const u=To(o.timestampValue),f=To(l.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(o,l){return Ao(o.bytesValue).isEqual(Ao(l.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(o,l){return on(o.geoPointValue.latitude)===on(l.geoPointValue.latitude)&&on(o.geoPointValue.longitude)===on(l.geoPointValue.longitude)}(t,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return on(o.integerValue)===on(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const u=on(o.doubleValue),f=on(l.doubleValue);return u===f?dd(u)===dd(f):isNaN(u)&&isNaN(f)}return!1}(t,e);case 9:return Ul(t.arrayValue.values||[],e.arrayValue.values||[],Yr);case 10:case 11:return function(o,l){const u=o.mapValue.fields||{},f=l.mapValue.fields||{};if(pS(u)!==pS(f))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(f[d]===void 0||!Yr(u[d],f[d])))return!1;return!0}(t,e);default:return Be(52216,{left:t})}}function Mc(t,e){return(t.values||[]).find(n=>Yr(n,e))!==void 0}function Bl(t,e){if(t===e)return 0;const n=Ro(t),r=Ro(e);if(n!==r)return Xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xe(t.booleanValue,e.booleanValue);case 2:return function(l,u){const f=on(l.integerValue||l.doubleValue),d=on(u.integerValue||u.doubleValue);return f<d?-1:f>d?1:f===d?0:isNaN(f)?isNaN(d)?0:-1:1}(t,e);case 3:return yS(t.timestampValue,e.timestampValue);case 4:return yS(Dc(t),Dc(e));case 5:return Ey(t.stringValue,e.stringValue);case 6:return function(l,u){const f=Ao(l),d=Ao(u);return f.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(l,u){const f=l.split("/"),d=u.split("/");for(let p=0;p<f.length&&p<d.length;p++){const g=Xe(f[p],d[p]);if(g!==0)return g}return Xe(f.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(l,u){const f=Xe(on(l.latitude),on(u.latitude));return f!==0?f:Xe(on(l.longitude),on(u.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return vS(t.arrayValue,e.arrayValue);case 10:return function(l,u){var f,d,p,g;const v=l.fields||{},E=u.fields||{},b=(f=v[pd])===null||f===void 0?void 0:f.arrayValue,x=(d=E[pd])===null||d===void 0?void 0:d.arrayValue,M=Xe(((p=b?.values)===null||p===void 0?void 0:p.length)||0,((g=x?.values)===null||g===void 0?void 0:g.length)||0);return M!==0?M:vS(b,x)}(t.mapValue,e.mapValue);case 11:return function(l,u){if(l===Mh.mapValue&&u===Mh.mapValue)return 0;if(l===Mh.mapValue)return 1;if(u===Mh.mapValue)return-1;const f=l.fields||{},d=Object.keys(f),p=u.fields||{},g=Object.keys(p);d.sort(),g.sort();for(let v=0;v<d.length&&v<g.length;++v){const E=Ey(d[v],g[v]);if(E!==0)return E;const b=Bl(f[d[v]],p[g[v]]);if(b!==0)return b}return Xe(d.length,g.length)}(t.mapValue,e.mapValue);default:throw Be(23264,{Pe:n})}}function yS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Xe(t,e);const n=To(t),r=To(e),o=Xe(n.seconds,r.seconds);return o!==0?o:Xe(n.nanos,r.nanos)}function vS(t,e){const n=t.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const l=Bl(n[o],r[o]);if(l)return l}return Xe(n.length,r.length)}function jl(t){return wy(t)}function wy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=To(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ao(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ke.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",o=!0;for(const l of n.values||[])o?o=!1:r+=",",r+=wy(l);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let o="{",l=!0;for(const u of r)l?l=!1:o+=",",o+=`${u}:${wy(n.fields[u])}`;return o+"}"}(t.mapValue):Be(61005,{value:t})}function $h(t){switch(Ro(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fd(t);return e?16+$h(e):16;case 5:return 2*t.stringValue.length;case 6:return Ao(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,l)=>o+$h(l),0)}(t.arrayValue);case 10:case 11:return function(r){let o=0;return Co(r.fields,(l,u)=>{o+=l.length+$h(u)}),o}(t.mapValue);default:throw Be(13486,{value:t})}}function _S(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function by(t){return!!t&&"integerValue"in t}function _v(t){return!!t&&"arrayValue"in t}function ES(t){return!!t&&"nullValue"in t}function wS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gh(t){return!!t&&"mapValue"in t}function TP(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[QA])===null||n===void 0?void 0:n.stringValue)===WA}function pc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Co(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=pc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function AP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===SP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this.value=e}static empty(){return new Ai({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Gh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pc(n)}setAll(e){let n=Kn.emptyPath(),r={},o=[];e.forEach((u,f)=>{if(!n.isImmediateParentOf(f)){const d=this.getFieldsMap(n);this.applyChanges(d,r,o),r={},o=[],n=f.popLast()}u?r[f.lastSegment()]=pc(u):o.push(f.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,r,o)}delete(e){const n=this.field(e.popLast());Gh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Yr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];Gh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){Co(n,(o,l)=>e[o]=l);for(const o of r)delete e[o]}clone(){return new Ai(pc(this.value))}}function ZA(t){const e=[];return Co(t.fields,(n,r)=>{const o=new Kn([n]);if(Gh(r)){const l=ZA(r.mapValue).fields;if(l.length===0)e.push(o);else for(const u of l)e.push(o.child(u))}else e.push(o)}),new zi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,n,r,o,l,u,f){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=l,this.data=u,this.documentState=f}static newInvalidDocument(e){return new ii(e,0,qe.min(),qe.min(),qe.min(),Ai.empty(),0)}static newFoundDocument(e,n,r,o){return new ii(e,1,n,qe.min(),r,o,0)}static newNoDocument(e,n){return new ii(e,2,n,qe.min(),qe.min(),Ai.empty(),0)}static newUnknownDocument(e,n){return new ii(e,3,n,qe.min(),qe.min(),Ai.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ai.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ai.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ii&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ii(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n){this.position=e,this.inclusive=n}}function bS(t,e,n){let r=0;for(let o=0;o<t.position.length;o++){const l=e[o],u=t.position[o];if(l.field.isKeyField()?r=ke.comparator(ke.fromName(u.referenceValue),n.key):r=Bl(u,n.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function SS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Yr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n="asc"){this.field=e,this.dir=n}}function RP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{}class hn extends JA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new IP(e,n,r):n==="array-contains"?new DP(e,r):n==="in"?new OP(e,r):n==="not-in"?new MP(e,r):n==="array-contains-any"?new kP(e,r):new hn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new CP(e,r):new NP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Bl(n,this.value)):n!==null&&Ro(this.value)===Ro(n)&&this.matchesComparison(Bl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wr extends JA{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new wr(e,n)}matches(e){return eR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function eR(t){return t.op==="and"}function tR(t){return xP(t)&&eR(t)}function xP(t){for(const e of t.filters)if(e instanceof wr)return!1;return!0}function Sy(t){if(t instanceof hn)return t.field.canonicalString()+t.op.toString()+jl(t.value);if(tR(t))return t.filters.map(e=>Sy(e)).join(",");{const e=t.filters.map(n=>Sy(n)).join(",");return`${t.op}(${e})`}}function nR(t,e){return t instanceof hn?function(r,o){return o instanceof hn&&r.op===o.op&&r.field.isEqual(o.field)&&Yr(r.value,o.value)}(t,e):t instanceof wr?function(r,o){return o instanceof wr&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((l,u,f)=>l&&nR(u,o.filters[f]),!0):!1}(t,e):void Be(19439)}function iR(t){return t instanceof hn?function(n){return`${n.field.canonicalString()} ${n.op} ${jl(n.value)}`}(t):t instanceof wr?function(n){return n.op.toString()+" {"+n.getFilters().map(iR).join(" ,")+"}"}(t):"Filter"}class IP extends hn{constructor(e,n,r){super(e,n,r),this.key=ke.fromName(r.referenceValue)}matches(e){const n=ke.comparator(e.key,this.key);return this.matchesComparison(n)}}class CP extends hn{constructor(e,n){super(e,"in",n),this.keys=rR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class NP extends hn{constructor(e,n){super(e,"not-in",n),this.keys=rR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function rR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ke.fromName(r.referenceValue))}class DP extends hn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return _v(n)&&Mc(n.arrayValue,this.value)}}class OP extends hn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Mc(this.value.arrayValue,n)}}class MP extends hn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Mc(this.value.arrayValue,n)}}class kP extends hn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!_v(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Mc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,n=null,r=[],o=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=u,this.endAt=f,this.Ie=null}}function TS(t,e=null,n=[],r=[],o=null,l=null,u=null){return new VP(t,e,n,r,o,l,u)}function Ev(t){const e=Ge(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Sy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),Hd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>jl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>jl(r)).join(",")),e.Ie=n}return e.Ie}function wv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!RP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!nR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!SS(t.startAt,e.startAt)&&SS(t.endAt,e.endAt)}function Ty(t){return ke.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n=null,r=[],o=[],l=null,u="F",f=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=d,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function PP(t,e,n,r,o,l,u,f){return new Ql(t,e,n,r,o,l,u,f)}function sR(t){return new Ql(t)}function AS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function oR(t){return t.collectionGroup!==null}function gc(t){const e=Ge(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),n.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new bn(Kn.comparator);return u.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(f=f.add(p.field))})}),f})(e).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new kc(l,r))}),n.has(Kn.keyField().canonicalString())||e.Ee.push(new kc(Kn.keyField(),r))}return e.Ee}function Fr(t){const e=Ge(t);return e.de||(e.de=LP(e,gc(t))),e.de}function LP(t,e){if(t.limitType==="F")return TS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new kc(o.field,l)});const n=t.endAt?new gd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new gd(t.startAt.position,t.startAt.inclusive):null;return TS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ay(t,e){const n=t.filters.concat([e]);return new Ql(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ry(t,e,n){return new Ql(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qd(t,e){return wv(Fr(t),Fr(e))&&t.limitType===e.limitType}function aR(t){return`${Ev(Fr(t))}|lt:${t.limitType}`}function _l(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(o=>iR(o)).join(", ")}]`),Hd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(o=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(o)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(o=>jl(o)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(o=>jl(o)).join(",")),`Target(${r})`}(Fr(t))}; limitType=${t.limitType})`}function $d(t,e){return e.isFoundDocument()&&function(r,o){const l=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ke.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(t,e)&&function(r,o){for(const l of gc(r))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(t,e)&&function(r,o){for(const l of r.filters)if(!l.matches(o))return!1;return!0}(t,e)&&function(r,o){return!(r.startAt&&!function(u,f,d){const p=bS(u,f,d);return u.inclusive?p<=0:p<0}(r.startAt,gc(r),o)||r.endAt&&!function(u,f,d){const p=bS(u,f,d);return u.inclusive?p>=0:p>0}(r.endAt,gc(r),o))}(t,e)}function zP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lR(t){return(e,n)=>{let r=!1;for(const o of gc(t)){const l=UP(o,e,n);if(l!==0)return l;r=r||o.field.isKeyField()}return 0}}function UP(t,e,n){const r=t.field.isKeyField()?ke.comparator(e.key,n.key):function(l,u,f){const d=u.data.field(l),p=f.data.field(l);return d!==null&&p!==null?Bl(d,p):Be(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Be(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,l]of r)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Co(this.inner,(n,r)=>{for(const[o,l]of r)e(o,l)})}isEmpty(){return qA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=new Gt(ke.comparator);function Rs(){return BP}const uR=new Gt(ke.comparator);function cc(...t){let e=uR;for(const n of t)e=e.insert(n.key,n);return e}function cR(t){let e=uR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function fa(){return yc()}function fR(){return yc()}function yc(){return new ba(t=>t.toString(),(t,e)=>t.isEqual(e))}const jP=new Gt(ke.comparator),HP=new bn(ke.comparator);function nt(...t){let e=HP;for(const n of t)e=e.add(n);return e}const FP=new bn(Xe);function qP(){return FP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dd(e)?"-0":e}}function hR(t){return{integerValue:""+t}}function $P(t,e){return vP(e)?hR(e):bv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(){this._=void 0}}function GP(t,e,n){return t instanceof yd?function(o,l){const u={fields:{[YA]:{stringValue:GA},[XA]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&vv(l)&&(l=Fd(l)),l&&(u.fields[KA]=l),{mapValue:u}}(n,e):t instanceof Vc?mR(t,e):t instanceof Pc?pR(t,e):function(o,l){const u=dR(o,l),f=RS(u)+RS(o.Re);return by(u)&&by(o.Re)?hR(f):bv(o.serializer,f)}(t,e)}function YP(t,e,n){return t instanceof Vc?mR(t,e):t instanceof Pc?pR(t,e):n}function dR(t,e){return t instanceof vd?function(r){return by(r)||function(l){return!!l&&"doubleValue"in l}(r)}(e)?e:{integerValue:0}:null}class yd extends Gd{}class Vc extends Gd{constructor(e){super(),this.elements=e}}function mR(t,e){const n=gR(e);for(const r of t.elements)n.some(o=>Yr(o,r))||n.push(r);return{arrayValue:{values:n}}}class Pc extends Gd{constructor(e){super(),this.elements=e}}function pR(t,e){let n=gR(e);for(const r of t.elements)n=n.filter(o=>!Yr(o,r));return{arrayValue:{values:n}}}class vd extends Gd{constructor(e,n){super(),this.serializer=e,this.Re=n}}function RS(t){return on(t.integerValue||t.doubleValue)}function gR(t){return _v(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function KP(t,e){return t.field.isEqual(e.field)&&function(r,o){return r instanceof Vc&&o instanceof Vc||r instanceof Pc&&o instanceof Pc?Ul(r.elements,o.elements,Yr):r instanceof vd&&o instanceof vd?Yr(r.Re,o.Re):r instanceof yd&&o instanceof yd}(t.transform,e.transform)}class XP{constructor(e,n){this.version=e,this.transformResults=n}}class Ui{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ui}static exists(e){return new Ui(void 0,e)}static updateTime(e){return new Ui(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Yd{}function yR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Kd(t.key,Ui.none()):new Kc(t.key,t.data,Ui.none());{const n=t.data,r=Ai.empty();let o=new bn(Kn.comparator);for(let l of e.fields)if(!o.has(l)){let u=n.field(l);u===null&&l.length>1&&(l=l.popLast(),u=n.field(l)),u===null?r.delete(l):r.set(l,u),o=o.add(l)}return new No(t.key,r,new zi(o.toArray()),Ui.none())}}function QP(t,e,n){t instanceof Kc?function(o,l,u){const f=o.value.clone(),d=IS(o.fieldTransforms,l,u.transformResults);f.setAll(d),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(t,e,n):t instanceof No?function(o,l,u){if(!Yh(o.precondition,l))return void l.convertToUnknownDocument(u.version);const f=IS(o.fieldTransforms,l,u.transformResults),d=l.data;d.setAll(vR(o)),d.setAll(f),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(t,e,n):function(o,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,n)}function vc(t,e,n,r){return t instanceof Kc?function(l,u,f,d){if(!Yh(l.precondition,u))return f;const p=l.value.clone(),g=CS(l.fieldTransforms,d,u);return p.setAll(g),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null}(t,e,n,r):t instanceof No?function(l,u,f,d){if(!Yh(l.precondition,u))return f;const p=CS(l.fieldTransforms,d,u),g=u.data;return g.setAll(vR(l)),g.setAll(p),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(v=>v.field))}(t,e,n,r):function(l,u,f){return Yh(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f}(t,e,n)}function WP(t,e){let n=null;for(const r of t.fieldTransforms){const o=e.data.field(r.field),l=dR(r.transform,o||null);l!=null&&(n===null&&(n=Ai.empty()),n.set(r.field,l))}return n||null}function xS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Ul(r,o,(l,u)=>KP(l,u))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Kc extends Yd{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class No extends Yd{constructor(e,n,r,o,l=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function vR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function IS(t,e,n){const r=new Map;wt(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let o=0;o<n.length;o++){const l=t[o],u=l.transform,f=e.data.field(l.field);r.set(l.field,YP(u,f,n[o]))}return r}function CS(t,e,n){const r=new Map;for(const o of t){const l=o.transform,u=n.data.field(o.field);r.set(o.field,GP(l,u,e))}return r}class Kd extends Yd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZP extends Yd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&QP(l,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=vc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=vc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=fR();return this.mutations.forEach(o=>{const l=e.get(o.key),u=l.overlayedDocument;let f=this.applyToLocalView(u,l.mutatedFields);f=n.has(o.key)?null:f;const d=yR(u,f);d!==null&&r.set(o.key,d),u.isValidDocument()||u.convertToNoDocument(qe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),nt())}isEqual(e){return this.batchId===e.batchId&&Ul(this.mutations,e.mutations,(n,r)=>xS(n,r))&&Ul(this.baseMutations,e.baseMutations,(n,r)=>xS(n,r))}}class Sv{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){wt(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let o=function(){return jP}();const l=e.mutations;for(let u=0;u<l.length;u++)o=o.insert(l[u].key,r[u].version);return new Sv(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fn,lt;function nL(t){switch(t){case ge.OK:return Be(64938);case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0;default:return Be(15467,{code:t})}}function _R(t){if(t===void 0)return As("GRPC error has no .code"),ge.UNKNOWN;switch(t){case fn.OK:return ge.OK;case fn.CANCELLED:return ge.CANCELLED;case fn.UNKNOWN:return ge.UNKNOWN;case fn.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case fn.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case fn.INTERNAL:return ge.INTERNAL;case fn.UNAVAILABLE:return ge.UNAVAILABLE;case fn.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case fn.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case fn.NOT_FOUND:return ge.NOT_FOUND;case fn.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case fn.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case fn.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case fn.ABORTED:return ge.ABORTED;case fn.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case fn.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case fn.DATA_LOSS:return ge.DATA_LOSS;default:return Be(39323,{code:t})}}(lt=fn||(fn={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=new _o([4294967295,4294967295],0);function NS(t){const e=jA().encode(t),n=new MA;return n.update(e),new Uint8Array(n.digest())}function DS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new _o([n,r],0),new _o([o,l],0)]}class Tv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new fc(`Invalid padding: ${n}`);if(r<0)throw new fc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new fc(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=_o.fromNumber(this.pe)}we(e,n,r){let o=e.add(n.multiply(_o.fromNumber(r)));return o.compare(iL)===1&&(o=new _o([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=NS(e),[r,o]=DS(n);for(let l=0;l<this.hashCount;l++){const u=this.we(r,o,l);if(!this.be(u))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Tv(l,o,n);return r.forEach(f=>u.insert(f)),u}insert(e){if(this.pe===0)return;const n=NS(e),[r,o]=DS(n);for(let l=0;l<this.hashCount;l++){const u=this.we(r,o,l);this.Se(u)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class fc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n,r,o,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,Xc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Xd(qe.min(),o,new Gt(Xe),Rs(),nt())}}class Xc{constructor(e,n,r,o,l){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Xc(r,n,nt(),nt(),nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n,r,o){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=o}}class ER{constructor(e,n){this.targetId=e,this.Ce=n}}class wR{constructor(e,n,r=Xn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class OS{constructor(){this.Fe=0,this.Me=MS(),this.xe=Xn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=nt(),n=nt(),r=nt();return this.Me.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Be(38017,{changeType:l})}}),new Xc(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=MS()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,wt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class rL{constructor(e){this.ze=e,this.je=new Map,this.He=Rs(),this.Je=kh(),this.Ye=kh(),this.Ze=new Gt(Xe)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:Be(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,o)=>{this.it(o)&&n(o)})}ot(e){const n=e.targetId,r=e.Ce.count,o=this._t(n);if(o){const l=o.target;if(Ty(l))if(r===0){const u=new ke(l.path);this.tt(n,u,ii.newNoDocument(u,qe.min()))}else wt(r===1,20013,{expectedCount:r});else{const u=this.ut(n);if(u!==r){const f=this.ct(e),d=f?this.lt(f,e,u):1;if(d!==0){this.st(n);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,p)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:l=0}=n;let u,f;try{u=Ao(r).toUint8Array()}catch(d){if(d instanceof $A)return zl("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{f=new Tv(u,o,l)}catch(d){return zl(d instanceof fc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return f.pe===0?null:f}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let o=0;return r.forEach(l=>{const u=this.ze.Pt(),f=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.tt(n,l,null),o++)}),o}It(e){const n=new Map;this.je.forEach((l,u)=>{const f=this._t(u);if(f){if(l.current&&Ty(f.target)){const d=new ke(f.target.path);this.Et(d).has(u)||this.dt(u,d)||this.tt(u,d,ii.newNoDocument(d,e))}l.Le&&(n.set(u,l.qe()),l.Qe())}});let r=nt();this.Ye.forEach((l,u)=>{let f=!0;u.forEachWhile(d=>{const p=this._t(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(r=r.add(l))}),this.He.forEach((l,u)=>u.setReadTime(e));const o=new Xd(e,n,this.Ze,this.He,r);return this.He=Rs(),this.Je=kh(),this.Ye=kh(),this.Ze=new Gt(Xe),o}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const o=this.rt(e);this.dt(e,n)?o.$e(n,1):o.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new OS,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new bn(Xe),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new bn(Xe),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||Ae("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new OS),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function kh(){return new Gt(ke.comparator)}function MS(){return new Gt(ke.comparator)}const sL={asc:"ASCENDING",desc:"DESCENDING"},oL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aL={and:"AND",or:"OR"};class lL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function xy(t,e){return t.useProto3Json||Hd(e)?e:{value:e}}function _d(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function uL(t,e){return _d(t,e.toTimestamp())}function qr(t){return wt(!!t,49232),qe.fromTimestamp(function(n){const r=To(n);return new zt(r.seconds,r.nanos)}(t))}function Av(t,e){return Iy(t,e).canonicalString()}function Iy(t,e){const n=function(o){return new Lt(["projects",o.projectId,"databases",o.database])}(t).child("documents");return e===void 0?n:n.child(e)}function SR(t){const e=Lt.fromString(t);return wt(IR(e),10190,{key:e.toString()}),e}function Cy(t,e){return Av(t.databaseId,e.path)}function kg(t,e){const n=SR(e);if(n.get(1)!==t.databaseId.projectId)throw new Re(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Re(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ke(AR(n))}function TR(t,e){return Av(t.databaseId,e)}function cL(t){const e=SR(t);return e.length===4?Lt.emptyPath():AR(e)}function Ny(t){return new Lt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function AR(t){return wt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function kS(t,e,n){return{name:Cy(t,e),fields:n.value.mapValue.fields}}function fL(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Be(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(p,g){return p.useProto3Json?(wt(g===void 0||typeof g=="string",58123),Xn.fromBase64String(g||"")):(wt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Xn.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&function(p){const g=p.code===void 0?ge.UNKNOWN:_R(p.code);return new Re(g,p.message||"")}(u);n=new wR(r,o,l,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=kg(t,r.document.name),l=qr(r.document.updateTime),u=r.document.createTime?qr(r.document.createTime):qe.min(),f=new Ai({mapValue:{fields:r.document.fields}}),d=ii.newFoundDocument(o,l,u,f),p=r.targetIds||[],g=r.removedTargetIds||[];n=new Kh(p,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=kg(t,r.document),l=r.readTime?qr(r.readTime):qe.min(),u=ii.newNoDocument(o,l),f=r.removedTargetIds||[];n=new Kh([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=kg(t,r.document),l=r.removedTargetIds||[];n=new Kh([],l,o,null)}else{if(!("filter"in e))return Be(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:l}=r,u=new tL(o,l),f=r.targetId;n=new ER(f,u)}}return n}function hL(t,e){let n;if(e instanceof Kc)n={update:kS(t,e.key,e.value)};else if(e instanceof Kd)n={delete:Cy(t,e.key)};else if(e instanceof No)n={update:kS(t,e.key,e.data),updateMask:wL(e.fieldMask)};else{if(!(e instanceof ZP))return Be(16599,{ft:e.type});n={verify:Cy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(l,u){const f=u.transform;if(f instanceof yd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Vc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Pc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof vd)return{fieldPath:u.field.canonicalString(),increment:f.Re};throw Be(20930,{transform:u.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:uL(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Be(27497)}(t,e.precondition)),n}function dL(t,e){return t&&t.length>0?(wt(e!==void 0,14353),t.map(n=>function(o,l){let u=o.updateTime?qr(o.updateTime):qr(l);return u.isEqual(qe.min())&&(u=qr(l)),new XP(u,o.transformResults||[])}(n,e))):[]}function mL(t,e){return{documents:[TR(t,e.path)]}}function pL(t,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=TR(t,o);const l=function(p){if(p.length!==0)return xR(wr.create(p,"and"))}(e.filters);l&&(n.structuredQuery.where=l);const u=function(p){if(p.length!==0)return p.map(g=>function(E){return{field:El(E.field),direction:vL(E.dir)}}(g))}(e.orderBy);u&&(n.structuredQuery.orderBy=u);const f=xy(t,e.limit);return f!==null&&(n.structuredQuery.limit=f),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{gt:n,parent:o}}function gL(t){let e=cL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){wt(r===1,65062);const g=n.from[0];g.allDescendants?o=g.collectionId:e=e.child(g.collectionId)}let l=[];n.where&&(l=function(v){const E=RR(v);return E instanceof wr&&tR(E)?E.getFilters():[E]}(n.where));let u=[];n.orderBy&&(u=function(v){return v.map(E=>function(x){return new kc(wl(x.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(E))}(n.orderBy));let f=null;n.limit&&(f=function(v){let E;return E=typeof v=="object"?v.value:v,Hd(E)?null:E}(n.limit));let d=null;n.startAt&&(d=function(v){const E=!!v.before,b=v.values||[];return new gd(b,E)}(n.startAt));let p=null;return n.endAt&&(p=function(v){const E=!v.before,b=v.values||[];return new gd(b,E)}(n.endAt)),PP(e,o,u,l,f,"F",d,p)}function yL(t,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function RR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=wl(n.unaryFilter.field);return hn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=wl(n.unaryFilter.field);return hn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=wl(n.unaryFilter.field);return hn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=wl(n.unaryFilter.field);return hn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Be(61313);default:return Be(60726)}}(t):t.fieldFilter!==void 0?function(n){return hn.create(wl(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Be(58110);default:return Be(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return wr.create(n.compositeFilter.filters.map(r=>RR(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Be(1026)}}(n.compositeFilter.op))}(t):Be(30097,{filter:t})}function vL(t){return sL[t]}function _L(t){return oL[t]}function EL(t){return aL[t]}function El(t){return{fieldPath:t.canonicalString()}}function wl(t){return Kn.fromServerFormat(t.fieldPath)}function xR(t){return t instanceof hn?function(n){if(n.op==="=="){if(wS(n.value))return{unaryFilter:{field:El(n.field),op:"IS_NAN"}};if(ES(n.value))return{unaryFilter:{field:El(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(wS(n.value))return{unaryFilter:{field:El(n.field),op:"IS_NOT_NAN"}};if(ES(n.value))return{unaryFilter:{field:El(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:El(n.field),op:_L(n.op),value:n.value}}}(t):t instanceof wr?function(n){const r=n.getFilters().map(o=>xR(o));return r.length===1?r[0]:{compositeFilter:{op:EL(n.op),filters:r}}}(t):Be(54877,{filter:t})}function wL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function IR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n,r,o,l=qe.min(),u=qe.min(),f=Xn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=d}withSequenceNumber(e){return new ho(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e){this.wt=e}}function SL(t){const e=gL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ry(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(){this.Cn=new AL}addToCollectionParentIndex(e,n){return this.Cn.add(n),ye.resolve()}getCollectionParents(e,n){return ye.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ye.resolve()}deleteFieldIndex(e,n){return ye.resolve()}deleteAllFieldIndexes(e){return ye.resolve()}createTargetIndexes(e,n){return ye.resolve()}getDocumentsMatchingTarget(e,n){return ye.resolve(null)}getIndexType(e,n){return ye.resolve(0)}getFieldIndexes(e,n){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}getMinOffset(e,n){return ye.resolve(So.min())}getMinOffsetFromCollectionGroup(e,n){return ye.resolve(So.min())}updateCollectionGroup(e,n,r){return ye.resolve()}updateIndexEntries(e,n){return ye.resolve()}}class AL{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new bn(Lt.comparator),l=!o.has(r);return this.index[n]=o.add(r),l}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new bn(Lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},CR=41943040;class Ti{static withCacheSize(e){return new Ti(e,Ti.DEFAULT_COLLECTION_PERCENTILE,Ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ti.DEFAULT_COLLECTION_PERCENTILE=10,Ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ti.DEFAULT=new Ti(CR,Ti.DEFAULT_COLLECTION_PERCENTILE,Ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ti.DISABLED=new Ti(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Hl(0)}static lr(){return new Hl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS="LruGarbageCollector",RL=1048576;function LS([t,e],[n,r]){const o=Xe(t,n);return o===0?Xe(e,r):o}class xL{constructor(e){this.Er=e,this.buffer=new bn(LS),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();LS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class IL{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Ae(PS,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xl(n)?Ae(PS,"Ignoring IndexedDB error during garbage collection: ",n):await Kl(n)}await this.mr(3e5)})}}class CL{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ye.resolve(jd.le);const r=new xL(n);return this.gr.forEachTarget(e,o=>r.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>r.Rr(o))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(VS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),VS):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,o,l,u,f,d,p;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),o=this.params.maximumSequenceNumbersToCollect):o=v,u=Date.now(),this.nthSequenceNumber(e,o))).next(v=>(r=v,f=Date.now(),this.removeTargets(e,r,n))).next(v=>(l=v,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(p=Date.now(),vl()<=tt.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-g}ms
	Determined least recently used ${o} in `+(f-u)+`ms
	Removed ${l} targets in `+(d-f)+`ms
	Removed ${v} documents in `+(p-d)+`ms
Total Duration: ${p-g}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:v})))}}function NL(t,e){return new CL(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(){this.changes=new ba(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ii.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ye.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(r!==null&&vc(r.mutation,o,zi.empty(),zt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,nt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=nt()){const o=fa();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,r).next(l=>{let u=cc();return l.forEach((f,d)=>{u=u.insert(f,d.overlayedDocument)}),u}))}getOverlayedDocuments(e,n){const r=fa();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,nt()))}populateOverlays(e,n,r){const o=[];return r.forEach(l=>{n.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((u,f)=>{n.set(u,f)})})}computeViews(e,n,r,o){let l=Rs();const u=yc(),f=function(){return yc()}();return n.forEach((d,p)=>{const g=r.get(p.key);o.has(p.key)&&(g===void 0||g.mutation instanceof No)?l=l.insert(p.key,p):g!==void 0?(u.set(p.key,g.mutation.getFieldMask()),vc(g.mutation,p,g.mutation.getFieldMask(),zt.now())):u.set(p.key,zi.empty())}),this.recalculateAndSaveOverlays(e,l).next(d=>(d.forEach((p,g)=>u.set(p,g)),n.forEach((p,g)=>{var v;return f.set(p,new OL(g,(v=u.get(p))!==null&&v!==void 0?v:null))}),f))}recalculateAndSaveOverlays(e,n){const r=yc();let o=new Gt((u,f)=>u-f),l=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(u=>{for(const f of u)f.keys().forEach(d=>{const p=n.get(d);if(p===null)return;let g=r.get(d)||zi.empty();g=f.applyToLocalView(p,g),r.set(d,g);const v=(o.get(f.batchId)||nt()).add(d);o=o.insert(f.batchId,v)})}).next(()=>{const u=[],f=o.getReverseIterator();for(;f.hasNext();){const d=f.getNext(),p=d.key,g=d.value,v=fR();g.forEach(E=>{if(!l.has(E)){const b=yR(n.get(E),r.get(E));b!==null&&v.set(E,b),l=l.add(E)}}),u.push(this.documentOverlayCache.saveOverlays(e,p,v))}return ye.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,o){return function(u){return ke.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):oR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next(l=>{const u=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-l.size):ye.resolve(fa());let f=Nc,d=l;return u.next(p=>ye.forEach(p,(g,v)=>(f<v.largestBatchId&&(f=v.largestBatchId),l.get(g)?ye.resolve():this.remoteDocumentCache.getEntry(e,g).next(E=>{d=d.insert(g,E)}))).next(()=>this.populateOverlays(e,p,l)).next(()=>this.computeViews(e,d,p,nt())).next(g=>({batchId:f,changes:cR(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ke(n)).next(r=>{let o=cc();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const l=n.collectionGroup;let u=cc();return this.indexManager.getCollectionParents(e,l).next(f=>ye.forEach(f,d=>{const p=function(v,E){return new Ql(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,d.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,r,o).next(g=>{g.forEach((v,E)=>{u=u.insert(v,E)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,n,r,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,l,o))).next(u=>{l.forEach((d,p)=>{const g=p.getKey();u.get(g)===null&&(u=u.insert(g,ii.newInvalidDocument(g)))});let f=cc();return u.forEach((d,p)=>{const g=l.get(d);g!==void 0&&vc(g.mutation,p,zi.empty(),zt.now()),$d(n,p)&&(f=f.insert(d,p))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return ye.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:qr(o.createTime)}}(n)),ye.resolve()}getNamedQuery(e,n){return ye.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(o){return{name:o.name,query:SL(o.bundledQuery),readTime:qr(o.readTime)}}(n)),ye.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(){this.overlays=new Gt(ke.comparator),this.Qr=new Map}getOverlay(e,n){return ye.resolve(this.overlays.get(n))}getOverlays(e,n){const r=fa();return ye.forEach(n,o=>this.getOverlay(e,o).next(l=>{l!==null&&r.set(o,l)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((o,l)=>{this.St(e,n,l)}),ye.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.Qr.get(r);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(r)),ye.resolve()}getOverlaysForCollection(e,n,r){const o=fa(),l=n.length+1,u=new ke(n.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const d=f.getNext().value,p=d.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===l&&d.largestBatchId>r&&o.set(d.getKey(),d)}return ye.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let l=new Gt((p,g)=>p-g);const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let g=l.get(p.largestBatchId);g===null&&(g=fa(),l=l.insert(p.largestBatchId,g)),g.set(p.getKey(),p)}}const f=fa(),d=l.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,g)=>f.set(p,g)),!(f.size()>=o)););return ye.resolve(f)}St(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const u=this.Qr.get(o.largestBatchId).delete(r.key);this.Qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new eL(n,r));let l=this.Qr.get(n);l===void 0&&(l=nt(),this.Qr.set(n,l)),this.Qr.set(n,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(){this.sessionToken=Xn.EMPTY_BYTE_STRING}getSessionToken(e){return ye.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ye.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(){this.$r=new bn(Pn.Ur),this.Kr=new bn(Pn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new Pn(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new Pn(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new ke(new Lt([])),r=new Pn(n,e),o=new Pn(n,e+1),l=[];return this.Kr.forEachInRange([r,o],u=>{this.zr(u),l.push(u.key)}),l}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new ke(new Lt([])),r=new Pn(n,e),o=new Pn(n,e+1);let l=nt();return this.Kr.forEachInRange([r,o],u=>{l=l.add(u.key)}),l}containsKey(e){const n=new Pn(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Pn{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return ke.comparator(e.key,n.key)||Xe(e.Zr,n.Zr)}static Wr(e,n){return Xe(e.Zr,n.Zr)||ke.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new bn(Pn.Ur)}checkEmpty(e){return ye.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new JP(l,n,r,o);this.mutationQueue.push(u);for(const f of o)this.Xr=this.Xr.add(new Pn(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ye.resolve(u)}lookupMutationBatch(e,n){return ye.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.ti(r),l=o<0?0:o;return ye.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(this.mutationQueue.length===0?yv:this.nr-1)}getAllMutationBatches(e){return ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Pn(n,0),o=new Pn(n,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([r,o],u=>{const f=this.ei(u.Zr);l.push(f)}),ye.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new bn(Xe);return n.forEach(o=>{const l=new Pn(o,0),u=new Pn(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,u],f=>{r=r.add(f.Zr)})}),ye.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let l=r;ke.isDocumentKey(l)||(l=l.child(""));const u=new Pn(new ke(l),0);let f=new bn(Xe);return this.Xr.forEachWhile(d=>{const p=d.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(f=f.add(d.Zr)),!0)},u),ye.resolve(this.ni(f))}ni(e){const n=[];return e.forEach(r=>{const o=this.ei(r);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){wt(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return ye.forEach(n.mutations,o=>{const l=new Pn(o.key,n.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new Pn(n,0),o=this.Xr.firstAfterOrEqual(r);return ye.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ye.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e){this.ii=e,this.docs=function(){return new Gt(ke.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),l=o?o.size:0,u=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ye.resolve(r?r.document.mutableCopy():ii.newInvalidDocument(n))}getEntries(e,n){let r=Rs();return n.forEach(o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():ii.newInvalidDocument(o))}),ye.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let l=Rs();const u=n.path,f=new ke(u.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(f);for(;d.hasNext();){const{key:p,value:{document:g}}=d.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||mP(dP(g),r)<=0||(o.has(g.key)||$d(n,g))&&(l=l.insert(g.key,g.mutableCopy()))}return ye.resolve(l)}getAllFromCollectionGroup(e,n,r,o){Be(9500)}si(e,n){return ye.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new UL(this)}getSize(e){return ye.resolve(this.size)}}class UL extends DL{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?n.push(this.Br.addEntry(e,o)):this.Br.removeEntry(r)}),ye.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e){this.persistence=e,this.oi=new ba(n=>Ev(n),wv),this.lastRemoteSnapshotVersion=qe.min(),this.highestTargetId=0,this._i=0,this.ai=new Rv,this.targetCount=0,this.ui=Hl.cr()}forEachTarget(e,n){return this.oi.forEach((r,o)=>n(o)),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),ye.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Hl(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,ye.resolve()}updateTargetData(e,n){return this.Tr(n),ye.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,n,r){let o=0;const l=[];return this.oi.forEach((u,f)=>{f.sequenceNumber<=n&&r.get(f.targetId)===null&&(this.oi.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)}),ye.waitFor(l).next(()=>o)}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return ye.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),ye.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const o=this.persistence.referenceDelegate,l=[];return o&&n.forEach(u=>{l.push(o.markPotentiallyOrphaned(e,u))}),ye.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),ye.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return ye.resolve(r)}containsKey(e,n){return ye.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n){this.ci={},this.overlays={},this.li=new jd(0),this.hi=!1,this.hi=!0,this.Pi=new PL,this.referenceDelegate=e(this),this.Ti=new BL(this),this.indexManager=new TL,this.remoteDocumentCache=function(o){return new zL(o)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new bL(n),this.Ei=new kL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new VL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new LL(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){Ae("MemoryPersistence","Starting transaction:",e);const o=new jL(this.li.next());return this.referenceDelegate.di(),r(o).next(l=>this.referenceDelegate.Ai(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ri(e,n){return ye.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class jL extends gP{constructor(e){super(),this.currentSequenceNumber=e}}class xv{constructor(e){this.persistence=e,this.Vi=new Rv,this.mi=null}static fi(e){return new xv(e)}get gi(){if(this.mi)return this.mi;throw Be(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),ye.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),ye.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),ye.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(o=>this.gi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(l=>this.gi.add(l.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.gi,r=>{const o=ke.fromPath(r);return this.pi(e,o).next(l=>{l||n.removeEntry(o,qe.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return ye.or([()=>ye.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Ed{constructor(e,n){this.persistence=e,this.yi=new ba(r=>_P(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=NL(this,n)}static fi(e,n){return new Ed(e,n)}di(){}Ai(e){return ye.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(o=>r+o))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return ye.forEach(this.yi,(r,o)=>this.Dr(e,r,o).next(l=>l?ye.resolve():n(o)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.si(e,u=>this.Dr(e,u,n).next(f=>{f||(r++,l.removeEntry(u,qe.min()))})).next(()=>l.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),ye.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),ye.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),ye.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),ye.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=$h(e.data.value)),n}Dr(e,n,r){return ye.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.yi.get(n);return ye.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.ds=r,this.As=o}static Rs(e,n){let r=nt(),o=nt();for(const l of n.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Iv(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return LV()?8:yP(si())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,o){const l={result:null};return this.ws(e,n).next(u=>{l.result=u}).next(()=>{if(!l.result)return this.bs(e,n,o,r).next(u=>{l.result=u})}).next(()=>{if(l.result)return;const u=new HL;return this.Ss(e,n,u).next(f=>{if(l.result=f,this.fs)return this.Ds(e,n,u,f.size)})}).next(()=>l.result)}Ds(e,n,r,o){return r.documentReadCount<this.gs?(vl()<=tt.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",_l(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ye.resolve()):(vl()<=tt.DEBUG&&Ae("QueryEngine","Query:",_l(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ps*o?(vl()<=tt.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",_l(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fr(n))):ye.resolve())}ws(e,n){if(AS(n))return ye.resolve(null);let r=Fr(n);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=Ry(n,null,"F"),r=Fr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const u=nt(...l);return this.ys.getDocuments(e,u).next(f=>this.indexManager.getMinOffset(e,r).next(d=>{const p=this.vs(n,f);return this.Cs(n,p,u,d.readTime)?this.ws(e,Ry(n,null,"F")):this.Fs(e,p,n,d)}))})))}bs(e,n,r,o){return AS(n)||o.isEqual(qe.min())?ye.resolve(null):this.ys.getDocuments(e,r).next(l=>{const u=this.vs(n,l);return this.Cs(n,u,r,o)?ye.resolve(null):(vl()<=tt.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),_l(n)),this.Fs(e,u,n,hP(o,Nc)).next(f=>f))})}vs(e,n){let r=new bn(lR(e));return n.forEach((o,l)=>{$d(e,l)&&(r=r.add(l))}),r}Cs(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,n,r){return vl()<=tt.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",_l(n)),this.ys.getDocumentsMatchingQuery(e,n,So.min(),r)}Fs(e,n,r,o){return this.ys.getDocumentsMatchingQuery(e,r,o).next(l=>(n.forEach(u=>{l=l.insert(u.key,u)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="LocalStore",qL=3e8;class $L{constructor(e,n,r,o){this.persistence=e,this.Ms=n,this.serializer=o,this.xs=new Gt(Xe),this.Os=new ba(l=>Ev(l),wv),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ML(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function GL(t,e,n,r){return new $L(t,e,n,r)}async function DR(t,e){const n=Ge(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next(l=>(o=l,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(l=>{const u=[],f=[];let d=nt();for(const p of o){u.push(p.batchId);for(const g of p.mutations)d=d.add(g.key)}for(const p of l){f.push(p.batchId);for(const g of p.mutations)d=d.add(g.key)}return n.localDocuments.getDocuments(r,d).next(p=>({ks:p,removedBatchIds:u,addedBatchIds:f}))})})}function YL(t,e){const n=Ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),l=n.Bs.newChangeBuffer({trackRemovals:!0});return function(f,d,p,g){const v=p.batch,E=v.keys();let b=ye.resolve();return E.forEach(x=>{b=b.next(()=>g.getEntry(d,x)).next(M=>{const D=p.docVersions.get(x);wt(D!==null,48541),M.version.compareTo(D)<0&&(v.applyToRemoteDocument(M,p),M.isValidDocument()&&(M.setReadTime(p.commitVersion),g.addEntry(M)))})}),b.next(()=>f.mutationQueue.removeMutationBatch(d,v))}(n,r,e,l).next(()=>l.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(f){let d=nt();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(d=d.add(f.batch.mutations[p].key));return d}(e))).next(()=>n.localDocuments.getDocuments(r,o))})}function OR(t){const e=Ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function KL(t,e){const n=Ge(t),r=e.snapshotVersion;let o=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=n.Bs.newChangeBuffer({trackRemovals:!0});o=n.xs;const f=[];e.targetChanges.forEach((g,v)=>{const E=o.get(v);if(!E)return;f.push(n.Ti.removeMatchingKeys(l,g.removedDocuments,v).next(()=>n.Ti.addMatchingKeys(l,g.addedDocuments,v)));let b=E.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(v)!==null?b=b.withResumeToken(Xn.EMPTY_BYTE_STRING,qe.min()).withLastLimboFreeSnapshotVersion(qe.min()):g.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(g.resumeToken,r)),o=o.insert(v,b),function(M,D,P){return M.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=qL?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(E,b,g)&&f.push(n.Ti.updateTargetData(l,b))});let d=Rs(),p=nt();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&f.push(n.persistence.referenceDelegate.updateLimboDocument(l,g))}),f.push(XL(l,u,e.documentUpdates).next(g=>{d=g.qs,p=g.Qs})),!r.isEqual(qe.min())){const g=n.Ti.getLastRemoteSnapshotVersion(l).next(v=>n.Ti.setTargetsMetadata(l,l.currentSequenceNumber,r));f.push(g)}return ye.waitFor(f).next(()=>u.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,d,p)).next(()=>d)}).then(l=>(n.xs=o,l))}function XL(t,e,n){let r=nt(),o=nt();return n.forEach(l=>r=r.add(l)),e.getEntries(t,r).next(l=>{let u=Rs();return n.forEach((f,d)=>{const p=l.get(f);d.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(f)),d.isNoDocument()&&d.version.isEqual(qe.min())?(e.removeEntry(f,d.readTime),u=u.insert(f,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),u=u.insert(f,d)):Ae(Cv,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",d.version)}),{qs:u,Qs:o}})}function QL(t,e){const n=Ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=yv),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function WL(t,e){const n=Ge(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return n.Ti.getTargetData(r,e).next(l=>l?(o=l,ye.resolve(o)):n.Ti.allocateTargetId(r).next(u=>(o=new ho(e,u,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=n.xs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function Dy(t,e,n){const r=Ge(t),o=r.xs.get(e),l=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",l,u=>r.persistence.referenceDelegate.removeTarget(u,o))}catch(u){if(!Xl(u))throw u;Ae(Cv,`Failed to update sequence numbers for target ${e}: ${u}`)}r.xs=r.xs.remove(e),r.Os.delete(o.target)}function zS(t,e,n){const r=Ge(t);let o=qe.min(),l=nt();return r.persistence.runTransaction("Execute query","readwrite",u=>function(d,p,g){const v=Ge(d),E=v.Os.get(g);return E!==void 0?ye.resolve(v.xs.get(E)):v.Ti.getTargetData(p,g)}(r,u,Fr(e)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(u,f.targetId).next(d=>{l=d})}).next(()=>r.Ms.getDocumentsMatchingQuery(u,e,n?o:qe.min(),n?l:nt())).next(f=>(ZL(r,zP(e),f),{documents:f,$s:l})))}function ZL(t,e,n){let r=t.Ns.get(e)||qe.min();n.forEach((o,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),t.Ns.set(e,r)}class US{constructor(){this.activeTargetIds=qP()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JL{constructor(){this.xo=new US,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new US,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="ConnectivityMonitor";class jS{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Ae(BS,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Ae(BS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vh=null;function Oy(){return Vh===null?Vh=function(){return 268435456+Math.round(2147483648*Math.random())}():Vh++,"0x"+Vh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="RestConnection",t6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class n6{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${o}`,this.Go=this.databaseId.database===md?`project_id=${r}`:`project_id=${r}&database_id=${o}`}zo(e,n,r,o,l){const u=Oy(),f=this.jo(e,n.toUriEncodedString());Ae(Vg,`Sending RPC '${e}' ${u}:`,f,r);const d={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(d,o,l);const{host:p}=new URL(f),g=$l(p);return this.Jo(e,f,d,r,g).then(v=>(Ae(Vg,`Received RPC '${e}' ${u}: `,v),v),v=>{throw zl(Vg,`RPC '${e}' ${u} failed with error: `,v,"url: ",f,"request:",r),v})}Yo(e,n,r,o,l,u){return this.zo(e,n,r,o,l)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Yl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,l)=>e[l]=o),r&&r.headers.forEach((o,l)=>e[l]=o)}jo(e,n){const r=t6[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei="WebChannelConnection";class r6 extends n6{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,o,l){const u=Oy();return new Promise((f,d)=>{const p=new kA;p.setWithCredentials(!0),p.listenOnce(VA.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case qh.NO_ERROR:const v=p.getResponseJson();Ae(ei,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(v)),f(v);break;case qh.TIMEOUT:Ae(ei,`RPC '${e}' ${u} timed out`),d(new Re(ge.DEADLINE_EXCEEDED,"Request time out"));break;case qh.HTTP_ERROR:const E=p.getStatus();if(Ae(ei,`RPC '${e}' ${u} failed with status:`,E,"response text:",p.getResponseText()),E>0){let b=p.getResponseJson();Array.isArray(b)&&(b=b[0]);const x=b?.error;if(x&&x.status&&x.message){const M=function(P){const H=P.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(H)>=0?H:ge.UNKNOWN}(x.status);d(new Re(M,x.message))}else d(new Re(ge.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new Re(ge.UNAVAILABLE,"Connection failed."));break;default:Be(9055,{h_:e,streamId:u,P_:p.getLastErrorCode(),T_:p.getLastError()})}}finally{Ae(ei,`RPC '${e}' ${u} completed.`)}});const g=JSON.stringify(o);Ae(ei,`RPC '${e}' ${u} sending request:`,o),p.send(n,"POST",g,r,15)})}I_(e,n,r){const o=Oy(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=zA(),f=LA(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Ho(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const g=l.join("");Ae(ei,`Creating RPC '${e}' stream ${o}: ${g}`,d);const v=u.createWebChannel(g,d);this.E_(v);let E=!1,b=!1;const x=new i6({Zo:D=>{b?Ae(ei,`Not sending because RPC '${e}' stream ${o} is closed:`,D):(E||(Ae(ei,`Opening RPC '${e}' stream ${o} transport.`),v.open(),E=!0),Ae(ei,`RPC '${e}' stream ${o} sending:`,D),v.send(D))},Xo:()=>v.close()}),M=(D,P,H)=>{D.listen(P,F=>{try{H(F)}catch(j){setTimeout(()=>{throw j},0)}})};return M(v,uc.EventType.OPEN,()=>{b||(Ae(ei,`RPC '${e}' stream ${o} transport opened.`),x.__())}),M(v,uc.EventType.CLOSE,()=>{b||(b=!0,Ae(ei,`RPC '${e}' stream ${o} transport closed`),x.u_(),this.d_(v))}),M(v,uc.EventType.ERROR,D=>{b||(b=!0,zl(ei,`RPC '${e}' stream ${o} transport errored. Name:`,D.name,"Message:",D.message),x.u_(new Re(ge.UNAVAILABLE,"The operation could not be completed")))}),M(v,uc.EventType.MESSAGE,D=>{var P;if(!b){const H=D.data[0];wt(!!H,16349);const F=H,j=F?.error||((P=F[0])===null||P===void 0?void 0:P.error);if(j){Ae(ei,`RPC '${e}' stream ${o} received error:`,j);const X=j.status;let Z=function(I){const N=fn[I];if(N!==void 0)return _R(N)}(X),R=j.message;Z===void 0&&(Z=ge.INTERNAL,R="Unknown error status: "+X+" with message "+j.message),b=!0,x.u_(new Re(Z,R)),v.close()}else Ae(ei,`RPC '${e}' stream ${o} received:`,H),x.c_(H)}}),M(f,PA.STAT_EVENT,D=>{D.stat===_y.PROXY?Ae(ei,`RPC '${e}' stream ${o} detected buffering proxy`):D.stat===_y.NOPROXY&&Ae(ei,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{x.a_()},0),x}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Pg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(t){return new lL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,n,r=1e3,o=1.5,l=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=o,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),o=Math.max(0,n-r);o>0&&Ae("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="PersistentStream";class kR{constructor(e,n,r,o,l,u,f,d){this.xi=e,this.S_=r,this.D_=o,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=d,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new MR(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===ge.RESOURCE_EXHAUSTED?(As(n.toString()),As("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.v_===n&&this.z_(r,o)},r=>{e(()=>{const o=new Re(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(o)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{r(()=>this.j_(o))}),this.stream.onMessage(o=>{r(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return Ae(HS,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(Ae(HS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class s6 extends kR{constructor(e,n,r,o,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,u),this.serializer=l}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=fL(this.serializer,e),r=function(l){if(!("targetChange"in l))return qe.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?qe.min():u.readTime?qr(u.readTime):qe.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=Ny(this.serializer),n.addTarget=function(l,u){let f;const d=u.target;if(f=Ty(d)?{documents:mL(l,d)}:{query:pL(l,d).gt},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=bR(l,u.resumeToken);const p=xy(l,u.expectedCount);p!==null&&(f.expectedCount=p)}else if(u.snapshotVersion.compareTo(qe.min())>0){f.readTime=_d(l,u.snapshotVersion.toTimestamp());const p=xy(l,u.expectedCount);p!==null&&(f.expectedCount=p)}return f}(this.serializer,e);const r=yL(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=Ny(this.serializer),n.removeTarget=e,this.Q_(n)}}class o6 extends kR{constructor(e,n,r,o,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,u),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return wt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,wt(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){wt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=dL(e.writeResults,e.commitTime),r=qr(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=Ny(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>hL(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{}class l6 extends a6{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new Re(ge.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.zo(e,Iy(n,r),o,l,u)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Re(ge.UNKNOWN,l.toString())})}Yo(e,n,r,o,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.Yo(e,Iy(n,r),o,u,f,l)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Re(ge.UNKNOWN,u.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class u6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(As(n),this.ua=!1):Ae("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="RemoteStore";class c6{constructor(e,n,r,o,l){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(u=>{r.enqueueAndForget(async()=>{Sa(this)&&(Ae(va,"Restarting streams for network reachability change."),await async function(d){const p=Ge(d);p.da.add(4),await Qc(p),p.Va.set("Unknown"),p.da.delete(4),await Wd(p)}(this))})}),this.Va=new u6(r,o)}}async function Wd(t){if(Sa(t))for(const e of t.Aa)await e(!0)}async function Qc(t){for(const e of t.Aa)await e(!1)}function VR(t,e){const n=Ge(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),Mv(n)?Ov(n):Wl(n).N_()&&Dv(n,e))}function Nv(t,e){const n=Ge(t),r=Wl(n);n.Ea.delete(e),r.N_()&&PR(n,e),n.Ea.size===0&&(r.N_()?r.k_():Sa(n)&&n.Va.set("Unknown"))}function Dv(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Wl(t).Z_(e)}function PR(t,e){t.ma.Ke(e),Wl(t).X_(e)}function Ov(t){t.ma=new rL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Wl(t).start(),t.Va.ca()}function Mv(t){return Sa(t)&&!Wl(t).O_()&&t.Ea.size>0}function Sa(t){return Ge(t).da.size===0}function LR(t){t.ma=void 0}async function f6(t){t.Va.set("Online")}async function h6(t){t.Ea.forEach((e,n)=>{Dv(t,e)})}async function d6(t,e){LR(t),Mv(t)?(t.Va.Pa(e),Ov(t)):t.Va.set("Unknown")}async function m6(t,e,n){if(t.Va.set("Online"),e instanceof wR&&e.state===2&&e.cause)try{await async function(o,l){const u=l.cause;for(const f of l.targetIds)o.Ea.has(f)&&(await o.remoteSyncer.rejectListen(f,u),o.Ea.delete(f),o.ma.removeTarget(f))}(t,e)}catch(r){Ae(va,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await wd(t,r)}else if(e instanceof Kh?t.ma.Xe(e):e instanceof ER?t.ma.ot(e):t.ma.nt(e),!n.isEqual(qe.min()))try{const r=await OR(t.localStore);n.compareTo(r)>=0&&await function(l,u){const f=l.ma.It(u);return f.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const g=l.Ea.get(p);g&&l.Ea.set(p,g.withResumeToken(d.resumeToken,u))}}),f.targetMismatches.forEach((d,p)=>{const g=l.Ea.get(d);if(!g)return;l.Ea.set(d,g.withResumeToken(Xn.EMPTY_BYTE_STRING,g.snapshotVersion)),PR(l,d);const v=new ho(g.target,d,p,g.sequenceNumber);Dv(l,v)}),l.remoteSyncer.applyRemoteEvent(f)}(t,n)}catch(r){Ae(va,"Failed to raise snapshot:",r),await wd(t,r)}}async function wd(t,e,n){if(!Xl(e))throw e;t.da.add(1),await Qc(t),t.Va.set("Offline"),n||(n=()=>OR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ae(va,"Retrying IndexedDB access"),await n(),t.da.delete(1),await Wd(t)})}function zR(t,e){return e().catch(n=>wd(t,n,e))}async function Zd(t){const e=Ge(t),n=xo(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:yv;for(;p6(e);)try{const o=await QL(e.localStore,r);if(o===null){e.Ia.length===0&&n.k_();break}r=o.batchId,g6(e,o)}catch(o){await wd(e,o)}UR(e)&&BR(e)}function p6(t){return Sa(t)&&t.Ia.length<10}function g6(t,e){t.Ia.push(e);const n=xo(t);n.N_()&&n.ea&&n.ta(e.mutations)}function UR(t){return Sa(t)&&!xo(t).O_()&&t.Ia.length>0}function BR(t){xo(t).start()}async function y6(t){xo(t).ia()}async function v6(t){const e=xo(t);for(const n of t.Ia)e.ta(n.mutations)}async function _6(t,e,n){const r=t.Ia.shift(),o=Sv.from(r,e,n);await zR(t,()=>t.remoteSyncer.applySuccessfulWrite(o)),await Zd(t)}async function E6(t,e){e&&xo(t).ea&&await async function(r,o){if(function(u){return nL(u)&&u!==ge.ABORTED}(o.code)){const l=r.Ia.shift();xo(r).L_(),await zR(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Zd(r)}}(t,e),UR(t)&&BR(t)}async function FS(t,e){const n=Ge(t);n.asyncQueue.verifyOperationInProgress(),Ae(va,"RemoteStore received new credentials");const r=Sa(n);n.da.add(3),await Qc(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Wd(n)}async function w6(t,e){const n=Ge(t);e?(n.da.delete(2),await Wd(n)):e||(n.da.add(2),await Qc(n),n.Va.set("Unknown"))}function Wl(t){return t.fa||(t.fa=function(n,r,o){const l=Ge(n);return l.oa(),new s6(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(t.datastore,t.asyncQueue,{e_:f6.bind(null,t),n_:h6.bind(null,t),i_:d6.bind(null,t),Y_:m6.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),Mv(t)?Ov(t):t.Va.set("Unknown")):(await t.fa.stop(),LR(t))})),t.fa}function xo(t){return t.ga||(t.ga=function(n,r,o){const l=Ge(n);return l.oa(),new o6(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:y6.bind(null,t),i_:E6.bind(null,t),na:v6.bind(null,t),ra:_6.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await Zd(t)):(await t.ga.stop(),t.Ia.length>0&&(Ae(va,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,n,r,o,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new Eo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,l){const u=Date.now()+r,f=new kv(e,n,u,o,l);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vv(t,e){if(As("AsyncQueue",`${e}: ${t}`),Xl(t))return new Re(ge.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{static emptySet(e){return new Cl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ke.comparator(n.key,r.key):(n,r)=>ke.comparator(n.key,r.key),this.keyedMap=cc(),this.sortedSet=new Gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Cl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Cl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(){this.pa=new Gt(ke.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Be(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Fl{constructor(e,n,r,o,l,u,f,d,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,o,l){const u=[];return n.forEach(f=>{u.push({type:0,doc:f})}),new Fl(e,n,Cl.emptySet(n),u,r,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class S6{constructor(){this.queries=$S(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=Ge(n),l=o.queries;o.queries=$S(),l.forEach((u,f)=>{for(const d of f.Sa)d.onError(r)})})(this,new Re(ge.ABORTED,"Firestore shutting down"))}}function $S(){return new ba(t=>aR(t),qd)}async function T6(t,e){const n=Ge(t);let r=3;const o=e.query;let l=n.queries.get(o);l?!l.Da()&&e.va()&&(r=2):(l=new b6,r=e.va()?0:1);try{switch(r){case 0:l.ba=await n.onListen(o,!0);break;case 1:l.ba=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(u){const f=Vv(u,`Initialization of query '${_l(e.query)}' failed`);return void e.onError(f)}n.queries.set(o,l),l.Sa.push(e),e.Fa(n.onlineState),l.ba&&e.Ma(l.ba)&&Pv(n)}async function A6(t,e){const n=Ge(t),r=e.query;let o=3;const l=n.queries.get(r);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?o=e.va()?0:1:!l.Da()&&e.va()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function R6(t,e){const n=Ge(t);let r=!1;for(const o of e){const l=o.query,u=n.queries.get(l);if(u){for(const f of u.Sa)f.Ma(o)&&(r=!0);u.ba=o}}r&&Pv(n)}function x6(t,e,n){const r=Ge(t),o=r.queries.get(e);if(o)for(const l of o.Sa)l.onError(n);r.queries.delete(e)}function Pv(t){t.Ca.forEach(e=>{e.next()})}var My,GS;(GS=My||(My={})).xa="default",GS.Cache="cache";class I6{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Fl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Fl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==My.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e){this.key=e}}class HR{constructor(e){this.key=e}}class C6{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=nt(),this.mutatedKeys=nt(),this.Za=lR(e),this.Xa=new Cl(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new qS,o=n?n.Xa:this.Xa;let l=n?n.mutatedKeys:this.mutatedKeys,u=o,f=!1;const d=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((g,v)=>{const E=o.get(g),b=$d(this.query,v)?v:null,x=!!E&&this.mutatedKeys.has(E.key),M=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let D=!1;E&&b?E.data.isEqual(b.data)?x!==M&&(r.track({type:3,doc:b}),D=!0):this.ru(E,b)||(r.track({type:2,doc:b}),D=!0,(d&&this.Za(b,d)>0||p&&this.Za(b,p)<0)&&(f=!0)):!E&&b?(r.track({type:0,doc:b}),D=!0):E&&!b&&(r.track({type:1,doc:E}),D=!0,(d||p)&&(f=!0)),D&&(b?(u=u.add(b),l=M?l.add(g):l.delete(g)):(u=u.delete(g),l=l.delete(g)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const g=this.query.limitType==="F"?u.last():u.first();u=u.delete(g.key),l=l.delete(g.key),r.track({type:1,doc:g})}return{Xa:u,nu:r,Cs:f,mutatedKeys:l}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const l=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const u=e.nu.wa();u.sort((g,v)=>function(b,x){const M=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be(20277,{Vt:D})}};return M(b)-M(x)}(g.type,v.type)||this.Za(g.doc,v.doc)),this.iu(r),o=o!=null&&o;const f=n&&!o?this.su():[],d=this.Ya.size===0&&this.current&&!o?1:0,p=d!==this.Ja;return this.Ja=d,u.length!==0||p?{snapshot:new Fl(this.query,e.Xa,l,u,e.mutatedKeys,d===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:f}:{ou:f}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new qS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=nt(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new HR(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new jR(r))}),n}au(e){this.Ha=e.$s,this.Ya=nt();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Fl.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Lv="SyncEngine";class N6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class D6{constructor(e){this.key=e,this.cu=!1}}class O6{constructor(e,n,r,o,l,u){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.lu={},this.hu=new ba(f=>aR(f),qd),this.Pu=new Map,this.Tu=new Set,this.Iu=new Gt(ke.comparator),this.Eu=new Map,this.du=new Rv,this.Au={},this.Ru=new Map,this.Vu=Hl.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function M6(t,e,n=!0){const r=KR(t);let o;const l=r.hu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.uu()):o=await FR(r,e,n,!0),o}async function k6(t,e){const n=KR(t);await FR(n,e,!0,!1)}async function FR(t,e,n,r){const o=await WL(t.localStore,Fr(e)),l=o.targetId,u=t.sharedClientState.addLocalQueryTarget(l,n);let f;return r&&(f=await V6(t,e,l,u==="current",o.resumeToken)),t.isPrimaryClient&&n&&VR(t.remoteStore,o),f}async function V6(t,e,n,r,o){t.fu=(v,E,b)=>async function(M,D,P,H){let F=D.view.tu(P);F.Cs&&(F=await zS(M.localStore,D.query,!1).then(({documents:R})=>D.view.tu(R,F)));const j=H&&H.targetChanges.get(D.targetId),X=H&&H.targetMismatches.get(D.targetId)!=null,Z=D.view.applyChanges(F,M.isPrimaryClient,j,X);return KS(M,D.targetId,Z.ou),Z.snapshot}(t,v,E,b);const l=await zS(t.localStore,e,!0),u=new C6(e,l.$s),f=u.tu(l.documents),d=Xc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",o),p=u.applyChanges(f,t.isPrimaryClient,d);KS(t,n,p.ou);const g=new N6(e,n,u);return t.hu.set(e,g),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),p.snapshot}async function P6(t,e,n){const r=Ge(t),o=r.hu.get(e),l=r.Pu.get(o.targetId);if(l.length>1)return r.Pu.set(o.targetId,l.filter(u=>!qd(u,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Dy(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Nv(r.remoteStore,o.targetId),ky(r,o.targetId)}).catch(Kl)):(ky(r,o.targetId),await Dy(r.localStore,o.targetId,!0))}async function L6(t,e){const n=Ge(t),r=n.hu.get(e),o=n.Pu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Nv(n.remoteStore,r.targetId))}async function z6(t,e,n){const r=$6(t);try{const o=await function(u,f){const d=Ge(u),p=zt.now(),g=f.reduce((b,x)=>b.add(x.key),nt());let v,E;return d.persistence.runTransaction("Locally write mutations","readwrite",b=>{let x=Rs(),M=nt();return d.Bs.getEntries(b,g).next(D=>{x=D,x.forEach((P,H)=>{H.isValidDocument()||(M=M.add(P))})}).next(()=>d.localDocuments.getOverlayedDocuments(b,x)).next(D=>{v=D;const P=[];for(const H of f){const F=WP(H,v.get(H.key).overlayedDocument);F!=null&&P.push(new No(H.key,F,ZA(F.value.mapValue),Ui.exists(!0)))}return d.mutationQueue.addMutationBatch(b,p,P,f)}).next(D=>{E=D;const P=D.applyToLocalDocumentSet(v,M);return d.documentOverlayCache.saveOverlays(b,D.batchId,P)})}).then(()=>({batchId:E.batchId,changes:cR(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,f,d){let p=u.Au[u.currentUser.toKey()];p||(p=new Gt(Xe)),p=p.insert(f,d),u.Au[u.currentUser.toKey()]=p}(r,o.batchId,n),await Wc(r,o.changes),await Zd(r.remoteStore)}catch(o){const l=Vv(o,"Failed to persist write");n.reject(l)}}async function qR(t,e){const n=Ge(t);try{const r=await KL(n.localStore,e);e.targetChanges.forEach((o,l)=>{const u=n.Eu.get(l);u&&(wt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.cu=!0:o.modifiedDocuments.size>0?wt(u.cu,14607):o.removedDocuments.size>0&&(wt(u.cu,42227),u.cu=!1))}),await Wc(n,r,e)}catch(r){await Kl(r)}}function YS(t,e,n){const r=Ge(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.hu.forEach((l,u)=>{const f=u.view.Fa(e);f.snapshot&&o.push(f.snapshot)}),function(u,f){const d=Ge(u);d.onlineState=f;let p=!1;d.queries.forEach((g,v)=>{for(const E of v.Sa)E.Fa(f)&&(p=!0)}),p&&Pv(d)}(r.eventManager,e),o.length&&r.lu.Y_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function U6(t,e,n){const r=Ge(t);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Eu.get(e),l=o&&o.key;if(l){let u=new Gt(ke.comparator);u=u.insert(l,ii.newNoDocument(l,qe.min()));const f=nt().add(l),d=new Xd(qe.min(),new Map,new Gt(Xe),u,f);await qR(r,d),r.Iu=r.Iu.remove(l),r.Eu.delete(e),zv(r)}else await Dy(r.localStore,e,!1).then(()=>ky(r,e,n)).catch(Kl)}async function B6(t,e){const n=Ge(t),r=e.batch.batchId;try{const o=await YL(n.localStore,e);GR(n,r,null),$R(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Wc(n,o)}catch(o){await Kl(o)}}async function j6(t,e,n){const r=Ge(t);try{const o=await function(u,f){const d=Ge(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let g;return d.mutationQueue.lookupMutationBatch(p,f).next(v=>(wt(v!==null,37113),g=v.keys(),d.mutationQueue.removeMutationBatch(p,v))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,g,f)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,g)).next(()=>d.localDocuments.getDocuments(p,g))})}(r.localStore,e);GR(r,e,n),$R(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Wc(r,o)}catch(o){await Kl(o)}}function $R(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function GR(t,e,n){const r=Ge(t);let o=r.Au[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(n?l.reject(n):l.resolve(),o=o.remove(e)),r.Au[r.currentUser.toKey()]=o}}function ky(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||YR(t,r)})}function YR(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(Nv(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),zv(t))}function KS(t,e,n){for(const r of n)r instanceof jR?(t.du.addReference(r.key,e),H6(t,r)):r instanceof HR?(Ae(Lv,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||YR(t,r.key)):Be(19791,{pu:r})}function H6(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(Ae(Lv,"New document in limbo: "+n),t.Tu.add(r),zv(t))}function zv(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new ke(Lt.fromString(e)),r=t.Vu.next();t.Eu.set(r,new D6(n)),t.Iu=t.Iu.insert(n,r),VR(t.remoteStore,new ho(Fr(sR(n.path)),r,"TargetPurposeLimboResolution",jd.le))}}async function Wc(t,e,n){const r=Ge(t),o=[],l=[],u=[];r.hu.isEmpty()||(r.hu.forEach((f,d)=>{u.push(r.fu(d,e,n).then(p=>{var g;if((p||n)&&r.isPrimaryClient){const v=p?!p.fromCache:(g=n?.targetChanges.get(d.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(p){o.push(p);const v=Iv.Rs(d.targetId,p);l.push(v)}}))}),await Promise.all(u),r.lu.Y_(o),await async function(d,p){const g=Ge(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>ye.forEach(p,E=>ye.forEach(E.ds,b=>g.persistence.referenceDelegate.addReference(v,E.targetId,b)).next(()=>ye.forEach(E.As,b=>g.persistence.referenceDelegate.removeReference(v,E.targetId,b)))))}catch(v){if(!Xl(v))throw v;Ae(Cv,"Failed to update sequence numbers: "+v)}for(const v of p){const E=v.targetId;if(!v.fromCache){const b=g.xs.get(E),x=b.snapshotVersion,M=b.withLastLimboFreeSnapshotVersion(x);g.xs=g.xs.insert(E,M)}}}(r.localStore,l))}async function F6(t,e){const n=Ge(t);if(!n.currentUser.isEqual(e)){Ae(Lv,"User change. New user:",e.toKey());const r=await DR(n.localStore,e);n.currentUser=e,function(l,u){l.Ru.forEach(f=>{f.forEach(d=>{d.reject(new Re(ge.CANCELLED,u))})}),l.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Wc(n,r.ks)}}function q6(t,e){const n=Ge(t),r=n.Eu.get(e);if(r&&r.cu)return nt().add(r.key);{let o=nt();const l=n.Pu.get(e);if(!l)return o;for(const u of l){const f=n.hu.get(u);o=o.unionWith(f.view.eu)}return o}}function KR(t){const e=Ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=qR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=q6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=U6.bind(null,e),e.lu.Y_=R6.bind(null,e.eventManager),e.lu.gu=x6.bind(null,e.eventManager),e}function $6(t){const e=Ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=B6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=j6.bind(null,e),e}class bd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return GL(this.persistence,new FL,e.initialUser,this.serializer)}Su(e){return new NR(xv.fi,this.serializer)}bu(e){return new JL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bd.provider={build:()=>new bd};class G6 extends bd{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){wt(this.persistence.referenceDelegate instanceof Ed,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new IL(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Ti.withCacheSize(this.cacheSizeBytes):Ti.DEFAULT;return new NR(r=>Ed.fi(r,n),this.serializer)}}class Vy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>YS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=F6.bind(null,this.syncEngine),await w6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new S6}()}createDatastore(e){const n=Qd(e.databaseInfo.databaseId),r=function(l){return new r6(l)}(e.databaseInfo);return function(l,u,f,d){return new l6(l,u,f,d)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,o,l,u,f){return new c6(r,o,l,u,f)}(this.localStore,this.datastore,e.asyncQueue,n=>YS(this.syncEngine,n,0),function(){return jS.C()?new jS:new e6}())}createSyncEngine(e,n){return function(o,l,u,f,d,p,g){const v=new O6(o,l,u,f,d,p);return g&&(v.mu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const l=Ge(o);Ae(va,"RemoteStore shutting down."),l.da.add(5),await Qc(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Vy.provider={build:()=>new Vy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):As("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io="FirestoreClient";class K6{constructor(e,n,r,o,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=ni.UNAUTHENTICATED,this.clientId=HA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async u=>{Ae(Io,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(Ae(Io,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Eo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Vv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Lg(t,e){t.asyncQueue.verifyOperationInProgress(),Ae(Io,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async o=>{r.isEqual(o)||(await DR(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function XS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await X6(t);Ae(Io,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>FS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,o)=>FS(e.remoteStore,o)),t._onlineComponents=e}async function X6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ae(Io,"Using user provided OfflineComponentProvider");try{await Lg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===ge.FAILED_PRECONDITION||o.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;zl("Error using user provided cache. Falling back to memory cache: "+n),await Lg(t,new bd)}}else Ae(Io,"Using default OfflineComponentProvider"),await Lg(t,new G6(void 0));return t._offlineComponents}async function XR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ae(Io,"Using user provided OnlineComponentProvider"),await XS(t,t._uninitializedComponentsProvider._online)):(Ae(Io,"Using default OnlineComponentProvider"),await XS(t,new Vy))),t._onlineComponents}function Q6(t){return XR(t).then(e=>e.syncEngine)}async function W6(t){const e=await XR(t),n=e.eventManager;return n.onListen=M6.bind(null,e.syncEngine),n.onUnlisten=P6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=k6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=L6.bind(null,e.syncEngine),n}function Z6(t,e,n={}){const r=new Eo;return t.asyncQueue.enqueueAndForget(async()=>function(l,u,f,d,p){const g=new Y6({next:E=>{g.xu(),u.enqueueAndForget(()=>A6(l,v)),E.fromCache&&d.source==="server"?p.reject(new Re(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),v=new I6(f,g,{includeMetadataChanges:!0,Qa:!0});return T6(l,v)}(await W6(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(t,e,n){if(!n)throw new Re(ge.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function J6(t,e,n,r){if(e===!0&&r===!0)throw new Re(ge.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function WS(t){if(!ke.isDocumentKey(t))throw new Re(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ZS(t){if(ke.isDocumentKey(t))throw new Re(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Jd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Be(12329,{type:typeof t})}function _a(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Re(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jd(t);throw new Re(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="firestore.googleapis.com",JS=!0;class eT{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Re(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ZR,this.ssl=JS}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:JS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=CR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<RL)throw new Re(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}J6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=QR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Re(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Re(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Re(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class em{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new iP;switch(r.type){case"firstParty":return new aP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Re(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=QS.get(n);r&&(Ae("ComponentProvider","Removing Datastore"),QS.delete(n),r.terminate())}(this),Promise.resolve()}}function ez(t,e,n,r={}){var o;t=_a(t,em);const l=$l(e),u=t._getSettings(),f=Object.assign(Object.assign({},u),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;l&&(AA(`https://${d}`),RA("Firestore",!0)),u.host!==ZR&&u.host!==d&&zl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},u),{host:d,ssl:l,emulatorOptions:r});if(!pa(p,f)&&(t._setSettings(p),r.mockUserToken)){let g,v;if(typeof r.mockUserToken=="string")g=r.mockUserToken,v=ni.MOCK_USER;else{g=IV(r.mockUserToken,(o=t._app)===null||o===void 0?void 0:o.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Re(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new ni(E)}t._authCredentials=new rP(new BA(g,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ta(this.firestore,e,this._query)}}class Bi{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bi(this.firestore,e,this._key)}}class wo extends Ta{constructor(e,n,r){super(e,n,sR(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bi(this.firestore,null,new ke(e))}withConverter(e){return new wo(this.firestore,e,this._path)}}function Uv(t,e,...n){if(t=Sn(t),WR("collection","path",e),t instanceof em){const r=Lt.fromString(e,...n);return ZS(r),new wo(t,null,r)}{if(!(t instanceof Bi||t instanceof wo))throw new Re(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Lt.fromString(e,...n));return ZS(r),new wo(t.firestore,null,r)}}function Zl(t,e,...n){if(t=Sn(t),arguments.length===1&&(e=HA.newId()),WR("doc","path",e),t instanceof em){const r=Lt.fromString(e,...n);return WS(r),new Bi(t,null,new ke(r))}{if(!(t instanceof Bi||t instanceof wo))throw new Re(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Lt.fromString(e,...n));return WS(r),new Bi(t.firestore,t instanceof wo?t.converter:null,new ke(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="AsyncQueue";class nT{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new MR(this,"async_queue_retry"),this.rc=()=>{const r=Pg();r&&Ae(tT,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=Pg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Pg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Eo;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Xl(e))throw e;Ae(tT,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,As("INTERNAL UNHANDLED ERROR: ",iT(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const o=kv.createAndSchedule(this,e,n,r,l=>this.uc(l));return this.Zu.push(o),o}oc(){this.Xu&&Be(47125,{cc:iT(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function iT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Zc extends em{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new nT,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nT(e),this._firestoreClient=void 0,await e}}}function tz(t,e){const n=typeof t=="object"?t:NA(),r=typeof t=="string"?t:md,o=pv(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const l=RV("firestore");l&&ez(o,...l)}return o}function Bv(t){if(t._terminated)throw new Re(ge.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||nz(t),t._firestoreClient}function nz(t){var e,n,r;const o=t._freezeSettings(),l=function(f,d,p,g){return new bP(f,d,p,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,QR(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,o);t._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),t._firestoreClient=new K6(t._authCredentials,t._appCheckCredentials,t._queue,l,t._componentsProvider&&function(f){const d=f?._online.build();return{_offline:f?._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ql(Xn.fromBase64String(e))}catch(n){throw new Re(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ql(Xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Re(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Re(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Re(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iz=/^__.*__$/;class rz{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new No(e,this.data,this.fieldMask,n,this.fieldTransforms):new Kc(e,this.data,n,this.fieldTransforms)}}class JR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new No(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ex(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be(40011,{Ic:t})}}class qv{constructor(e,n,r,o,l,u){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new qv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.dc({path:r,Rc:!1});return o.Vc(e),o}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.dc({path:r,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Sd(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(ex(this.Ic)&&iz.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class sz{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Qd(e)}bc(e,n,r,o=!1){return new qv({Ic:e,methodName:n,wc:r,path:Kn.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $v(t){const e=t._freezeSettings(),n=Qd(t._databaseId);return new sz(t._databaseId,!!e.ignoreUndefinedProperties,n)}function tx(t,e,n,r,o,l={}){const u=t.bc(l.merge||l.mergeFields?2:0,e,n,o);Gv("Data must be an object, but it was:",u,r);const f=nx(r,u);let d,p;if(l.merge)d=new zi(u.fieldMask),p=u.fieldTransforms;else if(l.mergeFields){const g=[];for(const v of l.mergeFields){const E=Py(e,v,n);if(!u.contains(E))throw new Re(ge.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);rx(g,E)||g.push(E)}d=new zi(g),p=u.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,p=u.fieldTransforms;return new rz(new Ai(f),d,p)}class nm extends jv{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nm}}function oz(t,e,n,r){const o=t.bc(1,e,n);Gv("Data must be an object, but it was:",o,r);const l=[],u=Ai.empty();Co(r,(d,p)=>{const g=Yv(e,d,n);p=Sn(p);const v=o.mc(g);if(p instanceof nm)l.push(g);else{const E=Jc(p,v);E!=null&&(l.push(g),u.set(g,E))}});const f=new zi(l);return new JR(u,f,o.fieldTransforms)}function az(t,e,n,r,o,l){const u=t.bc(1,e,n),f=[Py(e,r,n)],d=[o];if(l.length%2!=0)throw new Re(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<l.length;E+=2)f.push(Py(e,l[E])),d.push(l[E+1]);const p=[],g=Ai.empty();for(let E=f.length-1;E>=0;--E)if(!rx(p,f[E])){const b=f[E];let x=d[E];x=Sn(x);const M=u.mc(b);if(x instanceof nm)p.push(b);else{const D=Jc(x,M);D!=null&&(p.push(b),g.set(b,D))}}const v=new zi(p);return new JR(g,v,u.fieldTransforms)}function lz(t,e,n,r=!1){return Jc(n,t.bc(r?4:3,e))}function Jc(t,e){if(ix(t=Sn(t)))return Gv("Unsupported field value:",e,t),nx(t,e);if(t instanceof jv)return function(r,o){if(!ex(o.Ic))throw o.gc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,o){const l=[];let u=0;for(const f of r){let d=Jc(f,o.fc(u));d==null&&(d={nullValue:"NULL_VALUE"}),l.push(d),u++}return{arrayValue:{values:l}}}(t,e)}return function(r,o){if((r=Sn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $P(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=zt.fromDate(r);return{timestampValue:_d(o.serializer,l)}}if(r instanceof zt){const l=new zt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_d(o.serializer,l)}}if(r instanceof Hv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ql)return{bytesValue:bR(o.serializer,r._byteString)};if(r instanceof Bi){const l=o.databaseId,u=r.firestore._databaseId;if(!u.isEqual(l))throw o.gc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Av(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Fv)return function(u,f){return{mapValue:{fields:{[QA]:{stringValue:WA},[pd]:{arrayValue:{values:u.toArray().map(p=>{if(typeof p!="number")throw f.gc("VectorValues must only contain numeric values.");return bv(f.serializer,p)})}}}}}}(r,o);throw o.gc(`Unsupported field value: ${Jd(r)}`)}(t,e)}function nx(t,e){const n={};return qA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Co(t,(r,o)=>{const l=Jc(o,e.Ac(r));l!=null&&(n[r]=l)}),{mapValue:{fields:n}}}function ix(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof zt||t instanceof Hv||t instanceof ql||t instanceof Bi||t instanceof jv||t instanceof Fv)}function Gv(t,e,n){if(!ix(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const r=Jd(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function Py(t,e,n){if((e=Sn(e))instanceof tm)return e._internalPath;if(typeof e=="string")return Yv(t,e);throw Sd("Field path arguments must be of type string or ",t,!1,void 0,n)}const uz=new RegExp("[~\\*/\\[\\]]");function Yv(t,e,n){if(e.search(uz)>=0)throw Sd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new tm(...e.split("."))._internalPath}catch{throw Sd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Sd(t,e,n,r,o){const l=r&&!r.isEmpty(),u=o!==void 0;let f=`Function ${e}() called with invalid data`;n&&(f+=" (via `toFirestore()`)"),f+=". ";let d="";return(l||u)&&(d+=" (found",l&&(d+=` in field ${r}`),u&&(d+=` in document ${o}`),d+=")"),new Re(ge.INVALID_ARGUMENT,f+t+d)}function rx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,n,r,o,l){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Bi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(im("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class cz extends sx{data(){return super.data()}}function im(t,e){return typeof e=="string"?Yv(t,e):e instanceof tm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fz(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Re(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kv{}class ox extends Kv{}function hz(t,e,...n){let r=[];e instanceof Kv&&r.push(e),r=r.concat(n),function(l){const u=l.filter(d=>d instanceof Xv).length,f=l.filter(d=>d instanceof rm).length;if(u>1||u>0&&f>0)throw new Re(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)t=o._apply(t);return t}class rm extends ox{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new rm(e,n,r)}_apply(e){const n=this._parse(e);return ax(e._query,n),new Ta(e.firestore,e.converter,Ay(e._query,n))}_parse(e){const n=$v(e.firestore);return function(l,u,f,d,p,g,v){let E;if(p.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new Re(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){sT(v,g);const x=[];for(const M of v)x.push(rT(d,l,M));E={arrayValue:{values:x}}}else E=rT(d,l,v)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||sT(v,g),E=lz(f,u,v,g==="in"||g==="not-in");return hn.create(p,g,E)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function dz(t,e,n){const r=e,o=im("where",t);return rm._create(o,r,n)}class Xv extends Kv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Xv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:wr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,l){let u=o;const f=l.getFlattenedFilters();for(const d of f)ax(u,d),u=Ay(u,d)}(e._query,n),new Ta(e.firestore,e.converter,Ay(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Qv extends ox{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Qv(e,n)}_apply(e){const n=function(o,l,u){if(o.startAt!==null)throw new Re(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Re(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new kc(l,u)}(e._query,this._field,this._direction);return new Ta(e.firestore,e.converter,function(o,l){const u=o.explicitOrderBy.concat([l]);return new Ql(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,n))}}function mz(t,e="asc"){const n=e,r=im("orderBy",t);return Qv._create(r,n)}function rT(t,e,n){if(typeof(n=Sn(n))=="string"){if(n==="")throw new Re(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oR(e)&&n.indexOf("/")!==-1)throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Lt.fromString(n));if(!ke.isDocumentKey(r))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _S(t,new ke(r))}if(n instanceof Bi)return _S(t,n._key);throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jd(n)}.`)}function sT(t,e){if(!Array.isArray(t)||t.length===0)throw new Re(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ax(t,e){const n=function(o,l){for(const u of o)for(const f of u.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null}(t.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Re(ge.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Re(ge.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class pz{convertValue(e,n="none"){switch(Ro(e)){case 0:return null;case 1:return e.booleanValue;case 2:return on(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ao(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Be(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Co(e,(o,l)=>{r[o]=this.convertValue(l,n)}),r}convertVectorValue(e){var n,r,o;const l=(o=(r=(n=e.fields)===null||n===void 0?void 0:n[pd].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(u=>on(u.doubleValue));return new Fv(l)}convertGeoPoint(e){return new Hv(on(e.latitude),on(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Fd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Dc(e));default:return null}}convertTimestamp(e){const n=To(e);return new zt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Lt.fromString(e);wt(IR(r),9688,{name:e});const o=new Oc(r.get(1),r.get(3)),l=new ke(r.popFirst(5));return o.isEqual(n)||As(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gz extends sx{constructor(e,n,r,o,l,u){super(e,n,r,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Xh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(im("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Xh extends gz{data(e={}){return super.data(e)}}class yz{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Ph(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Xh(this._firestore,this._userDataWriter,r.key,r,new Ph(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Re(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map(f=>{const d=new Xh(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ph(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:d,oldIndex:-1,newIndex:u++}})}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const d=new Xh(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ph(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,g=-1;return f.type!==0&&(p=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),g=u.indexOf(f.doc.key)),{type:vz(f.type),doc:d,oldIndex:p,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function vz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be(61501,{type:t})}}class _z extends pz{constructor(e){super(),this.firestore=e}convertBytes(e){return new ql(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Bi(this.firestore,null,n)}}function Wv(t){t=_a(t,Ta);const e=_a(t.firestore,Zc),n=Bv(e),r=new _z(e);return fz(t._query),Z6(n,t._query).then(o=>new yz(e,r,t,o))}function Zv(t,e,n){t=_a(t,Bi);const r=_a(t.firestore,Zc),o=lx(t.converter,e,n);return Jv(r,[tx($v(r),"setDoc",t._key,o,t.converter!==null,n).toMutation(t._key,Ui.none())])}function Ez(t){return Jv(_a(t.firestore,Zc),[new Kd(t._key,Ui.none())])}function Jv(t,e){return function(r,o){const l=new Eo;return r.asyncQueue.enqueueAndForget(async()=>z6(await Q6(r),o,l)),l.promise}(Bv(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=$v(e)}set(e,n,r){this._verifyNotCommitted();const o=zg(e,this._firestore),l=lx(o.converter,n,r),u=tx(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,r);return this._mutations.push(u.toMutation(o._key,Ui.none())),this}update(e,n,r,...o){this._verifyNotCommitted();const l=zg(e,this._firestore);let u;return u=typeof(n=Sn(n))=="string"||n instanceof tm?az(this._dataReader,"WriteBatch.update",l._key,n,r,o):oz(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(u.toMutation(l._key,Ui.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=zg(e,this._firestore);return this._mutations=this._mutations.concat(new Kd(n._key,Ui.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zg(t,e){if((t=Sn(t)).firestore!==e)throw new Re(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(t){return Bv(t=_a(t,Zc)),new wz(t,e=>Jv(t,e))}(function(e,n=!0){(function(o){Yl=o})(Gl),Ll(new ga("firestore",(r,{instanceIdentifier:o,options:l})=>{const u=r.getProvider("app").getImmediate(),f=new Zc(new sP(r.getProvider("auth-internal")),new lP(u,r.getProvider("app-check-internal")),function(p,g){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Re(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oc(p.options.projectId,g)}(u,o),u);return l=Object.assign({useFetchStreams:n},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),vo(aS,lS,e),vo(aS,lS,"esm2017")})();function e_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function cx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bz=cx,fx=new Gc("auth","Firebase",cx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td=new dv("@firebase/auth");function Sz(t,...e){Td.logLevel<=tt.WARN&&Td.warn(`Auth (${Gl}): ${t}`,...e)}function Qh(t,...e){Td.logLevel<=tt.ERROR&&Td.error(`Auth (${Gl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(t,...e){throw t_(t,...e)}function $r(t,...e){return t_(t,...e)}function hx(t,e,n){const r=Object.assign(Object.assign({},bz()),{[e]:n});return new Gc("auth","Firebase",r).create(e,{appName:t.name})}function Es(t){return hx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function t_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return fx.create(t,...e)}function Ue(t,e,...n){if(!t)throw t_(e,...n)}function vs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qh(e),new Error(e)}function xs(t,e){t||vs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Tz(){return oT()==="http:"||oT()==="https:"}function oT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Az(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Tz()||kV()||"connection"in navigator)?navigator.onLine:!0}function Rz(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,n){this.shortDelay=e,this.longDelay=n,xs(n>e,"Short delay should be less than long delay!"),this.isMobile=DV()||VV()}get(){return Az()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(t,e){xs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Cz=new ef(3e4,6e4);function Do(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Oo(t,e,n,r,o={}){return mx(t,o,async()=>{let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});const f=Yc(Object.assign({key:t.config.apiKey},u)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:d},l);return MV()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&$l(t.emulatorConfig.host)&&(p.credentials="include"),dx.fetch()(await px(t,t.config.apiHost,n,f),p)})}async function mx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},xz),e);try{const o=new Dz(t),l=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Lh(t,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const f=l.ok?u.errorMessage:u.error.message,[d,p]=f.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lh(t,"credential-already-in-use",u);if(d==="EMAIL_EXISTS")throw Lh(t,"email-already-in-use",u);if(d==="USER_DISABLED")throw Lh(t,"user-disabled",u);const g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw hx(t,g,p);br(t,g)}}catch(o){if(o instanceof Cs)throw o;br(t,"network-request-failed",{message:String(o)})}}async function tf(t,e,n,r,o={}){const l=await Oo(t,e,n,r,o);return"mfaPendingCredential"in l&&br(t,"multi-factor-auth-required",{_serverResponse:l}),l}async function px(t,e,n,r){const o=`${e}${n}?${r}`,l=t,u=l.config.emulator?n_(t.config,o):`${t.config.apiScheme}://${o}`;return Iz.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function Nz(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Dz{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($r(this.auth,"network-request-failed")),Cz.get())})}}function Lh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=$r(t,e,r);return o.customData._tokenResponse=n,o}function aT(t){return t!==void 0&&t.enterprise!==void 0}class Oz{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Nz(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Mz(t,e){return Oo(t,"GET","/v2/recaptchaConfig",Do(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kz(t,e){return Oo(t,"POST","/v1/accounts:delete",e)}async function Ad(t,e){return Oo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Vz(t,e=!1){const n=Sn(t),r=await n.getIdToken(e),o=i_(r);Ue(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,u=l?.sign_in_provider;return{claims:o,token:r,authTime:_c(Ug(o.auth_time)),issuedAtTime:_c(Ug(o.iat)),expirationTime:_c(Ug(o.exp)),signInProvider:u||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Ug(t){return Number(t)*1e3}function i_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Qh("JWT malformed, contained fewer than 3 sections"),null;try{const o=wA(n);return o?JSON.parse(o):(Qh("Failed to decode base64 JWT payload"),null)}catch(o){return Qh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function lT(t){const e=i_(t);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Cs&&Pz(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Pz({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=_c(this.lastLoginAt),this.creationTime=_c(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rd(t){var e;const n=t.auth,r=await t.getIdToken(),o=await Lc(t,Ad(n,{idToken:r}));Ue(o?.users.length,n,"internal-error");const l=o.users[0];t._notifyReloadListener(l);const u=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?gx(l.providerUserInfo):[],f=Uz(t.providerData,u),d=t.isAnonymous,p=!(t.email&&l.passwordHash)&&!f?.length,g=d?p:!1,v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new zy(l.createdAt,l.lastLoginAt),isAnonymous:g};Object.assign(t,v)}async function zz(t){const e=Sn(t);await Rd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Uz(t,e){return[...t.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function gx(t){return t.map(e=>{var{providerId:n}=e,r=e_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bz(t,e){const n=await mx(t,{},async()=>{const r=Yc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=t.config,u=await px(t,o,"/v1/token",`key=${l}`),f=await t._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:f,body:r};return t.emulatorConfig&&$l(t.emulatorConfig.host)&&(d.credentials="include"),dx.fetch()(u,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function jz(t,e){return Oo(t,"POST","/v2/accounts:revokeToken",Do(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const n=lT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:l}=await Bz(e,n);this.updateTokensAndExpiration(r,o,Number(l))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:l}=n,u=new Nl;return r&&(Ue(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),o&&(Ue(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),l&&(Ue(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nl,this.toJSON())}_performRefresh(){return vs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(t,e){Ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Er{constructor(e){var{uid:n,auth:r,stsTokenManager:o}=e,l=e_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Lz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new zy(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await Lc(this,this.stsTokenManager.getToken(this.auth,e));return Ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Vz(this,e)}reload(){return zz(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Er(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Rd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ar(this.auth.app))return Promise.reject(Es(this.auth));const e=await this.getIdToken();return await Lc(this,kz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,o,l,u,f,d,p,g;const v=(r=n.displayName)!==null&&r!==void 0?r:void 0,E=(o=n.email)!==null&&o!==void 0?o:void 0,b=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,x=(u=n.photoURL)!==null&&u!==void 0?u:void 0,M=(f=n.tenantId)!==null&&f!==void 0?f:void 0,D=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,P=(p=n.createdAt)!==null&&p!==void 0?p:void 0,H=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:F,emailVerified:j,isAnonymous:X,providerData:Z,stsTokenManager:R}=n;Ue(F&&R,e,"internal-error");const T=Nl.fromJSON(this.name,R);Ue(typeof F=="string",e,"internal-error"),no(v,e.name),no(E,e.name),Ue(typeof j=="boolean",e,"internal-error"),Ue(typeof X=="boolean",e,"internal-error"),no(b,e.name),no(x,e.name),no(M,e.name),no(D,e.name),no(P,e.name),no(H,e.name);const I=new Er({uid:F,auth:e,email:E,emailVerified:j,displayName:v,isAnonymous:X,photoURL:x,phoneNumber:b,tenantId:M,stsTokenManager:T,createdAt:P,lastLoginAt:H});return Z&&Array.isArray(Z)&&(I.providerData=Z.map(N=>Object.assign({},N))),D&&(I._redirectEventId=D),I}static async _fromIdTokenResponse(e,n,r=!1){const o=new Nl;o.updateFromServerResponse(n);const l=new Er({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Rd(l),l}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];Ue(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?gx(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!l?.length,f=new Nl;f.updateFromIdToken(r);const d=new Er({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:u}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new zy(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=new Map;function _s(t){xs(t instanceof Function,"Expected a class definition");let e=uT.get(t);return e?(xs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,uT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}yx.type="NONE";const cT=yx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(t,e,n){return`firebase:${t}:${e}:${n}`}class Dl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:l}=this.auth;this.fullUserKey=Wh(this.userKey,o.apiKey,l),this.fullPersistenceKey=Wh("persistence",o.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ad(this.auth,{idToken:e}).catch(()=>{});return n?Er._fromGetAccountInfoResponse(this.auth,n,e):null}return Er._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Dl(_s(cT),e,r);const o=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=o[0]||_s(cT);const u=Wh(r,e.config.apiKey,e.name);let f=null;for(const p of n)try{const g=await p._get(u);if(g){let v;if(typeof g=="string"){const E=await Ad(e,{idToken:g}).catch(()=>{});if(!E)break;v=await Er._fromGetAccountInfoResponse(e,E,g)}else v=Er._fromJSON(e,g);p!==l&&(f=v),l=p;break}}catch{}const d=o.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!d.length?new Dl(l,e,r):(l=d[0],f&&await l._set(u,f.toJSON()),await Promise.all(n.map(async p=>{if(p!==l)try{await p._remove(u)}catch{}})),new Dl(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Sx(e))return"Blackberry";if(Tx(e))return"Webos";if(_x(e))return"Safari";if((e.includes("chrome/")||Ex(e))&&!e.includes("edge/"))return"Chrome";if(bx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function vx(t=si()){return/firefox\//i.test(t)}function _x(t=si()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ex(t=si()){return/crios\//i.test(t)}function wx(t=si()){return/iemobile/i.test(t)}function bx(t=si()){return/android/i.test(t)}function Sx(t=si()){return/blackberry/i.test(t)}function Tx(t=si()){return/webos/i.test(t)}function r_(t=si()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Hz(t=si()){var e;return r_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Fz(){return PV()&&document.documentMode===10}function Ax(t=si()){return r_(t)||bx(t)||Tx(t)||Sx(t)||/windows phone/i.test(t)||wx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(t,e=[]){let n;switch(t){case"Browser":n=fT(si());break;case"Worker":n=`${fT(si())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Gl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qz{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=l=>new Promise((u,f)=>{try{const d=e(l);u(d)}catch(d){f(d)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $z(t,e={}){return Oo(t,"GET","/v2/passwordPolicy",Do(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gz=6;class Yz{constructor(e){var n,r,o,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=u.minPasswordLength)!==null&&n!==void 0?n:Gz,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,o,l,u,f;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(o=d.containsLowercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsUppercaseLetter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(u=d.containsNumericCharacter)!==null&&u!==void 0?u:!0),d.isValid&&(d.isValid=(f=d.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),d}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hT(this),this.idTokenSubscription=new hT(this),this.beforeStateQueue=new qz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_s(n)),this._initializationPromise=this.queue(async()=>{var r,o,l;if(!this._deleted&&(this.persistenceManager=await Dl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ad(this,{idToken:e}),r=await Er._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ar(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,f=o?._redirectEventId,d=await this.tryRedirectSignIn(e);(!u||u===f)&&d?.user&&(o=d.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Rz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ar(this.app))return Promise.reject(Es(this));const n=e?Sn(e):null;return n&&Ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ar(this.app)?Promise.reject(Es(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ar(this.app)?Promise.reject(Es(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_s(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $z(this),n=new Yz(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await jz(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_s(e)||this._popupRedirectResolver;Ue(n,this,"argument-error"),this.redirectPersistenceManager=await Dl.create(this,[_s(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(f,this,"internal-error"),f.then(()=>{u||l(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,o);return()=>{u=!0,d()}}else{const d=e.addObserver(n);return()=>{u=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Rx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(ar(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&Sz(`Error while retrieving App Check token: ${n.error}`),n?.token}}function Aa(t){return Sn(t)}class hT{constructor(e){this.auth=e,this.observer=null,this.addObserver=qV(n=>this.observer=n)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Xz(t){sm=t}function xx(t){return sm.loadJS(t)}function Qz(){return sm.recaptchaEnterpriseScript}function Wz(){return sm.gapiScript}function Zz(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Jz{constructor(){this.enterprise=new e3}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class e3{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const t3="recaptcha-enterprise",Ix="NO_RECAPTCHA";class n3{constructor(e){this.type=t3,this.auth=Aa(e)}async verify(e="verify",n=!1){async function r(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,f)=>{Mz(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const p=new Oz(d);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,u(p.siteKey)}}).catch(d=>{f(d)})})}function o(l,u,f){const d=window.grecaptcha;aT(d)?d.enterprise.ready(()=>{d.enterprise.execute(l,{action:e}).then(p=>{u(p)}).catch(()=>{u(Ix)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Jz().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{r(this.auth).then(f=>{if(!n&&aT(window.grecaptcha))o(f,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let d=Qz();d.length!==0&&(d+=f),xx(d).then(()=>{o(f,l,u)}).catch(p=>{u(p)})}}).catch(f=>{u(f)})})}}async function dT(t,e,n,r=!1,o=!1){const l=new n3(t);let u;if(o)u=Ix;else try{u=await l.verify(n)}catch{u=await l.verify(n,!0)}const f=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const d=f.phoneEnrollmentInfo.phoneNumber,p=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const d=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return r?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Uy(t,e,n,r,o){var l;if(!((l=t._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await dT(t,e,n,n==="getOobCode");return r(t,u)}else return r(t,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await dT(t,e,n,n==="getOobCode");return r(t,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i3(t,e){const n=pv(t,"auth");if(n.isInitialized()){const o=n.getImmediate(),l=n.getOptions();if(pa(l,e??{}))return o;br(o,"already-initialized")}return n.initialize({options:e})}function r3(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(_s);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function s3(t,e,n){const r=Aa(t);Ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,l=Cx(e),{host:u,port:f}=o3(e),d=f===null?"":`:${f}`,p={url:`${l}//${u}${d}/`},g=Object.freeze({host:u,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Ue(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ue(pa(p,r.config.emulator)&&pa(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,$l(u)?(AA(`${l}//${u}${d}`),RA("Auth",!0)):a3()}function Cx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function o3(t){const e=Cx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const l=o[1];return{host:l,port:mT(r.substr(l.length+1))}}else{const[l,u]=r.split(":");return{host:l,port:mT(u)}}}function mT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function a3(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vs("not implemented")}_getIdTokenResponse(e){return vs("not implemented")}_linkToIdToken(e,n){return vs("not implemented")}_getReauthenticationResolver(e){return vs("not implemented")}}async function l3(t,e){return Oo(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u3(t,e){return tf(t,"POST","/v1/accounts:signInWithPassword",Do(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c3(t,e){return tf(t,"POST","/v1/accounts:signInWithEmailLink",Do(t,e))}async function f3(t,e){return tf(t,"POST","/v1/accounts:signInWithEmailLink",Do(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends s_{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new zc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new zc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uy(e,n,"signInWithPassword",u3);case"emailLink":return c3(e,{email:this._email,oobCode:this._password});default:br(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uy(e,r,"signUpPassword",l3);case"emailLink":return f3(e,{idToken:n,email:this._email,oobCode:this._password});default:br(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ol(t,e){return tf(t,"POST","/v1/accounts:signInWithIdp",Do(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3="http://localhost";class Ea extends s_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ea(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):br("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=n,l=e_(n,["providerId","signInMethod"]);if(!r||!o)return null;const u=new Ea(r,o);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return Ol(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ol(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ol(e,n)}buildRequest(){const e={requestUri:h3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Yc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d3(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function m3(t){const e=ac(lc(t)).link,n=e?ac(lc(e)).deep_link_id:null,r=ac(lc(t)).deep_link_id;return(r?ac(lc(r)).link:null)||r||n||e||t}class o_{constructor(e){var n,r,o,l,u,f;const d=ac(lc(e)),p=(n=d.apiKey)!==null&&n!==void 0?n:null,g=(r=d.oobCode)!==null&&r!==void 0?r:null,v=d3((o=d.mode)!==null&&o!==void 0?o:null);Ue(p&&g&&v,"argument-error"),this.apiKey=p,this.operation=v,this.code=g,this.continueUrl=(l=d.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(u=d.lang)!==null&&u!==void 0?u:null,this.tenantId=(f=d.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const n=m3(e);try{return new o_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(){this.providerId=Jl.PROVIDER_ID}static credential(e,n){return zc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=o_.parseLink(n);return Ue(r,"argument-error"),zc._fromEmailAndCode(e,r.code,r.tenantId)}}Jl.PROVIDER_ID="password";Jl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Jl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf extends Nx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao extends nf{constructor(){super("facebook.com")}static credential(e){return Ea._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ao.credentialFromTaggedObject(e)}static credentialFromError(e){return ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ao.credential(e.oauthAccessToken)}catch{return null}}}ao.FACEBOOK_SIGN_IN_METHOD="facebook.com";ao.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo extends nf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ea._fromParams({providerId:lo.PROVIDER_ID,signInMethod:lo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return lo.credentialFromTaggedObject(e)}static credentialFromError(e){return lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return lo.credential(n,r)}catch{return null}}}lo.GOOGLE_SIGN_IN_METHOD="google.com";lo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo extends nf{constructor(){super("github.com")}static credential(e){return Ea._fromParams({providerId:uo.PROVIDER_ID,signInMethod:uo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return uo.credentialFromTaggedObject(e)}static credentialFromError(e){return uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return uo.credential(e.oauthAccessToken)}catch{return null}}}uo.GITHUB_SIGN_IN_METHOD="github.com";uo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co extends nf{constructor(){super("twitter.com")}static credential(e,n){return Ea._fromParams({providerId:co.PROVIDER_ID,signInMethod:co.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return co.credentialFromTaggedObject(e)}static credentialFromError(e){return co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return co.credential(n,r)}catch{return null}}}co.TWITTER_SIGN_IN_METHOD="twitter.com";co.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p3(t,e){return tf(t,"POST","/v1/accounts:signUp",Do(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const l=await Er._fromIdTokenResponse(e,r,o),u=pT(r);return new wa({user:l,providerId:u,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=pT(r);return new wa({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function pT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd extends Cs{constructor(e,n,r,o){var l;super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,xd.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new xd(e,n,r,o)}}function Dx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?xd._fromErrorAndOperation(t,l,e,r):l})}async function g3(t,e,n=!1){const r=await Lc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return wa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y3(t,e,n=!1){const{auth:r}=t;if(ar(r.app))return Promise.reject(Es(r));const o="reauthenticate";try{const l=await Lc(t,Dx(r,o,e,t),n);Ue(l.idToken,r,"internal-error");const u=i_(l.idToken);Ue(u,r,"internal-error");const{sub:f}=u;return Ue(t.uid===f,r,"user-mismatch"),wa._forOperation(t,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&br(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ox(t,e,n=!1){if(ar(t.app))return Promise.reject(Es(t));const r="signIn",o=await Dx(t,r,e),l=await wa._fromIdTokenResponse(t,r,o);return n||await t._updateCurrentUser(l.user),l}async function v3(t,e){return Ox(Aa(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mx(t){const e=Aa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _3(t,e,n){if(ar(t.app))return Promise.reject(Es(t));const r=Aa(t),u=await Uy(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",p3).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&Mx(t),d}),f=await wa._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(f.user),f}function E3(t,e,n){return ar(t.app)?Promise.reject(Es(t)):v3(Sn(t),Jl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Mx(t),r})}function w3(t,e,n,r){return Sn(t).onIdTokenChanged(e,n,r)}function b3(t,e,n){return Sn(t).beforeAuthStateChanged(e,n)}function S3(t,e,n,r){return Sn(t).onAuthStateChanged(e,n,r)}function T3(t){return Sn(t).signOut()}const Id="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Id,"1"),this.storage.removeItem(Id),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=1e3,R3=10;class Vx extends kx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ax(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,f,d)=>{this.notifyListeners(u,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(r);!n&&this.localCache[r]===u||this.notifyListeners(r,u)},l=this.storage.getItem(r);Fz()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,R3):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},A3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Vx.type="LOCAL";const x3=Vx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px extends kx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Px.type="SESSION";const Lx=Px;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I3(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new om(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:l}=n.data,u=this.handlersMap[o];if(!u?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const f=Array.from(u).map(async p=>p(n.origin,l)),d=await I3(f);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}om.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,u;return new Promise((f,d)=>{const p=a_("",20);o.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},r);u={messageChannel:o,onMessage(v){const E=v;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(g),l=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(E.data.response);break;default:clearTimeout(g),clearTimeout(l),d(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(){return window}function N3(t){Gr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(){return typeof Gr().WorkerGlobalScope<"u"&&typeof Gr().importScripts=="function"}async function D3(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function O3(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function M3(){return zx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="firebaseLocalStorageDb",k3=1,Cd="firebaseLocalStorage",Bx="fbase_key";class rf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function am(t,e){return t.transaction([Cd],e?"readwrite":"readonly").objectStore(Cd)}function V3(){const t=indexedDB.deleteDatabase(Ux);return new rf(t).toPromise()}function By(){const t=indexedDB.open(Ux,k3);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Cd,{keyPath:Bx})}catch(o){n(o)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Cd)?e(r):(r.close(),await V3(),e(await By()))})})}async function gT(t,e,n){const r=am(t,!0).put({[Bx]:e,value:n});return new rf(r).toPromise()}async function P3(t,e){const n=am(t,!1).get(e),r=await new rf(n).toPromise();return r===void 0?null:r.value}function yT(t,e){const n=am(t,!0).delete(e);return new rf(n).toPromise()}const L3=800,z3=3;class jx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await By(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>z3)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=om._getInstance(M3()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await D3(),!this.activeServiceWorker)return;this.sender=new C3(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||O3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await By();return await gT(e,Id,"1"),await yT(e,Id),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>gT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>P3(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>yT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=am(o,!1).getAll();return new rf(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),L3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jx.type="LOCAL";const U3=jx;new ef(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B3(t,e){return e?_s(e):(Ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_ extends s_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ol(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ol(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ol(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function j3(t){return Ox(t.auth,new l_(t),t.bypassAuthState)}function H3(t){const{auth:e,user:n}=t;return Ue(n,e,"internal-error"),y3(n,new l_(t),t.bypassAuthState)}async function F3(t){const{auth:e,user:n}=t;return Ue(n,e,"internal-error"),g3(n,new l_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e,n,r,o,l=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:l,error:u,type:f}=e;if(u){this.reject(u);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return j3;case"linkViaPopup":case"linkViaRedirect":return F3;case"reauthViaPopup":case"reauthViaRedirect":return H3;default:br(this.auth,"internal-error")}}resolve(e){xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3=new ef(2e3,1e4);class Tl extends Hx{constructor(e,n,r,o,l){super(e,n,o,l),this.provider=r,this.authWindow=null,this.pollId=null,Tl.currentPopupAction&&Tl.currentPopupAction.cancel(),Tl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){xs(this.filter.length===1,"Popup operations only handle one event");const e=a_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($r(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject($r(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Tl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($r(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,q3.get())};e()}}Tl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3="pendingRedirect",Zh=new Map;class G3 extends Hx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Zh.get(this.auth._key());if(!e){try{const r=await Y3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Zh.set(this.auth._key(),e)}return this.bypassAuthState||Zh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Y3(t,e){const n=Q3(e),r=X3(t);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function K3(t,e){Zh.set(t._key(),e)}function X3(t){return _s(t._redirectPersistence)}function Q3(t){return Wh($3,t.config.apiKey,t.name)}async function W3(t,e,n=!1){if(ar(t.app))return Promise.reject(Es(t));const r=Aa(t),o=B3(r,e),u=await new G3(r,o,n).execute();return u&&!n&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3=10*60*1e3;class J3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!e9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Fx(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError($r(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Z3&&this.cachedEventUids.clear(),this.cachedEventUids.has(vT(e))}saveEventToCache(e){this.cachedEventUids.add(vT(e)),this.lastProcessedEventTime=Date.now()}}function vT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Fx({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function e9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t9(t,e={}){return Oo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i9=/^https?/;async function r9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await t9(t);for(const n of e)try{if(s9(n))return}catch{}br(t,"unauthorized-domain")}function s9(t){const e=Ly(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===r}if(!i9.test(n))return!1;if(n9.test(t))return r===t;const o=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o9=new ef(3e4,6e4);function _T(){const t=Gr().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function a9(t){return new Promise((e,n)=>{var r,o,l;function u(){_T(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_T(),n($r(t,"network-request-failed"))},timeout:o9.get()})}if(!((o=(r=Gr().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Gr().gapi)===null||l===void 0)&&l.load)u();else{const f=Zz("iframefcb");return Gr()[f]=()=>{gapi.load?u():n($r(t,"network-request-failed"))},xx(`${Wz()}?onload=${f}`).catch(d=>n(d))}}).catch(e=>{throw Jh=null,e})}let Jh=null;function l9(t){return Jh=Jh||a9(t),Jh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u9=new ef(5e3,15e3),c9="__/auth/iframe",f9="emulator/auth/iframe",h9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},d9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function m9(t){const e=t.config;Ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?n_(e,f9):`https://${t.config.authDomain}/${c9}`,r={apiKey:e.apiKey,appName:t.name,v:Gl},o=d9.get(t.config.apiHost);o&&(r.eid=o);const l=t._getFrameworks();return l.length&&(r.fw=l.join(",")),`${n}?${Yc(r).slice(1)}`}async function p9(t){const e=await l9(t),n=Gr().gapi;return Ue(n,t,"internal-error"),e.open({where:document.body,url:m9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:h9,dontclear:!0},r=>new Promise(async(o,l)=>{await r.restyle({setHideOnLeave:!1});const u=$r(t,"network-request-failed"),f=Gr().setTimeout(()=>{l(u)},u9.get());function d(){Gr().clearTimeout(f),o(r)}r.ping(d).then(d,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},y9=500,v9=600,_9="_blank",E9="http://localhost";class ET{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function w9(t,e,n,r=y9,o=v9){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const d=Object.assign(Object.assign({},g9),{width:r.toString(),height:o.toString(),top:l,left:u}),p=si().toLowerCase();n&&(f=Ex(p)?_9:n),vx(p)&&(e=e||E9,d.scrollbars="yes");const g=Object.entries(d).reduce((E,[b,x])=>`${E}${b}=${x},`,"");if(Hz(p)&&f!=="_self")return b9(e||"",f),new ET(null);const v=window.open(e||"",f,g);Ue(v,t,"popup-blocked");try{v.focus()}catch{}return new ET(v)}function b9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S9="__/auth/handler",T9="emulator/auth/handler",A9=encodeURIComponent("fac");async function wT(t,e,n,r,o,l){Ue(t.config.authDomain,t,"auth-domain-config-required"),Ue(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Gl,eventId:o};if(e instanceof Nx){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",FV(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))u[g]=v}if(e instanceof nf){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(u.scopes=g.join(","))}t.tenantId&&(u.tid=t.tenantId);const f=u;for(const g of Object.keys(f))f[g]===void 0&&delete f[g];const d=await t._getAppCheckToken(),p=d?`#${A9}=${encodeURIComponent(d)}`:"";return`${R9(t)}?${Yc(f).slice(1)}${p}`}function R9({config:t}){return t.emulator?n_(t,T9):`https://${t.authDomain}/${S9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg="webStorageSupport";class x9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lx,this._completeRedirectFn=W3,this._overrideRedirectResult=K3}async _openPopup(e,n,r,o){var l;xs((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const u=await wT(e,n,r,Ly(),o);return w9(e,u,a_())}async _openRedirect(e,n,r,o){await this._originValidation(e);const l=await wT(e,n,r,Ly(),o);return N3(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:l}=this.eventManagers[n];return o?Promise.resolve(o):(xs(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await p9(e),r=new J3(e);return n.register("authEvent",o=>(Ue(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bg,{type:Bg},o=>{var l;const u=(l=o?.[0])===null||l===void 0?void 0:l[Bg];u!==void 0&&n(!!u),br(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=r9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ax()||_x()||r_()}}const I9=x9;var bT="@firebase/auth",ST="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function D9(t){Ll(new ga("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=r.options;Ue(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:u,authDomain:f,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rx(t)},p=new Kz(r,o,l,d);return r3(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ll(new ga("auth-internal",e=>{const n=Aa(e.getProvider("auth").getImmediate());return(r=>new C9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vo(bT,ST,N9(t)),vo(bT,ST,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9=5*60,M9=TA("authIdTokenMaxAge")||O9;let TT=null;const k9=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>M9)return;const o=n?.token;TT!==o&&(TT=o,await fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function V9(t=NA()){const e=pv(t,"auth");if(e.isInitialized())return e.getImmediate();const n=i3(t,{popupRedirectResolver:I9,persistence:[U3,x3,Lx]}),r=TA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const u=k9(l.toString());b3(n,u,()=>u(n.currentUser)),w3(n,f=>u(f))}}const o=bA("auth");return o&&s3(n,`http://${o}`),n}function P9(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Xz({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=o=>{const l=$r("internal-error");l.customData=o,n(l)},r.type="text/javascript",r.charset="UTF-8",P9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});D9("Browser");const L9={apiKey:"AIzaSyByTZ08eCsc2wv0VIWUHNtHSdmAA_JI5hM",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},qx=CA(L9),Sr=tz(qx),Nd=V9(qx),Hi={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},yi={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function z9(){const[t,e]=C.useState(""),[n,r]=C.useState(""),[o,l]=C.useState(!1),[u,f]=C.useState(!1),[d,p]=C.useState(""),g=async E=>{E.preventDefault(),f(!0),p("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(yi.INVALID_EMAIL);if(n.length<6)throw new Error(yi.WEAK_PASSWORD);const x=await _3(Nd,t,n);console.log("User created successfully:",x.user.uid)}catch(b){console.error("Sign up error:",b);let x="Failed to create account";b.code==="auth/email-already-in-use"?x=yi.EMAIL_IN_USE:b.code==="auth/invalid-email"?x=yi.INVALID_EMAIL:b.code==="auth/weak-password"?x=yi.WEAK_PASSWORD:b.code==="auth/operation-not-allowed"?x="Email/password accounts are not enabled. Please contact support.":b.message&&(x=b.message),p(x)}finally{f(!1)}},v=async E=>{E.preventDefault(),f(!0),p("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(yi.INVALID_EMAIL);const x=await E3(Nd,t,n);console.log("User signed in successfully:",x.user.uid)}catch(b){console.error("Sign in error:",b);let x="Failed to sign in";b.code==="auth/user-not-found"?x=yi.USER_NOT_FOUND:b.code==="auth/wrong-password"?x=yi.WRONG_PASSWORD:b.code==="auth/invalid-email"?x=yi.INVALID_EMAIL:b.code==="auth/user-disabled"?x="This account has been disabled. Please contact support.":b.code==="auth/too-many-requests"?x=yi.TOO_MANY_REQUESTS:b.message&&(x=b.message),p(x)}finally{f(!1)}};return K.jsx("div",{className:"auth-window-container",children:K.jsxs("div",{className:"auth-window",children:[K.jsxs("div",{className:"auth-window-header",children:[K.jsx("h2",{className:"auth-window-title",children:o?"Create Account":"Welcome Back"}),K.jsx("p",{className:"auth-window-subtitle",children:o?"Join the platform to start building your boards":"Sign in to access your boards and continue your work"})]}),K.jsxs("form",{onSubmit:o?g:v,className:"auth-form",children:[K.jsx("div",{className:"auth-input-group",children:K.jsx("input",{type:"email",placeholder:"Email address",value:t,onChange:E=>e(E.target.value),required:!0,className:"auth-input"})}),K.jsx("div",{className:"auth-input-group",children:K.jsx("input",{type:"password",placeholder:"Password",value:n,onChange:E=>r(E.target.value),required:!0,className:"auth-input"})}),K.jsx("button",{type:"submit",disabled:u,className:`auth-submit-btn ${u?"loading":""}`,children:u?K.jsx("div",{className:"loading-spinner"}):o?"Create Account":"Sign In"}),d&&K.jsx("div",{className:"auth-error",children:d})]}),K.jsxs("div",{className:"auth-switch",children:[K.jsx("span",{className:"auth-switch-text",children:o?"Already have an account?":"Don't have an account?"}),K.jsx("button",{type:"button",onClick:()=>l(!o),className:"auth-switch-btn",children:o?"Sign In":"Sign Up"})]})]})})}var jg={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var AT;function U9(){return AT||(AT=1,function(t){(function(){var e={}.hasOwnProperty;function n(){for(var l="",u=0;u<arguments.length;u++){var f=arguments[u];f&&(l=o(l,r(f)))}return l}function r(l){if(typeof l=="string"||typeof l=="number")return l;if(typeof l!="object")return"";if(Array.isArray(l))return n.apply(null,l);if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]"))return l.toString();var u="";for(var f in l)e.call(l,f)&&l[f]&&(u=o(u,f));return u}function o(l,u){return u?l?l+" "+u:l+u:l}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(jg)),jg.exports}var B9=U9();const Mt=Uc(B9),eu=!!(typeof window<"u"&&window.document&&window.document.createElement);var jy=!1,Hy=!1;try{var Hg={get passive(){return jy=!0},get once(){return Hy=jy=!0}};eu&&(window.addEventListener("test",Hg,Hg),window.removeEventListener("test",Hg,!0))}catch{}function $x(t,e,n,r){if(r&&typeof r!="boolean"&&!Hy){var o=r.once,l=r.capture,u=n;!Hy&&o&&(u=n.__once||function f(d){this.removeEventListener(e,f,l),n.call(this,d)},n.__once=u),t.addEventListener(e,u,jy?r:l)}t.addEventListener(e,n,r)}function lm(t){return t&&t.ownerDocument||document}function Fy(t,e,n,r){var o=r&&typeof r!="boolean"?r.capture:r;t.removeEventListener(e,n,o),n.__once&&t.removeEventListener(e,n.__once,o)}var zh;function RT(t){if((!zh&&zh!==0||t)&&eu){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),zh=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return zh}function j9(){return C.useState(null)}function H9(t){const e=C.useRef(t);return C.useEffect(()=>{e.current=t},[t]),e}function qy(t){const e=H9(t);return C.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const xT=t=>!t||typeof t=="function"?t:e=>{t.current=e};function F9(t,e){const n=xT(t),r=xT(e);return o=>{n&&n(o),r&&r(o)}}function Gx(t,e){return C.useMemo(()=>F9(t,e),[t,e])}function q9(t){const e=C.useRef(t);return e.current=t,e}function $9(t){const e=q9(t);C.useEffect(()=>()=>e.current(),[])}function G9(t){var e=lm(t);return e&&e.defaultView||window}function Y9(t,e){return G9(t).getComputedStyle(t,e)}var K9=/([A-Z])/g;function X9(t){return t.replace(K9,"-$1").toLowerCase()}var Q9=/^ms-/;function Uh(t){return X9(t).replace(Q9,"-ms-")}var W9=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function Z9(t){return!!(t&&W9.test(t))}function da(t,e){var n="",r="";if(typeof e=="string")return t.style.getPropertyValue(Uh(e))||Y9(t).getPropertyValue(Uh(e));Object.keys(e).forEach(function(o){var l=e[o];!l&&l!==0?t.style.removeProperty(Uh(o)):Z9(o)?r+=o+"("+l+") ":n+=Uh(o)+": "+l+";"}),r&&(n+="transform: "+r+";"),t.style.cssText+=";"+n}function Dd(t,e,n,r){return $x(t,e,n,r),function(){Fy(t,e,n,r)}}function J9(t,e,n,r){if(r===void 0&&(r=!0),t){var o=document.createEvent("HTMLEvents");o.initEvent(e,n,r),t.dispatchEvent(o)}}function eU(t){var e=da(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function tU(t,e,n){n===void 0&&(n=5);var r=!1,o=setTimeout(function(){r||J9(t,"transitionend",!0)},e+n),l=Dd(t,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(o),l()}}function Yx(t,e,n,r){n==null&&(n=eU(t)||0);var o=tU(t,n,r),l=Dd(t,"transitionend",e);return function(){o(),l()}}function Fg(t){t===void 0&&(t=lm());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function IT(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}function nU(){const t=C.useRef(!0),e=C.useRef(()=>t.current);return C.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function iU(t){const e=C.useRef(t);return e.current=t,e}function rU(t){const e=iU(t);C.useEffect(()=>()=>e.current(),[])}function sU(t){const e=C.useRef(null);return C.useEffect(()=>{e.current=t}),e.current}function oU(t){const e=C.useRef(t);return C.useEffect(()=>{e.current=t},[t]),e}function aa(t){const e=oU(t);return C.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const aU="data-rr-ui-";function lU(t){return`${aU}${t}`}function uU(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const CT=lU("modal-open");class u_{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return uU(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",o=this.getElement();e.style={overflow:o.style.overflow,[r]:o.style[r]},e.scrollBarWidth&&(n[r]=`${parseInt(da(o,r)||"0",10)+e.scrollBarWidth}px`),o.setAttribute(CT,""),da(o,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(CT),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const Kx=C.createContext(eu?window:void 0);Kx.Provider;function c_(){return C.useContext(Kx)}const qg=(t,e)=>eu?t==null?(e||lm()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function cU(t,e){const n=c_(),[r,o]=C.useState(()=>qg(t,n?.document));if(!r){const l=qg(t);l&&o(l)}return C.useEffect(()=>{},[e,r]),C.useEffect(()=>{const l=qg(t);l!==r&&o(l)},[t,r]),r}const NT=t=>!t||typeof t=="function"?t:e=>{t.current=e};function fU(t,e){const n=NT(t),r=NT(e);return o=>{n&&n(o),r&&r(o)}}function f_(t,e){return C.useMemo(()=>fU(t,e),[t,e])}const hU=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",dU=typeof document<"u",DT=dU||hU?C.useLayoutEffect:C.useEffect;function mU(t){return t.code==="Escape"||t.keyCode===27}function pU(){const t=C.version.split(".");return{major:+t[0],minor:+t[1],patch:+t[2]}}function um(t){if(!t||typeof t=="function")return null;const{major:e}=pU();return e>=19?t.props.ref:t.ref}function gU({children:t,in:e,onExited:n,mountOnEnter:r,unmountOnExit:o}){const l=C.useRef(null),u=C.useRef(e),f=aa(n);C.useEffect(()=>{e?u.current=!0:f(l.current)},[e,f]);const d=f_(l,um(t)),p=C.cloneElement(t,{ref:d});return e?p:o||!u.current&&r?null:p}const yU=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function vU(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function _U(t){let{onEnter:e,onEntering:n,onEntered:r,onExit:o,onExiting:l,onExited:u,addEndListener:f,children:d}=t,p=vU(t,yU);const g=C.useRef(null),v=f_(g,um(d)),E=j=>X=>{j&&g.current&&j(g.current,X)},b=C.useCallback(E(e),[e]),x=C.useCallback(E(n),[n]),M=C.useCallback(E(r),[r]),D=C.useCallback(E(o),[o]),P=C.useCallback(E(l),[l]),H=C.useCallback(E(u),[u]),F=C.useCallback(E(f),[f]);return Object.assign({},p,{nodeRef:g},e&&{onEnter:b},n&&{onEntering:x},r&&{onEntered:M},o&&{onExit:D},l&&{onExiting:P},u&&{onExited:H},f&&{addEndListener:F},{children:typeof d=="function"?(j,X)=>d(j,Object.assign({},X,{ref:v})):C.cloneElement(d,{ref:v})})}const EU=["component"];function wU(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}const bU=C.forwardRef((t,e)=>{let{component:n}=t,r=wU(t,EU);const o=_U(r);return K.jsx(n,Object.assign({ref:e},o))});function SU({in:t,onTransition:e}){const n=C.useRef(null),r=C.useRef(!0),o=aa(e);return DT(()=>{if(!n.current)return;let l=!1;return o({in:t,element:n.current,initial:r.current,isStale:()=>l}),()=>{l=!0}},[t,o]),DT(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function TU({children:t,in:e,onExited:n,onEntered:r,transition:o}){const[l,u]=C.useState(!e);e&&l&&u(!1);const f=SU({in:!!e,onTransition:p=>{const g=()=>{p.isStale()||(p.in?r?.(p.element,p.initial):(u(!0),n?.(p.element)))};Promise.resolve(o(p)).then(g,v=>{throw p.in||u(!0),v})}}),d=f_(f,um(t));return l&&!e?null:C.cloneElement(t,{ref:d})}function OT(t,e,n){return t?K.jsx(bU,Object.assign({},n,{component:t})):e?K.jsx(TU,Object.assign({},n,{transition:e})):K.jsx(gU,Object.assign({},n))}const AU=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function RU(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}let $g;function xU(t){return $g||($g=new u_({ownerDocument:t?.document})),$g}function IU(t){const e=c_(),n=t||xU(e),r=C.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:C.useCallback(o=>{r.current.dialog=o},[]),setBackdropRef:C.useCallback(o=>{r.current.backdrop=o},[])})}const Xx=C.forwardRef((t,e)=>{let{show:n=!1,role:r="dialog",className:o,style:l,children:u,backdrop:f=!0,keyboard:d=!0,onBackdropClick:p,onEscapeKeyDown:g,transition:v,runTransition:E,backdropTransition:b,runBackdropTransition:x,autoFocus:M=!0,enforceFocus:D=!0,restoreFocus:P=!0,restoreFocusOptions:H,renderDialog:F,renderBackdrop:j=Ve=>K.jsx("div",Object.assign({},Ve)),manager:X,container:Z,onShow:R,onHide:T=()=>{},onExit:I,onExited:N,onExiting:U,onEnter:B,onEntering:A,onEntered:k}=t,q=RU(t,AU);const V=c_(),G=cU(Z),ee=IU(X),J=nU(),L=sU(n),[Y,ie]=C.useState(!n),ne=C.useRef(null);C.useImperativeHandle(e,()=>ee,[ee]),eu&&!L&&n&&(ne.current=Fg(V?.document)),n&&Y&&ie(!1);const he=aa(()=>{if(ee.add(),Ce.current=Dd(document,"keydown",ve),Se.current=Dd(document,"focus",()=>setTimeout(we),!0),R&&R(),M){var Ve,Yt;const Pe=Fg((Ve=(Yt=ee.dialog)==null?void 0:Yt.ownerDocument)!=null?Ve:V?.document);ee.dialog&&Pe&&!IT(ee.dialog,Pe)&&(ne.current=Pe,ee.dialog.focus())}}),_e=aa(()=>{if(ee.remove(),Ce.current==null||Ce.current(),Se.current==null||Se.current(),P){var Ve;(Ve=ne.current)==null||Ve.focus==null||Ve.focus(H),ne.current=null}});C.useEffect(()=>{!n||!G||he()},[n,G,he]),C.useEffect(()=>{Y&&_e()},[Y,_e]),rU(()=>{_e()});const we=aa(()=>{if(!D||!J()||!ee.isTopModal())return;const Ve=Fg(V?.document);ee.dialog&&Ve&&!IT(ee.dialog,Ve)&&ee.dialog.focus()}),Oe=aa(Ve=>{Ve.target===Ve.currentTarget&&(p?.(Ve),f===!0&&T())}),ve=aa(Ve=>{d&&mU(Ve)&&ee.isTopModal()&&(g?.(Ve),Ve.defaultPrevented||T())}),Se=C.useRef(),Ce=C.useRef(),je=(...Ve)=>{ie(!0),N?.(...Ve)};if(!G)return null;const dt=Object.assign({role:r,ref:ee.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},q,{style:l,className:o,tabIndex:-1});let mt=F?F(dt):K.jsx("div",Object.assign({},dt,{children:C.cloneElement(u,{role:"document"})}));mt=OT(v,E,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:I,onExiting:U,onExited:je,onEnter:B,onEntering:A,onEntered:k,children:mt});let pt=null;return f&&(pt=j({ref:ee.setBackdropRef,onClick:Oe}),pt=OT(b,x,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:pt})),K.jsx(K.Fragment,{children:bl.createPortal(K.jsxs(K.Fragment,{children:[pt,mt]}),G)})});Xx.displayName="Modal";const CU=Object.assign(Xx,{Manager:u_});function NU(t,e){return t.classList?t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function DU(t,e){t.classList?t.classList.add(e):NU(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}var OU=Function.prototype.bind.call(Function.prototype.call,[].slice);function dl(t,e){return OU(t.querySelectorAll(e))}function MT(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function MU(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=MT(t.className,e):t.setAttribute("class",MT(t.className&&t.className.baseVal||"",e))}const ml={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class kU extends u_{adjustAndStore(e,n,r){const o=n.style[e];n.dataset[e]=o,da(n,{[e]:`${parseFloat(da(n,e))+r}px`})}restore(e,n){const r=n.dataset[e];r!==void 0&&(delete n.dataset[e],da(n,{[e]:r}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(DU(n,"modal-open"),!e.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";dl(n,ml.FIXED_CONTENT).forEach(l=>this.adjustAndStore(r,l,e.scrollBarWidth)),dl(n,ml.STICKY_CONTENT).forEach(l=>this.adjustAndStore(o,l,-e.scrollBarWidth)),dl(n,ml.NAVBAR_TOGGLER).forEach(l=>this.adjustAndStore(o,l,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();MU(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";dl(n,ml.FIXED_CONTENT).forEach(l=>this.restore(r,l)),dl(n,ml.STICKY_CONTENT).forEach(l=>this.restore(o,l)),dl(n,ml.NAVBAR_TOGGLER).forEach(l=>this.restore(o,l))}}let Gg;function VU(t){return Gg||(Gg=new kU(t)),Gg}function PU(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function $y(t,e){return $y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},$y(t,e)}function LU(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,$y(t,e)}var Yg={exports:{}},Kg,kT;function zU(){if(kT)return Kg;kT=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Kg=t,Kg}var Xg,VT;function UU(){if(VT)return Xg;VT=1;var t=zU();function e(){}function n(){}return n.resetWarningCache=e,Xg=function(){function r(u,f,d,p,g,v){if(v!==t){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}r.isRequired=r;function o(){return r}var l={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:e};return l.PropTypes=l,l},Xg}var PT;function BU(){return PT||(PT=1,Yg.exports=UU()()),Yg.exports}var jU=BU();const ws=Uc(jU),LT={disabled:!1},Qx=fe.createContext(null);var HU=function(e){return e.scrollTop},hc="unmounted",oa="exited",so="entering",la="entered",Gy="exiting",Ns=function(t){LU(e,t);function e(r,o){var l;l=t.call(this,r,o)||this;var u=o,f=u&&!u.isMounting?r.enter:r.appear,d;return l.appearStatus=null,r.in?f?(d=oa,l.appearStatus=so):d=la:r.unmountOnExit||r.mountOnEnter?d=hc:d=oa,l.state={status:d},l.nextCallback=null,l}e.getDerivedStateFromProps=function(o,l){var u=o.in;return u&&l.status===hc?{status:oa}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(o){var l=null;if(o!==this.props){var u=this.state.status;this.props.in?u!==so&&u!==la&&(l=so):(u===so||u===la)&&(l=Gy)}this.updateStatus(!1,l)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var o=this.props.timeout,l,u,f;return l=u=f=o,o!=null&&typeof o!="number"&&(l=o.exit,u=o.enter,f=o.appear!==void 0?o.appear:u),{exit:l,enter:u,appear:f}},n.updateStatus=function(o,l){if(o===void 0&&(o=!1),l!==null)if(this.cancelNextCallback(),l===so){if(this.props.unmountOnExit||this.props.mountOnEnter){var u=this.props.nodeRef?this.props.nodeRef.current:bl.findDOMNode(this);u&&HU(u)}this.performEnter(o)}else this.performExit();else this.props.unmountOnExit&&this.state.status===oa&&this.setState({status:hc})},n.performEnter=function(o){var l=this,u=this.props.enter,f=this.context?this.context.isMounting:o,d=this.props.nodeRef?[f]:[bl.findDOMNode(this),f],p=d[0],g=d[1],v=this.getTimeouts(),E=f?v.appear:v.enter;if(!o&&!u||LT.disabled){this.safeSetState({status:la},function(){l.props.onEntered(p)});return}this.props.onEnter(p,g),this.safeSetState({status:so},function(){l.props.onEntering(p,g),l.onTransitionEnd(E,function(){l.safeSetState({status:la},function(){l.props.onEntered(p,g)})})})},n.performExit=function(){var o=this,l=this.props.exit,u=this.getTimeouts(),f=this.props.nodeRef?void 0:bl.findDOMNode(this);if(!l||LT.disabled){this.safeSetState({status:oa},function(){o.props.onExited(f)});return}this.props.onExit(f),this.safeSetState({status:Gy},function(){o.props.onExiting(f),o.onTransitionEnd(u.exit,function(){o.safeSetState({status:oa},function(){o.props.onExited(f)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(o,l){l=this.setNextCallback(l),this.setState(o,l)},n.setNextCallback=function(o){var l=this,u=!0;return this.nextCallback=function(f){u&&(u=!1,l.nextCallback=null,o(f))},this.nextCallback.cancel=function(){u=!1},this.nextCallback},n.onTransitionEnd=function(o,l){this.setNextCallback(l);var u=this.props.nodeRef?this.props.nodeRef.current:bl.findDOMNode(this),f=o==null&&!this.props.addEndListener;if(!u||f){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[u,this.nextCallback],p=d[0],g=d[1];this.props.addEndListener(p,g)}o!=null&&setTimeout(this.nextCallback,o)},n.render=function(){var o=this.state.status;if(o===hc)return null;var l=this.props,u=l.children;l.in,l.mountOnEnter,l.unmountOnExit,l.appear,l.enter,l.exit,l.timeout,l.addEndListener,l.onEnter,l.onEntering,l.onEntered,l.onExit,l.onExiting,l.onExited,l.nodeRef;var f=PU(l,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return fe.createElement(Qx.Provider,{value:null},typeof u=="function"?u(o,f):fe.cloneElement(fe.Children.only(u),f))},e}(fe.Component);Ns.contextType=Qx;Ns.propTypes={};function pl(){}Ns.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:pl,onEntering:pl,onEntered:pl,onExit:pl,onExiting:pl,onExited:pl};Ns.UNMOUNTED=hc;Ns.EXITED=oa;Ns.ENTERING=so;Ns.ENTERED=la;Ns.EXITING=Gy;function zT(t,e){const n=da(t,e)||"",r=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*r}function FU(t,e){const n=zT(t,"transitionDuration"),r=zT(t,"transitionDelay"),o=Yx(t,l=>{l.target===t&&(o(),e(l))},n+r)}function qU(t){t.offsetHeight}function $U(t){return t&&"setState"in t?bl.findDOMNode(t):t??null}const Wx=fe.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:r,onExiting:o,onExited:l,addEndListener:u,children:f,childRef:d,...p},g)=>{const v=C.useRef(null),E=Gx(v,d),b=Z=>{E($U(Z))},x=Z=>R=>{Z&&v.current&&Z(v.current,R)},M=C.useCallback(x(t),[t]),D=C.useCallback(x(e),[e]),P=C.useCallback(x(n),[n]),H=C.useCallback(x(r),[r]),F=C.useCallback(x(o),[o]),j=C.useCallback(x(l),[l]),X=C.useCallback(x(u),[u]);return K.jsx(Ns,{ref:g,...p,onEnter:M,onEntered:P,onEntering:D,onExit:H,onExited:j,onExiting:F,addEndListener:X,nodeRef:v,children:typeof f=="function"?(Z,R)=>f(Z,{...R,ref:b}):fe.cloneElement(f,{ref:b})})});Wx.displayName="TransitionWrapper";const GU={[so]:"show",[la]:"show"},h_=C.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:r,...o},l)=>{const u={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...o},f=C.useCallback((d,p)=>{qU(d),r?.(d,p)},[r]);return K.jsx(Wx,{ref:l,addEndListener:FU,...u,onEnter:f,childRef:um(e),children:(d,p)=>C.cloneElement(e,{...p,className:Mt("fade",t,e.props.className,GU[d],n[d])})})});h_.displayName="Fade";const YU=["xxl","xl","lg","md","sm","xs"],KU="xs",sf=C.createContext({prefixes:{},breakpoints:YU,minBreakpoint:KU}),{Consumer:G5,Provider:Y5}=sf;function Tn(t,e){const{prefixes:n}=C.useContext(sf);return t||n[e]||e}function XU(){const{breakpoints:t}=C.useContext(sf);return t}function QU(){const{minBreakpoint:t}=C.useContext(sf);return t}function WU(){const{dir:t}=C.useContext(sf);return t==="rtl"}const Zx=C.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},o)=>(e=Tn(e,"modal-body"),K.jsx(n,{ref:o,className:Mt(t,e),...r})));Zx.displayName="ModalBody";const Jx=C.createContext({onHide(){}}),d_=C.forwardRef(({bsPrefix:t,className:e,contentClassName:n,centered:r,size:o,fullscreen:l,children:u,scrollable:f,...d},p)=>{t=Tn(t,"modal");const g=`${t}-dialog`,v=typeof l=="string"?`${t}-fullscreen-${l}`:`${t}-fullscreen`;return K.jsx("div",{...d,ref:p,className:Mt(g,e,o&&`${t}-${o}`,r&&`${g}-centered`,f&&`${g}-scrollable`,l&&v),children:K.jsx("div",{className:Mt(`${t}-content`,n),children:u})})});d_.displayName="ModalDialog";const eI=C.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},o)=>(e=Tn(e,"modal-footer"),K.jsx(n,{ref:o,className:Mt(t,e),...r})));eI.displayName="ModalFooter";const ZU={"aria-label":ws.string,onClick:ws.func,variant:ws.oneOf(["white"])},m_=C.forwardRef(({className:t,variant:e,"aria-label":n="Close",...r},o)=>K.jsx("button",{ref:o,type:"button",className:Mt("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...r}));m_.displayName="CloseButton";m_.propTypes=ZU;const tI=C.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:r,children:o,...l},u)=>{const f=C.useContext(Jx),d=qy(()=>{f?.onHide(),r?.()});return K.jsxs("div",{ref:u,...l,children:[o,n&&K.jsx(m_,{"aria-label":t,variant:e,onClick:d})]})});tI.displayName="AbstractModalHeader";const nI=C.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:r=!1,...o},l)=>(t=Tn(t,"modal-header"),K.jsx(tI,{ref:l,...o,className:Mt(e,t),closeLabel:n,closeButton:r})));nI.displayName="ModalHeader";const JU=t=>C.forwardRef((e,n)=>K.jsx("div",{...e,ref:n,className:Mt(e.className,t)})),e5=JU("h4"),iI=C.forwardRef(({className:t,bsPrefix:e,as:n=e5,...r},o)=>(e=Tn(e,"modal-title"),K.jsx(n,{ref:o,className:Mt(t,e),...r})));iI.displayName="ModalTitle";function t5(t){return K.jsx(h_,{...t,timeout:null})}function n5(t){return K.jsx(h_,{...t,timeout:null})}const rI=C.forwardRef(({bsPrefix:t,className:e,style:n,dialogClassName:r,contentClassName:o,children:l,dialogAs:u=d_,"data-bs-theme":f,"aria-labelledby":d,"aria-describedby":p,"aria-label":g,show:v=!1,animation:E=!0,backdrop:b=!0,keyboard:x=!0,onEscapeKeyDown:M,onShow:D,onHide:P,container:H,autoFocus:F=!0,enforceFocus:j=!0,restoreFocus:X=!0,restoreFocusOptions:Z,onEntered:R,onExit:T,onExiting:I,onEnter:N,onEntering:U,onExited:B,backdropClassName:A,manager:k,...q},V)=>{const[G,ee]=C.useState({}),[J,L]=C.useState(!1),Y=C.useRef(!1),ie=C.useRef(!1),ne=C.useRef(null),[he,_e]=j9(),we=Gx(V,_e),Oe=qy(P),ve=WU();t=Tn(t,"modal");const Se=C.useMemo(()=>({onHide:Oe}),[Oe]);function Ce(){return k||VU({isRTL:ve})}function je(xe){if(!eu)return;const Fe=Ce().getScrollbarWidth()>0,kt=xe.scrollHeight>lm(xe).documentElement.clientHeight;ee({paddingRight:Fe&&!kt?RT():void 0,paddingLeft:!Fe&&kt?RT():void 0})}const dt=qy(()=>{he&&je(he.dialog)});$9(()=>{Fy(window,"resize",dt),ne.current==null||ne.current()});const mt=()=>{Y.current=!0},pt=xe=>{Y.current&&he&&xe.target===he.dialog&&(ie.current=!0),Y.current=!1},Ve=()=>{L(!0),ne.current=Yx(he.dialog,()=>{L(!1)})},Yt=xe=>{xe.target===xe.currentTarget&&Ve()},Pe=xe=>{if(b==="static"){Yt(xe);return}if(ie.current||xe.target!==xe.currentTarget){ie.current=!1;return}P?.()},De=xe=>{x?M?.(xe):(xe.preventDefault(),b==="static"&&Ve())},Ht=(xe,Fe)=>{xe&&je(xe),N?.(xe,Fe)},An=xe=>{ne.current==null||ne.current(),T?.(xe)},dn=(xe,Fe)=>{U?.(xe,Fe),$x(window,"resize",dt)},Rn=xe=>{xe&&(xe.style.display=""),B?.(xe),Fy(window,"resize",dt)},mn=C.useCallback(xe=>K.jsx("div",{...xe,className:Mt(`${t}-backdrop`,A,!E&&"show")}),[E,A,t]),Kt={...n,...G};Kt.display="block";const zn=xe=>K.jsx("div",{role:"dialog",...xe,style:Kt,className:Mt(e,t,J&&`${t}-static`,!E&&"show"),onClick:b?Pe:void 0,onMouseUp:pt,"data-bs-theme":f,"aria-label":g,"aria-labelledby":d,"aria-describedby":p,children:K.jsx(u,{...q,onMouseDown:mt,className:r,contentClassName:o,children:l})});return K.jsx(Jx.Provider,{value:Se,children:K.jsx(CU,{show:v,ref:we,backdrop:b,container:H,keyboard:!0,autoFocus:F,enforceFocus:j,restoreFocus:X,restoreFocusOptions:Z,onEscapeKeyDown:De,onShow:D,onHide:P,onEnter:Ht,onEntering:dn,onEntered:R,onExit:An,onExiting:I,onExited:Rn,manager:Ce(),transition:E?t5:void 0,backdropTransition:E?n5:void 0,renderBackdrop:mn,renderDialog:zn})})});rI.displayName="Modal";const ic=Object.assign(rI,{Body:Zx,Header:nI,Title:iI,Footer:eI,Dialog:d_,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),i5=["as","disabled"];function r5(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function s5(t){return!t||t.trim()==="#"}function sI({tagName:t,disabled:e,href:n,target:r,rel:o,role:l,onClick:u,tabIndex:f=0,type:d}){t||(n!=null||r!=null||o!=null?t="a":t="button");const p={tagName:t};if(t==="button")return[{type:d||"button",disabled:e},p];const g=E=>{if((e||t==="a"&&s5(n))&&E.preventDefault(),e){E.stopPropagation();return}u?.(E)},v=E=>{E.key===" "&&(E.preventDefault(),g(E))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:l??"button",disabled:void 0,tabIndex:e?void 0:f,href:n,target:t==="a"?r:void 0,"aria-disabled":e||void 0,rel:t==="a"?o:void 0,onClick:g,onKeyDown:v},p]}const o5=C.forwardRef((t,e)=>{let{as:n,disabled:r}=t,o=r5(t,i5);const[l,{tagName:u}]=sI(Object.assign({tagName:n,disabled:r},o));return K.jsx(u,Object.assign({},o,l,{ref:e}))});o5.displayName="Button";const Yy=C.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:r,active:o=!1,disabled:l=!1,className:u,...f},d)=>{const p=Tn(e,"btn"),[g,{tagName:v}]=sI({tagName:t,disabled:l,...f}),E=v;return K.jsx(E,{...g,...f,ref:d,disabled:l,className:Mt(u,p,o&&"active",n&&`${p}-${n}`,r&&`${p}-${r}`,f.href&&l&&"disabled")})});Yy.displayName="Button";const a5={type:ws.string,tooltip:ws.bool,as:ws.elementType},cm=C.forwardRef(({as:t="div",className:e,type:n="valid",tooltip:r=!1,...o},l)=>K.jsx(t,{...o,ref:l,className:Mt(e,`${n}-${r?"tooltip":"feedback"}`)}));cm.displayName="Feedback";cm.propTypes=a5;const Is=C.createContext({}),p_=C.forwardRef(({id:t,bsPrefix:e,className:n,type:r="checkbox",isValid:o=!1,isInvalid:l=!1,as:u="input",...f},d)=>{const{controlId:p}=C.useContext(Is);return e=Tn(e,"form-check-input"),K.jsx(u,{...f,ref:d,type:r,id:t||p,className:Mt(n,e,o&&"is-valid",l&&"is-invalid")})});p_.displayName="FormCheckInput";const Od=C.forwardRef(({bsPrefix:t,className:e,htmlFor:n,...r},o)=>{const{controlId:l}=C.useContext(Is);return t=Tn(t,"form-check-label"),K.jsx("label",{...r,ref:o,htmlFor:n||l,className:Mt(e,t)})});Od.displayName="FormCheckLabel";function l5(t,e){return C.Children.toArray(t).some(n=>C.isValidElement(n)&&n.type===e)}const oI=C.forwardRef(({id:t,bsPrefix:e,bsSwitchPrefix:n,inline:r=!1,reverse:o=!1,disabled:l=!1,isValid:u=!1,isInvalid:f=!1,feedbackTooltip:d=!1,feedback:p,feedbackType:g,className:v,style:E,title:b="",type:x="checkbox",label:M,children:D,as:P="input",...H},F)=>{e=Tn(e,"form-check"),n=Tn(n,"form-switch");const{controlId:j}=C.useContext(Is),X=C.useMemo(()=>({controlId:t||j}),[j,t]),Z=!D&&M!=null&&M!==!1||l5(D,Od),R=K.jsx(p_,{...H,type:x==="switch"?"checkbox":x,ref:F,isValid:u,isInvalid:f,disabled:l,as:P});return K.jsx(Is.Provider,{value:X,children:K.jsx("div",{style:E,className:Mt(v,Z&&e,r&&`${e}-inline`,o&&`${e}-reverse`,x==="switch"&&n),children:D||K.jsxs(K.Fragment,{children:[R,Z&&K.jsx(Od,{title:b,children:M}),p&&K.jsx(cm,{type:g,tooltip:d,children:p})]})})})});oI.displayName="FormCheck";const Md=Object.assign(oI,{Input:p_,Label:Od}),aI=C.forwardRef(({bsPrefix:t,type:e,size:n,htmlSize:r,id:o,className:l,isValid:u=!1,isInvalid:f=!1,plaintext:d,readOnly:p,as:g="input",...v},E)=>{const{controlId:b}=C.useContext(Is);return t=Tn(t,"form-control"),K.jsx(g,{...v,type:e,size:r,ref:E,readOnly:p,id:o||b,className:Mt(l,d?`${t}-plaintext`:t,n&&`${t}-${n}`,e==="color"&&`${t}-color`,u&&"is-valid",f&&"is-invalid")})});aI.displayName="FormControl";const u5=Object.assign(aI,{Feedback:cm}),lI=C.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},o)=>(e=Tn(e,"form-floating"),K.jsx(n,{ref:o,className:Mt(t,e),...r})));lI.displayName="FormFloating";const g_=C.forwardRef(({controlId:t,as:e="div",...n},r)=>{const o=C.useMemo(()=>({controlId:t}),[t]);return K.jsx(Is.Provider,{value:o,children:K.jsx(e,{...n,ref:r})})});g_.displayName="FormGroup";function c5({as:t,bsPrefix:e,className:n,...r}){e=Tn(e,"col");const o=XU(),l=QU(),u=[],f=[];return o.forEach(d=>{const p=r[d];delete r[d];let g,v,E;typeof p=="object"&&p!=null?{span:g,offset:v,order:E}=p:g=p;const b=d!==l?`-${d}`:"";g&&u.push(g===!0?`${e}${b}`:`${e}${b}-${g}`),E!=null&&f.push(`order${b}-${E}`),v!=null&&f.push(`offset${b}-${v}`)}),[{...r,className:Mt(n,...u,...f)},{as:t,bsPrefix:e,spans:u}]}const uI=C.forwardRef((t,e)=>{const[{className:n,...r},{as:o="div",bsPrefix:l,spans:u}]=c5(t);return K.jsx(o,{...r,ref:e,className:Mt(n,!u.length&&l)})});uI.displayName="Col";const cI=C.forwardRef(({as:t="label",bsPrefix:e,column:n=!1,visuallyHidden:r=!1,className:o,htmlFor:l,...u},f)=>{const{controlId:d}=C.useContext(Is);e=Tn(e,"form-label");let p="col-form-label";typeof n=="string"&&(p=`${p} ${p}-${n}`);const g=Mt(o,e,r&&"visually-hidden",n&&p);return l=l||d,n?K.jsx(uI,{ref:f,as:"label",className:g,htmlFor:l,...u}):K.jsx(t,{ref:f,className:g,htmlFor:l,...u})});cI.displayName="FormLabel";const fI=C.forwardRef(({bsPrefix:t,className:e,id:n,...r},o)=>{const{controlId:l}=C.useContext(Is);return t=Tn(t,"form-range"),K.jsx("input",{...r,type:"range",ref:o,className:Mt(e,t),id:n||l})});fI.displayName="FormRange";const hI=C.forwardRef(({bsPrefix:t,size:e,htmlSize:n,className:r,isValid:o=!1,isInvalid:l=!1,id:u,...f},d)=>{const{controlId:p}=C.useContext(Is);return t=Tn(t,"form-select"),K.jsx("select",{...f,size:n,ref:d,className:Mt(r,t,e&&`${t}-${e}`,o&&"is-valid",l&&"is-invalid"),id:u||p})});hI.displayName="FormSelect";const dI=C.forwardRef(({bsPrefix:t,className:e,as:n="small",muted:r,...o},l)=>(t=Tn(t,"form-text"),K.jsx(n,{...o,ref:l,className:Mt(e,t,r&&"text-muted")})));dI.displayName="FormText";const mI=C.forwardRef((t,e)=>K.jsx(Md,{...t,ref:e,type:"switch"}));mI.displayName="Switch";const f5=Object.assign(mI,{Input:Md.Input,Label:Md.Label}),pI=C.forwardRef(({bsPrefix:t,className:e,children:n,controlId:r,label:o,...l},u)=>(t=Tn(t,"form-floating"),K.jsxs(g_,{ref:u,className:Mt(e,t),controlId:r,...l,children:[n,K.jsx("label",{htmlFor:r,children:o})]})));pI.displayName="FloatingLabel";const h5={_ref:ws.any,validated:ws.bool,as:ws.elementType},y_=C.forwardRef(({className:t,validated:e,as:n="form",...r},o)=>K.jsx(n,{...r,ref:o,className:Mt(t,e&&"was-validated")}));y_.displayName="Form";y_.propTypes=h5;const gl=Object.assign(y_,{Group:g_,Control:u5,Floating:lI,Check:Md,Switch:f5,Label:cI,Text:dI,Range:fI,Select:hI,FloatingLabel:pI});function d5({show:t,onHide:e,onConfirm:n,isCreating:r=!1}){const[o,l]=C.useState(""),[u,f]=C.useState(!0),d=C.useCallback(E=>{const b=E.target.value;l(b),f(b.trim().length>0&&b.trim().length<=50)},[]),p=C.useCallback(E=>{E.preventDefault();const b=o.trim();b.length>0&&b.length<=50&&(n(b),l(""),f(!0))},[o,n]),g=C.useCallback(()=>{l(""),f(!0),e()},[e]),v=C.useCallback(E=>{E.key==="Enter"&&p(E)},[p]);return K.jsxs(ic,{show:t,onHide:g,centered:!0,backdrop:"static",keyboard:!1,className:"board-name-modal",style:{zIndex:2001},children:[K.jsx(ic.Header,{closeButton:!0,children:K.jsx(ic.Title,{children:"Create New Board"})}),K.jsxs(gl,{onSubmit:p,children:[K.jsx(ic.Body,{children:K.jsxs(gl.Group,{children:[K.jsx(gl.Label,{children:"Board Name"}),K.jsx(gl.Control,{type:"text",value:o,onChange:d,onKeyDown:v,placeholder:"Enter board name...",isInvalid:!u,maxLength:50,autoFocus:!0}),K.jsx(gl.Control.Feedback,{type:"invalid",className:"text-muted",children:"Board name must be between 1 and 50 characters long."}),K.jsxs(gl.Text,{className:o.length===50?"text-danger":"text-muted",children:[o.length,"/50 characters"]})]})}),K.jsxs(ic.Footer,{children:[K.jsx(Yy,{variant:"secondary",onClick:g,disabled:r,children:"Cancel"}),K.jsx(Yy,{variant:"primary",type:"submit",disabled:!u||o.trim().length===0||r,children:r?"Creating...":"Create Board"})]})]})]})}function m5({allBoards:t,currentBoard:e,onSwitchBoard:n,onCreateBoard:r,onDeleteBoard:o,onSignOut:l,isLoading:u,isCollapsed:f=!1,onToggleSidebar:d,mode:p="boards",onModeChange:g,explanation:v}){const[E,b]=C.useState(!1),[x,M]=C.useState(!1),[D,P]=C.useState(null),H={minHeight:54,padding:"14px 20px",margin:"0 8px",borderRadius:10,display:"flex",justifyContent:"space-between",alignItems:"center",transition:"background 0.15s, border 0.15s, box-shadow 0.15s, transform 0.15s"},F=(I,N)=>({...H,cursor:u?"not-allowed":"pointer",border:I?"2px solid #4f8cff":N?"1px solid #555":"1px solid #333",background:I?"#25304a":N?"#23293a":"#181c24",color:I?"#fff":"#cfd8dc",fontWeight:I?600:400,boxShadow:I?"0 2px 8px 0 #4f8cff22":N?"0 1px 4px 0 #00000033":"none",transform:N?"translateY(-1px)":"none"}),j={background:"none",border:"none",color:"#ff4d4d",cursor:"pointer",fontSize:"1.2em",lineHeight:1,padding:"0 5px",transition:"opacity 0.15s"},X=async I=>{try{b(!0),await r(I),M(!1)}catch(N){console.error("Error in sidebar create board:",N)}finally{b(!1)}},Z=()=>{M(!0)},R=()=>{M(!1)},T=(I,N)=>{I.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&o(N)};return K.jsxs(K.Fragment,{children:[K.jsxs("div",{className:"sidebar split-pane-sidebar",children:[K.jsx("div",{className:"sidebar-header",children:K.jsxs("div",{className:"sidebar-mode-switch",children:[K.jsx("button",{className:`mode-switch-btn ${p==="boards"?"active":""}`,onClick:()=>g&&g("boards"),children:"📋 Boards"}),K.jsx("button",{className:`mode-switch-btn ${p==="explanation"?"active":""}`,onClick:()=>g&&g("explanation"),children:"📄 Explanation"})]})}),K.jsx("div",{className:"sidebar-content",children:p==="boards"?K.jsx(K.Fragment,{children:K.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[K.jsx("div",{style:{padding:"8px 0",textAlign:"right"},children:K.jsx("button",{onClick:Z,disabled:u||E,style:{padding:"6px 12px",borderRadius:6,border:"1px solid #4f8cff",background:"#1d2330",color:"#4f8cff",cursor:u||E?"not-allowed":"pointer"},children:E?"Creating...":"+ New Board"})}),K.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8,marginTop:8,overflowY:"auto",flexGrow:1},children:t.map(I=>{const N=e?.id===I.id,U=D===I.id;return K.jsxs("div",{onClick:()=>!u&&n(I.id),onMouseEnter:()=>P(I.id),onMouseLeave:()=>P(null),style:F(N,U),role:"button",tabIndex:0,onKeyDown:B=>{(B.key==="Enter"||B.key===" ")&&!u&&n(I.id)},children:[K.jsx("span",{style:{fontWeight:N?700:500,fontSize:"1.1em",flex:1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",letterSpacing:"0.2px",lineHeight:1.3},children:I.name}),K.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[I.isOpen&&K.jsx("span",{style:{color:"#4f8cff",fontSize:"1.1em"},children:"●"}),t.length>1&&K.jsx("button",{onClick:B=>{B.stopPropagation(),T(B,I.id)},title:"Delete board",style:{...j,opacity:U?1:0,visibility:U?"visible":"hidden"},children:"×"})]})]},I.id)})}),u&&K.jsx("div",{style:{padding:16,textAlign:"center",color:"#9e9e9e"},children:"Loading boards..."}),K.jsx("div",{style:{padding:"12px 0"},children:K.jsx("button",{onClick:l,style:{padding:"6px 12px",borderRadius:6,border:"1px solid #333",background:"transparent",color:"#cfd8dc",cursor:"pointer"},children:"Sign Out"})})]})}):K.jsx("div",{className:"explanation-content",children:v?K.jsxs(K.Fragment,{children:[K.jsx("div",{className:"explanation-header",children:K.jsx("h3",{children:v.title})}),K.jsx("div",{className:"explanation-text",children:K.jsx("p",{children:v.text})})]}):K.jsx("div",{className:"explanation-placeholder",children:K.jsx("p",{children:"Click on a node's explanation button (📄) to view its detailed information here."})})})})]}),K.jsx(d5,{show:x,onHide:R,onConfirm:X,isCreating:E})]})}function p5({name:t,onSetName:e,user:n,isSaving:r,sidebarCollapsed:o=!1}){const[l,u]=C.useState(!1),[f,d]=C.useState(t||"");C.useEffect(()=>{d(t||"")},[t]);const p=v=>{v.key==="Enter"&&(e(f),u(!1))},g=()=>{u(!0),d(t||"")};return K.jsx(K.Fragment,{children:K.jsx("div",{className:`name ${o?"sidebar-collapsed":""}`,children:K.jsx("div",{className:"app-container",children:K.jsxs("header",{className:"app-header",children:[K.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[K.jsx("h1",{children:"Launch Flow"}),K.jsx("span",{style:{color:"#64748b",fontSize:"13px"},children:"•"}),l?K.jsx("input",{type:"text",value:f,onChange:v=>d(v.target.value),onKeyDown:p,onBlur:()=>{e(f),u(!1)},style:{background:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",padding:"4px 8px",color:"#f1f5f9",fontSize:"14px",minWidth:"120px"},autoFocus:!0}):K.jsx("button",{onClick:g,style:{background:"none",border:"none",color:"#94a3b8",fontSize:"14px",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"all 0.15s ease"},onMouseEnter:v=>{v.currentTarget.style.background="rgba(255, 255, 255, 0.05)",v.currentTarget.style.color="#f1f5f9"},onMouseLeave:v=>{v.currentTarget.style.background="none",v.currentTarget.style.color="#94a3b8"},children:t||"Untitled Board"})]}),K.jsxs("div",{className:"user-info",children:[K.jsx("p",{children:n?.isAnonymous?"Guest":n?.email?.split("@")[0]||"User"}),r&&K.jsx("span",{className:"save-indicator",children:"💾 Saving"})]})]})})})})}const g5=({notification:t,onRemove:e})=>{const n=r=>{switch(r){case"success":return"✅";case"error":return"❌";case"warning":return"⚠️";case"info":return"ℹ️";default:return"📄"}};return K.jsxs("div",{className:`notification notification-${t.type}`,children:[K.jsxs("div",{className:"notification-content",children:[K.jsx("span",{className:"notification-icon",children:n(t.type)}),K.jsx("span",{className:"notification-message",children:t.message})]}),K.jsx("button",{className:"notification-close",onClick:()=>e(t.id),children:"×"})]})},y5=({notifications:t,onRemove:e})=>t.length===0?null:K.jsx("div",{className:"notifications-container",children:t.map(n=>K.jsx(g5,{notification:n,onRemove:e},n.id))}),v5=async()=>{try{await T3(Nd),console.log("User signed out successfully")}catch(t){throw console.error("Error signing out:",t),t}},Qg=async t=>{try{const e=await fetch(`https://groqchat-zm2y2mo6eq-uc.a.run.app?message=${encodeURIComponent(t)}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=await e.json();return console.log(n),n}catch(e){throw console.error("Fetch error:",e),e}},_5=async(t,e)=>{try{const n=`You are an expert educator and technical writer. Your task is to teach the following concept to a beginner, using clear, concise, and engaging explanations.

        Context: ${e}

        Instructions:
        - Highlight EVERY important concept or term using [square-braces], e.g., [algorithm], [variable].
        - Use simple language and break down complex ideas.
        - Provide at least one practical example or analogy.
        - Emphasize key points using markdown formatting (bold, italics, headings, lists, tables, etc.).
        - Organize the explanation with headings, lists, and tables where appropriate.
        - Use ONLY CORRECT MARKDOWN AND HTML formatting for all content (including tables, lists, images, and code blocks).
        - You NEED TO embed relevant IMAGES or GIFS from the web using embeded HTML IMGS.
        - You MAY embed relevant youtube videos from the web using embeded HTML.
        - Do NOT include introductions, conclusions, or meta-commentary.
        - Start immediately with the explanation content.
        - Do NOT include any text outside the explanation.

        Concept to explain: `,r=`Summarize in exactly 40 words or less.

        CRITICAL:
        - Preserve ALL [square-braces] concepts exactly
        - Every key concept MUST use [square-braces]
        - NO introductory phrases like "Here is..." or "Summary..."
        - NO bullet points or formatting except [square-braces]
        - Start immediately with summary content
        - ONLY the summary text

        Text to summarize: `,o="You are an expert educator. You answer only in json: {[concept1], [concept2]...}. Suggest 3 topics(each not more than 5 words, each topic is encased in [square-braces]) that are a good next step at learning the following concept:",l=await Qg(n+t),u=await Qg(r+l.response);let d=(await Qg(o+u.response)).response??"";d=d.replace(/^```json\s*/i,"").replace(/^```\s*/i,"").replace(/```$/i,"");let p=[];try{let g=JSON.parse(d);p=Array.isArray(g.topics)?g.topics:Object.values(g)}catch{const v=d.match(/"(.*?)"/g);v&&(p=v.map(E=>E.replace(/"/g,"")))}return{firstResponse:{response:l.response?.replace(/\[/g,"_").replace(/\]/g,"_").replace(/```/g,"").replace(/```/g,"").replace(/markdown/g,"")},secondResponse:{response:u.response?.replace(/\[/g,"_").replace(/\]/g,"_")},thirdResponse:{response:p}}}catch(n){throw console.error("Error in askAITwice:",n),n}},E5=()=>{const[t,e]=C.useState(null);return C.useEffect(()=>{const r=S3(Nd,o=>{e(o),o?console.log("User signed in:",o.uid):console.log("No user signed in")});return()=>r()},[]),{user:t,signOut:async()=>{try{await v5(),e(null)}catch(r){console.error("Error in sign out:",r)}}}},gI=t=>!!(t&&t.uid),Ec=[{id:"1",type:"staticEditable",data:{label:"The _artificial intelligence_ system processes _natural language_ effectively",title:"AI & Natural Language",suggestions:["Machine Learning","Neural Networks","Deep Learning"],tokenColors:{},previousNode:null},position:{x:250,y:25},draggable:!1}],Ml=[],w5=async t=>{if(!gI({uid:t}))throw new Error(yi.AUTH_REQUIRED);try{const e=Uv(Sr,Hi.BOARDS),n=hz(e,dz("userId","==",t),mz("createdAt","desc")),r=await Wv(n);if(r.empty){const l={id:`board_${Date.now()}`,userId:t,name:"Default Board",createdAt:zt.now(),isOpen:!0};return await Zv(Zl(Sr,Hi.BOARDS,l.id),l),console.log("Created default board:",l),[l]}const o=r.docs.map(l=>({id:l.id,...l.data()}));return console.log("Fetched all boards:",o),o}catch(e){if(console.error("Fetch all boards error:",e),e.code==="failed-precondition"||e.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:t,name:"Fallback Board (Create Index)",createdAt:zt.now(),isOpen:!0,isFallback:!0}]}throw new Error(yi.LOAD_FAILED)}},UT=async t=>{if(!t)return console.warn("No board ID provided for fetching nodes"),Ec;try{const e=Uv(Sr,Hi.BOARDS,t,Hi.NODES),n=await Wv(e);if(n.empty)return console.log("No nodes found for board, using initial nodes"),Ec;const r=n.docs.map(o=>{const l=o.data(),u={...l.data,tokenColors:l.data?.tokenColors||{},previousNode:l.data?.previousNode||null};return{id:o.id,type:l.type,position:l.position,data:u,draggable:l.draggable,style:l.style}});return console.log("Fetched nodes from board:",r),r}catch(e){return console.error("Fetch nodes error:",e),Ec}},BT=async t=>{if(!t)return console.warn("No board ID provided for fetching edges"),Ml;try{const e=Uv(Sr,Hi.BOARDS,t,Hi.EDGES),n=await Wv(e);if(n.empty)return console.log("No edges found for board, using initial edges"),Ml;const r=n.docs.map(o=>({id:o.id,...o.data()}));return console.log("Fetched edges from board:",r),r}catch(e){return console.error("Fetch edges error:",e),Ml}},b5=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving nodes:",{boardId:t,nodesCount:e?.length});return}try{const n=ux(Sr);e.forEach(r=>{const o=Zl(Sr,Hi.BOARDS,t,Hi.NODES,r.id),l={type:r.type,data:r.data,position:r.position,updatedAt:zt.now()};r.draggable!=null&&(l.draggable=r.draggable),r.style!=null&&(l.style=r.style),n.set(o,l)}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(yi.SAVE_FAILED)}},S5=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving edges:",{boardId:t,edgesCount:e?.length});return}try{const n=ux(Sr);e.forEach(r=>{const o=Zl(Sr,Hi.BOARDS,t,Hi.EDGES,r.id),l={source:r.source,target:r.target,updatedAt:zt.now()};r.sourceHandle!=null&&(l.sourceHandle=r.sourceHandle),r.targetHandle!=null&&(l.targetHandle=r.targetHandle),r.style!=null&&(l.style=r.style),r.markerEnd!=null&&(l.markerEnd=r.markerEnd),n.set(o,l)}),await n.commit(),console.log("Edges saved to board")}catch(n){throw console.error("Save edges error:",n),new Error(yi.SAVE_FAILED)}},T5=async(t,e,n)=>{if(!gI({uid:t}))throw new Error(yi.AUTH_REQUIRED);try{const r={id:`board_${Date.now()}`,userId:t,name:e||`Board ${n.length+1}`,createdAt:zt.now(),isOpen:!1};return console.log("Creating board:",r),await Zv(Zl(Sr,Hi.BOARDS,r.id),r),console.log("Board created successfully:",r),r}catch(r){throw console.error("Error creating new board:",r),r.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):r.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},A5=async t=>{if(!t)throw new Error("Board ID is required for deletion");try{await Ez(Zl(Sr,Hi.BOARDS,t)),console.log("Board deleted successfully")}catch(e){throw console.error("Error deleting board:",e),e.code==="permission-denied"?new Error("Permission denied. Cannot delete this board."):e}},yl=async(t,e)=>{if(!t||!e)throw new Error("Board ID and updates are required");try{const n={...e,updatedAt:zt.now()};await Zv(Zl(Sr,Hi.BOARDS,t),n,{merge:!0}),console.log("Board status updated:",n)}catch(n){throw console.error("Error updating board status:",n),n}},R5=t=>{if(!t||!t.data)return t;const e={...t},n={...t.data};return n.title||(n.title=n.label||n.summary||"Node"),n.suggestions||(n.suggestions=[]),e.draggable===void 0&&(e.draggable=!0),e.data=n,e},x5=t=>Array.isArray(t)?t.map(R5):[],I5=(t,e={})=>{const[n,r,o]=kk([]),[l,u,f]=Vk([]),[d,p]=C.useState(!0),[g,v]=C.useState(!1),[E,b]=C.useState(!1),[x,M]=C.useState([]),[D,P]=C.useState(null),H=C.useRef(null),{showSuccess:F,showError:j,showInfo:X}=e,Z=A=>{const k=A.find(q=>q.isOpen===!0);if(k)return k;if(A.length>0){const q={...A[0],isOpen:!0};return yl(q.id,q).catch(console.error),q}return null};C.useEffect(()=>{(async()=>{if(t)try{p(!0);const k=await w5(t.uid);M(k);const q=k.some(J=>J.isFallback);q&&j&&j("Database index missing. Please create the required Firestore index. Check console for details.");const V=Z(k);if(!V){console.error("No board found for user"),j&&j("No boards found. Creating a default board..."),r(Ec),u(Ml);return}P(V);const[G,ee]=await Promise.all([UT(V.id),BT(V.id)]);r(G),u(ee),X&&!q&&X("Board loaded successfully!")}catch(k){console.error("Error loading initial data:",k),j&&j("Failed to load board data. Using default board."),r(Ec),u(Ml)}finally{p(!1)}})()},[t,r,u]);const R=C.useCallback(async(A,k,q)=>{H.current&&clearTimeout(H.current);const V=setTimeout(async()=>{try{b(!0);const G=[];k&&k.length>0&&G.push(b5(A,k)),q&&q.length>0&&G.push(S5(A,q)),G.length>0&&(await Promise.all(G),console.log("Auto-save completed successfully"))}catch(G){console.error("Auto-save failed:",G),j&&j("Failed to save changes automatically")}finally{b(!1),H.current=null}},1e3);H.current=V},[j]);C.useEffect(()=>(!d&&D&&!g&&!D.isFallback&&R(D.id,n,l),()=>{H.current&&clearTimeout(H.current)}),[n,l,d,D,g]);const T=C.useCallback(async A=>{try{if(D?.id===A)return;if(D?.isFallback||x.find(q=>q.id===A)?.isFallback){j&&j("Cannot switch to fallback board. Please create the missing Firestore index first.");return}if(v(!0),D&&!D.isFallback){const q={...D,isOpen:!1};await yl(D.id,q),M(V=>V.map(G=>G.id===D.id?q:G))}const k=x.find(q=>q.id===A);if(k){const q={...k,isOpen:!0};await yl(A,q),P(q),M(J=>J.map(L=>L.id===A?q:L));const[V,G]=await Promise.all([UT(A),BT(A)]),ee=x5(V);r(ee),u(G),F&&F(`Switched to "${q.name}"`)}else console.error("Board not found:",A),j&&j("Board not found")}catch(k){console.error("Error switching board:",k),j&&j("Failed to switch board. Please try again.")}finally{v(!1)}},[D,x,r,u,F,j]),I=C.useCallback(async A=>{try{if(!t)return j&&j("You must be logged in to create a board"),null;X&&X("Creating new board...");const k=await T5(t.uid,A||null,x);if(k){if(D&&!D.isFallback){const V={...D,isOpen:!1};yl(D.id,V).catch(console.error)}const q={...k,isOpen:!0};return M(V=>{const G=V.map(ee=>ee.id===D?.id?{...ee,isOpen:!1}:ee);return[q,...G]}),P(q),yl(k.id,q).catch(console.error),r([{id:"1",type:"staticEditable",data:{label:A||"New Board"},position:{x:250,y:25},draggable:!1}]),u(Ml),F&&F(`Board "${k.name}" created and opened!`),q}else return j&&j("Failed to create board. Please try again."),null}catch(k){return j&&j(`Failed to create board: ${k.message}`),null}},[t,x,D,F,j,X,r,u]),N=C.useCallback(async A=>{try{if(x.length<=1){j&&j("Cannot delete the last board!");return}if(!x.find(q=>q.id===A)){console.error("Board not found for deletion"),j&&j("Board not found");return}if(X&&X("Deleting board..."),D?.id===A){const q=x.find(V=>V.id!==A);q&&await T(q.id)}await A5(A),M(q=>q.filter(V=>V.id!==A)),F&&F("Board deleted successfully!")}catch(k){console.error("Error deleting board:",k),j&&j("Failed to delete board. Please try again.")}},[x,D,T,F,j,X]),U=C.useCallback(async A=>{if(D&&D.name!==A){const k={...D,name:A};P(k),M(q=>q.map(V=>V.id===D.id?k:V));try{await yl(D.id,k),console.log("Board name updated successfully")}catch(q){console.error("Error updating board name:",q)}}},[D]),B=C.useCallback(()=>{H.current&&(clearTimeout(H.current),H.current=null),M([]),P(null),r([]),u([]),p(!0),v(!1),b(!1)},[r,u,H]);return{nodes:n,edges:l,allBoards:x,currentBoard:D,isLoading:d,isSwitchingBoard:g,isSaving:E,onNodesChange:o,onEdgesChange:f,setNodes:r,switchToBoard:T,createNewBoard:I,deleteBoard:N,updateBoardName:U,clearBoardState:B}},C5=({allBoards:t,currentBoard:e,createNewBoard:n,switchToBoard:r})=>{C.useEffect(()=>{const o=l=>{if((l.ctrlKey||l.metaKey)&&l.key==="n"&&(l.preventDefault(),n()),(l.ctrlKey||l.metaKey)&&l.key>="1"&&l.key<="9"){l.preventDefault();const u=parseInt(l.key)-1;t[u]&&t[u].id!==e?.id&&r(t[u].id)}};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[t,e,n,r])},N5=()=>{const[t,e]=C.useState([]),n=C.useCallback(p=>{const g=Date.now().toString(),v={id:g,timestamp:new Date,...p};return e(E=>[...E,v]),p.autoRemove!==!1&&setTimeout(()=>{r(g)},p.duration||5e3),g},[]),r=C.useCallback(p=>{e(g=>g.filter(v=>v.id!==p))},[]),o=C.useCallback(()=>{e([])},[]),l=C.useCallback((p,g={})=>n({type:"success",message:p,...g}),[n]),u=C.useCallback((p,g={})=>n({type:"error",message:p,duration:7e3,...g}),[n]),f=C.useCallback((p,g={})=>n({type:"info",message:p,...g}),[n]),d=C.useCallback((p,g={})=>n({type:"warning",message:p,duration:6e3,...g}),[n]);return{notifications:t,addNotification:n,removeNotification:r,clearAllNotifications:o,showSuccess:l,showError:u,showInfo:f,showWarning:d}},yI=t=>{const e=[],n=t.split("_");for(let r=0;r<n.length;r++)if(r%2===0)n[r].split(/\s+/).filter(l=>l.trim()!=="").forEach(l=>{e.push({word:l.trim()})});else{const o=n[r].trim();o.split(/\s+/).filter(u=>u.trim()!=="").forEach(u=>{e.push({word:u.trim(),myConcept:o})})}return e},jT=()=>{const t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];return t[Math.floor(Math.random()*t.length)]},ed=t=>{if(!t)return"#000000";const e=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),r=parseInt(t.substring(5,7),16);return(e*299+n*587+r*114)/1e3>=128?"#000000":"#ffffff"},td=(t,e)=>{if(!t)return"#000000";let n=t.startsWith("#")?t.substring(1):t;const r=parseInt(n,16),o=255,l=e,u=r>>16,f=r>>8&255,d=r&255,p=Math.round((o-u)*l)+u,g=Math.round((o-f)*l)+f,v=Math.round((o-d)*l)+d;return`#${(16777216+p*65536+g*256+v).toString(16).slice(1)}`},D5=t=>{const e=t.replace("#",""),n=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),o=parseInt(e.substr(4,2),16),l=30,u=Math.min(255,Math.max(0,n+(Math.random()-.5)*l*2)),f=Math.min(255,Math.max(0,r+(Math.random()-.5)*l*2)),d=Math.min(255,Math.max(0,o+(Math.random()-.5)*l*2));return`#${Math.round(u).toString(16).padStart(2,"0")}${Math.round(f).toString(16).padStart(2,"0")}${Math.round(d).toString(16).padStart(2,"0")}`},O5=(t,e)=>{const o=[0,45,90,135,180,225,270,315];for(const u of o){const f=u*Math.PI/180,d=t.x+Math.cos(f)*200,p=t.y+Math.sin(f)*200;if(!e.some(v=>Math.sqrt(Math.pow(v.position.x-d,2)+Math.pow(v.position.y-p,2))<150))return{x:d,y:p}}const l=Math.random()*2*Math.PI;return{x:t.x+Math.cos(l)*(200+Math.random()*100),y:t.y+Math.sin(l)*(200+Math.random()*100)}},M5=()=>`node_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,k5=(t,e)=>`edge_${t}_${e}`,V5=(t,e,n,r,o,l,u)=>({id:M5(),type:"draggableEditable",position:t,draggable:!0,data:{label:e,title:e,summary:r,full_text:n,suggestions:[],myColor:o,tokenColors:{},previousNode:u}}),P5=(t,e,n,r)=>({id:k5(t,e),source:t,target:e,sourceHandle:r,targetHandle:null,style:{stroke:n,strokeWidth:3},markerEnd:{type:xc.ArrowClosed,color:n}}),vI=C.createContext(null),L5=({children:t,nodes:e,onNodesChange:n,onEdgesChange:r,setNodes:o,showExplanation:l})=>{const u=C.useCallback((f,d,p,g,v,E,b)=>{const x=e.find(Z=>Z.id===d);if(!x)return null;const M=x.data.tokenColors||{},D=f.myConcept||f.word;if(M[D])return console.log(`Token "${D}" is already colored, ignoring click`),null;let P;g==="staticEditable"?P=jT():P=v?D5(v):jT();const H={...M};f.myConcept?H[f.myConcept]=P:H[f.word]=P,o(Z=>Z.map(R=>R.id===d?{...R,data:{...R.data,tokenColors:H}}:R));const F=O5(p,e),j=V5(F,"Loading...","Loading...","Loading...",P,g,d);j.data.isLoading=!0;const X=P5(d,j.id,P,b);return n([{type:"add",item:j}]),r([{type:"add",item:X}]),_5(f.word,E||"").then(Z=>{const R=Z.firstResponse?.response||f.word,T=Z.secondResponse?.response||f.word,I=Z.thirdResponse?.response||{};o(N=>N.map(U=>U.id===j.id?{...U,data:{...U.data,label:T,title:f.word,summary:T,full_text:R,suggestions:I,isLoading:!1}}:U))}).catch(()=>{o(Z=>Z.map(R=>R.id===j.id?{...R,data:{...R.data,label:f.word,title:f.word,summary:f.word,full_text:f.word,suggestions:[],isLoading:!1}}:R))}),P},[e,n,r,o]);return K.jsx(vI.Provider,{value:{handleTokenClick:u,setNodes:o,showExplanation:l},children:t})},_I=()=>{const t=C.useContext(vI);if(!t)throw new Error("useTokenInteraction must be used within a TokenInteractionProvider");return t},EI=({size:t="medium",color:e="#4f86f7"})=>K.jsx("div",{className:`loading-spinner ${t}`,children:K.jsx("div",{className:"spinner-ring",style:{borderTopColor:e}})});function z5({data:t,id:e}){const[n,r]=C.useState(!1),[o,l]=C.useState(t.summary||t.label||"Static Node"),[u,f]=C.useState(!1),{handleTokenClick:d,showExplanation:p}=_I(),{getNode:g,setViewport:v}=qc();C.useEffect(()=>{n||l(t.summary||t.label||"Static Node")},[t.summary,t.label,n]);const E=C.useMemo(()=>yI(o),[o]),b=C.useCallback((T,I)=>{I.stopPropagation(),console.log("Static Token clicked:",T),d(T,e,{x:0,y:0},"staticEditable",t.myColor,t.summary||t.label||"Draggable Node",T.suggestionId)},[e,d,t.myColor]),x=C.useCallback(T=>{T.stopPropagation(),r(!0)},[]),M=C.useCallback(()=>{r(!1)},[]),D=C.useCallback(T=>{T.stopPropagation()},[]),P=C.useCallback(T=>{T.stopPropagation(),T.key==="Enter"&&M(),T.key==="Escape"&&(l(t.summary||t.label||"Static Node"),r(!1))},[M,t.summary,t.label]),H=C.useCallback(T=>{T.stopPropagation(),f(!u)},[u]),F=C.useCallback(T=>{T.stopPropagation(),p&&p(o,t.full_text||"No detailed information available.")},[p,o,t.full_text]),j=C.useCallback(T=>{if(T.stopPropagation(),t.previousNode){const I=g(t.previousNode);if(I){const{x:N,y:U}=I.position;v({x:-N+200,y:-U+100,zoom:1},{duration:500})}}},[t.previousNode,g,v]),X=C.useMemo(()=>{const T=t.tokenColors||{};return E.map((I,N)=>{const U=I.myConcept||I.word,B=T[U],A=!B;return K.jsxs("span",{className:`word-token ${A?"":"disabled"} ${I.myConcept?"concept-highlight":""}`,style:{backgroundColor:B||"transparent",color:B?t.myColor||"#ffffff":"inherit",border:B?`1px solid ${B}`:""},onClick:k=>A?b(I,k):k.stopPropagation(),children:[I.word,N<E.length-1?" ":""]},N)})},[E,b,t.tokenColors,t.myColor]),Z=C.useMemo(()=>K.jsxs("div",{className:"node-buttons",children:[t.previousNode&&K.jsx("button",{className:"node-expand-btn previous-node-btn",onClick:j,title:"Go to previous node",children:"←"}),E.length>5&&K.jsx("button",{className:"node-expand-btn",onClick:H,title:u?"Show less":"Show more",children:u?"−":"+"}),K.jsx("button",{className:"node-expand-btn explanation-btn-icon",onClick:F,title:"Show full text",children:"📄"})]}),[E.length,H,u,F,t.previousNode,j]),R=C.useMemo(()=>t.isLoading?K.jsxs("div",{className:"node-loading-content",children:[K.jsx(EI,{size:"small",color:t.myColor||"#4f86f7"}),K.jsx("span",{className:"loading-text",children:"Loading concept..."})]}):n?K.jsx("input",{type:"text",value:o,onChange:T=>l(T.target.value),onBlur:M,onKeyDown:P,onClick:D,className:"node-input nodrag",autoFocus:!0}):K.jsxs("div",{className:"node-layout",children:[K.jsx("div",{className:"node-header",children:K.jsx("div",{className:"node-title",children:t.title||"Node"})}),K.jsxs("div",{className:"node-main-content",children:[K.jsx("div",{className:"node-summary-section",children:K.jsxs("div",{className:"node-summary-text",onClick:x,children:[X,E.length>5&&!u&&K.jsx("span",{className:"token-truncation",children:"..."})]})}),K.jsx("div",{className:"node-suggestions-list",children:t.suggestions&&t.suggestions.length>0?t.suggestions.map((T,I)=>{const U=(t.tokenColors||{})[T],B=!U;return K.jsxs("span",{className:`word-token ${B?"":"disabled"}`,style:{backgroundColor:U||"transparent",color:U?t.myColor||"#ffffff":"inherit",border:U?`1px solid ${U}`:""},onClick:A=>B?b({word:T,myConcept:T,suggestionId:t.label+T+I},A):A.stopPropagation(),children:[T,I<t.suggestions.length-1?" ":"",K.jsx(ti,{type:"source",position:Ie.Right,id:t.label+T+I})]},I)}):K.jsx("div",{className:"node-suggestions-empty",children:"No suggestions"})})]}),Z]}),[n,o,u,E.length,x,M,P,D,X,Z]);return K.jsxs("div",{className:"static-editable-node nodrag",style:{backgroundColor:t.myColor,color:t.myColor?ed(t.myColor):"",border:t.myColor?`2px solid ${td(t.myColor,20)}`:""},children:[K.jsx("div",{className:"node-content",children:R}),K.jsx(ti,{type:"source",position:Ie.Bottom,id:"bottom-source"}),K.jsx(ti,{type:"target",position:Ie.Bottom,id:"bottom-target"})]})}function U5({data:t,id:e}){const[n,r]=C.useState(!1),[o,l]=C.useState(t.summary||t.label||"Draggable Node"),[u,f]=C.useState(t.expanded||!1),{getNodes:d,getNode:p,setViewport:g}=qc(),{handleTokenClick:v,showExplanation:E}=_I();C.useEffect(()=>{n||l(t.summary||t.label||"Draggable Node")},[t.summary,t.label,n]);const b=C.useMemo(()=>yI(o),[o]),x=C.useMemo(()=>u||b.length<=5?b:b.slice(0,5),[b,u]),M=C.useCallback(()=>!0,[]),D=C.useCallback((N,U)=>{U.stopPropagation();const A=d().find(q=>q.id===e);return A?v(N,e,A.position,A.type||"draggableEditable",t.myColor,t.summary||t.label||"Draggable Node"):void 0},[e,d,v,t.myColor]),P=C.useCallback(N=>{N.stopPropagation(),r(!0)},[]),H=C.useCallback(()=>{r(!1)},[]),F=C.useCallback(N=>{N.stopPropagation()},[]),j=C.useCallback(N=>{N.stopPropagation(),N.key==="Enter"&&H(),N.key==="Escape"&&(l(t.summary||t.label||"Draggable Node"),r(!1))},[H,t.summary,t.label]),X=C.useCallback(N=>{N.stopPropagation(),f(!u),!u&&t.onExpand&&t.onExpand()},[u,t.onExpand]),Z=C.useCallback(N=>{N.stopPropagation(),E&&E(o,t.full_text||"No detailed information available.")},[E,o,t.full_text]),R=C.useCallback(N=>{if(N.stopPropagation(),t.previousNode){const U=p(t.previousNode);if(U){const{x:B,y:A}=U.position;g({x:-B+200,y:-A+100,zoom:1},{duration:500})}}},[t.previousNode,p,g]),T=C.useMemo(()=>{const N={};return x.forEach(U=>{const B=U.myConcept||U.word;N[B]||(N[B]=[]),N[B].push(U)}),N},[x]),I=C.useMemo(()=>t.isLoading?K.jsxs("div",{className:"node-loading-content",children:[K.jsx(EI,{size:"small",color:t.myColor||"#4f86f7"}),K.jsx("span",{className:"loading-text",children:"Loading concept..."})]}):n?K.jsx("input",{type:"text",value:o,onChange:N=>l(N.target.value),onBlur:H,onKeyDown:j,onClick:F,className:"node-input nodrag",autoFocus:!0}):K.jsxs("div",{className:"node-layout",children:[K.jsxs("div",{className:"node-header",children:[K.jsx("div",{className:"node-title",children:t.title||"Node"}),K.jsxs("div",{className:"node-buttons",children:[t.previousNode&&K.jsx("button",{className:"node-expand-btn previous-node-btn",onClick:R,title:"Go to previous node",children:"←"}),b.length>5&&K.jsx("button",{className:"node-expand-btn",onClick:X,title:u?"Show less":"Show more",children:u?"−":"+"}),K.jsx("button",{className:"node-expand-btn explanation-btn-icon",onClick:Z,title:"Show full text",children:"📄"})]})]}),K.jsx("div",{className:"node-main-content",children:K.jsx("div",{className:"node-summary-section",children:K.jsxs("div",{className:"node-summary-text",onClick:P,children:[x.map((N,U)=>{const B=t.tokenColors||{},A=N.myConcept||N.word,k=B[A],q=M()&&!k;return K.jsxs("span",{className:`word-token ${q?"":"disabled"} ${N.myConcept?"concept-highlight":""}`,style:{backgroundColor:k||"transparent",color:k?ed(k):"inherit",border:k?`1px solid ${td(k,20)}`:""},onClick:V=>q?D(N,V):V.stopPropagation(),children:[N.word,U<x.length-1?" ":""]},U)}),b.length>5&&!u&&K.jsx("span",{className:"token-truncation",children:"..."})]})})}),K.jsxs("div",{className:"node-suggestions-section",children:[K.jsx("div",{className:"node-suggestions-header",children:"Suggestions"}),K.jsx("div",{className:"node-suggestions-list",children:t.suggestions&&t.suggestions.length>0?t.suggestions.map((N,U)=>{const A=(t.tokenColors||{})[N],k=M()&&!A;return K.jsxs("span",{className:`suggestion-token ${k?"":"disabled"}`,style:{backgroundColor:A||"transparent",color:A?ed(A):"inherit",border:A?`1px solid ${td(A,20)}`:""},onClick:q=>k?D({word:N,myConcept:N,suggestionId:t.label+N+U},q):q.stopPropagation(),children:[N,K.jsx(ti,{type:"source",position:Ie.Right,id:t.label+N+U})]},U)}):K.jsx("div",{className:"node-suggestions-empty",children:"No suggestions"})})]})]}),[n,o,x,b,u,T,P,H,j,F,X,Z,D,M,t.previousNode,R,t.tokenColors,t.myColor,t.isLoading]);return K.jsxs("div",{className:"draggable-editable-node",style:{background:t.myColor,color:t.myColor?ed(t.myColor):"",border:t.myColor?`2px solid ${td(t.myColor,20)}`:""},children:[K.jsx("div",{className:"node-content",children:I}),K.jsx(ti,{type:"source",position:Ie.Bottom,id:"bottom-source"}),K.jsx(ti,{type:"target",position:Ie.Bottom,id:"bottom-target"}),K.jsx(ti,{type:"source",position:Ie.Top,id:"top-source"}),K.jsx(ti,{type:"target",position:Ie.Top,id:"top-target"}),K.jsx(ti,{type:"source",position:Ie.Left,id:"left-source"}),K.jsx(ti,{type:"target",position:Ie.Left,id:"left-target"}),K.jsx(ti,{type:"source",position:Ie.Right,id:"right-source"}),K.jsx(ti,{type:"target",position:Ie.Right,id:"right-target"})]})}const B5={staticEditable:z5,draggableEditable:U5};function j5(){const[t,e]=C.useState("boards"),[n,r]=C.useState(null),{user:o,signOut:l}=E5(),{notifications:u,removeNotification:f,showSuccess:d,showError:p,showInfo:g}=N5(),{nodes:v,edges:E,allBoards:b,currentBoard:x,isSwitchingBoard:M,isSaving:D,onNodesChange:P,onEdgesChange:H,setNodes:F,switchToBoard:j,createNewBoard:X,deleteBoard:Z,updateBoardName:R,clearBoardState:T}=I5(o,{showSuccess:d,showError:p,showInfo:g});C5({allBoards:b,currentBoard:x,createNewBoard:X,switchToBoard:j});const I=async()=>{await l(),T()},N=C.useCallback((A,k)=>{r({title:A,text:k}),e("explanation")},[]),U=C.useCallback(A=>{e(A)},[]),B=C.useCallback(A=>{const k={id:`e${A.source}-${A.target}`,source:A.source,target:A.target,sourceHandle:A.sourceHandle,targetHandle:A.targetHandle};H([{type:"add",item:k}])},[H]);return o?K.jsxs("div",{className:"app-layout",style:{height:"100vh",width:"100vw"},children:[K.jsx(y5,{notifications:u,onRemove:f}),K.jsx("div",{style:{height:"100%"},children:K.jsxs(Ig,{defaultSizes:[420,1e3],children:[K.jsx(Ig.Pane,{minSize:240,maxSize:860,children:K.jsx(m5,{allBoards:b,currentBoard:x,onSwitchBoard:j,onCreateBoard:async A=>{await X(A)},onDeleteBoard:Z,onSignOut:I,isLoading:M,isCollapsed:!1,onToggleSidebar:()=>{},mode:t,onModeChange:U,explanation:n})}),K.jsx(Ig.Pane,{children:K.jsxs("div",{className:"main-content-pane",style:{height:"100%"},children:[K.jsx(p5,{name:x?.name||"Loading...",onSetName:R,user:o,isSaving:D,sidebarCollapsed:!1}),K.jsx("div",{className:"reactflow-container",style:{height:"calc(100% - 56px)"},children:K.jsx(L5,{nodes:v,onNodesChange:P,onEdgesChange:H,setNodes:F,showExplanation:N,children:K.jsxs(aA,{nodes:v,edges:E,onNodesChange:P,onEdgesChange:H,onConnect:B,nodeTypes:B5,connectionMode:bo.Loose,fitView:!0,children:[K.jsx(Hk,{}),K.jsx(Kk,{variant:ur.Cross,gap:30,size:10,lineWidth:.5,color:"#616161"})]})})})]})})]})})]}):K.jsx(z9,{})}function H5(){return K.jsx(j5,{})}const wI=document.getElementById("root");if(!wI)throw new Error("Failed to find the root element");eN.createRoot(wI).render(K.jsx(C.StrictMode,{children:K.jsx(H5,{})}));
