function LN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Rv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vy={exports:{}},Ac={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HE;function zN(){if(HE)return Ac;HE=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,o){var u=null;if(o!==void 0&&(u=""+o),s.key!==void 0&&(u=""+s.key),"key"in s){o={};for(var c in s)c!=="key"&&(o[c]=s[c])}else o=s;return s=o.ref,{$$typeof:t,type:r,key:u,ref:s!==void 0?s:null,props:o}}return Ac.Fragment=e,Ac.jsx=n,Ac.jsxs=n,Ac}var FE;function jN(){return FE||(FE=1,vy.exports=zN()),vy.exports}var L=jN(),_y={exports:{}},Ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $E;function UN(){if($E)return Ue;$E=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),_=Symbol.iterator;function b(B){return B===null||typeof B!="object"?null:(B=_&&B[_]||B["@@iterator"],typeof B=="function"?B:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,V={};function z(B,X,te){this.props=B,this.context=X,this.refs=V,this.updater=te||A}z.prototype.isReactComponent={},z.prototype.setState=function(B,X){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,X,"setState")},z.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function j(){}j.prototype=z.prototype;function F(B,X,te){this.props=B,this.context=X,this.refs=V,this.updater=te||A}var K=F.prototype=new j;K.constructor=F,O(K,z.prototype),K.isPureReactComponent=!0;var y=Array.isArray,E={H:null,A:null,T:null,S:null,V:null},w=Object.prototype.hasOwnProperty;function T(B,X,te,J,re,ce){return te=ce.ref,{$$typeof:t,type:B,key:X,ref:te!==void 0?te:null,props:ce}}function x(B,X){return T(B.type,X,void 0,void 0,void 0,B.props)}function C(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function k(B){var X={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(te){return X[te]})}var N=/\/+/g;function U(B,X){return typeof B=="object"&&B!==null&&B.key!=null?k(""+B.key):X.toString(36)}function M(){}function P(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(M,M):(B.status="pending",B.then(function(X){B.status==="pending"&&(B.status="fulfilled",B.value=X)},function(X){B.status==="pending"&&(B.status="rejected",B.reason=X)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function G(B,X,te,J,re){var ce=typeof B;(ce==="undefined"||ce==="boolean")&&(B=null);var ue=!1;if(B===null)ue=!0;else switch(ce){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(B.$$typeof){case t:case e:ue=!0;break;case p:return ue=B._init,G(ue(B._payload),X,te,J,re)}}if(ue)return re=re(B),ue=J===""?"."+U(B,0):J,y(re)?(te="",ue!=null&&(te=ue.replace(N,"$&/")+"/"),G(re,X,te,"",function(we){return we})):re!=null&&(C(re)&&(re=x(re,te+(re.key==null||B&&B.key===re.key?"":(""+re.key).replace(N,"$&/")+"/")+ue)),X.push(re)),1;ue=0;var fe=J===""?".":J+":";if(y(B))for(var pe=0;pe<B.length;pe++)J=B[pe],ce=fe+U(J,pe),ue+=G(J,X,te,ce,re);else if(pe=b(B),typeof pe=="function")for(B=pe.call(B),pe=0;!(J=B.next()).done;)J=J.value,ce=fe+U(J,pe++),ue+=G(J,X,te,ce,re);else if(ce==="object"){if(typeof B.then=="function")return G(P(B),X,te,J,re);throw X=String(B),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return ue}function R(B,X,te){if(B==null)return B;var J=[],re=0;return G(B,J,"","",function(ce){return X.call(te,ce,re++)}),J}function q(B){if(B._status===-1){var X=B._result;X=X(),X.then(function(te){(B._status===0||B._status===-1)&&(B._status=1,B._result=te)},function(te){(B._status===0||B._status===-1)&&(B._status=2,B._result=te)}),B._status===-1&&(B._status=0,B._result=X)}if(B._status===1)return B._result.default;throw B._result}var Q=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function W(){}return Ue.Children={map:R,forEach:function(B,X,te){R(B,function(){X.apply(this,arguments)},te)},count:function(B){var X=0;return R(B,function(){X++}),X},toArray:function(B){return R(B,function(X){return X})||[]},only:function(B){if(!C(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Ue.Component=z,Ue.Fragment=n,Ue.Profiler=s,Ue.PureComponent=F,Ue.StrictMode=r,Ue.Suspense=f,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(B){return E.H.useMemoCache(B)}},Ue.cache=function(B){return function(){return B.apply(null,arguments)}},Ue.cloneElement=function(B,X,te){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var J=O({},B.props),re=B.key,ce=void 0;if(X!=null)for(ue in X.ref!==void 0&&(ce=void 0),X.key!==void 0&&(re=""+X.key),X)!w.call(X,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&X.ref===void 0||(J[ue]=X[ue]);var ue=arguments.length-2;if(ue===1)J.children=te;else if(1<ue){for(var fe=Array(ue),pe=0;pe<ue;pe++)fe[pe]=arguments[pe+2];J.children=fe}return T(B.type,re,void 0,void 0,ce,J)},Ue.createContext=function(B){return B={$$typeof:u,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:o,_context:B},B},Ue.createElement=function(B,X,te){var J,re={},ce=null;if(X!=null)for(J in X.key!==void 0&&(ce=""+X.key),X)w.call(X,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(re[J]=X[J]);var ue=arguments.length-2;if(ue===1)re.children=te;else if(1<ue){for(var fe=Array(ue),pe=0;pe<ue;pe++)fe[pe]=arguments[pe+2];re.children=fe}if(B&&B.defaultProps)for(J in ue=B.defaultProps,ue)re[J]===void 0&&(re[J]=ue[J]);return T(B,ce,void 0,void 0,null,re)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(B){return{$$typeof:c,render:B}},Ue.isValidElement=C,Ue.lazy=function(B){return{$$typeof:p,_payload:{_status:-1,_result:B},_init:q}},Ue.memo=function(B,X){return{$$typeof:h,type:B,compare:X===void 0?null:X}},Ue.startTransition=function(B){var X=E.T,te={};E.T=te;try{var J=B(),re=E.S;re!==null&&re(te,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(W,Q)}catch(ce){Q(ce)}finally{E.T=X}},Ue.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},Ue.use=function(B){return E.H.use(B)},Ue.useActionState=function(B,X,te){return E.H.useActionState(B,X,te)},Ue.useCallback=function(B,X){return E.H.useCallback(B,X)},Ue.useContext=function(B){return E.H.useContext(B)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(B,X){return E.H.useDeferredValue(B,X)},Ue.useEffect=function(B,X,te){var J=E.H;if(typeof te=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(B,X)},Ue.useId=function(){return E.H.useId()},Ue.useImperativeHandle=function(B,X,te){return E.H.useImperativeHandle(B,X,te)},Ue.useInsertionEffect=function(B,X){return E.H.useInsertionEffect(B,X)},Ue.useLayoutEffect=function(B,X){return E.H.useLayoutEffect(B,X)},Ue.useMemo=function(B,X){return E.H.useMemo(B,X)},Ue.useOptimistic=function(B,X){return E.H.useOptimistic(B,X)},Ue.useReducer=function(B,X,te){return E.H.useReducer(B,X,te)},Ue.useRef=function(B){return E.H.useRef(B)},Ue.useState=function(B){return E.H.useState(B)},Ue.useSyncExternalStore=function(B,X,te){return E.H.useSyncExternalStore(B,X,te)},Ue.useTransition=function(){return E.H.useTransition()},Ue.version="19.1.0",Ue}var qE;function Nd(){return qE||(qE=1,_y.exports=UN()),_y.exports}var $=Nd();const me=Rv($),BN=LN({__proto__:null,default:me},[$]);var by={exports:{}},Cc={},wy={exports:{}},Ey={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GE;function HN(){return GE||(GE=1,function(t){function e(R,q){var Q=R.length;R.push(q);e:for(;0<Q;){var W=Q-1>>>1,B=R[W];if(0<s(B,q))R[W]=q,R[Q]=B,Q=W;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var q=R[0],Q=R.pop();if(Q!==q){R[0]=Q;e:for(var W=0,B=R.length,X=B>>>1;W<X;){var te=2*(W+1)-1,J=R[te],re=te+1,ce=R[re];if(0>s(J,Q))re<B&&0>s(ce,J)?(R[W]=ce,R[re]=Q,W=re):(R[W]=J,R[te]=Q,W=te);else if(re<B&&0>s(ce,Q))R[W]=ce,R[re]=Q,W=re;else break e}}return q}function s(R,q){var Q=R.sortIndex-q.sortIndex;return Q!==0?Q:R.id-q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();t.unstable_now=function(){return u.now()-c}}var f=[],h=[],p=1,_=null,b=3,A=!1,O=!1,V=!1,z=!1,j=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function y(R){for(var q=n(h);q!==null;){if(q.callback===null)r(h);else if(q.startTime<=R)r(h),q.sortIndex=q.expirationTime,e(f,q);else break;q=n(h)}}function E(R){if(V=!1,y(R),!O)if(n(f)!==null)O=!0,w||(w=!0,U());else{var q=n(h);q!==null&&G(E,q.startTime-R)}}var w=!1,T=-1,x=5,C=-1;function k(){return z?!0:!(t.unstable_now()-C<x)}function N(){if(z=!1,w){var R=t.unstable_now();C=R;var q=!0;try{e:{O=!1,V&&(V=!1,F(T),T=-1),A=!0;var Q=b;try{t:{for(y(R),_=n(f);_!==null&&!(_.expirationTime>R&&k());){var W=_.callback;if(typeof W=="function"){_.callback=null,b=_.priorityLevel;var B=W(_.expirationTime<=R);if(R=t.unstable_now(),typeof B=="function"){_.callback=B,y(R),q=!0;break t}_===n(f)&&r(f),y(R)}else r(f);_=n(f)}if(_!==null)q=!0;else{var X=n(h);X!==null&&G(E,X.startTime-R),q=!1}}break e}finally{_=null,b=Q,A=!1}q=void 0}}finally{q?U():w=!1}}}var U;if(typeof K=="function")U=function(){K(N)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,P=M.port2;M.port1.onmessage=N,U=function(){P.postMessage(null)}}else U=function(){j(N,0)};function G(R,q){T=j(function(){R(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(R){switch(b){case 1:case 2:case 3:var q=3;break;default:q=b}var Q=b;b=q;try{return R()}finally{b=Q}},t.unstable_requestPaint=function(){z=!0},t.unstable_runWithPriority=function(R,q){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var Q=b;b=R;try{return q()}finally{b=Q}},t.unstable_scheduleCallback=function(R,q,Q){var W=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?W+Q:W):Q=W,R){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=Q+B,R={id:p++,callback:q,priorityLevel:R,startTime:Q,expirationTime:B,sortIndex:-1},Q>W?(R.sortIndex=Q,e(h,R),n(f)===null&&R===n(h)&&(V?(F(T),T=-1):V=!0,G(E,Q-W))):(R.sortIndex=B,e(f,R),O||A||(O=!0,w||(w=!0,U()))),R},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(R){var q=b;return function(){var Q=b;b=q;try{return R.apply(this,arguments)}finally{b=Q}}}}(Ey)),Ey}var YE;function FN(){return YE||(YE=1,wy.exports=HN()),wy.exports}var Ty={exports:{}},An={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KE;function $N(){if(KE)return An;KE=1;var t=Nd();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(f,h,p){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:_==null?null:""+_,children:f,containerInfo:h,implementation:p}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return An.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,An.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(f,h,null,p)},An.flushSync=function(f){var h=u.T,p=r.p;try{if(u.T=null,r.p=2,f)return f()}finally{u.T=h,r.p=p,r.d.f()}},An.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},An.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},An.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,_=c(p,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,A=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:_,integrity:b,fetchPriority:A}):p==="script"&&r.d.X(f,{crossOrigin:_,integrity:b,fetchPriority:A,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},An.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=c(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},An.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,_=c(p,h.crossOrigin);r.d.L(f,p,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},An.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=c(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},An.requestFormReset=function(f){r.d.r(f)},An.unstable_batchedUpdates=function(f,h){return f(h)},An.useFormState=function(f,h,p){return u.H.useFormState(f,h,p)},An.useFormStatus=function(){return u.H.useHostTransitionStatus()},An.version="19.1.0",An}var XE;function n2(){if(XE)return Ty.exports;XE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ty.exports=$N(),Ty.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WE;function qN(){if(WE)return Cc;WE=1;var t=FN(),e=Nd(),n=n2();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function u(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function c(i){if(o(i)!==i)throw Error(r(188))}function f(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(r(188));return a!==i?null:i}for(var l=i,d=a;;){var g=l.return;if(g===null)break;var v=g.alternate;if(v===null){if(d=g.return,d!==null){l=d;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===l)return c(g),i;if(v===d)return c(g),a;v=v.sibling}throw Error(r(188))}if(l.return!==d.return)l=g,d=v;else{for(var D=!1,H=g.child;H;){if(H===l){D=!0,l=g,d=v;break}if(H===d){D=!0,d=g,l=v;break}H=H.sibling}if(!D){for(H=v.child;H;){if(H===l){D=!0,l=v,d=g;break}if(H===d){D=!0,d=v,l=g;break}H=H.sibling}if(!D)throw Error(r(189))}}if(l.alternate!==d)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:a}function h(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=h(i),a!==null)return a;i=i.sibling}return null}var p=Object.assign,_=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),K=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function U(i){return i===null||typeof i!="object"?null:(i=N&&i[N]||i["@@iterator"],typeof i=="function"?i:null)}var M=Symbol.for("react.client.reference");function P(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===M?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case O:return"Fragment";case z:return"Profiler";case V:return"StrictMode";case E:return"Suspense";case w:return"SuspenseList";case C:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case A:return"Portal";case K:return(i.displayName||"Context")+".Provider";case F:return(i._context.displayName||"Context")+".Consumer";case y:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case T:return a=i.displayName||null,a!==null?a:P(i.type)||"Memo";case x:a=i._payload,i=i._init;try{return P(i(a))}catch{}}return null}var G=Array.isArray,R=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},W=[],B=-1;function X(i){return{current:i}}function te(i){0>B||(i.current=W[B],W[B]=null,B--)}function J(i,a){B++,W[B]=i.current,i.current=a}var re=X(null),ce=X(null),ue=X(null),fe=X(null);function pe(i,a){switch(J(ue,a),J(ce,i),J(re,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?gE(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=gE(a),i=yE(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}te(re),J(re,i)}function we(){te(re),te(ce),te(ue)}function Ce(i){i.memoizedState!==null&&J(fe,i);var a=re.current,l=yE(a,i.type);a!==l&&(J(ce,i),J(re,l))}function Qe(i){ce.current===i&&(te(re),te(ce)),fe.current===i&&(te(fe),wc._currentValue=Q)}var Ze=Object.prototype.hasOwnProperty,Ve=t.unstable_scheduleCallback,rt=t.unstable_cancelCallback,st=t.unstable_shouldYield,Ht=t.unstable_requestPaint,je=t.unstable_now,Te=t.unstable_getCurrentPriorityLevel,kt=t.unstable_ImmediatePriority,Sn=t.unstable_UserBlockingPriority,Qt=t.unstable_NormalPriority,Jn=t.unstable_LowPriority,Pn=t.unstable_IdlePriority,On=t.log,Br=t.unstable_setDisableYieldValue,ot=null,Ge=null;function Ft(i){if(typeof On=="function"&&Br(i),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(ot,i)}catch{}}var Tt=Math.clz32?Math.clz32:sn,si=Math.log,$t=Math.LN2;function sn(i){return i>>>=0,i===0?32:31-(si(i)/$t|0)|0}var Vn=256,Ln=4194304;function an(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function mn(i,a,l){var d=i.pendingLanes;if(d===0)return 0;var g=0,v=i.suspendedLanes,D=i.pingedLanes;i=i.warmLanes;var H=d&134217727;return H!==0?(d=H&~v,d!==0?g=an(d):(D&=H,D!==0?g=an(D):l||(l=H&~i,l!==0&&(g=an(l))))):(H=d&~v,H!==0?g=an(H):D!==0?g=an(D):l||(l=d&~i,l!==0&&(g=an(l)))),g===0?0:a!==0&&a!==g&&(a&v)===0&&(v=g&-g,l=a&-a,v>=l||v===32&&(l&4194048)!==0)?a:g}function zn(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function ji(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ui(){var i=Vn;return Vn<<=1,(Vn&4194048)===0&&(Vn=256),i}function Hr(){var i=Ln;return Ln<<=1,(Ln&62914560)===0&&(Ln=4194304),i}function er(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function _r(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function tr(i,a,l,d,g,v){var D=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var H=i.entanglements,Z=i.expirationTimes,ae=i.hiddenUpdates;for(l=D&~l;0<l;){var he=31-Tt(l),ye=1<<he;H[he]=0,Z[he]=-1;var oe=ae[he];if(oe!==null)for(ae[he]=null,he=0;he<oe.length;he++){var le=oe[he];le!==null&&(le.lane&=-536870913)}l&=~ye}d!==0&&br(i,d,0),v!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=v&~(D&~a))}function br(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var d=31-Tt(a);i.entangledLanes|=a,i.entanglements[d]=i.entanglements[d]|1073741824|l&4194090}function Na(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var d=31-Tt(l),g=1<<d;g&a|i[d]&a&&(i[d]|=a),l&=~g}}function ai(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ts(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function oi(){var i=q.p;return i!==0?i:(i=window.event,i===void 0?32:VE(i.type))}function zo(i,a){var l=q.p;try{return q.p=i,a()}finally{q.p=l}}var yt=Math.random().toString(36).slice(2),Lt="__reactFiber$"+yt,It="__reactProps$"+yt,$n="__reactContainer$"+yt,Da="__reactEvents$"+yt,Cu="__reactListeners$"+yt,li="__reactHandles$"+yt,jo="__reactResources$"+yt,Bi="__reactMarker$"+yt;function ui(i){delete i[Lt],delete i[It],delete i[Da],delete i[Cu],delete i[li]}function wr(i){var a=i[Lt];if(a)return a;for(var l=i.parentNode;l;){if(a=l[$n]||l[Lt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=wE(i);i!==null;){if(l=i[Lt])return l;i=wE(i)}return a}i=l,l=i.parentNode}return null}function Er(i){if(i=i[Lt]||i[$n]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function Tr(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function pn(i){var a=i[jo];return a||(a=i[jo]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function St(i){i[Bi]=!0}var Ma=new Set,Ss={};function nr(i,a){Fr(i,a),Fr(i+"Capture",a)}function Fr(i,a){for(Ss[i]=a,i=0;i<a.length;i++)Ma.add(a[i])}var Pa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Uo={},Hi={};function Bo(i){return Ze.call(Hi,i)?!0:Ze.call(Uo,i)?!1:Pa.test(i)?Hi[i]=!0:(Uo[i]=!0,!1)}function ci(i,a,l){if(Bo(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function Sr(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function Zt(i,a,l,d){if(d===null)i.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+d)}}var di,Ho;function $r(i){if(di===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);di=a&&a[1]||"",Ho=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+di+i+Ho}var xs=!1;function fi(i,a){if(!i||xs)return"";xs=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(le){var oe=le}Reflect.construct(i,[],ye)}else{try{ye.call()}catch(le){oe=le}i.call(ye.prototype)}}else{try{throw Error()}catch(le){oe=le}(ye=i())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(le){if(le&&oe&&typeof le.stack=="string")return[le.stack,oe.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),D=v[0],H=v[1];if(D&&H){var Z=D.split(`
`),ae=H.split(`
`);for(g=d=0;d<Z.length&&!Z[d].includes("DetermineComponentFrameRoot");)d++;for(;g<ae.length&&!ae[g].includes("DetermineComponentFrameRoot");)g++;if(d===Z.length||g===ae.length)for(d=Z.length-1,g=ae.length-1;1<=d&&0<=g&&Z[d]!==ae[g];)g--;for(;1<=d&&0<=g;d--,g--)if(Z[d]!==ae[g]){if(d!==1||g!==1)do if(d--,g--,0>g||Z[d]!==ae[g]){var he=`
`+Z[d].replace(" at new "," at ");return i.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",i.displayName)),he}while(1<=d&&0<=g);break}}}finally{xs=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?$r(l):""}function Ru(i){switch(i.tag){case 26:case 27:case 5:return $r(i.type);case 16:return $r("Lazy");case 13:return $r("Suspense");case 19:return $r("SuspenseList");case 0:case 15:return fi(i.type,!1);case 11:return fi(i.type.render,!1);case 1:return fi(i.type,!0);case 31:return $r("Activity");default:return""}}function Fo(i){try{var a="";do a+=Ru(i),i=i.return;while(i);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function jn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ku(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ep(i){var a=ku(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),d=""+i[a];if(!i.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,v=l.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(D){d=""+D,v.call(this,D)}}),Object.defineProperty(i,a,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(D){d=""+D},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function $o(i){i._valueTracker||(i._valueTracker=Ep(i))}function Iu(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),d="";return i&&(d=ku(i)?i.checked?"true":"false":i.value),i=d,i!==l?(a.setValue(i),!0):!1}function Oa(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Tp=/[\n"\\]/g;function qt(i){return i.replace(Tp,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function rr(i,a,l,d,g,v,D,H){i.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?i.type=D:i.removeAttribute("type"),a!=null?D==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+jn(a)):i.value!==""+jn(a)&&(i.value=""+jn(a)):D!=="submit"&&D!=="reset"||i.removeAttribute("value"),a!=null?As(i,D,jn(a)):l!=null?As(i,D,jn(l)):d!=null&&i.removeAttribute("value"),g==null&&v!=null&&(i.defaultChecked=!!v),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?i.name=""+jn(H):i.removeAttribute("name")}function Va(i,a,l,d,g,v,D,H){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),a!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||a!=null))return;l=l!=null?""+jn(l):"",a=a!=null?""+jn(a):l,H||a===i.value||(i.value=a),i.defaultValue=a}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=H?i.checked:!!d,i.defaultChecked=!!d,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(i.name=D)}function As(i,a,l){a==="number"&&Oa(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Fi(i,a,l,d){if(i=i.options,a){a={};for(var g=0;g<l.length;g++)a["$"+l[g]]=!0;for(l=0;l<i.length;l++)g=a.hasOwnProperty("$"+i[l].value),i[l].selected!==g&&(i[l].selected=g),g&&d&&(i[l].defaultSelected=!0)}else{for(l=""+jn(l),a=null,g=0;g<i.length;g++){if(i[g].value===l){i[g].selected=!0,d&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function ft(i,a,l){if(a!=null&&(a=""+jn(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+jn(l):""}function La(i,a,l,d){if(a==null){if(d!=null){if(l!=null)throw Error(r(92));if(G(d)){if(1<d.length)throw Error(r(93));d=d[0]}l=d}l==null&&(l=""),a=l}l=jn(a),i.defaultValue=l,d=i.textContent,d===l&&d!==""&&d!==null&&(i.value=d)}function xr(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var za=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zd(i,a,l){var d=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":d?i.setProperty(a,l):typeof l!="number"||l===0||za.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function Nu(i,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var g in a)d=a[g],a.hasOwnProperty(g)&&l[g]!==d&&Zd(i,g,d)}else for(var v in a)a.hasOwnProperty(v)&&Zd(i,v,a[v])}function Du(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qo(i){return xp.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var $i=null;function Ar(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var qi=null,Gi=null;function Mu(i){var a=Er(i);if(a&&(i=a.stateNode)){var l=i[It]||null;e:switch(i=a.stateNode,a.type){case"input":if(rr(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+qt(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var d=l[a];if(d!==i&&d.form===i.form){var g=d[It]||null;if(!g)throw Error(r(90));rr(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<l.length;a++)d=l[a],d.form===i.form&&Iu(d)}break e;case"textarea":ft(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&Fi(i,!!l.multiple,a,!1)}}}var hi=!1;function Jd(i,a,l){if(hi)return i(a,l);hi=!0;try{var d=i(a);return d}finally{if(hi=!1,(qi!==null||Gi!==null)&&(Yf(),qi&&(a=qi,i=Gi,Gi=qi=null,Mu(a),i)))for(a=0;a<i.length;a++)Mu(i[a])}}function ja(i,a){var l=i.stateNode;if(l===null)return null;var d=l[It]||null;if(d===null)return null;l=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var qr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cr=!1;if(qr)try{var Ua={};Object.defineProperty(Ua,"passive",{get:function(){Cr=!0}}),window.addEventListener("test",Ua,Ua),window.removeEventListener("test",Ua,Ua)}catch{Cr=!1}var mi=null,Cs=null,Yi=null;function Pu(){if(Yi)return Yi;var i,a=Cs,l=a.length,d,g="value"in mi?mi.value:mi.textContent,v=g.length;for(i=0;i<l&&a[i]===g[i];i++);var D=l-i;for(d=1;d<=D&&a[l-d]===g[v-d];d++);return Yi=g.slice(i,1<d?1-d:void 0)}function pi(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function gi(){return!0}function Ou(){return!1}function on(i){function a(l,d,g,v,D){this._reactName=l,this._targetInst=g,this.type=d,this.nativeEvent=v,this.target=D,this.currentTarget=null;for(var H in i)i.hasOwnProperty(H)&&(l=i[H],this[H]=l?l(v):v[H]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?gi:Ou,this.isPropagationStopped=Ou,this}return p(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=gi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=gi)},persist:function(){},isPersistent:gi}),a}var lt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Go=on(lt),Ba=p({},lt,{view:0,detail:0}),ef=on(Ba),Yo,Ko,yi,Ha=p({},Ba,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qa,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yi&&(yi&&i.type==="mousemove"?(Yo=i.screenX-yi.screenX,Ko=i.screenY-yi.screenY):Ko=Yo=0,yi=i),Yo)},movementY:function(i){return"movementY"in i?i.movementY:Ko}}),Rr=on(Ha),tf=p({},Ha,{dataTransfer:0}),Ap=on(tf),Fa=p({},Ba,{relatedTarget:0}),Xo=on(Fa),Vu=p({},lt,{animationName:0,elapsedTime:0,pseudoElement:0}),Wo=on(Vu),nf=p({},lt,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Qo=on(nf),Cp=p({},lt,{data:0}),Lu=on(Cp),$a={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zu(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=sf[i])?!!a[i]:!1}function qa(){return zu}var af=p({},Ba,{key:function(i){if(i.key){var a=$a[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=pi(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?rf[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qa,charCode:function(i){return i.type==="keypress"?pi(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?pi(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Zo=on(af),of=p({},Ha,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ju=on(of),Ki=p({},Ba,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qa}),lf=on(Ki),uf=p({},lt,{propertyName:0,elapsedTime:0,pseudoElement:0}),cf=on(uf),df=p({},Ha,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Jo=on(df),Un=p({},lt,{newState:0,oldState:0}),ff=on(Un),hf=[9,13,27,32],vi=qr&&"CompositionEvent"in window,m=null;qr&&"documentMode"in document&&(m=document.documentMode);var S=qr&&"TextEvent"in window&&!m,I=qr&&(!vi||m&&8<m&&11>=m),Y=" ",ie=!1;function de(i,a){switch(i){case"keyup":return hf.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function be(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Je=!1;function Jt(i,a){switch(i){case"compositionend":return be(a);case"keypress":return a.which!==32?null:(ie=!0,Y);case"textInput":return i=a.data,i===Y&&ie?null:i;default:return null}}function et(i,a){if(Je)return i==="compositionend"||!vi&&de(i,a)?(i=Pu(),Yi=Cs=mi=null,Je=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return I&&a.locale!=="ko"?null:a.data;default:return null}}var ln={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function en(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!ln[i.type]:a==="textarea"}function Xi(i,a,l,d){qi?Gi?Gi.push(d):Gi=[d]:qi=d,a=Jf(a,"onChange"),0<a.length&&(l=new Go("onChange","change",null,l,d),i.push({event:l,listeners:a}))}var gn=null,_i=null;function Uu(i){dE(i,0)}function mf(i){var a=Tr(i);if(Iu(a))return i}function Db(i,a){if(i==="change")return a}var Mb=!1;if(qr){var Rp;if(qr){var kp="oninput"in document;if(!kp){var Pb=document.createElement("div");Pb.setAttribute("oninput","return;"),kp=typeof Pb.oninput=="function"}Rp=kp}else Rp=!1;Mb=Rp&&(!document.documentMode||9<document.documentMode)}function Ob(){gn&&(gn.detachEvent("onpropertychange",Vb),_i=gn=null)}function Vb(i){if(i.propertyName==="value"&&mf(_i)){var a=[];Xi(a,_i,i,Ar(i)),Jd(Uu,a)}}function hI(i,a,l){i==="focusin"?(Ob(),gn=a,_i=l,gn.attachEvent("onpropertychange",Vb)):i==="focusout"&&Ob()}function mI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return mf(_i)}function pI(i,a){if(i==="click")return mf(a)}function gI(i,a){if(i==="input"||i==="change")return mf(a)}function yI(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var ir=typeof Object.is=="function"?Object.is:yI;function Bu(i,a){if(ir(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),d=Object.keys(a);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var g=l[d];if(!Ze.call(a,g)||!ir(i[g],a[g]))return!1}return!0}function Lb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function zb(i,a){var l=Lb(i);i=0;for(var d;l;){if(l.nodeType===3){if(d=i+l.textContent.length,i<=a&&d>=a)return{node:l,offset:a-i};i=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Lb(l)}}function jb(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?jb(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Ub(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=Oa(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=Oa(i.document)}return a}function Ip(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var vI=qr&&"documentMode"in document&&11>=document.documentMode,el=null,Np=null,Hu=null,Dp=!1;function Bb(i,a,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Dp||el==null||el!==Oa(d)||(d=el,"selectionStart"in d&&Ip(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Hu&&Bu(Hu,d)||(Hu=d,d=Jf(Np,"onSelect"),0<d.length&&(a=new Go("onSelect","select",null,a,l),i.push({event:a,listeners:d}),a.target=el)))}function Ga(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var tl={animationend:Ga("Animation","AnimationEnd"),animationiteration:Ga("Animation","AnimationIteration"),animationstart:Ga("Animation","AnimationStart"),transitionrun:Ga("Transition","TransitionRun"),transitionstart:Ga("Transition","TransitionStart"),transitioncancel:Ga("Transition","TransitionCancel"),transitionend:Ga("Transition","TransitionEnd")},Mp={},Hb={};qr&&(Hb=document.createElement("div").style,"AnimationEvent"in window||(delete tl.animationend.animation,delete tl.animationiteration.animation,delete tl.animationstart.animation),"TransitionEvent"in window||delete tl.transitionend.transition);function Ya(i){if(Mp[i])return Mp[i];if(!tl[i])return i;var a=tl[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in Hb)return Mp[i]=a[l];return i}var Fb=Ya("animationend"),$b=Ya("animationiteration"),qb=Ya("animationstart"),_I=Ya("transitionrun"),bI=Ya("transitionstart"),wI=Ya("transitioncancel"),Gb=Ya("transitionend"),Yb=new Map,Pp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pp.push("scrollEnd");function Gr(i,a){Yb.set(i,a),nr(a,[i])}var Kb=new WeakMap;function kr(i,a){if(typeof i=="object"&&i!==null){var l=Kb.get(i);return l!==void 0?l:(a={value:i,source:a,stack:Fo(a)},Kb.set(i,a),a)}return{value:i,source:a,stack:Fo(a)}}var Ir=[],nl=0,Op=0;function pf(){for(var i=nl,a=Op=nl=0;a<i;){var l=Ir[a];Ir[a++]=null;var d=Ir[a];Ir[a++]=null;var g=Ir[a];Ir[a++]=null;var v=Ir[a];if(Ir[a++]=null,d!==null&&g!==null){var D=d.pending;D===null?g.next=g:(g.next=D.next,D.next=g),d.pending=g}v!==0&&Xb(l,g,v)}}function gf(i,a,l,d){Ir[nl++]=i,Ir[nl++]=a,Ir[nl++]=l,Ir[nl++]=d,Op|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function Vp(i,a,l,d){return gf(i,a,l,d),yf(i)}function rl(i,a){return gf(i,null,null,a),yf(i)}function Xb(i,a,l){i.lanes|=l;var d=i.alternate;d!==null&&(d.lanes|=l);for(var g=!1,v=i.return;v!==null;)v.childLanes|=l,d=v.alternate,d!==null&&(d.childLanes|=l),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(g=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,g&&a!==null&&(g=31-Tt(l),i=v.hiddenUpdates,d=i[g],d===null?i[g]=[a]:d.push(a),a.lane=l|536870912),v):null}function yf(i){if(50<hc)throw hc=0,Hg=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var il={};function EI(i,a,l,d){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(i,a,l,d){return new EI(i,a,l,d)}function Lp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Wi(i,a){var l=i.alternate;return l===null?(l=sr(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function Wb(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function vf(i,a,l,d,g,v){var D=0;if(d=i,typeof i=="function")Lp(i)&&(D=1);else if(typeof i=="string")D=SN(i,l,re.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case C:return i=sr(31,l,a,g),i.elementType=C,i.lanes=v,i;case O:return Ka(l.children,g,v,a);case V:D=8,g|=24;break;case z:return i=sr(12,l,a,g|2),i.elementType=z,i.lanes=v,i;case E:return i=sr(13,l,a,g),i.elementType=E,i.lanes=v,i;case w:return i=sr(19,l,a,g),i.elementType=w,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case j:case K:D=10;break e;case F:D=9;break e;case y:D=11;break e;case T:D=14;break e;case x:D=16,d=null;break e}D=29,l=Error(r(130,i===null?"null":typeof i,"")),d=null}return a=sr(D,l,a,g),a.elementType=i,a.type=d,a.lanes=v,a}function Ka(i,a,l,d){return i=sr(7,i,d,a),i.lanes=l,i}function zp(i,a,l){return i=sr(6,i,null,a),i.lanes=l,i}function jp(i,a,l){return a=sr(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var sl=[],al=0,_f=null,bf=0,Nr=[],Dr=0,Xa=null,Qi=1,Zi="";function Wa(i,a){sl[al++]=bf,sl[al++]=_f,_f=i,bf=a}function Qb(i,a,l){Nr[Dr++]=Qi,Nr[Dr++]=Zi,Nr[Dr++]=Xa,Xa=i;var d=Qi;i=Zi;var g=32-Tt(d)-1;d&=~(1<<g),l+=1;var v=32-Tt(a)+g;if(30<v){var D=g-g%5;v=(d&(1<<D)-1).toString(32),d>>=D,g-=D,Qi=1<<32-Tt(a)+g|l<<g|d,Zi=v+i}else Qi=1<<v|l<<g|d,Zi=i}function Up(i){i.return!==null&&(Wa(i,1),Qb(i,1,0))}function Bp(i){for(;i===_f;)_f=sl[--al],sl[al]=null,bf=sl[--al],sl[al]=null;for(;i===Xa;)Xa=Nr[--Dr],Nr[Dr]=null,Zi=Nr[--Dr],Nr[Dr]=null,Qi=Nr[--Dr],Nr[Dr]=null}var Bn=null,Nt=null,at=!1,Qa=null,bi=!1,Hp=Error(r(519));function Za(i){var a=Error(r(418,""));throw qu(kr(a,i)),Hp}function Zb(i){var a=i.stateNode,l=i.type,d=i.memoizedProps;switch(a[Lt]=i,a[It]=d,l){case"dialog":Ke("cancel",a),Ke("close",a);break;case"iframe":case"object":case"embed":Ke("load",a);break;case"video":case"audio":for(l=0;l<pc.length;l++)Ke(pc[l],a);break;case"source":Ke("error",a);break;case"img":case"image":case"link":Ke("error",a),Ke("load",a);break;case"details":Ke("toggle",a);break;case"input":Ke("invalid",a),Va(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),$o(a);break;case"select":Ke("invalid",a);break;case"textarea":Ke("invalid",a),La(a,d.value,d.defaultValue,d.children),$o(a)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||d.suppressHydrationWarning===!0||pE(a.textContent,l)?(d.popover!=null&&(Ke("beforetoggle",a),Ke("toggle",a)),d.onScroll!=null&&Ke("scroll",a),d.onScrollEnd!=null&&Ke("scrollend",a),d.onClick!=null&&(a.onclick=eh),a=!0):a=!1,a||Za(i)}function Jb(i){for(Bn=i.return;Bn;)switch(Bn.tag){case 5:case 13:bi=!1;return;case 27:case 3:bi=!0;return;default:Bn=Bn.return}}function Fu(i){if(i!==Bn)return!1;if(!at)return Jb(i),at=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||iy(i.type,i.memoizedProps)),l=!l),l&&Nt&&Za(i),Jb(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(l=i.data,l==="/$"){if(a===0){Nt=Kr(i.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;i=i.nextSibling}Nt=null}}else a===27?(a=Nt,Fs(i.type)?(i=ly,ly=null,Nt=i):Nt=a):Nt=Bn?Kr(i.stateNode.nextSibling):null;return!0}function $u(){Nt=Bn=null,at=!1}function ew(){var i=Qa;return i!==null&&(Yn===null?Yn=i:Yn.push.apply(Yn,i),Qa=null),i}function qu(i){Qa===null?Qa=[i]:Qa.push(i)}var Fp=X(null),Ja=null,Ji=null;function Rs(i,a,l){J(Fp,a._currentValue),a._currentValue=l}function es(i){i._currentValue=Fp.current,te(Fp)}function $p(i,a,l){for(;i!==null;){var d=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),i===l)break;i=i.return}}function qp(i,a,l,d){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var v=g.dependencies;if(v!==null){var D=g.child;v=v.firstContext;e:for(;v!==null;){var H=v;v=g;for(var Z=0;Z<a.length;Z++)if(H.context===a[Z]){v.lanes|=l,H=v.alternate,H!==null&&(H.lanes|=l),$p(v.return,l,i),d||(D=null);break e}v=H.next}}else if(g.tag===18){if(D=g.return,D===null)throw Error(r(341));D.lanes|=l,v=D.alternate,v!==null&&(v.lanes|=l),$p(D,l,i),D=null}else D=g.child;if(D!==null)D.return=g;else for(D=g;D!==null;){if(D===i){D=null;break}if(g=D.sibling,g!==null){g.return=D.return,D=g;break}D=D.return}g=D}}function Gu(i,a,l,d){i=null;for(var g=a,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var D=g.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var H=g.type;ir(g.pendingProps.value,D.value)||(i!==null?i.push(H):i=[H])}}else if(g===fe.current){if(D=g.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(wc):i=[wc])}g=g.return}i!==null&&qp(a,i,l,d),a.flags|=262144}function wf(i){for(i=i.firstContext;i!==null;){if(!ir(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function eo(i){Ja=i,Ji=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function xn(i){return tw(Ja,i)}function Ef(i,a){return Ja===null&&eo(i),tw(i,a)}function tw(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Ji===null){if(i===null)throw Error(r(308));Ji=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Ji=Ji.next=a;return l}var TI=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,d){i.push(d)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},SI=t.unstable_scheduleCallback,xI=t.unstable_NormalPriority,tn={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gp(){return{controller:new TI,data:new Map,refCount:0}}function Yu(i){i.refCount--,i.refCount===0&&SI(xI,function(){i.controller.abort()})}var Ku=null,Yp=0,ol=0,ll=null;function AI(i,a){if(Ku===null){var l=Ku=[];Yp=0,ol=Xg(),ll={status:"pending",value:void 0,then:function(d){l.push(d)}}}return Yp++,a.then(nw,nw),a}function nw(){if(--Yp===0&&Ku!==null){ll!==null&&(ll.status="fulfilled");var i=Ku;Ku=null,ol=0,ll=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function CI(i,a){var l=[],d={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return i.then(function(){d.status="fulfilled",d.value=a;for(var g=0;g<l.length;g++)(0,l[g])(a)},function(g){for(d.status="rejected",d.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),d}var rw=R.S;R.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&AI(i,a),rw!==null&&rw(i,a)};var to=X(null);function Kp(){var i=to.current;return i!==null?i:vt.pooledCache}function Tf(i,a){a===null?J(to,to.current):J(to,a.pool)}function iw(){var i=Kp();return i===null?null:{parent:tn._currentValue,pool:i}}var Xu=Error(r(460)),sw=Error(r(474)),Sf=Error(r(542)),Xp={then:function(){}};function aw(i){return i=i.status,i==="fulfilled"||i==="rejected"}function xf(){}function ow(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(xf,xf),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,uw(i),i;default:if(typeof a.status=="string")a.then(xf,xf);else{if(i=vt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(d){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=d}},function(d){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,uw(i),i}throw Wu=a,Xu}}var Wu=null;function lw(){if(Wu===null)throw Error(r(459));var i=Wu;return Wu=null,i}function uw(i){if(i===Xu||i===Sf)throw Error(r(483))}var ks=!1;function Wp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qp(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Is(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ns(i,a,l){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(ct&2)!==0){var g=d.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),d.pending=a,a=yf(i),Xb(i,null,l),a}return gf(i,d,a,l),yf(i)}function Qu(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var d=a.lanes;d&=i.pendingLanes,l|=d,a.lanes=l,Na(i,l)}}function Zp(i,a){var l=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var g=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var D={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?g=v=D:v=v.next=D,l=l.next}while(l!==null);v===null?g=v=a:v=v.next=a}else g=v=a;l={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var Jp=!1;function Zu(){if(Jp){var i=ll;if(i!==null)throw i}}function Ju(i,a,l,d){Jp=!1;var g=i.updateQueue;ks=!1;var v=g.firstBaseUpdate,D=g.lastBaseUpdate,H=g.shared.pending;if(H!==null){g.shared.pending=null;var Z=H,ae=Z.next;Z.next=null,D===null?v=ae:D.next=ae,D=Z;var he=i.alternate;he!==null&&(he=he.updateQueue,H=he.lastBaseUpdate,H!==D&&(H===null?he.firstBaseUpdate=ae:H.next=ae,he.lastBaseUpdate=Z))}if(v!==null){var ye=g.baseState;D=0,he=ae=Z=null,H=v;do{var oe=H.lane&-536870913,le=oe!==H.lane;if(le?(tt&oe)===oe:(d&oe)===oe){oe!==0&&oe===ol&&(Jp=!0),he!==null&&(he=he.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});e:{var Pe=i,Ie=H;oe=a;var pt=l;switch(Ie.tag){case 1:if(Pe=Ie.payload,typeof Pe=="function"){ye=Pe.call(pt,ye,oe);break e}ye=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Ie.payload,oe=typeof Pe=="function"?Pe.call(pt,ye,oe):Pe,oe==null)break e;ye=p({},ye,oe);break e;case 2:ks=!0}}oe=H.callback,oe!==null&&(i.flags|=64,le&&(i.flags|=8192),le=g.callbacks,le===null?g.callbacks=[oe]:le.push(oe))}else le={lane:oe,tag:H.tag,payload:H.payload,callback:H.callback,next:null},he===null?(ae=he=le,Z=ye):he=he.next=le,D|=oe;if(H=H.next,H===null){if(H=g.shared.pending,H===null)break;le=H,H=le.next,le.next=null,g.lastBaseUpdate=le,g.shared.pending=null}}while(!0);he===null&&(Z=ye),g.baseState=Z,g.firstBaseUpdate=ae,g.lastBaseUpdate=he,v===null&&(g.shared.lanes=0),js|=D,i.lanes=D,i.memoizedState=ye}}function cw(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function dw(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)cw(l[i],a)}var ul=X(null),Af=X(0);function fw(i,a){i=os,J(Af,i),J(ul,a),os=i|a.baseLanes}function eg(){J(Af,os),J(ul,ul.current)}function tg(){os=Af.current,te(ul),te(Af)}var Ds=0,He=null,ht=null,Gt=null,Cf=!1,cl=!1,no=!1,Rf=0,ec=0,dl=null,RI=0;function zt(){throw Error(r(321))}function ng(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!ir(i[l],a[l]))return!1;return!0}function rg(i,a,l,d,g,v){return Ds=v,He=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,R.H=i===null||i.memoizedState===null?Xw:Ww,no=!1,v=l(d,g),no=!1,cl&&(v=mw(a,l,d,g)),hw(i),v}function hw(i){R.H=Pf;var a=ht!==null&&ht.next!==null;if(Ds=0,Gt=ht=He=null,Cf=!1,ec=0,dl=null,a)throw Error(r(300));i===null||un||(i=i.dependencies,i!==null&&wf(i)&&(un=!0))}function mw(i,a,l,d){He=i;var g=0;do{if(cl&&(dl=null),ec=0,cl=!1,25<=g)throw Error(r(301));if(g+=1,Gt=ht=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}R.H=OI,v=a(l,d)}while(cl);return v}function kI(){var i=R.H,a=i.useState()[0];return a=typeof a.then=="function"?tc(a):a,i=i.useState()[0],(ht!==null?ht.memoizedState:null)!==i&&(He.flags|=1024),a}function ig(){var i=Rf!==0;return Rf=0,i}function sg(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function ag(i){if(Cf){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Cf=!1}Ds=0,Gt=ht=He=null,cl=!1,ec=Rf=0,dl=null}function qn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?He.memoizedState=Gt=i:Gt=Gt.next=i,Gt}function Yt(){if(ht===null){var i=He.alternate;i=i!==null?i.memoizedState:null}else i=ht.next;var a=Gt===null?He.memoizedState:Gt.next;if(a!==null)Gt=a,ht=i;else{if(i===null)throw He.alternate===null?Error(r(467)):Error(r(310));ht=i,i={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},Gt===null?He.memoizedState=Gt=i:Gt=Gt.next=i}return Gt}function og(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tc(i){var a=ec;return ec+=1,dl===null&&(dl=[]),i=ow(dl,i,a),a=He,(Gt===null?a.memoizedState:Gt.next)===null&&(a=a.alternate,R.H=a===null||a.memoizedState===null?Xw:Ww),i}function kf(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return tc(i);if(i.$$typeof===K)return xn(i)}throw Error(r(438,String(i)))}function lg(i){var a=null,l=He.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var d=He.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=og(),He.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),d=0;d<i;d++)l[d]=k;return a.index++,l}function ts(i,a){return typeof a=="function"?a(i):a}function If(i){var a=Yt();return ug(a,ht,i)}function ug(i,a,l){var d=i.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=l;var g=i.baseQueue,v=d.pending;if(v!==null){if(g!==null){var D=g.next;g.next=v.next,v.next=D}a.baseQueue=g=v,d.pending=null}if(v=i.baseState,g===null)i.memoizedState=v;else{a=g.next;var H=D=null,Z=null,ae=a,he=!1;do{var ye=ae.lane&-536870913;if(ye!==ae.lane?(tt&ye)===ye:(Ds&ye)===ye){var oe=ae.revertLane;if(oe===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),ye===ol&&(he=!0);else if((Ds&oe)===oe){ae=ae.next,oe===ol&&(he=!0);continue}else ye={lane:0,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},Z===null?(H=Z=ye,D=v):Z=Z.next=ye,He.lanes|=oe,js|=oe;ye=ae.action,no&&l(v,ye),v=ae.hasEagerState?ae.eagerState:l(v,ye)}else oe={lane:ye,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},Z===null?(H=Z=oe,D=v):Z=Z.next=oe,He.lanes|=ye,js|=ye;ae=ae.next}while(ae!==null&&ae!==a);if(Z===null?D=v:Z.next=H,!ir(v,i.memoizedState)&&(un=!0,he&&(l=ll,l!==null)))throw l;i.memoizedState=v,i.baseState=D,i.baseQueue=Z,d.lastRenderedState=v}return g===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function cg(i){var a=Yt(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var d=l.dispatch,g=l.pending,v=a.memoizedState;if(g!==null){l.pending=null;var D=g=g.next;do v=i(v,D.action),D=D.next;while(D!==g);ir(v,a.memoizedState)||(un=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),l.lastRenderedState=v}return[v,d]}function pw(i,a,l){var d=He,g=Yt(),v=at;if(v){if(l===void 0)throw Error(r(407));l=l()}else l=a();var D=!ir((ht||g).memoizedState,l);D&&(g.memoizedState=l,un=!0),g=g.queue;var H=vw.bind(null,d,g,i);if(nc(2048,8,H,[i]),g.getSnapshot!==a||D||Gt!==null&&Gt.memoizedState.tag&1){if(d.flags|=2048,fl(9,Nf(),yw.bind(null,d,g,l,a),null),vt===null)throw Error(r(349));v||(Ds&124)!==0||gw(d,a,l)}return l}function gw(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=He.updateQueue,a===null?(a=og(),He.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function yw(i,a,l,d){a.value=l,a.getSnapshot=d,_w(a)&&bw(i)}function vw(i,a,l){return l(function(){_w(a)&&bw(i)})}function _w(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!ir(i,l)}catch{return!0}}function bw(i){var a=rl(i,2);a!==null&&cr(a,i,2)}function dg(i){var a=qn();if(typeof i=="function"){var l=i;if(i=l(),no){Ft(!0);try{l()}finally{Ft(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:i},a}function ww(i,a,l,d){return i.baseState=l,ug(i,ht,typeof d=="function"?d:ts)}function II(i,a,l,d,g){if(Mf(i))throw Error(r(485));if(i=a.action,i!==null){var v={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){v.listeners.push(D)}};R.T!==null?l(!0):v.isTransition=!1,d(v),l=a.pending,l===null?(v.next=a.pending=v,Ew(a,v)):(v.next=l.next,a.pending=l.next=v)}}function Ew(i,a){var l=a.action,d=a.payload,g=i.state;if(a.isTransition){var v=R.T,D={};R.T=D;try{var H=l(g,d),Z=R.S;Z!==null&&Z(D,H),Tw(i,a,H)}catch(ae){fg(i,a,ae)}finally{R.T=v}}else try{v=l(g,d),Tw(i,a,v)}catch(ae){fg(i,a,ae)}}function Tw(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){Sw(i,a,d)},function(d){return fg(i,a,d)}):Sw(i,a,l)}function Sw(i,a,l){a.status="fulfilled",a.value=l,xw(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,Ew(i,l)))}function fg(i,a,l){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=l,xw(a),a=a.next;while(a!==d)}i.action=null}function xw(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function Aw(i,a){return a}function Cw(i,a){if(at){var l=vt.formState;if(l!==null){e:{var d=He;if(at){if(Nt){t:{for(var g=Nt,v=bi;g.nodeType!==8;){if(!v){g=null;break t}if(g=Kr(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){Nt=Kr(g.nextSibling),d=g.data==="F!";break e}}Za(d)}d=!1}d&&(a=l[0])}}return l=qn(),l.memoizedState=l.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aw,lastRenderedState:a},l.queue=d,l=Gw.bind(null,He,d),d.dispatch=l,d=dg(!1),v=yg.bind(null,He,!1,d.queue),d=qn(),g={state:a,dispatch:null,action:i,pending:null},d.queue=g,l=II.bind(null,He,g,v,l),g.dispatch=l,d.memoizedState=i,[a,l,!1]}function Rw(i){var a=Yt();return kw(a,ht,i)}function kw(i,a,l){if(a=ug(i,a,Aw)[0],i=If(ts)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=tc(a)}catch(D){throw D===Xu?Sf:D}else d=a;a=Yt();var g=a.queue,v=g.dispatch;return l!==a.memoizedState&&(He.flags|=2048,fl(9,Nf(),NI.bind(null,g,l),null)),[d,v,i]}function NI(i,a){i.action=a}function Iw(i){var a=Yt(),l=ht;if(l!==null)return kw(a,l,i);Yt(),a=a.memoizedState,l=Yt();var d=l.queue.dispatch;return l.memoizedState=i,[a,d,!1]}function fl(i,a,l,d){return i={tag:i,create:l,deps:d,inst:a,next:null},a=He.updateQueue,a===null&&(a=og(),He.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(d=l.next,l.next=i,i.next=d,a.lastEffect=i),i}function Nf(){return{destroy:void 0,resource:void 0}}function Nw(){return Yt().memoizedState}function Df(i,a,l,d){var g=qn();d=d===void 0?null:d,He.flags|=i,g.memoizedState=fl(1|a,Nf(),l,d)}function nc(i,a,l,d){var g=Yt();d=d===void 0?null:d;var v=g.memoizedState.inst;ht!==null&&d!==null&&ng(d,ht.memoizedState.deps)?g.memoizedState=fl(a,v,l,d):(He.flags|=i,g.memoizedState=fl(1|a,v,l,d))}function Dw(i,a){Df(8390656,8,i,a)}function Mw(i,a){nc(2048,8,i,a)}function Pw(i,a){return nc(4,2,i,a)}function Ow(i,a){return nc(4,4,i,a)}function Vw(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function Lw(i,a,l){l=l!=null?l.concat([i]):null,nc(4,4,Vw.bind(null,a,i),l)}function hg(){}function zw(i,a){var l=Yt();a=a===void 0?null:a;var d=l.memoizedState;return a!==null&&ng(a,d[1])?d[0]:(l.memoizedState=[i,a],i)}function jw(i,a){var l=Yt();a=a===void 0?null:a;var d=l.memoizedState;if(a!==null&&ng(a,d[1]))return d[0];if(d=i(),no){Ft(!0);try{i()}finally{Ft(!1)}}return l.memoizedState=[d,a],d}function mg(i,a,l){return l===void 0||(Ds&1073741824)!==0?i.memoizedState=a:(i.memoizedState=l,i=H1(),He.lanes|=i,js|=i,l)}function Uw(i,a,l,d){return ir(l,a)?l:ul.current!==null?(i=mg(i,l,d),ir(i,a)||(un=!0),i):(Ds&42)===0?(un=!0,i.memoizedState=l):(i=H1(),He.lanes|=i,js|=i,a)}function Bw(i,a,l,d,g){var v=q.p;q.p=v!==0&&8>v?v:8;var D=R.T,H={};R.T=H,yg(i,!1,a,l);try{var Z=g(),ae=R.S;if(ae!==null&&ae(H,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var he=CI(Z,d);rc(i,a,he,ur(i))}else rc(i,a,d,ur(i))}catch(ye){rc(i,a,{then:function(){},status:"rejected",reason:ye},ur())}finally{q.p=v,R.T=D}}function DI(){}function pg(i,a,l,d){if(i.tag!==5)throw Error(r(476));var g=Hw(i).queue;Bw(i,g,a,Q,l===null?DI:function(){return Fw(i),l(d)})}function Hw(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:Q},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function Fw(i){var a=Hw(i).next.queue;rc(i,a,{},ur())}function gg(){return xn(wc)}function $w(){return Yt().memoizedState}function qw(){return Yt().memoizedState}function MI(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=ur();i=Is(l);var d=Ns(a,i,l);d!==null&&(cr(d,a,l),Qu(d,a,l)),a={cache:Gp()},i.payload=a;return}a=a.return}}function PI(i,a,l){var d=ur();l={lane:d,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Mf(i)?Yw(a,l):(l=Vp(i,a,l,d),l!==null&&(cr(l,i,d),Kw(l,a,d)))}function Gw(i,a,l){var d=ur();rc(i,a,l,d)}function rc(i,a,l,d){var g={lane:d,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Mf(i))Yw(a,g);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var D=a.lastRenderedState,H=v(D,l);if(g.hasEagerState=!0,g.eagerState=H,ir(H,D))return gf(i,a,g,0),vt===null&&pf(),!1}catch{}finally{}if(l=Vp(i,a,g,d),l!==null)return cr(l,i,d),Kw(l,a,d),!0}return!1}function yg(i,a,l,d){if(d={lane:2,revertLane:Xg(),action:d,hasEagerState:!1,eagerState:null,next:null},Mf(i)){if(a)throw Error(r(479))}else a=Vp(i,l,d,2),a!==null&&cr(a,i,2)}function Mf(i){var a=i.alternate;return i===He||a!==null&&a===He}function Yw(i,a){cl=Cf=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function Kw(i,a,l){if((l&4194048)!==0){var d=a.lanes;d&=i.pendingLanes,l|=d,a.lanes=l,Na(i,l)}}var Pf={readContext:xn,use:kf,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useLayoutEffect:zt,useInsertionEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useSyncExternalStore:zt,useId:zt,useHostTransitionStatus:zt,useFormState:zt,useActionState:zt,useOptimistic:zt,useMemoCache:zt,useCacheRefresh:zt},Xw={readContext:xn,use:kf,useCallback:function(i,a){return qn().memoizedState=[i,a===void 0?null:a],i},useContext:xn,useEffect:Dw,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,Df(4194308,4,Vw.bind(null,a,i),l)},useLayoutEffect:function(i,a){return Df(4194308,4,i,a)},useInsertionEffect:function(i,a){Df(4,2,i,a)},useMemo:function(i,a){var l=qn();a=a===void 0?null:a;var d=i();if(no){Ft(!0);try{i()}finally{Ft(!1)}}return l.memoizedState=[d,a],d},useReducer:function(i,a,l){var d=qn();if(l!==void 0){var g=l(a);if(no){Ft(!0);try{l(a)}finally{Ft(!1)}}}else g=a;return d.memoizedState=d.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},d.queue=i,i=i.dispatch=PI.bind(null,He,i),[d.memoizedState,i]},useRef:function(i){var a=qn();return i={current:i},a.memoizedState=i},useState:function(i){i=dg(i);var a=i.queue,l=Gw.bind(null,He,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:hg,useDeferredValue:function(i,a){var l=qn();return mg(l,i,a)},useTransition:function(){var i=dg(!1);return i=Bw.bind(null,He,i.queue,!0,!1),qn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var d=He,g=qn();if(at){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),vt===null)throw Error(r(349));(tt&124)!==0||gw(d,a,l)}g.memoizedState=l;var v={value:l,getSnapshot:a};return g.queue=v,Dw(vw.bind(null,d,v,i),[i]),d.flags|=2048,fl(9,Nf(),yw.bind(null,d,v,l,a),null),l},useId:function(){var i=qn(),a=vt.identifierPrefix;if(at){var l=Zi,d=Qi;l=(d&~(1<<32-Tt(d)-1)).toString(32)+l,a=""+a+"R"+l,l=Rf++,0<l&&(a+="H"+l.toString(32)),a+=""}else l=RI++,a=""+a+"r"+l.toString(32)+"";return i.memoizedState=a},useHostTransitionStatus:gg,useFormState:Cw,useActionState:Cw,useOptimistic:function(i){var a=qn();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=yg.bind(null,He,!0,l),l.dispatch=a,[i,a]},useMemoCache:lg,useCacheRefresh:function(){return qn().memoizedState=MI.bind(null,He)}},Ww={readContext:xn,use:kf,useCallback:zw,useContext:xn,useEffect:Mw,useImperativeHandle:Lw,useInsertionEffect:Pw,useLayoutEffect:Ow,useMemo:jw,useReducer:If,useRef:Nw,useState:function(){return If(ts)},useDebugValue:hg,useDeferredValue:function(i,a){var l=Yt();return Uw(l,ht.memoizedState,i,a)},useTransition:function(){var i=If(ts)[0],a=Yt().memoizedState;return[typeof i=="boolean"?i:tc(i),a]},useSyncExternalStore:pw,useId:$w,useHostTransitionStatus:gg,useFormState:Rw,useActionState:Rw,useOptimistic:function(i,a){var l=Yt();return ww(l,ht,i,a)},useMemoCache:lg,useCacheRefresh:qw},OI={readContext:xn,use:kf,useCallback:zw,useContext:xn,useEffect:Mw,useImperativeHandle:Lw,useInsertionEffect:Pw,useLayoutEffect:Ow,useMemo:jw,useReducer:cg,useRef:Nw,useState:function(){return cg(ts)},useDebugValue:hg,useDeferredValue:function(i,a){var l=Yt();return ht===null?mg(l,i,a):Uw(l,ht.memoizedState,i,a)},useTransition:function(){var i=cg(ts)[0],a=Yt().memoizedState;return[typeof i=="boolean"?i:tc(i),a]},useSyncExternalStore:pw,useId:$w,useHostTransitionStatus:gg,useFormState:Iw,useActionState:Iw,useOptimistic:function(i,a){var l=Yt();return ht!==null?ww(l,ht,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:lg,useCacheRefresh:qw},hl=null,ic=0;function Of(i){var a=ic;return ic+=1,hl===null&&(hl=[]),ow(hl,i,a)}function sc(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Vf(i,a){throw a.$$typeof===_?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function Qw(i){var a=i._init;return a(i._payload)}function Zw(i){function a(ne,ee){if(i){var se=ne.deletions;se===null?(ne.deletions=[ee],ne.flags|=16):se.push(ee)}}function l(ne,ee){if(!i)return null;for(;ee!==null;)a(ne,ee),ee=ee.sibling;return null}function d(ne){for(var ee=new Map;ne!==null;)ne.key!==null?ee.set(ne.key,ne):ee.set(ne.index,ne),ne=ne.sibling;return ee}function g(ne,ee){return ne=Wi(ne,ee),ne.index=0,ne.sibling=null,ne}function v(ne,ee,se){return ne.index=se,i?(se=ne.alternate,se!==null?(se=se.index,se<ee?(ne.flags|=67108866,ee):se):(ne.flags|=67108866,ee)):(ne.flags|=1048576,ee)}function D(ne){return i&&ne.alternate===null&&(ne.flags|=67108866),ne}function H(ne,ee,se,ge){return ee===null||ee.tag!==6?(ee=zp(se,ne.mode,ge),ee.return=ne,ee):(ee=g(ee,se),ee.return=ne,ee)}function Z(ne,ee,se,ge){var Ae=se.type;return Ae===O?he(ne,ee,se.props.children,ge,se.key):ee!==null&&(ee.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===x&&Qw(Ae)===ee.type)?(ee=g(ee,se.props),sc(ee,se),ee.return=ne,ee):(ee=vf(se.type,se.key,se.props,null,ne.mode,ge),sc(ee,se),ee.return=ne,ee)}function ae(ne,ee,se,ge){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==se.containerInfo||ee.stateNode.implementation!==se.implementation?(ee=jp(se,ne.mode,ge),ee.return=ne,ee):(ee=g(ee,se.children||[]),ee.return=ne,ee)}function he(ne,ee,se,ge,Ae){return ee===null||ee.tag!==7?(ee=Ka(se,ne.mode,ge,Ae),ee.return=ne,ee):(ee=g(ee,se),ee.return=ne,ee)}function ye(ne,ee,se){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=zp(""+ee,ne.mode,se),ee.return=ne,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case b:return se=vf(ee.type,ee.key,ee.props,null,ne.mode,se),sc(se,ee),se.return=ne,se;case A:return ee=jp(ee,ne.mode,se),ee.return=ne,ee;case x:var ge=ee._init;return ee=ge(ee._payload),ye(ne,ee,se)}if(G(ee)||U(ee))return ee=Ka(ee,ne.mode,se,null),ee.return=ne,ee;if(typeof ee.then=="function")return ye(ne,Of(ee),se);if(ee.$$typeof===K)return ye(ne,Ef(ne,ee),se);Vf(ne,ee)}return null}function oe(ne,ee,se,ge){var Ae=ee!==null?ee.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return Ae!==null?null:H(ne,ee,""+se,ge);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case b:return se.key===Ae?Z(ne,ee,se,ge):null;case A:return se.key===Ae?ae(ne,ee,se,ge):null;case x:return Ae=se._init,se=Ae(se._payload),oe(ne,ee,se,ge)}if(G(se)||U(se))return Ae!==null?null:he(ne,ee,se,ge,null);if(typeof se.then=="function")return oe(ne,ee,Of(se),ge);if(se.$$typeof===K)return oe(ne,ee,Ef(ne,se),ge);Vf(ne,se)}return null}function le(ne,ee,se,ge,Ae){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ne=ne.get(se)||null,H(ee,ne,""+ge,Ae);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case b:return ne=ne.get(ge.key===null?se:ge.key)||null,Z(ee,ne,ge,Ae);case A:return ne=ne.get(ge.key===null?se:ge.key)||null,ae(ee,ne,ge,Ae);case x:var $e=ge._init;return ge=$e(ge._payload),le(ne,ee,se,ge,Ae)}if(G(ge)||U(ge))return ne=ne.get(se)||null,he(ee,ne,ge,Ae,null);if(typeof ge.then=="function")return le(ne,ee,se,Of(ge),Ae);if(ge.$$typeof===K)return le(ne,ee,se,Ef(ee,ge),Ae);Vf(ee,ge)}return null}function Pe(ne,ee,se,ge){for(var Ae=null,$e=null,Re=ee,Ne=ee=0,dn=null;Re!==null&&Ne<se.length;Ne++){Re.index>Ne?(dn=Re,Re=null):dn=Re.sibling;var it=oe(ne,Re,se[Ne],ge);if(it===null){Re===null&&(Re=dn);break}i&&Re&&it.alternate===null&&a(ne,Re),ee=v(it,ee,Ne),$e===null?Ae=it:$e.sibling=it,$e=it,Re=dn}if(Ne===se.length)return l(ne,Re),at&&Wa(ne,Ne),Ae;if(Re===null){for(;Ne<se.length;Ne++)Re=ye(ne,se[Ne],ge),Re!==null&&(ee=v(Re,ee,Ne),$e===null?Ae=Re:$e.sibling=Re,$e=Re);return at&&Wa(ne,Ne),Ae}for(Re=d(Re);Ne<se.length;Ne++)dn=le(Re,ne,Ne,se[Ne],ge),dn!==null&&(i&&dn.alternate!==null&&Re.delete(dn.key===null?Ne:dn.key),ee=v(dn,ee,Ne),$e===null?Ae=dn:$e.sibling=dn,$e=dn);return i&&Re.forEach(function(Ks){return a(ne,Ks)}),at&&Wa(ne,Ne),Ae}function Ie(ne,ee,se,ge){if(se==null)throw Error(r(151));for(var Ae=null,$e=null,Re=ee,Ne=ee=0,dn=null,it=se.next();Re!==null&&!it.done;Ne++,it=se.next()){Re.index>Ne?(dn=Re,Re=null):dn=Re.sibling;var Ks=oe(ne,Re,it.value,ge);if(Ks===null){Re===null&&(Re=dn);break}i&&Re&&Ks.alternate===null&&a(ne,Re),ee=v(Ks,ee,Ne),$e===null?Ae=Ks:$e.sibling=Ks,$e=Ks,Re=dn}if(it.done)return l(ne,Re),at&&Wa(ne,Ne),Ae;if(Re===null){for(;!it.done;Ne++,it=se.next())it=ye(ne,it.value,ge),it!==null&&(ee=v(it,ee,Ne),$e===null?Ae=it:$e.sibling=it,$e=it);return at&&Wa(ne,Ne),Ae}for(Re=d(Re);!it.done;Ne++,it=se.next())it=le(Re,ne,Ne,it.value,ge),it!==null&&(i&&it.alternate!==null&&Re.delete(it.key===null?Ne:it.key),ee=v(it,ee,Ne),$e===null?Ae=it:$e.sibling=it,$e=it);return i&&Re.forEach(function(VN){return a(ne,VN)}),at&&Wa(ne,Ne),Ae}function pt(ne,ee,se,ge){if(typeof se=="object"&&se!==null&&se.type===O&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case b:e:{for(var Ae=se.key;ee!==null;){if(ee.key===Ae){if(Ae=se.type,Ae===O){if(ee.tag===7){l(ne,ee.sibling),ge=g(ee,se.props.children),ge.return=ne,ne=ge;break e}}else if(ee.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===x&&Qw(Ae)===ee.type){l(ne,ee.sibling),ge=g(ee,se.props),sc(ge,se),ge.return=ne,ne=ge;break e}l(ne,ee);break}else a(ne,ee);ee=ee.sibling}se.type===O?(ge=Ka(se.props.children,ne.mode,ge,se.key),ge.return=ne,ne=ge):(ge=vf(se.type,se.key,se.props,null,ne.mode,ge),sc(ge,se),ge.return=ne,ne=ge)}return D(ne);case A:e:{for(Ae=se.key;ee!==null;){if(ee.key===Ae)if(ee.tag===4&&ee.stateNode.containerInfo===se.containerInfo&&ee.stateNode.implementation===se.implementation){l(ne,ee.sibling),ge=g(ee,se.children||[]),ge.return=ne,ne=ge;break e}else{l(ne,ee);break}else a(ne,ee);ee=ee.sibling}ge=jp(se,ne.mode,ge),ge.return=ne,ne=ge}return D(ne);case x:return Ae=se._init,se=Ae(se._payload),pt(ne,ee,se,ge)}if(G(se))return Pe(ne,ee,se,ge);if(U(se)){if(Ae=U(se),typeof Ae!="function")throw Error(r(150));return se=Ae.call(se),Ie(ne,ee,se,ge)}if(typeof se.then=="function")return pt(ne,ee,Of(se),ge);if(se.$$typeof===K)return pt(ne,ee,Ef(ne,se),ge);Vf(ne,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,ee!==null&&ee.tag===6?(l(ne,ee.sibling),ge=g(ee,se),ge.return=ne,ne=ge):(l(ne,ee),ge=zp(se,ne.mode,ge),ge.return=ne,ne=ge),D(ne)):l(ne,ee)}return function(ne,ee,se,ge){try{ic=0;var Ae=pt(ne,ee,se,ge);return hl=null,Ae}catch(Re){if(Re===Xu||Re===Sf)throw Re;var $e=sr(29,Re,null,ne.mode);return $e.lanes=ge,$e.return=ne,$e}finally{}}}var ml=Zw(!0),Jw=Zw(!1),Mr=X(null),wi=null;function Ms(i){var a=i.alternate;J(nn,nn.current&1),J(Mr,i),wi===null&&(a===null||ul.current!==null||a.memoizedState!==null)&&(wi=i)}function e1(i){if(i.tag===22){if(J(nn,nn.current),J(Mr,i),wi===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(wi=i)}}else Ps()}function Ps(){J(nn,nn.current),J(Mr,Mr.current)}function ns(i){te(Mr),wi===i&&(wi=null),te(nn)}var nn=X(0);function Lf(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||oy(l)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function vg(i,a,l,d){a=i.memoizedState,l=l(d,a),l=l==null?a:p({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var _g={enqueueSetState:function(i,a,l){i=i._reactInternals;var d=ur(),g=Is(d);g.payload=a,l!=null&&(g.callback=l),a=Ns(i,g,d),a!==null&&(cr(a,i,d),Qu(a,i,d))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var d=ur(),g=Is(d);g.tag=1,g.payload=a,l!=null&&(g.callback=l),a=Ns(i,g,d),a!==null&&(cr(a,i,d),Qu(a,i,d))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=ur(),d=Is(l);d.tag=2,a!=null&&(d.callback=a),a=Ns(i,d,l),a!==null&&(cr(a,i,l),Qu(a,i,l))}};function t1(i,a,l,d,g,v,D){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,v,D):a.prototype&&a.prototype.isPureReactComponent?!Bu(l,d)||!Bu(g,v):!0}function n1(i,a,l,d){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,d),a.state!==i&&_g.enqueueReplaceState(a,a.state,null)}function ro(i,a){var l=a;if("ref"in a){l={};for(var d in a)d!=="ref"&&(l[d]=a[d])}if(i=i.defaultProps){l===a&&(l=p({},l));for(var g in i)l[g]===void 0&&(l[g]=i[g])}return l}var zf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function r1(i){zf(i)}function i1(i){console.error(i)}function s1(i){zf(i)}function jf(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function a1(i,a,l){try{var d=i.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function bg(i,a,l){return l=Is(l),l.tag=3,l.payload={element:null},l.callback=function(){jf(i,a)},l}function o1(i){return i=Is(i),i.tag=3,i}function l1(i,a,l,d){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var v=d.value;i.payload=function(){return g(v)},i.callback=function(){a1(a,l,d)}}var D=l.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(i.callback=function(){a1(a,l,d),typeof g!="function"&&(Us===null?Us=new Set([this]):Us.add(this));var H=d.stack;this.componentDidCatch(d.value,{componentStack:H!==null?H:""})})}function VI(i,a,l,d,g){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=l.alternate,a!==null&&Gu(a,l,g,!0),l=Mr.current,l!==null){switch(l.tag){case 13:return wi===null?$g():l.alternate===null&&Dt===0&&(Dt=3),l.flags&=-257,l.flags|=65536,l.lanes=g,d===Xp?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([d]):a.add(d),Gg(i,d,g)),!1;case 22:return l.flags|=65536,d===Xp?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([d]):l.add(d)),Gg(i,d,g)),!1}throw Error(r(435,l.tag))}return Gg(i,d,g),$g(),!1}if(at)return a=Mr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,d!==Hp&&(i=Error(r(422),{cause:d}),qu(kr(i,l)))):(d!==Hp&&(a=Error(r(423),{cause:d}),qu(kr(a,l))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,d=kr(d,l),g=bg(i.stateNode,d,g),Zp(i,g),Dt!==4&&(Dt=2)),!1;var v=Error(r(520),{cause:d});if(v=kr(v,l),fc===null?fc=[v]:fc.push(v),Dt!==4&&(Dt=2),a===null)return!0;d=kr(d,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=g&-g,l.lanes|=i,i=bg(l.stateNode,d,i),Zp(l,i),!1;case 1:if(a=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Us===null||!Us.has(v))))return l.flags|=65536,g&=-g,l.lanes|=g,g=o1(g),l1(g,i,l,d),Zp(l,g),!1}l=l.return}while(l!==null);return!1}var u1=Error(r(461)),un=!1;function yn(i,a,l,d){a.child=i===null?Jw(a,null,l,d):ml(a,i.child,l,d)}function c1(i,a,l,d,g){l=l.render;var v=a.ref;if("ref"in d){var D={};for(var H in d)H!=="ref"&&(D[H]=d[H])}else D=d;return eo(a),d=rg(i,a,l,D,v,g),H=ig(),i!==null&&!un?(sg(i,a,g),rs(i,a,g)):(at&&H&&Up(a),a.flags|=1,yn(i,a,d,g),a.child)}function d1(i,a,l,d,g){if(i===null){var v=l.type;return typeof v=="function"&&!Lp(v)&&v.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=v,f1(i,a,v,d,g)):(i=vf(l.type,null,d,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(v=i.child,!Rg(i,g)){var D=v.memoizedProps;if(l=l.compare,l=l!==null?l:Bu,l(D,d)&&i.ref===a.ref)return rs(i,a,g)}return a.flags|=1,i=Wi(v,d),i.ref=a.ref,i.return=a,a.child=i}function f1(i,a,l,d,g){if(i!==null){var v=i.memoizedProps;if(Bu(v,d)&&i.ref===a.ref)if(un=!1,a.pendingProps=d=v,Rg(i,g))(i.flags&131072)!==0&&(un=!0);else return a.lanes=i.lanes,rs(i,a,g)}return wg(i,a,l,d,g)}function h1(i,a,l){var d=a.pendingProps,g=d.children,v=i!==null?i.memoizedState:null;if(d.mode==="hidden"){if((a.flags&128)!==0){if(d=v!==null?v.baseLanes|l:l,i!==null){for(g=a.child=i.child,v=0;g!==null;)v=v|g.lanes|g.childLanes,g=g.sibling;a.childLanes=v&~d}else a.childLanes=0,a.child=null;return m1(i,a,d,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Tf(a,v!==null?v.cachePool:null),v!==null?fw(a,v):eg(),e1(a);else return a.lanes=a.childLanes=536870912,m1(i,a,v!==null?v.baseLanes|l:l,l)}else v!==null?(Tf(a,v.cachePool),fw(a,v),Ps(),a.memoizedState=null):(i!==null&&Tf(a,null),eg(),Ps());return yn(i,a,g,l),a.child}function m1(i,a,l,d){var g=Kp();return g=g===null?null:{parent:tn._currentValue,pool:g},a.memoizedState={baseLanes:l,cachePool:g},i!==null&&Tf(a,null),eg(),e1(a),i!==null&&Gu(i,a,d,!0),null}function Uf(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function wg(i,a,l,d,g){return eo(a),l=rg(i,a,l,d,void 0,g),d=ig(),i!==null&&!un?(sg(i,a,g),rs(i,a,g)):(at&&d&&Up(a),a.flags|=1,yn(i,a,l,g),a.child)}function p1(i,a,l,d,g,v){return eo(a),a.updateQueue=null,l=mw(a,d,l,g),hw(i),d=ig(),i!==null&&!un?(sg(i,a,v),rs(i,a,v)):(at&&d&&Up(a),a.flags|=1,yn(i,a,l,v),a.child)}function g1(i,a,l,d,g){if(eo(a),a.stateNode===null){var v=il,D=l.contextType;typeof D=="object"&&D!==null&&(v=xn(D)),v=new l(d,v),a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=_g,a.stateNode=v,v._reactInternals=a,v=a.stateNode,v.props=d,v.state=a.memoizedState,v.refs={},Wp(a),D=l.contextType,v.context=typeof D=="object"&&D!==null?xn(D):il,v.state=a.memoizedState,D=l.getDerivedStateFromProps,typeof D=="function"&&(vg(a,l,D,d),v.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(D=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),D!==v.state&&_g.enqueueReplaceState(v,v.state,null),Ju(a,d,v,g),Zu(),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(i===null){v=a.stateNode;var H=a.memoizedProps,Z=ro(l,H);v.props=Z;var ae=v.context,he=l.contextType;D=il,typeof he=="object"&&he!==null&&(D=xn(he));var ye=l.getDerivedStateFromProps;he=typeof ye=="function"||typeof v.getSnapshotBeforeUpdate=="function",H=a.pendingProps!==H,he||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(H||ae!==D)&&n1(a,v,d,D),ks=!1;var oe=a.memoizedState;v.state=oe,Ju(a,d,v,g),Zu(),ae=a.memoizedState,H||oe!==ae||ks?(typeof ye=="function"&&(vg(a,l,ye,d),ae=a.memoizedState),(Z=ks||t1(a,l,Z,d,oe,ae,D))?(he||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(a.flags|=4194308)):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=ae),v.props=d,v.state=ae,v.context=D,d=Z):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{v=a.stateNode,Qp(i,a),D=a.memoizedProps,he=ro(l,D),v.props=he,ye=a.pendingProps,oe=v.context,ae=l.contextType,Z=il,typeof ae=="object"&&ae!==null&&(Z=xn(ae)),H=l.getDerivedStateFromProps,(ae=typeof H=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(D!==ye||oe!==Z)&&n1(a,v,d,Z),ks=!1,oe=a.memoizedState,v.state=oe,Ju(a,d,v,g),Zu();var le=a.memoizedState;D!==ye||oe!==le||ks||i!==null&&i.dependencies!==null&&wf(i.dependencies)?(typeof H=="function"&&(vg(a,l,H,d),le=a.memoizedState),(he=ks||t1(a,l,he,d,oe,le,Z)||i!==null&&i.dependencies!==null&&wf(i.dependencies))?(ae||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,le,Z),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,le,Z)),typeof v.componentDidUpdate=="function"&&(a.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof v.componentDidUpdate!="function"||D===i.memoizedProps&&oe===i.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&oe===i.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=le),v.props=d,v.state=le,v.context=Z,d=he):(typeof v.componentDidUpdate!="function"||D===i.memoizedProps&&oe===i.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&oe===i.memoizedState||(a.flags|=1024),d=!1)}return v=d,Uf(i,a),d=(a.flags&128)!==0,v||d?(v=a.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:v.render(),a.flags|=1,i!==null&&d?(a.child=ml(a,i.child,null,g),a.child=ml(a,null,l,g)):yn(i,a,l,g),a.memoizedState=v.state,i=a.child):i=rs(i,a,g),i}function y1(i,a,l,d){return $u(),a.flags|=256,yn(i,a,l,d),a.child}var Eg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Tg(i){return{baseLanes:i,cachePool:iw()}}function Sg(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=Pr),i}function v1(i,a,l){var d=a.pendingProps,g=!1,v=(a.flags&128)!==0,D;if((D=v)||(D=i!==null&&i.memoizedState===null?!1:(nn.current&2)!==0),D&&(g=!0,a.flags&=-129),D=(a.flags&32)!==0,a.flags&=-33,i===null){if(at){if(g?Ms(a):Ps(),at){var H=Nt,Z;if(Z=H){e:{for(Z=H,H=bi;Z.nodeType!==8;){if(!H){H=null;break e}if(Z=Kr(Z.nextSibling),Z===null){H=null;break e}}H=Z}H!==null?(a.memoizedState={dehydrated:H,treeContext:Xa!==null?{id:Qi,overflow:Zi}:null,retryLane:536870912,hydrationErrors:null},Z=sr(18,null,null,0),Z.stateNode=H,Z.return=a,a.child=Z,Bn=a,Nt=null,Z=!0):Z=!1}Z||Za(a)}if(H=a.memoizedState,H!==null&&(H=H.dehydrated,H!==null))return oy(H)?a.lanes=32:a.lanes=536870912,null;ns(a)}return H=d.children,d=d.fallback,g?(Ps(),g=a.mode,H=Bf({mode:"hidden",children:H},g),d=Ka(d,g,l,null),H.return=a,d.return=a,H.sibling=d,a.child=H,g=a.child,g.memoizedState=Tg(l),g.childLanes=Sg(i,D,l),a.memoizedState=Eg,d):(Ms(a),xg(a,H))}if(Z=i.memoizedState,Z!==null&&(H=Z.dehydrated,H!==null)){if(v)a.flags&256?(Ms(a),a.flags&=-257,a=Ag(i,a,l)):a.memoizedState!==null?(Ps(),a.child=i.child,a.flags|=128,a=null):(Ps(),g=d.fallback,H=a.mode,d=Bf({mode:"visible",children:d.children},H),g=Ka(g,H,l,null),g.flags|=2,d.return=a,g.return=a,d.sibling=g,a.child=d,ml(a,i.child,null,l),d=a.child,d.memoizedState=Tg(l),d.childLanes=Sg(i,D,l),a.memoizedState=Eg,a=g);else if(Ms(a),oy(H)){if(D=H.nextSibling&&H.nextSibling.dataset,D)var ae=D.dgst;D=ae,d=Error(r(419)),d.stack="",d.digest=D,qu({value:d,source:null,stack:null}),a=Ag(i,a,l)}else if(un||Gu(i,a,l,!1),D=(l&i.childLanes)!==0,un||D){if(D=vt,D!==null&&(d=l&-l,d=(d&42)!==0?1:ai(d),d=(d&(D.suspendedLanes|l))!==0?0:d,d!==0&&d!==Z.retryLane))throw Z.retryLane=d,rl(i,d),cr(D,i,d),u1;H.data==="$?"||$g(),a=Ag(i,a,l)}else H.data==="$?"?(a.flags|=192,a.child=i.child,a=null):(i=Z.treeContext,Nt=Kr(H.nextSibling),Bn=a,at=!0,Qa=null,bi=!1,i!==null&&(Nr[Dr++]=Qi,Nr[Dr++]=Zi,Nr[Dr++]=Xa,Qi=i.id,Zi=i.overflow,Xa=a),a=xg(a,d.children),a.flags|=4096);return a}return g?(Ps(),g=d.fallback,H=a.mode,Z=i.child,ae=Z.sibling,d=Wi(Z,{mode:"hidden",children:d.children}),d.subtreeFlags=Z.subtreeFlags&65011712,ae!==null?g=Wi(ae,g):(g=Ka(g,H,l,null),g.flags|=2),g.return=a,d.return=a,d.sibling=g,a.child=d,d=g,g=a.child,H=i.child.memoizedState,H===null?H=Tg(l):(Z=H.cachePool,Z!==null?(ae=tn._currentValue,Z=Z.parent!==ae?{parent:ae,pool:ae}:Z):Z=iw(),H={baseLanes:H.baseLanes|l,cachePool:Z}),g.memoizedState=H,g.childLanes=Sg(i,D,l),a.memoizedState=Eg,d):(Ms(a),l=i.child,i=l.sibling,l=Wi(l,{mode:"visible",children:d.children}),l.return=a,l.sibling=null,i!==null&&(D=a.deletions,D===null?(a.deletions=[i],a.flags|=16):D.push(i)),a.child=l,a.memoizedState=null,l)}function xg(i,a){return a=Bf({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function Bf(i,a){return i=sr(22,i,null,a),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Ag(i,a,l){return ml(a,i.child,null,l),i=xg(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function _1(i,a,l){i.lanes|=a;var d=i.alternate;d!==null&&(d.lanes|=a),$p(i.return,a,l)}function Cg(i,a,l,d,g){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:g}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=l,v.tailMode=g)}function b1(i,a,l){var d=a.pendingProps,g=d.revealOrder,v=d.tail;if(yn(i,a,d.children,l),d=nn.current,(d&2)!==0)d=d&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&_1(i,l,a);else if(i.tag===19)_1(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}switch(J(nn,d),g){case"forwards":for(l=a.child,g=null;l!==null;)i=l.alternate,i!==null&&Lf(i)===null&&(g=l),l=l.sibling;l=g,l===null?(g=a.child,a.child=null):(g=l.sibling,l.sibling=null),Cg(a,!1,g,l,v);break;case"backwards":for(l=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&Lf(i)===null){a.child=g;break}i=g.sibling,g.sibling=l,l=g,g=i}Cg(a,!0,l,null,v);break;case"together":Cg(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function rs(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),js|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(Gu(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,l=Wi(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=Wi(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function Rg(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&wf(i)))}function LI(i,a,l){switch(a.tag){case 3:pe(a,a.stateNode.containerInfo),Rs(a,tn,i.memoizedState.cache),$u();break;case 27:case 5:Ce(a);break;case 4:pe(a,a.stateNode.containerInfo);break;case 10:Rs(a,a.type,a.memoizedProps.value);break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(Ms(a),a.flags|=128,null):(l&a.child.childLanes)!==0?v1(i,a,l):(Ms(a),i=rs(i,a,l),i!==null?i.sibling:null);Ms(a);break;case 19:var g=(i.flags&128)!==0;if(d=(l&a.childLanes)!==0,d||(Gu(i,a,l,!1),d=(l&a.childLanes)!==0),g){if(d)return b1(i,a,l);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),J(nn,nn.current),d)break;return null;case 22:case 23:return a.lanes=0,h1(i,a,l);case 24:Rs(a,tn,i.memoizedState.cache)}return rs(i,a,l)}function w1(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)un=!0;else{if(!Rg(i,l)&&(a.flags&128)===0)return un=!1,LI(i,a,l);un=(i.flags&131072)!==0}else un=!1,at&&(a.flags&1048576)!==0&&Qb(a,bf,a.index);switch(a.lanes=0,a.tag){case 16:e:{i=a.pendingProps;var d=a.elementType,g=d._init;if(d=g(d._payload),a.type=d,typeof d=="function")Lp(d)?(i=ro(d,i),a.tag=1,a=g1(null,a,d,i,l)):(a.tag=0,a=wg(null,a,d,i,l));else{if(d!=null){if(g=d.$$typeof,g===y){a.tag=11,a=c1(null,a,d,i,l);break e}else if(g===T){a.tag=14,a=d1(null,a,d,i,l);break e}}throw a=P(d)||d,Error(r(306,a,""))}}return a;case 0:return wg(i,a,a.type,a.pendingProps,l);case 1:return d=a.type,g=ro(d,a.pendingProps),g1(i,a,d,g,l);case 3:e:{if(pe(a,a.stateNode.containerInfo),i===null)throw Error(r(387));d=a.pendingProps;var v=a.memoizedState;g=v.element,Qp(i,a),Ju(a,d,null,l);var D=a.memoizedState;if(d=D.cache,Rs(a,tn,d),d!==v.cache&&qp(a,[tn],l,!0),Zu(),d=D.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:D.cache},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){a=y1(i,a,d,l);break e}else if(d!==g){g=kr(Error(r(424)),a),qu(g),a=y1(i,a,d,l);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Nt=Kr(i.firstChild),Bn=a,at=!0,Qa=null,bi=!0,l=Jw(a,null,d,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if($u(),d===g){a=rs(i,a,l);break e}yn(i,a,d,l)}a=a.child}return a;case 26:return Uf(i,a),i===null?(l=xE(a.type,null,a.pendingProps,null))?a.memoizedState=l:at||(l=a.type,i=a.pendingProps,d=th(ue.current).createElement(l),d[Lt]=a,d[It]=i,_n(d,l,i),St(d),a.stateNode=d):a.memoizedState=xE(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return Ce(a),i===null&&at&&(d=a.stateNode=EE(a.type,a.pendingProps,ue.current),Bn=a,bi=!0,g=Nt,Fs(a.type)?(ly=g,Nt=Kr(d.firstChild)):Nt=g),yn(i,a,a.pendingProps.children,l),Uf(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&at&&((g=d=Nt)&&(d=dN(d,a.type,a.pendingProps,bi),d!==null?(a.stateNode=d,Bn=a,Nt=Kr(d.firstChild),bi=!1,g=!0):g=!1),g||Za(a)),Ce(a),g=a.type,v=a.pendingProps,D=i!==null?i.memoizedProps:null,d=v.children,iy(g,v)?d=null:D!==null&&iy(g,D)&&(a.flags|=32),a.memoizedState!==null&&(g=rg(i,a,kI,null,null,l),wc._currentValue=g),Uf(i,a),yn(i,a,d,l),a.child;case 6:return i===null&&at&&((i=l=Nt)&&(l=fN(l,a.pendingProps,bi),l!==null?(a.stateNode=l,Bn=a,Nt=null,i=!0):i=!1),i||Za(a)),null;case 13:return v1(i,a,l);case 4:return pe(a,a.stateNode.containerInfo),d=a.pendingProps,i===null?a.child=ml(a,null,d,l):yn(i,a,d,l),a.child;case 11:return c1(i,a,a.type,a.pendingProps,l);case 7:return yn(i,a,a.pendingProps,l),a.child;case 8:return yn(i,a,a.pendingProps.children,l),a.child;case 12:return yn(i,a,a.pendingProps.children,l),a.child;case 10:return d=a.pendingProps,Rs(a,a.type,d.value),yn(i,a,d.children,l),a.child;case 9:return g=a.type._context,d=a.pendingProps.children,eo(a),g=xn(g),d=d(g),a.flags|=1,yn(i,a,d,l),a.child;case 14:return d1(i,a,a.type,a.pendingProps,l);case 15:return f1(i,a,a.type,a.pendingProps,l);case 19:return b1(i,a,l);case 31:return d=a.pendingProps,l=a.mode,d={mode:d.mode,children:d.children},i===null?(l=Bf(d,l),l.ref=a.ref,a.child=l,l.return=a,a=l):(l=Wi(i.child,d),l.ref=a.ref,a.child=l,l.return=a,a=l),a;case 22:return h1(i,a,l);case 24:return eo(a),d=xn(tn),i===null?(g=Kp(),g===null&&(g=vt,v=Gp(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=l),g=v),a.memoizedState={parent:d,cache:g},Wp(a),Rs(a,tn,g)):((i.lanes&l)!==0&&(Qp(i,a),Ju(a,null,null,l),Zu()),g=i.memoizedState,v=a.memoizedState,g.parent!==d?(g={parent:d,cache:d},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),Rs(a,tn,d)):(d=v.cache,Rs(a,tn,d),d!==g.cache&&qp(a,[tn],l,!0))),yn(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function is(i){i.flags|=4}function E1(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!IE(a)){if(a=Mr.current,a!==null&&((tt&4194048)===tt?wi!==null:(tt&62914560)!==tt&&(tt&536870912)===0||a!==wi))throw Wu=Xp,sw;i.flags|=8192}}function Hf(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?Hr():536870912,i.lanes|=a,vl|=a)}function ac(i,a){if(!at)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function xt(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,d=0;if(a)for(var g=i.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=d,i.childLanes=l,a}function zI(i,a,l){var d=a.pendingProps;switch(Bp(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(a),null;case 1:return xt(a),null;case 3:return l=a.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),es(tn),we(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Fu(a)?is(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,ew())),xt(a),null;case 26:return l=a.memoizedState,i===null?(is(a),l!==null?(xt(a),E1(a,l)):(xt(a),a.flags&=-16777217)):l?l!==i.memoizedState?(is(a),xt(a),E1(a,l)):(xt(a),a.flags&=-16777217):(i.memoizedProps!==d&&is(a),xt(a),a.flags&=-16777217),null;case 27:Qe(a),l=ue.current;var g=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==d&&is(a);else{if(!d){if(a.stateNode===null)throw Error(r(166));return xt(a),null}i=re.current,Fu(a)?Zb(a):(i=EE(g,d,l),a.stateNode=i,is(a))}return xt(a),null;case 5:if(Qe(a),l=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==d&&is(a);else{if(!d){if(a.stateNode===null)throw Error(r(166));return xt(a),null}if(i=re.current,Fu(a))Zb(a);else{switch(g=th(ue.current),i){case 1:i=g.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=g.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=g.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof d.is=="string"?g.createElement("select",{is:d.is}):g.createElement("select"),d.multiple?i.multiple=!0:d.size&&(i.size=d.size);break;default:i=typeof d.is=="string"?g.createElement(l,{is:d.is}):g.createElement(l)}}i[Lt]=a,i[It]=d;e:for(g=a.child;g!==null;){if(g.tag===5||g.tag===6)i.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===a)break e;for(;g.sibling===null;){if(g.return===null||g.return===a)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}a.stateNode=i;e:switch(_n(i,l,d),l){case"button":case"input":case"select":case"textarea":i=!!d.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&is(a)}}return xt(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==d&&is(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(r(166));if(i=ue.current,Fu(a)){if(i=a.stateNode,l=a.memoizedProps,d=null,g=Bn,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}i[Lt]=a,i=!!(i.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||pE(i.nodeValue,l)),i||Za(a)}else i=th(i).createTextNode(d),i[Lt]=a,a.stateNode=i}return xt(a),null;case 13:if(d=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=Fu(a),d!==null&&d.dehydrated!==null){if(i===null){if(!g)throw Error(r(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Lt]=a}else $u(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;xt(a),g=!1}else g=ew(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(ns(a),a):(ns(a),null)}if(ns(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=d!==null,i=i!==null&&i.memoizedState!==null,l){d=a.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool);var v=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==g&&(d.flags|=2048)}return l!==i&&l&&(a.child.flags|=8192),Hf(a,a.updateQueue),xt(a),null;case 4:return we(),i===null&&Jg(a.stateNode.containerInfo),xt(a),null;case 10:return es(a.type),xt(a),null;case 19:if(te(nn),g=a.memoizedState,g===null)return xt(a),null;if(d=(a.flags&128)!==0,v=g.rendering,v===null)if(d)ac(g,!1);else{if(Dt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(v=Lf(i),v!==null){for(a.flags|=128,ac(g,!1),i=v.updateQueue,a.updateQueue=i,Hf(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)Wb(l,i),l=l.sibling;return J(nn,nn.current&1|2),a.child}i=i.sibling}g.tail!==null&&je()>qf&&(a.flags|=128,d=!0,ac(g,!1),a.lanes=4194304)}else{if(!d)if(i=Lf(v),i!==null){if(a.flags|=128,d=!0,i=i.updateQueue,a.updateQueue=i,Hf(a,i),ac(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!at)return xt(a),null}else 2*je()-g.renderingStartTime>qf&&l!==536870912&&(a.flags|=128,d=!0,ac(g,!1),a.lanes=4194304);g.isBackwards?(v.sibling=a.child,a.child=v):(i=g.last,i!==null?i.sibling=v:a.child=v,g.last=v)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=je(),a.sibling=null,i=nn.current,J(nn,d?i&1|2:i&1),a):(xt(a),null);case 22:case 23:return ns(a),tg(),d=a.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(l&536870912)!==0&&(a.flags&128)===0&&(xt(a),a.subtreeFlags&6&&(a.flags|=8192)):xt(a),l=a.updateQueue,l!==null&&Hf(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==l&&(a.flags|=2048),i!==null&&te(to),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),es(tn),xt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function jI(i,a){switch(Bp(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return es(tn),we(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return Qe(a),null;case 13:if(ns(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));$u()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return te(nn),null;case 4:return we(),null;case 10:return es(a.type),null;case 22:case 23:return ns(a),tg(),i!==null&&te(to),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return es(tn),null;case 25:return null;default:return null}}function T1(i,a){switch(Bp(a),a.tag){case 3:es(tn),we();break;case 26:case 27:case 5:Qe(a);break;case 4:we();break;case 13:ns(a);break;case 19:te(nn);break;case 10:es(a.type);break;case 22:case 23:ns(a),tg(),i!==null&&te(to);break;case 24:es(tn)}}function oc(i,a){try{var l=a.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var g=d.next;l=g;do{if((l.tag&i)===i){d=void 0;var v=l.create,D=l.inst;d=v(),D.destroy=d}l=l.next}while(l!==g)}}catch(H){gt(a,a.return,H)}}function Os(i,a,l){try{var d=a.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var v=g.next;d=v;do{if((d.tag&i)===i){var D=d.inst,H=D.destroy;if(H!==void 0){D.destroy=void 0,g=a;var Z=l,ae=H;try{ae()}catch(he){gt(g,Z,he)}}}d=d.next}while(d!==v)}}catch(he){gt(a,a.return,he)}}function S1(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{dw(a,l)}catch(d){gt(i,i.return,d)}}}function x1(i,a,l){l.props=ro(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(d){gt(i,a,d)}}function lc(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof l=="function"?i.refCleanup=l(d):l.current=d}}catch(g){gt(i,a,g)}}function Ei(i,a){var l=i.ref,d=i.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(g){gt(i,a,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){gt(i,a,g)}else l.current=null}function A1(i){var a=i.type,l=i.memoizedProps,d=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(g){gt(i,i.return,g)}}function kg(i,a,l){try{var d=i.stateNode;aN(d,i.type,l,a),d[It]=a}catch(g){gt(i,i.return,g)}}function C1(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Fs(i.type)||i.tag===4}function Ig(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||C1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Fs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Ng(i,a,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=eh));else if(d!==4&&(d===27&&Fs(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(Ng(i,a,l),i=i.sibling;i!==null;)Ng(i,a,l),i=i.sibling}function Ff(i,a,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(d!==4&&(d===27&&Fs(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(Ff(i,a,l),i=i.sibling;i!==null;)Ff(i,a,l),i=i.sibling}function R1(i){var a=i.stateNode,l=i.memoizedProps;try{for(var d=i.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);_n(a,d,l),a[Lt]=i,a[It]=l}catch(v){gt(i,i.return,v)}}var ss=!1,jt=!1,Dg=!1,k1=typeof WeakSet=="function"?WeakSet:Set,cn=null;function UI(i,a){if(i=i.containerInfo,ny=oh,i=Ub(i),Ip(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var g=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var D=0,H=-1,Z=-1,ae=0,he=0,ye=i,oe=null;t:for(;;){for(var le;ye!==l||g!==0&&ye.nodeType!==3||(H=D+g),ye!==v||d!==0&&ye.nodeType!==3||(Z=D+d),ye.nodeType===3&&(D+=ye.nodeValue.length),(le=ye.firstChild)!==null;)oe=ye,ye=le;for(;;){if(ye===i)break t;if(oe===l&&++ae===g&&(H=D),oe===v&&++he===d&&(Z=D),(le=ye.nextSibling)!==null)break;ye=oe,oe=ye.parentNode}ye=le}l=H===-1||Z===-1?null:{start:H,end:Z}}else l=null}l=l||{start:0,end:0}}else l=null;for(ry={focusedElem:i,selectionRange:l},oh=!1,cn=a;cn!==null;)if(a=cn,i=a.child,(a.subtreeFlags&1024)!==0&&i!==null)i.return=a,cn=i;else for(;cn!==null;){switch(a=cn,v=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,l=a,g=v.memoizedProps,v=v.memoizedState,d=l.stateNode;try{var Pe=ro(l.type,g,l.elementType===l.type);i=d.getSnapshotBeforeUpdate(Pe,v),d.__reactInternalSnapshotBeforeUpdate=i}catch(Ie){gt(l,l.return,Ie)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)ay(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":ay(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,cn=i;break}cn=a.return}}function I1(i,a,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:Vs(i,l),d&4&&oc(5,l);break;case 1:if(Vs(i,l),d&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(D){gt(l,l.return,D)}else{var g=ro(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(g,a,i.__reactInternalSnapshotBeforeUpdate)}catch(D){gt(l,l.return,D)}}d&64&&S1(l),d&512&&lc(l,l.return);break;case 3:if(Vs(i,l),d&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{dw(i,a)}catch(D){gt(l,l.return,D)}}break;case 27:a===null&&d&4&&R1(l);case 26:case 5:Vs(i,l),a===null&&d&4&&A1(l),d&512&&lc(l,l.return);break;case 12:Vs(i,l);break;case 13:Vs(i,l),d&4&&M1(i,l),d&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=XI.bind(null,l),hN(i,l))));break;case 22:if(d=l.memoizedState!==null||ss,!d){a=a!==null&&a.memoizedState!==null||jt,g=ss;var v=jt;ss=d,(jt=a)&&!v?Ls(i,l,(l.subtreeFlags&8772)!==0):Vs(i,l),ss=g,jt=v}break;case 30:break;default:Vs(i,l)}}function N1(i){var a=i.alternate;a!==null&&(i.alternate=null,N1(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&ui(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var wt=null,Gn=!1;function as(i,a,l){for(l=l.child;l!==null;)D1(i,a,l),l=l.sibling}function D1(i,a,l){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(ot,l)}catch{}switch(l.tag){case 26:jt||Ei(l,a),as(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:jt||Ei(l,a);var d=wt,g=Gn;Fs(l.type)&&(wt=l.stateNode,Gn=!1),as(i,a,l),yc(l.stateNode),wt=d,Gn=g;break;case 5:jt||Ei(l,a);case 6:if(d=wt,g=Gn,wt=null,as(i,a,l),wt=d,Gn=g,wt!==null)if(Gn)try{(wt.nodeType===9?wt.body:wt.nodeName==="HTML"?wt.ownerDocument.body:wt).removeChild(l.stateNode)}catch(v){gt(l,a,v)}else try{wt.removeChild(l.stateNode)}catch(v){gt(l,a,v)}break;case 18:wt!==null&&(Gn?(i=wt,bE(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),xc(i)):bE(wt,l.stateNode));break;case 4:d=wt,g=Gn,wt=l.stateNode.containerInfo,Gn=!0,as(i,a,l),wt=d,Gn=g;break;case 0:case 11:case 14:case 15:jt||Os(2,l,a),jt||Os(4,l,a),as(i,a,l);break;case 1:jt||(Ei(l,a),d=l.stateNode,typeof d.componentWillUnmount=="function"&&x1(l,a,d)),as(i,a,l);break;case 21:as(i,a,l);break;case 22:jt=(d=jt)||l.memoizedState!==null,as(i,a,l),jt=d;break;default:as(i,a,l)}}function M1(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{xc(i)}catch(l){gt(a,a.return,l)}}function BI(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new k1),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new k1),a;default:throw Error(r(435,i.tag))}}function Mg(i,a){var l=BI(i);a.forEach(function(d){var g=WI.bind(null,i,d);l.has(d)||(l.add(d),d.then(g,g))})}function ar(i,a){var l=a.deletions;if(l!==null)for(var d=0;d<l.length;d++){var g=l[d],v=i,D=a,H=D;e:for(;H!==null;){switch(H.tag){case 27:if(Fs(H.type)){wt=H.stateNode,Gn=!1;break e}break;case 5:wt=H.stateNode,Gn=!1;break e;case 3:case 4:wt=H.stateNode.containerInfo,Gn=!0;break e}H=H.return}if(wt===null)throw Error(r(160));D1(v,D,g),wt=null,Gn=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)P1(a,i),a=a.sibling}var Yr=null;function P1(i,a){var l=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ar(a,i),or(i),d&4&&(Os(3,i,i.return),oc(3,i),Os(5,i,i.return));break;case 1:ar(a,i),or(i),d&512&&(jt||l===null||Ei(l,l.return)),d&64&&ss&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var g=Yr;if(ar(a,i),or(i),d&512&&(jt||l===null||Ei(l,l.return)),d&4){var v=l!==null?l.memoizedState:null;if(d=i.memoizedState,l===null)if(d===null)if(i.stateNode===null){e:{d=i.type,l=i.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":v=g.getElementsByTagName("title")[0],(!v||v[Bi]||v[Lt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(d),g.head.insertBefore(v,g.querySelector("head > title"))),_n(v,d,l),v[Lt]=i,St(v),d=v;break e;case"link":var D=RE("link","href",g).get(d+(l.href||""));if(D){for(var H=0;H<D.length;H++)if(v=D[H],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){D.splice(H,1);break t}}v=g.createElement(d),_n(v,d,l),g.head.appendChild(v);break;case"meta":if(D=RE("meta","content",g).get(d+(l.content||""))){for(H=0;H<D.length;H++)if(v=D[H],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){D.splice(H,1);break t}}v=g.createElement(d),_n(v,d,l),g.head.appendChild(v);break;default:throw Error(r(468,d))}v[Lt]=i,St(v),d=v}i.stateNode=d}else kE(g,i.type,i.stateNode);else i.stateNode=CE(g,d,i.memoizedProps);else v!==d?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,d===null?kE(g,i.type,i.stateNode):CE(g,d,i.memoizedProps)):d===null&&i.stateNode!==null&&kg(i,i.memoizedProps,l.memoizedProps)}break;case 27:ar(a,i),or(i),d&512&&(jt||l===null||Ei(l,l.return)),l!==null&&d&4&&kg(i,i.memoizedProps,l.memoizedProps);break;case 5:if(ar(a,i),or(i),d&512&&(jt||l===null||Ei(l,l.return)),i.flags&32){g=i.stateNode;try{xr(g,"")}catch(le){gt(i,i.return,le)}}d&4&&i.stateNode!=null&&(g=i.memoizedProps,kg(i,g,l!==null?l.memoizedProps:g)),d&1024&&(Dg=!0);break;case 6:if(ar(a,i),or(i),d&4){if(i.stateNode===null)throw Error(r(162));d=i.memoizedProps,l=i.stateNode;try{l.nodeValue=d}catch(le){gt(i,i.return,le)}}break;case 3:if(ih=null,g=Yr,Yr=nh(a.containerInfo),ar(a,i),Yr=g,or(i),d&4&&l!==null&&l.memoizedState.isDehydrated)try{xc(a.containerInfo)}catch(le){gt(i,i.return,le)}Dg&&(Dg=!1,O1(i));break;case 4:d=Yr,Yr=nh(i.stateNode.containerInfo),ar(a,i),or(i),Yr=d;break;case 12:ar(a,i),or(i);break;case 13:ar(a,i),or(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(jg=je()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Mg(i,d)));break;case 22:g=i.memoizedState!==null;var Z=l!==null&&l.memoizedState!==null,ae=ss,he=jt;if(ss=ae||g,jt=he||Z,ar(a,i),jt=he,ss=ae,or(i),d&8192)e:for(a=i.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(l===null||Z||ss||jt||io(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){Z=l=a;try{if(v=Z.stateNode,g)D=v.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{H=Z.stateNode;var ye=Z.memoizedProps.style,oe=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;H.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(le){gt(Z,Z.return,le)}}}else if(a.tag===6){if(l===null){Z=a;try{Z.stateNode.nodeValue=g?"":Z.memoizedProps}catch(le){gt(Z,Z.return,le)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=i.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,Mg(i,l))));break;case 19:ar(a,i),or(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Mg(i,d)));break;case 30:break;case 21:break;default:ar(a,i),or(i)}}function or(i){var a=i.flags;if(a&2){try{for(var l,d=i.return;d!==null;){if(C1(d)){l=d;break}d=d.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var g=l.stateNode,v=Ig(i);Ff(i,v,g);break;case 5:var D=l.stateNode;l.flags&32&&(xr(D,""),l.flags&=-33);var H=Ig(i);Ff(i,H,D);break;case 3:case 4:var Z=l.stateNode.containerInfo,ae=Ig(i);Ng(i,ae,Z);break;default:throw Error(r(161))}}catch(he){gt(i,i.return,he)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function O1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;O1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function Vs(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)I1(i,a.alternate,a),a=a.sibling}function io(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Os(4,a,a.return),io(a);break;case 1:Ei(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&x1(a,a.return,l),io(a);break;case 27:yc(a.stateNode);case 26:case 5:Ei(a,a.return),io(a);break;case 22:a.memoizedState===null&&io(a);break;case 30:io(a);break;default:io(a)}i=i.sibling}}function Ls(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,g=i,v=a,D=v.flags;switch(v.tag){case 0:case 11:case 15:Ls(g,v,l),oc(4,v);break;case 1:if(Ls(g,v,l),d=v,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ae){gt(d,d.return,ae)}if(d=v,g=d.updateQueue,g!==null){var H=d.stateNode;try{var Z=g.shared.hiddenCallbacks;if(Z!==null)for(g.shared.hiddenCallbacks=null,g=0;g<Z.length;g++)cw(Z[g],H)}catch(ae){gt(d,d.return,ae)}}l&&D&64&&S1(v),lc(v,v.return);break;case 27:R1(v);case 26:case 5:Ls(g,v,l),l&&d===null&&D&4&&A1(v),lc(v,v.return);break;case 12:Ls(g,v,l);break;case 13:Ls(g,v,l),l&&D&4&&M1(g,v);break;case 22:v.memoizedState===null&&Ls(g,v,l),lc(v,v.return);break;case 30:break;default:Ls(g,v,l)}a=a.sibling}}function Pg(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Yu(l))}function Og(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Yu(i))}function Ti(i,a,l,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)V1(i,a,l,d),a=a.sibling}function V1(i,a,l,d){var g=a.flags;switch(a.tag){case 0:case 11:case 15:Ti(i,a,l,d),g&2048&&oc(9,a);break;case 1:Ti(i,a,l,d);break;case 3:Ti(i,a,l,d),g&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Yu(i)));break;case 12:if(g&2048){Ti(i,a,l,d),i=a.stateNode;try{var v=a.memoizedProps,D=v.id,H=v.onPostCommit;typeof H=="function"&&H(D,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Z){gt(a,a.return,Z)}}else Ti(i,a,l,d);break;case 13:Ti(i,a,l,d);break;case 23:break;case 22:v=a.stateNode,D=a.alternate,a.memoizedState!==null?v._visibility&2?Ti(i,a,l,d):uc(i,a):v._visibility&2?Ti(i,a,l,d):(v._visibility|=2,pl(i,a,l,d,(a.subtreeFlags&10256)!==0)),g&2048&&Pg(D,a);break;case 24:Ti(i,a,l,d),g&2048&&Og(a.alternate,a);break;default:Ti(i,a,l,d)}}function pl(i,a,l,d,g){for(g=g&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var v=i,D=a,H=l,Z=d,ae=D.flags;switch(D.tag){case 0:case 11:case 15:pl(v,D,H,Z,g),oc(8,D);break;case 23:break;case 22:var he=D.stateNode;D.memoizedState!==null?he._visibility&2?pl(v,D,H,Z,g):uc(v,D):(he._visibility|=2,pl(v,D,H,Z,g)),g&&ae&2048&&Pg(D.alternate,D);break;case 24:pl(v,D,H,Z,g),g&&ae&2048&&Og(D.alternate,D);break;default:pl(v,D,H,Z,g)}a=a.sibling}}function uc(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,d=a,g=d.flags;switch(d.tag){case 22:uc(l,d),g&2048&&Pg(d.alternate,d);break;case 24:uc(l,d),g&2048&&Og(d.alternate,d);break;default:uc(l,d)}a=a.sibling}}var cc=8192;function gl(i){if(i.subtreeFlags&cc)for(i=i.child;i!==null;)L1(i),i=i.sibling}function L1(i){switch(i.tag){case 26:gl(i),i.flags&cc&&i.memoizedState!==null&&AN(Yr,i.memoizedState,i.memoizedProps);break;case 5:gl(i);break;case 3:case 4:var a=Yr;Yr=nh(i.stateNode.containerInfo),gl(i),Yr=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=cc,cc=16777216,gl(i),cc=a):gl(i));break;default:gl(i)}}function z1(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function dc(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var d=a[l];cn=d,U1(d,i)}z1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)j1(i),i=i.sibling}function j1(i){switch(i.tag){case 0:case 11:case 15:dc(i),i.flags&2048&&Os(9,i,i.return);break;case 3:dc(i);break;case 12:dc(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,$f(i)):dc(i);break;default:dc(i)}}function $f(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var d=a[l];cn=d,U1(d,i)}z1(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Os(8,a,a.return),$f(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,$f(a));break;default:$f(a)}i=i.sibling}}function U1(i,a){for(;cn!==null;){var l=cn;switch(l.tag){case 0:case 11:case 15:Os(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Yu(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,cn=d;else e:for(l=i;cn!==null;){d=cn;var g=d.sibling,v=d.return;if(N1(d),d===l){cn=null;break e}if(g!==null){g.return=v,cn=g;break e}cn=v}}}var HI={getCacheForType:function(i){var a=xn(tn),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l}},FI=typeof WeakMap=="function"?WeakMap:Map,ct=0,vt=null,Ye=null,tt=0,dt=0,lr=null,zs=!1,yl=!1,Vg=!1,os=0,Dt=0,js=0,so=0,Lg=0,Pr=0,vl=0,fc=null,Yn=null,zg=!1,jg=0,qf=1/0,Gf=null,Us=null,vn=0,Bs=null,_l=null,bl=0,Ug=0,Bg=null,B1=null,hc=0,Hg=null;function ur(){if((ct&2)!==0&&tt!==0)return tt&-tt;if(R.T!==null){var i=ol;return i!==0?i:Xg()}return oi()}function H1(){Pr===0&&(Pr=(tt&536870912)===0||at?Ui():536870912);var i=Mr.current;return i!==null&&(i.flags|=32),Pr}function cr(i,a,l){(i===vt&&(dt===2||dt===9)||i.cancelPendingCommit!==null)&&(wl(i,0),Hs(i,tt,Pr,!1)),_r(i,l),((ct&2)===0||i!==vt)&&(i===vt&&((ct&2)===0&&(so|=l),Dt===4&&Hs(i,tt,Pr,!1)),Si(i))}function F1(i,a,l){if((ct&6)!==0)throw Error(r(327));var d=!l&&(a&124)===0&&(a&i.expiredLanes)===0||zn(i,a),g=d?GI(i,a):qg(i,a,!0),v=d;do{if(g===0){yl&&!d&&Hs(i,a,0,!1);break}else{if(l=i.current.alternate,v&&!$I(l)){g=qg(i,a,!1),v=!1;continue}if(g===2){if(v=a,i.errorRecoveryDisabledLanes&v)var D=0;else D=i.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){a=D;e:{var H=i;g=fc;var Z=H.current.memoizedState.isDehydrated;if(Z&&(wl(H,D).flags|=256),D=qg(H,D,!1),D!==2){if(Vg&&!Z){H.errorRecoveryDisabledLanes|=v,so|=v,g=4;break e}v=Yn,Yn=g,v!==null&&(Yn===null?Yn=v:Yn.push.apply(Yn,v))}g=D}if(v=!1,g!==2)continue}}if(g===1){wl(i,0),Hs(i,a,0,!0);break}e:{switch(d=i,v=g,v){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Hs(d,a,Pr,!zs);break e;case 2:Yn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(g=jg+300-je(),10<g)){if(Hs(d,a,Pr,!zs),mn(d,0,!0)!==0)break e;d.timeoutHandle=vE($1.bind(null,d,l,Yn,Gf,zg,a,Pr,so,vl,zs,v,2,-0,0),g);break e}$1(d,l,Yn,Gf,zg,a,Pr,so,vl,zs,v,0,-0,0)}}break}while(!0);Si(i)}function $1(i,a,l,d,g,v,D,H,Z,ae,he,ye,oe,le){if(i.timeoutHandle=-1,ye=a.subtreeFlags,(ye&8192||(ye&16785408)===16785408)&&(bc={stylesheets:null,count:0,unsuspend:xN},L1(a),ye=CN(),ye!==null)){i.cancelPendingCommit=ye(Q1.bind(null,i,a,v,l,d,g,D,H,Z,he,1,oe,le)),Hs(i,v,D,!ae);return}Q1(i,a,v,l,d,g,D,H,Z)}function $I(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var g=l[d],v=g.getSnapshot;g=g.value;try{if(!ir(v(),g))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Hs(i,a,l,d){a&=~Lg,a&=~so,i.suspendedLanes|=a,i.pingedLanes&=~a,d&&(i.warmLanes|=a),d=i.expirationTimes;for(var g=a;0<g;){var v=31-Tt(g),D=1<<v;d[v]=-1,g&=~D}l!==0&&br(i,l,a)}function Yf(){return(ct&6)===0?(mc(0),!1):!0}function Fg(){if(Ye!==null){if(dt===0)var i=Ye.return;else i=Ye,Ji=Ja=null,ag(i),hl=null,ic=0,i=Ye;for(;i!==null;)T1(i.alternate,i),i=i.return;Ye=null}}function wl(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,lN(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Fg(),vt=i,Ye=l=Wi(i.current,null),tt=a,dt=0,lr=null,zs=!1,yl=zn(i,a),Vg=!1,vl=Pr=Lg=so=js=Dt=0,Yn=fc=null,zg=!1,(a&8)!==0&&(a|=a&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=a;0<d;){var g=31-Tt(d),v=1<<g;a|=i[g],d&=~v}return os=a,pf(),l}function q1(i,a){He=null,R.H=Pf,a===Xu||a===Sf?(a=lw(),dt=3):a===sw?(a=lw(),dt=4):dt=a===u1?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,lr=a,Ye===null&&(Dt=1,jf(i,kr(a,i.current)))}function G1(){var i=R.H;return R.H=Pf,i===null?Pf:i}function Y1(){var i=R.A;return R.A=HI,i}function $g(){Dt=4,zs||(tt&4194048)!==tt&&Mr.current!==null||(yl=!0),(js&134217727)===0&&(so&134217727)===0||vt===null||Hs(vt,tt,Pr,!1)}function qg(i,a,l){var d=ct;ct|=2;var g=G1(),v=Y1();(vt!==i||tt!==a)&&(Gf=null,wl(i,a)),a=!1;var D=Dt;e:do try{if(dt!==0&&Ye!==null){var H=Ye,Z=lr;switch(dt){case 8:Fg(),D=6;break e;case 3:case 2:case 9:case 6:Mr.current===null&&(a=!0);var ae=dt;if(dt=0,lr=null,El(i,H,Z,ae),l&&yl){D=0;break e}break;default:ae=dt,dt=0,lr=null,El(i,H,Z,ae)}}qI(),D=Dt;break}catch(he){q1(i,he)}while(!0);return a&&i.shellSuspendCounter++,Ji=Ja=null,ct=d,R.H=g,R.A=v,Ye===null&&(vt=null,tt=0,pf()),D}function qI(){for(;Ye!==null;)K1(Ye)}function GI(i,a){var l=ct;ct|=2;var d=G1(),g=Y1();vt!==i||tt!==a?(Gf=null,qf=je()+500,wl(i,a)):yl=zn(i,a);e:do try{if(dt!==0&&Ye!==null){a=Ye;var v=lr;t:switch(dt){case 1:dt=0,lr=null,El(i,a,v,1);break;case 2:case 9:if(aw(v)){dt=0,lr=null,X1(a);break}a=function(){dt!==2&&dt!==9||vt!==i||(dt=7),Si(i)},v.then(a,a);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:aw(v)?(dt=0,lr=null,X1(a)):(dt=0,lr=null,El(i,a,v,7));break;case 5:var D=null;switch(Ye.tag){case 26:D=Ye.memoizedState;case 5:case 27:var H=Ye;if(!D||IE(D)){dt=0,lr=null;var Z=H.sibling;if(Z!==null)Ye=Z;else{var ae=H.return;ae!==null?(Ye=ae,Kf(ae)):Ye=null}break t}}dt=0,lr=null,El(i,a,v,5);break;case 6:dt=0,lr=null,El(i,a,v,6);break;case 8:Fg(),Dt=6;break e;default:throw Error(r(462))}}YI();break}catch(he){q1(i,he)}while(!0);return Ji=Ja=null,R.H=d,R.A=g,ct=l,Ye!==null?0:(vt=null,tt=0,pf(),Dt)}function YI(){for(;Ye!==null&&!st();)K1(Ye)}function K1(i){var a=w1(i.alternate,i,os);i.memoizedProps=i.pendingProps,a===null?Kf(i):Ye=a}function X1(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=p1(l,a,a.pendingProps,a.type,void 0,tt);break;case 11:a=p1(l,a,a.pendingProps,a.type.render,a.ref,tt);break;case 5:ag(a);default:T1(l,a),a=Ye=Wb(a,os),a=w1(l,a,os)}i.memoizedProps=i.pendingProps,a===null?Kf(i):Ye=a}function El(i,a,l,d){Ji=Ja=null,ag(a),hl=null,ic=0;var g=a.return;try{if(VI(i,g,a,l,tt)){Dt=1,jf(i,kr(l,i.current)),Ye=null;return}}catch(v){if(g!==null)throw Ye=g,v;Dt=1,jf(i,kr(l,i.current)),Ye=null;return}a.flags&32768?(at||d===1?i=!0:yl||(tt&536870912)!==0?i=!1:(zs=i=!0,(d===2||d===9||d===3||d===6)&&(d=Mr.current,d!==null&&d.tag===13&&(d.flags|=16384))),W1(a,i)):Kf(a)}function Kf(i){var a=i;do{if((a.flags&32768)!==0){W1(a,zs);return}i=a.return;var l=zI(a.alternate,a,os);if(l!==null){Ye=l;return}if(a=a.sibling,a!==null){Ye=a;return}Ye=a=i}while(a!==null);Dt===0&&(Dt=5)}function W1(i,a){do{var l=jI(i.alternate,i);if(l!==null){l.flags&=32767,Ye=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){Ye=i;return}Ye=i=l}while(i!==null);Dt=6,Ye=null}function Q1(i,a,l,d,g,v,D,H,Z){i.cancelPendingCommit=null;do Xf();while(vn!==0);if((ct&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(v=a.lanes|a.childLanes,v|=Op,tr(i,l,v,D,H,Z),i===vt&&(Ye=vt=null,tt=0),_l=a,Bs=i,bl=l,Ug=v,Bg=g,B1=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,QI(Qt,function(){return nE(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=R.T,R.T=null,g=q.p,q.p=2,D=ct,ct|=4;try{UI(i,a,l)}finally{ct=D,q.p=g,R.T=d}}vn=1,Z1(),J1(),eE()}}function Z1(){if(vn===1){vn=0;var i=Bs,a=_l,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=R.T,R.T=null;var d=q.p;q.p=2;var g=ct;ct|=4;try{P1(a,i);var v=ry,D=Ub(i.containerInfo),H=v.focusedElem,Z=v.selectionRange;if(D!==H&&H&&H.ownerDocument&&jb(H.ownerDocument.documentElement,H)){if(Z!==null&&Ip(H)){var ae=Z.start,he=Z.end;if(he===void 0&&(he=ae),"selectionStart"in H)H.selectionStart=ae,H.selectionEnd=Math.min(he,H.value.length);else{var ye=H.ownerDocument||document,oe=ye&&ye.defaultView||window;if(oe.getSelection){var le=oe.getSelection(),Pe=H.textContent.length,Ie=Math.min(Z.start,Pe),pt=Z.end===void 0?Ie:Math.min(Z.end,Pe);!le.extend&&Ie>pt&&(D=pt,pt=Ie,Ie=D);var ne=zb(H,Ie),ee=zb(H,pt);if(ne&&ee&&(le.rangeCount!==1||le.anchorNode!==ne.node||le.anchorOffset!==ne.offset||le.focusNode!==ee.node||le.focusOffset!==ee.offset)){var se=ye.createRange();se.setStart(ne.node,ne.offset),le.removeAllRanges(),Ie>pt?(le.addRange(se),le.extend(ee.node,ee.offset)):(se.setEnd(ee.node,ee.offset),le.addRange(se))}}}}for(ye=[],le=H;le=le.parentNode;)le.nodeType===1&&ye.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<ye.length;H++){var ge=ye[H];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}oh=!!ny,ry=ny=null}finally{ct=g,q.p=d,R.T=l}}i.current=a,vn=2}}function J1(){if(vn===2){vn=0;var i=Bs,a=_l,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=R.T,R.T=null;var d=q.p;q.p=2;var g=ct;ct|=4;try{I1(i,a.alternate,a)}finally{ct=g,q.p=d,R.T=l}}vn=3}}function eE(){if(vn===4||vn===3){vn=0,Ht();var i=Bs,a=_l,l=bl,d=B1;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?vn=5:(vn=0,_l=Bs=null,tE(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Us=null),Ts(l),a=a.stateNode,Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(ot,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=R.T,g=q.p,q.p=2,R.T=null;try{for(var v=i.onRecoverableError,D=0;D<d.length;D++){var H=d[D];v(H.value,{componentStack:H.stack})}}finally{R.T=a,q.p=g}}(bl&3)!==0&&Xf(),Si(i),g=i.pendingLanes,(l&4194090)!==0&&(g&42)!==0?i===Hg?hc++:(hc=0,Hg=i):hc=0,mc(0)}}function tE(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Yu(a)))}function Xf(i){return Z1(),J1(),eE(),nE()}function nE(){if(vn!==5)return!1;var i=Bs,a=Ug;Ug=0;var l=Ts(bl),d=R.T,g=q.p;try{q.p=32>l?32:l,R.T=null,l=Bg,Bg=null;var v=Bs,D=bl;if(vn=0,_l=Bs=null,bl=0,(ct&6)!==0)throw Error(r(331));var H=ct;if(ct|=4,j1(v.current),V1(v,v.current,D,l),ct=H,mc(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(ot,v)}catch{}return!0}finally{q.p=g,R.T=d,tE(i,a)}}function rE(i,a,l){a=kr(l,a),a=bg(i.stateNode,a,2),i=Ns(i,a,2),i!==null&&(_r(i,2),Si(i))}function gt(i,a,l){if(i.tag===3)rE(i,i,l);else for(;a!==null;){if(a.tag===3){rE(a,i,l);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Us===null||!Us.has(d))){i=kr(l,i),l=o1(2),d=Ns(a,l,2),d!==null&&(l1(l,d,a,i),_r(d,2),Si(d));break}}a=a.return}}function Gg(i,a,l){var d=i.pingCache;if(d===null){d=i.pingCache=new FI;var g=new Set;d.set(a,g)}else g=d.get(a),g===void 0&&(g=new Set,d.set(a,g));g.has(l)||(Vg=!0,g.add(l),i=KI.bind(null,i,a,l),a.then(i,i))}function KI(i,a,l){var d=i.pingCache;d!==null&&d.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,vt===i&&(tt&l)===l&&(Dt===4||Dt===3&&(tt&62914560)===tt&&300>je()-jg?(ct&2)===0&&wl(i,0):Lg|=l,vl===tt&&(vl=0)),Si(i)}function iE(i,a){a===0&&(a=Hr()),i=rl(i,a),i!==null&&(_r(i,a),Si(i))}function XI(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),iE(i,l)}function WI(i,a){var l=0;switch(i.tag){case 13:var d=i.stateNode,g=i.memoizedState;g!==null&&(l=g.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(a),iE(i,l)}function QI(i,a){return Ve(i,a)}var Wf=null,Tl=null,Yg=!1,Qf=!1,Kg=!1,ao=0;function Si(i){i!==Tl&&i.next===null&&(Tl===null?Wf=Tl=i:Tl=Tl.next=i),Qf=!0,Yg||(Yg=!0,JI())}function mc(i,a){if(!Kg&&Qf){Kg=!0;do for(var l=!1,d=Wf;d!==null;){if(i!==0){var g=d.pendingLanes;if(g===0)var v=0;else{var D=d.suspendedLanes,H=d.pingedLanes;v=(1<<31-Tt(42|i)+1)-1,v&=g&~(D&~H),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,lE(d,v))}else v=tt,v=mn(d,d===vt?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(v&3)===0||zn(d,v)||(l=!0,lE(d,v));d=d.next}while(l);Kg=!1}}function ZI(){sE()}function sE(){Qf=Yg=!1;var i=0;ao!==0&&(oN()&&(i=ao),ao=0);for(var a=je(),l=null,d=Wf;d!==null;){var g=d.next,v=aE(d,a);v===0?(d.next=null,l===null?Wf=g:l.next=g,g===null&&(Tl=l)):(l=d,(i!==0||(v&3)!==0)&&(Qf=!0)),d=g}mc(i)}function aE(i,a){for(var l=i.suspendedLanes,d=i.pingedLanes,g=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var D=31-Tt(v),H=1<<D,Z=g[D];Z===-1?((H&l)===0||(H&d)!==0)&&(g[D]=ji(H,a)):Z<=a&&(i.expiredLanes|=H),v&=~H}if(a=vt,l=tt,l=mn(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,l===0||i===a&&(dt===2||dt===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&rt(d),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||zn(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(d!==null&&rt(d),Ts(l)){case 2:case 8:l=Sn;break;case 32:l=Qt;break;case 268435456:l=Pn;break;default:l=Qt}return d=oE.bind(null,i),l=Ve(l,d),i.callbackPriority=a,i.callbackNode=l,a}return d!==null&&d!==null&&rt(d),i.callbackPriority=2,i.callbackNode=null,2}function oE(i,a){if(vn!==0&&vn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(Xf()&&i.callbackNode!==l)return null;var d=tt;return d=mn(i,i===vt?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(F1(i,d,a),aE(i,je()),i.callbackNode!=null&&i.callbackNode===l?oE.bind(null,i):null)}function lE(i,a){if(Xf())return null;F1(i,a,!0)}function JI(){uN(function(){(ct&6)!==0?Ve(kt,ZI):sE()})}function Xg(){return ao===0&&(ao=Ui()),ao}function uE(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:qo(""+i)}function cE(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function eN(i,a,l,d,g){if(a==="submit"&&l&&l.stateNode===g){var v=uE((g[It]||null).action),D=d.submitter;D&&(a=(a=D[It]||null)?uE(a.formAction):D.getAttribute("formAction"),a!==null&&(v=a,D=null));var H=new Go("action","action",null,d,g);i.push({event:H,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ao!==0){var Z=D?cE(g,D):new FormData(g);pg(l,{pending:!0,data:Z,method:g.method,action:v},null,Z)}}else typeof v=="function"&&(H.preventDefault(),Z=D?cE(g,D):new FormData(g),pg(l,{pending:!0,data:Z,method:g.method,action:v},v,Z))},currentTarget:g}]})}}for(var Wg=0;Wg<Pp.length;Wg++){var Qg=Pp[Wg],tN=Qg.toLowerCase(),nN=Qg[0].toUpperCase()+Qg.slice(1);Gr(tN,"on"+nN)}Gr(Fb,"onAnimationEnd"),Gr($b,"onAnimationIteration"),Gr(qb,"onAnimationStart"),Gr("dblclick","onDoubleClick"),Gr("focusin","onFocus"),Gr("focusout","onBlur"),Gr(_I,"onTransitionRun"),Gr(bI,"onTransitionStart"),Gr(wI,"onTransitionCancel"),Gr(Gb,"onTransitionEnd"),Fr("onMouseEnter",["mouseout","mouseover"]),Fr("onMouseLeave",["mouseout","mouseover"]),Fr("onPointerEnter",["pointerout","pointerover"]),Fr("onPointerLeave",["pointerout","pointerover"]),nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),nr("onBeforeInput",["compositionend","keypress","textInput","paste"]),nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pc));function dE(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var d=i[l],g=d.event;d=d.listeners;e:{var v=void 0;if(a)for(var D=d.length-1;0<=D;D--){var H=d[D],Z=H.instance,ae=H.currentTarget;if(H=H.listener,Z!==v&&g.isPropagationStopped())break e;v=H,g.currentTarget=ae;try{v(g)}catch(he){zf(he)}g.currentTarget=null,v=Z}else for(D=0;D<d.length;D++){if(H=d[D],Z=H.instance,ae=H.currentTarget,H=H.listener,Z!==v&&g.isPropagationStopped())break e;v=H,g.currentTarget=ae;try{v(g)}catch(he){zf(he)}g.currentTarget=null,v=Z}}}}function Ke(i,a){var l=a[Da];l===void 0&&(l=a[Da]=new Set);var d=i+"__bubble";l.has(d)||(fE(a,i,2,!1),l.add(d))}function Zg(i,a,l){var d=0;a&&(d|=4),fE(l,i,d,a)}var Zf="_reactListening"+Math.random().toString(36).slice(2);function Jg(i){if(!i[Zf]){i[Zf]=!0,Ma.forEach(function(l){l!=="selectionchange"&&(rN.has(l)||Zg(l,!1,i),Zg(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Zf]||(a[Zf]=!0,Zg("selectionchange",!1,a))}}function fE(i,a,l,d){switch(VE(a)){case 2:var g=IN;break;case 8:g=NN;break;default:g=hy}l=g.bind(null,a,l,i),g=void 0,!Cr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),d?g!==void 0?i.addEventListener(a,l,{capture:!0,passive:g}):i.addEventListener(a,l,!0):g!==void 0?i.addEventListener(a,l,{passive:g}):i.addEventListener(a,l,!1)}function ey(i,a,l,d,g){var v=d;if((a&1)===0&&(a&2)===0&&d!==null)e:for(;;){if(d===null)return;var D=d.tag;if(D===3||D===4){var H=d.stateNode.containerInfo;if(H===g)break;if(D===4)for(D=d.return;D!==null;){var Z=D.tag;if((Z===3||Z===4)&&D.stateNode.containerInfo===g)return;D=D.return}for(;H!==null;){if(D=wr(H),D===null)return;if(Z=D.tag,Z===5||Z===6||Z===26||Z===27){d=v=D;continue e}H=H.parentNode}}d=d.return}Jd(function(){var ae=v,he=Ar(l),ye=[];e:{var oe=Yb.get(i);if(oe!==void 0){var le=Go,Pe=i;switch(i){case"keypress":if(pi(l)===0)break e;case"keydown":case"keyup":le=Zo;break;case"focusin":Pe="focus",le=Xo;break;case"focusout":Pe="blur",le=Xo;break;case"beforeblur":case"afterblur":le=Xo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Rr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Ap;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=lf;break;case Fb:case $b:case qb:le=Wo;break;case Gb:le=cf;break;case"scroll":case"scrollend":le=ef;break;case"wheel":le=Jo;break;case"copy":case"cut":case"paste":le=Qo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=ju;break;case"toggle":case"beforetoggle":le=ff}var Ie=(a&4)!==0,pt=!Ie&&(i==="scroll"||i==="scrollend"),ne=Ie?oe!==null?oe+"Capture":null:oe;Ie=[];for(var ee=ae,se;ee!==null;){var ge=ee;if(se=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||se===null||ne===null||(ge=ja(ee,ne),ge!=null&&Ie.push(gc(ee,ge,se))),pt)break;ee=ee.return}0<Ie.length&&(oe=new le(oe,Pe,null,l,he),ye.push({event:oe,listeners:Ie}))}}if((a&7)===0){e:{if(oe=i==="mouseover"||i==="pointerover",le=i==="mouseout"||i==="pointerout",oe&&l!==$i&&(Pe=l.relatedTarget||l.fromElement)&&(wr(Pe)||Pe[$n]))break e;if((le||oe)&&(oe=he.window===he?he:(oe=he.ownerDocument)?oe.defaultView||oe.parentWindow:window,le?(Pe=l.relatedTarget||l.toElement,le=ae,Pe=Pe?wr(Pe):null,Pe!==null&&(pt=o(Pe),Ie=Pe.tag,Pe!==pt||Ie!==5&&Ie!==27&&Ie!==6)&&(Pe=null)):(le=null,Pe=ae),le!==Pe)){if(Ie=Rr,ge="onMouseLeave",ne="onMouseEnter",ee="mouse",(i==="pointerout"||i==="pointerover")&&(Ie=ju,ge="onPointerLeave",ne="onPointerEnter",ee="pointer"),pt=le==null?oe:Tr(le),se=Pe==null?oe:Tr(Pe),oe=new Ie(ge,ee+"leave",le,l,he),oe.target=pt,oe.relatedTarget=se,ge=null,wr(he)===ae&&(Ie=new Ie(ne,ee+"enter",Pe,l,he),Ie.target=se,Ie.relatedTarget=pt,ge=Ie),pt=ge,le&&Pe)t:{for(Ie=le,ne=Pe,ee=0,se=Ie;se;se=Sl(se))ee++;for(se=0,ge=ne;ge;ge=Sl(ge))se++;for(;0<ee-se;)Ie=Sl(Ie),ee--;for(;0<se-ee;)ne=Sl(ne),se--;for(;ee--;){if(Ie===ne||ne!==null&&Ie===ne.alternate)break t;Ie=Sl(Ie),ne=Sl(ne)}Ie=null}else Ie=null;le!==null&&hE(ye,oe,le,Ie,!1),Pe!==null&&pt!==null&&hE(ye,pt,Pe,Ie,!0)}}e:{if(oe=ae?Tr(ae):window,le=oe.nodeName&&oe.nodeName.toLowerCase(),le==="select"||le==="input"&&oe.type==="file")var Ae=Db;else if(en(oe))if(Mb)Ae=gI;else{Ae=mI;var $e=hI}else le=oe.nodeName,!le||le.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?ae&&Du(ae.elementType)&&(Ae=Db):Ae=pI;if(Ae&&(Ae=Ae(i,ae))){Xi(ye,Ae,l,he);break e}$e&&$e(i,oe,ae),i==="focusout"&&ae&&oe.type==="number"&&ae.memoizedProps.value!=null&&As(oe,"number",oe.value)}switch($e=ae?Tr(ae):window,i){case"focusin":(en($e)||$e.contentEditable==="true")&&(el=$e,Np=ae,Hu=null);break;case"focusout":Hu=Np=el=null;break;case"mousedown":Dp=!0;break;case"contextmenu":case"mouseup":case"dragend":Dp=!1,Bb(ye,l,he);break;case"selectionchange":if(vI)break;case"keydown":case"keyup":Bb(ye,l,he)}var Re;if(vi)e:{switch(i){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else Je?de(i,l)&&(Ne="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Ne="onCompositionStart");Ne&&(I&&l.locale!=="ko"&&(Je||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&Je&&(Re=Pu()):(mi=he,Cs="value"in mi?mi.value:mi.textContent,Je=!0)),$e=Jf(ae,Ne),0<$e.length&&(Ne=new Lu(Ne,i,null,l,he),ye.push({event:Ne,listeners:$e}),Re?Ne.data=Re:(Re=be(l),Re!==null&&(Ne.data=Re)))),(Re=S?Jt(i,l):et(i,l))&&(Ne=Jf(ae,"onBeforeInput"),0<Ne.length&&($e=new Lu("onBeforeInput","beforeinput",null,l,he),ye.push({event:$e,listeners:Ne}),$e.data=Re)),eN(ye,i,ae,l,he)}dE(ye,a)})}function gc(i,a,l){return{instance:i,listener:a,currentTarget:l}}function Jf(i,a){for(var l=a+"Capture",d=[];i!==null;){var g=i,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=ja(i,l),g!=null&&d.unshift(gc(i,g,v)),g=ja(i,a),g!=null&&d.push(gc(i,g,v))),i.tag===3)return d;i=i.return}return[]}function Sl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function hE(i,a,l,d,g){for(var v=a._reactName,D=[];l!==null&&l!==d;){var H=l,Z=H.alternate,ae=H.stateNode;if(H=H.tag,Z!==null&&Z===d)break;H!==5&&H!==26&&H!==27||ae===null||(Z=ae,g?(ae=ja(l,v),ae!=null&&D.unshift(gc(l,ae,Z))):g||(ae=ja(l,v),ae!=null&&D.push(gc(l,ae,Z)))),l=l.return}D.length!==0&&i.push({event:a,listeners:D})}var iN=/\r\n?/g,sN=/\u0000|\uFFFD/g;function mE(i){return(typeof i=="string"?i:""+i).replace(iN,`
`).replace(sN,"")}function pE(i,a){return a=mE(a),mE(i)===a}function eh(){}function mt(i,a,l,d,g,v){switch(l){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||xr(i,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&xr(i,""+d);break;case"className":Sr(i,"class",d);break;case"tabIndex":Sr(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Sr(i,l,d);break;case"style":Nu(i,d,v);break;case"data":if(a!=="object"){Sr(i,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(l);break}d=qo(""+d),i.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(a!=="input"&&mt(i,a,"name",g.name,g,null),mt(i,a,"formEncType",g.formEncType,g,null),mt(i,a,"formMethod",g.formMethod,g,null),mt(i,a,"formTarget",g.formTarget,g,null)):(mt(i,a,"encType",g.encType,g,null),mt(i,a,"method",g.method,g,null),mt(i,a,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(l);break}d=qo(""+d),i.setAttribute(l,d);break;case"onClick":d!=null&&(i.onclick=eh);break;case"onScroll":d!=null&&Ke("scroll",i);break;case"onScrollEnd":d!=null&&Ke("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(l=d.__html,l!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}l=qo(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,""+d):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":d===!0?i.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,d):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(l,d):i.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(l):i.setAttribute(l,d);break;case"popover":Ke("beforetoggle",i),Ke("toggle",i),ci(i,"popover",d);break;case"xlinkActuate":Zt(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Zt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Zt(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Zt(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Zt(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Zt(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Zt(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Zt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Zt(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":ci(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Sp.get(l)||l,ci(i,l,d))}}function ty(i,a,l,d,g,v){switch(l){case"style":Nu(i,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(l=d.__html,l!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"children":typeof d=="string"?xr(i,d):(typeof d=="number"||typeof d=="bigint")&&xr(i,""+d);break;case"onScroll":d!=null&&Ke("scroll",i);break;case"onScrollEnd":d!=null&&Ke("scrollend",i);break;case"onClick":d!=null&&(i.onclick=eh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ss.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),a=l.slice(2,g?l.length-7:void 0),v=i[It]||null,v=v!=null?v[l]:null,typeof v=="function"&&i.removeEventListener(a,v,g),typeof d=="function")){typeof v!="function"&&v!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,d,g);break e}l in i?i[l]=d:d===!0?i.setAttribute(l,""):ci(i,l,d)}}}function _n(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",i),Ke("load",i);var d=!1,g=!1,v;for(v in l)if(l.hasOwnProperty(v)){var D=l[v];if(D!=null)switch(v){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:mt(i,a,v,D,l,null)}}g&&mt(i,a,"srcSet",l.srcSet,l,null),d&&mt(i,a,"src",l.src,l,null);return;case"input":Ke("invalid",i);var H=v=D=g=null,Z=null,ae=null;for(d in l)if(l.hasOwnProperty(d)){var he=l[d];if(he!=null)switch(d){case"name":g=he;break;case"type":D=he;break;case"checked":Z=he;break;case"defaultChecked":ae=he;break;case"value":v=he;break;case"defaultValue":H=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,a));break;default:mt(i,a,d,he,l,null)}}Va(i,v,H,Z,ae,D,g,!1),$o(i);return;case"select":Ke("invalid",i),d=D=v=null;for(g in l)if(l.hasOwnProperty(g)&&(H=l[g],H!=null))switch(g){case"value":v=H;break;case"defaultValue":D=H;break;case"multiple":d=H;default:mt(i,a,g,H,l,null)}a=v,l=D,i.multiple=!!d,a!=null?Fi(i,!!d,a,!1):l!=null&&Fi(i,!!d,l,!0);return;case"textarea":Ke("invalid",i),v=g=d=null;for(D in l)if(l.hasOwnProperty(D)&&(H=l[D],H!=null))switch(D){case"value":d=H;break;case"defaultValue":g=H;break;case"children":v=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(91));break;default:mt(i,a,D,H,l,null)}La(i,d,g,v),$o(i);return;case"option":for(Z in l)if(l.hasOwnProperty(Z)&&(d=l[Z],d!=null))switch(Z){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:mt(i,a,Z,d,l,null)}return;case"dialog":Ke("beforetoggle",i),Ke("toggle",i),Ke("cancel",i),Ke("close",i);break;case"iframe":case"object":Ke("load",i);break;case"video":case"audio":for(d=0;d<pc.length;d++)Ke(pc[d],i);break;case"image":Ke("error",i),Ke("load",i);break;case"details":Ke("toggle",i);break;case"embed":case"source":case"link":Ke("error",i),Ke("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in l)if(l.hasOwnProperty(ae)&&(d=l[ae],d!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:mt(i,a,ae,d,l,null)}return;default:if(Du(a)){for(he in l)l.hasOwnProperty(he)&&(d=l[he],d!==void 0&&ty(i,a,he,d,l,void 0));return}}for(H in l)l.hasOwnProperty(H)&&(d=l[H],d!=null&&mt(i,a,H,d,l,null))}function aN(i,a,l,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,D=null,H=null,Z=null,ae=null,he=null;for(le in l){var ye=l[le];if(l.hasOwnProperty(le)&&ye!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":Z=ye;default:d.hasOwnProperty(le)||mt(i,a,le,null,d,ye)}}for(var oe in d){var le=d[oe];if(ye=l[oe],d.hasOwnProperty(oe)&&(le!=null||ye!=null))switch(oe){case"type":v=le;break;case"name":g=le;break;case"checked":ae=le;break;case"defaultChecked":he=le;break;case"value":D=le;break;case"defaultValue":H=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,a));break;default:le!==ye&&mt(i,a,oe,le,d,ye)}}rr(i,D,H,Z,ae,he,v,g);return;case"select":le=D=H=oe=null;for(v in l)if(Z=l[v],l.hasOwnProperty(v)&&Z!=null)switch(v){case"value":break;case"multiple":le=Z;default:d.hasOwnProperty(v)||mt(i,a,v,null,d,Z)}for(g in d)if(v=d[g],Z=l[g],d.hasOwnProperty(g)&&(v!=null||Z!=null))switch(g){case"value":oe=v;break;case"defaultValue":H=v;break;case"multiple":D=v;default:v!==Z&&mt(i,a,g,v,d,Z)}a=H,l=D,d=le,oe!=null?Fi(i,!!l,oe,!1):!!d!=!!l&&(a!=null?Fi(i,!!l,a,!0):Fi(i,!!l,l?[]:"",!1));return;case"textarea":le=oe=null;for(H in l)if(g=l[H],l.hasOwnProperty(H)&&g!=null&&!d.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:mt(i,a,H,null,d,g)}for(D in d)if(g=d[D],v=l[D],d.hasOwnProperty(D)&&(g!=null||v!=null))switch(D){case"value":oe=g;break;case"defaultValue":le=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==v&&mt(i,a,D,g,d,v)}ft(i,oe,le);return;case"option":for(var Pe in l)if(oe=l[Pe],l.hasOwnProperty(Pe)&&oe!=null&&!d.hasOwnProperty(Pe))switch(Pe){case"selected":i.selected=!1;break;default:mt(i,a,Pe,null,d,oe)}for(Z in d)if(oe=d[Z],le=l[Z],d.hasOwnProperty(Z)&&oe!==le&&(oe!=null||le!=null))switch(Z){case"selected":i.selected=oe&&typeof oe!="function"&&typeof oe!="symbol";break;default:mt(i,a,Z,oe,d,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in l)oe=l[Ie],l.hasOwnProperty(Ie)&&oe!=null&&!d.hasOwnProperty(Ie)&&mt(i,a,Ie,null,d,oe);for(ae in d)if(oe=d[ae],le=l[ae],d.hasOwnProperty(ae)&&oe!==le&&(oe!=null||le!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,a));break;default:mt(i,a,ae,oe,d,le)}return;default:if(Du(a)){for(var pt in l)oe=l[pt],l.hasOwnProperty(pt)&&oe!==void 0&&!d.hasOwnProperty(pt)&&ty(i,a,pt,void 0,d,oe);for(he in d)oe=d[he],le=l[he],!d.hasOwnProperty(he)||oe===le||oe===void 0&&le===void 0||ty(i,a,he,oe,d,le);return}}for(var ne in l)oe=l[ne],l.hasOwnProperty(ne)&&oe!=null&&!d.hasOwnProperty(ne)&&mt(i,a,ne,null,d,oe);for(ye in d)oe=d[ye],le=l[ye],!d.hasOwnProperty(ye)||oe===le||oe==null&&le==null||mt(i,a,ye,oe,d,le)}var ny=null,ry=null;function th(i){return i.nodeType===9?i:i.ownerDocument}function gE(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yE(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function iy(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var sy=null;function oN(){var i=window.event;return i&&i.type==="popstate"?i===sy?!1:(sy=i,!0):(sy=null,!1)}var vE=typeof setTimeout=="function"?setTimeout:void 0,lN=typeof clearTimeout=="function"?clearTimeout:void 0,_E=typeof Promise=="function"?Promise:void 0,uN=typeof queueMicrotask=="function"?queueMicrotask:typeof _E<"u"?function(i){return _E.resolve(null).then(i).catch(cN)}:vE;function cN(i){setTimeout(function(){throw i})}function Fs(i){return i==="head"}function bE(i,a){var l=a,d=0,g=0;do{var v=l.nextSibling;if(i.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"){if(0<d&&8>d){l=d;var D=i.ownerDocument;if(l&1&&yc(D.documentElement),l&2&&yc(D.body),l&4)for(l=D.head,yc(l),D=l.firstChild;D;){var H=D.nextSibling,Z=D.nodeName;D[Bi]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&D.rel.toLowerCase()==="stylesheet"||l.removeChild(D),D=H}}if(g===0){i.removeChild(v),xc(a);return}g--}else l==="$"||l==="$?"||l==="$!"?g++:d=l.charCodeAt(0)-48;else d=0;l=v}while(l);xc(a)}function ay(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":ay(l),ui(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function dN(i,a,l,d){for(;i.nodeType===1;){var g=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[Bi])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=Kr(i.nextSibling),i===null)break}return null}function fN(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Kr(i.nextSibling),i===null))return null;return i}function oy(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function hN(i,a){var l=i.ownerDocument;if(i.data!=="$?"||l.readyState==="complete")a();else{var d=function(){a(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function Kr(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}var ly=null;function wE(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return i;a--}else l==="/$"&&a++}i=i.previousSibling}return null}function EE(i,a,l){switch(a=th(l),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function yc(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);ui(i)}var Or=new Map,TE=new Set;function nh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ls=q.d;q.d={f:mN,r:pN,D:gN,C:yN,L:vN,m:_N,X:wN,S:bN,M:EN};function mN(){var i=ls.f(),a=Yf();return i||a}function pN(i){var a=Er(i);a!==null&&a.tag===5&&a.type==="form"?Fw(a):ls.r(i)}var xl=typeof document>"u"?null:document;function SE(i,a,l){var d=xl;if(d&&typeof a=="string"&&a){var g=qt(a);g='link[rel="'+i+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),TE.has(g)||(TE.add(g),i={rel:i,crossOrigin:l,href:a},d.querySelector(g)===null&&(a=d.createElement("link"),_n(a,"link",i),St(a),d.head.appendChild(a)))}}function gN(i){ls.D(i),SE("dns-prefetch",i,null)}function yN(i,a){ls.C(i,a),SE("preconnect",i,a)}function vN(i,a,l){ls.L(i,a,l);var d=xl;if(d&&i&&a){var g='link[rel="preload"][as="'+qt(a)+'"]';a==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+qt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+qt(l.imageSizes)+'"]')):g+='[href="'+qt(i)+'"]';var v=g;switch(a){case"style":v=Al(i);break;case"script":v=Cl(i)}Or.has(v)||(i=p({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),Or.set(v,i),d.querySelector(g)!==null||a==="style"&&d.querySelector(vc(v))||a==="script"&&d.querySelector(_c(v))||(a=d.createElement("link"),_n(a,"link",i),St(a),d.head.appendChild(a)))}}function _N(i,a){ls.m(i,a);var l=xl;if(l&&i){var d=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+qt(d)+'"][href="'+qt(i)+'"]',v=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Cl(i)}if(!Or.has(v)&&(i=p({rel:"modulepreload",href:i},a),Or.set(v,i),l.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(_c(v)))return}d=l.createElement("link"),_n(d,"link",i),St(d),l.head.appendChild(d)}}}function bN(i,a,l){ls.S(i,a,l);var d=xl;if(d&&i){var g=pn(d).hoistableStyles,v=Al(i);a=a||"default";var D=g.get(v);if(!D){var H={loading:0,preload:null};if(D=d.querySelector(vc(v)))H.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":a},l),(l=Or.get(v))&&uy(i,l);var Z=D=d.createElement("link");St(Z),_n(Z,"link",i),Z._p=new Promise(function(ae,he){Z.onload=ae,Z.onerror=he}),Z.addEventListener("load",function(){H.loading|=1}),Z.addEventListener("error",function(){H.loading|=2}),H.loading|=4,rh(D,a,d)}D={type:"stylesheet",instance:D,count:1,state:H},g.set(v,D)}}}function wN(i,a){ls.X(i,a);var l=xl;if(l&&i){var d=pn(l).hoistableScripts,g=Cl(i),v=d.get(g);v||(v=l.querySelector(_c(g)),v||(i=p({src:i,async:!0},a),(a=Or.get(g))&&cy(i,a),v=l.createElement("script"),St(v),_n(v,"link",i),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(g,v))}}function EN(i,a){ls.M(i,a);var l=xl;if(l&&i){var d=pn(l).hoistableScripts,g=Cl(i),v=d.get(g);v||(v=l.querySelector(_c(g)),v||(i=p({src:i,async:!0,type:"module"},a),(a=Or.get(g))&&cy(i,a),v=l.createElement("script"),St(v),_n(v,"link",i),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(g,v))}}function xE(i,a,l,d){var g=(g=ue.current)?nh(g):null;if(!g)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Al(l.href),l=pn(g).hoistableStyles,d=l.get(a),d||(d={type:"style",instance:null,count:0,state:null},l.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Al(l.href);var v=pn(g).hoistableStyles,D=v.get(i);if(D||(g=g.ownerDocument||g,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,D),(v=g.querySelector(vc(i)))&&!v._p&&(D.instance=v,D.state.loading=5),Or.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Or.set(i,l),v||TN(g,i,l,D.state))),a&&d===null)throw Error(r(528,""));return D}if(a&&d!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Cl(l),l=pn(g).hoistableScripts,d=l.get(a),d||(d={type:"script",instance:null,count:0,state:null},l.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Al(i){return'href="'+qt(i)+'"'}function vc(i){return'link[rel="stylesheet"]['+i+"]"}function AE(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function TN(i,a,l,d){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=i.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),_n(a,"link",l),St(a),i.head.appendChild(a))}function Cl(i){return'[src="'+qt(i)+'"]'}function _c(i){return"script[async]"+i}function CE(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var d=i.querySelector('style[data-href~="'+qt(l.href)+'"]');if(d)return a.instance=d,St(d),d;var g=p({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),St(d),_n(d,"style",g),rh(d,l.precedence,i),a.instance=d;case"stylesheet":g=Al(l.href);var v=i.querySelector(vc(g));if(v)return a.state.loading|=4,a.instance=v,St(v),v;d=AE(l),(g=Or.get(g))&&uy(d,g),v=(i.ownerDocument||i).createElement("link"),St(v);var D=v;return D._p=new Promise(function(H,Z){D.onload=H,D.onerror=Z}),_n(v,"link",d),a.state.loading|=4,rh(v,l.precedence,i),a.instance=v;case"script":return v=Cl(l.src),(g=i.querySelector(_c(v)))?(a.instance=g,St(g),g):(d=l,(g=Or.get(v))&&(d=p({},l),cy(d,g)),i=i.ownerDocument||i,g=i.createElement("script"),St(g),_n(g,"link",d),i.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,rh(d,l.precedence,i));return a.instance}function rh(i,a,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,v=g,D=0;D<d.length;D++){var H=d[D];if(H.dataset.precedence===a)v=H;else if(v!==g)break}v?v.parentNode.insertBefore(i,v.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function uy(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function cy(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var ih=null;function RE(i,a,l){if(ih===null){var d=new Map,g=ih=new Map;g.set(l,d)}else g=ih,d=g.get(l),d||(d=new Map,g.set(l,d));if(d.has(i))return d;for(d.set(i,null),l=l.getElementsByTagName(i),g=0;g<l.length;g++){var v=l[g];if(!(v[Bi]||v[Lt]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var D=v.getAttribute(a)||"";D=i+D;var H=d.get(D);H?H.push(v):d.set(D,[v])}}return d}function kE(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function SN(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function IE(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var bc=null;function xN(){}function AN(i,a,l){if(bc===null)throw Error(r(475));var d=bc;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=Al(l.href),v=i.querySelector(vc(g));if(v){i=v._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(d.count++,d=sh.bind(d),i.then(d,d)),a.state.loading|=4,a.instance=v,St(v);return}v=i.ownerDocument||i,l=AE(l),(g=Or.get(g))&&uy(l,g),v=v.createElement("link"),St(v);var D=v;D._p=new Promise(function(H,Z){D.onload=H,D.onerror=Z}),_n(v,"link",l),a.instance=v}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(d.count++,a=sh.bind(d),i.addEventListener("load",a),i.addEventListener("error",a))}}function CN(){if(bc===null)throw Error(r(475));var i=bc;return i.stylesheets&&i.count===0&&dy(i,i.stylesheets),0<i.count?function(a){var l=setTimeout(function(){if(i.stylesheets&&dy(i,i.stylesheets),i.unsuspend){var d=i.unsuspend;i.unsuspend=null,d()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(l)}}:null}function sh(){if(this.count--,this.count===0){if(this.stylesheets)dy(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var ah=null;function dy(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,ah=new Map,a.forEach(RN,i),ah=null,sh.call(i))}function RN(i,a){if(!(a.state.loading&4)){var l=ah.get(i);if(l)var d=l.get(null);else{l=new Map,ah.set(i,l);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var D=g[v];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(l.set(D.dataset.precedence,D),d=D)}d&&l.set(null,d)}g=a.instance,D=g.getAttribute("data-precedence"),v=l.get(D)||d,v===d&&l.set(null,g),l.set(D,g),this.count++,d=sh.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),v?v.parentNode.insertBefore(g,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),a.state.loading|=4}}var wc={$$typeof:K,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function kN(i,a,l,d,g,v,D,H){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=er(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=er(0),this.hiddenUpdates=er(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function NE(i,a,l,d,g,v,D,H,Z,ae,he,ye){return i=new kN(i,a,l,D,H,Z,ae,ye),a=1,v===!0&&(a|=24),v=sr(3,null,null,a),i.current=v,v.stateNode=i,a=Gp(),a.refCount++,i.pooledCache=a,a.refCount++,v.memoizedState={element:d,isDehydrated:l,cache:a},Wp(v),i}function DE(i){return i?(i=il,i):il}function ME(i,a,l,d,g,v){g=DE(g),d.context===null?d.context=g:d.pendingContext=g,d=Is(a),d.payload={element:l},v=v===void 0?null:v,v!==null&&(d.callback=v),l=Ns(i,d,a),l!==null&&(cr(l,i,a),Qu(l,i,a))}function PE(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function fy(i,a){PE(i,a),(i=i.alternate)&&PE(i,a)}function OE(i){if(i.tag===13){var a=rl(i,67108864);a!==null&&cr(a,i,67108864),fy(i,67108864)}}var oh=!0;function IN(i,a,l,d){var g=R.T;R.T=null;var v=q.p;try{q.p=2,hy(i,a,l,d)}finally{q.p=v,R.T=g}}function NN(i,a,l,d){var g=R.T;R.T=null;var v=q.p;try{q.p=8,hy(i,a,l,d)}finally{q.p=v,R.T=g}}function hy(i,a,l,d){if(oh){var g=my(d);if(g===null)ey(i,a,d,lh,l),LE(i,d);else if(MN(g,i,a,l,d))d.stopPropagation();else if(LE(i,d),a&4&&-1<DN.indexOf(i)){for(;g!==null;){var v=Er(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var D=an(v.pendingLanes);if(D!==0){var H=v;for(H.pendingLanes|=2,H.entangledLanes|=2;D;){var Z=1<<31-Tt(D);H.entanglements[1]|=Z,D&=~Z}Si(v),(ct&6)===0&&(qf=je()+500,mc(0))}}break;case 13:H=rl(v,2),H!==null&&cr(H,v,2),Yf(),fy(v,2)}if(v=my(d),v===null&&ey(i,a,d,lh,l),v===g)break;g=v}g!==null&&d.stopPropagation()}else ey(i,a,d,null,l)}}function my(i){return i=Ar(i),py(i)}var lh=null;function py(i){if(lh=null,i=wr(i),i!==null){var a=o(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=u(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return lh=i,null}function VE(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Te()){case kt:return 2;case Sn:return 8;case Qt:case Jn:return 32;case Pn:return 268435456;default:return 32}default:return 32}}var gy=!1,$s=null,qs=null,Gs=null,Ec=new Map,Tc=new Map,Ys=[],DN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function LE(i,a){switch(i){case"focusin":case"focusout":$s=null;break;case"dragenter":case"dragleave":qs=null;break;case"mouseover":case"mouseout":Gs=null;break;case"pointerover":case"pointerout":Ec.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tc.delete(a.pointerId)}}function Sc(i,a,l,d,g,v){return i===null||i.nativeEvent!==v?(i={blockedOn:a,domEventName:l,eventSystemFlags:d,nativeEvent:v,targetContainers:[g]},a!==null&&(a=Er(a),a!==null&&OE(a)),i):(i.eventSystemFlags|=d,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function MN(i,a,l,d,g){switch(a){case"focusin":return $s=Sc($s,i,a,l,d,g),!0;case"dragenter":return qs=Sc(qs,i,a,l,d,g),!0;case"mouseover":return Gs=Sc(Gs,i,a,l,d,g),!0;case"pointerover":var v=g.pointerId;return Ec.set(v,Sc(Ec.get(v)||null,i,a,l,d,g)),!0;case"gotpointercapture":return v=g.pointerId,Tc.set(v,Sc(Tc.get(v)||null,i,a,l,d,g)),!0}return!1}function zE(i){var a=wr(i.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){i.blockedOn=a,zo(i.priority,function(){if(l.tag===13){var d=ur();d=ai(d);var g=rl(l,d);g!==null&&cr(g,l,d),fy(l,d)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function uh(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=my(i.nativeEvent);if(l===null){l=i.nativeEvent;var d=new l.constructor(l.type,l);$i=d,l.target.dispatchEvent(d),$i=null}else return a=Er(l),a!==null&&OE(a),i.blockedOn=l,!1;a.shift()}return!0}function jE(i,a,l){uh(i)&&l.delete(a)}function PN(){gy=!1,$s!==null&&uh($s)&&($s=null),qs!==null&&uh(qs)&&(qs=null),Gs!==null&&uh(Gs)&&(Gs=null),Ec.forEach(jE),Tc.forEach(jE)}function ch(i,a){i.blockedOn===a&&(i.blockedOn=null,gy||(gy=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,PN)))}var dh=null;function UE(i){dh!==i&&(dh=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){dh===i&&(dh=null);for(var a=0;a<i.length;a+=3){var l=i[a],d=i[a+1],g=i[a+2];if(typeof d!="function"){if(py(d||l)===null)continue;break}var v=Er(l);v!==null&&(i.splice(a,3),a-=3,pg(v,{pending:!0,data:g,method:l.method,action:d},d,g))}}))}function xc(i){function a(Z){return ch(Z,i)}$s!==null&&ch($s,i),qs!==null&&ch(qs,i),Gs!==null&&ch(Gs,i),Ec.forEach(a),Tc.forEach(a);for(var l=0;l<Ys.length;l++){var d=Ys[l];d.blockedOn===i&&(d.blockedOn=null)}for(;0<Ys.length&&(l=Ys[0],l.blockedOn===null);)zE(l),l.blockedOn===null&&Ys.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var g=l[d],v=l[d+1],D=g[It]||null;if(typeof v=="function")D||UE(l);else if(D){var H=null;if(v&&v.hasAttribute("formAction")){if(g=v,D=v[It]||null)H=D.formAction;else if(py(g)!==null)continue}else H=D.action;typeof H=="function"?l[d+1]=H:(l.splice(d,3),d-=3),UE(l)}}}function yy(i){this._internalRoot=i}fh.prototype.render=yy.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,d=ur();ME(l,d,i,a,null,null)},fh.prototype.unmount=yy.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;ME(i.current,2,null,i,null,null),Yf(),a[$n]=null}};function fh(i){this._internalRoot=i}fh.prototype.unstable_scheduleHydration=function(i){if(i){var a=oi();i={blockedOn:null,target:i,priority:a};for(var l=0;l<Ys.length&&a!==0&&a<Ys[l].priority;l++);Ys.splice(l,0,i),l===0&&zE(i)}};var BE=e.version;if(BE!=="19.1.0")throw Error(r(527,BE,"19.1.0"));q.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=f(a),i=i!==null?h(i):null,i=i===null?null:i.stateNode,i};var ON={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hh.isDisabled&&hh.supportsFiber)try{ot=hh.inject(ON),Ge=hh}catch{}}return Cc.createRoot=function(i,a){if(!s(i))throw Error(r(299));var l=!1,d="",g=r1,v=i1,D=s1,H=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(D=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(H=a.unstable_transitionCallbacks)),a=NE(i,1,!1,null,null,l,d,g,v,D,H,null),i[$n]=a.current,Jg(i),new yy(a)},Cc.hydrateRoot=function(i,a,l){if(!s(i))throw Error(r(299));var d=!1,g="",v=r1,D=i1,H=s1,Z=null,ae=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(D=l.onCaughtError),l.onRecoverableError!==void 0&&(H=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(Z=l.unstable_transitionCallbacks),l.formState!==void 0&&(ae=l.formState)),a=NE(i,1,!0,a,l??null,d,g,v,D,H,Z,ae),a.context=DE(null),l=a.current,d=ur(),d=ai(d),g=Is(d),g.callback=null,Ns(l,g,d),l=d,a.current.lanes=l,_r(a,l),Si(a),i[$n]=a.current,Jg(i),new fh(a)},Cc.version="19.1.0",Cc}var QE;function GN(){if(QE)return by.exports;QE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),by.exports=qN(),by.exports}var YN=GN();function Fn(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=Fn(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var Sy={exports:{}},xy={},Ay={exports:{}},Cy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZE;function KN(){if(ZE)return Cy;ZE=1;var t=Nd();function e(_,b){return _===b&&(_!==0||1/_===1/b)||_!==_&&b!==b}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,o=t.useLayoutEffect,u=t.useDebugValue;function c(_,b){var A=b(),O=r({inst:{value:A,getSnapshot:b}}),V=O[0].inst,z=O[1];return o(function(){V.value=A,V.getSnapshot=b,f(V)&&z({inst:V})},[_,A,b]),s(function(){return f(V)&&z({inst:V}),_(function(){f(V)&&z({inst:V})})},[_]),u(A),A}function f(_){var b=_.getSnapshot;_=_.value;try{var A=b();return!n(_,A)}catch{return!0}}function h(_,b){return b()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:c;return Cy.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,Cy}var JE;function XN(){return JE||(JE=1,Ay.exports=KN()),Ay.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eT;function WN(){if(eT)return xy;eT=1;var t=Nd(),e=XN();function n(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,o=t.useRef,u=t.useEffect,c=t.useMemo,f=t.useDebugValue;return xy.useSyncExternalStoreWithSelector=function(h,p,_,b,A){var O=o(null);if(O.current===null){var V={hasValue:!1,value:null};O.current=V}else V=O.current;O=c(function(){function j(w){if(!F){if(F=!0,K=w,w=b(w),A!==void 0&&V.hasValue){var T=V.value;if(A(T,w))return y=T}return y=w}if(T=y,r(K,w))return T;var x=b(w);return A!==void 0&&A(T,x)?(K=w,T):(K=w,y=x)}var F=!1,K,y,E=_===void 0?null:_;return[function(){return j(p())},E===null?void 0:function(){return j(E())}]},[p,_,b,A]);var z=s(h,O[0],O[1]);return u(function(){V.hasValue=!0,V.value=z},[z]),f(z),z},xy}var tT;function QN(){return tT||(tT=1,Sy.exports=WN()),Sy.exports}var ZN=QN();const JN=Rv(ZN),eD={},nT=t=>{let e;const n=new Set,r=(p,_)=>{const b=typeof p=="function"?p(e):p;if(!Object.is(b,e)){const A=e;e=_??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(O=>O(e,A))}},s=()=>e,f={setState:r,getState:s,getInitialState:()=>h,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(eD?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},h=e=t(r,s,f);return f},tD=t=>t?nT(t):nT,{useDebugValue:nD}=me,{useSyncExternalStoreWithSelector:rD}=JN,iD=t=>t;function r2(t,e=iD,n){const r=rD(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return nD(r),r}const rT=(t,e)=>{const n=tD(t),r=(s,o=e)=>r2(n,s,o);return Object.assign(r,n),r},sD=(t,e)=>t?rT(t,e):rT;function Dn(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,s]of t)if(!Object.is(s,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var aD={value:()=>{}};function Lm(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Oh(n)}function Oh(t){this._=t}function oD(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Oh.prototype=Lm.prototype={constructor:Oh,on:function(t,e){var n=this._,r=oD(t+"",n),s,o=-1,u=r.length;if(arguments.length<2){for(;++o<u;)if((s=(t=r[o]).type)&&(s=lD(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<u;)if(s=(t=r[o]).type)n[s]=iT(n[s],t.name,e);else if(e==null)for(s in n)n[s]=iT(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Oh(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,o;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,s=o.length;r<s;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,o=r.length;s<o;++s)r[s].value.apply(e,n)}};function lD(t,e){for(var n=0,r=t.length,s;n<r;++n)if((s=t[n]).name===e)return s.value}function iT(t,e,n){for(var r=0,s=t.length;r<s;++r)if(t[r].name===e){t[r]=aD,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var g0="http://www.w3.org/1999/xhtml";const sT={svg:"http://www.w3.org/2000/svg",xhtml:g0,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function zm(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),sT.hasOwnProperty(e)?{space:sT[e],local:t}:t}function uD(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===g0&&e.documentElement.namespaceURI===g0?e.createElement(t):e.createElementNS(n,t)}}function cD(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function i2(t){var e=zm(t);return(e.local?cD:uD)(e)}function dD(){}function kv(t){return t==null?dD:function(){return this.querySelector(t)}}function fD(t){typeof t!="function"&&(t=kv(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],u=o.length,c=r[s]=new Array(u),f,h,p=0;p<u;++p)(f=o[p])&&(h=t.call(f,f.__data__,p,o))&&("__data__"in f&&(h.__data__=f.__data__),c[p]=h);return new yr(r,this._parents)}function hD(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function mD(){return[]}function s2(t){return t==null?mD:function(){return this.querySelectorAll(t)}}function pD(t){return function(){return hD(t.apply(this,arguments))}}function gD(t){typeof t=="function"?t=pD(t):t=s2(t);for(var e=this._groups,n=e.length,r=[],s=[],o=0;o<n;++o)for(var u=e[o],c=u.length,f,h=0;h<c;++h)(f=u[h])&&(r.push(t.call(f,f.__data__,h,u)),s.push(f));return new yr(r,s)}function a2(t){return function(){return this.matches(t)}}function o2(t){return function(e){return e.matches(t)}}var yD=Array.prototype.find;function vD(t){return function(){return yD.call(this.children,t)}}function _D(){return this.firstElementChild}function bD(t){return this.select(t==null?_D:vD(typeof t=="function"?t:o2(t)))}var wD=Array.prototype.filter;function ED(){return Array.from(this.children)}function TD(t){return function(){return wD.call(this.children,t)}}function SD(t){return this.selectAll(t==null?ED:TD(typeof t=="function"?t:o2(t)))}function xD(t){typeof t!="function"&&(t=a2(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],u=o.length,c=r[s]=[],f,h=0;h<u;++h)(f=o[h])&&t.call(f,f.__data__,h,o)&&c.push(f);return new yr(r,this._parents)}function l2(t){return new Array(t.length)}function AD(){return new yr(this._enter||this._groups.map(l2),this._parents)}function tm(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}tm.prototype={constructor:tm,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function CD(t){return function(){return t}}function RD(t,e,n,r,s,o){for(var u=0,c,f=e.length,h=o.length;u<h;++u)(c=e[u])?(c.__data__=o[u],r[u]=c):n[u]=new tm(t,o[u]);for(;u<f;++u)(c=e[u])&&(s[u]=c)}function kD(t,e,n,r,s,o,u){var c,f,h=new Map,p=e.length,_=o.length,b=new Array(p),A;for(c=0;c<p;++c)(f=e[c])&&(b[c]=A=u.call(f,f.__data__,c,e)+"",h.has(A)?s[c]=f:h.set(A,f));for(c=0;c<_;++c)A=u.call(t,o[c],c,o)+"",(f=h.get(A))?(r[c]=f,f.__data__=o[c],h.delete(A)):n[c]=new tm(t,o[c]);for(c=0;c<p;++c)(f=e[c])&&h.get(b[c])===f&&(s[c]=f)}function ID(t){return t.__data__}function ND(t,e){if(!arguments.length)return Array.from(this,ID);var n=e?kD:RD,r=this._parents,s=this._groups;typeof t!="function"&&(t=CD(t));for(var o=s.length,u=new Array(o),c=new Array(o),f=new Array(o),h=0;h<o;++h){var p=r[h],_=s[h],b=_.length,A=DD(t.call(p,p&&p.__data__,h,r)),O=A.length,V=c[h]=new Array(O),z=u[h]=new Array(O),j=f[h]=new Array(b);n(p,_,V,z,j,A,e);for(var F=0,K=0,y,E;F<O;++F)if(y=V[F]){for(F>=K&&(K=F+1);!(E=z[K])&&++K<O;);y._next=E||null}}return u=new yr(u,r),u._enter=c,u._exit=f,u}function DD(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function MD(){return new yr(this._exit||this._groups.map(l2),this._parents)}function PD(t,e,n){var r=this.enter(),s=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?o.remove():n(o),r&&s?r.merge(s).order():s}function OD(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,s=n.length,o=r.length,u=Math.min(s,o),c=new Array(s),f=0;f<u;++f)for(var h=n[f],p=r[f],_=h.length,b=c[f]=new Array(_),A,O=0;O<_;++O)(A=h[O]||p[O])&&(b[O]=A);for(;f<s;++f)c[f]=n[f];return new yr(c,this._parents)}function VD(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],s=r.length-1,o=r[s],u;--s>=0;)(u=r[s])&&(o&&u.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(u,o),o=u);return this}function LD(t){t||(t=zD);function e(_,b){return _&&b?t(_.__data__,b.__data__):!_-!b}for(var n=this._groups,r=n.length,s=new Array(r),o=0;o<r;++o){for(var u=n[o],c=u.length,f=s[o]=new Array(c),h,p=0;p<c;++p)(h=u[p])&&(f[p]=h);f.sort(e)}return new yr(s,this._parents).order()}function zD(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function jD(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function UD(){return Array.from(this)}function BD(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,o=r.length;s<o;++s){var u=r[s];if(u)return u}return null}function HD(){let t=0;for(const e of this)++t;return t}function FD(){return!this.node()}function $D(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],o=0,u=s.length,c;o<u;++o)(c=s[o])&&t.call(c,c.__data__,o,s);return this}function qD(t){return function(){this.removeAttribute(t)}}function GD(t){return function(){this.removeAttributeNS(t.space,t.local)}}function YD(t,e){return function(){this.setAttribute(t,e)}}function KD(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function XD(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function WD(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function QD(t,e){var n=zm(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?GD:qD:typeof e=="function"?n.local?WD:XD:n.local?KD:YD)(n,e))}function u2(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ZD(t){return function(){this.style.removeProperty(t)}}function JD(t,e,n){return function(){this.style.setProperty(t,e,n)}}function e4(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function t4(t,e,n){return arguments.length>1?this.each((e==null?ZD:typeof e=="function"?e4:JD)(t,e,n??"")):ru(this.node(),t)}function ru(t,e){return t.style.getPropertyValue(e)||u2(t).getComputedStyle(t,null).getPropertyValue(e)}function n4(t){return function(){delete this[t]}}function r4(t,e){return function(){this[t]=e}}function i4(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function s4(t,e){return arguments.length>1?this.each((e==null?n4:typeof e=="function"?i4:r4)(t,e)):this.node()[t]}function c2(t){return t.trim().split(/^|\s+/)}function Iv(t){return t.classList||new d2(t)}function d2(t){this._node=t,this._names=c2(t.getAttribute("class")||"")}d2.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function f2(t,e){for(var n=Iv(t),r=-1,s=e.length;++r<s;)n.add(e[r])}function h2(t,e){for(var n=Iv(t),r=-1,s=e.length;++r<s;)n.remove(e[r])}function a4(t){return function(){f2(this,t)}}function o4(t){return function(){h2(this,t)}}function l4(t,e){return function(){(e.apply(this,arguments)?f2:h2)(this,t)}}function u4(t,e){var n=c2(t+"");if(arguments.length<2){for(var r=Iv(this.node()),s=-1,o=n.length;++s<o;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?l4:e?a4:o4)(n,e))}function c4(){this.textContent=""}function d4(t){return function(){this.textContent=t}}function f4(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function h4(t){return arguments.length?this.each(t==null?c4:(typeof t=="function"?f4:d4)(t)):this.node().textContent}function m4(){this.innerHTML=""}function p4(t){return function(){this.innerHTML=t}}function g4(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function y4(t){return arguments.length?this.each(t==null?m4:(typeof t=="function"?g4:p4)(t)):this.node().innerHTML}function v4(){this.nextSibling&&this.parentNode.appendChild(this)}function _4(){return this.each(v4)}function b4(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function w4(){return this.each(b4)}function E4(t){var e=typeof t=="function"?t:i2(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function T4(){return null}function S4(t,e){var n=typeof t=="function"?t:i2(t),r=e==null?T4:typeof e=="function"?e:kv(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function x4(){var t=this.parentNode;t&&t.removeChild(this)}function A4(){return this.each(x4)}function C4(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function R4(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function k4(t){return this.select(t?R4:C4)}function I4(t){return arguments.length?this.property("__data__",t):this.node().__data__}function N4(t){return function(e){t.call(this,e,this.__data__)}}function D4(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function M4(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,s=e.length,o;n<s;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function P4(t,e,n){return function(){var r=this.__on,s,o=N4(e);if(r){for(var u=0,c=r.length;u<c;++u)if((s=r[u]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=n),s.value=e;return}}this.addEventListener(t.type,o,n),s={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(s):this.__on=[s]}}function O4(t,e,n){var r=D4(t+""),s,o=r.length,u;if(arguments.length<2){var c=this.node().__on;if(c){for(var f=0,h=c.length,p;f<h;++f)for(s=0,p=c[f];s<o;++s)if((u=r[s]).type===p.type&&u.name===p.name)return p.value}return}for(c=e?P4:M4,s=0;s<o;++s)this.each(c(r[s],e,n));return this}function m2(t,e,n){var r=u2(t),s=r.CustomEvent;typeof s=="function"?s=new s(e,n):(s=r.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function V4(t,e){return function(){return m2(this,t,e)}}function L4(t,e){return function(){return m2(this,t,e.apply(this,arguments))}}function z4(t,e){return this.each((typeof e=="function"?L4:V4)(t,e))}function*j4(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,o=r.length,u;s<o;++s)(u=r[s])&&(yield u)}var p2=[null];function yr(t,e){this._groups=t,this._parents=e}function Dd(){return new yr([[document.documentElement]],p2)}function U4(){return this}yr.prototype=Dd.prototype={constructor:yr,select:fD,selectAll:gD,selectChild:bD,selectChildren:SD,filter:xD,data:ND,enter:AD,exit:MD,join:PD,merge:OD,selection:U4,order:VD,sort:LD,call:jD,nodes:UD,node:BD,size:HD,empty:FD,each:$D,attr:QD,style:t4,property:s4,classed:u4,text:h4,html:y4,raise:_4,lower:w4,append:E4,insert:S4,remove:A4,clone:k4,datum:I4,on:O4,dispatch:z4,[Symbol.iterator]:j4};function Wr(t){return typeof t=="string"?new yr([[document.querySelector(t)]],[document.documentElement]):new yr([[t]],p2)}function B4(t){let e;for(;e=t.sourceEvent;)t=e;return t}function xi(t,e){if(t=B4(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const H4={passive:!1},sd={capture:!0,passive:!1};function Ry(t){t.stopImmediatePropagation()}function Yl(t){t.preventDefault(),t.stopImmediatePropagation()}function g2(t){var e=t.document.documentElement,n=Wr(t).on("dragstart.drag",Yl,sd);"onselectstart"in e?n.on("selectstart.drag",Yl,sd):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function y2(t,e){var n=t.document.documentElement,r=Wr(t).on("dragstart.drag",null);e&&(r.on("click.drag",Yl,sd),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const mh=t=>()=>t;function y0(t,{sourceEvent:e,subject:n,target:r,identifier:s,active:o,x:u,y:c,dx:f,dy:h,dispatch:p}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:p}})}y0.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function F4(t){return!t.ctrlKey&&!t.button}function $4(){return this.parentNode}function q4(t,e){return e??{x:t.x,y:t.y}}function G4(){return navigator.maxTouchPoints||"ontouchstart"in this}function Y4(){var t=F4,e=$4,n=q4,r=G4,s={},o=Lm("start","drag","end"),u=0,c,f,h,p,_=0;function b(y){y.on("mousedown.drag",A).filter(r).on("touchstart.drag",z).on("touchmove.drag",j,H4).on("touchend.drag touchcancel.drag",F).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function A(y,E){if(!(p||!t.call(this,y,E))){var w=K(this,e.call(this,y,E),y,E,"mouse");w&&(Wr(y.view).on("mousemove.drag",O,sd).on("mouseup.drag",V,sd),g2(y.view),Ry(y),h=!1,c=y.clientX,f=y.clientY,w("start",y))}}function O(y){if(Yl(y),!h){var E=y.clientX-c,w=y.clientY-f;h=E*E+w*w>_}s.mouse("drag",y)}function V(y){Wr(y.view).on("mousemove.drag mouseup.drag",null),y2(y.view,h),Yl(y),s.mouse("end",y)}function z(y,E){if(t.call(this,y,E)){var w=y.changedTouches,T=e.call(this,y,E),x=w.length,C,k;for(C=0;C<x;++C)(k=K(this,T,y,E,w[C].identifier,w[C]))&&(Ry(y),k("start",y,w[C]))}}function j(y){var E=y.changedTouches,w=E.length,T,x;for(T=0;T<w;++T)(x=s[E[T].identifier])&&(Yl(y),x("drag",y,E[T]))}function F(y){var E=y.changedTouches,w=E.length,T,x;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),T=0;T<w;++T)(x=s[E[T].identifier])&&(Ry(y),x("end",y,E[T]))}function K(y,E,w,T,x,C){var k=o.copy(),N=xi(C||w,E),U,M,P;if((P=n.call(y,new y0("beforestart",{sourceEvent:w,target:b,identifier:x,active:u,x:N[0],y:N[1],dx:0,dy:0,dispatch:k}),T))!=null)return U=P.x-N[0]||0,M=P.y-N[1]||0,function G(R,q,Q){var W=N,B;switch(R){case"start":s[x]=G,B=u++;break;case"end":delete s[x],--u;case"drag":N=xi(Q||q,E),B=u;break}k.call(R,y,new y0(R,{sourceEvent:q,subject:P,target:b,identifier:x,active:B,x:N[0]+U,y:N[1]+M,dx:N[0]-W[0],dy:N[1]-W[1],dispatch:k}),T)}}return b.filter=function(y){return arguments.length?(t=typeof y=="function"?y:mh(!!y),b):t},b.container=function(y){return arguments.length?(e=typeof y=="function"?y:mh(y),b):e},b.subject=function(y){return arguments.length?(n=typeof y=="function"?y:mh(y),b):n},b.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:mh(!!y),b):r},b.on=function(){var y=o.on.apply(o,arguments);return y===o?b:y},b.clickDistance=function(y){return arguments.length?(_=(y=+y)*y,b):Math.sqrt(_)},b}function Nv(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function v2(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Md(){}var ad=.7,nm=1/ad,Kl="\\s*([+-]?\\d+)\\s*",od="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ci="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",K4=/^#([0-9a-f]{3,8})$/,X4=new RegExp(`^rgb\\(${Kl},${Kl},${Kl}\\)$`),W4=new RegExp(`^rgb\\(${Ci},${Ci},${Ci}\\)$`),Q4=new RegExp(`^rgba\\(${Kl},${Kl},${Kl},${od}\\)$`),Z4=new RegExp(`^rgba\\(${Ci},${Ci},${Ci},${od}\\)$`),J4=new RegExp(`^hsl\\(${od},${Ci},${Ci}\\)$`),eM=new RegExp(`^hsla\\(${od},${Ci},${Ci},${od}\\)$`),aT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Nv(Md,ld,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:oT,formatHex:oT,formatHex8:tM,formatHsl:nM,formatRgb:lT,toString:lT});function oT(){return this.rgb().formatHex()}function tM(){return this.rgb().formatHex8()}function nM(){return _2(this).formatHsl()}function lT(){return this.rgb().formatRgb()}function ld(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=K4.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?uT(e):n===3?new Wn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ph(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ph(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=X4.exec(t))?new Wn(e[1],e[2],e[3],1):(e=W4.exec(t))?new Wn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Q4.exec(t))?ph(e[1],e[2],e[3],e[4]):(e=Z4.exec(t))?ph(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=J4.exec(t))?fT(e[1],e[2]/100,e[3]/100,1):(e=eM.exec(t))?fT(e[1],e[2]/100,e[3]/100,e[4]):aT.hasOwnProperty(t)?uT(aT[t]):t==="transparent"?new Wn(NaN,NaN,NaN,0):null}function uT(t){return new Wn(t>>16&255,t>>8&255,t&255,1)}function ph(t,e,n,r){return r<=0&&(t=e=n=NaN),new Wn(t,e,n,r)}function rM(t){return t instanceof Md||(t=ld(t)),t?(t=t.rgb(),new Wn(t.r,t.g,t.b,t.opacity)):new Wn}function v0(t,e,n,r){return arguments.length===1?rM(t):new Wn(t,e,n,r??1)}function Wn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Nv(Wn,v0,v2(Md,{brighter(t){return t=t==null?nm:Math.pow(nm,t),new Wn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ad:Math.pow(ad,t),new Wn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Wn(vo(this.r),vo(this.g),vo(this.b),rm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cT,formatHex:cT,formatHex8:iM,formatRgb:dT,toString:dT}));function cT(){return`#${ho(this.r)}${ho(this.g)}${ho(this.b)}`}function iM(){return`#${ho(this.r)}${ho(this.g)}${ho(this.b)}${ho((isNaN(this.opacity)?1:this.opacity)*255)}`}function dT(){const t=rm(this.opacity);return`${t===1?"rgb(":"rgba("}${vo(this.r)}, ${vo(this.g)}, ${vo(this.b)}${t===1?")":`, ${t})`}`}function rm(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function vo(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ho(t){return t=vo(t),(t<16?"0":"")+t.toString(16)}function fT(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Qr(t,e,n,r)}function _2(t){if(t instanceof Qr)return new Qr(t.h,t.s,t.l,t.opacity);if(t instanceof Md||(t=ld(t)),!t)return new Qr;if(t instanceof Qr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),o=Math.max(e,n,r),u=NaN,c=o-s,f=(o+s)/2;return c?(e===o?u=(n-r)/c+(n<r)*6:n===o?u=(r-e)/c+2:u=(e-n)/c+4,c/=f<.5?o+s:2-o-s,u*=60):c=f>0&&f<1?0:u,new Qr(u,c,f,t.opacity)}function sM(t,e,n,r){return arguments.length===1?_2(t):new Qr(t,e,n,r??1)}function Qr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Nv(Qr,sM,v2(Md,{brighter(t){return t=t==null?nm:Math.pow(nm,t),new Qr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ad:Math.pow(ad,t),new Qr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new Wn(ky(t>=240?t-240:t+120,s,r),ky(t,s,r),ky(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new Qr(hT(this.h),gh(this.s),gh(this.l),rm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=rm(this.opacity);return`${t===1?"hsl(":"hsla("}${hT(this.h)}, ${gh(this.s)*100}%, ${gh(this.l)*100}%${t===1?")":`, ${t})`}`}}));function hT(t){return t=(t||0)%360,t<0?t+360:t}function gh(t){return Math.max(0,Math.min(1,t||0))}function ky(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Dv=t=>()=>t;function b2(t,e){return function(n){return t+n*e}}function aM(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function DY(t,e){var n=e-t;return n?b2(t,n>180||n<-180?n-360*Math.round(n/360):n):Dv(isNaN(t)?e:t)}function oM(t){return(t=+t)==1?w2:function(e,n){return n-e?aM(e,n,t):Dv(isNaN(e)?n:e)}}function w2(t,e){var n=e-t;return n?b2(t,n):Dv(isNaN(t)?e:t)}const mT=function t(e){var n=oM(e);function r(s,o){var u=n((s=v0(s)).r,(o=v0(o)).r),c=n(s.g,o.g),f=n(s.b,o.b),h=w2(s.opacity,o.opacity);return function(p){return s.r=u(p),s.g=c(p),s.b=f(p),s.opacity=h(p),s+""}}return r.gamma=t,r}(1);function Zs(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var _0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Iy=new RegExp(_0.source,"g");function lM(t){return function(){return t}}function uM(t){return function(e){return t(e)+""}}function cM(t,e){var n=_0.lastIndex=Iy.lastIndex=0,r,s,o,u=-1,c=[],f=[];for(t=t+"",e=e+"";(r=_0.exec(t))&&(s=Iy.exec(e));)(o=s.index)>n&&(o=e.slice(n,o),c[u]?c[u]+=o:c[++u]=o),(r=r[0])===(s=s[0])?c[u]?c[u]+=s:c[++u]=s:(c[++u]=null,f.push({i:u,x:Zs(r,s)})),n=Iy.lastIndex;return n<e.length&&(o=e.slice(n),c[u]?c[u]+=o:c[++u]=o),c.length<2?f[0]?uM(f[0].x):lM(e):(e=f.length,function(h){for(var p=0,_;p<e;++p)c[(_=f[p]).i]=_.x(h);return c.join("")})}var pT=180/Math.PI,b0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function E2(t,e,n,r,s,o){var u,c,f;return(u=Math.sqrt(t*t+e*e))&&(t/=u,e/=u),(f=t*n+e*r)&&(n-=t*f,r-=e*f),(c=Math.sqrt(n*n+r*r))&&(n/=c,r/=c,f/=c),t*r<e*n&&(t=-t,e=-e,f=-f,u=-u),{translateX:s,translateY:o,rotate:Math.atan2(e,t)*pT,skewX:Math.atan(f)*pT,scaleX:u,scaleY:c}}var yh;function dM(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?b0:E2(e.a,e.b,e.c,e.d,e.e,e.f)}function fM(t){return t==null||(yh||(yh=document.createElementNS("http://www.w3.org/2000/svg","g")),yh.setAttribute("transform",t),!(t=yh.transform.baseVal.consolidate()))?b0:(t=t.matrix,E2(t.a,t.b,t.c,t.d,t.e,t.f))}function T2(t,e,n,r){function s(h){return h.length?h.pop()+" ":""}function o(h,p,_,b,A,O){if(h!==_||p!==b){var V=A.push("translate(",null,e,null,n);O.push({i:V-4,x:Zs(h,_)},{i:V-2,x:Zs(p,b)})}else(_||b)&&A.push("translate("+_+e+b+n)}function u(h,p,_,b){h!==p?(h-p>180?p+=360:p-h>180&&(h+=360),b.push({i:_.push(s(_)+"rotate(",null,r)-2,x:Zs(h,p)})):p&&_.push(s(_)+"rotate("+p+r)}function c(h,p,_,b){h!==p?b.push({i:_.push(s(_)+"skewX(",null,r)-2,x:Zs(h,p)}):p&&_.push(s(_)+"skewX("+p+r)}function f(h,p,_,b,A,O){if(h!==_||p!==b){var V=A.push(s(A)+"scale(",null,",",null,")");O.push({i:V-4,x:Zs(h,_)},{i:V-2,x:Zs(p,b)})}else(_!==1||b!==1)&&A.push(s(A)+"scale("+_+","+b+")")}return function(h,p){var _=[],b=[];return h=t(h),p=t(p),o(h.translateX,h.translateY,p.translateX,p.translateY,_,b),u(h.rotate,p.rotate,_,b),c(h.skewX,p.skewX,_,b),f(h.scaleX,h.scaleY,p.scaleX,p.scaleY,_,b),h=p=null,function(A){for(var O=-1,V=b.length,z;++O<V;)_[(z=b[O]).i]=z.x(A);return _.join("")}}}var hM=T2(dM,"px, ","px)","deg)"),mM=T2(fM,", ",")",")"),pM=1e-12;function gT(t){return((t=Math.exp(t))+1/t)/2}function gM(t){return((t=Math.exp(t))-1/t)/2}function yM(t){return((t=Math.exp(2*t))-1)/(t+1)}const vM=function t(e,n,r){function s(o,u){var c=o[0],f=o[1],h=o[2],p=u[0],_=u[1],b=u[2],A=p-c,O=_-f,V=A*A+O*O,z,j;if(V<pM)j=Math.log(b/h)/e,z=function(T){return[c+T*A,f+T*O,h*Math.exp(e*T*j)]};else{var F=Math.sqrt(V),K=(b*b-h*h+r*V)/(2*h*n*F),y=(b*b-h*h-r*V)/(2*b*n*F),E=Math.log(Math.sqrt(K*K+1)-K),w=Math.log(Math.sqrt(y*y+1)-y);j=(w-E)/e,z=function(T){var x=T*j,C=gT(E),k=h/(n*F)*(C*yM(e*x+E)-gM(E));return[c+k*A,f+k*O,h*C/gT(e*x+E)]}}return z.duration=j*1e3*e/Math.SQRT2,z}return s.rho=function(o){var u=Math.max(.001,+o),c=u*u,f=c*c;return t(u,c,f)},s}(Math.SQRT2,2,4);var iu=0,Vc=0,Rc=0,S2=1e3,im,Lc,sm=0,Eo=0,jm=0,ud=typeof performance=="object"&&performance.now?performance:Date,x2=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Mv(){return Eo||(x2(_M),Eo=ud.now()+jm)}function _M(){Eo=0}function am(){this._call=this._time=this._next=null}am.prototype=A2.prototype={constructor:am,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Mv():+n)+(e==null?0:+e),!this._next&&Lc!==this&&(Lc?Lc._next=this:im=this,Lc=this),this._call=t,this._time=n,w0()},stop:function(){this._call&&(this._call=null,this._time=1/0,w0())}};function A2(t,e,n){var r=new am;return r.restart(t,e,n),r}function bM(){Mv(),++iu;for(var t=im,e;t;)(e=Eo-t._time)>=0&&t._call.call(void 0,e),t=t._next;--iu}function yT(){Eo=(sm=ud.now())+jm,iu=Vc=0;try{bM()}finally{iu=0,EM(),Eo=0}}function wM(){var t=ud.now(),e=t-sm;e>S2&&(jm-=e,sm=t)}function EM(){for(var t,e=im,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:im=n);Lc=t,w0(r)}function w0(t){if(!iu){Vc&&(Vc=clearTimeout(Vc));var e=t-Eo;e>24?(t<1/0&&(Vc=setTimeout(yT,t-ud.now()-jm)),Rc&&(Rc=clearInterval(Rc))):(Rc||(sm=ud.now(),Rc=setInterval(wM,S2)),iu=1,x2(yT))}}function vT(t,e,n){var r=new am;return e=e==null?0:+e,r.restart(s=>{r.stop(),t(s+e)},e,n),r}var TM=Lm("start","end","cancel","interrupt"),SM=[],C2=0,_T=1,E0=2,Vh=3,bT=4,T0=5,Lh=6;function Um(t,e,n,r,s,o){var u=t.__transition;if(!u)t.__transition={};else if(n in u)return;xM(t,n,{name:e,index:r,group:s,on:TM,tween:SM,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:C2})}function Pv(t,e){var n=ii(t,e);if(n.state>C2)throw new Error("too late; already scheduled");return n}function Li(t,e){var n=ii(t,e);if(n.state>Vh)throw new Error("too late; already running");return n}function ii(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function xM(t,e,n){var r=t.__transition,s;r[e]=n,n.timer=A2(o,0,n.time);function o(h){n.state=_T,n.timer.restart(u,n.delay,n.time),n.delay<=h&&u(h-n.delay)}function u(h){var p,_,b,A;if(n.state!==_T)return f();for(p in r)if(A=r[p],A.name===n.name){if(A.state===Vh)return vT(u);A.state===bT?(A.state=Lh,A.timer.stop(),A.on.call("interrupt",t,t.__data__,A.index,A.group),delete r[p]):+p<e&&(A.state=Lh,A.timer.stop(),A.on.call("cancel",t,t.__data__,A.index,A.group),delete r[p])}if(vT(function(){n.state===Vh&&(n.state=bT,n.timer.restart(c,n.delay,n.time),c(h))}),n.state=E0,n.on.call("start",t,t.__data__,n.index,n.group),n.state===E0){for(n.state=Vh,s=new Array(b=n.tween.length),p=0,_=-1;p<b;++p)(A=n.tween[p].value.call(t,t.__data__,n.index,n.group))&&(s[++_]=A);s.length=_+1}}function c(h){for(var p=h<n.duration?n.ease.call(null,h/n.duration):(n.timer.restart(f),n.state=T0,1),_=-1,b=s.length;++_<b;)s[_].call(t,p);n.state===T0&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=Lh,n.timer.stop(),delete r[e];for(var h in r)return;delete t.__transition}}function zh(t,e){var n=t.__transition,r,s,o=!0,u;if(n){e=e==null?null:e+"";for(u in n){if((r=n[u]).name!==e){o=!1;continue}s=r.state>E0&&r.state<T0,r.state=Lh,r.timer.stop(),r.on.call(s?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[u]}o&&delete t.__transition}}function AM(t){return this.each(function(){zh(this,t)})}function CM(t,e){var n,r;return function(){var s=Li(this,t),o=s.tween;if(o!==n){r=n=o;for(var u=0,c=r.length;u<c;++u)if(r[u].name===e){r=r.slice(),r.splice(u,1);break}}s.tween=r}}function RM(t,e,n){var r,s;if(typeof n!="function")throw new Error;return function(){var o=Li(this,t),u=o.tween;if(u!==r){s=(r=u).slice();for(var c={name:e,value:n},f=0,h=s.length;f<h;++f)if(s[f].name===e){s[f]=c;break}f===h&&s.push(c)}o.tween=s}}function kM(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=ii(this.node(),n).tween,s=0,o=r.length,u;s<o;++s)if((u=r[s]).name===t)return u.value;return null}return this.each((e==null?CM:RM)(n,t,e))}function Ov(t,e,n){var r=t._id;return t.each(function(){var s=Li(this,r);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return ii(s,r).value[e]}}function R2(t,e){var n;return(typeof e=="number"?Zs:e instanceof ld?mT:(n=ld(e))?(e=n,mT):cM)(t,e)}function IM(t){return function(){this.removeAttribute(t)}}function NM(t){return function(){this.removeAttributeNS(t.space,t.local)}}function DM(t,e,n){var r,s=n+"",o;return function(){var u=this.getAttribute(t);return u===s?null:u===r?o:o=e(r=u,n)}}function MM(t,e,n){var r,s=n+"",o;return function(){var u=this.getAttributeNS(t.space,t.local);return u===s?null:u===r?o:o=e(r=u,n)}}function PM(t,e,n){var r,s,o;return function(){var u,c=n(this),f;return c==null?void this.removeAttribute(t):(u=this.getAttribute(t),f=c+"",u===f?null:u===r&&f===s?o:(s=f,o=e(r=u,c)))}}function OM(t,e,n){var r,s,o;return function(){var u,c=n(this),f;return c==null?void this.removeAttributeNS(t.space,t.local):(u=this.getAttributeNS(t.space,t.local),f=c+"",u===f?null:u===r&&f===s?o:(s=f,o=e(r=u,c)))}}function VM(t,e){var n=zm(t),r=n==="transform"?mM:R2;return this.attrTween(t,typeof e=="function"?(n.local?OM:PM)(n,r,Ov(this,"attr."+t,e)):e==null?(n.local?NM:IM)(n):(n.local?MM:DM)(n,r,e))}function LM(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function zM(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function jM(t,e){var n,r;function s(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&zM(t,o)),n}return s._value=e,s}function UM(t,e){var n,r;function s(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&LM(t,o)),n}return s._value=e,s}function BM(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=zm(t);return this.tween(n,(r.local?jM:UM)(r,e))}function HM(t,e){return function(){Pv(this,t).delay=+e.apply(this,arguments)}}function FM(t,e){return e=+e,function(){Pv(this,t).delay=e}}function $M(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?HM:FM)(e,t)):ii(this.node(),e).delay}function qM(t,e){return function(){Li(this,t).duration=+e.apply(this,arguments)}}function GM(t,e){return e=+e,function(){Li(this,t).duration=e}}function YM(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?qM:GM)(e,t)):ii(this.node(),e).duration}function KM(t,e){if(typeof e!="function")throw new Error;return function(){Li(this,t).ease=e}}function XM(t){var e=this._id;return arguments.length?this.each(KM(e,t)):ii(this.node(),e).ease}function WM(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Li(this,t).ease=n}}function QM(t){if(typeof t!="function")throw new Error;return this.each(WM(this._id,t))}function ZM(t){typeof t!="function"&&(t=a2(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],u=o.length,c=r[s]=[],f,h=0;h<u;++h)(f=o[h])&&t.call(f,f.__data__,h,o)&&c.push(f);return new ps(r,this._parents,this._name,this._id)}function JM(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,s=n.length,o=Math.min(r,s),u=new Array(r),c=0;c<o;++c)for(var f=e[c],h=n[c],p=f.length,_=u[c]=new Array(p),b,A=0;A<p;++A)(b=f[A]||h[A])&&(_[A]=b);for(;c<r;++c)u[c]=e[c];return new ps(u,this._parents,this._name,this._id)}function eP(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function tP(t,e,n){var r,s,o=eP(e)?Pv:Li;return function(){var u=o(this,t),c=u.on;c!==r&&(s=(r=c).copy()).on(e,n),u.on=s}}function nP(t,e){var n=this._id;return arguments.length<2?ii(this.node(),n).on.on(t):this.each(tP(n,t,e))}function rP(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function iP(){return this.on("end.remove",rP(this._id))}function sP(t){var e=this._name,n=this._id;typeof t!="function"&&(t=kv(t));for(var r=this._groups,s=r.length,o=new Array(s),u=0;u<s;++u)for(var c=r[u],f=c.length,h=o[u]=new Array(f),p,_,b=0;b<f;++b)(p=c[b])&&(_=t.call(p,p.__data__,b,c))&&("__data__"in p&&(_.__data__=p.__data__),h[b]=_,Um(h[b],e,n,b,h,ii(p,n)));return new ps(o,this._parents,e,n)}function aP(t){var e=this._name,n=this._id;typeof t!="function"&&(t=s2(t));for(var r=this._groups,s=r.length,o=[],u=[],c=0;c<s;++c)for(var f=r[c],h=f.length,p,_=0;_<h;++_)if(p=f[_]){for(var b=t.call(p,p.__data__,_,f),A,O=ii(p,n),V=0,z=b.length;V<z;++V)(A=b[V])&&Um(A,e,n,V,b,O);o.push(b),u.push(p)}return new ps(o,u,e,n)}var oP=Dd.prototype.constructor;function lP(){return new oP(this._groups,this._parents)}function uP(t,e){var n,r,s;return function(){var o=ru(this,t),u=(this.style.removeProperty(t),ru(this,t));return o===u?null:o===n&&u===r?s:s=e(n=o,r=u)}}function k2(t){return function(){this.style.removeProperty(t)}}function cP(t,e,n){var r,s=n+"",o;return function(){var u=ru(this,t);return u===s?null:u===r?o:o=e(r=u,n)}}function dP(t,e,n){var r,s,o;return function(){var u=ru(this,t),c=n(this),f=c+"";return c==null&&(f=c=(this.style.removeProperty(t),ru(this,t))),u===f?null:u===r&&f===s?o:(s=f,o=e(r=u,c))}}function fP(t,e){var n,r,s,o="style."+e,u="end."+o,c;return function(){var f=Li(this,t),h=f.on,p=f.value[o]==null?c||(c=k2(e)):void 0;(h!==n||s!==p)&&(r=(n=h).copy()).on(u,s=p),f.on=r}}function hP(t,e,n){var r=(t+="")=="transform"?hM:R2;return e==null?this.styleTween(t,uP(t,r)).on("end.style."+t,k2(t)):typeof e=="function"?this.styleTween(t,dP(t,r,Ov(this,"style."+t,e))).each(fP(this._id,t)):this.styleTween(t,cP(t,r,e),n).on("end.style."+t,null)}function mP(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function pP(t,e,n){var r,s;function o(){var u=e.apply(this,arguments);return u!==s&&(r=(s=u)&&mP(t,u,n)),r}return o._value=e,o}function gP(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,pP(t,e,n??""))}function yP(t){return function(){this.textContent=t}}function vP(t){return function(){var e=t(this);this.textContent=e??""}}function _P(t){return this.tween("text",typeof t=="function"?vP(Ov(this,"text",t)):yP(t==null?"":t+""))}function bP(t){return function(e){this.textContent=t.call(this,e)}}function wP(t){var e,n;function r(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&bP(s)),e}return r._value=t,r}function EP(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,wP(t))}function TP(){for(var t=this._name,e=this._id,n=I2(),r=this._groups,s=r.length,o=0;o<s;++o)for(var u=r[o],c=u.length,f,h=0;h<c;++h)if(f=u[h]){var p=ii(f,e);Um(f,t,n,h,u,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new ps(r,this._parents,t,n)}function SP(){var t,e,n=this,r=n._id,s=n.size();return new Promise(function(o,u){var c={value:u},f={value:function(){--s===0&&o()}};n.each(function(){var h=Li(this,r),p=h.on;p!==t&&(e=(t=p).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(f)),h.on=e}),s===0&&o()})}var xP=0;function ps(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function I2(){return++xP}var us=Dd.prototype;ps.prototype={constructor:ps,select:sP,selectAll:aP,selectChild:us.selectChild,selectChildren:us.selectChildren,filter:ZM,merge:JM,selection:lP,transition:TP,call:us.call,nodes:us.nodes,node:us.node,size:us.size,empty:us.empty,each:us.each,on:nP,attr:VM,attrTween:BM,style:hP,styleTween:gP,text:_P,textTween:EP,remove:iP,tween:kM,delay:$M,duration:YM,ease:XM,easeVarying:QM,end:SP,[Symbol.iterator]:us[Symbol.iterator]};function AP(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var CP={time:null,delay:0,duration:250,ease:AP};function RP(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function kP(t){var e,n;t instanceof ps?(e=t._id,t=t._name):(e=I2(),(n=CP).time=Mv(),t=t==null?null:t+"");for(var r=this._groups,s=r.length,o=0;o<s;++o)for(var u=r[o],c=u.length,f,h=0;h<c;++h)(f=u[h])&&Um(f,t,e,h,u,n||RP(f,e));return new ps(r,this._parents,t,e)}Dd.prototype.interrupt=AM;Dd.prototype.transition=kP;const vh=t=>()=>t;function IP(t,{sourceEvent:e,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function ds(t,e,n){this.k=t,this.x=e,this.y=n}ds.prototype={constructor:ds,scale:function(t){return t===1?this:new ds(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ds(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var la=new ds(1,0,0);ds.prototype;function Ny(t){t.stopImmediatePropagation()}function kc(t){t.preventDefault(),t.stopImmediatePropagation()}function NP(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function DP(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function wT(){return this.__zoom||la}function MP(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function PP(){return navigator.maxTouchPoints||"ontouchstart"in this}function OP(t,e,n){var r=t.invertX(e[0][0])-n[0][0],s=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],u=t.invertY(e[1][1])-n[1][1];return t.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),u>o?(o+u)/2:Math.min(0,o)||Math.max(0,u))}function VP(){var t=NP,e=DP,n=OP,r=MP,s=PP,o=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,f=vM,h=Lm("start","zoom","end"),p,_,b,A=500,O=150,V=0,z=10;function j(P){P.property("__zoom",wT).on("wheel.zoom",x,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",k).filter(s).on("touchstart.zoom",N).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}j.transform=function(P,G,R,q){var Q=P.selection?P.selection():P;Q.property("__zoom",wT),P!==Q?E(P,G,R,q):Q.interrupt().each(function(){w(this,arguments).event(q).start().zoom(null,typeof G=="function"?G.apply(this,arguments):G).end()})},j.scaleBy=function(P,G,R,q){j.scaleTo(P,function(){var Q=this.__zoom.k,W=typeof G=="function"?G.apply(this,arguments):G;return Q*W},R,q)},j.scaleTo=function(P,G,R,q){j.transform(P,function(){var Q=e.apply(this,arguments),W=this.__zoom,B=R==null?y(Q):typeof R=="function"?R.apply(this,arguments):R,X=W.invert(B),te=typeof G=="function"?G.apply(this,arguments):G;return n(K(F(W,te),B,X),Q,u)},R,q)},j.translateBy=function(P,G,R,q){j.transform(P,function(){return n(this.__zoom.translate(typeof G=="function"?G.apply(this,arguments):G,typeof R=="function"?R.apply(this,arguments):R),e.apply(this,arguments),u)},null,q)},j.translateTo=function(P,G,R,q,Q){j.transform(P,function(){var W=e.apply(this,arguments),B=this.__zoom,X=q==null?y(W):typeof q=="function"?q.apply(this,arguments):q;return n(la.translate(X[0],X[1]).scale(B.k).translate(typeof G=="function"?-G.apply(this,arguments):-G,typeof R=="function"?-R.apply(this,arguments):-R),W,u)},q,Q)};function F(P,G){return G=Math.max(o[0],Math.min(o[1],G)),G===P.k?P:new ds(G,P.x,P.y)}function K(P,G,R){var q=G[0]-R[0]*P.k,Q=G[1]-R[1]*P.k;return q===P.x&&Q===P.y?P:new ds(P.k,q,Q)}function y(P){return[(+P[0][0]+ +P[1][0])/2,(+P[0][1]+ +P[1][1])/2]}function E(P,G,R,q){P.on("start.zoom",function(){w(this,arguments).event(q).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).event(q).end()}).tween("zoom",function(){var Q=this,W=arguments,B=w(Q,W).event(q),X=e.apply(Q,W),te=R==null?y(X):typeof R=="function"?R.apply(Q,W):R,J=Math.max(X[1][0]-X[0][0],X[1][1]-X[0][1]),re=Q.__zoom,ce=typeof G=="function"?G.apply(Q,W):G,ue=f(re.invert(te).concat(J/re.k),ce.invert(te).concat(J/ce.k));return function(fe){if(fe===1)fe=ce;else{var pe=ue(fe),we=J/pe[2];fe=new ds(we,te[0]-pe[0]*we,te[1]-pe[1]*we)}B.zoom(null,fe)}})}function w(P,G,R){return!R&&P.__zooming||new T(P,G)}function T(P,G){this.that=P,this.args=G,this.active=0,this.sourceEvent=null,this.extent=e.apply(P,G),this.taps=0}T.prototype={event:function(P){return P&&(this.sourceEvent=P),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(P,G){return this.mouse&&P!=="mouse"&&(this.mouse[1]=G.invert(this.mouse[0])),this.touch0&&P!=="touch"&&(this.touch0[1]=G.invert(this.touch0[0])),this.touch1&&P!=="touch"&&(this.touch1[1]=G.invert(this.touch1[0])),this.that.__zoom=G,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(P){var G=Wr(this.that).datum();h.call(P,this.that,new IP(P,{sourceEvent:this.sourceEvent,target:j,transform:this.that.__zoom,dispatch:h}),G)}};function x(P,...G){if(!t.apply(this,arguments))return;var R=w(this,G).event(P),q=this.__zoom,Q=Math.max(o[0],Math.min(o[1],q.k*Math.pow(2,r.apply(this,arguments)))),W=xi(P);if(R.wheel)(R.mouse[0][0]!==W[0]||R.mouse[0][1]!==W[1])&&(R.mouse[1]=q.invert(R.mouse[0]=W)),clearTimeout(R.wheel);else{if(q.k===Q)return;R.mouse=[W,q.invert(W)],zh(this),R.start()}kc(P),R.wheel=setTimeout(B,O),R.zoom("mouse",n(K(F(q,Q),R.mouse[0],R.mouse[1]),R.extent,u));function B(){R.wheel=null,R.end()}}function C(P,...G){if(b||!t.apply(this,arguments))return;var R=P.currentTarget,q=w(this,G,!0).event(P),Q=Wr(P.view).on("mousemove.zoom",te,!0).on("mouseup.zoom",J,!0),W=xi(P,R),B=P.clientX,X=P.clientY;g2(P.view),Ny(P),q.mouse=[W,this.__zoom.invert(W)],zh(this),q.start();function te(re){if(kc(re),!q.moved){var ce=re.clientX-B,ue=re.clientY-X;q.moved=ce*ce+ue*ue>V}q.event(re).zoom("mouse",n(K(q.that.__zoom,q.mouse[0]=xi(re,R),q.mouse[1]),q.extent,u))}function J(re){Q.on("mousemove.zoom mouseup.zoom",null),y2(re.view,q.moved),kc(re),q.event(re).end()}}function k(P,...G){if(t.apply(this,arguments)){var R=this.__zoom,q=xi(P.changedTouches?P.changedTouches[0]:P,this),Q=R.invert(q),W=R.k*(P.shiftKey?.5:2),B=n(K(F(R,W),q,Q),e.apply(this,G),u);kc(P),c>0?Wr(this).transition().duration(c).call(E,B,q,P):Wr(this).call(j.transform,B,q,P)}}function N(P,...G){if(t.apply(this,arguments)){var R=P.touches,q=R.length,Q=w(this,G,P.changedTouches.length===q).event(P),W,B,X,te;for(Ny(P),B=0;B<q;++B)X=R[B],te=xi(X,this),te=[te,this.__zoom.invert(te),X.identifier],Q.touch0?!Q.touch1&&Q.touch0[2]!==te[2]&&(Q.touch1=te,Q.taps=0):(Q.touch0=te,W=!0,Q.taps=1+!!p);p&&(p=clearTimeout(p)),W&&(Q.taps<2&&(_=te[0],p=setTimeout(function(){p=null},A)),zh(this),Q.start())}}function U(P,...G){if(this.__zooming){var R=w(this,G).event(P),q=P.changedTouches,Q=q.length,W,B,X,te;for(kc(P),W=0;W<Q;++W)B=q[W],X=xi(B,this),R.touch0&&R.touch0[2]===B.identifier?R.touch0[0]=X:R.touch1&&R.touch1[2]===B.identifier&&(R.touch1[0]=X);if(B=R.that.__zoom,R.touch1){var J=R.touch0[0],re=R.touch0[1],ce=R.touch1[0],ue=R.touch1[1],fe=(fe=ce[0]-J[0])*fe+(fe=ce[1]-J[1])*fe,pe=(pe=ue[0]-re[0])*pe+(pe=ue[1]-re[1])*pe;B=F(B,Math.sqrt(fe/pe)),X=[(J[0]+ce[0])/2,(J[1]+ce[1])/2],te=[(re[0]+ue[0])/2,(re[1]+ue[1])/2]}else if(R.touch0)X=R.touch0[0],te=R.touch0[1];else return;R.zoom("touch",n(K(B,X,te),R.extent,u))}}function M(P,...G){if(this.__zooming){var R=w(this,G).event(P),q=P.changedTouches,Q=q.length,W,B;for(Ny(P),b&&clearTimeout(b),b=setTimeout(function(){b=null},A),W=0;W<Q;++W)B=q[W],R.touch0&&R.touch0[2]===B.identifier?delete R.touch0:R.touch1&&R.touch1[2]===B.identifier&&delete R.touch1;if(R.touch1&&!R.touch0&&(R.touch0=R.touch1,delete R.touch1),R.touch0)R.touch0[1]=this.__zoom.invert(R.touch0[0]);else if(R.end(),R.taps===2&&(B=xi(B,this),Math.hypot(_[0]-B[0],_[1]-B[1])<z)){var X=Wr(this).on("dblclick.zoom");X&&X.apply(this,arguments)}}}return j.wheelDelta=function(P){return arguments.length?(r=typeof P=="function"?P:vh(+P),j):r},j.filter=function(P){return arguments.length?(t=typeof P=="function"?P:vh(!!P),j):t},j.touchable=function(P){return arguments.length?(s=typeof P=="function"?P:vh(!!P),j):s},j.extent=function(P){return arguments.length?(e=typeof P=="function"?P:vh([[+P[0][0],+P[0][1]],[+P[1][0],+P[1][1]]]),j):e},j.scaleExtent=function(P){return arguments.length?(o[0]=+P[0],o[1]=+P[1],j):[o[0],o[1]]},j.translateExtent=function(P){return arguments.length?(u[0][0]=+P[0][0],u[1][0]=+P[1][0],u[0][1]=+P[0][1],u[1][1]=+P[1][1],j):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},j.constrain=function(P){return arguments.length?(n=P,j):n},j.duration=function(P){return arguments.length?(c=+P,j):c},j.interpolate=function(P){return arguments.length?(f=P,j):f},j.on=function(){var P=h.on.apply(h,arguments);return P===h?j:P},j.clickDistance=function(P){return arguments.length?(V=(P=+P)*P,j):Math.sqrt(V)},j.tapDistance=function(P){return arguments.length?(z=+P,j):z},j}var N2=n2();const Bm=$.createContext(null),LP=Bm.Provider,gs={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},D2=gs.error001();function Ct(t,e){const n=$.useContext(Bm);if(n===null)throw new Error(D2);return r2(n,t,e)}const hn=()=>{const t=$.useContext(Bm);if(t===null)throw new Error(D2);return $.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},zP=t=>t.userSelectionActive?"none":"all";function M2({position:t,children:e,className:n,style:r,...s}){const o=Ct(zP),u=`${t}`.split("-");return me.createElement("div",{className:Fn(["react-flow__panel",n,...u]),style:{...r,pointerEvents:o},...s},e)}function jP({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:me.createElement(M2,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},me.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const UP=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:o={},labelBgPadding:u=[2,4],labelBgBorderRadius:c=2,children:f,className:h,...p})=>{const _=$.useRef(null),[b,A]=$.useState({x:0,y:0,width:0,height:0}),O=Fn(["react-flow__edge-textwrapper",h]);return $.useEffect(()=>{if(_.current){const V=_.current.getBBox();A({x:V.x,y:V.y,width:V.width,height:V.height})}},[n]),typeof n>"u"||!n?null:me.createElement("g",{transform:`translate(${t-b.width/2} ${e-b.height/2})`,className:O,visibility:b.width?"visible":"hidden",...p},s&&me.createElement("rect",{width:b.width+2*u[0],x:-u[0],y:-u[1],height:b.height+2*u[1],className:"react-flow__edge-textbg",style:o,rx:c,ry:c}),me.createElement("text",{className:"react-flow__edge-text",y:b.height/2,dy:"0.3em",ref:_,style:r},n),f)};var BP=$.memo(UP);const Vv=t=>({width:t.offsetWidth,height:t.offsetHeight}),su=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Lv=(t={x:0,y:0},e)=>({x:su(t.x,e[0][0],e[1][0]),y:su(t.y,e[0][1],e[1][1])}),ET=(t,e,n)=>t<e?su(Math.abs(t-e),1,50)/50:t>n?-su(Math.abs(t-n),1,50)/50:0,P2=(t,e)=>{const n=ET(t.x,35,e.width-35)*20,r=ET(t.y,35,e.height-35)*20;return[n,r]},O2=t=>t.getRootNode?.()||window?.document,HP=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),zv=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),FP=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),TT=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),S0=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},$P=t=>zr(t.width)&&zr(t.height)&&zr(t.x)&&zr(t.y),zr=t=>!isNaN(t)&&isFinite(t),Ot=Symbol.for("internals"),V2=["Enter"," ","Escape"],qP=(t,e)=>{},GP=t=>"nativeEvent"in t;function x0(t){const n=(GP(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const L2=t=>"clientX"in t,ua=(t,e)=>{const n=L2(t),r=n?t.clientX:t.touches?.[0].clientX,s=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:s-(e?.top??0)}},om=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Pd=({id:t,path:e,labelX:n,labelY:r,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:_,markerStart:b,interactionWidth:A=20})=>me.createElement(me.Fragment,null,me.createElement("path",{id:t,style:p,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:_,markerStart:b}),A&&me.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:A,className:"react-flow__edge-interaction"}),s&&zr(n)&&zr(r)?me.createElement(BP,{x:n,y:r,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h}):null);Pd.displayName="BaseEdge";function Ic(t,e,n){return n===void 0?n:r=>{const s=e().edges.find(o=>o.id===t);s&&n(r,{...s})}}function z2({sourceX:t,sourceY:e,targetX:n,targetY:r}){const s=Math.abs(n-t)/2,o=n<t?n+s:n-s,u=Math.abs(r-e)/2,c=r<e?r+u:r-u;return[o,c,s,u]}function j2({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:s,sourceControlY:o,targetControlX:u,targetControlY:c}){const f=t*.125+s*.375+u*.375+n*.125,h=e*.125+o*.375+c*.375+r*.125,p=Math.abs(f-t),_=Math.abs(h-e);return[f,h,p,_]}var ga;(function(t){t.Strict="strict",t.Loose="loose"})(ga||(ga={}));var mo;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(mo||(mo={}));var cd;(function(t){t.Partial="partial",t.Full="full"})(cd||(cd={}));var ea;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(ea||(ea={}));var To;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(To||(To={}));var Ee;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Ee||(Ee={}));function ST({pos:t,x1:e,y1:n,x2:r,y2:s}){return t===Ee.Left||t===Ee.Right?[.5*(e+r),n]:[e,.5*(n+s)]}function U2({sourceX:t,sourceY:e,sourcePosition:n=Ee.Bottom,targetX:r,targetY:s,targetPosition:o=Ee.Top}){const[u,c]=ST({pos:n,x1:t,y1:e,x2:r,y2:s}),[f,h]=ST({pos:o,x1:r,y1:s,x2:t,y2:e}),[p,_,b,A]=j2({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:u,sourceControlY:c,targetControlX:f,targetControlY:h});return[`M${t},${e} C${u},${c} ${f},${h} ${r},${s}`,p,_,b,A]}const jv=$.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=Ee.Bottom,targetPosition:o=Ee.Top,label:u,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:_,style:b,markerEnd:A,markerStart:O,interactionWidth:V})=>{const[z,j,F]=U2({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:o});return me.createElement(Pd,{path:z,labelX:j,labelY:F,label:u,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:_,style:b,markerEnd:A,markerStart:O,interactionWidth:V})});jv.displayName="SimpleBezierEdge";const xT={[Ee.Left]:{x:-1,y:0},[Ee.Right]:{x:1,y:0},[Ee.Top]:{x:0,y:-1},[Ee.Bottom]:{x:0,y:1}},YP=({source:t,sourcePosition:e=Ee.Bottom,target:n})=>e===Ee.Left||e===Ee.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},AT=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function KP({source:t,sourcePosition:e=Ee.Bottom,target:n,targetPosition:r=Ee.Top,center:s,offset:o}){const u=xT[e],c=xT[r],f={x:t.x+u.x*o,y:t.y+u.y*o},h={x:n.x+c.x*o,y:n.y+c.y*o},p=YP({source:f,sourcePosition:e,target:h}),_=p.x!==0?"x":"y",b=p[_];let A=[],O,V;const z={x:0,y:0},j={x:0,y:0},[F,K,y,E]=z2({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(u[_]*c[_]===-1){O=s.x??F,V=s.y??K;const T=[{x:O,y:f.y},{x:O,y:h.y}],x=[{x:f.x,y:V},{x:h.x,y:V}];u[_]===b?A=_==="x"?T:x:A=_==="x"?x:T}else{const T=[{x:f.x,y:h.y}],x=[{x:h.x,y:f.y}];if(_==="x"?A=u.x===b?x:T:A=u.y===b?T:x,e===r){const M=Math.abs(t[_]-n[_]);if(M<=o){const P=Math.min(o-1,o-M);u[_]===b?z[_]=(f[_]>t[_]?-1:1)*P:j[_]=(h[_]>n[_]?-1:1)*P}}if(e!==r){const M=_==="x"?"y":"x",P=u[_]===c[M],G=f[M]>h[M],R=f[M]<h[M];(u[_]===1&&(!P&&G||P&&R)||u[_]!==1&&(!P&&R||P&&G))&&(A=_==="x"?T:x)}const C={x:f.x+z.x,y:f.y+z.y},k={x:h.x+j.x,y:h.y+j.y},N=Math.max(Math.abs(C.x-A[0].x),Math.abs(k.x-A[0].x)),U=Math.max(Math.abs(C.y-A[0].y),Math.abs(k.y-A[0].y));N>=U?(O=(C.x+k.x)/2,V=A[0].y):(O=A[0].x,V=(C.y+k.y)/2)}return[[t,{x:f.x+z.x,y:f.y+z.y},...A,{x:h.x+j.x,y:h.y+j.y},n],O,V,y,E]}function XP(t,e,n,r){const s=Math.min(AT(t,e)/2,AT(e,n)/2,r),{x:o,y:u}=e;if(t.x===o&&o===n.x||t.y===u&&u===n.y)return`L${o} ${u}`;if(t.y===u){const h=t.x<n.x?-1:1,p=t.y<n.y?1:-1;return`L ${o+s*h},${u}Q ${o},${u} ${o},${u+s*p}`}const c=t.x<n.x?1:-1,f=t.y<n.y?-1:1;return`L ${o},${u+s*f}Q ${o},${u} ${o+s*c},${u}`}function A0({sourceX:t,sourceY:e,sourcePosition:n=Ee.Bottom,targetX:r,targetY:s,targetPosition:o=Ee.Top,borderRadius:u=5,centerX:c,centerY:f,offset:h=20}){const[p,_,b,A,O]=KP({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:s},targetPosition:o,center:{x:c,y:f},offset:h});return[p.reduce((z,j,F)=>{let K="";return F>0&&F<p.length-1?K=XP(p[F-1],j,p[F+1],u):K=`${F===0?"M":"L"}${j.x} ${j.y}`,z+=K,z},""),_,b,A,O]}const Hm=$.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:p,sourcePosition:_=Ee.Bottom,targetPosition:b=Ee.Top,markerEnd:A,markerStart:O,pathOptions:V,interactionWidth:z})=>{const[j,F,K]=A0({sourceX:t,sourceY:e,sourcePosition:_,targetX:n,targetY:r,targetPosition:b,borderRadius:V?.borderRadius,offset:V?.offset});return me.createElement(Pd,{path:j,labelX:F,labelY:K,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:A,markerStart:O,interactionWidth:z})});Hm.displayName="SmoothStepEdge";const Uv=$.memo(t=>me.createElement(Hm,{...t,pathOptions:$.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));Uv.displayName="StepEdge";function WP({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[s,o,u,c]=z2({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,s,o,u,c]}const Bv=$.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:_,markerStart:b,interactionWidth:A})=>{const[O,V,z]=WP({sourceX:t,sourceY:e,targetX:n,targetY:r});return me.createElement(Pd,{path:O,labelX:V,labelY:z,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:_,markerStart:b,interactionWidth:A})});Bv.displayName="StraightEdge";function _h(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function CT({pos:t,x1:e,y1:n,x2:r,y2:s,c:o}){switch(t){case Ee.Left:return[e-_h(e-r,o),n];case Ee.Right:return[e+_h(r-e,o),n];case Ee.Top:return[e,n-_h(n-s,o)];case Ee.Bottom:return[e,n+_h(s-n,o)]}}function B2({sourceX:t,sourceY:e,sourcePosition:n=Ee.Bottom,targetX:r,targetY:s,targetPosition:o=Ee.Top,curvature:u=.25}){const[c,f]=CT({pos:n,x1:t,y1:e,x2:r,y2:s,c:u}),[h,p]=CT({pos:o,x1:r,y1:s,x2:t,y2:e,c:u}),[_,b,A,O]=j2({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:c,sourceControlY:f,targetControlX:h,targetControlY:p});return[`M${t},${e} C${c},${f} ${h},${p} ${r},${s}`,_,b,A,O]}const lm=$.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=Ee.Bottom,targetPosition:o=Ee.Top,label:u,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:_,style:b,markerEnd:A,markerStart:O,pathOptions:V,interactionWidth:z})=>{const[j,F,K]=B2({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:o,curvature:V?.curvature});return me.createElement(Pd,{path:j,labelX:F,labelY:K,label:u,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:_,style:b,markerEnd:A,markerStart:O,interactionWidth:z})});lm.displayName="BezierEdge";const Hv=$.createContext(null),QP=Hv.Provider;Hv.Consumer;const ZP=()=>$.useContext(Hv),JP=t=>"id"in t&&"source"in t&&"target"in t,e6=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,C0=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,t6=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),n6=(t,e)=>{if(!t.source||!t.target)return e;let n;return JP(t)?n={...t}:n={...t,id:e6(t)},t6(n,e)?e:e.concat(n)},R0=({x:t,y:e},[n,r,s],o,[u,c])=>{const f={x:(t-n)/s,y:(e-r)/s};return o?{x:u*Math.round(f.x/u),y:c*Math.round(f.y/c)}:f},H2=({x:t,y:e},[n,r,s])=>({x:t*s+n,y:e*s+r}),Xl=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],s={x:t.position.x-n,y:t.position.y-r};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:s}},Fv=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,s)=>{const{x:o,y:u}=Xl(s,e).positionAbsolute;return HP(r,zv({x:o,y:u,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return FP(n)},F2=(t,e,[n,r,s]=[0,0,1],o=!1,u=!1,c=[0,0])=>{const f={x:(e.x-n)/s,y:(e.y-r)/s,width:e.width/s,height:e.height/s},h=[];return t.forEach(p=>{const{width:_,height:b,selectable:A=!0,hidden:O=!1}=p;if(u&&!A||O)return!1;const{positionAbsolute:V}=Xl(p,c),z={x:V.x,y:V.y,width:_||0,height:b||0},j=S0(f,z),F=typeof _>"u"||typeof b>"u"||_===null||b===null,K=o&&j>0,y=(_||0)*(b||0);(F||K||j>=y||p.dragging)&&h.push(p)}),h},$2=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},q2=(t,e,n,r,s,o=.1)=>{const u=e/(t.width*(1+o)),c=n/(t.height*(1+o)),f=Math.min(u,c),h=su(f,r,s),p=t.x+t.width/2,_=t.y+t.height/2,b=e/2-p*h,A=n/2-_*h;return{x:b,y:A,zoom:h}},uo=(t,e=0)=>t.transition().duration(e);function RT(t,e,n,r){return(e[n]||[]).reduce((s,o)=>(`${t.id}-${o.id}-${n}`!==r&&s.push({id:o.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+o.x+o.width/2,y:(t.positionAbsolute?.y??0)+o.y+o.height/2}),s),[])}function r6(t,e,n,r,s,o){const{x:u,y:c}=ua(t),h=e.elementsFromPoint(u,c).find(O=>O.classList.contains("react-flow__handle"));if(h){const O=h.getAttribute("data-nodeid");if(O){const V=$v(void 0,h),z=h.getAttribute("data-handleid"),j=o({nodeId:O,id:z,type:V});if(j){const F=s.find(K=>K.nodeId===O&&K.type===V&&K.id===z);return{handle:{id:z,type:V,nodeId:O,x:F?.x||n.x,y:F?.y||n.y},validHandleResult:j}}}}let p=[],_=1/0;if(s.forEach(O=>{const V=Math.sqrt((O.x-n.x)**2+(O.y-n.y)**2);if(V<=r){const z=o(O);V<=_&&(V<_?p=[{handle:O,validHandleResult:z}]:V===_&&p.push({handle:O,validHandleResult:z}),_=V)}}),!p.length)return{handle:null,validHandleResult:G2()};if(p.length===1)return p[0];const b=p.some(({validHandleResult:O})=>O.isValid),A=p.some(({handle:O})=>O.type==="target");return p.find(({handle:O,validHandleResult:V})=>A?O.type==="target":b?V.isValid:!0)||p[0]}const i6={source:null,target:null,sourceHandle:null,targetHandle:null},G2=()=>({handleDomNode:null,isValid:!1,connection:i6,endHandle:null});function Y2(t,e,n,r,s,o,u){const c=s==="target",f=u.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),h={...G2(),handleDomNode:f};if(f){const p=$v(void 0,f),_=f.getAttribute("data-nodeid"),b=f.getAttribute("data-handleid"),A=f.classList.contains("connectable"),O=f.classList.contains("connectableend"),V={source:c?_:n,sourceHandle:c?b:r,target:c?n:_,targetHandle:c?r:b};h.connection=V,A&&O&&(e===ga.Strict?c&&p==="source"||!c&&p==="target":_!==n||b!==r)&&(h.endHandle={nodeId:_,handleId:b,type:p},h.isValid=o(V))}return h}function s6({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((s,o)=>{if(o[Ot]){const{handleBounds:u}=o[Ot];let c=[],f=[];u&&(c=RT(o,u,"source",`${e}-${n}-${r}`),f=RT(o,u,"target",`${e}-${n}-${r}`)),s.push(...c,...f)}return s},[])}function $v(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function Dy(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function a6(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function K2({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:s,getState:o,setState:u,isValidConnection:c,edgeUpdaterType:f,onReconnectEnd:h}){const p=O2(t.target),{connectionMode:_,domNode:b,autoPanOnConnect:A,connectionRadius:O,onConnectStart:V,panBy:z,getNodes:j,cancelConnection:F}=o();let K=0,y;const{x:E,y:w}=ua(t),T=p?.elementFromPoint(E,w),x=$v(f,T),C=b?.getBoundingClientRect();if(!C||!x)return;let k,N=ua(t,C),U=!1,M=null,P=!1,G=null;const R=s6({nodes:j(),nodeId:n,handleId:e,handleType:x}),q=()=>{if(!A)return;const[B,X]=P2(N,C);z({x:B,y:X}),K=requestAnimationFrame(q)};u({connectionPosition:N,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:x,connectionStartHandle:{nodeId:n,handleId:e,type:x},connectionEndHandle:null}),V?.(t,{nodeId:n,handleId:e,handleType:x});function Q(B){const{transform:X}=o();N=ua(B,C);const{handle:te,validHandleResult:J}=r6(B,p,R0(N,X,!1,[1,1]),O,R,re=>Y2(re,_,n,e,s?"target":"source",c,p));if(y=te,U||(q(),U=!0),G=J.handleDomNode,M=J.connection,P=J.isValid,u({connectionPosition:y&&P?H2({x:y.x,y:y.y},X):N,connectionStatus:a6(!!y,P),connectionEndHandle:J.endHandle}),!y&&!P&&!G)return Dy(k);M.source!==M.target&&G&&(Dy(k),k=G,G.classList.add("connecting","react-flow__handle-connecting"),G.classList.toggle("valid",P),G.classList.toggle("react-flow__handle-valid",P))}function W(B){(y||G)&&M&&P&&r?.(M),o().onConnectEnd?.(B),f&&h?.(B),Dy(k),F(),cancelAnimationFrame(K),U=!1,P=!1,M=null,G=null,p.removeEventListener("mousemove",Q),p.removeEventListener("mouseup",W),p.removeEventListener("touchmove",Q),p.removeEventListener("touchend",W)}p.addEventListener("mousemove",Q),p.addEventListener("mouseup",W),p.addEventListener("touchmove",Q),p.addEventListener("touchend",W)}const kT=()=>!0,o6=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),l6=(t,e,n)=>r=>{const{connectionStartHandle:s,connectionEndHandle:o,connectionClickStartHandle:u}=r;return{connecting:s?.nodeId===t&&s?.handleId===e&&s?.type===n||o?.nodeId===t&&o?.handleId===e&&o?.type===n,clickConnecting:u?.nodeId===t&&u?.handleId===e&&u?.type===n}},X2=$.forwardRef(({type:t="source",position:e=Ee.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:o=!0,id:u,onConnect:c,children:f,className:h,onMouseDown:p,onTouchStart:_,...b},A)=>{const O=u||null,V=t==="target",z=hn(),j=ZP(),{connectOnClick:F,noPanClassName:K}=Ct(o6,Dn),{connecting:y,clickConnecting:E}=Ct(l6(j,O,t),Dn);j||z.getState().onError?.("010",gs.error010());const w=C=>{const{defaultEdgeOptions:k,onConnect:N,hasDefaultEdges:U}=z.getState(),M={...k,...C};if(U){const{edges:P,setEdges:G}=z.getState();G(n6(M,P))}N?.(M),c?.(M)},T=C=>{if(!j)return;const k=L2(C);s&&(k&&C.button===0||!k)&&K2({event:C,handleId:O,nodeId:j,onConnect:w,isTarget:V,getState:z.getState,setState:z.setState,isValidConnection:n||z.getState().isValidConnection||kT}),k?p?.(C):_?.(C)},x=C=>{const{onClickConnectStart:k,onClickConnectEnd:N,connectionClickStartHandle:U,connectionMode:M,isValidConnection:P}=z.getState();if(!j||!U&&!s)return;if(!U){k?.(C,{nodeId:j,handleId:O,handleType:t}),z.setState({connectionClickStartHandle:{nodeId:j,type:t,handleId:O}});return}const G=O2(C.target),R=n||P||kT,{connection:q,isValid:Q}=Y2({nodeId:j,id:O,type:t},M,U.nodeId,U.handleId||null,U.type,R,G);Q&&w(q),N?.(C),z.setState({connectionClickStartHandle:null})};return me.createElement("div",{"data-handleid":O,"data-nodeid":j,"data-handlepos":e,"data-id":`${j}-${O}-${t}`,className:Fn(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",K,h,{source:!V,target:V,connectable:r,connectablestart:s,connectableend:o,connecting:E,connectionindicator:r&&(s&&!y||o&&y)}]),onMouseDown:T,onTouchStart:T,onClick:F?x:void 0,ref:A,...b},f)});X2.displayName="Handle";var kn=$.memo(X2);const W2=({data:t,isConnectable:e,targetPosition:n=Ee.Top,sourcePosition:r=Ee.Bottom})=>me.createElement(me.Fragment,null,me.createElement(kn,{type:"target",position:n,isConnectable:e}),t?.label,me.createElement(kn,{type:"source",position:r,isConnectable:e}));W2.displayName="DefaultNode";var k0=$.memo(W2);const Q2=({data:t,isConnectable:e,sourcePosition:n=Ee.Bottom})=>me.createElement(me.Fragment,null,t?.label,me.createElement(kn,{type:"source",position:n,isConnectable:e}));Q2.displayName="InputNode";var Z2=$.memo(Q2);const J2=({data:t,isConnectable:e,targetPosition:n=Ee.Top})=>me.createElement(me.Fragment,null,me.createElement(kn,{type:"target",position:n,isConnectable:e}),t?.label);J2.displayName="OutputNode";var e3=$.memo(J2);const qv=()=>null;qv.displayName="GroupNode";const u6=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),bh=t=>t.id;function c6(t,e){return Dn(t.selectedNodes.map(bh),e.selectedNodes.map(bh))&&Dn(t.selectedEdges.map(bh),e.selectedEdges.map(bh))}const t3=$.memo(({onSelectionChange:t})=>{const e=hn(),{selectedNodes:n,selectedEdges:r}=Ct(u6,c6);return $.useEffect(()=>{const s={nodes:n,edges:r};t?.(s),e.getState().onSelectionChange.forEach(o=>o(s))},[n,r,t]),null});t3.displayName="SelectionListener";const d6=t=>!!t.onSelectionChange;function f6({onSelectionChange:t}){const e=Ct(d6);return t||e?me.createElement(t3,{onSelectionChange:t}):null}const h6=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function Rl(t,e){$.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function qe(t,e,n){$.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const m6=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:s,onConnectStart:o,onConnectEnd:u,onClickConnectStart:c,onClickConnectEnd:f,nodesDraggable:h,nodesConnectable:p,nodesFocusable:_,edgesFocusable:b,edgesUpdatable:A,elevateNodesOnSelect:O,minZoom:V,maxZoom:z,nodeExtent:j,onNodesChange:F,onEdgesChange:K,elementsSelectable:y,connectionMode:E,snapGrid:w,snapToGrid:T,translateExtent:x,connectOnClick:C,defaultEdgeOptions:k,fitView:N,fitViewOptions:U,onNodesDelete:M,onEdgesDelete:P,onNodeDrag:G,onNodeDragStart:R,onNodeDragStop:q,onSelectionDrag:Q,onSelectionDragStart:W,onSelectionDragStop:B,noPanClassName:X,nodeOrigin:te,rfId:J,autoPanOnConnect:re,autoPanOnNodeDrag:ce,onError:ue,connectionRadius:fe,isValidConnection:pe,nodeDragThreshold:we})=>{const{setNodes:Ce,setEdges:Qe,setDefaultNodesAndEdges:Ze,setMinZoom:Ve,setMaxZoom:rt,setTranslateExtent:st,setNodeExtent:Ht,reset:je}=Ct(h6,Dn),Te=hn();return $.useEffect(()=>{const kt=r?.map(Sn=>({...Sn,...k}));return Ze(n,kt),()=>{je()}},[]),qe("defaultEdgeOptions",k,Te.setState),qe("connectionMode",E,Te.setState),qe("onConnect",s,Te.setState),qe("onConnectStart",o,Te.setState),qe("onConnectEnd",u,Te.setState),qe("onClickConnectStart",c,Te.setState),qe("onClickConnectEnd",f,Te.setState),qe("nodesDraggable",h,Te.setState),qe("nodesConnectable",p,Te.setState),qe("nodesFocusable",_,Te.setState),qe("edgesFocusable",b,Te.setState),qe("edgesUpdatable",A,Te.setState),qe("elementsSelectable",y,Te.setState),qe("elevateNodesOnSelect",O,Te.setState),qe("snapToGrid",T,Te.setState),qe("snapGrid",w,Te.setState),qe("onNodesChange",F,Te.setState),qe("onEdgesChange",K,Te.setState),qe("connectOnClick",C,Te.setState),qe("fitViewOnInit",N,Te.setState),qe("fitViewOnInitOptions",U,Te.setState),qe("onNodesDelete",M,Te.setState),qe("onEdgesDelete",P,Te.setState),qe("onNodeDrag",G,Te.setState),qe("onNodeDragStart",R,Te.setState),qe("onNodeDragStop",q,Te.setState),qe("onSelectionDrag",Q,Te.setState),qe("onSelectionDragStart",W,Te.setState),qe("onSelectionDragStop",B,Te.setState),qe("noPanClassName",X,Te.setState),qe("nodeOrigin",te,Te.setState),qe("rfId",J,Te.setState),qe("autoPanOnConnect",re,Te.setState),qe("autoPanOnNodeDrag",ce,Te.setState),qe("onError",ue,Te.setState),qe("connectionRadius",fe,Te.setState),qe("isValidConnection",pe,Te.setState),qe("nodeDragThreshold",we,Te.setState),Rl(t,Ce),Rl(e,Qe),Rl(V,Ve),Rl(z,rt),Rl(x,st),Rl(j,Ht),null},IT={display:"none"},p6={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},n3="react-flow__node-desc",r3="react-flow__edge-desc",g6="react-flow__aria-live",y6=t=>t.ariaLiveMessage;function v6({rfId:t}){const e=Ct(y6);return me.createElement("div",{id:`${g6}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:p6},e)}function _6({rfId:t,disableKeyboardA11y:e}){return me.createElement(me.Fragment,null,me.createElement("div",{id:`${n3}-${t}`,style:IT},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),me.createElement("div",{id:`${r3}-${t}`,style:IT},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&me.createElement(v6,{rfId:t}))}var dd=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=$.useState(!1),s=$.useRef(!1),o=$.useRef(new Set([])),[u,c]=$.useMemo(()=>{if(t!==null){const h=(Array.isArray(t)?t:[t]).filter(_=>typeof _=="string").map(_=>_.split("+")),p=h.reduce((_,b)=>_.concat(...b),[]);return[h,p]}return[[],[]]},[t]);return $.useEffect(()=>{const f=typeof document<"u"?document:null,h=e?.target||f;if(t!==null){const p=A=>{if(s.current=A.ctrlKey||A.metaKey||A.shiftKey,(!s.current||s.current&&!e.actInsideInputWithModifier)&&x0(A))return!1;const V=DT(A.code,c);o.current.add(A[V]),NT(u,o.current,!1)&&(A.preventDefault(),r(!0))},_=A=>{if((!s.current||s.current&&!e.actInsideInputWithModifier)&&x0(A))return!1;const V=DT(A.code,c);NT(u,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(A[V]),A.key==="Meta"&&o.current.clear(),s.current=!1},b=()=>{o.current.clear(),r(!1)};return h?.addEventListener("keydown",p),h?.addEventListener("keyup",_),window.addEventListener("blur",b),()=>{h?.removeEventListener("keydown",p),h?.removeEventListener("keyup",_),window.removeEventListener("blur",b)}}},[t,r]),n};function NT(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(s=>e.has(s)))}function DT(t,e){return e.includes(t)?"code":"key"}function i3(t,e,n,r){const s=t.parentNode||t.parentId;if(!s)return n;const o=e.get(s),u=Xl(o,r);return i3(o,e,{x:(n.x??0)+u.x,y:(n.y??0)+u.y,z:(o[Ot]?.z??0)>(n.z??0)?o[Ot]?.z??0:n.z??0},r)}function s3(t,e,n){t.forEach(r=>{const s=r.parentNode||r.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||n?.[r.id]){const{x:o,y:u,z:c}=i3(r,t,{...r.position,z:r[Ot]?.z??0},e);r.positionAbsolute={x:o,y:u},r[Ot].z=c,n?.[r.id]&&(r[Ot].isParent=!0)}})}function My(t,e,n,r){const s=new Map,o={},u=r?1e3:0;return t.forEach(c=>{const f=(zr(c.zIndex)?c.zIndex:0)+(c.selected?u:0),h=e.get(c.id),p={...c,positionAbsolute:{x:c.position.x,y:c.position.y}},_=c.parentNode||c.parentId;_&&(o[_]=!0);const b=h?.type&&h?.type!==c.type;Object.defineProperty(p,Ot,{enumerable:!1,value:{handleBounds:b?void 0:h?.[Ot]?.handleBounds,z:f}}),s.set(c.id,p)}),s3(s,n,o),s}function a3(t,e={}){const{getNodes:n,width:r,height:s,minZoom:o,maxZoom:u,d3Zoom:c,d3Selection:f,fitViewOnInitDone:h,fitViewOnInit:p,nodeOrigin:_}=t(),b=e.initial&&!h&&p;if(c&&f&&(b||!e.initial)){const O=n().filter(z=>{const j=e.includeHiddenNodes?z.width&&z.height:!z.hidden;return e.nodes?.length?j&&e.nodes.some(F=>F.id===z.id):j}),V=O.every(z=>z.width&&z.height);if(O.length>0&&V){const z=Fv(O,_),{x:j,y:F,zoom:K}=q2(z,r,s,e.minZoom??o,e.maxZoom??u,e.padding??.1),y=la.translate(j,F).scale(K);return typeof e.duration=="number"&&e.duration>0?c.transform(uo(f,e.duration),y):c.transform(f,y),!0}}return!1}function b6(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[Ot]:r[Ot],selected:n.selected})}),new Map(e)}function w6(t,e){return e.map(n=>{const r=t.find(s=>s.id===n.id);return r&&(n.selected=r.selected),n})}function wh({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:s,edges:o,onNodesChange:u,onEdgesChange:c,hasDefaultNodes:f,hasDefaultEdges:h}=n();t?.length&&(f&&r({nodeInternals:b6(t,s)}),u?.(t)),e?.length&&(h&&r({edges:w6(e,o)}),c?.(e))}const kl=()=>{},E6={zoomIn:kl,zoomOut:kl,zoomTo:kl,getZoom:()=>1,setViewport:kl,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:kl,fitBounds:kl,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},T6=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),S6=()=>{const t=hn(),{d3Zoom:e,d3Selection:n}=Ct(T6,Dn);return $.useMemo(()=>n&&e?{zoomIn:s=>e.scaleBy(uo(n,s?.duration),1.2),zoomOut:s=>e.scaleBy(uo(n,s?.duration),1/1.2),zoomTo:(s,o)=>e.scaleTo(uo(n,o?.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,o)=>{const[u,c,f]=t.getState().transform,h=la.translate(s.x??u,s.y??c).scale(s.zoom??f);e.transform(uo(n,o?.duration),h)},getViewport:()=>{const[s,o,u]=t.getState().transform;return{x:s,y:o,zoom:u}},fitView:s=>a3(t.getState,s),setCenter:(s,o,u)=>{const{width:c,height:f,maxZoom:h}=t.getState(),p=typeof u?.zoom<"u"?u.zoom:h,_=c/2-s*p,b=f/2-o*p,A=la.translate(_,b).scale(p);e.transform(uo(n,u?.duration),A)},fitBounds:(s,o)=>{const{width:u,height:c,minZoom:f,maxZoom:h}=t.getState(),{x:p,y:_,zoom:b}=q2(s,u,c,f,h,o?.padding??.1),A=la.translate(p,_).scale(b);e.transform(uo(n,o?.duration),A)},project:s=>{const{transform:o,snapToGrid:u,snapGrid:c}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),R0(s,o,u,c)},screenToFlowPosition:s=>{const{transform:o,snapToGrid:u,snapGrid:c,domNode:f}=t.getState();if(!f)return s;const{x:h,y:p}=f.getBoundingClientRect(),_={x:s.x-h,y:s.y-p};return R0(_,o,u,c)},flowToScreenPosition:s=>{const{transform:o,domNode:u}=t.getState();if(!u)return s;const{x:c,y:f}=u.getBoundingClientRect(),h=H2(s,o);return{x:h.x+c,y:h.y+f}},viewportInitialized:!0}:E6,[e,n])};function Od(){const t=S6(),e=hn(),n=$.useCallback(()=>e.getState().getNodes().map(V=>({...V})),[]),r=$.useCallback(V=>e.getState().nodeInternals.get(V),[]),s=$.useCallback(()=>{const{edges:V=[]}=e.getState();return V.map(z=>({...z}))},[]),o=$.useCallback(V=>{const{edges:z=[]}=e.getState();return z.find(j=>j.id===V)},[]),u=$.useCallback(V=>{const{getNodes:z,setNodes:j,hasDefaultNodes:F,onNodesChange:K}=e.getState(),y=z(),E=typeof V=="function"?V(y):V;if(F)j(E);else if(K){const w=E.length===0?y.map(T=>({type:"remove",id:T.id})):E.map(T=>({item:T,type:"reset"}));K(w)}},[]),c=$.useCallback(V=>{const{edges:z=[],setEdges:j,hasDefaultEdges:F,onEdgesChange:K}=e.getState(),y=typeof V=="function"?V(z):V;if(F)j(y);else if(K){const E=y.length===0?z.map(w=>({type:"remove",id:w.id})):y.map(w=>({item:w,type:"reset"}));K(E)}},[]),f=$.useCallback(V=>{const z=Array.isArray(V)?V:[V],{getNodes:j,setNodes:F,hasDefaultNodes:K,onNodesChange:y}=e.getState();if(K){const w=[...j(),...z];F(w)}else if(y){const E=z.map(w=>({item:w,type:"add"}));y(E)}},[]),h=$.useCallback(V=>{const z=Array.isArray(V)?V:[V],{edges:j=[],setEdges:F,hasDefaultEdges:K,onEdgesChange:y}=e.getState();if(K)F([...j,...z]);else if(y){const E=z.map(w=>({item:w,type:"add"}));y(E)}},[]),p=$.useCallback(()=>{const{getNodes:V,edges:z=[],transform:j}=e.getState(),[F,K,y]=j;return{nodes:V().map(E=>({...E})),edges:z.map(E=>({...E})),viewport:{x:F,y:K,zoom:y}}},[]),_=$.useCallback(({nodes:V,edges:z})=>{const{nodeInternals:j,getNodes:F,edges:K,hasDefaultNodes:y,hasDefaultEdges:E,onNodesDelete:w,onEdgesDelete:T,onNodesChange:x,onEdgesChange:C}=e.getState(),k=(V||[]).map(G=>G.id),N=(z||[]).map(G=>G.id),U=F().reduce((G,R)=>{const q=R.parentNode||R.parentId,Q=!k.includes(R.id)&&q&&G.find(B=>B.id===q);return(typeof R.deletable=="boolean"?R.deletable:!0)&&(k.includes(R.id)||Q)&&G.push(R),G},[]),M=K.filter(G=>typeof G.deletable=="boolean"?G.deletable:!0),P=M.filter(G=>N.includes(G.id));if(U||P){const G=$2(U,M),R=[...P,...G],q=R.reduce((Q,W)=>(Q.includes(W.id)||Q.push(W.id),Q),[]);if((E||y)&&(E&&e.setState({edges:K.filter(Q=>!q.includes(Q.id))}),y&&(U.forEach(Q=>{j.delete(Q.id)}),e.setState({nodeInternals:new Map(j)}))),q.length>0&&(T?.(R),C&&C(q.map(Q=>({id:Q,type:"remove"})))),U.length>0&&(w?.(U),x)){const Q=U.map(W=>({id:W.id,type:"remove"}));x(Q)}}},[]),b=$.useCallback(V=>{const z=$P(V),j=z?null:e.getState().nodeInternals.get(V.id);return!z&&!j?[null,null,z]:[z?V:TT(j),j,z]},[]),A=$.useCallback((V,z=!0,j)=>{const[F,K,y]=b(V);return F?(j||e.getState().getNodes()).filter(E=>{if(!y&&(E.id===K.id||!E.positionAbsolute))return!1;const w=TT(E),T=S0(w,F);return z&&T>0||T>=F.width*F.height}):[]},[]),O=$.useCallback((V,z,j=!0)=>{const[F]=b(V);if(!F)return!1;const K=S0(F,z);return j&&K>0||K>=F.width*F.height},[]);return $.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:s,getEdge:o,setNodes:u,setEdges:c,addNodes:f,addEdges:h,toObject:p,deleteElements:_,getIntersectingNodes:A,isNodeIntersecting:O}),[t,n,r,s,o,u,c,f,h,p,_,A,O])}const x6={actInsideInputWithModifier:!1};var A6=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=hn(),{deleteElements:r}=Od(),s=dd(t,x6),o=dd(e);$.useEffect(()=>{if(s){const{edges:u,getNodes:c}=n.getState(),f=c().filter(p=>p.selected),h=u.filter(p=>p.selected);r({nodes:f,edges:h}),n.setState({nodesSelectionActive:!1})}},[s]),$.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])};function C6(t){const e=hn();$.useEffect(()=>{let n;const r=()=>{if(!t.current)return;const s=Vv(t.current);(s.height===0||s.width===0)&&e.getState().onError?.("004",gs.error004()),e.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const Gv={position:"absolute",width:"100%",height:"100%",top:0,left:0},R6=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Eh=t=>({x:t.x,y:t.y,zoom:t.k}),Il=(t,e)=>t.target.closest(`.${e}`),MT=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),PT=t=>{const e=t.ctrlKey&&om()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},k6=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),I6=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:o=!0,panOnScroll:u=!1,panOnScrollSpeed:c=.5,panOnScrollMode:f=mo.Free,zoomOnDoubleClick:h=!0,elementsSelectable:p,panOnDrag:_=!0,defaultViewport:b,translateExtent:A,minZoom:O,maxZoom:V,zoomActivationKeyCode:z,preventScrolling:j=!0,children:F,noWheelClassName:K,noPanClassName:y})=>{const E=$.useRef(),w=hn(),T=$.useRef(!1),x=$.useRef(!1),C=$.useRef(null),k=$.useRef({x:0,y:0,zoom:0}),{d3Zoom:N,d3Selection:U,d3ZoomHandler:M,userSelectionActive:P}=Ct(k6,Dn),G=dd(z),R=$.useRef(0),q=$.useRef(!1),Q=$.useRef();return C6(C),$.useEffect(()=>{if(C.current){const W=C.current.getBoundingClientRect(),B=VP().scaleExtent([O,V]).translateExtent(A),X=Wr(C.current).call(B),te=la.translate(b.x,b.y).scale(su(b.zoom,O,V)),J=[[0,0],[W.width,W.height]],re=B.constrain()(te,J,A);B.transform(X,re),B.wheelDelta(PT),w.setState({d3Zoom:B,d3Selection:X,d3ZoomHandler:X.on("wheel.zoom"),transform:[re.x,re.y,re.k],domNode:C.current.closest(".react-flow")})}},[]),$.useEffect(()=>{U&&N&&(u&&!G&&!P?U.on("wheel.zoom",W=>{if(Il(W,K))return!1;W.preventDefault(),W.stopImmediatePropagation();const B=U.property("__zoom").k||1;if(W.ctrlKey&&o){const pe=xi(W),we=PT(W),Ce=B*Math.pow(2,we);N.scaleTo(U,Ce,pe,W);return}const X=W.deltaMode===1?20:1;let te=f===mo.Vertical?0:W.deltaX*X,J=f===mo.Horizontal?0:W.deltaY*X;!om()&&W.shiftKey&&f!==mo.Vertical&&(te=W.deltaY*X,J=0),N.translateBy(U,-(te/B)*c,-(J/B)*c,{internal:!0});const re=Eh(U.property("__zoom")),{onViewportChangeStart:ce,onViewportChange:ue,onViewportChangeEnd:fe}=w.getState();clearTimeout(Q.current),q.current||(q.current=!0,e?.(W,re),ce?.(re)),q.current&&(t?.(W,re),ue?.(re),Q.current=setTimeout(()=>{n?.(W,re),fe?.(re),q.current=!1},150))},{passive:!1}):typeof M<"u"&&U.on("wheel.zoom",function(W,B){if(!j&&W.type==="wheel"&&!W.ctrlKey||Il(W,K))return null;W.preventDefault(),M.call(this,W,B)},{passive:!1}))},[P,u,f,U,N,M,G,o,j,K,e,t,n]),$.useEffect(()=>{N&&N.on("start",W=>{if(!W.sourceEvent||W.sourceEvent.internal)return null;R.current=W.sourceEvent?.button;const{onViewportChangeStart:B}=w.getState(),X=Eh(W.transform);T.current=!0,k.current=X,W.sourceEvent?.type==="mousedown"&&w.setState({paneDragging:!0}),B?.(X),e?.(W.sourceEvent,X)})},[N,e]),$.useEffect(()=>{N&&(P&&!T.current?N.on("zoom",null):P||N.on("zoom",W=>{const{onViewportChange:B}=w.getState();if(w.setState({transform:[W.transform.x,W.transform.y,W.transform.k]}),x.current=!!(r&&MT(_,R.current??0)),(t||B)&&!W.sourceEvent?.internal){const X=Eh(W.transform);B?.(X),t?.(W.sourceEvent,X)}}))},[P,N,t,_,r]),$.useEffect(()=>{N&&N.on("end",W=>{if(!W.sourceEvent||W.sourceEvent.internal)return null;const{onViewportChangeEnd:B}=w.getState();if(T.current=!1,w.setState({paneDragging:!1}),r&&MT(_,R.current??0)&&!x.current&&r(W.sourceEvent),x.current=!1,(n||B)&&R6(k.current,W.transform)){const X=Eh(W.transform);k.current=X,clearTimeout(E.current),E.current=setTimeout(()=>{B?.(X),n?.(W.sourceEvent,X)},u?150:0)}})},[N,u,_,n,r]),$.useEffect(()=>{N&&N.filter(W=>{const B=G||s,X=o&&W.ctrlKey;if((_===!0||Array.isArray(_)&&_.includes(1))&&W.button===1&&W.type==="mousedown"&&(Il(W,"react-flow__node")||Il(W,"react-flow__edge")))return!0;if(!_&&!B&&!u&&!h&&!o||P||!h&&W.type==="dblclick"||Il(W,K)&&W.type==="wheel"||Il(W,y)&&(W.type!=="wheel"||u&&W.type==="wheel"&&!G)||!o&&W.ctrlKey&&W.type==="wheel"||!B&&!u&&!X&&W.type==="wheel"||!_&&(W.type==="mousedown"||W.type==="touchstart")||Array.isArray(_)&&!_.includes(W.button)&&W.type==="mousedown")return!1;const te=Array.isArray(_)&&_.includes(W.button)||!W.button||W.button<=1;return(!W.ctrlKey||W.type==="wheel")&&te})},[P,N,s,o,u,h,_,p,G]),me.createElement("div",{className:"react-flow__renderer",ref:C,style:Gv},F)},N6=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function D6(){const{userSelectionActive:t,userSelectionRect:e}=Ct(N6,Dn);return t&&e?me.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function OT(t,e){const n=e.parentNode||e.parentId,r=t.find(s=>s.id===n);if(r){const s=e.position.x+e.width-r.width,o=e.position.y+e.height-r.height;if(s>0||o>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,s>0&&(r.style.width+=s),o>0&&(r.style.height+=o),e.position.x<0){const u=Math.abs(e.position.x);r.position.x=r.position.x-u,r.style.width+=u,e.position.x=0}if(e.position.y<0){const u=Math.abs(e.position.y);r.position.y=r.position.y-u,r.style.height+=u,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function o3(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,s)=>{const o=t.filter(c=>c.id===s.id);if(o.length===0)return r.push(s),r;const u={...s};for(const c of o)if(c)switch(c.type){case"select":{u.selected=c.selected;break}case"position":{typeof c.position<"u"&&(u.position=c.position),typeof c.positionAbsolute<"u"&&(u.positionAbsolute=c.positionAbsolute),typeof c.dragging<"u"&&(u.dragging=c.dragging),u.expandParent&&OT(r,u);break}case"dimensions":{typeof c.dimensions<"u"&&(u.width=c.dimensions.width,u.height=c.dimensions.height),typeof c.updateStyle<"u"&&(u.style={...u.style||{},...c.dimensions}),typeof c.resizing=="boolean"&&(u.resizing=c.resizing),u.expandParent&&OT(r,u);break}case"remove":return r}return r.push(u),r},n)}function l3(t,e){return o3(t,e)}function M6(t,e){return o3(t,e)}const Js=(t,e)=>({id:t,type:"select",selected:e});function jl(t,e){return t.reduce((n,r)=>{const s=e.includes(r.id);return!r.selected&&s?(r.selected=!0,n.push(Js(r.id,!0))):r.selected&&!s&&(r.selected=!1,n.push(Js(r.id,!1))),n},[])}const Py=(t,e)=>n=>{n.target===e.current&&t?.(n)},P6=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),u3=$.memo(({isSelecting:t,selectionMode:e=cd.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:s,onPaneClick:o,onPaneContextMenu:u,onPaneScroll:c,onPaneMouseEnter:f,onPaneMouseMove:h,onPaneMouseLeave:p,children:_})=>{const b=$.useRef(null),A=hn(),O=$.useRef(0),V=$.useRef(0),z=$.useRef(),{userSelectionActive:j,elementsSelectable:F,dragging:K}=Ct(P6,Dn),y=()=>{A.setState({userSelectionActive:!1,userSelectionRect:null}),O.current=0,V.current=0},E=M=>{o?.(M),A.getState().resetSelectedElements(),A.setState({nodesSelectionActive:!1})},w=M=>{if(Array.isArray(n)&&n?.includes(2)){M.preventDefault();return}u?.(M)},T=c?M=>c(M):void 0,x=M=>{const{resetSelectedElements:P,domNode:G}=A.getState();if(z.current=G?.getBoundingClientRect(),!F||!t||M.button!==0||M.target!==b.current||!z.current)return;const{x:R,y:q}=ua(M,z.current);P(),A.setState({userSelectionRect:{width:0,height:0,startX:R,startY:q,x:R,y:q}}),r?.(M)},C=M=>{const{userSelectionRect:P,nodeInternals:G,edges:R,transform:q,onNodesChange:Q,onEdgesChange:W,nodeOrigin:B,getNodes:X}=A.getState();if(!t||!z.current||!P)return;A.setState({userSelectionActive:!0,nodesSelectionActive:!1});const te=ua(M,z.current),J=P.startX??0,re=P.startY??0,ce={...P,x:te.x<J?te.x:J,y:te.y<re?te.y:re,width:Math.abs(te.x-J),height:Math.abs(te.y-re)},ue=X(),fe=F2(G,ce,q,e===cd.Partial,!0,B),pe=$2(fe,R).map(Ce=>Ce.id),we=fe.map(Ce=>Ce.id);if(O.current!==we.length){O.current=we.length;const Ce=jl(ue,we);Ce.length&&Q?.(Ce)}if(V.current!==pe.length){V.current=pe.length;const Ce=jl(R,pe);Ce.length&&W?.(Ce)}A.setState({userSelectionRect:ce})},k=M=>{if(M.button!==0)return;const{userSelectionRect:P}=A.getState();!j&&P&&M.target===b.current&&E?.(M),A.setState({nodesSelectionActive:O.current>0}),y(),s?.(M)},N=M=>{j&&(A.setState({nodesSelectionActive:O.current>0}),s?.(M)),y()},U=F&&(t||j);return me.createElement("div",{className:Fn(["react-flow__pane",{dragging:K,selection:t}]),onClick:U?void 0:Py(E,b),onContextMenu:Py(w,b),onWheel:Py(T,b),onMouseEnter:U?void 0:f,onMouseDown:U?x:void 0,onMouseMove:U?C:h,onMouseUp:U?k:void 0,onMouseLeave:U?N:p,ref:b,style:Gv},_,me.createElement(D6,null))});u3.displayName="Pane";function c3(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:c3(r,e):!1}function VT(t,e,n){let r=t;do{if(r?.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function O6(t,e,n,r){return Array.from(t.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||s.parentId||!c3(s,t))&&(s.draggable||e&&typeof s.draggable>"u")).map(s=>({id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(s.positionAbsolute?.x??0),y:n.y-(s.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}))}function V6(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function d3(t,e,n,r,s=[0,0],o){const u=V6(t,t.extent||r);let c=u;const f=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(f&&t.width&&t.height){const _=n.get(f),{x:b,y:A}=Xl(_,s).positionAbsolute;c=_&&zr(b)&&zr(A)&&zr(_.width)&&zr(_.height)?[[b+t.width*s[0],A+t.height*s[1]],[b+_.width-t.width+t.width*s[0],A+_.height-t.height+t.height*s[1]]]:c}else o?.("005",gs.error005()),c=u;else if(t.extent&&f&&t.extent!=="parent"){const _=n.get(f),{x:b,y:A}=Xl(_,s).positionAbsolute;c=[[t.extent[0][0]+b,t.extent[0][1]+A],[t.extent[1][0]+b,t.extent[1][1]+A]]}let h={x:0,y:0};if(f){const _=n.get(f);h=Xl(_,s).positionAbsolute}const p=c&&c!=="parent"?Lv(e,c):e;return{position:{x:p.x-h.x,y:p.y-h.y},positionAbsolute:p}}function Oy({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?r.find(s=>s.id===t):r[0],r]}const LT=(t,e,n,r)=>{const s=e.querySelectorAll(t);if(!s||!s.length)return null;const o=Array.from(s),u=e.getBoundingClientRect(),c={x:u.width*r[0],y:u.height*r[1]};return o.map(f=>{const h=f.getBoundingClientRect();return{id:f.getAttribute("data-handleid"),position:f.getAttribute("data-handlepos"),x:(h.left-u.left-c.x)/n,y:(h.top-u.top-c.y)/n,...Vv(f)}})};function Nc(t,e,n){return n===void 0?n:r=>{const s=e().nodeInternals.get(t);s&&n(r,{...s})}}function I0({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:o,multiSelectionActive:u,nodeInternals:c,onError:f}=e.getState(),h=c.get(t);if(!h){f?.("012",gs.error012(t));return}e.setState({nodesSelectionActive:!1}),h.selected?(n||h.selected&&u)&&(o({nodes:[h],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):s([t])}function L6(){const t=hn();return $.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:s,snapToGrid:o}=t.getState(),u=n.touches?n.touches[0].clientX:n.clientX,c=n.touches?n.touches[0].clientY:n.clientY,f={x:(u-r[0])/r[2],y:(c-r[1])/r[2]};return{xSnapped:o?s[0]*Math.round(f.x/s[0]):f.x,ySnapped:o?s[1]*Math.round(f.y/s[1]):f.y,...f}},[])}function Vy(t){return(e,n,r)=>t?.(e,r)}function f3({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:o,selectNodesOnDrag:u}){const c=hn(),[f,h]=$.useState(!1),p=$.useRef([]),_=$.useRef({x:null,y:null}),b=$.useRef(0),A=$.useRef(null),O=$.useRef({x:0,y:0}),V=$.useRef(null),z=$.useRef(!1),j=$.useRef(!1),F=$.useRef(!1),K=L6();return $.useEffect(()=>{if(t?.current){const y=Wr(t.current),E=({x,y:C})=>{const{nodeInternals:k,onNodeDrag:N,onSelectionDrag:U,updateNodePositions:M,nodeExtent:P,snapGrid:G,snapToGrid:R,nodeOrigin:q,onError:Q}=c.getState();_.current={x,y:C};let W=!1,B={x:0,y:0,x2:0,y2:0};if(p.current.length>1&&P){const te=Fv(p.current,q);B=zv(te)}if(p.current=p.current.map(te=>{const J={x:x-te.distance.x,y:C-te.distance.y};R&&(J.x=G[0]*Math.round(J.x/G[0]),J.y=G[1]*Math.round(J.y/G[1]));const re=[[P[0][0],P[0][1]],[P[1][0],P[1][1]]];p.current.length>1&&P&&!te.extent&&(re[0][0]=te.positionAbsolute.x-B.x+P[0][0],re[1][0]=te.positionAbsolute.x+(te.width??0)-B.x2+P[1][0],re[0][1]=te.positionAbsolute.y-B.y+P[0][1],re[1][1]=te.positionAbsolute.y+(te.height??0)-B.y2+P[1][1]);const ce=d3(te,J,k,re,q,Q);return W=W||te.position.x!==ce.position.x||te.position.y!==ce.position.y,te.position=ce.position,te.positionAbsolute=ce.positionAbsolute,te}),!W)return;M(p.current,!0,!0),h(!0);const X=s?N:Vy(U);if(X&&V.current){const[te,J]=Oy({nodeId:s,dragItems:p.current,nodeInternals:k});X(V.current,te,J)}},w=()=>{if(!A.current)return;const[x,C]=P2(O.current,A.current);if(x!==0||C!==0){const{transform:k,panBy:N}=c.getState();_.current.x=(_.current.x??0)-x/k[2],_.current.y=(_.current.y??0)-C/k[2],N({x,y:C})&&E(_.current)}b.current=requestAnimationFrame(w)},T=x=>{const{nodeInternals:C,multiSelectionActive:k,nodesDraggable:N,unselectNodesAndEdges:U,onNodeDragStart:M,onSelectionDragStart:P}=c.getState();j.current=!0;const G=s?M:Vy(P);(!u||!o)&&!k&&s&&(C.get(s)?.selected||U()),s&&o&&u&&I0({id:s,store:c,nodeRef:t});const R=K(x);if(_.current=R,p.current=O6(C,N,R,s),G&&p.current){const[q,Q]=Oy({nodeId:s,dragItems:p.current,nodeInternals:C});G(x.sourceEvent,q,Q)}};if(e)y.on(".drag",null);else{const x=Y4().on("start",C=>{const{domNode:k,nodeDragThreshold:N}=c.getState();N===0&&T(C),F.current=!1;const U=K(C);_.current=U,A.current=k?.getBoundingClientRect()||null,O.current=ua(C.sourceEvent,A.current)}).on("drag",C=>{const k=K(C),{autoPanOnNodeDrag:N,nodeDragThreshold:U}=c.getState();if(C.sourceEvent.type==="touchmove"&&C.sourceEvent.touches.length>1&&(F.current=!0),!F.current){if(!z.current&&j.current&&N&&(z.current=!0,w()),!j.current){const M=k.xSnapped-(_?.current?.x??0),P=k.ySnapped-(_?.current?.y??0);Math.sqrt(M*M+P*P)>U&&T(C)}(_.current.x!==k.xSnapped||_.current.y!==k.ySnapped)&&p.current&&j.current&&(V.current=C.sourceEvent,O.current=ua(C.sourceEvent,A.current),E(k))}}).on("end",C=>{if(!(!j.current||F.current)&&(h(!1),z.current=!1,j.current=!1,cancelAnimationFrame(b.current),p.current)){const{updateNodePositions:k,nodeInternals:N,onNodeDragStop:U,onSelectionDragStop:M}=c.getState(),P=s?U:Vy(M);if(k(p.current,!1,!1),P){const[G,R]=Oy({nodeId:s,dragItems:p.current,nodeInternals:N});P(C.sourceEvent,G,R)}}}).filter(C=>{const k=C.target;return!C.button&&(!n||!VT(k,`.${n}`,t))&&(!r||VT(k,r,t))});return y.call(x),()=>{y.on(".drag",null)}}}},[t,e,n,r,o,c,s,u,K]),f}function h3(){const t=hn();return $.useCallback(n=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:o,getNodes:u,snapToGrid:c,snapGrid:f,onError:h,nodesDraggable:p}=t.getState(),_=u().filter(F=>F.selected&&(F.draggable||p&&typeof F.draggable>"u")),b=c?f[0]:5,A=c?f[1]:5,O=n.isShiftPressed?4:1,V=n.x*b*O,z=n.y*A*O,j=_.map(F=>{if(F.positionAbsolute){const K={x:F.positionAbsolute.x+V,y:F.positionAbsolute.y+z};c&&(K.x=f[0]*Math.round(K.x/f[0]),K.y=f[1]*Math.round(K.y/f[1]));const{positionAbsolute:y,position:E}=d3(F,K,r,s,void 0,h);F.position=E,F.positionAbsolute=y}return F});o(j,!0,!1)},[])}const Wl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Dc=t=>{const e=({id:n,type:r,data:s,xPos:o,yPos:u,xPosOrigin:c,yPosOrigin:f,selected:h,onClick:p,onMouseEnter:_,onMouseMove:b,onMouseLeave:A,onContextMenu:O,onDoubleClick:V,style:z,className:j,isDraggable:F,isSelectable:K,isConnectable:y,isFocusable:E,selectNodesOnDrag:w,sourcePosition:T,targetPosition:x,hidden:C,resizeObserver:k,dragHandle:N,zIndex:U,isParent:M,noDragClassName:P,noPanClassName:G,initialized:R,disableKeyboardA11y:q,ariaLabel:Q,rfId:W,hasHandleBounds:B})=>{const X=hn(),te=$.useRef(null),J=$.useRef(null),re=$.useRef(T),ce=$.useRef(x),ue=$.useRef(r),fe=K||F||p||_||b||A,pe=h3(),we=Nc(n,X.getState,_),Ce=Nc(n,X.getState,b),Qe=Nc(n,X.getState,A),Ze=Nc(n,X.getState,O),Ve=Nc(n,X.getState,V),rt=je=>{const{nodeDragThreshold:Te}=X.getState();if(K&&(!w||!F||Te>0)&&I0({id:n,store:X,nodeRef:te}),p){const kt=X.getState().nodeInternals.get(n);kt&&p(je,{...kt})}},st=je=>{if(!x0(je)&&!q)if(V2.includes(je.key)&&K){const Te=je.key==="Escape";I0({id:n,store:X,unselect:Te,nodeRef:te})}else F&&h&&Object.prototype.hasOwnProperty.call(Wl,je.key)&&(X.setState({ariaLiveMessage:`Moved selected node ${je.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~u}`}),pe({x:Wl[je.key].x,y:Wl[je.key].y,isShiftPressed:je.shiftKey}))};$.useEffect(()=>()=>{J.current&&(k?.unobserve(J.current),J.current=null)},[]),$.useEffect(()=>{if(te.current&&!C){const je=te.current;(!R||!B||J.current!==je)&&(J.current&&k?.unobserve(J.current),k?.observe(je),J.current=je)}},[C,R,B]),$.useEffect(()=>{const je=ue.current!==r,Te=re.current!==T,kt=ce.current!==x;te.current&&(je||Te||kt)&&(je&&(ue.current=r),Te&&(re.current=T),kt&&(ce.current=x),X.getState().updateNodeDimensions([{id:n,nodeElement:te.current,forceUpdate:!0}]))},[n,r,T,x]);const Ht=f3({nodeRef:te,disabled:C||!F,noDragClassName:P,handleSelector:N,nodeId:n,isSelectable:K,selectNodesOnDrag:w});return C?null:me.createElement("div",{className:Fn(["react-flow__node",`react-flow__node-${r}`,{[G]:F},j,{selected:h,selectable:K,parent:M,dragging:Ht}]),ref:te,style:{zIndex:U,transform:`translate(${c}px,${f}px)`,pointerEvents:fe?"all":"none",visibility:R?"visible":"hidden",...z},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:we,onMouseMove:Ce,onMouseLeave:Qe,onContextMenu:Ze,onClick:rt,onDoubleClick:Ve,onKeyDown:E?st:void 0,tabIndex:E?0:void 0,role:E?"button":void 0,"aria-describedby":q?void 0:`${n3}-${W}`,"aria-label":Q},me.createElement(QP,{value:n},me.createElement(t,{id:n,data:s,type:r,xPos:o,yPos:u,selected:h,isConnectable:y,sourcePosition:T,targetPosition:x,dragging:Ht,dragHandle:N,zIndex:U})))};return e.displayName="NodeWrapper",$.memo(e)};const z6=t=>{const e=t.getNodes().filter(n=>n.selected);return{...Fv(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function j6({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=hn(),{width:s,height:o,x:u,y:c,transformString:f,userSelectionActive:h}=Ct(z6,Dn),p=h3(),_=$.useRef(null);if($.useEffect(()=>{n||_.current?.focus({preventScroll:!0})},[n]),f3({nodeRef:_}),h||!s||!o)return null;const b=t?O=>{const V=r.getState().getNodes().filter(z=>z.selected);t(O,V)}:void 0,A=O=>{Object.prototype.hasOwnProperty.call(Wl,O.key)&&p({x:Wl[O.key].x,y:Wl[O.key].y,isShiftPressed:O.shiftKey})};return me.createElement("div",{className:Fn(["react-flow__nodesselection","react-flow__container",e]),style:{transform:f}},me.createElement("div",{ref:_,className:"react-flow__nodesselection-rect",onContextMenu:b,tabIndex:n?void 0:-1,onKeyDown:n?void 0:A,style:{width:s,height:o,top:c,left:u}}))}var U6=$.memo(j6);const B6=t=>t.nodesSelectionActive,m3=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:u,deleteKeyCode:c,onMove:f,onMoveStart:h,onMoveEnd:p,selectionKeyCode:_,selectionOnDrag:b,selectionMode:A,onSelectionStart:O,onSelectionEnd:V,multiSelectionKeyCode:z,panActivationKeyCode:j,zoomActivationKeyCode:F,elementsSelectable:K,zoomOnScroll:y,zoomOnPinch:E,panOnScroll:w,panOnScrollSpeed:T,panOnScrollMode:x,zoomOnDoubleClick:C,panOnDrag:k,defaultViewport:N,translateExtent:U,minZoom:M,maxZoom:P,preventScrolling:G,onSelectionContextMenu:R,noWheelClassName:q,noPanClassName:Q,disableKeyboardA11y:W})=>{const B=Ct(B6),X=dd(_),te=dd(j),J=te||k,re=te||w,ce=X||b&&J!==!0;return A6({deleteKeyCode:c,multiSelectionKeyCode:z}),me.createElement(I6,{onMove:f,onMoveStart:h,onMoveEnd:p,onPaneContextMenu:o,elementsSelectable:K,zoomOnScroll:y,zoomOnPinch:E,panOnScroll:re,panOnScrollSpeed:T,panOnScrollMode:x,zoomOnDoubleClick:C,panOnDrag:!X&&J,defaultViewport:N,translateExtent:U,minZoom:M,maxZoom:P,zoomActivationKeyCode:F,preventScrolling:G,noWheelClassName:q,noPanClassName:Q},me.createElement(u3,{onSelectionStart:O,onSelectionEnd:V,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:u,panOnDrag:J,isSelecting:!!ce,selectionMode:A},t,B&&me.createElement(U6,{onSelectionContextMenu:R,noPanClassName:Q,disableKeyboardA11y:W})))};m3.displayName="FlowRenderer";var H6=$.memo(m3);function F6(t){return Ct($.useCallback(n=>t?F2(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function $6(t){const e={input:Dc(t.input||Z2),default:Dc(t.default||k0),output:Dc(t.output||e3),group:Dc(t.group||qv)},n={},r=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,o)=>(s[o]=Dc(t[o]||k0),s),n);return{...e,...r}}const q6=({x:t,y:e,width:n,height:r,origin:s})=>!n||!r?{x:t,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:e}:{x:t-n*s[0],y:e-r*s[1]},G6=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),p3=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:o,onError:u}=Ct(G6,Dn),c=F6(t.onlyRenderVisibleElements),f=$.useRef(),h=$.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const p=new ResizeObserver(_=>{const b=_.map(A=>({id:A.target.getAttribute("data-id"),nodeElement:A.target,forceUpdate:!0}));o(b)});return f.current=p,p},[]);return $.useEffect(()=>()=>{f?.current?.disconnect()},[]),me.createElement("div",{className:"react-flow__nodes",style:Gv},c.map(p=>{let _=p.type||"default";t.nodeTypes[_]||(u?.("003",gs.error003(_)),_="default");const b=t.nodeTypes[_]||t.nodeTypes.default,A=!!(p.draggable||e&&typeof p.draggable>"u"),O=!!(p.selectable||s&&typeof p.selectable>"u"),V=!!(p.connectable||n&&typeof p.connectable>"u"),z=!!(p.focusable||r&&typeof p.focusable>"u"),j=t.nodeExtent?Lv(p.positionAbsolute,t.nodeExtent):p.positionAbsolute,F=j?.x??0,K=j?.y??0,y=q6({x:F,y:K,width:p.width??0,height:p.height??0,origin:t.nodeOrigin});return me.createElement(b,{key:p.id,id:p.id,className:p.className,style:p.style,type:_,data:p.data,sourcePosition:p.sourcePosition||Ee.Bottom,targetPosition:p.targetPosition||Ee.Top,hidden:p.hidden,xPos:F,yPos:K,xPosOrigin:y.x,yPosOrigin:y.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!p.selected,isDraggable:A,isSelectable:O,isConnectable:V,isFocusable:z,resizeObserver:h,dragHandle:p.dragHandle,zIndex:p[Ot]?.z??0,isParent:!!p[Ot]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!p.width&&!!p.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:p.ariaLabel,hasHandleBounds:!!p[Ot]?.handleBounds})}))};p3.displayName="NodeRenderer";var Y6=$.memo(p3);const K6=(t,e,n)=>n===Ee.Left?t-e:n===Ee.Right?t+e:t,X6=(t,e,n)=>n===Ee.Top?t-e:n===Ee.Bottom?t+e:t,zT="react-flow__edgeupdater",jT=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:o,onMouseOut:u,type:c})=>me.createElement("circle",{onMouseDown:s,onMouseEnter:o,onMouseOut:u,className:Fn([zT,`${zT}-${c}`]),cx:K6(e,r,t),cy:X6(n,r,t),r,stroke:"transparent",fill:"transparent"}),W6=()=>!0;var Nl=t=>{const e=({id:n,className:r,type:s,data:o,onClick:u,onEdgeDoubleClick:c,selected:f,animated:h,label:p,labelStyle:_,labelShowBg:b,labelBgStyle:A,labelBgPadding:O,labelBgBorderRadius:V,style:z,source:j,target:F,sourceX:K,sourceY:y,targetX:E,targetY:w,sourcePosition:T,targetPosition:x,elementsSelectable:C,hidden:k,sourceHandleId:N,targetHandleId:U,onContextMenu:M,onMouseEnter:P,onMouseMove:G,onMouseLeave:R,reconnectRadius:q,onReconnect:Q,onReconnectStart:W,onReconnectEnd:B,markerEnd:X,markerStart:te,rfId:J,ariaLabel:re,isFocusable:ce,isReconnectable:ue,pathOptions:fe,interactionWidth:pe,disableKeyboardA11y:we})=>{const Ce=$.useRef(null),[Qe,Ze]=$.useState(!1),[Ve,rt]=$.useState(!1),st=hn(),Ht=$.useMemo(()=>`url('#${C0(te,J)}')`,[te,J]),je=$.useMemo(()=>`url('#${C0(X,J)}')`,[X,J]);if(k)return null;const Te=$t=>{const{edges:sn,addSelectedEdges:Vn,unselectNodesAndEdges:Ln,multiSelectionActive:an}=st.getState(),mn=sn.find(zn=>zn.id===n);mn&&(C&&(st.setState({nodesSelectionActive:!1}),mn.selected&&an?(Ln({nodes:[],edges:[mn]}),Ce.current?.blur()):Vn([n])),u&&u($t,mn))},kt=Ic(n,st.getState,c),Sn=Ic(n,st.getState,M),Qt=Ic(n,st.getState,P),Jn=Ic(n,st.getState,G),Pn=Ic(n,st.getState,R),On=($t,sn)=>{if($t.button!==0)return;const{edges:Vn,isValidConnection:Ln}=st.getState(),an=sn?F:j,mn=(sn?U:N)||null,zn=sn?"target":"source",ji=Ln||W6,Ui=sn,Hr=Vn.find(tr=>tr.id===n);rt(!0),W?.($t,Hr,zn);const er=tr=>{rt(!1),B?.(tr,Hr,zn)};K2({event:$t,handleId:mn,nodeId:an,onConnect:tr=>Q?.(Hr,tr),isTarget:Ui,getState:st.getState,setState:st.setState,isValidConnection:ji,edgeUpdaterType:zn,onReconnectEnd:er})},Br=$t=>On($t,!0),ot=$t=>On($t,!1),Ge=()=>Ze(!0),Ft=()=>Ze(!1),Tt=!C&&!u,si=$t=>{if(!we&&V2.includes($t.key)&&C){const{unselectNodesAndEdges:sn,addSelectedEdges:Vn,edges:Ln}=st.getState();$t.key==="Escape"?(Ce.current?.blur(),sn({edges:[Ln.find(mn=>mn.id===n)]})):Vn([n])}};return me.createElement("g",{className:Fn(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:f,animated:h,inactive:Tt,updating:Qe}]),onClick:Te,onDoubleClick:kt,onContextMenu:Sn,onMouseEnter:Qt,onMouseMove:Jn,onMouseLeave:Pn,onKeyDown:ce?si:void 0,tabIndex:ce?0:void 0,role:ce?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":re===null?void 0:re||`Edge from ${j} to ${F}`,"aria-describedby":ce?`${r3}-${J}`:void 0,ref:Ce},!Ve&&me.createElement(t,{id:n,source:j,target:F,selected:f,animated:h,label:p,labelStyle:_,labelShowBg:b,labelBgStyle:A,labelBgPadding:O,labelBgBorderRadius:V,data:o,style:z,sourceX:K,sourceY:y,targetX:E,targetY:w,sourcePosition:T,targetPosition:x,sourceHandleId:N,targetHandleId:U,markerStart:Ht,markerEnd:je,pathOptions:fe,interactionWidth:pe}),ue&&me.createElement(me.Fragment,null,(ue==="source"||ue===!0)&&me.createElement(jT,{position:T,centerX:K,centerY:y,radius:q,onMouseDown:Br,onMouseEnter:Ge,onMouseOut:Ft,type:"source"}),(ue==="target"||ue===!0)&&me.createElement(jT,{position:x,centerX:E,centerY:w,radius:q,onMouseDown:ot,onMouseEnter:Ge,onMouseOut:Ft,type:"target"})))};return e.displayName="EdgeWrapper",$.memo(e)};function Q6(t){const e={default:Nl(t.default||lm),straight:Nl(t.bezier||Bv),step:Nl(t.step||Uv),smoothstep:Nl(t.step||Hm),simplebezier:Nl(t.simplebezier||jv)},n={},r=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,o)=>(s[o]=Nl(t[o]||lm),s),n);return{...e,...r}}function UT(t,e,n=null){const r=(n?.x||0)+e.x,s=(n?.y||0)+e.y,o=n?.width||e.width,u=n?.height||e.height;switch(t){case Ee.Top:return{x:r+o/2,y:s};case Ee.Right:return{x:r+o,y:s+u/2};case Ee.Bottom:return{x:r+o/2,y:s+u};case Ee.Left:return{x:r,y:s+u/2}}}function BT(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const Z6=(t,e,n,r,s,o)=>{const u=UT(n,t,e),c=UT(o,r,s);return{sourceX:u.x,sourceY:u.y,targetX:c.x,targetY:c.y}};function J6({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:s,targetHeight:o,width:u,height:c,transform:f}){const h={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+s),y2:Math.max(t.y+r,e.y+o)};h.x===h.x2&&(h.x2+=1),h.y===h.y2&&(h.y2+=1);const p=zv({x:(0-f[0])/f[2],y:(0-f[1])/f[2],width:u/f[2],height:c/f[2]}),_=Math.max(0,Math.min(p.x2,h.x2)-Math.max(p.x,h.x)),b=Math.max(0,Math.min(p.y2,h.y2)-Math.max(p.y,h.y));return Math.ceil(_*b)>0}function HT(t){const e=t?.[Ot]?.handleBounds||null,n=e&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},e,!!n]}const e5=[{level:0,isMaxLevel:!0,edges:[]}];function t5(t,e,n=!1){let r=-1;const s=t.reduce((u,c)=>{const f=zr(c.zIndex);let h=f?c.zIndex:0;if(n){const p=e.get(c.target),_=e.get(c.source),b=c.selected||p?.selected||_?.selected,A=Math.max(_?.[Ot]?.z||0,p?.[Ot]?.z||0,1e3);h=(f?c.zIndex:0)+(b?A:0)}return u[h]?u[h].push(c):u[h]=[c],r=h>r?h:r,u},{}),o=Object.entries(s).map(([u,c])=>{const f=+u;return{edges:c,level:f,isMaxLevel:f===r}});return o.length===0?e5:o}function n5(t,e,n){const r=Ct($.useCallback(s=>t?s.edges.filter(o=>{const u=e.get(o.source),c=e.get(o.target);return u?.width&&u?.height&&c?.width&&c?.height&&J6({sourcePos:u.positionAbsolute||{x:0,y:0},targetPos:c.positionAbsolute||{x:0,y:0},sourceWidth:u.width,sourceHeight:u.height,targetWidth:c.width,targetHeight:c.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,e]));return t5(r,e,n)}const r5=({color:t="none",strokeWidth:e=1})=>me.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),i5=({color:t="none",strokeWidth:e=1})=>me.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),FT={[To.Arrow]:r5,[To.ArrowClosed]:i5};function s5(t){const e=hn();return $.useMemo(()=>Object.prototype.hasOwnProperty.call(FT,t)?FT[t]:(e.getState().onError?.("009",gs.error009(t)),null),[t])}const a5=({id:t,type:e,color:n,width:r=12.5,height:s=12.5,markerUnits:o="strokeWidth",strokeWidth:u,orient:c="auto-start-reverse"})=>{const f=s5(e);return f?me.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:c,refX:"0",refY:"0"},me.createElement(f,{color:n,strokeWidth:u})):null},o5=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((s,o)=>([o.markerStart,o.markerEnd].forEach(u=>{if(u&&typeof u=="object"){const c=C0(u,e);r.includes(c)||(s.push({id:c,color:u.color||t,...u}),r.push(c))}}),s),[]).sort((s,o)=>s.id.localeCompare(o.id))},g3=({defaultColor:t,rfId:e})=>{const n=Ct($.useCallback(o5({defaultColor:t,rfId:e}),[t,e]),(r,s)=>!(r.length!==s.length||r.some((o,u)=>o.id!==s[u].id)));return me.createElement("defs",null,n.map(r=>me.createElement(a5,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};g3.displayName="MarkerDefinitions";var l5=$.memo(g3);const u5=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),y3=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:s,noPanClassName:o,onEdgeContextMenu:u,onEdgeMouseEnter:c,onEdgeMouseMove:f,onEdgeMouseLeave:h,onEdgeClick:p,onEdgeDoubleClick:_,onReconnect:b,onReconnectStart:A,onReconnectEnd:O,reconnectRadius:V,children:z,disableKeyboardA11y:j})=>{const{edgesFocusable:F,edgesUpdatable:K,elementsSelectable:y,width:E,height:w,connectionMode:T,nodeInternals:x,onError:C}=Ct(u5,Dn),k=n5(e,x,n);return E?me.createElement(me.Fragment,null,k.map(({level:N,edges:U,isMaxLevel:M})=>me.createElement("svg",{key:N,style:{zIndex:N},width:E,height:w,className:"react-flow__edges react-flow__container"},M&&me.createElement(l5,{defaultColor:t,rfId:r}),me.createElement("g",null,U.map(P=>{const[G,R,q]=HT(x.get(P.source)),[Q,W,B]=HT(x.get(P.target));if(!q||!B)return null;let X=P.type||"default";s[X]||(C?.("011",gs.error011(X)),X="default");const te=s[X]||s.default,J=T===ga.Strict?W.target:(W.target??[]).concat(W.source??[]),re=BT(R.source,P.sourceHandle),ce=BT(J,P.targetHandle),ue=re?.position||Ee.Bottom,fe=ce?.position||Ee.Top,pe=!!(P.focusable||F&&typeof P.focusable>"u"),we=P.reconnectable||P.updatable,Ce=typeof b<"u"&&(we||K&&typeof we>"u");if(!re||!ce)return C?.("008",gs.error008(re,P)),null;const{sourceX:Qe,sourceY:Ze,targetX:Ve,targetY:rt}=Z6(G,re,ue,Q,ce,fe);return me.createElement(te,{key:P.id,id:P.id,className:Fn([P.className,o]),type:X,data:P.data,selected:!!P.selected,animated:!!P.animated,hidden:!!P.hidden,label:P.label,labelStyle:P.labelStyle,labelShowBg:P.labelShowBg,labelBgStyle:P.labelBgStyle,labelBgPadding:P.labelBgPadding,labelBgBorderRadius:P.labelBgBorderRadius,style:P.style,source:P.source,target:P.target,sourceHandleId:P.sourceHandle,targetHandleId:P.targetHandle,markerEnd:P.markerEnd,markerStart:P.markerStart,sourceX:Qe,sourceY:Ze,targetX:Ve,targetY:rt,sourcePosition:ue,targetPosition:fe,elementsSelectable:y,onContextMenu:u,onMouseEnter:c,onMouseMove:f,onMouseLeave:h,onClick:p,onEdgeDoubleClick:_,onReconnect:b,onReconnectStart:A,onReconnectEnd:O,reconnectRadius:V,rfId:r,ariaLabel:P.ariaLabel,isFocusable:pe,isReconnectable:Ce,pathOptions:"pathOptions"in P?P.pathOptions:void 0,interactionWidth:P.interactionWidth,disableKeyboardA11y:j})})))),z):null};y3.displayName="EdgeRenderer";var c5=$.memo(y3);const d5=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function f5({children:t}){const e=Ct(d5);return me.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function h5(t){const e=Od(),n=$.useRef(!1);$.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const m5={[Ee.Left]:Ee.Right,[Ee.Right]:Ee.Left,[Ee.Top]:Ee.Bottom,[Ee.Bottom]:Ee.Top},v3=({nodeId:t,handleType:e,style:n,type:r=ea.Bezier,CustomComponent:s,connectionStatus:o})=>{const{fromNode:u,handleId:c,toX:f,toY:h,connectionMode:p}=Ct($.useCallback(w=>({fromNode:w.nodeInternals.get(t),handleId:w.connectionHandleId,toX:(w.connectionPosition.x-w.transform[0])/w.transform[2],toY:(w.connectionPosition.y-w.transform[1])/w.transform[2],connectionMode:w.connectionMode}),[t]),Dn),_=u?.[Ot]?.handleBounds;let b=_?.[e];if(p===ga.Loose&&(b=b||_?.[e==="source"?"target":"source"]),!u||!b)return null;const A=c?b.find(w=>w.id===c):b[0],O=A?A.x+A.width/2:(u.width??0)/2,V=A?A.y+A.height/2:u.height??0,z=(u.positionAbsolute?.x??0)+O,j=(u.positionAbsolute?.y??0)+V,F=A?.position,K=F?m5[F]:null;if(!F||!K)return null;if(s)return me.createElement(s,{connectionLineType:r,connectionLineStyle:n,fromNode:u,fromHandle:A,fromX:z,fromY:j,toX:f,toY:h,fromPosition:F,toPosition:K,connectionStatus:o});let y="";const E={sourceX:z,sourceY:j,sourcePosition:F,targetX:f,targetY:h,targetPosition:K};return r===ea.Bezier?[y]=B2(E):r===ea.Step?[y]=A0({...E,borderRadius:0}):r===ea.SmoothStep?[y]=A0(E):r===ea.SimpleBezier?[y]=U2(E):y=`M${z},${j} ${f},${h}`,me.createElement("path",{d:y,fill:"none",className:"react-flow__connection-path",style:n})};v3.displayName="ConnectionLine";const p5=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function g5({containerStyle:t,style:e,type:n,component:r}){const{nodeId:s,handleType:o,nodesConnectable:u,width:c,height:f,connectionStatus:h}=Ct(p5,Dn);return!(s&&o&&c&&u)?null:me.createElement("svg",{style:t,width:c,height:f,className:"react-flow__edges react-flow__connectionline react-flow__container"},me.createElement("g",{className:Fn(["react-flow__connection",h])},me.createElement(v3,{nodeId:s,handleType:o,style:e,type:n,CustomComponent:r,connectionStatus:h})))}function $T(t,e){return $.useRef(null),hn(),$.useMemo(()=>e(t),[t])}const _3=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:s,onInit:o,onNodeClick:u,onEdgeClick:c,onNodeDoubleClick:f,onEdgeDoubleClick:h,onNodeMouseEnter:p,onNodeMouseMove:_,onNodeMouseLeave:b,onNodeContextMenu:A,onSelectionContextMenu:O,onSelectionStart:V,onSelectionEnd:z,connectionLineType:j,connectionLineStyle:F,connectionLineComponent:K,connectionLineContainerStyle:y,selectionKeyCode:E,selectionOnDrag:w,selectionMode:T,multiSelectionKeyCode:x,panActivationKeyCode:C,zoomActivationKeyCode:k,deleteKeyCode:N,onlyRenderVisibleElements:U,elementsSelectable:M,selectNodesOnDrag:P,defaultViewport:G,translateExtent:R,minZoom:q,maxZoom:Q,preventScrolling:W,defaultMarkerColor:B,zoomOnScroll:X,zoomOnPinch:te,panOnScroll:J,panOnScrollSpeed:re,panOnScrollMode:ce,zoomOnDoubleClick:ue,panOnDrag:fe,onPaneClick:pe,onPaneMouseEnter:we,onPaneMouseMove:Ce,onPaneMouseLeave:Qe,onPaneScroll:Ze,onPaneContextMenu:Ve,onEdgeContextMenu:rt,onEdgeMouseEnter:st,onEdgeMouseMove:Ht,onEdgeMouseLeave:je,onReconnect:Te,onReconnectStart:kt,onReconnectEnd:Sn,reconnectRadius:Qt,noDragClassName:Jn,noWheelClassName:Pn,noPanClassName:On,elevateEdgesOnSelect:Br,disableKeyboardA11y:ot,nodeOrigin:Ge,nodeExtent:Ft,rfId:Tt})=>{const si=$T(t,$6),$t=$T(e,Q6);return h5(o),me.createElement(H6,{onPaneClick:pe,onPaneMouseEnter:we,onPaneMouseMove:Ce,onPaneMouseLeave:Qe,onPaneContextMenu:Ve,onPaneScroll:Ze,deleteKeyCode:N,selectionKeyCode:E,selectionOnDrag:w,selectionMode:T,onSelectionStart:V,onSelectionEnd:z,multiSelectionKeyCode:x,panActivationKeyCode:C,zoomActivationKeyCode:k,elementsSelectable:M,onMove:n,onMoveStart:r,onMoveEnd:s,zoomOnScroll:X,zoomOnPinch:te,zoomOnDoubleClick:ue,panOnScroll:J,panOnScrollSpeed:re,panOnScrollMode:ce,panOnDrag:fe,defaultViewport:G,translateExtent:R,minZoom:q,maxZoom:Q,onSelectionContextMenu:O,preventScrolling:W,noDragClassName:Jn,noWheelClassName:Pn,noPanClassName:On,disableKeyboardA11y:ot},me.createElement(f5,null,me.createElement(c5,{edgeTypes:$t,onEdgeClick:c,onEdgeDoubleClick:h,onlyRenderVisibleElements:U,onEdgeContextMenu:rt,onEdgeMouseEnter:st,onEdgeMouseMove:Ht,onEdgeMouseLeave:je,onReconnect:Te,onReconnectStart:kt,onReconnectEnd:Sn,reconnectRadius:Qt,defaultMarkerColor:B,noPanClassName:On,elevateEdgesOnSelect:!!Br,disableKeyboardA11y:ot,rfId:Tt},me.createElement(g5,{style:F,type:j,component:K,containerStyle:y})),me.createElement("div",{className:"react-flow__edgelabel-renderer"}),me.createElement(Y6,{nodeTypes:si,onNodeClick:u,onNodeDoubleClick:f,onNodeMouseEnter:p,onNodeMouseMove:_,onNodeMouseLeave:b,onNodeContextMenu:A,selectNodesOnDrag:P,onlyRenderVisibleElements:U,noPanClassName:On,noDragClassName:Jn,disableKeyboardA11y:ot,nodeOrigin:Ge,nodeExtent:Ft,rfId:Tt})))};_3.displayName="GraphView";var y5=$.memo(_3);const N0=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Xs={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:N0,nodeExtent:N0,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:ga.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:qP,isValidConnection:void 0},v5=()=>sD((t,e)=>({...Xs,setNodes:n=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:o}=e();t({nodeInternals:My(n,r,s,o)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(n,r)=>{const s=typeof n<"u",o=typeof r<"u",u=s?My(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:u,edges:o?r:[],hasDefaultNodes:s,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:o,fitViewOnInitDone:u,fitViewOnInitOptions:c,domNode:f,nodeOrigin:h}=e(),p=f?.querySelector(".react-flow__viewport");if(!p)return;const _=window.getComputedStyle(p),{m22:b}=new window.DOMMatrixReadOnly(_.transform),A=n.reduce((V,z)=>{const j=s.get(z.id);if(j?.hidden)s.set(j.id,{...j,[Ot]:{...j[Ot],handleBounds:void 0}});else if(j){const F=Vv(z.nodeElement);!!(F.width&&F.height&&(j.width!==F.width||j.height!==F.height||z.forceUpdate))&&(s.set(j.id,{...j,[Ot]:{...j[Ot],handleBounds:{source:LT(".source",z.nodeElement,b,h),target:LT(".target",z.nodeElement,b,h)}},...F}),V.push({id:j.id,type:"dimensions",dimensions:F}))}return V},[]);s3(s,h);const O=u||o&&!u&&a3(e,{initial:!0,...c});t({nodeInternals:new Map(s),fitViewOnInitDone:O}),A?.length>0&&r?.(A)},updateNodePositions:(n,r=!0,s=!1)=>{const{triggerNodeChanges:o}=e(),u=n.map(c=>{const f={id:c.id,type:"position",dragging:s};return r&&(f.positionAbsolute=c.positionAbsolute,f.position=c.position),f});o(u)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:o,nodeOrigin:u,getNodes:c,elevateNodesOnSelect:f}=e();if(n?.length){if(o){const h=l3(n,c()),p=My(h,s,u,f);t({nodeInternals:p})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:s,getNodes:o}=e();let u,c=null;r?u=n.map(f=>Js(f,!0)):(u=jl(o(),n),c=jl(s,[])),wh({changedNodes:u,changedEdges:c,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:s,getNodes:o}=e();let u,c=null;r?u=n.map(f=>Js(f,!0)):(u=jl(s,n),c=jl(o(),[])),wh({changedNodes:c,changedEdges:u,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:s,getNodes:o}=e(),u=n||o(),c=r||s,f=u.map(p=>(p.selected=!1,Js(p.id,!1))),h=c.map(p=>Js(p.id,!1));wh({changedNodes:f,changedEdges:h,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:s}=e();r?.scaleExtent([n,s]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:s}=e();r?.scaleExtent([s,n]),t({maxZoom:n})},setTranslateExtent:n=>{e().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),o=r().filter(c=>c.selected).map(c=>Js(c.id,!1)),u=n.filter(c=>c.selected).map(c=>Js(c.id,!1));wh({changedNodes:o,changedEdges:u,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(s=>{s.positionAbsolute=Lv(s.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:s,height:o,d3Zoom:u,d3Selection:c,translateExtent:f}=e();if(!u||!c||!n.x&&!n.y)return!1;const h=la.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),p=[[0,0],[s,o]],_=u?.constrain()(h,p,f);return u.transform(c,_),r[0]!==_.x||r[1]!==_.y||r[2]!==_.k},cancelConnection:()=>t({connectionNodeId:Xs.connectionNodeId,connectionHandleId:Xs.connectionHandleId,connectionHandleType:Xs.connectionHandleType,connectionStatus:Xs.connectionStatus,connectionStartHandle:Xs.connectionStartHandle,connectionEndHandle:Xs.connectionEndHandle}),reset:()=>t({...Xs})}),Object.is),b3=({children:t})=>{const e=$.useRef(null);return e.current||(e.current=v5()),me.createElement(LP,{value:e.current},t)};b3.displayName="ReactFlowProvider";const w3=({children:t})=>$.useContext(Bm)?me.createElement(me.Fragment,null,t):me.createElement(b3,null,t);w3.displayName="ReactFlowWrapper";const _5={input:Z2,default:k0,output:e3,group:qv},b5={default:lm,straight:Bv,step:Uv,smoothstep:Hm,simplebezier:jv},w5=[0,0],E5=[15,15],T5={x:0,y:0,zoom:1},S5={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},E3=$.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:o=_5,edgeTypes:u=b5,onNodeClick:c,onEdgeClick:f,onInit:h,onMove:p,onMoveStart:_,onMoveEnd:b,onConnect:A,onConnectStart:O,onConnectEnd:V,onClickConnectStart:z,onClickConnectEnd:j,onNodeMouseEnter:F,onNodeMouseMove:K,onNodeMouseLeave:y,onNodeContextMenu:E,onNodeDoubleClick:w,onNodeDragStart:T,onNodeDrag:x,onNodeDragStop:C,onNodesDelete:k,onEdgesDelete:N,onSelectionChange:U,onSelectionDragStart:M,onSelectionDrag:P,onSelectionDragStop:G,onSelectionContextMenu:R,onSelectionStart:q,onSelectionEnd:Q,connectionMode:W=ga.Strict,connectionLineType:B=ea.Bezier,connectionLineStyle:X,connectionLineComponent:te,connectionLineContainerStyle:J,deleteKeyCode:re="Backspace",selectionKeyCode:ce="Shift",selectionOnDrag:ue=!1,selectionMode:fe=cd.Full,panActivationKeyCode:pe="Space",multiSelectionKeyCode:we=om()?"Meta":"Control",zoomActivationKeyCode:Ce=om()?"Meta":"Control",snapToGrid:Qe=!1,snapGrid:Ze=E5,onlyRenderVisibleElements:Ve=!1,selectNodesOnDrag:rt=!0,nodesDraggable:st,nodesConnectable:Ht,nodesFocusable:je,nodeOrigin:Te=w5,edgesFocusable:kt,edgesUpdatable:Sn,elementsSelectable:Qt,defaultViewport:Jn=T5,minZoom:Pn=.5,maxZoom:On=2,translateExtent:Br=N0,preventScrolling:ot=!0,nodeExtent:Ge,defaultMarkerColor:Ft="#b1b1b7",zoomOnScroll:Tt=!0,zoomOnPinch:si=!0,panOnScroll:$t=!1,panOnScrollSpeed:sn=.5,panOnScrollMode:Vn=mo.Free,zoomOnDoubleClick:Ln=!0,panOnDrag:an=!0,onPaneClick:mn,onPaneMouseEnter:zn,onPaneMouseMove:ji,onPaneMouseLeave:Ui,onPaneScroll:Hr,onPaneContextMenu:er,children:_r,onEdgeContextMenu:tr,onEdgeDoubleClick:br,onEdgeMouseEnter:Na,onEdgeMouseMove:ai,onEdgeMouseLeave:Ts,onEdgeUpdate:oi,onEdgeUpdateStart:zo,onEdgeUpdateEnd:yt,onReconnect:Lt,onReconnectStart:It,onReconnectEnd:$n,reconnectRadius:Da=10,edgeUpdaterRadius:Cu=10,onNodesChange:li,onEdgesChange:jo,noDragClassName:Bi="nodrag",noWheelClassName:ui="nowheel",noPanClassName:wr="nopan",fitView:Er=!1,fitViewOptions:Tr,connectOnClick:pn=!0,attributionPosition:St,proOptions:Ma,defaultEdgeOptions:Ss,elevateNodesOnSelect:nr=!0,elevateEdgesOnSelect:Fr=!1,disableKeyboardA11y:Pa=!1,autoPanOnConnect:Uo=!0,autoPanOnNodeDrag:Hi=!0,connectionRadius:Bo=20,isValidConnection:ci,onError:Sr,style:Zt,id:di,nodeDragThreshold:Ho,...$r},xs)=>{const fi=di||"1";return me.createElement("div",{...$r,style:{...Zt,...S5},ref:xs,className:Fn(["react-flow",s]),"data-testid":"rf__wrapper",id:di},me.createElement(w3,null,me.createElement(y5,{onInit:h,onMove:p,onMoveStart:_,onMoveEnd:b,onNodeClick:c,onEdgeClick:f,onNodeMouseEnter:F,onNodeMouseMove:K,onNodeMouseLeave:y,onNodeContextMenu:E,onNodeDoubleClick:w,nodeTypes:o,edgeTypes:u,connectionLineType:B,connectionLineStyle:X,connectionLineComponent:te,connectionLineContainerStyle:J,selectionKeyCode:ce,selectionOnDrag:ue,selectionMode:fe,deleteKeyCode:re,multiSelectionKeyCode:we,panActivationKeyCode:pe,zoomActivationKeyCode:Ce,onlyRenderVisibleElements:Ve,selectNodesOnDrag:rt,defaultViewport:Jn,translateExtent:Br,minZoom:Pn,maxZoom:On,preventScrolling:ot,zoomOnScroll:Tt,zoomOnPinch:si,zoomOnDoubleClick:Ln,panOnScroll:$t,panOnScrollSpeed:sn,panOnScrollMode:Vn,panOnDrag:an,onPaneClick:mn,onPaneMouseEnter:zn,onPaneMouseMove:ji,onPaneMouseLeave:Ui,onPaneScroll:Hr,onPaneContextMenu:er,onSelectionContextMenu:R,onSelectionStart:q,onSelectionEnd:Q,onEdgeContextMenu:tr,onEdgeDoubleClick:br,onEdgeMouseEnter:Na,onEdgeMouseMove:ai,onEdgeMouseLeave:Ts,onReconnect:Lt??oi,onReconnectStart:It??zo,onReconnectEnd:$n??yt,reconnectRadius:Da??Cu,defaultMarkerColor:Ft,noDragClassName:Bi,noWheelClassName:ui,noPanClassName:wr,elevateEdgesOnSelect:Fr,rfId:fi,disableKeyboardA11y:Pa,nodeOrigin:Te,nodeExtent:Ge}),me.createElement(m6,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:A,onConnectStart:O,onConnectEnd:V,onClickConnectStart:z,onClickConnectEnd:j,nodesDraggable:st,nodesConnectable:Ht,nodesFocusable:je,edgesFocusable:kt,edgesUpdatable:Sn,elementsSelectable:Qt,elevateNodesOnSelect:nr,minZoom:Pn,maxZoom:On,nodeExtent:Ge,onNodesChange:li,onEdgesChange:jo,snapToGrid:Qe,snapGrid:Ze,connectionMode:W,translateExtent:Br,connectOnClick:pn,defaultEdgeOptions:Ss,fitView:Er,fitViewOptions:Tr,onNodesDelete:k,onEdgesDelete:N,onNodeDragStart:T,onNodeDrag:x,onNodeDragStop:C,onSelectionDrag:P,onSelectionDragStart:M,onSelectionDragStop:G,noPanClassName:wr,nodeOrigin:Te,rfId:fi,autoPanOnConnect:Uo,autoPanOnNodeDrag:Hi,onError:Sr,connectionRadius:Bo,isValidConnection:ci,nodeDragThreshold:Ho}),me.createElement(f6,{onSelectionChange:U}),_r,me.createElement(jP,{proOptions:Ma,position:St}),me.createElement(_6,{rfId:fi,disableKeyboardA11y:Pa})))});E3.displayName="ReactFlow";function T3(t){return e=>{const[n,r]=$.useState(e),s=$.useCallback(o=>r(u=>t(o,u)),[]);return[n,r,s]}}const x5=T3(l3),A5=T3(M6);function C5(){return me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},me.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function R5(){return me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},me.createElement("path",{d:"M0 0h32v4.2H0z"}))}function k5(){return me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},me.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function I5(){return me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},me.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function N5(){return me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},me.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const zc=({children:t,className:e,...n})=>me.createElement("button",{type:"button",className:Fn(["react-flow__controls-button",e]),...n},t);zc.displayName="ControlButton";const D5=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),S3=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:o,onZoomOut:u,onFitView:c,onInteractiveChange:f,className:h,children:p,position:_="bottom-left"})=>{const b=hn(),[A,O]=$.useState(!1),{isInteractive:V,minZoomReached:z,maxZoomReached:j}=Ct(D5,Dn),{zoomIn:F,zoomOut:K,fitView:y}=Od();if($.useEffect(()=>{O(!0)},[]),!A)return null;const E=()=>{F(),o?.()},w=()=>{K(),u?.()},T=()=>{y(s),c?.()},x=()=>{b.setState({nodesDraggable:!V,nodesConnectable:!V,elementsSelectable:!V}),f?.(!V)};return me.createElement(M2,{className:Fn(["react-flow__controls",h]),position:_,style:t,"data-testid":"rf__controls"},e&&me.createElement(me.Fragment,null,me.createElement(zc,{onClick:E,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:j},me.createElement(C5,null)),me.createElement(zc,{onClick:w,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:z},me.createElement(R5,null))),n&&me.createElement(zc,{className:"react-flow__controls-fitview",onClick:T,title:"fit view","aria-label":"fit view"},me.createElement(k5,null)),r&&me.createElement(zc,{className:"react-flow__controls-interactive",onClick:x,title:"toggle interactivity","aria-label":"toggle interactivity"},V?me.createElement(N5,null):me.createElement(I5,null)),p)};S3.displayName="Controls";var M5=$.memo(S3),jr;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(jr||(jr={}));function P5({color:t,dimensions:e,lineWidth:n}){return me.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function O5({color:t,radius:e}){return me.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const V5={[jr.Dots]:"#91919a",[jr.Lines]:"#eee",[jr.Cross]:"#e2e2e2"},L5={[jr.Dots]:1,[jr.Lines]:1,[jr.Cross]:6},z5=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function x3({id:t,variant:e=jr.Dots,gap:n=20,size:r,lineWidth:s=1,offset:o=2,color:u,style:c,className:f}){const h=$.useRef(null),{transform:p,patternId:_}=Ct(z5,Dn),b=u||V5[e],A=r||L5[e],O=e===jr.Dots,V=e===jr.Cross,z=Array.isArray(n)?n:[n,n],j=[z[0]*p[2]||1,z[1]*p[2]||1],F=A*p[2],K=V?[F,F]:j,y=O?[F/o,F/o]:[K[0]/o,K[1]/o];return me.createElement("svg",{className:Fn(["react-flow__background",f]),style:{...c,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:h,"data-testid":"rf__background"},me.createElement("pattern",{id:_+t,x:p[0]%j[0],y:p[1]%j[1],width:j[0],height:j[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${y[0]},-${y[1]})`},O?me.createElement(O5,{color:b,radius:F/o}):me.createElement(P5,{dimensions:K,color:b,lineWidth:s})),me.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${_+t})`}))}x3.displayName="Background";var j5=$.memo(x3);const Fm=$.createContext(null);Fm.displayName="PanelGroupContext";const Pt={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},Yv=10,_o=$.useLayoutEffect,qT=BN.useId,U5=typeof qT=="function"?qT:()=>null;let B5=0;function Kv(t=null){const e=U5(),n=$.useRef(t||e||null);return n.current===null&&(n.current=""+B5++),t??n.current}function A3({children:t,className:e="",collapsedSize:n,collapsible:r,defaultSize:s,forwardedRef:o,id:u,maxSize:c,minSize:f,onCollapse:h,onExpand:p,onResize:_,order:b,style:A,tagName:O="div",...V}){const z=$.useContext(Fm);if(z===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:j,expandPanel:F,getPanelSize:K,getPanelStyle:y,groupId:E,isPanelCollapsed:w,reevaluatePanelConstraints:T,registerPanel:x,resizePanel:C,unregisterPanel:k}=z,N=Kv(u),U=$.useRef({callbacks:{onCollapse:h,onExpand:p,onResize:_},constraints:{collapsedSize:n,collapsible:r,defaultSize:s,maxSize:c,minSize:f},id:N,idIsFromProps:u!==void 0,order:b});$.useRef({didLogMissingDefaultSizeWarning:!1}),_o(()=>{const{callbacks:P,constraints:G}=U.current,R={...G};U.current.id=N,U.current.idIsFromProps=u!==void 0,U.current.order=b,P.onCollapse=h,P.onExpand=p,P.onResize=_,G.collapsedSize=n,G.collapsible=r,G.defaultSize=s,G.maxSize=c,G.minSize=f,(R.collapsedSize!==G.collapsedSize||R.collapsible!==G.collapsible||R.maxSize!==G.maxSize||R.minSize!==G.minSize)&&T(U.current,R)}),_o(()=>{const P=U.current;return x(P),()=>{k(P)}},[b,N,x,k]),$.useImperativeHandle(o,()=>({collapse:()=>{j(U.current)},expand:P=>{F(U.current,P)},getId(){return N},getSize(){return K(U.current)},isCollapsed(){return w(U.current)},isExpanded(){return!w(U.current)},resize:P=>{C(U.current,P)}}),[j,F,K,w,N,C]);const M=y(U.current,s);return $.createElement(O,{...V,children:t,className:e,id:N,style:{...M,...A},[Pt.groupId]:E,[Pt.panel]:"",[Pt.panelCollapsible]:r||void 0,[Pt.panelId]:N,[Pt.panelSize]:parseFloat(""+M.flexGrow).toFixed(1)})}const D0=$.forwardRef((t,e)=>$.createElement(A3,{...t,forwardedRef:e}));A3.displayName="Panel";D0.displayName="forwardRef(Panel)";let M0=null,jh=-1,ta=null;function H5(t,e){if(e){const n=(e&N3)!==0,r=(e&D3)!==0,s=(e&M3)!==0,o=(e&P3)!==0;if(n)return s?"se-resize":o?"ne-resize":"e-resize";if(r)return s?"sw-resize":o?"nw-resize":"w-resize";if(s)return"s-resize";if(o)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function F5(){ta!==null&&(document.head.removeChild(ta),M0=null,ta=null,jh=-1)}function Ly(t,e){var n,r;const s=H5(t,e);if(M0!==s){if(M0=s,ta===null&&(ta=document.createElement("style"),document.head.appendChild(ta)),jh>=0){var o;(o=ta.sheet)===null||o===void 0||o.removeRule(jh)}jh=(n=(r=ta.sheet)===null||r===void 0?void 0:r.insertRule(`*{cursor: ${s} !important;}`))!==null&&n!==void 0?n:-1}}function C3(t){return t.type==="keydown"}function R3(t){return t.type.startsWith("pointer")}function k3(t){return t.type.startsWith("mouse")}function $m(t){if(R3(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(k3(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function $5(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function q5(t,e,n){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function G5(t,e){if(t===e)throw new Error("Cannot compare node with itself");const n={a:KT(t),b:KT(e)};let r;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),e=n.b.pop(),r=t;Be(r,"Stacking order can only be calculated for elements with a common ancestor");const s={a:YT(GT(n.a)),b:YT(GT(n.b))};if(s.a===s.b){const o=r.childNodes,u={a:n.a.at(-1),b:n.b.at(-1)};let c=o.length;for(;c--;){const f=o[c];if(f===u.a)return 1;if(f===u.b)return-1}}return Math.sign(s.a-s.b)}const Y5=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function K5(t){var e;const n=getComputedStyle((e=I3(t))!==null&&e!==void 0?e:t).display;return n==="flex"||n==="inline-flex"}function X5(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||K5(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||Y5.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function GT(t){let e=t.length;for(;e--;){const n=t[e];if(Be(n,"Missing node"),X5(n))return n}return null}function YT(t){return t&&Number(getComputedStyle(t).zIndex)||0}function KT(t){const e=[];for(;t;)e.push(t),t=I3(t);return e}function I3(t){const{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}const N3=1,D3=2,M3=4,P3=8,W5=$5()==="coarse";let Jr=[],Ql=!1,na=new Map,qm=new Map;const fd=new Set;function Q5(t,e,n,r,s){var o;const{ownerDocument:u}=e,c={direction:n,element:e,hitAreaMargins:r,setResizeHandlerState:s},f=(o=na.get(u))!==null&&o!==void 0?o:0;return na.set(u,f+1),fd.add(c),um(),function(){var p;qm.delete(t),fd.delete(c);const _=(p=na.get(u))!==null&&p!==void 0?p:1;if(na.set(u,_-1),um(),_===1&&na.delete(u),Jr.includes(c)){const b=Jr.indexOf(c);b>=0&&Jr.splice(b,1),Wv(),s("up",!0,null)}}}function Z5(t){const{target:e}=t,{x:n,y:r}=$m(t);Ql=!0,Xv({target:e,x:n,y:r}),um(),Jr.length>0&&(cm("down",t),t.preventDefault(),O3(e)||t.stopImmediatePropagation())}function zy(t){const{x:e,y:n}=$m(t);if(Ql&&t.buttons===0&&(Ql=!1,cm("up",t)),!Ql){const{target:r}=t;Xv({target:r,x:e,y:n})}cm("move",t),Wv(),Jr.length>0&&t.preventDefault()}function jy(t){const{target:e}=t,{x:n,y:r}=$m(t);qm.clear(),Ql=!1,Jr.length>0&&(t.preventDefault(),O3(e)||t.stopImmediatePropagation()),cm("up",t),Xv({target:e,x:n,y:r}),Wv(),um()}function O3(t){let e=t;for(;e;){if(e.hasAttribute(Pt.resizeHandle))return!0;e=e.parentElement}return!1}function Xv({target:t,x:e,y:n}){Jr.splice(0);let r=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(r=t),fd.forEach(s=>{const{element:o,hitAreaMargins:u}=s,c=o.getBoundingClientRect(),{bottom:f,left:h,right:p,top:_}=c,b=W5?u.coarse:u.fine;if(e>=h-b&&e<=p+b&&n>=_-b&&n<=f+b){if(r!==null&&document.contains(r)&&o!==r&&!o.contains(r)&&!r.contains(o)&&G5(r,o)>0){let O=r,V=!1;for(;O&&!O.contains(o);){if(q5(O.getBoundingClientRect(),c)){V=!0;break}O=O.parentElement}if(V)return}Jr.push(s)}})}function Uy(t,e){qm.set(t,e)}function Wv(){let t=!1,e=!1;Jr.forEach(r=>{const{direction:s}=r;s==="horizontal"?t=!0:e=!0});let n=0;qm.forEach(r=>{n|=r}),t&&e?Ly("intersection",n):t?Ly("horizontal",n):e?Ly("vertical",n):F5()}let By;function um(){var t;(t=By)===null||t===void 0||t.abort(),By=new AbortController;const e={capture:!0,signal:By.signal};fd.size&&(Ql?(Jr.length>0&&na.forEach((n,r)=>{const{body:s}=r;n>0&&(s.addEventListener("contextmenu",jy,e),s.addEventListener("pointerleave",zy,e),s.addEventListener("pointermove",zy,e))}),na.forEach((n,r)=>{const{body:s}=r;s.addEventListener("pointerup",jy,e),s.addEventListener("pointercancel",jy,e)})):na.forEach((n,r)=>{const{body:s}=r;n>0&&(s.addEventListener("pointerdown",Z5,e),s.addEventListener("pointermove",zy,e))}))}function cm(t,e){fd.forEach(n=>{const{setResizeHandlerState:r}=n,s=Jr.includes(n);r(t,s,e)})}function J5(){const[t,e]=$.useState(0);return $.useCallback(()=>e(n=>n+1),[])}function Be(t,e){if(!t)throw console.error(e),Error(e)}function So(t,e,n=Yv){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function cs(t,e,n=Yv){return So(t,e,n)===0}function dr(t,e,n){return So(t,e,n)===0}function eO(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){const s=t[r],o=e[r];if(!dr(s,o,n))return!1}return!0}function Ul({panelConstraints:t,panelIndex:e,size:n}){const r=t[e];Be(r!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:s=0,collapsible:o,maxSize:u=100,minSize:c=0}=r;if(So(n,c)<0)if(o){const f=(s+c)/2;So(n,f)<0?n=s:n=c}else n=c;return n=Math.min(u,n),n=parseFloat(n.toFixed(Yv)),n}function jc({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:r,prevLayout:s,trigger:o}){if(dr(t,0))return e;const u=[...e],[c,f]=r;Be(c!=null,"Invalid first pivot index"),Be(f!=null,"Invalid second pivot index");let h=0;if(o==="keyboard"){{const _=t<0?f:c,b=n[_];Be(b,`Panel constraints not found for index ${_}`);const{collapsedSize:A=0,collapsible:O,minSize:V=0}=b;if(O){const z=e[_];if(Be(z!=null,`Previous layout not found for panel index ${_}`),dr(z,A)){const j=V-z;So(j,Math.abs(t))>0&&(t=t<0?0-j:j)}}}{const _=t<0?c:f,b=n[_];Be(b,`No panel constraints found for index ${_}`);const{collapsedSize:A=0,collapsible:O,minSize:V=0}=b;if(O){const z=e[_];if(Be(z!=null,`Previous layout not found for panel index ${_}`),dr(z,V)){const j=z-A;So(j,Math.abs(t))>0&&(t=t<0?0-j:j)}}}}{const _=t<0?1:-1;let b=t<0?f:c,A=0;for(;;){const V=e[b];Be(V!=null,`Previous layout not found for panel index ${b}`);const j=Ul({panelConstraints:n,panelIndex:b,size:100})-V;if(A+=j,b+=_,b<0||b>=n.length)break}const O=Math.min(Math.abs(t),Math.abs(A));t=t<0?0-O:O}{let b=t<0?c:f;for(;b>=0&&b<n.length;){const A=Math.abs(t)-Math.abs(h),O=e[b];Be(O!=null,`Previous layout not found for panel index ${b}`);const V=O-A,z=Ul({panelConstraints:n,panelIndex:b,size:V});if(!dr(O,z)&&(h+=O-z,u[b]=z,h.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?b--:b++}}if(eO(s,u))return s;{const _=t<0?f:c,b=e[_];Be(b!=null,`Previous layout not found for panel index ${_}`);const A=b+h,O=Ul({panelConstraints:n,panelIndex:_,size:A});if(u[_]=O,!dr(O,A)){let V=A-O,j=t<0?f:c;for(;j>=0&&j<n.length;){const F=u[j];Be(F!=null,`Previous layout not found for panel index ${j}`);const K=F+V,y=Ul({panelConstraints:n,panelIndex:j,size:K});if(dr(F,y)||(V-=y-F,u[j]=y),dr(V,0))break;t>0?j--:j++}}}const p=u.reduce((_,b)=>b+_,0);return dr(p,100)?u:s}function tO({layout:t,panelsArray:e,pivotIndices:n}){let r=0,s=100,o=0,u=0;const c=n[0];Be(c!=null,"No pivot index found"),e.forEach((_,b)=>{const{constraints:A}=_,{maxSize:O=100,minSize:V=0}=A;b===c?(r=V,s=O):(o+=V,u+=O)});const f=Math.min(s,100-o),h=Math.max(r,100-u),p=t[c];return{valueMax:f,valueMin:h,valueNow:p}}function hd(t,e=document){return Array.from(e.querySelectorAll(`[${Pt.resizeHandleId}][data-panel-group-id="${t}"]`))}function V3(t,e,n=document){const s=hd(t,n).findIndex(o=>o.getAttribute(Pt.resizeHandleId)===e);return s??null}function L3(t,e,n){const r=V3(t,e,n);return r!=null?[r,r+1]:[-1,-1]}function nO(t){return t instanceof HTMLElement?!0:typeof t=="object"&&t!==null&&"tagName"in t&&"getAttribute"in t}function z3(t,e=document){if(nO(e)&&e.dataset.panelGroupId==t)return e;const n=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return n||null}function Gm(t,e=document){const n=e.querySelector(`[${Pt.resizeHandleId}="${t}"]`);return n||null}function rO(t,e,n,r=document){var s,o,u,c;const f=Gm(e,r),h=hd(t,r),p=f?h.indexOf(f):-1,_=(s=(o=n[p])===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:null,b=(u=(c=n[p+1])===null||c===void 0?void 0:c.id)!==null&&u!==void 0?u:null;return[_,b]}function iO({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:r,panelDataArray:s,panelGroupElement:o,setLayout:u}){$.useRef({didWarnAboutMissingResizeHandle:!1}),_o(()=>{if(!o)return;const c=hd(n,o);for(let f=0;f<s.length-1;f++){const{valueMax:h,valueMin:p,valueNow:_}=tO({layout:r,panelsArray:s,pivotIndices:[f,f+1]}),b=c[f];if(b!=null){const A=s[f];Be(A,`No panel data found for index "${f}"`),b.setAttribute("aria-controls",A.id),b.setAttribute("aria-valuemax",""+Math.round(h)),b.setAttribute("aria-valuemin",""+Math.round(p)),b.setAttribute("aria-valuenow",_!=null?""+Math.round(_):"")}}return()=>{c.forEach((f,h)=>{f.removeAttribute("aria-controls"),f.removeAttribute("aria-valuemax"),f.removeAttribute("aria-valuemin"),f.removeAttribute("aria-valuenow")})}},[n,r,s,o]),$.useEffect(()=>{if(!o)return;const c=e.current;Be(c,"Eager values not found");const{panelDataArray:f}=c,h=z3(n,o);Be(h!=null,`No group found for id "${n}"`);const p=hd(n,o);Be(p,`No resize handles found for group id "${n}"`);const _=p.map(b=>{const A=b.getAttribute(Pt.resizeHandleId);Be(A,"Resize handle element has no handle id attribute");const[O,V]=rO(n,A,f,o);if(O==null||V==null)return()=>{};const z=j=>{if(!j.defaultPrevented)switch(j.key){case"Enter":{j.preventDefault();const F=f.findIndex(K=>K.id===O);if(F>=0){const K=f[F];Be(K,`No panel data found for index ${F}`);const y=r[F],{collapsedSize:E=0,collapsible:w,minSize:T=0}=K.constraints;if(y!=null&&w){const x=jc({delta:dr(y,E)?T-E:E-y,initialLayout:r,panelConstraints:f.map(C=>C.constraints),pivotIndices:L3(n,A,o),prevLayout:r,trigger:"keyboard"});r!==x&&u(x)}}break}}};return b.addEventListener("keydown",z),()=>{b.removeEventListener("keydown",z)}});return()=>{_.forEach(b=>b())}},[o,t,e,n,r,s,u])}function XT(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function j3(t,e){const n=t==="horizontal",{x:r,y:s}=$m(e);return n?r:s}function sO(t,e,n,r,s){const o=n==="horizontal",u=Gm(e,s);Be(u,`No resize handle element found for id "${e}"`);const c=u.getAttribute(Pt.groupId);Be(c,"Resize handle element has no group id attribute");let{initialCursorPosition:f}=r;const h=j3(n,t),p=z3(c,s);Be(p,`No group element found for id "${c}"`);const _=p.getBoundingClientRect(),b=o?_.width:_.height;return(h-f)/b*100}function aO(t,e,n,r,s,o){if(C3(t)){const u=n==="horizontal";let c=0;t.shiftKey?c=100:s!=null?c=s:c=10;let f=0;switch(t.key){case"ArrowDown":f=u?0:c;break;case"ArrowLeft":f=u?-c:0;break;case"ArrowRight":f=u?c:0;break;case"ArrowUp":f=u?0:-c;break;case"End":f=100;break;case"Home":f=-100;break}return f}else return r==null?0:sO(t,e,n,r,o)}function oO({panelDataArray:t}){const e=Array(t.length),n=t.map(o=>o.constraints);let r=0,s=100;for(let o=0;o<t.length;o++){const u=n[o];Be(u,`Panel constraints not found for index ${o}`);const{defaultSize:c}=u;c!=null&&(r++,e[o]=c,s-=c)}for(let o=0;o<t.length;o++){const u=n[o];Be(u,`Panel constraints not found for index ${o}`);const{defaultSize:c}=u;if(c!=null)continue;const f=t.length-r,h=s/f;r++,e[o]=h,s-=h}return e}function Dl(t,e,n){e.forEach((r,s)=>{const o=t[s];Be(o,`Panel data not found for index ${s}`);const{callbacks:u,constraints:c,id:f}=o,{collapsedSize:h=0,collapsible:p}=c,_=n[f];if(_==null||r!==_){n[f]=r;const{onCollapse:b,onExpand:A,onResize:O}=u;O&&O(r,_),p&&(b||A)&&(A&&(_==null||cs(_,h))&&!cs(r,h)&&A(),b&&(_==null||!cs(_,h))&&cs(r,h)&&b())}})}function Th(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function lO({defaultSize:t,dragState:e,layout:n,panelData:r,panelIndex:s,precision:o=3}){const u=n[s];let c;return u==null?c=t!=null?t.toPrecision(o):"1":r.length===1?c="1":c=u.toPrecision(o),{flexBasis:0,flexGrow:c,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function uO(t,e=10){let n=null;return(...s)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...s)},e)}}function WT(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function U3(t){return`react-resizable-panels:${t}`}function B3(t){return t.map(e=>{const{constraints:n,id:r,idIsFromProps:s,order:o}=e;return s?r:o?`${o}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function H3(t,e){try{const n=U3(t),r=e.getItem(n);if(r){const s=JSON.parse(r);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function cO(t,e,n){var r,s;const o=(r=H3(t,n))!==null&&r!==void 0?r:{},u=B3(e);return(s=o[u])!==null&&s!==void 0?s:null}function dO(t,e,n,r,s){var o;const u=U3(t),c=B3(e),f=(o=H3(t,s))!==null&&o!==void 0?o:{};f[c]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{s.setItem(u,JSON.stringify(f))}catch(h){console.error(h)}}function QT({layout:t,panelConstraints:e}){const n=[...t],r=n.reduce((o,u)=>o+u,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(o=>`${o}%`).join(", ")}`);if(!dr(r,100)&&n.length>0)for(let o=0;o<e.length;o++){const u=n[o];Be(u!=null,`No layout data found for index ${o}`);const c=100/r*u;n[o]=c}let s=0;for(let o=0;o<e.length;o++){const u=n[o];Be(u!=null,`No layout data found for index ${o}`);const c=Ul({panelConstraints:e,panelIndex:o,size:u});u!=c&&(s+=u-c,n[o]=c)}if(!dr(s,0))for(let o=0;o<e.length;o++){const u=n[o];Be(u!=null,`No layout data found for index ${o}`);const c=u+s,f=Ul({panelConstraints:e,panelIndex:o,size:c});if(u!==f&&(s-=f-u,n[o]=f,dr(s,0)))break}return n}const fO=100,Uc={getItem:t=>(WT(Uc),Uc.getItem(t)),setItem:(t,e)=>{WT(Uc),Uc.setItem(t,e)}},ZT={};function F3({autoSaveId:t=null,children:e,className:n="",direction:r,forwardedRef:s,id:o=null,onLayout:u=null,keyboardResizeBy:c=null,storage:f=Uc,style:h,tagName:p="div",..._}){const b=Kv(o),A=$.useRef(null),[O,V]=$.useState(null),[z,j]=$.useState([]),F=J5(),K=$.useRef({}),y=$.useRef(new Map),E=$.useRef(0),w=$.useRef({autoSaveId:t,direction:r,dragState:O,id:b,keyboardResizeBy:c,onLayout:u,storage:f}),T=$.useRef({layout:z,panelDataArray:[],panelDataArrayChanged:!1});$.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),$.useImperativeHandle(s,()=>({getId:()=>w.current.id,getLayout:()=>{const{layout:J}=T.current;return J},setLayout:J=>{const{onLayout:re}=w.current,{layout:ce,panelDataArray:ue}=T.current,fe=QT({layout:J,panelConstraints:ue.map(pe=>pe.constraints)});XT(ce,fe)||(j(fe),T.current.layout=fe,re&&re(fe),Dl(ue,fe,K.current))}}),[]),_o(()=>{w.current.autoSaveId=t,w.current.direction=r,w.current.dragState=O,w.current.id=b,w.current.onLayout=u,w.current.storage=f}),iO({committedValuesRef:w,eagerValuesRef:T,groupId:b,layout:z,panelDataArray:T.current.panelDataArray,setLayout:j,panelGroupElement:A.current}),$.useEffect(()=>{const{panelDataArray:J}=T.current;if(t){if(z.length===0||z.length!==J.length)return;let re=ZT[t];re==null&&(re=uO(dO,fO),ZT[t]=re);const ce=[...J],ue=new Map(y.current);re(t,ce,ue,z,f)}},[t,z,f]),$.useEffect(()=>{});const x=$.useCallback(J=>{const{onLayout:re}=w.current,{layout:ce,panelDataArray:ue}=T.current;if(J.constraints.collapsible){const fe=ue.map(Qe=>Qe.constraints),{collapsedSize:pe=0,panelSize:we,pivotIndices:Ce}=oo(ue,J,ce);if(Be(we!=null,`Panel size not found for panel "${J.id}"`),!cs(we,pe)){y.current.set(J.id,we);const Ze=Pl(ue,J)===ue.length-1?we-pe:pe-we,Ve=jc({delta:Ze,initialLayout:ce,panelConstraints:fe,pivotIndices:Ce,prevLayout:ce,trigger:"imperative-api"});Th(ce,Ve)||(j(Ve),T.current.layout=Ve,re&&re(Ve),Dl(ue,Ve,K.current))}}},[]),C=$.useCallback((J,re)=>{const{onLayout:ce}=w.current,{layout:ue,panelDataArray:fe}=T.current;if(J.constraints.collapsible){const pe=fe.map(rt=>rt.constraints),{collapsedSize:we=0,panelSize:Ce=0,minSize:Qe=0,pivotIndices:Ze}=oo(fe,J,ue),Ve=re??Qe;if(cs(Ce,we)){const rt=y.current.get(J.id),st=rt!=null&&rt>=Ve?rt:Ve,je=Pl(fe,J)===fe.length-1?Ce-st:st-Ce,Te=jc({delta:je,initialLayout:ue,panelConstraints:pe,pivotIndices:Ze,prevLayout:ue,trigger:"imperative-api"});Th(ue,Te)||(j(Te),T.current.layout=Te,ce&&ce(Te),Dl(fe,Te,K.current))}}},[]),k=$.useCallback(J=>{const{layout:re,panelDataArray:ce}=T.current,{panelSize:ue}=oo(ce,J,re);return Be(ue!=null,`Panel size not found for panel "${J.id}"`),ue},[]),N=$.useCallback((J,re)=>{const{panelDataArray:ce}=T.current,ue=Pl(ce,J);return lO({defaultSize:re,dragState:O,layout:z,panelData:ce,panelIndex:ue})},[O,z]),U=$.useCallback(J=>{const{layout:re,panelDataArray:ce}=T.current,{collapsedSize:ue=0,collapsible:fe,panelSize:pe}=oo(ce,J,re);return Be(pe!=null,`Panel size not found for panel "${J.id}"`),fe===!0&&cs(pe,ue)},[]),M=$.useCallback(J=>{const{layout:re,panelDataArray:ce}=T.current,{collapsedSize:ue=0,collapsible:fe,panelSize:pe}=oo(ce,J,re);return Be(pe!=null,`Panel size not found for panel "${J.id}"`),!fe||So(pe,ue)>0},[]),P=$.useCallback(J=>{const{panelDataArray:re}=T.current;re.push(J),re.sort((ce,ue)=>{const fe=ce.order,pe=ue.order;return fe==null&&pe==null?0:fe==null?-1:pe==null?1:fe-pe}),T.current.panelDataArrayChanged=!0,F()},[F]);_o(()=>{if(T.current.panelDataArrayChanged){T.current.panelDataArrayChanged=!1;const{autoSaveId:J,onLayout:re,storage:ce}=w.current,{layout:ue,panelDataArray:fe}=T.current;let pe=null;if(J){const Ce=cO(J,fe,ce);Ce&&(y.current=new Map(Object.entries(Ce.expandToSizes)),pe=Ce.layout)}pe==null&&(pe=oO({panelDataArray:fe}));const we=QT({layout:pe,panelConstraints:fe.map(Ce=>Ce.constraints)});XT(ue,we)||(j(we),T.current.layout=we,re&&re(we),Dl(fe,we,K.current))}}),_o(()=>{const J=T.current;return()=>{J.layout=[]}},[]);const G=$.useCallback(J=>{let re=!1;const ce=A.current;return ce&&window.getComputedStyle(ce,null).getPropertyValue("direction")==="rtl"&&(re=!0),function(fe){fe.preventDefault();const pe=A.current;if(!pe)return()=>null;const{direction:we,dragState:Ce,id:Qe,keyboardResizeBy:Ze,onLayout:Ve}=w.current,{layout:rt,panelDataArray:st}=T.current,{initialLayout:Ht}=Ce??{},je=L3(Qe,J,pe);let Te=aO(fe,J,we,Ce,Ze,pe);const kt=we==="horizontal";kt&&re&&(Te=-Te);const Sn=st.map(Pn=>Pn.constraints),Qt=jc({delta:Te,initialLayout:Ht??rt,panelConstraints:Sn,pivotIndices:je,prevLayout:rt,trigger:C3(fe)?"keyboard":"mouse-or-touch"}),Jn=!Th(rt,Qt);(R3(fe)||k3(fe))&&E.current!=Te&&(E.current=Te,!Jn&&Te!==0?kt?Uy(J,Te<0?N3:D3):Uy(J,Te<0?M3:P3):Uy(J,0)),Jn&&(j(Qt),T.current.layout=Qt,Ve&&Ve(Qt),Dl(st,Qt,K.current))}},[]),R=$.useCallback((J,re)=>{const{onLayout:ce}=w.current,{layout:ue,panelDataArray:fe}=T.current,pe=fe.map(rt=>rt.constraints),{panelSize:we,pivotIndices:Ce}=oo(fe,J,ue);Be(we!=null,`Panel size not found for panel "${J.id}"`);const Ze=Pl(fe,J)===fe.length-1?we-re:re-we,Ve=jc({delta:Ze,initialLayout:ue,panelConstraints:pe,pivotIndices:Ce,prevLayout:ue,trigger:"imperative-api"});Th(ue,Ve)||(j(Ve),T.current.layout=Ve,ce&&ce(Ve),Dl(fe,Ve,K.current))},[]),q=$.useCallback((J,re)=>{const{layout:ce,panelDataArray:ue}=T.current,{collapsedSize:fe=0,collapsible:pe}=re,{collapsedSize:we=0,collapsible:Ce,maxSize:Qe=100,minSize:Ze=0}=J.constraints,{panelSize:Ve}=oo(ue,J,ce);Ve!=null&&(pe&&Ce&&cs(Ve,fe)?cs(fe,we)||R(J,we):Ve<Ze?R(J,Ze):Ve>Qe&&R(J,Qe))},[R]),Q=$.useCallback((J,re)=>{const{direction:ce}=w.current,{layout:ue}=T.current;if(!A.current)return;const fe=Gm(J,A.current);Be(fe,`Drag handle element not found for id "${J}"`);const pe=j3(ce,re);V({dragHandleId:J,dragHandleRect:fe.getBoundingClientRect(),initialCursorPosition:pe,initialLayout:ue})},[]),W=$.useCallback(()=>{V(null)},[]),B=$.useCallback(J=>{const{panelDataArray:re}=T.current,ce=Pl(re,J);ce>=0&&(re.splice(ce,1),delete K.current[J.id],T.current.panelDataArrayChanged=!0,F())},[F]),X=$.useMemo(()=>({collapsePanel:x,direction:r,dragState:O,expandPanel:C,getPanelSize:k,getPanelStyle:N,groupId:b,isPanelCollapsed:U,isPanelExpanded:M,reevaluatePanelConstraints:q,registerPanel:P,registerResizeHandle:G,resizePanel:R,startDragging:Q,stopDragging:W,unregisterPanel:B,panelGroupElement:A.current}),[x,O,r,C,k,N,b,U,M,q,P,G,R,Q,W,B]),te={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return $.createElement(Fm.Provider,{value:X},$.createElement(p,{..._,children:e,className:n,id:o,ref:A,style:{...te,...h},[Pt.group]:"",[Pt.groupDirection]:r,[Pt.groupId]:b}))}const $3=$.forwardRef((t,e)=>$.createElement(F3,{...t,forwardedRef:e}));F3.displayName="PanelGroup";$3.displayName="forwardRef(PanelGroup)";function Pl(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function oo(t,e,n){const r=Pl(t,e),o=r===t.length-1?[r-1,r]:[r,r+1],u=n[r];return{...e.constraints,panelSize:u,pivotIndices:o}}function hO({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:r}){$.useEffect(()=>{if(t||n==null||r==null)return;const s=Gm(e,r);if(s==null)return;const o=u=>{if(!u.defaultPrevented)switch(u.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{u.preventDefault(),n(u);break}case"F6":{u.preventDefault();const c=s.getAttribute(Pt.groupId);Be(c,`No group element found for id "${c}"`);const f=hd(c,r),h=V3(c,e,r);Be(h!==null,`No resize element found for id "${e}"`);const p=u.shiftKey?h>0?h-1:f.length-1:h+1<f.length?h+1:0;f[p].focus();break}}};return s.addEventListener("keydown",o),()=>{s.removeEventListener("keydown",o)}},[r,t,e,n])}function q3({children:t=null,className:e="",disabled:n=!1,hitAreaMargins:r,id:s,onBlur:o,onClick:u,onDragging:c,onFocus:f,onPointerDown:h,onPointerUp:p,style:_={},tabIndex:b=0,tagName:A="div",...O}){var V,z;const j=$.useRef(null),F=$.useRef({onClick:u,onDragging:c,onPointerDown:h,onPointerUp:p});$.useEffect(()=>{F.current.onClick=u,F.current.onDragging=c,F.current.onPointerDown=h,F.current.onPointerUp=p});const K=$.useContext(Fm);if(K===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:y,groupId:E,registerResizeHandle:w,startDragging:T,stopDragging:x,panelGroupElement:C}=K,k=Kv(s),[N,U]=$.useState("inactive"),[M,P]=$.useState(!1),[G,R]=$.useState(null),q=$.useRef({state:N});_o(()=>{q.current.state=N}),$.useEffect(()=>{if(n)R(null);else{const X=w(k);R(()=>X)}},[n,k,w]);const Q=(V=r?.coarse)!==null&&V!==void 0?V:15,W=(z=r?.fine)!==null&&z!==void 0?z:5;$.useEffect(()=>{if(n||G==null)return;const X=j.current;Be(X,"Element ref not attached");let te=!1;return Q5(k,X,y,{coarse:Q,fine:W},(re,ce,ue)=>{if(!ce){U("inactive");return}switch(re){case"down":{U("drag"),te=!1,Be(ue,'Expected event to be defined for "down" action'),T(k,ue);const{onDragging:fe,onPointerDown:pe}=F.current;fe?.(!0),pe?.();break}case"move":{const{state:fe}=q.current;te=!0,fe!=="drag"&&U("hover"),Be(ue,'Expected event to be defined for "move" action'),G(ue);break}case"up":{U("hover"),x();const{onClick:fe,onDragging:pe,onPointerUp:we}=F.current;pe?.(!1),we?.(),te||fe?.();break}}})},[Q,y,n,W,w,k,G,T,x]),hO({disabled:n,handleId:k,resizeHandler:G,panelGroupElement:C});const B={touchAction:"none",userSelect:"none"};return $.createElement(A,{...O,children:t,className:e,id:s,onBlur:()=>{P(!1),o?.()},onFocus:()=>{P(!0),f?.()},ref:j,role:"separator",style:{...B,..._},tabIndex:b,[Pt.groupDirection]:y,[Pt.groupId]:E,[Pt.resizeHandle]:"",[Pt.resizeHandleActive]:N==="drag"?"pointer":M?"keyboard":void 0,[Pt.resizeHandleEnabled]:!n,[Pt.resizeHandleId]:k,[Pt.resizeHandleState]:N})}q3.displayName="PanelResizeHandle";const G3=t=>{const e=[],n=t.split("_");for(let r=0;r<n.length;r++)if(r%2===0)n[r].split(/\s+/).filter(o=>o.trim()!=="").forEach(o=>{e.push({word:o.trim()})});else{const s=n[r].trim();s.split(/\s+/).filter(u=>u.trim()!=="").forEach(u=>{e.push({word:u.trim(),myConcept:s})})}return e},JT=()=>{const t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];return t[Math.floor(Math.random()*t.length)]},eS=(t,e)=>{if(!t)return"#000000";let n=t.startsWith("#")?t.slice(1):t,r=parseInt(n.slice(0,2),16),s=parseInt(n.slice(2,4),16),o=parseInt(n.slice(4,6),16);const u=f=>Math.max(0,Math.min(255,f)),c=1-e;return r=u(Math.round(r*c)),s=u(Math.round(s*c)),o=u(Math.round(o*c)),`#${[r,s,o].map(f=>f.toString(16).padStart(2,"0")).join("")}`},mO=t=>{const e=t.replace("#",""),n=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),s=parseInt(e.substr(4,2),16),o=30,u=Math.min(255,Math.max(0,n+(Math.random()-.5)*o*2)),c=Math.min(255,Math.max(0,r+(Math.random()-.5)*o*2)),f=Math.min(255,Math.max(0,s+(Math.random()-.5)*o*2));return`#${Math.round(u).toString(16).padStart(2,"0")}${Math.round(c).toString(16).padStart(2,"0")}${Math.round(f).toString(16).padStart(2,"0")}`},pO=t=>{const s=(Math.random()-.5)*400*2,o=(Math.random()-.5)*30*2;return{x:t.x+s,y:t.y+650+o}},gO=()=>`node_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,yO=(t,e)=>`edge_${t}_${e}`,vO=(t,e,n,r,s,o,u)=>({id:gO(),type:"draggableEditable",position:t,draggable:!0,data:{label:e,title:e,summary:r,full_text:n,suggestions:[],myColor:s,tokenColors:{},previousNode:u}}),_O=(t,e,n,r)=>({id:yO(t,e),source:t,target:e,sourceHandle:r,targetHandle:null,style:{stroke:n,strokeWidth:3},markerEnd:{type:To.ArrowClosed,color:n}}),bO="modulepreload",wO=function(t){return"/"+t},tS={},Y3=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let f=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=u?.nonce||u?.getAttribute("nonce");s=f(n.map(h=>{if(h=wO(h),h in tS)return;tS[h]=!0;const p=h.endsWith(".css"),_=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${_}`))return;const b=document.createElement("link");if(b.rel=p?"stylesheet":bO,p||(b.as="script"),b.crossOrigin="",b.href=h,c&&b.setAttribute("nonce",c),document.head.appendChild(b),p)return new Promise((A,O)=>{b.addEventListener("load",A),b.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return s.then(u=>{for(const c of u||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},EO=()=>{};var nS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},TO=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],u=t[n++],c=t[n++],f=((s&7)<<18|(o&63)<<12|(u&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const o=t[n++],u=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|u&63)}}return e.join("")},X3={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],u=s+1<t.length,c=u?t[s+1]:0,f=s+2<t.length,h=f?t[s+2]:0,p=o>>2,_=(o&3)<<4|c>>4;let b=(c&15)<<2|h>>6,A=h&63;f||(A=64,u||(b=64)),r.push(n[p],n[_],n[b],n[A])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(K3(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):TO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const _=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||c==null||h==null||_==null)throw new SO;const b=o<<2|c>>4;if(r.push(b),h!==64){const A=c<<4&240|h>>2;if(r.push(A),_!==64){const O=h<<6&192|_;r.push(O)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class SO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xO=function(t){const e=K3(t);return X3.encodeByteArray(e,!0)},dm=function(t){return xO(t).replace(/\./g,"")},W3=function(t){try{return X3.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=()=>AO().__FIREBASE_DEFAULTS__,RO=()=>{if(typeof process>"u"||typeof nS>"u")return;const t=nS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&W3(t[1]);return e&&JSON.parse(e)},Ym=()=>{try{return EO()||CO()||RO()||kO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Q3=t=>{var e,n;return(n=(e=Ym())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Z3=t=>{const e=Q3(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},J3=()=>{var t;return(t=Ym())===null||t===void 0?void 0:t.config},eC=t=>{var e;return(e=Ym())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(t){return t.endsWith(".cloudworkstations.dev")}async function Qv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[dm(JSON.stringify(n)),dm(JSON.stringify(u)),""].join(".")}const Yc={};function DO(){const t={prod:[],emulator:[]};for(const e of Object.keys(Yc))Yc[e]?t.emulator.push(e):t.prod.push(e);return t}function MO(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let rS=!1;function Zv(t,e){if(typeof window>"u"||typeof document>"u"||!Do(window.location.host)||Yc[t]===e||Yc[t]||rS)return;Yc[t]=e;function n(b){return`__firebase__banner__${b}`}const r="__firebase__banner",o=DO().prod.length>0;function u(){const b=document.getElementById(r);b&&b.remove()}function c(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function f(b,A){b.setAttribute("width","24"),b.setAttribute("id",A),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function h(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{rS=!0,u()},b}function p(b,A){b.setAttribute("id",A),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function _(){const b=MO(r),A=n("text"),O=document.getElementById(A)||document.createElement("span"),V=n("learnmore"),z=document.getElementById(V)||document.createElement("a"),j=n("preprendIcon"),F=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const K=b.element;c(K),p(z,V);const y=h();f(F,j),K.append(F,O,z,y),document.body.appendChild(K)}o?(O.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mn())}function OO(){var t;const e=(t=Ym())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LO(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jO(){const t=Mn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function UO(){return!OO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function BO(){try{return typeof indexedDB=="object"}catch{return!1}}function HO(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO="FirebaseError";class zi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=FO,Object.setPrototypeOf(this,zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vd.prototype.create)}}class Vd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],u=o?$O(o,r):"Error",c=`${this.serviceName}: ${u} (${s}).`;return new zi(s,c,r)}}function $O(t,e){return t.replace(qO,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const qO=/\{\$([^}]+)}/g;function GO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],u=e[s];if(iS(o)&&iS(u)){if(!xo(o,u))return!1}else if(o!==u)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function iS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Bc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Hc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function YO(t,e){const n=new KO(t,e);return n.subscribe.bind(n)}class KO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");XO(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Hy),s.error===void 0&&(s.error=Hy),s.complete===void 0&&(s.complete=Hy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Hy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t){return t&&t._delegate?t._delegate:t}class ya{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new IO;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZO(e))try{this.getOrInitializeService({instanceIdentifier:co})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=co){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=co){return this.instances.has(e)}getOptions(e=co){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,u]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&u.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:QO(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=co){return this.component?this.component.multipleInstances?e:co:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QO(t){return t===co?void 0:t}function ZO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new WO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Xe||(Xe={}));const eV={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},tV=Xe.INFO,nV={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},rV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=nV[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jv{constructor(e){this.name=e,this._logLevel=tV,this._logHandler=rV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const iV=(t,e)=>e.some(n=>t instanceof n);let sS,aS;function sV(){return sS||(sS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aV(){return aS||(aS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tC=new WeakMap,P0=new WeakMap,nC=new WeakMap,Fy=new WeakMap,e_=new WeakMap;function oV(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",u)},o=()=>{n(ca(t.result)),s()},u=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&tC.set(n,t)}).catch(()=>{}),e_.set(e,t),e}function lV(t){if(P0.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",u),t.removeEventListener("abort",u)},o=()=>{n(),s()},u=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",u),t.addEventListener("abort",u)});P0.set(t,e)}let O0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return P0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||nC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ca(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uV(t){O0=t(O0)}function cV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call($y(this),e,...n);return nC.set(r,e.sort?e.sort():[e]),ca(r)}:aV().includes(t)?function(...e){return t.apply($y(this),e),ca(tC.get(this))}:function(...e){return ca(t.apply($y(this),e))}}function dV(t){return typeof t=="function"?cV(t):(t instanceof IDBTransaction&&lV(t),iV(t,sV())?new Proxy(t,O0):t)}function ca(t){if(t instanceof IDBRequest)return oV(t);if(Fy.has(t))return Fy.get(t);const e=dV(t);return e!==t&&(Fy.set(t,e),e_.set(e,t)),e}const $y=t=>e_.get(t);function fV(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const u=indexedDB.open(t,e),c=ca(u);return r&&u.addEventListener("upgradeneeded",f=>{r(ca(u.result),f.oldVersion,f.newVersion,ca(u.transaction),f)}),n&&u.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),c.then(f=>{o&&f.addEventListener("close",()=>o()),s&&f.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const hV=["get","getKey","getAll","getAllKeys","count"],mV=["put","add","delete","clear"],qy=new Map;function oS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(qy.get(e))return qy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=mV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||hV.includes(n)))return;const o=async function(u,...c){const f=this.transaction(u,s?"readwrite":"readonly");let h=f.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&f.done]))[0]};return qy.set(e,o),o}uV(t=>({...t,get:(e,n,r)=>oS(e,n)||t.get(e,n,r),has:(e,n)=>!!oS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function gV(t){const e=t.getComponent();return e?.type==="VERSION"}const V0="@firebase/app",lS="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new Jv("@firebase/app"),yV="@firebase/app-compat",vV="@firebase/analytics-compat",_V="@firebase/analytics",bV="@firebase/app-check-compat",wV="@firebase/app-check",EV="@firebase/auth",TV="@firebase/auth-compat",SV="@firebase/database",xV="@firebase/data-connect",AV="@firebase/database-compat",CV="@firebase/functions",RV="@firebase/functions-compat",kV="@firebase/installations",IV="@firebase/installations-compat",NV="@firebase/messaging",DV="@firebase/messaging-compat",MV="@firebase/performance",PV="@firebase/performance-compat",OV="@firebase/remote-config",VV="@firebase/remote-config-compat",LV="@firebase/storage",zV="@firebase/storage-compat",jV="@firebase/firestore",UV="@firebase/ai",BV="@firebase/firestore-compat",HV="firebase",FV="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="[DEFAULT]",$V={[V0]:"fire-core",[yV]:"fire-core-compat",[_V]:"fire-analytics",[vV]:"fire-analytics-compat",[wV]:"fire-app-check",[bV]:"fire-app-check-compat",[EV]:"fire-auth",[TV]:"fire-auth-compat",[SV]:"fire-rtdb",[xV]:"fire-data-connect",[AV]:"fire-rtdb-compat",[CV]:"fire-fn",[RV]:"fire-fn-compat",[kV]:"fire-iid",[IV]:"fire-iid-compat",[NV]:"fire-fcm",[DV]:"fire-fcm-compat",[MV]:"fire-perf",[PV]:"fire-perf-compat",[OV]:"fire-rc",[VV]:"fire-rc-compat",[LV]:"fire-gcs",[zV]:"fire-gcs-compat",[jV]:"fire-fst",[BV]:"fire-fst-compat",[UV]:"fire-vertex","fire-js":"fire-js",[HV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm=new Map,qV=new Map,z0=new Map;function uS(t,e){try{t.container.addComponent(e)}catch(n){ys.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ao(t){const e=t.name;if(z0.has(e))return ys.debug(`There were multiple attempts to register component ${e}.`),!1;z0.set(e,t);for(const n of fm.values())uS(n,t);for(const n of qV.values())uS(n,t);return!0}function Km(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},da=new Vd("app","Firebase",GV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ya("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw da.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu=FV;function rC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:L0,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw da.create("bad-app-name",{appName:String(s)});if(n||(n=J3()),!n)throw da.create("no-options");const o=fm.get(s);if(o){if(xo(n,o.options)&&xo(r,o.config))return o;throw da.create("duplicate-app",{appName:s})}const u=new JO(s);for(const f of z0.values())u.addComponent(f);const c=new YV(n,r,u);return fm.set(s,c),c}function t_(t=L0){const e=fm.get(t);if(!e&&t===L0&&J3())return rC();if(!e)throw da.create("no-app",{appName:t});return e}function Ri(t,e,n){var r;let s=(r=$V[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ys.warn(c.join(" "));return}Ao(new ya(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KV="firebase-heartbeat-database",XV=1,md="firebase-heartbeat-store";let Gy=null;function iC(){return Gy||(Gy=fV(KV,XV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(md)}catch(n){console.warn(n)}}}}).catch(t=>{throw da.create("idb-open",{originalErrorMessage:t.message})})),Gy}async function WV(t){try{const n=(await iC()).transaction(md),r=await n.objectStore(md).get(sC(t));return await n.done,r}catch(e){if(e instanceof zi)ys.warn(e.message);else{const n=da.create("idb-get",{originalErrorMessage:e?.message});ys.warn(n.message)}}}async function cS(t,e){try{const r=(await iC()).transaction(md,"readwrite");await r.objectStore(md).put(e,sC(t)),await r.done}catch(n){if(n instanceof zi)ys.warn(n.message);else{const r=da.create("idb-set",{originalErrorMessage:n?.message});ys.warn(r.message)}}}function sC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV=1024,ZV=30;class JV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new tL(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=dS();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>ZV){const u=nL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ys.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=dS(),{heartbeatsToSend:r,unsentEntries:s}=eL(this._heartbeatsCache.heartbeats),o=dm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return ys.warn(n),""}}}function dS(){return new Date().toISOString().substring(0,10)}function eL(t,e=QV){const n=[];let r=t.slice();for(const s of t){const o=n.find(u=>u.agent===s.agent);if(o){if(o.dates.push(s.date),fS(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),fS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class tL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BO()?HO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await WV(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return cS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return cS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function fS(t){return dm(JSON.stringify({version:2,heartbeats:t})).length}function nL(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rL(t){Ao(new ya("platform-logger",e=>new pV(e),"PRIVATE")),Ao(new ya("heartbeat",e=>new JV(e),"PRIVATE")),Ri(V0,lS,t),Ri(V0,lS,"esm2017"),Ri("fire-js","")}rL("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL="type.googleapis.com/google.protobuf.Int64Value",sL="type.googleapis.com/google.protobuf.UInt64Value";function aC(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function hm(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>hm(e));if(typeof t=="function"||typeof t=="object")return aC(t,e=>hm(e));throw new Error("Data cannot be encoded in JSON: "+t)}function au(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case iL:case sL:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>au(e)):typeof t=="function"||typeof t=="object"?aC(t,e=>au(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qn extends zi{constructor(e,n,r){super(`${n_}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Qn.prototype)}}function aL(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function mm(t,e){let n=aL(t),r=n,s;try{const o=e&&e.error;if(o){const u=o.status;if(typeof u=="string"){if(!hS[u])return new Qn("internal","internal");n=hS[u],r=u}const c=o.message;typeof c=="string"&&(r=c),s=o.details,s!==void 0&&(s=au(s))}}catch{}return n==="ok"?null:new Qn(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,hr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||s?.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="us-central1",lL=/^data: (.*?)(?:\n|$)/;function uL(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Qn("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class cL{constructor(e,n,r,s,o=j0,u=(...c)=>fetch(...c)){this.app=e,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new oL(e,n,r,s),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(o);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=j0}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function dL(t,e,n){const r=Do(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(Qv(t.emulatorOrigin),Zv("Functions",!0))}function fL(t,e,n){const r=s=>mL(t,e,s,{});return r.stream=(s,o)=>gL(t,e,s,o),r}async function hL(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await s.json()}catch{}return{status:s.status,json:o}}async function oC(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function mL(t,e,n,r){const s=t._url(e);return pL(t,s,n,r)}async function pL(t,e,n,r){n=hm(n);const s={data:n},o=await oC(t,r),u=r.timeout||7e4,c=uL(u),f=await Promise.race([hL(e,s,o,t.fetchImpl),c.promise,t.cancelAllRequests]);if(c.cancel(),!f)throw new Qn("cancelled","Firebase Functions instance was deleted.");const h=mm(f.status,f.json);if(h)throw h;if(!f.json)throw new Qn("internal","Response is not valid JSON object.");let p=f.json.data;if(typeof p>"u"&&(p=f.json.result),typeof p>"u")throw new Qn("internal","Response is missing data field.");return{data:au(p)}}function gL(t,e,n,r){const s=t._url(e);return yL(t,s,n,r||{})}async function yL(t,e,n,r){var s;n=hm(n);const o={data:n},u=await oC(t,r);u["Content-Type"]="application/json",u.Accept="text/event-stream";let c;try{c=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:u,signal:r?.signal})}catch(A){if(A instanceof Error&&A.name==="AbortError"){const V=new Qn("cancelled","Request was cancelled.");return{data:Promise.reject(V),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(V)}}}}}}const O=mm(0,null);return{data:Promise.reject(O),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(O)}}}}}}let f,h;const p=new Promise((A,O)=>{f=A,h=O});(s=r?.signal)===null||s===void 0||s.addEventListener("abort",()=>{const A=new Qn("cancelled","Request was cancelled.");h(A)});const _=c.body.getReader(),b=vL(_,f,h,r?.signal);return{stream:{[Symbol.asyncIterator](){const A=b.getReader();return{async next(){const{value:O,done:V}=await A.read();return{value:O,done:V}},async return(){return await A.cancel(),{done:!0,value:void 0}}}}},data:p}}function vL(t,e,n,r){const s=(u,c)=>{const f=u.match(lL);if(!f)return;const h=f[1];try{const p=JSON.parse(h);if("result"in p){e(au(p.result));return}if("message"in p){c.enqueue(au(p.message));return}if("error"in p){const _=mm(0,p);c.error(_),n(_);return}}catch(p){if(p instanceof Qn){c.error(p),n(p);return}}},o=new TextDecoder;return new ReadableStream({start(u){let c="";return f();async function f(){if(r?.aborted){const h=new Qn("cancelled","Request was cancelled");return u.error(h),n(h),Promise.resolve()}try{const{value:h,done:p}=await t.read();if(p){c.trim()&&s(c.trim(),u),u.close();return}if(r?.aborted){const b=new Qn("cancelled","Request was cancelled");u.error(b),n(b),await t.cancel();return}c+=o.decode(h,{stream:!0});const _=c.split(`
`);c=_.pop()||"";for(const b of _)b.trim()&&s(b.trim(),u);return f()}catch(h){const p=h instanceof Qn?h:mm(0,null);u.error(p),n(p)}}},cancel(){return t.cancel()}})}const mS="@firebase/functions",pS="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L="auth-internal",bL="app-check-internal",wL="messaging-internal";function EL(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),o=n.getProvider(_L),u=n.getProvider(wL),c=n.getProvider(bL);return new cL(s,o,u,c,r)};Ao(new ya(n_,e,"PUBLIC").setMultipleInstances(!0)),Ri(mS,pS,t),Ri(mS,pS,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TL(t=t_(),e=j0){const r=Km(Vt(t),n_).getImmediate({identifier:e}),s=Z3("functions");return s&&SL(r,...s),r}function SL(t,e,n){dL(Vt(t),e,n)}function xL(t,e,n){return fL(Vt(t),e)}EL();var AL="firebase",CL="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ri(AL,CL,"app");var gS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fa,lC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,x){function C(){}C.prototype=x.prototype,T.D=x.prototype,T.prototype=new C,T.prototype.constructor=T,T.C=function(k,N,U){for(var M=Array(arguments.length-2),P=2;P<arguments.length;P++)M[P-2]=arguments[P];return x.prototype[N].apply(k,M)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,x,C){C||(C=0);var k=Array(16);if(typeof x=="string")for(var N=0;16>N;++N)k[N]=x.charCodeAt(C++)|x.charCodeAt(C++)<<8|x.charCodeAt(C++)<<16|x.charCodeAt(C++)<<24;else for(N=0;16>N;++N)k[N]=x[C++]|x[C++]<<8|x[C++]<<16|x[C++]<<24;x=T.g[0],C=T.g[1],N=T.g[2];var U=T.g[3],M=x+(U^C&(N^U))+k[0]+3614090360&4294967295;x=C+(M<<7&4294967295|M>>>25),M=U+(N^x&(C^N))+k[1]+3905402710&4294967295,U=x+(M<<12&4294967295|M>>>20),M=N+(C^U&(x^C))+k[2]+606105819&4294967295,N=U+(M<<17&4294967295|M>>>15),M=C+(x^N&(U^x))+k[3]+3250441966&4294967295,C=N+(M<<22&4294967295|M>>>10),M=x+(U^C&(N^U))+k[4]+4118548399&4294967295,x=C+(M<<7&4294967295|M>>>25),M=U+(N^x&(C^N))+k[5]+1200080426&4294967295,U=x+(M<<12&4294967295|M>>>20),M=N+(C^U&(x^C))+k[6]+2821735955&4294967295,N=U+(M<<17&4294967295|M>>>15),M=C+(x^N&(U^x))+k[7]+4249261313&4294967295,C=N+(M<<22&4294967295|M>>>10),M=x+(U^C&(N^U))+k[8]+1770035416&4294967295,x=C+(M<<7&4294967295|M>>>25),M=U+(N^x&(C^N))+k[9]+2336552879&4294967295,U=x+(M<<12&4294967295|M>>>20),M=N+(C^U&(x^C))+k[10]+4294925233&4294967295,N=U+(M<<17&4294967295|M>>>15),M=C+(x^N&(U^x))+k[11]+2304563134&4294967295,C=N+(M<<22&4294967295|M>>>10),M=x+(U^C&(N^U))+k[12]+1804603682&4294967295,x=C+(M<<7&4294967295|M>>>25),M=U+(N^x&(C^N))+k[13]+4254626195&4294967295,U=x+(M<<12&4294967295|M>>>20),M=N+(C^U&(x^C))+k[14]+2792965006&4294967295,N=U+(M<<17&4294967295|M>>>15),M=C+(x^N&(U^x))+k[15]+1236535329&4294967295,C=N+(M<<22&4294967295|M>>>10),M=x+(N^U&(C^N))+k[1]+4129170786&4294967295,x=C+(M<<5&4294967295|M>>>27),M=U+(C^N&(x^C))+k[6]+3225465664&4294967295,U=x+(M<<9&4294967295|M>>>23),M=N+(x^C&(U^x))+k[11]+643717713&4294967295,N=U+(M<<14&4294967295|M>>>18),M=C+(U^x&(N^U))+k[0]+3921069994&4294967295,C=N+(M<<20&4294967295|M>>>12),M=x+(N^U&(C^N))+k[5]+3593408605&4294967295,x=C+(M<<5&4294967295|M>>>27),M=U+(C^N&(x^C))+k[10]+38016083&4294967295,U=x+(M<<9&4294967295|M>>>23),M=N+(x^C&(U^x))+k[15]+3634488961&4294967295,N=U+(M<<14&4294967295|M>>>18),M=C+(U^x&(N^U))+k[4]+3889429448&4294967295,C=N+(M<<20&4294967295|M>>>12),M=x+(N^U&(C^N))+k[9]+568446438&4294967295,x=C+(M<<5&4294967295|M>>>27),M=U+(C^N&(x^C))+k[14]+3275163606&4294967295,U=x+(M<<9&4294967295|M>>>23),M=N+(x^C&(U^x))+k[3]+4107603335&4294967295,N=U+(M<<14&4294967295|M>>>18),M=C+(U^x&(N^U))+k[8]+1163531501&4294967295,C=N+(M<<20&4294967295|M>>>12),M=x+(N^U&(C^N))+k[13]+2850285829&4294967295,x=C+(M<<5&4294967295|M>>>27),M=U+(C^N&(x^C))+k[2]+4243563512&4294967295,U=x+(M<<9&4294967295|M>>>23),M=N+(x^C&(U^x))+k[7]+1735328473&4294967295,N=U+(M<<14&4294967295|M>>>18),M=C+(U^x&(N^U))+k[12]+2368359562&4294967295,C=N+(M<<20&4294967295|M>>>12),M=x+(C^N^U)+k[5]+4294588738&4294967295,x=C+(M<<4&4294967295|M>>>28),M=U+(x^C^N)+k[8]+2272392833&4294967295,U=x+(M<<11&4294967295|M>>>21),M=N+(U^x^C)+k[11]+1839030562&4294967295,N=U+(M<<16&4294967295|M>>>16),M=C+(N^U^x)+k[14]+4259657740&4294967295,C=N+(M<<23&4294967295|M>>>9),M=x+(C^N^U)+k[1]+2763975236&4294967295,x=C+(M<<4&4294967295|M>>>28),M=U+(x^C^N)+k[4]+1272893353&4294967295,U=x+(M<<11&4294967295|M>>>21),M=N+(U^x^C)+k[7]+4139469664&4294967295,N=U+(M<<16&4294967295|M>>>16),M=C+(N^U^x)+k[10]+3200236656&4294967295,C=N+(M<<23&4294967295|M>>>9),M=x+(C^N^U)+k[13]+681279174&4294967295,x=C+(M<<4&4294967295|M>>>28),M=U+(x^C^N)+k[0]+3936430074&4294967295,U=x+(M<<11&4294967295|M>>>21),M=N+(U^x^C)+k[3]+3572445317&4294967295,N=U+(M<<16&4294967295|M>>>16),M=C+(N^U^x)+k[6]+76029189&4294967295,C=N+(M<<23&4294967295|M>>>9),M=x+(C^N^U)+k[9]+3654602809&4294967295,x=C+(M<<4&4294967295|M>>>28),M=U+(x^C^N)+k[12]+3873151461&4294967295,U=x+(M<<11&4294967295|M>>>21),M=N+(U^x^C)+k[15]+530742520&4294967295,N=U+(M<<16&4294967295|M>>>16),M=C+(N^U^x)+k[2]+3299628645&4294967295,C=N+(M<<23&4294967295|M>>>9),M=x+(N^(C|~U))+k[0]+4096336452&4294967295,x=C+(M<<6&4294967295|M>>>26),M=U+(C^(x|~N))+k[7]+1126891415&4294967295,U=x+(M<<10&4294967295|M>>>22),M=N+(x^(U|~C))+k[14]+2878612391&4294967295,N=U+(M<<15&4294967295|M>>>17),M=C+(U^(N|~x))+k[5]+4237533241&4294967295,C=N+(M<<21&4294967295|M>>>11),M=x+(N^(C|~U))+k[12]+1700485571&4294967295,x=C+(M<<6&4294967295|M>>>26),M=U+(C^(x|~N))+k[3]+2399980690&4294967295,U=x+(M<<10&4294967295|M>>>22),M=N+(x^(U|~C))+k[10]+4293915773&4294967295,N=U+(M<<15&4294967295|M>>>17),M=C+(U^(N|~x))+k[1]+2240044497&4294967295,C=N+(M<<21&4294967295|M>>>11),M=x+(N^(C|~U))+k[8]+1873313359&4294967295,x=C+(M<<6&4294967295|M>>>26),M=U+(C^(x|~N))+k[15]+4264355552&4294967295,U=x+(M<<10&4294967295|M>>>22),M=N+(x^(U|~C))+k[6]+2734768916&4294967295,N=U+(M<<15&4294967295|M>>>17),M=C+(U^(N|~x))+k[13]+1309151649&4294967295,C=N+(M<<21&4294967295|M>>>11),M=x+(N^(C|~U))+k[4]+4149444226&4294967295,x=C+(M<<6&4294967295|M>>>26),M=U+(C^(x|~N))+k[11]+3174756917&4294967295,U=x+(M<<10&4294967295|M>>>22),M=N+(x^(U|~C))+k[2]+718787259&4294967295,N=U+(M<<15&4294967295|M>>>17),M=C+(U^(N|~x))+k[9]+3951481745&4294967295,T.g[0]=T.g[0]+x&4294967295,T.g[1]=T.g[1]+(N+(M<<21&4294967295|M>>>11))&4294967295,T.g[2]=T.g[2]+N&4294967295,T.g[3]=T.g[3]+U&4294967295}r.prototype.u=function(T,x){x===void 0&&(x=T.length);for(var C=x-this.blockSize,k=this.B,N=this.h,U=0;U<x;){if(N==0)for(;U<=C;)s(this,T,U),U+=this.blockSize;if(typeof T=="string"){for(;U<x;)if(k[N++]=T.charCodeAt(U++),N==this.blockSize){s(this,k),N=0;break}}else for(;U<x;)if(k[N++]=T[U++],N==this.blockSize){s(this,k),N=0;break}}this.h=N,this.o+=x},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var x=1;x<T.length-8;++x)T[x]=0;var C=8*this.o;for(x=T.length-8;x<T.length;++x)T[x]=C&255,C/=256;for(this.u(T),T=Array(16),x=C=0;4>x;++x)for(var k=0;32>k;k+=8)T[C++]=this.g[x]>>>k&255;return T};function o(T,x){var C=c;return Object.prototype.hasOwnProperty.call(C,T)?C[T]:C[T]=x(T)}function u(T,x){this.h=x;for(var C=[],k=!0,N=T.length-1;0<=N;N--){var U=T[N]|0;k&&U==x||(C[N]=U,k=!1)}this.g=C}var c={};function f(T){return-128<=T&&128>T?o(T,function(x){return new u([x|0],0>x?-1:0)}):new u([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return _;if(0>T)return z(h(-T));for(var x=[],C=1,k=0;T>=C;k++)x[k]=T/C|0,C*=4294967296;return new u(x,0)}function p(T,x){if(T.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(T.charAt(0)=="-")return z(p(T.substring(1),x));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=h(Math.pow(x,8)),k=_,N=0;N<T.length;N+=8){var U=Math.min(8,T.length-N),M=parseInt(T.substring(N,N+U),x);8>U?(U=h(Math.pow(x,U)),k=k.j(U).add(h(M))):(k=k.j(C),k=k.add(h(M)))}return k}var _=f(0),b=f(1),A=f(16777216);t=u.prototype,t.m=function(){if(V(this))return-z(this).m();for(var T=0,x=1,C=0;C<this.g.length;C++){var k=this.i(C);T+=(0<=k?k:4294967296+k)*x,x*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(O(this))return"0";if(V(this))return"-"+z(this).toString(T);for(var x=h(Math.pow(T,6)),C=this,k="";;){var N=y(C,x).g;C=j(C,N.j(x));var U=((0<C.g.length?C.g[0]:C.h)>>>0).toString(T);if(C=N,O(C))return U+k;for(;6>U.length;)U="0"+U;k=U+k}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function O(T){if(T.h!=0)return!1;for(var x=0;x<T.g.length;x++)if(T.g[x]!=0)return!1;return!0}function V(T){return T.h==-1}t.l=function(T){return T=j(this,T),V(T)?-1:O(T)?0:1};function z(T){for(var x=T.g.length,C=[],k=0;k<x;k++)C[k]=~T.g[k];return new u(C,~T.h).add(b)}t.abs=function(){return V(this)?z(this):this},t.add=function(T){for(var x=Math.max(this.g.length,T.g.length),C=[],k=0,N=0;N<=x;N++){var U=k+(this.i(N)&65535)+(T.i(N)&65535),M=(U>>>16)+(this.i(N)>>>16)+(T.i(N)>>>16);k=M>>>16,U&=65535,M&=65535,C[N]=M<<16|U}return new u(C,C[C.length-1]&-2147483648?-1:0)};function j(T,x){return T.add(z(x))}t.j=function(T){if(O(this)||O(T))return _;if(V(this))return V(T)?z(this).j(z(T)):z(z(this).j(T));if(V(T))return z(this.j(z(T)));if(0>this.l(A)&&0>T.l(A))return h(this.m()*T.m());for(var x=this.g.length+T.g.length,C=[],k=0;k<2*x;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(var N=0;N<T.g.length;N++){var U=this.i(k)>>>16,M=this.i(k)&65535,P=T.i(N)>>>16,G=T.i(N)&65535;C[2*k+2*N]+=M*G,F(C,2*k+2*N),C[2*k+2*N+1]+=U*G,F(C,2*k+2*N+1),C[2*k+2*N+1]+=M*P,F(C,2*k+2*N+1),C[2*k+2*N+2]+=U*P,F(C,2*k+2*N+2)}for(k=0;k<x;k++)C[k]=C[2*k+1]<<16|C[2*k];for(k=x;k<2*x;k++)C[k]=0;return new u(C,0)};function F(T,x){for(;(T[x]&65535)!=T[x];)T[x+1]+=T[x]>>>16,T[x]&=65535,x++}function K(T,x){this.g=T,this.h=x}function y(T,x){if(O(x))throw Error("division by zero");if(O(T))return new K(_,_);if(V(T))return x=y(z(T),x),new K(z(x.g),z(x.h));if(V(x))return x=y(T,z(x)),new K(z(x.g),x.h);if(30<T.g.length){if(V(T)||V(x))throw Error("slowDivide_ only works with positive integers.");for(var C=b,k=x;0>=k.l(T);)C=E(C),k=E(k);var N=w(C,1),U=w(k,1);for(k=w(k,2),C=w(C,2);!O(k);){var M=U.add(k);0>=M.l(T)&&(N=N.add(C),U=M),k=w(k,1),C=w(C,1)}return x=j(T,N.j(x)),new K(N,x)}for(N=_;0<=T.l(x);){for(C=Math.max(1,Math.floor(T.m()/x.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),U=h(C),M=U.j(x);V(M)||0<M.l(T);)C-=k,U=h(C),M=U.j(x);O(U)&&(U=b),N=N.add(U),T=j(T,M)}return new K(N,T)}t.A=function(T){return y(this,T).h},t.and=function(T){for(var x=Math.max(this.g.length,T.g.length),C=[],k=0;k<x;k++)C[k]=this.i(k)&T.i(k);return new u(C,this.h&T.h)},t.or=function(T){for(var x=Math.max(this.g.length,T.g.length),C=[],k=0;k<x;k++)C[k]=this.i(k)|T.i(k);return new u(C,this.h|T.h)},t.xor=function(T){for(var x=Math.max(this.g.length,T.g.length),C=[],k=0;k<x;k++)C[k]=this.i(k)^T.i(k);return new u(C,this.h^T.h)};function E(T){for(var x=T.g.length+1,C=[],k=0;k<x;k++)C[k]=T.i(k)<<1|T.i(k-1)>>>31;return new u(C,T.h)}function w(T,x){var C=x>>5;x%=32;for(var k=T.g.length-C,N=[],U=0;U<k;U++)N[U]=0<x?T.i(U+C)>>>x|T.i(U+C+1)<<32-x:T.i(U+C);return new u(N,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,lC=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=p,fa=u}).apply(typeof gS<"u"?gS:typeof self<"u"?self:typeof window<"u"?window:{});var Sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uC,Fc,cC,Uh,U0,dC,fC,hC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,S,I){return m==Array.prototype||m==Object.prototype||(m[S]=I.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sh=="object"&&Sh];for(var S=0;S<m.length;++S){var I=m[S];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function s(m,S){if(S)e:{var I=r;m=m.split(".");for(var Y=0;Y<m.length-1;Y++){var ie=m[Y];if(!(ie in I))break e;I=I[ie]}m=m[m.length-1],Y=I[m],S=S(Y),S!=Y&&S!=null&&e(I,m,{configurable:!0,writable:!0,value:S})}}function o(m,S){m instanceof String&&(m+="");var I=0,Y=!1,ie={next:function(){if(!Y&&I<m.length){var de=I++;return{value:S(de,m[de]),done:!1}}return Y=!0,{done:!0,value:void 0}}};return ie[Symbol.iterator]=function(){return ie},ie}s("Array.prototype.values",function(m){return m||function(){return o(this,function(S,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},c=this||self;function f(m){var S=typeof m;return S=S!="object"?S:m?Array.isArray(m)?"array":S:"null",S=="array"||S=="object"&&typeof m.length=="number"}function h(m){var S=typeof m;return S=="object"&&m!=null||S=="function"}function p(m,S,I){return m.call.apply(m.bind,arguments)}function _(m,S,I){if(!m)throw Error();if(2<arguments.length){var Y=Array.prototype.slice.call(arguments,2);return function(){var ie=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ie,Y),m.apply(S,ie)}}return function(){return m.apply(S,arguments)}}function b(m,S,I){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:_,b.apply(null,arguments)}function A(m,S){var I=Array.prototype.slice.call(arguments,1);return function(){var Y=I.slice();return Y.push.apply(Y,arguments),m.apply(this,Y)}}function O(m,S){function I(){}I.prototype=S.prototype,m.aa=S.prototype,m.prototype=new I,m.prototype.constructor=m,m.Qb=function(Y,ie,de){for(var be=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)be[Je-2]=arguments[Je];return S.prototype[ie].apply(Y,be)}}function V(m){const S=m.length;if(0<S){const I=Array(S);for(let Y=0;Y<S;Y++)I[Y]=m[Y];return I}return[]}function z(m,S){for(let I=1;I<arguments.length;I++){const Y=arguments[I];if(f(Y)){const ie=m.length||0,de=Y.length||0;m.length=ie+de;for(let be=0;be<de;be++)m[ie+be]=Y[be]}else m.push(Y)}}class j{constructor(S,I){this.i=S,this.j=I,this.h=0,this.g=null}get(){let S;return 0<this.h?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function F(m){return/^[\s\xa0]*$/.test(m)}function K(){var m=c.navigator;return m&&(m=m.userAgent)?m:""}function y(m){return y[" "](m),m}y[" "]=function(){};var E=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function w(m,S,I){for(const Y in m)S.call(I,m[Y],Y,m)}function T(m,S){for(const I in m)S.call(void 0,m[I],I,m)}function x(m){const S={};for(const I in m)S[I]=m[I];return S}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(m,S){let I,Y;for(let ie=1;ie<arguments.length;ie++){Y=arguments[ie];for(I in Y)m[I]=Y[I];for(let de=0;de<C.length;de++)I=C[de],Object.prototype.hasOwnProperty.call(Y,I)&&(m[I]=Y[I])}}function N(m){var S=1;m=m.split(":");const I=[];for(;0<S&&m.length;)I.push(m.shift()),S--;return m.length&&I.push(m.join(":")),I}function U(m){c.setTimeout(()=>{throw m},0)}function M(){var m=W;let S=null;return m.g&&(S=m.g,m.g=m.g.next,m.g||(m.h=null),S.next=null),S}class P{constructor(){this.h=this.g=null}add(S,I){const Y=G.get();Y.set(S,I),this.h?this.h.next=Y:this.g=Y,this.h=Y}}var G=new j(()=>new R,m=>m.reset());class R{constructor(){this.next=this.g=this.h=null}set(S,I){this.h=S,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let q,Q=!1,W=new P,B=()=>{const m=c.Promise.resolve(void 0);q=()=>{m.then(X)}};var X=()=>{for(var m;m=M();){try{m.h.call(m.g)}catch(I){U(I)}var S=G;S.j(m),100>S.h&&(S.h++,m.next=S.g,S.g=m)}Q=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(m,S){this.type=m,this.g=this.target=S,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var re=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,S=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const I=()=>{};c.addEventListener("test",I,S),c.removeEventListener("test",I,S)}catch{}return m}();function ce(m,S){if(J.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var I=this.type=m.type,Y=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=S,S=m.relatedTarget){if(E){e:{try{y(S.nodeName);var ie=!0;break e}catch{}ie=!1}ie||(S=null)}}else I=="mouseover"?S=m.fromElement:I=="mouseout"&&(S=m.toElement);this.relatedTarget=S,Y?(this.clientX=Y.clientX!==void 0?Y.clientX:Y.pageX,this.clientY=Y.clientY!==void 0?Y.clientY:Y.pageY,this.screenX=Y.screenX||0,this.screenY=Y.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:ue[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&ce.aa.h.call(this)}}O(ce,J);var ue={2:"touch",3:"pen",4:"mouse"};ce.prototype.h=function(){ce.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var fe="closure_listenable_"+(1e6*Math.random()|0),pe=0;function we(m,S,I,Y,ie){this.listener=m,this.proxy=null,this.src=S,this.type=I,this.capture=!!Y,this.ha=ie,this.key=++pe,this.da=this.fa=!1}function Ce(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Qe(m){this.src=m,this.g={},this.h=0}Qe.prototype.add=function(m,S,I,Y,ie){var de=m.toString();m=this.g[de],m||(m=this.g[de]=[],this.h++);var be=Ve(m,S,Y,ie);return-1<be?(S=m[be],I||(S.fa=!1)):(S=new we(S,this.src,de,!!Y,ie),S.fa=I,m.push(S)),S};function Ze(m,S){var I=S.type;if(I in m.g){var Y=m.g[I],ie=Array.prototype.indexOf.call(Y,S,void 0),de;(de=0<=ie)&&Array.prototype.splice.call(Y,ie,1),de&&(Ce(S),m.g[I].length==0&&(delete m.g[I],m.h--))}}function Ve(m,S,I,Y){for(var ie=0;ie<m.length;++ie){var de=m[ie];if(!de.da&&de.listener==S&&de.capture==!!I&&de.ha==Y)return ie}return-1}var rt="closure_lm_"+(1e6*Math.random()|0),st={};function Ht(m,S,I,Y,ie){if(Array.isArray(S)){for(var de=0;de<S.length;de++)Ht(m,S[de],I,Y,ie);return null}return I=Br(I),m&&m[fe]?m.K(S,I,h(Y)?!!Y.capture:!1,ie):je(m,S,I,!1,Y,ie)}function je(m,S,I,Y,ie,de){if(!S)throw Error("Invalid event type");var be=h(ie)?!!ie.capture:!!ie,Je=Pn(m);if(Je||(m[rt]=Je=new Qe(m)),I=Je.add(S,I,Y,be,de),I.proxy)return I;if(Y=Te(),I.proxy=Y,Y.src=m,Y.listener=I,m.addEventListener)re||(ie=be),ie===void 0&&(ie=!1),m.addEventListener(S.toString(),Y,ie);else if(m.attachEvent)m.attachEvent(Qt(S.toString()),Y);else if(m.addListener&&m.removeListener)m.addListener(Y);else throw Error("addEventListener and attachEvent are unavailable.");return I}function Te(){function m(I){return S.call(m.src,m.listener,I)}const S=Jn;return m}function kt(m,S,I,Y,ie){if(Array.isArray(S))for(var de=0;de<S.length;de++)kt(m,S[de],I,Y,ie);else Y=h(Y)?!!Y.capture:!!Y,I=Br(I),m&&m[fe]?(m=m.i,S=String(S).toString(),S in m.g&&(de=m.g[S],I=Ve(de,I,Y,ie),-1<I&&(Ce(de[I]),Array.prototype.splice.call(de,I,1),de.length==0&&(delete m.g[S],m.h--)))):m&&(m=Pn(m))&&(S=m.g[S.toString()],m=-1,S&&(m=Ve(S,I,Y,ie)),(I=-1<m?S[m]:null)&&Sn(I))}function Sn(m){if(typeof m!="number"&&m&&!m.da){var S=m.src;if(S&&S[fe])Ze(S.i,m);else{var I=m.type,Y=m.proxy;S.removeEventListener?S.removeEventListener(I,Y,m.capture):S.detachEvent?S.detachEvent(Qt(I),Y):S.addListener&&S.removeListener&&S.removeListener(Y),(I=Pn(S))?(Ze(I,m),I.h==0&&(I.src=null,S[rt]=null)):Ce(m)}}}function Qt(m){return m in st?st[m]:st[m]="on"+m}function Jn(m,S){if(m.da)m=!0;else{S=new ce(S,this);var I=m.listener,Y=m.ha||m.src;m.fa&&Sn(m),m=I.call(Y,S)}return m}function Pn(m){return m=m[rt],m instanceof Qe?m:null}var On="__closure_events_fn_"+(1e9*Math.random()>>>0);function Br(m){return typeof m=="function"?m:(m[On]||(m[On]=function(S){return m.handleEvent(S)}),m[On])}function ot(){te.call(this),this.i=new Qe(this),this.M=this,this.F=null}O(ot,te),ot.prototype[fe]=!0,ot.prototype.removeEventListener=function(m,S,I,Y){kt(this,m,S,I,Y)};function Ge(m,S){var I,Y=m.F;if(Y)for(I=[];Y;Y=Y.F)I.push(Y);if(m=m.M,Y=S.type||S,typeof S=="string")S=new J(S,m);else if(S instanceof J)S.target=S.target||m;else{var ie=S;S=new J(Y,m),k(S,ie)}if(ie=!0,I)for(var de=I.length-1;0<=de;de--){var be=S.g=I[de];ie=Ft(be,Y,!0,S)&&ie}if(be=S.g=m,ie=Ft(be,Y,!0,S)&&ie,ie=Ft(be,Y,!1,S)&&ie,I)for(de=0;de<I.length;de++)be=S.g=I[de],ie=Ft(be,Y,!1,S)&&ie}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var m=this.i,S;for(S in m.g){for(var I=m.g[S],Y=0;Y<I.length;Y++)Ce(I[Y]);delete m.g[S],m.h--}}this.F=null},ot.prototype.K=function(m,S,I,Y){return this.i.add(String(m),S,!1,I,Y)},ot.prototype.L=function(m,S,I,Y){return this.i.add(String(m),S,!0,I,Y)};function Ft(m,S,I,Y){if(S=m.i.g[String(S)],!S)return!0;S=S.concat();for(var ie=!0,de=0;de<S.length;++de){var be=S[de];if(be&&!be.da&&be.capture==I){var Je=be.listener,Jt=be.ha||be.src;be.fa&&Ze(m.i,be),ie=Je.call(Jt,Y)!==!1&&ie}}return ie&&!Y.defaultPrevented}function Tt(m,S,I){if(typeof m=="function")I&&(m=b(m,I));else if(m&&typeof m.handleEvent=="function")m=b(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(S)?-1:c.setTimeout(m,S||0)}function si(m){m.g=Tt(()=>{m.g=null,m.i&&(m.i=!1,si(m))},m.l);const S=m.h;m.h=null,m.m.apply(null,S)}class $t extends te{constructor(S,I){super(),this.m=S,this.l=I,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:si(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sn(m){te.call(this),this.h=m,this.g={}}O(sn,te);var Vn=[];function Ln(m){w(m.g,function(S,I){this.g.hasOwnProperty(I)&&Sn(S)},m),m.g={}}sn.prototype.N=function(){sn.aa.N.call(this),Ln(this)},sn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var an=c.JSON.stringify,mn=c.JSON.parse,zn=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function ji(){}ji.prototype.h=null;function Ui(m){return m.h||(m.h=m.i())}function Hr(){}var er={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _r(){J.call(this,"d")}O(_r,J);function tr(){J.call(this,"c")}O(tr,J);var br={},Na=null;function ai(){return Na=Na||new ot}br.La="serverreachability";function Ts(m){J.call(this,br.La,m)}O(Ts,J);function oi(m){const S=ai();Ge(S,new Ts(S))}br.STAT_EVENT="statevent";function zo(m,S){J.call(this,br.STAT_EVENT,m),this.stat=S}O(zo,J);function yt(m){const S=ai();Ge(S,new zo(S,m))}br.Ma="timingevent";function Lt(m,S){J.call(this,br.Ma,m),this.size=S}O(Lt,J);function It(m,S){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},S)}function $n(){this.g=!0}$n.prototype.xa=function(){this.g=!1};function Da(m,S,I,Y,ie,de){m.info(function(){if(m.g)if(de)for(var be="",Je=de.split("&"),Jt=0;Jt<Je.length;Jt++){var et=Je[Jt].split("=");if(1<et.length){var ln=et[0];et=et[1];var en=ln.split("_");be=2<=en.length&&en[1]=="type"?be+(ln+"="+et+"&"):be+(ln+"=redacted&")}}else be=null;else be=de;return"XMLHTTP REQ ("+Y+") [attempt "+ie+"]: "+S+`
`+I+`
`+be})}function Cu(m,S,I,Y,ie,de,be){m.info(function(){return"XMLHTTP RESP ("+Y+") [ attempt "+ie+"]: "+S+`
`+I+`
`+de+" "+be})}function li(m,S,I,Y){m.info(function(){return"XMLHTTP TEXT ("+S+"): "+Bi(m,I)+(Y?" "+Y:"")})}function jo(m,S){m.info(function(){return"TIMEOUT: "+S})}$n.prototype.info=function(){};function Bi(m,S){if(!m.g)return S;if(!S)return null;try{var I=JSON.parse(S);if(I){for(m=0;m<I.length;m++)if(Array.isArray(I[m])){var Y=I[m];if(!(2>Y.length)){var ie=Y[1];if(Array.isArray(ie)&&!(1>ie.length)){var de=ie[0];if(de!="noop"&&de!="stop"&&de!="close")for(var be=1;be<ie.length;be++)ie[be]=""}}}}return an(I)}catch{return S}}var ui={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Er;function Tr(){}O(Tr,ji),Tr.prototype.g=function(){return new XMLHttpRequest},Tr.prototype.i=function(){return{}},Er=new Tr;function pn(m,S,I,Y){this.j=m,this.i=S,this.l=I,this.R=Y||1,this.U=new sn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new St}function St(){this.i=null,this.g="",this.h=!1}var Ma={},Ss={};function nr(m,S,I){m.L=1,m.v=La(rr(S)),m.m=I,m.P=!0,Fr(m,null)}function Fr(m,S){m.F=Date.now(),Hi(m),m.A=rr(m.v);var I=m.A,Y=m.R;Array.isArray(Y)||(Y=[String(Y)]),Mu(I.i,"t",Y),m.C=0,I=m.j.J,m.h=new St,m.g=cf(m.j,I?S:null,!m.m),0<m.O&&(m.M=new $t(b(m.Y,m,m.g),m.O)),S=m.U,I=m.g,Y=m.ca;var ie="readystatechange";Array.isArray(ie)||(ie&&(Vn[0]=ie.toString()),ie=Vn);for(var de=0;de<ie.length;de++){var be=Ht(I,ie[de],Y||S.handleEvent,!1,S.h||S);if(!be)break;S.g[be.key]=be}S=m.H?x(m.H):{},m.m?(m.u||(m.u="POST"),S["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,S)):(m.u="GET",m.g.ea(m.A,m.u,null,S)),oi(),Da(m.i,m.u,m.A,m.l,m.R,m.m)}pn.prototype.ca=function(m){m=m.target;const S=this.M;S&&Rr(m)==3?S.j():this.Y(m)},pn.prototype.Y=function(m){try{if(m==this.g)e:{const en=Rr(this.g);var S=this.g.Ba();const Xi=this.g.Z();if(!(3>en)&&(en!=3||this.g&&(this.h.h||this.g.oa()||tf(this.g)))){this.J||en!=4||S==7||(S==8||0>=Xi?oi(3):oi(2)),ci(this);var I=this.g.Z();this.X=I;t:if(Pa(this)){var Y=tf(this.g);m="";var ie=Y.length,de=Rr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zt(this),Sr(this);var be="";break t}this.h.i=new c.TextDecoder}for(S=0;S<ie;S++)this.h.h=!0,m+=this.h.i.decode(Y[S],{stream:!(de&&S==ie-1)});Y.length=0,this.h.g+=m,this.C=0,be=this.h.g}else be=this.g.oa();if(this.o=I==200,Cu(this.i,this.u,this.A,this.l,this.R,en,I),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,Jt=this.g;if((Je=Jt.g?Jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(Je)){var et=Je;break t}}et=null}if(I=et)li(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,di(this,I);else{this.o=!1,this.s=3,yt(12),Zt(this),Sr(this);break e}}if(this.P){I=!0;let gn;for(;!this.J&&this.C<be.length;)if(gn=Uo(this,be),gn==Ss){en==4&&(this.s=4,yt(14),I=!1),li(this.i,this.l,null,"[Incomplete Response]");break}else if(gn==Ma){this.s=4,yt(15),li(this.i,this.l,be,"[Invalid Chunk]"),I=!1;break}else li(this.i,this.l,gn,null),di(this,gn);if(Pa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),en!=4||be.length!=0||this.h.h||(this.s=1,yt(16),I=!1),this.o=this.o&&I,!I)li(this.i,this.l,be,"[Invalid Chunked Response]"),Zt(this),Sr(this);else if(0<be.length&&!this.W){this.W=!0;var ln=this.j;ln.g==this&&ln.ba&&!ln.M&&(ln.j.info("Great, no buffering proxy detected. Bytes received: "+be.length),qa(ln),ln.M=!0,yt(11))}}else li(this.i,this.l,be,null),di(this,be);en==4&&Zt(this),this.o&&!this.J&&(en==4?of(this.j,this):(this.o=!1,Hi(this)))}else Ap(this.g),I==400&&0<be.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),Zt(this),Sr(this)}}}catch{}finally{}};function Pa(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Uo(m,S){var I=m.C,Y=S.indexOf(`
`,I);return Y==-1?Ss:(I=Number(S.substring(I,Y)),isNaN(I)?Ma:(Y+=1,Y+I>S.length?Ss:(S=S.slice(Y,Y+I),m.C=Y+I,S)))}pn.prototype.cancel=function(){this.J=!0,Zt(this)};function Hi(m){m.S=Date.now()+m.I,Bo(m,m.I)}function Bo(m,S){if(m.B!=null)throw Error("WatchDog timer not null");m.B=It(b(m.ba,m),S)}function ci(m){m.B&&(c.clearTimeout(m.B),m.B=null)}pn.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(jo(this.i,this.A),this.L!=2&&(oi(),yt(17)),Zt(this),this.s=2,Sr(this)):Bo(this,this.S-m)};function Sr(m){m.j.G==0||m.J||of(m.j,m)}function Zt(m){ci(m);var S=m.M;S&&typeof S.ma=="function"&&S.ma(),m.M=null,Ln(m.U),m.g&&(S=m.g,m.g=null,S.abort(),S.ma())}function di(m,S){try{var I=m.j;if(I.G!=0&&(I.g==m||Ru(I.h,m))){if(!m.K&&Ru(I.h,m)&&I.G==3){try{var Y=I.Da.g.parse(S)}catch{Y=null}if(Array.isArray(Y)&&Y.length==3){var ie=Y;if(ie[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<m.F)Zo(I),Wo(I);else break e;zu(I),yt(18)}}else I.za=ie[1],0<I.za-I.T&&37500>ie[2]&&I.F&&I.v==0&&!I.C&&(I.C=It(b(I.Za,I),6e3));if(1>=fi(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Ki(I,11)}else if((m.K||I.g==m)&&Zo(I),!F(S))for(ie=I.Da.g.parse(S),S=0;S<ie.length;S++){let et=ie[S];if(I.T=et[0],et=et[1],I.G==2)if(et[0]=="c"){I.K=et[1],I.ia=et[2];const ln=et[3];ln!=null&&(I.la=ln,I.j.info("VER="+I.la));const en=et[4];en!=null&&(I.Aa=en,I.j.info("SVER="+I.Aa));const Xi=et[5];Xi!=null&&typeof Xi=="number"&&0<Xi&&(Y=1.5*Xi,I.L=Y,I.j.info("backChannelRequestTimeoutMs_="+Y)),Y=I;const gn=m.g;if(gn){const _i=gn.g?gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_i){var de=Y.h;de.g||_i.indexOf("spdy")==-1&&_i.indexOf("quic")==-1&&_i.indexOf("h2")==-1||(de.j=de.l,de.g=new Set,de.h&&(Fo(de,de.h),de.h=null))}if(Y.D){const Uu=gn.g?gn.g.getResponseHeader("X-HTTP-Session-Id"):null;Uu&&(Y.ya=Uu,ft(Y.I,Y.D,Uu))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-m.F,I.j.info("Handshake RTT: "+I.R+"ms")),Y=I;var be=m;if(Y.qa=uf(Y,Y.J?Y.ia:null,Y.W),be.K){jn(Y.h,be);var Je=be,Jt=Y.L;Jt&&(Je.I=Jt),Je.B&&(ci(Je),Hi(Je)),Y.g=be}else sf(Y);0<I.i.length&&Qo(I)}else et[0]!="stop"&&et[0]!="close"||Ki(I,7);else I.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Ki(I,7):Vu(I):et[0]!="noop"&&I.l&&I.l.ta(et),I.v=0)}}oi(4)}catch{}}var Ho=class{constructor(m,S){this.g=m,this.map=S}};function $r(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xs(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function fi(m){return m.h?1:m.g?m.g.size:0}function Ru(m,S){return m.h?m.h==S:m.g?m.g.has(S):!1}function Fo(m,S){m.g?m.g.add(S):m.h=S}function jn(m,S){m.h&&m.h==S?m.h=null:m.g&&m.g.has(S)&&m.g.delete(S)}$r.prototype.cancel=function(){if(this.i=ku(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function ku(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let S=m.i;for(const I of m.g.values())S=S.concat(I.D);return S}return V(m.i)}function Ep(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(f(m)){for(var S=[],I=m.length,Y=0;Y<I;Y++)S.push(m[Y]);return S}S=[],I=0;for(Y in m)S[I++]=m[Y];return S}function $o(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(f(m)||typeof m=="string"){var S=[];m=m.length;for(var I=0;I<m;I++)S.push(I);return S}S=[],I=0;for(const Y in m)S[I++]=Y;return S}}}function Iu(m,S){if(m.forEach&&typeof m.forEach=="function")m.forEach(S,void 0);else if(f(m)||typeof m=="string")Array.prototype.forEach.call(m,S,void 0);else for(var I=$o(m),Y=Ep(m),ie=Y.length,de=0;de<ie;de++)S.call(void 0,Y[de],I&&I[de],m)}var Oa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tp(m,S){if(m){m=m.split("&");for(var I=0;I<m.length;I++){var Y=m[I].indexOf("="),ie=null;if(0<=Y){var de=m[I].substring(0,Y);ie=m[I].substring(Y+1)}else de=m[I];S(de,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function qt(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof qt){this.h=m.h,Va(this,m.j),this.o=m.o,this.g=m.g,As(this,m.s),this.l=m.l;var S=m.i,I=new $i;I.i=S.i,S.g&&(I.g=new Map(S.g),I.h=S.h),Fi(this,I),this.m=m.m}else m&&(S=String(m).match(Oa))?(this.h=!1,Va(this,S[1]||"",!0),this.o=xr(S[2]||""),this.g=xr(S[3]||"",!0),As(this,S[4]),this.l=xr(S[5]||"",!0),Fi(this,S[6]||"",!0),this.m=xr(S[7]||"")):(this.h=!1,this.i=new $i(null,this.h))}qt.prototype.toString=function(){var m=[],S=this.j;S&&m.push(za(S,Nu,!0),":");var I=this.g;return(I||S=="file")&&(m.push("//"),(S=this.o)&&m.push(za(S,Nu,!0),"@"),m.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&m.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&m.push("/"),m.push(za(I,I.charAt(0)=="/"?Sp:Du,!0))),(I=this.i.toString())&&m.push("?",I),(I=this.m)&&m.push("#",za(I,qo)),m.join("")};function rr(m){return new qt(m)}function Va(m,S,I){m.j=I?xr(S,!0):S,m.j&&(m.j=m.j.replace(/:$/,""))}function As(m,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);m.s=S}else m.s=null}function Fi(m,S,I){S instanceof $i?(m.i=S,Jd(m.i,m.h)):(I||(S=za(S,xp)),m.i=new $i(S,m.h))}function ft(m,S,I){m.i.set(S,I)}function La(m){return ft(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function xr(m,S){return m?S?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function za(m,S,I){return typeof m=="string"?(m=encodeURI(m).replace(S,Zd),I&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Zd(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Nu=/[#\/\?@]/g,Du=/[#\?:]/g,Sp=/[#\?]/g,xp=/[#\?@]/g,qo=/#/g;function $i(m,S){this.h=this.g=null,this.i=m||null,this.j=!!S}function Ar(m){m.g||(m.g=new Map,m.h=0,m.i&&Tp(m.i,function(S,I){m.add(decodeURIComponent(S.replace(/\+/g," ")),I)}))}t=$i.prototype,t.add=function(m,S){Ar(this),this.i=null,m=hi(this,m);var I=this.g.get(m);return I||this.g.set(m,I=[]),I.push(S),this.h+=1,this};function qi(m,S){Ar(m),S=hi(m,S),m.g.has(S)&&(m.i=null,m.h-=m.g.get(S).length,m.g.delete(S))}function Gi(m,S){return Ar(m),S=hi(m,S),m.g.has(S)}t.forEach=function(m,S){Ar(this),this.g.forEach(function(I,Y){I.forEach(function(ie){m.call(S,ie,Y,this)},this)},this)},t.na=function(){Ar(this);const m=Array.from(this.g.values()),S=Array.from(this.g.keys()),I=[];for(let Y=0;Y<S.length;Y++){const ie=m[Y];for(let de=0;de<ie.length;de++)I.push(S[Y])}return I},t.V=function(m){Ar(this);let S=[];if(typeof m=="string")Gi(this,m)&&(S=S.concat(this.g.get(hi(this,m))));else{m=Array.from(this.g.values());for(let I=0;I<m.length;I++)S=S.concat(m[I])}return S},t.set=function(m,S){return Ar(this),this.i=null,m=hi(this,m),Gi(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[S]),this.h+=1,this},t.get=function(m,S){return m?(m=this.V(m),0<m.length?String(m[0]):S):S};function Mu(m,S,I){qi(m,S),0<I.length&&(m.i=null,m.g.set(hi(m,S),V(I)),m.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],S=Array.from(this.g.keys());for(var I=0;I<S.length;I++){var Y=S[I];const de=encodeURIComponent(String(Y)),be=this.V(Y);for(Y=0;Y<be.length;Y++){var ie=de;be[Y]!==""&&(ie+="="+encodeURIComponent(String(be[Y]))),m.push(ie)}}return this.i=m.join("&")};function hi(m,S){return S=String(S),m.j&&(S=S.toLowerCase()),S}function Jd(m,S){S&&!m.j&&(Ar(m),m.i=null,m.g.forEach(function(I,Y){var ie=Y.toLowerCase();Y!=ie&&(qi(this,Y),Mu(this,ie,I))},m)),m.j=S}function ja(m,S){const I=new $n;if(c.Image){const Y=new Image;Y.onload=A(Cr,I,"TestLoadImage: loaded",!0,S,Y),Y.onerror=A(Cr,I,"TestLoadImage: error",!1,S,Y),Y.onabort=A(Cr,I,"TestLoadImage: abort",!1,S,Y),Y.ontimeout=A(Cr,I,"TestLoadImage: timeout",!1,S,Y),c.setTimeout(function(){Y.ontimeout&&Y.ontimeout()},1e4),Y.src=m}else S(!1)}function qr(m,S){const I=new $n,Y=new AbortController,ie=setTimeout(()=>{Y.abort(),Cr(I,"TestPingServer: timeout",!1,S)},1e4);fetch(m,{signal:Y.signal}).then(de=>{clearTimeout(ie),de.ok?Cr(I,"TestPingServer: ok",!0,S):Cr(I,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(ie),Cr(I,"TestPingServer: error",!1,S)})}function Cr(m,S,I,Y,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),Y(I)}catch{}}function Ua(){this.g=new zn}function mi(m,S,I){const Y=I||"";try{Iu(m,function(ie,de){let be=ie;h(ie)&&(be=an(ie)),S.push(Y+de+"="+encodeURIComponent(be))})}catch(ie){throw S.push(Y+"type="+encodeURIComponent("_badmap")),ie}}function Cs(m){this.l=m.Ub||null,this.j=m.eb||!1}O(Cs,ji),Cs.prototype.g=function(){return new Yi(this.l,this.j)},Cs.prototype.i=function(m){return function(){return m}}({});function Yi(m,S){ot.call(this),this.D=m,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(Yi,ot),t=Yi.prototype,t.open=function(m,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=S,this.readyState=1,gi(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const S={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(S.body=m),(this.D||c).fetch(new Request(this.A,S)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pi(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,gi(this)),this.g&&(this.readyState=3,gi(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pu(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pu(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var S=m.value?m.value:new Uint8Array(0);(S=this.v.decode(S,{stream:!m.done}))&&(this.response=this.responseText+=S)}m.done?pi(this):gi(this),this.readyState==3&&Pu(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,pi(this))},t.Qa=function(m){this.g&&(this.response=m,pi(this))},t.ga=function(){this.g&&pi(this)};function pi(m){m.readyState=4,m.l=null,m.j=null,m.v=null,gi(m)}t.setRequestHeader=function(m,S){this.u.append(m,S)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],S=this.h.entries();for(var I=S.next();!I.done;)I=I.value,m.push(I[0]+": "+I[1]),I=S.next();return m.join(`\r
`)};function gi(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Yi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Ou(m){let S="";return w(m,function(I,Y){S+=Y,S+=":",S+=I,S+=`\r
`}),S}function on(m,S,I){e:{for(Y in I){var Y=!1;break e}Y=!0}Y||(I=Ou(I),typeof m=="string"?I!=null&&encodeURIComponent(String(I)):ft(m,S,I))}function lt(m){ot.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(lt,ot);var Go=/^https?$/i,Ba=["POST","PUT"];t=lt.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,S,I,Y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);S=S?S.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Er.g(),this.v=this.o?Ui(this.o):Ui(Er),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(S,String(m),!0),this.B=!1}catch(de){ef(this,de);return}if(m=I||"",I=new Map(this.headers),Y)if(Object.getPrototypeOf(Y)===Object.prototype)for(var ie in Y)I.set(ie,Y[ie]);else if(typeof Y.keys=="function"&&typeof Y.get=="function")for(const de of Y.keys())I.set(de,Y.get(de));else throw Error("Unknown input type for opt_headers: "+String(Y));Y=Array.from(I.keys()).find(de=>de.toLowerCase()=="content-type"),ie=c.FormData&&m instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Ba,S,void 0))||Y||ie||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[de,be]of I)this.g.setRequestHeader(de,be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ha(this),this.u=!0,this.g.send(m),this.u=!1}catch(de){ef(this,de)}};function ef(m,S){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=S,m.m=5,Yo(m),yi(m)}function Yo(m){m.A||(m.A=!0,Ge(m,"complete"),Ge(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Ge(this,"complete"),Ge(this,"abort"),yi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yi(this,!0)),lt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ko(this):this.bb())},t.bb=function(){Ko(this)};function Ko(m){if(m.h&&typeof u<"u"&&(!m.v[1]||Rr(m)!=4||m.Z()!=2)){if(m.u&&Rr(m)==4)Tt(m.Ea,0,m);else if(Ge(m,"readystatechange"),Rr(m)==4){m.h=!1;try{const be=m.Z();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var I;if(!(I=S)){var Y;if(Y=be===0){var ie=String(m.D).match(Oa)[1]||null;!ie&&c.self&&c.self.location&&(ie=c.self.location.protocol.slice(0,-1)),Y=!Go.test(ie?ie.toLowerCase():"")}I=Y}if(I)Ge(m,"complete"),Ge(m,"success");else{m.m=6;try{var de=2<Rr(m)?m.g.statusText:""}catch{de=""}m.l=de+" ["+m.Z()+"]",Yo(m)}}finally{yi(m)}}}}function yi(m,S){if(m.g){Ha(m);const I=m.g,Y=m.v[0]?()=>{}:null;m.g=null,m.v=null,S||Ge(m,"ready");try{I.onreadystatechange=Y}catch{}}}function Ha(m){m.I&&(c.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function Rr(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<Rr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var S=this.g.responseText;return m&&S.indexOf(m)==0&&(S=S.substring(m.length)),mn(S)}};function tf(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Ap(m){const S={};m=(m.g&&2<=Rr(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let Y=0;Y<m.length;Y++){if(F(m[Y]))continue;var I=N(m[Y]);const ie=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const de=S[ie]||[];S[ie]=de,de.push(I)}T(S,function(Y){return Y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fa(m,S,I){return I&&I.internalChannelParams&&I.internalChannelParams[m]||S}function Xo(m){this.Aa=0,this.i=[],this.j=new $n,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fa("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fa("baseRetryDelayMs",5e3,m),this.cb=Fa("retryDelaySeedMs",1e4,m),this.Wa=Fa("forwardChannelMaxRetries",2,m),this.wa=Fa("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new $r(m&&m.concurrentRequestLimit),this.Da=new Ua,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Xo.prototype,t.la=8,t.G=1,t.connect=function(m,S,I,Y){yt(0),this.W=m,this.H=S||{},I&&Y!==void 0&&(this.H.OSID=I,this.H.OAID=Y),this.F=this.X,this.I=uf(this,null,this.W),Qo(this)};function Vu(m){if(nf(m),m.G==3){var S=m.U++,I=rr(m.I);if(ft(I,"SID",m.K),ft(I,"RID",S),ft(I,"TYPE","terminate"),$a(m,I),S=new pn(m,m.j,S),S.L=2,S.v=La(rr(I)),I=!1,c.navigator&&c.navigator.sendBeacon)try{I=c.navigator.sendBeacon(S.v.toString(),"")}catch{}!I&&c.Image&&(new Image().src=S.v,I=!0),I||(S.g=cf(S.j,null),S.g.ea(S.v)),S.F=Date.now(),Hi(S)}lf(m)}function Wo(m){m.g&&(qa(m),m.g.cancel(),m.g=null)}function nf(m){Wo(m),m.u&&(c.clearTimeout(m.u),m.u=null),Zo(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&c.clearTimeout(m.s),m.s=null)}function Qo(m){if(!xs(m.h)&&!m.s){m.s=!0;var S=m.Ga;q||B(),Q||(q(),Q=!0),W.add(S,m),m.B=0}}function Cp(m,S){return fi(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=S.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=It(b(m.Ga,m,S),ju(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const ie=new pn(this,this.j,m);let de=this.o;if(this.S&&(de?(de=x(de),k(de,this.S)):de=this.S),this.m!==null||this.O||(ie.H=de,de=null),this.P)e:{for(var S=0,I=0;I<this.i.length;I++){t:{var Y=this.i[I];if("__data__"in Y.map&&(Y=Y.map.__data__,typeof Y=="string")){Y=Y.length;break t}Y=void 0}if(Y===void 0)break;if(S+=Y,4096<S){S=I;break e}if(S===4096||I===this.i.length-1){S=I+1;break e}}S=1e3}else S=1e3;S=rf(this,ie,S),I=rr(this.I),ft(I,"RID",m),ft(I,"CVER",22),this.D&&ft(I,"X-HTTP-Session-Id",this.D),$a(this,I),de&&(this.O?S="headers="+encodeURIComponent(String(Ou(de)))+"&"+S:this.m&&on(I,this.m,de)),Fo(this.h,ie),this.Ua&&ft(I,"TYPE","init"),this.P?(ft(I,"$req",S),ft(I,"SID","null"),ie.T=!0,nr(ie,I,null)):nr(ie,I,S),this.G=2}}else this.G==3&&(m?Lu(this,m):this.i.length==0||xs(this.h)||Lu(this))};function Lu(m,S){var I;S?I=S.l:I=m.U++;const Y=rr(m.I);ft(Y,"SID",m.K),ft(Y,"RID",I),ft(Y,"AID",m.T),$a(m,Y),m.m&&m.o&&on(Y,m.m,m.o),I=new pn(m,m.j,I,m.B+1),m.m===null&&(I.H=m.o),S&&(m.i=S.D.concat(m.i)),S=rf(m,I,1e3),I.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Fo(m.h,I),nr(I,Y,S)}function $a(m,S){m.H&&w(m.H,function(I,Y){ft(S,Y,I)}),m.l&&Iu({},function(I,Y){ft(S,Y,I)})}function rf(m,S,I){I=Math.min(m.i.length,I);var Y=m.l?b(m.l.Na,m.l,m):null;e:{var ie=m.i;let de=-1;for(;;){const be=["count="+I];de==-1?0<I?(de=ie[0].g,be.push("ofs="+de)):de=0:be.push("ofs="+de);let Je=!0;for(let Jt=0;Jt<I;Jt++){let et=ie[Jt].g;const ln=ie[Jt].map;if(et-=de,0>et)de=Math.max(0,ie[Jt].g-100),Je=!1;else try{mi(ln,be,"req"+et+"_")}catch{Y&&Y(ln)}}if(Je){Y=be.join("&");break e}}}return m=m.i.splice(0,I),S.D=m,Y}function sf(m){if(!m.g&&!m.u){m.Y=1;var S=m.Fa;q||B(),Q||(q(),Q=!0),W.add(S,m),m.v=0}}function zu(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=It(b(m.Fa,m),ju(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,af(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=It(b(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),Wo(this),af(this))};function qa(m){m.A!=null&&(c.clearTimeout(m.A),m.A=null)}function af(m){m.g=new pn(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var S=rr(m.qa);ft(S,"RID","rpc"),ft(S,"SID",m.K),ft(S,"AID",m.T),ft(S,"CI",m.F?"0":"1"),!m.F&&m.ja&&ft(S,"TO",m.ja),ft(S,"TYPE","xmlhttp"),$a(m,S),m.m&&m.o&&on(S,m.m,m.o),m.L&&(m.g.I=m.L);var I=m.g;m=m.ia,I.L=1,I.v=La(rr(S)),I.m=null,I.P=!0,Fr(I,m)}t.Za=function(){this.C!=null&&(this.C=null,Wo(this),zu(this),yt(19))};function Zo(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function of(m,S){var I=null;if(m.g==S){Zo(m),qa(m),m.g=null;var Y=2}else if(Ru(m.h,S))I=S.D,jn(m.h,S),Y=1;else return;if(m.G!=0){if(S.o)if(Y==1){I=S.m?S.m.length:0,S=Date.now()-S.F;var ie=m.B;Y=ai(),Ge(Y,new Lt(Y,I)),Qo(m)}else sf(m);else if(ie=S.s,ie==3||ie==0&&0<S.X||!(Y==1&&Cp(m,S)||Y==2&&zu(m)))switch(I&&0<I.length&&(S=m.h,S.i=S.i.concat(I)),ie){case 1:Ki(m,5);break;case 4:Ki(m,10);break;case 3:Ki(m,6);break;default:Ki(m,2)}}}function ju(m,S){let I=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(I*=2),I*S}function Ki(m,S){if(m.j.info("Error code "+S),S==2){var I=b(m.fb,m),Y=m.Xa;const ie=!Y;Y=new qt(Y||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Va(Y,"https"),La(Y),ie?ja(Y.toString(),I):qr(Y.toString(),I)}else yt(2);m.G=0,m.l&&m.l.sa(S),lf(m),nf(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function lf(m){if(m.G=0,m.ka=[],m.l){const S=ku(m.h);(S.length!=0||m.i.length!=0)&&(z(m.ka,S),z(m.ka,m.i),m.h.i.length=0,V(m.i),m.i.length=0),m.l.ra()}}function uf(m,S,I){var Y=I instanceof qt?rr(I):new qt(I);if(Y.g!="")S&&(Y.g=S+"."+Y.g),As(Y,Y.s);else{var ie=c.location;Y=ie.protocol,S=S?S+"."+ie.hostname:ie.hostname,ie=+ie.port;var de=new qt(null);Y&&Va(de,Y),S&&(de.g=S),ie&&As(de,ie),I&&(de.l=I),Y=de}return I=m.D,S=m.ya,I&&S&&ft(Y,I,S),ft(Y,"VER",m.la),$a(m,Y),Y}function cf(m,S,I){if(S&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return S=m.Ca&&!m.pa?new lt(new Cs({eb:I})):new lt(m.pa),S.Ha(m.J),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function df(){}t=df.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Jo(){}Jo.prototype.g=function(m,S){return new Un(m,S)};function Un(m,S){ot.call(this),this.g=new Xo(S),this.l=m,this.h=S&&S.messageUrlParams||null,m=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(m?m["X-WebChannel-Content-Type"]=S.messageContentType:m={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.va&&(m?m["X-WebChannel-Client-Profile"]=S.va:m={"X-WebChannel-Client-Profile":S.va}),this.g.S=m,(m=S&&S.Sb)&&!F(m)&&(this.g.m=m),this.v=S&&S.supportsCrossDomainXhr||!1,this.u=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!F(S)&&(this.g.D=S,m=this.h,m!==null&&S in m&&(m=this.h,S in m&&delete m[S])),this.j=new vi(this)}O(Un,ot),Un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){Vu(this.g)},Un.prototype.o=function(m){var S=this.g;if(typeof m=="string"){var I={};I.__data__=m,m=I}else this.u&&(I={},I.__data__=an(m),m=I);S.i.push(new Ho(S.Ya++,m)),S.G==3&&Qo(S)},Un.prototype.N=function(){this.g.l=null,delete this.j,Vu(this.g),delete this.g,Un.aa.N.call(this)};function ff(m){_r.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var S=m.__sm__;if(S){e:{for(const I in S){m=I;break e}m=void 0}(this.i=m)&&(m=this.i,S=S!==null&&m in S?S[m]:void 0),this.data=S}else this.data=m}O(ff,_r);function hf(){tr.call(this),this.status=1}O(hf,tr);function vi(m){this.g=m}O(vi,df),vi.prototype.ua=function(){Ge(this.g,"a")},vi.prototype.ta=function(m){Ge(this.g,new ff(m))},vi.prototype.sa=function(m){Ge(this.g,new hf)},vi.prototype.ra=function(){Ge(this.g,"b")},Jo.prototype.createWebChannel=Jo.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,hC=function(){return new Jo},fC=function(){return ai()},dC=br,U0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ui.NO_ERROR=0,ui.TIMEOUT=8,ui.HTTP_ERROR=6,Uh=ui,wr.COMPLETE="complete",cC=wr,Hr.EventType=er,er.OPEN="a",er.CLOSE="b",er.ERROR="c",er.MESSAGE="d",ot.prototype.listen=ot.prototype.K,Fc=Hr,lt.prototype.listenOnce=lt.prototype.L,lt.prototype.getLastError=lt.prototype.Ka,lt.prototype.getLastErrorCode=lt.prototype.Ba,lt.prototype.getStatus=lt.prototype.Z,lt.prototype.getResponseJson=lt.prototype.Oa,lt.prototype.getResponseText=lt.prototype.oa,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Ha,uC=lt}).apply(typeof Sh<"u"?Sh:typeof self<"u"?self:typeof window<"u"?window:{});const yS="@firebase/firestore",vS="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rn.UNAUTHENTICATED=new Rn(null),Rn.GOOGLE_CREDENTIALS=new Rn("google-credentials-uid"),Rn.FIRST_PARTY=new Rn("first-party-uid"),Rn.MOCK_USER=new Rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yu="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=new Jv("@firebase/firestore");function Ol(){return Co.logLevel}function Se(t,...e){if(Co.logLevel<=Xe.DEBUG){const n=e.map(r_);Co.debug(`Firestore (${yu}): ${t}`,...n)}}function vs(t,...e){if(Co.logLevel<=Xe.ERROR){const n=e.map(r_);Co.error(`Firestore (${yu}): ${t}`,...n)}}function ou(t,...e){if(Co.logLevel<=Xe.WARN){const n=e.map(r_);Co.warn(`Firestore (${yu}): ${t}`,...n)}}function r_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,mC(t,r,n)}function mC(t,e,n){let r=`FIRESTORE (${yu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw vs(r),new Error(r)}function ut(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||mC(e,s,r)}function ze(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends zi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Rn.UNAUTHENTICATED))}shutdown(){}}class kL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class IL{constructor(e){this.t=e,this.currentUser=Rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ut(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let o=new ha;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ha,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const f=o;e.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},c=f=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(f=>c(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?c(f):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ha)}},0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ut(typeof r.accessToken=="string",31837,{l:r}),new pC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ut(e===null||typeof e=="string",2055,{h:e}),new Rn(e)}}class NL{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class DL{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new NL(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _S{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ML{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ut(this.o===void 0,3512);const r=o=>{o.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,Se("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new _S(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ut(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new _S(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=PL(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function Fe(t,e){return t<e?-1:t>e?1:0}function B0(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return Fe(r,s);{const o=gC(),u=OL(o.encode(bS(t,n)),o.encode(bS(e,n)));return u!==0?u:Fe(r,s)}}n+=r>65535?2:1}return Fe(t.length,e.length)}function bS(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function OL(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Fe(t[n],e[n]);return Fe(t.length,e.length)}function lu(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=-62135596800,ES=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*ES);return new bt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new xe(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xe(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<wS)throw new xe(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ES}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-wS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new bt(0,0))}static max(){return new Le(new bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="__name__";class Ai{constructor(e,n,r){n===void 0?n=0:n>e.length&&Me(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Me(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ai.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ai?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=Ai.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return Fe(e.length,n.length)}static compareSegments(e,n){const r=Ai.isNumericId(e),s=Ai.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ai.extractNumericId(e).compare(Ai.extractNumericId(n)):B0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fa.fromString(e.substring(4,e.length-2))}}class _t extends Ai{construct(e,n,r){return new _t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new _t(n)}static emptyPath(){return new _t([])}}const VL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class En extends Ai{construct(e,n,r){return new En(e,n,r)}static isValidIdentifier(e){return VL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),En.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===TS}static keyField(){return new En([TS])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new xe(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let u=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new xe(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new xe(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else c==="`"?(u=!u,s++):c!=="."||u?(r+=c,s++):(o(),s++)}if(o(),u)throw new xe(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new En(n)}static emptyPath(){return new En([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.path=e}static fromPath(e){return new ke(_t.fromString(e))}static fromName(e){return new ke(_t.fromString(e).popFirst(5))}static empty(){return new ke(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _t.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new _t(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd=-1;function LL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Le.fromTimestamp(r===1e9?new bt(n+1,0):new bt(n,r));return new va(s,ke.empty(),e)}function zL(t){return new va(t.readTime,t.key,pd)}class va{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new va(Le.min(),ke.empty(),pd)}static max(){return new va(Le.max(),ke.empty(),pd)}}function jL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ke.comparator(t.documentKey,e.documentKey),n!==0?n:Fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vu(t){if(t.code!==ve.FAILED_PRECONDITION||t.message!==UL)throw t;Se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new _e((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof _e?n:_e.resolve(n)}catch(n){return _e.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):_e.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):_e.reject(n)}static resolve(e){return new _e((n,r)=>{n(e)})}static reject(e){return new _e((n,r)=>{r(e)})}static waitFor(e){return new _e((n,r)=>{let s=0,o=0,u=!1;e.forEach(c=>{++s,c.next(()=>{++o,u&&o===s&&n()},f=>r(f))}),u=!0,o===s&&n()})}static or(e){let n=_e.resolve(!1);for(const r of e)n=n.next(s=>s?_e.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,o)=>{r.push(n.call(this,s,o))}),this.waitFor(r)}static mapArray(e,n){return new _e((r,s)=>{const o=e.length,u=new Array(o);let c=0;for(let f=0;f<o;f++){const h=f;n(e[h]).next(p=>{u[h]=p,++c,c===o&&r(u)},p=>s(p))}})}static doWhile(e,n){return new _e((r,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):r()};o()})}}function HL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _u(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Xm.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_=-1;function Wm(t){return t==null}function pm(t){return t===0&&1/t==-1/0}function FL(t){return typeof t=="number"&&Number.isInteger(t)&&!pm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="";function $L(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=SS(e)),e=qL(t.get(n),e);return SS(e)}function qL(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case vC:n+="";break;default:n+=o}}return n}function SS(t){return t+vC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Aa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _C(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n){this.comparator=e,this.root=n||wn.EMPTY}insert(e,n){return new Rt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wn.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xh(this.root,e,this.comparator,!1)}getReverseIterator(){return new xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xh(this.root,e,this.comparator,!0)}}class xh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wn{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??wn.RED,this.left=s??wn.EMPTY,this.right=o??wn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new wn(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return wn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return wn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}wn.EMPTY=null,wn.RED=!0,wn.BLACK=!1;wn.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,n,r,s,o){return this}insert(e,n,r){return new wn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new AS(this.data.getIterator())}getIteratorFrom(e){return new AS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof rn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new rn(this.comparator);return n.data=e,n}}class AS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.fields=e,e.sort(En.comparator)}static empty(){return new mr([])}unionWith(e){let n=new rn(En.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new mr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return lu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new bC("Invalid base64 string: "+o):o}}(e);return new Tn(n)}static fromUint8Array(e){const n=function(s){let o="";for(let u=0;u<s.length;++u)o+=String.fromCharCode(s[u]);return o}(e);return new Tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tn.EMPTY_BYTE_STRING=new Tn("");const GL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _a(t){if(ut(!!t,39018),typeof t=="string"){let e=0;const n=GL.exec(t);if(ut(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Bt(t.seconds),nanos:Bt(t.nanos)}}function Bt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ba(t){return typeof t=="string"?Tn.fromBase64String(t):Tn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="server_timestamp",EC="__type__",TC="__previous_value__",SC="__local_write_time__";function s_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[EC])===null||n===void 0?void 0:n.stringValue)===wC}function Qm(t){const e=t.mapValue.fields[TC];return s_(e)?Qm(e):e}function gd(t){const e=_a(t.mapValue.fields[SC].timestampValue);return new bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e,n,r,s,o,u,c,f,h,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=c,this.longPollingOptions=f,this.useFetchStreams=h,this.isUsingEmulator=p}}const gm="(default)";class yd{constructor(e,n){this.projectId=e,this.database=n||gm}static empty(){return new yd("","")}get isDefaultDatabase(){return this.database===gm}isEqual(e){return e instanceof yd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC="__type__",KL="__max__",Ah={mapValue:{}},AC="__vector__",ym="value";function wa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?s_(t)?4:WL(t)?9007199254740991:XL(t)?10:11:Me(28295,{value:t})}function Vi(t,e){if(t===e)return!0;const n=wa(t);if(n!==wa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gd(t).isEqual(gd(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const u=_a(s.timestampValue),c=_a(o.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return ba(s.bytesValue).isEqual(ba(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return Bt(s.geoPointValue.latitude)===Bt(o.geoPointValue.latitude)&&Bt(s.geoPointValue.longitude)===Bt(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Bt(s.integerValue)===Bt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const u=Bt(s.doubleValue),c=Bt(o.doubleValue);return u===c?pm(u)===pm(c):isNaN(u)&&isNaN(c)}return!1}(t,e);case 9:return lu(t.arrayValue.values||[],e.arrayValue.values||[],Vi);case 10:case 11:return function(s,o){const u=s.mapValue.fields||{},c=o.mapValue.fields||{};if(xS(u)!==xS(c))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(c[f]===void 0||!Vi(u[f],c[f])))return!1;return!0}(t,e);default:return Me(52216,{left:t})}}function vd(t,e){return(t.values||[]).find(n=>Vi(n,e))!==void 0}function uu(t,e){if(t===e)return 0;const n=wa(t),r=wa(e);if(n!==r)return Fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(t.booleanValue,e.booleanValue);case 2:return function(o,u){const c=Bt(o.integerValue||o.doubleValue),f=Bt(u.integerValue||u.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(t,e);case 3:return CS(t.timestampValue,e.timestampValue);case 4:return CS(gd(t),gd(e));case 5:return B0(t.stringValue,e.stringValue);case 6:return function(o,u){const c=ba(o),f=ba(u);return c.compareTo(f)}(t.bytesValue,e.bytesValue);case 7:return function(o,u){const c=o.split("/"),f=u.split("/");for(let h=0;h<c.length&&h<f.length;h++){const p=Fe(c[h],f[h]);if(p!==0)return p}return Fe(c.length,f.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,u){const c=Fe(Bt(o.latitude),Bt(u.latitude));return c!==0?c:Fe(Bt(o.longitude),Bt(u.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return RS(t.arrayValue,e.arrayValue);case 10:return function(o,u){var c,f,h,p;const _=o.fields||{},b=u.fields||{},A=(c=_[ym])===null||c===void 0?void 0:c.arrayValue,O=(f=b[ym])===null||f===void 0?void 0:f.arrayValue,V=Fe(((h=A?.values)===null||h===void 0?void 0:h.length)||0,((p=O?.values)===null||p===void 0?void 0:p.length)||0);return V!==0?V:RS(A,O)}(t.mapValue,e.mapValue);case 11:return function(o,u){if(o===Ah.mapValue&&u===Ah.mapValue)return 0;if(o===Ah.mapValue)return 1;if(u===Ah.mapValue)return-1;const c=o.fields||{},f=Object.keys(c),h=u.fields||{},p=Object.keys(h);f.sort(),p.sort();for(let _=0;_<f.length&&_<p.length;++_){const b=B0(f[_],p[_]);if(b!==0)return b;const A=uu(c[f[_]],h[p[_]]);if(A!==0)return A}return Fe(f.length,p.length)}(t.mapValue,e.mapValue);default:throw Me(23264,{Pe:n})}}function CS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Fe(t,e);const n=_a(t),r=_a(e),s=Fe(n.seconds,r.seconds);return s!==0?s:Fe(n.nanos,r.nanos)}function RS(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=uu(n[s],r[s]);if(o)return o}return Fe(n.length,r.length)}function cu(t){return H0(t)}function H0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=_a(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ba(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ke.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=H0(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const u of r)o?o=!1:s+=",",s+=`${u}:${H0(n.fields[u])}`;return s+"}"}(t.mapValue):Me(61005,{value:t})}function Bh(t){switch(wa(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qm(t);return e?16+Bh(e):16;case 5:return 2*t.stringValue.length;case 6:return ba(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+Bh(o),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Aa(r.fields,(o,u)=>{s+=o.length+Bh(u)}),s}(t.mapValue);default:throw Me(13486,{value:t})}}function kS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function F0(t){return!!t&&"integerValue"in t}function a_(t){return!!t&&"arrayValue"in t}function IS(t){return!!t&&"nullValue"in t}function NS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hh(t){return!!t&&"mapValue"in t}function XL(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[xC])===null||n===void 0?void 0:n.stringValue)===AC}function Kc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Aa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Kc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Kc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function WL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===KL}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.value=e}static empty(){return new Xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Hh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kc(n)}setAll(e){let n=En.emptyPath(),r={},s=[];e.forEach((u,c)=>{if(!n.isImmediateParentOf(c)){const f=this.getFieldsMap(n);this.applyChanges(f,r,s),r={},s=[],n=c.popLast()}u?r[c.lastSegment()]=Kc(u):s.push(c.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());Hh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Hh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Aa(n,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new Xn(Kc(this.value))}}function CC(t){const e=[];return Aa(t.fields,(n,r)=>{const s=new En([n]);if(Hh(r)){const o=CC(r.mapValue).fields;if(o.length===0)e.push(s);else for(const u of o)e.push(s.child(u))}else e.push(s)}),new mr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n,r,s,o,u,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=u,this.documentState=c}static newInvalidDocument(e){return new In(e,0,Le.min(),Le.min(),Le.min(),Xn.empty(),0)}static newFoundDocument(e,n,r,s){return new In(e,1,n,Le.min(),r,s,0)}static newNoDocument(e,n){return new In(e,2,n,Le.min(),Le.min(),Xn.empty(),0)}static newUnknownDocument(e,n){return new In(e,3,n,Le.min(),Le.min(),Xn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof In&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new In(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n){this.position=e,this.inclusive=n}}function DS(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],u=t.position[s];if(o.field.isKeyField()?r=ke.comparator(ke.fromName(u.referenceValue),n.key):r=uu(u,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function MS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,n="asc"){this.field=e,this.dir=n}}function QL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{}class Wt extends RC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new JL(e,n,r):n==="array-contains"?new n9(e,r):n==="in"?new r9(e,r):n==="not-in"?new i9(e,r):n==="array-contains-any"?new s9(e,r):new Wt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new e9(e,r):new t9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(uu(n,this.value)):n!==null&&wa(this.value)===wa(n)&&this.matchesComparison(uu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ei extends RC{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new ei(e,n)}matches(e){return kC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function kC(t){return t.op==="and"}function IC(t){return ZL(t)&&kC(t)}function ZL(t){for(const e of t.filters)if(e instanceof ei)return!1;return!0}function $0(t){if(t instanceof Wt)return t.field.canonicalString()+t.op.toString()+cu(t.value);if(IC(t))return t.filters.map(e=>$0(e)).join(",");{const e=t.filters.map(n=>$0(n)).join(",");return`${t.op}(${e})`}}function NC(t,e){return t instanceof Wt?function(r,s){return s instanceof Wt&&r.op===s.op&&r.field.isEqual(s.field)&&Vi(r.value,s.value)}(t,e):t instanceof ei?function(r,s){return s instanceof ei&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,u,c)=>o&&NC(u,s.filters[c]),!0):!1}(t,e):void Me(19439)}function DC(t){return t instanceof Wt?function(n){return`${n.field.canonicalString()} ${n.op} ${cu(n.value)}`}(t):t instanceof ei?function(n){return n.op.toString()+" {"+n.getFilters().map(DC).join(" ,")+"}"}(t):"Filter"}class JL extends Wt{constructor(e,n,r){super(e,n,r),this.key=ke.fromName(r.referenceValue)}matches(e){const n=ke.comparator(e.key,this.key);return this.matchesComparison(n)}}class e9 extends Wt{constructor(e,n){super(e,"in",n),this.keys=MC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class t9 extends Wt{constructor(e,n){super(e,"not-in",n),this.keys=MC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function MC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ke.fromName(r.referenceValue))}class n9 extends Wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return a_(n)&&vd(n.arrayValue,this.value)}}class r9 extends Wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&vd(this.value.arrayValue,n)}}class i9 extends Wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(vd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!vd(this.value.arrayValue,n)}}class s9 extends Wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!a_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>vd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(e,n=null,r=[],s=[],o=null,u=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=u,this.endAt=c,this.Ie=null}}function PS(t,e=null,n=[],r=[],s=null,o=null,u=null){return new a9(t,e,n,r,s,o,u)}function o_(t){const e=ze(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>$0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Wm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>cu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>cu(r)).join(",")),e.Ie=n}return e.Ie}function l_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!QL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!NC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!MS(t.startAt,e.startAt)&&MS(t.endAt,e.endAt)}function q0(t){return ke.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n=null,r=[],s=[],o=null,u="F",c=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=u,this.startAt=c,this.endAt=f,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function o9(t,e,n,r,s,o,u,c){return new bu(t,e,n,r,s,o,u,c)}function PC(t){return new bu(t)}function OS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function OC(t){return t.collectionGroup!==null}function Xc(t){const e=ze(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ee.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let c=new rn(En.comparator);return u.filters.forEach(f=>{f.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new _d(o,r))}),n.has(En.keyField().canonicalString())||e.Ee.push(new _d(En.keyField(),r))}return e.Ee}function ki(t){const e=ze(t);return e.de||(e.de=l9(e,Xc(t))),e.de}function l9(t,e){if(t.limitType==="F")return PS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new _d(s.field,o)});const n=t.endAt?new vm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new vm(t.startAt.position,t.startAt.inclusive):null;return PS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function G0(t,e){const n=t.filters.concat([e]);return new bu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Y0(t,e,n){return new bu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zm(t,e){return l_(ki(t),ki(e))&&t.limitType===e.limitType}function VC(t){return`${o_(ki(t))}|lt:${t.limitType}`}function Vl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>DC(s)).join(", ")}]`),Wm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>cu(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>cu(s)).join(",")),`Target(${r})`}(ki(t))}; limitType=${t.limitType})`}function Jm(t,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ke.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,s){for(const o of Xc(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(u,c,f){const h=DS(u,c,f);return u.inclusive?h<=0:h<0}(r.startAt,Xc(r),s)||r.endAt&&!function(u,c,f){const h=DS(u,c,f);return u.inclusive?h>=0:h>0}(r.endAt,Xc(r),s))}(t,e)}function u9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function LC(t){return(e,n)=>{let r=!1;for(const s of Xc(t)){const o=c9(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function c9(t,e,n){const r=t.field.isKeyField()?ke.comparator(e.key,n.key):function(o,u,c){const f=u.data.field(o),h=c.data.field(o);return f!==null&&h!==null?uu(f,h):Me(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Aa(this.inner,(n,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return _C(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d9=new Rt(ke.comparator);function _s(){return d9}const zC=new Rt(ke.comparator);function $c(...t){let e=zC;for(const n of t)e=e.insert(n.key,n);return e}function jC(t){let e=zC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function po(){return Wc()}function UC(){return Wc()}function Wc(){return new Mo(t=>t.toString(),(t,e)=>t.isEqual(e))}const f9=new Rt(ke.comparator),h9=new rn(ke.comparator);function We(...t){let e=h9;for(const n of t)e=e.add(n);return e}const m9=new rn(Fe);function p9(){return m9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pm(e)?"-0":e}}function BC(t){return{integerValue:""+t}}function g9(t,e){return FL(e)?BC(e):u_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(){this._=void 0}}function y9(t,e,n){return t instanceof _m?function(s,o){const u={fields:{[EC]:{stringValue:wC},[SC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&s_(o)&&(o=Qm(o)),o&&(u.fields[TC]=o),{mapValue:u}}(n,e):t instanceof bd?FC(t,e):t instanceof wd?$C(t,e):function(s,o){const u=HC(s,o),c=VS(u)+VS(s.Re);return F0(u)&&F0(s.Re)?BC(c):u_(s.serializer,c)}(t,e)}function v9(t,e,n){return t instanceof bd?FC(t,e):t instanceof wd?$C(t,e):n}function HC(t,e){return t instanceof bm?function(r){return F0(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class _m extends ep{}class bd extends ep{constructor(e){super(),this.elements=e}}function FC(t,e){const n=qC(e);for(const r of t.elements)n.some(s=>Vi(s,r))||n.push(r);return{arrayValue:{values:n}}}class wd extends ep{constructor(e){super(),this.elements=e}}function $C(t,e){let n=qC(e);for(const r of t.elements)n=n.filter(s=>!Vi(s,r));return{arrayValue:{values:n}}}class bm extends ep{constructor(e,n){super(),this.serializer=e,this.Re=n}}function VS(t){return Bt(t.integerValue||t.doubleValue)}function qC(t){return a_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function _9(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof bd&&s instanceof bd||r instanceof wd&&s instanceof wd?lu(r.elements,s.elements,Vi):r instanceof bm&&s instanceof bm?Vi(r.Re,s.Re):r instanceof _m&&s instanceof _m}(t.transform,e.transform)}class b9{constructor(e,n){this.version=e,this.transformResults=n}}class pr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pr}static exists(e){return new pr(void 0,e)}static updateTime(e){return new pr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class tp{}function GC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new np(t.key,pr.none()):new zd(t.key,t.data,pr.none());{const n=t.data,r=Xn.empty();let s=new rn(En.comparator);for(let o of e.fields)if(!s.has(o)){let u=n.field(o);u===null&&o.length>1&&(o=o.popLast(),u=n.field(o)),u===null?r.delete(o):r.set(o,u),s=s.add(o)}return new Ca(t.key,r,new mr(s.toArray()),pr.none())}}function w9(t,e,n){t instanceof zd?function(s,o,u){const c=s.value.clone(),f=zS(s.fieldTransforms,o,u.transformResults);c.setAll(f),o.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Ca?function(s,o,u){if(!Fh(s.precondition,o))return void o.convertToUnknownDocument(u.version);const c=zS(s.fieldTransforms,o,u.transformResults),f=o.data;f.setAll(YC(s)),f.setAll(c),o.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(t,e,n):function(s,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,n)}function Qc(t,e,n,r){return t instanceof zd?function(o,u,c,f){if(!Fh(o.precondition,u))return c;const h=o.value.clone(),p=jS(o.fieldTransforms,f,u);return h.setAll(p),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ca?function(o,u,c,f){if(!Fh(o.precondition,u))return c;const h=jS(o.fieldTransforms,f,u),p=u.data;return p.setAll(YC(o)),p.setAll(h),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(_=>_.field))}(t,e,n,r):function(o,u,c){return Fh(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c}(t,e,n)}function E9(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=HC(r.transform,s||null);o!=null&&(n===null&&(n=Xn.empty()),n.set(r.field,o))}return n||null}function LS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&lu(r,s,(o,u)=>_9(o,u))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class zd extends tp{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ca extends tp{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function YC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function zS(t,e,n){const r=new Map;ut(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const o=t[s],u=o.transform,c=e.data.field(o.field);r.set(o.field,v9(u,c,n[s]))}return r}function jS(t,e,n){const r=new Map;for(const s of t){const o=s.transform,u=n.data.field(s.field);r.set(s.field,y9(o,u,e))}return r}class np extends tp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class T9 extends tp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S9{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&w9(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Qc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Qc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=UC();return this.mutations.forEach(s=>{const o=e.get(s.key),u=o.overlayedDocument;let c=this.applyToLocalView(u,o.mutatedFields);c=n.has(s.key)?null:c;const f=GC(u,c);f!==null&&r.set(s.key,f),u.isValidDocument()||u.convertToNoDocument(Le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),We())}isEqual(e){return this.batchId===e.batchId&&lu(this.mutations,e.mutations,(n,r)=>LS(n,r))&&lu(this.baseMutations,e.baseMutations,(n,r)=>LS(n,r))}}class c_{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ut(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return f9}();const o=e.mutations;for(let u=0;u<o.length;u++)s=s.insert(o[u].key,r[u].version);return new c_(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x9{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A9{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt,nt;function C9(t){switch(t){case ve.OK:return Me(64938);case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0;default:return Me(15467,{code:t})}}function KC(t){if(t===void 0)return vs("GRPC error has no .code"),ve.UNKNOWN;switch(t){case Kt.OK:return ve.OK;case Kt.CANCELLED:return ve.CANCELLED;case Kt.UNKNOWN:return ve.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return ve.INTERNAL;case Kt.UNAVAILABLE:return ve.UNAVAILABLE;case Kt.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case Kt.NOT_FOUND:return ve.NOT_FOUND;case Kt.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case Kt.ABORTED:return ve.ABORTED;case Kt.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case Kt.DATA_LOSS:return ve.DATA_LOSS;default:return Me(39323,{code:t})}}(nt=Kt||(Kt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R9=new fa([4294967295,4294967295],0);function US(t){const e=gC().encode(t),n=new lC;return n.update(e),new Uint8Array(n.digest())}function BS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new fa([n,r],0),new fa([s,o],0)]}class d_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new qc(`Invalid padding: ${n}`);if(r<0)throw new qc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new qc(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=fa.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(fa.fromNumber(r)));return s.compare(R9)===1&&(s=new fa([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=US(e),[r,s]=BS(n);for(let o=0;o<this.hashCount;o++){const u=this.we(r,s,o);if(!this.be(u))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new d_(o,s,n);return r.forEach(c=>u.insert(c)),u}insert(e){if(this.pe===0)return;const n=US(e),[r,s]=BS(n);for(let o=0;o<this.hashCount;o++){const u=this.we(r,s,o);this.Se(u)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class qc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,jd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new rp(Le.min(),s,new Rt(Fe),_s(),We())}}class jd{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new jd(r,n,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class XC{constructor(e,n){this.targetId=e,this.Ce=n}}class WC{constructor(e,n,r=Tn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class HS{constructor(){this.Fe=0,this.Me=FS(),this.xe=Tn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=We(),n=We(),r=We();return this.Me.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Me(38017,{changeType:o})}}),new jd(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=FS()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ut(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class k9{constructor(e){this.ze=e,this.je=new Map,this.He=_s(),this.Je=Ch(),this.Ye=Ch(),this.Ze=new Rt(Fe)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:Me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const o=s.target;if(q0(o))if(r===0){const u=new ke(o.path);this.tt(n,u,In.newNoDocument(u,Le.min()))}else ut(r===1,20013,{expectedCount:r});else{const u=this.ut(n);if(u!==r){const c=this.ct(e),f=c?this.lt(c,e,u):1;if(f!==0){this.st(n);const h=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,h)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let u,c;try{u=ba(r).toUint8Array()}catch(f){if(f instanceof bC)return ou("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{c=new d_(u,s,o)}catch(f){return ou(f instanceof qc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return c.pe===0?null:c}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(o=>{const u=this.ze.Pt(),c=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.tt(n,o,null),s++)}),s}It(e){const n=new Map;this.je.forEach((o,u)=>{const c=this._t(u);if(c){if(o.current&&q0(c.target)){const f=new ke(c.target.path);this.Et(f).has(u)||this.dt(u,f)||this.tt(u,f,In.newNoDocument(f,e))}o.Le&&(n.set(u,o.qe()),o.Qe())}});let r=We();this.Ye.forEach((o,u)=>{let c=!0;u.forEachWhile(f=>{const h=this._t(f);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.He.forEach((o,u)=>u.setReadTime(e));const s=new rp(e,n,this.Ze,this.He,r);return this.He=_s(),this.Je=Ch(),this.Ye=Ch(),this.Ze=new Rt(Fe),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new HS,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new rn(Fe),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new rn(Fe),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||Se("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new HS),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Ch(){return new Rt(ke.comparator)}function FS(){return new Rt(ke.comparator)}const I9={asc:"ASCENDING",desc:"DESCENDING"},N9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},D9={and:"AND",or:"OR"};class M9{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function K0(t,e){return t.useProto3Json||Wm(e)?e:{value:e}}function wm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function P9(t,e){return wm(t,e.toTimestamp())}function Ii(t){return ut(!!t,49232),Le.fromTimestamp(function(n){const r=_a(n);return new bt(r.seconds,r.nanos)}(t))}function f_(t,e){return X0(t,e).canonicalString()}function X0(t,e){const n=function(s){return new _t(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ZC(t){const e=_t.fromString(t);return ut(rR(e),10190,{key:e.toString()}),e}function W0(t,e){return f_(t.databaseId,e.path)}function Yy(t,e){const n=ZC(e);if(n.get(1)!==t.databaseId.projectId)throw new xe(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new xe(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ke(eR(n))}function JC(t,e){return f_(t.databaseId,e)}function O9(t){const e=ZC(t);return e.length===4?_t.emptyPath():eR(e)}function Q0(t){return new _t(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function eR(t){return ut(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function $S(t,e,n){return{name:W0(t,e),fields:n.value.mapValue.fields}}function V9(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Me(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(h,p){return h.useProto3Json?(ut(p===void 0||typeof p=="string",58123),Tn.fromBase64String(p||"")):(ut(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Tn.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),u=e.targetChange.cause,c=u&&function(h){const p=h.code===void 0?ve.UNKNOWN:KC(h.code);return new xe(p,h.message||"")}(u);n=new WC(r,s,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Yy(t,r.document.name),o=Ii(r.document.updateTime),u=r.document.createTime?Ii(r.document.createTime):Le.min(),c=new Xn({mapValue:{fields:r.document.fields}}),f=In.newFoundDocument(s,o,u,c),h=r.targetIds||[],p=r.removedTargetIds||[];n=new $h(h,p,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Yy(t,r.document),o=r.readTime?Ii(r.readTime):Le.min(),u=In.newNoDocument(s,o),c=r.removedTargetIds||[];n=new $h([],c,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Yy(t,r.document),o=r.removedTargetIds||[];n=new $h([],o,s,null)}else{if(!("filter"in e))return Me(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,u=new A9(s,o),c=r.targetId;n=new XC(c,u)}}return n}function L9(t,e){let n;if(e instanceof zd)n={update:$S(t,e.key,e.value)};else if(e instanceof np)n={delete:W0(t,e.key)};else if(e instanceof Ca)n={update:$S(t,e.key,e.data),updateMask:G9(e.fieldMask)};else{if(!(e instanceof T9))return Me(16599,{ft:e.type});n={verify:W0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const c=u.transform;if(c instanceof _m)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof bd)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof wd)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof bm)return{fieldPath:u.field.canonicalString(),increment:c.Re};throw Me(20930,{transform:u.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:P9(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Me(27497)}(t,e.precondition)),n}function z9(t,e){return t&&t.length>0?(ut(e!==void 0,14353),t.map(n=>function(s,o){let u=s.updateTime?Ii(s.updateTime):Ii(o);return u.isEqual(Le.min())&&(u=Ii(o)),new b9(u,s.transformResults||[])}(n,e))):[]}function j9(t,e){return{documents:[JC(t,e.path)]}}function U9(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=JC(t,s);const o=function(h){if(h.length!==0)return nR(ei.create(h,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const u=function(h){if(h.length!==0)return h.map(p=>function(b){return{field:Ll(b.field),direction:F9(b.dir)}}(p))}(e.orderBy);u&&(n.structuredQuery.orderBy=u);const c=K0(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{gt:n,parent:s}}function B9(t){let e=O9(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ut(r===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=function(_){const b=tR(_);return b instanceof ei&&IC(b)?b.getFilters():[b]}(n.where));let u=[];n.orderBy&&(u=function(_){return _.map(b=>function(O){return new _d(zl(O.field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(b))}(n.orderBy));let c=null;n.limit&&(c=function(_){let b;return b=typeof _=="object"?_.value:_,Wm(b)?null:b}(n.limit));let f=null;n.startAt&&(f=function(_){const b=!!_.before,A=_.values||[];return new vm(A,b)}(n.startAt));let h=null;return n.endAt&&(h=function(_){const b=!_.before,A=_.values||[];return new vm(A,b)}(n.endAt)),o9(e,s,u,o,c,"F",f,h)}function H9(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=zl(n.unaryFilter.field);return Wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=zl(n.unaryFilter.field);return Wt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=zl(n.unaryFilter.field);return Wt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=zl(n.unaryFilter.field);return Wt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}}(t):t.fieldFilter!==void 0?function(n){return Wt.create(zl(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ei.create(n.compositeFilter.filters.map(r=>tR(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Me(1026)}}(n.compositeFilter.op))}(t):Me(30097,{filter:t})}function F9(t){return I9[t]}function $9(t){return N9[t]}function q9(t){return D9[t]}function Ll(t){return{fieldPath:t.canonicalString()}}function zl(t){return En.fromServerFormat(t.fieldPath)}function nR(t){return t instanceof Wt?function(n){if(n.op==="=="){if(NS(n.value))return{unaryFilter:{field:Ll(n.field),op:"IS_NAN"}};if(IS(n.value))return{unaryFilter:{field:Ll(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(NS(n.value))return{unaryFilter:{field:Ll(n.field),op:"IS_NOT_NAN"}};if(IS(n.value))return{unaryFilter:{field:Ll(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ll(n.field),op:$9(n.op),value:n.value}}}(t):t instanceof ei?function(n){const r=n.getFilters().map(s=>nR(s));return r.length===1?r[0]:{compositeFilter:{op:q9(n.op),filters:r}}}(t):Me(54877,{filter:t})}function G9(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function rR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n,r,s,o=Le.min(),u=Le.min(),c=Tn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=c,this.expectedCount=f}withSequenceNumber(e){return new oa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(e){this.wt=e}}function K9(t){const e=B9({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Y0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(){this.Cn=new W9}addToCollectionParentIndex(e,n){return this.Cn.add(n),_e.resolve()}getCollectionParents(e,n){return _e.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return _e.resolve()}deleteFieldIndex(e,n){return _e.resolve()}deleteAllFieldIndexes(e){return _e.resolve()}createTargetIndexes(e,n){return _e.resolve()}getDocumentsMatchingTarget(e,n){return _e.resolve(null)}getIndexType(e,n){return _e.resolve(0)}getFieldIndexes(e,n){return _e.resolve([])}getNextCollectionGroupToUpdate(e){return _e.resolve(null)}getMinOffset(e,n){return _e.resolve(va.min())}getMinOffsetFromCollectionGroup(e,n){return _e.resolve(va.min())}updateCollectionGroup(e,n,r){return _e.resolve()}updateIndexEntries(e,n){return _e.resolve()}}class W9{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new rn(_t.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new rn(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},iR=41943040;class Kn{static withCacheSize(e){return new Kn(e,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kn.DEFAULT_COLLECTION_PERCENTILE=10,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kn.DEFAULT=new Kn(iR,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kn.DISABLED=new Kn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new du(0)}static lr(){return new du(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="LruGarbageCollector",Q9=1048576;function YS([t,e],[n,r]){const s=Fe(t,n);return s===0?Fe(e,r):s}class Z9{constructor(e){this.Er=e,this.buffer=new rn(YS),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();YS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class J9{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Se(GS,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){_u(n)?Se(GS,"Ignoring IndexedDB error during garbage collection: ",n):await vu(n)}await this.mr(3e5)})}}class e7{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return _e.resolve(Xm.le);const r=new Z9(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),_e.resolve(qS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qS):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,o,u,c,f,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),s=this.params.maximumSequenceNumbersToCollect):s=_,u=Date.now(),this.nthSequenceNumber(e,s))).next(_=>(r=_,c=Date.now(),this.removeTargets(e,r,n))).next(_=>(o=_,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(_=>(h=Date.now(),Ol()<=Xe.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-p}ms
	Determined least recently used ${s} in `+(c-u)+`ms
	Removed ${o} targets in `+(f-c)+`ms
	Removed ${_} documents in `+(h-f)+`ms
Total Duration: ${h-p}ms`),_e.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:_})))}}function t7(t,e){return new e7(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n7{constructor(){this.changes=new Mo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,In.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?_e.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r7{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i7{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Qc(r.mutation,s,mr.empty(),bt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,We()).next(()=>r))}getLocalViewOfDocuments(e,n,r=We()){const s=po();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(o=>{let u=$c();return o.forEach((c,f)=>{u=u.insert(c,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,n){const r=po();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,We()))}populateOverlays(e,n,r){const s=[];return r.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((u,c)=>{n.set(u,c)})})}computeViews(e,n,r,s){let o=_s();const u=Wc(),c=function(){return Wc()}();return n.forEach((f,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof Ca)?o=o.insert(h.key,h):p!==void 0?(u.set(h.key,p.mutation.getFieldMask()),Qc(p.mutation,h,p.mutation.getFieldMask(),bt.now())):u.set(h.key,mr.empty())}),this.recalculateAndSaveOverlays(e,o).next(f=>(f.forEach((h,p)=>u.set(h,p)),n.forEach((h,p)=>{var _;return c.set(h,new r7(p,(_=u.get(h))!==null&&_!==void 0?_:null))}),c))}recalculateAndSaveOverlays(e,n){const r=Wc();let s=new Rt((u,c)=>u-c),o=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(u=>{for(const c of u)c.keys().forEach(f=>{const h=n.get(f);if(h===null)return;let p=r.get(f)||mr.empty();p=c.applyToLocalView(h,p),r.set(f,p);const _=(s.get(c.batchId)||We()).add(f);s=s.insert(c.batchId,_)})}).next(()=>{const u=[],c=s.getReverseIterator();for(;c.hasNext();){const f=c.getNext(),h=f.key,p=f.value,_=UC();p.forEach(b=>{if(!o.has(b)){const A=GC(n.get(b),r.get(b));A!==null&&_.set(b,A),o=o.add(b)}}),u.push(this.documentOverlayCache.saveOverlays(e,h,_))}return _e.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(u){return ke.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):OC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(o=>{const u=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):_e.resolve(po());let c=pd,f=o;return u.next(h=>_e.forEach(h,(p,_)=>(c<_.largestBatchId&&(c=_.largestBatchId),o.get(p)?_e.resolve():this.remoteDocumentCache.getEntry(e,p).next(b=>{f=f.insert(p,b)}))).next(()=>this.populateOverlays(e,h,o)).next(()=>this.computeViews(e,f,h,We())).next(p=>({batchId:c,changes:jC(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ke(n)).next(r=>{let s=$c();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let u=$c();return this.indexManager.getCollectionParents(e,o).next(c=>_e.forEach(c,f=>{const h=function(_,b){return new bu(b,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(n,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((_,b)=>{u=u.insert(_,b)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s))).next(u=>{o.forEach((f,h)=>{const p=h.getKey();u.get(p)===null&&(u=u.insert(p,In.newInvalidDocument(p)))});let c=$c();return u.forEach((f,h)=>{const p=o.get(f);p!==void 0&&Qc(p.mutation,h,mr.empty(),bt.now()),Jm(n,h)&&(c=c.insert(f,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return _e.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ii(s.createTime)}}(n)),_e.resolve()}getNamedQuery(e,n){return _e.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:K9(s.bundledQuery),readTime:Ii(s.readTime)}}(n)),_e.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a7{constructor(){this.overlays=new Rt(ke.comparator),this.Qr=new Map}getOverlay(e,n){return _e.resolve(this.overlays.get(n))}getOverlays(e,n){const r=po();return _e.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,o)=>{this.St(e,n,o)}),_e.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),_e.resolve()}getOverlaysForCollection(e,n,r){const s=po(),o=n.length+1,u=new ke(n.child("")),c=this.overlays.getIteratorFrom(u);for(;c.hasNext();){const f=c.getNext().value,h=f.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===o&&f.largestBatchId>r&&s.set(f.getKey(),f)}return _e.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new Rt((h,p)=>h-p);const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=o.get(h.largestBatchId);p===null&&(p=po(),o=o.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=po(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((h,p)=>c.set(h,p)),!(c.size()>=s)););return _e.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new x9(n,r));let o=this.Qr.get(n);o===void 0&&(o=We(),this.Qr.set(n,o)),this.Qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o7{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(e){return _e.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,_e.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(){this.$r=new rn(fn.Ur),this.Kr=new rn(fn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new fn(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new fn(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new ke(new _t([])),r=new fn(n,e),s=new fn(n,e+1),o=[];return this.Kr.forEachInRange([r,s],u=>{this.zr(u),o.push(u.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new ke(new _t([])),r=new fn(n,e),s=new fn(n,e+1);let o=We();return this.Kr.forEachInRange([r,s],u=>{o=o.add(u.key)}),o}containsKey(e){const n=new fn(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class fn{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return ke.comparator(e.key,n.key)||Fe(e.Zr,n.Zr)}static Wr(e,n){return Fe(e.Zr,n.Zr)||ke.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l7{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new rn(fn.Ur)}checkEmpty(e){return _e.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new S9(o,n,r,s);this.mutationQueue.push(u);for(const c of s)this.Xr=this.Xr.add(new fn(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return _e.resolve(u)}lookupMutationBatch(e,n){return _e.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),o=s<0?0:s;return _e.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(this.mutationQueue.length===0?i_:this.nr-1)}getAllMutationBatches(e){return _e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new fn(n,0),s=new fn(n,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,s],u=>{const c=this.ei(u.Zr);o.push(c)}),_e.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new rn(Fe);return n.forEach(s=>{const o=new fn(s,0),u=new fn(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,u],c=>{r=r.add(c.Zr)})}),_e.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;ke.isDocumentKey(o)||(o=o.child(""));const u=new fn(new ke(o),0);let c=new rn(Fe);return this.Xr.forEachWhile(f=>{const h=f.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(c=c.add(f.Zr)),!0)},u),_e.resolve(this.ni(c))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ut(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return _e.forEach(n.mutations,s=>{const o=new fn(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new fn(n,0),s=this.Xr.firstAfterOrEqual(r);return _e.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,_e.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(e){this.ii=e,this.docs=function(){return new Rt(ke.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,u=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return _e.resolve(r?r.document.mutableCopy():In.newInvalidDocument(n))}getEntries(e,n){let r=_s();return n.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():In.newInvalidDocument(s))}),_e.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=_s();const u=n.path,c=new ke(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(c);for(;f.hasNext();){const{key:h,value:{document:p}}=f.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||jL(zL(p),r)<=0||(s.has(p.key)||Jm(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return _e.resolve(o)}getAllFromCollectionGroup(e,n,r,s){Me(9500)}si(e,n){return _e.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new c7(this)}getSize(e){return _e.resolve(this.size)}}class c7 extends n7{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),_e.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d7{constructor(e){this.persistence=e,this.oi=new Mo(n=>o_(n),l_),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this._i=0,this.ai=new h_,this.targetCount=0,this.ui=du.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),_e.resolve()}getLastRemoteSnapshotVersion(e){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _e.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),_e.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new du(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,_e.resolve()}updateTargetData(e,n){return this.Tr(n),_e.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,_e.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.oi.forEach((u,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.oi.delete(u),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),_e.waitFor(o).next(()=>s)}getTargetCount(e){return _e.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return _e.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),_e.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(u=>{o.push(s.markPotentiallyOrphaned(e,u))}),_e.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),_e.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return _e.resolve(r)}containsKey(e,n){return _e.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,n){this.ci={},this.overlays={},this.li=new Xm(0),this.hi=!1,this.hi=!0,this.Pi=new o7,this.referenceDelegate=e(this),this.Ti=new d7(this),this.indexManager=new X9,this.remoteDocumentCache=function(s){return new u7(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new Y9(n),this.Ei=new s7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new a7,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new l7(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){Se("MemoryPersistence","Starting transaction:",e);const s=new f7(this.li.next());return this.referenceDelegate.di(),r(s).next(o=>this.referenceDelegate.Ai(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ri(e,n){return _e.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class f7 extends BL{constructor(e){super(),this.currentSequenceNumber=e}}class m_{constructor(e){this.persistence=e,this.Vi=new h_,this.mi=null}static fi(e){return new m_(e)}get gi(){if(this.mi)return this.mi;throw Me(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),_e.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),_e.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),_e.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.gi,r=>{const s=ke.fromPath(r);return this.pi(e,s).next(o=>{o||n.removeEntry(s,Le.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return _e.or([()=>_e.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Em{constructor(e,n){this.persistence=e,this.yi=new Mo(r=>$L(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=t7(this,n)}static fi(e,n){return new Em(e,n)}di(){}Ai(e){return _e.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return _e.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(o=>o?_e.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.si(e,u=>this.Dr(e,u,n).next(c=>{c||(r++,o.removeEntry(u,Le.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),_e.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),_e.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),_e.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),_e.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Bh(e.data.value)),n}Dr(e,n,r){return _e.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return _e.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=We(),s=We();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new p_(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m7{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return UO()?8:HL(Mn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ws(e,n).next(u=>{o.result=u}).next(()=>{if(!o.result)return this.bs(e,n,s,r).next(u=>{o.result=u})}).next(()=>{if(o.result)return;const u=new h7;return this.Ss(e,n,u).next(c=>{if(o.result=c,this.fs)return this.Ds(e,n,u,c.size)})}).next(()=>o.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(Ol()<=Xe.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",Vl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),_e.resolve()):(Ol()<=Xe.DEBUG&&Se("QueryEngine","Query:",Vl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(Ol()<=Xe.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",Vl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ki(n))):_e.resolve())}ws(e,n){if(OS(n))return _e.resolve(null);let r=ki(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Y0(n,null,"F"),r=ki(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const u=We(...o);return this.ys.getDocuments(e,u).next(c=>this.indexManager.getMinOffset(e,r).next(f=>{const h=this.vs(n,c);return this.Cs(n,h,u,f.readTime)?this.ws(e,Y0(n,null,"F")):this.Fs(e,h,n,f)}))})))}bs(e,n,r,s){return OS(n)||s.isEqual(Le.min())?_e.resolve(null):this.ys.getDocuments(e,r).next(o=>{const u=this.vs(n,o);return this.Cs(n,u,r,s)?_e.resolve(null):(Ol()<=Xe.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Vl(n)),this.Fs(e,u,n,LL(s,pd)).next(c=>c))})}vs(e,n){let r=new rn(LC(e));return n.forEach((s,o)=>{Jm(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,r){return Ol()<=Xe.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",Vl(n)),this.ys.getDocumentsMatchingQuery(e,n,va.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(o=>(n.forEach(u=>{o=o.insert(u.key,u)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="LocalStore",p7=3e8;class g7{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new Rt(Fe),this.Os=new Mo(o=>o_(o),l_),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new i7(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function y7(t,e,n,r){return new g7(t,e,n,r)}async function aR(t,e){const n=ze(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const u=[],c=[];let f=We();for(const h of s){u.push(h.batchId);for(const p of h.mutations)f=f.add(p.key)}for(const h of o){c.push(h.batchId);for(const p of h.mutations)f=f.add(p.key)}return n.localDocuments.getDocuments(r,f).next(h=>({ks:h,removedBatchIds:u,addedBatchIds:c}))})})}function v7(t,e){const n=ze(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=n.Bs.newChangeBuffer({trackRemovals:!0});return function(c,f,h,p){const _=h.batch,b=_.keys();let A=_e.resolve();return b.forEach(O=>{A=A.next(()=>p.getEntry(f,O)).next(V=>{const z=h.docVersions.get(O);ut(z!==null,48541),V.version.compareTo(z)<0&&(_.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),p.addEntry(V)))})}),A.next(()=>c.mutationQueue.removeMutationBatch(f,_))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let f=We();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(f=f.add(c.batch.mutations[h].key));return f}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function oR(t){const e=ze(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function _7(t,e){const n=ze(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const c=[];e.targetChanges.forEach((p,_)=>{const b=s.get(_);if(!b)return;c.push(n.Ti.removeMatchingKeys(o,p.removedDocuments,_).next(()=>n.Ti.addMatchingKeys(o,p.addedDocuments,_)));let A=b.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?A=A.withResumeToken(Tn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):p.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(p.resumeToken,r)),s=s.insert(_,A),function(V,z,j){return V.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=p7?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(b,A,p)&&c.push(n.Ti.updateTargetData(o,A))});let f=_s(),h=We();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))}),c.push(b7(o,u,e.documentUpdates).next(p=>{f=p.qs,h=p.Qs})),!r.isEqual(Le.min())){const p=n.Ti.getLastRemoteSnapshotVersion(o).next(_=>n.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(p)}return _e.waitFor(c).next(()=>u.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,f,h)).next(()=>f)}).then(o=>(n.xs=s,o))}function b7(t,e,n){let r=We(),s=We();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let u=_s();return n.forEach((c,f)=>{const h=o.get(c);f.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),f.isNoDocument()&&f.version.isEqual(Le.min())?(e.removeEntry(c,f.readTime),u=u.insert(c,f)):!h.isValidDocument()||f.version.compareTo(h.version)>0||f.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(f),u=u.insert(c,f)):Se(g_,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",f.version)}),{qs:u,Qs:s}})}function w7(t,e){const n=ze(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=i_),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function E7(t,e){const n=ze(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(o=>o?(s=o,_e.resolve(s)):n.Ti.allocateTargetId(r).next(u=>(s=new oa(e,u,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function Z0(t,e,n){const r=ze(t),s=r.xs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,u=>r.persistence.referenceDelegate.removeTarget(u,s))}catch(u){if(!_u(u))throw u;Se(g_,`Failed to update sequence numbers for target ${e}: ${u}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function KS(t,e,n){const r=ze(t);let s=Le.min(),o=We();return r.persistence.runTransaction("Execute query","readwrite",u=>function(f,h,p){const _=ze(f),b=_.Os.get(p);return b!==void 0?_e.resolve(_.xs.get(b)):_.Ti.getTargetData(h,p)}(r,u,ki(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(u,c.targetId).next(f=>{o=f})}).next(()=>r.Ms.getDocumentsMatchingQuery(u,e,n?s:Le.min(),n?o:We())).next(c=>(T7(r,u9(e),c),{documents:c,$s:o})))}function T7(t,e,n){let r=t.Ns.get(e)||Le.min();n.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Ns.set(e,r)}class XS{constructor(){this.activeTargetIds=p9()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class S7{constructor(){this.xo=new XS,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new XS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x7{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="ConnectivityMonitor";class QS{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Se(WS,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Se(WS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rh=null;function J0(){return Rh===null?Rh=function(){return 268435456+Math.round(2147483648*Math.random())}():Rh++,"0x"+Rh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="RestConnection",A7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class C7{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===gm?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,o){const u=J0(),c=this.jo(e,n.toUriEncodedString());Se(Ky,`Sending RPC '${e}' ${u}:`,c,r);const f={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(f,s,o);const{host:h}=new URL(c),p=Do(h);return this.Jo(e,c,f,r,p).then(_=>(Se(Ky,`Received RPC '${e}' ${u}: `,_),_),_=>{throw ou(Ky,`RPC '${e}' ${u} failed with error: `,_,"url: ",c,"request:",r),_})}Yo(e,n,r,s,o,u){return this.zo(e,n,r,s,o)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+yu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}jo(e,n){const r=A7[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="WebChannelConnection";class k7 extends C7{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,o){const u=J0();return new Promise((c,f)=>{const h=new uC;h.setWithCredentials(!0),h.listenOnce(cC.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Uh.NO_ERROR:const _=h.getResponseJson();Se(Cn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(_)),c(_);break;case Uh.TIMEOUT:Se(Cn,`RPC '${e}' ${u} timed out`),f(new xe(ve.DEADLINE_EXCEEDED,"Request time out"));break;case Uh.HTTP_ERROR:const b=h.getStatus();if(Se(Cn,`RPC '${e}' ${u} failed with status:`,b,"response text:",h.getResponseText()),b>0){let A=h.getResponseJson();Array.isArray(A)&&(A=A[0]);const O=A?.error;if(O&&O.status&&O.message){const V=function(j){const F=j.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(F)>=0?F:ve.UNKNOWN}(O.status);f(new xe(V,O.message))}else f(new xe(ve.UNKNOWN,"Server responded with status "+h.getStatus()))}else f(new xe(ve.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{h_:e,streamId:u,P_:h.getLastErrorCode(),T_:h.getLastError()})}}finally{Se(Cn,`RPC '${e}' ${u} completed.`)}});const p=JSON.stringify(s);Se(Cn,`RPC '${e}' ${u} sending request:`,s),h.send(n,"POST",p,r,15)})}I_(e,n,r){const s=J0(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=hC(),c=fC(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(f.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Ho(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const p=o.join("");Se(Cn,`Creating RPC '${e}' stream ${s}: ${p}`,f);const _=u.createWebChannel(p,f);this.E_(_);let b=!1,A=!1;const O=new R7({Zo:z=>{A?Se(Cn,`Not sending because RPC '${e}' stream ${s} is closed:`,z):(b||(Se(Cn,`Opening RPC '${e}' stream ${s} transport.`),_.open(),b=!0),Se(Cn,`RPC '${e}' stream ${s} sending:`,z),_.send(z))},Xo:()=>_.close()}),V=(z,j,F)=>{z.listen(j,K=>{try{F(K)}catch(y){setTimeout(()=>{throw y},0)}})};return V(_,Fc.EventType.OPEN,()=>{A||(Se(Cn,`RPC '${e}' stream ${s} transport opened.`),O.__())}),V(_,Fc.EventType.CLOSE,()=>{A||(A=!0,Se(Cn,`RPC '${e}' stream ${s} transport closed`),O.u_(),this.d_(_))}),V(_,Fc.EventType.ERROR,z=>{A||(A=!0,ou(Cn,`RPC '${e}' stream ${s} transport errored. Name:`,z.name,"Message:",z.message),O.u_(new xe(ve.UNAVAILABLE,"The operation could not be completed")))}),V(_,Fc.EventType.MESSAGE,z=>{var j;if(!A){const F=z.data[0];ut(!!F,16349);const K=F,y=K?.error||((j=K[0])===null||j===void 0?void 0:j.error);if(y){Se(Cn,`RPC '${e}' stream ${s} received error:`,y);const E=y.status;let w=function(C){const k=Kt[C];if(k!==void 0)return KC(k)}(E),T=y.message;w===void 0&&(w=ve.INTERNAL,T="Unknown error status: "+E+" with message "+y.message),A=!0,O.u_(new xe(w,T)),_.close()}else Se(Cn,`RPC '${e}' stream ${s} received:`,F),O.c_(F)}}),V(c,dC.STAT_EVENT,z=>{z.stat===U0.PROXY?Se(Cn,`RPC '${e}' stream ${s} detected buffering proxy`):z.stat===U0.NOPROXY&&Se(Cn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{O.a_()},0),O}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Xy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t){return new M9(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n,r=1e3,s=1.5,o=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=s,this.V_=o,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&Se("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="PersistentStream";class uR{constructor(e,n,r,s,o,u,c,f){this.xi=e,this.S_=r,this.D_=s,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=c,this.listener=f,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new lR(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===ve.RESOURCE_EXHAUSTED?(vs(n.toString()),vs("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{e(()=>{const s=new xe(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return Se(ZS,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(Se(ZS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class I7 extends uR{constructor(e,n,r,s,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,u),this.serializer=o}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=V9(this.serializer,e),r=function(o){if(!("targetChange"in o))return Le.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Le.min():u.readTime?Ii(u.readTime):Le.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=Q0(this.serializer),n.addTarget=function(o,u){let c;const f=u.target;if(c=q0(f)?{documents:j9(o,f)}:{query:U9(o,f).gt},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){c.resumeToken=QC(o,u.resumeToken);const h=K0(o,u.expectedCount);h!==null&&(c.expectedCount=h)}else if(u.snapshotVersion.compareTo(Le.min())>0){c.readTime=wm(o,u.snapshotVersion.toTimestamp());const h=K0(o,u.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);const r=H9(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=Q0(this.serializer),n.removeTarget=e,this.Q_(n)}}class N7 extends uR{constructor(e,n,r,s,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,u),this.serializer=o}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return ut(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ut(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ut(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=z9(e.writeResults,e.commitTime),r=Ii(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=Q0(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>L9(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{}class M7 extends D7{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new xe(ve.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.zo(e,X0(n,r),s,o,u)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(ve.UNKNOWN,o.toString())})}Yo(e,n,r,s,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.Yo(e,X0(n,r),s,u,c,o)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new xe(ve.UNKNOWN,u.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class P7{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(vs(n),this.ua=!1):Se("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro="RemoteStore";class O7{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=o,this.Ra.No(u=>{r.enqueueAndForget(async()=>{Po(this)&&(Se(Ro,"Restarting streams for network reachability change."),await async function(f){const h=ze(f);h.da.add(4),await Ud(h),h.Va.set("Unknown"),h.da.delete(4),await sp(h)}(this))})}),this.Va=new P7(r,s)}}async function sp(t){if(Po(t))for(const e of t.Aa)await e(!0)}async function Ud(t){for(const e of t.Aa)await e(!1)}function cR(t,e){const n=ze(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),b_(n)?__(n):wu(n).N_()&&v_(n,e))}function y_(t,e){const n=ze(t),r=wu(n);n.Ea.delete(e),r.N_()&&dR(n,e),n.Ea.size===0&&(r.N_()?r.k_():Po(n)&&n.Va.set("Unknown"))}function v_(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}wu(t).Z_(e)}function dR(t,e){t.ma.Ke(e),wu(t).X_(e)}function __(t){t.ma=new k9({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),wu(t).start(),t.Va.ca()}function b_(t){return Po(t)&&!wu(t).O_()&&t.Ea.size>0}function Po(t){return ze(t).da.size===0}function fR(t){t.ma=void 0}async function V7(t){t.Va.set("Online")}async function L7(t){t.Ea.forEach((e,n)=>{v_(t,e)})}async function z7(t,e){fR(t),b_(t)?(t.Va.Pa(e),__(t)):t.Va.set("Unknown")}async function j7(t,e,n){if(t.Va.set("Online"),e instanceof WC&&e.state===2&&e.cause)try{await async function(s,o){const u=o.cause;for(const c of o.targetIds)s.Ea.has(c)&&(await s.remoteSyncer.rejectListen(c,u),s.Ea.delete(c),s.ma.removeTarget(c))}(t,e)}catch(r){Se(Ro,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Tm(t,r)}else if(e instanceof $h?t.ma.Xe(e):e instanceof XC?t.ma.ot(e):t.ma.nt(e),!n.isEqual(Le.min()))try{const r=await oR(t.localStore);n.compareTo(r)>=0&&await function(o,u){const c=o.ma.It(u);return c.targetChanges.forEach((f,h)=>{if(f.resumeToken.approximateByteSize()>0){const p=o.Ea.get(h);p&&o.Ea.set(h,p.withResumeToken(f.resumeToken,u))}}),c.targetMismatches.forEach((f,h)=>{const p=o.Ea.get(f);if(!p)return;o.Ea.set(f,p.withResumeToken(Tn.EMPTY_BYTE_STRING,p.snapshotVersion)),dR(o,f);const _=new oa(p.target,f,h,p.sequenceNumber);v_(o,_)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Se(Ro,"Failed to raise snapshot:",r),await Tm(t,r)}}async function Tm(t,e,n){if(!_u(e))throw e;t.da.add(1),await Ud(t),t.Va.set("Offline"),n||(n=()=>oR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Se(Ro,"Retrying IndexedDB access"),await n(),t.da.delete(1),await sp(t)})}function hR(t,e){return e().catch(n=>Tm(t,n,e))}async function ap(t){const e=ze(t),n=Ea(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:i_;for(;U7(e);)try{const s=await w7(e.localStore,r);if(s===null){e.Ia.length===0&&n.k_();break}r=s.batchId,B7(e,s)}catch(s){await Tm(e,s)}mR(e)&&pR(e)}function U7(t){return Po(t)&&t.Ia.length<10}function B7(t,e){t.Ia.push(e);const n=Ea(t);n.N_()&&n.ea&&n.ta(e.mutations)}function mR(t){return Po(t)&&!Ea(t).O_()&&t.Ia.length>0}function pR(t){Ea(t).start()}async function H7(t){Ea(t).ia()}async function F7(t){const e=Ea(t);for(const n of t.Ia)e.ta(n.mutations)}async function $7(t,e,n){const r=t.Ia.shift(),s=c_.from(r,e,n);await hR(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ap(t)}async function q7(t,e){e&&Ea(t).ea&&await async function(r,s){if(function(u){return C9(u)&&u!==ve.ABORTED}(s.code)){const o=r.Ia.shift();Ea(r).L_(),await hR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await ap(r)}}(t,e),mR(t)&&pR(t)}async function JS(t,e){const n=ze(t);n.asyncQueue.verifyOperationInProgress(),Se(Ro,"RemoteStore received new credentials");const r=Po(n);n.da.add(3),await Ud(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await sp(n)}async function G7(t,e){const n=ze(t);e?(n.da.delete(2),await sp(n)):e||(n.da.add(2),await Ud(n),n.Va.set("Unknown"))}function wu(t){return t.fa||(t.fa=function(n,r,s){const o=ze(n);return o.oa(),new I7(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{e_:V7.bind(null,t),n_:L7.bind(null,t),i_:z7.bind(null,t),Y_:j7.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),b_(t)?__(t):t.Va.set("Unknown")):(await t.fa.stop(),fR(t))})),t.fa}function Ea(t){return t.ga||(t.ga=function(n,r,s){const o=ze(n);return o.oa(),new N7(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:H7.bind(null,t),i_:q7.bind(null,t),na:F7.bind(null,t),ra:$7.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await ap(t)):(await t.ga.stop(),t.Ia.length>0&&(Se(Ro,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new ha,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const u=Date.now()+r,c=new w_(e,n,u,s,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function E_(t,e){if(vs("AsyncQueue",`${e}: ${t}`),_u(t))return new xe(ve.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{static emptySet(e){return new Zl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ke.comparator(n.key,r.key):(n,r)=>ke.comparator(n.key,r.key),this.keyedMap=$c(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Zl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(){this.pa=new Rt(ke.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Me(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class fu{constructor(e,n,r,s,o,u,c,f,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=c,this.excludesMetadataChanges=f,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,o){const u=[];return n.forEach(c=>{u.push({type:0,doc:c})}),new fu(e,n,Zl.emptySet(n),u,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y7{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class K7{constructor(){this.queries=tx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ze(n),o=s.queries;s.queries=tx(),o.forEach((u,c)=>{for(const f of c.Sa)f.onError(r)})})(this,new xe(ve.ABORTED,"Firestore shutting down"))}}function tx(){return new Mo(t=>VC(t),Zm)}async function X7(t,e){const n=ze(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.Da()&&e.va()&&(r=2):(o=new Y7,r=e.va()?0:1);try{switch(r){case 0:o.ba=await n.onListen(s,!0);break;case 1:o.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(u){const c=E_(u,`Initialization of query '${Vl(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,o),o.Sa.push(e),e.Fa(n.onlineState),o.ba&&e.Ma(o.ba)&&T_(n)}async function W7(t,e){const n=ze(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const u=o.Sa.indexOf(e);u>=0&&(o.Sa.splice(u,1),o.Sa.length===0?s=e.va()?0:1:!o.Da()&&e.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Q7(t,e){const n=ze(t);let r=!1;for(const s of e){const o=s.query,u=n.queries.get(o);if(u){for(const c of u.Sa)c.Ma(s)&&(r=!0);u.ba=s}}r&&T_(n)}function Z7(t,e,n){const r=ze(t),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);r.queries.delete(e)}function T_(t){t.Ca.forEach(e=>{e.next()})}var ev,nx;(nx=ev||(ev={})).xa="default",nx.Cache="cache";class J7{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new fu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=fu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==ev.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){this.key=e}}class yR{constructor(e){this.key=e}}class ez{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=We(),this.mutatedKeys=We(),this.Za=LC(e),this.Xa=new Zl(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new ex,s=n?n.Xa:this.Xa;let o=n?n.mutatedKeys:this.mutatedKeys,u=s,c=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,_)=>{const b=s.get(p),A=Jm(this.query,_)?_:null,O=!!b&&this.mutatedKeys.has(b.key),V=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let z=!1;b&&A?b.data.isEqual(A.data)?O!==V&&(r.track({type:3,doc:A}),z=!0):this.ru(b,A)||(r.track({type:2,doc:A}),z=!0,(f&&this.Za(A,f)>0||h&&this.Za(A,h)<0)&&(c=!0)):!b&&A?(r.track({type:0,doc:A}),z=!0):b&&!A&&(r.track({type:1,doc:b}),z=!0,(f||h)&&(c=!0)),z&&(A?(u=u.add(A),o=V?o.add(p):o.delete(p)):(u=u.delete(p),o=o.delete(p)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const p=this.query.limitType==="F"?u.last():u.first();u=u.delete(p.key),o=o.delete(p.key),r.track({type:1,doc:p})}return{Xa:u,nu:r,Cs:c,mutatedKeys:o}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const u=e.nu.wa();u.sort((p,_)=>function(A,O){const V=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Vt:z})}};return V(A)-V(O)}(p.type,_.type)||this.Za(p.doc,_.doc)),this.iu(r),s=s!=null&&s;const c=n&&!s?this.su():[],f=this.Ya.size===0&&this.current&&!s?1:0,h=f!==this.Ja;return this.Ja=f,u.length!==0||h?{snapshot:new fu(this.query,e.Xa,o,u,e.mutatedKeys,f===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:c}:{ou:c}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new ex,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=We(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new yR(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new gR(r))}),n}au(e){this.Ha=e.$s,this.Ya=We();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return fu.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const S_="SyncEngine";class tz{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class nz{constructor(e){this.key=e,this.cu=!1}}class rz{constructor(e,n,r,s,o,u){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.lu={},this.hu=new Mo(c=>VC(c),Zm),this.Pu=new Map,this.Tu=new Set,this.Iu=new Rt(ke.comparator),this.Eu=new Map,this.du=new h_,this.Au={},this.Ru=new Map,this.Vu=du.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function iz(t,e,n=!0){const r=TR(t);let s;const o=r.hu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.uu()):s=await vR(r,e,n,!0),s}async function sz(t,e){const n=TR(t);await vR(n,e,!0,!1)}async function vR(t,e,n,r){const s=await E7(t.localStore,ki(e)),o=s.targetId,u=t.sharedClientState.addLocalQueryTarget(o,n);let c;return r&&(c=await az(t,e,o,u==="current",s.resumeToken)),t.isPrimaryClient&&n&&cR(t.remoteStore,s),c}async function az(t,e,n,r,s){t.fu=(_,b,A)=>async function(V,z,j,F){let K=z.view.tu(j);K.Cs&&(K=await KS(V.localStore,z.query,!1).then(({documents:T})=>z.view.tu(T,K)));const y=F&&F.targetChanges.get(z.targetId),E=F&&F.targetMismatches.get(z.targetId)!=null,w=z.view.applyChanges(K,V.isPrimaryClient,y,E);return ix(V,z.targetId,w.ou),w.snapshot}(t,_,b,A);const o=await KS(t.localStore,e,!0),u=new ez(e,o.$s),c=u.tu(o.documents),f=jd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=u.applyChanges(c,t.isPrimaryClient,f);ix(t,n,h.ou);const p=new tz(e,n,u);return t.hu.set(e,p),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),h.snapshot}async function oz(t,e,n){const r=ze(t),s=r.hu.get(e),o=r.Pu.get(s.targetId);if(o.length>1)return r.Pu.set(s.targetId,o.filter(u=>!Zm(u,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Z0(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&y_(r.remoteStore,s.targetId),tv(r,s.targetId)}).catch(vu)):(tv(r,s.targetId),await Z0(r.localStore,s.targetId,!0))}async function lz(t,e){const n=ze(t),r=n.hu.get(e),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),y_(n.remoteStore,r.targetId))}async function uz(t,e,n){const r=gz(t);try{const s=await function(u,c){const f=ze(u),h=bt.now(),p=c.reduce((A,O)=>A.add(O.key),We());let _,b;return f.persistence.runTransaction("Locally write mutations","readwrite",A=>{let O=_s(),V=We();return f.Bs.getEntries(A,p).next(z=>{O=z,O.forEach((j,F)=>{F.isValidDocument()||(V=V.add(j))})}).next(()=>f.localDocuments.getOverlayedDocuments(A,O)).next(z=>{_=z;const j=[];for(const F of c){const K=E9(F,_.get(F.key).overlayedDocument);K!=null&&j.push(new Ca(F.key,K,CC(K.value.mapValue),pr.exists(!0)))}return f.mutationQueue.addMutationBatch(A,h,j,c)}).next(z=>{b=z;const j=z.applyToLocalDocumentSet(_,V);return f.documentOverlayCache.saveOverlays(A,z.batchId,j)})}).then(()=>({batchId:b.batchId,changes:jC(_)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,c,f){let h=u.Au[u.currentUser.toKey()];h||(h=new Rt(Fe)),h=h.insert(c,f),u.Au[u.currentUser.toKey()]=h}(r,s.batchId,n),await Bd(r,s.changes),await ap(r.remoteStore)}catch(s){const o=E_(s,"Failed to persist write");n.reject(o)}}async function _R(t,e){const n=ze(t);try{const r=await _7(n.localStore,e);e.targetChanges.forEach((s,o)=>{const u=n.Eu.get(o);u&&(ut(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.cu=!0:s.modifiedDocuments.size>0?ut(u.cu,14607):s.removedDocuments.size>0&&(ut(u.cu,42227),u.cu=!1))}),await Bd(n,r,e)}catch(r){await vu(r)}}function rx(t,e,n){const r=ze(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((o,u)=>{const c=u.view.Fa(e);c.snapshot&&s.push(c.snapshot)}),function(u,c){const f=ze(u);f.onlineState=c;let h=!1;f.queries.forEach((p,_)=>{for(const b of _.Sa)b.Fa(c)&&(h=!0)}),h&&T_(f)}(r.eventManager,e),s.length&&r.lu.Y_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function cz(t,e,n){const r=ze(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),o=s&&s.key;if(o){let u=new Rt(ke.comparator);u=u.insert(o,In.newNoDocument(o,Le.min()));const c=We().add(o),f=new rp(Le.min(),new Map,new Rt(Fe),u,c);await _R(r,f),r.Iu=r.Iu.remove(o),r.Eu.delete(e),x_(r)}else await Z0(r.localStore,e,!1).then(()=>tv(r,e,n)).catch(vu)}async function dz(t,e){const n=ze(t),r=e.batch.batchId;try{const s=await v7(n.localStore,e);wR(n,r,null),bR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Bd(n,s)}catch(s){await vu(s)}}async function fz(t,e,n){const r=ze(t);try{const s=await function(u,c){const f=ze(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return f.mutationQueue.lookupMutationBatch(h,c).next(_=>(ut(_!==null,37113),p=_.keys(),f.mutationQueue.removeMutationBatch(h,_))).next(()=>f.mutationQueue.performConsistencyCheck(h)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(h,p,c)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>f.localDocuments.getDocuments(h,p))})}(r.localStore,e);wR(r,e,n),bR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Bd(r,s)}catch(s){await vu(s)}}function bR(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function wR(t,e,n){const r=ze(t);let s=r.Au[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Au[r.currentUser.toKey()]=s}}function tv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||ER(t,r)})}function ER(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(y_(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),x_(t))}function ix(t,e,n){for(const r of n)r instanceof gR?(t.du.addReference(r.key,e),hz(t,r)):r instanceof yR?(Se(S_,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||ER(t,r.key)):Me(19791,{pu:r})}function hz(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(Se(S_,"New document in limbo: "+n),t.Tu.add(r),x_(t))}function x_(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new ke(_t.fromString(e)),r=t.Vu.next();t.Eu.set(r,new nz(n)),t.Iu=t.Iu.insert(n,r),cR(t.remoteStore,new oa(ki(PC(n.path)),r,"TargetPurposeLimboResolution",Xm.le))}}async function Bd(t,e,n){const r=ze(t),s=[],o=[],u=[];r.hu.isEmpty()||(r.hu.forEach((c,f)=>{u.push(r.fu(f,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const _=h?!h.fromCache:(p=n?.targetChanges.get(f.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(f.targetId,_?"current":"not-current")}if(h){s.push(h);const _=p_.Rs(f.targetId,h);o.push(_)}}))}),await Promise.all(u),r.lu.Y_(s),await async function(f,h){const p=ze(f);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>_e.forEach(h,b=>_e.forEach(b.ds,A=>p.persistence.referenceDelegate.addReference(_,b.targetId,A)).next(()=>_e.forEach(b.As,A=>p.persistence.referenceDelegate.removeReference(_,b.targetId,A)))))}catch(_){if(!_u(_))throw _;Se(g_,"Failed to update sequence numbers: "+_)}for(const _ of h){const b=_.targetId;if(!_.fromCache){const A=p.xs.get(b),O=A.snapshotVersion,V=A.withLastLimboFreeSnapshotVersion(O);p.xs=p.xs.insert(b,V)}}}(r.localStore,o))}async function mz(t,e){const n=ze(t);if(!n.currentUser.isEqual(e)){Se(S_,"User change. New user:",e.toKey());const r=await aR(n.localStore,e);n.currentUser=e,function(o,u){o.Ru.forEach(c=>{c.forEach(f=>{f.reject(new xe(ve.CANCELLED,u))})}),o.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Bd(n,r.ks)}}function pz(t,e){const n=ze(t),r=n.Eu.get(e);if(r&&r.cu)return We().add(r.key);{let s=We();const o=n.Pu.get(e);if(!o)return s;for(const u of o){const c=n.hu.get(u);s=s.unionWith(c.view.eu)}return s}}function TR(t){const e=ze(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_R.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cz.bind(null,e),e.lu.Y_=Q7.bind(null,e.eventManager),e.lu.gu=Z7.bind(null,e.eventManager),e}function gz(t){const e=ze(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fz.bind(null,e),e}class Sm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ip(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return y7(this.persistence,new m7,e.initialUser,this.serializer)}Su(e){return new sR(m_.fi,this.serializer)}bu(e){return new S7}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sm.provider={build:()=>new Sm};class yz extends Sm{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){ut(this.persistence.referenceDelegate instanceof Em,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new J9(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Kn.withCacheSize(this.cacheSizeBytes):Kn.DEFAULT;return new sR(r=>Em.fi(r,n),this.serializer)}}class nv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>rx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=mz.bind(null,this.syncEngine),await G7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new K7}()}createDatastore(e){const n=ip(e.databaseInfo.databaseId),r=function(o){return new k7(o)}(e.databaseInfo);return function(o,u,c,f){return new M7(o,u,c,f)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,o,u,c){return new O7(r,s,o,u,c)}(this.localStore,this.datastore,e.asyncQueue,n=>rx(this.syncEngine,n,0),function(){return QS.C()?new QS:new x7}())}createSyncEngine(e,n){return function(s,o,u,c,f,h,p){const _=new rz(s,o,u,c,f,h);return p&&(_.mu=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=ze(s);Se(Ro,"RemoteStore shutting down."),o.da.add(5),await Ud(o),o.Ra.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}nv.provider={build:()=>new nv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):vs("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta="FirestoreClient";class _z{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Rn.UNAUTHENTICATED,this.clientId=yC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async u=>{Se(Ta,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(Se(Ta,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ha;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=E_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Wy(t,e){t.asyncQueue.verifyOperationInProgress(),Se(Ta,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await aR(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function sx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await bz(t);Se(Ta,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>JS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>JS(e.remoteStore,s)),t._onlineComponents=e}async function bz(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Se(Ta,"Using user provided OfflineComponentProvider");try{await Wy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ve.FAILED_PRECONDITION||s.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ou("Error using user provided cache. Falling back to memory cache: "+n),await Wy(t,new Sm)}}else Se(Ta,"Using default OfflineComponentProvider"),await Wy(t,new yz(void 0));return t._offlineComponents}async function SR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Se(Ta,"Using user provided OnlineComponentProvider"),await sx(t,t._uninitializedComponentsProvider._online)):(Se(Ta,"Using default OnlineComponentProvider"),await sx(t,new nv))),t._onlineComponents}function wz(t){return SR(t).then(e=>e.syncEngine)}async function Ez(t){const e=await SR(t),n=e.eventManager;return n.onListen=iz.bind(null,e.syncEngine),n.onUnlisten=oz.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=sz.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=lz.bind(null,e.syncEngine),n}function Tz(t,e,n={}){const r=new ha;return t.asyncQueue.enqueueAndForget(async()=>function(o,u,c,f,h){const p=new vz({next:b=>{p.xu(),u.enqueueAndForget(()=>W7(o,_)),b.fromCache&&f.source==="server"?h.reject(new xe(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(b)},error:b=>h.reject(b)}),_=new J7(c,p,{includeMetadataChanges:!0,Qa:!0});return X7(o,_)}(await Ez(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(t,e,n){if(!n)throw new xe(ve.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Sz(t,e,n,r){if(e===!0&&r===!0)throw new xe(ve.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ox(t){if(!ke.isDocumentKey(t))throw new xe(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function lx(t){if(ke.isDocumentKey(t))throw new xe(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function op(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Me(12329,{type:typeof t})}function ko(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xe(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=op(t);throw new xe(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR="firestore.googleapis.com",ux=!0;class cx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new xe(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=CR,this.ssl=ux}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:ux;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=iR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Q9)throw new xe(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Sz("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new xe(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new xe(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new xe(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new RL;switch(r.type){case"firstParty":return new DL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new xe(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ax.get(n);r&&(Se("ComponentProvider","Removing Datastore"),ax.delete(n),r.terminate())}(this),Promise.resolve()}}function xz(t,e,n,r={}){var s;t=ko(t,lp);const o=Do(e),u=t._getSettings(),c=Object.assign(Object.assign({},u),{emulatorOptions:t._getEmulatorOptions()}),f=`${e}:${n}`;o&&(Qv(`https://${f}`),Zv("Firestore",!0)),u.host!==CR&&u.host!==f&&ou("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},u),{host:f,ssl:o,emulatorOptions:r});if(!xo(h,c)&&(t._setSettings(h),r.mockUserToken)){let p,_;if(typeof r.mockUserToken=="string")p=r.mockUserToken,_=Rn.MOCK_USER;else{p=NO(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new xe(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Rn(b)}t._authCredentials=new kL(new pC(p,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Oo(this.firestore,e,this._query)}}class gr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ma(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gr(this.firestore,e,this._key)}}class ma extends Oo{constructor(e,n,r){super(e,n,PC(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gr(this.firestore,null,new ke(e))}withConverter(e){return new ma(this.firestore,e,this._path)}}function A_(t,e,...n){if(t=Vt(t),AR("collection","path",e),t instanceof lp){const r=_t.fromString(e,...n);return lx(r),new ma(t,null,r)}{if(!(t instanceof gr||t instanceof ma))throw new xe(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_t.fromString(e,...n));return lx(r),new ma(t.firestore,null,r)}}function Eu(t,e,...n){if(t=Vt(t),arguments.length===1&&(e=yC.newId()),AR("doc","path",e),t instanceof lp){const r=_t.fromString(e,...n);return ox(r),new gr(t,null,new ke(r))}{if(!(t instanceof gr||t instanceof ma))throw new xe(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_t.fromString(e,...n));return ox(r),new gr(t.firestore,t instanceof ma?t.converter:null,new ke(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx="AsyncQueue";class fx{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new lR(this,"async_queue_retry"),this.rc=()=>{const r=Xy();r&&Se(dx,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=Xy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Xy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new ha;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!_u(e))throw e;Se(dx,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,vs("INTERNAL UNHANDLED ERROR: ",hx(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const s=w_.createAndSchedule(this,e,n,r,o=>this.uc(o));return this.Zu.push(s),s}oc(){this.Xu&&Me(47125,{cc:hx(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function hx(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Hd extends lp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new fx,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fx(e),this._firestoreClient=void 0,await e}}}function Az(t,e){const n=typeof t=="object"?t:t_(),r=typeof t=="string"?t:gm,s=Km(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=Z3("firestore");o&&xz(s,...o)}return s}function C_(t){if(t._terminated)throw new xe(ve.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Cz(t),t._firestoreClient}function Cz(t){var e,n,r;const s=t._freezeSettings(),o=function(c,f,h,p){return new YL(c,f,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,xR(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new _z(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(c){const f=c?._online.build();return{_offline:c?._offline.build(f),_online:f}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hu(Tn.fromBase64String(e))}catch(n){throw new xe(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new hu(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new xe(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new En(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new xe(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new xe(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rz=/^__.*__$/;class kz{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ca(e,this.data,this.fieldMask,n,this.fieldTransforms):new zd(e,this.data,n,this.fieldTransforms)}}class RR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ca(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function kR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ic:t})}}class N_{constructor(e,n,r,s,o,u){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Ec(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new N_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Vc(e),s}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Ec(),s}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return xm(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(kR(this.Ic)&&Rz.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class Iz{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ip(e)}bc(e,n,r,s=!1){return new N_({Ic:e,methodName:n,wc:r,path:En.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function D_(t){const e=t._freezeSettings(),n=ip(t._databaseId);return new Iz(t._databaseId,!!e.ignoreUndefinedProperties,n)}function IR(t,e,n,r,s,o={}){const u=t.bc(o.merge||o.mergeFields?2:0,e,n,s);M_("Data must be an object, but it was:",u,r);const c=NR(r,u);let f,h;if(o.merge)f=new mr(u.fieldMask),h=u.fieldTransforms;else if(o.mergeFields){const p=[];for(const _ of o.mergeFields){const b=rv(e,_,n);if(!u.contains(b))throw new xe(ve.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);MR(p,b)||p.push(b)}f=new mr(p),h=u.fieldTransforms.filter(_=>f.covers(_.field))}else f=null,h=u.fieldTransforms;return new kz(new Xn(c),f,h)}class cp extends R_{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cp}}function Nz(t,e,n,r){const s=t.bc(1,e,n);M_("Data must be an object, but it was:",s,r);const o=[],u=Xn.empty();Aa(r,(f,h)=>{const p=P_(e,f,n);h=Vt(h);const _=s.mc(p);if(h instanceof cp)o.push(p);else{const b=Fd(h,_);b!=null&&(o.push(p),u.set(p,b))}});const c=new mr(o);return new RR(u,c,s.fieldTransforms)}function Dz(t,e,n,r,s,o){const u=t.bc(1,e,n),c=[rv(e,r,n)],f=[s];if(o.length%2!=0)throw new xe(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<o.length;b+=2)c.push(rv(e,o[b])),f.push(o[b+1]);const h=[],p=Xn.empty();for(let b=c.length-1;b>=0;--b)if(!MR(h,c[b])){const A=c[b];let O=f[b];O=Vt(O);const V=u.mc(A);if(O instanceof cp)h.push(A);else{const z=Fd(O,V);z!=null&&(h.push(A),p.set(A,z))}}const _=new mr(h);return new RR(p,_,u.fieldTransforms)}function Mz(t,e,n,r=!1){return Fd(n,t.bc(r?4:3,e))}function Fd(t,e){if(DR(t=Vt(t)))return M_("Unsupported field value:",e,t),NR(t,e);if(t instanceof R_)return function(r,s){if(!kR(s.Ic))throw s.gc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,s){const o=[];let u=0;for(const c of r){let f=Fd(c,s.fc(u));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),u++}return{arrayValue:{values:o}}}(t,e)}return function(r,s){if((r=Vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return g9(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=bt.fromDate(r);return{timestampValue:wm(s.serializer,o)}}if(r instanceof bt){const o=new bt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wm(s.serializer,o)}}if(r instanceof k_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof hu)return{bytesValue:QC(s.serializer,r._byteString)};if(r instanceof gr){const o=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(o))throw s.gc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:f_(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof I_)return function(u,c){return{mapValue:{fields:{[xC]:{stringValue:AC},[ym]:{arrayValue:{values:u.toArray().map(h=>{if(typeof h!="number")throw c.gc("VectorValues must only contain numeric values.");return u_(c.serializer,h)})}}}}}}(r,s);throw s.gc(`Unsupported field value: ${op(r)}`)}(t,e)}function NR(t,e){const n={};return _C(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Aa(t,(r,s)=>{const o=Fd(s,e.Ac(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function DR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof bt||t instanceof k_||t instanceof hu||t instanceof gr||t instanceof R_||t instanceof I_)}function M_(t,e,n){if(!DR(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=op(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function rv(t,e,n){if((e=Vt(e))instanceof up)return e._internalPath;if(typeof e=="string")return P_(t,e);throw xm("Field path arguments must be of type string or ",t,!1,void 0,n)}const Pz=new RegExp("[~\\*/\\[\\]]");function P_(t,e,n){if(e.search(Pz)>=0)throw xm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new up(...e.split("."))._internalPath}catch{throw xm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function xm(t,e,n,r,s){const o=r&&!r.isEmpty(),u=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let f="";return(o||u)&&(f+=" (found",o&&(f+=` in field ${r}`),u&&(f+=` in document ${s}`),f+=")"),new xe(ve.INVALID_ARGUMENT,c+t+f)}function MR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new gr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Oz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(dp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Oz extends PR{data(){return super.data()}}function dp(t,e){return typeof e=="string"?P_(t,e):e instanceof up?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vz(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new xe(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class O_{}class OR extends O_{}function Lz(t,e,...n){let r=[];e instanceof O_&&r.push(e),r=r.concat(n),function(o){const u=o.filter(f=>f instanceof V_).length,c=o.filter(f=>f instanceof fp).length;if(u>1||u>0&&c>0)throw new xe(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class fp extends OR{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new fp(e,n,r)}_apply(e){const n=this._parse(e);return VR(e._query,n),new Oo(e.firestore,e.converter,G0(e._query,n))}_parse(e){const n=D_(e.firestore);return function(o,u,c,f,h,p,_){let b;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new xe(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){px(_,p);const O=[];for(const V of _)O.push(mx(f,o,V));b={arrayValue:{values:O}}}else b=mx(f,o,_)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||px(_,p),b=Mz(c,u,_,p==="in"||p==="not-in");return Wt.create(h,p,b)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function zz(t,e,n){const r=e,s=dp("where",t);return fp._create(s,r,n)}class V_ extends O_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new V_(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ei.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let u=s;const c=o.getFlattenedFilters();for(const f of c)VR(u,f),u=G0(u,f)}(e._query,n),new Oo(e.firestore,e.converter,G0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class L_ extends OR{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new L_(e,n)}_apply(e){const n=function(s,o,u){if(s.startAt!==null)throw new xe(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new xe(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _d(o,u)}(e._query,this._field,this._direction);return new Oo(e.firestore,e.converter,function(s,o){const u=s.explicitOrderBy.concat([o]);return new bu(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function jz(t,e="asc"){const n=e,r=dp("orderBy",t);return L_._create(r,n)}function mx(t,e,n){if(typeof(n=Vt(n))=="string"){if(n==="")throw new xe(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!OC(e)&&n.indexOf("/")!==-1)throw new xe(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(_t.fromString(n));if(!ke.isDocumentKey(r))throw new xe(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kS(t,new ke(r))}if(n instanceof gr)return kS(t,n._key);throw new xe(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${op(n)}.`)}function px(t,e){if(!Array.isArray(t)||t.length===0)throw new xe(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VR(t,e){const n=function(s,o){for(const u of s)for(const c of u.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new xe(ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Uz{convertValue(e,n="none"){switch(wa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ba(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Aa(e,(s,o)=>{r[s]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,s;const o=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[ym].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(u=>Bt(u.doubleValue));return new I_(o)}convertGeoPoint(e){return new k_(Bt(e.latitude),Bt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Qm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(gd(e));default:return null}}convertTimestamp(e){const n=_a(e);return new bt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=_t.fromString(e);ut(rR(r),9688,{name:e});const s=new yd(r.get(1),r.get(3)),o=new ke(r.popFirst(5));return s.isEqual(n)||vs(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bz extends PR{constructor(e,n,r,s,o,u){super(e,n,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(dp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class qh extends Bz{data(e={}){return super.data(e)}}class Hz{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new kh(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new qh(this._firestore,this._userDataWriter,r.key,r,new kh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new xe(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(c=>{const f=new qh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new kh(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}})}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const f=new qh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new kh(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return c.type!==0&&(h=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),c.type!==1&&(u=u.add(c.doc),p=u.indexOf(c.doc.key)),{type:Fz(c.type),doc:f,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Fz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:t})}}class $z extends Uz{constructor(e){super(),this.firestore=e}convertBytes(e){return new hu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gr(this.firestore,null,n)}}function z_(t){t=ko(t,Oo);const e=ko(t.firestore,Hd),n=C_(e),r=new $z(e);return Vz(t._query),Tz(n,t._query).then(s=>new Hz(e,r,t,s))}function j_(t,e,n){t=ko(t,gr);const r=ko(t.firestore,Hd),s=LR(t.converter,e,n);return U_(r,[IR(D_(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,pr.none())])}function qz(t){return U_(ko(t.firestore,Hd),[new np(t._key,pr.none())])}function U_(t,e){return function(r,s){const o=new ha;return r.asyncQueue.enqueueAndForget(async()=>uz(await wz(r),s,o)),o.promise}(C_(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gz{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=D_(e)}set(e,n,r){this._verifyNotCommitted();const s=Qy(e,this._firestore),o=LR(s.converter,n,r),u=IR(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,r);return this._mutations.push(u.toMutation(s._key,pr.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const o=Qy(e,this._firestore);let u;return u=typeof(n=Vt(n))=="string"||n instanceof up?Dz(this._dataReader,"WriteBatch.update",o._key,n,r,s):Nz(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(u.toMutation(o._key,pr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Qy(e,this._firestore);return this._mutations=this._mutations.concat(new np(n._key,pr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qy(t,e){if((t=Vt(t)).firestore!==e)throw new xe(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(t){return C_(t=ko(t,Hd)),new Gz(t,e=>U_(t,e))}(function(e,n=!0){(function(s){yu=s})(gu),Ao(new ya("firestore",(r,{instanceIdentifier:s,options:o})=>{const u=r.getProvider("app").getImmediate(),c=new Hd(new IL(r.getProvider("auth-internal")),new ML(u,r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new xe(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yd(h.options.projectId,p)}(u,s),u);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Ri(yS,vS,e),Ri(yS,vS,"esm2017")})();function B_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function jR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Yz=jR,UR=new Vd("auth","Firebase",jR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am=new Jv("@firebase/auth");function Kz(t,...e){Am.logLevel<=Xe.WARN&&Am.warn(`Auth (${gu}): ${t}`,...e)}function Gh(t,...e){Am.logLevel<=Xe.ERROR&&Am.error(`Auth (${gu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t,...e){throw H_(t,...e)}function Ni(t,...e){return H_(t,...e)}function BR(t,e,n){const r=Object.assign(Object.assign({},Yz()),{[e]:n});return new Vd("auth","Firebase",r).create(e,{appName:t.name})}function ms(t){return BR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function H_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return UR.create(t,...e)}function De(t,e,...n){if(!t)throw H_(e,...n)}function fs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Gh(e),new Error(e)}function bs(t,e){t||fs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Xz(){return gx()==="http:"||gx()==="https:"}function gx(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Xz()||LO()||"connection"in navigator)?navigator.onLine:!0}function Qz(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,n){this.shortDelay=e,this.longDelay=n,bs(n>e,"Short delay should be less than long delay!"),this.isMobile=PO()||zO()}get(){return Wz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(t,e){bs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ej=new $d(3e4,6e4);function Ra(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ka(t,e,n,r,s={}){return FR(t,s,async()=>{let o={},u={};r&&(e==="GET"?u=r:o={body:JSON.stringify(r)});const c=Ld(Object.assign({key:t.config.apiKey},u)).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:f},o);return VO()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Do(t.emulatorConfig.host)&&(h.credentials="include"),HR.fetch()(await $R(t,t.config.apiHost,n,c),h)})}async function FR(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Zz),e);try{const s=new nj(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw Ih(t,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const c=o.ok?u.errorMessage:u.error.message,[f,h]=c.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ih(t,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Ih(t,"email-already-in-use",u);if(f==="USER_DISABLED")throw Ih(t,"user-disabled",u);const p=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw BR(t,p,h);ti(t,p)}}catch(s){if(s instanceof zi)throw s;ti(t,"network-request-failed",{message:String(s)})}}async function qd(t,e,n,r,s={}){const o=await ka(t,e,n,r,s);return"mfaPendingCredential"in o&&ti(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function $R(t,e,n,r){const s=`${e}${n}?${r}`,o=t,u=o.config.emulator?F_(t.config,s):`${t.config.apiScheme}://${s}`;return Jz.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}function tj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ni(this.auth,"network-request-failed")),ej.get())})}}function Ih(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ni(t,e,r);return s.customData._tokenResponse=n,s}function yx(t){return t!==void 0&&t.enterprise!==void 0}class rj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return tj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ij(t,e){return ka(t,"GET","/v2/recaptchaConfig",Ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sj(t,e){return ka(t,"POST","/v1/accounts:delete",e)}async function Cm(t,e){return ka(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function aj(t,e=!1){const n=Vt(t),r=await n.getIdToken(e),s=$_(r);De(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,u=o?.sign_in_provider;return{claims:s,token:r,authTime:Zc(Zy(s.auth_time)),issuedAtTime:Zc(Zy(s.iat)),expirationTime:Zc(Zy(s.exp)),signInProvider:u||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Zy(t){return Number(t)*1e3}function $_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Gh("JWT malformed, contained fewer than 3 sections"),null;try{const s=W3(n);return s?JSON.parse(s):(Gh("Failed to decode base64 JWT payload"),null)}catch(s){return Gh("Caught error parsing JWT payload as JSON",s?.toString()),null}}function vx(t){const e=$_(t);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ed(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof zi&&oj(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function oj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zc(this.lastLoginAt),this.creationTime=Zc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rm(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ed(t,Cm(n,{idToken:r}));De(s?.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const u=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?qR(o.providerUserInfo):[],c=cj(t.providerData,u),f=t.isAnonymous,h=!(t.email&&o.passwordHash)&&!c?.length,p=f?h:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new sv(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(t,_)}async function uj(t){const e=Vt(t);await Rm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cj(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function qR(t){return t.map(e=>{var{providerId:n}=e,r=B_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dj(t,e){const n=await FR(t,{},async()=>{const r=Ld({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,u=await $R(t,s,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:c,body:r};return t.emulatorConfig&&Do(t.emulatorConfig.host)&&(f.credentials="include"),HR.fetch()(u,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fj(t,e){return ka(t,"POST","/v2/accounts:revokeToken",Ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){De(e.length!==0,"internal-error");const n=vx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await dj(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,u=new Jl;return r&&(De(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(De(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),o&&(De(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jl,this.toJSON())}_performRefresh(){return fs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(t,e){De(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Zr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,o=B_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new sv(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ed(this,this.stsTokenManager.getToken(this.auth,e));return De(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return aj(this,e)}reload(){return uj(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Rm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hr(this.auth.app))return Promise.reject(ms(this.auth));const e=await this.getIdToken();return await Ed(this,sj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,o,u,c,f,h,p;const _=(r=n.displayName)!==null&&r!==void 0?r:void 0,b=(s=n.email)!==null&&s!==void 0?s:void 0,A=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,O=(u=n.photoURL)!==null&&u!==void 0?u:void 0,V=(c=n.tenantId)!==null&&c!==void 0?c:void 0,z=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,j=(h=n.createdAt)!==null&&h!==void 0?h:void 0,F=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:K,emailVerified:y,isAnonymous:E,providerData:w,stsTokenManager:T}=n;De(K&&T,e,"internal-error");const x=Jl.fromJSON(this.name,T);De(typeof K=="string",e,"internal-error"),Ws(_,e.name),Ws(b,e.name),De(typeof y=="boolean",e,"internal-error"),De(typeof E=="boolean",e,"internal-error"),Ws(A,e.name),Ws(O,e.name),Ws(V,e.name),Ws(z,e.name),Ws(j,e.name),Ws(F,e.name);const C=new Zr({uid:K,auth:e,email:b,emailVerified:y,displayName:_,isAnonymous:E,photoURL:O,phoneNumber:A,tenantId:V,stsTokenManager:x,createdAt:j,lastLoginAt:F});return w&&Array.isArray(w)&&(C.providerData=w.map(k=>Object.assign({},k))),z&&(C._redirectEventId=z),C}static async _fromIdTokenResponse(e,n,r=!1){const s=new Jl;s.updateFromServerResponse(n);const o=new Zr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Rm(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];De(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?qR(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!o?.length,c=new Jl;c.updateFromIdToken(r);const f=new Zr({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:u}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new sv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(f,h),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=new Map;function hs(t){bs(t instanceof Function,"Expected a class definition");let e=_x.get(t);return e?(bs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_x.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}GR.type="NONE";const bx=GR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(t,e,n){return`firebase:${t}:${e}:${n}`}class eu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Yh(this.userKey,s.apiKey,o),this.fullPersistenceKey=Yh("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Cm(this.auth,{idToken:e}).catch(()=>{});return n?Zr._fromGetAccountInfoResponse(this.auth,n,e):null}return Zr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new eu(hs(bx),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let o=s[0]||hs(bx);const u=Yh(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const p=await h._get(u);if(p){let _;if(typeof p=="string"){const b=await Cm(e,{idToken:p}).catch(()=>{});if(!b)break;_=await Zr._fromGetAccountInfoResponse(e,b,p)}else _=Zr._fromJSON(e,p);h!==o&&(c=_),o=h;break}}catch{}const f=s.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new eu(o,e,r):(o=f[0],c&&await o._set(u,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==o)try{await h._remove(u)}catch{}})),new eu(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(YR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZR(e))return"Blackberry";if(JR(e))return"Webos";if(KR(e))return"Safari";if((e.includes("chrome/")||XR(e))&&!e.includes("edge/"))return"Chrome";if(QR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function YR(t=Mn()){return/firefox\//i.test(t)}function KR(t=Mn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function XR(t=Mn()){return/crios\//i.test(t)}function WR(t=Mn()){return/iemobile/i.test(t)}function QR(t=Mn()){return/android/i.test(t)}function ZR(t=Mn()){return/blackberry/i.test(t)}function JR(t=Mn()){return/webos/i.test(t)}function q_(t=Mn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function hj(t=Mn()){var e;return q_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mj(){return jO()&&document.documentMode===10}function ek(t=Mn()){return q_(t)||QR(t)||JR(t)||ZR(t)||/windows phone/i.test(t)||WR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(t,e=[]){let n;switch(t){case"Browser":n=wx(Mn());break;case"Worker":n=`${wx(Mn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${gu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((u,c)=>{try{const f=e(o);u(f)}catch(f){c(f)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gj(t,e={}){return ka(t,"GET","/v2/passwordPolicy",Ra(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj=6;class vj{constructor(e){var n,r,s,o;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=u.minPasswordLength)!==null&&n!==void 0?n:yj,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,o,u,c;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(n=f.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(o=f.containsUppercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(c=f.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),f}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ex(this),this.idTokenSubscription=new Ex(this),this.beforeStateQueue=new pj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=UR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=hs(n)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await eu.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Cm(this,{idToken:e}),r=await Zr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(hr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s?._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===c)&&f?.user&&(s=f.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rm(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Qz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hr(this.app))return Promise.reject(ms(this));const n=e?Vt(e):null;return n&&De(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hr(this.app)?Promise.reject(ms(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hr(this.app)?Promise.reject(ms(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gj(this),n=new vj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Vd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await fj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&hs(e)||this._popupRedirectResolver;De(n,this,"argument-error"),this.redirectPersistenceManager=await eu.create(this,[hs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let u=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(c,this,"internal-error"),c.then(()=>{u||o(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,r,s);return()=>{u=!0,f()}}else{const f=e.addObserver(n);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&Kz(`Error while retrieving App Check token: ${n.error}`),n?.token}}function Vo(t){return Vt(t)}class Ex{constructor(e){this.auth=e,this.observer=null,this.addObserver=YO(n=>this.observer=n)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bj(t){hp=t}function nk(t){return hp.loadJS(t)}function wj(){return hp.recaptchaEnterpriseScript}function Ej(){return hp.gapiScript}function Tj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Sj{constructor(){this.enterprise=new xj}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class xj{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Aj="recaptcha-enterprise",rk="NO_RECAPTCHA";class Cj{constructor(e){this.type=Aj,this.auth=Vo(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,c)=>{ij(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new rj(f);return o.tenantId==null?o._agentRecaptchaConfig=h:o._tenantRecaptchaConfigs[o.tenantId]=h,u(h.siteKey)}}).catch(f=>{c(f)})})}function s(o,u,c){const f=window.grecaptcha;yx(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:e}).then(h=>{u(h)}).catch(()=>{u(rk)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Sj().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{r(this.auth).then(c=>{if(!n&&yx(window.grecaptcha))s(c,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=wj();f.length!==0&&(f+=c),nk(f).then(()=>{s(c,o,u)}).catch(h=>{u(h)})}}).catch(c=>{u(c)})})}}async function Tx(t,e,n,r=!1,s=!1){const o=new Cj(t);let u;if(s)u=rk;else try{u=await o.verify(n)}catch{u=await o.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const f=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const f=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:u}):Object.assign(c,{captchaResponse:u}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function av(t,e,n,r,s){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Tx(t,e,n,n==="getOobCode");return r(t,u)}else return r(t,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Tx(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(t,e){const n=Km(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(xo(o,e??{}))return s;ti(s,"already-initialized")}return n.initialize({options:e})}function kj(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(hs);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Ij(t,e,n){const r=Vo(t);De(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=ik(e),{host:u,port:c}=Nj(e),f=c===null?"":`:${c}`,h={url:`${o}//${u}${f}/`},p=Object.freeze({host:u,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){De(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),De(xo(h,r.config.emulator)&&xo(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,Do(u)?(Qv(`${o}//${u}${f}`),Zv("Auth",!0)):Dj()}function ik(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Nj(t){const e=ik(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:Sx(r.substr(o.length+1))}}else{const[o,u]=r.split(":");return{host:o,port:Sx(u)}}}function Sx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Dj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return fs("not implemented")}_getIdTokenResponse(e){return fs("not implemented")}_linkToIdToken(e,n){return fs("not implemented")}_getReauthenticationResolver(e){return fs("not implemented")}}async function Mj(t,e){return ka(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pj(t,e){return qd(t,"POST","/v1/accounts:signInWithPassword",Ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oj(t,e){return qd(t,"POST","/v1/accounts:signInWithEmailLink",Ra(t,e))}async function Vj(t,e){return qd(t,"POST","/v1/accounts:signInWithEmailLink",Ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td extends G_{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Td(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Td(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return av(e,n,"signInWithPassword",Pj);case"emailLink":return Oj(e,{email:this._email,oobCode:this._password});default:ti(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return av(e,r,"signUpPassword",Mj);case"emailLink":return Vj(e,{idToken:n,email:this._email,oobCode:this._password});default:ti(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tu(t,e){return qd(t,"POST","/v1/accounts:signInWithIdp",Ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj="http://localhost";class Io extends G_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Io(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ti("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,o=B_(n,["providerId","signInMethod"]);if(!r||!s)return null;const u=new Io(r,s);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return tu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,tu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,tu(e,n)}buildRequest(){const e={requestUri:Lj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ld(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jj(t){const e=Bc(Hc(t)).link,n=e?Bc(Hc(e)).deep_link_id:null,r=Bc(Hc(t)).deep_link_id;return(r?Bc(Hc(r)).link:null)||r||n||e||t}class Y_{constructor(e){var n,r,s,o,u,c;const f=Bc(Hc(e)),h=(n=f.apiKey)!==null&&n!==void 0?n:null,p=(r=f.oobCode)!==null&&r!==void 0?r:null,_=zj((s=f.mode)!==null&&s!==void 0?s:null);De(h&&p&&_,"argument-error"),this.apiKey=h,this.operation=_,this.code=p,this.continueUrl=(o=f.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(u=f.lang)!==null&&u!==void 0?u:null,this.tenantId=(c=f.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=jj(e);try{return new Y_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(){this.providerId=Tu.PROVIDER_ID}static credential(e,n){return Td._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Y_.parseLink(n);return De(r,"argument-error"),Td._fromEmailAndCode(e,r.code,r.tenantId)}}Tu.PROVIDER_ID="password";Tu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Tu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd extends sk{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra extends Gd{constructor(){super("facebook.com")}static credential(e){return Io._fromParams({providerId:ra.PROVIDER_ID,signInMethod:ra.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ra.credentialFromTaggedObject(e)}static credentialFromError(e){return ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ra.credential(e.oauthAccessToken)}catch{return null}}}ra.FACEBOOK_SIGN_IN_METHOD="facebook.com";ra.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends Gd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Io._fromParams({providerId:ia.PROVIDER_ID,signInMethod:ia.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ia.credentialFromTaggedObject(e)}static credentialFromError(e){return ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ia.credential(n,r)}catch{return null}}}ia.GOOGLE_SIGN_IN_METHOD="google.com";ia.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends Gd{constructor(){super("github.com")}static credential(e){return Io._fromParams({providerId:sa.PROVIDER_ID,signInMethod:sa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sa.credentialFromTaggedObject(e)}static credentialFromError(e){return sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sa.credential(e.oauthAccessToken)}catch{return null}}}sa.GITHUB_SIGN_IN_METHOD="github.com";sa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa extends Gd{constructor(){super("twitter.com")}static credential(e,n){return Io._fromParams({providerId:aa.PROVIDER_ID,signInMethod:aa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return aa.credentialFromTaggedObject(e)}static credentialFromError(e){return aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return aa.credential(n,r)}catch{return null}}}aa.TWITTER_SIGN_IN_METHOD="twitter.com";aa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uj(t,e){return qd(t,"POST","/v1/accounts:signUp",Ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await Zr._fromIdTokenResponse(e,r,s),u=xx(r);return new No({user:o,providerId:u,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=xx(r);return new No({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function xx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km extends zi{constructor(e,n,r,s){var o;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,km.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new km(e,n,r,s)}}function ak(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?km._fromErrorAndOperation(t,o,e,r):o})}async function Bj(t,e,n=!1){const r=await Ed(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return No._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hj(t,e,n=!1){const{auth:r}=t;if(hr(r.app))return Promise.reject(ms(r));const s="reauthenticate";try{const o=await Ed(t,ak(r,s,e,t),n);De(o.idToken,r,"internal-error");const u=$_(o.idToken);De(u,r,"internal-error");const{sub:c}=u;return De(t.uid===c,r,"user-mismatch"),No._forOperation(t,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&ti(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ok(t,e,n=!1){if(hr(t.app))return Promise.reject(ms(t));const r="signIn",s=await ak(t,r,e),o=await No._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function Fj(t,e){return ok(Vo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lk(t){const e=Vo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $j(t,e,n){if(hr(t.app))return Promise.reject(ms(t));const r=Vo(t),u=await av(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Uj).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&lk(t),f}),c=await No._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(c.user),c}function qj(t,e,n){return hr(t.app)?Promise.reject(ms(t)):Fj(Vt(t),Tu.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&lk(t),r})}function Gj(t,e,n,r){return Vt(t).onIdTokenChanged(e,n,r)}function Yj(t,e,n){return Vt(t).beforeAuthStateChanged(e,n)}function Kj(t,e,n,r){return Vt(t).onAuthStateChanged(e,n,r)}function Xj(t){return Vt(t).signOut()}const Im="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Im,"1"),this.storage.removeItem(Im),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj=1e3,Qj=10;class ck extends uk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ek(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,c,f)=>{this.notifyListeners(u,f)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!n&&this.localCache[r]===u||this.notifyListeners(r,u)},o=this.storage.getItem(r);mj()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Qj):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Wj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ck.type="LOCAL";const Zj=ck;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk extends uk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}dk.type="SESSION";const fk=dk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new mp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,u=this.handlersMap[s];if(!u?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(u).map(async h=>h(n.origin,o)),f=await Jj(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,u;return new Promise((c,f)=>{const h=K_("",20);s.port1.start();const p=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(_){const b=_;if(b.data.eventId===h)switch(b.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(b.data.response);break;default:clearTimeout(p),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(){return window}function tU(t){Di().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(){return typeof Di().WorkerGlobalScope<"u"&&typeof Di().importScripts=="function"}async function nU(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rU(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function iU(){return hk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk="firebaseLocalStorageDb",sU=1,Nm="firebaseLocalStorage",pk="fbase_key";class Yd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function pp(t,e){return t.transaction([Nm],e?"readwrite":"readonly").objectStore(Nm)}function aU(){const t=indexedDB.deleteDatabase(mk);return new Yd(t).toPromise()}function ov(){const t=indexedDB.open(mk,sU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Nm,{keyPath:pk})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Nm)?e(r):(r.close(),await aU(),e(await ov()))})})}async function Ax(t,e,n){const r=pp(t,!0).put({[pk]:e,value:n});return new Yd(r).toPromise()}async function oU(t,e){const n=pp(t,!1).get(e),r=await new Yd(n).toPromise();return r===void 0?null:r.value}function Cx(t,e){const n=pp(t,!0).delete(e);return new Yd(n).toPromise()}const lU=800,uU=3;class gk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ov(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>uU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mp._getInstance(iU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await nU(),!this.activeServiceWorker)return;this.sender=new eU(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ov();return await Ax(e,Im,"1"),await Cx(e,Im),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ax(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>oU(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Cx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=pp(s,!1).getAll();return new Yd(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gk.type="LOCAL";const cU=gk;new $d(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dU(t,e){return e?hs(e):(De(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_ extends G_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return tu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return tu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function fU(t){return ok(t.auth,new X_(t),t.bypassAuthState)}function hU(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),Hj(n,new X_(t),t.bypassAuthState)}async function mU(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),Bj(n,new X_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:u,type:c}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fU;case"linkViaPopup":case"linkViaRedirect":return mU;case"reauthViaPopup":case"reauthViaRedirect":return hU;default:ti(this.auth,"internal-error")}}resolve(e){bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU=new $d(2e3,1e4);class Bl extends yk{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Bl.currentPopupAction&&Bl.currentPopupAction.cancel(),Bl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){bs(this.filter.length===1,"Popup operations only handle one event");const e=K_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ni(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ni(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ni(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pU.get())};e()}}Bl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gU="pendingRedirect",Kh=new Map;class yU extends yk{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Kh.get(this.auth._key());if(!e){try{const r=await vU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Kh.set(this.auth._key(),e)}return this.bypassAuthState||Kh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vU(t,e){const n=wU(e),r=bU(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function _U(t,e){Kh.set(t._key(),e)}function bU(t){return hs(t._redirectPersistence)}function wU(t){return Yh(gU,t.config.apiKey,t.name)}async function EU(t,e,n=!1){if(hr(t.app))return Promise.reject(ms(t));const r=Vo(t),s=dU(r,e),u=await new yU(r,s,n).execute();return u&&!n&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU=10*60*1e3;class SU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!vk(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ni(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TU&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rx(e))}saveEventToCache(e){this.cachedEventUids.add(Rx(e)),this.lastProcessedEventTime=Date.now()}}function Rx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function vk({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function xU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AU(t,e={}){return ka(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RU=/^https?/;async function kU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await AU(t);for(const n of e)try{if(IU(n))return}catch{}ti(t,"unauthorized-domain")}function IU(t){const e=iv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===r}if(!RU.test(n))return!1;if(CU.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU=new $d(3e4,6e4);function kx(){const t=Di().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function DU(t){return new Promise((e,n)=>{var r,s,o;function u(){kx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kx(),n(Ni(t,"network-request-failed"))},timeout:NU.get()})}if(!((s=(r=Di().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Di().gapi)===null||o===void 0)&&o.load)u();else{const c=Tj("iframefcb");return Di()[c]=()=>{gapi.load?u():n(Ni(t,"network-request-failed"))},nk(`${Ej()}?onload=${c}`).catch(f=>n(f))}}).catch(e=>{throw Xh=null,e})}let Xh=null;function MU(t){return Xh=Xh||DU(t),Xh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU=new $d(5e3,15e3),OU="__/auth/iframe",VU="emulator/auth/iframe",LU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jU(t){const e=t.config;De(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?F_(e,VU):`https://${t.config.authDomain}/${OU}`,r={apiKey:e.apiKey,appName:t.name,v:gu},s=zU.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Ld(r).slice(1)}`}async function UU(t){const e=await MU(t),n=Di().gapi;return De(n,t,"internal-error"),e.open({where:document.body,url:jU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LU,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const u=Ni(t,"network-request-failed"),c=Di().setTimeout(()=>{o(u)},PU.get());function f(){Di().clearTimeout(c),s(r)}r.ping(f).then(f,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HU=500,FU=600,$U="_blank",qU="http://localhost";class Ix{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GU(t,e,n,r=HU,s=FU){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const f=Object.assign(Object.assign({},BU),{width:r.toString(),height:s.toString(),top:o,left:u}),h=Mn().toLowerCase();n&&(c=XR(h)?$U:n),YR(h)&&(e=e||qU,f.scrollbars="yes");const p=Object.entries(f).reduce((b,[A,O])=>`${b}${A}=${O},`,"");if(hj(h)&&c!=="_self")return YU(e||"",c),new Ix(null);const _=window.open(e||"",c,p);De(_,t,"popup-blocked");try{_.focus()}catch{}return new Ix(_)}function YU(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU="__/auth/handler",XU="emulator/auth/handler",WU=encodeURIComponent("fac");async function Nx(t,e,n,r,s,o){De(t.config.authDomain,t,"auth-domain-config-required"),De(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:gu,eventId:s};if(e instanceof sk){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",GO(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,_]of Object.entries({}))u[p]=_}if(e instanceof Gd){const p=e.getScopes().filter(_=>_!=="");p.length>0&&(u.scopes=p.join(","))}t.tenantId&&(u.tid=t.tenantId);const c=u;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const f=await t._getAppCheckToken(),h=f?`#${WU}=${encodeURIComponent(f)}`:"";return`${QU(t)}?${Ld(c).slice(1)}${h}`}function QU({config:t}){return t.emulator?F_(t,XU):`https://${t.authDomain}/${KU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="webStorageSupport";class ZU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fk,this._completeRedirectFn=EU,this._overrideRedirectResult=_U}async _openPopup(e,n,r,s){var o;bs((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const u=await Nx(e,n,r,iv(),s);return GU(e,u,K_())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await Nx(e,n,r,iv(),s);return tU(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(bs(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await UU(e),r=new SU(e);return n.register("authEvent",s=>(De(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Jy,{type:Jy},s=>{var o;const u=(o=s?.[0])===null||o===void 0?void 0:o[Jy];u!==void 0&&n(!!u),ti(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ek()||KR()||q_()}}const JU=ZU;var Dx="@firebase/auth",Mx="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nB(t){Ao(new ya("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:c}=r.options;De(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tk(t)},h=new _j(r,s,o,f);return kj(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ao(new ya("auth-internal",e=>{const n=Vo(e.getProvider("auth").getImmediate());return(r=>new eB(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ri(Dx,Mx,tB(t)),Ri(Dx,Mx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rB=5*60,iB=eC("authIdTokenMaxAge")||rB;let Px=null;const sB=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>iB)return;const s=n?.token;Px!==s&&(Px=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function aB(t=t_()){const e=Km(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Rj(t,{popupRedirectResolver:JU,persistence:[cU,Zj,fk]}),r=eC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const u=sB(o.toString());Yj(n,u,()=>u(n.currentUser)),Gj(n,c=>u(c))}}const s=Q3("auth");return s&&Ij(n,`http://${s}`),n}function oB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}bj({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=Ni("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",oB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nB("Browser");const lB={apiKey:"AIzaSyAO9TXM7A0SNeiEXzYo27fW0wdTXqXDEyc",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},W_=rC(lB),ni=Az(W_),Q_=aB(W_),uB=TL(W_,"us-central1"),_k={1:"Hero visual with comprehensive explanation - large image with detailed educational content",2:"Step-by-step visual guide - multiple images with substantial explanations for each step",3:"Process diagram with detailed explanation - flowchart showing complex processes with educational context",4:"Concept map with comprehensive analysis - mind map with detailed explanations of relationships",5:"Data visualization with analysis - pie chart with detailed statistical breakdown and interpretation",6:"Strategic framework with detailed explanation - quadrant analysis with comprehensive guidelines",7:"Featured concept layout - large visual with title and multiple paragraphs of educational content",8:"Comparative analysis - main concept with supporting evidence and detailed explanations",9:"Video learning with context - educational video with substantial background information",12:"Illustrated guide with key insights - central visual with detailed bullet points and explanations",13:"Media-rich educational content - video with comprehensive overview and context",14:"Comprehensive topic exploration - alternating visuals and detailed explanations for thorough understanding",15:"Historical timeline with detailed context - chronological progression with substantial descriptions",16:"Multi-concept comparison - grid layout with detailed descriptions for comparing related topics",17:"Code tutorial with visual examples - code snippets with explanations and visual diagrams",18:"Technical documentation - code examples with comprehensive API documentation and use cases"},cB={1:'["compelling_title", "comprehensive_educational_content", ["hero_image_prompt", "supporting_visual_1", "supporting_visual_2"]]',2:'[["step_image_1", "detailed_step_explanation_1"], ["step_image_2", "detailed_step_explanation_2"], ["step_image_3", "detailed_step_explanation_3"]]',3:[`flowchart TD
    A[starting_concept] -->|process_1| B(intermediate_result)
    B --> C{decision_point}
    C -->|outcome_a| D[final_result_1]
    C -->|outcome_b| E[final_result_2]
    C -->|outcome_c| F[fa:fa-star special_case]`,"comprehensive_process_explanation"],4:[`mindmap
  root((Central_Educational_Concept))
    Key_Aspect_1
      Supporting_Detail_A
      Supporting_Detail_B
    Key_Aspect_2
      Supporting_Detail_C
      Supporting_Detail_D`,"detailed_concept_analysis"],5:[`pie
    title Educational_Data_Analysis
    "Primary_Factor" : 45
    "Secondary_Factor" : 30
    "Additional_Factors" : 25`,"comprehensive_data_interpretation"],6:[`quadrantChart
    title Educational_Framework
    x-axis Low_Complexity --> High_Complexity
    y-axis Low_Impact --> High_Impact
    quadrant-1 Quick_Concepts
    quadrant-2 Advanced_Topics
    quadrant-3 Basic_Ideas
    quadrant-4 Fundamental_Principles
    "Concept_A": [0.3, 0.7]
    "Concept_B": [0.8, 0.4]
    "Concept_C": [0.2, 0.8]`,"detailed_framework_explanation"],7:"[featured_visual_prompt, educational_title, detailed_paragraph_1, detailed_paragraph_2, detailed_paragraph_3]",8:"[main_concept_visual, educational_title, comprehensive_explanation, [evidence_visual_1, evidence_visual_2, evidence_visual_3]]",9:"[educational_video_prompt, comprehensive_contextual_explanation]",12:"[central_educational_visual, [detailed_insight_1, detailed_insight_2, detailed_insight_3, detailed_insight_4]]",13:"[educational_section_title, comprehensive_overview_text, instructional_video_prompt]",14:"[educational_visual_1, detailed_explanation_1, educational_visual_2, detailed_explanation_2, educational_visual_3, detailed_explanation_3]",15:"[date_1, historical_visual_1, comprehensive_event_description_1, date_2, historical_visual_2, comprehensive_event_description_2]",16:"[topic_title_1, topic_visual_1, detailed_description_1, topic_title_2, topic_visual_2, detailed_description_2]",17:"[tutorial_title, code_example_1, code_explanation_1, architecture_diagram_prompt, implementation_explanation, code_example_2, code_explanation_2]",18:"[api_title, code_snippet, comprehensive_documentation, usage_examples, visual_diagram_prompt, best_practices_explanation]"},dB=Object.freeze(Object.defineProperty({__proto__:null,LAYOUT_SCHEMA:cB,LAYOUT_TYPES:_k},Symbol.toStringTag,{value:"Module"})),fB=(t,e,n,r)=>`You are an expert educational designer who creates comprehensive, visually-enhanced learning content.
    Return ONLY a valid array. Do not include markdown formatting, code blocks, or any text before or after the array.
        
        EDUCATIONAL CONTENT RULES:
         COMPREHENSIVE: Each node should contain 100+ words of educational content total
         WELL-STRUCTURED: Use proper paragraphs, clear explanations, and logical flow
         VISUAL BALANCE: Combine substantial text with compelling visuals
         EDUCATIONAL DEPTH: Explain concepts thoroughly with examples, context, and details
         ENGAGING WRITING: Use clear, engaging language that teaches effectively
        
        TEXT GUIDELINES:
         Titles: Clear, educational (3-8 words)
         Paragraphs: Full explanations (3-5 sentences each, 20-40 words per sentence)
         Descriptions: Detailed and informative (2-3 sentences minimum)
         Content should flow logically and build understanding progressively
         Markdown should be used for formatting

        IMAGE PROMPTS:
         Educational and specific: "Detailed diagram of photosynthesis process in plant cells"
         Include visual style: "realistic scientific illustration", "clean educational diagram"
         Support the educational content meaningfully
        
        CONTENT BALANCE:
         60% substantial educational text
         40% compelling visuals that enhance learning
         Ensure minimum 100 words total per node
         Use markdown formatting in text (headings, bold, italics where appropriate)
        
        OUTPUT FORMAT:
        Return ONLY a valid array based on the SCHEMA. Follow the exact structure.
        NO markdown code blocks, NO extra text.
        RETURN AN ARRAY [] - NOT AN OBJECT!

        CONCEPT: ${e}
        CONTEXT: ${t}
        REMEMBER: THIS IS REALLY IMPORTANT : Focus strictly on the main topic. The provided context should be used only to clarify the topic or provide concrete examples  not as the focus of the explanation. If the context is irrelevant or distracting, ignore it entirely
        SCHEMA: ${r}`,hB=(t,e)=>{const n=(r,s)=>`Respond ONLY with a valid JSON array like ["topic1", "topic2"].
        Instructions:
        - Suggest exactly ${r}-${s} logical next topics.
        - Each topic <4 words, doublequoted.
        - No explanation or extra text.
  
    Concept: ${t}`;switch(e){case"explain":return n(4,5);case"argue":return n(3,5);case"answer":return n(2,3);default:return n(3,5)}},mB=(t,e)=>`RETURN ONLY THE FA ICON CORRESPONDING TO THE CONCEPT: "${t}". EXAMPLE: <i class="fas fa-check"></i>`,pB=(t,e)=>`Choose the best educational layout for "${t}" - prioritize diversity and optimal content presentation.
        
        CRITICAL: Avoid layout 14 unless absolutely necessary. Use diverse layouts for better user experience.
        
        SELECTION CRITERIA:
         Content Type Match: Which layout best fits the specific content structure?
         Visual Balance: Optimal text-to-visual ratio for the topic
         Learning Effectiveness: Best presentation for comprehension
         Layout Variety: Strongly prefer different layouts (avoid repeating same layout)
        
        PRIORITY LAYOUT SELECTION GUIDE:
         **Technical/Programming topics**: Use layouts 17, 18 (code tutorials, API docs), 1, 8
         **Process/systems**: Use diagram layouts 3, 4, 5, 6
         **Comprehensive explanations**: Use hero layouts 1, 7, 12
         **Step-by-step content**: Use layouts 2, 15 (timeline), 17 (code tutorial)
         **Multi-aspect topics**: Use layouts 12, 13, 16
         **Media-heavy content**: Use layouts 9, 13
         **Quick concepts**: Use layouts 1, 6, 8
         **Historical/chronological**: Use layout 15
         **Comparison content**: Use layouts 8, 16, 14
        
        DIVERSIFICATION RULES:
        - Prioritize new code layouts (17, 18) for technical content
        - Rotate between different layout families
        - Match complexity of layout to complexity of content
        - Consider visual appeal and educational effectiveness
        
        Return ONLY the layout number as an integer (1-18).
        
        LAYOUT TYPES:
        ${JSON.stringify(_k)}`,bk=t=>{let e=t.replace(/```json\s*\n?/gi,"").replace(/```\s*$/gi,"");e=e.trim();const n=e.match(/\[[\s\S]*\]|\{[\s\S]*\}/);return n&&(e=n[0]),e},gp=async t=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const e=t.trim();if(!e)throw new Error("Message cannot be empty or just whitespace");const r=await xL(uB,"groqChat")({message:e});return console.log("groqChat response:",r.data),r.data.response}catch(e){throw console.error("Firebase function error:",e),console.error("Message sent:",t),e}},gB=async t=>{try{const e=await gp(hB(t,"default"));console.log("Suggestions response:",e);const n=bk(e),r=JSON.parse(n);return Array.isArray(r)?r:[]}catch(e){return console.error("Error fetching suggestions:",e),[]}},yB=async t=>{try{const e=await gp(mB(t,"default"));return console.log("Icon response:",e),e||""}catch(e){return console.error("Error fetching icon:",e),""}},vB=async t=>{try{const e=await gp(pB(t,"default"));console.log("Layout response:",e);const n=e.replace(/[^\d]/g,""),r=parseInt(n);return isNaN(r)||r<1||r>18?(console.warn(`Invalid layout number: ${r}, defaulting to 1`),1):r}catch(e){return console.error("Error fetching layout:",e),1}},_B=async(t,e,n,r)=>{try{const o=(await Y3(()=>Promise.resolve().then(()=>dB),void 0)).LAYOUT_SCHEMA[n.toString()],u=Array.isArray(o)?JSON.stringify(o):o,c=await gp(fB(e,t,r,u));console.log("Content response:",c);const f=bk(c),h=JSON.parse(f);return Array.isArray(h)?h:[]}catch(s){return console.error("Error fetching content:",s),[]}},bB=async(t,e="",n="default")=>{try{const r=await vB(t);console.log("Selected layout:",r);const[s,o,u]=await Promise.all([_B(t,e,r,n),gB(t),yB(t)]);return console.log("Generated content:",s),console.log("Generated suggestions:",o),console.log("Generated icon:",u),{layout:r,content:s,suggestions:o,icon:u,title:t,fullText:t}}catch(r){return console.error("Error in generateNodeContent:",r),{layout:1,content:[t,"Content loading failed",[]],suggestions:[],icon:"",title:t,fullText:t}}},wB="AIzaSyD2LVnTgBbk-5Wo1V2sCmY9ebcmIPdS1ng",EB="93fe2cec9d77f4202",TB="https://www.googleapis.com/customsearch/v1",SB="AIzaSyDxTJKoi1S8YjJZD12QTa4F9hV8fN8pNqo",xB="https://www.googleapis.com/youtube/v3/search",Mc=new Map,Pc=new Map,ri=async t=>{if(Mc.has(t))return Mc.get(t);try{const e=encodeURIComponent(t),n=`${TB}?key=${wB}&cx=${EB}&q=${e}&searchType=image&num=1&safe=active`,r=await fetch(n);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.items&&s.items.length>0){const u=s.items[0],c=u.link||u.pagemap?.cse_image?.[0]?.src;if(c)return Mc.set(t,c),c}const o=`https://via.placeholder.com/640x360/e5e7eb/6b7280?text=${e}`;return Mc.set(t,o),o}catch(e){console.error("Error fetching Google image:",e);const n="https://via.placeholder.com/640x360/ef4444/ffffff?text=Image+Error";return Mc.set(t,n),n}},wk=async t=>{if(Pc.has(t))return Pc.get(t);try{const e=encodeURIComponent(t),n=`${xB}?key=${SB}&q=${e}&part=snippet&type=video&maxResults=1&videoEmbeddable=true&safeSearch=strict`,r=await fetch(n);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.items&&s.items.length>0){const u=s.items[0].id.videoId;if(u)return Pc.set(t,u),u}const o="dQw4w9WgXcQ";return Pc.set(t,o),o}catch(e){console.error("Error fetching YouTube video:",e);const n="dQw4w9WgXcQ";return Pc.set(t,n),n}},Ek=t=>`https://www.youtube.com/embed/${t}`;async function yp(t){const n=(await Y3(()=>import("./mermaid.core-umhQmPyT.js").then(o=>o.bo),[])).default??window.mermaid?.mermaidAPI;window.___mermaidInitialised||(n.initialize({startOnLoad:!1,theme:"default",securityLevel:"loose",fontFamily:"inherit"}),window.___mermaidInitialised=!0);let r;try{r=(await n.render("m_"+Math.random().toString(36).slice(2),t.trim())).svg}catch(o){throw o}return new DOMParser().parseFromString(r,"image/svg+xml").documentElement}var Wh={exports:{}},AB=Wh.exports,Ox;function CB(){return Ox||(Ox=1,function(t){(function(){function e(y){var E={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:`Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `` and `` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(y===!1)return JSON.parse(JSON.stringify(E));var w={};for(var T in E)E.hasOwnProperty(T)&&(w[T]=E[T].defaultValue);return w}function n(){var y=e(!0),E={};for(var w in y)y.hasOwnProperty(w)&&(E[w]=!0);return E}var r={},s={},o={},u=e(!0),c="vanilla",f={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:e(!0),allOn:n()};r.helper={},r.extensions={},r.setOption=function(y,E){return u[y]=E,this},r.getOption=function(y){return u[y]},r.getOptions=function(){return u},r.resetOptions=function(){u=e(!0)},r.setFlavor=function(y){if(!f.hasOwnProperty(y))throw Error(y+" flavor was not found");r.resetOptions();var E=f[y];c=y;for(var w in E)E.hasOwnProperty(w)&&(u[w]=E[w])},r.getFlavor=function(){return c},r.getFlavorOptions=function(y){if(f.hasOwnProperty(y))return f[y]},r.getDefaultOptions=function(y){return e(y)},r.subParser=function(y,E){if(r.helper.isString(y))if(typeof E<"u")s[y]=E;else{if(s.hasOwnProperty(y))return s[y];throw Error("SubParser named "+y+" not registered!")}},r.extension=function(y,E){if(!r.helper.isString(y))throw Error("Extension 'name' must be a string");if(y=r.helper.stdExtName(y),r.helper.isUndefined(E)){if(!o.hasOwnProperty(y))throw Error("Extension named "+y+" is not registered!");return o[y]}else{typeof E=="function"&&(E=E()),r.helper.isArray(E)||(E=[E]);var w=h(E,y);if(w.valid)o[y]=E;else throw Error(w.error)}},r.getAllExtensions=function(){return o},r.removeExtension=function(y){delete o[y]},r.resetExtensions=function(){o={}};function h(y,E){var w=E?"Error in "+E+" extension->":"Error in unnamed extension",T={valid:!0,error:""};r.helper.isArray(y)||(y=[y]);for(var x=0;x<y.length;++x){var C=w+" sub-extension "+x+": ",k=y[x];if(typeof k!="object")return T.valid=!1,T.error=C+"must be an object, but "+typeof k+" given",T;if(!r.helper.isString(k.type))return T.valid=!1,T.error=C+'property "type" must be a string, but '+typeof k.type+" given",T;var N=k.type=k.type.toLowerCase();if(N==="language"&&(N=k.type="lang"),N==="html"&&(N=k.type="output"),N!=="lang"&&N!=="output"&&N!=="listener")return T.valid=!1,T.error=C+"type "+N+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',T;if(N==="listener"){if(r.helper.isUndefined(k.listeners))return T.valid=!1,T.error=C+'. Extensions of type "listener" must have a property called "listeners"',T}else if(r.helper.isUndefined(k.filter)&&r.helper.isUndefined(k.regex))return T.valid=!1,T.error=C+N+' extensions must define either a "regex" property or a "filter" method',T;if(k.listeners){if(typeof k.listeners!="object")return T.valid=!1,T.error=C+'"listeners" property must be an object but '+typeof k.listeners+" given",T;for(var U in k.listeners)if(k.listeners.hasOwnProperty(U)&&typeof k.listeners[U]!="function")return T.valid=!1,T.error=C+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+U+" must be a function but "+typeof k.listeners[U]+" given",T}if(k.filter){if(typeof k.filter!="function")return T.valid=!1,T.error=C+'"filter" must be a function, but '+typeof k.filter+" given",T}else if(k.regex){if(r.helper.isString(k.regex)&&(k.regex=new RegExp(k.regex,"g")),!(k.regex instanceof RegExp))return T.valid=!1,T.error=C+'"regex" property must either be a string or a RegExp object, but '+typeof k.regex+" given",T;if(r.helper.isUndefined(k.replace))return T.valid=!1,T.error=C+'"regex" extensions must implement a replace string or function',T}}return T}r.validateExtension=function(y){var E=h(y,null);return E.valid?!0:(console.warn(E.error),!1)},r.hasOwnProperty("helper")||(r.helper={}),r.helper.isString=function(y){return typeof y=="string"||y instanceof String},r.helper.isFunction=function(y){var E={};return y&&E.toString.call(y)==="[object Function]"},r.helper.isArray=function(y){return Array.isArray(y)},r.helper.isUndefined=function(y){return typeof y>"u"},r.helper.forEach=function(y,E){if(r.helper.isUndefined(y))throw new Error("obj param is required");if(r.helper.isUndefined(E))throw new Error("callback param is required");if(!r.helper.isFunction(E))throw new Error("callback param must be a function/closure");if(typeof y.forEach=="function")y.forEach(E);else if(r.helper.isArray(y))for(var w=0;w<y.length;w++)E(y[w],w,y);else if(typeof y=="object")for(var T in y)y.hasOwnProperty(T)&&E(y[T],T,y);else throw new Error("obj does not seem to be an array or an iterable object")},r.helper.stdExtName=function(y){return y.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};function p(y,E){var w=E.charCodeAt(0);return"E"+w+"E"}r.helper.escapeCharactersCallback=p,r.helper.escapeCharacters=function(y,E,w){var T="(["+E.replace(/([\[\]\\])/g,"\\$1")+"])";w&&(T="\\\\"+T);var x=new RegExp(T,"g");return y=y.replace(x,p),y},r.helper.unescapeHTMLEntities=function(y){return y.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var _=function(y,E,w,T){var x=T||"",C=x.indexOf("g")>-1,k=new RegExp(E+"|"+w,"g"+x.replace(/g/g,"")),N=new RegExp(E,x.replace(/g/g,"")),U=[],M,P,G,R,q;do for(M=0;G=k.exec(y);)if(N.test(G[0]))M++||(P=k.lastIndex,R=P-G[0].length);else if(M&&!--M){q=G.index+G[0].length;var Q={left:{start:R,end:P},match:{start:P,end:G.index},right:{start:G.index,end:q},wholeMatch:{start:R,end:q}};if(U.push(Q),!C)return U}while(M&&(k.lastIndex=P));return U};r.helper.matchRecursiveRegExp=function(y,E,w,T){for(var x=_(y,E,w,T),C=[],k=0;k<x.length;++k)C.push([y.slice(x[k].wholeMatch.start,x[k].wholeMatch.end),y.slice(x[k].match.start,x[k].match.end),y.slice(x[k].left.start,x[k].left.end),y.slice(x[k].right.start,x[k].right.end)]);return C},r.helper.replaceRecursiveRegExp=function(y,E,w,T,x){if(!r.helper.isFunction(E)){var C=E;E=function(){return C}}var k=_(y,w,T,x),N=y,U=k.length;if(U>0){var M=[];k[0].wholeMatch.start!==0&&M.push(y.slice(0,k[0].wholeMatch.start));for(var P=0;P<U;++P)M.push(E(y.slice(k[P].wholeMatch.start,k[P].wholeMatch.end),y.slice(k[P].match.start,k[P].match.end),y.slice(k[P].left.start,k[P].left.end),y.slice(k[P].right.start,k[P].right.end))),P<U-1&&M.push(y.slice(k[P].wholeMatch.end,k[P+1].wholeMatch.start));k[U-1].wholeMatch.end<y.length&&M.push(y.slice(k[U-1].wholeMatch.end)),N=M.join("")}return N},r.helper.regexIndexOf=function(y,E,w){if(!r.helper.isString(y))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(!(E instanceof RegExp))throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var T=y.substring(w||0).search(E);return T>=0?T+(w||0):T},r.helper.splitAtIndex=function(y,E){if(!r.helper.isString(y))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[y.substring(0,E),y.substring(E)]},r.helper.encodeEmailAddress=function(y){var E=[function(w){return"&#"+w.charCodeAt(0)+";"},function(w){return"&#x"+w.charCodeAt(0).toString(16)+";"},function(w){return w}];return y=y.replace(/./g,function(w){if(w==="@")w=E[Math.floor(Math.random()*2)](w);else{var T=Math.random();w=T>.9?E[2](w):T>.45?E[1](w):E[0](w)}return w}),y},r.helper.padEnd=function(E,w,T){return w=w>>0,T=String(T||" "),E.length>w?String(E):(w=w-E.length,w>T.length&&(T+=T.repeat(w/T.length)),String(E)+T.slice(0,w))},typeof console>"u"&&(console={warn:function(y){alert(y)},log:function(y){alert(y)},error:function(y){throw y}}),r.helper.regexes={asteriskDashAndColon:/([*_:~])/g},r.helper.emojis={"+1":"","-1":"",100:"",1234:"","1st_place_medal":"","2nd_place_medal":"","3rd_place_medal":"","8ball":"",a:"",ab:"",abc:"",abcd:"",accept:"",aerial_tramway:"",airplane:"",alarm_clock:"",alembic:"",alien:"",ambulance:"",amphora:"",anchor:"",angel:"",anger:"",angry:"",anguished:"",ant:"",apple:"",aquarius:"",aries:"",arrow_backward:"",arrow_double_down:"",arrow_double_up:"",arrow_down:"",arrow_down_small:"",arrow_forward:"",arrow_heading_down:"",arrow_heading_up:"",arrow_left:"",arrow_lower_left:"",arrow_lower_right:"",arrow_right:"",arrow_right_hook:"",arrow_up:"",arrow_up_down:"",arrow_up_small:"",arrow_upper_left:"",arrow_upper_right:"",arrows_clockwise:"",arrows_counterclockwise:"",art:"",articulated_lorry:"",artificial_satellite:"",astonished:"",athletic_shoe:"",atm:"",atom_symbol:"",avocado:"",b:"",baby:"",baby_bottle:"",baby_chick:"",baby_symbol:"",back:"",bacon:"",badminton:"",baggage_claim:"",baguette_bread:"",balance_scale:"",balloon:"",ballot_box:"",ballot_box_with_check:"",bamboo:"",banana:"",bangbang:"",bank:"",bar_chart:"",barber:"",baseball:"",basketball:"",basketball_man:"",basketball_woman:"&zwj;",bat:"",bath:"",bathtub:"",battery:"",beach_umbrella:"",bear:"",bed:"",bee:"",beer:"",beers:"",beetle:"",beginner:"",bell:"",bellhop_bell:"",bento:"",biking_man:"",bike:"",biking_woman:"&zwj;",bikini:"",biohazard:"",bird:"",birthday:"",black_circle:"",black_flag:"",black_heart:"",black_joker:"",black_large_square:"",black_medium_small_square:"",black_medium_square:"",black_nib:"",black_small_square:"",black_square_button:"",blonde_man:"",blonde_woman:"&zwj;",blossom:"",blowfish:"",blue_book:"",blue_car:"",blue_heart:"",blush:"",boar:"",boat:"",bomb:"",book:"",bookmark:"",bookmark_tabs:"",books:"",boom:"",boot:"",bouquet:"",bowing_man:"",bow_and_arrow:"",bowing_woman:"&zwj;",bowling:"",boxing_glove:"",boy:"",bread:"",bride_with_veil:"",bridge_at_night:"",briefcase:"",broken_heart:"",bug:"",building_construction:"",bulb:"",bullettrain_front:"",bullettrain_side:"",burrito:"",bus:"",business_suit_levitating:"",busstop:"",bust_in_silhouette:"",busts_in_silhouette:"",butterfly:"",cactus:"",cake:"",calendar:"",call_me_hand:"",calling:"",camel:"",camera:"",camera_flash:"",camping:"",cancer:"",candle:"",candy:"",canoe:"",capital_abcd:"",capricorn:"",car:"",card_file_box:"",card_index:"",card_index_dividers:"",carousel_horse:"",carrot:"",cat:"",cat2:"",cd:"",chains:"",champagne:"",chart:"",chart_with_downwards_trend:"",chart_with_upwards_trend:"",checkered_flag:"",cheese:"",cherries:"",cherry_blossom:"",chestnut:"",chicken:"",children_crossing:"",chipmunk:"",chocolate_bar:"",christmas_tree:"",church:"",cinema:"",circus_tent:"",city_sunrise:"",city_sunset:"",cityscape:"",cl:"",clamp:"",clap:"",clapper:"",classical_building:"",clinking_glasses:"",clipboard:"",clock1:"",clock10:"",clock1030:"",clock11:"",clock1130:"",clock12:"",clock1230:"",clock130:"",clock2:"",clock230:"",clock3:"",clock330:"",clock4:"",clock430:"",clock5:"",clock530:"",clock6:"",clock630:"",clock7:"",clock730:"",clock8:"",clock830:"",clock9:"",clock930:"",closed_book:"",closed_lock_with_key:"",closed_umbrella:"",cloud:"",cloud_with_lightning:"",cloud_with_lightning_and_rain:"",cloud_with_rain:"",cloud_with_snow:"",clown_face:"",clubs:"",cocktail:"",coffee:"",coffin:"",cold_sweat:"",comet:"",computer:"",computer_mouse:"",confetti_ball:"",confounded:"",confused:"",congratulations:"",construction:"",construction_worker_man:"",construction_worker_woman:"&zwj;",control_knobs:"",convenience_store:"",cookie:"",cool:"",policeman:"",copyright:"",corn:"",couch_and_lamp:"",couple:"",couple_with_heart_woman_man:"",couple_with_heart_man_man:"&zwj;&zwj;",couple_with_heart_woman_woman:"&zwj;&zwj;",couplekiss_man_man:"&zwj;&zwj;&zwj;",couplekiss_man_woman:"",couplekiss_woman_woman:"&zwj;&zwj;&zwj;",cow:"",cow2:"",cowboy_hat_face:"",crab:"",crayon:"",credit_card:"",crescent_moon:"",cricket:"",crocodile:"",croissant:"",crossed_fingers:"",crossed_flags:"",crossed_swords:"",crown:"",cry:"",crying_cat_face:"",crystal_ball:"",cucumber:"",cupid:"",curly_loop:"",currency_exchange:"",curry:"",custard:"",customs:"",cyclone:"",dagger:"",dancer:"",dancing_women:"",dancing_men:"&zwj;",dango:"",dark_sunglasses:"",dart:"",dash:"",date:"",deciduous_tree:"",deer:"",department_store:"",derelict_house:"",desert:"",desert_island:"",desktop_computer:"",male_detective:"",diamond_shape_with_a_dot_inside:"",diamonds:"",disappointed:"",disappointed_relieved:"",dizzy:"",dizzy_face:"",do_not_litter:"",dog:"",dog2:"",dollar:"",dolls:"",dolphin:"",door:"",doughnut:"",dove:"",dragon:"",dragon_face:"",dress:"",dromedary_camel:"",drooling_face:"",droplet:"",drum:"",duck:"",dvd:"","e-mail":"",eagle:"",ear:"",ear_of_rice:"",earth_africa:"",earth_americas:"",earth_asia:"",egg:"",eggplant:"",eight_pointed_black_star:"",eight_spoked_asterisk:"",electric_plug:"",elephant:"",email:"",end:"",envelope_with_arrow:"",euro:"",european_castle:"",european_post_office:"",evergreen_tree:"",exclamation:"",expressionless:"",eye:"",eye_speech_bubble:"&zwj;",eyeglasses:"",eyes:"",face_with_head_bandage:"",face_with_thermometer:"",fist_oncoming:"",factory:"",fallen_leaf:"",family_man_woman_boy:"",family_man_boy:"&zwj;",family_man_boy_boy:"&zwj;&zwj;",family_man_girl:"&zwj;",family_man_girl_boy:"&zwj;&zwj;",family_man_girl_girl:"&zwj;&zwj;",family_man_man_boy:"&zwj;&zwj;",family_man_man_boy_boy:"&zwj;&zwj;&zwj;",family_man_man_girl:"&zwj;&zwj;",family_man_man_girl_boy:"&zwj;&zwj;&zwj;",family_man_man_girl_girl:"&zwj;&zwj;&zwj;",family_man_woman_boy_boy:"&zwj;&zwj;&zwj;",family_man_woman_girl:"&zwj;&zwj;",family_man_woman_girl_boy:"&zwj;&zwj;&zwj;",family_man_woman_girl_girl:"&zwj;&zwj;&zwj;",family_woman_boy:"&zwj;",family_woman_boy_boy:"&zwj;&zwj;",family_woman_girl:"&zwj;",family_woman_girl_boy:"&zwj;&zwj;",family_woman_girl_girl:"&zwj;&zwj;",family_woman_woman_boy:"&zwj;&zwj;",family_woman_woman_boy_boy:"&zwj;&zwj;&zwj;",family_woman_woman_girl:"&zwj;&zwj;",family_woman_woman_girl_boy:"&zwj;&zwj;&zwj;",family_woman_woman_girl_girl:"&zwj;&zwj;&zwj;",fast_forward:"",fax:"",fearful:"",feet:"",female_detective:"&zwj;",ferris_wheel:"",ferry:"",field_hockey:"",file_cabinet:"",file_folder:"",film_projector:"",film_strip:"",fire:"",fire_engine:"",fireworks:"",first_quarter_moon:"",first_quarter_moon_with_face:"",fish:"",fish_cake:"",fishing_pole_and_fish:"",fist_raised:"",fist_left:"",fist_right:"",flags:"",flashlight:"",fleur_de_lis:"",flight_arrival:"",flight_departure:"",floppy_disk:"",flower_playing_cards:"",flushed:"",fog:"",foggy:"",football:"",footprints:"",fork_and_knife:"",fountain:"",fountain_pen:"",four_leaf_clover:"",fox_face:"",framed_picture:"",free:"",fried_egg:"",fried_shrimp:"",fries:"",frog:"",frowning:"",frowning_face:"",frowning_man:"&zwj;",frowning_woman:"",middle_finger:"",fuelpump:"",full_moon:"",full_moon_with_face:"",funeral_urn:"",game_die:"",gear:"",gem:"",gemini:"",ghost:"",gift:"",gift_heart:"",girl:"",globe_with_meridians:"",goal_net:"",goat:"",golf:"",golfing_man:"",golfing_woman:"&zwj;",gorilla:"",grapes:"",green_apple:"",green_book:"",green_heart:"",green_salad:"",grey_exclamation:"",grey_question:"",grimacing:"",grin:"",grinning:"",guardsman:"",guardswoman:"&zwj;",guitar:"",gun:"",haircut_woman:"",haircut_man:"&zwj;",hamburger:"",hammer:"",hammer_and_pick:"",hammer_and_wrench:"",hamster:"",hand:"",handbag:"",handshake:"",hankey:"",hatched_chick:"",hatching_chick:"",headphones:"",hear_no_evil:"",heart:"",heart_decoration:"",heart_eyes:"",heart_eyes_cat:"",heartbeat:"",heartpulse:"",hearts:"",heavy_check_mark:"",heavy_division_sign:"",heavy_dollar_sign:"",heavy_heart_exclamation:"",heavy_minus_sign:"",heavy_multiplication_x:"",heavy_plus_sign:"",helicopter:"",herb:"",hibiscus:"",high_brightness:"",high_heel:"",hocho:"",hole:"",honey_pot:"",horse:"",horse_racing:"",hospital:"",hot_pepper:"",hotdog:"",hotel:"",hotsprings:"",hourglass:"",hourglass_flowing_sand:"",house:"",house_with_garden:"",houses:"",hugs:"",hushed:"",ice_cream:"",ice_hockey:"",ice_skate:"",icecream:"",id:"",ideograph_advantage:"",imp:"",inbox_tray:"",incoming_envelope:"",tipping_hand_woman:"",information_source:"",innocent:"",interrobang:"",iphone:"",izakaya_lantern:"",jack_o_lantern:"",japan:"",japanese_castle:"",japanese_goblin:"",japanese_ogre:"",jeans:"",joy:"",joy_cat:"",joystick:"",kaaba:"",key:"",keyboard:"",keycap_ten:"",kick_scooter:"",kimono:"",kiss:"",kissing:"",kissing_cat:"",kissing_closed_eyes:"",kissing_heart:"",kissing_smiling_eyes:"",kiwi_fruit:"",koala:"",koko:"",label:"",large_blue_circle:"",large_blue_diamond:"",large_orange_diamond:"",last_quarter_moon:"",last_quarter_moon_with_face:"",latin_cross:"",laughing:"",leaves:"",ledger:"",left_luggage:"",left_right_arrow:"",leftwards_arrow_with_hook:"",lemon:"",leo:"",leopard:"",level_slider:"",libra:"",light_rail:"",link:"",lion:"",lips:"",lipstick:"",lizard:"",lock:"",lock_with_ink_pen:"",lollipop:"",loop:"",loud_sound:"",loudspeaker:"",love_hotel:"",love_letter:"",low_brightness:"",lying_face:"",m:"",mag:"",mag_right:"",mahjong:"",mailbox:"",mailbox_closed:"",mailbox_with_mail:"",mailbox_with_no_mail:"",man:"",man_artist:"&zwj;",man_astronaut:"&zwj;",man_cartwheeling:"&zwj;",man_cook:"&zwj;",man_dancing:"",man_facepalming:"&zwj;",man_factory_worker:"&zwj;",man_farmer:"&zwj;",man_firefighter:"&zwj;",man_health_worker:"&zwj;",man_in_tuxedo:"",man_judge:"&zwj;",man_juggling:"&zwj;",man_mechanic:"&zwj;",man_office_worker:"&zwj;",man_pilot:"&zwj;",man_playing_handball:"&zwj;",man_playing_water_polo:"&zwj;",man_scientist:"&zwj;",man_shrugging:"&zwj;",man_singer:"&zwj;",man_student:"&zwj;",man_teacher:"&zwj;",man_technologist:"&zwj;",man_with_gua_pi_mao:"",man_with_turban:"",tangerine:"",mans_shoe:"",mantelpiece_clock:"",maple_leaf:"",martial_arts_uniform:"",mask:"",massage_woman:"",massage_man:"&zwj;",meat_on_bone:"",medal_military:"",medal_sports:"",mega:"",melon:"",memo:"",men_wrestling:"&zwj;",menorah:"",mens:"",metal:"",metro:"",microphone:"",microscope:"",milk_glass:"",milky_way:"",minibus:"",minidisc:"",mobile_phone_off:"",money_mouth_face:"",money_with_wings:"",moneybag:"",monkey:"",monkey_face:"",monorail:"",moon:"",mortar_board:"",mosque:"",motor_boat:"",motor_scooter:"",motorcycle:"",motorway:"",mount_fuji:"",mountain:"",mountain_biking_man:"",mountain_biking_woman:"&zwj;",mountain_cableway:"",mountain_railway:"",mountain_snow:"",mouse:"",mouse2:"",movie_camera:"",moyai:"",mrs_claus:"",muscle:"",mushroom:"",musical_keyboard:"",musical_note:"",musical_score:"",mute:"",nail_care:"",name_badge:"",national_park:"",nauseated_face:"",necktie:"",negative_squared_cross_mark:"",nerd_face:"",neutral_face:"",new:"",new_moon:"",new_moon_with_face:"",newspaper:"",newspaper_roll:"",next_track_button:"",ng:"",no_good_man:"&zwj;",no_good_woman:"",night_with_stars:"",no_bell:"",no_bicycles:"",no_entry:"",no_entry_sign:"",no_mobile_phones:"",no_mouth:"",no_pedestrians:"",no_smoking:"","non-potable_water":"",nose:"",notebook:"",notebook_with_decorative_cover:"",notes:"",nut_and_bolt:"",o:"",o2:"",ocean:"",octopus:"",oden:"",office:"",oil_drum:"",ok:"",ok_hand:"",ok_man:"&zwj;",ok_woman:"",old_key:"",older_man:"",older_woman:"",om:"",on:"",oncoming_automobile:"",oncoming_bus:"",oncoming_police_car:"",oncoming_taxi:"",open_file_folder:"",open_hands:"",open_mouth:"",open_umbrella:"",ophiuchus:"",orange_book:"",orthodox_cross:"",outbox_tray:"",owl:"",ox:"",package:"",page_facing_up:"",page_with_curl:"",pager:"",paintbrush:"",palm_tree:"",pancakes:"",panda_face:"",paperclip:"",paperclips:"",parasol_on_ground:"",parking:"",part_alternation_mark:"",partly_sunny:"",passenger_ship:"",passport_control:"",pause_button:"",peace_symbol:"",peach:"",peanuts:"",pear:"",pen:"",pencil2:"",penguin:"",pensive:"",performing_arts:"",persevere:"",person_fencing:"",pouting_woman:"",phone:"",pick:"",pig:"",pig2:"",pig_nose:"",pill:"",pineapple:"",ping_pong:"",pisces:"",pizza:"",place_of_worship:"",plate_with_cutlery:"",play_or_pause_button:"",point_down:"",point_left:"",point_right:"",point_up:"",point_up_2:"",police_car:"",policewoman:"&zwj;",poodle:"",popcorn:"",post_office:"",postal_horn:"",postbox:"",potable_water:"",potato:"",pouch:"",poultry_leg:"",pound:"",rage:"",pouting_cat:"",pouting_man:"&zwj;",pray:"",prayer_beads:"",pregnant_woman:"",previous_track_button:"",prince:"",princess:"",printer:"",purple_heart:"",purse:"",pushpin:"",put_litter_in_its_place:"",question:"",rabbit:"",rabbit2:"",racehorse:"",racing_car:"",radio:"",radio_button:"",radioactive:"",railway_car:"",railway_track:"",rainbow:"",rainbow_flag:"&zwj;",raised_back_of_hand:"",raised_hand_with_fingers_splayed:"",raised_hands:"",raising_hand_woman:"",raising_hand_man:"&zwj;",ram:"",ramen:"",rat:"",record_button:"",recycle:"",red_circle:"",registered:"",relaxed:"",relieved:"",reminder_ribbon:"",repeat:"",repeat_one:"",rescue_worker_helmet:"",restroom:"",revolving_hearts:"",rewind:"",rhinoceros:"",ribbon:"",rice:"",rice_ball:"",rice_cracker:"",rice_scene:"",right_anger_bubble:"",ring:"",robot:"",rocket:"",rofl:"",roll_eyes:"",roller_coaster:"",rooster:"",rose:"",rosette:"",rotating_light:"",round_pushpin:"",rowing_man:"",rowing_woman:"&zwj;",rugby_football:"",running_man:"",running_shirt_with_sash:"",running_woman:"&zwj;",sa:"",sagittarius:"",sake:"",sandal:"",santa:"",satellite:"",saxophone:"",school:"",school_satchel:"",scissors:"",scorpion:"",scorpius:"",scream:"",scream_cat:"",scroll:"",seat:"",secret:"",see_no_evil:"",seedling:"",selfie:"",shallow_pan_of_food:"",shamrock:"",shark:"",shaved_ice:"",sheep:"",shell:"",shield:"",shinto_shrine:"",ship:"",shirt:"",shopping:"",shopping_cart:"",shower:"",shrimp:"",signal_strength:"",six_pointed_star:"",ski:"",skier:"",skull:"",skull_and_crossbones:"",sleeping:"",sleeping_bed:"",sleepy:"",slightly_frowning_face:"",slightly_smiling_face:"",slot_machine:"",small_airplane:"",small_blue_diamond:"",small_orange_diamond:"",small_red_triangle:"",small_red_triangle_down:"",smile:"",smile_cat:"",smiley:"",smiley_cat:"",smiling_imp:"",smirk:"",smirk_cat:"",smoking:"",snail:"",snake:"",sneezing_face:"",snowboarder:"",snowflake:"",snowman:"",snowman_with_snow:"",sob:"",soccer:"",soon:"",sos:"",sound:"",space_invader:"",spades:"",spaghetti:"",sparkle:"",sparkler:"",sparkles:"",sparkling_heart:"",speak_no_evil:"",speaker:"",speaking_head:"",speech_balloon:"",speedboat:"",spider:"",spider_web:"",spiral_calendar:"",spiral_notepad:"",spoon:"",squid:"",stadium:"",star:"",star2:"",star_and_crescent:"",star_of_david:"",stars:"",station:"",statue_of_liberty:"",steam_locomotive:"",stew:"",stop_button:"",stop_sign:"",stopwatch:"",straight_ruler:"",strawberry:"",stuck_out_tongue:"",stuck_out_tongue_closed_eyes:"",stuck_out_tongue_winking_eye:"",studio_microphone:"",stuffed_flatbread:"",sun_behind_large_cloud:"",sun_behind_rain_cloud:"",sun_behind_small_cloud:"",sun_with_face:"",sunflower:"",sunglasses:"",sunny:"",sunrise:"",sunrise_over_mountains:"",surfing_man:"",surfing_woman:"&zwj;",sushi:"",suspension_railway:"",sweat:"",sweat_drops:"",sweat_smile:"",sweet_potato:"",swimming_man:"",swimming_woman:"&zwj;",symbols:"",synagogue:"",syringe:"",taco:"",tada:"",tanabata_tree:"",taurus:"",taxi:"",tea:"",telephone_receiver:"",telescope:"",tennis:"",tent:"",thermometer:"",thinking:"",thought_balloon:"",ticket:"",tickets:"",tiger:"",tiger2:"",timer_clock:"",tipping_hand_man:"&zwj;",tired_face:"",tm:"",toilet:"",tokyo_tower:"",tomato:"",tongue:"",top:"",tophat:"",tornado:"",trackball:"",tractor:"",traffic_light:"",train:"",train2:"",tram:"",triangular_flag_on_post:"",triangular_ruler:"",trident:"",triumph:"",trolleybus:"",trophy:"",tropical_drink:"",tropical_fish:"",truck:"",trumpet:"",tulip:"",tumbler_glass:"",turkey:"",turtle:"",tv:"",twisted_rightwards_arrows:"",two_hearts:"",two_men_holding_hands:"",two_women_holding_hands:"",u5272:"",u5408:"",u55b6:"",u6307:"",u6708:"",u6709:"",u6e80:"",u7121:"",u7533:"",u7981:"",u7a7a:"",umbrella:"",unamused:"",underage:"",unicorn:"",unlock:"",up:"",upside_down_face:"",v:"",vertical_traffic_light:"",vhs:"",vibration_mode:"",video_camera:"",video_game:"",violin:"",virgo:"",volcano:"",volleyball:"",vs:"",vulcan_salute:"",walking_man:"",walking_woman:"&zwj;",waning_crescent_moon:"",waning_gibbous_moon:"",warning:"",wastebasket:"",watch:"",water_buffalo:"",watermelon:"",wave:"",wavy_dash:"",waxing_crescent_moon:"",wc:"",weary:"",wedding:"",weight_lifting_man:"",weight_lifting_woman:"&zwj;",whale:"",whale2:"",wheel_of_dharma:"",wheelchair:"",white_check_mark:"",white_circle:"",white_flag:"",white_flower:"",white_large_square:"",white_medium_small_square:"",white_medium_square:"",white_small_square:"",white_square_button:"",wilted_flower:"",wind_chime:"",wind_face:"",wine_glass:"",wink:"",wolf:"",woman:"",woman_artist:"&zwj;",woman_astronaut:"&zwj;",woman_cartwheeling:"&zwj;",woman_cook:"&zwj;",woman_facepalming:"&zwj;",woman_factory_worker:"&zwj;",woman_farmer:"&zwj;",woman_firefighter:"&zwj;",woman_health_worker:"&zwj;",woman_judge:"&zwj;",woman_juggling:"&zwj;",woman_mechanic:"&zwj;",woman_office_worker:"&zwj;",woman_pilot:"&zwj;",woman_playing_handball:"&zwj;",woman_playing_water_polo:"&zwj;",woman_scientist:"&zwj;",woman_shrugging:"&zwj;",woman_singer:"&zwj;",woman_student:"&zwj;",woman_teacher:"&zwj;",woman_technologist:"&zwj;",woman_with_turban:"&zwj;",womans_clothes:"",womans_hat:"",women_wrestling:"&zwj;",womens:"",world_map:"",worried:"",wrench:"",writing_hand:"",x:"",yellow_heart:"",yen:"",yin_yang:"",yum:"",zap:"",zipper_mouth_face:"",zzz:"",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:`<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`},r.Converter=function(y){var E={},w=[],T=[],x={},C=c,k={parsed:{},raw:"",format:""};N();function N(){y=y||{};for(var R in u)u.hasOwnProperty(R)&&(E[R]=u[R]);if(typeof y=="object")for(var q in y)y.hasOwnProperty(q)&&(E[q]=y[q]);else throw Error("Converter expects the passed parameter to be an object, but "+typeof y+" was passed instead.");E.extensions&&r.helper.forEach(E.extensions,U)}function U(R,q){if(q=q||null,r.helper.isString(R))if(R=r.helper.stdExtName(R),q=R,r.extensions[R]){console.warn("DEPRECATION WARNING: "+R+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),M(r.extensions[R],R);return}else if(!r.helper.isUndefined(o[R]))R=o[R];else throw Error('Extension "'+R+'" could not be loaded. It was either not found or is not a valid extension.');typeof R=="function"&&(R=R()),r.helper.isArray(R)||(R=[R]);var Q=h(R,q);if(!Q.valid)throw Error(Q.error);for(var W=0;W<R.length;++W){switch(R[W].type){case"lang":w.push(R[W]);break;case"output":T.push(R[W]);break}if(R[W].hasOwnProperty("listeners"))for(var B in R[W].listeners)R[W].listeners.hasOwnProperty(B)&&P(B,R[W].listeners[B])}}function M(R,q){typeof R=="function"&&(R=R(new r.Converter)),r.helper.isArray(R)||(R=[R]);var Q=h(R,q);if(!Q.valid)throw Error(Q.error);for(var W=0;W<R.length;++W)switch(R[W].type){case"lang":w.push(R[W]);break;case"output":T.push(R[W]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function P(R,q){if(!r.helper.isString(R))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof R+" given");if(typeof q!="function")throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof q+" given");x.hasOwnProperty(R)||(x[R]=[]),x[R].push(q)}function G(R){var q=R.match(/^\s*/)[0].length,Q=new RegExp("^\\s{0,"+q+"}","gm");return R.replace(Q,"")}this._dispatch=function(q,Q,W,B){if(x.hasOwnProperty(q))for(var X=0;X<x[q].length;++X){var te=x[q][X](q,Q,this,W,B);te&&typeof te<"u"&&(Q=te)}return Q},this.listen=function(R,q){return P(R,q),this},this.makeHtml=function(R){if(!R)return R;var q={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:w,outputModifiers:T,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return R=R.replace(//g,"T"),R=R.replace(/\$/g,"D"),R=R.replace(/\r\n/g,`
`),R=R.replace(/\r/g,`
`),R=R.replace(/\u00A0/g,"&nbsp;"),E.smartIndentationFix&&(R=G(R)),R=`

`+R+`

`,R=r.subParser("detab")(R,E,q),R=R.replace(/^[ \t]+$/mg,""),r.helper.forEach(w,function(Q){R=r.subParser("runExtension")(Q,R,E,q)}),R=r.subParser("metadata")(R,E,q),R=r.subParser("hashPreCodeTags")(R,E,q),R=r.subParser("githubCodeBlocks")(R,E,q),R=r.subParser("hashHTMLBlocks")(R,E,q),R=r.subParser("hashCodeTags")(R,E,q),R=r.subParser("stripLinkDefinitions")(R,E,q),R=r.subParser("blockGamut")(R,E,q),R=r.subParser("unhashHTMLSpans")(R,E,q),R=r.subParser("unescapeSpecialChars")(R,E,q),R=R.replace(/D/g,"$$"),R=R.replace(/T/g,""),R=r.subParser("completeHTMLDocument")(R,E,q),r.helper.forEach(T,function(Q){R=r.subParser("runExtension")(Q,R,E,q)}),k=q.metadata,R},this.makeMarkdown=this.makeMd=function(R,q){if(R=R.replace(/\r\n/g,`
`),R=R.replace(/\r/g,`
`),R=R.replace(/>[ \t]+</,">NBSP;<"),!q)if(window&&window.document)q=window.document;else throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");var Q=q.createElement("div");Q.innerHTML=R;var W={preList:re(Q)};J(Q);for(var B=Q.childNodes,X="",te=0;te<B.length;te++)X+=r.subParser("makeMarkdown.node")(B[te],W);function J(ce){for(var ue=0;ue<ce.childNodes.length;++ue){var fe=ce.childNodes[ue];fe.nodeType===3?!/\S/.test(fe.nodeValue)&&!/^[ ]+$/.test(fe.nodeValue)?(ce.removeChild(fe),--ue):(fe.nodeValue=fe.nodeValue.split(`
`).join(" "),fe.nodeValue=fe.nodeValue.replace(/(\s)+/g,"$1")):fe.nodeType===1&&J(fe)}}function re(ce){for(var ue=ce.querySelectorAll("pre"),fe=[],pe=0;pe<ue.length;++pe)if(ue[pe].childElementCount===1&&ue[pe].firstChild.tagName.toLowerCase()==="code"){var we=ue[pe].firstChild.innerHTML.trim(),Ce=ue[pe].firstChild.getAttribute("data-language")||"";if(Ce==="")for(var Qe=ue[pe].firstChild.className.split(" "),Ze=0;Ze<Qe.length;++Ze){var Ve=Qe[Ze].match(/^language-(.+)$/);if(Ve!==null){Ce=Ve[1];break}}we=r.helper.unescapeHTMLEntities(we),fe.push(we),ue[pe].outerHTML='<precode language="'+Ce+'" precodenum="'+pe.toString()+'"></precode>'}else fe.push(ue[pe].innerHTML),ue[pe].innerHTML="",ue[pe].setAttribute("prenum",pe.toString());return fe}return X},this.setOption=function(R,q){E[R]=q},this.getOption=function(R){return E[R]},this.getOptions=function(){return E},this.addExtension=function(R,q){q=q||null,U(R,q)},this.useExtension=function(R){U(R)},this.setFlavor=function(R){if(!f.hasOwnProperty(R))throw Error(R+" flavor was not found");var q=f[R];C=R;for(var Q in q)q.hasOwnProperty(Q)&&(E[Q]=q[Q])},this.getFlavor=function(){return C},this.removeExtension=function(R){r.helper.isArray(R)||(R=[R]);for(var q=0;q<R.length;++q){for(var Q=R[q],W=0;W<w.length;++W)w[W]===Q&&w.splice(W,1);for(var B=0;B<T.length;++B)T[B]===Q&&T.splice(B,1)}},this.getAllExtensions=function(){return{language:w,output:T}},this.getMetadata=function(R){return R?k.raw:k.parsed},this.getMetadataFormat=function(){return k.format},this._setMetadataPair=function(R,q){k.parsed[R]=q},this._setMetadataFormat=function(R){k.format=R},this._setMetadataRaw=function(R){k.raw=R}},r.subParser("anchors",function(y,E,w){y=w.converter._dispatch("anchors.before",y,E,w);var T=function(x,C,k,N,U,M,P){if(r.helper.isUndefined(P)&&(P=""),k=k.toLowerCase(),x.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)N="";else if(!N)if(k||(k=C.toLowerCase().replace(/ ?\n/g," ")),N="#"+k,!r.helper.isUndefined(w.gUrls[k]))N=w.gUrls[k],r.helper.isUndefined(w.gTitles[k])||(P=w.gTitles[k]);else return x;N=N.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var G='<a href="'+N+'"';return P!==""&&P!==null&&(P=P.replace(/"/g,"&quot;"),P=P.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),G+=' title="'+P+'"'),E.openLinksInNewWindow&&!/^#/.test(N)&&(G+=' rel="noopener noreferrer" target="E95Eblank"'),G+=">"+C+"</a>",G};return y=y.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,T),y=y.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,T),y=y.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,T),y=y.replace(/\[([^\[\]]+)]()()()()()/g,T),E.ghMentions&&(y=y.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi,function(x,C,k,N,U){if(k==="\\")return C+N;if(!r.helper.isString(E.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var M=E.ghMentionsLink.replace(/\{u}/g,U),P="";return E.openLinksInNewWindow&&(P=' rel="noopener noreferrer" target="E95Eblank"'),C+'<a href="'+M+'"'+P+">"+N+"</a>"})),y=w.converter._dispatch("anchors.after",y,E,w),y});var b=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,A=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,O=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,V=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,z=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,j=function(y){return function(E,w,T,x,C,k,N){T=T.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var U=T,M="",P="",G=w||"",R=N||"";return/^www\./i.test(T)&&(T=T.replace(/^www\./i,"http://www.")),y.excludeTrailingPunctuationFromURLs&&k&&(M=k),y.openLinksInNewWindow&&(P=' rel="noopener noreferrer" target="E95Eblank"'),G+'<a href="'+T+'"'+P+">"+U+"</a>"+M+R}},F=function(y,E){return function(w,T,x){var C="mailto:";return T=T||"",x=r.subParser("unescapeSpecialChars")(x,y,E),y.encodeEmails?(C=r.helper.encodeEmailAddress(C+x),x=r.helper.encodeEmailAddress(x)):C=C+x,T+'<a href="'+C+'">'+x+"</a>"}};r.subParser("autoLinks",function(y,E,w){return y=w.converter._dispatch("autoLinks.before",y,E,w),y=y.replace(O,j(E)),y=y.replace(z,F(E,w)),y=w.converter._dispatch("autoLinks.after",y,E,w),y}),r.subParser("simplifiedAutoLinks",function(y,E,w){return E.simplifiedAutoLink&&(y=w.converter._dispatch("simplifiedAutoLinks.before",y,E,w),E.excludeTrailingPunctuationFromURLs?y=y.replace(A,j(E)):y=y.replace(b,j(E)),y=y.replace(V,F(E,w)),y=w.converter._dispatch("simplifiedAutoLinks.after",y,E,w)),y}),r.subParser("blockGamut",function(y,E,w){return y=w.converter._dispatch("blockGamut.before",y,E,w),y=r.subParser("blockQuotes")(y,E,w),y=r.subParser("headers")(y,E,w),y=r.subParser("horizontalRule")(y,E,w),y=r.subParser("lists")(y,E,w),y=r.subParser("codeBlocks")(y,E,w),y=r.subParser("tables")(y,E,w),y=r.subParser("hashHTMLBlocks")(y,E,w),y=r.subParser("paragraphs")(y,E,w),y=w.converter._dispatch("blockGamut.after",y,E,w),y}),r.subParser("blockQuotes",function(y,E,w){y=w.converter._dispatch("blockQuotes.before",y,E,w),y=y+`

`;var T=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return E.splitAdjacentBlockquotes&&(T=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),y=y.replace(T,function(x){return x=x.replace(/^[ \t]*>[ \t]?/gm,""),x=x.replace(/0/g,""),x=x.replace(/^[ \t]+$/gm,""),x=r.subParser("githubCodeBlocks")(x,E,w),x=r.subParser("blockGamut")(x,E,w),x=x.replace(/(^|\n)/g,"$1  "),x=x.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(C,k){var N=k;return N=N.replace(/^  /mg,"0"),N=N.replace(/0/g,""),N}),r.subParser("hashBlock")(`<blockquote>
`+x+`
</blockquote>`,E,w)}),y=w.converter._dispatch("blockQuotes.after",y,E,w),y}),r.subParser("codeBlocks",function(y,E,w){y=w.converter._dispatch("codeBlocks.before",y,E,w),y+="0";var T=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=0))/g;return y=y.replace(T,function(x,C,k){var N=C,U=k,M=`
`;return N=r.subParser("outdent")(N,E,w),N=r.subParser("encodeCode")(N,E,w),N=r.subParser("detab")(N,E,w),N=N.replace(/^\n+/g,""),N=N.replace(/\n+$/g,""),E.omitExtraWLInCodeBlocks&&(M=""),N="<pre><code>"+N+M+"</code></pre>",r.subParser("hashBlock")(N,E,w)+U}),y=y.replace(/0/,""),y=w.converter._dispatch("codeBlocks.after",y,E,w),y}),r.subParser("codeSpans",function(y,E,w){return y=w.converter._dispatch("codeSpans.before",y,E,w),typeof y>"u"&&(y=""),y=y.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(T,x,C,k){var N=k;return N=N.replace(/^([ \t]*)/g,""),N=N.replace(/[ \t]*$/g,""),N=r.subParser("encodeCode")(N,E,w),N=x+"<code>"+N+"</code>",N=r.subParser("hashHTMLSpans")(N,E,w),N}),y=w.converter._dispatch("codeSpans.after",y,E,w),y}),r.subParser("completeHTMLDocument",function(y,E,w){if(!E.completeHTMLDocument)return y;y=w.converter._dispatch("completeHTMLDocument.before",y,E,w);var T="html",x=`<!DOCTYPE HTML>
`,C="",k=`<meta charset="utf-8">
`,N="",U="";typeof w.metadata.parsed.doctype<"u"&&(x="<!DOCTYPE "+w.metadata.parsed.doctype+`>
`,T=w.metadata.parsed.doctype.toString().toLowerCase(),(T==="html"||T==="html5")&&(k='<meta charset="utf-8">'));for(var M in w.metadata.parsed)if(w.metadata.parsed.hasOwnProperty(M))switch(M.toLowerCase()){case"doctype":break;case"title":C="<title>"+w.metadata.parsed.title+`</title>
`;break;case"charset":T==="html"||T==="html5"?k='<meta charset="'+w.metadata.parsed.charset+`">
`:k='<meta name="charset" content="'+w.metadata.parsed.charset+`">
`;break;case"language":case"lang":N=' lang="'+w.metadata.parsed[M]+'"',U+='<meta name="'+M+'" content="'+w.metadata.parsed[M]+`">
`;break;default:U+='<meta name="'+M+'" content="'+w.metadata.parsed[M]+`">
`}return y=x+"<html"+N+`>
<head>
`+C+k+U+`</head>
<body>
`+y.trim()+`
</body>
</html>`,y=w.converter._dispatch("completeHTMLDocument.after",y,E,w),y}),r.subParser("detab",function(y,E,w){return y=w.converter._dispatch("detab.before",y,E,w),y=y.replace(/\t(?=\t)/g,"    "),y=y.replace(/\t/g,"AB"),y=y.replace(/B(.+?)A/g,function(T,x){for(var C=x,k=4-C.length%4,N=0;N<k;N++)C+=" ";return C}),y=y.replace(/A/g,"    "),y=y.replace(/B/g,""),y=w.converter._dispatch("detab.after",y,E,w),y}),r.subParser("ellipsis",function(y,E,w){return E.ellipsis&&(y=w.converter._dispatch("ellipsis.before",y,E,w),y=y.replace(/\.\.\./g,""),y=w.converter._dispatch("ellipsis.after",y,E,w)),y}),r.subParser("emoji",function(y,E,w){if(!E.emoji)return y;y=w.converter._dispatch("emoji.before",y,E,w);var T=/:([\S]+?):/g;return y=y.replace(T,function(x,C){return r.helper.emojis.hasOwnProperty(C)?r.helper.emojis[C]:x}),y=w.converter._dispatch("emoji.after",y,E,w),y}),r.subParser("encodeAmpsAndAngles",function(y,E,w){return y=w.converter._dispatch("encodeAmpsAndAngles.before",y,E,w),y=y.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),y=y.replace(/<(?![a-z\/?$!])/gi,"&lt;"),y=y.replace(/</g,"&lt;"),y=y.replace(/>/g,"&gt;"),y=w.converter._dispatch("encodeAmpsAndAngles.after",y,E,w),y}),r.subParser("encodeBackslashEscapes",function(y,E,w){return y=w.converter._dispatch("encodeBackslashEscapes.before",y,E,w),y=y.replace(/\\(\\)/g,r.helper.escapeCharactersCallback),y=y.replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,r.helper.escapeCharactersCallback),y=w.converter._dispatch("encodeBackslashEscapes.after",y,E,w),y}),r.subParser("encodeCode",function(y,E,w){return y=w.converter._dispatch("encodeCode.before",y,E,w),y=y.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,r.helper.escapeCharactersCallback),y=w.converter._dispatch("encodeCode.after",y,E,w),y}),r.subParser("escapeSpecialCharsWithinTagAttributes",function(y,E,w){y=w.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",y,E,w);var T=/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,x=/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;return y=y.replace(T,function(C){return C.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),y=y.replace(x,function(C){return C.replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),y=w.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",y,E,w),y}),r.subParser("githubCodeBlocks",function(y,E,w){return E.ghCodeBlocks?(y=w.converter._dispatch("githubCodeBlocks.before",y,E,w),y+="0",y=y.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(T,x,C,k){var N=E.omitExtraWLInCodeBlocks?"":`
`;return k=r.subParser("encodeCode")(k,E,w),k=r.subParser("detab")(k,E,w),k=k.replace(/^\n+/g,""),k=k.replace(/\n+$/g,""),k="<pre><code"+(C?' class="'+C+" language-"+C+'"':"")+">"+k+N+"</code></pre>",k=r.subParser("hashBlock")(k,E,w),`

G`+(w.ghCodeBlocks.push({text:T,codeblock:k})-1)+`G

`}),y=y.replace(/0/,""),w.converter._dispatch("githubCodeBlocks.after",y,E,w)):y}),r.subParser("hashBlock",function(y,E,w){return y=w.converter._dispatch("hashBlock.before",y,E,w),y=y.replace(/(^\n+|\n+$)/g,""),y=`

K`+(w.gHtmlBlocks.push(y)-1)+`K

`,y=w.converter._dispatch("hashBlock.after",y,E,w),y}),r.subParser("hashCodeTags",function(y,E,w){y=w.converter._dispatch("hashCodeTags.before",y,E,w);var T=function(x,C,k,N){var U=k+r.subParser("encodeCode")(C,E,w)+N;return"C"+(w.gHtmlSpans.push(U)-1)+"C"};return y=r.helper.replaceRecursiveRegExp(y,T,"<code\\b[^>]*>","</code>","gim"),y=w.converter._dispatch("hashCodeTags.after",y,E,w),y}),r.subParser("hashElement",function(y,E,w){return function(T,x){var C=x;return C=C.replace(/\n\n/g,`
`),C=C.replace(/^\n/,""),C=C.replace(/\n+$/g,""),C=`

K`+(w.gHtmlBlocks.push(C)-1)+`K

`,C}}),r.subParser("hashHTMLBlocks",function(y,E,w){y=w.converter._dispatch("hashHTMLBlocks.before",y,E,w);var T=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],x=function(R,q,Q,W){var B=R;return Q.search(/\bmarkdown\b/)!==-1&&(B=Q+w.converter.makeHtml(q)+W),`

K`+(w.gHtmlBlocks.push(B)-1)+`K

`};E.backslashEscapesHTMLTags&&(y=y.replace(/\\<(\/?[^>]+?)>/g,function(R,q){return"&lt;"+q+"&gt;"}));for(var C=0;C<T.length;++C)for(var k,N=new RegExp("^ {0,3}(<"+T[C]+"\\b[^>]*>)","im"),U="<"+T[C]+"\\b[^>]*>",M="</"+T[C]+">";(k=r.helper.regexIndexOf(y,N))!==-1;){var P=r.helper.splitAtIndex(y,k),G=r.helper.replaceRecursiveRegExp(P[1],x,U,M,"im");if(G===P[1])break;y=P[0].concat(G)}return y=y.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(y,E,w)),y=r.helper.replaceRecursiveRegExp(y,function(R){return`

K`+(w.gHtmlBlocks.push(R)-1)+`K

`},"^ {0,3}<!--","-->","gm"),y=y.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(y,E,w)),y=w.converter._dispatch("hashHTMLBlocks.after",y,E,w),y}),r.subParser("hashHTMLSpans",function(y,E,w){y=w.converter._dispatch("hashHTMLSpans.before",y,E,w);function T(x){return"C"+(w.gHtmlSpans.push(x)-1)+"C"}return y=y.replace(/<[^>]+?\/>/gi,function(x){return T(x)}),y=y.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(x){return T(x)}),y=y.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(x){return T(x)}),y=y.replace(/<[^>]+?>/gi,function(x){return T(x)}),y=w.converter._dispatch("hashHTMLSpans.after",y,E,w),y}),r.subParser("unhashHTMLSpans",function(y,E,w){y=w.converter._dispatch("unhashHTMLSpans.before",y,E,w);for(var T=0;T<w.gHtmlSpans.length;++T){for(var x=w.gHtmlSpans[T],C=0;/C(\d+)C/.test(x);){var k=RegExp.$1;if(x=x.replace("C"+k+"C",w.gHtmlSpans[k]),C===10){console.error("maximum nesting of 10 spans reached!!!");break}++C}y=y.replace("C"+T+"C",x)}return y=w.converter._dispatch("unhashHTMLSpans.after",y,E,w),y}),r.subParser("hashPreCodeTags",function(y,E,w){y=w.converter._dispatch("hashPreCodeTags.before",y,E,w);var T=function(x,C,k,N){var U=k+r.subParser("encodeCode")(C,E,w)+N;return`

G`+(w.ghCodeBlocks.push({text:x,codeblock:U})-1)+`G

`};return y=r.helper.replaceRecursiveRegExp(y,T,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),y=w.converter._dispatch("hashPreCodeTags.after",y,E,w),y}),r.subParser("headers",function(y,E,w){y=w.converter._dispatch("headers.before",y,E,w);var T=isNaN(parseInt(E.headerLevelStart))?1:parseInt(E.headerLevelStart),x=E.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,C=E.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;y=y.replace(x,function(U,M){var P=r.subParser("spanGamut")(M,E,w),G=E.noHeaderId?"":' id="'+N(M)+'"',R=T,q="<h"+R+G+">"+P+"</h"+R+">";return r.subParser("hashBlock")(q,E,w)}),y=y.replace(C,function(U,M){var P=r.subParser("spanGamut")(M,E,w),G=E.noHeaderId?"":' id="'+N(M)+'"',R=T+1,q="<h"+R+G+">"+P+"</h"+R+">";return r.subParser("hashBlock")(q,E,w)});var k=E.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;y=y.replace(k,function(U,M,P){var G=P;E.customizedHeaderId&&(G=P.replace(/\s?\{([^{]+?)}\s*$/,""));var R=r.subParser("spanGamut")(G,E,w),q=E.noHeaderId?"":' id="'+N(P)+'"',Q=T-1+M.length,W="<h"+Q+q+">"+R+"</h"+Q+">";return r.subParser("hashBlock")(W,E,w)});function N(U){var M,P;if(E.customizedHeaderId){var G=U.match(/\{([^{]+?)}\s*$/);G&&G[1]&&(U=G[1])}return M=U,r.helper.isString(E.prefixHeaderId)?P=E.prefixHeaderId:E.prefixHeaderId===!0?P="section-":P="",E.rawPrefixHeaderId||(M=P+M),E.ghCompatibleHeaderId?M=M.replace(/ /g,"-").replace(/&amp;/g,"").replace(/T/g,"").replace(/D/g,"").replace(/[&+$,\/:;=?@"#{}|^~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():E.rawHeaderId?M=M.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/T/g,"").replace(/D/g,"$").replace(/["']/g,"-").toLowerCase():M=M.replace(/[^\w]/g,"").toLowerCase(),E.rawPrefixHeaderId&&(M=P+M),w.hashLinkCounts[M]?M=M+"-"+w.hashLinkCounts[M]++:w.hashLinkCounts[M]=1,M}return y=w.converter._dispatch("headers.after",y,E,w),y}),r.subParser("horizontalRule",function(y,E,w){y=w.converter._dispatch("horizontalRule.before",y,E,w);var T=r.subParser("hashBlock")("<hr />",E,w);return y=y.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,T),y=y.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,T),y=y.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,T),y=w.converter._dispatch("horizontalRule.after",y,E,w),y}),r.subParser("images",function(y,E,w){y=w.converter._dispatch("images.before",y,E,w);var T=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,x=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,C=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,k=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,N=/!\[([^\[\]]+)]()()()()()/g;function U(P,G,R,q,Q,W,B,X){return q=q.replace(/\s/g,""),M(P,G,R,q,Q,W,B,X)}function M(P,G,R,q,Q,W,B,X){var te=w.gUrls,J=w.gTitles,re=w.gDimensions;if(R=R.toLowerCase(),X||(X=""),P.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)q="";else if(q===""||q===null)if((R===""||R===null)&&(R=G.toLowerCase().replace(/ ?\n/g," ")),q="#"+R,!r.helper.isUndefined(te[R]))q=te[R],r.helper.isUndefined(J[R])||(X=J[R]),r.helper.isUndefined(re[R])||(Q=re[R].width,W=re[R].height);else return P;G=G.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),q=q.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var ce='<img src="'+q+'" alt="'+G+'"';return X&&r.helper.isString(X)&&(X=X.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),ce+=' title="'+X+'"'),Q&&W&&(Q=Q==="*"?"auto":Q,W=W==="*"?"auto":W,ce+=' width="'+Q+'"',ce+=' height="'+W+'"'),ce+=" />",ce}return y=y.replace(k,M),y=y.replace(C,U),y=y.replace(x,M),y=y.replace(T,M),y=y.replace(N,M),y=w.converter._dispatch("images.after",y,E,w),y}),r.subParser("italicsAndBold",function(y,E,w){y=w.converter._dispatch("italicsAndBold.before",y,E,w);function T(x,C,k){return C+x+k}return E.literalMidWordUnderscores?(y=y.replace(/\b___(\S[\s\S]*?)___\b/g,function(x,C){return T(C,"<strong><em>","</em></strong>")}),y=y.replace(/\b__(\S[\s\S]*?)__\b/g,function(x,C){return T(C,"<strong>","</strong>")}),y=y.replace(/\b_(\S[\s\S]*?)_\b/g,function(x,C){return T(C,"<em>","</em>")})):(y=y.replace(/___(\S[\s\S]*?)___/g,function(x,C){return/\S$/.test(C)?T(C,"<strong><em>","</em></strong>"):x}),y=y.replace(/__(\S[\s\S]*?)__/g,function(x,C){return/\S$/.test(C)?T(C,"<strong>","</strong>"):x}),y=y.replace(/_([^\s_][\s\S]*?)_/g,function(x,C){return/\S$/.test(C)?T(C,"<em>","</em>"):x})),E.literalMidWordAsterisks?(y=y.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(x,C,k){return T(k,C+"<strong><em>","</em></strong>")}),y=y.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(x,C,k){return T(k,C+"<strong>","</strong>")}),y=y.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(x,C,k){return T(k,C+"<em>","</em>")})):(y=y.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(x,C){return/\S$/.test(C)?T(C,"<strong><em>","</em></strong>"):x}),y=y.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(x,C){return/\S$/.test(C)?T(C,"<strong>","</strong>"):x}),y=y.replace(/\*([^\s*][\s\S]*?)\*/g,function(x,C){return/\S$/.test(C)?T(C,"<em>","</em>"):x})),y=w.converter._dispatch("italicsAndBold.after",y,E,w),y}),r.subParser("lists",function(y,E,w){function T(k,N){w.gListLevel++,k=k.replace(/\n{2,}$/,`
`),k+="0";var U=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,M=/\n[ \t]*\n(?!0)/.test(k);return E.disableForced4SpacesIndentedSublists&&(U=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0|\2([*+-]|\d+[.])[ \t]+))/gm),k=k.replace(U,function(P,G,R,q,Q,W,B){B=B&&B.trim()!=="";var X=r.subParser("outdent")(Q,E,w),te="";return W&&E.tasklists&&(te=' class="task-list-item" style="list-style-type: none;"',X=X.replace(/^[ \t]*\[(x|X| )?]/m,function(){var J='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return B&&(J+=" checked"),J+=">",J})),X=X.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(J){return"A"+J}),G||X.search(/\n{2,}/)>-1?(X=r.subParser("githubCodeBlocks")(X,E,w),X=r.subParser("blockGamut")(X,E,w)):(X=r.subParser("lists")(X,E,w),X=X.replace(/\n$/,""),X=r.subParser("hashHTMLBlocks")(X,E,w),X=X.replace(/\n\n+/g,`

`),M?X=r.subParser("paragraphs")(X,E,w):X=r.subParser("spanGamut")(X,E,w)),X=X.replace("A",""),X="<li"+te+">"+X+`</li>
`,X}),k=k.replace(/0/g,""),w.gListLevel--,N&&(k=k.replace(/\s+$/,"")),k}function x(k,N){if(N==="ol"){var U=k.match(/^ *(\d+)\./);if(U&&U[1]!=="1")return' start="'+U[1]+'"'}return""}function C(k,N,U){var M=E.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,P=E.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,G=N==="ul"?M:P,R="";if(k.search(G)!==-1)(function Q(W){var B=W.search(G),X=x(k,N);B!==-1?(R+=`

<`+N+X+`>
`+T(W.slice(0,B),!!U)+"</"+N+`>
`,N=N==="ul"?"ol":"ul",G=N==="ul"?M:P,Q(W.slice(B))):R+=`

<`+N+X+`>
`+T(W,!!U)+"</"+N+`>
`})(k);else{var q=x(k,N);R=`

<`+N+q+`>
`+T(k,!!U)+"</"+N+`>
`}return R}return y=w.converter._dispatch("lists.before",y,E,w),y+="0",w.gListLevel?y=y.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(k,N,U){var M=U.search(/[*+-]/g)>-1?"ul":"ol";return C(N,M,!0)}):y=y.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(k,N,U,M){var P=M.search(/[*+-]/g)>-1?"ul":"ol";return C(U,P,!1)}),y=y.replace(/0/,""),y=w.converter._dispatch("lists.after",y,E,w),y}),r.subParser("metadata",function(y,E,w){if(!E.metadata)return y;y=w.converter._dispatch("metadata.before",y,E,w);function T(x){w.metadata.raw=x,x=x.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),x=x.replace(/\n {4}/g," "),x.replace(/^([\S ]+): +([\s\S]+?)$/gm,function(C,k,N){return w.metadata.parsed[k]=N,""})}return y=y.replace(/^\s*+(\S*?)\n([\s\S]+?)\n+\n/,function(x,C,k){return T(k),"M"}),y=y.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(x,C,k){return C&&(w.metadata.format=C),T(k),"M"}),y=y.replace(/M/g,""),y=w.converter._dispatch("metadata.after",y,E,w),y}),r.subParser("outdent",function(y,E,w){return y=w.converter._dispatch("outdent.before",y,E,w),y=y.replace(/^(\t|[ ]{1,4})/gm,"0"),y=y.replace(/0/g,""),y=w.converter._dispatch("outdent.after",y,E,w),y}),r.subParser("paragraphs",function(y,E,w){y=w.converter._dispatch("paragraphs.before",y,E,w),y=y.replace(/^\n+/g,""),y=y.replace(/\n+$/g,"");for(var T=y.split(/\n{2,}/g),x=[],C=T.length,k=0;k<C;k++){var N=T[k];N.search(/(K|G)(\d+)\1/g)>=0?x.push(N):N.search(/\S/)>=0&&(N=r.subParser("spanGamut")(N,E,w),N=N.replace(/^([ \t]*)/g,"<p>"),N+="</p>",x.push(N))}for(C=x.length,k=0;k<C;k++){for(var U="",M=x[k],P=!1;/(K|G)(\d+)\1/.test(M);){var G=RegExp.$1,R=RegExp.$2;G==="K"?U=w.gHtmlBlocks[R]:P?U=r.subParser("encodeCode")(w.ghCodeBlocks[R].text,E,w):U=w.ghCodeBlocks[R].codeblock,U=U.replace(/\$/g,"$$$$"),M=M.replace(/(\n\n)?(K|G)\d+\2(\n\n)?/,U),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(M)&&(P=!0)}x[k]=M}return y=x.join(`
`),y=y.replace(/^\n+/g,""),y=y.replace(/\n+$/g,""),w.converter._dispatch("paragraphs.after",y,E,w)}),r.subParser("runExtension",function(y,E,w,T){if(y.filter)E=y.filter(E,T.converter,w);else if(y.regex){var x=y.regex;x instanceof RegExp||(x=new RegExp(x,"g")),E=E.replace(x,y.replace)}return E}),r.subParser("spanGamut",function(y,E,w){return y=w.converter._dispatch("spanGamut.before",y,E,w),y=r.subParser("codeSpans")(y,E,w),y=r.subParser("escapeSpecialCharsWithinTagAttributes")(y,E,w),y=r.subParser("encodeBackslashEscapes")(y,E,w),y=r.subParser("images")(y,E,w),y=r.subParser("anchors")(y,E,w),y=r.subParser("autoLinks")(y,E,w),y=r.subParser("simplifiedAutoLinks")(y,E,w),y=r.subParser("emoji")(y,E,w),y=r.subParser("underline")(y,E,w),y=r.subParser("italicsAndBold")(y,E,w),y=r.subParser("strikethrough")(y,E,w),y=r.subParser("ellipsis")(y,E,w),y=r.subParser("hashHTMLSpans")(y,E,w),y=r.subParser("encodeAmpsAndAngles")(y,E,w),E.simpleLineBreaks?/\n\nK/.test(y)||(y=y.replace(/\n+/g,`<br />
`)):y=y.replace(/  +\n/g,`<br />
`),y=w.converter._dispatch("spanGamut.after",y,E,w),y}),r.subParser("strikethrough",function(y,E,w){function T(x){return E.simplifiedAutoLink&&(x=r.subParser("simplifiedAutoLinks")(x,E,w)),"<del>"+x+"</del>"}return E.strikethrough&&(y=w.converter._dispatch("strikethrough.before",y,E,w),y=y.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(x,C){return T(C)}),y=w.converter._dispatch("strikethrough.after",y,E,w)),y}),r.subParser("stripLinkDefinitions",function(y,E,w){var T=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=0))/gm,x=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=0)|(?=\n\[))/gm;y+="0";var C=function(k,N,U,M,P,G,R){return N=N.toLowerCase(),y.toLowerCase().split(N).length-1<2?k:(U.match(/^data:.+?\/.+?;base64,/)?w.gUrls[N]=U.replace(/\s/g,""):w.gUrls[N]=r.subParser("encodeAmpsAndAngles")(U,E,w),G?G+R:(R&&(w.gTitles[N]=R.replace(/"|'/g,"&quot;")),E.parseImgDimensions&&M&&P&&(w.gDimensions[N]={width:M,height:P}),""))};return y=y.replace(x,C),y=y.replace(T,C),y=y.replace(/0/,""),y}),r.subParser("tables",function(y,E,w){if(!E.tables)return y;var T=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|0)/gm,x=/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|0)/gm;function C(P){return/^:[ \t]*--*$/.test(P)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(P)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(P)?' style="text-align:center;"':""}function k(P,G){var R="";return P=P.trim(),(E.tablesHeaderId||E.tableHeaderId)&&(R=' id="'+P.replace(/ /g,"_").toLowerCase()+'"'),P=r.subParser("spanGamut")(P,E,w),"<th"+R+G+">"+P+`</th>
`}function N(P,G){var R=r.subParser("spanGamut")(P,E,w);return"<td"+G+">"+R+`</td>
`}function U(P,G){for(var R=`<table>
<thead>
<tr>
`,q=P.length,Q=0;Q<q;++Q)R+=P[Q];for(R+=`</tr>
</thead>
<tbody>
`,Q=0;Q<G.length;++Q){R+=`<tr>
`;for(var W=0;W<q;++W)R+=G[Q][W];R+=`</tr>
`}return R+=`</tbody>
</table>
`,R}function M(P){var G,R=P.split(`
`);for(G=0;G<R.length;++G)/^ {0,3}\|/.test(R[G])&&(R[G]=R[G].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(R[G])&&(R[G]=R[G].replace(/\|[ \t]*$/,"")),R[G]=r.subParser("codeSpans")(R[G],E,w);var q=R[0].split("|").map(function(ce){return ce.trim()}),Q=R[1].split("|").map(function(ce){return ce.trim()}),W=[],B=[],X=[],te=[];for(R.shift(),R.shift(),G=0;G<R.length;++G)R[G].trim()!==""&&W.push(R[G].split("|").map(function(ce){return ce.trim()}));if(q.length<Q.length)return P;for(G=0;G<Q.length;++G)X.push(C(Q[G]));for(G=0;G<q.length;++G)r.helper.isUndefined(X[G])&&(X[G]=""),B.push(k(q[G],X[G]));for(G=0;G<W.length;++G){for(var J=[],re=0;re<B.length;++re)r.helper.isUndefined(W[G][re]),J.push(N(W[G][re],X[re]));te.push(J)}return U(B,te)}return y=w.converter._dispatch("tables.before",y,E,w),y=y.replace(/\\(\|)/g,r.helper.escapeCharactersCallback),y=y.replace(T,M),y=y.replace(x,M),y=w.converter._dispatch("tables.after",y,E,w),y}),r.subParser("underline",function(y,E,w){return E.underline&&(y=w.converter._dispatch("underline.before",y,E,w),E.literalMidWordUnderscores?(y=y.replace(/\b___(\S[\s\S]*?)___\b/g,function(T,x){return"<u>"+x+"</u>"}),y=y.replace(/\b__(\S[\s\S]*?)__\b/g,function(T,x){return"<u>"+x+"</u>"})):(y=y.replace(/___(\S[\s\S]*?)___/g,function(T,x){return/\S$/.test(x)?"<u>"+x+"</u>":T}),y=y.replace(/__(\S[\s\S]*?)__/g,function(T,x){return/\S$/.test(x)?"<u>"+x+"</u>":T})),y=y.replace(/(_)/g,r.helper.escapeCharactersCallback),y=w.converter._dispatch("underline.after",y,E,w)),y}),r.subParser("unescapeSpecialChars",function(y,E,w){return y=w.converter._dispatch("unescapeSpecialChars.before",y,E,w),y=y.replace(/E(\d+)E/g,function(T,x){var C=parseInt(x);return String.fromCharCode(C)}),y=w.converter._dispatch("unescapeSpecialChars.after",y,E,w),y}),r.subParser("makeMarkdown.blockquote",function(y,E){var w="";if(y.hasChildNodes())for(var T=y.childNodes,x=T.length,C=0;C<x;++C){var k=r.subParser("makeMarkdown.node")(T[C],E);k!==""&&(w+=k)}return w=w.trim(),w="> "+w.split(`
`).join(`
> `),w}),r.subParser("makeMarkdown.codeBlock",function(y,E){var w=y.getAttribute("language"),T=y.getAttribute("precodenum");return"```"+w+`
`+E.preList[T]+"\n```"}),r.subParser("makeMarkdown.codeSpan",function(y){return"`"+y.innerHTML+"`"}),r.subParser("makeMarkdown.emphasis",function(y,E){var w="";if(y.hasChildNodes()){w+="*";for(var T=y.childNodes,x=T.length,C=0;C<x;++C)w+=r.subParser("makeMarkdown.node")(T[C],E);w+="*"}return w}),r.subParser("makeMarkdown.header",function(y,E,w){var T=new Array(w+1).join("#"),x="";if(y.hasChildNodes()){x=T+" ";for(var C=y.childNodes,k=C.length,N=0;N<k;++N)x+=r.subParser("makeMarkdown.node")(C[N],E)}return x}),r.subParser("makeMarkdown.hr",function(){return"---"}),r.subParser("makeMarkdown.image",function(y){var E="";return y.hasAttribute("src")&&(E+="!["+y.getAttribute("alt")+"](",E+="<"+y.getAttribute("src")+">",y.hasAttribute("width")&&y.hasAttribute("height")&&(E+=" ="+y.getAttribute("width")+"x"+y.getAttribute("height")),y.hasAttribute("title")&&(E+=' "'+y.getAttribute("title")+'"'),E+=")"),E}),r.subParser("makeMarkdown.links",function(y,E){var w="";if(y.hasChildNodes()&&y.hasAttribute("href")){var T=y.childNodes,x=T.length;w="[";for(var C=0;C<x;++C)w+=r.subParser("makeMarkdown.node")(T[C],E);w+="](",w+="<"+y.getAttribute("href")+">",y.hasAttribute("title")&&(w+=' "'+y.getAttribute("title")+'"'),w+=")"}return w}),r.subParser("makeMarkdown.list",function(y,E,w){var T="";if(!y.hasChildNodes())return"";for(var x=y.childNodes,C=x.length,k=y.getAttribute("start")||1,N=0;N<C;++N)if(!(typeof x[N].tagName>"u"||x[N].tagName.toLowerCase()!=="li")){var U="";w==="ol"?U=k.toString()+". ":U="- ",T+=U+r.subParser("makeMarkdown.listItem")(x[N],E),++k}return T+=`
<!-- -->
`,T.trim()}),r.subParser("makeMarkdown.listItem",function(y,E){for(var w="",T=y.childNodes,x=T.length,C=0;C<x;++C)w+=r.subParser("makeMarkdown.node")(T[C],E);return/\n$/.test(w)?w=w.split(`
`).join(`
    `).replace(/^ {4}$/gm,"").replace(/\n\n+/g,`

`):w+=`
`,w}),r.subParser("makeMarkdown.node",function(y,E,w){w=w||!1;var T="";if(y.nodeType===3)return r.subParser("makeMarkdown.txt")(y,E);if(y.nodeType===8)return"<!--"+y.data+`-->

`;if(y.nodeType!==1)return"";var x=y.tagName.toLowerCase();switch(x){case"h1":w||(T=r.subParser("makeMarkdown.header")(y,E,1)+`

`);break;case"h2":w||(T=r.subParser("makeMarkdown.header")(y,E,2)+`

`);break;case"h3":w||(T=r.subParser("makeMarkdown.header")(y,E,3)+`

`);break;case"h4":w||(T=r.subParser("makeMarkdown.header")(y,E,4)+`

`);break;case"h5":w||(T=r.subParser("makeMarkdown.header")(y,E,5)+`

`);break;case"h6":w||(T=r.subParser("makeMarkdown.header")(y,E,6)+`

`);break;case"p":w||(T=r.subParser("makeMarkdown.paragraph")(y,E)+`

`);break;case"blockquote":w||(T=r.subParser("makeMarkdown.blockquote")(y,E)+`

`);break;case"hr":w||(T=r.subParser("makeMarkdown.hr")(y,E)+`

`);break;case"ol":w||(T=r.subParser("makeMarkdown.list")(y,E,"ol")+`

`);break;case"ul":w||(T=r.subParser("makeMarkdown.list")(y,E,"ul")+`

`);break;case"precode":w||(T=r.subParser("makeMarkdown.codeBlock")(y,E)+`

`);break;case"pre":w||(T=r.subParser("makeMarkdown.pre")(y,E)+`

`);break;case"table":w||(T=r.subParser("makeMarkdown.table")(y,E)+`

`);break;case"code":T=r.subParser("makeMarkdown.codeSpan")(y,E);break;case"em":case"i":T=r.subParser("makeMarkdown.emphasis")(y,E);break;case"strong":case"b":T=r.subParser("makeMarkdown.strong")(y,E);break;case"del":T=r.subParser("makeMarkdown.strikethrough")(y,E);break;case"a":T=r.subParser("makeMarkdown.links")(y,E);break;case"img":T=r.subParser("makeMarkdown.image")(y,E);break;default:T=y.outerHTML+`

`}return T}),r.subParser("makeMarkdown.paragraph",function(y,E){var w="";if(y.hasChildNodes())for(var T=y.childNodes,x=T.length,C=0;C<x;++C)w+=r.subParser("makeMarkdown.node")(T[C],E);return w=w.trim(),w}),r.subParser("makeMarkdown.pre",function(y,E){var w=y.getAttribute("prenum");return"<pre>"+E.preList[w]+"</pre>"}),r.subParser("makeMarkdown.strikethrough",function(y,E){var w="";if(y.hasChildNodes()){w+="~~";for(var T=y.childNodes,x=T.length,C=0;C<x;++C)w+=r.subParser("makeMarkdown.node")(T[C],E);w+="~~"}return w}),r.subParser("makeMarkdown.strong",function(y,E){var w="";if(y.hasChildNodes()){w+="**";for(var T=y.childNodes,x=T.length,C=0;C<x;++C)w+=r.subParser("makeMarkdown.node")(T[C],E);w+="**"}return w}),r.subParser("makeMarkdown.table",function(y,E){var w="",T=[[],[]],x=y.querySelectorAll("thead>tr>th"),C=y.querySelectorAll("tbody>tr"),k,N;for(k=0;k<x.length;++k){var U=r.subParser("makeMarkdown.tableCell")(x[k],E),M="---";if(x[k].hasAttribute("style")){var P=x[k].getAttribute("style").toLowerCase().replace(/\s/g,"");switch(P){case"text-align:left;":M=":---";break;case"text-align:right;":M="---:";break;case"text-align:center;":M=":---:";break}}T[0][k]=U.trim(),T[1][k]=M}for(k=0;k<C.length;++k){var G=T.push([])-1,R=C[k].getElementsByTagName("td");for(N=0;N<x.length;++N){var q=" ";typeof R[N]<"u"&&(q=r.subParser("makeMarkdown.tableCell")(R[N],E)),T[G].push(q)}}var Q=3;for(k=0;k<T.length;++k)for(N=0;N<T[k].length;++N){var W=T[k][N].length;W>Q&&(Q=W)}for(k=0;k<T.length;++k){for(N=0;N<T[k].length;++N)k===1?T[k][N].slice(-1)===":"?T[k][N]=r.helper.padEnd(T[k][N].slice(-1),Q-1,"-")+":":T[k][N]=r.helper.padEnd(T[k][N],Q,"-"):T[k][N]=r.helper.padEnd(T[k][N],Q);w+="| "+T[k].join(" | ")+` |
`}return w.trim()}),r.subParser("makeMarkdown.tableCell",function(y,E){var w="";if(!y.hasChildNodes())return"";for(var T=y.childNodes,x=T.length,C=0;C<x;++C)w+=r.subParser("makeMarkdown.node")(T[C],E,!0);return w.trim()}),r.subParser("makeMarkdown.txt",function(y){var E=y.nodeValue;return E=E.replace(/ +/g," "),E=E.replace(/NBSP;/g," "),E=r.helper.unescapeHTMLEntities(E),E=E.replace(/([*_~|`])/g,"\\$1"),E=E.replace(/^(\s*)>/g,"\\$1>"),E=E.replace(/^#/gm,"\\#"),E=E.replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3"),E=E.replace(/^( {0,3}\d+)\./gm,"$1\\."),E=E.replace(/^( {0,3})([+-])/gm,"$1\\$2"),E=E.replace(/]([\s]*)\(/g,"\\]$1\\("),E=E.replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:"),E});var K=this;t.exports?t.exports=r:K.showdown=r}).call(AB)}(Wh)),Wh.exports}var RB=CB();const kB=Rv(RB),IB=new kB.Converter({tables:!0,strikethrough:!0,emoji:!0,underline:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,openLinksInNewWindow:!0,backslashEscapesHTMLTags:!0,ghCodeBlocks:!0,tasklists:!0});function pa(t){return t?IB.makeHtml(t):""}const NB=async(t,e,n)=>{let r="";try{switch(t){case 1:r=await Vx(e,n);break;case 2:r=await DB(e,n);break;case 3:r=await MB(e,n);break;case 4:r=await PB(e,n);break;case 5:r=await OB(e,n);break;case 6:r=await VB(e,n);break;case 7:r=await LB(e,n);break;case 8:r=await zB(e,n);break;case 9:r=await jB(e,n);break;case 12:r=await UB(e,n);break;case 13:r=await BB(e,n);break;case 14:r=await HB(e,n);break;case 15:r=await FB(e,n);break;case 16:r=await $B(e,n);break;case 17:r=await qB(e,n);break;case 18:r=await GB(e,n);break;default:r=await Vx(e,n)}}catch(s){console.error("Error parsing layout content:",s),r='<div class="error-content">Error loading content</div>'}return{html:r}};async function Vx(t,e){const[n,r,s]=t;let o=`
        <div class="layout-1">
            <h2 class="layout-title">${n||"Title"}</h2>
            <div class="layout-textbar">${pa(r||"Content")}</div>
            <div class="layout-images">
    `;return Array.isArray(s)&&(await Promise.all(s.map(c=>ri(c).catch(()=>null)))).forEach((c,f)=>{c?o+=`<img class="layout-small-image" src="${c}" alt="Image ${f+1}" />`:o+=`<div class="image-error">Error loading image ${f+1}</div>`}),o+=`
            </div>
        </div>
    `,o}async function DB(t,e){let n='<div class="layout-2">',r=[];if(t.length>0&&Array.isArray(t[0]))r=t.filter(u=>Array.isArray(u)&&u.length>=2);else for(let u=0;u<t.length;u+=2)u+1<t.length&&r.push([t[u],t[u+1]]);const s=r.map(async([u,c])=>{try{return{url:await ri(u),caption:c}}catch{return{url:null,caption:c}}});return(await Promise.all(s)).forEach(({url:u,caption:c},f)=>{u?n+=`
                <div class="layout-image-caption">
                    <img class="layout-image" src="${u}" alt="Image ${f+1}" />
                    <p class="layout-caption">${c}</p>
                </div>
            `:n+=`
                <div class="layout-image-caption">
                    <div class="image-error">Error loading image ${f+1}</div>
                    <p class="layout-caption">${c}</p>
                </div>
            `}),n+="</div>",n}async function MB(t,e){const[n,r]=t;let o=`
        <div class="layout-3">
            <div id="${`mermaid-${e}`}" class="layout-mermaid">Loading diagram...</div>
            <div class="layout-description">${pa(r||"")}</div>
        </div>
    `;try{const u=await yp(n);o=o.replace("Loading diagram...",u.outerHTML)}catch{o=o.replace("Loading diagram...",'<div class="mermaid-error">Error loading diagram</div>')}return o}async function PB(t,e){const[n,r]=t;let o=`
        <div class="layout-4">
            <div id="${`mermaid-${e}`}" class="layout-mermaid">Loading mindmap...</div>
            <p class="layout-description">${r||""}</p>
        </div>
    `;try{const u=await yp(n);o=o.replace("Loading mindmap...",u.outerHTML)}catch{o=o.replace("Loading mindmap...",'<div class="mermaid-error">Error loading mindmap</div>')}return o}async function OB(t,e){const[n,r]=t;let o=`
        <div class="layout-5">
            <div id="${`mermaid-${e}`}" class="layout-mermaid">Loading piechart...</div>
            <p class="layout-description">${r||""}</p>
        </div>
    `;try{const u=await yp(n);o=o.replace("Loading piechart...",u.outerHTML)}catch{o=o.replace("Loading piechart...",'<div class="mermaid-error">Error loading piechart</div>')}return o}async function VB(t,e){const[n,r]=t;let o=`
        <div class="layout-6">
            <div id="${`mermaid-${e}`}" class="layout-mermaid">Loading quadrant chart...</div>
            <p class="layout-description">${r||""}</p>
        </div>
    `;try{const u=await yp(n);o=o.replace("Loading quadrant chart...",u.outerHTML)}catch{o=o.replace("Loading quadrant chart...",'<div class="mermaid-error">Error loading quadrant chart</div>')}return o}async function LB(t,e){const[n,r,s,o,u]=t,c=`img-${e}`;try{const f=await ri(n);return`
            <div class="layout-7">
                <div class="layout-visual-section">
                    <img id="${c}" class="layout-featured-image" src="${f}" alt="Featured Visual" />
                </div>
                <div class="layout-content-section">
                    <h2 class="layout-title">${r||"Educational Topic"}</h2>
                    <div class="layout-educational-content">
                        ${s?`<p class="layout-paragraph">${s}</p>`:""}
                        ${o?`<p class="layout-paragraph">${o}</p>`:""}
                        ${u?`<p class="layout-paragraph">${u}</p>`:""}
                    </div>
                </div>
            </div>
        `}catch{return`
            <div class="layout-7">
                <div class="layout-visual-section">
                    <div class="image-error">Error loading featured image</div>
                </div>
                <div class="layout-content-section">
                    <h2 class="layout-title">${r||"Educational Topic"}</h2>
                    <div class="layout-educational-content">
                        ${s?`<p class="layout-paragraph">${s}</p>`:""}
                        ${o?`<p class="layout-paragraph">${o}</p>`:""}
                        ${u?`<p class="layout-paragraph">${u}</p>`:""}
                    </div>
                </div>
            </div>
        `}}async function zB(t,e){const[n,r,s]=t,o=`img-main-${e}`;try{const u=await ri(n);let c=`
            <div class="layout-8">
                <div class="layout-left">
                    <h2 class="layout-title">${r||"Title"}</h2>
                    <div class="layout-small-images">
        `;return Array.isArray(s)&&(await Promise.all(s.map(h=>ri(h).catch(()=>null)))).forEach((h,p)=>{h?c+=`<img class="layout-small-image" src="${h}" alt="Small Image ${p+1}" />`:c+=`<div class="image-error">Error loading image ${p+1}</div>`}),c+=`
                    </div>
                </div>
                <div class="layout-right">
                    <img id="${o}" class="layout-large-image" src="${u}" alt="Main Image" />
                </div>
            </div>
        `,c}catch{return`
            <div class="layout-8">
                <div class="layout-left">
                    <h2 class="layout-title">${r||"Title"}</h2>
                    <div class="layout-small-images">
                        <div class="image-error">Error loading images</div>
                    </div>
                </div>
                <div class="layout-right">
                    <div class="image-error">Error loading main image</div>
                </div>
            </div>
        `}}async function jB(t,e){const[n,r]=t,s=`video-${e}`;try{const o=await wk(n),u=Ek(o);return`
            <div class="layout-9">
                <div id="${s}" class="layout-video">
                    <iframe src="${u}" frameborder="0" allowfullscreen></iframe>
                </div>
                <p class="layout-caption">${r||""}</p>
            </div>
        `}catch{return`
            <div class="layout-9">
                <div id="${s}" class="layout-video">
                    <div class="video-error">Error loading video</div>
                </div>
                <p class="layout-caption">${r||""}</p>
            </div>
        `}}async function UB(t,e){const[n,r]=t,s=`illustration-${e}`;try{const o=await ri(n);let u=`
            <div class="layout-12">
                <div class="layout-visual-section">
                    <div class="layout-central-visual">
                        <img id="${s}" class="layout-central-image" src="${o}" alt="Educational Illustration" />
                    </div>
                </div>
                <div class="layout-content-section">
                    <div class="layout-educational-content">
        `;return typeof r=="string"?u+=`<p class="layout-text">${r}</p>`:Array.isArray(r)&&r.forEach(c=>{const f=c.match(new RegExp("^(\\p{Emoji}|\\p{Symbol})\\s+(.+)$","u")),h=f?f[1]:"",p=f?f[2]:c;u+=`
                    <div class="layout-educational-point">
                        <span class="layout-point-icon">${h}</span>
                        <span class="layout-point-text">${p}</span>
                    </div>
                `}),u+=`
                    </div>
                </div>
            </div>
        `,u}catch{let u=`
            <div class="layout-12">
                <div class="layout-visual-section">
                    <div class="layout-central-visual">
                        <div class="image-error">Error loading illustration</div>
                    </div>
                </div>
                <div class="layout-content-section">
                    <div class="layout-educational-content">
        `;return typeof r=="string"?u+=`<p class="layout-text">${r}</p>`:Array.isArray(r)&&r.forEach(c=>{const f=c.match(new RegExp("^(\\p{Emoji}|\\p{Symbol})\\s+(.+)$","u")),h=f?f[1]:"",p=f?f[2]:c;u+=`
                    <div class="layout-educational-point">
                        <span class="layout-point-icon">${h}</span>
                        <span class="layout-point-text">${p}</span>
                    </div>
                `}),u+=`
                    </div>
                </div>
            </div>
        `,u}}async function BB(t,e){const[n,r,s]=t,o=`video-${e}`;try{const u=await wk(s),c=Ek(u);return`
            <div class="layout-13">
                <div class="layout-left">
                    <h2 class="layout-title">${n||"Title"}</h2>
                    <p class="layout-text">${r||""}</p>
                </div>
                <div class="layout-right">
                    <div id="${o}" class="layout-video">
                        <iframe src="${c}" frameborder="0" allowfullscreen></iframe>
                    </div>
                </div>
            </div>
        `}catch{return`
            <div class="layout-13">
                <div class="layout-left">
                    <h2 class="layout-title">${n||"Title"}</h2>
                    <p class="layout-text">${r||""}</p>
                </div>
                <div class="layout-right">
                    <div id="${o}" class="layout-video">
                        <div class="video-error">Error loading video</div>
                    </div>
                </div>
            </div>
        `}}async function HB(t,e){let n='<div class="layout-14">';for(let r=0;r<t.length;r+=2){const s=t[r],o=t[r+1];if(s&&o){const u=r/2,c=u%2===0;try{const f=await ri(s);n+=`
                    <div class="layout-section ${c?"layout-section-normal":"layout-section-reverse"}">
                        <div class="layout-section-image">
                            <img class="layout-large-image" src="${f}" alt="Section ${u+1}" />
                        </div>
                        <div class="layout-section-content">
                            <p class="layout-text">${o}</p>
                        </div>
                    </div>
                `}catch{n+=`
                    <div class="layout-section ${c?"layout-section-normal":"layout-section-reverse"}">
                        <div class="layout-section-image">
                            <div class="image-error">Error loading image</div>
                        </div>
                        <div class="layout-section-content">
                            <p class="layout-text">${o}</p>
                        </div>
                    </div>
                `}}}return n+="</div>",n}async function FB(t,e){let n='<div class="layout-15">';for(let r=0;r<t.length;r+=3){const s=t[r],o=t[r+1],u=t[r+2];if(s&&o&&u)try{const c=await ri(o);n+=`
                    <div class="layout-timeline-item">
                        <div class="layout-timeline-date">${s}</div>
                        <img class="layout-timeline-image" src="${c}" alt="Timeline event" />
                        <div class="layout-timeline-content">
                            <p class="layout-timeline-text">${u}</p>
                        </div>
                    </div>
                `}catch{n+=`
                    <div class="layout-timeline-item">
                        <div class="layout-timeline-date">${s}</div>
                        <div class="image-error">Error loading image</div>
                        <div class="layout-timeline-content">
                            <p class="layout-timeline-text">${u}</p>
                        </div>
                    </div>
                `}}return n+="</div>",n}async function $B(t,e){let n='<div class="layout-16">';for(let r=0;r<t.length;r+=3){const s=t[r],o=t[r+1],u=t[r+2];if(s&&o&&u)try{const c=await ri(o);n+=`
                    <div class="layout-card">
                        <h3 class="layout-card-title">${s}</h3>
                        <img class="layout-card-image" src="${c}" alt="${s}" />
                        <p class="layout-card-description">${u}</p>
                    </div>
                `}catch{n+=`
                    <div class="layout-card">
                        <h3 class="layout-card-title">${s}</h3>
                        <div class="image-error">Error loading image</div>
                        <p class="layout-card-description">${u}</p>
                    </div>
                `}}return n+="</div>",n}async function qB(t,e){const[n,r,s,o,u,c,f]=t;try{const h=await ri(o),p=z=>{let j="javascript",F=(z||"").toString();if(F.startsWith("```")){const K=F.match(/```(\w+)?\n?([\s\S]*?)\n?```$/);K?(K[1]&&(j=K[1]),F=K[2]||""):F=F.replace(/^```\w*\n?/,"").replace(/\n?```$/,"")}else F.includes("def ")||F.includes("import ")||F.includes("print(")?j="python":F.includes("function ")||F.includes("const ")||F.includes("let ")?j="javascript":F.includes("public class ")||F.includes("System.out.println")?j="java":F.includes("#include")||F.includes("int main")?j="cpp":(F.includes("SELECT ")||F.includes("FROM "))&&(j="sql");return(!F||F.trim()==="")&&(F="// No code provided"),{lang:j,cleanCode:F}},{lang:_,cleanCode:b}=p(r),{lang:A,cleanCode:O}=p(c);return`
            <div class="layout-17">
                <h2 class="layout-title">${n||"Code Tutorial"}</h2>
                <div class="layout-code-section">
                    <pre class="layout-code-block language-${_}"><code class="language-${_}">${b}</code></pre>
                    <div class="layout-code-explanation">${pa(s||"")}</div>
                </div>
                <div class="layout-diagram-section">
                    <img class="layout-diagram-image" src="${h}" alt="Architecture Diagram" />
                    <div class="layout-implementation-explanation">${pa(u||"")}</div>
                </div>
                <div class="layout-code-section">
                    <pre class="layout-code-block language-${A}"><code class="language-${A}">${O}</code></pre>
                    <div class="layout-code-explanation">${pa(f||"")}</div>
                </div>
            </div>
        `}catch{return'<div class="layout-17"><div class="error-content">Error loading tutorial content</div></div>'}}async function GB(t,e){const[n,r,s,o,u,c]=t;try{const f=await ri(u),h=A=>{let O="javascript",V=(A||"").toString();if(V.startsWith("```")){const z=V.match(/```(\w+)?\n?([\s\S]*?)\n?```$/);z?(z[1]&&(O=z[1]),V=z[2]||""):V=V.replace(/^```\w*\n?/,"").replace(/\n?```$/,"")}else V.includes("def ")||V.includes("import ")||V.includes("print(")?O="python":V.includes("function ")||V.includes("const ")||V.includes("let ")?O="javascript":V.includes("public class ")||V.includes("System.out.println")?O="java":V.includes("#include")||V.includes("int main")?O="cpp":V.includes("SELECT ")||V.includes("FROM ")?O="sql":(V.includes("curl ")||V.includes("GET ")||V.includes("POST "))&&(O="bash");return(!V||V.trim()==="")&&(V="// No code provided"),{lang:O,cleanCode:V}},{lang:p,cleanCode:_}=h(r);return`
            <div class="layout-18">
                <h2 class="layout-title">${n||"API Documentation"}</h2>
                <div class="layout-api-section">
                    <div class="layout-code-container">
                        <pre class="layout-code-block language-${p}"><code class="language-${p}">${_}</code></pre>
                    </div>
                    <div class="layout-documentation">${pa(s||"")}</div>
                </div>
                <div class="layout-usage-section">
                    <h3 class="layout-subtitle">Usage Examples</h3>
                    <div class="layout-usage-examples">${pa(o||"")}</div>
                </div>
                <div class="layout-diagram-section">
                    <img class="layout-api-diagram" src="${f}" alt="API Flow Diagram" />
                    <div class="layout-best-practices">
                        <h3 class="layout-subtitle">Best Practices</h3>
                        ${pa(c||"")}
                    </div>
                </div>
            </div>
        `}catch{return'<div class="layout-18"><div class="error-content">Error loading documentation content</div></div>'}}const Tk=$.createContext(null),Sk=(t,e,n,r,s,o,u,c,f,h,p,_,b,A)=>{console.log(1);const O=s.find(F=>F.id===e);if(!O)return null;console.log(2);const V=O.data.tokenColors||{};if(console.log(3),!_){const F=t.myConcept||t.word;if(V[F])return console.log(`Token "${F}" is already colored, ignoring click`),null}console.log(4);let z;r==="staticEditable"?z=JT():z=f?mO(f):JT();let j=null;if(_)j=b;else{const F={...V};t.myConcept?F[t.myConcept]=z:F[t.word]=z,o(E=>E.map(w=>w.id===e?{...w,data:{...w.data,tokenColors:F}}:w));const K=pO(n);j=vO(K,t.myConcept||t.word,"Loading...","",z,r,e);const y=_O(e,j.id,z,p);u([{type:"add",item:j}]),c([{type:"add",item:y}])}return j&&(j.data.isLoading=!0,j.data.previousNode=e),_&&o(F=>F.map(K=>K.id===j?.id?{...K,data:{...j.data}}:K)),bB(t.myConcept||t.word,h||"",A||"default").then(async F=>{console.log("AI Response received:",F),console.log("Selected layout:",F.layout),console.log("Content array:",F.content);const{html:K}=await NB(F.layout,F.content,j?.id||"");console.log("Layout HTML generated (first 500 chars):",K.substring(0,500)),console.log("Layout HTML full length:",K.length),o(y=>y.map(E=>{if(E.id===j?.id){const w={...E,data:{...E.data,title:F.title,full_text:F.fullText,suggestions:F.suggestions,layout:F.layout,contents:[K],isLoading:!1,icon:F.icon}};return console.log("Updated node data:",w.data),w}return E}))}).catch(F=>{console.error("Error generating node content:",F),o(K=>K.map(y=>y.id===j?.id?{...y,data:{...y.data,title:t.word,full_text:t.word,suggestions:[],layout:1,contents:[`<div class="error-content">Failed to load content for "${t.word}"</div>`],isLoading:!1,icon:""}}:y))}),z},YB=({children:t,nodes:e,onNodesChange:n,onEdgesChange:r,setNodes:s})=>{const o=(u,c,f,h,p,_,b,A,O,V)=>Sk(u,c,f,h,e,s,n,r,p,_,b,A,O,V);return L.jsx(Tk.Provider,{value:{handleTokenClick:o,setNodes:s},children:t})},xk=()=>{const t=$.useContext(Tk);if(!t)throw new Error("useTokenInteraction must be used within a TokenInteractionProvider");return t};function KB({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const XB=$.forwardRef(KB);function WB({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const QB=$.forwardRef(WB);function ZB({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const JB=$.forwardRef(ZB);function eH({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const tH=$.forwardRef(eH);function nH({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const rH=$.forwardRef(nH);function iH({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const sH=$.forwardRef(iH);function aH({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const oH=$.forwardRef(aH),Z_=$.createContext({});function J_(t){const e=$.useRef(null);return e.current===null&&(e.current=t()),e.current}const eb=typeof window<"u",Ak=eb?$.useLayoutEffect:$.useEffect,vp=$.createContext(null);function tb(t,e){t.indexOf(e)===-1&&t.push(e)}function nb(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ws=(t,e,n)=>n>e?e:n<t?t:n;let rb=()=>{};const Es={},Ck=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Rk(t){return typeof t=="object"&&t!==null}const kk=t=>/^0[^.\s]+$/u.test(t);function ib(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ur=t=>t,lH=(t,e)=>n=>e(t(n)),Kd=(...t)=>t.reduce(lH),Sd=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class sb{constructor(){this.subscriptions=[]}add(e){return tb(this.subscriptions,e),()=>nb(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let o=0;o<s;o++){const u=this.subscriptions[o];u&&u(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Mi=t=>t*1e3,Pi=t=>t/1e3;function Ik(t,e){return e?t*(1e3/e):0}const Nk=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,uH=1e-7,cH=12;function dH(t,e,n,r,s){let o,u,c=0;do u=e+(n-e)/2,o=Nk(u,r,s)-t,o>0?n=u:e=u;while(Math.abs(o)>uH&&++c<cH);return u}function Xd(t,e,n,r){if(t===e&&n===r)return Ur;const s=o=>dH(o,0,1,t,n);return o=>o===0||o===1?o:Nk(s(o),e,r)}const Dk=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Mk=t=>e=>1-t(1-e),Pk=Xd(.33,1.53,.69,.99),ab=Mk(Pk),Ok=Dk(ab),Vk=t=>(t*=2)<1?.5*ab(t):.5*(2-Math.pow(2,-10*(t-1))),ob=t=>1-Math.sin(Math.acos(t)),Lk=Mk(ob),zk=Dk(ob),fH=Xd(.42,0,1,1),hH=Xd(0,0,.58,1),jk=Xd(.42,0,.58,1),mH=t=>Array.isArray(t)&&typeof t[0]!="number",Uk=t=>Array.isArray(t)&&typeof t[0]=="number",pH={linear:Ur,easeIn:fH,easeInOut:jk,easeOut:hH,circIn:ob,circInOut:zk,circOut:Lk,backIn:ab,backInOut:Ok,backOut:Pk,anticipate:Vk},gH=t=>typeof t=="string",Lx=t=>{if(Uk(t)){rb(t.length===4);const[e,n,r,s]=t;return Xd(e,n,r,s)}else if(gH(t))return pH[t];return t},Nh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function yH(t,e){let n=new Set,r=new Set,s=!1,o=!1;const u=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function f(p){u.has(p)&&(h.schedule(p),t()),p(c)}const h={schedule:(p,_=!1,b=!1)=>{const O=b&&s?n:r;return _&&u.add(p),O.has(p)||O.add(p),p},cancel:p=>{r.delete(p),u.delete(p)},process:p=>{if(c=p,s){o=!0;return}s=!0,[n,r]=[r,n],n.forEach(f),n.clear(),s=!1,o&&(o=!1,h.process(p))}};return h}const vH=40;function Bk(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,u=Nh.reduce((K,y)=>(K[y]=yH(o),K),{}),{setup:c,read:f,resolveKeyframes:h,preUpdate:p,update:_,preRender:b,render:A,postRender:O}=u,V=()=>{const K=Es.useManualTiming?s.timestamp:performance.now();n=!1,Es.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(K-s.timestamp,vH),1)),s.timestamp=K,s.isProcessing=!0,c.process(s),f.process(s),h.process(s),p.process(s),_.process(s),b.process(s),A.process(s),O.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(V))},z=()=>{n=!0,r=!0,s.isProcessing||t(V)};return{schedule:Nh.reduce((K,y)=>{const E=u[y];return K[y]=(w,T=!1,x=!1)=>(n||z(),E.schedule(w,T,x)),K},{}),cancel:K=>{for(let y=0;y<Nh.length;y++)u[Nh[y]].cancel(K)},state:s,steps:u}}const{schedule:Et,cancel:Sa,state:bn,steps:e0}=Bk(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ur,!0);let Qh;function _H(){Qh=void 0}const Zn={now:()=>(Qh===void 0&&Zn.set(bn.isProcessing||Es.useManualTiming?bn.timestamp:performance.now()),Qh),set:t=>{Qh=t,queueMicrotask(_H)}},Hk=t=>e=>typeof e=="string"&&e.startsWith(t),lb=Hk("--"),bH=Hk("var(--"),ub=t=>bH(t)?wH.test(t.split("/*")[0].trim()):!1,wH=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Su={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},xd={...Su,transform:t=>ws(0,1,t)},Dh={...Su,default:1},Jc=t=>Math.round(t*1e5)/1e5,cb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function EH(t){return t==null}const TH=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,db=(t,e)=>n=>!!(typeof n=="string"&&TH.test(n)&&n.startsWith(t)||e&&!EH(n)&&Object.prototype.hasOwnProperty.call(n,e)),Fk=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,o,u,c]=r.match(cb);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(u),alpha:c!==void 0?parseFloat(c):1}},SH=t=>ws(0,255,t),t0={...Su,transform:t=>Math.round(SH(t))},go={test:db("rgb","red"),parse:Fk("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+t0.transform(t)+", "+t0.transform(e)+", "+t0.transform(n)+", "+Jc(xd.transform(r))+")"};function xH(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const lv={test:db("#"),parse:xH,transform:go.transform},Wd=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Qs=Wd("deg"),Oi=Wd("%"),Oe=Wd("px"),AH=Wd("vh"),CH=Wd("vw"),zx={...Oi,parse:t=>Oi.parse(t)/100,transform:t=>Oi.transform(t*100)},Hl={test:db("hsl","hue"),parse:Fk("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Oi.transform(Jc(e))+", "+Oi.transform(Jc(n))+", "+Jc(xd.transform(r))+")"},Xt={test:t=>go.test(t)||lv.test(t)||Hl.test(t),parse:t=>go.test(t)?go.parse(t):Hl.test(t)?Hl.parse(t):lv.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?go.transform(t):Hl.transform(t),getAnimatableNone:t=>{const e=Xt.parse(t);return e.alpha=0,Xt.transform(e)}},RH=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function kH(t){return isNaN(t)&&typeof t=="string"&&(t.match(cb)?.length||0)+(t.match(RH)?.length||0)>0}const $k="number",qk="color",IH="var",NH="var(",jx="${}",DH=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ad(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let o=0;const c=e.replace(DH,f=>(Xt.test(f)?(r.color.push(o),s.push(qk),n.push(Xt.parse(f))):f.startsWith(NH)?(r.var.push(o),s.push(IH),n.push(f)):(r.number.push(o),s.push($k),n.push(parseFloat(f))),++o,jx)).split(jx);return{values:n,split:c,indexes:r,types:s}}function Gk(t){return Ad(t).values}function Yk(t){const{split:e,types:n}=Ad(t),r=e.length;return s=>{let o="";for(let u=0;u<r;u++)if(o+=e[u],s[u]!==void 0){const c=n[u];c===$k?o+=Jc(s[u]):c===qk?o+=Xt.transform(s[u]):o+=s[u]}return o}}const MH=t=>typeof t=="number"?0:Xt.test(t)?Xt.getAnimatableNone(t):t;function PH(t){const e=Gk(t);return Yk(t)(e.map(MH))}const xa={test:kH,parse:Gk,createTransformer:Yk,getAnimatableNone:PH};function n0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function OH({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,o=0,u=0;if(!e)s=o=u=n;else{const c=n<.5?n*(1+e):n+e-n*e,f=2*n-c;s=n0(f,c,t+1/3),o=n0(f,c,t),u=n0(f,c,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(u*255),alpha:r}}function Dm(t,e){return n=>n>0?e:t}const At=(t,e,n)=>t+(e-t)*n,r0=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},VH=[lv,go,Hl],LH=t=>VH.find(e=>e.test(t));function Ux(t){const e=LH(t);if(!e)return!1;let n=e.parse(t);return e===Hl&&(n=OH(n)),n}const Bx=(t,e)=>{const n=Ux(t),r=Ux(e);if(!n||!r)return Dm(t,e);const s={...n};return o=>(s.red=r0(n.red,r.red,o),s.green=r0(n.green,r.green,o),s.blue=r0(n.blue,r.blue,o),s.alpha=At(n.alpha,r.alpha,o),go.transform(s))},uv=new Set(["none","hidden"]);function zH(t,e){return uv.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function jH(t,e){return n=>At(t,e,n)}function fb(t){return typeof t=="number"?jH:typeof t=="string"?ub(t)?Dm:Xt.test(t)?Bx:HH:Array.isArray(t)?Kk:typeof t=="object"?Xt.test(t)?Bx:UH:Dm}function Kk(t,e){const n=[...t],r=n.length,s=t.map((o,u)=>fb(o)(o,e[u]));return o=>{for(let u=0;u<r;u++)n[u]=s[u](o);return n}}function UH(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=fb(t[s])(t[s],e[s]));return s=>{for(const o in r)n[o]=r[o](s);return n}}function BH(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],u=t.indexes[o][r[o]],c=t.values[u]??0;n[s]=c,r[o]++}return n}const HH=(t,e)=>{const n=xa.createTransformer(e),r=Ad(t),s=Ad(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?uv.has(t)&&!s.values.length||uv.has(e)&&!r.values.length?zH(t,e):Kd(Kk(BH(r,s),s.values),n):Dm(t,e)};function Xk(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?At(t,e,n):fb(t)(t,e)}const FH=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Et.update(e,n),stop:()=>Sa(e),now:()=>bn.isProcessing?bn.timestamp:Zn.now()}},Wk=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)r+=Math.round(t(o/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Mm=2e4;function hb(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Mm;)e+=n,r=t.next(e);return e>=Mm?1/0:e}function $H(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(hb(r),Mm);return{type:"keyframes",ease:o=>r.next(s*o).value/e,duration:Pi(s)}}const qH=5;function Qk(t,e,n){const r=Math.max(e-qH,0);return Ik(n-t(r),e-r)}const Mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},i0=.001;function GH({duration:t=Mt.duration,bounce:e=Mt.bounce,velocity:n=Mt.velocity,mass:r=Mt.mass}){let s,o,u=1-e;u=ws(Mt.minDamping,Mt.maxDamping,u),t=ws(Mt.minDuration,Mt.maxDuration,Pi(t)),u<1?(s=h=>{const p=h*u,_=p*t,b=p-n,A=cv(h,u),O=Math.exp(-_);return i0-b/A*O},o=h=>{const _=h*u*t,b=_*n+n,A=Math.pow(u,2)*Math.pow(h,2)*t,O=Math.exp(-_),V=cv(Math.pow(h,2),u);return(-s(h)+i0>0?-1:1)*((b-A)*O)/V}):(s=h=>{const p=Math.exp(-h*t),_=(h-n)*t+1;return-i0+p*_},o=h=>{const p=Math.exp(-h*t),_=(n-h)*(t*t);return p*_});const c=5/t,f=KH(s,o,c);if(t=Mi(t),isNaN(f))return{stiffness:Mt.stiffness,damping:Mt.damping,duration:t};{const h=Math.pow(f,2)*r;return{stiffness:h,damping:u*2*Math.sqrt(r*h),duration:t}}}const YH=12;function KH(t,e,n){let r=n;for(let s=1;s<YH;s++)r=r-t(r)/e(r);return r}function cv(t,e){return t*Math.sqrt(1-e*e)}const XH=["duration","bounce"],WH=["stiffness","damping","mass"];function Hx(t,e){return e.some(n=>t[n]!==void 0)}function QH(t){let e={velocity:Mt.velocity,stiffness:Mt.stiffness,damping:Mt.damping,mass:Mt.mass,isResolvedFromDuration:!1,...t};if(!Hx(t,WH)&&Hx(t,XH))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,o=2*ws(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Mt.mass,stiffness:s,damping:o}}else{const n=GH(t);e={...e,...n,mass:Mt.mass},e.isResolvedFromDuration=!0}return e}function Pm(t=Mt.visualDuration,e=Mt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const o=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],c={done:!1,value:o},{stiffness:f,damping:h,mass:p,duration:_,velocity:b,isResolvedFromDuration:A}=QH({...n,velocity:-Pi(n.velocity||0)}),O=b||0,V=h/(2*Math.sqrt(f*p)),z=u-o,j=Pi(Math.sqrt(f/p)),F=Math.abs(z)<5;r||(r=F?Mt.restSpeed.granular:Mt.restSpeed.default),s||(s=F?Mt.restDelta.granular:Mt.restDelta.default);let K;if(V<1){const E=cv(j,V);K=w=>{const T=Math.exp(-V*j*w);return u-T*((O+V*j*z)/E*Math.sin(E*w)+z*Math.cos(E*w))}}else if(V===1)K=E=>u-Math.exp(-j*E)*(z+(O+j*z)*E);else{const E=j*Math.sqrt(V*V-1);K=w=>{const T=Math.exp(-V*j*w),x=Math.min(E*w,300);return u-T*((O+V*j*z)*Math.sinh(x)+E*z*Math.cosh(x))/E}}const y={calculatedDuration:A&&_||null,next:E=>{const w=K(E);if(A)c.done=E>=_;else{let T=E===0?O:0;V<1&&(T=E===0?Mi(O):Qk(K,E,w));const x=Math.abs(T)<=r,C=Math.abs(u-w)<=s;c.done=x&&C}return c.value=c.done?u:w,c},toString:()=>{const E=Math.min(hb(y),Mm),w=Wk(T=>y.next(E*T).value,E,30);return E+"ms "+w},toTransition:()=>{}};return y}Pm.applyToOptions=t=>{const e=$H(t,100,Pm);return t.ease=e.ease,t.duration=Mi(e.duration),t.type="keyframes",t};function dv({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:u,min:c,max:f,restDelta:h=.5,restSpeed:p}){const _=t[0],b={done:!1,value:_},A=x=>c!==void 0&&x<c||f!==void 0&&x>f,O=x=>c===void 0?f:f===void 0||Math.abs(c-x)<Math.abs(f-x)?c:f;let V=n*e;const z=_+V,j=u===void 0?z:u(z);j!==z&&(V=j-_);const F=x=>-V*Math.exp(-x/r),K=x=>j+F(x),y=x=>{const C=F(x),k=K(x);b.done=Math.abs(C)<=h,b.value=b.done?j:k};let E,w;const T=x=>{A(b.value)&&(E=x,w=Pm({keyframes:[b.value,O(b.value)],velocity:Qk(K,x,b.value),damping:s,stiffness:o,restDelta:h,restSpeed:p}))};return T(0),{calculatedDuration:null,next:x=>{let C=!1;return!w&&E===void 0&&(C=!0,y(x),T(x)),E!==void 0&&x>=E?w.next(x-E):(!C&&y(x),b)}}}function ZH(t,e,n){const r=[],s=n||Es.mix||Xk,o=t.length-1;for(let u=0;u<o;u++){let c=s(t[u],t[u+1]);if(e){const f=Array.isArray(e)?e[u]||Ur:e;c=Kd(f,c)}r.push(c)}return r}function JH(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const o=t.length;if(rb(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const u=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=ZH(e,r,s),f=c.length,h=p=>{if(u&&p<t[0])return e[0];let _=0;if(f>1)for(;_<t.length-2&&!(p<t[_+1]);_++);const b=Sd(t[_],t[_+1],p);return c[_](b)};return n?p=>h(ws(t[0],t[o-1],p)):h}function eF(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Sd(0,e,r);t.push(At(n,1,s))}}function tF(t){const e=[0];return eF(e,t.length-1),e}function nF(t,e){return t.map(n=>n*e)}function rF(t,e){return t.map(()=>e||jk).splice(0,t.length-1)}function ed({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=mH(r)?r.map(Lx):Lx(r),o={done:!1,value:e[0]},u=nF(n&&n.length===e.length?n:tF(e),t),c=JH(u,e,{ease:Array.isArray(s)?s:rF(e,s)});return{calculatedDuration:t,next:f=>(o.value=c(f),o.done=f>=t,o)}}const iF=t=>t!==null;function mb(t,{repeat:e,repeatType:n="loop"},r,s=1){const o=t.filter(iF),c=s<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!c||r===void 0?o[c]:r}const sF={decay:dv,inertia:dv,tween:ed,keyframes:ed,spring:Pm};function Zk(t){typeof t.type=="string"&&(t.type=sF[t.type])}class pb{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const aF=t=>t/100;class gb extends pb{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Zn.now()&&this.tick(Zn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Zk(e);const{type:n=ed,repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:u=0}=e;let{keyframes:c}=e;const f=n||ed;f!==ed&&typeof c[0]!="number"&&(this.mixKeyframes=Kd(aF,Xk(c[0],c[1])),c=[0,100]);const h=f({...e,keyframes:c});o==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...c].reverse(),velocity:-u})),h.calculatedDuration===null&&(h.calculatedDuration=hb(h));const{calculatedDuration:p}=h;this.calculatedDuration=p,this.resolvedDuration=p+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=h}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:o,mirroredGenerator:u,resolvedDuration:c,calculatedDuration:f}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:p,repeat:_,repeatType:b,repeatDelay:A,type:O,onUpdate:V,finalKeyframe:z}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const j=this.currentTime-h*(this.playbackSpeed>=0?1:-1),F=this.playbackSpeed>=0?j<0:j>s;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let K=this.currentTime,y=r;if(_){const x=Math.min(this.currentTime,s)/c;let C=Math.floor(x),k=x%1;!k&&x>=1&&(k=1),k===1&&C--,C=Math.min(C,_+1),!!(C%2)&&(b==="reverse"?(k=1-k,A&&(k-=A/c)):b==="mirror"&&(y=u)),K=ws(0,1,k)*c}const E=F?{done:!1,value:p[0]}:y.next(K);o&&(E.value=o(E.value));let{done:w}=E;!F&&f!==null&&(w=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&w);return T&&O!==dv&&(E.value=mb(p,this.options,z,this.speed)),V&&V(E.value),T&&this.finish(),E}then(e,n){return this.finished.then(e,n)}get duration(){return Pi(this.calculatedDuration)}get time(){return Pi(this.currentTime)}set time(e){e=Mi(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Zn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Pi(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=FH,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Zn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function oF(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const yo=t=>t*180/Math.PI,fv=t=>{const e=yo(Math.atan2(t[1],t[0]));return hv(e)},lF={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:fv,rotateZ:fv,skewX:t=>yo(Math.atan(t[1])),skewY:t=>yo(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},hv=t=>(t=t%360,t<0&&(t+=360),t),Fx=fv,$x=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),qx=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),uF={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:$x,scaleY:qx,scale:t=>($x(t)+qx(t))/2,rotateX:t=>hv(yo(Math.atan2(t[6],t[5]))),rotateY:t=>hv(yo(Math.atan2(-t[2],t[0]))),rotateZ:Fx,rotate:Fx,skewX:t=>yo(Math.atan(t[4])),skewY:t=>yo(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function mv(t){return t.includes("scale")?1:0}function pv(t,e){if(!t||t==="none")return mv(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=uF,s=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=lF,s=c}if(!s)return mv(e);const o=r[e],u=s[1].split(",").map(dF);return typeof o=="function"?o(u):u[o]}const cF=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return pv(n,e)};function dF(t){return parseFloat(t.trim())}const xu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Au=new Set(xu),Gx=t=>t===Su||t===Oe,fF=new Set(["x","y","z"]),hF=xu.filter(t=>!fF.has(t));function mF(t){const e=[];return hF.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const bo={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>pv(e,"x"),y:(t,{transform:e})=>pv(e,"y")};bo.translateX=bo.x;bo.translateY=bo.y;const wo=new Set;let gv=!1,yv=!1,vv=!1;function Jk(){if(yv){const t=Array.from(wo).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=mF(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([o,u])=>{r.getValue(o)?.set(u)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}yv=!1,gv=!1,wo.forEach(t=>t.complete(vv)),wo.clear()}function e8(){wo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(yv=!0)})}function pF(){vv=!0,e8(),Jk(),vv=!1}class yb{constructor(e,n,r,s,o,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=o,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(wo.add(this),gv||(gv=!0,Et.read(e8),Et.resolveKeyframes(Jk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const o=s?.get(),u=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const c=r.readValue(n,u);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=u),s&&o===void 0&&s.set(e[0])}oF(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),wo.delete(this)}cancel(){this.state==="scheduled"&&(wo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const gF=t=>t.startsWith("--");function yF(t,e,n){gF(e)?t.style.setProperty(e,n):t.style[e]=n}const vF=ib(()=>window.ScrollTimeline!==void 0),_F={};function bF(t,e){const n=ib(t);return()=>_F[e]??n()}const t8=bF(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Gc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Yx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Gc([0,.65,.55,1]),circOut:Gc([.55,0,1,.45]),backIn:Gc([.31,.01,.66,-.59]),backOut:Gc([.33,1.53,.69,.99])};function n8(t,e){if(t)return typeof t=="function"?t8()?Wk(t,e):"ease-out":Uk(t)?Gc(t):Array.isArray(t)?t.map(n=>n8(n,e)||Yx.easeOut):Yx[t]}function wF(t,e,n,{delay:r=0,duration:s=300,repeat:o=0,repeatType:u="loop",ease:c="easeOut",times:f}={},h=void 0){const p={[e]:n};f&&(p.offset=f);const _=n8(c,s);Array.isArray(_)&&(p.easing=_);const b={delay:r,duration:s,easing:Array.isArray(_)?"linear":_,fill:"both",iterations:o+1,direction:u==="reverse"?"alternate":"normal"};return h&&(b.pseudoElement=h),t.animate(p,b)}function r8(t){return typeof t=="function"&&"applyToOptions"in t}function EF({type:t,...e}){return r8(t)&&t8()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class TF extends pb{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:o,allowFlatten:u=!1,finalKeyframe:c,onComplete:f}=e;this.isPseudoElement=!!o,this.allowFlatten=u,this.options=e,rb(typeof e.type!="string");const h=EF(e);this.animation=wF(n,r,s,h,o),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const p=mb(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(p):yF(n,r,p),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Pi(Number(e))}get time(){return Pi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Mi(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&vF()?(this.animation.timeline=e,Ur):n(this)}}const i8={anticipate:Vk,backInOut:Ok,circInOut:zk};function SF(t){return t in i8}function xF(t){typeof t.ease=="string"&&SF(t.ease)&&(t.ease=i8[t.ease])}const Kx=10;class AF extends TF{constructor(e){xF(e),Zk(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:o,...u}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const c=new gb({...u,autoplay:!1}),f=Mi(this.finishedTime??this.time);n.setWithVelocity(c.sample(f-Kx).value,c.sample(f).value,Kx),c.stop()}}const Xx=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(xa.test(t)||t==="0")&&!t.startsWith("url("));function CF(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function RF(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],u=Xx(s,e),c=Xx(o,e);return!u||!c?!1:CF(t)||(n==="spring"||r8(n))&&r}const kF=new Set(["opacity","clipPath","filter","transform"]),IF=ib(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function NF(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:o,type:u}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:h}=e.owner.getProps();return IF()&&n&&kF.has(n)&&(n!=="transform"||!h)&&!f&&!r&&s!=="mirror"&&o!==0&&u!=="inertia"}const DF=40;class MF extends pb{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:u="loop",keyframes:c,name:f,motionValue:h,element:p,..._}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Zn.now();const b={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:o,repeatType:u,name:f,motionValue:h,element:p,..._},A=p?.KeyframeResolver||yb;this.keyframeResolver=new A(c,(O,V,z)=>this.onKeyframesResolved(O,V,b,!z),f,h,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:o,type:u,velocity:c,delay:f,isHandoff:h,onUpdate:p}=r;this.resolvedAt=Zn.now(),RF(e,o,u,c)||((Es.instantAnimations||!f)&&p?.(mb(e,r,n)),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const b={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>DF?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},A=!h&&NF(b)?new AF({...b,element:b.motionValue.owner.current}):new gb(b);A.finished.then(()=>this.notifyFinished()).catch(Ur),this.pendingTimeline&&(this.stopTimeline=A.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=A}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),pF()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const PF=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function OF(t){const e=PF.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function s8(t,e,n=1){const[r,s]=OF(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const u=o.trim();return Ck(u)?parseFloat(u):u}return ub(s)?s8(s,e,n+1):s}function vb(t,e){return t?.[e]??t?.default??t}const a8=new Set(["width","height","top","left","right","bottom",...xu]),VF={test:t=>t==="auto",parse:t=>t},o8=t=>e=>e.test(t),l8=[Su,Oe,Oi,Qs,CH,AH,VF],Wx=t=>l8.find(o8(t));function LF(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||kk(t):!0}const zF=new Set(["brightness","contrast","saturate","opacity"]);function jF(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(cb)||[];if(!r)return t;const s=n.replace(r,"");let o=zF.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+s+")"}const UF=/\b([a-z-]*)\(.*?\)/gu,_v={...xa,getAnimatableNone:t=>{const e=t.match(UF);return e?e.map(jF).join(" "):t}},Qx={...Su,transform:Math.round},BF={rotate:Qs,rotateX:Qs,rotateY:Qs,rotateZ:Qs,scale:Dh,scaleX:Dh,scaleY:Dh,scaleZ:Dh,skew:Qs,skewX:Qs,skewY:Qs,distance:Oe,translateX:Oe,translateY:Oe,translateZ:Oe,x:Oe,y:Oe,z:Oe,perspective:Oe,transformPerspective:Oe,opacity:xd,originX:zx,originY:zx,originZ:Oe},_b={borderWidth:Oe,borderTopWidth:Oe,borderRightWidth:Oe,borderBottomWidth:Oe,borderLeftWidth:Oe,borderRadius:Oe,radius:Oe,borderTopLeftRadius:Oe,borderTopRightRadius:Oe,borderBottomRightRadius:Oe,borderBottomLeftRadius:Oe,width:Oe,maxWidth:Oe,height:Oe,maxHeight:Oe,top:Oe,right:Oe,bottom:Oe,left:Oe,padding:Oe,paddingTop:Oe,paddingRight:Oe,paddingBottom:Oe,paddingLeft:Oe,margin:Oe,marginTop:Oe,marginRight:Oe,marginBottom:Oe,marginLeft:Oe,backgroundPositionX:Oe,backgroundPositionY:Oe,...BF,zIndex:Qx,fillOpacity:xd,strokeOpacity:xd,numOctaves:Qx},HF={..._b,color:Xt,backgroundColor:Xt,outlineColor:Xt,fill:Xt,stroke:Xt,borderColor:Xt,borderTopColor:Xt,borderRightColor:Xt,borderBottomColor:Xt,borderLeftColor:Xt,filter:_v,WebkitFilter:_v},u8=t=>HF[t];function c8(t,e){let n=u8(t);return n!==_v&&(n=xa),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const FF=new Set(["auto","none","0"]);function $F(t,e,n){let r=0,s;for(;r<t.length&&!s;){const o=t[r];typeof o=="string"&&!FF.has(o)&&Ad(o).values.length&&(s=t[r]),r++}if(s&&n)for(const o of e)t[o]=c8(n,s)}class qF extends yb{constructor(e,n,r,s,o){super(e,n,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let h=e[f];if(typeof h=="string"&&(h=h.trim(),ub(h))){const p=s8(h,n.current);p!==void 0&&(e[f]=p),f===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!a8.has(r)||e.length!==2)return;const[s,o]=e,u=Wx(s),c=Wx(o);if(u!==c)if(Gx(u)&&Gx(c))for(let f=0;f<e.length;f++){const h=e[f];typeof h=="string"&&(e[f]=parseFloat(h))}else bo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||LF(e[s]))&&r.push(s);r.length&&$F(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=bo[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,u=r[o];r[o]=bo[n](e.measureViewportBox(),window.getComputedStyle(e.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,f])=>{e.getValue(c).set(f)}),this.resolveNoneKeyframes()}}function GF(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=n?.[t]??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const d8=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function f8(t){return Rk(t)&&"offsetHeight"in t}const Zx=30,YF=t=>!isNaN(parseFloat(t));class KF{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const o=Zn.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty();s&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Zn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=YF(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new sb);const r=this.events[e].add(n);return e==="change"?()=>{r(),Et.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Zn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Zx)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Zx);return Ik(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function mu(t,e){return new KF(t,e)}const{schedule:bb}=Bk(queueMicrotask,!1),Xr={x:!1,y:!1};function h8(){return Xr.x||Xr.y}function XF(t){return t==="x"||t==="y"?Xr[t]?null:(Xr[t]=!0,()=>{Xr[t]=!1}):Xr.x||Xr.y?null:(Xr.x=Xr.y=!0,()=>{Xr.x=Xr.y=!1})}function m8(t,e){const n=GF(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function Jx(t){return!(t.pointerType==="touch"||h8())}function WF(t,e,n={}){const[r,s,o]=m8(t,n),u=c=>{if(!Jx(c))return;const{target:f}=c,h=e(f,c);if(typeof h!="function"||!f)return;const p=_=>{Jx(_)&&(h(_),f.removeEventListener("pointerleave",p))};f.addEventListener("pointerleave",p,s)};return r.forEach(c=>{c.addEventListener("pointerenter",u,s)}),o}const p8=(t,e)=>e?t===e?!0:p8(t,e.parentElement):!1,wb=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,QF=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function ZF(t){return QF.has(t.tagName)||t.tabIndex!==-1}const Zh=new WeakSet;function eA(t){return e=>{e.key==="Enter"&&t(e)}}function s0(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const JF=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=eA(()=>{if(Zh.has(n))return;s0(n,"down");const s=eA(()=>{s0(n,"up")}),o=()=>s0(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function tA(t){return wb(t)&&!h8()}function e$(t,e,n={}){const[r,s,o]=m8(t,n),u=c=>{const f=c.currentTarget;if(!tA(c))return;Zh.add(f);const h=e(f,c),p=(A,O)=>{window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",b),Zh.has(f)&&Zh.delete(f),tA(A)&&typeof h=="function"&&h(A,{success:O})},_=A=>{p(A,f===window||f===document||n.useGlobalTarget||p8(f,A.target))},b=A=>{p(A,!1)};window.addEventListener("pointerup",_,s),window.addEventListener("pointercancel",b,s)};return r.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",u,s),f8(c)&&(c.addEventListener("focus",h=>JF(h,s)),!ZF(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),o}function g8(t){return Rk(t)&&"ownerSVGElement"in t}function t$(t){return g8(t)&&t.tagName==="svg"}const Nn=t=>!!(t&&t.getVelocity),n$=[...l8,Xt,xa],r$=t=>n$.find(o8(t)),Eb=$.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class i$ extends $.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=f8(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function s$({children:t,isPresent:e,anchorX:n,root:r}){const s=$.useId(),o=$.useRef(null),u=$.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=$.useContext(Eb);return $.useInsertionEffect(()=>{const{width:f,height:h,top:p,left:_,right:b}=u.current;if(e||!o.current||!f||!h)return;const A=n==="left"?`left: ${_}`:`right: ${b}`;o.current.dataset.motionPopId=s;const O=document.createElement("style");c&&(O.nonce=c);const V=r??document.head;return V.appendChild(O),O.sheet&&O.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${h}px !important;
            ${A}px !important;
            top: ${p}px !important;
          }
        `),()=>{V.removeChild(O),V.contains(O)&&V.removeChild(O)}},[e]),L.jsx(i$,{isPresent:e,childRef:o,sizeRef:u,children:$.cloneElement(t,{ref:o})})}const a$=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:u,anchorX:c,root:f})=>{const h=J_(o$),p=$.useId();let _=!0,b=$.useMemo(()=>(_=!1,{id:p,initial:e,isPresent:n,custom:s,onExitComplete:A=>{h.set(A,!0);for(const O of h.values())if(!O)return;r&&r()},register:A=>(h.set(A,!1),()=>h.delete(A))}),[n,h,r]);return o&&_&&(b={...b}),$.useMemo(()=>{h.forEach((A,O)=>h.set(O,!1))},[n]),$.useEffect(()=>{!n&&!h.size&&r&&r()},[n]),u==="popLayout"&&(t=L.jsx(s$,{isPresent:n,anchorX:c,root:f,children:t})),L.jsx(vp.Provider,{value:b,children:t})};function o$(){return new Map}function y8(t=!0){const e=$.useContext(vp);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,o=$.useId();$.useEffect(()=>{if(t)return s(o)},[t]);const u=$.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,u]:[!0]}const Mh=t=>t.key||"";function nA(t){const e=[];return $.Children.forEach(t,n=>{$.isValidElement(n)&&e.push(n)}),e}const rA=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync",propagate:u=!1,anchorX:c="left",root:f})=>{const[h,p]=y8(u),_=$.useMemo(()=>nA(t),[t]),b=u&&!h?[]:_.map(Mh),A=$.useRef(!0),O=$.useRef(_),V=J_(()=>new Map),[z,j]=$.useState(_),[F,K]=$.useState(_);Ak(()=>{A.current=!1,O.current=_;for(let w=0;w<F.length;w++){const T=Mh(F[w]);b.includes(T)?V.delete(T):V.get(T)!==!0&&V.set(T,!1)}},[F,b.length,b.join("-")]);const y=[];if(_!==z){let w=[..._];for(let T=0;T<F.length;T++){const x=F[T],C=Mh(x);b.includes(C)||(w.splice(T,0,x),y.push(x))}return o==="wait"&&y.length&&(w=y),K(nA(w)),j(_),null}const{forceRender:E}=$.useContext(Z_);return L.jsx(L.Fragment,{children:F.map(w=>{const T=Mh(w),x=u&&!h?!1:_===F||b.includes(T),C=()=>{if(V.has(T))V.set(T,!0);else return;let k=!0;V.forEach(N=>{N||(k=!1)}),k&&(E?.(),K(O.current),u&&p?.(),r&&r())};return L.jsx(a$,{isPresent:x,initial:!A.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,root:f,onExitComplete:x?void 0:C,anchorX:c,children:w},T)})})},v8=$.createContext({strict:!1}),iA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},pu={};for(const t in iA)pu[t]={isEnabled:e=>iA[t].some(n=>!!e[n])};function l$(t){for(const e in t)pu[e]={...pu[e],...t[e]}}const u$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Om(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||u$.has(t)}let _8=t=>!Om(t);function c$(t){typeof t=="function"&&(_8=e=>e.startsWith("on")?!Om(e):t(e))}try{c$(require("@emotion/is-prop-valid").default)}catch{}function d$(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(_8(s)||n===!0&&Om(s)||!e&&!Om(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const _p=$.createContext({});function bp(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Cd(t){return typeof t=="string"||Array.isArray(t)}const Tb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Sb=["initial",...Tb];function wp(t){return bp(t.animate)||Sb.some(e=>Cd(t[e]))}function b8(t){return!!(wp(t)||t.variants)}function f$(t,e){if(wp(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Cd(n)?n:void 0,animate:Cd(r)?r:void 0}}return t.inherit!==!1?e:{}}function h$(t){const{initial:e,animate:n}=f$(t,$.useContext(_p));return $.useMemo(()=>({initial:e,animate:n}),[sA(e),sA(n)])}function sA(t){return Array.isArray(t)?t.join(" "):t}const Rd={};function m$(t){for(const e in t)Rd[e]=t[e],lb(e)&&(Rd[e].isCSSVariable=!0)}function w8(t,{layout:e,layoutId:n}){return Au.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Rd[t]||t==="opacity")}const p$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},g$=xu.length;function y$(t,e,n){let r="",s=!0;for(let o=0;o<g$;o++){const u=xu[o],c=t[u];if(c===void 0)continue;let f=!0;if(typeof c=="number"?f=c===(u.startsWith("scale")?1:0):f=parseFloat(c)===0,!f||n){const h=d8(c,_b[u]);if(!f){s=!1;const p=p$[u]||u;r+=`${p}(${h}) `}n&&(e[u]=h)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function xb(t,e,n){const{style:r,vars:s,transformOrigin:o}=t;let u=!1,c=!1;for(const f in e){const h=e[f];if(Au.has(f)){u=!0;continue}else if(lb(f)){s[f]=h;continue}else{const p=d8(h,_b[f]);f.startsWith("origin")?(c=!0,o[f]=p):r[f]=p}}if(e.transform||(u||n?r.transform=y$(e,t.transform,n):r.transform&&(r.transform="none")),c){const{originX:f="50%",originY:h="50%",originZ:p=0}=o;r.transformOrigin=`${f} ${h} ${p}`}}const Ab=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function E8(t,e,n){for(const r in e)!Nn(e[r])&&!w8(r,n)&&(t[r]=e[r])}function v$({transformTemplate:t},e){return $.useMemo(()=>{const n=Ab();return xb(n,e,t),Object.assign({},n.vars,n.style)},[e])}function _$(t,e){const n=t.style||{},r={};return E8(r,n,t),Object.assign(r,v$(t,e)),r}function b$(t,e){const n={},r=_$(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const w$={offset:"stroke-dashoffset",array:"stroke-dasharray"},E$={offset:"strokeDashoffset",array:"strokeDasharray"};function T$(t,e,n=1,r=0,s=!0){t.pathLength=1;const o=s?w$:E$;t[o.offset]=Oe.transform(-r);const u=Oe.transform(e),c=Oe.transform(n);t[o.array]=`${u} ${c}`}function T8(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:o=1,pathOffset:u=0,...c},f,h,p){if(xb(t,c,h),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:_,style:b}=t;_.transform&&(b.transform=_.transform,delete _.transform),(b.transform||_.transformOrigin)&&(b.transformOrigin=_.transformOrigin??"50% 50%",delete _.transformOrigin),b.transform&&(b.transformBox=p?.transformBox??"fill-box",delete _.transformBox),e!==void 0&&(_.x=e),n!==void 0&&(_.y=n),r!==void 0&&(_.scale=r),s!==void 0&&T$(_,s,o,u,!1)}const S8=()=>({...Ab(),attrs:{}}),x8=t=>typeof t=="string"&&t.toLowerCase()==="svg";function S$(t,e,n,r){const s=$.useMemo(()=>{const o=S8();return T8(o,e,x8(r),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};E8(o,t.style,t),s.style={...o,...s.style}}return s}const x$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Cb(t){return typeof t!="string"||t.includes("-")?!1:!!(x$.indexOf(t)>-1||/[A-Z]/u.test(t))}function A$(t,e,n,{latestValues:r},s,o=!1){const c=(Cb(t)?S$:b$)(e,r,s,t),f=d$(e,typeof t=="string",o),h=t!==$.Fragment?{...f,...c,ref:n}:{},{children:p}=e,_=$.useMemo(()=>Nn(p)?p.get():p,[p]);return $.createElement(t,{...h,children:_})}function aA(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Rb(t,e,n,r){if(typeof e=="function"){const[s,o]=aA(r);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=aA(r);e=e(n!==void 0?n:t.custom,s,o)}return e}function Jh(t){return Nn(t)?t.get():t}function C$({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:R$(n,r,s,t),renderState:e()}}function R$(t,e,n,r){const s={},o=r(t,{});for(const b in o)s[b]=Jh(o[b]);let{initial:u,animate:c}=t;const f=wp(t),h=b8(t);e&&h&&!f&&t.inherit!==!1&&(u===void 0&&(u=e.initial),c===void 0&&(c=e.animate));let p=n?n.initial===!1:!1;p=p||u===!1;const _=p?c:u;if(_&&typeof _!="boolean"&&!bp(_)){const b=Array.isArray(_)?_:[_];for(let A=0;A<b.length;A++){const O=Rb(t,b[A]);if(O){const{transitionEnd:V,transition:z,...j}=O;for(const F in j){let K=j[F];if(Array.isArray(K)){const y=p?K.length-1:0;K=K[y]}K!==null&&(s[F]=K)}for(const F in V)s[F]=V[F]}}}return s}const A8=t=>(e,n)=>{const r=$.useContext(_p),s=$.useContext(vp),o=()=>C$(t,e,r,s);return n?o():J_(o)};function kb(t,e,n){const{style:r}=t,s={};for(const o in r)(Nn(r[o])||e.style&&Nn(e.style[o])||w8(o,t)||n?.getValue(o)?.liveStyle!==void 0)&&(s[o]=r[o]);return s}const k$=A8({scrapeMotionValuesFromProps:kb,createRenderState:Ab});function C8(t,e,n){const r=kb(t,e,n);for(const s in t)if(Nn(t[s])||Nn(e[s])){const o=xu.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=t[s]}return r}const I$=A8({scrapeMotionValuesFromProps:C8,createRenderState:S8}),N$=Symbol.for("motionComponentSymbol");function Fl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function D$(t,e,n){return $.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Fl(n)&&(n.current=r))},[e])}const Ib=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),M$="framerAppearId",R8="data-"+Ib(M$),k8=$.createContext({});function P$(t,e,n,r,s){const{visualElement:o}=$.useContext(_p),u=$.useContext(v8),c=$.useContext(vp),f=$.useContext(Eb).reducedMotion,h=$.useRef(null);r=r||u.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:f}));const p=h.current,_=$.useContext(k8);p&&!p.projection&&s&&(p.type==="html"||p.type==="svg")&&O$(h.current,n,s,_);const b=$.useRef(!1);$.useInsertionEffect(()=>{p&&b.current&&p.update(n,c)});const A=n[R8],O=$.useRef(!!A&&!window.MotionHandoffIsComplete?.(A)&&window.MotionHasOptimisedAnimation?.(A));return Ak(()=>{p&&(b.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),O.current&&p.animationState&&p.animationState.animateChanges())}),$.useEffect(()=>{p&&(!O.current&&p.animationState&&p.animationState.animateChanges(),O.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(A)}),O.current=!1))}),p}function O$(t,e,n,r){const{layoutId:s,layout:o,drag:u,dragConstraints:c,layoutScroll:f,layoutRoot:h,layoutCrossfade:p}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:I8(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!u||c&&Fl(c),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:p,layoutScroll:f,layoutRoot:h})}function I8(t){if(t)return t.options.allowProjection!==!1?t.projection:I8(t.parent)}function a0(t,{forwardMotionProps:e=!1}={},n,r){n&&l$(n);const s=Cb(t)?I$:k$;function o(c,f){let h;const p={...$.useContext(Eb),...c,layoutId:V$(c)},{isStatic:_}=p,b=h$(c),A=s(c,_);if(!_&&eb){L$();const O=z$(p);h=O.MeasureLayout,b.visualElement=P$(t,A,p,r,O.ProjectionNode)}return L.jsxs(_p.Provider,{value:b,children:[h&&b.visualElement?L.jsx(h,{visualElement:b.visualElement,...p}):null,A$(t,c,D$(A,b.visualElement,f),A,_,e)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const u=$.forwardRef(o);return u[N$]=t,u}function V$({layoutId:t}){const e=$.useContext(Z_).id;return e&&t!==void 0?e+"-"+t:t}function L$(t,e){$.useContext(v8).strict}function z$(t){const{drag:e,layout:n}=pu;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function j$(t,e){if(typeof Proxy>"u")return a0;const n=new Map,r=(o,u)=>a0(o,u,t,e),s=(o,u)=>r(o,u);return new Proxy(s,{get:(o,u)=>u==="create"?r:(n.has(u)||n.set(u,a0(u,void 0,t,e)),n.get(u))})}function N8({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function U$({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function B$(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function o0(t){return t===void 0||t===1}function bv({scale:t,scaleX:e,scaleY:n}){return!o0(t)||!o0(e)||!o0(n)}function fo(t){return bv(t)||D8(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function D8(t){return oA(t.x)||oA(t.y)}function oA(t){return t&&t!=="0%"}function Vm(t,e,n){const r=t-n,s=e*r;return n+s}function lA(t,e,n,r,s){return s!==void 0&&(t=Vm(t,s,r)),Vm(t,n,r)+e}function wv(t,e=0,n=1,r,s){t.min=lA(t.min,e,n,r,s),t.max=lA(t.max,e,n,r,s)}function M8(t,{x:e,y:n}){wv(t.x,e.translate,e.scale,e.originPoint),wv(t.y,n.translate,n.scale,n.originPoint)}const uA=.999999999999,cA=1.0000000000001;function H$(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,u;for(let c=0;c<s;c++){o=n[c],u=o.projectionDelta;const{visualElement:f}=o.options;f&&f.props.style&&f.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&ql(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,M8(t,u)),r&&fo(o.latestValues)&&ql(t,o.latestValues))}e.x<cA&&e.x>uA&&(e.x=1),e.y<cA&&e.y>uA&&(e.y=1)}function $l(t,e){t.min=t.min+e,t.max=t.max+e}function dA(t,e,n,r,s=.5){const o=At(t.min,t.max,s);wv(t,e,n,o,r)}function ql(t,e){dA(t.x,e.x,e.scaleX,e.scale,e.originX),dA(t.y,e.y,e.scaleY,e.scale,e.originY)}function P8(t,e){return N8(B$(t.getBoundingClientRect(),e))}function F$(t,e,n){const r=P8(t,n),{scroll:s}=e;return s&&($l(r.x,s.offset.x),$l(r.y,s.offset.y)),r}const fA=()=>({translate:0,scale:1,origin:0,originPoint:0}),Gl=()=>({x:fA(),y:fA()}),hA=()=>({min:0,max:0}),Ut=()=>({x:hA(),y:hA()}),Ev={current:null},O8={current:!1};function $$(){if(O8.current=!0,!!eb)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Ev.current=t.matches;t.addEventListener("change",e),e()}else Ev.current=!1}const q$=new WeakMap;function G$(t,e,n){for(const r in e){const s=e[r],o=n[r];if(Nn(s))t.addValue(r,s);else if(Nn(o))t.addValue(r,mu(s,{owner:t}));else if(o!==s)if(t.hasValue(r)){const u=t.getValue(r);u.liveStyle===!0?u.jump(s):u.hasAnimated||u.set(s)}else{const u=t.getStaticValue(r);t.addValue(r,mu(u!==void 0?u:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const mA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Y${scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:u},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=yb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=Zn.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,Et.render(this.render,!1,!0))};const{latestValues:f,renderState:h}=u;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=wp(n),this.isVariantNode=b8(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,..._}=this.scrapeMotionValuesFromProps(n,{},this);for(const b in _){const A=_[b];f[b]!==void 0&&Nn(A)&&A.set(f[b],!1)}}mount(e){this.current=e,q$.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),O8.current||$$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ev.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Sa(this.notifyUpdate),Sa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Au.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Et.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o(),u&&u(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in pu){const n=pu[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ut()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<mA.length;r++){const s=mA[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,u=e[o];u&&(this.propEventSubscriptions[s]=this.on(s,u))}this.prevMotionValues=G$(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=mu(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Ck(r)||kk(r))?r=parseFloat(r):!r$(r)&&xa.test(n)&&(r=c8(e,n)),this.setBaseTarget(e,Nn(r)?r.get():r)),Nn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Rb(this.props,n,this.presenceContext?.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Nn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new sb),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){bb.render(this.render)}}class V8 extends Y${constructor(){super(...arguments),this.KeyframeResolver=qF}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Nn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function L8(t,{style:e,vars:n},r,s){const o=t.style;let u;for(u in e)o[u]=e[u];s?.applyProjectionStyles(o,r);for(u in n)o.setProperty(u,n[u])}function K$(t){return window.getComputedStyle(t)}class X$ extends V8{constructor(){super(...arguments),this.type="html",this.renderInstance=L8}readValueFromInstance(e,n){if(Au.has(n))return this.projection?.isProjecting?mv(n):cF(e,n);{const r=K$(e),s=(lb(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return P8(e,n)}build(e,n,r){xb(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return kb(e,n,r)}}const z8=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function W$(t,e,n,r){L8(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(z8.has(s)?s:Ib(s),e.attrs[s])}class Q$ extends V8{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ut}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Au.has(n)){const r=u8(n);return r&&r.default||0}return n=z8.has(n)?n:Ib(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return C8(e,n,r)}build(e,n,r){T8(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){W$(e,n,r,s)}mount(e){this.isSVGTag=x8(e.tagName),super.mount(e)}}const Z$=(t,e)=>Cb(t)?new Q$(e):new X$(e,{allowProjection:t!==$.Fragment});function kd(t,e,n){const r=t.getProps();return Rb(r,e,n!==void 0?n:r.custom,t)}const Tv=t=>Array.isArray(t);function J$(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,mu(n))}function eq(t){return Tv(t)?t[t.length-1]||0:t}function tq(t,e){const n=kd(t,e);let{transitionEnd:r={},transition:s={},...o}=n||{};o={...o,...r};for(const u in o){const c=eq(o[u]);J$(t,u,c)}}function nq(t){return!!(Nn(t)&&t.add)}function Sv(t,e){const n=t.getValue("willChange");if(nq(n))return n.add(e);if(!n&&Es.WillChange){const r=new Es.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function j8(t){return t.props[R8]}const rq=t=>t!==null;function iq(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(rq),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[o]}const sq={type:"spring",stiffness:500,damping:25,restSpeed:10},aq=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),oq={type:"keyframes",duration:.8},lq={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},uq=(t,{keyframes:e})=>e.length>2?oq:Au.has(t)?t.startsWith("scale")?aq(e[1]):sq:lq;function cq({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:u,repeatDelay:c,from:f,elapsed:h,...p}){return!!Object.keys(p).length}const Nb=(t,e,n,r={},s,o)=>u=>{const c=vb(r,t)||{},f=c.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Mi(f);const p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:b=>{e.set(b),c.onUpdate&&c.onUpdate(b)},onComplete:()=>{u(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:o?void 0:s};cq(c)||Object.assign(p,uq(t,p)),p.duration&&(p.duration=Mi(p.duration)),p.repeatDelay&&(p.repeatDelay=Mi(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let _=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(_=!0)),(Es.instantAnimations||Es.skipAnimations)&&(_=!0,p.duration=0,p.delay=0),p.allowFlatten=!c.type&&!c.ease,_&&!o&&e.get()!==void 0){const b=iq(p.keyframes,c);if(b!==void 0){Et.update(()=>{p.onUpdate(b),p.onComplete()});return}}return c.isSync?new gb(p):new MF(p)};function dq({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function U8(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:u,...c}=e;r&&(o=r);const f=[],h=s&&t.animationState&&t.animationState.getState()[s];for(const p in c){const _=t.getValue(p,t.latestValues[p]??null),b=c[p];if(b===void 0||h&&dq(h,p))continue;const A={delay:n,...vb(o||{},p)},O=_.get();if(O!==void 0&&!_.isAnimating&&!Array.isArray(b)&&b===O&&!A.velocity)continue;let V=!1;if(window.MotionHandoffAnimation){const j=j8(t);if(j){const F=window.MotionHandoffAnimation(j,p,Et);F!==null&&(A.startTime=F,V=!0)}}Sv(t,p),_.start(Nb(p,_,b,t.shouldReduceMotion&&a8.has(p)?{type:!1}:A,t,V));const z=_.animation;z&&f.push(z)}return u&&Promise.all(f).then(()=>{Et.update(()=>{u&&tq(t,u)})}),f}function xv(t,e,n={}){const r=kd(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const o=r?()=>Promise.all(U8(t,r,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:h=0,staggerChildren:p,staggerDirection:_}=s;return fq(t,e,f,h,p,_,n)}:()=>Promise.resolve(),{when:c}=s;if(c){const[f,h]=c==="beforeChildren"?[o,u]:[u,o];return f().then(()=>h())}else return Promise.all([o(),u(n.delay)])}function fq(t,e,n=0,r=0,s=0,o=1,u){const c=[],f=t.variantChildren.size,h=(f-1)*s,p=typeof r=="function",_=p?b=>r(b,f):o===1?(b=0)=>b*s:(b=0)=>h-b*s;return Array.from(t.variantChildren).sort(hq).forEach((b,A)=>{b.notify("AnimationStart",e),c.push(xv(b,e,{...u,delay:n+(p?0:r)+_(A)}).then(()=>b.notify("AnimationComplete",e)))}),Promise.all(c)}function hq(t,e){return t.sortNodePosition(e)}function mq(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>xv(t,o,n));r=Promise.all(s)}else if(typeof e=="string")r=xv(t,e,n);else{const s=typeof e=="function"?kd(t,e,n.custom):e;r=Promise.all(U8(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function B8(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const pq=Sb.length;function H8(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?H8(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<pq;n++){const r=Sb[n],s=t.props[r];(Cd(s)||s===!1)&&(e[r]=s)}return e}const gq=[...Tb].reverse(),yq=Tb.length;function vq(t){return e=>Promise.all(e.map(({animation:n,options:r})=>mq(t,n,r)))}function _q(t){let e=vq(t),n=pA(),r=!0;const s=f=>(h,p)=>{const _=kd(t,p,f==="exit"?t.presenceContext?.custom:void 0);if(_){const{transition:b,transitionEnd:A,...O}=_;h={...h,...O,...A}}return h};function o(f){e=f(t)}function u(f){const{props:h}=t,p=H8(t.parent)||{},_=[],b=new Set;let A={},O=1/0;for(let z=0;z<yq;z++){const j=gq[z],F=n[j],K=h[j]!==void 0?h[j]:p[j],y=Cd(K),E=j===f?F.isActive:null;E===!1&&(O=z);let w=K===p[j]&&K!==h[j]&&y;if(w&&r&&t.manuallyAnimateOnMount&&(w=!1),F.protectedKeys={...A},!F.isActive&&E===null||!K&&!F.prevProp||bp(K)||typeof K=="boolean")continue;const T=bq(F.prevProp,K);let x=T||j===f&&F.isActive&&!w&&y||z>O&&y,C=!1;const k=Array.isArray(K)?K:[K];let N=k.reduce(s(j),{});E===!1&&(N={});const{prevResolvedValues:U={}}=F,M={...U,...N},P=q=>{x=!0,b.has(q)&&(C=!0,b.delete(q)),F.needsAnimating[q]=!0;const Q=t.getValue(q);Q&&(Q.liveStyle=!1)};for(const q in M){const Q=N[q],W=U[q];if(A.hasOwnProperty(q))continue;let B=!1;Tv(Q)&&Tv(W)?B=!B8(Q,W):B=Q!==W,B?Q!=null?P(q):b.add(q):Q!==void 0&&b.has(q)?P(q):F.protectedKeys[q]=!0}F.prevProp=K,F.prevResolvedValues=N,F.isActive&&(A={...A,...N}),r&&t.blockInitialAnimation&&(x=!1),x&&(!(w&&T)||C)&&_.push(...k.map(q=>({animation:q,options:{type:j}})))}if(b.size){const z={};if(typeof h.initial!="boolean"){const j=kd(t,Array.isArray(h.initial)?h.initial[0]:h.initial);j&&j.transition&&(z.transition=j.transition)}b.forEach(j=>{const F=t.getBaseTarget(j),K=t.getValue(j);K&&(K.liveStyle=!0),z[j]=F??null}),_.push({animation:z})}let V=!!_.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(V=!1),r=!1,V?e(_):Promise.resolve()}function c(f,h){if(n[f].isActive===h)return Promise.resolve();t.variantChildren?.forEach(_=>_.animationState?.setActive(f,h)),n[f].isActive=h;const p=u(f);for(const _ in n)n[_].protectedKeys={};return p}return{animateChanges:u,setActive:c,setAnimateFunction:o,getState:()=>n,reset:()=>{n=pA(),r=!0}}}function bq(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!B8(e,t):!1}function lo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function pA(){return{animate:lo(!0),whileInView:lo(),whileHover:lo(),whileTap:lo(),whileDrag:lo(),whileFocus:lo(),exit:lo()}}class Ia{constructor(e){this.isMounted=!1,this.node=e}update(){}}class wq extends Ia{constructor(e){super(e),e.animationState||(e.animationState=_q(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();bp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Eq=0;class Tq extends Ia{constructor(){super(...arguments),this.id=Eq++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Sq={animation:{Feature:wq},exit:{Feature:Tq}};function Id(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Qd(t){return{point:{x:t.pageX,y:t.pageY}}}const xq=t=>e=>wb(e)&&t(e,Qd(e));function td(t,e,n,r){return Id(t,e,xq(n),r)}const F8=1e-4,Aq=1-F8,Cq=1+F8,$8=.01,Rq=0-$8,kq=0+$8;function Hn(t){return t.max-t.min}function Iq(t,e,n){return Math.abs(t-e)<=n}function gA(t,e,n,r=.5){t.origin=r,t.originPoint=At(e.min,e.max,t.origin),t.scale=Hn(n)/Hn(e),t.translate=At(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Aq&&t.scale<=Cq||isNaN(t.scale))&&(t.scale=1),(t.translate>=Rq&&t.translate<=kq||isNaN(t.translate))&&(t.translate=0)}function nd(t,e,n,r){gA(t.x,e.x,n.x,r?r.originX:void 0),gA(t.y,e.y,n.y,r?r.originY:void 0)}function yA(t,e,n){t.min=n.min+e.min,t.max=t.min+Hn(e)}function Nq(t,e,n){yA(t.x,e.x,n.x),yA(t.y,e.y,n.y)}function vA(t,e,n){t.min=e.min-n.min,t.max=t.min+Hn(e)}function rd(t,e,n){vA(t.x,e.x,n.x),vA(t.y,e.y,n.y)}function Lr(t){return[t("x"),t("y")]}const q8=({current:t})=>t?t.ownerDocument.defaultView:null,_A=(t,e)=>Math.abs(t-e);function Dq(t,e){const n=_A(t.x,e.x),r=_A(t.y,e.y);return Math.sqrt(n**2+r**2)}class G8{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=u0(this.lastMoveEventInfo,this.history),A=this.startEvent!==null,O=Dq(b.offset,{x:0,y:0})>=this.distanceThreshold;if(!A&&!O)return;const{point:V}=b,{timestamp:z}=bn;this.history.push({...V,timestamp:z});const{onStart:j,onMove:F}=this.handlers;A||(j&&j(this.lastMoveEvent,b),this.startEvent=this.lastMoveEvent),F&&F(this.lastMoveEvent,b)},this.handlePointerMove=(b,A)=>{this.lastMoveEvent=b,this.lastMoveEventInfo=l0(A,this.transformPagePoint),Et.update(this.updatePoint,!0)},this.handlePointerUp=(b,A)=>{this.end();const{onEnd:O,onSessionEnd:V,resumeAnimation:z}=this.handlers;if(this.dragSnapToOrigin&&z&&z(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=u0(b.type==="pointercancel"?this.lastMoveEventInfo:l0(A,this.transformPagePoint),this.history);this.startEvent&&O&&O(b,j),V&&V(b,j)},!wb(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=u,this.contextWindow=s||window;const c=Qd(e),f=l0(c,this.transformPagePoint),{point:h}=f,{timestamp:p}=bn;this.history=[{...h,timestamp:p}];const{onSessionStart:_}=n;_&&_(e,u0(f,this.history)),this.removeListeners=Kd(td(this.contextWindow,"pointermove",this.handlePointerMove),td(this.contextWindow,"pointerup",this.handlePointerUp),td(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Sa(this.updatePoint)}}function l0(t,e){return e?{point:e(t.point)}:t}function bA(t,e){return{x:t.x-e.x,y:t.y-e.y}}function u0({point:t},e){return{point:t,delta:bA(t,Y8(e)),offset:bA(t,Mq(e)),velocity:Pq(e,.1)}}function Mq(t){return t[0]}function Y8(t){return t[t.length-1]}function Pq(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=Y8(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Mi(e)));)n--;if(!r)return{x:0,y:0};const o=Pi(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const u={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function Oq(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?At(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?At(n,t,r.max):Math.min(t,n)),t}function wA(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Vq(t,{top:e,left:n,bottom:r,right:s}){return{x:wA(t.x,n,s),y:wA(t.y,e,r)}}function EA(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Lq(t,e){return{x:EA(t.x,e.x),y:EA(t.y,e.y)}}function zq(t,e){let n=.5;const r=Hn(t),s=Hn(e);return s>r?n=Sd(e.min,e.max-r,t.min):r>s&&(n=Sd(t.min,t.max-s,e.min)),ws(0,1,n)}function jq(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Av=.35;function Uq(t=Av){return t===!1?t=0:t===!0&&(t=Av),{x:TA(t,"left","right"),y:TA(t,"top","bottom")}}function TA(t,e,n){return{min:SA(t,e),max:SA(t,n)}}function SA(t,e){return typeof t=="number"?t:t[e]||0}const Bq=new WeakMap;class Hq{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ut(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=_=>{const{dragSnapToOrigin:b}=this.getProps();b?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Qd(_).point)},u=(_,b)=>{const{drag:A,dragPropagation:O,onDragStart:V}=this.getProps();if(A&&!O&&(this.openDragLock&&this.openDragLock(),this.openDragLock=XF(A),!this.openDragLock))return;this.latestPointerEvent=_,this.latestPanInfo=b,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Lr(j=>{let F=this.getAxisMotionValue(j).get()||0;if(Oi.test(F)){const{projection:K}=this.visualElement;if(K&&K.layout){const y=K.layout.layoutBox[j];y&&(F=Hn(y)*(parseFloat(F)/100))}}this.originPoint[j]=F}),V&&Et.postRender(()=>V(_,b)),Sv(this.visualElement,"transform");const{animationState:z}=this.visualElement;z&&z.setActive("whileDrag",!0)},c=(_,b)=>{this.latestPointerEvent=_,this.latestPanInfo=b;const{dragPropagation:A,dragDirectionLock:O,onDirectionLock:V,onDrag:z}=this.getProps();if(!A&&!this.openDragLock)return;const{offset:j}=b;if(O&&this.currentDirection===null){this.currentDirection=Fq(j),this.currentDirection!==null&&V&&V(this.currentDirection);return}this.updateAxis("x",b.point,j),this.updateAxis("y",b.point,j),this.visualElement.render(),z&&z(_,b)},f=(_,b)=>{this.latestPointerEvent=_,this.latestPanInfo=b,this.stop(_,b),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>Lr(_=>this.getAnimationState(_)==="paused"&&this.getAxisMotionValue(_).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new G8(e,{onSessionStart:o,onStart:u,onMove:c,onSessionEnd:f,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:r,contextWindow:q8(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!r)return;const{velocity:u}=s;this.startAnimation(u);const{onDragEnd:c}=this.getProps();c&&Et.postRender(()=>c(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Ph(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let u=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(u=Oq(u,this.constraints[e],this.elastic[e])),o.set(u)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&Fl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Vq(r.layoutBox,e):this.constraints=!1,this.elastic=Uq(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Lr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=jq(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Fl(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=F$(r,s.root,this.visualElement.getTransformPagePoint());let u=Lq(s.layout.layoutBox,o);if(n){const c=n(U$(u));this.hasMutatedConstraints=!!c,c&&(u=N8(c))}return u}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:u,onDragTransitionEnd:c}=this.getProps(),f=this.constraints||{},h=Lr(p=>{if(!Ph(p,n,this.currentDirection))return;let _=f&&f[p]||{};u&&(_={min:0,max:0});const b=s?200:1e6,A=s?40:1e7,O={type:"inertia",velocity:r?e[p]:0,bounceStiffness:b,bounceDamping:A,timeConstant:750,restDelta:1,restSpeed:10,...o,..._};return this.startAxisValueAnimation(p,O)});return Promise.all(h).then(c)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Sv(this.visualElement,e),r.start(Nb(e,r,0,n,this.visualElement,!1))}stopAnimation(){Lr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Lr(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Lr(n=>{const{drag:r}=this.getProps();if(!Ph(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:u,max:c}=s.layout.layoutBox[n];o.set(e[n]-At(u,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Fl(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Lr(u=>{const c=this.getAxisMotionValue(u);if(c&&this.constraints!==!1){const f=c.get();s[u]=zq({min:f,max:f},this.constraints[u])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Lr(u=>{if(!Ph(u,e,null))return;const c=this.getAxisMotionValue(u),{min:f,max:h}=this.constraints[u];c.set(At(f,h,s[u]))})}addListeners(){if(!this.visualElement.current)return;Bq.set(this.visualElement,this);const e=this.visualElement.current,n=td(e,"pointerdown",f=>{const{drag:h,dragListener:p=!0}=this.getProps();h&&p&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();Fl(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Et.read(r);const u=Id(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h})=>{this.isDragging&&h&&(Lr(p=>{const _=this.getAxisMotionValue(p);_&&(this.originPoint[p]+=f[p].translate,_.set(_.get()+f[p].translate))}),this.visualElement.render())});return()=>{u(),n(),o(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:u=Av,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:u,dragMomentum:c}}}function Ph(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Fq(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class $q extends Ia{constructor(e){super(e),this.removeGroupControls=Ur,this.removeListeners=Ur,this.controls=new Hq(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ur}unmount(){this.removeGroupControls(),this.removeListeners()}}const xA=t=>(e,n)=>{t&&Et.postRender(()=>t(e,n))};class qq extends Ia{constructor(){super(...arguments),this.removePointerDownListener=Ur}onPointerDown(e){this.session=new G8(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:q8(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:xA(e),onStart:xA(n),onMove:r,onEnd:(o,u)=>{delete this.session,s&&Et.postRender(()=>s(o,u))}}}mount(){this.removePointerDownListener=td(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const em={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function AA(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Oc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Oe.test(t))t=parseFloat(t);else return t;const n=AA(t,e.target.x),r=AA(t,e.target.y);return`${n}% ${r}%`}},Gq={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=xa.parse(t);if(s.length>5)return r;const o=xa.createTransformer(t),u=typeof s[0]!="number"?1:0,c=n.x.scale*e.x,f=n.y.scale*e.y;s[0+u]/=c,s[1+u]/=f;const h=At(c,f,.5);return typeof s[2+u]=="number"&&(s[2+u]/=h),typeof s[3+u]=="number"&&(s[3+u]/=h),o(s)}};let CA=!1;class Yq extends $.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;m$(Kq),o&&(n.group&&n.group.add(o),r&&r.register&&s&&r.register(o),CA&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),em.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:o}=this.props,{projection:u}=r;return u&&(u.isPresent=o,CA=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==o?u.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?u.promote():u.relegate()||Et.postRender(()=>{const c=u.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),bb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function K8(t){const[e,n]=y8(),r=$.useContext(Z_);return L.jsx(Yq,{...t,layoutGroup:r,switchLayoutGroup:$.useContext(k8),isPresent:e,safeToRemove:n})}const Kq={borderRadius:{...Oc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Oc,borderTopRightRadius:Oc,borderBottomLeftRadius:Oc,borderBottomRightRadius:Oc,boxShadow:Gq};function Xq(t,e,n){const r=Nn(t)?t:mu(t);return r.start(Nb("",r,e,n)),r.animation}const Wq=(t,e)=>t.depth-e.depth;class Qq{constructor(){this.children=[],this.isDirty=!1}add(e){tb(this.children,e),this.isDirty=!0}remove(e){nb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Wq),this.isDirty=!1,this.children.forEach(e)}}function Zq(t,e){const n=Zn.now(),r=({timestamp:s})=>{const o=s-n;o>=e&&(Sa(r),t(o-e))};return Et.setup(r,!0),()=>Sa(r)}const X8=["TopLeft","TopRight","BottomLeft","BottomRight"],Jq=X8.length,RA=t=>typeof t=="string"?parseFloat(t):t,kA=t=>typeof t=="number"||Oe.test(t);function eG(t,e,n,r,s,o){s?(t.opacity=At(0,n.opacity??1,tG(r)),t.opacityExit=At(e.opacity??1,0,nG(r))):o&&(t.opacity=At(e.opacity??1,n.opacity??1,r));for(let u=0;u<Jq;u++){const c=`border${X8[u]}Radius`;let f=IA(e,c),h=IA(n,c);if(f===void 0&&h===void 0)continue;f||(f=0),h||(h=0),f===0||h===0||kA(f)===kA(h)?(t[c]=Math.max(At(RA(f),RA(h),r),0),(Oi.test(h)||Oi.test(f))&&(t[c]+="%")):t[c]=h}(e.rotate||n.rotate)&&(t.rotate=At(e.rotate||0,n.rotate||0,r))}function IA(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const tG=W8(0,.5,Lk),nG=W8(.5,.95,Ur);function W8(t,e,n){return r=>r<t?0:r>e?1:n(Sd(t,e,r))}function NA(t,e){t.min=e.min,t.max=e.max}function Vr(t,e){NA(t.x,e.x),NA(t.y,e.y)}function DA(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function MA(t,e,n,r,s){return t-=e,t=Vm(t,1/n,r),s!==void 0&&(t=Vm(t,1/s,r)),t}function rG(t,e=0,n=1,r=.5,s,o=t,u=t){if(Oi.test(e)&&(e=parseFloat(e),e=At(u.min,u.max,e/100)-u.min),typeof e!="number")return;let c=At(o.min,o.max,r);t===o&&(c-=e),t.min=MA(t.min,e,n,c,s),t.max=MA(t.max,e,n,c,s)}function PA(t,e,[n,r,s],o,u){rG(t,e[n],e[r],e[s],e.scale,o,u)}const iG=["x","scaleX","originX"],sG=["y","scaleY","originY"];function OA(t,e,n,r){PA(t.x,e,iG,n?n.x:void 0,r?r.x:void 0),PA(t.y,e,sG,n?n.y:void 0,r?r.y:void 0)}function VA(t){return t.translate===0&&t.scale===1}function Q8(t){return VA(t.x)&&VA(t.y)}function LA(t,e){return t.min===e.min&&t.max===e.max}function aG(t,e){return LA(t.x,e.x)&&LA(t.y,e.y)}function zA(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Z8(t,e){return zA(t.x,e.x)&&zA(t.y,e.y)}function jA(t){return Hn(t.x)/Hn(t.y)}function UA(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class oG{constructor(){this.members=[]}add(e){tb(this.members,e),e.scheduleRender()}remove(e){if(nb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function lG(t,e,n){let r="";const s=t.x.translate/e.x,o=t.y.translate/e.y,u=n?.z||0;if((s||o||u)&&(r=`translate3d(${s}px, ${o}px, ${u}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:p,rotateX:_,rotateY:b,skewX:A,skewY:O}=n;h&&(r=`perspective(${h}px) ${r}`),p&&(r+=`rotate(${p}deg) `),_&&(r+=`rotateX(${_}deg) `),b&&(r+=`rotateY(${b}deg) `),A&&(r+=`skewX(${A}deg) `),O&&(r+=`skewY(${O}deg) `)}const c=t.x.scale*e.x,f=t.y.scale*e.y;return(c!==1||f!==1)&&(r+=`scale(${c}, ${f})`),r||"none"}const c0=["","X","Y","Z"],uG=1e3;let cG=0;function d0(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function J8(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=j8(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Et,!(s||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&J8(r)}function eI({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(u={},c=e?.()){this.id=cG++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(hG),this.nodes.forEach(yG),this.nodes.forEach(vG),this.nodes.forEach(mG)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new Qq)}addEventListener(u,c){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new sb),this.eventHandlers.get(u).add(c)}notifyListeners(u,...c){const f=this.eventHandlers.get(u);f&&f.notify(...c)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=g8(u)&&!t$(u),this.instance=u;const{layoutId:c,layout:f,visualElement:h}=this.options;if(h&&!h.current&&h.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||c)&&(this.isLayoutDirty=!0),t){let p,_=0;const b=()=>this.root.updateBlockedByResize=!1;Et.read(()=>{_=window.innerWidth}),t(u,()=>{const A=window.innerWidth;A!==_&&(_=A,this.root.updateBlockedByResize=!0,p&&p(),p=Zq(b,250),em.hasAnimatedSinceResize&&(em.hasAnimatedSinceResize=!1,this.nodes.forEach(FA)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||f)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:_,hasRelativeLayoutChanged:b,layout:A})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const O=this.options.transition||h.getDefaultTransition()||TG,{onLayoutAnimationStart:V,onLayoutAnimationComplete:z}=h.getProps(),j=!this.targetLayout||!Z8(this.targetLayout,A),F=!_&&b;if(this.options.layoutRoot||this.resumeFrom||F||_&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const K={...vb(O,"layout"),onPlay:V,onComplete:z};(h.shouldReduceMotion||this.options.layoutRoot)&&(K.delay=0,K.type=!1),this.startAnimation(K),this.setAnimationOrigin(p,F)}else _||FA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=A})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Sa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(_G),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&J8(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const _=this.path[p];_.shouldResetTransform=!0,_.updateScroll("snapshot"),_.options.layoutRoot&&_.willUpdate(!1)}const{layoutId:c,layout:f}=this.options;if(c===void 0&&!f)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(BA);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(HA);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(gG),this.nodes.forEach(dG),this.nodes.forEach(fG)):this.nodes.forEach(HA),this.clearAllSnapshots();const c=Zn.now();bn.delta=ws(0,1e3/60,c-bn.timestamp),bn.timestamp=c,bn.isProcessing=!0,e0.update.process(bn),e0.preRender.process(bn),e0.render.process(bn),bn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,bb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(pG),this.sharedNodes.forEach(bG)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Hn(this.snapshot.measuredBox.x)&&!Hn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ut(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(c=!1),c&&this.instance){const f=r(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!s)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!Q8(this.projectionDelta),f=this.getTransformTemplate(),h=f?f(this.latestValues,""):void 0,p=h!==this.prevTransformTemplateValue;u&&this.instance&&(c||fo(this.latestValues)||p)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const c=this.measurePageBox();let f=this.removeElementScroll(c);return u&&(f=this.removeTransform(f)),SG(f),{animationId:this.root.animationId,measuredBox:c,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return Ut();const c=u.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(xG))){const{scroll:h}=this.root;h&&($l(c.x,h.offset.x),$l(c.y,h.offset.y))}return c}removeElementScroll(u){const c=Ut();if(Vr(c,u),this.scroll?.wasRoot)return c;for(let f=0;f<this.path.length;f++){const h=this.path[f],{scroll:p,options:_}=h;h!==this.root&&p&&_.layoutScroll&&(p.wasRoot&&Vr(c,u),$l(c.x,p.offset.x),$l(c.y,p.offset.y))}return c}applyTransform(u,c=!1){const f=Ut();Vr(f,u);for(let h=0;h<this.path.length;h++){const p=this.path[h];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&ql(f,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),fo(p.latestValues)&&ql(f,p.latestValues)}return fo(this.latestValues)&&ql(f,this.latestValues),f}removeTransform(u){const c=Ut();Vr(c,u);for(let f=0;f<this.path.length;f++){const h=this.path[f];if(!h.instance||!fo(h.latestValues))continue;bv(h.latestValues)&&h.updateSnapshot();const p=Ut(),_=h.measurePageBox();Vr(p,_),OA(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,p)}return fo(this.latestValues)&&OA(c,this.latestValues),c}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==bn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==c;if(!(u||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:_}=this.options;if(!(!this.layout||!(p||_))){if(this.resolvedRelativeTargetAt=bn.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ut(),this.relativeTargetOrigin=Ut(),rd(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),Vr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ut(),this.targetWithTransforms=Ut()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Nq(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Vr(this.target,this.layout.layoutBox),M8(this.target,this.targetDelta)):Vr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ut(),this.relativeTargetOrigin=Ut(),rd(this.relativeTargetOrigin,this.target,b.target),Vr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||bv(this.parent.latestValues)||D8(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const u=this.getLead(),c=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===bn.timestamp&&(f=!1),f)return;const{layout:h,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||p))return;Vr(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,b=this.treeScale.y;H$(this.layoutCorrected,this.treeScale,this.path,c),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=Ut());const{target:A}=u;if(!A){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(DA(this.prevProjectionDelta.x,this.projectionDelta.x),DA(this.prevProjectionDelta.y,this.projectionDelta.y)),nd(this.projectionDelta,this.layoutCorrected,A,this.latestValues),(this.treeScale.x!==_||this.treeScale.y!==b||!UA(this.projectionDelta.x,this.prevProjectionDelta.x)||!UA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",A))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.visualElement?.scheduleRender(),u){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Gl(),this.projectionDelta=Gl(),this.projectionDeltaWithTransform=Gl()}setAnimationOrigin(u,c=!1){const f=this.snapshot,h=f?f.latestValues:{},p={...this.latestValues},_=Gl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const b=Ut(),A=f?f.source:void 0,O=this.layout?this.layout.source:void 0,V=A!==O,z=this.getStack(),j=!z||z.members.length<=1,F=!!(V&&!j&&this.options.crossfade===!0&&!this.path.some(EG));this.animationProgress=0;let K;this.mixTargetDelta=y=>{const E=y/1e3;$A(_.x,u.x,E),$A(_.y,u.y,E),this.setTargetDelta(_),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(rd(b,this.layout.layoutBox,this.relativeParent.layout.layoutBox),wG(this.relativeTarget,this.relativeTargetOrigin,b,E),K&&aG(this.relativeTarget,K)&&(this.isProjectionDirty=!1),K||(K=Ut()),Vr(K,this.relativeTarget)),V&&(this.animationValues=p,eG(p,h,this.latestValues,E,F,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Sa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Et.update(()=>{em.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=mu(0)),this.currentAnimation=Xq(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),u.onUpdate&&u.onUpdate(c)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(uG),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:c,target:f,layout:h,latestValues:p}=u;if(!(!c||!f||!h)){if(this!==u&&this.layout&&h&&tI(this.options.animationType,this.layout.layoutBox,h.layoutBox)){f=this.target||Ut();const _=Hn(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+_;const b=Hn(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+b}Vr(c,f),ql(c,p),nd(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(u,c){this.sharedNodes.has(u)||this.sharedNodes.set(u,new oG),this.sharedNodes.get(u).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){const{layoutId:u}=this.options;return u?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:u}=this.options;return u?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:c,preserveFollowOpacity:f}={}){const h=this.getStack();h&&h.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let c=!1;const{latestValues:f}=u;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(c=!0),!c)return;const h={};f.z&&d0("z",u,h,this.animationValues);for(let p=0;p<c0.length;p++)d0(`rotate${c0[p]}`,u,h,this.animationValues),d0(`skew${c0[p]}`,u,h,this.animationValues);u.render();for(const p in h)u.setStaticValue(p,h[p]),this.animationValues&&(this.animationValues[p]=h[p]);u.scheduleRender()}applyProjectionStyles(u,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=Jh(c?.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=Jh(c?.pointerEvents)||""),this.hasProjected&&!fo(this.latestValues)&&(u.transform=f?f({},""):"none",this.hasProjected=!1);return}u.visibility="";const p=h.animationValues||h.latestValues;this.applyTransformsToTarget();let _=lG(this.projectionDeltaWithTransform,this.treeScale,p);f&&(_=f(p,_)),u.transform=_;const{x:b,y:A}=this.projectionDelta;u.transformOrigin=`${b.origin*100}% ${A.origin*100}% 0`,h.animationValues?u.opacity=h===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const O in Rd){if(p[O]===void 0)continue;const{correct:V,applyTo:z,isCSSVariable:j}=Rd[O],F=_==="none"?p[O]:V(p[O],h);if(z){const K=z.length;for(let y=0;y<K;y++)u[z[y]]=F}else j?this.options.visualElement.renderState.vars[O]=F:u[O]=F}this.options.layoutId&&(u.pointerEvents=h===this?Jh(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>u.currentAnimation?.stop()),this.root.nodes.forEach(BA),this.root.sharedNodes.clear()}}}function dG(t){t.updateLayout()}function fG(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?Lr(p=>{const _=o?e.measuredBox[p]:e.layoutBox[p],b=Hn(_);_.min=n[p].min,_.max=_.min+b}):tI(s,e.layoutBox,n)&&Lr(p=>{const _=o?e.measuredBox[p]:e.layoutBox[p],b=Hn(n[p]);_.max=_.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+b)});const u=Gl();nd(u,n,e.layoutBox);const c=Gl();o?nd(c,t.applyTransform(r,!0),e.measuredBox):nd(c,n,e.layoutBox);const f=!Q8(u);let h=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:_,layout:b}=p;if(_&&b){const A=Ut();rd(A,e.layoutBox,_.layoutBox);const O=Ut();rd(O,n,b.layoutBox),Z8(A,O)||(h=!0),p.options.layoutRoot&&(t.relativeTarget=O,t.relativeTargetOrigin=A,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:c,layoutDelta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function hG(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function mG(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function pG(t){t.clearSnapshot()}function BA(t){t.clearMeasurements()}function HA(t){t.isLayoutDirty=!1}function gG(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function FA(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function yG(t){t.resolveTargetDelta()}function vG(t){t.calcProjection()}function _G(t){t.resetSkewAndRotation()}function bG(t){t.removeLeadSnapshot()}function $A(t,e,n){t.translate=At(e.translate,0,n),t.scale=At(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function qA(t,e,n,r){t.min=At(e.min,n.min,r),t.max=At(e.max,n.max,r)}function wG(t,e,n,r){qA(t.x,e.x,n.x,r),qA(t.y,e.y,n.y,r)}function EG(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const TG={duration:.45,ease:[.4,0,.1,1]},GA=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),YA=GA("applewebkit/")&&!GA("chrome/")?Math.round:Ur;function KA(t){t.min=YA(t.min),t.max=YA(t.max)}function SG(t){KA(t.x),KA(t.y)}function tI(t,e,n){return t==="position"||t==="preserve-aspect"&&!Iq(jA(e),jA(n),.2)}function xG(t){return t!==t.root&&t.scroll?.wasRoot}const AG=eI({attachResizeListener:(t,e)=>Id(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),f0={current:void 0},nI=eI({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!f0.current){const t=new AG({});t.mount(window),t.setOptions({layoutScroll:!0}),f0.current=t}return f0.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),CG={pan:{Feature:qq},drag:{Feature:$q,ProjectionNode:nI,MeasureLayout:K8}};function XA(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=r[s];o&&Et.postRender(()=>o(e,Qd(e)))}class RG extends Ia{mount(){const{current:e}=this.node;e&&(this.unmount=WF(e,(n,r)=>(XA(this.node,r,"Start"),s=>XA(this.node,s,"End"))))}unmount(){}}class kG extends Ia{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Kd(Id(this.node.current,"focus",()=>this.onFocus()),Id(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function WA(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=r[s];o&&Et.postRender(()=>o(e,Qd(e)))}class IG extends Ia{mount(){const{current:e}=this.node;e&&(this.unmount=e$(e,(n,r)=>(WA(this.node,r,"Start"),(s,{success:o})=>WA(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Cv=new WeakMap,h0=new WeakMap,NG=t=>{const e=Cv.get(t.target);e&&e(t)},DG=t=>{t.forEach(NG)};function MG({root:t,...e}){const n=t||document;h0.has(n)||h0.set(n,{});const r=h0.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(DG,{root:t,...e})),r[s]}function PG(t,e,n){const r=MG(e);return Cv.set(t,n),r.observe(t),()=>{Cv.delete(t),r.unobserve(t)}}const OG={some:0,all:1};class VG extends Ia{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:o}=e,u={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:OG[s]},c=f=>{const{isIntersecting:h}=f;if(this.isInView===h||(this.isInView=h,o&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:p,onViewportLeave:_}=this.node.getProps(),b=h?p:_;b&&b(f)};return PG(this.node.current,u,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(LG(e,n))&&this.startObserver()}unmount(){}}function LG({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const zG={inView:{Feature:VG},tap:{Feature:IG},focus:{Feature:kG},hover:{Feature:RG}},jG={layout:{ProjectionNode:nI,MeasureLayout:K8}},UG={...Sq,...zG,...CG,...jG},m0=j$(UG,Z$),vr={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},fr={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function BG(){const[t,e]=$.useState(""),[n,r]=$.useState(""),[s,o]=$.useState(!1),[u,c]=$.useState(!1),[f,h]=$.useState(!1),[p,_]=$.useState(""),b=async V=>{V.preventDefault(),h(!0),_("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(fr.INVALID_EMAIL);if(n.length<6)throw new Error(fr.WEAK_PASSWORD);const j=s?$j:qj,{user:F}=await j(Q_,t,n);console.info("Auth success  uid:",F.uid)}catch(z){_(A(z))}finally{h(!1)}},A=V=>{switch(V.code){case"auth/email-already-in-use":return fr.EMAIL_IN_USE;case"auth/invalid-email":return fr.INVALID_EMAIL;case"auth/weak-password":return fr.WEAK_PASSWORD;case"auth/user-not-found":return fr.USER_NOT_FOUND;case"auth/wrong-password":return fr.WRONG_PASSWORD;case"auth/too-many-requests":return fr.TOO_MANY_REQUESTS;case"auth/user-disabled":return"This account has been disabled. Please contact support.";default:return V.message||"Authentication error"}},O="w-full px-4 py-3 rounded-lg border bg-white/80 dark:bg-gray-800/80 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 transition";return L.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900/40 dark:bg-gray-950/60 backdrop-blur-sm p-4",children:L.jsxs(m0.div,{initial:{opacity:0,scale:.96},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.25},className:"w-full max-w-md rounded-3xl shadow-lg bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 overflow-hidden",children:[L.jsxs("div",{className:"px-8 pt-8 pb-4 text-center",children:[L.jsx(rA,{mode:"wait",children:L.jsx(m0.h2,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.25},className:"text-3xl font-semibold text-gray-900 dark:text-gray-100",children:s?"Create an account":"Welcome back"},s?"signup-header":"signin-header")}),L.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:s?"Start your AIpowered journey.":"Sign in to continue."})]}),L.jsxs("form",{onSubmit:b,className:"px-8 pb-8 space-y-6",children:[L.jsxs("div",{children:[L.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),L.jsxs("div",{className:"relative",children:[L.jsx(QB,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),L.jsx("input",{id:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:V=>e(V.target.value),placeholder:"you@example.com",className:`${O} pl-11`})]})]}),L.jsxs("div",{children:[L.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),L.jsxs("div",{className:"relative",children:[L.jsx(sH,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),L.jsx("input",{id:"password",type:u?"text":"password",autoComplete:s?"new-password":"current-password",required:!0,value:n,onChange:V=>r(V.target.value),placeholder:"",className:`${O} pl-11 pr-11`}),L.jsx("button",{type:"button",onClick:()=>c(V=>!V),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300","aria-label":u?"Hide password":"Show password",children:u?L.jsx(tH,{className:"h-5 w-5"}):L.jsx(rH,{className:"h-5 w-5"})})]})]}),L.jsx(rA,{children:p&&L.jsxs(m0.div,{initial:{y:-6,opacity:0},animate:{y:0,opacity:1},exit:{y:-6,opacity:0},className:"flex items-start gap-3 rounded-lg border border-red-300 dark:border-red-800 bg-red-50 dark:bg-red-900/30 px-4 py-3 text-sm text-red-700 dark:text-red-300",role:"alert",children:[L.jsx(JB,{className:"h-5 w-5 flex-shrink-0"}),L.jsx("span",{children:p})]},"error")}),L.jsxs("button",{type:"submit",disabled:f,className:"inline-flex w-full items-center justify-center gap-2 rounded-lg bg-indigo-600 px-4 py-3 font-medium text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-indigo-500 dark:hover:bg-indigo-400",children:[f?L.jsxs("svg",{className:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[L.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),L.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}):s?L.jsx(oH,{className:"h-5 w-5"}):L.jsx(XB,{className:"h-5 w-5"}),L.jsx("span",{children:f?s?"Creating account":"Signing in":s?"Sign Up":"Sign In"})]})]}),L.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 px-8 py-4 text-center",children:[L.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s?"Already have an account?":"New to TinkFlow?"}),L.jsx("button",{onClick:()=>o(V=>!V),type:"button",className:"mt-2 text-sm font-medium text-indigo-600 hover:text-indigo-500 focus:outline-none dark:text-indigo-400 dark:hover:text-indigo-300",children:s?"Sign In":"Create an account"})]})]})})}function HG({show:t,onHide:e,onConfirm:n,isCreating:r=!1}){const[s,o]=$.useState(""),[u,c]=$.useState(!0),f=b=>{const A=b.target.value;o(A),c(A.trim().length>0&&A.trim().length<=50)},h=b=>{b.preventDefault();const A=s.trim();A.length>0&&A.length<=50&&(n(A),o(""),c(!0))},p=()=>{o(""),c(!0),e()},_=b=>{b.key==="Enter"&&h(b)};return t?L.jsx("div",{className:"board-name-modal fixed inset-0 bg-black/60 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-[2001]",children:L.jsxs("div",{className:"bg-gray-800 dark:bg-gray-900 rounded-xl shadow-2xl p-6 w-full max-w-md border border-gray-700 dark:border-gray-600",children:[L.jsxs("div",{className:"flex justify-between items-center mb-6",children:[L.jsx("h3",{className:"text-lg font-semibold text-white dark:text-white",children:"Create New Board"}),L.jsx("button",{onClick:p,className:`text-gray-400 dark:text-gray-400 hover:text-gray-200 dark:hover:text-gray-200 
                                 bg-gray-700/50 dark:bg-gray-800/50 hover:bg-gray-600/50 dark:hover:bg-gray-700/50
                                 border border-gray-600 dark:border-gray-700 rounded-lg w-8 h-8 flex items-center justify-center
                                 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500/20`,"aria-label":"Close",children:""})]}),L.jsxs("form",{onSubmit:h,className:"space-y-4",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-300 dark:text-gray-300 mb-2",children:"Board Name"}),L.jsx("input",{type:"text",value:s,onChange:f,onKeyDown:_,placeholder:"Enter board name...",maxLength:50,autoFocus:!0,className:`w-full px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border rounded-lg 
                                       text-white dark:text-white placeholder-gray-400 dark:placeholder-gray-500 
                                       focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40 
                                       transition-all duration-200 font-medium
                                       ${u?"border-gray-600/50 dark:border-gray-700/50 focus:border-blue-500/60 dark:focus:border-blue-400/60":"border-red-500/60 dark:border-red-500/60 focus:border-red-500/60 dark:focus:border-red-500/60"}`}),!u&&L.jsx("p",{className:"text-red-400 dark:text-red-400 text-sm mt-2",children:"Board name must be between 1 and 50 characters long."}),L.jsxs("p",{className:`text-xs mt-1 ${s.length===50?"text-red-400 dark:text-red-400":"text-gray-500 dark:text-gray-500"}`,children:[s.length,"/50 characters"]})]}),L.jsxs("div",{className:"flex gap-3 pt-4",children:[L.jsx("button",{type:"button",onClick:p,disabled:r,className:`flex-1 px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border border-gray-600/50 dark:border-gray-700/50
                                     text-gray-300 dark:text-gray-300 rounded-lg font-medium transition-all duration-200
                                     hover:bg-gray-600/60 dark:hover:bg-gray-700/60 hover:border-gray-500/60 dark:hover:border-gray-600/60
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20`,children:"Cancel"}),L.jsx("button",{type:"submit",disabled:!u||s.trim().length===0||r,className:`flex-1 px-4 py-3 bg-blue-600/80 dark:bg-blue-500/80 border border-blue-500/50 dark:border-blue-400/50
                                     text-white rounded-lg font-medium transition-all duration-200 
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     hover:bg-blue-500/90 dark:hover:bg-blue-400/90 hover:border-blue-400/60 dark:hover:border-blue-300/60
                                     focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40`,children:r?"Creating...":"Create Board"})]})]})]})}):null}function FG({allBoards:t,currentBoard:e,onSwitchBoard:n,onCreateBoard:r,onDeleteBoard:s,onSignOut:o,isLoading:u}){const[c,f]=$.useState(!1),[h,p]=$.useState(!1),[_,b]=$.useState(null),A=async j=>{try{f(!0),await r(j),p(!1)}catch(F){console.error("Error in sidebar create board:",F)}finally{f(!1)}},O=()=>{p(!0)},V=()=>{p(!1)},z=(j,F)=>{j.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&s(F)};return L.jsxs(L.Fragment,{children:[L.jsx("div",{className:"left-0 top-0 w-[100%] h-screen bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:L.jsxs("div",{className:"flex flex-col h-full",children:[L.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/50",children:[L.jsx("h2",{className:"m-0 mb-3 text-lg font-semibold text-gray-900 dark:text-gray-100 tracking-tight",children:"TinkFlow Boards"}),L.jsx("button",{onClick:O,disabled:u||c,className:`w-full bg-blue-600 dark:bg-blue-600 text-white dark:text-white border border-blue-600 dark:border-blue-600 
                                      px-3 py-2 rounded-lg cursor-pointer text-base font-medium transition-all duration-200 
                                      ${u||c?"cursor-not-allowed opacity-60":"hover:bg-blue-700 dark:hover:bg-blue-700 hover:border-blue-700 dark:hover:border-blue-700 hover:-translate-y-0.5 hover:shadow-md"}`,children:c?"Creating...":"+ New Board"})]}),L.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:t.map(j=>{const F=e?.id===j.id,K=_===j.id;return L.jsxs("div",{onClick:()=>!u&&n(j.id),onMouseEnter:()=>b(j.id),onMouseLeave:()=>b(null),className:`
                                        min-h-[44px] px-3 py-2.5 mb-1 rounded-lg flex justify-between items-center
                                        transition-all duration-200 cursor-pointer border font-medium text-lg leading-tight
                                        ${u?"cursor-not-allowed opacity-60":"cursor-pointer"}
                                        ${F?"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/30 text-blue-900 dark:text-blue-100 font-semibold shadow-sm":K?"border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50 text-gray-900 dark:text-gray-100 shadow-sm":"border-transparent bg-transparent text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/30"}
                                    `,role:"button",tabIndex:0,onKeyDown:y=>{(y.key==="Enter"||y.key===" ")&&!u&&n(j.id)},children:[L.jsx("span",{className:`
                                        ${F?"font-semibold":"font-medium"} 
                                        flex-1 whitespace-nowrap overflow-hidden text-ellipsis 
                                        text-lg leading-tight
                                    `,children:j.name}),L.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[j.isOpen&&L.jsx("span",{className:"text-green-500 dark:text-green-400 text-base",children:""}),t.length>1&&L.jsx("button",{onClick:y=>{y.stopPropagation(),z(y,j.id)},title:"Delete board",className:`
                                                    w-5 h-5 bg-transparent border-none text-red-500 dark:text-red-400 
                                                    cursor-pointer text-lg leading-none flex items-center justify-center
                                                    rounded transition-all duration-150
                                                    ${K?"opacity-100 visible hover:bg-red-50 dark:hover:bg-red-900/30":"opacity-0 invisible"}
                                                    hover:text-red-600 dark:hover:text-red-300
                                                `,children:""})]})]},j.id)})}),u&&L.jsx("div",{className:"p-3 text-center text-gray-500 dark:text-gray-400 text-base font-medium",children:"Loading boards..."}),L.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:L.jsx("button",{onClick:o,className:`w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 
                                     bg-transparent text-gray-700 dark:text-gray-300 cursor-pointer text-base font-medium
                                     transition-all duration-200
                                     hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:border-gray-400 dark:hover:border-gray-500 
                                     hover:text-gray-900 dark:hover:text-gray-100`,children:"Sign Out"})})]})}),L.jsx(HG,{show:h,onHide:V,onConfirm:A,isCreating:c})]})}const rI=$.createContext(void 0),$G=()=>{const t=$.useContext(rI);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},qG=({children:t})=>{const[e,n]=$.useState(()=>{const s=localStorage.getItem("theme");return s||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});$.useEffect(()=>{const s=window.document.documentElement;s.classList.remove("light","dark"),s.classList.add(e),localStorage.setItem("theme",e)},[e]);const r=()=>{n(s=>s==="light"?"dark":"light")};return L.jsx(rI.Provider,{value:{theme:e,toggleTheme:r},children:t})},iI=()=>{const{theme:t,toggleTheme:e}=$G();return L.jsx("button",{onClick:e,className:`p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 
                     hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600
                     hover:border-gray-300 dark:hover:border-gray-500 transition-all duration-200 
                     focus:outline-none focus:ring-2 focus:ring-blue-500/30 dark:focus:ring-blue-400/30
                     shadow-sm hover:shadow-md`,title:`Switch to ${t==="light"?"dark":"light"} mode`,"aria-label":`Switch to ${t==="light"?"dark":"light"} mode`,children:t==="light"?L.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:L.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):L.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:L.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})})})};function GG({name:t,onSetName:e,user:n,isSaving:r}){const[s,o]=$.useState(!1),[u,c]=$.useState(t||"");$.useEffect(()=>{c(t||"")},[t]);const f=p=>{p.key==="Enter"&&(e(u),o(!1))},h=()=>{o(!0),c(t||"")};return L.jsx(L.Fragment,{children:L.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:L.jsx("div",{className:"max-w-none mx-auto px-4",children:L.jsxs("header",{className:"flex justify-between items-center py-3",children:[L.jsxs("div",{className:"flex items-center gap-3",children:[L.jsxs("div",{className:"flex items-center space-x-2",children:[L.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-sm",children:L.jsx("span",{className:"text-white font-bold text-sm",children:"T"})}),L.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"TinkFlow"})]}),L.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:""}),s?L.jsx("input",{type:"text",value:u,onChange:p=>c(p.target.value),onKeyDown:f,onBlur:()=>{e(u),o(!1)},className:`bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 
                                             rounded-md px-2 py-1 text-gray-900 dark:text-gray-100 text-sm min-w-[120px]
                                             focus:outline-none focus:border-blue-500 dark:focus:border-blue-400 focus:ring-2 focus:ring-blue-500/20`,autoFocus:!0}):L.jsx("button",{onClick:h,className:`bg-transparent border-none text-gray-600 dark:text-gray-400 text-sm cursor-pointer 
                                             px-2 py-1 rounded-md transition-all duration-150 ease-in-out
                                             hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-100`,children:t||"Untitled Board"})]}),L.jsxs("div",{className:"flex items-center gap-3",children:[r&&L.jsxs("div",{className:`text-green-600 dark:text-green-400 text-sm flex items-center gap-2 
                                               bg-green-50 dark:bg-green-900/20 px-3 py-1.5 rounded-full border border-green-200 dark:border-green-700/50
                                               animate-pulse`,children:[L.jsx("div",{className:"w-2 h-2 bg-green-500 dark:bg-green-400 rounded-full animate-bounce"}),L.jsx("span",{className:"font-medium",children:"Saving..."})]}),L.jsx(iI,{}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-gray-400 to-gray-500 rounded-full flex items-center justify-center",children:L.jsx("span",{className:"text-white font-medium text-xs",children:n?.isAnonymous?"G":n?.email?.charAt(0).toUpperCase()||"U"})}),L.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm font-medium",children:n?.isAnonymous?"Guest":n?.email?.split("@")[0]||"User"})]})]})]})})})})}const YG=({notification:t,onRemove:e})=>{const n=s=>{switch(s){case"success":return"";case"error":return"";case"warning":return"";case"info":return"";default:return""}},r=s=>{switch(s){case"success":return"bg-green-900/20 dark:bg-green-900/30 border-green-500/30 dark:border-green-500/40 text-green-300 dark:text-green-400";case"error":return"bg-red-900/20 dark:bg-red-900/30 border-red-500/30 dark:border-red-500/40 text-red-300 dark:text-red-400";case"warning":return"bg-yellow-900/20 dark:bg-yellow-900/30 border-yellow-500/30 dark:border-yellow-500/40 text-yellow-300 dark:text-yellow-400";case"info":return"bg-blue-900/20 dark:bg-blue-900/30 border-blue-500/30 dark:border-blue-500/40 text-blue-300 dark:text-blue-400";default:return"bg-gray-900/20 dark:bg-gray-900/30 border-gray-500/30 dark:border-gray-500/40 text-gray-300 dark:text-gray-400"}};return L.jsxs("div",{className:`notification relative min-w-80 max-w-md p-4 rounded-xl border shadow-2xl backdrop-blur-sm                         transform transition-all duration-300 ease-out hover:scale-[1.02] hover:shadow-3xl                        ${r(t.type)}`,children:[" ",L.jsxs("div",{className:"flex items-start gap-3",children:[" ",L.jsxs("span",{className:"text-lg flex-shrink-0 mt-0.5",children:[" ",n(t.type)," "]})," ",L.jsxs("div",{className:"flex-1 min-w-0",children:[" ",L.jsxs("p",{className:"text-sm font-medium leading-5 break-words",children:[" ",t.message," "]})," "]})," ",L.jsxs("button",{onClick:()=>e(t.id),className:"flex-shrink-0 text-gray-400 dark:text-gray-500 hover:text-gray-200 dark:hover:text-gray-300                              hover:bg-gray-700/50 dark:hover:bg-gray-600/50                              rounded-full p-1 transition-all duration-200                              focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20","aria-label":"Close notification",children:[" ",L.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[" ",L.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})," "]})," "]})," "]})," "]})},KG=({notifications:t,onRemove:e})=>L.jsxs("div",{className:"notification-container fixed top-4 right-4 space-y-3 z-[2000] pointer-events-none",children:[" ",t.map(n=>L.jsxs("div",{className:"pointer-events-auto",children:[" ",L.jsx(YG,{notification:n,onRemove:e})," "]},n.id))," "]});function XG({onLogin:t}){return L.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 antialiased",children:[" "," ",L.jsxs("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50",children:[" ",L.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",L.jsxs("div",{className:"flex justify-between items-center py-4",children:[" ",L.jsxs("div",{className:"flex items-center space-x-3",children:[" ",L.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",L.jsx("span",{className:"text-white font-bold text-lg",children:"T"})," "]})," ",L.jsxs("div",{className:"flex flex-col",children:[" ",L.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white tracking-tight",children:"TinkFlow"})," ",L.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"AI Learning Platform"})," "]})," "]})," ",L.jsxs("div",{className:"flex items-center gap-4",children:[" ",L.jsx(iI,{})," ",L.jsxs("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors duration-200",children:[" ","Get Started"," "]})," "]})," "]})," "]})," "]})," "," ",L.jsxs("section",{className:"relative overflow-hidden",children:[" ",L.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-32",children:[" ",L.jsxs("div",{className:"text-center",children:[" ",L.jsxs("div",{className:"inline-flex items-center gap-2 bg-indigo-50 dark:bg-indigo-900/20 px-4 py-2 rounded-full mb-8",children:[" ",L.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"})," ",L.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 font-medium text-sm",children:"AI-Powered Concept Learning"})," "]})," ",L.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-gray-900 dark:text-white mb-6 leading-tight",children:[" ","Learn & Tinker with"," ",L.jsxs("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent block",children:[" ","AI-Powered Concepts"," "]})," "]})," ",L.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-3xl mx-auto leading-relaxed",children:[" ","TinkFlow is the ultimate AI-powered platform for exploring, understanding, and experimenting with new concepts. Transform your learning journey with interactive visual flows and intelligent insights."," "]})," ",L.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[" ",L.jsxs("button",{onClick:t,className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning Now"," "]})," ",L.jsxs("button",{className:"px-8 py-4 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-semibold text-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",children:[" ","Watch Demo"," "]})," "]})," "]})," "]})," "," ",L.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-indigo-400 to-purple-500 rounded-full opacity-10 blur-3xl"})," ",L.jsx("div",{className:"absolute top-1/4 right-1/4 w-64 h-64 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full opacity-10 blur-2xl"})," "]})," "," ",L.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",L.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",L.jsxs("div",{className:"text-center mb-16",children:[" ",L.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Everything You Need to Learn"," "]})," ",L.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","AI-powered tools and features designed to accelerate your learning and conceptual understanding"," "]})," "]})," ",L.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",L.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-indigo-200 dark:border-indigo-700/50 hover:transform hover:-translate-y-1",children:[" ",L.jsxs("div",{className:"w-14 h-14 bg-indigo-500 rounded-xl flex items-center justify-center mb-6",children:[" ",L.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})," "]})," "]})," ",L.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI-Powered Insights"," "]})," ",L.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Get intelligent explanations and connections between concepts powered by advanced AI that understands your learning style."," "]})," "]})," ",L.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-purple-200 dark:border-purple-700/50 hover:transform hover:-translate-y-1",children:[" ",L.jsxs("div",{className:"w-14 h-14 bg-purple-500 rounded-xl flex items-center justify-center mb-6",children:[" ",L.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"})," "]})," "]})," ",L.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Interactive Visual Flows"," "]})," ",L.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Build and explore concept maps with interactive nodes that respond to your curiosity and create dynamic learning pathways."," "]})," "]})," ",L.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-green-200 dark:border-green-700/50 hover:transform hover:-translate-y-1",children:[" ",L.jsxs("div",{className:"w-14 h-14 bg-green-500 rounded-xl flex items-center justify-center mb-6",children:[" ",L.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})," "]})," "]})," ",L.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Experimentation Sandbox"," "]})," ",L.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Tinker with concepts in a safe, guided environment where you can test ideas and see instant results with AI feedback."," "]})," "]})," "]})," "]})," "]})," "," ",L.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",L.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",L.jsxs("div",{className:"text-center mb-16",children:[" ",L.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","How TinkFlow Works"," "]})," ",L.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Three simple steps to unlock your learning potential with AI-powered concept exploration"," "]})," "]})," ",L.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",L.jsxs("div",{className:"text-center",children:[" ",L.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",L.jsx("span",{className:"text-white font-bold text-xl",children:"1"})," "]})," ",L.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Input Your Concept"," "]})," ",L.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Start by entering any topic, question, or concept you want to explore. Our AI understands context and complexity."," "]})," "]})," ",L.jsxs("div",{className:"text-center",children:[" ",L.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",L.jsx("span",{className:"text-white font-bold text-xl",children:"2"})," "]})," ",L.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI Generates Flow"," "]})," ",L.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Watch as TinkFlow creates an interactive visual map with connected nodes, each representing key aspects of your concept."," "]})," "]})," ",L.jsxs("div",{className:"text-center",children:[" ",L.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",L.jsx("span",{className:"text-white font-bold text-xl",children:"3"})," "]})," ",L.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Explore & Learn"," "]})," ",L.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Click on any node to dive deeper, ask questions, and watch new connections emerge as you explore your learning path."," "]})," "]})," "]})," "]})," "]})," "," ",L.jsxs("section",{className:"py-20 bg-gradient-to-r from-indigo-500 to-purple-600",children:[" ",L.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",L.jsxs("div",{className:"grid md:grid-cols-4 gap-8 text-center",children:[" ",L.jsxs("div",{className:"text-white",children:[" ",L.jsx("div",{className:"text-4xl font-bold mb-2",children:"27K+"})," ",L.jsx("div",{className:"text-indigo-100",children:"Concepts Explored"})," "]})," ",L.jsxs("div",{className:"text-white",children:[" ",L.jsx("div",{className:"text-4xl font-bold mb-2",children:"2.4K+"})," ",L.jsx("div",{className:"text-indigo-100",children:"Active Learners"})," "]})," ",L.jsxs("div",{className:"text-white",children:[" ",L.jsx("div",{className:"text-4xl font-bold mb-2",children:"98%"})," ",L.jsx("div",{className:"text-indigo-100",children:"Learning Success"})," "]})," ",L.jsxs("div",{className:"text-white",children:[" ",L.jsx("div",{className:"text-4xl font-bold mb-2",children:"24/7"})," ",L.jsx("div",{className:"text-indigo-100",children:"AI Support"})," "]})," "]})," "]})," "]})," "," ",L.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",L.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",L.jsxs("div",{className:"text-center mb-16",children:[" ",L.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Perfect for Every Learning Style"," "]})," ",L.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Whether you're a student, researcher, or curious mind, TinkFlow adapts to your learning needs"," "]})," "]})," ",L.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[" ",L.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/10 dark:to-blue-800/10 p-8 rounded-2xl border border-blue-200 dark:border-blue-700/30",children:[" ",L.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Academic Learning"," "]})," ",L.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Break down complex academic subjects into digestible, interconnected concepts. Perfect for studying sciences, humanities, and technical topics."," "]})," ",L.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",L.jsx("li",{children:" Research paper analysis"})," ",L.jsx("li",{children:" Concept mapping for exams"})," ",L.jsx("li",{children:" Cross-disciplinary connections"})," "]})," "]})," ",L.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/10 dark:to-purple-800/10 p-8 rounded-2xl border border-purple-200 dark:border-purple-700/30",children:[" ",L.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Creative Exploration"," "]})," ",L.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Explore ideas, brainstorm solutions, and discover unexpected connections. Great for creative professionals and innovators."," "]})," ",L.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",L.jsx("li",{children:" Idea generation workflows"})," ",L.jsx("li",{children:" Problem-solving frameworks"})," ",L.jsx("li",{children:" Innovation mapping"})," "]})," "]})," ",L.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/10 dark:to-green-800/10 p-8 rounded-2xl border border-green-200 dark:border-green-700/30",children:[" ",L.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Technical Deep Dives"," "]})," ",L.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Understand complex systems, architectures, and technologies through interactive exploration and AI-guided explanations."," "]})," ",L.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",L.jsx("li",{children:" System architecture learning"})," ",L.jsx("li",{children:" Technology stack exploration"})," ",L.jsx("li",{children:" Code concept mapping"})," "]})," "]})," ",L.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/10 dark:to-orange-800/10 p-8 rounded-2xl border border-orange-200 dark:border-orange-700/30",children:[" ",L.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Professional Development"," "]})," ",L.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Build skills, understand industry trends, and create learning paths for career advancement with AI-powered insights."," "]})," ",L.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",L.jsx("li",{children:" Skill gap analysis"})," ",L.jsx("li",{children:" Career pathway planning"})," ",L.jsx("li",{children:" Industry trend mapping"})," "]})," "]})," "]})," "]})," "]})," "," ",L.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",L.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[" ",L.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-6",children:[" ","Ready to Transform Your Learning?"," "]})," ",L.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10",children:[" ","Join thousands of learners who are already exploring concepts in revolutionary ways with TinkFlow's AI-powered platform."," "]})," ",L.jsxs("button",{onClick:t,className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-12 py-4 rounded-xl text-lg font-semibold hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning for Free"," "]})," ",L.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:[" ","No credit card required  Get started in seconds"," "]})," "]})," "]})," "," ",L.jsxs("footer",{className:"bg-gray-900 text-white py-12",children:[" ",L.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",L.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[" ",L.jsxs("div",{className:"col-span-1",children:[" ",L.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[" ",L.jsxs("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",L.jsx("span",{className:"text-white font-bold text-sm",children:"T"})," "]})," ",L.jsx("span",{className:"text-xl font-bold",children:"TinkFlow"})," "]})," ",L.jsxs("p",{className:"text-gray-400 text-sm",children:[" ","AI-powered concept learning platform for curious minds."," "]})," "]})," ",L.jsxs("div",{children:[" ",L.jsx("h4",{className:"font-semibold mb-4",children:"Product"})," ",L.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",L.jsx("li",{children:L.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Features"})})," ",L.jsx("li",{children:L.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Pricing"})})," ",L.jsx("li",{children:L.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"API"})})," "]})," "]})," ",L.jsxs("div",{children:[" ",L.jsx("h4",{className:"font-semibold mb-4",children:"Resources"})," ",L.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",L.jsx("li",{children:L.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Documentation"})})," ",L.jsx("li",{children:L.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Tutorials"})})," ",L.jsx("li",{children:L.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Blog"})})," "]})," "]})," ",L.jsxs("div",{children:[" ",L.jsx("h4",{className:"font-semibold mb-4",children:"Company"})," ",L.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",L.jsx("li",{children:L.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About"})})," ",L.jsx("li",{children:L.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})})," ",L.jsx("li",{children:L.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy"})})," "]})," "]})," "]})," ",L.jsxs("div",{className:"border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[" ",L.jsxs("p",{className:"text-gray-400 text-sm",children:[" "," 2025 TinkFlow. All rights reserved."," "]})," ",L.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[" ",L.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",L.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",L.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})," "]})," "]})," ",L.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",L.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",L.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})," "]})," "]})," ",L.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",L.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",L.jsx("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.747.099.12.112.225.085.344-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.001 12.017z"})," "]})," "]})," "]})," "]})," "]})," "]})," "]})}/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WG=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),QG=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),QA=t=>{const e=QG(t);return e.charAt(0).toUpperCase()+e.slice(1)},sI=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),ZG=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var JG={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eY=$.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:u,...c},f)=>$.createElement("svg",{ref:f,...JG,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:sI("lucide",s),...!o&&!ZG(c)&&{"aria-hidden":"true"},...c},[...u.map(([h,p])=>$.createElement(h,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=(t,e)=>{const n=$.forwardRef(({className:r,...s},o)=>$.createElement(eY,{ref:o,iconNode:e,className:sI(`lucide-${WG(QA(t))}`,`lucide-${t}`,r),...s}));return n.displayName=QA(t),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tY=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],nY=Lo("arrow-left",tY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rY=[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]],aI=Lo("gavel",rY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iY=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],sY=Lo("hash",iY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],oI=Lo("info",aY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oY=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],lI=Lo("lightbulb",oY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lY=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],uY=Lo("loader-circle",lY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cY=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],uI=Lo("sparkles",cY),ZA={default:{border:"border-gray-400",ring:"ring-gray-100 dark:ring-gray-500/30",placeholder:"Enter your text...",Icon:sY,color:"#6b7280"},explain:{border:"border-blue-400",ring:"ring-blue-100 dark:ring-blue-500/30",placeholder:"Explain this concept...",Icon:oI,color:"#3b82f6"},answer:{border:"border-emerald-400",ring:"ring-emerald-100 dark:ring-emerald-500/30",placeholder:"Answer this question...",Icon:lI,color:"#10b981"},argue:{border:"border-rose-400",ring:"ring-rose-100 dark:ring-rose-500/30",placeholder:"Argue this point...",Icon:aI,color:"#f43f5e"}};function dY({data:t}){const[e,n]=$.useState("default"),r=$.useRef(null),[s,o]=$.useState(t.label||""),u=["default","explain","answer","argue"];$.useEffect(()=>{const V=r.current;if(!V)return;const z=setTimeout(()=>{V.focus()},100),j=new IntersectionObserver(([F])=>{F.isIntersecting&&(V.focus(),j.disconnect())},{threshold:.1});return j.observe(V),()=>{clearTimeout(z),j.disconnect()}},[]);const c=V=>{V.preventDefault();const z=s.trim();z&&t.onNodeCallback?.(e,z)},f=V=>{if(V.key==="ArrowUp"||V.key==="ArrowDown"){V.preventDefault();const z=u.indexOf(e);let j;V.key==="ArrowUp"?j=z>0?z-1:u.length-1:j=z<u.length-1?z+1:0,n(u[j])}},h=ZA[e]||ZA.default,{border:p,ring:_,placeholder:b,color:A}=h,O=h.Icon;return L.jsxs("div",{className:`relative bg-white dark:bg-gray-900 shadow-lg rounded-xl px-4 py-3 min-w-[200px] border transition-all duration-300 ease-in-out ${p} ring-1 ${_}`,style:{borderColor:A,boxShadow:`0 0 0 1px ${A}20, 0 4px 6px -1px rgb(0 0 0 / 0.1)`},children:[L.jsxs("form",{onSubmit:c,className:"flex items-center gap-2",children:[L.jsx("div",{className:"transition-all duration-300 ease-in-out transform hover:scale-110",children:L.jsx(O,{size:18,className:"shrink-0 transition-colors duration-300 ease-in-out animate-pulse",style:{color:A}})}),L.jsx("input",{ref:r,value:s,onChange:V=>o(V.target.value),onKeyDown:f,placeholder:b,className:"flex-1 bg-transparent outline-none text-sm placeholder-gray-400 dark:placeholder-gray-500 caret-gray-900 dark:caret-gray-100 text-gray-900 dark:text-gray-100 transition-all duration-300",style:{caretColor:A}})]}),L.jsx("div",{className:"absolute -top-2 -right-2 px-2 py-1 text-xs font-semibold text-white rounded-full transition-all duration-300 ease-in-out",style:{backgroundColor:A},children:e}),L.jsx(kn,{type:"target",position:Ee.Top}),L.jsx(kn,{type:"source",position:Ee.Bottom})]})}const fY=async()=>{try{await Xj(Q_),console.log("User signed out successfully")}catch(t){throw console.error("Error signing out:",t),t}},hY=()=>{const[t,e]=$.useState(null);return $.useEffect(()=>{const r=Kj(Q_,s=>{e(s),s?console.log("User signed in:",s.uid):console.log("No user signed in")});return()=>r()},[]),{user:t,signOut:async()=>{try{await fY(),e(null)}catch(r){console.error("Error in sign out:",r)}}}},cI=t=>!!(t&&t.uid),id=[{id:"1",type:"staticEditable",data:{label:"The _artificial intelligence_ system processes _natural language_ effectively",title:"AI & Natural Language",suggestions:["Machine Learning","Neural Networks","Deep Learning"],tokenColors:{},previousNode:null},position:{x:250,y:25},draggable:!1}],nu=[],mY=async t=>{if(!cI({uid:t}))throw new Error(fr.AUTH_REQUIRED);try{const e=A_(ni,vr.BOARDS),n=Lz(e,zz("userId","==",t),jz("createdAt","desc")),r=await z_(n);if(r.empty){const o={id:`board_${Date.now()}`,userId:t,name:"Default Board",createdAt:bt.now(),isOpen:!0};return await j_(Eu(ni,vr.BOARDS,o.id),o),console.log("Created default board:",o),[o]}const s=r.docs.map(o=>({id:o.id,...o.data()}));return console.log("Fetched all boards:",s),s}catch(e){if(console.error("Fetch all boards error:",e),e.code==="failed-precondition"||e.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:t,name:"Fallback Board (Create Index)",createdAt:bt.now(),isOpen:!0,isFallback:!0}]}throw new Error(fr.LOAD_FAILED)}},JA=async t=>{if(!t)return console.warn("No board ID provided for fetching nodes"),id;try{const e=A_(ni,vr.BOARDS,t,vr.NODES),n=await z_(e);if(n.empty)return console.log("No nodes found for board, using initial nodes"),id;const r=n.docs.map(s=>{const o=s.data(),u={...o.data,tokenColors:o.data?.tokenColors||{},previousNode:o.data?.previousNode||null};return{id:s.id,type:o.type,position:o.position,data:u,draggable:o.draggable,style:o.style}});return console.log("Fetched nodes from board:",r),r}catch(e){return console.error("Fetch nodes error:",e),id}},e2=async t=>{if(!t)return console.warn("No board ID provided for fetching edges"),nu;try{const e=A_(ni,vr.BOARDS,t,vr.EDGES),n=await z_(e);if(n.empty)return console.log("No edges found for board, using initial edges"),nu;const r=n.docs.map(s=>({id:s.id,...s.data()}));return console.log("Fetched edges from board:",r),r}catch(e){return console.error("Fetch edges error:",e),nu}},pY=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving nodes:",{boardId:t,nodesCount:e?.length});return}try{const n=zR(ni);e.forEach(r=>{const s=Eu(ni,vr.BOARDS,t,vr.NODES,r.id),o={type:r.type,data:r.data,position:r.position,updatedAt:bt.now()};r.draggable!=null&&(o.draggable=r.draggable),r.style!=null&&(o.style=r.style),n.set(s,o)}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(fr.SAVE_FAILED)}},gY=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving edges:",{boardId:t,edgesCount:e?.length});return}try{const n=zR(ni);e.forEach(r=>{const s=Eu(ni,vr.BOARDS,t,vr.EDGES,r.id),o={source:r.source,target:r.target,updatedAt:bt.now()};r.sourceHandle!=null&&(o.sourceHandle=r.sourceHandle),r.targetHandle!=null&&(o.targetHandle=r.targetHandle),r.style!=null&&(o.style=r.style),r.markerEnd!=null&&(o.markerEnd=r.markerEnd),n.set(s,o)}),await n.commit(),console.log("Edges saved to board")}catch(n){throw console.error("Save edges error:",n),new Error(fr.SAVE_FAILED)}},yY=async(t,e,n)=>{if(!cI({uid:t}))throw new Error(fr.AUTH_REQUIRED);try{const r={id:`board_${Date.now()}`,userId:t,name:e||`Board ${n.length+1}`,createdAt:bt.now(),isOpen:!1};return console.log("Creating board:",r),await j_(Eu(ni,vr.BOARDS,r.id),r),console.log("Board created successfully:",r),r}catch(r){throw console.error("Error creating new board:",r),r.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):r.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},vY=async t=>{if(!t)throw new Error("Board ID is required for deletion");try{await qz(Eu(ni,vr.BOARDS,t)),console.log("Board deleted successfully")}catch(e){throw console.error("Error deleting board:",e),e.code==="permission-denied"?new Error("Permission denied. Cannot delete this board."):e}},Ml=async(t,e)=>{if(!t||!e)throw new Error("Board ID and updates are required");try{const n={...e,updatedAt:bt.now()};await j_(Eu(ni,vr.BOARDS,t),n,{merge:!0}),console.log("Board status updated:",n)}catch(n){throw console.error("Error updating board status:",n),n}},_Y=t=>{if(!t||!t.data)return t;const e={...t},n={...t.data};return n.title||(n.title=n.label||n.summary||"Node"),n.suggestions||(n.suggestions=[]),e.draggable===void 0&&(e.draggable=!0),e.data=n,e},bY=t=>Array.isArray(t)?t.map(_Y):[],wY=(t,e={})=>{const[n,r,s]=x5([]),[o,u,c]=A5([]),[f,h]=$.useState(!0),[p,_]=$.useState(!1),[b,A]=$.useState(!1),[O,V]=$.useState([]),[z,j]=$.useState(null),F=$.useRef(null),{showSuccess:K,showError:y,showInfo:E}=e,w=M=>{const P=M.find(G=>G.isOpen===!0);if(P)return P;if(M.length>0){const G={...M[0],isOpen:!0};return Ml(G.id,G).catch(console.error),G}return null};$.useEffect(()=>{(async()=>{if(t)try{h(!0);const P=await mY(t.uid);V(P);const G=P.some(W=>W.isFallback);G&&y&&y("Database index missing. Please create the required Firestore index. Check console for details.");const R=w(P);if(!R){console.error("No board found for user"),y&&y("No boards found. Creating a default board..."),r(id),u(nu);return}j(R);const[q,Q]=await Promise.all([JA(R.id),e2(R.id)]);r(q),u(Q),E&&!G&&E("Board loaded successfully!")}catch(P){console.error("Error loading initial data:",P),y&&y("Failed to load board data. Using default board."),r(id),u(nu)}finally{h(!1)}})()},[t,r,u]);const T=async(M,P,G)=>{F.current&&clearTimeout(F.current);const R=setTimeout(async()=>{try{A(!0);const q=[];P&&P.length>0&&q.push(pY(M,P)),G&&G.length>0&&q.push(gY(M,G)),q.length>0&&(await Promise.all(q),console.log("Auto-save completed successfully"))}catch(q){console.error("Auto-save failed:",q),y&&y("Failed to save changes automatically")}finally{A(!1),F.current=null}},1e3);F.current=R};$.useEffect(()=>(!f&&z&&!p&&!z.isFallback&&T(z.id,n,o),()=>{F.current&&clearTimeout(F.current)}),[n,o,f,z,p]);const x=async M=>{try{if(z?.id===M)return;if(z?.isFallback||O.find(G=>G.id===M)?.isFallback){y&&y("Cannot switch to fallback board. Please create the missing Firestore index first.");return}if(_(!0),z&&!z.isFallback){const G={...z,isOpen:!1};await Ml(z.id,G),V(R=>R.map(q=>q.id===z.id?G:q))}const P=O.find(G=>G.id===M);if(P){const G={...P,isOpen:!0};await Ml(M,G),j(G),V(W=>W.map(B=>B.id===M?G:B));const[R,q]=await Promise.all([JA(M),e2(M)]),Q=bY(R);r(Q),u(q),K&&K(`Switched to "${G.name}"`)}else console.error("Board not found:",M),y&&y("Board not found")}catch(P){console.error("Error switching board:",P),y&&y("Failed to switch board. Please try again.")}finally{_(!1)}};return{nodes:n,edges:o,allBoards:O,currentBoard:z,isLoading:f,isSwitchingBoard:p,isSaving:b,onNodesChange:s,onEdgesChange:c,setNodes:r,setEdges:u,switchToBoard:x,createNewBoard:async M=>{try{if(!t)return y&&y("You must be logged in to create a board"),null;E&&E("Creating new board...");const P=await yY(t.uid,M||null,O);if(P){if(z&&!z.isFallback){const R={...z,isOpen:!1};Ml(z.id,R).catch(console.error)}const G={...P,isOpen:!0};return V(R=>{const q=R.map(Q=>Q.id===z?.id?{...Q,isOpen:!1}:Q);return[G,...q]}),j(G),Ml(P.id,G).catch(console.error),r([{id:"1",type:"staticEditable",data:{label:M||"New Board"},position:{x:250,y:25},draggable:!1}]),u(nu),K&&K(`Board "${P.name}" created and opened!`),G}else return y&&y("Failed to create board. Please try again."),null}catch(P){return y&&y(`Failed to create board: ${P.message}`),null}},deleteBoard:async M=>{try{if(O.length<=1){y&&y("Cannot delete the last board!");return}if(!O.find(G=>G.id===M)){console.error("Board not found for deletion"),y&&y("Board not found");return}if(E&&E("Deleting board..."),z?.id===M){const G=O.find(R=>R.id!==M);G&&await x(G.id)}await vY(M),V(G=>G.filter(R=>R.id!==M)),K&&K("Board deleted successfully!")}catch(P){console.error("Error deleting board:",P),y&&y("Failed to delete board. Please try again.")}},updateBoardName:async M=>{if(z&&z.name!==M){const P={...z,name:M};j(P),V(G=>G.map(R=>R.id===z.id?P:R));try{await Ml(z.id,P),console.log("Board name updated successfully")}catch(G){console.error("Error updating board name:",G)}}},clearBoardState:()=>{F.current&&(clearTimeout(F.current),F.current=null),V([]),j(null),r([]),u([]),h(!0),_(!1),A(!1)}}},EY=()=>{const[t,e]=$.useState([]),n=h=>{e(p=>p.filter(_=>_.id!==h))},r=h=>{const p=Date.now().toString(),_={id:p,timestamp:new Date,...h};return e(b=>[...b,_]),h.autoRemove!==!1&&setTimeout(()=>{n(p)},h.duration||5e3),p};return{notifications:t,addNotification:r,removeNotification:n,clearAllNotifications:()=>{e([])},showSuccess:(h,p={})=>r({type:"success",message:h,...p}),showError:(h,p={})=>r({type:"error",message:h,duration:7e3,...p}),showInfo:(h,p={})=>r({type:"info",message:h,...p}),showWarning:(h,p={})=>r({type:"warning",message:h,duration:6e3,...p})}},dI=({size:t="medium",color:e="#4f86f7"})=>{const n={small:"w-4 h-4 border-2",medium:"w-8 h-8 border-3",large:"w-12 h-12 border-4"};return L.jsx("div",{className:"flex items-center justify-center",children:L.jsx("div",{className:`${n[t]} border-gray-200 dark:border-gray-700 border-t-indigo-500 dark:border-t-indigo-400 rounded-full animate-spin`,style:{borderTopColor:e}})})},p0={explain:{classes:"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100 dark:bg-blue-950 dark:text-blue-300 dark:border-blue-700",color:"#3b82f6",Icon:oI},answer:{classes:"bg-emerald-50 text-emerald-700 border-emerald-200 hover:bg-emerald-100 dark:bg-emerald-950 dark:text-emerald-300 dark:border-emerald-700",color:"#10b981",Icon:lI},argue:{classes:"bg-rose-50 text-rose-700 border-rose-200 hover:bg-rose-100 dark:bg-rose-950 dark:text-rose-300 dark:border-rose-700",color:"#fb7185",Icon:aI}};function TY({dragState:t,handleDragStart:e,handleOrigin:n,getParentCenter:r}){return L.jsxs(L.Fragment,{children:[L.jsx("div",{className:"absolute left-1/2 z-10 flex gap-2 select-none",style:{transform:"translateX(-50%) translateY(24px)"},children:["explain","answer","argue"].map(s=>{const{classes:o,Icon:u}=p0[s],c=t.isDragging&&t.mode===s;return L.jsxs("div",{draggable:!1,onPointerDown:f=>{f.stopPropagation(),f.preventDefault(),f.button===0&&e(s,f.nativeEvent)},className:`px-2 py-1 rounded-lg border text-sm font-medium flex items-center gap-1 shadow-sm cursor-grab transition-opacity duration-150 ${o} ${c?"opacity-0":"opacity-100"}`,style:{position:"relative",zIndex:11},children:[L.jsx(u,{size:16,strokeWidth:2}),s.charAt(0).toUpperCase()+s.slice(1),L.jsx(kn,{type:"source",position:Ee.Bottom,id:s})]},s)})}),t.isDragging&&typeof window<"u"&&N2.createPortal(L.jsxs(L.Fragment,{children:[L.jsx("svg",{className:"fixed inset-0 pointer-events-none z-[9998]",width:"100vw",height:"100vh",children:L.jsx("line",{x1:n?n.x:r().x,y1:n?n.y:r().y,x2:t.x,y2:t.y,stroke:p0[t.mode??"explain"].color,strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round"})}),L.jsx("div",{className:"fixed pointer-events-none z-[9999] -translate-x-1/2 -translate-y-1/2",style:{left:t.x,top:t.y},children:L.jsx("div",{className:"px-4 py-1 rounded-lg shadow-lg font-semibold text-white backdrop-blur-sm",style:{background:p0[t.mode??"explain"].color},children:t.mode&&t.mode.charAt(0).toUpperCase()+t.mode.slice(1)})})]}),document.body)]})}function t2(t){if(!t)return"#ffffff";const e=(t??"000000").replace(/^#/,""),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16),[o,u,c]=[n,r,s].map(h=>{const p=h/255;return p<=.03928?p/12.92:Math.pow((p+.055)/1.055,2.4)});return .2126*o+.7152*u+.0722*c>.179?"#000000":"#ffffff"}function SY({data:t,id:e}){const[n,r]=$.useState(t.summary||t.label||"Static Node"),{screenToFlowPosition:s}=Od(),{handleTokenClick:o}=xk(),u=$.useRef(null),[c,f]=$.useState({mode:void 0,x:0,y:0,isDragging:!1}),h=$.useRef(c);$.useEffect(()=>{h.current=c},[c]);const[p,_]=$.useState(null);$.useEffect(()=>{r(t.summary||t.label||"Static Node")},[t.summary,t.label]);const A=G3(n),O=(w,T)=>{T.stopPropagation(),o(w,e,{x:0,y:0},"staticEditable",t.myColor,t.label||t.title||"Static Node",w.suggestionId)},V=(w,T)=>{const C=T.target.getBoundingClientRect();_({x:C.left+C.width/2,y:C.top+C.height/2}),f({mode:w,x:T.clientX,y:T.clientY,isDragging:!0}),document.addEventListener("pointermove",z),document.addEventListener("pointerup",j)},z=w=>{f(T=>T.isDragging?{...T,x:w.clientX,y:w.clientY}:T)},j=()=>{const w=h.current;if(console.log("handleDragEnd",w),w.isDragging&&t.onNodeCallback){const T=s({x:w.x,y:w.y});console.log("Calling onNodeCallback",w.mode,T),t.onNodeCallback(w.mode||void 0,e,T)}f({mode:"explain",x:0,y:0,isDragging:!1}),_(null),document.removeEventListener("pointermove",z),document.removeEventListener("pointerup",j)},F=()=>{if(!u.current)return{x:0,y:0};const w=u.current.getBoundingClientRect();return{x:w.left+w.width/2,y:w.top+w.height/2}},K=$.useMemo(()=>{const w=t.tokenColors||{};return A.map((T,x)=>{const C=T.myConcept||T.word,k=w[C],N=!k;return L.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-lg font-medium transition-all duration-200 ease-out
                        ${N?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}
                        ${T.myConcept?"bg-blue-500/10 border border-blue-500/30":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:k||"transparent",color:k?t2(k):"#f8faff",border:k?`1px solid ${eS(k,20)}`:""},onClick:U=>N?O(T,U):U.stopPropagation(),children:[T.word,x<A.length-1?" ":""]},x)})},[A,t.tokenColors]),y=$.useMemo(()=>{const w=t.tokenColors||{};return!t.suggestions||t.suggestions.length===0?L.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"}):t.suggestions.map((T,x)=>{const C=w[T],k=!C;return L.jsx("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                        bg-white/5 border border-white/10 transition-all duration-200 
                        ${k?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:C||"transparent",color:C?t2(C):"#f8faff",border:C?`1px solid ${eS(C,20)}`:""},onClick:N=>k?O({word:T,myConcept:T,suggestionId:(t.label||"")+T+x},N):N.stopPropagation(),children:T},x)})},[t.suggestions,t.tokenColors]),E=$.useMemo(()=>t.isLoading?L.jsxs("div",{className:"flex items-center justify-center gap-2 py-8",children:[L.jsx(dI,{size:"small",color:"#6366f1"}),L.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}):L.jsxs("div",{className:"flex flex-col gap-3",children:[L.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[L.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),L.jsx("div",{className:"flex gap-2",children:L.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                transition-all duration-150 flex items-center justify-center text-sm`,title:"Show full text",children:""})})]}),L.jsx("div",{className:"flex-1",children:L.jsx("div",{className:"cursor-text leading-relaxed break-words text-lg font-medium",children:K})}),L.jsxs("div",{className:"mt-2",children:[L.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),L.jsx("div",{className:"flex flex-wrap gap-1",children:y})]})]}),[t.isLoading,t.title,K,y]);return L.jsxs("div",{ref:u,className:`bg-black border border-white/[0.1] rounded-[20px] p-7 min-w-[320px] max-w-[500px] 
                transition-all duration-150 ease-in-out cursor-pointer select-none overflow-hidden
                opacity-[0.98] border-b-[3px] border-b-white/[0.06]
                hover:opacity-100 hover:bg-[#28282c] hover:border-white/[0.2]`,style:{backgroundColor:"#000000",color:"#f8faff",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[L.jsx("div",{className:"relative pointer-events-auto text-[#f8faff] text-[18px] leading-[1.7] font-semibold",children:E}),L.jsx(kn,{type:"source",position:Ee.Bottom,id:"bottom-source"}),L.jsx(kn,{type:"target",position:Ee.Bottom,id:"bottom-target"}),L.jsx(TY,{dragState:c,handleDragStart:V,handleOrigin:p,getParentCenter:F})]})}function xY({suggestions:t,dragState:e,handleDragStart:n,handleOrigin:r,getParentCenter:s}){if(!t||t.length===0)return null;const u=t.slice(0,6),c=(f,h)=>{if(h===1)return{position:Ee.Right,style:{top:"50%"}};const p=f<Math.ceil(h/2)?Ee.Right:Ee.Left,_=p===Ee.Right?f:f-Math.ceil(h/2),b=p===Ee.Right?Math.ceil(h/2):Math.floor(h/2),A=b===1?50:_/(b-1)*60+20;return{position:p,style:{top:`${A}%`}}};return L.jsxs(L.Fragment,{children:[u.map((f,h)=>{const{position:p,style:_}=c(h,u.length),b=e.isDragging&&e.suggestion===f;return L.jsx("div",{draggable:!1,onPointerDown:A=>{A.stopPropagation(),A.preventDefault(),A.button===0&&n(f,A.nativeEvent)},className:`absolute z-10 select-none transition-opacity duration-150 ${b?"opacity-0":"opacity-100"}`,style:{..._,[p===Ee.Right?"right":"left"]:"-12px",transform:"translateY(-50%)"},children:L.jsxs("div",{draggable:!1,onPointerDown:A=>{A.stopPropagation(),A.preventDefault(),A.button===0&&n(f,A.nativeEvent)},className:`group relative bg-blue-50 hover:bg-blue-100 border-2 border-blue-200 hover:border-blue-300 
                                     dark:bg-blue-950 dark:hover:bg-blue-900 dark:border-blue-700 dark:hover:border-blue-600
                                     rounded-full p-2 cursor-grab active:cursor-grabbing shadow-sm hover:shadow-md
                                     transition-all duration-200 ease-out hover:scale-110 active:scale-95`,title:f,children:[L.jsx(uI,{size:14,className:"text-blue-600 dark:text-blue-400"}),L.jsxs("div",{className:`absolute z-20 px-2 py-1 text-xs font-medium text-white bg-gray-900 
                                          rounded-md shadow-lg opacity-0 group-hover:opacity-100 pointer-events-none
                                          transition-opacity duration-200 ease-out whitespace-nowrap`,style:{[p===Ee.Right?"left":"right"]:"calc(100% + 8px)",top:"50%",transform:"translateY(-50%)"},children:[f,L.jsx("div",{className:`absolute w-0 h-0 top-1/2 transform -translate-y-1/2
                                               border-t-[4px] border-b-[4px] border-t-transparent border-b-transparent
                                               ${p===Ee.Right?"border-r-[4px] border-r-gray-900 -left-1":"border-l-[4px] border-l-gray-900 -right-1"}`})]}),L.jsx(kn,{type:"source",position:p,id:`${f}`,className:"opacity-0"})]})},`${f}-${h}`)}),e.isDragging&&typeof window<"u"&&N2.createPortal(L.jsxs(L.Fragment,{children:[L.jsx("svg",{className:"fixed inset-0 pointer-events-none z-[9998]",width:"100vw",height:"100vh",children:L.jsx("line",{x1:r?r.x:s().x,y1:r?r.y:s().y,x2:e.x,y2:e.y,stroke:"blue",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round"})}),L.jsx("div",{className:"fixed pointer-events-none z-[9999] -translate-x-1/2 -translate-y-1/2",style:{left:e.x,top:e.y},children:L.jsx("div",{className:"px-4 py-1 rounded-lg shadow-lg font-semibold text-white backdrop-blur-sm",style:{background:"blue"},children:e.suggestion})})]}),document.body)]})}function AY(){return L.jsxs(L.Fragment,{children:[L.jsx(kn,{style:{transform:"translateY(-100%)"},type:"source",position:Ee.Bottom,id:"bottom-source"}),L.jsx(kn,{style:{transform:"translateY(100%)"},type:"target",position:Ee.Top,id:"top-target"}),L.jsx(kn,{style:{transform:"translateY(100%)"},type:"source",position:Ee.Left,id:"left-source"}),L.jsx(kn,{style:{transform:"translateY(100%)"},type:"target",position:Ee.Left,id:"left-target"}),L.jsx(kn,{style:{transform:"translateY(100%)"},type:"source",position:Ee.Right,id:"right-source"}),L.jsx(kn,{style:{transform:"translateY(100%)"},type:"target",position:Ee.Right,id:"right-target"})]})}function CY({data:t,id:e}){const[n,r]=$.useState(t.summary||t.label||"Draggable Node");$.useEffect(()=>{t.layout||(t.layout=1)},[t.layout]);const{getNode:s,setViewport:o,screenToFlowPosition:u}=Od(),{handleTokenClick:c}=xk(),[f,h]=$.useState(!1),p=$.useRef(null),[_,b]=$.useState({suggestion:"",x:0,y:0,isDragging:!1}),A=$.useRef(_);$.useEffect(()=>{A.current=_},[_]);const[O,V]=$.useState(null);$.useEffect(()=>{A.current=_},[_]);function z(){h(!0)}function j(){h(!1)}$.useEffect(()=>{r(t.summary||t.label||"Draggable Node")},[t.summary,t.label]);const F=G3(n),K=F,y=()=>!0,E=(U,M)=>{if(M.stopPropagation(),p.current){const P=p.current.getBoundingClientRect(),G=u({x:P.left,y:P.top});c(U,e,G,"draggableEditable",t.myColor,t.label||t.title||"")}},w=$.useMemo(()=>t.contents&&t.contents.length>0?t.contents[0].trim()?L.jsx("div",{className:"node-rich-content w-full",dangerouslySetInnerHTML:{__html:t.contents[0]}}):L.jsx("div",{className:"text-center py-8 text-gray-500",children:L.jsx("p",{children:"No content available"})}):t.isLoading?L.jsxs("div",{className:"flex items-center justify-center gap-3 py-6",children:[L.jsx(dI,{}),L.jsx("span",{className:"text-slate-400 text-sm",children:"Generating content..."})]}):L.jsx("div",{className:"space-y-4",children:L.jsx("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-4 border border-white/80",children:L.jsx("div",{className:"flex flex-wrap gap-2",children:K.map((U,M)=>{const G=(t.tokenColors||{})[U.myConcept||U.word],R=!G;return L.jsx("span",{onClick:q=>R?E(U,q):q.stopPropagation(),style:{backgroundColor:G||void 0,borderColor:G||"transparent"},className:["inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium","transition-all duration-200 ease-out",G?"text-white shadow-sm":"bg-white/80 backdrop-blur-sm text-gray-700 border border-white/90",R?"cursor-pointer hover:scale-105 active:scale-95":"cursor-default opacity-80"].join(" "),children:U.word},M)})})})}),[t.contents,t.isLoading,t.title,K,y,t.tokenColors,E,t.myColor,c,e,p,u,t.full_text]),T=U=>{if(U.stopPropagation(),t.previousNode){const M=s(t.previousNode);if(M){const{x:P,y:G}=M.position;o({x:-P+200,y:-G+100,zoom:1},{duration:500})}}},x=()=>{if(!p.current)return{x:0,y:0};const U=p.current.getBoundingClientRect();return{x:U.left+U.width/2,y:U.top+U.height/2}},C=(U,M)=>{const G=M.target.getBoundingClientRect();V({x:G.left+G.width/2,y:G.top+G.height/2}),b({suggestion:U,x:M.clientX,y:M.clientY,isDragging:!0}),document.addEventListener("pointermove",k),document.addEventListener("pointerup",N)},k=U=>{b(M=>M.isDragging?{...M,x:U.clientX,y:U.clientY}:M)},N=()=>{const U=A.current;if(U.isDragging&&t.onNodeCallback){const M=u({x:U.x,y:U.y});t.onNodeCallback(U.suggestion||void 0,e,M)}b({suggestion:"explain",x:0,y:0,isDragging:!1}),V(null),document.removeEventListener("pointermove",k),document.removeEventListener("pointerup",N)};return L.jsxs("div",{ref:p,className:`group relative bg-white/95 backdrop-blur-xl border border-gray-200/60 rounded-3xl
                       min-w-[320px] max-w-[640px] cursor-grab select-none
                       transition-all duration-300 ease-[cubic-bezier(0.4,0,0.2,1)]
                       hover:border-gray-300/80`,style:{background:t.myColor?`linear-gradient(135deg, ${t.myColor}f0, ${t.myColor}e0)`:"linear-gradient(135deg, #ffffff, #fafafa)",borderColor:t.myColor?`${t.myColor}60`:"rgba(229, 231, 235, 0.6)",transform:"translateZ(0)",willChange:"transform",backfaceVisibility:"hidden"},onMouseEnter:z,onMouseLeave:j,children:[L.jsxs("div",{className:"relative p-6 text-gray-900",children:[t.isLoading&&L.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 py-12",children:[L.jsxs("div",{className:"relative",children:[L.jsx(uY,{className:"w-8 h-8 text-blue-500 animate-spin"}),L.jsx("div",{className:"absolute inset-0 w-8 h-8 rounded-full bg-blue-500/20 animate-ping"})]}),L.jsx("span",{className:"text-gray-600 text-sm font-medium",children:"Generating content..."})]}),!t.isLoading&&L.jsxs("header",{className:"flex flex-col items-center gap-4 mb-6",children:[L.jsxs("div",{className:"flex items-center gap-3 group/header",children:[t.icon?L.jsx("div",{className:`w-12 h-12 flex items-center justify-center rounded-2xl bg-white/50 backdrop-blur-sm border border-white/80 
                                               transition-transform duration-200 ease-out group-hover/header:scale-105`,children:L.jsx("span",{className:"text-2xl",dangerouslySetInnerHTML:{__html:t.icon}})}):L.jsx("div",{className:`w-12 h-12 flex items-center justify-center rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 text-white 
                                               transition-transform duration-200 ease-out group-hover/header:scale-105`,children:L.jsx(uI,{className:"w-6 h-6"})}),L.jsx("h2",{className:`text-2xl font-bold tracking-tight text-gray-900 
                                          transition-colors duration-200 group-hover/header:text-gray-700`,children:t.title||t.label||"Node"})]}),f&&t.previousNode&&L.jsx("div",{className:"flex justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 ease-out",style:{animation:f?"slideInFromTop 0.3s ease-out forwards":void 0}})]}),!t.isLoading&&w,t.suggestions&&t.suggestions.length>0&&L.jsx(xY,{suggestions:t.suggestions,dragState:_,handleDragStart:C,handleOrigin:O,getParentCenter:x})]}),L.jsxs("button",{onClick:T,title:"Go to previous node",className:`flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/60 backdrop-blur-sm text-gray-700 
                                             border border-white/80 transition-all duration-200 ease-out
                                             hover:bg-white/80 hover:text-gray-900 hover:scale-105 
                                             active:scale-95`,children:[L.jsx(nY,{className:"w-4 h-4"}),L.jsx("span",{className:"text-sm font-medium",children:"Back"})]}),L.jsx(AY,{})]})}const RY={staticEditable:SY,draggableEditable:CY},kY={...RY,tempInput:dY};function IY(){const[t,e]=$.useState(!1),{user:n,signOut:r}=hY(),{notifications:s,removeNotification:o,showSuccess:u,showError:c,showInfo:f}=EY(),{nodes:h,edges:p,allBoards:_,currentBoard:b,isSwitchingBoard:A,isSaving:O,onNodesChange:V,onEdgesChange:z,setNodes:j,setEdges:F,switchToBoard:K,createNewBoard:y,deleteBoard:E,updateBoardName:w,clearBoardState:T}=wY(n,{showSuccess:u,showError:c,showInfo:f}),x=async()=>{await r(),T()},C=()=>{e(!0)},k=$.useCallback(P=>{const G={id:`e${P.source}-${P.target}`,source:P.source,target:P.target,sourceHandle:P.sourceHandle,targetHandle:P.targetHandle};z([{type:"add",item:G}])},[z]),N=$.useCallback((P,G,R,q,Q)=>{if(!R||!Q){console.warn("handleNodeCallback called without suggestion or position",R,Q);return}const W=`temp-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;j(te=>[...te,{id:W,type:"tempInput",position:{x:Q.x-80,y:Q.y-40},data:{label:R,parent:q}}]);const B={default:"#FFFFFF",explain:"#3b82f6",answer:"#10b981",argue:"#fb7185"},X=B[R in B?R:"default"];q&&z([{type:"add",item:{id:`e${q}-${W}`,source:q,target:W,sourceHandle:R,style:{stroke:X,strokeWidth:3},markerEnd:{type:To.ArrowClosed,color:X}}}])},[j]),U=$.useMemo(()=>h.map(P=>{let G={...P.data};return G.onNodeCallback=(R,q,Q)=>N(P.id,P.data,R,q,Q),P.type==="tempInput"&&(G.onNodeCallback=(R,q)=>{j(pe=>pe.map(we=>we.id===P.id?{...we,type:"draggableEditable",data:{...we.data,label:R}}:we));const Q=h.find(pe=>pe.id===P.data.parent),W=Q?.data?.color,B=Q?.data?.label,X={word:R},te=P.data.parent,J={x:P.position.x,y:P.position.y},fe=Sk(X,te,J,"draggableEditable",h,j,V,z,W,B,void 0,!0,P,P.data.mode);if(j(pe=>pe.map(we=>we.id===P.id?{...we,data:{...we.data,myColor:fe}}:we)),P.data.parent){if(!fe)return;F(pe=>pe.map(we=>we.id===`e${P.data.parent}-${P.id}`?{...we,style:{...we.style||{},stroke:fe,strokeWidth:3},markerEnd:{type:To.ArrowClosed,color:fe}}:we))}}),{...P,data:G}}),[h,N,j]),M=$.useMemo(()=>L.jsxs(E3,{nodes:U,edges:p,onNodesChange:V,onEdgesChange:z,onConnect:k,nodeTypes:kY,connectionMode:ga.Loose,fitView:!0,className:"bg-gray-50 dark:bg-gray-900 w-full h-full",children:[L.jsx(M5,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg"}),L.jsx(j5,{variant:jr.Cross,gap:30,size:10,lineWidth:.5,color:"#94a3b8",className:"bg-gray-50 dark:bg-gray-900"})]}),[U,p,V,z,k]);return n?L.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 relative",style:{height:"100vh",width:"100vw",overflow:"hidden"},children:[L.jsx(KG,{notifications:s,onRemove:o}),L.jsx("div",{style:{height:"100%",position:"relative"},children:L.jsxs($3,{direction:"horizontal",children:[L.jsx(D0,{defaultSize:15,minSize:10,maxSize:30,children:L.jsx("div",{className:"bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700",children:L.jsx(FG,{allBoards:_,currentBoard:b,onSwitchBoard:K,onCreateBoard:async P=>{await y(P)},onDeleteBoard:E,onSignOut:x,isLoading:A})})}),L.jsx(q3,{}),L.jsx(D0,{children:L.jsxs("div",{className:"bg-white dark:bg-gray-800",style:{height:"100%",position:"relative"},children:[L.jsx(GG,{name:b?.name||"Loading...",onSetName:w,user:n,isSaving:O}),L.jsx("div",{className:"bg-gray-50 dark:bg-gray-900",style:{height:"calc(100% - 60px)",width:"100%"},children:L.jsx(YB,{nodes:h,onNodesChange:V,onEdgesChange:z,setNodes:j,children:M})})]})})]})})]}):t?L.jsx(BG,{}):L.jsx(XG,{onLogin:C})}function NY(){return L.jsx(qG,{children:L.jsx(IY,{})})}const fI=document.getElementById("root");if(!fI)throw new Error("Failed to find the root element");YN.createRoot(fI).render(L.jsx($.StrictMode,{children:L.jsx(NY,{})}));export{Md as C,Wn as R,Y3 as _,mT as a,cM as b,Dv as c,ld as d,Nv as e,v2 as f,Rv as g,DY as h,Zs as i,w2 as n,rM as r,Wr as s};
