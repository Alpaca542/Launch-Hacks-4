function tC(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function ax(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ep={exports:{}},Bu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oE;function nC(){if(oE)return Bu;oE=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:t,type:i,key:u,ref:a!==void 0?a:null,props:l}}return Bu.Fragment=e,Bu.jsx=n,Bu.jsxs=n,Bu}var lE;function rC(){return lE||(lE=1,ep.exports=nC()),ep.exports}var A=rC(),tp={exports:{}},Ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uE;function iC(){if(uE)return Ue;uE=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function b(z){return z===null||typeof z!="object"?null:(z=v&&z[v]||z["@@iterator"],typeof z=="function"?z:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,M={};function k(z,W,re){this.props=z,this.context=W,this.refs=M,this.updater=re||x}k.prototype.isReactComponent={},k.prototype.setState=function(z,W){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,W,"setState")},k.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function L(){}L.prototype=k.prototype;function H(z,W,re){this.props=z,this.context=W,this.refs=M,this.updater=re||x}var F=H.prototype=new L;F.constructor=H,C(F,k.prototype),F.isPureReactComponent=!0;var j=Array.isArray,Q={H:null,A:null,T:null,S:null,V:null},K=Object.prototype.hasOwnProperty;function S(z,W,re,X,se,fe){return re=fe.ref,{$$typeof:t,type:z,key:W,ref:re!==void 0?re:null,props:fe}}function T(z,W){return S(z.type,W,void 0,void 0,void 0,z.props)}function N(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function V(z){var W={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(re){return W[re]})}var U=/\/+/g;function B(z,W){return typeof z=="object"&&z!==null&&z.key!=null?V(""+z.key):W.toString(36)}function R(){}function D(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(R,R):(z.status="pending",z.then(function(W){z.status==="pending"&&(z.status="fulfilled",z.value=W)},function(W){z.status==="pending"&&(z.status="rejected",z.reason=W)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function G(z,W,re,X,se){var fe=typeof z;(fe==="undefined"||fe==="boolean")&&(z=null);var ce=!1;if(z===null)ce=!0;else switch(fe){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(z.$$typeof){case t:case e:ce=!0;break;case y:return ce=z._init,G(ce(z._payload),W,re,X,se)}}if(ce)return se=se(z),ce=X===""?"."+B(z,0):X,j(se)?(re="",ce!=null&&(re=ce.replace(U,"$&/")+"/"),G(se,W,re,"",function(Ae){return Ae})):se!=null&&(N(se)&&(se=T(se,re+(se.key==null||z&&z.key===se.key?"":(""+se.key).replace(U,"$&/")+"/")+ce)),W.push(se)),1;ce=0;var ve=X===""?".":X+":";if(j(z))for(var _e=0;_e<z.length;_e++)X=z[_e],fe=ve+B(X,_e),ce+=G(X,W,re,fe,se);else if(_e=b(z),typeof _e=="function")for(z=_e.call(z),_e=0;!(X=z.next()).done;)X=X.value,fe=ve+B(X,_e++),ce+=G(X,W,re,fe,se);else if(fe==="object"){if(typeof z.then=="function")return G(D(z),W,re,X,se);throw W=String(z),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return ce}function O(z,W,re){if(z==null)return z;var X=[],se=0;return G(z,X,"","",function(fe){return W.call(re,fe,se++)}),X}function Y(z){if(z._status===-1){var W=z._result;W=W(),W.then(function(re){(z._status===0||z._status===-1)&&(z._status=1,z._result=re)},function(re){(z._status===0||z._status===-1)&&(z._status=2,z._result=re)}),z._status===-1&&(z._status=0,z._result=W)}if(z._status===1)return z._result.default;throw z._result}var ne=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function J(){}return Ue.Children={map:O,forEach:function(z,W,re){O(z,function(){W.apply(this,arguments)},re)},count:function(z){var W=0;return O(z,function(){W++}),W},toArray:function(z){return O(z,function(W){return W})||[]},only:function(z){if(!N(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Ue.Component=k,Ue.Fragment=n,Ue.Profiler=a,Ue.PureComponent=H,Ue.StrictMode=i,Ue.Suspense=f,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(z){return Q.H.useMemoCache(z)}},Ue.cache=function(z){return function(){return z.apply(null,arguments)}},Ue.cloneElement=function(z,W,re){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var X=C({},z.props),se=z.key,fe=void 0;if(W!=null)for(ce in W.ref!==void 0&&(fe=void 0),W.key!==void 0&&(se=""+W.key),W)!K.call(W,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&W.ref===void 0||(X[ce]=W[ce]);var ce=arguments.length-2;if(ce===1)X.children=re;else if(1<ce){for(var ve=Array(ce),_e=0;_e<ce;_e++)ve[_e]=arguments[_e+2];X.children=ve}return S(z.type,se,void 0,void 0,fe,X)},Ue.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:l,_context:z},z},Ue.createElement=function(z,W,re){var X,se={},fe=null;if(W!=null)for(X in W.key!==void 0&&(fe=""+W.key),W)K.call(W,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(se[X]=W[X]);var ce=arguments.length-2;if(ce===1)se.children=re;else if(1<ce){for(var ve=Array(ce),_e=0;_e<ce;_e++)ve[_e]=arguments[_e+2];se.children=ve}if(z&&z.defaultProps)for(X in ce=z.defaultProps,ce)se[X]===void 0&&(se[X]=ce[X]);return S(z,fe,void 0,void 0,null,se)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(z){return{$$typeof:d,render:z}},Ue.isValidElement=N,Ue.lazy=function(z){return{$$typeof:y,_payload:{_status:-1,_result:z},_init:Y}},Ue.memo=function(z,W){return{$$typeof:m,type:z,compare:W===void 0?null:W}},Ue.startTransition=function(z){var W=Q.T,re={};Q.T=re;try{var X=z(),se=Q.S;se!==null&&se(re,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(J,ne)}catch(fe){ne(fe)}finally{Q.T=W}},Ue.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},Ue.use=function(z){return Q.H.use(z)},Ue.useActionState=function(z,W,re){return Q.H.useActionState(z,W,re)},Ue.useCallback=function(z,W){return Q.H.useCallback(z,W)},Ue.useContext=function(z){return Q.H.useContext(z)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(z,W){return Q.H.useDeferredValue(z,W)},Ue.useEffect=function(z,W,re){var X=Q.H;if(typeof re=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return X.useEffect(z,W)},Ue.useId=function(){return Q.H.useId()},Ue.useImperativeHandle=function(z,W,re){return Q.H.useImperativeHandle(z,W,re)},Ue.useInsertionEffect=function(z,W){return Q.H.useInsertionEffect(z,W)},Ue.useLayoutEffect=function(z,W){return Q.H.useLayoutEffect(z,W)},Ue.useMemo=function(z,W){return Q.H.useMemo(z,W)},Ue.useOptimistic=function(z,W){return Q.H.useOptimistic(z,W)},Ue.useReducer=function(z,W,re){return Q.H.useReducer(z,W,re)},Ue.useRef=function(z){return Q.H.useRef(z)},Ue.useState=function(z){return Q.H.useState(z)},Ue.useSyncExternalStore=function(z,W,re){return Q.H.useSyncExternalStore(z,W,re)},Ue.useTransition=function(){return Q.H.useTransition()},Ue.version="19.1.0",Ue}var cE;function Ic(){return cE||(cE=1,tp.exports=iC()),tp.exports}var q=Ic();const he=ax(q),sC=tC({__proto__:null,default:he},[q]);var np={exports:{}},ju={},rp={exports:{}},ip={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dE;function aC(){return dE||(dE=1,function(t){function e(O,Y){var ne=O.length;O.push(Y);e:for(;0<ne;){var J=ne-1>>>1,z=O[J];if(0<a(z,Y))O[J]=Y,O[ne]=z,ne=J;else break e}}function n(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var Y=O[0],ne=O.pop();if(ne!==Y){O[0]=ne;e:for(var J=0,z=O.length,W=z>>>1;J<W;){var re=2*(J+1)-1,X=O[re],se=re+1,fe=O[se];if(0>a(X,ne))se<z&&0>a(fe,X)?(O[J]=fe,O[se]=ne,J=se):(O[J]=X,O[re]=ne,J=re);else if(se<z&&0>a(fe,ne))O[J]=fe,O[se]=ne,J=se;else break e}}return Y}function a(O,Y){var ne=O.sortIndex-Y.sortIndex;return ne!==0?ne:O.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var f=[],m=[],y=1,v=null,b=3,x=!1,C=!1,M=!1,k=!1,L=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function j(O){for(var Y=n(m);Y!==null;){if(Y.callback===null)i(m);else if(Y.startTime<=O)i(m),Y.sortIndex=Y.expirationTime,e(f,Y);else break;Y=n(m)}}function Q(O){if(M=!1,j(O),!C)if(n(f)!==null)C=!0,K||(K=!0,B());else{var Y=n(m);Y!==null&&G(Q,Y.startTime-O)}}var K=!1,S=-1,T=5,N=-1;function V(){return k?!0:!(t.unstable_now()-N<T)}function U(){if(k=!1,K){var O=t.unstable_now();N=O;var Y=!0;try{e:{C=!1,M&&(M=!1,H(S),S=-1),x=!0;var ne=b;try{t:{for(j(O),v=n(f);v!==null&&!(v.expirationTime>O&&V());){var J=v.callback;if(typeof J=="function"){v.callback=null,b=v.priorityLevel;var z=J(v.expirationTime<=O);if(O=t.unstable_now(),typeof z=="function"){v.callback=z,j(O),Y=!0;break t}v===n(f)&&i(f),j(O)}else i(f);v=n(f)}if(v!==null)Y=!0;else{var W=n(m);W!==null&&G(Q,W.startTime-O),Y=!1}}break e}finally{v=null,b=ne,x=!1}Y=void 0}}finally{Y?B():K=!1}}}var B;if(typeof F=="function")B=function(){F(U)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,D=R.port2;R.port1.onmessage=U,B=function(){D.postMessage(null)}}else B=function(){L(U,0)};function G(O,Y){S=L(function(){O(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(O){switch(b){case 1:case 2:case 3:var Y=3;break;default:Y=b}var ne=b;b=Y;try{return O()}finally{b=ne}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(O,Y){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var ne=b;b=O;try{return Y()}finally{b=ne}},t.unstable_scheduleCallback=function(O,Y,ne){var J=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?J+ne:J):ne=J,O){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=ne+z,O={id:y++,callback:Y,priorityLevel:O,startTime:ne,expirationTime:z,sortIndex:-1},ne>J?(O.sortIndex=ne,e(m,O),n(f)===null&&O===n(m)&&(M?(H(S),S=-1):M=!0,G(Q,ne-J))):(O.sortIndex=z,e(f,O),C||x||(C=!0,K||(K=!0,B()))),O},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(O){var Y=b;return function(){var ne=b;b=Y;try{return O.apply(this,arguments)}finally{b=ne}}}}(ip)),ip}var hE;function oC(){return hE||(hE=1,rp.exports=aC()),rp.exports}var sp={exports:{}},bn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fE;function lC(){if(fE)return bn;fE=1;var t=Ic();function e(f){var m="https://react.dev/errors/"+f;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(f,m,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:f,containerInfo:m,implementation:y}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,m){if(f==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,bn.createPortal=function(f,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(f,m,null,y)},bn.flushSync=function(f){var m=u.T,y=i.p;try{if(u.T=null,i.p=2,f)return f()}finally{u.T=m,i.p=y,i.d.f()}},bn.preconnect=function(f,m){typeof f=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(f,m))},bn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},bn.preinit=function(f,m){if(typeof f=="string"&&m&&typeof m.as=="string"){var y=m.as,v=d(y,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,x=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?i.d.S(f,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:x}):y==="script"&&i.d.X(f,{crossOrigin:v,integrity:b,fetchPriority:x,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},bn.preinitModule=function(f,m){if(typeof f=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=d(m.as,m.crossOrigin);i.d.M(f,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(f)},bn.preload=function(f,m){if(typeof f=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,v=d(y,m.crossOrigin);i.d.L(f,y,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},bn.preloadModule=function(f,m){if(typeof f=="string")if(m){var y=d(m.as,m.crossOrigin);i.d.m(f,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(f)},bn.requestFormReset=function(f){i.d.r(f)},bn.unstable_batchedUpdates=function(f,m){return f(m)},bn.useFormState=function(f,m,y){return u.H.useFormState(f,m,y)},bn.useFormStatus=function(){return u.H.useHostTransitionStatus()},bn.version="19.1.0",bn}var gE;function ox(){if(gE)return sp.exports;gE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),sp.exports=lC(),sp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mE;function uC(){if(mE)return ju;mE=1;var t=oC(),e=Ic(),n=ox();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function u(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(l(r)!==r)throw Error(i(188))}function f(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,c=s;;){var g=o.return;if(g===null)break;var p=g.alternate;if(p===null){if(c=g.return,c!==null){o=c;continue}break}if(g.child===p.child){for(p=g.child;p;){if(p===o)return d(g),r;if(p===c)return d(g),s;p=p.sibling}throw Error(i(188))}if(o.return!==c.return)o=g,c=p;else{for(var w=!1,I=g.child;I;){if(I===o){w=!0,o=g,c=p;break}if(I===c){w=!0,c=g,o=p;break}I=I.sibling}if(!w){for(I=p.child;I;){if(I===o){w=!0,o=p,c=g;break}if(I===c){w=!0,c=p,o=g;break}I=I.sibling}if(!w)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function m(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=m(r),s!==null)return s;r=r.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),H=Symbol.for("react.consumer"),F=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function B(r){return r===null||typeof r!="object"?null:(r=U&&r[U]||r["@@iterator"],typeof r=="function"?r:null)}var R=Symbol.for("react.client.reference");function D(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===R?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case C:return"Fragment";case k:return"Profiler";case M:return"StrictMode";case Q:return"Suspense";case K:return"SuspenseList";case N:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case x:return"Portal";case F:return(r.displayName||"Context")+".Provider";case H:return(r._context.displayName||"Context")+".Consumer";case j:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case S:return s=r.displayName||null,s!==null?s:D(r.type)||"Memo";case T:s=r._payload,r=r._init;try{return D(r(s))}catch{}}return null}var G=Array.isArray,O=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},J=[],z=-1;function W(r){return{current:r}}function re(r){0>z||(r.current=J[z],J[z]=null,z--)}function X(r,s){z++,J[z]=r.current,r.current=s}var se=W(null),fe=W(null),ce=W(null),ve=W(null);function _e(r,s){switch(X(ce,s),X(fe,r),X(se,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?Pb(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=Pb(s),r=Vb(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}re(se),X(se,r)}function Ae(){re(se),re(fe),re(ce)}function Ce(r){r.memoizedState!==null&&X(ve,r);var s=se.current,o=Vb(s,r.type);s!==o&&(X(fe,r),X(se,o))}function et(r){fe.current===r&&(re(se),re(fe)),ve.current===r&&(re(ve),Pu._currentValue=ne)}var rt=Object.prototype.hasOwnProperty,ze=t.unstable_scheduleCallback,tt=t.unstable_cancelCallback,it=t.unstable_shouldYield,zt=t.unstable_requestPaint,Le=t.unstable_now,Ee=t.unstable_getCurrentPriorityLevel,At=t.unstable_ImmediatePriority,vn=t.unstable_UserBlockingPriority,Gt=t.unstable_NormalPriority,Fn=t.unstable_LowPriority,An=t.unstable_IdlePriority,Rn=t.log,Nr=t.unstable_setDisableYieldValue,at=null,Fe=null;function Lt(r){if(typeof Rn=="function"&&Nr(r),Fe&&typeof Fe.setStrictMode=="function")try{Fe.setStrictMode(at,r)}catch{}}var Et=Math.clz32?Math.clz32:Jt,Fr=Math.log,Ut=Math.LN2;function Jt(r){return r>>>=0,r===0?32:31-(Fr(r)/Ut|0)|0}var Cn=256,Nn=4194304;function en(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function un(r,s,o){var c=r.pendingLanes;if(c===0)return 0;var g=0,p=r.suspendedLanes,w=r.pingedLanes;r=r.warmLanes;var I=c&134217727;return I!==0?(c=I&~p,c!==0?g=en(c):(w&=I,w!==0?g=en(w):o||(o=I&~r,o!==0&&(g=en(o))))):(I=c&~p,I!==0?g=en(I):w!==0?g=en(w):o||(o=c&~r,o!==0&&(g=en(o)))),g===0?0:s!==0&&s!==g&&(s&p)===0&&(p=g&-g,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:g}function In(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function xi(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ti(){var r=Cn;return Cn<<=1,(Cn&4194048)===0&&(Cn=256),r}function Ir(){var r=Nn;return Nn<<=1,(Nn&62914560)===0&&(Nn=4194304),r}function Gn(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function cr(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Yn(r,s,o,c,g,p){var w=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var I=r.entanglements,$=r.expirationTimes,ae=r.hiddenUpdates;for(o=w&~o;0<o;){var de=31-Et(o),me=1<<de;I[de]=0,$[de]=-1;var oe=ae[de];if(oe!==null)for(ae[de]=null,de=0;de<oe.length;de++){var le=oe[de];le!==null&&(le.lane&=-536870913)}o&=~me}c!==0&&dr(r,c,0),p!==0&&g===0&&r.tag!==0&&(r.suspendedLanes|=p&~(w&~s))}function dr(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var c=31-Et(s);r.entangledLanes|=s,r.entanglements[c]=r.entanglements[c]|1073741824|o&4194090}function la(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var c=31-Et(o),g=1<<c;g&s|r[c]&s&&(r[c]|=s),o&=~g}}function Gr(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function ss(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Yr(){var r=Y.p;return r!==0?r:(r=window.event,r===void 0?32:tE(r.type))}function ao(r,s){var o=Y.p;try{return Y.p=r,s()}finally{Y.p=o}}var pt=Math.random().toString(36).slice(2),Mt="__reactFiber$"+pt,Rt="__reactProps$"+pt,Vn="__reactContainer$"+pt,ua="__reactEvents$"+pt,jl="__reactListeners$"+pt,Kr="__reactHandles$"+pt,oo="__reactResources$"+pt,Si="__reactMarker$"+pt;function Xr(r){delete r[Mt],delete r[Rt],delete r[ua],delete r[jl],delete r[Kr]}function hr(r){var s=r[Mt];if(s)return s;for(var o=r.parentNode;o;){if(s=o[Vn]||o[Mt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=Bb(r);r!==null;){if(o=r[Mt])return o;r=Bb(r)}return s}r=o,o=r.parentNode}return null}function fr(r){if(r=r[Mt]||r[Vn]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function gr(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function cn(r){var s=r[oo];return s||(s=r[oo]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function wt(r){r[Si]=!0}var ca=new Set,as={};function Kn(r,s){kr(r,s),kr(r+"Capture",s)}function kr(r,s){for(as[r]=s,r=0;r<s.length;r++)ca.add(s[r])}var da=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lo={},Ai={};function uo(r){return rt.call(Ai,r)?!0:rt.call(lo,r)?!1:da.test(r)?Ai[r]=!0:(lo[r]=!0,!1)}function Qr(r,s,o){if(uo(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function mr(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Yt(r,s,o,c){if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+c)}}var Wr,co;function Dr(r){if(Wr===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Wr=s&&s[1]||"",co=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wr+r+co}var os=!1;function Zr(r,s){if(!r||os)return"";os=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(le){var oe=le}Reflect.construct(r,[],me)}else{try{me.call()}catch(le){oe=le}r.call(me.prototype)}}else{try{throw Error()}catch(le){oe=le}(me=r())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(le){if(le&&oe&&typeof le.stack=="string")return[le.stack,oe.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),w=p[0],I=p[1];if(w&&I){var $=w.split(`
`),ae=I.split(`
`);for(g=c=0;c<$.length&&!$[c].includes("DetermineComponentFrameRoot");)c++;for(;g<ae.length&&!ae[g].includes("DetermineComponentFrameRoot");)g++;if(c===$.length||g===ae.length)for(c=$.length-1,g=ae.length-1;1<=c&&0<=g&&$[c]!==ae[g];)g--;for(;1<=c&&0<=g;c--,g--)if($[c]!==ae[g]){if(c!==1||g!==1)do if(c--,g--,0>g||$[c]!==ae[g]){var de=`
`+$[c].replace(" at new "," at ");return r.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",r.displayName)),de}while(1<=c&&0<=g);break}}}finally{os=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Dr(o):""}function Hl(r){switch(r.tag){case 26:case 27:case 5:return Dr(r.type);case 16:return Dr("Lazy");case 13:return Dr("Suspense");case 19:return Dr("SuspenseList");case 0:case 15:return Zr(r.type,!1);case 11:return Zr(r.type.render,!1);case 1:return Zr(r.type,!0);case 31:return Dr("Activity");default:return""}}function ho(r){try{var s="";do s+=Hl(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function kn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ql(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ig(r){var s=ql(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),c=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var g=o.get,p=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return g.call(this)},set:function(w){c=""+w,p.call(this,w)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function fo(r){r._valueTracker||(r._valueTracker=ig(r))}function $l(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return r&&(c=ql(r)?r.checked?"true":"false":r.value),r=c,r!==o?(s.setValue(r),!0):!1}function ha(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var sg=/[\n"\\]/g;function Bt(r){return r.replace(sg,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Xn(r,s,o,c,g,p,w,I){r.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.type=w:r.removeAttribute("type"),s!=null?w==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+kn(s)):r.value!==""+kn(s)&&(r.value=""+kn(s)):w!=="submit"&&w!=="reset"||r.removeAttribute("value"),s!=null?ls(r,w,kn(s)):o!=null?ls(r,w,kn(o)):c!=null&&r.removeAttribute("value"),g==null&&p!=null&&(r.defaultChecked=!!p),g!=null&&(r.checked=g&&typeof g!="function"&&typeof g!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?r.name=""+kn(I):r.removeAttribute("name")}function fa(r,s,o,c,g,p,w,I){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(r.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null))return;o=o!=null?""+kn(o):"",s=s!=null?""+kn(s):o,I||s===r.value||(r.value=s),r.defaultValue=s}c=c??g,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=I?r.checked:!!c,r.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.name=w)}function ls(r,s,o){s==="number"&&ha(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Ri(r,s,o,c){if(r=r.options,s){s={};for(var g=0;g<o.length;g++)s["$"+o[g]]=!0;for(o=0;o<r.length;o++)g=s.hasOwnProperty("$"+r[o].value),r[o].selected!==g&&(r[o].selected=g),g&&c&&(r[o].defaultSelected=!0)}else{for(o=""+kn(o),s=null,g=0;g<r.length;g++){if(r[g].value===o){r[g].selected=!0,c&&(r[g].defaultSelected=!0);return}s!==null||r[g].disabled||(s=r[g])}s!==null&&(s.selected=!0)}}function dt(r,s,o){if(s!=null&&(s=""+kn(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+kn(o):""}function ga(r,s,o,c){if(s==null){if(c!=null){if(o!=null)throw Error(i(92));if(G(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),s=o}o=kn(s),r.defaultValue=o,c=r.textContent,c===o&&c!==""&&c!==null&&(r.value=c)}function pr(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var ma=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yc(r,s,o){var c=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":c?r.setProperty(s,o):typeof o!="number"||o===0||ma.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function Fl(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var g in s)c=s[g],s.hasOwnProperty(g)&&o[g]!==c&&Yc(r,g,c)}else for(var p in s)s.hasOwnProperty(p)&&Yc(r,p,s[p])}function Gl(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ag=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),og=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function go(r){return og.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Ci=null;function yr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ni=null,Ii=null;function Yl(r){var s=fr(r);if(s&&(r=s.stateNode)){var o=r[Rt]||null;e:switch(r=s.stateNode,s.type){case"input":if(Xn(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Bt(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==r&&c.form===r.form){var g=c[Rt]||null;if(!g)throw Error(i(90));Xn(c,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<o.length;s++)c=o[s],c.form===r.form&&$l(c)}break e;case"textarea":dt(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Ri(r,!!o.multiple,s,!1)}}}var Jr=!1;function Kc(r,s,o){if(Jr)return r(s,o);Jr=!0;try{var c=r(s);return c}finally{if(Jr=!1,(Ni!==null||Ii!==null)&&(jd(),Ni&&(s=Ni,r=Ii,Ii=Ni=null,Yl(s),r)))for(s=0;s<r.length;s++)Yl(r[s])}}function pa(r,s){var o=r.stateNode;if(o===null)return null;var c=o[Rt]||null;if(c===null)return null;o=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vr=!1;if(Mr)try{var ya={};Object.defineProperty(ya,"passive",{get:function(){vr=!0}}),window.addEventListener("test",ya,ya),window.removeEventListener("test",ya,ya)}catch{vr=!1}var ei=null,us=null,ki=null;function Kl(){if(ki)return ki;var r,s=us,o=s.length,c,g="value"in ei?ei.value:ei.textContent,p=g.length;for(r=0;r<o&&s[r]===g[r];r++);var w=o-r;for(c=1;c<=w&&s[o-c]===g[p-c];c++);return ki=g.slice(r,1<c?1-c:void 0)}function ti(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function ni(){return!0}function Xl(){return!1}function tn(r){function s(o,c,g,p,w){this._reactName=o,this._targetInst=g,this.type=c,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var I in r)r.hasOwnProperty(I)&&(o=r[I],this[I]=o?o(p):p[I]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?ni:Xl,this.isPropagationStopped=Xl,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ni)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ni)},persist:function(){},isPersistent:ni}),s}var ot={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mo=tn(ot),va=y({},ot,{view:0,detail:0}),Xc=tn(va),po,yo,ri,_a=y({},va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wa,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ri&&(ri&&r.type==="mousemove"?(po=r.screenX-ri.screenX,yo=r.screenY-ri.screenY):yo=po=0,ri=r),po)},movementY:function(r){return"movementY"in r?r.movementY:yo}}),_r=tn(_a),Qc=y({},_a,{dataTransfer:0}),lg=tn(Qc),ba=y({},va,{relatedTarget:0}),vo=tn(ba),Ql=y({},ot,{animationName:0,elapsedTime:0,pseudoElement:0}),_o=tn(Ql),Wc=y({},ot,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),bo=tn(Wc),ug=y({},ot,{data:0}),Wl=tn(ug),Ea={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zl(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Jc[r])?!!s[r]:!1}function wa(){return Zl}var ed=y({},va,{key:function(r){if(r.key){var s=Ea[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=ti(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Zc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wa,charCode:function(r){return r.type==="keypress"?ti(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ti(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Eo=tn(ed),td=y({},_a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jl=tn(td),Di=y({},va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wa}),nd=tn(Di),rd=y({},ot,{propertyName:0,elapsedTime:0,pseudoElement:0}),id=tn(rd),sd=y({},_a,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),wo=tn(sd),Dn=y({},ot,{newState:0,oldState:0}),ad=tn(Dn),od=[9,13,27,32],ii=Mr&&"CompositionEvent"in window,h=null;Mr&&"documentMode"in document&&(h=document.documentMode);var _=Mr&&"TextEvent"in window&&!h,E=Mr&&(!ii||h&&8<h&&11>=h),P=" ",te=!1;function ue(r,s){switch(r){case"keyup":return od.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function be(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Qe=!1;function Kt(r,s){switch(r){case"compositionend":return be(s);case"keypress":return s.which!==32?null:(te=!0,P);case"textInput":return r=s.data,r===P&&te?null:r;default:return null}}function We(r,s){if(Qe)return r==="compositionend"||!ii&&ue(r,s)?(r=Kl(),ki=us=ei=null,Qe=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return E&&s.locale!=="ko"?null:s.data;default:return null}}var nn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xt(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!nn[r.type]:s==="textarea"}function Mi(r,s,o,c){Ni?Ii?Ii.push(c):Ii=[c]:Ni=c,s=Yd(s,"onChange"),0<s.length&&(o=new mo("onChange","change",null,o,c),r.push({event:o,listeners:s}))}var dn=null,si=null;function eu(r){Ib(r,0)}function ld(r){var s=gr(r);if($l(s))return r}function Wy(r,s){if(r==="change")return s}var Zy=!1;if(Mr){var cg;if(Mr){var dg="oninput"in document;if(!dg){var Jy=document.createElement("div");Jy.setAttribute("oninput","return;"),dg=typeof Jy.oninput=="function"}cg=dg}else cg=!1;Zy=cg&&(!document.documentMode||9<document.documentMode)}function ev(){dn&&(dn.detachEvent("onpropertychange",tv),si=dn=null)}function tv(r){if(r.propertyName==="value"&&ld(si)){var s=[];Mi(s,si,r,yr(r)),Kc(eu,s)}}function k2(r,s,o){r==="focusin"?(ev(),dn=s,si=o,dn.attachEvent("onpropertychange",tv)):r==="focusout"&&ev()}function D2(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ld(si)}function M2(r,s){if(r==="click")return ld(s)}function O2(r,s){if(r==="input"||r==="change")return ld(s)}function P2(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Qn=typeof Object.is=="function"?Object.is:P2;function tu(r,s){if(Qn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var g=o[c];if(!rt.call(s,g)||!Qn(r[g],s[g]))return!1}return!0}function nv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function rv(r,s){var o=nv(r);r=0;for(var c;o;){if(o.nodeType===3){if(c=r+o.textContent.length,r<=s&&c>=s)return{node:o,offset:s-r};r=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=nv(o)}}function iv(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?iv(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function sv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=ha(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=ha(r.document)}return s}function hg(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var V2=Mr&&"documentMode"in document&&11>=document.documentMode,xo=null,fg=null,nu=null,gg=!1;function av(r,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;gg||xo==null||xo!==ha(c)||(c=xo,"selectionStart"in c&&hg(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),nu&&tu(nu,c)||(nu=c,c=Yd(fg,"onSelect"),0<c.length&&(s=new mo("onSelect","select",null,s,o),r.push({event:s,listeners:c}),s.target=xo)))}function xa(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var To={animationend:xa("Animation","AnimationEnd"),animationiteration:xa("Animation","AnimationIteration"),animationstart:xa("Animation","AnimationStart"),transitionrun:xa("Transition","TransitionRun"),transitionstart:xa("Transition","TransitionStart"),transitioncancel:xa("Transition","TransitionCancel"),transitionend:xa("Transition","TransitionEnd")},mg={},ov={};Mr&&(ov=document.createElement("div").style,"AnimationEvent"in window||(delete To.animationend.animation,delete To.animationiteration.animation,delete To.animationstart.animation),"TransitionEvent"in window||delete To.transitionend.transition);function Ta(r){if(mg[r])return mg[r];if(!To[r])return r;var s=To[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in ov)return mg[r]=s[o];return r}var lv=Ta("animationend"),uv=Ta("animationiteration"),cv=Ta("animationstart"),z2=Ta("transitionrun"),L2=Ta("transitionstart"),U2=Ta("transitioncancel"),dv=Ta("transitionend"),hv=new Map,pg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pg.push("scrollEnd");function Or(r,s){hv.set(r,s),Kn(s,[r])}var fv=new WeakMap;function br(r,s){if(typeof r=="object"&&r!==null){var o=fv.get(r);return o!==void 0?o:(s={value:r,source:s,stack:ho(s)},fv.set(r,s),s)}return{value:r,source:s,stack:ho(s)}}var Er=[],So=0,yg=0;function ud(){for(var r=So,s=yg=So=0;s<r;){var o=Er[s];Er[s++]=null;var c=Er[s];Er[s++]=null;var g=Er[s];Er[s++]=null;var p=Er[s];if(Er[s++]=null,c!==null&&g!==null){var w=c.pending;w===null?g.next=g:(g.next=w.next,w.next=g),c.pending=g}p!==0&&gv(o,g,p)}}function cd(r,s,o,c){Er[So++]=r,Er[So++]=s,Er[So++]=o,Er[So++]=c,yg|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function vg(r,s,o,c){return cd(r,s,o,c),dd(r)}function Ao(r,s){return cd(r,null,null,s),dd(r)}function gv(r,s,o){r.lanes|=o;var c=r.alternate;c!==null&&(c.lanes|=o);for(var g=!1,p=r.return;p!==null;)p.childLanes|=o,c=p.alternate,c!==null&&(c.childLanes|=o),p.tag===22&&(r=p.stateNode,r===null||r._visibility&1||(g=!0)),r=p,p=p.return;return r.tag===3?(p=r.stateNode,g&&s!==null&&(g=31-Et(o),r=p.hiddenUpdates,c=r[g],c===null?r[g]=[s]:c.push(s),s.lane=o|536870912),p):null}function dd(r){if(50<Ru)throw Ru=0,Tm=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Ro={};function B2(r,s,o,c){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(r,s,o,c){return new B2(r,s,o,c)}function _g(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Oi(r,s){var o=r.alternate;return o===null?(o=Wn(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function mv(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function hd(r,s,o,c,g,p){var w=0;if(c=r,typeof r=="function")_g(r)&&(w=1);else if(typeof r=="string")w=HR(r,o,se.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case N:return r=Wn(31,o,s,g),r.elementType=N,r.lanes=p,r;case C:return Sa(o.children,g,p,s);case M:w=8,g|=24;break;case k:return r=Wn(12,o,s,g|2),r.elementType=k,r.lanes=p,r;case Q:return r=Wn(13,o,s,g),r.elementType=Q,r.lanes=p,r;case K:return r=Wn(19,o,s,g),r.elementType=K,r.lanes=p,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case L:case F:w=10;break e;case H:w=9;break e;case j:w=11;break e;case S:w=14;break e;case T:w=16,c=null;break e}w=29,o=Error(i(130,r===null?"null":typeof r,"")),c=null}return s=Wn(w,o,s,g),s.elementType=r,s.type=c,s.lanes=p,s}function Sa(r,s,o,c){return r=Wn(7,r,c,s),r.lanes=o,r}function bg(r,s,o){return r=Wn(6,r,null,s),r.lanes=o,r}function Eg(r,s,o){return s=Wn(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var Co=[],No=0,fd=null,gd=0,wr=[],xr=0,Aa=null,Pi=1,Vi="";function Ra(r,s){Co[No++]=gd,Co[No++]=fd,fd=r,gd=s}function pv(r,s,o){wr[xr++]=Pi,wr[xr++]=Vi,wr[xr++]=Aa,Aa=r;var c=Pi;r=Vi;var g=32-Et(c)-1;c&=~(1<<g),o+=1;var p=32-Et(s)+g;if(30<p){var w=g-g%5;p=(c&(1<<w)-1).toString(32),c>>=w,g-=w,Pi=1<<32-Et(s)+g|o<<g|c,Vi=p+r}else Pi=1<<p|o<<g|c,Vi=r}function wg(r){r.return!==null&&(Ra(r,1),pv(r,1,0))}function xg(r){for(;r===fd;)fd=Co[--No],Co[No]=null,gd=Co[--No],Co[No]=null;for(;r===Aa;)Aa=wr[--xr],wr[xr]=null,Vi=wr[--xr],wr[xr]=null,Pi=wr[--xr],wr[xr]=null}var Mn=null,Ct=null,st=!1,Ca=null,ai=!1,Tg=Error(i(519));function Na(r){var s=Error(i(418,""));throw su(br(s,r)),Tg}function yv(r){var s=r.stateNode,o=r.type,c=r.memoizedProps;switch(s[Mt]=r,s[Rt]=c,o){case"dialog":Ye("cancel",s),Ye("close",s);break;case"iframe":case"object":case"embed":Ye("load",s);break;case"video":case"audio":for(o=0;o<Nu.length;o++)Ye(Nu[o],s);break;case"source":Ye("error",s);break;case"img":case"image":case"link":Ye("error",s),Ye("load",s);break;case"details":Ye("toggle",s);break;case"input":Ye("invalid",s),fa(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),fo(s);break;case"select":Ye("invalid",s);break;case"textarea":Ye("invalid",s),ga(s,c.value,c.defaultValue,c.children),fo(s)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||c.suppressHydrationWarning===!0||Ob(s.textContent,o)?(c.popover!=null&&(Ye("beforetoggle",s),Ye("toggle",s)),c.onScroll!=null&&Ye("scroll",s),c.onScrollEnd!=null&&Ye("scrollend",s),c.onClick!=null&&(s.onclick=Kd),s=!0):s=!1,s||Na(r)}function vv(r){for(Mn=r.return;Mn;)switch(Mn.tag){case 5:case 13:ai=!1;return;case 27:case 3:ai=!0;return;default:Mn=Mn.return}}function ru(r){if(r!==Mn)return!1;if(!st)return vv(r),st=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Bm(r.type,r.memoizedProps)),o=!o),o&&Ct&&Na(r),vv(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){Ct=Vr(r.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}Ct=null}}else s===27?(s=Ct,Ss(r.type)?(r=$m,$m=null,Ct=r):Ct=s):Ct=Mn?Vr(r.stateNode.nextSibling):null;return!0}function iu(){Ct=Mn=null,st=!1}function _v(){var r=Ca;return r!==null&&(Un===null?Un=r:Un.push.apply(Un,r),Ca=null),r}function su(r){Ca===null?Ca=[r]:Ca.push(r)}var Sg=W(null),Ia=null,zi=null;function cs(r,s,o){X(Sg,s._currentValue),s._currentValue=o}function Li(r){r._currentValue=Sg.current,re(Sg)}function Ag(r,s,o){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===o)break;r=r.return}}function Rg(r,s,o,c){var g=r.child;for(g!==null&&(g.return=r);g!==null;){var p=g.dependencies;if(p!==null){var w=g.child;p=p.firstContext;e:for(;p!==null;){var I=p;p=g;for(var $=0;$<s.length;$++)if(I.context===s[$]){p.lanes|=o,I=p.alternate,I!==null&&(I.lanes|=o),Ag(p.return,o,r),c||(w=null);break e}p=I.next}}else if(g.tag===18){if(w=g.return,w===null)throw Error(i(341));w.lanes|=o,p=w.alternate,p!==null&&(p.lanes|=o),Ag(w,o,r),w=null}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===r){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}}function au(r,s,o,c){r=null;for(var g=s,p=!1;g!==null;){if(!p){if((g.flags&524288)!==0)p=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var w=g.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var I=g.type;Qn(g.pendingProps.value,w.value)||(r!==null?r.push(I):r=[I])}}else if(g===ve.current){if(w=g.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(r!==null?r.push(Pu):r=[Pu])}g=g.return}r!==null&&Rg(s,r,o,c),s.flags|=262144}function md(r){for(r=r.firstContext;r!==null;){if(!Qn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ka(r){Ia=r,zi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function _n(r){return bv(Ia,r)}function pd(r,s){return Ia===null&&ka(r),bv(r,s)}function bv(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},zi===null){if(r===null)throw Error(i(308));zi=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else zi=zi.next=s;return o}var j2=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,c){r.push(c)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},H2=t.unstable_scheduleCallback,q2=t.unstable_NormalPriority,Qt={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Cg(){return{controller:new j2,data:new Map,refCount:0}}function ou(r){r.refCount--,r.refCount===0&&H2(q2,function(){r.controller.abort()})}var lu=null,Ng=0,Io=0,ko=null;function $2(r,s){if(lu===null){var o=lu=[];Ng=0,Io=km(),ko={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Ng++,s.then(Ev,Ev),s}function Ev(){if(--Ng===0&&lu!==null){ko!==null&&(ko.status="fulfilled");var r=lu;lu=null,Io=0,ko=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function F2(r,s){var o=[],c={status:"pending",value:null,reason:null,then:function(g){o.push(g)}};return r.then(function(){c.status="fulfilled",c.value=s;for(var g=0;g<o.length;g++)(0,o[g])(s)},function(g){for(c.status="rejected",c.reason=g,g=0;g<o.length;g++)(0,o[g])(void 0)}),c}var wv=O.S;O.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&$2(r,s),wv!==null&&wv(r,s)};var Da=W(null);function Ig(){var r=Da.current;return r!==null?r:yt.pooledCache}function yd(r,s){s===null?X(Da,Da.current):X(Da,s.pool)}function xv(){var r=Ig();return r===null?null:{parent:Qt._currentValue,pool:r}}var uu=Error(i(460)),Tv=Error(i(474)),vd=Error(i(542)),kg={then:function(){}};function Sv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function _d(){}function Av(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(_d,_d),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Cv(r),r;default:if(typeof s.status=="string")s.then(_d,_d);else{if(r=yt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(c){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=c}},function(c){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Cv(r),r}throw cu=s,uu}}var cu=null;function Rv(){if(cu===null)throw Error(i(459));var r=cu;return cu=null,r}function Cv(r){if(r===uu||r===vd)throw Error(i(483))}var ds=!1;function Dg(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mg(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function hs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function fs(r,s,o){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(ut&2)!==0){var g=c.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),c.pending=s,s=dd(r),gv(r,null,o),s}return cd(r,c,s,o),dd(r)}function du(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var c=s.lanes;c&=r.pendingLanes,o|=c,s.lanes=o,la(r,o)}}function Og(r,s){var o=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var g=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?g=p=w:p=p.next=w,o=o.next}while(o!==null);p===null?g=p=s:p=p.next=s}else g=p=s;o={baseState:c.baseState,firstBaseUpdate:g,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var Pg=!1;function hu(){if(Pg){var r=ko;if(r!==null)throw r}}function fu(r,s,o,c){Pg=!1;var g=r.updateQueue;ds=!1;var p=g.firstBaseUpdate,w=g.lastBaseUpdate,I=g.shared.pending;if(I!==null){g.shared.pending=null;var $=I,ae=$.next;$.next=null,w===null?p=ae:w.next=ae,w=$;var de=r.alternate;de!==null&&(de=de.updateQueue,I=de.lastBaseUpdate,I!==w&&(I===null?de.firstBaseUpdate=ae:I.next=ae,de.lastBaseUpdate=$))}if(p!==null){var me=g.baseState;w=0,de=ae=$=null,I=p;do{var oe=I.lane&-536870913,le=oe!==I.lane;if(le?(Ze&oe)===oe:(c&oe)===oe){oe!==0&&oe===Io&&(Pg=!0),de!==null&&(de=de.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Oe=r,Ie=I;oe=s;var gt=o;switch(Ie.tag){case 1:if(Oe=Ie.payload,typeof Oe=="function"){me=Oe.call(gt,me,oe);break e}me=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Ie.payload,oe=typeof Oe=="function"?Oe.call(gt,me,oe):Oe,oe==null)break e;me=y({},me,oe);break e;case 2:ds=!0}}oe=I.callback,oe!==null&&(r.flags|=64,le&&(r.flags|=8192),le=g.callbacks,le===null?g.callbacks=[oe]:le.push(oe))}else le={lane:oe,tag:I.tag,payload:I.payload,callback:I.callback,next:null},de===null?(ae=de=le,$=me):de=de.next=le,w|=oe;if(I=I.next,I===null){if(I=g.shared.pending,I===null)break;le=I,I=le.next,le.next=null,g.lastBaseUpdate=le,g.shared.pending=null}}while(!0);de===null&&($=me),g.baseState=$,g.firstBaseUpdate=ae,g.lastBaseUpdate=de,p===null&&(g.shared.lanes=0),Es|=w,r.lanes=w,r.memoizedState=me}}function Nv(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function Iv(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)Nv(o[r],s)}var Do=W(null),bd=W(0);function kv(r,s){r=Fi,X(bd,r),X(Do,s),Fi=r|s.baseLanes}function Vg(){X(bd,Fi),X(Do,Do.current)}function zg(){Fi=bd.current,re(Do),re(bd)}var gs=0,je=null,ht=null,jt=null,Ed=!1,Mo=!1,Ma=!1,wd=0,gu=0,Oo=null,G2=0;function Ot(){throw Error(i(321))}function Lg(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!Qn(r[o],s[o]))return!1;return!0}function Ug(r,s,o,c,g,p){return gs=p,je=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,O.H=r===null||r.memoizedState===null?g_:m_,Ma=!1,p=o(c,g),Ma=!1,Mo&&(p=Mv(s,o,c,g)),Dv(r),p}function Dv(r){O.H=Cd;var s=ht!==null&&ht.next!==null;if(gs=0,jt=ht=je=null,Ed=!1,gu=0,Oo=null,s)throw Error(i(300));r===null||rn||(r=r.dependencies,r!==null&&md(r)&&(rn=!0))}function Mv(r,s,o,c){je=r;var g=0;do{if(Mo&&(Oo=null),gu=0,Mo=!1,25<=g)throw Error(i(301));if(g+=1,jt=ht=null,r.updateQueue!=null){var p=r.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}O.H=J2,p=s(o,c)}while(Mo);return p}function Y2(){var r=O.H,s=r.useState()[0];return s=typeof s.then=="function"?mu(s):s,r=r.useState()[0],(ht!==null?ht.memoizedState:null)!==r&&(je.flags|=1024),s}function Bg(){var r=wd!==0;return wd=0,r}function jg(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function Hg(r){if(Ed){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ed=!1}gs=0,jt=ht=je=null,Mo=!1,gu=wd=0,Oo=null}function zn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?je.memoizedState=jt=r:jt=jt.next=r,jt}function Ht(){if(ht===null){var r=je.alternate;r=r!==null?r.memoizedState:null}else r=ht.next;var s=jt===null?je.memoizedState:jt.next;if(s!==null)jt=s,ht=r;else{if(r===null)throw je.alternate===null?Error(i(467)):Error(i(310));ht=r,r={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},jt===null?je.memoizedState=jt=r:jt=jt.next=r}return jt}function qg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function mu(r){var s=gu;return gu+=1,Oo===null&&(Oo=[]),r=Av(Oo,r,s),s=je,(jt===null?s.memoizedState:jt.next)===null&&(s=s.alternate,O.H=s===null||s.memoizedState===null?g_:m_),r}function xd(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return mu(r);if(r.$$typeof===F)return _n(r)}throw Error(i(438,String(r)))}function $g(r){var s=null,o=je.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var c=je.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=qg(),je.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),c=0;c<r;c++)o[c]=V;return s.index++,o}function Ui(r,s){return typeof s=="function"?s(r):s}function Td(r){var s=Ht();return Fg(s,ht,r)}function Fg(r,s,o){var c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var g=r.baseQueue,p=c.pending;if(p!==null){if(g!==null){var w=g.next;g.next=p.next,p.next=w}s.baseQueue=g=p,c.pending=null}if(p=r.baseState,g===null)r.memoizedState=p;else{s=g.next;var I=w=null,$=null,ae=s,de=!1;do{var me=ae.lane&-536870913;if(me!==ae.lane?(Ze&me)===me:(gs&me)===me){var oe=ae.revertLane;if(oe===0)$!==null&&($=$.next={lane:0,revertLane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),me===Io&&(de=!0);else if((gs&oe)===oe){ae=ae.next,oe===Io&&(de=!0);continue}else me={lane:0,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},$===null?(I=$=me,w=p):$=$.next=me,je.lanes|=oe,Es|=oe;me=ae.action,Ma&&o(p,me),p=ae.hasEagerState?ae.eagerState:o(p,me)}else oe={lane:me,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},$===null?(I=$=oe,w=p):$=$.next=oe,je.lanes|=me,Es|=me;ae=ae.next}while(ae!==null&&ae!==s);if($===null?w=p:$.next=I,!Qn(p,r.memoizedState)&&(rn=!0,de&&(o=ko,o!==null)))throw o;r.memoizedState=p,r.baseState=w,r.baseQueue=$,c.lastRenderedState=p}return g===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function Gg(r){var s=Ht(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var c=o.dispatch,g=o.pending,p=s.memoizedState;if(g!==null){o.pending=null;var w=g=g.next;do p=r(p,w.action),w=w.next;while(w!==g);Qn(p,s.memoizedState)||(rn=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,c]}function Ov(r,s,o){var c=je,g=Ht(),p=st;if(p){if(o===void 0)throw Error(i(407));o=o()}else o=s();var w=!Qn((ht||g).memoizedState,o);w&&(g.memoizedState=o,rn=!0),g=g.queue;var I=zv.bind(null,c,g,r);if(pu(2048,8,I,[r]),g.getSnapshot!==s||w||jt!==null&&jt.memoizedState.tag&1){if(c.flags|=2048,Po(9,Sd(),Vv.bind(null,c,g,o,s),null),yt===null)throw Error(i(349));p||(gs&124)!==0||Pv(c,s,o)}return o}function Pv(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=je.updateQueue,s===null?(s=qg(),je.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function Vv(r,s,o,c){s.value=o,s.getSnapshot=c,Lv(s)&&Uv(r)}function zv(r,s,o){return o(function(){Lv(s)&&Uv(r)})}function Lv(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!Qn(r,o)}catch{return!0}}function Uv(r){var s=Ao(r,2);s!==null&&nr(s,r,2)}function Yg(r){var s=zn();if(typeof r=="function"){var o=r;if(r=o(),Ma){Lt(!0);try{o()}finally{Lt(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:r},s}function Bv(r,s,o,c){return r.baseState=o,Fg(r,ht,typeof c=="function"?c:Ui)}function K2(r,s,o,c,g){if(Rd(r))throw Error(i(485));if(r=s.action,r!==null){var p={payload:g,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){p.listeners.push(w)}};O.T!==null?o(!0):p.isTransition=!1,c(p),o=s.pending,o===null?(p.next=s.pending=p,jv(s,p)):(p.next=o.next,s.pending=o.next=p)}}function jv(r,s){var o=s.action,c=s.payload,g=r.state;if(s.isTransition){var p=O.T,w={};O.T=w;try{var I=o(g,c),$=O.S;$!==null&&$(w,I),Hv(r,s,I)}catch(ae){Kg(r,s,ae)}finally{O.T=p}}else try{p=o(g,c),Hv(r,s,p)}catch(ae){Kg(r,s,ae)}}function Hv(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){qv(r,s,c)},function(c){return Kg(r,s,c)}):qv(r,s,o)}function qv(r,s,o){s.status="fulfilled",s.value=o,$v(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,jv(r,o)))}function Kg(r,s,o){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=o,$v(s),s=s.next;while(s!==c)}r.action=null}function $v(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function Fv(r,s){return s}function Gv(r,s){if(st){var o=yt.formState;if(o!==null){e:{var c=je;if(st){if(Ct){t:{for(var g=Ct,p=ai;g.nodeType!==8;){if(!p){g=null;break t}if(g=Vr(g.nextSibling),g===null){g=null;break t}}p=g.data,g=p==="F!"||p==="F"?g:null}if(g){Ct=Vr(g.nextSibling),c=g.data==="F!";break e}}Na(c)}c=!1}c&&(s=o[0])}}return o=zn(),o.memoizedState=o.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fv,lastRenderedState:s},o.queue=c,o=d_.bind(null,je,c),c.dispatch=o,c=Yg(!1),p=Jg.bind(null,je,!1,c.queue),c=zn(),g={state:s,dispatch:null,action:r,pending:null},c.queue=g,o=K2.bind(null,je,g,p,o),g.dispatch=o,c.memoizedState=r,[s,o,!1]}function Yv(r){var s=Ht();return Kv(s,ht,r)}function Kv(r,s,o){if(s=Fg(r,s,Fv)[0],r=Td(Ui)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=mu(s)}catch(w){throw w===uu?vd:w}else c=s;s=Ht();var g=s.queue,p=g.dispatch;return o!==s.memoizedState&&(je.flags|=2048,Po(9,Sd(),X2.bind(null,g,o),null)),[c,p,r]}function X2(r,s){r.action=s}function Xv(r){var s=Ht(),o=ht;if(o!==null)return Kv(s,o,r);Ht(),s=s.memoizedState,o=Ht();var c=o.queue.dispatch;return o.memoizedState=r,[s,c,!1]}function Po(r,s,o,c){return r={tag:r,create:o,deps:c,inst:s,next:null},s=je.updateQueue,s===null&&(s=qg(),je.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(c=o.next,o.next=r,r.next=c,s.lastEffect=r),r}function Sd(){return{destroy:void 0,resource:void 0}}function Qv(){return Ht().memoizedState}function Ad(r,s,o,c){var g=zn();c=c===void 0?null:c,je.flags|=r,g.memoizedState=Po(1|s,Sd(),o,c)}function pu(r,s,o,c){var g=Ht();c=c===void 0?null:c;var p=g.memoizedState.inst;ht!==null&&c!==null&&Lg(c,ht.memoizedState.deps)?g.memoizedState=Po(s,p,o,c):(je.flags|=r,g.memoizedState=Po(1|s,p,o,c))}function Wv(r,s){Ad(8390656,8,r,s)}function Zv(r,s){pu(2048,8,r,s)}function Jv(r,s){return pu(4,2,r,s)}function e_(r,s){return pu(4,4,r,s)}function t_(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function n_(r,s,o){o=o!=null?o.concat([r]):null,pu(4,4,t_.bind(null,s,r),o)}function Xg(){}function r_(r,s){var o=Ht();s=s===void 0?null:s;var c=o.memoizedState;return s!==null&&Lg(s,c[1])?c[0]:(o.memoizedState=[r,s],r)}function i_(r,s){var o=Ht();s=s===void 0?null:s;var c=o.memoizedState;if(s!==null&&Lg(s,c[1]))return c[0];if(c=r(),Ma){Lt(!0);try{r()}finally{Lt(!1)}}return o.memoizedState=[c,s],c}function Qg(r,s,o){return o===void 0||(gs&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=ob(),je.lanes|=r,Es|=r,o)}function s_(r,s,o,c){return Qn(o,s)?o:Do.current!==null?(r=Qg(r,o,c),Qn(r,s)||(rn=!0),r):(gs&42)===0?(rn=!0,r.memoizedState=o):(r=ob(),je.lanes|=r,Es|=r,s)}function a_(r,s,o,c,g){var p=Y.p;Y.p=p!==0&&8>p?p:8;var w=O.T,I={};O.T=I,Jg(r,!1,s,o);try{var $=g(),ae=O.S;if(ae!==null&&ae(I,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var de=F2($,c);yu(r,s,de,tr(r))}else yu(r,s,c,tr(r))}catch(me){yu(r,s,{then:function(){},status:"rejected",reason:me},tr())}finally{Y.p=p,O.T=w}}function Q2(){}function Wg(r,s,o,c){if(r.tag!==5)throw Error(i(476));var g=o_(r).queue;a_(r,g,s,ne,o===null?Q2:function(){return l_(r),o(c)})}function o_(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:ne},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function l_(r){var s=o_(r).next.queue;yu(r,s,{},tr())}function Zg(){return _n(Pu)}function u_(){return Ht().memoizedState}function c_(){return Ht().memoizedState}function W2(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=tr();r=hs(o);var c=fs(s,r,o);c!==null&&(nr(c,s,o),du(c,s,o)),s={cache:Cg()},r.payload=s;return}s=s.return}}function Z2(r,s,o){var c=tr();o={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Rd(r)?h_(s,o):(o=vg(r,s,o,c),o!==null&&(nr(o,r,c),f_(o,s,c)))}function d_(r,s,o){var c=tr();yu(r,s,o,c)}function yu(r,s,o,c){var g={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Rd(r))h_(s,g);else{var p=r.alternate;if(r.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var w=s.lastRenderedState,I=p(w,o);if(g.hasEagerState=!0,g.eagerState=I,Qn(I,w))return cd(r,s,g,0),yt===null&&ud(),!1}catch{}finally{}if(o=vg(r,s,g,c),o!==null)return nr(o,r,c),f_(o,s,c),!0}return!1}function Jg(r,s,o,c){if(c={lane:2,revertLane:km(),action:c,hasEagerState:!1,eagerState:null,next:null},Rd(r)){if(s)throw Error(i(479))}else s=vg(r,o,c,2),s!==null&&nr(s,r,2)}function Rd(r){var s=r.alternate;return r===je||s!==null&&s===je}function h_(r,s){Mo=Ed=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function f_(r,s,o){if((o&4194048)!==0){var c=s.lanes;c&=r.pendingLanes,o|=c,s.lanes=o,la(r,o)}}var Cd={readContext:_n,use:xd,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot,useHostTransitionStatus:Ot,useFormState:Ot,useActionState:Ot,useOptimistic:Ot,useMemoCache:Ot,useCacheRefresh:Ot},g_={readContext:_n,use:xd,useCallback:function(r,s){return zn().memoizedState=[r,s===void 0?null:s],r},useContext:_n,useEffect:Wv,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,Ad(4194308,4,t_.bind(null,s,r),o)},useLayoutEffect:function(r,s){return Ad(4194308,4,r,s)},useInsertionEffect:function(r,s){Ad(4,2,r,s)},useMemo:function(r,s){var o=zn();s=s===void 0?null:s;var c=r();if(Ma){Lt(!0);try{r()}finally{Lt(!1)}}return o.memoizedState=[c,s],c},useReducer:function(r,s,o){var c=zn();if(o!==void 0){var g=o(s);if(Ma){Lt(!0);try{o(s)}finally{Lt(!1)}}}else g=s;return c.memoizedState=c.baseState=g,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:g},c.queue=r,r=r.dispatch=Z2.bind(null,je,r),[c.memoizedState,r]},useRef:function(r){var s=zn();return r={current:r},s.memoizedState=r},useState:function(r){r=Yg(r);var s=r.queue,o=d_.bind(null,je,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:Xg,useDeferredValue:function(r,s){var o=zn();return Qg(o,r,s)},useTransition:function(){var r=Yg(!1);return r=a_.bind(null,je,r.queue,!0,!1),zn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var c=je,g=zn();if(st){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),yt===null)throw Error(i(349));(Ze&124)!==0||Pv(c,s,o)}g.memoizedState=o;var p={value:o,getSnapshot:s};return g.queue=p,Wv(zv.bind(null,c,p,r),[r]),c.flags|=2048,Po(9,Sd(),Vv.bind(null,c,p,o,s),null),o},useId:function(){var r=zn(),s=yt.identifierPrefix;if(st){var o=Vi,c=Pi;o=(c&~(1<<32-Et(c)-1)).toString(32)+o,s=""+s+"R"+o,o=wd++,0<o&&(s+="H"+o.toString(32)),s+=""}else o=G2++,s=""+s+"r"+o.toString(32)+"";return r.memoizedState=s},useHostTransitionStatus:Zg,useFormState:Gv,useActionState:Gv,useOptimistic:function(r){var s=zn();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Jg.bind(null,je,!0,o),o.dispatch=s,[r,s]},useMemoCache:$g,useCacheRefresh:function(){return zn().memoizedState=W2.bind(null,je)}},m_={readContext:_n,use:xd,useCallback:r_,useContext:_n,useEffect:Zv,useImperativeHandle:n_,useInsertionEffect:Jv,useLayoutEffect:e_,useMemo:i_,useReducer:Td,useRef:Qv,useState:function(){return Td(Ui)},useDebugValue:Xg,useDeferredValue:function(r,s){var o=Ht();return s_(o,ht.memoizedState,r,s)},useTransition:function(){var r=Td(Ui)[0],s=Ht().memoizedState;return[typeof r=="boolean"?r:mu(r),s]},useSyncExternalStore:Ov,useId:u_,useHostTransitionStatus:Zg,useFormState:Yv,useActionState:Yv,useOptimistic:function(r,s){var o=Ht();return Bv(o,ht,r,s)},useMemoCache:$g,useCacheRefresh:c_},J2={readContext:_n,use:xd,useCallback:r_,useContext:_n,useEffect:Zv,useImperativeHandle:n_,useInsertionEffect:Jv,useLayoutEffect:e_,useMemo:i_,useReducer:Gg,useRef:Qv,useState:function(){return Gg(Ui)},useDebugValue:Xg,useDeferredValue:function(r,s){var o=Ht();return ht===null?Qg(o,r,s):s_(o,ht.memoizedState,r,s)},useTransition:function(){var r=Gg(Ui)[0],s=Ht().memoizedState;return[typeof r=="boolean"?r:mu(r),s]},useSyncExternalStore:Ov,useId:u_,useHostTransitionStatus:Zg,useFormState:Xv,useActionState:Xv,useOptimistic:function(r,s){var o=Ht();return ht!==null?Bv(o,ht,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:$g,useCacheRefresh:c_},Vo=null,vu=0;function Nd(r){var s=vu;return vu+=1,Vo===null&&(Vo=[]),Av(Vo,r,s)}function _u(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Id(r,s){throw s.$$typeof===v?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function p_(r){var s=r._init;return s(r._payload)}function y_(r){function s(ee,Z){if(r){var ie=ee.deletions;ie===null?(ee.deletions=[Z],ee.flags|=16):ie.push(Z)}}function o(ee,Z){if(!r)return null;for(;Z!==null;)s(ee,Z),Z=Z.sibling;return null}function c(ee){for(var Z=new Map;ee!==null;)ee.key!==null?Z.set(ee.key,ee):Z.set(ee.index,ee),ee=ee.sibling;return Z}function g(ee,Z){return ee=Oi(ee,Z),ee.index=0,ee.sibling=null,ee}function p(ee,Z,ie){return ee.index=ie,r?(ie=ee.alternate,ie!==null?(ie=ie.index,ie<Z?(ee.flags|=67108866,Z):ie):(ee.flags|=67108866,Z)):(ee.flags|=1048576,Z)}function w(ee){return r&&ee.alternate===null&&(ee.flags|=67108866),ee}function I(ee,Z,ie,ge){return Z===null||Z.tag!==6?(Z=bg(ie,ee.mode,ge),Z.return=ee,Z):(Z=g(Z,ie),Z.return=ee,Z)}function $(ee,Z,ie,ge){var Te=ie.type;return Te===C?de(ee,Z,ie.props.children,ge,ie.key):Z!==null&&(Z.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===T&&p_(Te)===Z.type)?(Z=g(Z,ie.props),_u(Z,ie),Z.return=ee,Z):(Z=hd(ie.type,ie.key,ie.props,null,ee.mode,ge),_u(Z,ie),Z.return=ee,Z)}function ae(ee,Z,ie,ge){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==ie.containerInfo||Z.stateNode.implementation!==ie.implementation?(Z=Eg(ie,ee.mode,ge),Z.return=ee,Z):(Z=g(Z,ie.children||[]),Z.return=ee,Z)}function de(ee,Z,ie,ge,Te){return Z===null||Z.tag!==7?(Z=Sa(ie,ee.mode,ge,Te),Z.return=ee,Z):(Z=g(Z,ie),Z.return=ee,Z)}function me(ee,Z,ie){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=bg(""+Z,ee.mode,ie),Z.return=ee,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case b:return ie=hd(Z.type,Z.key,Z.props,null,ee.mode,ie),_u(ie,Z),ie.return=ee,ie;case x:return Z=Eg(Z,ee.mode,ie),Z.return=ee,Z;case T:var ge=Z._init;return Z=ge(Z._payload),me(ee,Z,ie)}if(G(Z)||B(Z))return Z=Sa(Z,ee.mode,ie,null),Z.return=ee,Z;if(typeof Z.then=="function")return me(ee,Nd(Z),ie);if(Z.$$typeof===F)return me(ee,pd(ee,Z),ie);Id(ee,Z)}return null}function oe(ee,Z,ie,ge){var Te=Z!==null?Z.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return Te!==null?null:I(ee,Z,""+ie,ge);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case b:return ie.key===Te?$(ee,Z,ie,ge):null;case x:return ie.key===Te?ae(ee,Z,ie,ge):null;case T:return Te=ie._init,ie=Te(ie._payload),oe(ee,Z,ie,ge)}if(G(ie)||B(ie))return Te!==null?null:de(ee,Z,ie,ge,null);if(typeof ie.then=="function")return oe(ee,Z,Nd(ie),ge);if(ie.$$typeof===F)return oe(ee,Z,pd(ee,ie),ge);Id(ee,ie)}return null}function le(ee,Z,ie,ge,Te){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ee=ee.get(ie)||null,I(Z,ee,""+ge,Te);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case b:return ee=ee.get(ge.key===null?ie:ge.key)||null,$(Z,ee,ge,Te);case x:return ee=ee.get(ge.key===null?ie:ge.key)||null,ae(Z,ee,ge,Te);case T:var qe=ge._init;return ge=qe(ge._payload),le(ee,Z,ie,ge,Te)}if(G(ge)||B(ge))return ee=ee.get(ie)||null,de(Z,ee,ge,Te,null);if(typeof ge.then=="function")return le(ee,Z,ie,Nd(ge),Te);if(ge.$$typeof===F)return le(ee,Z,ie,pd(Z,ge),Te);Id(Z,ge)}return null}function Oe(ee,Z,ie,ge){for(var Te=null,qe=null,Re=Z,ke=Z=0,an=null;Re!==null&&ke<ie.length;ke++){Re.index>ke?(an=Re,Re=null):an=Re.sibling;var nt=oe(ee,Re,ie[ke],ge);if(nt===null){Re===null&&(Re=an);break}r&&Re&&nt.alternate===null&&s(ee,Re),Z=p(nt,Z,ke),qe===null?Te=nt:qe.sibling=nt,qe=nt,Re=an}if(ke===ie.length)return o(ee,Re),st&&Ra(ee,ke),Te;if(Re===null){for(;ke<ie.length;ke++)Re=me(ee,ie[ke],ge),Re!==null&&(Z=p(Re,Z,ke),qe===null?Te=Re:qe.sibling=Re,qe=Re);return st&&Ra(ee,ke),Te}for(Re=c(Re);ke<ie.length;ke++)an=le(Re,ee,ke,ie[ke],ge),an!==null&&(r&&an.alternate!==null&&Re.delete(an.key===null?ke:an.key),Z=p(an,Z,ke),qe===null?Te=an:qe.sibling=an,qe=an);return r&&Re.forEach(function(Is){return s(ee,Is)}),st&&Ra(ee,ke),Te}function Ie(ee,Z,ie,ge){if(ie==null)throw Error(i(151));for(var Te=null,qe=null,Re=Z,ke=Z=0,an=null,nt=ie.next();Re!==null&&!nt.done;ke++,nt=ie.next()){Re.index>ke?(an=Re,Re=null):an=Re.sibling;var Is=oe(ee,Re,nt.value,ge);if(Is===null){Re===null&&(Re=an);break}r&&Re&&Is.alternate===null&&s(ee,Re),Z=p(Is,Z,ke),qe===null?Te=Is:qe.sibling=Is,qe=Is,Re=an}if(nt.done)return o(ee,Re),st&&Ra(ee,ke),Te;if(Re===null){for(;!nt.done;ke++,nt=ie.next())nt=me(ee,nt.value,ge),nt!==null&&(Z=p(nt,Z,ke),qe===null?Te=nt:qe.sibling=nt,qe=nt);return st&&Ra(ee,ke),Te}for(Re=c(Re);!nt.done;ke++,nt=ie.next())nt=le(Re,ee,ke,nt.value,ge),nt!==null&&(r&&nt.alternate!==null&&Re.delete(nt.key===null?ke:nt.key),Z=p(nt,Z,ke),qe===null?Te=nt:qe.sibling=nt,qe=nt);return r&&Re.forEach(function(eC){return s(ee,eC)}),st&&Ra(ee,ke),Te}function gt(ee,Z,ie,ge){if(typeof ie=="object"&&ie!==null&&ie.type===C&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case b:e:{for(var Te=ie.key;Z!==null;){if(Z.key===Te){if(Te=ie.type,Te===C){if(Z.tag===7){o(ee,Z.sibling),ge=g(Z,ie.props.children),ge.return=ee,ee=ge;break e}}else if(Z.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===T&&p_(Te)===Z.type){o(ee,Z.sibling),ge=g(Z,ie.props),_u(ge,ie),ge.return=ee,ee=ge;break e}o(ee,Z);break}else s(ee,Z);Z=Z.sibling}ie.type===C?(ge=Sa(ie.props.children,ee.mode,ge,ie.key),ge.return=ee,ee=ge):(ge=hd(ie.type,ie.key,ie.props,null,ee.mode,ge),_u(ge,ie),ge.return=ee,ee=ge)}return w(ee);case x:e:{for(Te=ie.key;Z!==null;){if(Z.key===Te)if(Z.tag===4&&Z.stateNode.containerInfo===ie.containerInfo&&Z.stateNode.implementation===ie.implementation){o(ee,Z.sibling),ge=g(Z,ie.children||[]),ge.return=ee,ee=ge;break e}else{o(ee,Z);break}else s(ee,Z);Z=Z.sibling}ge=Eg(ie,ee.mode,ge),ge.return=ee,ee=ge}return w(ee);case T:return Te=ie._init,ie=Te(ie._payload),gt(ee,Z,ie,ge)}if(G(ie))return Oe(ee,Z,ie,ge);if(B(ie)){if(Te=B(ie),typeof Te!="function")throw Error(i(150));return ie=Te.call(ie),Ie(ee,Z,ie,ge)}if(typeof ie.then=="function")return gt(ee,Z,Nd(ie),ge);if(ie.$$typeof===F)return gt(ee,Z,pd(ee,ie),ge);Id(ee,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,Z!==null&&Z.tag===6?(o(ee,Z.sibling),ge=g(Z,ie),ge.return=ee,ee=ge):(o(ee,Z),ge=bg(ie,ee.mode,ge),ge.return=ee,ee=ge),w(ee)):o(ee,Z)}return function(ee,Z,ie,ge){try{vu=0;var Te=gt(ee,Z,ie,ge);return Vo=null,Te}catch(Re){if(Re===uu||Re===vd)throw Re;var qe=Wn(29,Re,null,ee.mode);return qe.lanes=ge,qe.return=ee,qe}finally{}}}var zo=y_(!0),v_=y_(!1),Tr=W(null),oi=null;function ms(r){var s=r.alternate;X(Wt,Wt.current&1),X(Tr,r),oi===null&&(s===null||Do.current!==null||s.memoizedState!==null)&&(oi=r)}function __(r){if(r.tag===22){if(X(Wt,Wt.current),X(Tr,r),oi===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(oi=r)}}else ps()}function ps(){X(Wt,Wt.current),X(Tr,Tr.current)}function Bi(r){re(Tr),oi===r&&(oi=null),re(Wt)}var Wt=W(0);function kd(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||qm(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function em(r,s,o,c){s=r.memoizedState,o=o(c,s),o=o==null?s:y({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var tm={enqueueSetState:function(r,s,o){r=r._reactInternals;var c=tr(),g=hs(c);g.payload=s,o!=null&&(g.callback=o),s=fs(r,g,c),s!==null&&(nr(s,r,c),du(s,r,c))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var c=tr(),g=hs(c);g.tag=1,g.payload=s,o!=null&&(g.callback=o),s=fs(r,g,c),s!==null&&(nr(s,r,c),du(s,r,c))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=tr(),c=hs(o);c.tag=2,s!=null&&(c.callback=s),s=fs(r,c,o),s!==null&&(nr(s,r,o),du(s,r,o))}};function b_(r,s,o,c,g,p,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,p,w):s.prototype&&s.prototype.isPureReactComponent?!tu(o,c)||!tu(g,p):!0}function E_(r,s,o,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==r&&tm.enqueueReplaceState(s,s.state,null)}function Oa(r,s){var o=s;if("ref"in s){o={};for(var c in s)c!=="ref"&&(o[c]=s[c])}if(r=r.defaultProps){o===s&&(o=y({},o));for(var g in r)o[g]===void 0&&(o[g]=r[g])}return o}var Dd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function w_(r){Dd(r)}function x_(r){console.error(r)}function T_(r){Dd(r)}function Md(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function S_(r,s,o){try{var c=r.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function nm(r,s,o){return o=hs(o),o.tag=3,o.payload={element:null},o.callback=function(){Md(r,s)},o}function A_(r){return r=hs(r),r.tag=3,r}function R_(r,s,o,c){var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var p=c.value;r.payload=function(){return g(p)},r.callback=function(){S_(s,o,c)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(r.callback=function(){S_(s,o,c),typeof g!="function"&&(ws===null?ws=new Set([this]):ws.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function eR(r,s,o,c,g){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=o.alternate,s!==null&&au(s,o,g,!0),o=Tr.current,o!==null){switch(o.tag){case 13:return oi===null?Am():o.alternate===null&&Nt===0&&(Nt=3),o.flags&=-257,o.flags|=65536,o.lanes=g,c===kg?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([c]):s.add(c),Cm(r,c,g)),!1;case 22:return o.flags|=65536,c===kg?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([c]):o.add(c)),Cm(r,c,g)),!1}throw Error(i(435,o.tag))}return Cm(r,c,g),Am(),!1}if(st)return s=Tr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,c!==Tg&&(r=Error(i(422),{cause:c}),su(br(r,o)))):(c!==Tg&&(s=Error(i(423),{cause:c}),su(br(s,o))),r=r.current.alternate,r.flags|=65536,g&=-g,r.lanes|=g,c=br(c,o),g=nm(r.stateNode,c,g),Og(r,g),Nt!==4&&(Nt=2)),!1;var p=Error(i(520),{cause:c});if(p=br(p,o),Au===null?Au=[p]:Au.push(p),Nt!==4&&(Nt=2),s===null)return!0;c=br(c,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=g&-g,o.lanes|=r,r=nm(o.stateNode,c,r),Og(o,r),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ws===null||!ws.has(p))))return o.flags|=65536,g&=-g,o.lanes|=g,g=A_(g),R_(g,r,o,c),Og(o,g),!1}o=o.return}while(o!==null);return!1}var C_=Error(i(461)),rn=!1;function hn(r,s,o,c){s.child=r===null?v_(s,null,o,c):zo(s,r.child,o,c)}function N_(r,s,o,c,g){o=o.render;var p=s.ref;if("ref"in c){var w={};for(var I in c)I!=="ref"&&(w[I]=c[I])}else w=c;return ka(s),c=Ug(r,s,o,w,p,g),I=Bg(),r!==null&&!rn?(jg(r,s,g),ji(r,s,g)):(st&&I&&wg(s),s.flags|=1,hn(r,s,c,g),s.child)}function I_(r,s,o,c,g){if(r===null){var p=o.type;return typeof p=="function"&&!_g(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,k_(r,s,p,c,g)):(r=hd(o.type,null,c,s,s.mode,g),r.ref=s.ref,r.return=s,s.child=r)}if(p=r.child,!cm(r,g)){var w=p.memoizedProps;if(o=o.compare,o=o!==null?o:tu,o(w,c)&&r.ref===s.ref)return ji(r,s,g)}return s.flags|=1,r=Oi(p,c),r.ref=s.ref,r.return=s,s.child=r}function k_(r,s,o,c,g){if(r!==null){var p=r.memoizedProps;if(tu(p,c)&&r.ref===s.ref)if(rn=!1,s.pendingProps=c=p,cm(r,g))(r.flags&131072)!==0&&(rn=!0);else return s.lanes=r.lanes,ji(r,s,g)}return rm(r,s,o,c,g)}function D_(r,s,o){var c=s.pendingProps,g=c.children,p=r!==null?r.memoizedState:null;if(c.mode==="hidden"){if((s.flags&128)!==0){if(c=p!==null?p.baseLanes|o:o,r!==null){for(g=s.child=r.child,p=0;g!==null;)p=p|g.lanes|g.childLanes,g=g.sibling;s.childLanes=p&~c}else s.childLanes=0,s.child=null;return M_(r,s,c,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&yd(s,p!==null?p.cachePool:null),p!==null?kv(s,p):Vg(),__(s);else return s.lanes=s.childLanes=536870912,M_(r,s,p!==null?p.baseLanes|o:o,o)}else p!==null?(yd(s,p.cachePool),kv(s,p),ps(),s.memoizedState=null):(r!==null&&yd(s,null),Vg(),ps());return hn(r,s,g,o),s.child}function M_(r,s,o,c){var g=Ig();return g=g===null?null:{parent:Qt._currentValue,pool:g},s.memoizedState={baseLanes:o,cachePool:g},r!==null&&yd(s,null),Vg(),__(s),r!==null&&au(r,s,c,!0),null}function Od(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function rm(r,s,o,c,g){return ka(s),o=Ug(r,s,o,c,void 0,g),c=Bg(),r!==null&&!rn?(jg(r,s,g),ji(r,s,g)):(st&&c&&wg(s),s.flags|=1,hn(r,s,o,g),s.child)}function O_(r,s,o,c,g,p){return ka(s),s.updateQueue=null,o=Mv(s,c,o,g),Dv(r),c=Bg(),r!==null&&!rn?(jg(r,s,p),ji(r,s,p)):(st&&c&&wg(s),s.flags|=1,hn(r,s,o,p),s.child)}function P_(r,s,o,c,g){if(ka(s),s.stateNode===null){var p=Ro,w=o.contextType;typeof w=="object"&&w!==null&&(p=_n(w)),p=new o(c,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=tm,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=c,p.state=s.memoizedState,p.refs={},Dg(s),w=o.contextType,p.context=typeof w=="object"&&w!==null?_n(w):Ro,p.state=s.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(em(s,o,w,c),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(w=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),w!==p.state&&tm.enqueueReplaceState(p,p.state,null),fu(s,c,p,g),hu(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(r===null){p=s.stateNode;var I=s.memoizedProps,$=Oa(o,I);p.props=$;var ae=p.context,de=o.contextType;w=Ro,typeof de=="object"&&de!==null&&(w=_n(de));var me=o.getDerivedStateFromProps;de=typeof me=="function"||typeof p.getSnapshotBeforeUpdate=="function",I=s.pendingProps!==I,de||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(I||ae!==w)&&E_(s,p,c,w),ds=!1;var oe=s.memoizedState;p.state=oe,fu(s,c,p,g),hu(),ae=s.memoizedState,I||oe!==ae||ds?(typeof me=="function"&&(em(s,o,me,c),ae=s.memoizedState),($=ds||b_(s,o,$,c,oe,ae,w))?(de||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=ae),p.props=c,p.state=ae,p.context=w,c=$):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{p=s.stateNode,Mg(r,s),w=s.memoizedProps,de=Oa(o,w),p.props=de,me=s.pendingProps,oe=p.context,ae=o.contextType,$=Ro,typeof ae=="object"&&ae!==null&&($=_n(ae)),I=o.getDerivedStateFromProps,(ae=typeof I=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w!==me||oe!==$)&&E_(s,p,c,$),ds=!1,oe=s.memoizedState,p.state=oe,fu(s,c,p,g),hu();var le=s.memoizedState;w!==me||oe!==le||ds||r!==null&&r.dependencies!==null&&md(r.dependencies)?(typeof I=="function"&&(em(s,o,I,c),le=s.memoizedState),(de=ds||b_(s,o,de,c,oe,le,$)||r!==null&&r.dependencies!==null&&md(r.dependencies))?(ae||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,le,$),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,le,$)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||w===r.memoizedProps&&oe===r.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&oe===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=le),p.props=c,p.state=le,p.context=$,c=de):(typeof p.componentDidUpdate!="function"||w===r.memoizedProps&&oe===r.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&oe===r.memoizedState||(s.flags|=1024),c=!1)}return p=c,Od(r,s),c=(s.flags&128)!==0,p||c?(p=s.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,r!==null&&c?(s.child=zo(s,r.child,null,g),s.child=zo(s,null,o,g)):hn(r,s,o,g),s.memoizedState=p.state,r=s.child):r=ji(r,s,g),r}function V_(r,s,o,c){return iu(),s.flags|=256,hn(r,s,o,c),s.child}var im={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sm(r){return{baseLanes:r,cachePool:xv()}}function am(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Sr),r}function z_(r,s,o){var c=s.pendingProps,g=!1,p=(s.flags&128)!==0,w;if((w=p)||(w=r!==null&&r.memoizedState===null?!1:(Wt.current&2)!==0),w&&(g=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,r===null){if(st){if(g?ms(s):ps(),st){var I=Ct,$;if($=I){e:{for($=I,I=ai;$.nodeType!==8;){if(!I){I=null;break e}if($=Vr($.nextSibling),$===null){I=null;break e}}I=$}I!==null?(s.memoizedState={dehydrated:I,treeContext:Aa!==null?{id:Pi,overflow:Vi}:null,retryLane:536870912,hydrationErrors:null},$=Wn(18,null,null,0),$.stateNode=I,$.return=s,s.child=$,Mn=s,Ct=null,$=!0):$=!1}$||Na(s)}if(I=s.memoizedState,I!==null&&(I=I.dehydrated,I!==null))return qm(I)?s.lanes=32:s.lanes=536870912,null;Bi(s)}return I=c.children,c=c.fallback,g?(ps(),g=s.mode,I=Pd({mode:"hidden",children:I},g),c=Sa(c,g,o,null),I.return=s,c.return=s,I.sibling=c,s.child=I,g=s.child,g.memoizedState=sm(o),g.childLanes=am(r,w,o),s.memoizedState=im,c):(ms(s),om(s,I))}if($=r.memoizedState,$!==null&&(I=$.dehydrated,I!==null)){if(p)s.flags&256?(ms(s),s.flags&=-257,s=lm(r,s,o)):s.memoizedState!==null?(ps(),s.child=r.child,s.flags|=128,s=null):(ps(),g=c.fallback,I=s.mode,c=Pd({mode:"visible",children:c.children},I),g=Sa(g,I,o,null),g.flags|=2,c.return=s,g.return=s,c.sibling=g,s.child=c,zo(s,r.child,null,o),c=s.child,c.memoizedState=sm(o),c.childLanes=am(r,w,o),s.memoizedState=im,s=g);else if(ms(s),qm(I)){if(w=I.nextSibling&&I.nextSibling.dataset,w)var ae=w.dgst;w=ae,c=Error(i(419)),c.stack="",c.digest=w,su({value:c,source:null,stack:null}),s=lm(r,s,o)}else if(rn||au(r,s,o,!1),w=(o&r.childLanes)!==0,rn||w){if(w=yt,w!==null&&(c=o&-o,c=(c&42)!==0?1:Gr(c),c=(c&(w.suspendedLanes|o))!==0?0:c,c!==0&&c!==$.retryLane))throw $.retryLane=c,Ao(r,c),nr(w,r,c),C_;I.data==="$?"||Am(),s=lm(r,s,o)}else I.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=$.treeContext,Ct=Vr(I.nextSibling),Mn=s,st=!0,Ca=null,ai=!1,r!==null&&(wr[xr++]=Pi,wr[xr++]=Vi,wr[xr++]=Aa,Pi=r.id,Vi=r.overflow,Aa=s),s=om(s,c.children),s.flags|=4096);return s}return g?(ps(),g=c.fallback,I=s.mode,$=r.child,ae=$.sibling,c=Oi($,{mode:"hidden",children:c.children}),c.subtreeFlags=$.subtreeFlags&65011712,ae!==null?g=Oi(ae,g):(g=Sa(g,I,o,null),g.flags|=2),g.return=s,c.return=s,c.sibling=g,s.child=c,c=g,g=s.child,I=r.child.memoizedState,I===null?I=sm(o):($=I.cachePool,$!==null?(ae=Qt._currentValue,$=$.parent!==ae?{parent:ae,pool:ae}:$):$=xv(),I={baseLanes:I.baseLanes|o,cachePool:$}),g.memoizedState=I,g.childLanes=am(r,w,o),s.memoizedState=im,c):(ms(s),o=r.child,r=o.sibling,o=Oi(o,{mode:"visible",children:c.children}),o.return=s,o.sibling=null,r!==null&&(w=s.deletions,w===null?(s.deletions=[r],s.flags|=16):w.push(r)),s.child=o,s.memoizedState=null,o)}function om(r,s){return s=Pd({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Pd(r,s){return r=Wn(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function lm(r,s,o){return zo(s,r.child,null,o),r=om(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function L_(r,s,o){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),Ag(r.return,s,o)}function um(r,s,o,c,g){var p=r.memoizedState;p===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:g}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=o,p.tailMode=g)}function U_(r,s,o){var c=s.pendingProps,g=c.revealOrder,p=c.tail;if(hn(r,s,c.children,o),c=Wt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&L_(r,o,s);else if(r.tag===19)L_(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}switch(X(Wt,c),g){case"forwards":for(o=s.child,g=null;o!==null;)r=o.alternate,r!==null&&kd(r)===null&&(g=o),o=o.sibling;o=g,o===null?(g=s.child,s.child=null):(g=o.sibling,o.sibling=null),um(s,!1,g,o,p);break;case"backwards":for(o=null,g=s.child,s.child=null;g!==null;){if(r=g.alternate,r!==null&&kd(r)===null){s.child=g;break}r=g.sibling,g.sibling=o,o=g,g=r}um(s,!0,o,null,p);break;case"together":um(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ji(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),Es|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(au(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=Oi(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=Oi(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function cm(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&md(r)))}function tR(r,s,o){switch(s.tag){case 3:_e(s,s.stateNode.containerInfo),cs(s,Qt,r.memoizedState.cache),iu();break;case 27:case 5:Ce(s);break;case 4:_e(s,s.stateNode.containerInfo);break;case 10:cs(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(ms(s),s.flags|=128,null):(o&s.child.childLanes)!==0?z_(r,s,o):(ms(s),r=ji(r,s,o),r!==null?r.sibling:null);ms(s);break;case 19:var g=(r.flags&128)!==0;if(c=(o&s.childLanes)!==0,c||(au(r,s,o,!1),c=(o&s.childLanes)!==0),g){if(c)return U_(r,s,o);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),X(Wt,Wt.current),c)break;return null;case 22:case 23:return s.lanes=0,D_(r,s,o);case 24:cs(s,Qt,r.memoizedState.cache)}return ji(r,s,o)}function B_(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)rn=!0;else{if(!cm(r,o)&&(s.flags&128)===0)return rn=!1,tR(r,s,o);rn=(r.flags&131072)!==0}else rn=!1,st&&(s.flags&1048576)!==0&&pv(s,gd,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var c=s.elementType,g=c._init;if(c=g(c._payload),s.type=c,typeof c=="function")_g(c)?(r=Oa(c,r),s.tag=1,s=P_(null,s,c,r,o)):(s.tag=0,s=rm(null,s,c,r,o));else{if(c!=null){if(g=c.$$typeof,g===j){s.tag=11,s=N_(null,s,c,r,o);break e}else if(g===S){s.tag=14,s=I_(null,s,c,r,o);break e}}throw s=D(c)||c,Error(i(306,s,""))}}return s;case 0:return rm(r,s,s.type,s.pendingProps,o);case 1:return c=s.type,g=Oa(c,s.pendingProps),P_(r,s,c,g,o);case 3:e:{if(_e(s,s.stateNode.containerInfo),r===null)throw Error(i(387));c=s.pendingProps;var p=s.memoizedState;g=p.element,Mg(r,s),fu(s,c,null,o);var w=s.memoizedState;if(c=w.cache,cs(s,Qt,c),c!==p.cache&&Rg(s,[Qt],o,!0),hu(),c=w.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=V_(r,s,c,o);break e}else if(c!==g){g=br(Error(i(424)),s),su(g),s=V_(r,s,c,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ct=Vr(r.firstChild),Mn=s,st=!0,Ca=null,ai=!0,o=v_(s,null,c,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(iu(),c===g){s=ji(r,s,o);break e}hn(r,s,c,o)}s=s.child}return s;case 26:return Od(r,s),r===null?(o=$b(s.type,null,s.pendingProps,null))?s.memoizedState=o:st||(o=s.type,r=s.pendingProps,c=Xd(ce.current).createElement(o),c[Mt]=s,c[Rt]=r,gn(c,o,r),wt(c),s.stateNode=c):s.memoizedState=$b(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Ce(s),r===null&&st&&(c=s.stateNode=jb(s.type,s.pendingProps,ce.current),Mn=s,ai=!0,g=Ct,Ss(s.type)?($m=g,Ct=Vr(c.firstChild)):Ct=g),hn(r,s,s.pendingProps.children,o),Od(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&st&&((g=c=Ct)&&(c=NR(c,s.type,s.pendingProps,ai),c!==null?(s.stateNode=c,Mn=s,Ct=Vr(c.firstChild),ai=!1,g=!0):g=!1),g||Na(s)),Ce(s),g=s.type,p=s.pendingProps,w=r!==null?r.memoizedProps:null,c=p.children,Bm(g,p)?c=null:w!==null&&Bm(g,w)&&(s.flags|=32),s.memoizedState!==null&&(g=Ug(r,s,Y2,null,null,o),Pu._currentValue=g),Od(r,s),hn(r,s,c,o),s.child;case 6:return r===null&&st&&((r=o=Ct)&&(o=IR(o,s.pendingProps,ai),o!==null?(s.stateNode=o,Mn=s,Ct=null,r=!0):r=!1),r||Na(s)),null;case 13:return z_(r,s,o);case 4:return _e(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=zo(s,null,c,o):hn(r,s,c,o),s.child;case 11:return N_(r,s,s.type,s.pendingProps,o);case 7:return hn(r,s,s.pendingProps,o),s.child;case 8:return hn(r,s,s.pendingProps.children,o),s.child;case 12:return hn(r,s,s.pendingProps.children,o),s.child;case 10:return c=s.pendingProps,cs(s,s.type,c.value),hn(r,s,c.children,o),s.child;case 9:return g=s.type._context,c=s.pendingProps.children,ka(s),g=_n(g),c=c(g),s.flags|=1,hn(r,s,c,o),s.child;case 14:return I_(r,s,s.type,s.pendingProps,o);case 15:return k_(r,s,s.type,s.pendingProps,o);case 19:return U_(r,s,o);case 31:return c=s.pendingProps,o=s.mode,c={mode:c.mode,children:c.children},r===null?(o=Pd(c,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=Oi(r.child,c),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return D_(r,s,o);case 24:return ka(s),c=_n(Qt),r===null?(g=Ig(),g===null&&(g=yt,p=Cg(),g.pooledCache=p,p.refCount++,p!==null&&(g.pooledCacheLanes|=o),g=p),s.memoizedState={parent:c,cache:g},Dg(s),cs(s,Qt,g)):((r.lanes&o)!==0&&(Mg(r,s),fu(s,null,null,o),hu()),g=r.memoizedState,p=s.memoizedState,g.parent!==c?(g={parent:c,cache:c},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),cs(s,Qt,c)):(c=p.cache,cs(s,Qt,c),c!==g.cache&&Rg(s,[Qt],o,!0))),hn(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Hi(r){r.flags|=4}function j_(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Xb(s)){if(s=Tr.current,s!==null&&((Ze&4194048)===Ze?oi!==null:(Ze&62914560)!==Ze&&(Ze&536870912)===0||s!==oi))throw cu=kg,Tv;r.flags|=8192}}function Vd(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Ir():536870912,r.lanes|=s,jo|=s)}function bu(r,s){if(!st)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function xt(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,c=0;if(s)for(var g=r.child;g!==null;)o|=g.lanes|g.childLanes,c|=g.subtreeFlags&65011712,c|=g.flags&65011712,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)o|=g.lanes|g.childLanes,c|=g.subtreeFlags,c|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=c,r.childLanes=o,s}function nR(r,s,o){var c=s.pendingProps;switch(xg(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(s),null;case 1:return xt(s),null;case 3:return o=s.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Li(Qt),Ae(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(ru(s)?Hi(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,_v())),xt(s),null;case 26:return o=s.memoizedState,r===null?(Hi(s),o!==null?(xt(s),j_(s,o)):(xt(s),s.flags&=-16777217)):o?o!==r.memoizedState?(Hi(s),xt(s),j_(s,o)):(xt(s),s.flags&=-16777217):(r.memoizedProps!==c&&Hi(s),xt(s),s.flags&=-16777217),null;case 27:et(s),o=ce.current;var g=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==c&&Hi(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return xt(s),null}r=se.current,ru(s)?yv(s):(r=jb(g,c,o),s.stateNode=r,Hi(s))}return xt(s),null;case 5:if(et(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==c&&Hi(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return xt(s),null}if(r=se.current,ru(s))yv(s);else{switch(g=Xd(ce.current),r){case 1:r=g.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=g.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=g.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof c.is=="string"?g.createElement("select",{is:c.is}):g.createElement("select"),c.multiple?r.multiple=!0:c.size&&(r.size=c.size);break;default:r=typeof c.is=="string"?g.createElement(o,{is:c.is}):g.createElement(o)}}r[Mt]=s,r[Rt]=c;e:for(g=s.child;g!==null;){if(g.tag===5||g.tag===6)r.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===s)break e;for(;g.sibling===null;){if(g.return===null||g.return===s)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}s.stateNode=r;e:switch(gn(r,o,c),o){case"button":case"input":case"select":case"textarea":r=!!c.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Hi(s)}}return xt(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==c&&Hi(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(r=ce.current,ru(s)){if(r=s.stateNode,o=s.memoizedProps,c=null,g=Mn,g!==null)switch(g.tag){case 27:case 5:c=g.memoizedProps}r[Mt]=s,r=!!(r.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||Ob(r.nodeValue,o)),r||Na(s)}else r=Xd(r).createTextNode(c),r[Mt]=s,s.stateNode=r}return xt(s),null;case 13:if(c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(g=ru(s),c!==null&&c.dehydrated!==null){if(r===null){if(!g)throw Error(i(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Mt]=s}else iu(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;xt(s),g=!1}else g=_v(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(Bi(s),s):(Bi(s),null)}if(Bi(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=c!==null,r=r!==null&&r.memoizedState!==null,o){c=s.child,g=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(g=c.alternate.memoizedState.cachePool.pool);var p=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==g&&(c.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),Vd(s,s.updateQueue),xt(s),null;case 4:return Ae(),r===null&&Pm(s.stateNode.containerInfo),xt(s),null;case 10:return Li(s.type),xt(s),null;case 19:if(re(Wt),g=s.memoizedState,g===null)return xt(s),null;if(c=(s.flags&128)!==0,p=g.rendering,p===null)if(c)bu(g,!1);else{if(Nt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(p=kd(r),p!==null){for(s.flags|=128,bu(g,!1),r=p.updateQueue,s.updateQueue=r,Vd(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)mv(o,r),o=o.sibling;return X(Wt,Wt.current&1|2),s.child}r=r.sibling}g.tail!==null&&Le()>Ud&&(s.flags|=128,c=!0,bu(g,!1),s.lanes=4194304)}else{if(!c)if(r=kd(p),r!==null){if(s.flags|=128,c=!0,r=r.updateQueue,s.updateQueue=r,Vd(s,r),bu(g,!0),g.tail===null&&g.tailMode==="hidden"&&!p.alternate&&!st)return xt(s),null}else 2*Le()-g.renderingStartTime>Ud&&o!==536870912&&(s.flags|=128,c=!0,bu(g,!1),s.lanes=4194304);g.isBackwards?(p.sibling=s.child,s.child=p):(r=g.last,r!==null?r.sibling=p:s.child=p,g.last=p)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=Le(),s.sibling=null,r=Wt.current,X(Wt,c?r&1|2:r&1),s):(xt(s),null);case 22:case 23:return Bi(s),zg(),c=s.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(o&536870912)!==0&&(s.flags&128)===0&&(xt(s),s.subtreeFlags&6&&(s.flags|=8192)):xt(s),o=s.updateQueue,o!==null&&Vd(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048),r!==null&&re(Da),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Li(Qt),xt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function rR(r,s){switch(xg(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Li(Qt),Ae(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return et(s),null;case 13:if(Bi(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));iu()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return re(Wt),null;case 4:return Ae(),null;case 10:return Li(s.type),null;case 22:case 23:return Bi(s),zg(),r!==null&&re(Da),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Li(Qt),null;case 25:return null;default:return null}}function H_(r,s){switch(xg(s),s.tag){case 3:Li(Qt),Ae();break;case 26:case 27:case 5:et(s);break;case 4:Ae();break;case 13:Bi(s);break;case 19:re(Wt);break;case 10:Li(s.type);break;case 22:case 23:Bi(s),zg(),r!==null&&re(Da);break;case 24:Li(Qt)}}function Eu(r,s){try{var o=s.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var g=c.next;o=g;do{if((o.tag&r)===r){c=void 0;var p=o.create,w=o.inst;c=p(),w.destroy=c}o=o.next}while(o!==g)}}catch(I){mt(s,s.return,I)}}function ys(r,s,o){try{var c=s.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var p=g.next;c=p;do{if((c.tag&r)===r){var w=c.inst,I=w.destroy;if(I!==void 0){w.destroy=void 0,g=s;var $=o,ae=I;try{ae()}catch(de){mt(g,$,de)}}}c=c.next}while(c!==p)}}catch(de){mt(s,s.return,de)}}function q_(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{Iv(s,o)}catch(c){mt(r,r.return,c)}}}function $_(r,s,o){o.props=Oa(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(c){mt(r,s,c)}}function wu(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var c=r.stateNode;break;case 30:c=r.stateNode;break;default:c=r.stateNode}typeof o=="function"?r.refCleanup=o(c):o.current=c}}catch(g){mt(r,s,g)}}function li(r,s){var o=r.ref,c=r.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(g){mt(r,s,g)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(g){mt(r,s,g)}else o.current=null}function F_(r){var s=r.type,o=r.memoizedProps,c=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(g){mt(r,r.return,g)}}function dm(r,s,o){try{var c=r.stateNode;TR(c,r.type,o,s),c[Rt]=s}catch(g){mt(r,r.return,g)}}function G_(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ss(r.type)||r.tag===4}function hm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||G_(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ss(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function fm(r,s,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Kd));else if(c!==4&&(c===27&&Ss(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(fm(r,s,o),r=r.sibling;r!==null;)fm(r,s,o),r=r.sibling}function zd(r,s,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(c!==4&&(c===27&&Ss(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(zd(r,s,o),r=r.sibling;r!==null;)zd(r,s,o),r=r.sibling}function Y_(r){var s=r.stateNode,o=r.memoizedProps;try{for(var c=r.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);gn(s,c,o),s[Mt]=r,s[Rt]=o}catch(p){mt(r,r.return,p)}}var qi=!1,Pt=!1,gm=!1,K_=typeof WeakSet=="function"?WeakSet:Set,sn=null;function iR(r,s){if(r=r.containerInfo,Lm=th,r=sv(r),hg(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var g=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var w=0,I=-1,$=-1,ae=0,de=0,me=r,oe=null;t:for(;;){for(var le;me!==o||g!==0&&me.nodeType!==3||(I=w+g),me!==p||c!==0&&me.nodeType!==3||($=w+c),me.nodeType===3&&(w+=me.nodeValue.length),(le=me.firstChild)!==null;)oe=me,me=le;for(;;){if(me===r)break t;if(oe===o&&++ae===g&&(I=w),oe===p&&++de===c&&($=w),(le=me.nextSibling)!==null)break;me=oe,oe=me.parentNode}me=le}o=I===-1||$===-1?null:{start:I,end:$}}else o=null}o=o||{start:0,end:0}}else o=null;for(Um={focusedElem:r,selectionRange:o},th=!1,sn=s;sn!==null;)if(s=sn,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,sn=r;else for(;sn!==null;){switch(s=sn,p=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&p!==null){r=void 0,o=s,g=p.memoizedProps,p=p.memoizedState,c=o.stateNode;try{var Oe=Oa(o.type,g,o.elementType===o.type);r=c.getSnapshotBeforeUpdate(Oe,p),c.__reactInternalSnapshotBeforeUpdate=r}catch(Ie){mt(o,o.return,Ie)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)Hm(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Hm(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,sn=r;break}sn=s.return}}function X_(r,s,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:vs(r,o),c&4&&Eu(5,o);break;case 1:if(vs(r,o),c&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(w){mt(o,o.return,w)}else{var g=Oa(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(g,s,r.__reactInternalSnapshotBeforeUpdate)}catch(w){mt(o,o.return,w)}}c&64&&q_(o),c&512&&wu(o,o.return);break;case 3:if(vs(r,o),c&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Iv(r,s)}catch(w){mt(o,o.return,w)}}break;case 27:s===null&&c&4&&Y_(o);case 26:case 5:vs(r,o),s===null&&c&4&&F_(o),c&512&&wu(o,o.return);break;case 12:vs(r,o);break;case 13:vs(r,o),c&4&&Z_(r,o),c&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=fR.bind(null,o),kR(r,o))));break;case 22:if(c=o.memoizedState!==null||qi,!c){s=s!==null&&s.memoizedState!==null||Pt,g=qi;var p=Pt;qi=c,(Pt=s)&&!p?_s(r,o,(o.subtreeFlags&8772)!==0):vs(r,o),qi=g,Pt=p}break;case 30:break;default:vs(r,o)}}function Q_(r){var s=r.alternate;s!==null&&(r.alternate=null,Q_(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Xr(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var bt=null,Ln=!1;function $i(r,s,o){for(o=o.child;o!==null;)W_(r,s,o),o=o.sibling}function W_(r,s,o){if(Fe&&typeof Fe.onCommitFiberUnmount=="function")try{Fe.onCommitFiberUnmount(at,o)}catch{}switch(o.tag){case 26:Pt||li(o,s),$i(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Pt||li(o,s);var c=bt,g=Ln;Ss(o.type)&&(bt=o.stateNode,Ln=!1),$i(r,s,o),ku(o.stateNode),bt=c,Ln=g;break;case 5:Pt||li(o,s);case 6:if(c=bt,g=Ln,bt=null,$i(r,s,o),bt=c,Ln=g,bt!==null)if(Ln)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(o.stateNode)}catch(p){mt(o,s,p)}else try{bt.removeChild(o.stateNode)}catch(p){mt(o,s,p)}break;case 18:bt!==null&&(Ln?(r=bt,Ub(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Uu(r)):Ub(bt,o.stateNode));break;case 4:c=bt,g=Ln,bt=o.stateNode.containerInfo,Ln=!0,$i(r,s,o),bt=c,Ln=g;break;case 0:case 11:case 14:case 15:Pt||ys(2,o,s),Pt||ys(4,o,s),$i(r,s,o);break;case 1:Pt||(li(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"&&$_(o,s,c)),$i(r,s,o);break;case 21:$i(r,s,o);break;case 22:Pt=(c=Pt)||o.memoizedState!==null,$i(r,s,o),Pt=c;break;default:$i(r,s,o)}}function Z_(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Uu(r)}catch(o){mt(s,s.return,o)}}function sR(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new K_),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new K_),s;default:throw Error(i(435,r.tag))}}function mm(r,s){var o=sR(r);s.forEach(function(c){var g=gR.bind(null,r,c);o.has(c)||(o.add(c),c.then(g,g))})}function Zn(r,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var g=o[c],p=r,w=s,I=w;e:for(;I!==null;){switch(I.tag){case 27:if(Ss(I.type)){bt=I.stateNode,Ln=!1;break e}break;case 5:bt=I.stateNode,Ln=!1;break e;case 3:case 4:bt=I.stateNode.containerInfo,Ln=!0;break e}I=I.return}if(bt===null)throw Error(i(160));W_(p,w,g),bt=null,Ln=!1,p=g.alternate,p!==null&&(p.return=null),g.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)J_(s,r),s=s.sibling}var Pr=null;function J_(r,s){var o=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Zn(s,r),Jn(r),c&4&&(ys(3,r,r.return),Eu(3,r),ys(5,r,r.return));break;case 1:Zn(s,r),Jn(r),c&512&&(Pt||o===null||li(o,o.return)),c&64&&qi&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var g=Pr;if(Zn(s,r),Jn(r),c&512&&(Pt||o===null||li(o,o.return)),c&4){var p=o!==null?o.memoizedState:null;if(c=r.memoizedState,o===null)if(c===null)if(r.stateNode===null){e:{c=r.type,o=r.memoizedProps,g=g.ownerDocument||g;t:switch(c){case"title":p=g.getElementsByTagName("title")[0],(!p||p[Si]||p[Mt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=g.createElement(c),g.head.insertBefore(p,g.querySelector("head > title"))),gn(p,c,o),p[Mt]=r,wt(p),c=p;break e;case"link":var w=Yb("link","href",g).get(c+(o.href||""));if(w){for(var I=0;I<w.length;I++)if(p=w[I],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(I,1);break t}}p=g.createElement(c),gn(p,c,o),g.head.appendChild(p);break;case"meta":if(w=Yb("meta","content",g).get(c+(o.content||""))){for(I=0;I<w.length;I++)if(p=w[I],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(I,1);break t}}p=g.createElement(c),gn(p,c,o),g.head.appendChild(p);break;default:throw Error(i(468,c))}p[Mt]=r,wt(p),c=p}r.stateNode=c}else Kb(g,r.type,r.stateNode);else r.stateNode=Gb(g,c,r.memoizedProps);else p!==c?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,c===null?Kb(g,r.type,r.stateNode):Gb(g,c,r.memoizedProps)):c===null&&r.stateNode!==null&&dm(r,r.memoizedProps,o.memoizedProps)}break;case 27:Zn(s,r),Jn(r),c&512&&(Pt||o===null||li(o,o.return)),o!==null&&c&4&&dm(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Zn(s,r),Jn(r),c&512&&(Pt||o===null||li(o,o.return)),r.flags&32){g=r.stateNode;try{pr(g,"")}catch(le){mt(r,r.return,le)}}c&4&&r.stateNode!=null&&(g=r.memoizedProps,dm(r,g,o!==null?o.memoizedProps:g)),c&1024&&(gm=!0);break;case 6:if(Zn(s,r),Jn(r),c&4){if(r.stateNode===null)throw Error(i(162));c=r.memoizedProps,o=r.stateNode;try{o.nodeValue=c}catch(le){mt(r,r.return,le)}}break;case 3:if(Zd=null,g=Pr,Pr=Qd(s.containerInfo),Zn(s,r),Pr=g,Jn(r),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Uu(s.containerInfo)}catch(le){mt(r,r.return,le)}gm&&(gm=!1,eb(r));break;case 4:c=Pr,Pr=Qd(r.stateNode.containerInfo),Zn(s,r),Jn(r),Pr=c;break;case 12:Zn(s,r),Jn(r);break;case 13:Zn(s,r),Jn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Em=Le()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,mm(r,c)));break;case 22:g=r.memoizedState!==null;var $=o!==null&&o.memoizedState!==null,ae=qi,de=Pt;if(qi=ae||g,Pt=de||$,Zn(s,r),Pt=de,qi=ae,Jn(r),c&8192)e:for(s=r.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(o===null||$||qi||Pt||Pa(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){$=o=s;try{if(p=$.stateNode,g)w=p.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{I=$.stateNode;var me=$.memoizedProps.style,oe=me!=null&&me.hasOwnProperty("display")?me.display:null;I.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(le){mt($,$.return,le)}}}else if(s.tag===6){if(o===null){$=s;try{$.stateNode.nodeValue=g?"":$.memoizedProps}catch(le){mt($,$.return,le)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=r.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,mm(r,o))));break;case 19:Zn(s,r),Jn(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,mm(r,c)));break;case 30:break;case 21:break;default:Zn(s,r),Jn(r)}}function Jn(r){var s=r.flags;if(s&2){try{for(var o,c=r.return;c!==null;){if(G_(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var g=o.stateNode,p=hm(r);zd(r,p,g);break;case 5:var w=o.stateNode;o.flags&32&&(pr(w,""),o.flags&=-33);var I=hm(r);zd(r,I,w);break;case 3:case 4:var $=o.stateNode.containerInfo,ae=hm(r);fm(r,ae,$);break;default:throw Error(i(161))}}catch(de){mt(r,r.return,de)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function eb(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;eb(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function vs(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)X_(r,s.alternate,s),s=s.sibling}function Pa(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:ys(4,s,s.return),Pa(s);break;case 1:li(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&$_(s,s.return,o),Pa(s);break;case 27:ku(s.stateNode);case 26:case 5:li(s,s.return),Pa(s);break;case 22:s.memoizedState===null&&Pa(s);break;case 30:Pa(s);break;default:Pa(s)}r=r.sibling}}function _s(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,g=r,p=s,w=p.flags;switch(p.tag){case 0:case 11:case 15:_s(g,p,o),Eu(4,p);break;case 1:if(_s(g,p,o),c=p,g=c.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ae){mt(c,c.return,ae)}if(c=p,g=c.updateQueue,g!==null){var I=c.stateNode;try{var $=g.shared.hiddenCallbacks;if($!==null)for(g.shared.hiddenCallbacks=null,g=0;g<$.length;g++)Nv($[g],I)}catch(ae){mt(c,c.return,ae)}}o&&w&64&&q_(p),wu(p,p.return);break;case 27:Y_(p);case 26:case 5:_s(g,p,o),o&&c===null&&w&4&&F_(p),wu(p,p.return);break;case 12:_s(g,p,o);break;case 13:_s(g,p,o),o&&w&4&&Z_(g,p);break;case 22:p.memoizedState===null&&_s(g,p,o),wu(p,p.return);break;case 30:break;default:_s(g,p,o)}s=s.sibling}}function pm(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&ou(o))}function ym(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&ou(r))}function ui(r,s,o,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)tb(r,s,o,c),s=s.sibling}function tb(r,s,o,c){var g=s.flags;switch(s.tag){case 0:case 11:case 15:ui(r,s,o,c),g&2048&&Eu(9,s);break;case 1:ui(r,s,o,c);break;case 3:ui(r,s,o,c),g&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&ou(r)));break;case 12:if(g&2048){ui(r,s,o,c),r=s.stateNode;try{var p=s.memoizedProps,w=p.id,I=p.onPostCommit;typeof I=="function"&&I(w,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch($){mt(s,s.return,$)}}else ui(r,s,o,c);break;case 13:ui(r,s,o,c);break;case 23:break;case 22:p=s.stateNode,w=s.alternate,s.memoizedState!==null?p._visibility&2?ui(r,s,o,c):xu(r,s):p._visibility&2?ui(r,s,o,c):(p._visibility|=2,Lo(r,s,o,c,(s.subtreeFlags&10256)!==0)),g&2048&&pm(w,s);break;case 24:ui(r,s,o,c),g&2048&&ym(s.alternate,s);break;default:ui(r,s,o,c)}}function Lo(r,s,o,c,g){for(g=g&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var p=r,w=s,I=o,$=c,ae=w.flags;switch(w.tag){case 0:case 11:case 15:Lo(p,w,I,$,g),Eu(8,w);break;case 23:break;case 22:var de=w.stateNode;w.memoizedState!==null?de._visibility&2?Lo(p,w,I,$,g):xu(p,w):(de._visibility|=2,Lo(p,w,I,$,g)),g&&ae&2048&&pm(w.alternate,w);break;case 24:Lo(p,w,I,$,g),g&&ae&2048&&ym(w.alternate,w);break;default:Lo(p,w,I,$,g)}s=s.sibling}}function xu(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,c=s,g=c.flags;switch(c.tag){case 22:xu(o,c),g&2048&&pm(c.alternate,c);break;case 24:xu(o,c),g&2048&&ym(c.alternate,c);break;default:xu(o,c)}s=s.sibling}}var Tu=8192;function Uo(r){if(r.subtreeFlags&Tu)for(r=r.child;r!==null;)nb(r),r=r.sibling}function nb(r){switch(r.tag){case 26:Uo(r),r.flags&Tu&&r.memoizedState!==null&&$R(Pr,r.memoizedState,r.memoizedProps);break;case 5:Uo(r);break;case 3:case 4:var s=Pr;Pr=Qd(r.stateNode.containerInfo),Uo(r),Pr=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=Tu,Tu=16777216,Uo(r),Tu=s):Uo(r));break;default:Uo(r)}}function rb(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Su(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];sn=c,sb(c,r)}rb(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)ib(r),r=r.sibling}function ib(r){switch(r.tag){case 0:case 11:case 15:Su(r),r.flags&2048&&ys(9,r,r.return);break;case 3:Su(r);break;case 12:Su(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,Ld(r)):Su(r);break;default:Su(r)}}function Ld(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];sn=c,sb(c,r)}rb(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:ys(8,s,s.return),Ld(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Ld(s));break;default:Ld(s)}r=r.sibling}}function sb(r,s){for(;sn!==null;){var o=sn;switch(o.tag){case 0:case 11:case 15:ys(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:ou(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,sn=c;else e:for(o=r;sn!==null;){c=sn;var g=c.sibling,p=c.return;if(Q_(c),c===o){sn=null;break e}if(g!==null){g.return=p,sn=g;break e}sn=p}}}var aR={getCacheForType:function(r){var s=_n(Qt),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},oR=typeof WeakMap=="function"?WeakMap:Map,ut=0,yt=null,Ge=null,Ze=0,ct=0,er=null,bs=!1,Bo=!1,vm=!1,Fi=0,Nt=0,Es=0,Va=0,_m=0,Sr=0,jo=0,Au=null,Un=null,bm=!1,Em=0,Ud=1/0,Bd=null,ws=null,fn=0,xs=null,Ho=null,qo=0,wm=0,xm=null,ab=null,Ru=0,Tm=null;function tr(){if((ut&2)!==0&&Ze!==0)return Ze&-Ze;if(O.T!==null){var r=Io;return r!==0?r:km()}return Yr()}function ob(){Sr===0&&(Sr=(Ze&536870912)===0||st?Ti():536870912);var r=Tr.current;return r!==null&&(r.flags|=32),Sr}function nr(r,s,o){(r===yt&&(ct===2||ct===9)||r.cancelPendingCommit!==null)&&($o(r,0),Ts(r,Ze,Sr,!1)),cr(r,o),((ut&2)===0||r!==yt)&&(r===yt&&((ut&2)===0&&(Va|=o),Nt===4&&Ts(r,Ze,Sr,!1)),ci(r))}function lb(r,s,o){if((ut&6)!==0)throw Error(i(327));var c=!o&&(s&124)===0&&(s&r.expiredLanes)===0||In(r,s),g=c?cR(r,s):Rm(r,s,!0),p=c;do{if(g===0){Bo&&!c&&Ts(r,s,0,!1);break}else{if(o=r.current.alternate,p&&!lR(o)){g=Rm(r,s,!1),p=!1;continue}if(g===2){if(p=s,r.errorRecoveryDisabledLanes&p)var w=0;else w=r.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;e:{var I=r;g=Au;var $=I.current.memoizedState.isDehydrated;if($&&($o(I,w).flags|=256),w=Rm(I,w,!1),w!==2){if(vm&&!$){I.errorRecoveryDisabledLanes|=p,Va|=p,g=4;break e}p=Un,Un=g,p!==null&&(Un===null?Un=p:Un.push.apply(Un,p))}g=w}if(p=!1,g!==2)continue}}if(g===1){$o(r,0),Ts(r,s,0,!0);break}e:{switch(c=r,p=g,p){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ts(c,s,Sr,!bs);break e;case 2:Un=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(g=Em+300-Le(),10<g)){if(Ts(c,s,Sr,!bs),un(c,0,!0)!==0)break e;c.timeoutHandle=zb(ub.bind(null,c,o,Un,Bd,bm,s,Sr,Va,jo,bs,p,2,-0,0),g);break e}ub(c,o,Un,Bd,bm,s,Sr,Va,jo,bs,p,0,-0,0)}}break}while(!0);ci(r)}function ub(r,s,o,c,g,p,w,I,$,ae,de,me,oe,le){if(r.timeoutHandle=-1,me=s.subtreeFlags,(me&8192||(me&16785408)===16785408)&&(Ou={stylesheets:null,count:0,unsuspend:qR},nb(s),me=FR(),me!==null)){r.cancelPendingCommit=me(pb.bind(null,r,s,p,o,c,g,w,I,$,de,1,oe,le)),Ts(r,p,w,!ae);return}pb(r,s,p,o,c,g,w,I,$)}function lR(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var g=o[c],p=g.getSnapshot;g=g.value;try{if(!Qn(p(),g))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ts(r,s,o,c){s&=~_m,s&=~Va,r.suspendedLanes|=s,r.pingedLanes&=~s,c&&(r.warmLanes|=s),c=r.expirationTimes;for(var g=s;0<g;){var p=31-Et(g),w=1<<p;c[p]=-1,g&=~w}o!==0&&dr(r,o,s)}function jd(){return(ut&6)===0?(Cu(0),!1):!0}function Sm(){if(Ge!==null){if(ct===0)var r=Ge.return;else r=Ge,zi=Ia=null,Hg(r),Vo=null,vu=0,r=Ge;for(;r!==null;)H_(r.alternate,r),r=r.return;Ge=null}}function $o(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,AR(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),Sm(),yt=r,Ge=o=Oi(r.current,null),Ze=s,ct=0,er=null,bs=!1,Bo=In(r,s),vm=!1,jo=Sr=_m=Va=Es=Nt=0,Un=Au=null,bm=!1,(s&8)!==0&&(s|=s&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=s;0<c;){var g=31-Et(c),p=1<<g;s|=r[g],c&=~p}return Fi=s,ud(),o}function cb(r,s){je=null,O.H=Cd,s===uu||s===vd?(s=Rv(),ct=3):s===Tv?(s=Rv(),ct=4):ct=s===C_?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,er=s,Ge===null&&(Nt=1,Md(r,br(s,r.current)))}function db(){var r=O.H;return O.H=Cd,r===null?Cd:r}function hb(){var r=O.A;return O.A=aR,r}function Am(){Nt=4,bs||(Ze&4194048)!==Ze&&Tr.current!==null||(Bo=!0),(Es&134217727)===0&&(Va&134217727)===0||yt===null||Ts(yt,Ze,Sr,!1)}function Rm(r,s,o){var c=ut;ut|=2;var g=db(),p=hb();(yt!==r||Ze!==s)&&(Bd=null,$o(r,s)),s=!1;var w=Nt;e:do try{if(ct!==0&&Ge!==null){var I=Ge,$=er;switch(ct){case 8:Sm(),w=6;break e;case 3:case 2:case 9:case 6:Tr.current===null&&(s=!0);var ae=ct;if(ct=0,er=null,Fo(r,I,$,ae),o&&Bo){w=0;break e}break;default:ae=ct,ct=0,er=null,Fo(r,I,$,ae)}}uR(),w=Nt;break}catch(de){cb(r,de)}while(!0);return s&&r.shellSuspendCounter++,zi=Ia=null,ut=c,O.H=g,O.A=p,Ge===null&&(yt=null,Ze=0,ud()),w}function uR(){for(;Ge!==null;)fb(Ge)}function cR(r,s){var o=ut;ut|=2;var c=db(),g=hb();yt!==r||Ze!==s?(Bd=null,Ud=Le()+500,$o(r,s)):Bo=In(r,s);e:do try{if(ct!==0&&Ge!==null){s=Ge;var p=er;t:switch(ct){case 1:ct=0,er=null,Fo(r,s,p,1);break;case 2:case 9:if(Sv(p)){ct=0,er=null,gb(s);break}s=function(){ct!==2&&ct!==9||yt!==r||(ct=7),ci(r)},p.then(s,s);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:Sv(p)?(ct=0,er=null,gb(s)):(ct=0,er=null,Fo(r,s,p,7));break;case 5:var w=null;switch(Ge.tag){case 26:w=Ge.memoizedState;case 5:case 27:var I=Ge;if(!w||Xb(w)){ct=0,er=null;var $=I.sibling;if($!==null)Ge=$;else{var ae=I.return;ae!==null?(Ge=ae,Hd(ae)):Ge=null}break t}}ct=0,er=null,Fo(r,s,p,5);break;case 6:ct=0,er=null,Fo(r,s,p,6);break;case 8:Sm(),Nt=6;break e;default:throw Error(i(462))}}dR();break}catch(de){cb(r,de)}while(!0);return zi=Ia=null,O.H=c,O.A=g,ut=o,Ge!==null?0:(yt=null,Ze=0,ud(),Nt)}function dR(){for(;Ge!==null&&!it();)fb(Ge)}function fb(r){var s=B_(r.alternate,r,Fi);r.memoizedProps=r.pendingProps,s===null?Hd(r):Ge=s}function gb(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=O_(o,s,s.pendingProps,s.type,void 0,Ze);break;case 11:s=O_(o,s,s.pendingProps,s.type.render,s.ref,Ze);break;case 5:Hg(s);default:H_(o,s),s=Ge=mv(s,Fi),s=B_(o,s,Fi)}r.memoizedProps=r.pendingProps,s===null?Hd(r):Ge=s}function Fo(r,s,o,c){zi=Ia=null,Hg(s),Vo=null,vu=0;var g=s.return;try{if(eR(r,g,s,o,Ze)){Nt=1,Md(r,br(o,r.current)),Ge=null;return}}catch(p){if(g!==null)throw Ge=g,p;Nt=1,Md(r,br(o,r.current)),Ge=null;return}s.flags&32768?(st||c===1?r=!0:Bo||(Ze&536870912)!==0?r=!1:(bs=r=!0,(c===2||c===9||c===3||c===6)&&(c=Tr.current,c!==null&&c.tag===13&&(c.flags|=16384))),mb(s,r)):Hd(s)}function Hd(r){var s=r;do{if((s.flags&32768)!==0){mb(s,bs);return}r=s.return;var o=nR(s.alternate,s,Fi);if(o!==null){Ge=o;return}if(s=s.sibling,s!==null){Ge=s;return}Ge=s=r}while(s!==null);Nt===0&&(Nt=5)}function mb(r,s){do{var o=rR(r.alternate,r);if(o!==null){o.flags&=32767,Ge=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){Ge=r;return}Ge=r=o}while(r!==null);Nt=6,Ge=null}function pb(r,s,o,c,g,p,w,I,$){r.cancelPendingCommit=null;do qd();while(fn!==0);if((ut&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(p=s.lanes|s.childLanes,p|=yg,Yn(r,o,p,w,I,$),r===yt&&(Ge=yt=null,Ze=0),Ho=s,xs=r,qo=o,wm=p,xm=g,ab=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,mR(Gt,function(){return Eb(),null})):(r.callbackNode=null,r.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=O.T,O.T=null,g=Y.p,Y.p=2,w=ut,ut|=4;try{iR(r,s,o)}finally{ut=w,Y.p=g,O.T=c}}fn=1,yb(),vb(),_b()}}function yb(){if(fn===1){fn=0;var r=xs,s=Ho,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=O.T,O.T=null;var c=Y.p;Y.p=2;var g=ut;ut|=4;try{J_(s,r);var p=Um,w=sv(r.containerInfo),I=p.focusedElem,$=p.selectionRange;if(w!==I&&I&&I.ownerDocument&&iv(I.ownerDocument.documentElement,I)){if($!==null&&hg(I)){var ae=$.start,de=$.end;if(de===void 0&&(de=ae),"selectionStart"in I)I.selectionStart=ae,I.selectionEnd=Math.min(de,I.value.length);else{var me=I.ownerDocument||document,oe=me&&me.defaultView||window;if(oe.getSelection){var le=oe.getSelection(),Oe=I.textContent.length,Ie=Math.min($.start,Oe),gt=$.end===void 0?Ie:Math.min($.end,Oe);!le.extend&&Ie>gt&&(w=gt,gt=Ie,Ie=w);var ee=rv(I,Ie),Z=rv(I,gt);if(ee&&Z&&(le.rangeCount!==1||le.anchorNode!==ee.node||le.anchorOffset!==ee.offset||le.focusNode!==Z.node||le.focusOffset!==Z.offset)){var ie=me.createRange();ie.setStart(ee.node,ee.offset),le.removeAllRanges(),Ie>gt?(le.addRange(ie),le.extend(Z.node,Z.offset)):(ie.setEnd(Z.node,Z.offset),le.addRange(ie))}}}}for(me=[],le=I;le=le.parentNode;)le.nodeType===1&&me.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<me.length;I++){var ge=me[I];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}th=!!Lm,Um=Lm=null}finally{ut=g,Y.p=c,O.T=o}}r.current=s,fn=2}}function vb(){if(fn===2){fn=0;var r=xs,s=Ho,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=O.T,O.T=null;var c=Y.p;Y.p=2;var g=ut;ut|=4;try{X_(r,s.alternate,s)}finally{ut=g,Y.p=c,O.T=o}}fn=3}}function _b(){if(fn===4||fn===3){fn=0,zt();var r=xs,s=Ho,o=qo,c=ab;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?fn=5:(fn=0,Ho=xs=null,bb(r,r.pendingLanes));var g=r.pendingLanes;if(g===0&&(ws=null),ss(o),s=s.stateNode,Fe&&typeof Fe.onCommitFiberRoot=="function")try{Fe.onCommitFiberRoot(at,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=O.T,g=Y.p,Y.p=2,O.T=null;try{for(var p=r.onRecoverableError,w=0;w<c.length;w++){var I=c[w];p(I.value,{componentStack:I.stack})}}finally{O.T=s,Y.p=g}}(qo&3)!==0&&qd(),ci(r),g=r.pendingLanes,(o&4194090)!==0&&(g&42)!==0?r===Tm?Ru++:(Ru=0,Tm=r):Ru=0,Cu(0)}}function bb(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,ou(s)))}function qd(r){return yb(),vb(),_b(),Eb()}function Eb(){if(fn!==5)return!1;var r=xs,s=wm;wm=0;var o=ss(qo),c=O.T,g=Y.p;try{Y.p=32>o?32:o,O.T=null,o=xm,xm=null;var p=xs,w=qo;if(fn=0,Ho=xs=null,qo=0,(ut&6)!==0)throw Error(i(331));var I=ut;if(ut|=4,ib(p.current),tb(p,p.current,w,o),ut=I,Cu(0,!1),Fe&&typeof Fe.onPostCommitFiberRoot=="function")try{Fe.onPostCommitFiberRoot(at,p)}catch{}return!0}finally{Y.p=g,O.T=c,bb(r,s)}}function wb(r,s,o){s=br(o,s),s=nm(r.stateNode,s,2),r=fs(r,s,2),r!==null&&(cr(r,2),ci(r))}function mt(r,s,o){if(r.tag===3)wb(r,r,o);else for(;s!==null;){if(s.tag===3){wb(s,r,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ws===null||!ws.has(c))){r=br(o,r),o=A_(2),c=fs(s,o,2),c!==null&&(R_(o,c,s,r),cr(c,2),ci(c));break}}s=s.return}}function Cm(r,s,o){var c=r.pingCache;if(c===null){c=r.pingCache=new oR;var g=new Set;c.set(s,g)}else g=c.get(s),g===void 0&&(g=new Set,c.set(s,g));g.has(o)||(vm=!0,g.add(o),r=hR.bind(null,r,s,o),s.then(r,r))}function hR(r,s,o){var c=r.pingCache;c!==null&&c.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,yt===r&&(Ze&o)===o&&(Nt===4||Nt===3&&(Ze&62914560)===Ze&&300>Le()-Em?(ut&2)===0&&$o(r,0):_m|=o,jo===Ze&&(jo=0)),ci(r)}function xb(r,s){s===0&&(s=Ir()),r=Ao(r,s),r!==null&&(cr(r,s),ci(r))}function fR(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),xb(r,o)}function gR(r,s){var o=0;switch(r.tag){case 13:var c=r.stateNode,g=r.memoizedState;g!==null&&(o=g.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),xb(r,o)}function mR(r,s){return ze(r,s)}var $d=null,Go=null,Nm=!1,Fd=!1,Im=!1,za=0;function ci(r){r!==Go&&r.next===null&&(Go===null?$d=Go=r:Go=Go.next=r),Fd=!0,Nm||(Nm=!0,yR())}function Cu(r,s){if(!Im&&Fd){Im=!0;do for(var o=!1,c=$d;c!==null;){if(r!==0){var g=c.pendingLanes;if(g===0)var p=0;else{var w=c.suspendedLanes,I=c.pingedLanes;p=(1<<31-Et(42|r)+1)-1,p&=g&~(w&~I),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,Rb(c,p))}else p=Ze,p=un(c,c===yt?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||In(c,p)||(o=!0,Rb(c,p));c=c.next}while(o);Im=!1}}function pR(){Tb()}function Tb(){Fd=Nm=!1;var r=0;za!==0&&(SR()&&(r=za),za=0);for(var s=Le(),o=null,c=$d;c!==null;){var g=c.next,p=Sb(c,s);p===0?(c.next=null,o===null?$d=g:o.next=g,g===null&&(Go=o)):(o=c,(r!==0||(p&3)!==0)&&(Fd=!0)),c=g}Cu(r)}function Sb(r,s){for(var o=r.suspendedLanes,c=r.pingedLanes,g=r.expirationTimes,p=r.pendingLanes&-62914561;0<p;){var w=31-Et(p),I=1<<w,$=g[w];$===-1?((I&o)===0||(I&c)!==0)&&(g[w]=xi(I,s)):$<=s&&(r.expiredLanes|=I),p&=~I}if(s=yt,o=Ze,o=un(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c=r.callbackNode,o===0||r===s&&(ct===2||ct===9)||r.cancelPendingCommit!==null)return c!==null&&c!==null&&tt(c),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||In(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(c!==null&&tt(c),ss(o)){case 2:case 8:o=vn;break;case 32:o=Gt;break;case 268435456:o=An;break;default:o=Gt}return c=Ab.bind(null,r),o=ze(o,c),r.callbackPriority=s,r.callbackNode=o,s}return c!==null&&c!==null&&tt(c),r.callbackPriority=2,r.callbackNode=null,2}function Ab(r,s){if(fn!==0&&fn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(qd()&&r.callbackNode!==o)return null;var c=Ze;return c=un(r,r===yt?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c===0?null:(lb(r,c,s),Sb(r,Le()),r.callbackNode!=null&&r.callbackNode===o?Ab.bind(null,r):null)}function Rb(r,s){if(qd())return null;lb(r,s,!0)}function yR(){RR(function(){(ut&6)!==0?ze(At,pR):Tb()})}function km(){return za===0&&(za=Ti()),za}function Cb(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:go(""+r)}function Nb(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function vR(r,s,o,c,g){if(s==="submit"&&o&&o.stateNode===g){var p=Cb((g[Rt]||null).action),w=c.submitter;w&&(s=(s=w[Rt]||null)?Cb(s.formAction):w.getAttribute("formAction"),s!==null&&(p=s,w=null));var I=new mo("action","action",null,c,g);r.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(za!==0){var $=w?Nb(g,w):new FormData(g);Wg(o,{pending:!0,data:$,method:g.method,action:p},null,$)}}else typeof p=="function"&&(I.preventDefault(),$=w?Nb(g,w):new FormData(g),Wg(o,{pending:!0,data:$,method:g.method,action:p},p,$))},currentTarget:g}]})}}for(var Dm=0;Dm<pg.length;Dm++){var Mm=pg[Dm],_R=Mm.toLowerCase(),bR=Mm[0].toUpperCase()+Mm.slice(1);Or(_R,"on"+bR)}Or(lv,"onAnimationEnd"),Or(uv,"onAnimationIteration"),Or(cv,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(z2,"onTransitionRun"),Or(L2,"onTransitionStart"),Or(U2,"onTransitionCancel"),Or(dv,"onTransitionEnd"),kr("onMouseEnter",["mouseout","mouseover"]),kr("onMouseLeave",["mouseout","mouseover"]),kr("onPointerEnter",["pointerout","pointerover"]),kr("onPointerLeave",["pointerout","pointerover"]),Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ER=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nu));function Ib(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var c=r[o],g=c.event;c=c.listeners;e:{var p=void 0;if(s)for(var w=c.length-1;0<=w;w--){var I=c[w],$=I.instance,ae=I.currentTarget;if(I=I.listener,$!==p&&g.isPropagationStopped())break e;p=I,g.currentTarget=ae;try{p(g)}catch(de){Dd(de)}g.currentTarget=null,p=$}else for(w=0;w<c.length;w++){if(I=c[w],$=I.instance,ae=I.currentTarget,I=I.listener,$!==p&&g.isPropagationStopped())break e;p=I,g.currentTarget=ae;try{p(g)}catch(de){Dd(de)}g.currentTarget=null,p=$}}}}function Ye(r,s){var o=s[ua];o===void 0&&(o=s[ua]=new Set);var c=r+"__bubble";o.has(c)||(kb(s,r,2,!1),o.add(c))}function Om(r,s,o){var c=0;s&&(c|=4),kb(o,r,c,s)}var Gd="_reactListening"+Math.random().toString(36).slice(2);function Pm(r){if(!r[Gd]){r[Gd]=!0,ca.forEach(function(o){o!=="selectionchange"&&(ER.has(o)||Om(o,!1,r),Om(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Gd]||(s[Gd]=!0,Om("selectionchange",!1,s))}}function kb(r,s,o,c){switch(tE(s)){case 2:var g=KR;break;case 8:g=XR;break;default:g=Xm}o=g.bind(null,s,o,r),g=void 0,!vr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),c?g!==void 0?r.addEventListener(s,o,{capture:!0,passive:g}):r.addEventListener(s,o,!0):g!==void 0?r.addEventListener(s,o,{passive:g}):r.addEventListener(s,o,!1)}function Vm(r,s,o,c,g){var p=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var I=c.stateNode.containerInfo;if(I===g)break;if(w===4)for(w=c.return;w!==null;){var $=w.tag;if(($===3||$===4)&&w.stateNode.containerInfo===g)return;w=w.return}for(;I!==null;){if(w=hr(I),w===null)return;if($=w.tag,$===5||$===6||$===26||$===27){c=p=w;continue e}I=I.parentNode}}c=c.return}Kc(function(){var ae=p,de=yr(o),me=[];e:{var oe=hv.get(r);if(oe!==void 0){var le=mo,Oe=r;switch(r){case"keypress":if(ti(o)===0)break e;case"keydown":case"keyup":le=Eo;break;case"focusin":Oe="focus",le=vo;break;case"focusout":Oe="blur",le=vo;break;case"beforeblur":case"afterblur":le=vo;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=_r;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=lg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=nd;break;case lv:case uv:case cv:le=_o;break;case dv:le=id;break;case"scroll":case"scrollend":le=Xc;break;case"wheel":le=wo;break;case"copy":case"cut":case"paste":le=bo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=Jl;break;case"toggle":case"beforetoggle":le=ad}var Ie=(s&4)!==0,gt=!Ie&&(r==="scroll"||r==="scrollend"),ee=Ie?oe!==null?oe+"Capture":null:oe;Ie=[];for(var Z=ae,ie;Z!==null;){var ge=Z;if(ie=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||ie===null||ee===null||(ge=pa(Z,ee),ge!=null&&Ie.push(Iu(Z,ge,ie))),gt)break;Z=Z.return}0<Ie.length&&(oe=new le(oe,Oe,null,o,de),me.push({event:oe,listeners:Ie}))}}if((s&7)===0){e:{if(oe=r==="mouseover"||r==="pointerover",le=r==="mouseout"||r==="pointerout",oe&&o!==Ci&&(Oe=o.relatedTarget||o.fromElement)&&(hr(Oe)||Oe[Vn]))break e;if((le||oe)&&(oe=de.window===de?de:(oe=de.ownerDocument)?oe.defaultView||oe.parentWindow:window,le?(Oe=o.relatedTarget||o.toElement,le=ae,Oe=Oe?hr(Oe):null,Oe!==null&&(gt=l(Oe),Ie=Oe.tag,Oe!==gt||Ie!==5&&Ie!==27&&Ie!==6)&&(Oe=null)):(le=null,Oe=ae),le!==Oe)){if(Ie=_r,ge="onMouseLeave",ee="onMouseEnter",Z="mouse",(r==="pointerout"||r==="pointerover")&&(Ie=Jl,ge="onPointerLeave",ee="onPointerEnter",Z="pointer"),gt=le==null?oe:gr(le),ie=Oe==null?oe:gr(Oe),oe=new Ie(ge,Z+"leave",le,o,de),oe.target=gt,oe.relatedTarget=ie,ge=null,hr(de)===ae&&(Ie=new Ie(ee,Z+"enter",Oe,o,de),Ie.target=ie,Ie.relatedTarget=gt,ge=Ie),gt=ge,le&&Oe)t:{for(Ie=le,ee=Oe,Z=0,ie=Ie;ie;ie=Yo(ie))Z++;for(ie=0,ge=ee;ge;ge=Yo(ge))ie++;for(;0<Z-ie;)Ie=Yo(Ie),Z--;for(;0<ie-Z;)ee=Yo(ee),ie--;for(;Z--;){if(Ie===ee||ee!==null&&Ie===ee.alternate)break t;Ie=Yo(Ie),ee=Yo(ee)}Ie=null}else Ie=null;le!==null&&Db(me,oe,le,Ie,!1),Oe!==null&&gt!==null&&Db(me,gt,Oe,Ie,!0)}}e:{if(oe=ae?gr(ae):window,le=oe.nodeName&&oe.nodeName.toLowerCase(),le==="select"||le==="input"&&oe.type==="file")var Te=Wy;else if(Xt(oe))if(Zy)Te=O2;else{Te=D2;var qe=k2}else le=oe.nodeName,!le||le.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?ae&&Gl(ae.elementType)&&(Te=Wy):Te=M2;if(Te&&(Te=Te(r,ae))){Mi(me,Te,o,de);break e}qe&&qe(r,oe,ae),r==="focusout"&&ae&&oe.type==="number"&&ae.memoizedProps.value!=null&&ls(oe,"number",oe.value)}switch(qe=ae?gr(ae):window,r){case"focusin":(Xt(qe)||qe.contentEditable==="true")&&(xo=qe,fg=ae,nu=null);break;case"focusout":nu=fg=xo=null;break;case"mousedown":gg=!0;break;case"contextmenu":case"mouseup":case"dragend":gg=!1,av(me,o,de);break;case"selectionchange":if(V2)break;case"keydown":case"keyup":av(me,o,de)}var Re;if(ii)e:{switch(r){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Qe?ue(r,o)&&(ke="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(ke="onCompositionStart");ke&&(E&&o.locale!=="ko"&&(Qe||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Qe&&(Re=Kl()):(ei=de,us="value"in ei?ei.value:ei.textContent,Qe=!0)),qe=Yd(ae,ke),0<qe.length&&(ke=new Wl(ke,r,null,o,de),me.push({event:ke,listeners:qe}),Re?ke.data=Re:(Re=be(o),Re!==null&&(ke.data=Re)))),(Re=_?Kt(r,o):We(r,o))&&(ke=Yd(ae,"onBeforeInput"),0<ke.length&&(qe=new Wl("onBeforeInput","beforeinput",null,o,de),me.push({event:qe,listeners:ke}),qe.data=Re)),vR(me,r,ae,o,de)}Ib(me,s)})}function Iu(r,s,o){return{instance:r,listener:s,currentTarget:o}}function Yd(r,s){for(var o=s+"Capture",c=[];r!==null;){var g=r,p=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||p===null||(g=pa(r,o),g!=null&&c.unshift(Iu(r,g,p)),g=pa(r,s),g!=null&&c.push(Iu(r,g,p))),r.tag===3)return c;r=r.return}return[]}function Yo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Db(r,s,o,c,g){for(var p=s._reactName,w=[];o!==null&&o!==c;){var I=o,$=I.alternate,ae=I.stateNode;if(I=I.tag,$!==null&&$===c)break;I!==5&&I!==26&&I!==27||ae===null||($=ae,g?(ae=pa(o,p),ae!=null&&w.unshift(Iu(o,ae,$))):g||(ae=pa(o,p),ae!=null&&w.push(Iu(o,ae,$)))),o=o.return}w.length!==0&&r.push({event:s,listeners:w})}var wR=/\r\n?/g,xR=/\u0000|\uFFFD/g;function Mb(r){return(typeof r=="string"?r:""+r).replace(wR,`
`).replace(xR,"")}function Ob(r,s){return s=Mb(s),Mb(r)===s}function Kd(){}function ft(r,s,o,c,g,p){switch(o){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||pr(r,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&pr(r,""+c);break;case"className":mr(r,"class",c);break;case"tabIndex":mr(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":mr(r,o,c);break;case"style":Fl(r,c,p);break;case"data":if(s!=="object"){mr(r,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=go(""+c),r.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&ft(r,s,"name",g.name,g,null),ft(r,s,"formEncType",g.formEncType,g,null),ft(r,s,"formMethod",g.formMethod,g,null),ft(r,s,"formTarget",g.formTarget,g,null)):(ft(r,s,"encType",g.encType,g,null),ft(r,s,"method",g.method,g,null),ft(r,s,"target",g.target,g,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=go(""+c),r.setAttribute(o,c);break;case"onClick":c!=null&&(r.onclick=Kd);break;case"onScroll":c!=null&&Ye("scroll",r);break;case"onScrollEnd":c!=null&&Ye("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(g.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}o=go(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""+c):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":c===!0?r.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,c):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(o,c):r.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(o):r.setAttribute(o,c);break;case"popover":Ye("beforetoggle",r),Ye("toggle",r),Qr(r,"popover",c);break;case"xlinkActuate":Yt(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Yt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Yt(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Yt(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Yt(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Yt(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Qr(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=ag.get(o)||o,Qr(r,o,c))}}function zm(r,s,o,c,g,p){switch(o){case"style":Fl(r,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(g.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof c=="string"?pr(r,c):(typeof c=="number"||typeof c=="bigint")&&pr(r,""+c);break;case"onScroll":c!=null&&Ye("scroll",r);break;case"onScrollEnd":c!=null&&Ye("scrollend",r);break;case"onClick":c!=null&&(r.onclick=Kd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!as.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(g=o.endsWith("Capture"),s=o.slice(2,g?o.length-7:void 0),p=r[Rt]||null,p=p!=null?p[o]:null,typeof p=="function"&&r.removeEventListener(s,p,g),typeof c=="function")){typeof p!="function"&&p!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,c,g);break e}o in r?r[o]=c:c===!0?r.setAttribute(o,""):Qr(r,o,c)}}}function gn(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",r),Ye("load",r);var c=!1,g=!1,p;for(p in o)if(o.hasOwnProperty(p)){var w=o[p];if(w!=null)switch(p){case"src":c=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ft(r,s,p,w,o,null)}}g&&ft(r,s,"srcSet",o.srcSet,o,null),c&&ft(r,s,"src",o.src,o,null);return;case"input":Ye("invalid",r);var I=p=w=g=null,$=null,ae=null;for(c in o)if(o.hasOwnProperty(c)){var de=o[c];if(de!=null)switch(c){case"name":g=de;break;case"type":w=de;break;case"checked":$=de;break;case"defaultChecked":ae=de;break;case"value":p=de;break;case"defaultValue":I=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(i(137,s));break;default:ft(r,s,c,de,o,null)}}fa(r,p,I,$,ae,w,g,!1),fo(r);return;case"select":Ye("invalid",r),c=w=p=null;for(g in o)if(o.hasOwnProperty(g)&&(I=o[g],I!=null))switch(g){case"value":p=I;break;case"defaultValue":w=I;break;case"multiple":c=I;default:ft(r,s,g,I,o,null)}s=p,o=w,r.multiple=!!c,s!=null?Ri(r,!!c,s,!1):o!=null&&Ri(r,!!c,o,!0);return;case"textarea":Ye("invalid",r),p=g=c=null;for(w in o)if(o.hasOwnProperty(w)&&(I=o[w],I!=null))switch(w){case"value":c=I;break;case"defaultValue":g=I;break;case"children":p=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:ft(r,s,w,I,o,null)}ga(r,c,g,p),fo(r);return;case"option":for($ in o)if(o.hasOwnProperty($)&&(c=o[$],c!=null))switch($){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ft(r,s,$,c,o,null)}return;case"dialog":Ye("beforetoggle",r),Ye("toggle",r),Ye("cancel",r),Ye("close",r);break;case"iframe":case"object":Ye("load",r);break;case"video":case"audio":for(c=0;c<Nu.length;c++)Ye(Nu[c],r);break;case"image":Ye("error",r),Ye("load",r);break;case"details":Ye("toggle",r);break;case"embed":case"source":case"link":Ye("error",r),Ye("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in o)if(o.hasOwnProperty(ae)&&(c=o[ae],c!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ft(r,s,ae,c,o,null)}return;default:if(Gl(s)){for(de in o)o.hasOwnProperty(de)&&(c=o[de],c!==void 0&&zm(r,s,de,c,o,void 0));return}}for(I in o)o.hasOwnProperty(I)&&(c=o[I],c!=null&&ft(r,s,I,c,o,null))}function TR(r,s,o,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,p=null,w=null,I=null,$=null,ae=null,de=null;for(le in o){var me=o[le];if(o.hasOwnProperty(le)&&me!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":$=me;default:c.hasOwnProperty(le)||ft(r,s,le,null,c,me)}}for(var oe in c){var le=c[oe];if(me=o[oe],c.hasOwnProperty(oe)&&(le!=null||me!=null))switch(oe){case"type":p=le;break;case"name":g=le;break;case"checked":ae=le;break;case"defaultChecked":de=le;break;case"value":w=le;break;case"defaultValue":I=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(i(137,s));break;default:le!==me&&ft(r,s,oe,le,c,me)}}Xn(r,w,I,$,ae,de,p,g);return;case"select":le=w=I=oe=null;for(p in o)if($=o[p],o.hasOwnProperty(p)&&$!=null)switch(p){case"value":break;case"multiple":le=$;default:c.hasOwnProperty(p)||ft(r,s,p,null,c,$)}for(g in c)if(p=c[g],$=o[g],c.hasOwnProperty(g)&&(p!=null||$!=null))switch(g){case"value":oe=p;break;case"defaultValue":I=p;break;case"multiple":w=p;default:p!==$&&ft(r,s,g,p,c,$)}s=I,o=w,c=le,oe!=null?Ri(r,!!o,oe,!1):!!c!=!!o&&(s!=null?Ri(r,!!o,s,!0):Ri(r,!!o,o?[]:"",!1));return;case"textarea":le=oe=null;for(I in o)if(g=o[I],o.hasOwnProperty(I)&&g!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:ft(r,s,I,null,c,g)}for(w in c)if(g=c[w],p=o[w],c.hasOwnProperty(w)&&(g!=null||p!=null))switch(w){case"value":oe=g;break;case"defaultValue":le=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==p&&ft(r,s,w,g,c,p)}dt(r,oe,le);return;case"option":for(var Oe in o)if(oe=o[Oe],o.hasOwnProperty(Oe)&&oe!=null&&!c.hasOwnProperty(Oe))switch(Oe){case"selected":r.selected=!1;break;default:ft(r,s,Oe,null,c,oe)}for($ in c)if(oe=c[$],le=o[$],c.hasOwnProperty($)&&oe!==le&&(oe!=null||le!=null))switch($){case"selected":r.selected=oe&&typeof oe!="function"&&typeof oe!="symbol";break;default:ft(r,s,$,oe,c,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in o)oe=o[Ie],o.hasOwnProperty(Ie)&&oe!=null&&!c.hasOwnProperty(Ie)&&ft(r,s,Ie,null,c,oe);for(ae in c)if(oe=c[ae],le=o[ae],c.hasOwnProperty(ae)&&oe!==le&&(oe!=null||le!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,s));break;default:ft(r,s,ae,oe,c,le)}return;default:if(Gl(s)){for(var gt in o)oe=o[gt],o.hasOwnProperty(gt)&&oe!==void 0&&!c.hasOwnProperty(gt)&&zm(r,s,gt,void 0,c,oe);for(de in c)oe=c[de],le=o[de],!c.hasOwnProperty(de)||oe===le||oe===void 0&&le===void 0||zm(r,s,de,oe,c,le);return}}for(var ee in o)oe=o[ee],o.hasOwnProperty(ee)&&oe!=null&&!c.hasOwnProperty(ee)&&ft(r,s,ee,null,c,oe);for(me in c)oe=c[me],le=o[me],!c.hasOwnProperty(me)||oe===le||oe==null&&le==null||ft(r,s,me,oe,c,le)}var Lm=null,Um=null;function Xd(r){return r.nodeType===9?r:r.ownerDocument}function Pb(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vb(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Bm(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var jm=null;function SR(){var r=window.event;return r&&r.type==="popstate"?r===jm?!1:(jm=r,!0):(jm=null,!1)}var zb=typeof setTimeout=="function"?setTimeout:void 0,AR=typeof clearTimeout=="function"?clearTimeout:void 0,Lb=typeof Promise=="function"?Promise:void 0,RR=typeof queueMicrotask=="function"?queueMicrotask:typeof Lb<"u"?function(r){return Lb.resolve(null).then(r).catch(CR)}:zb;function CR(r){setTimeout(function(){throw r})}function Ss(r){return r==="head"}function Ub(r,s){var o=s,c=0,g=0;do{var p=o.nextSibling;if(r.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(0<c&&8>c){o=c;var w=r.ownerDocument;if(o&1&&ku(w.documentElement),o&2&&ku(w.body),o&4)for(o=w.head,ku(o),w=o.firstChild;w;){var I=w.nextSibling,$=w.nodeName;w[Si]||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&w.rel.toLowerCase()==="stylesheet"||o.removeChild(w),w=I}}if(g===0){r.removeChild(p),Uu(s);return}g--}else o==="$"||o==="$?"||o==="$!"?g++:c=o.charCodeAt(0)-48;else c=0;o=p}while(o);Uu(s)}function Hm(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Hm(o),Xr(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function NR(r,s,o,c){for(;r.nodeType===1;){var g=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[Si])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(p=r.getAttribute("rel"),p==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(p!==g.rel||r.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||r.getAttribute("title")!==(g.title==null?null:g.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(p=r.getAttribute("src"),(p!==(g.src==null?null:g.src)||r.getAttribute("type")!==(g.type==null?null:g.type)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&p&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var p=g.name==null?null:""+g.name;if(g.type==="hidden"&&r.getAttribute("name")===p)return r}else return r;if(r=Vr(r.nextSibling),r===null)break}return null}function IR(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Vr(r.nextSibling),r===null))return null;return r}function qm(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function kR(r,s){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")s();else{var c=function(){s(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),r._reactRetry=c}}function Vr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var $m=null;function Bb(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function jb(r,s,o){switch(s=Xd(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function ku(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Xr(r)}var Ar=new Map,Hb=new Set;function Qd(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Gi=Y.d;Y.d={f:DR,r:MR,D:OR,C:PR,L:VR,m:zR,X:UR,S:LR,M:BR};function DR(){var r=Gi.f(),s=jd();return r||s}function MR(r){var s=fr(r);s!==null&&s.tag===5&&s.type==="form"?l_(s):Gi.r(r)}var Ko=typeof document>"u"?null:document;function qb(r,s,o){var c=Ko;if(c&&typeof s=="string"&&s){var g=Bt(s);g='link[rel="'+r+'"][href="'+g+'"]',typeof o=="string"&&(g+='[crossorigin="'+o+'"]'),Hb.has(g)||(Hb.add(g),r={rel:r,crossOrigin:o,href:s},c.querySelector(g)===null&&(s=c.createElement("link"),gn(s,"link",r),wt(s),c.head.appendChild(s)))}}function OR(r){Gi.D(r),qb("dns-prefetch",r,null)}function PR(r,s){Gi.C(r,s),qb("preconnect",r,s)}function VR(r,s,o){Gi.L(r,s,o);var c=Ko;if(c&&r&&s){var g='link[rel="preload"][as="'+Bt(s)+'"]';s==="image"&&o&&o.imageSrcSet?(g+='[imagesrcset="'+Bt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(g+='[imagesizes="'+Bt(o.imageSizes)+'"]')):g+='[href="'+Bt(r)+'"]';var p=g;switch(s){case"style":p=Xo(r);break;case"script":p=Qo(r)}Ar.has(p)||(r=y({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),Ar.set(p,r),c.querySelector(g)!==null||s==="style"&&c.querySelector(Du(p))||s==="script"&&c.querySelector(Mu(p))||(s=c.createElement("link"),gn(s,"link",r),wt(s),c.head.appendChild(s)))}}function zR(r,s){Gi.m(r,s);var o=Ko;if(o&&r){var c=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+Bt(c)+'"][href="'+Bt(r)+'"]',p=g;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Qo(r)}if(!Ar.has(p)&&(r=y({rel:"modulepreload",href:r},s),Ar.set(p,r),o.querySelector(g)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Mu(p)))return}c=o.createElement("link"),gn(c,"link",r),wt(c),o.head.appendChild(c)}}}function LR(r,s,o){Gi.S(r,s,o);var c=Ko;if(c&&r){var g=cn(c).hoistableStyles,p=Xo(r);s=s||"default";var w=g.get(p);if(!w){var I={loading:0,preload:null};if(w=c.querySelector(Du(p)))I.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":s},o),(o=Ar.get(p))&&Fm(r,o);var $=w=c.createElement("link");wt($),gn($,"link",r),$._p=new Promise(function(ae,de){$.onload=ae,$.onerror=de}),$.addEventListener("load",function(){I.loading|=1}),$.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Wd(w,s,c)}w={type:"stylesheet",instance:w,count:1,state:I},g.set(p,w)}}}function UR(r,s){Gi.X(r,s);var o=Ko;if(o&&r){var c=cn(o).hoistableScripts,g=Qo(r),p=c.get(g);p||(p=o.querySelector(Mu(g)),p||(r=y({src:r,async:!0},s),(s=Ar.get(g))&&Gm(r,s),p=o.createElement("script"),wt(p),gn(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(g,p))}}function BR(r,s){Gi.M(r,s);var o=Ko;if(o&&r){var c=cn(o).hoistableScripts,g=Qo(r),p=c.get(g);p||(p=o.querySelector(Mu(g)),p||(r=y({src:r,async:!0,type:"module"},s),(s=Ar.get(g))&&Gm(r,s),p=o.createElement("script"),wt(p),gn(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(g,p))}}function $b(r,s,o,c){var g=(g=ce.current)?Qd(g):null;if(!g)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Xo(o.href),o=cn(g).hoistableStyles,c=o.get(s),c||(c={type:"style",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Xo(o.href);var p=cn(g).hoistableStyles,w=p.get(r);if(w||(g=g.ownerDocument||g,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(r,w),(p=g.querySelector(Du(r)))&&!p._p&&(w.instance=p,w.state.loading=5),Ar.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ar.set(r,o),p||jR(g,r,o,w.state))),s&&c===null)throw Error(i(528,""));return w}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Qo(o),o=cn(g).hoistableScripts,c=o.get(s),c||(c={type:"script",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Xo(r){return'href="'+Bt(r)+'"'}function Du(r){return'link[rel="stylesheet"]['+r+"]"}function Fb(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function jR(r,s,o,c){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=r.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),gn(s,"link",o),wt(s),r.head.appendChild(s))}function Qo(r){return'[src="'+Bt(r)+'"]'}function Mu(r){return"script[async]"+r}function Gb(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var c=r.querySelector('style[data-href~="'+Bt(o.href)+'"]');if(c)return s.instance=c,wt(c),c;var g=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),wt(c),gn(c,"style",g),Wd(c,o.precedence,r),s.instance=c;case"stylesheet":g=Xo(o.href);var p=r.querySelector(Du(g));if(p)return s.state.loading|=4,s.instance=p,wt(p),p;c=Fb(o),(g=Ar.get(g))&&Fm(c,g),p=(r.ownerDocument||r).createElement("link"),wt(p);var w=p;return w._p=new Promise(function(I,$){w.onload=I,w.onerror=$}),gn(p,"link",c),s.state.loading|=4,Wd(p,o.precedence,r),s.instance=p;case"script":return p=Qo(o.src),(g=r.querySelector(Mu(p)))?(s.instance=g,wt(g),g):(c=o,(g=Ar.get(p))&&(c=y({},o),Gm(c,g)),r=r.ownerDocument||r,g=r.createElement("script"),wt(g),gn(g,"link",c),r.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Wd(c,o.precedence,r));return s.instance}function Wd(r,s,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=c.length?c[c.length-1]:null,p=g,w=0;w<c.length;w++){var I=c[w];if(I.dataset.precedence===s)p=I;else if(p!==g)break}p?p.parentNode.insertBefore(r,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function Fm(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Gm(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Zd=null;function Yb(r,s,o){if(Zd===null){var c=new Map,g=Zd=new Map;g.set(o,c)}else g=Zd,c=g.get(o),c||(c=new Map,g.set(o,c));if(c.has(r))return c;for(c.set(r,null),o=o.getElementsByTagName(r),g=0;g<o.length;g++){var p=o[g];if(!(p[Si]||p[Mt]||r==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var w=p.getAttribute(s)||"";w=r+w;var I=c.get(w);I?I.push(p):c.set(w,[p])}}return c}function Kb(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function HR(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Xb(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Ou=null;function qR(){}function $R(r,s,o){if(Ou===null)throw Error(i(475));var c=Ou;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var g=Xo(o.href),p=r.querySelector(Du(g));if(p){r=p._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(c.count++,c=Jd.bind(c),r.then(c,c)),s.state.loading|=4,s.instance=p,wt(p);return}p=r.ownerDocument||r,o=Fb(o),(g=Ar.get(g))&&Fm(o,g),p=p.createElement("link"),wt(p);var w=p;w._p=new Promise(function(I,$){w.onload=I,w.onerror=$}),gn(p,"link",o),s.instance=p}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=Jd.bind(c),r.addEventListener("load",s),r.addEventListener("error",s))}}function FR(){if(Ou===null)throw Error(i(475));var r=Ou;return r.stylesheets&&r.count===0&&Ym(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&Ym(r,r.stylesheets),r.unsuspend){var c=r.unsuspend;r.unsuspend=null,c()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function Jd(){if(this.count--,this.count===0){if(this.stylesheets)Ym(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var eh=null;function Ym(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,eh=new Map,s.forEach(GR,r),eh=null,Jd.call(r))}function GR(r,s){if(!(s.state.loading&4)){var o=eh.get(r);if(o)var c=o.get(null);else{o=new Map,eh.set(r,o);for(var g=r.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<g.length;p++){var w=g[p];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),c=w)}c&&o.set(null,c)}g=s.instance,w=g.getAttribute("data-precedence"),p=o.get(w)||c,p===c&&o.set(null,g),o.set(w,g),this.count++,c=Jd.bind(this),g.addEventListener("load",c),g.addEventListener("error",c),p?p.parentNode.insertBefore(g,p.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(g,r.firstChild)),s.state.loading|=4}}var Pu={$$typeof:F,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function YR(r,s,o,c,g,p,w,I){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gn(0),this.hiddenUpdates=Gn(null),this.identifierPrefix=c,this.onUncaughtError=g,this.onCaughtError=p,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function Qb(r,s,o,c,g,p,w,I,$,ae,de,me){return r=new YR(r,s,o,w,I,$,ae,me),s=1,p===!0&&(s|=24),p=Wn(3,null,null,s),r.current=p,p.stateNode=r,s=Cg(),s.refCount++,r.pooledCache=s,s.refCount++,p.memoizedState={element:c,isDehydrated:o,cache:s},Dg(p),r}function Wb(r){return r?(r=Ro,r):Ro}function Zb(r,s,o,c,g,p){g=Wb(g),c.context===null?c.context=g:c.pendingContext=g,c=hs(s),c.payload={element:o},p=p===void 0?null:p,p!==null&&(c.callback=p),o=fs(r,c,s),o!==null&&(nr(o,r,s),du(o,r,s))}function Jb(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function Km(r,s){Jb(r,s),(r=r.alternate)&&Jb(r,s)}function eE(r){if(r.tag===13){var s=Ao(r,67108864);s!==null&&nr(s,r,67108864),Km(r,67108864)}}var th=!0;function KR(r,s,o,c){var g=O.T;O.T=null;var p=Y.p;try{Y.p=2,Xm(r,s,o,c)}finally{Y.p=p,O.T=g}}function XR(r,s,o,c){var g=O.T;O.T=null;var p=Y.p;try{Y.p=8,Xm(r,s,o,c)}finally{Y.p=p,O.T=g}}function Xm(r,s,o,c){if(th){var g=Qm(c);if(g===null)Vm(r,s,c,nh,o),nE(r,c);else if(WR(g,r,s,o,c))c.stopPropagation();else if(nE(r,c),s&4&&-1<QR.indexOf(r)){for(;g!==null;){var p=fr(g);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var w=en(p.pendingLanes);if(w!==0){var I=p;for(I.pendingLanes|=2,I.entangledLanes|=2;w;){var $=1<<31-Et(w);I.entanglements[1]|=$,w&=~$}ci(p),(ut&6)===0&&(Ud=Le()+500,Cu(0))}}break;case 13:I=Ao(p,2),I!==null&&nr(I,p,2),jd(),Km(p,2)}if(p=Qm(c),p===null&&Vm(r,s,c,nh,o),p===g)break;g=p}g!==null&&c.stopPropagation()}else Vm(r,s,c,null,o)}}function Qm(r){return r=yr(r),Wm(r)}var nh=null;function Wm(r){if(nh=null,r=hr(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=u(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return nh=r,null}function tE(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ee()){case At:return 2;case vn:return 8;case Gt:case Fn:return 32;case An:return 268435456;default:return 32}default:return 32}}var Zm=!1,As=null,Rs=null,Cs=null,Vu=new Map,zu=new Map,Ns=[],QR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nE(r,s){switch(r){case"focusin":case"focusout":As=null;break;case"dragenter":case"dragleave":Rs=null;break;case"mouseover":case"mouseout":Cs=null;break;case"pointerover":case"pointerout":Vu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":zu.delete(s.pointerId)}}function Lu(r,s,o,c,g,p){return r===null||r.nativeEvent!==p?(r={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:p,targetContainers:[g]},s!==null&&(s=fr(s),s!==null&&eE(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),r)}function WR(r,s,o,c,g){switch(s){case"focusin":return As=Lu(As,r,s,o,c,g),!0;case"dragenter":return Rs=Lu(Rs,r,s,o,c,g),!0;case"mouseover":return Cs=Lu(Cs,r,s,o,c,g),!0;case"pointerover":var p=g.pointerId;return Vu.set(p,Lu(Vu.get(p)||null,r,s,o,c,g)),!0;case"gotpointercapture":return p=g.pointerId,zu.set(p,Lu(zu.get(p)||null,r,s,o,c,g)),!0}return!1}function rE(r){var s=hr(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=u(o),s!==null){r.blockedOn=s,ao(r.priority,function(){if(o.tag===13){var c=tr();c=Gr(c);var g=Ao(o,c);g!==null&&nr(g,o,c),Km(o,c)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function rh(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=Qm(r.nativeEvent);if(o===null){o=r.nativeEvent;var c=new o.constructor(o.type,o);Ci=c,o.target.dispatchEvent(c),Ci=null}else return s=fr(o),s!==null&&eE(s),r.blockedOn=o,!1;s.shift()}return!0}function iE(r,s,o){rh(r)&&o.delete(s)}function ZR(){Zm=!1,As!==null&&rh(As)&&(As=null),Rs!==null&&rh(Rs)&&(Rs=null),Cs!==null&&rh(Cs)&&(Cs=null),Vu.forEach(iE),zu.forEach(iE)}function ih(r,s){r.blockedOn===s&&(r.blockedOn=null,Zm||(Zm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,ZR)))}var sh=null;function sE(r){sh!==r&&(sh=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){sh===r&&(sh=null);for(var s=0;s<r.length;s+=3){var o=r[s],c=r[s+1],g=r[s+2];if(typeof c!="function"){if(Wm(c||o)===null)continue;break}var p=fr(o);p!==null&&(r.splice(s,3),s-=3,Wg(p,{pending:!0,data:g,method:o.method,action:c},c,g))}}))}function Uu(r){function s($){return ih($,r)}As!==null&&ih(As,r),Rs!==null&&ih(Rs,r),Cs!==null&&ih(Cs,r),Vu.forEach(s),zu.forEach(s);for(var o=0;o<Ns.length;o++){var c=Ns[o];c.blockedOn===r&&(c.blockedOn=null)}for(;0<Ns.length&&(o=Ns[0],o.blockedOn===null);)rE(o),o.blockedOn===null&&Ns.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var g=o[c],p=o[c+1],w=g[Rt]||null;if(typeof p=="function")w||sE(o);else if(w){var I=null;if(p&&p.hasAttribute("formAction")){if(g=p,w=p[Rt]||null)I=w.formAction;else if(Wm(g)!==null)continue}else I=w.action;typeof I=="function"?o[c+1]=I:(o.splice(c,3),c-=3),sE(o)}}}function Jm(r){this._internalRoot=r}ah.prototype.render=Jm.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,c=tr();Zb(o,c,r,s,null,null)},ah.prototype.unmount=Jm.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Zb(r.current,2,null,r,null,null),jd(),s[Vn]=null}};function ah(r){this._internalRoot=r}ah.prototype.unstable_scheduleHydration=function(r){if(r){var s=Yr();r={blockedOn:null,target:r,priority:s};for(var o=0;o<Ns.length&&s!==0&&s<Ns[o].priority;o++);Ns.splice(o,0,r),o===0&&rE(r)}};var aE=e.version;if(aE!=="19.1.0")throw Error(i(527,aE,"19.1.0"));Y.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(s),r=r!==null?m(r):null,r=r===null?null:r.stateNode,r};var JR={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oh.isDisabled&&oh.supportsFiber)try{at=oh.inject(JR),Fe=oh}catch{}}return ju.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,c="",g=w_,p=x_,w=T_,I=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(I=s.unstable_transitionCallbacks)),s=Qb(r,1,!1,null,null,o,c,g,p,w,I,null),r[Vn]=s.current,Pm(r),new Jm(s)},ju.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var c=!1,g="",p=w_,w=x_,I=T_,$=null,ae=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(I=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&($=o.unstable_transitionCallbacks),o.formState!==void 0&&(ae=o.formState)),s=Qb(r,1,!0,s,o??null,c,g,p,w,I,$,ae),s.context=Wb(null),o=s.current,c=tr(),c=Gr(c),g=hs(c),g.callback=null,fs(o,g,c),o=c,s.current.lanes=o,cr(s,o),ci(s),r[Vn]=s.current,Pm(r),new ah(s)},ju.version="19.1.0",ju}var pE;function cC(){if(pE)return np.exports;pE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),np.exports=uC(),np.exports}var dC=cC();function Pn(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,i;n<t.length;n++)(i=Pn(t[n]))!==""&&(e+=(e&&" ")+i);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var ap={exports:{}},op={},lp={exports:{}},up={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yE;function hC(){if(yE)return up;yE=1;var t=Ic();function e(v,b){return v===b&&(v!==0||1/v===1/b)||v!==v&&b!==b}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,a=t.useEffect,l=t.useLayoutEffect,u=t.useDebugValue;function d(v,b){var x=b(),C=i({inst:{value:x,getSnapshot:b}}),M=C[0].inst,k=C[1];return l(function(){M.value=x,M.getSnapshot=b,f(M)&&k({inst:M})},[v,x,b]),a(function(){return f(M)&&k({inst:M}),v(function(){f(M)&&k({inst:M})})},[v]),u(x),x}function f(v){var b=v.getSnapshot;v=v.value;try{var x=b();return!n(v,x)}catch{return!0}}function m(v,b){return b()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:d;return up.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:y,up}var vE;function fC(){return vE||(vE=1,lp.exports=hC()),lp.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _E;function gC(){if(_E)return op;_E=1;var t=Ic(),e=fC();function n(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var i=typeof Object.is=="function"?Object.is:n,a=e.useSyncExternalStore,l=t.useRef,u=t.useEffect,d=t.useMemo,f=t.useDebugValue;return op.useSyncExternalStoreWithSelector=function(m,y,v,b,x){var C=l(null);if(C.current===null){var M={hasValue:!1,value:null};C.current=M}else M=C.current;C=d(function(){function L(K){if(!H){if(H=!0,F=K,K=b(K),x!==void 0&&M.hasValue){var S=M.value;if(x(S,K))return j=S}return j=K}if(S=j,i(F,K))return S;var T=b(K);return x!==void 0&&x(S,T)?(F=K,S):(F=K,j=T)}var H=!1,F,j,Q=v===void 0?null:v;return[function(){return L(y())},Q===null?void 0:function(){return L(Q())}]},[y,v,b,x]);var k=a(m,C[0],C[1]);return u(function(){M.hasValue=!0,M.value=k},[k]),f(k),k},op}var bE;function mC(){return bE||(bE=1,ap.exports=gC()),ap.exports}var pC=mC();const yC=ax(pC),vC={},EE=t=>{let e;const n=new Set,i=(y,v)=>{const b=typeof y=="function"?y(e):y;if(!Object.is(b,e)){const x=e;e=v??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(C=>C(e,x))}},a=()=>e,f={setState:i,getState:a,getInitialState:()=>m,subscribe:y=>(n.add(y),()=>n.delete(y)),destroy:()=>{(vC?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},m=e=t(i,a,f);return f},_C=t=>t?EE(t):EE,{useDebugValue:bC}=he,{useSyncExternalStoreWithSelector:EC}=yC,wC=t=>t;function lx(t,e=wC,n){const i=EC(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return bC(i),i}const wE=(t,e)=>{const n=_C(t),i=(a,l=e)=>lx(n,a,l);return Object.assign(i,n),i},xC=(t,e)=>t?wE(t,e):wE;function Tn(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[i,a]of t)if(!Object.is(a,e.get(i)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(e,i)||!Object.is(t[i],e[i]))return!1;return!0}var TC={value:()=>{}};function Sf(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Nh(n)}function Nh(t){this._=t}function SC(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",a=n.indexOf(".");if(a>=0&&(i=n.slice(a+1),n=n.slice(0,a)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Nh.prototype=Sf.prototype={constructor:Nh,on:function(t,e){var n=this._,i=SC(t+"",n),a,l=-1,u=i.length;if(arguments.length<2){for(;++l<u;)if((a=(t=i[l]).type)&&(a=AC(n[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++l<u;)if(a=(t=i[l]).type)n[a]=xE(n[a],t.name,e);else if(e==null)for(a in n)n[a]=xE(n[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Nh(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var n=new Array(a),i=0,a,l;i<a;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(l=this._[t],i=0,a=l.length;i<a;++i)l[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],a=0,l=i.length;a<l;++a)i[a].value.apply(e,n)}};function AC(t,e){for(var n=0,i=t.length,a;n<i;++n)if((a=t[n]).name===e)return a.value}function xE(t,e,n){for(var i=0,a=t.length;i<a;++i)if(t[i].name===e){t[i]=TC,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var zp="http://www.w3.org/1999/xhtml";const TE={svg:"http://www.w3.org/2000/svg",xhtml:zp,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Af(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),TE.hasOwnProperty(e)?{space:TE[e],local:t}:t}function RC(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===zp&&e.documentElement.namespaceURI===zp?e.createElement(t):e.createElementNS(n,t)}}function CC(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ux(t){var e=Af(t);return(e.local?CC:RC)(e)}function NC(){}function N0(t){return t==null?NC:function(){return this.querySelector(t)}}function IC(t){typeof t!="function"&&(t=N0(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var l=e[a],u=l.length,d=i[a]=new Array(u),f,m,y=0;y<u;++y)(f=l[y])&&(m=t.call(f,f.__data__,y,l))&&("__data__"in f&&(m.__data__=f.__data__),d[y]=m);return new lr(i,this._parents)}function kC(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function DC(){return[]}function cx(t){return t==null?DC:function(){return this.querySelectorAll(t)}}function MC(t){return function(){return kC(t.apply(this,arguments))}}function OC(t){typeof t=="function"?t=MC(t):t=cx(t);for(var e=this._groups,n=e.length,i=[],a=[],l=0;l<n;++l)for(var u=e[l],d=u.length,f,m=0;m<d;++m)(f=u[m])&&(i.push(t.call(f,f.__data__,m,u)),a.push(f));return new lr(i,a)}function dx(t){return function(){return this.matches(t)}}function hx(t){return function(e){return e.matches(t)}}var PC=Array.prototype.find;function VC(t){return function(){return PC.call(this.children,t)}}function zC(){return this.firstElementChild}function LC(t){return this.select(t==null?zC:VC(typeof t=="function"?t:hx(t)))}var UC=Array.prototype.filter;function BC(){return Array.from(this.children)}function jC(t){return function(){return UC.call(this.children,t)}}function HC(t){return this.selectAll(t==null?BC:jC(typeof t=="function"?t:hx(t)))}function qC(t){typeof t!="function"&&(t=dx(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var l=e[a],u=l.length,d=i[a]=[],f,m=0;m<u;++m)(f=l[m])&&t.call(f,f.__data__,m,l)&&d.push(f);return new lr(i,this._parents)}function fx(t){return new Array(t.length)}function $C(){return new lr(this._enter||this._groups.map(fx),this._parents)}function Gh(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Gh.prototype={constructor:Gh,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function FC(t){return function(){return t}}function GC(t,e,n,i,a,l){for(var u=0,d,f=e.length,m=l.length;u<m;++u)(d=e[u])?(d.__data__=l[u],i[u]=d):n[u]=new Gh(t,l[u]);for(;u<f;++u)(d=e[u])&&(a[u]=d)}function YC(t,e,n,i,a,l,u){var d,f,m=new Map,y=e.length,v=l.length,b=new Array(y),x;for(d=0;d<y;++d)(f=e[d])&&(b[d]=x=u.call(f,f.__data__,d,e)+"",m.has(x)?a[d]=f:m.set(x,f));for(d=0;d<v;++d)x=u.call(t,l[d],d,l)+"",(f=m.get(x))?(i[d]=f,f.__data__=l[d],m.delete(x)):n[d]=new Gh(t,l[d]);for(d=0;d<y;++d)(f=e[d])&&m.get(b[d])===f&&(a[d]=f)}function KC(t){return t.__data__}function XC(t,e){if(!arguments.length)return Array.from(this,KC);var n=e?YC:GC,i=this._parents,a=this._groups;typeof t!="function"&&(t=FC(t));for(var l=a.length,u=new Array(l),d=new Array(l),f=new Array(l),m=0;m<l;++m){var y=i[m],v=a[m],b=v.length,x=QC(t.call(y,y&&y.__data__,m,i)),C=x.length,M=d[m]=new Array(C),k=u[m]=new Array(C),L=f[m]=new Array(b);n(y,v,M,k,L,x,e);for(var H=0,F=0,j,Q;H<C;++H)if(j=M[H]){for(H>=F&&(F=H+1);!(Q=k[F])&&++F<C;);j._next=Q||null}}return u=new lr(u,i),u._enter=d,u._exit=f,u}function QC(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function WC(){return new lr(this._exit||this._groups.map(fx),this._parents)}function ZC(t,e,n){var i=this.enter(),a=this,l=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),n==null?l.remove():n(l),i&&a?i.merge(a).order():a}function JC(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,a=n.length,l=i.length,u=Math.min(a,l),d=new Array(a),f=0;f<u;++f)for(var m=n[f],y=i[f],v=m.length,b=d[f]=new Array(v),x,C=0;C<v;++C)(x=m[C]||y[C])&&(b[C]=x);for(;f<a;++f)d[f]=n[f];return new lr(d,this._parents)}function eN(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],a=i.length-1,l=i[a],u;--a>=0;)(u=i[a])&&(l&&u.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(u,l),l=u);return this}function tN(t){t||(t=nN);function e(v,b){return v&&b?t(v.__data__,b.__data__):!v-!b}for(var n=this._groups,i=n.length,a=new Array(i),l=0;l<i;++l){for(var u=n[l],d=u.length,f=a[l]=new Array(d),m,y=0;y<d;++y)(m=u[y])&&(f[y]=m);f.sort(e)}return new lr(a,this._parents).order()}function nN(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function rN(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function iN(){return Array.from(this)}function sN(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],a=0,l=i.length;a<l;++a){var u=i[a];if(u)return u}return null}function aN(){let t=0;for(const e of this)++t;return t}function oN(){return!this.node()}function lN(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var a=e[n],l=0,u=a.length,d;l<u;++l)(d=a[l])&&t.call(d,d.__data__,l,a);return this}function uN(t){return function(){this.removeAttribute(t)}}function cN(t){return function(){this.removeAttributeNS(t.space,t.local)}}function dN(t,e){return function(){this.setAttribute(t,e)}}function hN(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function fN(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function gN(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function mN(t,e){var n=Af(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?cN:uN:typeof e=="function"?n.local?gN:fN:n.local?hN:dN)(n,e))}function gx(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function pN(t){return function(){this.style.removeProperty(t)}}function yN(t,e,n){return function(){this.style.setProperty(t,e,n)}}function vN(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function _N(t,e,n){return arguments.length>1?this.each((e==null?pN:typeof e=="function"?vN:yN)(t,e,n??"")):wl(this.node(),t)}function wl(t,e){return t.style.getPropertyValue(e)||gx(t).getComputedStyle(t,null).getPropertyValue(e)}function bN(t){return function(){delete this[t]}}function EN(t,e){return function(){this[t]=e}}function wN(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function xN(t,e){return arguments.length>1?this.each((e==null?bN:typeof e=="function"?wN:EN)(t,e)):this.node()[t]}function mx(t){return t.trim().split(/^|\s+/)}function I0(t){return t.classList||new px(t)}function px(t){this._node=t,this._names=mx(t.getAttribute("class")||"")}px.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function yx(t,e){for(var n=I0(t),i=-1,a=e.length;++i<a;)n.add(e[i])}function vx(t,e){for(var n=I0(t),i=-1,a=e.length;++i<a;)n.remove(e[i])}function TN(t){return function(){yx(this,t)}}function SN(t){return function(){vx(this,t)}}function AN(t,e){return function(){(e.apply(this,arguments)?yx:vx)(this,t)}}function RN(t,e){var n=mx(t+"");if(arguments.length<2){for(var i=I0(this.node()),a=-1,l=n.length;++a<l;)if(!i.contains(n[a]))return!1;return!0}return this.each((typeof e=="function"?AN:e?TN:SN)(n,e))}function CN(){this.textContent=""}function NN(t){return function(){this.textContent=t}}function IN(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function kN(t){return arguments.length?this.each(t==null?CN:(typeof t=="function"?IN:NN)(t)):this.node().textContent}function DN(){this.innerHTML=""}function MN(t){return function(){this.innerHTML=t}}function ON(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function PN(t){return arguments.length?this.each(t==null?DN:(typeof t=="function"?ON:MN)(t)):this.node().innerHTML}function VN(){this.nextSibling&&this.parentNode.appendChild(this)}function zN(){return this.each(VN)}function LN(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function UN(){return this.each(LN)}function BN(t){var e=typeof t=="function"?t:ux(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function jN(){return null}function HN(t,e){var n=typeof t=="function"?t:ux(t),i=e==null?jN:typeof e=="function"?e:N0(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function qN(){var t=this.parentNode;t&&t.removeChild(this)}function $N(){return this.each(qN)}function FN(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function GN(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function YN(t){return this.select(t?GN:FN)}function KN(t){return arguments.length?this.property("__data__",t):this.node().__data__}function XN(t){return function(e){t.call(this,e,this.__data__)}}function QN(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function WN(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,a=e.length,l;n<a;++n)l=e[n],(!t.type||l.type===t.type)&&l.name===t.name?this.removeEventListener(l.type,l.listener,l.options):e[++i]=l;++i?e.length=i:delete this.__on}}}function ZN(t,e,n){return function(){var i=this.__on,a,l=XN(e);if(i){for(var u=0,d=i.length;u<d;++u)if((a=i[u]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=n),a.value=e;return}}this.addEventListener(t.type,l,n),a={type:t.type,name:t.name,value:e,listener:l,options:n},i?i.push(a):this.__on=[a]}}function JN(t,e,n){var i=QN(t+""),a,l=i.length,u;if(arguments.length<2){var d=this.node().__on;if(d){for(var f=0,m=d.length,y;f<m;++f)for(a=0,y=d[f];a<l;++a)if((u=i[a]).type===y.type&&u.name===y.name)return y.value}return}for(d=e?ZN:WN,a=0;a<l;++a)this.each(d(i[a],e,n));return this}function _x(t,e,n){var i=gx(t),a=i.CustomEvent;typeof a=="function"?a=new a(e,n):(a=i.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function eI(t,e){return function(){return _x(this,t,e)}}function tI(t,e){return function(){return _x(this,t,e.apply(this,arguments))}}function nI(t,e){return this.each((typeof e=="function"?tI:eI)(t,e))}function*rI(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],a=0,l=i.length,u;a<l;++a)(u=i[a])&&(yield u)}var bx=[null];function lr(t,e){this._groups=t,this._parents=e}function kc(){return new lr([[document.documentElement]],bx)}function iI(){return this}lr.prototype=kc.prototype={constructor:lr,select:IC,selectAll:OC,selectChild:LC,selectChildren:HC,filter:qC,data:XC,enter:$C,exit:WC,join:ZC,merge:JC,selection:iI,order:eN,sort:tN,call:rN,nodes:iN,node:sN,size:aN,empty:oN,each:lN,attr:mN,style:_N,property:xN,classed:RN,text:kN,html:PN,raise:zN,lower:UN,append:BN,insert:HN,remove:$N,clone:YN,datum:KN,on:JN,dispatch:nI,[Symbol.iterator]:rI};function zr(t){return typeof t=="string"?new lr([[document.querySelector(t)]],[document.documentElement]):new lr([[t]],bx)}function sI(t){let e;for(;e=t.sourceEvent;)t=e;return t}function hi(t,e){if(t=sI(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}const aI={passive:!1},cc={capture:!0,passive:!1};function cp(t){t.stopImmediatePropagation()}function hl(t){t.preventDefault(),t.stopImmediatePropagation()}function Ex(t){var e=t.document.documentElement,n=zr(t).on("dragstart.drag",hl,cc);"onselectstart"in e?n.on("selectstart.drag",hl,cc):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function wx(t,e){var n=t.document.documentElement,i=zr(t).on("dragstart.drag",null);e&&(i.on("click.drag",hl,cc),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const lh=t=>()=>t;function Lp(t,{sourceEvent:e,subject:n,target:i,identifier:a,active:l,x:u,y:d,dx:f,dy:m,dispatch:y}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:m,enumerable:!0,configurable:!0},_:{value:y}})}Lp.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function oI(t){return!t.ctrlKey&&!t.button}function lI(){return this.parentNode}function uI(t,e){return e??{x:t.x,y:t.y}}function cI(){return navigator.maxTouchPoints||"ontouchstart"in this}function dI(){var t=oI,e=lI,n=uI,i=cI,a={},l=Sf("start","drag","end"),u=0,d,f,m,y,v=0;function b(j){j.on("mousedown.drag",x).filter(i).on("touchstart.drag",k).on("touchmove.drag",L,aI).on("touchend.drag touchcancel.drag",H).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(j,Q){if(!(y||!t.call(this,j,Q))){var K=F(this,e.call(this,j,Q),j,Q,"mouse");K&&(zr(j.view).on("mousemove.drag",C,cc).on("mouseup.drag",M,cc),Ex(j.view),cp(j),m=!1,d=j.clientX,f=j.clientY,K("start",j))}}function C(j){if(hl(j),!m){var Q=j.clientX-d,K=j.clientY-f;m=Q*Q+K*K>v}a.mouse("drag",j)}function M(j){zr(j.view).on("mousemove.drag mouseup.drag",null),wx(j.view,m),hl(j),a.mouse("end",j)}function k(j,Q){if(t.call(this,j,Q)){var K=j.changedTouches,S=e.call(this,j,Q),T=K.length,N,V;for(N=0;N<T;++N)(V=F(this,S,j,Q,K[N].identifier,K[N]))&&(cp(j),V("start",j,K[N]))}}function L(j){var Q=j.changedTouches,K=Q.length,S,T;for(S=0;S<K;++S)(T=a[Q[S].identifier])&&(hl(j),T("drag",j,Q[S]))}function H(j){var Q=j.changedTouches,K=Q.length,S,T;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),S=0;S<K;++S)(T=a[Q[S].identifier])&&(cp(j),T("end",j,Q[S]))}function F(j,Q,K,S,T,N){var V=l.copy(),U=hi(N||K,Q),B,R,D;if((D=n.call(j,new Lp("beforestart",{sourceEvent:K,target:b,identifier:T,active:u,x:U[0],y:U[1],dx:0,dy:0,dispatch:V}),S))!=null)return B=D.x-U[0]||0,R=D.y-U[1]||0,function G(O,Y,ne){var J=U,z;switch(O){case"start":a[T]=G,z=u++;break;case"end":delete a[T],--u;case"drag":U=hi(ne||Y,Q),z=u;break}V.call(O,j,new Lp(O,{sourceEvent:Y,subject:D,target:b,identifier:T,active:z,x:U[0]+B,y:U[1]+R,dx:U[0]-J[0],dy:U[1]-J[1],dispatch:V}),S)}}return b.filter=function(j){return arguments.length?(t=typeof j=="function"?j:lh(!!j),b):t},b.container=function(j){return arguments.length?(e=typeof j=="function"?j:lh(j),b):e},b.subject=function(j){return arguments.length?(n=typeof j=="function"?j:lh(j),b):n},b.touchable=function(j){return arguments.length?(i=typeof j=="function"?j:lh(!!j),b):i},b.on=function(){var j=l.on.apply(l,arguments);return j===l?b:j},b.clickDistance=function(j){return arguments.length?(v=(j=+j)*j,b):Math.sqrt(v)},b}function k0(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function xx(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Dc(){}var dc=.7,Yh=1/dc,fl="\\s*([+-]?\\d+)\\s*",hc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",gi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hI=/^#([0-9a-f]{3,8})$/,fI=new RegExp(`^rgb\\(${fl},${fl},${fl}\\)$`),gI=new RegExp(`^rgb\\(${gi},${gi},${gi}\\)$`),mI=new RegExp(`^rgba\\(${fl},${fl},${fl},${hc}\\)$`),pI=new RegExp(`^rgba\\(${gi},${gi},${gi},${hc}\\)$`),yI=new RegExp(`^hsl\\(${hc},${gi},${gi}\\)$`),vI=new RegExp(`^hsla\\(${hc},${gi},${gi},${hc}\\)$`),SE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};k0(Dc,fc,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:AE,formatHex:AE,formatHex8:_I,formatHsl:bI,formatRgb:RE,toString:RE});function AE(){return this.rgb().formatHex()}function _I(){return this.rgb().formatHex8()}function bI(){return Tx(this).formatHsl()}function RE(){return this.rgb().formatRgb()}function fc(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=hI.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?CE(e):n===3?new qn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?uh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?uh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=fI.exec(t))?new qn(e[1],e[2],e[3],1):(e=gI.exec(t))?new qn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=mI.exec(t))?uh(e[1],e[2],e[3],e[4]):(e=pI.exec(t))?uh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=yI.exec(t))?kE(e[1],e[2]/100,e[3]/100,1):(e=vI.exec(t))?kE(e[1],e[2]/100,e[3]/100,e[4]):SE.hasOwnProperty(t)?CE(SE[t]):t==="transparent"?new qn(NaN,NaN,NaN,0):null}function CE(t){return new qn(t>>16&255,t>>8&255,t&255,1)}function uh(t,e,n,i){return i<=0&&(t=e=n=NaN),new qn(t,e,n,i)}function EI(t){return t instanceof Dc||(t=fc(t)),t?(t=t.rgb(),new qn(t.r,t.g,t.b,t.opacity)):new qn}function Up(t,e,n,i){return arguments.length===1?EI(t):new qn(t,e,n,i??1)}function qn(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}k0(qn,Up,xx(Dc,{brighter(t){return t=t==null?Yh:Math.pow(Yh,t),new qn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?dc:Math.pow(dc,t),new qn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new qn($a(this.r),$a(this.g),$a(this.b),Kh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:NE,formatHex:NE,formatHex8:wI,formatRgb:IE,toString:IE}));function NE(){return`#${ja(this.r)}${ja(this.g)}${ja(this.b)}`}function wI(){return`#${ja(this.r)}${ja(this.g)}${ja(this.b)}${ja((isNaN(this.opacity)?1:this.opacity)*255)}`}function IE(){const t=Kh(this.opacity);return`${t===1?"rgb(":"rgba("}${$a(this.r)}, ${$a(this.g)}, ${$a(this.b)}${t===1?")":`, ${t})`}`}function Kh(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function $a(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ja(t){return t=$a(t),(t<16?"0":"")+t.toString(16)}function kE(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Lr(t,e,n,i)}function Tx(t){if(t instanceof Lr)return new Lr(t.h,t.s,t.l,t.opacity);if(t instanceof Dc||(t=fc(t)),!t)return new Lr;if(t instanceof Lr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,a=Math.min(e,n,i),l=Math.max(e,n,i),u=NaN,d=l-a,f=(l+a)/2;return d?(e===l?u=(n-i)/d+(n<i)*6:n===l?u=(i-e)/d+2:u=(e-n)/d+4,d/=f<.5?l+a:2-l-a,u*=60):d=f>0&&f<1?0:u,new Lr(u,d,f,t.opacity)}function xI(t,e,n,i){return arguments.length===1?Tx(t):new Lr(t,e,n,i??1)}function Lr(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}k0(Lr,xI,xx(Dc,{brighter(t){return t=t==null?Yh:Math.pow(Yh,t),new Lr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?dc:Math.pow(dc,t),new Lr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,a=2*n-i;return new qn(dp(t>=240?t-240:t+120,a,i),dp(t,a,i),dp(t<120?t+240:t-120,a,i),this.opacity)},clamp(){return new Lr(DE(this.h),ch(this.s),ch(this.l),Kh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Kh(this.opacity);return`${t===1?"hsl(":"hsla("}${DE(this.h)}, ${ch(this.s)*100}%, ${ch(this.l)*100}%${t===1?")":`, ${t})`}`}}));function DE(t){return t=(t||0)%360,t<0?t+360:t}function ch(t){return Math.max(0,Math.min(1,t||0))}function dp(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Sx=t=>()=>t;function TI(t,e){return function(n){return t+n*e}}function SI(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function AI(t){return(t=+t)==1?Ax:function(e,n){return n-e?SI(e,n,t):Sx(isNaN(e)?n:e)}}function Ax(t,e){var n=e-t;return n?TI(t,n):Sx(isNaN(t)?e:t)}const ME=function t(e){var n=AI(e);function i(a,l){var u=n((a=Up(a)).r,(l=Up(l)).r),d=n(a.g,l.g),f=n(a.b,l.b),m=Ax(a.opacity,l.opacity);return function(y){return a.r=u(y),a.g=d(y),a.b=f(y),a.opacity=m(y),a+""}}return i.gamma=t,i}(1);function Ms(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Bp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hp=new RegExp(Bp.source,"g");function RI(t){return function(){return t}}function CI(t){return function(e){return t(e)+""}}function NI(t,e){var n=Bp.lastIndex=hp.lastIndex=0,i,a,l,u=-1,d=[],f=[];for(t=t+"",e=e+"";(i=Bp.exec(t))&&(a=hp.exec(e));)(l=a.index)>n&&(l=e.slice(n,l),d[u]?d[u]+=l:d[++u]=l),(i=i[0])===(a=a[0])?d[u]?d[u]+=a:d[++u]=a:(d[++u]=null,f.push({i:u,x:Ms(i,a)})),n=hp.lastIndex;return n<e.length&&(l=e.slice(n),d[u]?d[u]+=l:d[++u]=l),d.length<2?f[0]?CI(f[0].x):RI(e):(e=f.length,function(m){for(var y=0,v;y<e;++y)d[(v=f[y]).i]=v.x(m);return d.join("")})}var OE=180/Math.PI,jp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Rx(t,e,n,i,a,l){var u,d,f;return(u=Math.sqrt(t*t+e*e))&&(t/=u,e/=u),(f=t*n+e*i)&&(n-=t*f,i-=e*f),(d=Math.sqrt(n*n+i*i))&&(n/=d,i/=d,f/=d),t*i<e*n&&(t=-t,e=-e,f=-f,u=-u),{translateX:a,translateY:l,rotate:Math.atan2(e,t)*OE,skewX:Math.atan(f)*OE,scaleX:u,scaleY:d}}var dh;function II(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?jp:Rx(e.a,e.b,e.c,e.d,e.e,e.f)}function kI(t){return t==null||(dh||(dh=document.createElementNS("http://www.w3.org/2000/svg","g")),dh.setAttribute("transform",t),!(t=dh.transform.baseVal.consolidate()))?jp:(t=t.matrix,Rx(t.a,t.b,t.c,t.d,t.e,t.f))}function Cx(t,e,n,i){function a(m){return m.length?m.pop()+" ":""}function l(m,y,v,b,x,C){if(m!==v||y!==b){var M=x.push("translate(",null,e,null,n);C.push({i:M-4,x:Ms(m,v)},{i:M-2,x:Ms(y,b)})}else(v||b)&&x.push("translate("+v+e+b+n)}function u(m,y,v,b){m!==y?(m-y>180?y+=360:y-m>180&&(m+=360),b.push({i:v.push(a(v)+"rotate(",null,i)-2,x:Ms(m,y)})):y&&v.push(a(v)+"rotate("+y+i)}function d(m,y,v,b){m!==y?b.push({i:v.push(a(v)+"skewX(",null,i)-2,x:Ms(m,y)}):y&&v.push(a(v)+"skewX("+y+i)}function f(m,y,v,b,x,C){if(m!==v||y!==b){var M=x.push(a(x)+"scale(",null,",",null,")");C.push({i:M-4,x:Ms(m,v)},{i:M-2,x:Ms(y,b)})}else(v!==1||b!==1)&&x.push(a(x)+"scale("+v+","+b+")")}return function(m,y){var v=[],b=[];return m=t(m),y=t(y),l(m.translateX,m.translateY,y.translateX,y.translateY,v,b),u(m.rotate,y.rotate,v,b),d(m.skewX,y.skewX,v,b),f(m.scaleX,m.scaleY,y.scaleX,y.scaleY,v,b),m=y=null,function(x){for(var C=-1,M=b.length,k;++C<M;)v[(k=b[C]).i]=k.x(x);return v.join("")}}}var DI=Cx(II,"px, ","px)","deg)"),MI=Cx(kI,", ",")",")"),OI=1e-12;function PE(t){return((t=Math.exp(t))+1/t)/2}function PI(t){return((t=Math.exp(t))-1/t)/2}function VI(t){return((t=Math.exp(2*t))-1)/(t+1)}const zI=function t(e,n,i){function a(l,u){var d=l[0],f=l[1],m=l[2],y=u[0],v=u[1],b=u[2],x=y-d,C=v-f,M=x*x+C*C,k,L;if(M<OI)L=Math.log(b/m)/e,k=function(S){return[d+S*x,f+S*C,m*Math.exp(e*S*L)]};else{var H=Math.sqrt(M),F=(b*b-m*m+i*M)/(2*m*n*H),j=(b*b-m*m-i*M)/(2*b*n*H),Q=Math.log(Math.sqrt(F*F+1)-F),K=Math.log(Math.sqrt(j*j+1)-j);L=(K-Q)/e,k=function(S){var T=S*L,N=PE(Q),V=m/(n*H)*(N*VI(e*T+Q)-PI(Q));return[d+V*x,f+V*C,m*N/PE(e*T+Q)]}}return k.duration=L*1e3*e/Math.SQRT2,k}return a.rho=function(l){var u=Math.max(.001,+l),d=u*u,f=d*d;return t(u,d,f)},a}(Math.SQRT2,2,4);var xl=0,Yu=0,Hu=0,Nx=1e3,Xh,Ku,Qh=0,Ga=0,Rf=0,gc=typeof performance=="object"&&performance.now?performance:Date,Ix=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function D0(){return Ga||(Ix(LI),Ga=gc.now()+Rf)}function LI(){Ga=0}function Wh(){this._call=this._time=this._next=null}Wh.prototype=kx.prototype={constructor:Wh,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?D0():+n)+(e==null?0:+e),!this._next&&Ku!==this&&(Ku?Ku._next=this:Xh=this,Ku=this),this._call=t,this._time=n,Hp()},stop:function(){this._call&&(this._call=null,this._time=1/0,Hp())}};function kx(t,e,n){var i=new Wh;return i.restart(t,e,n),i}function UI(){D0(),++xl;for(var t=Xh,e;t;)(e=Ga-t._time)>=0&&t._call.call(void 0,e),t=t._next;--xl}function VE(){Ga=(Qh=gc.now())+Rf,xl=Yu=0;try{UI()}finally{xl=0,jI(),Ga=0}}function BI(){var t=gc.now(),e=t-Qh;e>Nx&&(Rf-=e,Qh=t)}function jI(){for(var t,e=Xh,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Xh=n);Ku=t,Hp(i)}function Hp(t){if(!xl){Yu&&(Yu=clearTimeout(Yu));var e=t-Ga;e>24?(t<1/0&&(Yu=setTimeout(VE,t-gc.now()-Rf)),Hu&&(Hu=clearInterval(Hu))):(Hu||(Qh=gc.now(),Hu=setInterval(BI,Nx)),xl=1,Ix(VE))}}function zE(t,e,n){var i=new Wh;return e=e==null?0:+e,i.restart(a=>{i.stop(),t(a+e)},e,n),i}var HI=Sf("start","end","cancel","interrupt"),qI=[],Dx=0,LE=1,qp=2,Ih=3,UE=4,$p=5,kh=6;function Cf(t,e,n,i,a,l){var u=t.__transition;if(!u)t.__transition={};else if(n in u)return;$I(t,n,{name:e,index:i,group:a,on:HI,tween:qI,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:Dx})}function M0(t,e){var n=$r(t,e);if(n.state>Dx)throw new Error("too late; already scheduled");return n}function Ei(t,e){var n=$r(t,e);if(n.state>Ih)throw new Error("too late; already running");return n}function $r(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function $I(t,e,n){var i=t.__transition,a;i[e]=n,n.timer=kx(l,0,n.time);function l(m){n.state=LE,n.timer.restart(u,n.delay,n.time),n.delay<=m&&u(m-n.delay)}function u(m){var y,v,b,x;if(n.state!==LE)return f();for(y in i)if(x=i[y],x.name===n.name){if(x.state===Ih)return zE(u);x.state===UE?(x.state=kh,x.timer.stop(),x.on.call("interrupt",t,t.__data__,x.index,x.group),delete i[y]):+y<e&&(x.state=kh,x.timer.stop(),x.on.call("cancel",t,t.__data__,x.index,x.group),delete i[y])}if(zE(function(){n.state===Ih&&(n.state=UE,n.timer.restart(d,n.delay,n.time),d(m))}),n.state=qp,n.on.call("start",t,t.__data__,n.index,n.group),n.state===qp){for(n.state=Ih,a=new Array(b=n.tween.length),y=0,v=-1;y<b;++y)(x=n.tween[y].value.call(t,t.__data__,n.index,n.group))&&(a[++v]=x);a.length=v+1}}function d(m){for(var y=m<n.duration?n.ease.call(null,m/n.duration):(n.timer.restart(f),n.state=$p,1),v=-1,b=a.length;++v<b;)a[v].call(t,y);n.state===$p&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=kh,n.timer.stop(),delete i[e];for(var m in i)return;delete t.__transition}}function Dh(t,e){var n=t.__transition,i,a,l=!0,u;if(n){e=e==null?null:e+"";for(u in n){if((i=n[u]).name!==e){l=!1;continue}a=i.state>qp&&i.state<$p,i.state=kh,i.timer.stop(),i.on.call(a?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[u]}l&&delete t.__transition}}function FI(t){return this.each(function(){Dh(this,t)})}function GI(t,e){var n,i;return function(){var a=Ei(this,t),l=a.tween;if(l!==n){i=n=l;for(var u=0,d=i.length;u<d;++u)if(i[u].name===e){i=i.slice(),i.splice(u,1);break}}a.tween=i}}function YI(t,e,n){var i,a;if(typeof n!="function")throw new Error;return function(){var l=Ei(this,t),u=l.tween;if(u!==i){a=(i=u).slice();for(var d={name:e,value:n},f=0,m=a.length;f<m;++f)if(a[f].name===e){a[f]=d;break}f===m&&a.push(d)}l.tween=a}}function KI(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=$r(this.node(),n).tween,a=0,l=i.length,u;a<l;++a)if((u=i[a]).name===t)return u.value;return null}return this.each((e==null?GI:YI)(n,t,e))}function O0(t,e,n){var i=t._id;return t.each(function(){var a=Ei(this,i);(a.value||(a.value={}))[e]=n.apply(this,arguments)}),function(a){return $r(a,i).value[e]}}function Mx(t,e){var n;return(typeof e=="number"?Ms:e instanceof fc?ME:(n=fc(e))?(e=n,ME):NI)(t,e)}function XI(t){return function(){this.removeAttribute(t)}}function QI(t){return function(){this.removeAttributeNS(t.space,t.local)}}function WI(t,e,n){var i,a=n+"",l;return function(){var u=this.getAttribute(t);return u===a?null:u===i?l:l=e(i=u,n)}}function ZI(t,e,n){var i,a=n+"",l;return function(){var u=this.getAttributeNS(t.space,t.local);return u===a?null:u===i?l:l=e(i=u,n)}}function JI(t,e,n){var i,a,l;return function(){var u,d=n(this),f;return d==null?void this.removeAttribute(t):(u=this.getAttribute(t),f=d+"",u===f?null:u===i&&f===a?l:(a=f,l=e(i=u,d)))}}function ek(t,e,n){var i,a,l;return function(){var u,d=n(this),f;return d==null?void this.removeAttributeNS(t.space,t.local):(u=this.getAttributeNS(t.space,t.local),f=d+"",u===f?null:u===i&&f===a?l:(a=f,l=e(i=u,d)))}}function tk(t,e){var n=Af(t),i=n==="transform"?MI:Mx;return this.attrTween(t,typeof e=="function"?(n.local?ek:JI)(n,i,O0(this,"attr."+t,e)):e==null?(n.local?QI:XI)(n):(n.local?ZI:WI)(n,i,e))}function nk(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function rk(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function ik(t,e){var n,i;function a(){var l=e.apply(this,arguments);return l!==i&&(n=(i=l)&&rk(t,l)),n}return a._value=e,a}function sk(t,e){var n,i;function a(){var l=e.apply(this,arguments);return l!==i&&(n=(i=l)&&nk(t,l)),n}return a._value=e,a}function ak(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=Af(t);return this.tween(n,(i.local?ik:sk)(i,e))}function ok(t,e){return function(){M0(this,t).delay=+e.apply(this,arguments)}}function lk(t,e){return e=+e,function(){M0(this,t).delay=e}}function uk(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ok:lk)(e,t)):$r(this.node(),e).delay}function ck(t,e){return function(){Ei(this,t).duration=+e.apply(this,arguments)}}function dk(t,e){return e=+e,function(){Ei(this,t).duration=e}}function hk(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ck:dk)(e,t)):$r(this.node(),e).duration}function fk(t,e){if(typeof e!="function")throw new Error;return function(){Ei(this,t).ease=e}}function gk(t){var e=this._id;return arguments.length?this.each(fk(e,t)):$r(this.node(),e).ease}function mk(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ei(this,t).ease=n}}function pk(t){if(typeof t!="function")throw new Error;return this.each(mk(this._id,t))}function yk(t){typeof t!="function"&&(t=dx(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var l=e[a],u=l.length,d=i[a]=[],f,m=0;m<u;++m)(f=l[m])&&t.call(f,f.__data__,m,l)&&d.push(f);return new Ji(i,this._parents,this._name,this._id)}function vk(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,a=n.length,l=Math.min(i,a),u=new Array(i),d=0;d<l;++d)for(var f=e[d],m=n[d],y=f.length,v=u[d]=new Array(y),b,x=0;x<y;++x)(b=f[x]||m[x])&&(v[x]=b);for(;d<i;++d)u[d]=e[d];return new Ji(u,this._parents,this._name,this._id)}function _k(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function bk(t,e,n){var i,a,l=_k(e)?M0:Ei;return function(){var u=l(this,t),d=u.on;d!==i&&(a=(i=d).copy()).on(e,n),u.on=a}}function Ek(t,e){var n=this._id;return arguments.length<2?$r(this.node(),n).on.on(t):this.each(bk(n,t,e))}function wk(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function xk(){return this.on("end.remove",wk(this._id))}function Tk(t){var e=this._name,n=this._id;typeof t!="function"&&(t=N0(t));for(var i=this._groups,a=i.length,l=new Array(a),u=0;u<a;++u)for(var d=i[u],f=d.length,m=l[u]=new Array(f),y,v,b=0;b<f;++b)(y=d[b])&&(v=t.call(y,y.__data__,b,d))&&("__data__"in y&&(v.__data__=y.__data__),m[b]=v,Cf(m[b],e,n,b,m,$r(y,n)));return new Ji(l,this._parents,e,n)}function Sk(t){var e=this._name,n=this._id;typeof t!="function"&&(t=cx(t));for(var i=this._groups,a=i.length,l=[],u=[],d=0;d<a;++d)for(var f=i[d],m=f.length,y,v=0;v<m;++v)if(y=f[v]){for(var b=t.call(y,y.__data__,v,f),x,C=$r(y,n),M=0,k=b.length;M<k;++M)(x=b[M])&&Cf(x,e,n,M,b,C);l.push(b),u.push(y)}return new Ji(l,u,e,n)}var Ak=kc.prototype.constructor;function Rk(){return new Ak(this._groups,this._parents)}function Ck(t,e){var n,i,a;return function(){var l=wl(this,t),u=(this.style.removeProperty(t),wl(this,t));return l===u?null:l===n&&u===i?a:a=e(n=l,i=u)}}function Ox(t){return function(){this.style.removeProperty(t)}}function Nk(t,e,n){var i,a=n+"",l;return function(){var u=wl(this,t);return u===a?null:u===i?l:l=e(i=u,n)}}function Ik(t,e,n){var i,a,l;return function(){var u=wl(this,t),d=n(this),f=d+"";return d==null&&(f=d=(this.style.removeProperty(t),wl(this,t))),u===f?null:u===i&&f===a?l:(a=f,l=e(i=u,d))}}function kk(t,e){var n,i,a,l="style."+e,u="end."+l,d;return function(){var f=Ei(this,t),m=f.on,y=f.value[l]==null?d||(d=Ox(e)):void 0;(m!==n||a!==y)&&(i=(n=m).copy()).on(u,a=y),f.on=i}}function Dk(t,e,n){var i=(t+="")=="transform"?DI:Mx;return e==null?this.styleTween(t,Ck(t,i)).on("end.style."+t,Ox(t)):typeof e=="function"?this.styleTween(t,Ik(t,i,O0(this,"style."+t,e))).each(kk(this._id,t)):this.styleTween(t,Nk(t,i,e),n).on("end.style."+t,null)}function Mk(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Ok(t,e,n){var i,a;function l(){var u=e.apply(this,arguments);return u!==a&&(i=(a=u)&&Mk(t,u,n)),i}return l._value=e,l}function Pk(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Ok(t,e,n??""))}function Vk(t){return function(){this.textContent=t}}function zk(t){return function(){var e=t(this);this.textContent=e??""}}function Lk(t){return this.tween("text",typeof t=="function"?zk(O0(this,"text",t)):Vk(t==null?"":t+""))}function Uk(t){return function(e){this.textContent=t.call(this,e)}}function Bk(t){var e,n;function i(){var a=t.apply(this,arguments);return a!==n&&(e=(n=a)&&Uk(a)),e}return i._value=t,i}function jk(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Bk(t))}function Hk(){for(var t=this._name,e=this._id,n=Px(),i=this._groups,a=i.length,l=0;l<a;++l)for(var u=i[l],d=u.length,f,m=0;m<d;++m)if(f=u[m]){var y=$r(f,e);Cf(f,t,n,m,u,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new Ji(i,this._parents,t,n)}function qk(){var t,e,n=this,i=n._id,a=n.size();return new Promise(function(l,u){var d={value:u},f={value:function(){--a===0&&l()}};n.each(function(){var m=Ei(this,i),y=m.on;y!==t&&(e=(t=y).copy(),e._.cancel.push(d),e._.interrupt.push(d),e._.end.push(f)),m.on=e}),a===0&&l()})}var $k=0;function Ji(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Px(){return++$k}var Yi=kc.prototype;Ji.prototype={constructor:Ji,select:Tk,selectAll:Sk,selectChild:Yi.selectChild,selectChildren:Yi.selectChildren,filter:yk,merge:vk,selection:Rk,transition:Hk,call:Yi.call,nodes:Yi.nodes,node:Yi.node,size:Yi.size,empty:Yi.empty,each:Yi.each,on:Ek,attr:tk,attrTween:ak,style:Dk,styleTween:Pk,text:Lk,textTween:jk,remove:xk,tween:KI,delay:uk,duration:hk,ease:gk,easeVarying:pk,end:qk,[Symbol.iterator]:Yi[Symbol.iterator]};function Fk(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Gk={time:null,delay:0,duration:250,ease:Fk};function Yk(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Kk(t){var e,n;t instanceof Ji?(e=t._id,t=t._name):(e=Px(),(n=Gk).time=D0(),t=t==null?null:t+"");for(var i=this._groups,a=i.length,l=0;l<a;++l)for(var u=i[l],d=u.length,f,m=0;m<d;++m)(f=u[m])&&Cf(f,t,e,m,u,n||Yk(f,e));return new Ji(i,this._parents,t,e)}kc.prototype.interrupt=FI;kc.prototype.transition=Kk;const hh=t=>()=>t;function Xk(t,{sourceEvent:e,target:n,transform:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function Xi(t,e,n){this.k=t,this.x=e,this.y=n}Xi.prototype={constructor:Xi,scale:function(t){return t===1?this:new Xi(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Xi(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var qs=new Xi(1,0,0);Xi.prototype;function fp(t){t.stopImmediatePropagation()}function qu(t){t.preventDefault(),t.stopImmediatePropagation()}function Qk(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Wk(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function BE(){return this.__zoom||qs}function Zk(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Jk(){return navigator.maxTouchPoints||"ontouchstart"in this}function e4(t,e,n){var i=t.invertX(e[0][0])-n[0][0],a=t.invertX(e[1][0])-n[1][0],l=t.invertY(e[0][1])-n[0][1],u=t.invertY(e[1][1])-n[1][1];return t.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),u>l?(l+u)/2:Math.min(0,l)||Math.max(0,u))}function t4(){var t=Qk,e=Wk,n=e4,i=Zk,a=Jk,l=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],d=250,f=zI,m=Sf("start","zoom","end"),y,v,b,x=500,C=150,M=0,k=10;function L(D){D.property("__zoom",BE).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",V).filter(a).on("touchstart.zoom",U).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}L.transform=function(D,G,O,Y){var ne=D.selection?D.selection():D;ne.property("__zoom",BE),D!==ne?Q(D,G,O,Y):ne.interrupt().each(function(){K(this,arguments).event(Y).start().zoom(null,typeof G=="function"?G.apply(this,arguments):G).end()})},L.scaleBy=function(D,G,O,Y){L.scaleTo(D,function(){var ne=this.__zoom.k,J=typeof G=="function"?G.apply(this,arguments):G;return ne*J},O,Y)},L.scaleTo=function(D,G,O,Y){L.transform(D,function(){var ne=e.apply(this,arguments),J=this.__zoom,z=O==null?j(ne):typeof O=="function"?O.apply(this,arguments):O,W=J.invert(z),re=typeof G=="function"?G.apply(this,arguments):G;return n(F(H(J,re),z,W),ne,u)},O,Y)},L.translateBy=function(D,G,O,Y){L.transform(D,function(){return n(this.__zoom.translate(typeof G=="function"?G.apply(this,arguments):G,typeof O=="function"?O.apply(this,arguments):O),e.apply(this,arguments),u)},null,Y)},L.translateTo=function(D,G,O,Y,ne){L.transform(D,function(){var J=e.apply(this,arguments),z=this.__zoom,W=Y==null?j(J):typeof Y=="function"?Y.apply(this,arguments):Y;return n(qs.translate(W[0],W[1]).scale(z.k).translate(typeof G=="function"?-G.apply(this,arguments):-G,typeof O=="function"?-O.apply(this,arguments):-O),J,u)},Y,ne)};function H(D,G){return G=Math.max(l[0],Math.min(l[1],G)),G===D.k?D:new Xi(G,D.x,D.y)}function F(D,G,O){var Y=G[0]-O[0]*D.k,ne=G[1]-O[1]*D.k;return Y===D.x&&ne===D.y?D:new Xi(D.k,Y,ne)}function j(D){return[(+D[0][0]+ +D[1][0])/2,(+D[0][1]+ +D[1][1])/2]}function Q(D,G,O,Y){D.on("start.zoom",function(){K(this,arguments).event(Y).start()}).on("interrupt.zoom end.zoom",function(){K(this,arguments).event(Y).end()}).tween("zoom",function(){var ne=this,J=arguments,z=K(ne,J).event(Y),W=e.apply(ne,J),re=O==null?j(W):typeof O=="function"?O.apply(ne,J):O,X=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),se=ne.__zoom,fe=typeof G=="function"?G.apply(ne,J):G,ce=f(se.invert(re).concat(X/se.k),fe.invert(re).concat(X/fe.k));return function(ve){if(ve===1)ve=fe;else{var _e=ce(ve),Ae=X/_e[2];ve=new Xi(Ae,re[0]-_e[0]*Ae,re[1]-_e[1]*Ae)}z.zoom(null,ve)}})}function K(D,G,O){return!O&&D.__zooming||new S(D,G)}function S(D,G){this.that=D,this.args=G,this.active=0,this.sourceEvent=null,this.extent=e.apply(D,G),this.taps=0}S.prototype={event:function(D){return D&&(this.sourceEvent=D),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(D,G){return this.mouse&&D!=="mouse"&&(this.mouse[1]=G.invert(this.mouse[0])),this.touch0&&D!=="touch"&&(this.touch0[1]=G.invert(this.touch0[0])),this.touch1&&D!=="touch"&&(this.touch1[1]=G.invert(this.touch1[0])),this.that.__zoom=G,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(D){var G=zr(this.that).datum();m.call(D,this.that,new Xk(D,{sourceEvent:this.sourceEvent,target:L,transform:this.that.__zoom,dispatch:m}),G)}};function T(D,...G){if(!t.apply(this,arguments))return;var O=K(this,G).event(D),Y=this.__zoom,ne=Math.max(l[0],Math.min(l[1],Y.k*Math.pow(2,i.apply(this,arguments)))),J=hi(D);if(O.wheel)(O.mouse[0][0]!==J[0]||O.mouse[0][1]!==J[1])&&(O.mouse[1]=Y.invert(O.mouse[0]=J)),clearTimeout(O.wheel);else{if(Y.k===ne)return;O.mouse=[J,Y.invert(J)],Dh(this),O.start()}qu(D),O.wheel=setTimeout(z,C),O.zoom("mouse",n(F(H(Y,ne),O.mouse[0],O.mouse[1]),O.extent,u));function z(){O.wheel=null,O.end()}}function N(D,...G){if(b||!t.apply(this,arguments))return;var O=D.currentTarget,Y=K(this,G,!0).event(D),ne=zr(D.view).on("mousemove.zoom",re,!0).on("mouseup.zoom",X,!0),J=hi(D,O),z=D.clientX,W=D.clientY;Ex(D.view),fp(D),Y.mouse=[J,this.__zoom.invert(J)],Dh(this),Y.start();function re(se){if(qu(se),!Y.moved){var fe=se.clientX-z,ce=se.clientY-W;Y.moved=fe*fe+ce*ce>M}Y.event(se).zoom("mouse",n(F(Y.that.__zoom,Y.mouse[0]=hi(se,O),Y.mouse[1]),Y.extent,u))}function X(se){ne.on("mousemove.zoom mouseup.zoom",null),wx(se.view,Y.moved),qu(se),Y.event(se).end()}}function V(D,...G){if(t.apply(this,arguments)){var O=this.__zoom,Y=hi(D.changedTouches?D.changedTouches[0]:D,this),ne=O.invert(Y),J=O.k*(D.shiftKey?.5:2),z=n(F(H(O,J),Y,ne),e.apply(this,G),u);qu(D),d>0?zr(this).transition().duration(d).call(Q,z,Y,D):zr(this).call(L.transform,z,Y,D)}}function U(D,...G){if(t.apply(this,arguments)){var O=D.touches,Y=O.length,ne=K(this,G,D.changedTouches.length===Y).event(D),J,z,W,re;for(fp(D),z=0;z<Y;++z)W=O[z],re=hi(W,this),re=[re,this.__zoom.invert(re),W.identifier],ne.touch0?!ne.touch1&&ne.touch0[2]!==re[2]&&(ne.touch1=re,ne.taps=0):(ne.touch0=re,J=!0,ne.taps=1+!!y);y&&(y=clearTimeout(y)),J&&(ne.taps<2&&(v=re[0],y=setTimeout(function(){y=null},x)),Dh(this),ne.start())}}function B(D,...G){if(this.__zooming){var O=K(this,G).event(D),Y=D.changedTouches,ne=Y.length,J,z,W,re;for(qu(D),J=0;J<ne;++J)z=Y[J],W=hi(z,this),O.touch0&&O.touch0[2]===z.identifier?O.touch0[0]=W:O.touch1&&O.touch1[2]===z.identifier&&(O.touch1[0]=W);if(z=O.that.__zoom,O.touch1){var X=O.touch0[0],se=O.touch0[1],fe=O.touch1[0],ce=O.touch1[1],ve=(ve=fe[0]-X[0])*ve+(ve=fe[1]-X[1])*ve,_e=(_e=ce[0]-se[0])*_e+(_e=ce[1]-se[1])*_e;z=H(z,Math.sqrt(ve/_e)),W=[(X[0]+fe[0])/2,(X[1]+fe[1])/2],re=[(se[0]+ce[0])/2,(se[1]+ce[1])/2]}else if(O.touch0)W=O.touch0[0],re=O.touch0[1];else return;O.zoom("touch",n(F(z,W,re),O.extent,u))}}function R(D,...G){if(this.__zooming){var O=K(this,G).event(D),Y=D.changedTouches,ne=Y.length,J,z;for(fp(D),b&&clearTimeout(b),b=setTimeout(function(){b=null},x),J=0;J<ne;++J)z=Y[J],O.touch0&&O.touch0[2]===z.identifier?delete O.touch0:O.touch1&&O.touch1[2]===z.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(z=hi(z,this),Math.hypot(v[0]-z[0],v[1]-z[1])<k)){var W=zr(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return L.wheelDelta=function(D){return arguments.length?(i=typeof D=="function"?D:hh(+D),L):i},L.filter=function(D){return arguments.length?(t=typeof D=="function"?D:hh(!!D),L):t},L.touchable=function(D){return arguments.length?(a=typeof D=="function"?D:hh(!!D),L):a},L.extent=function(D){return arguments.length?(e=typeof D=="function"?D:hh([[+D[0][0],+D[0][1]],[+D[1][0],+D[1][1]]]),L):e},L.scaleExtent=function(D){return arguments.length?(l[0]=+D[0],l[1]=+D[1],L):[l[0],l[1]]},L.translateExtent=function(D){return arguments.length?(u[0][0]=+D[0][0],u[1][0]=+D[1][0],u[0][1]=+D[0][1],u[1][1]=+D[1][1],L):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},L.constrain=function(D){return arguments.length?(n=D,L):n},L.duration=function(D){return arguments.length?(d=+D,L):d},L.interpolate=function(D){return arguments.length?(f=D,L):f},L.on=function(){var D=m.on.apply(m,arguments);return D===m?L:D},L.clickDistance=function(D){return arguments.length?(M=(D=+D)*D,L):Math.sqrt(M)},L.tapDistance=function(D){return arguments.length?(k=+D,L):k},L}var n4=ox();const Nf=q.createContext(null),r4=Nf.Provider,es={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Vx=es.error001();function Tt(t,e){const n=q.useContext(Nf);if(n===null)throw new Error(Vx);return lx(n,t,e)}const ln=()=>{const t=q.useContext(Nf);if(t===null)throw new Error(Vx);return q.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},i4=t=>t.userSelectionActive?"none":"all";function zx({position:t,children:e,className:n,style:i,...a}){const l=Tt(i4),u=`${t}`.split("-");return he.createElement("div",{className:Pn(["react-flow__panel",n,...u]),style:{...i,pointerEvents:l},...a},e)}function s4({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:he.createElement(zx,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},he.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const a4=({x:t,y:e,label:n,labelStyle:i={},labelShowBg:a=!0,labelBgStyle:l={},labelBgPadding:u=[2,4],labelBgBorderRadius:d=2,children:f,className:m,...y})=>{const v=q.useRef(null),[b,x]=q.useState({x:0,y:0,width:0,height:0}),C=Pn(["react-flow__edge-textwrapper",m]);return q.useEffect(()=>{if(v.current){const M=v.current.getBBox();x({x:M.x,y:M.y,width:M.width,height:M.height})}},[n]),typeof n>"u"||!n?null:he.createElement("g",{transform:`translate(${t-b.width/2} ${e-b.height/2})`,className:C,visibility:b.width?"visible":"hidden",...y},a&&he.createElement("rect",{width:b.width+2*u[0],x:-u[0],y:-u[1],height:b.height+2*u[1],className:"react-flow__edge-textbg",style:l,rx:d,ry:d}),he.createElement("text",{className:"react-flow__edge-text",y:b.height/2,dy:"0.3em",ref:v,style:i},n),f)};var o4=q.memo(a4);const P0=t=>({width:t.offsetWidth,height:t.offsetHeight}),Tl=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),V0=(t={x:0,y:0},e)=>({x:Tl(t.x,e[0][0],e[1][0]),y:Tl(t.y,e[0][1],e[1][1])}),jE=(t,e,n)=>t<e?Tl(Math.abs(t-e),1,50)/50:t>n?-Tl(Math.abs(t-n),1,50)/50:0,Lx=(t,e)=>{const n=jE(t.x,35,e.width-35)*20,i=jE(t.y,35,e.height-35)*20;return[n,i]},Ux=t=>t.getRootNode?.()||window?.document,l4=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),z0=({x:t,y:e,width:n,height:i})=>({x:t,y:e,x2:t+n,y2:e+i}),u4=({x:t,y:e,x2:n,y2:i})=>({x:t,y:e,width:n-t,height:i-e}),HE=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),Fp=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*i)},c4=t=>Rr(t.width)&&Rr(t.height)&&Rr(t.x)&&Rr(t.y),Rr=t=>!isNaN(t)&&isFinite(t),kt=Symbol.for("internals"),Bx=["Enter"," ","Escape"],d4=(t,e)=>{},h4=t=>"nativeEvent"in t;function Gp(t){const n=(h4(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const jx=t=>"clientX"in t,$s=(t,e)=>{const n=jx(t),i=n?t.clientX:t.touches?.[0].clientX,a=n?t.clientY:t.touches?.[0].clientY;return{x:i-(e?.left??0),y:a-(e?.top??0)}},Zh=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Mc=({id:t,path:e,labelX:n,labelY:i,label:a,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:b,interactionWidth:x=20})=>he.createElement(he.Fragment,null,he.createElement("path",{id:t,style:y,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:v,markerStart:b}),x&&he.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:x,className:"react-flow__edge-interaction"}),a&&Rr(n)&&Rr(i)?he.createElement(o4,{x:n,y:i,label:a,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:m}):null);Mc.displayName="BaseEdge";function $u(t,e,n){return n===void 0?n:i=>{const a=e().edges.find(l=>l.id===t);a&&n(i,{...a})}}function Hx({sourceX:t,sourceY:e,targetX:n,targetY:i}){const a=Math.abs(n-t)/2,l=n<t?n+a:n-a,u=Math.abs(i-e)/2,d=i<e?i+u:i-u;return[l,d,a,u]}function qx({sourceX:t,sourceY:e,targetX:n,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:d}){const f=t*.125+a*.375+u*.375+n*.125,m=e*.125+l*.375+d*.375+i*.125,y=Math.abs(f-t),v=Math.abs(m-e);return[f,m,y,v]}var Qs;(function(t){t.Strict="strict",t.Loose="loose"})(Qs||(Qs={}));var Ha;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Ha||(Ha={}));var mc;(function(t){t.Partial="partial",t.Full="full"})(mc||(mc={}));var Ps;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Ps||(Ps={}));var pc;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(pc||(pc={}));var Se;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Se||(Se={}));function qE({pos:t,x1:e,y1:n,x2:i,y2:a}){return t===Se.Left||t===Se.Right?[.5*(e+i),n]:[e,.5*(n+a)]}function $x({sourceX:t,sourceY:e,sourcePosition:n=Se.Bottom,targetX:i,targetY:a,targetPosition:l=Se.Top}){const[u,d]=qE({pos:n,x1:t,y1:e,x2:i,y2:a}),[f,m]=qE({pos:l,x1:i,y1:a,x2:t,y2:e}),[y,v,b,x]=qx({sourceX:t,sourceY:e,targetX:i,targetY:a,sourceControlX:u,sourceControlY:d,targetControlX:f,targetControlY:m});return[`M${t},${e} C${u},${d} ${f},${m} ${i},${a}`,y,v,b,x]}const L0=q.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,sourcePosition:a=Se.Bottom,targetPosition:l=Se.Top,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:b,markerEnd:x,markerStart:C,interactionWidth:M})=>{const[k,L,H]=$x({sourceX:t,sourceY:e,sourcePosition:a,targetX:n,targetY:i,targetPosition:l});return he.createElement(Mc,{path:k,labelX:L,labelY:H,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:b,markerEnd:x,markerStart:C,interactionWidth:M})});L0.displayName="SimpleBezierEdge";const $E={[Se.Left]:{x:-1,y:0},[Se.Right]:{x:1,y:0},[Se.Top]:{x:0,y:-1},[Se.Bottom]:{x:0,y:1}},f4=({source:t,sourcePosition:e=Se.Bottom,target:n})=>e===Se.Left||e===Se.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},FE=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function g4({source:t,sourcePosition:e=Se.Bottom,target:n,targetPosition:i=Se.Top,center:a,offset:l}){const u=$E[e],d=$E[i],f={x:t.x+u.x*l,y:t.y+u.y*l},m={x:n.x+d.x*l,y:n.y+d.y*l},y=f4({source:f,sourcePosition:e,target:m}),v=y.x!==0?"x":"y",b=y[v];let x=[],C,M;const k={x:0,y:0},L={x:0,y:0},[H,F,j,Q]=Hx({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(u[v]*d[v]===-1){C=a.x??H,M=a.y??F;const S=[{x:C,y:f.y},{x:C,y:m.y}],T=[{x:f.x,y:M},{x:m.x,y:M}];u[v]===b?x=v==="x"?S:T:x=v==="x"?T:S}else{const S=[{x:f.x,y:m.y}],T=[{x:m.x,y:f.y}];if(v==="x"?x=u.x===b?T:S:x=u.y===b?S:T,e===i){const R=Math.abs(t[v]-n[v]);if(R<=l){const D=Math.min(l-1,l-R);u[v]===b?k[v]=(f[v]>t[v]?-1:1)*D:L[v]=(m[v]>n[v]?-1:1)*D}}if(e!==i){const R=v==="x"?"y":"x",D=u[v]===d[R],G=f[R]>m[R],O=f[R]<m[R];(u[v]===1&&(!D&&G||D&&O)||u[v]!==1&&(!D&&O||D&&G))&&(x=v==="x"?S:T)}const N={x:f.x+k.x,y:f.y+k.y},V={x:m.x+L.x,y:m.y+L.y},U=Math.max(Math.abs(N.x-x[0].x),Math.abs(V.x-x[0].x)),B=Math.max(Math.abs(N.y-x[0].y),Math.abs(V.y-x[0].y));U>=B?(C=(N.x+V.x)/2,M=x[0].y):(C=x[0].x,M=(N.y+V.y)/2)}return[[t,{x:f.x+k.x,y:f.y+k.y},...x,{x:m.x+L.x,y:m.y+L.y},n],C,M,j,Q]}function m4(t,e,n,i){const a=Math.min(FE(t,e)/2,FE(e,n)/2,i),{x:l,y:u}=e;if(t.x===l&&l===n.x||t.y===u&&u===n.y)return`L${l} ${u}`;if(t.y===u){const m=t.x<n.x?-1:1,y=t.y<n.y?1:-1;return`L ${l+a*m},${u}Q ${l},${u} ${l},${u+a*y}`}const d=t.x<n.x?1:-1,f=t.y<n.y?-1:1;return`L ${l},${u+a*f}Q ${l},${u} ${l+a*d},${u}`}function Yp({sourceX:t,sourceY:e,sourcePosition:n=Se.Bottom,targetX:i,targetY:a,targetPosition:l=Se.Top,borderRadius:u=5,centerX:d,centerY:f,offset:m=20}){const[y,v,b,x,C]=g4({source:{x:t,y:e},sourcePosition:n,target:{x:i,y:a},targetPosition:l,center:{x:d,y:f},offset:m});return[y.reduce((k,L,H)=>{let F="";return H>0&&H<y.length-1?F=m4(y[H-1],L,y[H+1],u):F=`${H===0?"M":"L"}${L.x} ${L.y}`,k+=F,k},""),v,b,x,C]}const If=q.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,label:a,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:m,style:y,sourcePosition:v=Se.Bottom,targetPosition:b=Se.Top,markerEnd:x,markerStart:C,pathOptions:M,interactionWidth:k})=>{const[L,H,F]=Yp({sourceX:t,sourceY:e,sourcePosition:v,targetX:n,targetY:i,targetPosition:b,borderRadius:M?.borderRadius,offset:M?.offset});return he.createElement(Mc,{path:L,labelX:H,labelY:F,label:a,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:m,style:y,markerEnd:x,markerStart:C,interactionWidth:k})});If.displayName="SmoothStepEdge";const U0=q.memo(t=>he.createElement(If,{...t,pathOptions:q.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));U0.displayName="StepEdge";function p4({sourceX:t,sourceY:e,targetX:n,targetY:i}){const[a,l,u,d]=Hx({sourceX:t,sourceY:e,targetX:n,targetY:i});return[`M ${t},${e}L ${n},${i}`,a,l,u,d]}const B0=q.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,label:a,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:b,interactionWidth:x})=>{const[C,M,k]=p4({sourceX:t,sourceY:e,targetX:n,targetY:i});return he.createElement(Mc,{path:C,labelX:M,labelY:k,label:a,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:b,interactionWidth:x})});B0.displayName="StraightEdge";function fh(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function GE({pos:t,x1:e,y1:n,x2:i,y2:a,c:l}){switch(t){case Se.Left:return[e-fh(e-i,l),n];case Se.Right:return[e+fh(i-e,l),n];case Se.Top:return[e,n-fh(n-a,l)];case Se.Bottom:return[e,n+fh(a-n,l)]}}function Fx({sourceX:t,sourceY:e,sourcePosition:n=Se.Bottom,targetX:i,targetY:a,targetPosition:l=Se.Top,curvature:u=.25}){const[d,f]=GE({pos:n,x1:t,y1:e,x2:i,y2:a,c:u}),[m,y]=GE({pos:l,x1:i,y1:a,x2:t,y2:e,c:u}),[v,b,x,C]=qx({sourceX:t,sourceY:e,targetX:i,targetY:a,sourceControlX:d,sourceControlY:f,targetControlX:m,targetControlY:y});return[`M${t},${e} C${d},${f} ${m},${y} ${i},${a}`,v,b,x,C]}const Jh=q.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,sourcePosition:a=Se.Bottom,targetPosition:l=Se.Top,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:b,markerEnd:x,markerStart:C,pathOptions:M,interactionWidth:k})=>{const[L,H,F]=Fx({sourceX:t,sourceY:e,sourcePosition:a,targetX:n,targetY:i,targetPosition:l,curvature:M?.curvature});return he.createElement(Mc,{path:L,labelX:H,labelY:F,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:b,markerEnd:x,markerStart:C,interactionWidth:k})});Jh.displayName="BezierEdge";const j0=q.createContext(null),y4=j0.Provider;j0.Consumer;const v4=()=>q.useContext(j0),_4=t=>"id"in t&&"source"in t&&"target"in t,b4=({source:t,sourceHandle:e,target:n,targetHandle:i})=>`reactflow__edge-${t}${e||""}-${n}${i||""}`,Kp=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`,E4=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),w4=(t,e)=>{if(!t.source||!t.target)return e;let n;return _4(t)?n={...t}:n={...t,id:b4(t)},E4(n,e)?e:e.concat(n)},Xp=({x:t,y:e},[n,i,a],l,[u,d])=>{const f={x:(t-n)/a,y:(e-i)/a};return l?{x:u*Math.round(f.x/u),y:d*Math.round(f.y/d)}:f},Gx=({x:t,y:e},[n,i,a])=>({x:t*a+n,y:e*a+i}),gl=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],i=(t.height??0)*e[1],a={x:t.position.x-n,y:t.position.y-i};return{...a,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-i}:a}},H0=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((i,a)=>{const{x:l,y:u}=gl(a,e).positionAbsolute;return l4(i,z0({x:l,y:u,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return u4(n)},Yx=(t,e,[n,i,a]=[0,0,1],l=!1,u=!1,d=[0,0])=>{const f={x:(e.x-n)/a,y:(e.y-i)/a,width:e.width/a,height:e.height/a},m=[];return t.forEach(y=>{const{width:v,height:b,selectable:x=!0,hidden:C=!1}=y;if(u&&!x||C)return!1;const{positionAbsolute:M}=gl(y,d),k={x:M.x,y:M.y,width:v||0,height:b||0},L=Fp(f,k),H=typeof v>"u"||typeof b>"u"||v===null||b===null,F=l&&L>0,j=(v||0)*(b||0);(H||F||L>=j||y.dragging)&&m.push(y)}),m},Kx=(t,e)=>{const n=t.map(i=>i.id);return e.filter(i=>n.includes(i.source)||n.includes(i.target))},Xx=(t,e,n,i,a,l=.1)=>{const u=e/(t.width*(1+l)),d=n/(t.height*(1+l)),f=Math.min(u,d),m=Tl(f,i,a),y=t.x+t.width/2,v=t.y+t.height/2,b=e/2-y*m,x=n/2-v*m;return{x:b,y:x,zoom:m}},Ua=(t,e=0)=>t.transition().duration(e);function YE(t,e,n,i){return(e[n]||[]).reduce((a,l)=>(`${t.id}-${l.id}-${n}`!==i&&a.push({id:l.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+l.x+l.width/2,y:(t.positionAbsolute?.y??0)+l.y+l.height/2}),a),[])}function x4(t,e,n,i,a,l){const{x:u,y:d}=$s(t),m=e.elementsFromPoint(u,d).find(C=>C.classList.contains("react-flow__handle"));if(m){const C=m.getAttribute("data-nodeid");if(C){const M=q0(void 0,m),k=m.getAttribute("data-handleid"),L=l({nodeId:C,id:k,type:M});if(L){const H=a.find(F=>F.nodeId===C&&F.type===M&&F.id===k);return{handle:{id:k,type:M,nodeId:C,x:H?.x||n.x,y:H?.y||n.y},validHandleResult:L}}}}let y=[],v=1/0;if(a.forEach(C=>{const M=Math.sqrt((C.x-n.x)**2+(C.y-n.y)**2);if(M<=i){const k=l(C);M<=v&&(M<v?y=[{handle:C,validHandleResult:k}]:M===v&&y.push({handle:C,validHandleResult:k}),v=M)}}),!y.length)return{handle:null,validHandleResult:Qx()};if(y.length===1)return y[0];const b=y.some(({validHandleResult:C})=>C.isValid),x=y.some(({handle:C})=>C.type==="target");return y.find(({handle:C,validHandleResult:M})=>x?C.type==="target":b?M.isValid:!0)||y[0]}const T4={source:null,target:null,sourceHandle:null,targetHandle:null},Qx=()=>({handleDomNode:null,isValid:!1,connection:T4,endHandle:null});function Wx(t,e,n,i,a,l,u){const d=a==="target",f=u.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),m={...Qx(),handleDomNode:f};if(f){const y=q0(void 0,f),v=f.getAttribute("data-nodeid"),b=f.getAttribute("data-handleid"),x=f.classList.contains("connectable"),C=f.classList.contains("connectableend"),M={source:d?v:n,sourceHandle:d?b:i,target:d?n:v,targetHandle:d?i:b};m.connection=M,x&&C&&(e===Qs.Strict?d&&y==="source"||!d&&y==="target":v!==n||b!==i)&&(m.endHandle={nodeId:v,handleId:b,type:y},m.isValid=l(M))}return m}function S4({nodes:t,nodeId:e,handleId:n,handleType:i}){return t.reduce((a,l)=>{if(l[kt]){const{handleBounds:u}=l[kt];let d=[],f=[];u&&(d=YE(l,u,"source",`${e}-${n}-${i}`),f=YE(l,u,"target",`${e}-${n}-${i}`)),a.push(...d,...f)}return a},[])}function q0(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function gp(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function A4(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function Zx({event:t,handleId:e,nodeId:n,onConnect:i,isTarget:a,getState:l,setState:u,isValidConnection:d,edgeUpdaterType:f,onReconnectEnd:m}){const y=Ux(t.target),{connectionMode:v,domNode:b,autoPanOnConnect:x,connectionRadius:C,onConnectStart:M,panBy:k,getNodes:L,cancelConnection:H}=l();let F=0,j;const{x:Q,y:K}=$s(t),S=y?.elementFromPoint(Q,K),T=q0(f,S),N=b?.getBoundingClientRect();if(!N||!T)return;let V,U=$s(t,N),B=!1,R=null,D=!1,G=null;const O=S4({nodes:L(),nodeId:n,handleId:e,handleType:T}),Y=()=>{if(!x)return;const[z,W]=Lx(U,N);k({x:z,y:W}),F=requestAnimationFrame(Y)};u({connectionPosition:U,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:T,connectionStartHandle:{nodeId:n,handleId:e,type:T},connectionEndHandle:null}),M?.(t,{nodeId:n,handleId:e,handleType:T});function ne(z){const{transform:W}=l();U=$s(z,N);const{handle:re,validHandleResult:X}=x4(z,y,Xp(U,W,!1,[1,1]),C,O,se=>Wx(se,v,n,e,a?"target":"source",d,y));if(j=re,B||(Y(),B=!0),G=X.handleDomNode,R=X.connection,D=X.isValid,u({connectionPosition:j&&D?Gx({x:j.x,y:j.y},W):U,connectionStatus:A4(!!j,D),connectionEndHandle:X.endHandle}),!j&&!D&&!G)return gp(V);R.source!==R.target&&G&&(gp(V),V=G,G.classList.add("connecting","react-flow__handle-connecting"),G.classList.toggle("valid",D),G.classList.toggle("react-flow__handle-valid",D))}function J(z){(j||G)&&R&&D&&i?.(R),l().onConnectEnd?.(z),f&&m?.(z),gp(V),H(),cancelAnimationFrame(F),B=!1,D=!1,R=null,G=null,y.removeEventListener("mousemove",ne),y.removeEventListener("mouseup",J),y.removeEventListener("touchmove",ne),y.removeEventListener("touchend",J)}y.addEventListener("mousemove",ne),y.addEventListener("mouseup",J),y.addEventListener("touchmove",ne),y.addEventListener("touchend",J)}const KE=()=>!0,R4=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),C4=(t,e,n)=>i=>{const{connectionStartHandle:a,connectionEndHandle:l,connectionClickStartHandle:u}=i;return{connecting:a?.nodeId===t&&a?.handleId===e&&a?.type===n||l?.nodeId===t&&l?.handleId===e&&l?.type===n,clickConnecting:u?.nodeId===t&&u?.handleId===e&&u?.type===n}},Jx=q.forwardRef(({type:t="source",position:e=Se.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:u,onConnect:d,children:f,className:m,onMouseDown:y,onTouchStart:v,...b},x)=>{const C=u||null,M=t==="target",k=ln(),L=v4(),{connectOnClick:H,noPanClassName:F}=Tt(R4,Tn),{connecting:j,clickConnecting:Q}=Tt(C4(L,C,t),Tn);L||k.getState().onError?.("010",es.error010());const K=N=>{const{defaultEdgeOptions:V,onConnect:U,hasDefaultEdges:B}=k.getState(),R={...V,...N};if(B){const{edges:D,setEdges:G}=k.getState();G(w4(R,D))}U?.(R),d?.(R)},S=N=>{if(!L)return;const V=jx(N);a&&(V&&N.button===0||!V)&&Zx({event:N,handleId:C,nodeId:L,onConnect:K,isTarget:M,getState:k.getState,setState:k.setState,isValidConnection:n||k.getState().isValidConnection||KE}),V?y?.(N):v?.(N)},T=N=>{const{onClickConnectStart:V,onClickConnectEnd:U,connectionClickStartHandle:B,connectionMode:R,isValidConnection:D}=k.getState();if(!L||!B&&!a)return;if(!B){V?.(N,{nodeId:L,handleId:C,handleType:t}),k.setState({connectionClickStartHandle:{nodeId:L,type:t,handleId:C}});return}const G=Ux(N.target),O=n||D||KE,{connection:Y,isValid:ne}=Wx({nodeId:L,id:C,type:t},R,B.nodeId,B.handleId||null,B.type,O,G);ne&&K(Y),U?.(N),k.setState({connectionClickStartHandle:null})};return he.createElement("div",{"data-handleid":C,"data-nodeid":L,"data-handlepos":e,"data-id":`${L}-${C}-${t}`,className:Pn(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",F,m,{source:!M,target:M,connectable:i,connectablestart:a,connectableend:l,connecting:Q,connectionindicator:i&&(a&&!j||l&&j)}]),onMouseDown:S,onTouchStart:S,onClick:H?T:void 0,ref:x,...b},f)});Jx.displayName="Handle";var jn=q.memo(Jx);const eT=({data:t,isConnectable:e,targetPosition:n=Se.Top,sourcePosition:i=Se.Bottom})=>he.createElement(he.Fragment,null,he.createElement(jn,{type:"target",position:n,isConnectable:e}),t?.label,he.createElement(jn,{type:"source",position:i,isConnectable:e}));eT.displayName="DefaultNode";var Qp=q.memo(eT);const tT=({data:t,isConnectable:e,sourcePosition:n=Se.Bottom})=>he.createElement(he.Fragment,null,t?.label,he.createElement(jn,{type:"source",position:n,isConnectable:e}));tT.displayName="InputNode";var nT=q.memo(tT);const rT=({data:t,isConnectable:e,targetPosition:n=Se.Top})=>he.createElement(he.Fragment,null,he.createElement(jn,{type:"target",position:n,isConnectable:e}),t?.label);rT.displayName="OutputNode";var iT=q.memo(rT);const $0=()=>null;$0.displayName="GroupNode";const N4=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),gh=t=>t.id;function I4(t,e){return Tn(t.selectedNodes.map(gh),e.selectedNodes.map(gh))&&Tn(t.selectedEdges.map(gh),e.selectedEdges.map(gh))}const sT=q.memo(({onSelectionChange:t})=>{const e=ln(),{selectedNodes:n,selectedEdges:i}=Tt(N4,I4);return q.useEffect(()=>{const a={nodes:n,edges:i};t?.(a),e.getState().onSelectionChange.forEach(l=>l(a))},[n,i,t]),null});sT.displayName="SelectionListener";const k4=t=>!!t.onSelectionChange;function D4({onSelectionChange:t}){const e=Tt(k4);return t||e?he.createElement(sT,{onSelectionChange:t}):null}const M4=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function Wo(t,e){q.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function $e(t,e,n){q.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const O4=({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,onConnect:a,onConnectStart:l,onConnectEnd:u,onClickConnectStart:d,onClickConnectEnd:f,nodesDraggable:m,nodesConnectable:y,nodesFocusable:v,edgesFocusable:b,edgesUpdatable:x,elevateNodesOnSelect:C,minZoom:M,maxZoom:k,nodeExtent:L,onNodesChange:H,onEdgesChange:F,elementsSelectable:j,connectionMode:Q,snapGrid:K,snapToGrid:S,translateExtent:T,connectOnClick:N,defaultEdgeOptions:V,fitView:U,fitViewOptions:B,onNodesDelete:R,onEdgesDelete:D,onNodeDrag:G,onNodeDragStart:O,onNodeDragStop:Y,onSelectionDrag:ne,onSelectionDragStart:J,onSelectionDragStop:z,noPanClassName:W,nodeOrigin:re,rfId:X,autoPanOnConnect:se,autoPanOnNodeDrag:fe,onError:ce,connectionRadius:ve,isValidConnection:_e,nodeDragThreshold:Ae})=>{const{setNodes:Ce,setEdges:et,setDefaultNodesAndEdges:rt,setMinZoom:ze,setMaxZoom:tt,setTranslateExtent:it,setNodeExtent:zt,reset:Le}=Tt(M4,Tn),Ee=ln();return q.useEffect(()=>{const At=i?.map(vn=>({...vn,...V}));return rt(n,At),()=>{Le()}},[]),$e("defaultEdgeOptions",V,Ee.setState),$e("connectionMode",Q,Ee.setState),$e("onConnect",a,Ee.setState),$e("onConnectStart",l,Ee.setState),$e("onConnectEnd",u,Ee.setState),$e("onClickConnectStart",d,Ee.setState),$e("onClickConnectEnd",f,Ee.setState),$e("nodesDraggable",m,Ee.setState),$e("nodesConnectable",y,Ee.setState),$e("nodesFocusable",v,Ee.setState),$e("edgesFocusable",b,Ee.setState),$e("edgesUpdatable",x,Ee.setState),$e("elementsSelectable",j,Ee.setState),$e("elevateNodesOnSelect",C,Ee.setState),$e("snapToGrid",S,Ee.setState),$e("snapGrid",K,Ee.setState),$e("onNodesChange",H,Ee.setState),$e("onEdgesChange",F,Ee.setState),$e("connectOnClick",N,Ee.setState),$e("fitViewOnInit",U,Ee.setState),$e("fitViewOnInitOptions",B,Ee.setState),$e("onNodesDelete",R,Ee.setState),$e("onEdgesDelete",D,Ee.setState),$e("onNodeDrag",G,Ee.setState),$e("onNodeDragStart",O,Ee.setState),$e("onNodeDragStop",Y,Ee.setState),$e("onSelectionDrag",ne,Ee.setState),$e("onSelectionDragStart",J,Ee.setState),$e("onSelectionDragStop",z,Ee.setState),$e("noPanClassName",W,Ee.setState),$e("nodeOrigin",re,Ee.setState),$e("rfId",X,Ee.setState),$e("autoPanOnConnect",se,Ee.setState),$e("autoPanOnNodeDrag",fe,Ee.setState),$e("onError",ce,Ee.setState),$e("connectionRadius",ve,Ee.setState),$e("isValidConnection",_e,Ee.setState),$e("nodeDragThreshold",Ae,Ee.setState),Wo(t,Ce),Wo(e,et),Wo(M,ze),Wo(k,tt),Wo(T,it),Wo(L,zt),null},XE={display:"none"},P4={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},aT="react-flow__node-desc",oT="react-flow__edge-desc",V4="react-flow__aria-live",z4=t=>t.ariaLiveMessage;function L4({rfId:t}){const e=Tt(z4);return he.createElement("div",{id:`${V4}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:P4},e)}function U4({rfId:t,disableKeyboardA11y:e}){return he.createElement(he.Fragment,null,he.createElement("div",{id:`${aT}-${t}`,style:XE},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),he.createElement("div",{id:`${oT}-${t}`,style:XE},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&he.createElement(L4,{rfId:t}))}var yc=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,i]=q.useState(!1),a=q.useRef(!1),l=q.useRef(new Set([])),[u,d]=q.useMemo(()=>{if(t!==null){const m=(Array.isArray(t)?t:[t]).filter(v=>typeof v=="string").map(v=>v.split("+")),y=m.reduce((v,b)=>v.concat(...b),[]);return[m,y]}return[[],[]]},[t]);return q.useEffect(()=>{const f=typeof document<"u"?document:null,m=e?.target||f;if(t!==null){const y=x=>{if(a.current=x.ctrlKey||x.metaKey||x.shiftKey,(!a.current||a.current&&!e.actInsideInputWithModifier)&&Gp(x))return!1;const M=WE(x.code,d);l.current.add(x[M]),QE(u,l.current,!1)&&(x.preventDefault(),i(!0))},v=x=>{if((!a.current||a.current&&!e.actInsideInputWithModifier)&&Gp(x))return!1;const M=WE(x.code,d);QE(u,l.current,!0)?(i(!1),l.current.clear()):l.current.delete(x[M]),x.key==="Meta"&&l.current.clear(),a.current=!1},b=()=>{l.current.clear(),i(!1)};return m?.addEventListener("keydown",y),m?.addEventListener("keyup",v),window.addEventListener("blur",b),()=>{m?.removeEventListener("keydown",y),m?.removeEventListener("keyup",v),window.removeEventListener("blur",b)}}},[t,i]),n};function QE(t,e,n){return t.filter(i=>n||i.length===e.size).some(i=>i.every(a=>e.has(a)))}function WE(t,e){return e.includes(t)?"code":"key"}function lT(t,e,n,i){const a=t.parentNode||t.parentId;if(!a)return n;const l=e.get(a),u=gl(l,i);return lT(l,e,{x:(n.x??0)+u.x,y:(n.y??0)+u.y,z:(l[kt]?.z??0)>(n.z??0)?l[kt]?.z??0:n.z??0},i)}function uT(t,e,n){t.forEach(i=>{const a=i.parentNode||i.parentId;if(a&&!t.has(a))throw new Error(`Parent node ${a} not found`);if(a||n?.[i.id]){const{x:l,y:u,z:d}=lT(i,t,{...i.position,z:i[kt]?.z??0},e);i.positionAbsolute={x:l,y:u},i[kt].z=d,n?.[i.id]&&(i[kt].isParent=!0)}})}function mp(t,e,n,i){const a=new Map,l={},u=i?1e3:0;return t.forEach(d=>{const f=(Rr(d.zIndex)?d.zIndex:0)+(d.selected?u:0),m=e.get(d.id),y={...d,positionAbsolute:{x:d.position.x,y:d.position.y}},v=d.parentNode||d.parentId;v&&(l[v]=!0);const b=m?.type&&m?.type!==d.type;Object.defineProperty(y,kt,{enumerable:!1,value:{handleBounds:b?void 0:m?.[kt]?.handleBounds,z:f}}),a.set(d.id,y)}),uT(a,n,l),a}function cT(t,e={}){const{getNodes:n,width:i,height:a,minZoom:l,maxZoom:u,d3Zoom:d,d3Selection:f,fitViewOnInitDone:m,fitViewOnInit:y,nodeOrigin:v}=t(),b=e.initial&&!m&&y;if(d&&f&&(b||!e.initial)){const C=n().filter(k=>{const L=e.includeHiddenNodes?k.width&&k.height:!k.hidden;return e.nodes?.length?L&&e.nodes.some(H=>H.id===k.id):L}),M=C.every(k=>k.width&&k.height);if(C.length>0&&M){const k=H0(C,v),{x:L,y:H,zoom:F}=Xx(k,i,a,e.minZoom??l,e.maxZoom??u,e.padding??.1),j=qs.translate(L,H).scale(F);return typeof e.duration=="number"&&e.duration>0?d.transform(Ua(f,e.duration),j):d.transform(f,j),!0}}return!1}function B4(t,e){return t.forEach(n=>{const i=e.get(n.id);i&&e.set(i.id,{...i,[kt]:i[kt],selected:n.selected})}),new Map(e)}function j4(t,e){return e.map(n=>{const i=t.find(a=>a.id===n.id);return i&&(n.selected=i.selected),n})}function mh({changedNodes:t,changedEdges:e,get:n,set:i}){const{nodeInternals:a,edges:l,onNodesChange:u,onEdgesChange:d,hasDefaultNodes:f,hasDefaultEdges:m}=n();t?.length&&(f&&i({nodeInternals:B4(t,a)}),u?.(t)),e?.length&&(m&&i({edges:j4(e,l)}),d?.(e))}const Zo=()=>{},H4={zoomIn:Zo,zoomOut:Zo,zoomTo:Zo,getZoom:()=>1,setViewport:Zo,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Zo,fitBounds:Zo,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},q4=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),$4=()=>{const t=ln(),{d3Zoom:e,d3Selection:n}=Tt(q4,Tn);return q.useMemo(()=>n&&e?{zoomIn:a=>e.scaleBy(Ua(n,a?.duration),1.2),zoomOut:a=>e.scaleBy(Ua(n,a?.duration),1/1.2),zoomTo:(a,l)=>e.scaleTo(Ua(n,l?.duration),a),getZoom:()=>t.getState().transform[2],setViewport:(a,l)=>{const[u,d,f]=t.getState().transform,m=qs.translate(a.x??u,a.y??d).scale(a.zoom??f);e.transform(Ua(n,l?.duration),m)},getViewport:()=>{const[a,l,u]=t.getState().transform;return{x:a,y:l,zoom:u}},fitView:a=>cT(t.getState,a),setCenter:(a,l,u)=>{const{width:d,height:f,maxZoom:m}=t.getState(),y=typeof u?.zoom<"u"?u.zoom:m,v=d/2-a*y,b=f/2-l*y,x=qs.translate(v,b).scale(y);e.transform(Ua(n,u?.duration),x)},fitBounds:(a,l)=>{const{width:u,height:d,minZoom:f,maxZoom:m}=t.getState(),{x:y,y:v,zoom:b}=Xx(a,u,d,f,m,l?.padding??.1),x=qs.translate(y,v).scale(b);e.transform(Ua(n,l?.duration),x)},project:a=>{const{transform:l,snapToGrid:u,snapGrid:d}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Xp(a,l,u,d)},screenToFlowPosition:a=>{const{transform:l,snapToGrid:u,snapGrid:d,domNode:f}=t.getState();if(!f)return a;const{x:m,y}=f.getBoundingClientRect(),v={x:a.x-m,y:a.y-y};return Xp(v,l,u,d)},flowToScreenPosition:a=>{const{transform:l,domNode:u}=t.getState();if(!u)return a;const{x:d,y:f}=u.getBoundingClientRect(),m=Gx(a,l);return{x:m.x+d,y:m.y+f}},viewportInitialized:!0}:H4,[e,n])};function Oc(){const t=$4(),e=ln(),n=q.useCallback(()=>e.getState().getNodes().map(M=>({...M})),[]),i=q.useCallback(M=>e.getState().nodeInternals.get(M),[]),a=q.useCallback(()=>{const{edges:M=[]}=e.getState();return M.map(k=>({...k}))},[]),l=q.useCallback(M=>{const{edges:k=[]}=e.getState();return k.find(L=>L.id===M)},[]),u=q.useCallback(M=>{const{getNodes:k,setNodes:L,hasDefaultNodes:H,onNodesChange:F}=e.getState(),j=k(),Q=typeof M=="function"?M(j):M;if(H)L(Q);else if(F){const K=Q.length===0?j.map(S=>({type:"remove",id:S.id})):Q.map(S=>({item:S,type:"reset"}));F(K)}},[]),d=q.useCallback(M=>{const{edges:k=[],setEdges:L,hasDefaultEdges:H,onEdgesChange:F}=e.getState(),j=typeof M=="function"?M(k):M;if(H)L(j);else if(F){const Q=j.length===0?k.map(K=>({type:"remove",id:K.id})):j.map(K=>({item:K,type:"reset"}));F(Q)}},[]),f=q.useCallback(M=>{const k=Array.isArray(M)?M:[M],{getNodes:L,setNodes:H,hasDefaultNodes:F,onNodesChange:j}=e.getState();if(F){const K=[...L(),...k];H(K)}else if(j){const Q=k.map(K=>({item:K,type:"add"}));j(Q)}},[]),m=q.useCallback(M=>{const k=Array.isArray(M)?M:[M],{edges:L=[],setEdges:H,hasDefaultEdges:F,onEdgesChange:j}=e.getState();if(F)H([...L,...k]);else if(j){const Q=k.map(K=>({item:K,type:"add"}));j(Q)}},[]),y=q.useCallback(()=>{const{getNodes:M,edges:k=[],transform:L}=e.getState(),[H,F,j]=L;return{nodes:M().map(Q=>({...Q})),edges:k.map(Q=>({...Q})),viewport:{x:H,y:F,zoom:j}}},[]),v=q.useCallback(({nodes:M,edges:k})=>{const{nodeInternals:L,getNodes:H,edges:F,hasDefaultNodes:j,hasDefaultEdges:Q,onNodesDelete:K,onEdgesDelete:S,onNodesChange:T,onEdgesChange:N}=e.getState(),V=(M||[]).map(G=>G.id),U=(k||[]).map(G=>G.id),B=H().reduce((G,O)=>{const Y=O.parentNode||O.parentId,ne=!V.includes(O.id)&&Y&&G.find(z=>z.id===Y);return(typeof O.deletable=="boolean"?O.deletable:!0)&&(V.includes(O.id)||ne)&&G.push(O),G},[]),R=F.filter(G=>typeof G.deletable=="boolean"?G.deletable:!0),D=R.filter(G=>U.includes(G.id));if(B||D){const G=Kx(B,R),O=[...D,...G],Y=O.reduce((ne,J)=>(ne.includes(J.id)||ne.push(J.id),ne),[]);if((Q||j)&&(Q&&e.setState({edges:F.filter(ne=>!Y.includes(ne.id))}),j&&(B.forEach(ne=>{L.delete(ne.id)}),e.setState({nodeInternals:new Map(L)}))),Y.length>0&&(S?.(O),N&&N(Y.map(ne=>({id:ne,type:"remove"})))),B.length>0&&(K?.(B),T)){const ne=B.map(J=>({id:J.id,type:"remove"}));T(ne)}}},[]),b=q.useCallback(M=>{const k=c4(M),L=k?null:e.getState().nodeInternals.get(M.id);return!k&&!L?[null,null,k]:[k?M:HE(L),L,k]},[]),x=q.useCallback((M,k=!0,L)=>{const[H,F,j]=b(M);return H?(L||e.getState().getNodes()).filter(Q=>{if(!j&&(Q.id===F.id||!Q.positionAbsolute))return!1;const K=HE(Q),S=Fp(K,H);return k&&S>0||S>=H.width*H.height}):[]},[]),C=q.useCallback((M,k,L=!0)=>{const[H]=b(M);if(!H)return!1;const F=Fp(H,k);return L&&F>0||F>=H.width*H.height},[]);return q.useMemo(()=>({...t,getNodes:n,getNode:i,getEdges:a,getEdge:l,setNodes:u,setEdges:d,addNodes:f,addEdges:m,toObject:y,deleteElements:v,getIntersectingNodes:x,isNodeIntersecting:C}),[t,n,i,a,l,u,d,f,m,y,v,x,C])}const F4={actInsideInputWithModifier:!1};var G4=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=ln(),{deleteElements:i}=Oc(),a=yc(t,F4),l=yc(e);q.useEffect(()=>{if(a){const{edges:u,getNodes:d}=n.getState(),f=d().filter(y=>y.selected),m=u.filter(y=>y.selected);i({nodes:f,edges:m}),n.setState({nodesSelectionActive:!1})}},[a]),q.useEffect(()=>{n.setState({multiSelectionActive:l})},[l])};function Y4(t){const e=ln();q.useEffect(()=>{let n;const i=()=>{if(!t.current)return;const a=P0(t.current);(a.height===0||a.width===0)&&e.getState().onError?.("004",es.error004()),e.setState({width:a.width||500,height:a.height||500})};return i(),window.addEventListener("resize",i),t.current&&(n=new ResizeObserver(()=>i()),n.observe(t.current)),()=>{window.removeEventListener("resize",i),n&&t.current&&n.unobserve(t.current)}},[])}const F0={position:"absolute",width:"100%",height:"100%",top:0,left:0},K4=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,ph=t=>({x:t.x,y:t.y,zoom:t.k}),Jo=(t,e)=>t.target.closest(`.${e}`),ZE=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),JE=t=>{const e=t.ctrlKey&&Zh()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},X4=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),Q4=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:i,zoomOnScroll:a=!0,zoomOnPinch:l=!0,panOnScroll:u=!1,panOnScrollSpeed:d=.5,panOnScrollMode:f=Ha.Free,zoomOnDoubleClick:m=!0,elementsSelectable:y,panOnDrag:v=!0,defaultViewport:b,translateExtent:x,minZoom:C,maxZoom:M,zoomActivationKeyCode:k,preventScrolling:L=!0,children:H,noWheelClassName:F,noPanClassName:j})=>{const Q=q.useRef(),K=ln(),S=q.useRef(!1),T=q.useRef(!1),N=q.useRef(null),V=q.useRef({x:0,y:0,zoom:0}),{d3Zoom:U,d3Selection:B,d3ZoomHandler:R,userSelectionActive:D}=Tt(X4,Tn),G=yc(k),O=q.useRef(0),Y=q.useRef(!1),ne=q.useRef();return Y4(N),q.useEffect(()=>{if(N.current){const J=N.current.getBoundingClientRect(),z=t4().scaleExtent([C,M]).translateExtent(x),W=zr(N.current).call(z),re=qs.translate(b.x,b.y).scale(Tl(b.zoom,C,M)),X=[[0,0],[J.width,J.height]],se=z.constrain()(re,X,x);z.transform(W,se),z.wheelDelta(JE),K.setState({d3Zoom:z,d3Selection:W,d3ZoomHandler:W.on("wheel.zoom"),transform:[se.x,se.y,se.k],domNode:N.current.closest(".react-flow")})}},[]),q.useEffect(()=>{B&&U&&(u&&!G&&!D?B.on("wheel.zoom",J=>{if(Jo(J,F))return!1;J.preventDefault(),J.stopImmediatePropagation();const z=B.property("__zoom").k||1;if(J.ctrlKey&&l){const _e=hi(J),Ae=JE(J),Ce=z*Math.pow(2,Ae);U.scaleTo(B,Ce,_e,J);return}const W=J.deltaMode===1?20:1;let re=f===Ha.Vertical?0:J.deltaX*W,X=f===Ha.Horizontal?0:J.deltaY*W;!Zh()&&J.shiftKey&&f!==Ha.Vertical&&(re=J.deltaY*W,X=0),U.translateBy(B,-(re/z)*d,-(X/z)*d,{internal:!0});const se=ph(B.property("__zoom")),{onViewportChangeStart:fe,onViewportChange:ce,onViewportChangeEnd:ve}=K.getState();clearTimeout(ne.current),Y.current||(Y.current=!0,e?.(J,se),fe?.(se)),Y.current&&(t?.(J,se),ce?.(se),ne.current=setTimeout(()=>{n?.(J,se),ve?.(se),Y.current=!1},150))},{passive:!1}):typeof R<"u"&&B.on("wheel.zoom",function(J,z){if(!L&&J.type==="wheel"&&!J.ctrlKey||Jo(J,F))return null;J.preventDefault(),R.call(this,J,z)},{passive:!1}))},[D,u,f,B,U,R,G,l,L,F,e,t,n]),q.useEffect(()=>{U&&U.on("start",J=>{if(!J.sourceEvent||J.sourceEvent.internal)return null;O.current=J.sourceEvent?.button;const{onViewportChangeStart:z}=K.getState(),W=ph(J.transform);S.current=!0,V.current=W,J.sourceEvent?.type==="mousedown"&&K.setState({paneDragging:!0}),z?.(W),e?.(J.sourceEvent,W)})},[U,e]),q.useEffect(()=>{U&&(D&&!S.current?U.on("zoom",null):D||U.on("zoom",J=>{const{onViewportChange:z}=K.getState();if(K.setState({transform:[J.transform.x,J.transform.y,J.transform.k]}),T.current=!!(i&&ZE(v,O.current??0)),(t||z)&&!J.sourceEvent?.internal){const W=ph(J.transform);z?.(W),t?.(J.sourceEvent,W)}}))},[D,U,t,v,i]),q.useEffect(()=>{U&&U.on("end",J=>{if(!J.sourceEvent||J.sourceEvent.internal)return null;const{onViewportChangeEnd:z}=K.getState();if(S.current=!1,K.setState({paneDragging:!1}),i&&ZE(v,O.current??0)&&!T.current&&i(J.sourceEvent),T.current=!1,(n||z)&&K4(V.current,J.transform)){const W=ph(J.transform);V.current=W,clearTimeout(Q.current),Q.current=setTimeout(()=>{z?.(W),n?.(J.sourceEvent,W)},u?150:0)}})},[U,u,v,n,i]),q.useEffect(()=>{U&&U.filter(J=>{const z=G||a,W=l&&J.ctrlKey;if((v===!0||Array.isArray(v)&&v.includes(1))&&J.button===1&&J.type==="mousedown"&&(Jo(J,"react-flow__node")||Jo(J,"react-flow__edge")))return!0;if(!v&&!z&&!u&&!m&&!l||D||!m&&J.type==="dblclick"||Jo(J,F)&&J.type==="wheel"||Jo(J,j)&&(J.type!=="wheel"||u&&J.type==="wheel"&&!G)||!l&&J.ctrlKey&&J.type==="wheel"||!z&&!u&&!W&&J.type==="wheel"||!v&&(J.type==="mousedown"||J.type==="touchstart")||Array.isArray(v)&&!v.includes(J.button)&&J.type==="mousedown")return!1;const re=Array.isArray(v)&&v.includes(J.button)||!J.button||J.button<=1;return(!J.ctrlKey||J.type==="wheel")&&re})},[D,U,a,l,u,m,v,y,G]),he.createElement("div",{className:"react-flow__renderer",ref:N,style:F0},H)},W4=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function Z4(){const{userSelectionActive:t,userSelectionRect:e}=Tt(W4,Tn);return t&&e?he.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function ew(t,e){const n=e.parentNode||e.parentId,i=t.find(a=>a.id===n);if(i){const a=e.position.x+e.width-i.width,l=e.position.y+e.height-i.height;if(a>0||l>0||e.position.x<0||e.position.y<0){if(i.style={...i.style},i.style.width=i.style.width??i.width,i.style.height=i.style.height??i.height,a>0&&(i.style.width+=a),l>0&&(i.style.height+=l),e.position.x<0){const u=Math.abs(e.position.x);i.position.x=i.position.x-u,i.style.width+=u,e.position.x=0}if(e.position.y<0){const u=Math.abs(e.position.y);i.position.y=i.position.y-u,i.style.height+=u,e.position.y=0}i.width=i.style.width,i.height=i.style.height}}}function dT(t,e){if(t.some(i=>i.type==="reset"))return t.filter(i=>i.type==="reset").map(i=>i.item);const n=t.filter(i=>i.type==="add").map(i=>i.item);return e.reduce((i,a)=>{const l=t.filter(d=>d.id===a.id);if(l.length===0)return i.push(a),i;const u={...a};for(const d of l)if(d)switch(d.type){case"select":{u.selected=d.selected;break}case"position":{typeof d.position<"u"&&(u.position=d.position),typeof d.positionAbsolute<"u"&&(u.positionAbsolute=d.positionAbsolute),typeof d.dragging<"u"&&(u.dragging=d.dragging),u.expandParent&&ew(i,u);break}case"dimensions":{typeof d.dimensions<"u"&&(u.width=d.dimensions.width,u.height=d.dimensions.height),typeof d.updateStyle<"u"&&(u.style={...u.style||{},...d.dimensions}),typeof d.resizing=="boolean"&&(u.resizing=d.resizing),u.expandParent&&ew(i,u);break}case"remove":return i}return i.push(u),i},n)}function hT(t,e){return dT(t,e)}function J4(t,e){return dT(t,e)}const Os=(t,e)=>({id:t,type:"select",selected:e});function ul(t,e){return t.reduce((n,i)=>{const a=e.includes(i.id);return!i.selected&&a?(i.selected=!0,n.push(Os(i.id,!0))):i.selected&&!a&&(i.selected=!1,n.push(Os(i.id,!1))),n},[])}const pp=(t,e)=>n=>{n.target===e.current&&t?.(n)},eD=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),fT=q.memo(({isSelecting:t,selectionMode:e=mc.Full,panOnDrag:n,onSelectionStart:i,onSelectionEnd:a,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:d,onPaneMouseEnter:f,onPaneMouseMove:m,onPaneMouseLeave:y,children:v})=>{const b=q.useRef(null),x=ln(),C=q.useRef(0),M=q.useRef(0),k=q.useRef(),{userSelectionActive:L,elementsSelectable:H,dragging:F}=Tt(eD,Tn),j=()=>{x.setState({userSelectionActive:!1,userSelectionRect:null}),C.current=0,M.current=0},Q=R=>{l?.(R),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},K=R=>{if(Array.isArray(n)&&n?.includes(2)){R.preventDefault();return}u?.(R)},S=d?R=>d(R):void 0,T=R=>{const{resetSelectedElements:D,domNode:G}=x.getState();if(k.current=G?.getBoundingClientRect(),!H||!t||R.button!==0||R.target!==b.current||!k.current)return;const{x:O,y:Y}=$s(R,k.current);D(),x.setState({userSelectionRect:{width:0,height:0,startX:O,startY:Y,x:O,y:Y}}),i?.(R)},N=R=>{const{userSelectionRect:D,nodeInternals:G,edges:O,transform:Y,onNodesChange:ne,onEdgesChange:J,nodeOrigin:z,getNodes:W}=x.getState();if(!t||!k.current||!D)return;x.setState({userSelectionActive:!0,nodesSelectionActive:!1});const re=$s(R,k.current),X=D.startX??0,se=D.startY??0,fe={...D,x:re.x<X?re.x:X,y:re.y<se?re.y:se,width:Math.abs(re.x-X),height:Math.abs(re.y-se)},ce=W(),ve=Yx(G,fe,Y,e===mc.Partial,!0,z),_e=Kx(ve,O).map(Ce=>Ce.id),Ae=ve.map(Ce=>Ce.id);if(C.current!==Ae.length){C.current=Ae.length;const Ce=ul(ce,Ae);Ce.length&&ne?.(Ce)}if(M.current!==_e.length){M.current=_e.length;const Ce=ul(O,_e);Ce.length&&J?.(Ce)}x.setState({userSelectionRect:fe})},V=R=>{if(R.button!==0)return;const{userSelectionRect:D}=x.getState();!L&&D&&R.target===b.current&&Q?.(R),x.setState({nodesSelectionActive:C.current>0}),j(),a?.(R)},U=R=>{L&&(x.setState({nodesSelectionActive:C.current>0}),a?.(R)),j()},B=H&&(t||L);return he.createElement("div",{className:Pn(["react-flow__pane",{dragging:F,selection:t}]),onClick:B?void 0:pp(Q,b),onContextMenu:pp(K,b),onWheel:pp(S,b),onMouseEnter:B?void 0:f,onMouseDown:B?T:void 0,onMouseMove:B?N:m,onMouseUp:B?V:void 0,onMouseLeave:B?U:y,ref:b,style:F0},v,he.createElement(Z4,null))});fT.displayName="Pane";function gT(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const i=e.get(n);return i?i.selected?!0:gT(i,e):!1}function tw(t,e,n){let i=t;do{if(i?.matches(e))return!0;if(i===n.current)return!1;i=i.parentElement}while(i);return!1}function tD(t,e,n,i){return Array.from(t.values()).filter(a=>(a.selected||a.id===i)&&(!a.parentNode||a.parentId||!gT(a,t))&&(a.draggable||e&&typeof a.draggable>"u")).map(a=>({id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:n.x-(a.positionAbsolute?.x??0),y:n.y-(a.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}))}function nD(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function mT(t,e,n,i,a=[0,0],l){const u=nD(t,t.extent||i);let d=u;const f=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(f&&t.width&&t.height){const v=n.get(f),{x:b,y:x}=gl(v,a).positionAbsolute;d=v&&Rr(b)&&Rr(x)&&Rr(v.width)&&Rr(v.height)?[[b+t.width*a[0],x+t.height*a[1]],[b+v.width-t.width+t.width*a[0],x+v.height-t.height+t.height*a[1]]]:d}else l?.("005",es.error005()),d=u;else if(t.extent&&f&&t.extent!=="parent"){const v=n.get(f),{x:b,y:x}=gl(v,a).positionAbsolute;d=[[t.extent[0][0]+b,t.extent[0][1]+x],[t.extent[1][0]+b,t.extent[1][1]+x]]}let m={x:0,y:0};if(f){const v=n.get(f);m=gl(v,a).positionAbsolute}const y=d&&d!=="parent"?V0(e,d):e;return{position:{x:y.x-m.x,y:y.y-m.y},positionAbsolute:y}}function yp({nodeId:t,dragItems:e,nodeInternals:n}){const i=e.map(a=>({...n.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[t?i.find(a=>a.id===t):i[0],i]}const nw=(t,e,n,i)=>{const a=e.querySelectorAll(t);if(!a||!a.length)return null;const l=Array.from(a),u=e.getBoundingClientRect(),d={x:u.width*i[0],y:u.height*i[1]};return l.map(f=>{const m=f.getBoundingClientRect();return{id:f.getAttribute("data-handleid"),position:f.getAttribute("data-handlepos"),x:(m.left-u.left-d.x)/n,y:(m.top-u.top-d.y)/n,...P0(f)}})};function Fu(t,e,n){return n===void 0?n:i=>{const a=e().nodeInternals.get(t);a&&n(i,{...a})}}function Wp({id:t,store:e,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:a,unselectNodesAndEdges:l,multiSelectionActive:u,nodeInternals:d,onError:f}=e.getState(),m=d.get(t);if(!m){f?.("012",es.error012(t));return}e.setState({nodesSelectionActive:!1}),m.selected?(n||m.selected&&u)&&(l({nodes:[m],edges:[]}),requestAnimationFrame(()=>i?.current?.blur())):a([t])}function rD(){const t=ln();return q.useCallback(({sourceEvent:n})=>{const{transform:i,snapGrid:a,snapToGrid:l}=t.getState(),u=n.touches?n.touches[0].clientX:n.clientX,d=n.touches?n.touches[0].clientY:n.clientY,f={x:(u-i[0])/i[2],y:(d-i[1])/i[2]};return{xSnapped:l?a[0]*Math.round(f.x/a[0]):f.x,ySnapped:l?a[1]*Math.round(f.y/a[1]):f.y,...f}},[])}function vp(t){return(e,n,i)=>t?.(e,i)}function pT({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:i,nodeId:a,isSelectable:l,selectNodesOnDrag:u}){const d=ln(),[f,m]=q.useState(!1),y=q.useRef([]),v=q.useRef({x:null,y:null}),b=q.useRef(0),x=q.useRef(null),C=q.useRef({x:0,y:0}),M=q.useRef(null),k=q.useRef(!1),L=q.useRef(!1),H=q.useRef(!1),F=rD();return q.useEffect(()=>{if(t?.current){const j=zr(t.current),Q=({x:T,y:N})=>{const{nodeInternals:V,onNodeDrag:U,onSelectionDrag:B,updateNodePositions:R,nodeExtent:D,snapGrid:G,snapToGrid:O,nodeOrigin:Y,onError:ne}=d.getState();v.current={x:T,y:N};let J=!1,z={x:0,y:0,x2:0,y2:0};if(y.current.length>1&&D){const re=H0(y.current,Y);z=z0(re)}if(y.current=y.current.map(re=>{const X={x:T-re.distance.x,y:N-re.distance.y};O&&(X.x=G[0]*Math.round(X.x/G[0]),X.y=G[1]*Math.round(X.y/G[1]));const se=[[D[0][0],D[0][1]],[D[1][0],D[1][1]]];y.current.length>1&&D&&!re.extent&&(se[0][0]=re.positionAbsolute.x-z.x+D[0][0],se[1][0]=re.positionAbsolute.x+(re.width??0)-z.x2+D[1][0],se[0][1]=re.positionAbsolute.y-z.y+D[0][1],se[1][1]=re.positionAbsolute.y+(re.height??0)-z.y2+D[1][1]);const fe=mT(re,X,V,se,Y,ne);return J=J||re.position.x!==fe.position.x||re.position.y!==fe.position.y,re.position=fe.position,re.positionAbsolute=fe.positionAbsolute,re}),!J)return;R(y.current,!0,!0),m(!0);const W=a?U:vp(B);if(W&&M.current){const[re,X]=yp({nodeId:a,dragItems:y.current,nodeInternals:V});W(M.current,re,X)}},K=()=>{if(!x.current)return;const[T,N]=Lx(C.current,x.current);if(T!==0||N!==0){const{transform:V,panBy:U}=d.getState();v.current.x=(v.current.x??0)-T/V[2],v.current.y=(v.current.y??0)-N/V[2],U({x:T,y:N})&&Q(v.current)}b.current=requestAnimationFrame(K)},S=T=>{const{nodeInternals:N,multiSelectionActive:V,nodesDraggable:U,unselectNodesAndEdges:B,onNodeDragStart:R,onSelectionDragStart:D}=d.getState();L.current=!0;const G=a?R:vp(D);(!u||!l)&&!V&&a&&(N.get(a)?.selected||B()),a&&l&&u&&Wp({id:a,store:d,nodeRef:t});const O=F(T);if(v.current=O,y.current=tD(N,U,O,a),G&&y.current){const[Y,ne]=yp({nodeId:a,dragItems:y.current,nodeInternals:N});G(T.sourceEvent,Y,ne)}};if(e)j.on(".drag",null);else{const T=dI().on("start",N=>{const{domNode:V,nodeDragThreshold:U}=d.getState();U===0&&S(N),H.current=!1;const B=F(N);v.current=B,x.current=V?.getBoundingClientRect()||null,C.current=$s(N.sourceEvent,x.current)}).on("drag",N=>{const V=F(N),{autoPanOnNodeDrag:U,nodeDragThreshold:B}=d.getState();if(N.sourceEvent.type==="touchmove"&&N.sourceEvent.touches.length>1&&(H.current=!0),!H.current){if(!k.current&&L.current&&U&&(k.current=!0,K()),!L.current){const R=V.xSnapped-(v?.current?.x??0),D=V.ySnapped-(v?.current?.y??0);Math.sqrt(R*R+D*D)>B&&S(N)}(v.current.x!==V.xSnapped||v.current.y!==V.ySnapped)&&y.current&&L.current&&(M.current=N.sourceEvent,C.current=$s(N.sourceEvent,x.current),Q(V))}}).on("end",N=>{if(!(!L.current||H.current)&&(m(!1),k.current=!1,L.current=!1,cancelAnimationFrame(b.current),y.current)){const{updateNodePositions:V,nodeInternals:U,onNodeDragStop:B,onSelectionDragStop:R}=d.getState(),D=a?B:vp(R);if(V(y.current,!1,!1),D){const[G,O]=yp({nodeId:a,dragItems:y.current,nodeInternals:U});D(N.sourceEvent,G,O)}}}).filter(N=>{const V=N.target;return!N.button&&(!n||!tw(V,`.${n}`,t))&&(!i||tw(V,i,t))});return j.call(T),()=>{j.on(".drag",null)}}}},[t,e,n,i,l,d,a,u,F]),f}function yT(){const t=ln();return q.useCallback(n=>{const{nodeInternals:i,nodeExtent:a,updateNodePositions:l,getNodes:u,snapToGrid:d,snapGrid:f,onError:m,nodesDraggable:y}=t.getState(),v=u().filter(H=>H.selected&&(H.draggable||y&&typeof H.draggable>"u")),b=d?f[0]:5,x=d?f[1]:5,C=n.isShiftPressed?4:1,M=n.x*b*C,k=n.y*x*C,L=v.map(H=>{if(H.positionAbsolute){const F={x:H.positionAbsolute.x+M,y:H.positionAbsolute.y+k};d&&(F.x=f[0]*Math.round(F.x/f[0]),F.y=f[1]*Math.round(F.y/f[1]));const{positionAbsolute:j,position:Q}=mT(H,F,i,a,void 0,m);H.position=Q,H.positionAbsolute=j}return H});l(L,!0,!1)},[])}const ml={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Gu=t=>{const e=({id:n,type:i,data:a,xPos:l,yPos:u,xPosOrigin:d,yPosOrigin:f,selected:m,onClick:y,onMouseEnter:v,onMouseMove:b,onMouseLeave:x,onContextMenu:C,onDoubleClick:M,style:k,className:L,isDraggable:H,isSelectable:F,isConnectable:j,isFocusable:Q,selectNodesOnDrag:K,sourcePosition:S,targetPosition:T,hidden:N,resizeObserver:V,dragHandle:U,zIndex:B,isParent:R,noDragClassName:D,noPanClassName:G,initialized:O,disableKeyboardA11y:Y,ariaLabel:ne,rfId:J,hasHandleBounds:z})=>{const W=ln(),re=q.useRef(null),X=q.useRef(null),se=q.useRef(S),fe=q.useRef(T),ce=q.useRef(i),ve=F||H||y||v||b||x,_e=yT(),Ae=Fu(n,W.getState,v),Ce=Fu(n,W.getState,b),et=Fu(n,W.getState,x),rt=Fu(n,W.getState,C),ze=Fu(n,W.getState,M),tt=Le=>{const{nodeDragThreshold:Ee}=W.getState();if(F&&(!K||!H||Ee>0)&&Wp({id:n,store:W,nodeRef:re}),y){const At=W.getState().nodeInternals.get(n);At&&y(Le,{...At})}},it=Le=>{if(!Gp(Le)&&!Y)if(Bx.includes(Le.key)&&F){const Ee=Le.key==="Escape";Wp({id:n,store:W,unselect:Ee,nodeRef:re})}else H&&m&&Object.prototype.hasOwnProperty.call(ml,Le.key)&&(W.setState({ariaLiveMessage:`Moved selected node ${Le.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~l}, y: ${~~u}`}),_e({x:ml[Le.key].x,y:ml[Le.key].y,isShiftPressed:Le.shiftKey}))};q.useEffect(()=>()=>{X.current&&(V?.unobserve(X.current),X.current=null)},[]),q.useEffect(()=>{if(re.current&&!N){const Le=re.current;(!O||!z||X.current!==Le)&&(X.current&&V?.unobserve(X.current),V?.observe(Le),X.current=Le)}},[N,O,z]),q.useEffect(()=>{const Le=ce.current!==i,Ee=se.current!==S,At=fe.current!==T;re.current&&(Le||Ee||At)&&(Le&&(ce.current=i),Ee&&(se.current=S),At&&(fe.current=T),W.getState().updateNodeDimensions([{id:n,nodeElement:re.current,forceUpdate:!0}]))},[n,i,S,T]);const zt=pT({nodeRef:re,disabled:N||!H,noDragClassName:D,handleSelector:U,nodeId:n,isSelectable:F,selectNodesOnDrag:K});return N?null:he.createElement("div",{className:Pn(["react-flow__node",`react-flow__node-${i}`,{[G]:H},L,{selected:m,selectable:F,parent:R,dragging:zt}]),ref:re,style:{zIndex:B,transform:`translate(${d}px,${f}px)`,pointerEvents:ve?"all":"none",visibility:O?"visible":"hidden",...k},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Ae,onMouseMove:Ce,onMouseLeave:et,onContextMenu:rt,onClick:tt,onDoubleClick:ze,onKeyDown:Q?it:void 0,tabIndex:Q?0:void 0,role:Q?"button":void 0,"aria-describedby":Y?void 0:`${aT}-${J}`,"aria-label":ne},he.createElement(y4,{value:n},he.createElement(t,{id:n,data:a,type:i,xPos:l,yPos:u,selected:m,isConnectable:j,sourcePosition:S,targetPosition:T,dragging:zt,dragHandle:U,zIndex:B})))};return e.displayName="NodeWrapper",q.memo(e)};const iD=t=>{const e=t.getNodes().filter(n=>n.selected);return{...H0(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function sD({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const i=ln(),{width:a,height:l,x:u,y:d,transformString:f,userSelectionActive:m}=Tt(iD,Tn),y=yT(),v=q.useRef(null);if(q.useEffect(()=>{n||v.current?.focus({preventScroll:!0})},[n]),pT({nodeRef:v}),m||!a||!l)return null;const b=t?C=>{const M=i.getState().getNodes().filter(k=>k.selected);t(C,M)}:void 0,x=C=>{Object.prototype.hasOwnProperty.call(ml,C.key)&&y({x:ml[C.key].x,y:ml[C.key].y,isShiftPressed:C.shiftKey})};return he.createElement("div",{className:Pn(["react-flow__nodesselection","react-flow__container",e]),style:{transform:f}},he.createElement("div",{ref:v,className:"react-flow__nodesselection-rect",onContextMenu:b,tabIndex:n?void 0:-1,onKeyDown:n?void 0:x,style:{width:a,height:l,top:d,left:u}}))}var aD=q.memo(sD);const oD=t=>t.nodesSelectionActive,vT=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:u,deleteKeyCode:d,onMove:f,onMoveStart:m,onMoveEnd:y,selectionKeyCode:v,selectionOnDrag:b,selectionMode:x,onSelectionStart:C,onSelectionEnd:M,multiSelectionKeyCode:k,panActivationKeyCode:L,zoomActivationKeyCode:H,elementsSelectable:F,zoomOnScroll:j,zoomOnPinch:Q,panOnScroll:K,panOnScrollSpeed:S,panOnScrollMode:T,zoomOnDoubleClick:N,panOnDrag:V,defaultViewport:U,translateExtent:B,minZoom:R,maxZoom:D,preventScrolling:G,onSelectionContextMenu:O,noWheelClassName:Y,noPanClassName:ne,disableKeyboardA11y:J})=>{const z=Tt(oD),W=yc(v),re=yc(L),X=re||V,se=re||K,fe=W||b&&X!==!0;return G4({deleteKeyCode:d,multiSelectionKeyCode:k}),he.createElement(Q4,{onMove:f,onMoveStart:m,onMoveEnd:y,onPaneContextMenu:l,elementsSelectable:F,zoomOnScroll:j,zoomOnPinch:Q,panOnScroll:se,panOnScrollSpeed:S,panOnScrollMode:T,zoomOnDoubleClick:N,panOnDrag:!W&&X,defaultViewport:U,translateExtent:B,minZoom:R,maxZoom:D,zoomActivationKeyCode:H,preventScrolling:G,noWheelClassName:Y,noPanClassName:ne},he.createElement(fT,{onSelectionStart:C,onSelectionEnd:M,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:u,panOnDrag:X,isSelecting:!!fe,selectionMode:x},t,z&&he.createElement(aD,{onSelectionContextMenu:O,noPanClassName:ne,disableKeyboardA11y:J})))};vT.displayName="FlowRenderer";var lD=q.memo(vT);function uD(t){return Tt(q.useCallback(n=>t?Yx(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function cD(t){const e={input:Gu(t.input||nT),default:Gu(t.default||Qp),output:Gu(t.output||iT),group:Gu(t.group||$0)},n={},i=Object.keys(t).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,l)=>(a[l]=Gu(t[l]||Qp),a),n);return{...e,...i}}const dD=({x:t,y:e,width:n,height:i,origin:a})=>!n||!i?{x:t,y:e}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:t,y:e}:{x:t-n*a[0],y:e-i*a[1]},hD=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),_T=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:i,elementsSelectable:a,updateNodeDimensions:l,onError:u}=Tt(hD,Tn),d=uD(t.onlyRenderVisibleElements),f=q.useRef(),m=q.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const y=new ResizeObserver(v=>{const b=v.map(x=>({id:x.target.getAttribute("data-id"),nodeElement:x.target,forceUpdate:!0}));l(b)});return f.current=y,y},[]);return q.useEffect(()=>()=>{f?.current?.disconnect()},[]),he.createElement("div",{className:"react-flow__nodes",style:F0},d.map(y=>{let v=y.type||"default";t.nodeTypes[v]||(u?.("003",es.error003(v)),v="default");const b=t.nodeTypes[v]||t.nodeTypes.default,x=!!(y.draggable||e&&typeof y.draggable>"u"),C=!!(y.selectable||a&&typeof y.selectable>"u"),M=!!(y.connectable||n&&typeof y.connectable>"u"),k=!!(y.focusable||i&&typeof y.focusable>"u"),L=t.nodeExtent?V0(y.positionAbsolute,t.nodeExtent):y.positionAbsolute,H=L?.x??0,F=L?.y??0,j=dD({x:H,y:F,width:y.width??0,height:y.height??0,origin:t.nodeOrigin});return he.createElement(b,{key:y.id,id:y.id,className:y.className,style:y.style,type:v,data:y.data,sourcePosition:y.sourcePosition||Se.Bottom,targetPosition:y.targetPosition||Se.Top,hidden:y.hidden,xPos:H,yPos:F,xPosOrigin:j.x,yPosOrigin:j.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!y.selected,isDraggable:x,isSelectable:C,isConnectable:M,isFocusable:k,resizeObserver:m,dragHandle:y.dragHandle,zIndex:y[kt]?.z??0,isParent:!!y[kt]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!y.width&&!!y.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:y.ariaLabel,hasHandleBounds:!!y[kt]?.handleBounds})}))};_T.displayName="NodeRenderer";var fD=q.memo(_T);const gD=(t,e,n)=>n===Se.Left?t-e:n===Se.Right?t+e:t,mD=(t,e,n)=>n===Se.Top?t-e:n===Se.Bottom?t+e:t,rw="react-flow__edgeupdater",iw=({position:t,centerX:e,centerY:n,radius:i=10,onMouseDown:a,onMouseEnter:l,onMouseOut:u,type:d})=>he.createElement("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:u,className:Pn([rw,`${rw}-${d}`]),cx:gD(e,i,t),cy:mD(n,i,t),r:i,stroke:"transparent",fill:"transparent"}),pD=()=>!0;var el=t=>{const e=({id:n,className:i,type:a,data:l,onClick:u,onEdgeDoubleClick:d,selected:f,animated:m,label:y,labelStyle:v,labelShowBg:b,labelBgStyle:x,labelBgPadding:C,labelBgBorderRadius:M,style:k,source:L,target:H,sourceX:F,sourceY:j,targetX:Q,targetY:K,sourcePosition:S,targetPosition:T,elementsSelectable:N,hidden:V,sourceHandleId:U,targetHandleId:B,onContextMenu:R,onMouseEnter:D,onMouseMove:G,onMouseLeave:O,reconnectRadius:Y,onReconnect:ne,onReconnectStart:J,onReconnectEnd:z,markerEnd:W,markerStart:re,rfId:X,ariaLabel:se,isFocusable:fe,isReconnectable:ce,pathOptions:ve,interactionWidth:_e,disableKeyboardA11y:Ae})=>{const Ce=q.useRef(null),[et,rt]=q.useState(!1),[ze,tt]=q.useState(!1),it=ln(),zt=q.useMemo(()=>`url('#${Kp(re,X)}')`,[re,X]),Le=q.useMemo(()=>`url('#${Kp(W,X)}')`,[W,X]);if(V)return null;const Ee=Ut=>{const{edges:Jt,addSelectedEdges:Cn,unselectNodesAndEdges:Nn,multiSelectionActive:en}=it.getState(),un=Jt.find(In=>In.id===n);un&&(N&&(it.setState({nodesSelectionActive:!1}),un.selected&&en?(Nn({nodes:[],edges:[un]}),Ce.current?.blur()):Cn([n])),u&&u(Ut,un))},At=$u(n,it.getState,d),vn=$u(n,it.getState,R),Gt=$u(n,it.getState,D),Fn=$u(n,it.getState,G),An=$u(n,it.getState,O),Rn=(Ut,Jt)=>{if(Ut.button!==0)return;const{edges:Cn,isValidConnection:Nn}=it.getState(),en=Jt?H:L,un=(Jt?B:U)||null,In=Jt?"target":"source",xi=Nn||pD,Ti=Jt,Ir=Cn.find(Yn=>Yn.id===n);tt(!0),J?.(Ut,Ir,In);const Gn=Yn=>{tt(!1),z?.(Yn,Ir,In)};Zx({event:Ut,handleId:un,nodeId:en,onConnect:Yn=>ne?.(Ir,Yn),isTarget:Ti,getState:it.getState,setState:it.setState,isValidConnection:xi,edgeUpdaterType:In,onReconnectEnd:Gn})},Nr=Ut=>Rn(Ut,!0),at=Ut=>Rn(Ut,!1),Fe=()=>rt(!0),Lt=()=>rt(!1),Et=!N&&!u,Fr=Ut=>{if(!Ae&&Bx.includes(Ut.key)&&N){const{unselectNodesAndEdges:Jt,addSelectedEdges:Cn,edges:Nn}=it.getState();Ut.key==="Escape"?(Ce.current?.blur(),Jt({edges:[Nn.find(un=>un.id===n)]})):Cn([n])}};return he.createElement("g",{className:Pn(["react-flow__edge",`react-flow__edge-${a}`,i,{selected:f,animated:m,inactive:Et,updating:et}]),onClick:Ee,onDoubleClick:At,onContextMenu:vn,onMouseEnter:Gt,onMouseMove:Fn,onMouseLeave:An,onKeyDown:fe?Fr:void 0,tabIndex:fe?0:void 0,role:fe?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":se===null?void 0:se||`Edge from ${L} to ${H}`,"aria-describedby":fe?`${oT}-${X}`:void 0,ref:Ce},!ze&&he.createElement(t,{id:n,source:L,target:H,selected:f,animated:m,label:y,labelStyle:v,labelShowBg:b,labelBgStyle:x,labelBgPadding:C,labelBgBorderRadius:M,data:l,style:k,sourceX:F,sourceY:j,targetX:Q,targetY:K,sourcePosition:S,targetPosition:T,sourceHandleId:U,targetHandleId:B,markerStart:zt,markerEnd:Le,pathOptions:ve,interactionWidth:_e}),ce&&he.createElement(he.Fragment,null,(ce==="source"||ce===!0)&&he.createElement(iw,{position:S,centerX:F,centerY:j,radius:Y,onMouseDown:Nr,onMouseEnter:Fe,onMouseOut:Lt,type:"source"}),(ce==="target"||ce===!0)&&he.createElement(iw,{position:T,centerX:Q,centerY:K,radius:Y,onMouseDown:at,onMouseEnter:Fe,onMouseOut:Lt,type:"target"})))};return e.displayName="EdgeWrapper",q.memo(e)};function yD(t){const e={default:el(t.default||Jh),straight:el(t.bezier||B0),step:el(t.step||U0),smoothstep:el(t.step||If),simplebezier:el(t.simplebezier||L0)},n={},i=Object.keys(t).filter(a=>!["default","bezier"].includes(a)).reduce((a,l)=>(a[l]=el(t[l]||Jh),a),n);return{...e,...i}}function sw(t,e,n=null){const i=(n?.x||0)+e.x,a=(n?.y||0)+e.y,l=n?.width||e.width,u=n?.height||e.height;switch(t){case Se.Top:return{x:i+l/2,y:a};case Se.Right:return{x:i+l,y:a+u/2};case Se.Bottom:return{x:i+l/2,y:a+u};case Se.Left:return{x:i,y:a+u/2}}}function aw(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const vD=(t,e,n,i,a,l)=>{const u=sw(n,t,e),d=sw(l,i,a);return{sourceX:u.x,sourceY:u.y,targetX:d.x,targetY:d.y}};function _D({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:i,targetWidth:a,targetHeight:l,width:u,height:d,transform:f}){const m={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+a),y2:Math.max(t.y+i,e.y+l)};m.x===m.x2&&(m.x2+=1),m.y===m.y2&&(m.y2+=1);const y=z0({x:(0-f[0])/f[2],y:(0-f[1])/f[2],width:u/f[2],height:d/f[2]}),v=Math.max(0,Math.min(y.x2,m.x2)-Math.max(y.x,m.x)),b=Math.max(0,Math.min(y.y2,m.y2)-Math.max(y.y,m.y));return Math.ceil(v*b)>0}function ow(t){const e=t?.[kt]?.handleBounds||null,n=e&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},e,!!n]}const bD=[{level:0,isMaxLevel:!0,edges:[]}];function ED(t,e,n=!1){let i=-1;const a=t.reduce((u,d)=>{const f=Rr(d.zIndex);let m=f?d.zIndex:0;if(n){const y=e.get(d.target),v=e.get(d.source),b=d.selected||y?.selected||v?.selected,x=Math.max(v?.[kt]?.z||0,y?.[kt]?.z||0,1e3);m=(f?d.zIndex:0)+(b?x:0)}return u[m]?u[m].push(d):u[m]=[d],i=m>i?m:i,u},{}),l=Object.entries(a).map(([u,d])=>{const f=+u;return{edges:d,level:f,isMaxLevel:f===i}});return l.length===0?bD:l}function wD(t,e,n){const i=Tt(q.useCallback(a=>t?a.edges.filter(l=>{const u=e.get(l.source),d=e.get(l.target);return u?.width&&u?.height&&d?.width&&d?.height&&_D({sourcePos:u.positionAbsolute||{x:0,y:0},targetPos:d.positionAbsolute||{x:0,y:0},sourceWidth:u.width,sourceHeight:u.height,targetWidth:d.width,targetHeight:d.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[t,e]));return ED(i,e,n)}const xD=({color:t="none",strokeWidth:e=1})=>he.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),TD=({color:t="none",strokeWidth:e=1})=>he.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),lw={[pc.Arrow]:xD,[pc.ArrowClosed]:TD};function SD(t){const e=ln();return q.useMemo(()=>Object.prototype.hasOwnProperty.call(lw,t)?lw[t]:(e.getState().onError?.("009",es.error009(t)),null),[t])}const AD=({id:t,type:e,color:n,width:i=12.5,height:a=12.5,markerUnits:l="strokeWidth",strokeWidth:u,orient:d="auto-start-reverse"})=>{const f=SD(e);return f?he.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:d,refX:"0",refY:"0"},he.createElement(f,{color:n,strokeWidth:u})):null},RD=({defaultColor:t,rfId:e})=>n=>{const i=[];return n.edges.reduce((a,l)=>([l.markerStart,l.markerEnd].forEach(u=>{if(u&&typeof u=="object"){const d=Kp(u,e);i.includes(d)||(a.push({id:d,color:u.color||t,...u}),i.push(d))}}),a),[]).sort((a,l)=>a.id.localeCompare(l.id))},bT=({defaultColor:t,rfId:e})=>{const n=Tt(q.useCallback(RD({defaultColor:t,rfId:e}),[t,e]),(i,a)=>!(i.length!==a.length||i.some((l,u)=>l.id!==a[u].id)));return he.createElement("defs",null,n.map(i=>he.createElement(AD,{id:i.id,key:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient})))};bT.displayName="MarkerDefinitions";var CD=q.memo(bT);const ND=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),ET=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:i,edgeTypes:a,noPanClassName:l,onEdgeContextMenu:u,onEdgeMouseEnter:d,onEdgeMouseMove:f,onEdgeMouseLeave:m,onEdgeClick:y,onEdgeDoubleClick:v,onReconnect:b,onReconnectStart:x,onReconnectEnd:C,reconnectRadius:M,children:k,disableKeyboardA11y:L})=>{const{edgesFocusable:H,edgesUpdatable:F,elementsSelectable:j,width:Q,height:K,connectionMode:S,nodeInternals:T,onError:N}=Tt(ND,Tn),V=wD(e,T,n);return Q?he.createElement(he.Fragment,null,V.map(({level:U,edges:B,isMaxLevel:R})=>he.createElement("svg",{key:U,style:{zIndex:U},width:Q,height:K,className:"react-flow__edges react-flow__container"},R&&he.createElement(CD,{defaultColor:t,rfId:i}),he.createElement("g",null,B.map(D=>{const[G,O,Y]=ow(T.get(D.source)),[ne,J,z]=ow(T.get(D.target));if(!Y||!z)return null;let W=D.type||"default";a[W]||(N?.("011",es.error011(W)),W="default");const re=a[W]||a.default,X=S===Qs.Strict?J.target:(J.target??[]).concat(J.source??[]),se=aw(O.source,D.sourceHandle),fe=aw(X,D.targetHandle),ce=se?.position||Se.Bottom,ve=fe?.position||Se.Top,_e=!!(D.focusable||H&&typeof D.focusable>"u"),Ae=D.reconnectable||D.updatable,Ce=typeof b<"u"&&(Ae||F&&typeof Ae>"u");if(!se||!fe)return N?.("008",es.error008(se,D)),null;const{sourceX:et,sourceY:rt,targetX:ze,targetY:tt}=vD(G,se,ce,ne,fe,ve);return he.createElement(re,{key:D.id,id:D.id,className:Pn([D.className,l]),type:W,data:D.data,selected:!!D.selected,animated:!!D.animated,hidden:!!D.hidden,label:D.label,labelStyle:D.labelStyle,labelShowBg:D.labelShowBg,labelBgStyle:D.labelBgStyle,labelBgPadding:D.labelBgPadding,labelBgBorderRadius:D.labelBgBorderRadius,style:D.style,source:D.source,target:D.target,sourceHandleId:D.sourceHandle,targetHandleId:D.targetHandle,markerEnd:D.markerEnd,markerStart:D.markerStart,sourceX:et,sourceY:rt,targetX:ze,targetY:tt,sourcePosition:ce,targetPosition:ve,elementsSelectable:j,onContextMenu:u,onMouseEnter:d,onMouseMove:f,onMouseLeave:m,onClick:y,onEdgeDoubleClick:v,onReconnect:b,onReconnectStart:x,onReconnectEnd:C,reconnectRadius:M,rfId:i,ariaLabel:D.ariaLabel,isFocusable:_e,isReconnectable:Ce,pathOptions:"pathOptions"in D?D.pathOptions:void 0,interactionWidth:D.interactionWidth,disableKeyboardA11y:L})})))),k):null};ET.displayName="EdgeRenderer";var ID=q.memo(ET);const kD=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function DD({children:t}){const e=Tt(kD);return he.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function MD(t){const e=Oc(),n=q.useRef(!1);q.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const OD={[Se.Left]:Se.Right,[Se.Right]:Se.Left,[Se.Top]:Se.Bottom,[Se.Bottom]:Se.Top},wT=({nodeId:t,handleType:e,style:n,type:i=Ps.Bezier,CustomComponent:a,connectionStatus:l})=>{const{fromNode:u,handleId:d,toX:f,toY:m,connectionMode:y}=Tt(q.useCallback(K=>({fromNode:K.nodeInternals.get(t),handleId:K.connectionHandleId,toX:(K.connectionPosition.x-K.transform[0])/K.transform[2],toY:(K.connectionPosition.y-K.transform[1])/K.transform[2],connectionMode:K.connectionMode}),[t]),Tn),v=u?.[kt]?.handleBounds;let b=v?.[e];if(y===Qs.Loose&&(b=b||v?.[e==="source"?"target":"source"]),!u||!b)return null;const x=d?b.find(K=>K.id===d):b[0],C=x?x.x+x.width/2:(u.width??0)/2,M=x?x.y+x.height/2:u.height??0,k=(u.positionAbsolute?.x??0)+C,L=(u.positionAbsolute?.y??0)+M,H=x?.position,F=H?OD[H]:null;if(!H||!F)return null;if(a)return he.createElement(a,{connectionLineType:i,connectionLineStyle:n,fromNode:u,fromHandle:x,fromX:k,fromY:L,toX:f,toY:m,fromPosition:H,toPosition:F,connectionStatus:l});let j="";const Q={sourceX:k,sourceY:L,sourcePosition:H,targetX:f,targetY:m,targetPosition:F};return i===Ps.Bezier?[j]=Fx(Q):i===Ps.Step?[j]=Yp({...Q,borderRadius:0}):i===Ps.SmoothStep?[j]=Yp(Q):i===Ps.SimpleBezier?[j]=$x(Q):j=`M${k},${L} ${f},${m}`,he.createElement("path",{d:j,fill:"none",className:"react-flow__connection-path",style:n})};wT.displayName="ConnectionLine";const PD=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function VD({containerStyle:t,style:e,type:n,component:i}){const{nodeId:a,handleType:l,nodesConnectable:u,width:d,height:f,connectionStatus:m}=Tt(PD,Tn);return!(a&&l&&d&&u)?null:he.createElement("svg",{style:t,width:d,height:f,className:"react-flow__edges react-flow__connectionline react-flow__container"},he.createElement("g",{className:Pn(["react-flow__connection",m])},he.createElement(wT,{nodeId:a,handleType:l,style:e,type:n,CustomComponent:i,connectionStatus:m})))}function uw(t,e){return q.useRef(null),ln(),q.useMemo(()=>e(t),[t])}const xT=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:i,onMoveEnd:a,onInit:l,onNodeClick:u,onEdgeClick:d,onNodeDoubleClick:f,onEdgeDoubleClick:m,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:b,onNodeContextMenu:x,onSelectionContextMenu:C,onSelectionStart:M,onSelectionEnd:k,connectionLineType:L,connectionLineStyle:H,connectionLineComponent:F,connectionLineContainerStyle:j,selectionKeyCode:Q,selectionOnDrag:K,selectionMode:S,multiSelectionKeyCode:T,panActivationKeyCode:N,zoomActivationKeyCode:V,deleteKeyCode:U,onlyRenderVisibleElements:B,elementsSelectable:R,selectNodesOnDrag:D,defaultViewport:G,translateExtent:O,minZoom:Y,maxZoom:ne,preventScrolling:J,defaultMarkerColor:z,zoomOnScroll:W,zoomOnPinch:re,panOnScroll:X,panOnScrollSpeed:se,panOnScrollMode:fe,zoomOnDoubleClick:ce,panOnDrag:ve,onPaneClick:_e,onPaneMouseEnter:Ae,onPaneMouseMove:Ce,onPaneMouseLeave:et,onPaneScroll:rt,onPaneContextMenu:ze,onEdgeContextMenu:tt,onEdgeMouseEnter:it,onEdgeMouseMove:zt,onEdgeMouseLeave:Le,onReconnect:Ee,onReconnectStart:At,onReconnectEnd:vn,reconnectRadius:Gt,noDragClassName:Fn,noWheelClassName:An,noPanClassName:Rn,elevateEdgesOnSelect:Nr,disableKeyboardA11y:at,nodeOrigin:Fe,nodeExtent:Lt,rfId:Et})=>{const Fr=uw(t,cD),Ut=uw(e,yD);return MD(l),he.createElement(lD,{onPaneClick:_e,onPaneMouseEnter:Ae,onPaneMouseMove:Ce,onPaneMouseLeave:et,onPaneContextMenu:ze,onPaneScroll:rt,deleteKeyCode:U,selectionKeyCode:Q,selectionOnDrag:K,selectionMode:S,onSelectionStart:M,onSelectionEnd:k,multiSelectionKeyCode:T,panActivationKeyCode:N,zoomActivationKeyCode:V,elementsSelectable:R,onMove:n,onMoveStart:i,onMoveEnd:a,zoomOnScroll:W,zoomOnPinch:re,zoomOnDoubleClick:ce,panOnScroll:X,panOnScrollSpeed:se,panOnScrollMode:fe,panOnDrag:ve,defaultViewport:G,translateExtent:O,minZoom:Y,maxZoom:ne,onSelectionContextMenu:C,preventScrolling:J,noDragClassName:Fn,noWheelClassName:An,noPanClassName:Rn,disableKeyboardA11y:at},he.createElement(DD,null,he.createElement(ID,{edgeTypes:Ut,onEdgeClick:d,onEdgeDoubleClick:m,onlyRenderVisibleElements:B,onEdgeContextMenu:tt,onEdgeMouseEnter:it,onEdgeMouseMove:zt,onEdgeMouseLeave:Le,onReconnect:Ee,onReconnectStart:At,onReconnectEnd:vn,reconnectRadius:Gt,defaultMarkerColor:z,noPanClassName:Rn,elevateEdgesOnSelect:!!Nr,disableKeyboardA11y:at,rfId:Et},he.createElement(VD,{style:H,type:L,component:F,containerStyle:j})),he.createElement("div",{className:"react-flow__edgelabel-renderer"}),he.createElement(fD,{nodeTypes:Fr,onNodeClick:u,onNodeDoubleClick:f,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:b,onNodeContextMenu:x,selectNodesOnDrag:D,onlyRenderVisibleElements:B,noPanClassName:Rn,noDragClassName:Fn,disableKeyboardA11y:at,nodeOrigin:Fe,nodeExtent:Lt,rfId:Et})))};xT.displayName="GraphView";var zD=q.memo(xT);const Zp=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ks={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Zp,nodeExtent:Zp,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Qs.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:d4,isValidConnection:void 0},LD=()=>xC((t,e)=>({...ks,setNodes:n=>{const{nodeInternals:i,nodeOrigin:a,elevateNodesOnSelect:l}=e();t({nodeInternals:mp(n,i,a,l)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:i={}}=e();t({edges:n.map(a=>({...i,...a}))})},setDefaultNodesAndEdges:(n,i)=>{const a=typeof n<"u",l=typeof i<"u",u=a?mp(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:u,edges:l?i:[],hasDefaultNodes:a,hasDefaultEdges:l})},updateNodeDimensions:n=>{const{onNodesChange:i,nodeInternals:a,fitViewOnInit:l,fitViewOnInitDone:u,fitViewOnInitOptions:d,domNode:f,nodeOrigin:m}=e(),y=f?.querySelector(".react-flow__viewport");if(!y)return;const v=window.getComputedStyle(y),{m22:b}=new window.DOMMatrixReadOnly(v.transform),x=n.reduce((M,k)=>{const L=a.get(k.id);if(L?.hidden)a.set(L.id,{...L,[kt]:{...L[kt],handleBounds:void 0}});else if(L){const H=P0(k.nodeElement);!!(H.width&&H.height&&(L.width!==H.width||L.height!==H.height||k.forceUpdate))&&(a.set(L.id,{...L,[kt]:{...L[kt],handleBounds:{source:nw(".source",k.nodeElement,b,m),target:nw(".target",k.nodeElement,b,m)}},...H}),M.push({id:L.id,type:"dimensions",dimensions:H}))}return M},[]);uT(a,m);const C=u||l&&!u&&cT(e,{initial:!0,...d});t({nodeInternals:new Map(a),fitViewOnInitDone:C}),x?.length>0&&i?.(x)},updateNodePositions:(n,i=!0,a=!1)=>{const{triggerNodeChanges:l}=e(),u=n.map(d=>{const f={id:d.id,type:"position",dragging:a};return i&&(f.positionAbsolute=d.positionAbsolute,f.position=d.position),f});l(u)},triggerNodeChanges:n=>{const{onNodesChange:i,nodeInternals:a,hasDefaultNodes:l,nodeOrigin:u,getNodes:d,elevateNodesOnSelect:f}=e();if(n?.length){if(l){const m=hT(n,d()),y=mp(m,a,u,f);t({nodeInternals:y})}i?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:i,edges:a,getNodes:l}=e();let u,d=null;i?u=n.map(f=>Os(f,!0)):(u=ul(l(),n),d=ul(a,[])),mh({changedNodes:u,changedEdges:d,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:i,edges:a,getNodes:l}=e();let u,d=null;i?u=n.map(f=>Os(f,!0)):(u=ul(a,n),d=ul(l(),[])),mh({changedNodes:d,changedEdges:u,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:i}={})=>{const{edges:a,getNodes:l}=e(),u=n||l(),d=i||a,f=u.map(y=>(y.selected=!1,Os(y.id,!1))),m=d.map(y=>Os(y.id,!1));mh({changedNodes:f,changedEdges:m,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:i,maxZoom:a}=e();i?.scaleExtent([n,a]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:i,minZoom:a}=e();i?.scaleExtent([a,n]),t({maxZoom:n})},setTranslateExtent:n=>{e().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:i}=e(),l=i().filter(d=>d.selected).map(d=>Os(d.id,!1)),u=n.filter(d=>d.selected).map(d=>Os(d.id,!1));mh({changedNodes:l,changedEdges:u,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:i}=e();i.forEach(a=>{a.positionAbsolute=V0(a.position,n)}),t({nodeExtent:n,nodeInternals:new Map(i)})},panBy:n=>{const{transform:i,width:a,height:l,d3Zoom:u,d3Selection:d,translateExtent:f}=e();if(!u||!d||!n.x&&!n.y)return!1;const m=qs.translate(i[0]+n.x,i[1]+n.y).scale(i[2]),y=[[0,0],[a,l]],v=u?.constrain()(m,y,f);return u.transform(d,v),i[0]!==v.x||i[1]!==v.y||i[2]!==v.k},cancelConnection:()=>t({connectionNodeId:ks.connectionNodeId,connectionHandleId:ks.connectionHandleId,connectionHandleType:ks.connectionHandleType,connectionStatus:ks.connectionStatus,connectionStartHandle:ks.connectionStartHandle,connectionEndHandle:ks.connectionEndHandle}),reset:()=>t({...ks})}),Object.is),TT=({children:t})=>{const e=q.useRef(null);return e.current||(e.current=LD()),he.createElement(r4,{value:e.current},t)};TT.displayName="ReactFlowProvider";const ST=({children:t})=>q.useContext(Nf)?he.createElement(he.Fragment,null,t):he.createElement(TT,null,t);ST.displayName="ReactFlowWrapper";const UD={input:nT,default:Qp,output:iT,group:$0},BD={default:Jh,straight:B0,step:U0,smoothstep:If,simplebezier:L0},jD=[0,0],HD=[15,15],qD={x:0,y:0,zoom:1},$D={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},AT=q.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,className:a,nodeTypes:l=UD,edgeTypes:u=BD,onNodeClick:d,onEdgeClick:f,onInit:m,onMove:y,onMoveStart:v,onMoveEnd:b,onConnect:x,onConnectStart:C,onConnectEnd:M,onClickConnectStart:k,onClickConnectEnd:L,onNodeMouseEnter:H,onNodeMouseMove:F,onNodeMouseLeave:j,onNodeContextMenu:Q,onNodeDoubleClick:K,onNodeDragStart:S,onNodeDrag:T,onNodeDragStop:N,onNodesDelete:V,onEdgesDelete:U,onSelectionChange:B,onSelectionDragStart:R,onSelectionDrag:D,onSelectionDragStop:G,onSelectionContextMenu:O,onSelectionStart:Y,onSelectionEnd:ne,connectionMode:J=Qs.Strict,connectionLineType:z=Ps.Bezier,connectionLineStyle:W,connectionLineComponent:re,connectionLineContainerStyle:X,deleteKeyCode:se="Backspace",selectionKeyCode:fe="Shift",selectionOnDrag:ce=!1,selectionMode:ve=mc.Full,panActivationKeyCode:_e="Space",multiSelectionKeyCode:Ae=Zh()?"Meta":"Control",zoomActivationKeyCode:Ce=Zh()?"Meta":"Control",snapToGrid:et=!1,snapGrid:rt=HD,onlyRenderVisibleElements:ze=!1,selectNodesOnDrag:tt=!0,nodesDraggable:it,nodesConnectable:zt,nodesFocusable:Le,nodeOrigin:Ee=jD,edgesFocusable:At,edgesUpdatable:vn,elementsSelectable:Gt,defaultViewport:Fn=qD,minZoom:An=.5,maxZoom:Rn=2,translateExtent:Nr=Zp,preventScrolling:at=!0,nodeExtent:Fe,defaultMarkerColor:Lt="#b1b1b7",zoomOnScroll:Et=!0,zoomOnPinch:Fr=!0,panOnScroll:Ut=!1,panOnScrollSpeed:Jt=.5,panOnScrollMode:Cn=Ha.Free,zoomOnDoubleClick:Nn=!0,panOnDrag:en=!0,onPaneClick:un,onPaneMouseEnter:In,onPaneMouseMove:xi,onPaneMouseLeave:Ti,onPaneScroll:Ir,onPaneContextMenu:Gn,children:cr,onEdgeContextMenu:Yn,onEdgeDoubleClick:dr,onEdgeMouseEnter:la,onEdgeMouseMove:Gr,onEdgeMouseLeave:ss,onEdgeUpdate:Yr,onEdgeUpdateStart:ao,onEdgeUpdateEnd:pt,onReconnect:Mt,onReconnectStart:Rt,onReconnectEnd:Vn,reconnectRadius:ua=10,edgeUpdaterRadius:jl=10,onNodesChange:Kr,onEdgesChange:oo,noDragClassName:Si="nodrag",noWheelClassName:Xr="nowheel",noPanClassName:hr="nopan",fitView:fr=!1,fitViewOptions:gr,connectOnClick:cn=!0,attributionPosition:wt,proOptions:ca,defaultEdgeOptions:as,elevateNodesOnSelect:Kn=!0,elevateEdgesOnSelect:kr=!1,disableKeyboardA11y:da=!1,autoPanOnConnect:lo=!0,autoPanOnNodeDrag:Ai=!0,connectionRadius:uo=20,isValidConnection:Qr,onError:mr,style:Yt,id:Wr,nodeDragThreshold:co,...Dr},os)=>{const Zr=Wr||"1";return he.createElement("div",{...Dr,style:{...Yt,...$D},ref:os,className:Pn(["react-flow",a]),"data-testid":"rf__wrapper",id:Wr},he.createElement(ST,null,he.createElement(zD,{onInit:m,onMove:y,onMoveStart:v,onMoveEnd:b,onNodeClick:d,onEdgeClick:f,onNodeMouseEnter:H,onNodeMouseMove:F,onNodeMouseLeave:j,onNodeContextMenu:Q,onNodeDoubleClick:K,nodeTypes:l,edgeTypes:u,connectionLineType:z,connectionLineStyle:W,connectionLineComponent:re,connectionLineContainerStyle:X,selectionKeyCode:fe,selectionOnDrag:ce,selectionMode:ve,deleteKeyCode:se,multiSelectionKeyCode:Ae,panActivationKeyCode:_e,zoomActivationKeyCode:Ce,onlyRenderVisibleElements:ze,selectNodesOnDrag:tt,defaultViewport:Fn,translateExtent:Nr,minZoom:An,maxZoom:Rn,preventScrolling:at,zoomOnScroll:Et,zoomOnPinch:Fr,zoomOnDoubleClick:Nn,panOnScroll:Ut,panOnScrollSpeed:Jt,panOnScrollMode:Cn,panOnDrag:en,onPaneClick:un,onPaneMouseEnter:In,onPaneMouseMove:xi,onPaneMouseLeave:Ti,onPaneScroll:Ir,onPaneContextMenu:Gn,onSelectionContextMenu:O,onSelectionStart:Y,onSelectionEnd:ne,onEdgeContextMenu:Yn,onEdgeDoubleClick:dr,onEdgeMouseEnter:la,onEdgeMouseMove:Gr,onEdgeMouseLeave:ss,onReconnect:Mt??Yr,onReconnectStart:Rt??ao,onReconnectEnd:Vn??pt,reconnectRadius:ua??jl,defaultMarkerColor:Lt,noDragClassName:Si,noWheelClassName:Xr,noPanClassName:hr,elevateEdgesOnSelect:kr,rfId:Zr,disableKeyboardA11y:da,nodeOrigin:Ee,nodeExtent:Fe}),he.createElement(O4,{nodes:t,edges:e,defaultNodes:n,defaultEdges:i,onConnect:x,onConnectStart:C,onConnectEnd:M,onClickConnectStart:k,onClickConnectEnd:L,nodesDraggable:it,nodesConnectable:zt,nodesFocusable:Le,edgesFocusable:At,edgesUpdatable:vn,elementsSelectable:Gt,elevateNodesOnSelect:Kn,minZoom:An,maxZoom:Rn,nodeExtent:Fe,onNodesChange:Kr,onEdgesChange:oo,snapToGrid:et,snapGrid:rt,connectionMode:J,translateExtent:Nr,connectOnClick:cn,defaultEdgeOptions:as,fitView:fr,fitViewOptions:gr,onNodesDelete:V,onEdgesDelete:U,onNodeDragStart:S,onNodeDrag:T,onNodeDragStop:N,onSelectionDrag:D,onSelectionDragStart:R,onSelectionDragStop:G,noPanClassName:hr,nodeOrigin:Ee,rfId:Zr,autoPanOnConnect:lo,autoPanOnNodeDrag:Ai,onError:mr,connectionRadius:uo,isValidConnection:Qr,nodeDragThreshold:co}),he.createElement(D4,{onSelectionChange:B}),cr,he.createElement(s4,{proOptions:ca,position:wt}),he.createElement(U4,{rfId:Zr,disableKeyboardA11y:da})))});AT.displayName="ReactFlow";function RT(t){return e=>{const[n,i]=q.useState(e),a=q.useCallback(l=>i(u=>t(l,u)),[]);return[n,i,a]}}const FD=RT(hT),GD=RT(J4);function YD(){return he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},he.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function KD(){return he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},he.createElement("path",{d:"M0 0h32v4.2H0z"}))}function XD(){return he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},he.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function QD(){return he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},he.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function WD(){return he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},he.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Xu=({children:t,className:e,...n})=>he.createElement("button",{type:"button",className:Pn(["react-flow__controls-button",e]),...n},t);Xu.displayName="ControlButton";const ZD=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),CT=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:a,onZoomIn:l,onZoomOut:u,onFitView:d,onInteractiveChange:f,className:m,children:y,position:v="bottom-left"})=>{const b=ln(),[x,C]=q.useState(!1),{isInteractive:M,minZoomReached:k,maxZoomReached:L}=Tt(ZD,Tn),{zoomIn:H,zoomOut:F,fitView:j}=Oc();if(q.useEffect(()=>{C(!0)},[]),!x)return null;const Q=()=>{H(),l?.()},K=()=>{F(),u?.()},S=()=>{j(a),d?.()},T=()=>{b.setState({nodesDraggable:!M,nodesConnectable:!M,elementsSelectable:!M}),f?.(!M)};return he.createElement(zx,{className:Pn(["react-flow__controls",m]),position:v,style:t,"data-testid":"rf__controls"},e&&he.createElement(he.Fragment,null,he.createElement(Xu,{onClick:Q,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:L},he.createElement(YD,null)),he.createElement(Xu,{onClick:K,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:k},he.createElement(KD,null))),n&&he.createElement(Xu,{className:"react-flow__controls-fitview",onClick:S,title:"fit view","aria-label":"fit view"},he.createElement(XD,null)),i&&he.createElement(Xu,{className:"react-flow__controls-interactive",onClick:T,title:"toggle interactivity","aria-label":"toggle interactivity"},M?he.createElement(WD,null):he.createElement(QD,null)),y)};CT.displayName="Controls";var JD=q.memo(CT),Cr;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Cr||(Cr={}));function eM({color:t,dimensions:e,lineWidth:n}){return he.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function tM({color:t,radius:e}){return he.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const nM={[Cr.Dots]:"#91919a",[Cr.Lines]:"#eee",[Cr.Cross]:"#e2e2e2"},rM={[Cr.Dots]:1,[Cr.Lines]:1,[Cr.Cross]:6},iM=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function NT({id:t,variant:e=Cr.Dots,gap:n=20,size:i,lineWidth:a=1,offset:l=2,color:u,style:d,className:f}){const m=q.useRef(null),{transform:y,patternId:v}=Tt(iM,Tn),b=u||nM[e],x=i||rM[e],C=e===Cr.Dots,M=e===Cr.Cross,k=Array.isArray(n)?n:[n,n],L=[k[0]*y[2]||1,k[1]*y[2]||1],H=x*y[2],F=M?[H,H]:L,j=C?[H/l,H/l]:[F[0]/l,F[1]/l];return he.createElement("svg",{className:Pn(["react-flow__background",f]),style:{...d,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:m,"data-testid":"rf__background"},he.createElement("pattern",{id:v+t,x:y[0]%L[0],y:y[1]%L[1],width:L[0],height:L[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`},C?he.createElement(tM,{color:b,radius:H/l}):he.createElement(eM,{dimensions:F,color:b,lineWidth:a})),he.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${v+t})`}))}NT.displayName="Background";var sM=q.memo(NT),$t=function(){return $t=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},$t.apply(this,arguments)},cw={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},dw={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},yh={width:"20px",height:"20px",position:"absolute",zIndex:1},aM={top:$t($t({},cw),{top:"-5px"}),right:$t($t({},dw),{left:void 0,right:"-5px"}),bottom:$t($t({},cw),{top:void 0,bottom:"-5px"}),left:$t($t({},dw),{left:"-5px"}),topRight:$t($t({},yh),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:$t($t({},yh),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:$t($t({},yh),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:$t($t({},yh),{left:"-10px",top:"-10px",cursor:"nw-resize"})},oM=q.memo(function(t){var e=t.onResizeStart,n=t.direction,i=t.children,a=t.replaceStyles,l=t.className,u=q.useCallback(function(m){e(m,n)},[e,n]),d=q.useCallback(function(m){e(m,n)},[e,n]),f=q.useMemo(function(){return $t($t({position:"absolute",userSelect:"none"},aM[n]),a??{})},[a,n]);return A.jsx("div",{className:l||void 0,style:f,onMouseDown:u,onTouchStart:d,children:i})}),lM=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),di=function(){return di=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},di.apply(this,arguments)},uM={width:"auto",height:"auto"},vh=function(t,e,n){return Math.max(Math.min(t,n),e)},hw=function(t,e,n){var i=Math.round(t/e);return i*e+n*(i-1)},tl=function(t,e){return new RegExp(t,"i").test(e)},_h=function(t){return!!(t.touches&&t.touches.length)},cM=function(t){return!!((t.clientX||t.clientX===0)&&(t.clientY||t.clientY===0))},fw=function(t,e,n){n===void 0&&(n=0);var i=e.reduce(function(l,u,d){return Math.abs(u-t)<Math.abs(e[l]-t)?d:l},0),a=Math.abs(e[i]-t);return n===0||a<n?e[i]:t},_p=function(t){return t=t.toString(),t==="auto"||t.endsWith("px")||t.endsWith("%")||t.endsWith("vh")||t.endsWith("vw")||t.endsWith("vmax")||t.endsWith("vmin")?t:"".concat(t,"px")},bh=function(t,e,n,i){if(t&&typeof t=="string"){if(t.endsWith("px"))return Number(t.replace("px",""));if(t.endsWith("%")){var a=Number(t.replace("%",""))/100;return e*a}if(t.endsWith("vw")){var a=Number(t.replace("vw",""))/100;return n*a}if(t.endsWith("vh")){var a=Number(t.replace("vh",""))/100;return i*a}}return t},dM=function(t,e,n,i,a,l,u){return i=bh(i,t.width,e,n),a=bh(a,t.height,e,n),l=bh(l,t.width,e,n),u=bh(u,t.height,e,n),{maxWidth:typeof i>"u"?void 0:Number(i),maxHeight:typeof a>"u"?void 0:Number(a),minWidth:typeof l>"u"?void 0:Number(l),minHeight:typeof u>"u"?void 0:Number(u)}},hM=function(t){return Array.isArray(t)?t:[t,t]},fM=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],gw="__resizable_base__",gM=function(t){lM(e,t);function e(n){var i,a,l,u,d=t.call(this,n)||this;return d.ratio=1,d.resizable=null,d.parentLeft=0,d.parentTop=0,d.resizableLeft=0,d.resizableRight=0,d.resizableTop=0,d.resizableBottom=0,d.targetLeft=0,d.targetTop=0,d.delta={width:0,height:0},d.appendBase=function(){if(!d.resizable||!d.window)return null;var f=d.parentNode;if(!f)return null;var m=d.window.document.createElement("div");return m.style.width="100%",m.style.height="100%",m.style.position="absolute",m.style.transform="scale(0, 0)",m.style.left="0",m.style.flex="0 0 100%",m.classList?m.classList.add(gw):m.className+=gw,f.appendChild(m),m},d.removeBase=function(f){var m=d.parentNode;m&&m.removeChild(f)},d.state={isResizing:!1,width:(a=(i=d.propsSize)===null||i===void 0?void 0:i.width)!==null&&a!==void 0?a:"auto",height:(u=(l=d.propsSize)===null||l===void 0?void 0:l.height)!==null&&u!==void 0?u:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},d.onResizeStart=d.onResizeStart.bind(d),d.onMouseMove=d.onMouseMove.bind(d),d.onMouseUp=d.onMouseUp.bind(d),d}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||uM},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var n=0,i=0;if(this.resizable&&this.window){var a=this.resizable.offsetWidth,l=this.resizable.offsetHeight,u=this.resizable.style.position;u!=="relative"&&(this.resizable.style.position="relative"),n=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:a,i=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:l,this.resizable.style.position=u}return{width:n,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeStyle",{get:function(){var n=this,i=this.props.size,a=function(d){var f;if(typeof n.state[d]>"u"||n.state[d]==="auto")return"auto";if(n.propsSize&&n.propsSize[d]&&(!((f=n.propsSize[d])===null||f===void 0)&&f.toString().endsWith("%"))){if(n.state[d].toString().endsWith("%"))return n.state[d].toString();var m=n.getParentSize(),y=Number(n.state[d].toString().replace("px","")),v=y/m[d]*100;return"".concat(v,"%")}return _p(n.state[d])},l=i&&typeof i.width<"u"&&!this.state.isResizing?_p(i.width):a("width"),u=i&&typeof i.height<"u"&&!this.state.isResizing?_p(i.height):a("height");return{width:l,height:u}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var n=this.appendBase();if(!n)return{width:0,height:0};var i=!1,a=this.parentNode.style.flexWrap;a!=="wrap"&&(i=!0,this.parentNode.style.flexWrap="wrap"),n.style.position="relative",n.style.minWidth="100%",n.style.minHeight="100%";var l={width:n.offsetWidth,height:n.offsetHeight};return i&&(this.parentNode.style.flexWrap=a),this.removeBase(n),l},e.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},e.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var n=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:n.flexBasis!=="auto"?n.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},e.prototype.createSizeForCssProperty=function(n,i){var a=this.propsSize&&this.propsSize[i];return this.state[i]==="auto"&&this.state.original[i]===n&&(typeof a>"u"||a==="auto")?"auto":n},e.prototype.calculateNewMaxFromBoundary=function(n,i){var a=this.props.boundsByDirection,l=this.state.direction,u=a&&tl("left",l),d=a&&tl("top",l),f,m;if(this.props.bounds==="parent"){var y=this.parentNode;y&&(f=u?this.resizableRight-this.parentLeft:y.offsetWidth+(this.parentLeft-this.resizableLeft),m=d?this.resizableBottom-this.parentTop:y.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(f=u?this.resizableRight:this.window.innerWidth-this.resizableLeft,m=d?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(f=u?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),m=d?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return f&&Number.isFinite(f)&&(n=n&&n<f?n:f),m&&Number.isFinite(m)&&(i=i&&i<m?i:m),{maxWidth:n,maxHeight:i}},e.prototype.calculateNewSizeFromDirection=function(n,i){var a=this.props.scale||1,l=hM(this.props.resizeRatio||1),u=l[0],d=l[1],f=this.state,m=f.direction,y=f.original,v=this.props,b=v.lockAspectRatio,x=v.lockAspectRatioExtraHeight,C=v.lockAspectRatioExtraWidth,M=y.width,k=y.height,L=x||0,H=C||0;return tl("right",m)&&(M=y.width+(n-y.x)*u/a,b&&(k=(M-H)/this.ratio+L)),tl("left",m)&&(M=y.width-(n-y.x)*u/a,b&&(k=(M-H)/this.ratio+L)),tl("bottom",m)&&(k=y.height+(i-y.y)*d/a,b&&(M=(k-L)*this.ratio+H)),tl("top",m)&&(k=y.height-(i-y.y)*d/a,b&&(M=(k-L)*this.ratio+H)),{newWidth:M,newHeight:k}},e.prototype.calculateNewSizeFromAspectRatio=function(n,i,a,l){var u=this.props,d=u.lockAspectRatio,f=u.lockAspectRatioExtraHeight,m=u.lockAspectRatioExtraWidth,y=typeof l.width>"u"?10:l.width,v=typeof a.width>"u"||a.width<0?n:a.width,b=typeof l.height>"u"?10:l.height,x=typeof a.height>"u"||a.height<0?i:a.height,C=f||0,M=m||0;if(d){var k=(b-C)*this.ratio+M,L=(x-C)*this.ratio+M,H=(y-M)/this.ratio+C,F=(v-M)/this.ratio+C,j=Math.max(y,k),Q=Math.min(v,L),K=Math.max(b,H),S=Math.min(x,F);n=vh(n,j,Q),i=vh(i,K,S)}else n=vh(n,y,v),i=vh(i,b,x);return{newWidth:n,newHeight:i}},e.prototype.setBoundingClientRect=function(){var n=1/(this.props.scale||1);if(this.props.bounds==="parent"){var i=this.parentNode;if(i){var a=i.getBoundingClientRect();this.parentLeft=a.left*n,this.parentTop=a.top*n}}if(this.props.bounds&&typeof this.props.bounds!="string"){var l=this.props.bounds.getBoundingClientRect();this.targetLeft=l.left*n,this.targetTop=l.top*n}if(this.resizable){var u=this.resizable.getBoundingClientRect(),d=u.left,f=u.top,m=u.right,y=u.bottom;this.resizableLeft=d*n,this.resizableRight=m*n,this.resizableTop=f*n,this.resizableBottom=y*n}},e.prototype.onResizeStart=function(n,i){if(!(!this.resizable||!this.window)){var a=0,l=0;if(n.nativeEvent&&cM(n.nativeEvent)?(a=n.nativeEvent.clientX,l=n.nativeEvent.clientY):n.nativeEvent&&_h(n.nativeEvent)&&(a=n.nativeEvent.touches[0].clientX,l=n.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var u=this.props.onResizeStart(n,i,this.resizable);if(u===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var d,f=this.window.getComputedStyle(this.resizable);if(f.flexBasis!=="auto"){var m=this.parentNode;if(m){var y=this.window.getComputedStyle(m).flexDirection;this.flexDir=y.startsWith("row")?"row":"column",d=f.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var v={original:{x:a,y:l,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:di(di({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(n.target).cursor||"auto"}),direction:i,flexBasis:d};this.setState(v)}},e.prototype.onMouseMove=function(n){var i=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&_h(n))try{n.preventDefault(),n.stopPropagation()}catch{}var a=this.props,l=a.maxWidth,u=a.maxHeight,d=a.minWidth,f=a.minHeight,m=_h(n)?n.touches[0].clientX:n.clientX,y=_h(n)?n.touches[0].clientY:n.clientY,v=this.state,b=v.direction,x=v.original,C=v.width,M=v.height,k=this.getParentSize(),L=dM(k,this.window.innerWidth,this.window.innerHeight,l,u,d,f);l=L.maxWidth,u=L.maxHeight,d=L.minWidth,f=L.minHeight;var H=this.calculateNewSizeFromDirection(m,y),F=H.newHeight,j=H.newWidth,Q=this.calculateNewMaxFromBoundary(l,u);this.props.snap&&this.props.snap.x&&(j=fw(j,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(F=fw(F,this.props.snap.y,this.props.snapGap));var K=this.calculateNewSizeFromAspectRatio(j,F,{width:Q.maxWidth,height:Q.maxHeight},{width:d,height:f});if(j=K.newWidth,F=K.newHeight,this.props.grid){var S=hw(j,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),T=hw(F,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),N=this.props.snapGap||0,V=N===0||Math.abs(S-j)<=N?S:j,U=N===0||Math.abs(T-F)<=N?T:F;j=V,F=U}var B={width:j-x.width,height:F-x.height};if(this.delta=B,C&&typeof C=="string"){if(C.endsWith("%")){var R=j/k.width*100;j="".concat(R,"%")}else if(C.endsWith("vw")){var D=j/this.window.innerWidth*100;j="".concat(D,"vw")}else if(C.endsWith("vh")){var G=j/this.window.innerHeight*100;j="".concat(G,"vh")}}if(M&&typeof M=="string"){if(M.endsWith("%")){var R=F/k.height*100;F="".concat(R,"%")}else if(M.endsWith("vw")){var D=F/this.window.innerWidth*100;F="".concat(D,"vw")}else if(M.endsWith("vh")){var G=F/this.window.innerHeight*100;F="".concat(G,"vh")}}var O={width:this.createSizeForCssProperty(j,"width"),height:this.createSizeForCssProperty(F,"height")};this.flexDir==="row"?O.flexBasis=O.width:this.flexDir==="column"&&(O.flexBasis=O.height);var Y=this.state.width!==O.width,ne=this.state.height!==O.height,J=this.state.flexBasis!==O.flexBasis,z=Y||ne||J;z&&n4.flushSync(function(){i.setState(O)}),this.props.onResize&&z&&this.props.onResize(n,b,this.resizable,B)}},e.prototype.onMouseUp=function(n){var i,a,l=this.state,u=l.isResizing,d=l.direction;l.original,!(!u||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(n,d,this.resizable,this.delta),this.props.size&&this.setState({width:(i=this.props.size.width)!==null&&i!==void 0?i:"auto",height:(a=this.props.size.height)!==null&&a!==void 0?a:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:di(di({},this.state.backgroundStyle),{cursor:"auto"})}))},e.prototype.updateSize=function(n){var i,a;this.setState({width:(i=n.width)!==null&&i!==void 0?i:"auto",height:(a=n.height)!==null&&a!==void 0?a:"auto"})},e.prototype.renderResizer=function(){var n=this,i=this.props,a=i.enable,l=i.handleStyles,u=i.handleClasses,d=i.handleWrapperStyle,f=i.handleWrapperClass,m=i.handleComponent;if(!a)return null;var y=Object.keys(a).map(function(v){return a[v]!==!1?A.jsx(oM,{direction:v,onResizeStart:n.onResizeStart,replaceStyles:l&&l[v],className:u&&u[v],children:m&&m[v]?m[v]:null},v):null});return A.jsx("div",{className:f,style:d,children:y})},e.prototype.render=function(){var n=this,i=Object.keys(this.props).reduce(function(u,d){return fM.indexOf(d)!==-1||(u[d]=n.props[d]),u},{}),a=di(di(di({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(a.flexBasis=this.state.flexBasis);var l=this.props.as||"div";return A.jsxs(l,di({style:a,className:this.props.className},i,{ref:function(u){u&&(n.resizable=u)},children:[this.state.isResizing&&A.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},e.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e}(q.PureComponent);const kf=q.createContext(null);kf.displayName="PanelGroupContext";const It={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},G0=10,Fa=q.useLayoutEffect,mw=sC.useId,mM=typeof mw=="function"?mw:()=>null;let pM=0;function Y0(t=null){const e=mM(),n=q.useRef(t||e||null);return n.current===null&&(n.current=""+pM++),t??n.current}function IT({children:t,className:e="",collapsedSize:n,collapsible:i,defaultSize:a,forwardedRef:l,id:u,maxSize:d,minSize:f,onCollapse:m,onExpand:y,onResize:v,order:b,style:x,tagName:C="div",...M}){const k=q.useContext(kf);if(k===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:L,expandPanel:H,getPanelSize:F,getPanelStyle:j,groupId:Q,isPanelCollapsed:K,reevaluatePanelConstraints:S,registerPanel:T,resizePanel:N,unregisterPanel:V}=k,U=Y0(u),B=q.useRef({callbacks:{onCollapse:m,onExpand:y,onResize:v},constraints:{collapsedSize:n,collapsible:i,defaultSize:a,maxSize:d,minSize:f},id:U,idIsFromProps:u!==void 0,order:b});q.useRef({didLogMissingDefaultSizeWarning:!1}),Fa(()=>{const{callbacks:D,constraints:G}=B.current,O={...G};B.current.id=U,B.current.idIsFromProps=u!==void 0,B.current.order=b,D.onCollapse=m,D.onExpand=y,D.onResize=v,G.collapsedSize=n,G.collapsible=i,G.defaultSize=a,G.maxSize=d,G.minSize=f,(O.collapsedSize!==G.collapsedSize||O.collapsible!==G.collapsible||O.maxSize!==G.maxSize||O.minSize!==G.minSize)&&S(B.current,O)}),Fa(()=>{const D=B.current;return T(D),()=>{V(D)}},[b,U,T,V]),q.useImperativeHandle(l,()=>({collapse:()=>{L(B.current)},expand:D=>{H(B.current,D)},getId(){return U},getSize(){return F(B.current)},isCollapsed(){return K(B.current)},isExpanded(){return!K(B.current)},resize:D=>{N(B.current,D)}}),[L,H,F,K,U,N]);const R=j(B.current,a);return q.createElement(C,{...M,children:t,className:e,id:U,style:{...R,...x},[It.groupId]:Q,[It.panel]:"",[It.panelCollapsible]:i||void 0,[It.panelId]:U,[It.panelSize]:parseFloat(""+R.flexGrow).toFixed(1)})}const Jp=q.forwardRef((t,e)=>q.createElement(IT,{...t,forwardedRef:e}));IT.displayName="Panel";Jp.displayName="forwardRef(Panel)";let e0=null,Mh=-1,Vs=null;function yM(t,e){if(e){const n=(e&PT)!==0,i=(e&VT)!==0,a=(e&zT)!==0,l=(e&LT)!==0;if(n)return a?"se-resize":l?"ne-resize":"e-resize";if(i)return a?"sw-resize":l?"nw-resize":"w-resize";if(a)return"s-resize";if(l)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function vM(){Vs!==null&&(document.head.removeChild(Vs),e0=null,Vs=null,Mh=-1)}function bp(t,e){var n,i;const a=yM(t,e);if(e0!==a){if(e0=a,Vs===null&&(Vs=document.createElement("style"),document.head.appendChild(Vs)),Mh>=0){var l;(l=Vs.sheet)===null||l===void 0||l.removeRule(Mh)}Mh=(n=(i=Vs.sheet)===null||i===void 0?void 0:i.insertRule(`*{cursor: ${a} !important;}`))!==null&&n!==void 0?n:-1}}function kT(t){return t.type==="keydown"}function DT(t){return t.type.startsWith("pointer")}function MT(t){return t.type.startsWith("mouse")}function Df(t){if(DT(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(MT(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function _M(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function bM(t,e,n){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function EM(t,e){if(t===e)throw new Error("Cannot compare node with itself");const n={a:vw(t),b:vw(e)};let i;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),e=n.b.pop(),i=t;Be(i,"Stacking order can only be calculated for elements with a common ancestor");const a={a:yw(pw(n.a)),b:yw(pw(n.b))};if(a.a===a.b){const l=i.childNodes,u={a:n.a.at(-1),b:n.b.at(-1)};let d=l.length;for(;d--;){const f=l[d];if(f===u.a)return 1;if(f===u.b)return-1}}return Math.sign(a.a-a.b)}const wM=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function xM(t){var e;const n=getComputedStyle((e=OT(t))!==null&&e!==void 0?e:t).display;return n==="flex"||n==="inline-flex"}function TM(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||xM(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||wM.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function pw(t){let e=t.length;for(;e--;){const n=t[e];if(Be(n,"Missing node"),TM(n))return n}return null}function yw(t){return t&&Number(getComputedStyle(t).zIndex)||0}function vw(t){const e=[];for(;t;)e.push(t),t=OT(t);return e}function OT(t){const{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}const PT=1,VT=2,zT=4,LT=8,SM=_M()==="coarse";let Br=[],pl=!1,zs=new Map,Mf=new Map;const vc=new Set;function AM(t,e,n,i,a){var l;const{ownerDocument:u}=e,d={direction:n,element:e,hitAreaMargins:i,setResizeHandlerState:a},f=(l=zs.get(u))!==null&&l!==void 0?l:0;return zs.set(u,f+1),vc.add(d),ef(),function(){var y;Mf.delete(t),vc.delete(d);const v=(y=zs.get(u))!==null&&y!==void 0?y:1;if(zs.set(u,v-1),ef(),v===1&&zs.delete(u),Br.includes(d)){const b=Br.indexOf(d);b>=0&&Br.splice(b,1),X0(),a("up",!0,null)}}}function RM(t){const{target:e}=t,{x:n,y:i}=Df(t);pl=!0,K0({target:e,x:n,y:i}),ef(),Br.length>0&&(tf("down",t),t.preventDefault(),UT(e)||t.stopImmediatePropagation())}function Ep(t){const{x:e,y:n}=Df(t);if(pl&&t.buttons===0&&(pl=!1,tf("up",t)),!pl){const{target:i}=t;K0({target:i,x:e,y:n})}tf("move",t),X0(),Br.length>0&&t.preventDefault()}function wp(t){const{target:e}=t,{x:n,y:i}=Df(t);Mf.clear(),pl=!1,Br.length>0&&(t.preventDefault(),UT(e)||t.stopImmediatePropagation()),tf("up",t),K0({target:e,x:n,y:i}),X0(),ef()}function UT(t){let e=t;for(;e;){if(e.hasAttribute(It.resizeHandle))return!0;e=e.parentElement}return!1}function K0({target:t,x:e,y:n}){Br.splice(0);let i=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(i=t),vc.forEach(a=>{const{element:l,hitAreaMargins:u}=a,d=l.getBoundingClientRect(),{bottom:f,left:m,right:y,top:v}=d,b=SM?u.coarse:u.fine;if(e>=m-b&&e<=y+b&&n>=v-b&&n<=f+b){if(i!==null&&document.contains(i)&&l!==i&&!l.contains(i)&&!i.contains(l)&&EM(i,l)>0){let C=i,M=!1;for(;C&&!C.contains(l);){if(bM(C.getBoundingClientRect(),d)){M=!0;break}C=C.parentElement}if(M)return}Br.push(a)}})}function xp(t,e){Mf.set(t,e)}function X0(){let t=!1,e=!1;Br.forEach(i=>{const{direction:a}=i;a==="horizontal"?t=!0:e=!0});let n=0;Mf.forEach(i=>{n|=i}),t&&e?bp("intersection",n):t?bp("horizontal",n):e?bp("vertical",n):vM()}let Tp;function ef(){var t;(t=Tp)===null||t===void 0||t.abort(),Tp=new AbortController;const e={capture:!0,signal:Tp.signal};vc.size&&(pl?(Br.length>0&&zs.forEach((n,i)=>{const{body:a}=i;n>0&&(a.addEventListener("contextmenu",wp,e),a.addEventListener("pointerleave",Ep,e),a.addEventListener("pointermove",Ep,e))}),zs.forEach((n,i)=>{const{body:a}=i;a.addEventListener("pointerup",wp,e),a.addEventListener("pointercancel",wp,e)})):zs.forEach((n,i)=>{const{body:a}=i;n>0&&(a.addEventListener("pointerdown",RM,e),a.addEventListener("pointermove",Ep,e))}))}function tf(t,e){vc.forEach(n=>{const{setResizeHandlerState:i}=n,a=Br.includes(n);i(t,a,e)})}function CM(){const[t,e]=q.useState(0);return q.useCallback(()=>e(n=>n+1),[])}function Be(t,e){if(!t)throw console.error(e),Error(e)}function Ya(t,e,n=G0){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function Ki(t,e,n=G0){return Ya(t,e,n)===0}function rr(t,e,n){return Ya(t,e,n)===0}function NM(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){const a=t[i],l=e[i];if(!rr(a,l,n))return!1}return!0}function cl({panelConstraints:t,panelIndex:e,size:n}){const i=t[e];Be(i!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:a=0,collapsible:l,maxSize:u=100,minSize:d=0}=i;if(Ya(n,d)<0)if(l){const f=(a+d)/2;Ya(n,f)<0?n=a:n=d}else n=d;return n=Math.min(u,n),n=parseFloat(n.toFixed(G0)),n}function Qu({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:i,prevLayout:a,trigger:l}){if(rr(t,0))return e;const u=[...e],[d,f]=i;Be(d!=null,"Invalid first pivot index"),Be(f!=null,"Invalid second pivot index");let m=0;if(l==="keyboard"){{const v=t<0?f:d,b=n[v];Be(b,`Panel constraints not found for index ${v}`);const{collapsedSize:x=0,collapsible:C,minSize:M=0}=b;if(C){const k=e[v];if(Be(k!=null,`Previous layout not found for panel index ${v}`),rr(k,x)){const L=M-k;Ya(L,Math.abs(t))>0&&(t=t<0?0-L:L)}}}{const v=t<0?d:f,b=n[v];Be(b,`No panel constraints found for index ${v}`);const{collapsedSize:x=0,collapsible:C,minSize:M=0}=b;if(C){const k=e[v];if(Be(k!=null,`Previous layout not found for panel index ${v}`),rr(k,M)){const L=k-x;Ya(L,Math.abs(t))>0&&(t=t<0?0-L:L)}}}}{const v=t<0?1:-1;let b=t<0?f:d,x=0;for(;;){const M=e[b];Be(M!=null,`Previous layout not found for panel index ${b}`);const L=cl({panelConstraints:n,panelIndex:b,size:100})-M;if(x+=L,b+=v,b<0||b>=n.length)break}const C=Math.min(Math.abs(t),Math.abs(x));t=t<0?0-C:C}{let b=t<0?d:f;for(;b>=0&&b<n.length;){const x=Math.abs(t)-Math.abs(m),C=e[b];Be(C!=null,`Previous layout not found for panel index ${b}`);const M=C-x,k=cl({panelConstraints:n,panelIndex:b,size:M});if(!rr(C,k)&&(m+=C-k,u[b]=k,m.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?b--:b++}}if(NM(a,u))return a;{const v=t<0?f:d,b=e[v];Be(b!=null,`Previous layout not found for panel index ${v}`);const x=b+m,C=cl({panelConstraints:n,panelIndex:v,size:x});if(u[v]=C,!rr(C,x)){let M=x-C,L=t<0?f:d;for(;L>=0&&L<n.length;){const H=u[L];Be(H!=null,`Previous layout not found for panel index ${L}`);const F=H+M,j=cl({panelConstraints:n,panelIndex:L,size:F});if(rr(H,j)||(M-=j-H,u[L]=j),rr(M,0))break;t>0?L--:L++}}}const y=u.reduce((v,b)=>b+v,0);return rr(y,100)?u:a}function IM({layout:t,panelsArray:e,pivotIndices:n}){let i=0,a=100,l=0,u=0;const d=n[0];Be(d!=null,"No pivot index found"),e.forEach((v,b)=>{const{constraints:x}=v,{maxSize:C=100,minSize:M=0}=x;b===d?(i=M,a=C):(l+=M,u+=C)});const f=Math.min(a,100-l),m=Math.max(i,100-u),y=t[d];return{valueMax:f,valueMin:m,valueNow:y}}function _c(t,e=document){return Array.from(e.querySelectorAll(`[${It.resizeHandleId}][data-panel-group-id="${t}"]`))}function BT(t,e,n=document){const a=_c(t,n).findIndex(l=>l.getAttribute(It.resizeHandleId)===e);return a??null}function jT(t,e,n){const i=BT(t,e,n);return i!=null?[i,i+1]:[-1,-1]}function kM(t){return t instanceof HTMLElement?!0:typeof t=="object"&&t!==null&&"tagName"in t&&"getAttribute"in t}function HT(t,e=document){if(kM(e)&&e.dataset.panelGroupId==t)return e;const n=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return n||null}function Of(t,e=document){const n=e.querySelector(`[${It.resizeHandleId}="${t}"]`);return n||null}function DM(t,e,n,i=document){var a,l,u,d;const f=Of(e,i),m=_c(t,i),y=f?m.indexOf(f):-1,v=(a=(l=n[y])===null||l===void 0?void 0:l.id)!==null&&a!==void 0?a:null,b=(u=(d=n[y+1])===null||d===void 0?void 0:d.id)!==null&&u!==void 0?u:null;return[v,b]}function MM({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:i,panelDataArray:a,panelGroupElement:l,setLayout:u}){q.useRef({didWarnAboutMissingResizeHandle:!1}),Fa(()=>{if(!l)return;const d=_c(n,l);for(let f=0;f<a.length-1;f++){const{valueMax:m,valueMin:y,valueNow:v}=IM({layout:i,panelsArray:a,pivotIndices:[f,f+1]}),b=d[f];if(b!=null){const x=a[f];Be(x,`No panel data found for index "${f}"`),b.setAttribute("aria-controls",x.id),b.setAttribute("aria-valuemax",""+Math.round(m)),b.setAttribute("aria-valuemin",""+Math.round(y)),b.setAttribute("aria-valuenow",v!=null?""+Math.round(v):"")}}return()=>{d.forEach((f,m)=>{f.removeAttribute("aria-controls"),f.removeAttribute("aria-valuemax"),f.removeAttribute("aria-valuemin"),f.removeAttribute("aria-valuenow")})}},[n,i,a,l]),q.useEffect(()=>{if(!l)return;const d=e.current;Be(d,"Eager values not found");const{panelDataArray:f}=d,m=HT(n,l);Be(m!=null,`No group found for id "${n}"`);const y=_c(n,l);Be(y,`No resize handles found for group id "${n}"`);const v=y.map(b=>{const x=b.getAttribute(It.resizeHandleId);Be(x,"Resize handle element has no handle id attribute");const[C,M]=DM(n,x,f,l);if(C==null||M==null)return()=>{};const k=L=>{if(!L.defaultPrevented)switch(L.key){case"Enter":{L.preventDefault();const H=f.findIndex(F=>F.id===C);if(H>=0){const F=f[H];Be(F,`No panel data found for index ${H}`);const j=i[H],{collapsedSize:Q=0,collapsible:K,minSize:S=0}=F.constraints;if(j!=null&&K){const T=Qu({delta:rr(j,Q)?S-Q:Q-j,initialLayout:i,panelConstraints:f.map(N=>N.constraints),pivotIndices:jT(n,x,l),prevLayout:i,trigger:"keyboard"});i!==T&&u(T)}}break}}};return b.addEventListener("keydown",k),()=>{b.removeEventListener("keydown",k)}});return()=>{v.forEach(b=>b())}},[l,t,e,n,i,a,u])}function _w(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function qT(t,e){const n=t==="horizontal",{x:i,y:a}=Df(e);return n?i:a}function OM(t,e,n,i,a){const l=n==="horizontal",u=Of(e,a);Be(u,`No resize handle element found for id "${e}"`);const d=u.getAttribute(It.groupId);Be(d,"Resize handle element has no group id attribute");let{initialCursorPosition:f}=i;const m=qT(n,t),y=HT(d,a);Be(y,`No group element found for id "${d}"`);const v=y.getBoundingClientRect(),b=l?v.width:v.height;return(m-f)/b*100}function PM(t,e,n,i,a,l){if(kT(t)){const u=n==="horizontal";let d=0;t.shiftKey?d=100:a!=null?d=a:d=10;let f=0;switch(t.key){case"ArrowDown":f=u?0:d;break;case"ArrowLeft":f=u?-d:0;break;case"ArrowRight":f=u?d:0;break;case"ArrowUp":f=u?0:-d;break;case"End":f=100;break;case"Home":f=-100;break}return f}else return i==null?0:OM(t,e,n,i,l)}function VM({panelDataArray:t}){const e=Array(t.length),n=t.map(l=>l.constraints);let i=0,a=100;for(let l=0;l<t.length;l++){const u=n[l];Be(u,`Panel constraints not found for index ${l}`);const{defaultSize:d}=u;d!=null&&(i++,e[l]=d,a-=d)}for(let l=0;l<t.length;l++){const u=n[l];Be(u,`Panel constraints not found for index ${l}`);const{defaultSize:d}=u;if(d!=null)continue;const f=t.length-i,m=a/f;i++,e[l]=m,a-=m}return e}function nl(t,e,n){e.forEach((i,a)=>{const l=t[a];Be(l,`Panel data not found for index ${a}`);const{callbacks:u,constraints:d,id:f}=l,{collapsedSize:m=0,collapsible:y}=d,v=n[f];if(v==null||i!==v){n[f]=i;const{onCollapse:b,onExpand:x,onResize:C}=u;C&&C(i,v),y&&(b||x)&&(x&&(v==null||Ki(v,m))&&!Ki(i,m)&&x(),b&&(v==null||!Ki(v,m))&&Ki(i,m)&&b())}})}function Eh(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function zM({defaultSize:t,dragState:e,layout:n,panelData:i,panelIndex:a,precision:l=3}){const u=n[a];let d;return u==null?d=t!=null?t.toPrecision(l):"1":i.length===1?d="1":d=u.toPrecision(l),{flexBasis:0,flexGrow:d,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function LM(t,e=10){let n=null;return(...a)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...a)},e)}}function bw(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function $T(t){return`react-resizable-panels:${t}`}function FT(t){return t.map(e=>{const{constraints:n,id:i,idIsFromProps:a,order:l}=e;return a?i:l?`${l}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function GT(t,e){try{const n=$T(t),i=e.getItem(n);if(i){const a=JSON.parse(i);if(typeof a=="object"&&a!=null)return a}}catch{}return null}function UM(t,e,n){var i,a;const l=(i=GT(t,n))!==null&&i!==void 0?i:{},u=FT(e);return(a=l[u])!==null&&a!==void 0?a:null}function BM(t,e,n,i,a){var l;const u=$T(t),d=FT(e),f=(l=GT(t,a))!==null&&l!==void 0?l:{};f[d]={expandToSizes:Object.fromEntries(n.entries()),layout:i};try{a.setItem(u,JSON.stringify(f))}catch(m){console.error(m)}}function Ew({layout:t,panelConstraints:e}){const n=[...t],i=n.reduce((l,u)=>l+u,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(l=>`${l}%`).join(", ")}`);if(!rr(i,100)&&n.length>0)for(let l=0;l<e.length;l++){const u=n[l];Be(u!=null,`No layout data found for index ${l}`);const d=100/i*u;n[l]=d}let a=0;for(let l=0;l<e.length;l++){const u=n[l];Be(u!=null,`No layout data found for index ${l}`);const d=cl({panelConstraints:e,panelIndex:l,size:u});u!=d&&(a+=u-d,n[l]=d)}if(!rr(a,0))for(let l=0;l<e.length;l++){const u=n[l];Be(u!=null,`No layout data found for index ${l}`);const d=u+a,f=cl({panelConstraints:e,panelIndex:l,size:d});if(u!==f&&(a-=f-u,n[l]=f,rr(a,0)))break}return n}const jM=100,Wu={getItem:t=>(bw(Wu),Wu.getItem(t)),setItem:(t,e)=>{bw(Wu),Wu.setItem(t,e)}},ww={};function YT({autoSaveId:t=null,children:e,className:n="",direction:i,forwardedRef:a,id:l=null,onLayout:u=null,keyboardResizeBy:d=null,storage:f=Wu,style:m,tagName:y="div",...v}){const b=Y0(l),x=q.useRef(null),[C,M]=q.useState(null),[k,L]=q.useState([]),H=CM(),F=q.useRef({}),j=q.useRef(new Map),Q=q.useRef(0),K=q.useRef({autoSaveId:t,direction:i,dragState:C,id:b,keyboardResizeBy:d,onLayout:u,storage:f}),S=q.useRef({layout:k,panelDataArray:[],panelDataArrayChanged:!1});q.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),q.useImperativeHandle(a,()=>({getId:()=>K.current.id,getLayout:()=>{const{layout:X}=S.current;return X},setLayout:X=>{const{onLayout:se}=K.current,{layout:fe,panelDataArray:ce}=S.current,ve=Ew({layout:X,panelConstraints:ce.map(_e=>_e.constraints)});_w(fe,ve)||(L(ve),S.current.layout=ve,se&&se(ve),nl(ce,ve,F.current))}}),[]),Fa(()=>{K.current.autoSaveId=t,K.current.direction=i,K.current.dragState=C,K.current.id=b,K.current.onLayout=u,K.current.storage=f}),MM({committedValuesRef:K,eagerValuesRef:S,groupId:b,layout:k,panelDataArray:S.current.panelDataArray,setLayout:L,panelGroupElement:x.current}),q.useEffect(()=>{const{panelDataArray:X}=S.current;if(t){if(k.length===0||k.length!==X.length)return;let se=ww[t];se==null&&(se=LM(BM,jM),ww[t]=se);const fe=[...X],ce=new Map(j.current);se(t,fe,ce,k,f)}},[t,k,f]),q.useEffect(()=>{});const T=q.useCallback(X=>{const{onLayout:se}=K.current,{layout:fe,panelDataArray:ce}=S.current;if(X.constraints.collapsible){const ve=ce.map(et=>et.constraints),{collapsedSize:_e=0,panelSize:Ae,pivotIndices:Ce}=La(ce,X,fe);if(Be(Ae!=null,`Panel size not found for panel "${X.id}"`),!Ki(Ae,_e)){j.current.set(X.id,Ae);const rt=il(ce,X)===ce.length-1?Ae-_e:_e-Ae,ze=Qu({delta:rt,initialLayout:fe,panelConstraints:ve,pivotIndices:Ce,prevLayout:fe,trigger:"imperative-api"});Eh(fe,ze)||(L(ze),S.current.layout=ze,se&&se(ze),nl(ce,ze,F.current))}}},[]),N=q.useCallback((X,se)=>{const{onLayout:fe}=K.current,{layout:ce,panelDataArray:ve}=S.current;if(X.constraints.collapsible){const _e=ve.map(tt=>tt.constraints),{collapsedSize:Ae=0,panelSize:Ce=0,minSize:et=0,pivotIndices:rt}=La(ve,X,ce),ze=se??et;if(Ki(Ce,Ae)){const tt=j.current.get(X.id),it=tt!=null&&tt>=ze?tt:ze,Le=il(ve,X)===ve.length-1?Ce-it:it-Ce,Ee=Qu({delta:Le,initialLayout:ce,panelConstraints:_e,pivotIndices:rt,prevLayout:ce,trigger:"imperative-api"});Eh(ce,Ee)||(L(Ee),S.current.layout=Ee,fe&&fe(Ee),nl(ve,Ee,F.current))}}},[]),V=q.useCallback(X=>{const{layout:se,panelDataArray:fe}=S.current,{panelSize:ce}=La(fe,X,se);return Be(ce!=null,`Panel size not found for panel "${X.id}"`),ce},[]),U=q.useCallback((X,se)=>{const{panelDataArray:fe}=S.current,ce=il(fe,X);return zM({defaultSize:se,dragState:C,layout:k,panelData:fe,panelIndex:ce})},[C,k]),B=q.useCallback(X=>{const{layout:se,panelDataArray:fe}=S.current,{collapsedSize:ce=0,collapsible:ve,panelSize:_e}=La(fe,X,se);return Be(_e!=null,`Panel size not found for panel "${X.id}"`),ve===!0&&Ki(_e,ce)},[]),R=q.useCallback(X=>{const{layout:se,panelDataArray:fe}=S.current,{collapsedSize:ce=0,collapsible:ve,panelSize:_e}=La(fe,X,se);return Be(_e!=null,`Panel size not found for panel "${X.id}"`),!ve||Ya(_e,ce)>0},[]),D=q.useCallback(X=>{const{panelDataArray:se}=S.current;se.push(X),se.sort((fe,ce)=>{const ve=fe.order,_e=ce.order;return ve==null&&_e==null?0:ve==null?-1:_e==null?1:ve-_e}),S.current.panelDataArrayChanged=!0,H()},[H]);Fa(()=>{if(S.current.panelDataArrayChanged){S.current.panelDataArrayChanged=!1;const{autoSaveId:X,onLayout:se,storage:fe}=K.current,{layout:ce,panelDataArray:ve}=S.current;let _e=null;if(X){const Ce=UM(X,ve,fe);Ce&&(j.current=new Map(Object.entries(Ce.expandToSizes)),_e=Ce.layout)}_e==null&&(_e=VM({panelDataArray:ve}));const Ae=Ew({layout:_e,panelConstraints:ve.map(Ce=>Ce.constraints)});_w(ce,Ae)||(L(Ae),S.current.layout=Ae,se&&se(Ae),nl(ve,Ae,F.current))}}),Fa(()=>{const X=S.current;return()=>{X.layout=[]}},[]);const G=q.useCallback(X=>{let se=!1;const fe=x.current;return fe&&window.getComputedStyle(fe,null).getPropertyValue("direction")==="rtl"&&(se=!0),function(ve){ve.preventDefault();const _e=x.current;if(!_e)return()=>null;const{direction:Ae,dragState:Ce,id:et,keyboardResizeBy:rt,onLayout:ze}=K.current,{layout:tt,panelDataArray:it}=S.current,{initialLayout:zt}=Ce??{},Le=jT(et,X,_e);let Ee=PM(ve,X,Ae,Ce,rt,_e);const At=Ae==="horizontal";At&&se&&(Ee=-Ee);const vn=it.map(An=>An.constraints),Gt=Qu({delta:Ee,initialLayout:zt??tt,panelConstraints:vn,pivotIndices:Le,prevLayout:tt,trigger:kT(ve)?"keyboard":"mouse-or-touch"}),Fn=!Eh(tt,Gt);(DT(ve)||MT(ve))&&Q.current!=Ee&&(Q.current=Ee,!Fn&&Ee!==0?At?xp(X,Ee<0?PT:VT):xp(X,Ee<0?zT:LT):xp(X,0)),Fn&&(L(Gt),S.current.layout=Gt,ze&&ze(Gt),nl(it,Gt,F.current))}},[]),O=q.useCallback((X,se)=>{const{onLayout:fe}=K.current,{layout:ce,panelDataArray:ve}=S.current,_e=ve.map(tt=>tt.constraints),{panelSize:Ae,pivotIndices:Ce}=La(ve,X,ce);Be(Ae!=null,`Panel size not found for panel "${X.id}"`);const rt=il(ve,X)===ve.length-1?Ae-se:se-Ae,ze=Qu({delta:rt,initialLayout:ce,panelConstraints:_e,pivotIndices:Ce,prevLayout:ce,trigger:"imperative-api"});Eh(ce,ze)||(L(ze),S.current.layout=ze,fe&&fe(ze),nl(ve,ze,F.current))},[]),Y=q.useCallback((X,se)=>{const{layout:fe,panelDataArray:ce}=S.current,{collapsedSize:ve=0,collapsible:_e}=se,{collapsedSize:Ae=0,collapsible:Ce,maxSize:et=100,minSize:rt=0}=X.constraints,{panelSize:ze}=La(ce,X,fe);ze!=null&&(_e&&Ce&&Ki(ze,ve)?Ki(ve,Ae)||O(X,Ae):ze<rt?O(X,rt):ze>et&&O(X,et))},[O]),ne=q.useCallback((X,se)=>{const{direction:fe}=K.current,{layout:ce}=S.current;if(!x.current)return;const ve=Of(X,x.current);Be(ve,`Drag handle element not found for id "${X}"`);const _e=qT(fe,se);M({dragHandleId:X,dragHandleRect:ve.getBoundingClientRect(),initialCursorPosition:_e,initialLayout:ce})},[]),J=q.useCallback(()=>{M(null)},[]),z=q.useCallback(X=>{const{panelDataArray:se}=S.current,fe=il(se,X);fe>=0&&(se.splice(fe,1),delete F.current[X.id],S.current.panelDataArrayChanged=!0,H())},[H]),W=q.useMemo(()=>({collapsePanel:T,direction:i,dragState:C,expandPanel:N,getPanelSize:V,getPanelStyle:U,groupId:b,isPanelCollapsed:B,isPanelExpanded:R,reevaluatePanelConstraints:Y,registerPanel:D,registerResizeHandle:G,resizePanel:O,startDragging:ne,stopDragging:J,unregisterPanel:z,panelGroupElement:x.current}),[T,C,i,N,V,U,b,B,R,Y,D,G,O,ne,J,z]),re={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return q.createElement(kf.Provider,{value:W},q.createElement(y,{...v,children:e,className:n,id:l,ref:x,style:{...re,...m},[It.group]:"",[It.groupDirection]:i,[It.groupId]:b}))}const KT=q.forwardRef((t,e)=>q.createElement(YT,{...t,forwardedRef:e}));YT.displayName="PanelGroup";KT.displayName="forwardRef(PanelGroup)";function il(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function La(t,e,n){const i=il(t,e),l=i===t.length-1?[i-1,i]:[i,i+1],u=n[i];return{...e.constraints,panelSize:u,pivotIndices:l}}function HM({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:i}){q.useEffect(()=>{if(t||n==null||i==null)return;const a=Of(e,i);if(a==null)return;const l=u=>{if(!u.defaultPrevented)switch(u.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{u.preventDefault(),n(u);break}case"F6":{u.preventDefault();const d=a.getAttribute(It.groupId);Be(d,`No group element found for id "${d}"`);const f=_c(d,i),m=BT(d,e,i);Be(m!==null,`No resize element found for id "${e}"`);const y=u.shiftKey?m>0?m-1:f.length-1:m+1<f.length?m+1:0;f[y].focus();break}}};return a.addEventListener("keydown",l),()=>{a.removeEventListener("keydown",l)}},[i,t,e,n])}function XT({children:t=null,className:e="",disabled:n=!1,hitAreaMargins:i,id:a,onBlur:l,onClick:u,onDragging:d,onFocus:f,onPointerDown:m,onPointerUp:y,style:v={},tabIndex:b=0,tagName:x="div",...C}){var M,k;const L=q.useRef(null),H=q.useRef({onClick:u,onDragging:d,onPointerDown:m,onPointerUp:y});q.useEffect(()=>{H.current.onClick=u,H.current.onDragging=d,H.current.onPointerDown=m,H.current.onPointerUp=y});const F=q.useContext(kf);if(F===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:j,groupId:Q,registerResizeHandle:K,startDragging:S,stopDragging:T,panelGroupElement:N}=F,V=Y0(a),[U,B]=q.useState("inactive"),[R,D]=q.useState(!1),[G,O]=q.useState(null),Y=q.useRef({state:U});Fa(()=>{Y.current.state=U}),q.useEffect(()=>{if(n)O(null);else{const W=K(V);O(()=>W)}},[n,V,K]);const ne=(M=i?.coarse)!==null&&M!==void 0?M:15,J=(k=i?.fine)!==null&&k!==void 0?k:5;q.useEffect(()=>{if(n||G==null)return;const W=L.current;Be(W,"Element ref not attached");let re=!1;return AM(V,W,j,{coarse:ne,fine:J},(se,fe,ce)=>{if(!fe){B("inactive");return}switch(se){case"down":{B("drag"),re=!1,Be(ce,'Expected event to be defined for "down" action'),S(V,ce);const{onDragging:ve,onPointerDown:_e}=H.current;ve?.(!0),_e?.();break}case"move":{const{state:ve}=Y.current;re=!0,ve!=="drag"&&B("hover"),Be(ce,'Expected event to be defined for "move" action'),G(ce);break}case"up":{B("hover"),T();const{onClick:ve,onDragging:_e,onPointerUp:Ae}=H.current;_e?.(!1),Ae?.(),re||ve?.();break}}})},[ne,j,n,J,K,V,G,S,T]),HM({disabled:n,handleId:V,resizeHandler:G,panelGroupElement:N});const z={touchAction:"none",userSelect:"none"};return q.createElement(x,{...C,children:t,className:e,id:a,onBlur:()=>{D(!1),l?.()},onFocus:()=>{D(!0),f?.()},ref:L,role:"separator",style:{...z,...v},tabIndex:b,[It.groupDirection]:j,[It.groupId]:Q,[It.resizeHandle]:"",[It.resizeHandleActive]:U==="drag"?"pointer":R?"keyboard":void 0,[It.resizeHandleEnabled]:!n,[It.resizeHandleId]:V,[It.resizeHandleState]:U})}XT.displayName="PanelResizeHandle";const qM=()=>{};var xw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let a=t.charCodeAt(i);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},$M=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const a=t[n++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=t[n++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=t[n++],u=t[n++],d=t[n++],f=((a&7)<<18|(l&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const l=t[n++],u=t[n++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},WT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<t.length;a+=3){const l=t[a],u=a+1<t.length,d=u?t[a+1]:0,f=a+2<t.length,m=f?t[a+2]:0,y=l>>2,v=(l&3)<<4|d>>4;let b=(d&15)<<2|m>>6,x=m&63;f||(x=64,u||(b=64)),i.push(n[y],n[v],n[b],n[x])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(QT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$M(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<t.length;){const l=n[t.charAt(a++)],d=a<t.length?n[t.charAt(a)]:0;++a;const m=a<t.length?n[t.charAt(a)]:64;++a;const v=a<t.length?n[t.charAt(a)]:64;if(++a,l==null||d==null||m==null||v==null)throw new FM;const b=l<<2|d>>4;if(i.push(b),m!==64){const x=d<<4&240|m>>2;if(i.push(x),v!==64){const C=m<<6&192|v;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class FM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GM=function(t){const e=QT(t);return WT.encodeByteArray(e,!0)},nf=function(t){return GM(t).replace(/\./g,"")},ZT=function(t){try{return WT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM=()=>YM().__FIREBASE_DEFAULTS__,XM=()=>{if(typeof process>"u"||typeof xw>"u")return;const t=xw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},QM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ZT(t[1]);return e&&JSON.parse(e)},Pf=()=>{try{return qM()||KM()||XM()||QM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},JT=t=>{var e,n;return(n=(e=Pf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},eS=t=>{const e=JT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},tS=()=>{var t;return(t=Pf())===null||t===void 0?void 0:t.config},nS=t=>{var e;return(e=Pf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function to(t){return t.endsWith(".cloudworkstations.dev")}async function Q0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",a=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[nf(JSON.stringify(n)),nf(JSON.stringify(u)),""].join(".")}const rc={};function JM(){const t={prod:[],emulator:[]};for(const e of Object.keys(rc))rc[e]?t.emulator.push(e):t.prod.push(e);return t}function e3(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Tw=!1;function W0(t,e){if(typeof window>"u"||typeof document>"u"||!to(window.location.host)||rc[t]===e||rc[t]||Tw)return;rc[t]=e;function n(b){return`__firebase__banner__${b}`}const i="__firebase__banner",l=JM().prod.length>0;function u(){const b=document.getElementById(i);b&&b.remove()}function d(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function f(b,x){b.setAttribute("width","24"),b.setAttribute("id",x),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function m(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Tw=!0,u()},b}function y(b,x){b.setAttribute("id",x),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function v(){const b=e3(i),x=n("text"),C=document.getElementById(x)||document.createElement("span"),M=n("learnmore"),k=document.getElementById(M)||document.createElement("a"),L=n("preprendIcon"),H=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const F=b.element;d(F),y(k,M);const j=m();f(H,L),F.append(H,C,k,j),document.body.appendChild(F)}l?(C.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function t3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sn())}function n3(){var t;const e=(t=Pf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function r3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function i3(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function s3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function a3(){const t=Sn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function o3(){return!n3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function l3(){try{return typeof indexedDB=="object"}catch{return!1}}function u3(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3="FirebaseError";class wi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=c3,Object.setPrototypeOf(this,wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pc.prototype.create)}}class Pc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?d3(l,i):"Error",d=`${this.serviceName}: ${u} (${a}).`;return new wi(a,d,i)}}function d3(t,e){return t.replace(h3,(n,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const h3=/\{\$([^}]+)}/g;function f3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ka(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const a of n){if(!i.includes(a))return!1;const l=t[a],u=e[a];if(Sw(l)&&Sw(u)){if(!Ka(l,u))return!1}else if(l!==u)return!1}for(const a of i)if(!n.includes(a))return!1;return!0}function Sw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Zu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Ju(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function g3(t,e){const n=new m3(t,e);return n.subscribe.bind(n)}class m3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let a;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");p3(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:i},a.next===void 0&&(a.next=Sp),a.error===void 0&&(a.error=Sp),a.complete===void 0&&(a.complete=Sp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function p3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Sp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(t){return t&&t._delegate?t._delegate:t}class Ws{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new WM;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e?.identifier),a=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_3(e))try{this.getOrInitializeService({instanceIdentifier:Ba})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=Ba){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ba){return this.instances.has(e)}getOptions(e=Ba){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[l,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&u.resolve(a)}return a}onInit(e,n){var i;const a=this.normalizeInstanceIdentifier(n),l=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(a,l);const u=this.instances.get(a);return u&&e(u,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const a of i)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:v3(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ba){return this.component?this.component.multipleInstances?e:Ba:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function v3(t){return t===Ba?void 0:t}function _3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new y3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ke||(Ke={}));const E3={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},w3=Ke.INFO,x3={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},T3=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),a=x3[e];if(a)console[a](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Z0{constructor(e){this.name=e,this._logLevel=w3,this._logHandler=T3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?E3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const S3=(t,e)=>e.some(n=>t instanceof n);let Aw,Rw;function A3(){return Aw||(Aw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function R3(){return Rw||(Rw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rS=new WeakMap,t0=new WeakMap,iS=new WeakMap,Ap=new WeakMap,J0=new WeakMap;function C3(t){const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("success",l),t.removeEventListener("error",u)},l=()=>{n(Fs(t.result)),a()},u=()=>{i(t.error),a()};t.addEventListener("success",l),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&rS.set(n,t)}).catch(()=>{}),J0.set(e,t),e}function N3(t){if(t0.has(t))return;const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",u),t.removeEventListener("abort",u)},l=()=>{n(),a()},u=()=>{i(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",l),t.addEventListener("error",u),t.addEventListener("abort",u)});t0.set(t,e)}let n0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return t0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||iS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function I3(t){n0=t(n0)}function k3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Rp(this),e,...n);return iS.set(i,e.sort?e.sort():[e]),Fs(i)}:R3().includes(t)?function(...e){return t.apply(Rp(this),e),Fs(rS.get(this))}:function(...e){return Fs(t.apply(Rp(this),e))}}function D3(t){return typeof t=="function"?k3(t):(t instanceof IDBTransaction&&N3(t),S3(t,A3())?new Proxy(t,n0):t)}function Fs(t){if(t instanceof IDBRequest)return C3(t);if(Ap.has(t))return Ap.get(t);const e=D3(t);return e!==t&&(Ap.set(t,e),J0.set(e,t)),e}const Rp=t=>J0.get(t);function M3(t,e,{blocked:n,upgrade:i,blocking:a,terminated:l}={}){const u=indexedDB.open(t,e),d=Fs(u);return i&&u.addEventListener("upgradeneeded",f=>{i(Fs(u.result),f.oldVersion,f.newVersion,Fs(u.transaction),f)}),n&&u.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),d.then(f=>{l&&f.addEventListener("close",()=>l()),a&&f.addEventListener("versionchange",m=>a(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const O3=["get","getKey","getAll","getAllKeys","count"],P3=["put","add","delete","clear"],Cp=new Map;function Cw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Cp.get(e))return Cp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,a=P3.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(a||O3.includes(n)))return;const l=async function(u,...d){const f=this.transaction(u,a?"readwrite":"readonly");let m=f.store;return i&&(m=m.index(d.shift())),(await Promise.all([m[n](...d),a&&f.done]))[0]};return Cp.set(e,l),l}I3(t=>({...t,get:(e,n,i)=>Cw(e,n)||t.get(e,n,i),has:(e,n)=>!!Cw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(z3(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function z3(t){const e=t.getComponent();return e?.type==="VERSION"}const r0="@firebase/app",Nw="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts=new Z0("@firebase/app"),L3="@firebase/app-compat",U3="@firebase/analytics-compat",B3="@firebase/analytics",j3="@firebase/app-check-compat",H3="@firebase/app-check",q3="@firebase/auth",$3="@firebase/auth-compat",F3="@firebase/database",G3="@firebase/data-connect",Y3="@firebase/database-compat",K3="@firebase/functions",X3="@firebase/functions-compat",Q3="@firebase/installations",W3="@firebase/installations-compat",Z3="@firebase/messaging",J3="@firebase/messaging-compat",eO="@firebase/performance",tO="@firebase/performance-compat",nO="@firebase/remote-config",rO="@firebase/remote-config-compat",iO="@firebase/storage",sO="@firebase/storage-compat",aO="@firebase/firestore",oO="@firebase/ai",lO="@firebase/firestore-compat",uO="firebase",cO="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="[DEFAULT]",dO={[r0]:"fire-core",[L3]:"fire-core-compat",[B3]:"fire-analytics",[U3]:"fire-analytics-compat",[H3]:"fire-app-check",[j3]:"fire-app-check-compat",[q3]:"fire-auth",[$3]:"fire-auth-compat",[F3]:"fire-rtdb",[G3]:"fire-data-connect",[Y3]:"fire-rtdb-compat",[K3]:"fire-fn",[X3]:"fire-fn-compat",[Q3]:"fire-iid",[W3]:"fire-iid-compat",[Z3]:"fire-fcm",[J3]:"fire-fcm-compat",[eO]:"fire-perf",[tO]:"fire-perf-compat",[nO]:"fire-rc",[rO]:"fire-rc-compat",[iO]:"fire-gcs",[sO]:"fire-gcs-compat",[aO]:"fire-fst",[lO]:"fire-fst-compat",[oO]:"fire-vertex","fire-js":"fire-js",[uO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf=new Map,hO=new Map,s0=new Map;function Iw(t,e){try{t.container.addComponent(e)}catch(n){ts.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xa(t){const e=t.name;if(s0.has(e))return ts.debug(`There were multiple attempts to register component ${e}.`),!1;s0.set(e,t);for(const n of rf.values())Iw(n,t);for(const n of hO.values())Iw(n,t);return!0}function Vf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ir(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gs=new Pc("app","Firebase",fO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=cO;function sS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:i0,automaticDataCollectionEnabled:!0},e),a=i.name;if(typeof a!="string"||!a)throw Gs.create("bad-app-name",{appName:String(a)});if(n||(n=tS()),!n)throw Gs.create("no-options");const l=rf.get(a);if(l){if(Ka(n,l.options)&&Ka(i,l.config))return l;throw Gs.create("duplicate-app",{appName:a})}const u=new b3(a);for(const f of s0.values())u.addComponent(f);const d=new gO(n,i,u);return rf.set(a,d),d}function ey(t=i0){const e=rf.get(t);if(!e&&t===i0&&tS())return sS();if(!e)throw Gs.create("no-app",{appName:t});return e}function mi(t,e,n){var i;let a=(i=dO[t])!==null&&i!==void 0?i:t;n&&(a+=`-${n}`);const l=a.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ts.warn(d.join(" "));return}Xa(new Ws(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO="firebase-heartbeat-database",pO=1,bc="firebase-heartbeat-store";let Np=null;function aS(){return Np||(Np=M3(mO,pO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(bc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gs.create("idb-open",{originalErrorMessage:t.message})})),Np}async function yO(t){try{const n=(await aS()).transaction(bc),i=await n.objectStore(bc).get(oS(t));return await n.done,i}catch(e){if(e instanceof wi)ts.warn(e.message);else{const n=Gs.create("idb-get",{originalErrorMessage:e?.message});ts.warn(n.message)}}}async function kw(t,e){try{const i=(await aS()).transaction(bc,"readwrite");await i.objectStore(bc).put(e,oS(t)),await i.done}catch(n){if(n instanceof wi)ts.warn(n.message);else{const i=Gs.create("idb-set",{originalErrorMessage:n?.message});ts.warn(i.message)}}}function oS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO=1024,_O=30;class bO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wO(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Dw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>_O){const u=xO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ts.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Dw(),{heartbeatsToSend:i,unsentEntries:a}=EO(this._heartbeatsCache.heartbeats),l=nf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return ts.warn(n),""}}}function Dw(){return new Date().toISOString().substring(0,10)}function EO(t,e=vO){const n=[];let i=t.slice();for(const a of t){const l=n.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),Mw(n)>e){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),Mw(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class wO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return l3()?u3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await yO(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return kw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return kw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Mw(t){return nf(JSON.stringify({version:2,heartbeats:t})).length}function xO(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(t){Xa(new Ws("platform-logger",e=>new V3(e),"PRIVATE")),Xa(new Ws("heartbeat",e=>new bO(e),"PRIVATE")),mi(r0,Nw,t),mi(r0,Nw,"esm2017"),mi("fire-js","")}TO("");var SO="firebase",AO="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mi(SO,AO,"app");var Ow=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ys,lS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function N(){}N.prototype=T.prototype,S.D=T.prototype,S.prototype=new N,S.prototype.constructor=S,S.C=function(V,U,B){for(var R=Array(arguments.length-2),D=2;D<arguments.length;D++)R[D-2]=arguments[D];return T.prototype[U].apply(V,R)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(S,T,N){N||(N=0);var V=Array(16);if(typeof T=="string")for(var U=0;16>U;++U)V[U]=T.charCodeAt(N++)|T.charCodeAt(N++)<<8|T.charCodeAt(N++)<<16|T.charCodeAt(N++)<<24;else for(U=0;16>U;++U)V[U]=T[N++]|T[N++]<<8|T[N++]<<16|T[N++]<<24;T=S.g[0],N=S.g[1],U=S.g[2];var B=S.g[3],R=T+(B^N&(U^B))+V[0]+3614090360&4294967295;T=N+(R<<7&4294967295|R>>>25),R=B+(U^T&(N^U))+V[1]+3905402710&4294967295,B=T+(R<<12&4294967295|R>>>20),R=U+(N^B&(T^N))+V[2]+606105819&4294967295,U=B+(R<<17&4294967295|R>>>15),R=N+(T^U&(B^T))+V[3]+3250441966&4294967295,N=U+(R<<22&4294967295|R>>>10),R=T+(B^N&(U^B))+V[4]+4118548399&4294967295,T=N+(R<<7&4294967295|R>>>25),R=B+(U^T&(N^U))+V[5]+1200080426&4294967295,B=T+(R<<12&4294967295|R>>>20),R=U+(N^B&(T^N))+V[6]+2821735955&4294967295,U=B+(R<<17&4294967295|R>>>15),R=N+(T^U&(B^T))+V[7]+4249261313&4294967295,N=U+(R<<22&4294967295|R>>>10),R=T+(B^N&(U^B))+V[8]+1770035416&4294967295,T=N+(R<<7&4294967295|R>>>25),R=B+(U^T&(N^U))+V[9]+2336552879&4294967295,B=T+(R<<12&4294967295|R>>>20),R=U+(N^B&(T^N))+V[10]+4294925233&4294967295,U=B+(R<<17&4294967295|R>>>15),R=N+(T^U&(B^T))+V[11]+2304563134&4294967295,N=U+(R<<22&4294967295|R>>>10),R=T+(B^N&(U^B))+V[12]+1804603682&4294967295,T=N+(R<<7&4294967295|R>>>25),R=B+(U^T&(N^U))+V[13]+4254626195&4294967295,B=T+(R<<12&4294967295|R>>>20),R=U+(N^B&(T^N))+V[14]+2792965006&4294967295,U=B+(R<<17&4294967295|R>>>15),R=N+(T^U&(B^T))+V[15]+1236535329&4294967295,N=U+(R<<22&4294967295|R>>>10),R=T+(U^B&(N^U))+V[1]+4129170786&4294967295,T=N+(R<<5&4294967295|R>>>27),R=B+(N^U&(T^N))+V[6]+3225465664&4294967295,B=T+(R<<9&4294967295|R>>>23),R=U+(T^N&(B^T))+V[11]+643717713&4294967295,U=B+(R<<14&4294967295|R>>>18),R=N+(B^T&(U^B))+V[0]+3921069994&4294967295,N=U+(R<<20&4294967295|R>>>12),R=T+(U^B&(N^U))+V[5]+3593408605&4294967295,T=N+(R<<5&4294967295|R>>>27),R=B+(N^U&(T^N))+V[10]+38016083&4294967295,B=T+(R<<9&4294967295|R>>>23),R=U+(T^N&(B^T))+V[15]+3634488961&4294967295,U=B+(R<<14&4294967295|R>>>18),R=N+(B^T&(U^B))+V[4]+3889429448&4294967295,N=U+(R<<20&4294967295|R>>>12),R=T+(U^B&(N^U))+V[9]+568446438&4294967295,T=N+(R<<5&4294967295|R>>>27),R=B+(N^U&(T^N))+V[14]+3275163606&4294967295,B=T+(R<<9&4294967295|R>>>23),R=U+(T^N&(B^T))+V[3]+4107603335&4294967295,U=B+(R<<14&4294967295|R>>>18),R=N+(B^T&(U^B))+V[8]+1163531501&4294967295,N=U+(R<<20&4294967295|R>>>12),R=T+(U^B&(N^U))+V[13]+2850285829&4294967295,T=N+(R<<5&4294967295|R>>>27),R=B+(N^U&(T^N))+V[2]+4243563512&4294967295,B=T+(R<<9&4294967295|R>>>23),R=U+(T^N&(B^T))+V[7]+1735328473&4294967295,U=B+(R<<14&4294967295|R>>>18),R=N+(B^T&(U^B))+V[12]+2368359562&4294967295,N=U+(R<<20&4294967295|R>>>12),R=T+(N^U^B)+V[5]+4294588738&4294967295,T=N+(R<<4&4294967295|R>>>28),R=B+(T^N^U)+V[8]+2272392833&4294967295,B=T+(R<<11&4294967295|R>>>21),R=U+(B^T^N)+V[11]+1839030562&4294967295,U=B+(R<<16&4294967295|R>>>16),R=N+(U^B^T)+V[14]+4259657740&4294967295,N=U+(R<<23&4294967295|R>>>9),R=T+(N^U^B)+V[1]+2763975236&4294967295,T=N+(R<<4&4294967295|R>>>28),R=B+(T^N^U)+V[4]+1272893353&4294967295,B=T+(R<<11&4294967295|R>>>21),R=U+(B^T^N)+V[7]+4139469664&4294967295,U=B+(R<<16&4294967295|R>>>16),R=N+(U^B^T)+V[10]+3200236656&4294967295,N=U+(R<<23&4294967295|R>>>9),R=T+(N^U^B)+V[13]+681279174&4294967295,T=N+(R<<4&4294967295|R>>>28),R=B+(T^N^U)+V[0]+3936430074&4294967295,B=T+(R<<11&4294967295|R>>>21),R=U+(B^T^N)+V[3]+3572445317&4294967295,U=B+(R<<16&4294967295|R>>>16),R=N+(U^B^T)+V[6]+76029189&4294967295,N=U+(R<<23&4294967295|R>>>9),R=T+(N^U^B)+V[9]+3654602809&4294967295,T=N+(R<<4&4294967295|R>>>28),R=B+(T^N^U)+V[12]+3873151461&4294967295,B=T+(R<<11&4294967295|R>>>21),R=U+(B^T^N)+V[15]+530742520&4294967295,U=B+(R<<16&4294967295|R>>>16),R=N+(U^B^T)+V[2]+3299628645&4294967295,N=U+(R<<23&4294967295|R>>>9),R=T+(U^(N|~B))+V[0]+4096336452&4294967295,T=N+(R<<6&4294967295|R>>>26),R=B+(N^(T|~U))+V[7]+1126891415&4294967295,B=T+(R<<10&4294967295|R>>>22),R=U+(T^(B|~N))+V[14]+2878612391&4294967295,U=B+(R<<15&4294967295|R>>>17),R=N+(B^(U|~T))+V[5]+4237533241&4294967295,N=U+(R<<21&4294967295|R>>>11),R=T+(U^(N|~B))+V[12]+1700485571&4294967295,T=N+(R<<6&4294967295|R>>>26),R=B+(N^(T|~U))+V[3]+2399980690&4294967295,B=T+(R<<10&4294967295|R>>>22),R=U+(T^(B|~N))+V[10]+4293915773&4294967295,U=B+(R<<15&4294967295|R>>>17),R=N+(B^(U|~T))+V[1]+2240044497&4294967295,N=U+(R<<21&4294967295|R>>>11),R=T+(U^(N|~B))+V[8]+1873313359&4294967295,T=N+(R<<6&4294967295|R>>>26),R=B+(N^(T|~U))+V[15]+4264355552&4294967295,B=T+(R<<10&4294967295|R>>>22),R=U+(T^(B|~N))+V[6]+2734768916&4294967295,U=B+(R<<15&4294967295|R>>>17),R=N+(B^(U|~T))+V[13]+1309151649&4294967295,N=U+(R<<21&4294967295|R>>>11),R=T+(U^(N|~B))+V[4]+4149444226&4294967295,T=N+(R<<6&4294967295|R>>>26),R=B+(N^(T|~U))+V[11]+3174756917&4294967295,B=T+(R<<10&4294967295|R>>>22),R=U+(T^(B|~N))+V[2]+718787259&4294967295,U=B+(R<<15&4294967295|R>>>17),R=N+(B^(U|~T))+V[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(U+(R<<21&4294967295|R>>>11))&4294967295,S.g[2]=S.g[2]+U&4294967295,S.g[3]=S.g[3]+B&4294967295}i.prototype.u=function(S,T){T===void 0&&(T=S.length);for(var N=T-this.blockSize,V=this.B,U=this.h,B=0;B<T;){if(U==0)for(;B<=N;)a(this,S,B),B+=this.blockSize;if(typeof S=="string"){for(;B<T;)if(V[U++]=S.charCodeAt(B++),U==this.blockSize){a(this,V),U=0;break}}else for(;B<T;)if(V[U++]=S[B++],U==this.blockSize){a(this,V),U=0;break}}this.h=U,this.o+=T},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;var N=8*this.o;for(T=S.length-8;T<S.length;++T)S[T]=N&255,N/=256;for(this.u(S),S=Array(16),T=N=0;4>T;++T)for(var V=0;32>V;V+=8)S[N++]=this.g[T]>>>V&255;return S};function l(S,T){var N=d;return Object.prototype.hasOwnProperty.call(N,S)?N[S]:N[S]=T(S)}function u(S,T){this.h=T;for(var N=[],V=!0,U=S.length-1;0<=U;U--){var B=S[U]|0;V&&B==T||(N[U]=B,V=!1)}this.g=N}var d={};function f(S){return-128<=S&&128>S?l(S,function(T){return new u([T|0],0>T?-1:0)}):new u([S|0],0>S?-1:0)}function m(S){if(isNaN(S)||!isFinite(S))return v;if(0>S)return k(m(-S));for(var T=[],N=1,V=0;S>=N;V++)T[V]=S/N|0,N*=4294967296;return new u(T,0)}function y(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return k(y(S.substring(1),T));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=m(Math.pow(T,8)),V=v,U=0;U<S.length;U+=8){var B=Math.min(8,S.length-U),R=parseInt(S.substring(U,U+B),T);8>B?(B=m(Math.pow(T,B)),V=V.j(B).add(m(R))):(V=V.j(N),V=V.add(m(R)))}return V}var v=f(0),b=f(1),x=f(16777216);t=u.prototype,t.m=function(){if(M(this))return-k(this).m();for(var S=0,T=1,N=0;N<this.g.length;N++){var V=this.i(N);S+=(0<=V?V:4294967296+V)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(C(this))return"0";if(M(this))return"-"+k(this).toString(S);for(var T=m(Math.pow(S,6)),N=this,V="";;){var U=j(N,T).g;N=L(N,U.j(T));var B=((0<N.g.length?N.g[0]:N.h)>>>0).toString(S);if(N=U,C(N))return B+V;for(;6>B.length;)B="0"+B;V=B+V}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function C(S){if(S.h!=0)return!1;for(var T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function M(S){return S.h==-1}t.l=function(S){return S=L(this,S),M(S)?-1:C(S)?0:1};function k(S){for(var T=S.g.length,N=[],V=0;V<T;V++)N[V]=~S.g[V];return new u(N,~S.h).add(b)}t.abs=function(){return M(this)?k(this):this},t.add=function(S){for(var T=Math.max(this.g.length,S.g.length),N=[],V=0,U=0;U<=T;U++){var B=V+(this.i(U)&65535)+(S.i(U)&65535),R=(B>>>16)+(this.i(U)>>>16)+(S.i(U)>>>16);V=R>>>16,B&=65535,R&=65535,N[U]=R<<16|B}return new u(N,N[N.length-1]&-2147483648?-1:0)};function L(S,T){return S.add(k(T))}t.j=function(S){if(C(this)||C(S))return v;if(M(this))return M(S)?k(this).j(k(S)):k(k(this).j(S));if(M(S))return k(this.j(k(S)));if(0>this.l(x)&&0>S.l(x))return m(this.m()*S.m());for(var T=this.g.length+S.g.length,N=[],V=0;V<2*T;V++)N[V]=0;for(V=0;V<this.g.length;V++)for(var U=0;U<S.g.length;U++){var B=this.i(V)>>>16,R=this.i(V)&65535,D=S.i(U)>>>16,G=S.i(U)&65535;N[2*V+2*U]+=R*G,H(N,2*V+2*U),N[2*V+2*U+1]+=B*G,H(N,2*V+2*U+1),N[2*V+2*U+1]+=R*D,H(N,2*V+2*U+1),N[2*V+2*U+2]+=B*D,H(N,2*V+2*U+2)}for(V=0;V<T;V++)N[V]=N[2*V+1]<<16|N[2*V];for(V=T;V<2*T;V++)N[V]=0;return new u(N,0)};function H(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function F(S,T){this.g=S,this.h=T}function j(S,T){if(C(T))throw Error("division by zero");if(C(S))return new F(v,v);if(M(S))return T=j(k(S),T),new F(k(T.g),k(T.h));if(M(T))return T=j(S,k(T)),new F(k(T.g),T.h);if(30<S.g.length){if(M(S)||M(T))throw Error("slowDivide_ only works with positive integers.");for(var N=b,V=T;0>=V.l(S);)N=Q(N),V=Q(V);var U=K(N,1),B=K(V,1);for(V=K(V,2),N=K(N,2);!C(V);){var R=B.add(V);0>=R.l(S)&&(U=U.add(N),B=R),V=K(V,1),N=K(N,1)}return T=L(S,U.j(T)),new F(U,T)}for(U=v;0<=S.l(T);){for(N=Math.max(1,Math.floor(S.m()/T.m())),V=Math.ceil(Math.log(N)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),B=m(N),R=B.j(T);M(R)||0<R.l(S);)N-=V,B=m(N),R=B.j(T);C(B)&&(B=b),U=U.add(B),S=L(S,R)}return new F(U,S)}t.A=function(S){return j(this,S).h},t.and=function(S){for(var T=Math.max(this.g.length,S.g.length),N=[],V=0;V<T;V++)N[V]=this.i(V)&S.i(V);return new u(N,this.h&S.h)},t.or=function(S){for(var T=Math.max(this.g.length,S.g.length),N=[],V=0;V<T;V++)N[V]=this.i(V)|S.i(V);return new u(N,this.h|S.h)},t.xor=function(S){for(var T=Math.max(this.g.length,S.g.length),N=[],V=0;V<T;V++)N[V]=this.i(V)^S.i(V);return new u(N,this.h^S.h)};function Q(S){for(var T=S.g.length+1,N=[],V=0;V<T;V++)N[V]=S.i(V)<<1|S.i(V-1)>>>31;return new u(N,S.h)}function K(S,T){var N=T>>5;T%=32;for(var V=S.g.length-N,U=[],B=0;B<V;B++)U[B]=0<T?S.i(B+N)>>>T|S.i(B+N+1)<<32-T:S.i(B+N);return new u(U,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,lS=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=y,Ys=u}).apply(typeof Ow<"u"?Ow:typeof self<"u"?self:typeof window<"u"?window:{});var wh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uS,ec,cS,Oh,a0,dS,hS,fS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof wh=="object"&&wh];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=n(this);function a(h,_){if(_)e:{var E=i;h=h.split(".");for(var P=0;P<h.length-1;P++){var te=h[P];if(!(te in E))break e;E=E[te]}h=h[h.length-1],P=E[h],_=_(P),_!=P&&_!=null&&e(E,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var E=0,P=!1,te={next:function(){if(!P&&E<h.length){var ue=E++;return{value:_(ue,h[ue]),done:!1}}return P=!0,{done:!0,value:void 0}}};return te[Symbol.iterator]=function(){return te},te}a("Array.prototype.values",function(h){return h||function(){return l(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function f(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function m(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function y(h,_,E){return h.call.apply(h.bind,arguments)}function v(h,_,E){if(!h)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var te=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(te,P),h.apply(_,te)}}return function(){return h.apply(_,arguments)}}function b(h,_,E){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,b.apply(null,arguments)}function x(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var P=E.slice();return P.push.apply(P,arguments),h.apply(this,P)}}function C(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(P,te,ue){for(var be=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)be[Qe-2]=arguments[Qe];return _.prototype[te].apply(P,be)}}function M(h){const _=h.length;if(0<_){const E=Array(_);for(let P=0;P<_;P++)E[P]=h[P];return E}return[]}function k(h,_){for(let E=1;E<arguments.length;E++){const P=arguments[E];if(f(P)){const te=h.length||0,ue=P.length||0;h.length=te+ue;for(let be=0;be<ue;be++)h[te+be]=P[be]}else h.push(P)}}class L{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function H(h){return/^[\s\xa0]*$/.test(h)}function F(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function j(h){return j[" "](h),h}j[" "]=function(){};var Q=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function K(h,_,E){for(const P in h)_.call(E,h[P],P,h)}function S(h,_){for(const E in h)_.call(void 0,h[E],E,h)}function T(h){const _={};for(const E in h)_[E]=h[E];return _}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(h,_){let E,P;for(let te=1;te<arguments.length;te++){P=arguments[te];for(E in P)h[E]=P[E];for(let ue=0;ue<N.length;ue++)E=N[ue],Object.prototype.hasOwnProperty.call(P,E)&&(h[E]=P[E])}}function U(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function B(h){d.setTimeout(()=>{throw h},0)}function R(){var h=J;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class D{constructor(){this.h=this.g=null}add(_,E){const P=G.get();P.set(_,E),this.h?this.h.next=P:this.g=P,this.h=P}}var G=new L(()=>new O,h=>h.reset());class O{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,ne=!1,J=new D,z=()=>{const h=d.Promise.resolve(void 0);Y=()=>{h.then(W)}};var W=()=>{for(var h;h=R();){try{h.h.call(h.g)}catch(E){B(E)}var _=G;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}ne=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function X(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}X.prototype.h=function(){this.defaultPrevented=!0};var se=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};d.addEventListener("test",E,_),d.removeEventListener("test",E,_)}catch{}return h}();function fe(h,_){if(X.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,P=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(Q){e:{try{j(_.nodeName);var te=!0;break e}catch{}te=!1}te||(_=null)}}else E=="mouseover"?_=h.fromElement:E=="mouseout"&&(_=h.toElement);this.relatedTarget=_,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ce[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&fe.aa.h.call(this)}}C(fe,X);var ce={2:"touch",3:"pen",4:"mouse"};fe.prototype.h=function(){fe.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ve="closure_listenable_"+(1e6*Math.random()|0),_e=0;function Ae(h,_,E,P,te){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!P,this.ha=te,this.key=++_e,this.da=this.fa=!1}function Ce(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function et(h){this.src=h,this.g={},this.h=0}et.prototype.add=function(h,_,E,P,te){var ue=h.toString();h=this.g[ue],h||(h=this.g[ue]=[],this.h++);var be=ze(h,_,P,te);return-1<be?(_=h[be],E||(_.fa=!1)):(_=new Ae(_,this.src,ue,!!P,te),_.fa=E,h.push(_)),_};function rt(h,_){var E=_.type;if(E in h.g){var P=h.g[E],te=Array.prototype.indexOf.call(P,_,void 0),ue;(ue=0<=te)&&Array.prototype.splice.call(P,te,1),ue&&(Ce(_),h.g[E].length==0&&(delete h.g[E],h.h--))}}function ze(h,_,E,P){for(var te=0;te<h.length;++te){var ue=h[te];if(!ue.da&&ue.listener==_&&ue.capture==!!E&&ue.ha==P)return te}return-1}var tt="closure_lm_"+(1e6*Math.random()|0),it={};function zt(h,_,E,P,te){if(Array.isArray(_)){for(var ue=0;ue<_.length;ue++)zt(h,_[ue],E,P,te);return null}return E=Nr(E),h&&h[ve]?h.K(_,E,m(P)?!!P.capture:!1,te):Le(h,_,E,!1,P,te)}function Le(h,_,E,P,te,ue){if(!_)throw Error("Invalid event type");var be=m(te)?!!te.capture:!!te,Qe=An(h);if(Qe||(h[tt]=Qe=new et(h)),E=Qe.add(_,E,P,be,ue),E.proxy)return E;if(P=Ee(),E.proxy=P,P.src=h,P.listener=E,h.addEventListener)se||(te=be),te===void 0&&(te=!1),h.addEventListener(_.toString(),P,te);else if(h.attachEvent)h.attachEvent(Gt(_.toString()),P);else if(h.addListener&&h.removeListener)h.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ee(){function h(E){return _.call(h.src,h.listener,E)}const _=Fn;return h}function At(h,_,E,P,te){if(Array.isArray(_))for(var ue=0;ue<_.length;ue++)At(h,_[ue],E,P,te);else P=m(P)?!!P.capture:!!P,E=Nr(E),h&&h[ve]?(h=h.i,_=String(_).toString(),_ in h.g&&(ue=h.g[_],E=ze(ue,E,P,te),-1<E&&(Ce(ue[E]),Array.prototype.splice.call(ue,E,1),ue.length==0&&(delete h.g[_],h.h--)))):h&&(h=An(h))&&(_=h.g[_.toString()],h=-1,_&&(h=ze(_,E,P,te)),(E=-1<h?_[h]:null)&&vn(E))}function vn(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[ve])rt(_.i,h);else{var E=h.type,P=h.proxy;_.removeEventListener?_.removeEventListener(E,P,h.capture):_.detachEvent?_.detachEvent(Gt(E),P):_.addListener&&_.removeListener&&_.removeListener(P),(E=An(_))?(rt(E,h),E.h==0&&(E.src=null,_[tt]=null)):Ce(h)}}}function Gt(h){return h in it?it[h]:it[h]="on"+h}function Fn(h,_){if(h.da)h=!0;else{_=new fe(_,this);var E=h.listener,P=h.ha||h.src;h.fa&&vn(h),h=E.call(P,_)}return h}function An(h){return h=h[tt],h instanceof et?h:null}var Rn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nr(h){return typeof h=="function"?h:(h[Rn]||(h[Rn]=function(_){return h.handleEvent(_)}),h[Rn])}function at(){re.call(this),this.i=new et(this),this.M=this,this.F=null}C(at,re),at.prototype[ve]=!0,at.prototype.removeEventListener=function(h,_,E,P){At(this,h,_,E,P)};function Fe(h,_){var E,P=h.F;if(P)for(E=[];P;P=P.F)E.push(P);if(h=h.M,P=_.type||_,typeof _=="string")_=new X(_,h);else if(_ instanceof X)_.target=_.target||h;else{var te=_;_=new X(P,h),V(_,te)}if(te=!0,E)for(var ue=E.length-1;0<=ue;ue--){var be=_.g=E[ue];te=Lt(be,P,!0,_)&&te}if(be=_.g=h,te=Lt(be,P,!0,_)&&te,te=Lt(be,P,!1,_)&&te,E)for(ue=0;ue<E.length;ue++)be=_.g=E[ue],te=Lt(be,P,!1,_)&&te}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var E=h.g[_],P=0;P<E.length;P++)Ce(E[P]);delete h.g[_],h.h--}}this.F=null},at.prototype.K=function(h,_,E,P){return this.i.add(String(h),_,!1,E,P)},at.prototype.L=function(h,_,E,P){return this.i.add(String(h),_,!0,E,P)};function Lt(h,_,E,P){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var te=!0,ue=0;ue<_.length;++ue){var be=_[ue];if(be&&!be.da&&be.capture==E){var Qe=be.listener,Kt=be.ha||be.src;be.fa&&rt(h.i,be),te=Qe.call(Kt,P)!==!1&&te}}return te&&!P.defaultPrevented}function Et(h,_,E){if(typeof h=="function")E&&(h=b(h,E));else if(h&&typeof h.handleEvent=="function")h=b(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(h,_||0)}function Fr(h){h.g=Et(()=>{h.g=null,h.i&&(h.i=!1,Fr(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Ut extends re{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Fr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jt(h){re.call(this),this.h=h,this.g={}}C(Jt,re);var Cn=[];function Nn(h){K(h.g,function(_,E){this.g.hasOwnProperty(E)&&vn(_)},h),h.g={}}Jt.prototype.N=function(){Jt.aa.N.call(this),Nn(this)},Jt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var en=d.JSON.stringify,un=d.JSON.parse,In=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function xi(){}xi.prototype.h=null;function Ti(h){return h.h||(h.h=h.i())}function Ir(){}var Gn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cr(){X.call(this,"d")}C(cr,X);function Yn(){X.call(this,"c")}C(Yn,X);var dr={},la=null;function Gr(){return la=la||new at}dr.La="serverreachability";function ss(h){X.call(this,dr.La,h)}C(ss,X);function Yr(h){const _=Gr();Fe(_,new ss(_))}dr.STAT_EVENT="statevent";function ao(h,_){X.call(this,dr.STAT_EVENT,h),this.stat=_}C(ao,X);function pt(h){const _=Gr();Fe(_,new ao(_,h))}dr.Ma="timingevent";function Mt(h,_){X.call(this,dr.Ma,h),this.size=_}C(Mt,X);function Rt(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},_)}function Vn(){this.g=!0}Vn.prototype.xa=function(){this.g=!1};function ua(h,_,E,P,te,ue){h.info(function(){if(h.g)if(ue)for(var be="",Qe=ue.split("&"),Kt=0;Kt<Qe.length;Kt++){var We=Qe[Kt].split("=");if(1<We.length){var nn=We[0];We=We[1];var Xt=nn.split("_");be=2<=Xt.length&&Xt[1]=="type"?be+(nn+"="+We+"&"):be+(nn+"=redacted&")}}else be=null;else be=ue;return"XMLHTTP REQ ("+P+") [attempt "+te+"]: "+_+`
`+E+`
`+be})}function jl(h,_,E,P,te,ue,be){h.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+te+"]: "+_+`
`+E+`
`+ue+" "+be})}function Kr(h,_,E,P){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Si(h,E)+(P?" "+P:"")})}function oo(h,_){h.info(function(){return"TIMEOUT: "+_})}Vn.prototype.info=function(){};function Si(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var P=E[h];if(!(2>P.length)){var te=P[1];if(Array.isArray(te)&&!(1>te.length)){var ue=te[0];if(ue!="noop"&&ue!="stop"&&ue!="close")for(var be=1;be<te.length;be++)te[be]=""}}}}return en(E)}catch{return _}}var Xr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fr;function gr(){}C(gr,xi),gr.prototype.g=function(){return new XMLHttpRequest},gr.prototype.i=function(){return{}},fr=new gr;function cn(h,_,E,P){this.j=h,this.i=_,this.l=E,this.R=P||1,this.U=new Jt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new wt}function wt(){this.i=null,this.g="",this.h=!1}var ca={},as={};function Kn(h,_,E){h.L=1,h.v=ga(Xn(_)),h.m=E,h.P=!0,kr(h,null)}function kr(h,_){h.F=Date.now(),Ai(h),h.A=Xn(h.v);var E=h.A,P=h.R;Array.isArray(P)||(P=[String(P)]),Yl(E.i,"t",P),h.C=0,E=h.j.J,h.h=new wt,h.g=id(h.j,E?_:null,!h.m),0<h.O&&(h.M=new Ut(b(h.Y,h,h.g),h.O)),_=h.U,E=h.g,P=h.ca;var te="readystatechange";Array.isArray(te)||(te&&(Cn[0]=te.toString()),te=Cn);for(var ue=0;ue<te.length;ue++){var be=zt(E,te[ue],P||_.handleEvent,!1,_.h||_);if(!be)break;_.g[be.key]=be}_=h.H?T(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Yr(),ua(h.i,h.u,h.A,h.l,h.R,h.m)}cn.prototype.ca=function(h){h=h.target;const _=this.M;_&&_r(h)==3?_.j():this.Y(h)},cn.prototype.Y=function(h){try{if(h==this.g)e:{const Xt=_r(this.g);var _=this.g.Ba();const Mi=this.g.Z();if(!(3>Xt)&&(Xt!=3||this.g&&(this.h.h||this.g.oa()||Qc(this.g)))){this.J||Xt!=4||_==7||(_==8||0>=Mi?Yr(3):Yr(2)),Qr(this);var E=this.g.Z();this.X=E;t:if(da(this)){var P=Qc(this.g);h="";var te=P.length,ue=_r(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yt(this),mr(this);var be="";break t}this.h.i=new d.TextDecoder}for(_=0;_<te;_++)this.h.h=!0,h+=this.h.i.decode(P[_],{stream:!(ue&&_==te-1)});P.length=0,this.h.g+=h,this.C=0,be=this.h.g}else be=this.g.oa();if(this.o=E==200,jl(this.i,this.u,this.A,this.l,this.R,Xt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,Kt=this.g;if((Qe=Kt.g?Kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Qe)){var We=Qe;break t}}We=null}if(E=We)Kr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wr(this,E);else{this.o=!1,this.s=3,pt(12),Yt(this),mr(this);break e}}if(this.P){E=!0;let dn;for(;!this.J&&this.C<be.length;)if(dn=lo(this,be),dn==as){Xt==4&&(this.s=4,pt(14),E=!1),Kr(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==ca){this.s=4,pt(15),Kr(this.i,this.l,be,"[Invalid Chunk]"),E=!1;break}else Kr(this.i,this.l,dn,null),Wr(this,dn);if(da(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xt!=4||be.length!=0||this.h.h||(this.s=1,pt(16),E=!1),this.o=this.o&&E,!E)Kr(this.i,this.l,be,"[Invalid Chunked Response]"),Yt(this),mr(this);else if(0<be.length&&!this.W){this.W=!0;var nn=this.j;nn.g==this&&nn.ba&&!nn.M&&(nn.j.info("Great, no buffering proxy detected. Bytes received: "+be.length),wa(nn),nn.M=!0,pt(11))}}else Kr(this.i,this.l,be,null),Wr(this,be);Xt==4&&Yt(this),this.o&&!this.J&&(Xt==4?td(this.j,this):(this.o=!1,Ai(this)))}else lg(this.g),E==400&&0<be.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),Yt(this),mr(this)}}}catch{}finally{}};function da(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function lo(h,_){var E=h.C,P=_.indexOf(`
`,E);return P==-1?as:(E=Number(_.substring(E,P)),isNaN(E)?ca:(P+=1,P+E>_.length?as:(_=_.slice(P,P+E),h.C=P+E,_)))}cn.prototype.cancel=function(){this.J=!0,Yt(this)};function Ai(h){h.S=Date.now()+h.I,uo(h,h.I)}function uo(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Rt(b(h.ba,h),_)}function Qr(h){h.B&&(d.clearTimeout(h.B),h.B=null)}cn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(oo(this.i,this.A),this.L!=2&&(Yr(),pt(17)),Yt(this),this.s=2,mr(this)):uo(this,this.S-h)};function mr(h){h.j.G==0||h.J||td(h.j,h)}function Yt(h){Qr(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,Nn(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Wr(h,_){try{var E=h.j;if(E.G!=0&&(E.g==h||Hl(E.h,h))){if(!h.K&&Hl(E.h,h)&&E.G==3){try{var P=E.Da.g.parse(_)}catch{P=null}if(Array.isArray(P)&&P.length==3){var te=P;if(te[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)Eo(E),_o(E);else break e;Zl(E),pt(18)}}else E.za=te[1],0<E.za-E.T&&37500>te[2]&&E.F&&E.v==0&&!E.C&&(E.C=Rt(b(E.Za,E),6e3));if(1>=Zr(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Di(E,11)}else if((h.K||E.g==h)&&Eo(E),!H(_))for(te=E.Da.g.parse(_),_=0;_<te.length;_++){let We=te[_];if(E.T=We[0],We=We[1],E.G==2)if(We[0]=="c"){E.K=We[1],E.ia=We[2];const nn=We[3];nn!=null&&(E.la=nn,E.j.info("VER="+E.la));const Xt=We[4];Xt!=null&&(E.Aa=Xt,E.j.info("SVER="+E.Aa));const Mi=We[5];Mi!=null&&typeof Mi=="number"&&0<Mi&&(P=1.5*Mi,E.L=P,E.j.info("backChannelRequestTimeoutMs_="+P)),P=E;const dn=h.g;if(dn){const si=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(si){var ue=P.h;ue.g||si.indexOf("spdy")==-1&&si.indexOf("quic")==-1&&si.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(ho(ue,ue.h),ue.h=null))}if(P.D){const eu=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;eu&&(P.ya=eu,dt(P.I,P.D,eu))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),P=E;var be=h;if(P.qa=rd(P,P.J?P.ia:null,P.W),be.K){kn(P.h,be);var Qe=be,Kt=P.L;Kt&&(Qe.I=Kt),Qe.B&&(Qr(Qe),Ai(Qe)),P.g=be}else Jc(P);0<E.i.length&&bo(E)}else We[0]!="stop"&&We[0]!="close"||Di(E,7);else E.G==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?Di(E,7):Ql(E):We[0]!="noop"&&E.l&&E.l.ta(We),E.v=0)}}Yr(4)}catch{}}var co=class{constructor(h,_){this.g=h,this.map=_}};function Dr(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function os(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Zr(h){return h.h?1:h.g?h.g.size:0}function Hl(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function ho(h,_){h.g?h.g.add(_):h.h=_}function kn(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Dr.prototype.cancel=function(){if(this.i=ql(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ql(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return M(h.i)}function ig(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(f(h)){for(var _=[],E=h.length,P=0;P<E;P++)_.push(h[P]);return _}_=[],E=0;for(P in h)_[E++]=h[P];return _}function fo(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(f(h)||typeof h=="string"){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const P in h)_[E++]=P;return _}}}function $l(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(f(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var E=fo(h),P=ig(h),te=P.length,ue=0;ue<te;ue++)_.call(void 0,P[ue],E&&E[ue],h)}var ha=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sg(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var P=h[E].indexOf("="),te=null;if(0<=P){var ue=h[E].substring(0,P);te=h[E].substring(P+1)}else ue=h[E];_(ue,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function Bt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Bt){this.h=h.h,fa(this,h.j),this.o=h.o,this.g=h.g,ls(this,h.s),this.l=h.l;var _=h.i,E=new Ci;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),Ri(this,E),this.m=h.m}else h&&(_=String(h).match(ha))?(this.h=!1,fa(this,_[1]||"",!0),this.o=pr(_[2]||""),this.g=pr(_[3]||"",!0),ls(this,_[4]),this.l=pr(_[5]||"",!0),Ri(this,_[6]||"",!0),this.m=pr(_[7]||"")):(this.h=!1,this.i=new Ci(null,this.h))}Bt.prototype.toString=function(){var h=[],_=this.j;_&&h.push(ma(_,Fl,!0),":");var E=this.g;return(E||_=="file")&&(h.push("//"),(_=this.o)&&h.push(ma(_,Fl,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(ma(E,E.charAt(0)=="/"?ag:Gl,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",ma(E,go)),h.join("")};function Xn(h){return new Bt(h)}function fa(h,_,E){h.j=E?pr(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function ls(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function Ri(h,_,E){_ instanceof Ci?(h.i=_,Kc(h.i,h.h)):(E||(_=ma(_,og)),h.i=new Ci(_,h.h))}function dt(h,_,E){h.i.set(_,E)}function ga(h){return dt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function pr(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ma(h,_,E){return typeof h=="string"?(h=encodeURI(h).replace(_,Yc),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Yc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Fl=/[#\/\?@]/g,Gl=/[#\?:]/g,ag=/[#\?]/g,og=/[#\?@]/g,go=/#/g;function Ci(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function yr(h){h.g||(h.g=new Map,h.h=0,h.i&&sg(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}t=Ci.prototype,t.add=function(h,_){yr(this),this.i=null,h=Jr(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this};function Ni(h,_){yr(h),_=Jr(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Ii(h,_){return yr(h),_=Jr(h,_),h.g.has(_)}t.forEach=function(h,_){yr(this),this.g.forEach(function(E,P){E.forEach(function(te){h.call(_,te,P,this)},this)},this)},t.na=function(){yr(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let P=0;P<_.length;P++){const te=h[P];for(let ue=0;ue<te.length;ue++)E.push(_[P])}return E},t.V=function(h){yr(this);let _=[];if(typeof h=="string")Ii(this,h)&&(_=_.concat(this.g.get(Jr(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},t.set=function(h,_){return yr(this),this.i=null,h=Jr(this,h),Ii(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},t.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function Yl(h,_,E){Ni(h,_),0<E.length&&(h.i=null,h.g.set(Jr(h,_),M(E)),h.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var P=_[E];const ue=encodeURIComponent(String(P)),be=this.V(P);for(P=0;P<be.length;P++){var te=ue;be[P]!==""&&(te+="="+encodeURIComponent(String(be[P]))),h.push(te)}}return this.i=h.join("&")};function Jr(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Kc(h,_){_&&!h.j&&(yr(h),h.i=null,h.g.forEach(function(E,P){var te=P.toLowerCase();P!=te&&(Ni(this,P),Yl(this,te,E))},h)),h.j=_}function pa(h,_){const E=new Vn;if(d.Image){const P=new Image;P.onload=x(vr,E,"TestLoadImage: loaded",!0,_,P),P.onerror=x(vr,E,"TestLoadImage: error",!1,_,P),P.onabort=x(vr,E,"TestLoadImage: abort",!1,_,P),P.ontimeout=x(vr,E,"TestLoadImage: timeout",!1,_,P),d.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=h}else _(!1)}function Mr(h,_){const E=new Vn,P=new AbortController,te=setTimeout(()=>{P.abort(),vr(E,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:P.signal}).then(ue=>{clearTimeout(te),ue.ok?vr(E,"TestPingServer: ok",!0,_):vr(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(te),vr(E,"TestPingServer: error",!1,_)})}function vr(h,_,E,P,te){try{te&&(te.onload=null,te.onerror=null,te.onabort=null,te.ontimeout=null),P(E)}catch{}}function ya(){this.g=new In}function ei(h,_,E){const P=E||"";try{$l(h,function(te,ue){let be=te;m(te)&&(be=en(te)),_.push(P+ue+"="+encodeURIComponent(be))})}catch(te){throw _.push(P+"type="+encodeURIComponent("_badmap")),te}}function us(h){this.l=h.Ub||null,this.j=h.eb||!1}C(us,xi),us.prototype.g=function(){return new ki(this.l,this.j)},us.prototype.i=function(h){return function(){return h}}({});function ki(h,_){at.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(ki,at),t=ki.prototype,t.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,ni(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ti(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Kl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Kl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?ti(this):ni(this),this.readyState==3&&Kl(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,ti(this))},t.Qa=function(h){this.g&&(this.response=h,ti(this))},t.ga=function(){this.g&&ti(this)};function ti(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ni(h)}t.setRequestHeader=function(h,_){this.u.append(h,_)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=_.next();return h.join(`\r
`)};function ni(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Xl(h){let _="";return K(h,function(E,P){_+=P,_+=":",_+=E,_+=`\r
`}),_}function tn(h,_,E){e:{for(P in E){var P=!1;break e}P=!0}P||(E=Xl(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):dt(h,_,E))}function ot(h){at.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(ot,at);var mo=/^https?$/i,va=["POST","PUT"];t=ot.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,_,E,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fr.g(),this.v=this.o?Ti(this.o):Ti(fr),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ue){Xc(this,ue);return}if(h=E||"",E=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var te in P)E.set(te,P[te]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const ue of P.keys())E.set(ue,P.get(ue));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(E.keys()).find(ue=>ue.toLowerCase()=="content-type"),te=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(va,_,void 0))||P||te||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,be]of E)this.g.setRequestHeader(ue,be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_a(this),this.u=!0,this.g.send(h),this.u=!1}catch(ue){Xc(this,ue)}};function Xc(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,po(h),ri(h)}function po(h){h.A||(h.A=!0,Fe(h,"complete"),Fe(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Fe(this,"complete"),Fe(this,"abort"),ri(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ri(this,!0)),ot.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?yo(this):this.bb())},t.bb=function(){yo(this)};function yo(h){if(h.h&&typeof u<"u"&&(!h.v[1]||_r(h)!=4||h.Z()!=2)){if(h.u&&_r(h)==4)Et(h.Ea,0,h);else if(Fe(h,"readystatechange"),_r(h)==4){h.h=!1;try{const be=h.Z();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var P;if(P=be===0){var te=String(h.D).match(ha)[1]||null;!te&&d.self&&d.self.location&&(te=d.self.location.protocol.slice(0,-1)),P=!mo.test(te?te.toLowerCase():"")}E=P}if(E)Fe(h,"complete"),Fe(h,"success");else{h.m=6;try{var ue=2<_r(h)?h.g.statusText:""}catch{ue=""}h.l=ue+" ["+h.Z()+"]",po(h)}}finally{ri(h)}}}}function ri(h,_){if(h.g){_a(h);const E=h.g,P=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Fe(h,"ready");try{E.onreadystatechange=P}catch{}}}function _a(h){h.I&&(d.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function _r(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<_r(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),un(_)}};function Qc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function lg(h){const _={};h=(h.g&&2<=_r(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<h.length;P++){if(H(h[P]))continue;var E=U(h[P]);const te=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ue=_[te]||[];_[te]=ue,ue.push(E)}S(_,function(P){return P.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ba(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function vo(h){this.Aa=0,this.i=[],this.j=new Vn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ba("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ba("baseRetryDelayMs",5e3,h),this.cb=ba("retryDelaySeedMs",1e4,h),this.Wa=ba("forwardChannelMaxRetries",2,h),this.wa=ba("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Dr(h&&h.concurrentRequestLimit),this.Da=new ya,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=vo.prototype,t.la=8,t.G=1,t.connect=function(h,_,E,P){pt(0),this.W=h,this.H=_||{},E&&P!==void 0&&(this.H.OSID=E,this.H.OAID=P),this.F=this.X,this.I=rd(this,null,this.W),bo(this)};function Ql(h){if(Wc(h),h.G==3){var _=h.U++,E=Xn(h.I);if(dt(E,"SID",h.K),dt(E,"RID",_),dt(E,"TYPE","terminate"),Ea(h,E),_=new cn(h,h.j,_),_.L=2,_.v=ga(Xn(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&d.Image&&(new Image().src=_.v,E=!0),E||(_.g=id(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Ai(_)}nd(h)}function _o(h){h.g&&(wa(h),h.g.cancel(),h.g=null)}function Wc(h){_o(h),h.u&&(d.clearTimeout(h.u),h.u=null),Eo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function bo(h){if(!os(h.h)&&!h.s){h.s=!0;var _=h.Ga;Y||z(),ne||(Y(),ne=!0),J.add(_,h),h.B=0}}function ug(h,_){return Zr(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Rt(b(h.Ga,h,_),Jl(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const te=new cn(this,this.j,h);let ue=this.o;if(this.S&&(ue?(ue=T(ue),V(ue,this.S)):ue=this.S),this.m!==null||this.O||(te.H=ue,ue=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var P=this.i[E];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(_+=P,4096<_){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=Zc(this,te,_),E=Xn(this.I),dt(E,"RID",h),dt(E,"CVER",22),this.D&&dt(E,"X-HTTP-Session-Id",this.D),Ea(this,E),ue&&(this.O?_="headers="+encodeURIComponent(String(Xl(ue)))+"&"+_:this.m&&tn(E,this.m,ue)),ho(this.h,te),this.Ua&&dt(E,"TYPE","init"),this.P?(dt(E,"$req",_),dt(E,"SID","null"),te.T=!0,Kn(te,E,null)):Kn(te,E,_),this.G=2}}else this.G==3&&(h?Wl(this,h):this.i.length==0||os(this.h)||Wl(this))};function Wl(h,_){var E;_?E=_.l:E=h.U++;const P=Xn(h.I);dt(P,"SID",h.K),dt(P,"RID",E),dt(P,"AID",h.T),Ea(h,P),h.m&&h.o&&tn(P,h.m,h.o),E=new cn(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=Zc(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),ho(h.h,E),Kn(E,P,_)}function Ea(h,_){h.H&&K(h.H,function(E,P){dt(_,P,E)}),h.l&&$l({},function(E,P){dt(_,P,E)})}function Zc(h,_,E){E=Math.min(h.i.length,E);var P=h.l?b(h.l.Na,h.l,h):null;e:{var te=h.i;let ue=-1;for(;;){const be=["count="+E];ue==-1?0<E?(ue=te[0].g,be.push("ofs="+ue)):ue=0:be.push("ofs="+ue);let Qe=!0;for(let Kt=0;Kt<E;Kt++){let We=te[Kt].g;const nn=te[Kt].map;if(We-=ue,0>We)ue=Math.max(0,te[Kt].g-100),Qe=!1;else try{ei(nn,be,"req"+We+"_")}catch{P&&P(nn)}}if(Qe){P=be.join("&");break e}}}return h=h.i.splice(0,E),_.D=h,P}function Jc(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;Y||z(),ne||(Y(),ne=!0),J.add(_,h),h.v=0}}function Zl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Rt(b(h.Fa,h),Jl(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,ed(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Rt(b(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),_o(this),ed(this))};function wa(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function ed(h){h.g=new cn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=Xn(h.qa);dt(_,"RID","rpc"),dt(_,"SID",h.K),dt(_,"AID",h.T),dt(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&dt(_,"TO",h.ja),dt(_,"TYPE","xmlhttp"),Ea(h,_),h.m&&h.o&&tn(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=ga(Xn(_)),E.m=null,E.P=!0,kr(E,h)}t.Za=function(){this.C!=null&&(this.C=null,_o(this),Zl(this),pt(19))};function Eo(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function td(h,_){var E=null;if(h.g==_){Eo(h),wa(h),h.g=null;var P=2}else if(Hl(h.h,_))E=_.D,kn(h.h,_),P=1;else return;if(h.G!=0){if(_.o)if(P==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var te=h.B;P=Gr(),Fe(P,new Mt(P,E)),bo(h)}else Jc(h);else if(te=_.s,te==3||te==0&&0<_.X||!(P==1&&ug(h,_)||P==2&&Zl(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),te){case 1:Di(h,5);break;case 4:Di(h,10);break;case 3:Di(h,6);break;default:Di(h,2)}}}function Jl(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function Di(h,_){if(h.j.info("Error code "+_),_==2){var E=b(h.fb,h),P=h.Xa;const te=!P;P=new Bt(P||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||fa(P,"https"),ga(P),te?pa(P.toString(),E):Mr(P.toString(),E)}else pt(2);h.G=0,h.l&&h.l.sa(_),nd(h),Wc(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function nd(h){if(h.G=0,h.ka=[],h.l){const _=ql(h.h);(_.length!=0||h.i.length!=0)&&(k(h.ka,_),k(h.ka,h.i),h.h.i.length=0,M(h.i),h.i.length=0),h.l.ra()}}function rd(h,_,E){var P=E instanceof Bt?Xn(E):new Bt(E);if(P.g!="")_&&(P.g=_+"."+P.g),ls(P,P.s);else{var te=d.location;P=te.protocol,_=_?_+"."+te.hostname:te.hostname,te=+te.port;var ue=new Bt(null);P&&fa(ue,P),_&&(ue.g=_),te&&ls(ue,te),E&&(ue.l=E),P=ue}return E=h.D,_=h.ya,E&&_&&dt(P,E,_),dt(P,"VER",h.la),Ea(h,P),P}function id(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new ot(new us({eb:E})):new ot(h.pa),_.Ha(h.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function sd(){}t=sd.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function wo(){}wo.prototype.g=function(h,_){return new Dn(h,_)};function Dn(h,_){at.call(this),this.g=new vo(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!H(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!H(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new ii(this)}C(Dn,at),Dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){Ql(this.g)},Dn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=en(h),h=E);_.i.push(new co(_.Ya++,h)),_.G==3&&bo(_)},Dn.prototype.N=function(){this.g.l=null,delete this.j,Ql(this.g),delete this.g,Dn.aa.N.call(this)};function ad(h){cr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}C(ad,cr);function od(){Yn.call(this),this.status=1}C(od,Yn);function ii(h){this.g=h}C(ii,sd),ii.prototype.ua=function(){Fe(this.g,"a")},ii.prototype.ta=function(h){Fe(this.g,new ad(h))},ii.prototype.sa=function(h){Fe(this.g,new od)},ii.prototype.ra=function(){Fe(this.g,"b")},wo.prototype.createWebChannel=wo.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,fS=function(){return new wo},hS=function(){return Gr()},dS=dr,a0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xr.NO_ERROR=0,Xr.TIMEOUT=8,Xr.HTTP_ERROR=6,Oh=Xr,hr.COMPLETE="complete",cS=hr,Ir.EventType=Gn,Gn.OPEN="a",Gn.CLOSE="b",Gn.ERROR="c",Gn.MESSAGE="d",at.prototype.listen=at.prototype.K,ec=Ir,ot.prototype.listenOnce=ot.prototype.L,ot.prototype.getLastError=ot.prototype.Ka,ot.prototype.getLastErrorCode=ot.prototype.Ba,ot.prototype.getStatus=ot.prototype.Z,ot.prototype.getResponseJson=ot.prototype.Oa,ot.prototype.getResponseText=ot.prototype.oa,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Ha,uS=ot}).apply(typeof wh<"u"?wh:typeof self<"u"?self:typeof window<"u"?window:{});const Pw="@firebase/firestore",Vw="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wn.UNAUTHENTICATED=new wn(null),wn.GOOGLE_CREDENTIALS=new wn("google-credentials-uid"),wn.FIRST_PARTY=new wn("first-party-uid"),wn.MOCK_USER=new wn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ol="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=new Z0("@firebase/firestore");function sl(){return Qa.logLevel}function we(t,...e){if(Qa.logLevel<=Ke.DEBUG){const n=e.map(ty);Qa.debug(`Firestore (${Ol}): ${t}`,...n)}}function ns(t,...e){if(Qa.logLevel<=Ke.ERROR){const n=e.map(ty);Qa.error(`Firestore (${Ol}): ${t}`,...n)}}function Sl(t,...e){if(Qa.logLevel<=Ke.WARN){const n=e.map(ty);Qa.warn(`Firestore (${Ol}): ${t}`,...n)}}function ty(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,gS(t,i,n)}function gS(t,e,n){let i=`FIRESTORE (${Ol}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw ns(i),new Error(i)}function lt(t,e,n,i){let a="Unexpected state";typeof n=="string"?a=n:i=n,t||gS(e,a,i)}function Ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends wi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(wn.UNAUTHENTICATED))}shutdown(){}}class CO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class NO{constructor(e){this.t=e,this.currentUser=wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){lt(this.o===void 0,42304);let i=this.i;const a=f=>this.i!==i?(i=this.i,n(f)):Promise.resolve();let l=new Ks;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ks,e.enqueueRetryable(()=>a(this.currentUser))};const u=()=>{const f=l;e.enqueueRetryable(async()=>{await f.promise,await a(this.currentUser)})},d=f=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(f=>d(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ks)}},0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(lt(typeof i.accessToken=="string",31837,{l:i}),new mS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string",2055,{h:e}),new wn(e)}}class IO{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=wn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class kO{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new IO(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(wn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DO{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ir(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){lt(this.o===void 0,3512);const i=l=>{l.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,we("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const a=l=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new zw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(lt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new zw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=MO(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<n&&(i+=e.charAt(a[l]%62))}return i}}function He(t,e){return t<e?-1:t>e?1:0}function o0(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),a=e.codePointAt(n);if(i!==a){if(i<128&&a<128)return He(i,a);{const l=pS(),u=OO(l.encode(Lw(t,n)),l.encode(Lw(e,n)));return u!==0?u:He(i,a)}}n+=i>65535?2:1}return He(t.length,e.length)}function Lw(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function OO(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return He(t[n],e[n]);return He(t.length,e.length)}function Al(t,e,n){return t.length===e.length&&t.every((i,a)=>n(i,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw=-62135596800,Bw=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Bw);return new _t(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new xe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Uw)throw new xe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Bw}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Uw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new _t(0,0))}static max(){return new Pe(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="__name__";class fi{constructor(e,n,i){n===void 0?n=0:n>e.length&&Me(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Me(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return fi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof fi?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let a=0;a<i;a++){const l=fi.compareSegments(e.get(a),n.get(a));if(l!==0)return l}return He(e.length,n.length)}static compareSegments(e,n){const i=fi.isNumericId(e),a=fi.isNumericId(n);return i&&!a?-1:!i&&a?1:i&&a?fi.extractNumericId(e).compare(fi.extractNumericId(n)):o0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ys.fromString(e.substring(4,e.length-2))}}class vt extends fi{construct(e,n,i){return new vt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new xe(pe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(a=>a.length>0))}return new vt(n)}static emptyPath(){return new vt([])}}const PO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pn extends fi{construct(e,n,i){return new pn(e,n,i)}static isValidIdentifier(e){return PO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jw}static keyField(){return new pn([jw])}static fromServerFormat(e){const n=[];let i="",a=0;const l=()=>{if(i.length===0)throw new xe(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let u=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new xe(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[a+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new xe(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,a+=2}else d==="`"?(u=!u,a++):d!=="."||u?(i+=d,a++):(l(),a++)}if(l(),u)throw new xe(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pn(n)}static emptyPath(){return new pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(vt.fromString(e))}static fromName(e){return new Ne(vt.fromString(e).popFirst(5))}static empty(){return new Ne(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return vt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new vt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=-1;function VO(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,a=Pe.fromTimestamp(i===1e9?new _t(n+1,0):new _t(n,i));return new Zs(a,Ne.empty(),e)}function zO(t){return new Zs(t.readTime,t.key,Ec)}class Zs{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Zs(Pe.min(),Ne.empty(),Ec)}static max(){return new Zs(Pe.max(),Ne.empty(),Ec)}}function LO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ne.comparator(t.documentKey,e.documentKey),n!==0?n:He(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(t){if(t.code!==pe.FAILED_PRECONDITION||t.message!==UO)throw t;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ye((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(n,l).next(i,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ye?n:ye.resolve(n)}catch(n){return ye.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ye.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ye.reject(n)}static resolve(e){return new ye((n,i)=>{n(e)})}static reject(e){return new ye((n,i)=>{i(e)})}static waitFor(e){return new ye((n,i)=>{let a=0,l=0,u=!1;e.forEach(d=>{++a,d.next(()=>{++l,u&&l===a&&n()},f=>i(f))}),u=!0,l===a&&n()})}static or(e){let n=ye.resolve(!1);for(const i of e)n=n.next(a=>a?ye.resolve(a):i());return n}static forEach(e,n){const i=[];return e.forEach((a,l)=>{i.push(n.call(this,a,l))}),this.waitFor(i)}static mapArray(e,n){return new ye((i,a)=>{const l=e.length,u=new Array(l);let d=0;for(let f=0;f<l;f++){const m=f;n(e[m]).next(y=>{u[m]=y,++d,d===l&&i(u)},y=>a(y))}})}static doWhile(e,n){return new ye((i,a)=>{const l=()=>{e()===!0?n().next(()=>{l()},a):i()};l()})}}function jO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Vl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>n.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}zf.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny=-1;function Lf(t){return t==null}function sf(t){return t===0&&1/t==-1/0}function HO(t){return typeof t=="number"&&Number.isInteger(t)&&!sf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="";function qO(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Hw(e)),e=$O(t.get(n),e);return Hw(e)}function $O(t,e){let n=e;const i=t.length;for(let a=0;a<i;a++){const l=t.charAt(a);switch(l){case"\0":n+="";break;case vS:n+="";break;default:n+=l}}return n}function Hw(t){return t+vS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ia(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _S(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n){this.comparator=e,this.root=n||mn.EMPTY}insert(e,n){return new St(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return n+i.left.size;a<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xh(this.root,e,this.comparator,!1)}getReverseIterator(){return new xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xh(this.root,e,this.comparator,!0)}}class xh{constructor(e,n,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?i(e.key,n):1,n&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,n,i,a,l){this.key=e,this.value=n,this.color=i??mn.RED,this.left=a??mn.EMPTY,this.right=l??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,a,l){return new mn(e??this.key,n??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,n,i),null):l===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return mn.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,n,i,a,l){return this}insert(e,n,i){return new mn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $w(this.data.getIterator())}getIteratorFrom(e){return new $w(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Zt(this.comparator);return n.data=e,n}}class $w{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new sr([])}unionWith(e){let n=new Zt(pn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new sr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Al(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new bS("Invalid base64 string: "+l):l}}(e);return new yn(n)}static fromUint8Array(e){const n=function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l}(e);return new yn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const FO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Js(t){if(lt(!!t,39018),typeof t=="string"){let e=0;const n=FO.exec(t);if(lt(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Vt(t.seconds),nanos:Vt(t.nanos)}}function Vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ea(t){return typeof t=="string"?yn.fromBase64String(t):yn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="server_timestamp",wS="__type__",xS="__previous_value__",TS="__local_write_time__";function ry(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[wS])===null||n===void 0?void 0:n.stringValue)===ES}function Uf(t){const e=t.mapValue.fields[xS];return ry(e)?Uf(e):e}function wc(t){const e=Js(t.mapValue.fields[TS].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e,n,i,a,l,u,d,f,m,y){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=y}}const af="(default)";class xc{constructor(e,n){this.projectId=e,this.database=n||af}static empty(){return new xc("","")}get isDefaultDatabase(){return this.database===af}isEqual(e){return e instanceof xc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="__type__",YO="__max__",Th={mapValue:{}},AS="__vector__",of="value";function ta(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ry(t)?4:XO(t)?9007199254740991:KO(t)?10:11:Me(28295,{value:t})}function bi(t,e){if(t===e)return!0;const n=ta(t);if(n!==ta(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return wc(t).isEqual(wc(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=Js(a.timestampValue),d=Js(l.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,l){return ea(a.bytesValue).isEqual(ea(l.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,l){return Vt(a.geoPointValue.latitude)===Vt(l.geoPointValue.latitude)&&Vt(a.geoPointValue.longitude)===Vt(l.geoPointValue.longitude)}(t,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return Vt(a.integerValue)===Vt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=Vt(a.doubleValue),d=Vt(l.doubleValue);return u===d?sf(u)===sf(d):isNaN(u)&&isNaN(d)}return!1}(t,e);case 9:return Al(t.arrayValue.values||[],e.arrayValue.values||[],bi);case 10:case 11:return function(a,l){const u=a.mapValue.fields||{},d=l.mapValue.fields||{};if(qw(u)!==qw(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!bi(u[f],d[f])))return!1;return!0}(t,e);default:return Me(52216,{left:t})}}function Tc(t,e){return(t.values||[]).find(n=>bi(n,e))!==void 0}function Rl(t,e){if(t===e)return 0;const n=ta(t),i=ta(e);if(n!==i)return He(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return He(t.booleanValue,e.booleanValue);case 2:return function(l,u){const d=Vt(l.integerValue||l.doubleValue),f=Vt(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(t,e);case 3:return Fw(t.timestampValue,e.timestampValue);case 4:return Fw(wc(t),wc(e));case 5:return o0(t.stringValue,e.stringValue);case 6:return function(l,u){const d=ea(l),f=ea(u);return d.compareTo(f)}(t.bytesValue,e.bytesValue);case 7:return function(l,u){const d=l.split("/"),f=u.split("/");for(let m=0;m<d.length&&m<f.length;m++){const y=He(d[m],f[m]);if(y!==0)return y}return He(d.length,f.length)}(t.referenceValue,e.referenceValue);case 8:return function(l,u){const d=He(Vt(l.latitude),Vt(u.latitude));return d!==0?d:He(Vt(l.longitude),Vt(u.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Gw(t.arrayValue,e.arrayValue);case 10:return function(l,u){var d,f,m,y;const v=l.fields||{},b=u.fields||{},x=(d=v[of])===null||d===void 0?void 0:d.arrayValue,C=(f=b[of])===null||f===void 0?void 0:f.arrayValue,M=He(((m=x?.values)===null||m===void 0?void 0:m.length)||0,((y=C?.values)===null||y===void 0?void 0:y.length)||0);return M!==0?M:Gw(x,C)}(t.mapValue,e.mapValue);case 11:return function(l,u){if(l===Th.mapValue&&u===Th.mapValue)return 0;if(l===Th.mapValue)return 1;if(u===Th.mapValue)return-1;const d=l.fields||{},f=Object.keys(d),m=u.fields||{},y=Object.keys(m);f.sort(),y.sort();for(let v=0;v<f.length&&v<y.length;++v){const b=o0(f[v],y[v]);if(b!==0)return b;const x=Rl(d[f[v]],m[y[v]]);if(x!==0)return x}return He(f.length,y.length)}(t.mapValue,e.mapValue);default:throw Me(23264,{Pe:n})}}function Fw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return He(t,e);const n=Js(t),i=Js(e),a=He(n.seconds,i.seconds);return a!==0?a:He(n.nanos,i.nanos)}function Gw(t,e){const n=t.values||[],i=e.values||[];for(let a=0;a<n.length&&a<i.length;++a){const l=Rl(n[a],i[a]);if(l)return l}return He(n.length,i.length)}function Cl(t){return l0(t)}function l0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Js(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ea(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",a=!0;for(const l of n.values||[])a?a=!1:i+=",",i+=l0(l);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const u of i)l?l=!1:a+=",",a+=`${u}:${l0(n.fields[u])}`;return a+"}"}(t.mapValue):Me(61005,{value:t})}function Ph(t){switch(ta(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uf(t);return e?16+Ph(e):16;case 5:return 2*t.stringValue.length;case 6:return ea(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,l)=>a+Ph(l),0)}(t.arrayValue);case 10:case 11:return function(i){let a=0;return ia(i.fields,(l,u)=>{a+=l.length+Ph(u)}),a}(t.mapValue);default:throw Me(13486,{value:t})}}function Yw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function u0(t){return!!t&&"integerValue"in t}function iy(t){return!!t&&"arrayValue"in t}function Kw(t){return!!t&&"nullValue"in t}function Xw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vh(t){return!!t&&"mapValue"in t}function KO(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[SS])===null||n===void 0?void 0:n.stringValue)===AS}function ic(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ia(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=ic(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ic(t.arrayValue.values[n]);return e}return Object.assign({},t)}function XO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===YO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.value=e}static empty(){return new Hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Vh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ic(n)}setAll(e){let n=pn.emptyPath(),i={},a=[];e.forEach((u,d)=>{if(!n.isImmediateParentOf(d)){const f=this.getFieldsMap(n);this.applyChanges(f,i,a),i={},a=[],n=d.popLast()}u?i[d.lastSegment()]=ic(u):a.push(d.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,i,a)}delete(e){const n=this.field(e.popLast());Vh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=n.mapValue.fields[e.get(i)];Vh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,i){ia(n,(a,l)=>e[a]=l);for(const a of i)delete e[a]}clone(){return new Hn(ic(this.value))}}function RS(t){const e=[];return ia(t.fields,(n,i)=>{const a=new pn([n]);if(Vh(i)){const l=RS(i.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)}),new sr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,n,i,a,l,u,d){this.key=e,this.documentType=n,this.version=i,this.readTime=a,this.createTime=l,this.data=u,this.documentState=d}static newInvalidDocument(e){return new xn(e,0,Pe.min(),Pe.min(),Pe.min(),Hn.empty(),0)}static newFoundDocument(e,n,i,a){return new xn(e,1,n,Pe.min(),i,a,0)}static newNoDocument(e,n){return new xn(e,2,n,Pe.min(),Pe.min(),Hn.empty(),0)}static newUnknownDocument(e,n){return new xn(e,3,n,Pe.min(),Pe.min(),Hn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,n){this.position=e,this.inclusive=n}}function Qw(t,e,n){let i=0;for(let a=0;a<t.position.length;a++){const l=e[a],u=t.position[a];if(l.field.isKeyField()?i=Ne.comparator(Ne.fromName(u.referenceValue),n.key):i=Rl(u,n.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ww(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,n="asc"){this.field=e,this.dir=n}}function QO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{}class Ft extends CS{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new ZO(e,n,i):n==="array-contains"?new t6(e,i):n==="in"?new n6(e,i):n==="not-in"?new r6(e,i):n==="array-contains-any"?new i6(e,i):new Ft(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new JO(e,i):new e6(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Rl(n,this.value)):n!==null&&ta(this.value)===ta(n)&&this.matchesComparison(Rl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jr extends CS{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new jr(e,n)}matches(e){return NS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function NS(t){return t.op==="and"}function IS(t){return WO(t)&&NS(t)}function WO(t){for(const e of t.filters)if(e instanceof jr)return!1;return!0}function c0(t){if(t instanceof Ft)return t.field.canonicalString()+t.op.toString()+Cl(t.value);if(IS(t))return t.filters.map(e=>c0(e)).join(",");{const e=t.filters.map(n=>c0(n)).join(",");return`${t.op}(${e})`}}function kS(t,e){return t instanceof Ft?function(i,a){return a instanceof Ft&&i.op===a.op&&i.field.isEqual(a.field)&&bi(i.value,a.value)}(t,e):t instanceof jr?function(i,a){return a instanceof jr&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((l,u,d)=>l&&kS(u,a.filters[d]),!0):!1}(t,e):void Me(19439)}function DS(t){return t instanceof Ft?function(n){return`${n.field.canonicalString()} ${n.op} ${Cl(n.value)}`}(t):t instanceof jr?function(n){return n.op.toString()+" {"+n.getFilters().map(DS).join(" ,")+"}"}(t):"Filter"}class ZO extends Ft{constructor(e,n,i){super(e,n,i),this.key=Ne.fromName(i.referenceValue)}matches(e){const n=Ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class JO extends Ft{constructor(e,n){super(e,"in",n),this.keys=MS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class e6 extends Ft{constructor(e,n){super(e,"not-in",n),this.keys=MS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function MS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Ne.fromName(i.referenceValue))}class t6 extends Ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return iy(n)&&Tc(n.arrayValue,this.value)}}class n6 extends Ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Tc(this.value.arrayValue,n)}}class r6 extends Ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(Tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Tc(this.value.arrayValue,n)}}class i6 extends Ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!iy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Tc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e,n=null,i=[],a=[],l=null,u=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=u,this.endAt=d,this.Ie=null}}function Zw(t,e=null,n=[],i=[],a=null,l=null,u=null){return new s6(t,e,n,i,a,l,u)}function sy(t){const e=Ve(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>c0(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Lf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Cl(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Cl(i)).join(",")),e.Ie=n}return e.Ie}function ay(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!QO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!kS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ww(t.startAt,e.startAt)&&Ww(t.endAt,e.endAt)}function d0(t){return Ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,n=null,i=[],a=[],l=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=u,this.startAt=d,this.endAt=f,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function a6(t,e,n,i,a,l,u,d){return new zl(t,e,n,i,a,l,u,d)}function OS(t){return new zl(t)}function Jw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function PS(t){return t.collectionGroup!==null}function sc(t){const e=Ve(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),n.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Zt(pn.comparator);return u.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(d=d.add(m.field))})}),d})(e).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new Sc(l,i))}),n.has(pn.keyField().canonicalString())||e.Ee.push(new Sc(pn.keyField(),i))}return e.Ee}function pi(t){const e=Ve(t);return e.de||(e.de=o6(e,sc(t))),e.de}function o6(t,e){if(t.limitType==="F")return Zw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new Sc(a.field,l)});const n=t.endAt?new lf(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new lf(t.startAt.position,t.startAt.inclusive):null;return Zw(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function h0(t,e){const n=t.filters.concat([e]);return new zl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function f0(t,e,n){return new zl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bf(t,e){return ay(pi(t),pi(e))&&t.limitType===e.limitType}function VS(t){return`${sy(pi(t))}|lt:${t.limitType}`}function al(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(a=>DS(a)).join(", ")}]`),Lf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(a=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(a)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(a=>Cl(a)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(a=>Cl(a)).join(",")),`Target(${i})`}(pi(t))}; limitType=${t.limitType})`}function jf(t,e){return e.isFoundDocument()&&function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ne.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(t,e)&&function(i,a){for(const l of sc(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(t,e)&&function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0}(t,e)&&function(i,a){return!(i.startAt&&!function(u,d,f){const m=Qw(u,d,f);return u.inclusive?m<=0:m<0}(i.startAt,sc(i),a)||i.endAt&&!function(u,d,f){const m=Qw(u,d,f);return u.inclusive?m>=0:m>0}(i.endAt,sc(i),a))}(t,e)}function l6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function zS(t){return(e,n)=>{let i=!1;for(const a of sc(t)){const l=u6(a,e,n);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function u6(t,e,n){const i=t.field.isKeyField()?Ne.comparator(e.key,n.key):function(l,u,d){const f=u.data.field(l),m=d.data.field(l);return f!==null&&m!==null?Rl(f,m):Me(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[n]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ia(this.inner,(n,i)=>{for(const[a,l]of i)e(a,l)})}isEmpty(){return _S(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6=new St(Ne.comparator);function rs(){return c6}const LS=new St(Ne.comparator);function tc(...t){let e=LS;for(const n of t)e=e.insert(n.key,n);return e}function US(t){let e=LS;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function qa(){return ac()}function BS(){return ac()}function ac(){return new no(t=>t.toString(),(t,e)=>t.isEqual(e))}const d6=new St(Ne.comparator),h6=new Zt(Ne.comparator);function Xe(...t){let e=h6;for(const n of t)e=e.add(n);return e}const f6=new Zt(He);function g6(){return f6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sf(e)?"-0":e}}function jS(t){return{integerValue:""+t}}function m6(t,e){return HO(e)?jS(e):oy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(){this._=void 0}}function p6(t,e,n){return t instanceof uf?function(a,l){const u={fields:{[wS]:{stringValue:ES},[TS]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&ry(l)&&(l=Uf(l)),l&&(u.fields[xS]=l),{mapValue:u}}(n,e):t instanceof Ac?qS(t,e):t instanceof Rc?$S(t,e):function(a,l){const u=HS(a,l),d=e1(u)+e1(a.Re);return u0(u)&&u0(a.Re)?jS(d):oy(a.serializer,d)}(t,e)}function y6(t,e,n){return t instanceof Ac?qS(t,e):t instanceof Rc?$S(t,e):n}function HS(t,e){return t instanceof cf?function(i){return u0(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class uf extends Hf{}class Ac extends Hf{constructor(e){super(),this.elements=e}}function qS(t,e){const n=FS(e);for(const i of t.elements)n.some(a=>bi(a,i))||n.push(i);return{arrayValue:{values:n}}}class Rc extends Hf{constructor(e){super(),this.elements=e}}function $S(t,e){let n=FS(e);for(const i of t.elements)n=n.filter(a=>!bi(a,i));return{arrayValue:{values:n}}}class cf extends Hf{constructor(e,n){super(),this.serializer=e,this.Re=n}}function e1(t){return Vt(t.integerValue||t.doubleValue)}function FS(t){return iy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function v6(t,e){return t.field.isEqual(e.field)&&function(i,a){return i instanceof Ac&&a instanceof Ac||i instanceof Rc&&a instanceof Rc?Al(i.elements,a.elements,bi):i instanceof cf&&a instanceof cf?bi(i.Re,a.Re):i instanceof uf&&a instanceof uf}(t.transform,e.transform)}class _6{constructor(e,n){this.version=e,this.transformResults=n}}class ar{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ar}static exists(e){return new ar(void 0,e)}static updateTime(e){return new ar(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class qf{}function GS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $f(t.key,ar.none()):new zc(t.key,t.data,ar.none());{const n=t.data,i=Hn.empty();let a=new Zt(pn.comparator);for(let l of e.fields)if(!a.has(l)){let u=n.field(l);u===null&&l.length>1&&(l=l.popLast(),u=n.field(l)),u===null?i.delete(l):i.set(l,u),a=a.add(l)}return new sa(t.key,i,new sr(a.toArray()),ar.none())}}function b6(t,e,n){t instanceof zc?function(a,l,u){const d=a.value.clone(),f=n1(a.fieldTransforms,l,u.transformResults);d.setAll(f),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(t,e,n):t instanceof sa?function(a,l,u){if(!zh(a.precondition,l))return void l.convertToUnknownDocument(u.version);const d=n1(a.fieldTransforms,l,u.transformResults),f=l.data;f.setAll(YS(a)),f.setAll(d),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(t,e,n):function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,n)}function oc(t,e,n,i){return t instanceof zc?function(l,u,d,f){if(!zh(l.precondition,u))return d;const m=l.value.clone(),y=r1(l.fieldTransforms,f,u);return m.setAll(y),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null}(t,e,n,i):t instanceof sa?function(l,u,d,f){if(!zh(l.precondition,u))return d;const m=r1(l.fieldTransforms,f,u),y=u.data;return y.setAll(YS(l)),y.setAll(m),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(v=>v.field))}(t,e,n,i):function(l,u,d){return zh(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d}(t,e,n)}function E6(t,e){let n=null;for(const i of t.fieldTransforms){const a=e.data.field(i.field),l=HS(i.transform,a||null);l!=null&&(n===null&&(n=Hn.empty()),n.set(i.field,l))}return n||null}function t1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Al(i,a,(l,u)=>v6(l,u))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class zc extends qf{constructor(e,n,i,a=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class sa extends qf{constructor(e,n,i,a,l=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function YS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function n1(t,e,n){const i=new Map;lt(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let a=0;a<n.length;a++){const l=t[a],u=l.transform,d=e.data.field(l.field);i.set(l.field,y6(u,d,n[a]))}return i}function r1(t,e,n){const i=new Map;for(const a of t){const l=a.transform,u=n.data.field(a.field);i.set(a.field,p6(l,u,e))}return i}class $f extends qf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class w6 extends qf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e,n,i,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&b6(l,e,i[a])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=oc(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=oc(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=BS();return this.mutations.forEach(a=>{const l=e.get(a.key),u=l.overlayedDocument;let d=this.applyToLocalView(u,l.mutatedFields);d=n.has(a.key)?null:d;const f=GS(u,d);f!==null&&i.set(a.key,f),u.isValidDocument()||u.convertToNoDocument(Pe.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Xe())}isEqual(e){return this.batchId===e.batchId&&Al(this.mutations,e.mutations,(n,i)=>t1(n,i))&&Al(this.baseMutations,e.baseMutations,(n,i)=>t1(n,i))}}class ly{constructor(e,n,i,a){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=a}static from(e,n,i){lt(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let a=function(){return d6}();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,i[u].version);return new ly(e,n,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,Je;function A6(t){switch(t){case pe.OK:return Me(64938);case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return Me(15467,{code:t})}}function KS(t){if(t===void 0)return ns("GRPC error has no .code"),pe.UNKNOWN;switch(t){case qt.OK:return pe.OK;case qt.CANCELLED:return pe.CANCELLED;case qt.UNKNOWN:return pe.UNKNOWN;case qt.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case qt.INTERNAL:return pe.INTERNAL;case qt.UNAVAILABLE:return pe.UNAVAILABLE;case qt.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case qt.NOT_FOUND:return pe.NOT_FOUND;case qt.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case qt.ABORTED:return pe.ABORTED;case qt.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case qt.DATA_LOSS:return pe.DATA_LOSS;default:return Me(39323,{code:t})}}(Je=qt||(qt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6=new Ys([4294967295,4294967295],0);function i1(t){const e=pS().encode(t),n=new lS;return n.update(e),new Uint8Array(n.digest())}function s1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ys([n,i],0),new Ys([a,l],0)]}class uy{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new nc(`Invalid padding: ${n}`);if(i<0)throw new nc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new nc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new nc(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Ys.fromNumber(this.pe)}we(e,n,i){let a=e.add(n.multiply(Ys.fromNumber(i)));return a.compare(R6)===1&&(a=new Ys([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=i1(e),[i,a]=s1(n);for(let l=0;l<this.hashCount;l++){const u=this.we(i,a,l);if(!this.be(u))return!1}return!0}static create(e,n,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new uy(l,a,n);return i.forEach(d=>u.insert(d)),u}insert(e){if(this.pe===0)return;const n=i1(e),[i,a]=s1(n);for(let l=0;l<this.hashCount;l++){const u=this.we(i,a,l);this.Se(u)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class nc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n,i,a,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const a=new Map;return a.set(e,Lc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Ff(Pe.min(),a,new St(He),rs(),Xe())}}class Lc{constructor(e,n,i,a,l){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Lc(i,n,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n,i,a){this.De=e,this.removedTargetIds=n,this.key=i,this.ve=a}}class XS{constructor(e,n){this.targetId=e,this.Ce=n}}class QS{constructor(e,n,i=yn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=a}}class a1{constructor(){this.Fe=0,this.Me=o1(),this.xe=yn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Xe(),n=Xe(),i=Xe();return this.Me.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:i=i.add(a);break;default:Me(38017,{changeType:l})}}),new Lc(this.xe,this.Oe,e,n,i)}Qe(){this.Ne=!1,this.Me=o1()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,lt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class C6{constructor(e){this.ze=e,this.je=new Map,this.He=rs(),this.Je=Sh(),this.Ye=Sh(),this.Ze=new St(He)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const i=this.rt(n);switch(e.state){case 0:this.it(n)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(n);break;case 3:this.it(n)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),i.ke(e.resumeToken));break;default:Me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((i,a)=>{this.it(a)&&n(a)})}ot(e){const n=e.targetId,i=e.Ce.count,a=this._t(n);if(a){const l=a.target;if(d0(l))if(i===0){const u=new Ne(l.path);this.tt(n,u,xn.newNoDocument(u,Pe.min()))}else lt(i===1,20013,{expectedCount:i});else{const u=this.ut(n);if(u!==i){const d=this.ct(e),f=d?this.lt(d,e,u):1;if(f!==0){this.st(n);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,m)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=n;let u,d;try{u=ea(i).toUint8Array()}catch(f){if(f instanceof bS)return Sl("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new uy(u,a,l)}catch(f){return Sl(f instanceof nc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.pe===0?null:d}lt(e,n,i){return n.Ce.count===i-this.Tt(e,n.targetId)?0:2}Tt(e,n){const i=this.ze.getRemoteKeysForTarget(n);let a=0;return i.forEach(l=>{const u=this.ze.Pt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.tt(n,l,null),a++)}),a}It(e){const n=new Map;this.je.forEach((l,u)=>{const d=this._t(u);if(d){if(l.current&&d0(d.target)){const f=new Ne(d.target.path);this.Et(f).has(u)||this.dt(u,f)||this.tt(u,f,xn.newNoDocument(f,e))}l.Le&&(n.set(u,l.qe()),l.Qe())}});let i=Xe();this.Ye.forEach((l,u)=>{let d=!0;u.forEachWhile(f=>{const m=this._t(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(l))}),this.He.forEach((l,u)=>u.setReadTime(e));const a=new Ff(e,n,this.Ze,this.He,i);return this.He=rs(),this.Je=Sh(),this.Ye=Sh(),this.Ze=new St(He),a}et(e,n){if(!this.it(e))return;const i=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,i),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,i){if(!this.it(e))return;const a=this.rt(e);this.dt(e,n)?a.$e(n,1):a.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),i&&(this.He=this.He.insert(n,i))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new a1,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Zt(He),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Zt(He),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new a1),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Sh(){return new St(Ne.comparator)}function o1(){return new St(Ne.comparator)}const N6={asc:"ASCENDING",desc:"DESCENDING"},I6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},k6={and:"AND",or:"OR"};class D6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function g0(t,e){return t.useProto3Json||Lf(e)?e:{value:e}}function df(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function M6(t,e){return df(t,e.toTimestamp())}function yi(t){return lt(!!t,49232),Pe.fromTimestamp(function(n){const i=Js(n);return new _t(i.seconds,i.nanos)}(t))}function cy(t,e){return m0(t,e).canonicalString()}function m0(t,e){const n=function(a){return new vt(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ZS(t){const e=vt.fromString(t);return lt(rA(e),10190,{key:e.toString()}),e}function p0(t,e){return cy(t.databaseId,e.path)}function Ip(t,e){const n=ZS(e);if(n.get(1)!==t.databaseId.projectId)throw new xe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new xe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ne(eA(n))}function JS(t,e){return cy(t.databaseId,e)}function O6(t){const e=ZS(t);return e.length===4?vt.emptyPath():eA(e)}function y0(t){return new vt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function eA(t){return lt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function l1(t,e,n){return{name:p0(t,e),fields:n.value.mapValue.fields}}function P6(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Me(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(m,y){return m.useProto3Json?(lt(y===void 0||typeof y=="string",58123),yn.fromBase64String(y||"")):(lt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),yn.fromUint8Array(y||new Uint8Array))}(t,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(m){const y=m.code===void 0?pe.UNKNOWN:KS(m.code);return new xe(y,m.message||"")}(u);n=new QS(i,a,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Ip(t,i.document.name),l=yi(i.document.updateTime),u=i.document.createTime?yi(i.document.createTime):Pe.min(),d=new Hn({mapValue:{fields:i.document.fields}}),f=xn.newFoundDocument(a,l,u,d),m=i.targetIds||[],y=i.removedTargetIds||[];n=new Lh(m,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Ip(t,i.document),l=i.readTime?yi(i.readTime):Pe.min(),u=xn.newNoDocument(a,l),d=i.removedTargetIds||[];n=new Lh([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Ip(t,i.document),l=i.removedTargetIds||[];n=new Lh([],l,a,null)}else{if(!("filter"in e))return Me(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,u=new S6(a,l),d=i.targetId;n=new XS(d,u)}}return n}function V6(t,e){let n;if(e instanceof zc)n={update:l1(t,e.key,e.value)};else if(e instanceof $f)n={delete:p0(t,e.key)};else if(e instanceof sa)n={update:l1(t,e.key,e.data),updateMask:F6(e.fieldMask)};else{if(!(e instanceof w6))return Me(16599,{ft:e.type});n={verify:p0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(l,u){const d=u.transform;if(d instanceof uf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ac)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Rc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof cf)return{fieldPath:u.field.canonicalString(),increment:d.Re};throw Me(20930,{transform:u.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:M6(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Me(27497)}(t,e.precondition)),n}function z6(t,e){return t&&t.length>0?(lt(e!==void 0,14353),t.map(n=>function(a,l){let u=a.updateTime?yi(a.updateTime):yi(l);return u.isEqual(Pe.min())&&(u=yi(l)),new _6(u,a.transformResults||[])}(n,e))):[]}function L6(t,e){return{documents:[JS(t,e.path)]}}function U6(t,e){const n={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=JS(t,a);const l=function(m){if(m.length!==0)return nA(jr.create(m,"and"))}(e.filters);l&&(n.structuredQuery.where=l);const u=function(m){if(m.length!==0)return m.map(y=>function(b){return{field:ol(b.field),direction:H6(b.dir)}}(y))}(e.orderBy);u&&(n.structuredQuery.orderBy=u);const d=g0(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{gt:n,parent:a}}function B6(t){let e=O6(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let a=null;if(i>0){lt(i===1,65062);const y=n.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];n.where&&(l=function(v){const b=tA(v);return b instanceof jr&&IS(b)?b.getFilters():[b]}(n.where));let u=[];n.orderBy&&(u=function(v){return v.map(b=>function(C){return new Sc(ll(C.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(b))}(n.orderBy));let d=null;n.limit&&(d=function(v){let b;return b=typeof v=="object"?v.value:v,Lf(b)?null:b}(n.limit));let f=null;n.startAt&&(f=function(v){const b=!!v.before,x=v.values||[];return new lf(x,b)}(n.startAt));let m=null;return n.endAt&&(m=function(v){const b=!v.before,x=v.values||[];return new lf(x,b)}(n.endAt)),a6(e,a,u,l,d,"F",f,m)}function j6(t,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:a})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ll(n.unaryFilter.field);return Ft.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=ll(n.unaryFilter.field);return Ft.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ll(n.unaryFilter.field);return Ft.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ll(n.unaryFilter.field);return Ft.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ft.create(ll(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return jr.create(n.compositeFilter.filters.map(i=>tA(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Me(1026)}}(n.compositeFilter.op))}(t):Me(30097,{filter:t})}function H6(t){return N6[t]}function q6(t){return I6[t]}function $6(t){return k6[t]}function ol(t){return{fieldPath:t.canonicalString()}}function ll(t){return pn.fromServerFormat(t.fieldPath)}function nA(t){return t instanceof Ft?function(n){if(n.op==="=="){if(Xw(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NAN"}};if(Kw(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Xw(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NOT_NAN"}};if(Kw(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ol(n.field),op:q6(n.op),value:n.value}}}(t):t instanceof jr?function(n){const i=n.getFilters().map(a=>nA(a));return i.length===1?i[0]:{compositeFilter:{op:$6(n.op),filters:i}}}(t):Me(54877,{filter:t})}function F6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function rA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n,i,a,l=Pe.min(),u=Pe.min(),d=yn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Hs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e){this.wt=e}}function Y6(t){const e=B6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?f0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(){this.Cn=new X6}addToCollectionParentIndex(e,n){return this.Cn.add(n),ye.resolve()}getCollectionParents(e,n){return ye.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ye.resolve()}deleteFieldIndex(e,n){return ye.resolve()}deleteAllFieldIndexes(e){return ye.resolve()}createTargetIndexes(e,n){return ye.resolve()}getDocumentsMatchingTarget(e,n){return ye.resolve(null)}getIndexType(e,n){return ye.resolve(0)}getFieldIndexes(e,n){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}getMinOffset(e,n){return ye.resolve(Zs.min())}getMinOffsetFromCollectionGroup(e,n){return ye.resolve(Zs.min())}updateCollectionGroup(e,n,i){return ye.resolve()}updateIndexEntries(e,n){return ye.resolve()}}class X6{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n]||new Zt(vt.comparator),l=!a.has(i);return this.index[n]=a.add(i),l}has(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Zt(vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},iA=41943040;class Bn{static withCacheSize(e){return new Bn(e,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(iA,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Nl(0)}static lr(){return new Nl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="LruGarbageCollector",Q6=1048576;function d1([t,e],[n,i]){const a=He(t,n);return a===0?He(e,i):a}class W6{constructor(e){this.Er=e,this.buffer=new Zt(d1),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();d1(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Z6{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){we(c1,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Vl(n)?we(c1,"Ignoring IndexedDB error during garbage collection: ",n):await Pl(n)}await this.mr(3e5)})}}class J6{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return ye.resolve(zf.le);const i=new W6(n);return this.gr.forEachTarget(e,a=>i.Rr(a.sequenceNumber)).next(()=>this.gr.yr(e,a=>i.Rr(a))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.gr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(u1)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),u1):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let i,a,l,u,d,f,m;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,u=Date.now(),this.nthSequenceNumber(e,a))).next(v=>(i=v,d=Date.now(),this.removeTargets(e,i,n))).next(v=>(l=v,f=Date.now(),this.removeOrphanedDocuments(e,i))).next(v=>(m=Date.now(),sl()<=Ke.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${a} in `+(d-u)+`ms
	Removed ${l} targets in `+(f-d)+`ms
	Removed ${v} documents in `+(m-f)+`ms
Total Duration: ${m-y}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v})))}}function e5(t,e){return new J6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(){this.changes=new no(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ye.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e,n,i,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(i!==null&&oc(i.mutation,a,sr.empty(),_t.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Xe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Xe()){const a=qa();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,i).next(l=>{let u=tc();return l.forEach((d,f)=>{u=u.insert(d,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,n){const i=qa();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Xe()))}populateOverlays(e,n,i){const a=[];return i.forEach(l=>{n.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((u,d)=>{n.set(u,d)})})}computeViews(e,n,i,a){let l=rs();const u=ac(),d=function(){return ac()}();return n.forEach((f,m)=>{const y=i.get(m.key);a.has(m.key)&&(y===void 0||y.mutation instanceof sa)?l=l.insert(m.key,m):y!==void 0?(u.set(m.key,y.mutation.getFieldMask()),oc(y.mutation,m,y.mutation.getFieldMask(),_t.now())):u.set(m.key,sr.empty())}),this.recalculateAndSaveOverlays(e,l).next(f=>(f.forEach((m,y)=>u.set(m,y)),n.forEach((m,y)=>{var v;return d.set(m,new n5(y,(v=u.get(m))!==null&&v!==void 0?v:null))}),d))}recalculateAndSaveOverlays(e,n){const i=ac();let a=new St((u,d)=>u-d),l=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(u=>{for(const d of u)d.keys().forEach(f=>{const m=n.get(f);if(m===null)return;let y=i.get(f)||sr.empty();y=d.applyToLocalView(m,y),i.set(f,y);const v=(a.get(d.batchId)||Xe()).add(f);a=a.insert(d.batchId,v)})}).next(()=>{const u=[],d=a.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,y=f.value,v=BS();y.forEach(b=>{if(!l.has(b)){const x=GS(n.get(b),i.get(b));x!==null&&v.set(b,x),l=l.add(b)}}),u.push(this.documentOverlayCache.saveOverlays(e,m,v))}return ye.waitFor(u)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,a){return function(u){return Ne.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):PS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,a):this.getDocumentsMatchingCollectionQuery(e,n,i,a)}getNextDocuments(e,n,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,a).next(l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,a-l.size):ye.resolve(qa());let d=Ec,f=l;return u.next(m=>ye.forEach(m,(y,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),l.get(y)?ye.resolve():this.remoteDocumentCache.getEntry(e,y).next(b=>{f=f.insert(y,b)}))).next(()=>this.populateOverlays(e,m,l)).next(()=>this.computeViews(e,f,m,Xe())).next(y=>({batchId:d,changes:US(y)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ne(n)).next(i=>{let a=tc();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,i,a){const l=n.collectionGroup;let u=tc();return this.indexManager.getCollectionParents(e,l).next(d=>ye.forEach(d,f=>{const m=function(v,b){return new zl(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,f.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,i,a).next(y=>{y.forEach((v,b)=>{u=u.insert(v,b)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,n,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,l,a))).next(u=>{l.forEach((f,m)=>{const y=m.getKey();u.get(y)===null&&(u=u.insert(y,xn.newInvalidDocument(y)))});let d=tc();return u.forEach((f,m)=>{const y=l.get(f);y!==void 0&&oc(y.mutation,m,sr.empty(),_t.now()),jf(n,m)&&(d=d.insert(f,m))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return ye.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:yi(a.createTime)}}(n)),ye.resolve()}getNamedQuery(e,n){return ye.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(a){return{name:a.name,query:Y6(a.bundledQuery),readTime:yi(a.readTime)}}(n)),ye.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(){this.overlays=new St(Ne.comparator),this.Qr=new Map}getOverlay(e,n){return ye.resolve(this.overlays.get(n))}getOverlays(e,n){const i=qa();return ye.forEach(n,a=>this.getOverlay(e,a).next(l=>{l!==null&&i.set(a,l)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((a,l)=>{this.St(e,n,l)}),ye.resolve()}removeOverlaysForBatchId(e,n,i){const a=this.Qr.get(i);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(i)),ye.resolve()}getOverlaysForCollection(e,n,i){const a=qa(),l=n.length+1,u=new Ne(n.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===l&&f.largestBatchId>i&&a.set(f.getKey(),f)}return ye.resolve(a)}getOverlaysForCollectionGroup(e,n,i,a){let l=new St((m,y)=>m-y);const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>i){let y=l.get(m.largestBatchId);y===null&&(y=qa(),l=l.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const d=qa(),f=l.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,y)=>d.set(m,y)),!(d.size()>=a)););return ye.resolve(d)}St(e,n,i){const a=this.overlays.get(i.key);if(a!==null){const u=this.Qr.get(a.largestBatchId).delete(i.key);this.Qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new T6(n,i));let l=this.Qr.get(n);l===void 0&&(l=Xe(),this.Qr.set(n,l)),this.Qr.set(n,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return ye.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ye.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(){this.$r=new Zt(on.Ur),this.Kr=new Zt(on.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const i=new on(e,n);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.zr(new on(e,n))}jr(e,n){e.forEach(i=>this.removeReference(i,n))}Hr(e){const n=new Ne(new vt([])),i=new on(n,e),a=new on(n,e+1),l=[];return this.Kr.forEachInRange([i,a],u=>{this.zr(u),l.push(u.key)}),l}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Ne(new vt([])),i=new on(n,e),a=new on(n,e+1);let l=Xe();return this.Kr.forEachInRange([i,a],u=>{l=l.add(u.key)}),l}containsKey(e){const n=new on(e,0),i=this.$r.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class on{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Ne.comparator(e.key,n.key)||He(e.Zr,n.Zr)}static Wr(e,n){return He(e.Zr,n.Zr)||Ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Zt(on.Ur)}checkEmpty(e){return ye.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,a){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new x6(l,n,i,a);this.mutationQueue.push(u);for(const d of a)this.Xr=this.Xr.add(new on(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ye.resolve(u)}lookupMutationBatch(e,n){return ye.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,a=this.ti(i),l=a<0?0:a;return ye.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(this.mutationQueue.length===0?ny:this.nr-1)}getAllMutationBatches(e){return ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new on(n,0),a=new on(n,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([i,a],u=>{const d=this.ei(u.Zr);l.push(d)}),ye.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Zt(He);return n.forEach(a=>{const l=new on(a,0),u=new on(a,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,u],d=>{i=i.add(d.Zr)})}),ye.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,a=i.length+1;let l=i;Ne.isDocumentKey(l)||(l=l.child(""));const u=new on(new Ne(l),0);let d=new Zt(He);return this.Xr.forEachWhile(f=>{const m=f.key.path;return!!i.isPrefixOf(m)&&(m.length===a&&(d=d.add(f.Zr)),!0)},u),ye.resolve(this.ni(d))}ni(e){const n=[];return e.forEach(i=>{const a=this.ei(i);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){lt(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return ye.forEach(n.mutations,a=>{const l=new on(a.key,n.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Xr=i})}sr(e){}containsKey(e,n){const i=new on(n,0),a=this.Xr.firstAfterOrEqual(i);return ye.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ye.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(e){this.ii=e,this.docs=function(){return new St(Ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,a=this.docs.get(i),l=a?a.size:0,u=this.ii(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ye.resolve(i?i.document.mutableCopy():xn.newInvalidDocument(n))}getEntries(e,n){let i=rs();return n.forEach(a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():xn.newInvalidDocument(a))}),ye.resolve(i)}getDocumentsMatchingQuery(e,n,i,a){let l=rs();const u=n.path,d=new Ne(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:y}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||LO(zO(y),i)<=0||(a.has(y.key)||jf(n,y))&&(l=l.insert(y.key,y.mutableCopy()))}return ye.resolve(l)}getAllFromCollectionGroup(e,n,i,a){Me(9500)}si(e,n){return ye.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new u5(this)}getSize(e){return ye.resolve(this.size)}}class u5 extends t5{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?n.push(this.Br.addEntry(e,a)):this.Br.removeEntry(i)}),ye.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e){this.persistence=e,this.oi=new no(n=>sy(n),ay),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this._i=0,this.ai=new dy,this.targetCount=0,this.ui=Nl.cr()}forEachTarget(e,n){return this.oi.forEach((i,a)=>n(a)),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this._i&&(this._i=n),ye.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Nl(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,ye.resolve()}updateTargetData(e,n){return this.Tr(n),ye.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,n,i){let a=0;const l=[];return this.oi.forEach((u,d)=>{d.sequenceNumber<=n&&i.get(d.targetId)===null&&(this.oi.delete(u),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),ye.waitFor(l).next(()=>a)}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,n){const i=this.oi.get(n)||null;return ye.resolve(i)}addMatchingKeys(e,n,i){return this.ai.Gr(n,i),ye.resolve()}removeMatchingKeys(e,n,i){this.ai.jr(n,i);const a=this.persistence.referenceDelegate,l=[];return a&&n.forEach(u=>{l.push(a.markPotentiallyOrphaned(e,u))}),ye.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),ye.resolve()}getMatchingKeysForTargetId(e,n){const i=this.ai.Yr(n);return ye.resolve(i)}containsKey(e,n){return ye.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e,n){this.ci={},this.overlays={},this.li=new zf(0),this.hi=!1,this.hi=!0,this.Pi=new a5,this.referenceDelegate=e(this),this.Ti=new c5(this),this.indexManager=new K6,this.remoteDocumentCache=function(a){return new l5(a)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new G6(n),this.Ei=new i5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new s5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ci[e.toKey()];return i||(i=new o5(n,this.referenceDelegate),this.ci[e.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,i){we("MemoryPersistence","Starting transaction:",e);const a=new d5(this.li.next());return this.referenceDelegate.di(),i(a).next(l=>this.referenceDelegate.Ai(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ri(e,n){return ye.or(Object.values(this.ci).map(i=>()=>i.containsKey(e,n)))}}class d5 extends BO{constructor(e){super(),this.currentSequenceNumber=e}}class hy{constructor(e){this.persistence=e,this.Vi=new dy,this.mi=null}static fi(e){return new hy(e)}get gi(){if(this.mi)return this.mi;throw Me(60996)}addReference(e,n,i){return this.Vi.addReference(i,n),this.gi.delete(i.toString()),ye.resolve()}removeReference(e,n,i){return this.Vi.removeReference(i,n),this.gi.add(i.toString()),ye.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),ye.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(a=>this.gi.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(l=>this.gi.add(l.toString()))}).next(()=>i.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.gi,i=>{const a=Ne.fromPath(i);return this.pi(e,a).next(l=>{l||n.removeEntry(a,Pe.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(i=>{i?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return ye.or([()=>ye.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class hf{constructor(e,n){this.persistence=e,this.yi=new no(i=>qO(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=e5(this,n)}static fi(e,n){return new hf(e,n)}di(){}Ai(e){return ye.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(a=>i+a))}br(e){let n=0;return this.yr(e,i=>{n++}).next(()=>n)}yr(e,n){return ye.forEach(this.yi,(i,a)=>this.Dr(e,i,a).next(l=>l?ye.resolve():n(a)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.si(e,u=>this.Dr(e,u,n).next(d=>{d||(i++,l.removeEntry(u,Pe.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),ye.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.yi.set(i,e.currentSequenceNumber),ye.resolve()}removeReference(e,n,i){return this.yi.set(i,e.currentSequenceNumber),ye.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),ye.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ph(e.data.value)),n}Dr(e,n,i){return ye.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.yi.get(n);return ye.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e,n,i,a){this.targetId=e,this.fromCache=n,this.ds=i,this.As=a}static Rs(e,n){let i=Xe(),a=Xe();for(const l of n.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new fy(e,n.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return o3()?8:jO(Sn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,i,a){const l={result:null};return this.ws(e,n).next(u=>{l.result=u}).next(()=>{if(!l.result)return this.bs(e,n,a,i).next(u=>{l.result=u})}).next(()=>{if(l.result)return;const u=new h5;return this.Ss(e,n,u).next(d=>{if(l.result=d,this.fs)return this.Ds(e,n,u,d.size)})}).next(()=>l.result)}Ds(e,n,i,a){return i.documentReadCount<this.gs?(sl()<=Ke.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",al(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ye.resolve()):(sl()<=Ke.DEBUG&&we("QueryEngine","Query:",al(n),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ps*a?(sl()<=Ke.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",al(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pi(n))):ye.resolve())}ws(e,n){if(Jw(n))return ye.resolve(null);let i=pi(n);return this.indexManager.getIndexType(e,i).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=f0(n,null,"F"),i=pi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const u=Xe(...l);return this.ys.getDocuments(e,u).next(d=>this.indexManager.getMinOffset(e,i).next(f=>{const m=this.vs(n,d);return this.Cs(n,m,u,f.readTime)?this.ws(e,f0(n,null,"F")):this.Fs(e,m,n,f)}))})))}bs(e,n,i,a){return Jw(n)||a.isEqual(Pe.min())?ye.resolve(null):this.ys.getDocuments(e,i).next(l=>{const u=this.vs(n,l);return this.Cs(n,u,i,a)?ye.resolve(null):(sl()<=Ke.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),al(n)),this.Fs(e,u,n,VO(a,Ec)).next(d=>d))})}vs(e,n){let i=new Zt(zS(e));return n.forEach((a,l)=>{jf(e,l)&&(i=i.add(l))}),i}Cs(e,n,i,a){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,n,i){return sl()<=Ke.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",al(n)),this.ys.getDocumentsMatchingQuery(e,n,Zs.min(),i)}Fs(e,n,i,a){return this.ys.getDocumentsMatchingQuery(e,i,a).next(l=>(n.forEach(u=>{l=l.insert(u.key,u)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="LocalStore",g5=3e8;class m5{constructor(e,n,i,a){this.persistence=e,this.Ms=n,this.serializer=a,this.xs=new St(He),this.Os=new no(l=>sy(l),ay),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(i)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new r5(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function p5(t,e,n,i){return new m5(t,e,n,i)}async function aA(t,e){const n=Ve(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let a;return n.mutationQueue.getAllMutationBatches(i).next(l=>(a=l,n.Ls(e),n.mutationQueue.getAllMutationBatches(i))).next(l=>{const u=[],d=[];let f=Xe();for(const m of a){u.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}for(const m of l){d.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}return n.localDocuments.getDocuments(i,f).next(m=>({ks:m,removedBatchIds:u,addedBatchIds:d}))})})}function y5(t,e){const n=Ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),l=n.Bs.newChangeBuffer({trackRemovals:!0});return function(d,f,m,y){const v=m.batch,b=v.keys();let x=ye.resolve();return b.forEach(C=>{x=x.next(()=>y.getEntry(f,C)).next(M=>{const k=m.docVersions.get(C);lt(k!==null,48541),M.version.compareTo(k)<0&&(v.applyToRemoteDocument(M,m),M.isValidDocument()&&(M.setReadTime(m.commitVersion),y.addEntry(M)))})}),x.next(()=>d.mutationQueue.removeMutationBatch(f,v))}(n,i,e,l).next(()=>l.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let f=Xe();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f}(e))).next(()=>n.localDocuments.getDocuments(i,a))})}function oA(t){const e=Ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function v5(t,e){const n=Ve(t),i=e.snapshotVersion;let a=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=n.Bs.newChangeBuffer({trackRemovals:!0});a=n.xs;const d=[];e.targetChanges.forEach((y,v)=>{const b=a.get(v);if(!b)return;d.push(n.Ti.removeMatchingKeys(l,y.removedDocuments,v).next(()=>n.Ti.addMatchingKeys(l,y.addedDocuments,v)));let x=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(v)!==null?x=x.withResumeToken(yn.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):y.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(y.resumeToken,i)),a=a.insert(v,x),function(M,k,L){return M.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=g5?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(b,x,y)&&d.push(n.Ti.updateTargetData(l,x))});let f=rs(),m=Xe();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(l,y))}),d.push(_5(l,u,e.documentUpdates).next(y=>{f=y.qs,m=y.Qs})),!i.isEqual(Pe.min())){const y=n.Ti.getLastRemoteSnapshotVersion(l).next(v=>n.Ti.setTargetsMetadata(l,l.currentSequenceNumber,i));d.push(y)}return ye.waitFor(d).next(()=>u.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,f,m)).next(()=>f)}).then(l=>(n.xs=a,l))}function _5(t,e,n){let i=Xe(),a=Xe();return n.forEach(l=>i=i.add(l)),e.getEntries(t,i).next(l=>{let u=rs();return n.forEach((d,f)=>{const m=l.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(a=a.add(d)),f.isNoDocument()&&f.version.isEqual(Pe.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):we(gy,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)}),{qs:u,Qs:a}})}function b5(t,e){const n=Ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=ny),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function E5(t,e){const n=Ve(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return n.Ti.getTargetData(i,e).next(l=>l?(a=l,ye.resolve(a)):n.Ti.allocateTargetId(i).next(u=>(a=new Hs(e,u,"TargetPurposeListen",i.currentSequenceNumber),n.Ti.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=n.xs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.xs=n.xs.insert(i.targetId,i),n.Os.set(e,i.targetId)),i})}async function v0(t,e,n){const i=Ve(t),a=i.xs.get(e),l=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",l,u=>i.persistence.referenceDelegate.removeTarget(u,a))}catch(u){if(!Vl(u))throw u;we(gy,`Failed to update sequence numbers for target ${e}: ${u}`)}i.xs=i.xs.remove(e),i.Os.delete(a.target)}function h1(t,e,n){const i=Ve(t);let a=Pe.min(),l=Xe();return i.persistence.runTransaction("Execute query","readwrite",u=>function(f,m,y){const v=Ve(f),b=v.Os.get(y);return b!==void 0?ye.resolve(v.xs.get(b)):v.Ti.getTargetData(m,y)}(i,u,pi(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(u,d.targetId).next(f=>{l=f})}).next(()=>i.Ms.getDocumentsMatchingQuery(u,e,n?a:Pe.min(),n?l:Xe())).next(d=>(w5(i,l6(e),d),{documents:d,$s:l})))}function w5(t,e,n){let i=t.Ns.get(e)||Pe.min();n.forEach((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),t.Ns.set(e,i)}class f1{constructor(){this.activeTargetIds=g6()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class x5{constructor(){this.xo=new f1,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,i){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new f1,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="ConnectivityMonitor";class m1{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){we(g1,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){we(g1,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ah=null;function _0(){return Ah===null?Ah=function(){return 268435456+Math.round(2147483648*Math.random())}():Ah++,"0x"+Ah.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="RestConnection",S5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class A5{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${i}/databases/${a}`,this.Go=this.databaseId.database===af?`project_id=${i}`:`project_id=${i}&database_id=${a}`}zo(e,n,i,a,l){const u=_0(),d=this.jo(e,n.toUriEncodedString());we(kp,`Sending RPC '${e}' ${u}:`,d,i);const f={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(f,a,l);const{host:m}=new URL(d),y=to(m);return this.Jo(e,d,f,i,y).then(v=>(we(kp,`Received RPC '${e}' ${u}: `,v),v),v=>{throw Sl(kp,`RPC '${e}' ${u} failed with error: `,v,"url: ",d,"request:",i),v})}Yo(e,n,i,a,l,u){return this.zo(e,n,i,a,l)}Ho(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ol}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,l)=>e[l]=a),i&&i.headers.forEach((a,l)=>e[l]=a)}jo(e,n){const i=S5[e];return`${this.Ko}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="WebChannelConnection";class C5 extends A5{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,a,l){const u=_0();return new Promise((d,f)=>{const m=new uS;m.setWithCredentials(!0),m.listenOnce(cS.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Oh.NO_ERROR:const v=m.getResponseJson();we(En,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(v)),d(v);break;case Oh.TIMEOUT:we(En,`RPC '${e}' ${u} timed out`),f(new xe(pe.DEADLINE_EXCEEDED,"Request time out"));break;case Oh.HTTP_ERROR:const b=m.getStatus();if(we(En,`RPC '${e}' ${u} failed with status:`,b,"response text:",m.getResponseText()),b>0){let x=m.getResponseJson();Array.isArray(x)&&(x=x[0]);const C=x?.error;if(C&&C.status&&C.message){const M=function(L){const H=L.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(H)>=0?H:pe.UNKNOWN}(C.status);f(new xe(M,C.message))}else f(new xe(pe.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new xe(pe.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{h_:e,streamId:u,P_:m.getLastErrorCode(),T_:m.getLastError()})}}finally{we(En,`RPC '${e}' ${u} completed.`)}});const y=JSON.stringify(a);we(En,`RPC '${e}' ${u} sending request:`,a),m.send(n,"POST",y,i,15)})}I_(e,n,i){const a=_0(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=fS(),d=hS(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Ho(f.initMessageHeaders,n,i),f.encodeInitMessageHeaders=!0;const y=l.join("");we(En,`Creating RPC '${e}' stream ${a}: ${y}`,f);const v=u.createWebChannel(y,f);this.E_(v);let b=!1,x=!1;const C=new R5({Zo:k=>{x?we(En,`Not sending because RPC '${e}' stream ${a} is closed:`,k):(b||(we(En,`Opening RPC '${e}' stream ${a} transport.`),v.open(),b=!0),we(En,`RPC '${e}' stream ${a} sending:`,k),v.send(k))},Xo:()=>v.close()}),M=(k,L,H)=>{k.listen(L,F=>{try{H(F)}catch(j){setTimeout(()=>{throw j},0)}})};return M(v,ec.EventType.OPEN,()=>{x||(we(En,`RPC '${e}' stream ${a} transport opened.`),C.__())}),M(v,ec.EventType.CLOSE,()=>{x||(x=!0,we(En,`RPC '${e}' stream ${a} transport closed`),C.u_(),this.d_(v))}),M(v,ec.EventType.ERROR,k=>{x||(x=!0,Sl(En,`RPC '${e}' stream ${a} transport errored. Name:`,k.name,"Message:",k.message),C.u_(new xe(pe.UNAVAILABLE,"The operation could not be completed")))}),M(v,ec.EventType.MESSAGE,k=>{var L;if(!x){const H=k.data[0];lt(!!H,16349);const F=H,j=F?.error||((L=F[0])===null||L===void 0?void 0:L.error);if(j){we(En,`RPC '${e}' stream ${a} received error:`,j);const Q=j.status;let K=function(N){const V=qt[N];if(V!==void 0)return KS(V)}(Q),S=j.message;K===void 0&&(K=pe.INTERNAL,S="Unknown error status: "+Q+" with message "+j.message),x=!0,C.u_(new xe(K,S)),v.close()}else we(En,`RPC '${e}' stream ${a} received:`,H),C.c_(H)}}),M(d,dS.STAT_EVENT,k=>{k.stat===a0.PROXY?we(En,`RPC '${e}' stream ${a} detected buffering proxy`):k.stat===a0.NOPROXY&&we(En,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{C.a_()},0),C}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Dp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(t){return new D6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,n,i=1e3,a=1.5,l=6e4){this.xi=e,this.timerId=n,this.A_=i,this.R_=a,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),i=Math.max(0,Date.now()-this.g_),a=Math.max(0,n-i);a>0&&we("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,a,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1="PersistentStream";class uA{constructor(e,n,i,a,l,u,d,f){this.xi=e,this.S_=i,this.D_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new lA(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===pe.RESOURCE_EXHAUSTED?(ns(n.toString()),ns("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.v_===n&&this.z_(i,a)},i=>{e(()=>{const a=new xe(pe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.j_(a)})})}z_(e,n){const i=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(a=>{i(()=>this.j_(a))}),this.stream.onMessage(a=>{i(()=>++this.M_==1?this.J_(a):this.onNext(a))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return we(p1,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(we(p1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class N5 extends uA{constructor(e,n,i,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,a,u),this.serializer=l}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=P6(this.serializer,e),i=function(l){if(!("targetChange"in l))return Pe.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Pe.min():u.readTime?yi(u.readTime):Pe.min()}(e);return this.listener.Y_(n,i)}Z_(e){const n={};n.database=y0(this.serializer),n.addTarget=function(l,u){let d;const f=u.target;if(d=d0(f)?{documents:L6(l,f)}:{query:U6(l,f).gt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=WS(l,u.resumeToken);const m=g0(l,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(Pe.min())>0){d.readTime=df(l,u.snapshotVersion.toTimestamp());const m=g0(l,u.expectedCount);m!==null&&(d.expectedCount=m)}return d}(this.serializer,e);const i=j6(this.serializer,e);i&&(n.labels=i),this.Q_(n)}X_(e){const n={};n.database=y0(this.serializer),n.removeTarget=e,this.Q_(n)}}class I5 extends uA{constructor(e,n,i,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,a,u),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return lt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,lt(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){lt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=z6(e.writeResults,e.commitTime),i=yi(e.commitTime);return this.listener.ra(i,n)}ia(){const e={};e.database=y0(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>V6(this.serializer,i))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{}class D5 extends k5{constructor(e,n,i,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=a,this.sa=!1}oa(){if(this.sa)throw new xe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,i,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.zo(e,m0(n,i),a,l,u)).catch(l=>{throw l.name==="FirebaseError"?(l.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new xe(pe.UNKNOWN,l.toString())})}Yo(e,n,i,a,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.Yo(e,m0(n,i),a,u,d,l)).catch(u=>{throw u.name==="FirebaseError"?(u.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new xe(pe.UNKNOWN,u.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class M5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(ns(n),this.ua=!1):we("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa="RemoteStore";class O5{constructor(e,n,i,a,l){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(u=>{i.enqueueAndForget(async()=>{ro(this)&&(we(Wa,"Restarting streams for network reachability change."),await async function(f){const m=Ve(f);m.da.add(4),await Uc(m),m.Va.set("Unknown"),m.da.delete(4),await Yf(m)}(this))})}),this.Va=new M5(i,a)}}async function Yf(t){if(ro(t))for(const e of t.Aa)await e(!0)}async function Uc(t){for(const e of t.Aa)await e(!1)}function cA(t,e){const n=Ve(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),vy(n)?yy(n):Ll(n).N_()&&py(n,e))}function my(t,e){const n=Ve(t),i=Ll(n);n.Ea.delete(e),i.N_()&&dA(n,e),n.Ea.size===0&&(i.N_()?i.k_():ro(n)&&n.Va.set("Unknown"))}function py(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ll(t).Z_(e)}function dA(t,e){t.ma.Ke(e),Ll(t).X_(e)}function yy(t){t.ma=new C6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Ll(t).start(),t.Va.ca()}function vy(t){return ro(t)&&!Ll(t).O_()&&t.Ea.size>0}function ro(t){return Ve(t).da.size===0}function hA(t){t.ma=void 0}async function P5(t){t.Va.set("Online")}async function V5(t){t.Ea.forEach((e,n)=>{py(t,e)})}async function z5(t,e){hA(t),vy(t)?(t.Va.Pa(e),yy(t)):t.Va.set("Unknown")}async function L5(t,e,n){if(t.Va.set("Online"),e instanceof QS&&e.state===2&&e.cause)try{await async function(a,l){const u=l.cause;for(const d of l.targetIds)a.Ea.has(d)&&(await a.remoteSyncer.rejectListen(d,u),a.Ea.delete(d),a.ma.removeTarget(d))}(t,e)}catch(i){we(Wa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await ff(t,i)}else if(e instanceof Lh?t.ma.Xe(e):e instanceof XS?t.ma.ot(e):t.ma.nt(e),!n.isEqual(Pe.min()))try{const i=await oA(t.localStore);n.compareTo(i)>=0&&await function(l,u){const d=l.ma.It(u);return d.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const y=l.Ea.get(m);y&&l.Ea.set(m,y.withResumeToken(f.resumeToken,u))}}),d.targetMismatches.forEach((f,m)=>{const y=l.Ea.get(f);if(!y)return;l.Ea.set(f,y.withResumeToken(yn.EMPTY_BYTE_STRING,y.snapshotVersion)),dA(l,f);const v=new Hs(y.target,f,m,y.sequenceNumber);py(l,v)}),l.remoteSyncer.applyRemoteEvent(d)}(t,n)}catch(i){we(Wa,"Failed to raise snapshot:",i),await ff(t,i)}}async function ff(t,e,n){if(!Vl(e))throw e;t.da.add(1),await Uc(t),t.Va.set("Offline"),n||(n=()=>oA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{we(Wa,"Retrying IndexedDB access"),await n(),t.da.delete(1),await Yf(t)})}function fA(t,e){return e().catch(n=>ff(t,n,e))}async function Kf(t){const e=Ve(t),n=na(e);let i=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:ny;for(;U5(e);)try{const a=await b5(e.localStore,i);if(a===null){e.Ia.length===0&&n.k_();break}i=a.batchId,B5(e,a)}catch(a){await ff(e,a)}gA(e)&&mA(e)}function U5(t){return ro(t)&&t.Ia.length<10}function B5(t,e){t.Ia.push(e);const n=na(t);n.N_()&&n.ea&&n.ta(e.mutations)}function gA(t){return ro(t)&&!na(t).O_()&&t.Ia.length>0}function mA(t){na(t).start()}async function j5(t){na(t).ia()}async function H5(t){const e=na(t);for(const n of t.Ia)e.ta(n.mutations)}async function q5(t,e,n){const i=t.Ia.shift(),a=ly.from(i,e,n);await fA(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await Kf(t)}async function $5(t,e){e&&na(t).ea&&await async function(i,a){if(function(u){return A6(u)&&u!==pe.ABORTED}(a.code)){const l=i.Ia.shift();na(i).L_(),await fA(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Kf(i)}}(t,e),gA(t)&&mA(t)}async function y1(t,e){const n=Ve(t);n.asyncQueue.verifyOperationInProgress(),we(Wa,"RemoteStore received new credentials");const i=ro(n);n.da.add(3),await Uc(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Yf(n)}async function F5(t,e){const n=Ve(t);e?(n.da.delete(2),await Yf(n)):e||(n.da.add(2),await Uc(n),n.Va.set("Unknown"))}function Ll(t){return t.fa||(t.fa=function(n,i,a){const l=Ve(n);return l.oa(),new N5(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(t.datastore,t.asyncQueue,{e_:P5.bind(null,t),n_:V5.bind(null,t),i_:z5.bind(null,t),Y_:L5.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),vy(t)?yy(t):t.Va.set("Unknown")):(await t.fa.stop(),hA(t))})),t.fa}function na(t){return t.ga||(t.ga=function(n,i,a){const l=Ve(n);return l.oa(),new I5(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:j5.bind(null,t),i_:$5.bind(null,t),na:H5.bind(null,t),ra:q5.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await Kf(t)):(await t.ga.stop(),t.Ia.length>0&&(we(Wa,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,n,i,a,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,a,l){const u=Date.now()+i,d=new _y(e,n,u,a,l);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function by(t,e){if(ns("AsyncQueue",`${e}: ${t}`),Vl(t))return new xe(pe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{static emptySet(e){return new yl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ne.comparator(n.key,i.key):(n,i)=>Ne.comparator(n.key,i.key),this.keyedMap=tc(),this.sortedSet=new St(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof yl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new yl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(){this.pa=new St(Ne.comparator)}track(e){const n=e.doc.key,i=this.pa.get(n);i?e.type!==0&&i.type===3?this.pa=this.pa.insert(n,e):e.type===3&&i.type!==1?this.pa=this.pa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.pa=this.pa.remove(n):e.type===1&&i.type===2?this.pa=this.pa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Me(63341,{Vt:e,ya:i}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,i)=>{e.push(i)}),e}}class Il{constructor(e,n,i,a,l,u,d,f,m){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,n,i,a,l){const u=[];return n.forEach(d=>{u.push({type:0,doc:d})}),new Il(e,n,yl.emptySet(n),u,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==i[a].type||!n[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class Y5{constructor(){this.queries=_1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const a=Ve(n),l=a.queries;a.queries=_1(),l.forEach((u,d)=>{for(const f of d.Sa)f.onError(i)})})(this,new xe(pe.ABORTED,"Firestore shutting down"))}}function _1(){return new no(t=>VS(t),Bf)}async function K5(t,e){const n=Ve(t);let i=3;const a=e.query;let l=n.queries.get(a);l?!l.Da()&&e.va()&&(i=2):(l=new G5,i=e.va()?0:1);try{switch(i){case 0:l.ba=await n.onListen(a,!0);break;case 1:l.ba=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(u){const d=by(u,`Initialization of query '${al(e.query)}' failed`);return void e.onError(d)}n.queries.set(a,l),l.Sa.push(e),e.Fa(n.onlineState),l.ba&&e.Ma(l.ba)&&Ey(n)}async function X5(t,e){const n=Ve(t),i=e.query;let a=3;const l=n.queries.get(i);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?a=e.va()?0:1:!l.Da()&&e.va()&&(a=2))}switch(a){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function Q5(t,e){const n=Ve(t);let i=!1;for(const a of e){const l=a.query,u=n.queries.get(l);if(u){for(const d of u.Sa)d.Ma(a)&&(i=!0);u.ba=a}}i&&Ey(n)}function W5(t,e,n){const i=Ve(t),a=i.queries.get(e);if(a)for(const l of a.Sa)l.onError(n);i.queries.delete(e)}function Ey(t){t.Ca.forEach(e=>{e.next()})}var b0,b1;(b1=b0||(b0={})).xa="default",b1.Cache="cache";class Z5{constructor(e,n,i){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=i||{}}Ma(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Il(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const i=n!=="Offline";return(!this.options.Qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Il.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==b0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e){this.key=e}}class yA{constructor(e){this.key=e}}class J5{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Xe(),this.mutatedKeys=Xe(),this.Za=zS(e),this.Xa=new yl(this.Za)}get eu(){return this.Ha}tu(e,n){const i=n?n.nu:new v1,a=n?n.Xa:this.Xa;let l=n?n.mutatedKeys:this.mutatedKeys,u=a,d=!1;const f=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,m=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((y,v)=>{const b=a.get(y),x=jf(this.query,v)?v:null,C=!!b&&this.mutatedKeys.has(b.key),M=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let k=!1;b&&x?b.data.isEqual(x.data)?C!==M&&(i.track({type:3,doc:x}),k=!0):this.ru(b,x)||(i.track({type:2,doc:x}),k=!0,(f&&this.Za(x,f)>0||m&&this.Za(x,m)<0)&&(d=!0)):!b&&x?(i.track({type:0,doc:x}),k=!0):b&&!x&&(i.track({type:1,doc:b}),k=!0,(f||m)&&(d=!0)),k&&(x?(u=u.add(x),l=M?l.add(y):l.delete(y)):(u=u.delete(y),l=l.delete(y)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),l=l.delete(y.key),i.track({type:1,doc:y})}return{Xa:u,nu:i,Cs:d,mutatedKeys:l}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,a){const l=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const u=e.nu.wa();u.sort((y,v)=>function(x,C){const M=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Vt:k})}};return M(x)-M(C)}(y.type,v.type)||this.Za(y.doc,v.doc)),this.iu(i),a=a!=null&&a;const d=n&&!a?this.su():[],f=this.Ya.size===0&&this.current&&!a?1:0,m=f!==this.Ja;return this.Ja=f,u.length!==0||m?{snapshot:new Il(this.query,e.Xa,l,u,e.mutatedKeys,f===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),ou:d}:{ou:d}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new v1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Xe(),this.Xa.forEach(i=>{this._u(i.key)&&(this.Ya=this.Ya.add(i.key))});const n=[];return e.forEach(i=>{this.Ya.has(i)||n.push(new yA(i))}),this.Ya.forEach(i=>{e.has(i)||n.push(new pA(i))}),n}au(e){this.Ha=e.$s,this.Ya=Xe();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Il.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const wy="SyncEngine";class eP{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class tP{constructor(e){this.key=e,this.cu=!1}}class nP{constructor(e,n,i,a,l,u){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.lu={},this.hu=new no(d=>VS(d),Bf),this.Pu=new Map,this.Tu=new Set,this.Iu=new St(Ne.comparator),this.Eu=new Map,this.du=new dy,this.Au={},this.Ru=new Map,this.Vu=Nl.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function rP(t,e,n=!0){const i=xA(t);let a;const l=i.hu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.uu()):a=await vA(i,e,n,!0),a}async function iP(t,e){const n=xA(t);await vA(n,e,!0,!1)}async function vA(t,e,n,i){const a=await E5(t.localStore,pi(e)),l=a.targetId,u=t.sharedClientState.addLocalQueryTarget(l,n);let d;return i&&(d=await sP(t,e,l,u==="current",a.resumeToken)),t.isPrimaryClient&&n&&cA(t.remoteStore,a),d}async function sP(t,e,n,i,a){t.fu=(v,b,x)=>async function(M,k,L,H){let F=k.view.tu(L);F.Cs&&(F=await h1(M.localStore,k.query,!1).then(({documents:S})=>k.view.tu(S,F)));const j=H&&H.targetChanges.get(k.targetId),Q=H&&H.targetMismatches.get(k.targetId)!=null,K=k.view.applyChanges(F,M.isPrimaryClient,j,Q);return w1(M,k.targetId,K.ou),K.snapshot}(t,v,b,x);const l=await h1(t.localStore,e,!0),u=new J5(e,l.$s),d=u.tu(l.documents),f=Lc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",a),m=u.applyChanges(d,t.isPrimaryClient,f);w1(t,n,m.ou);const y=new eP(e,n,u);return t.hu.set(e,y),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),m.snapshot}async function aP(t,e,n){const i=Ve(t),a=i.hu.get(e),l=i.Pu.get(a.targetId);if(l.length>1)return i.Pu.set(a.targetId,l.filter(u=>!Bf(u,e))),void i.hu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await v0(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),n&&my(i.remoteStore,a.targetId),E0(i,a.targetId)}).catch(Pl)):(E0(i,a.targetId),await v0(i.localStore,a.targetId,!0))}async function oP(t,e){const n=Ve(t),i=n.hu.get(e),a=n.Pu.get(i.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),my(n.remoteStore,i.targetId))}async function lP(t,e,n){const i=mP(t);try{const a=await function(u,d){const f=Ve(u),m=_t.now(),y=d.reduce((x,C)=>x.add(C.key),Xe());let v,b;return f.persistence.runTransaction("Locally write mutations","readwrite",x=>{let C=rs(),M=Xe();return f.Bs.getEntries(x,y).next(k=>{C=k,C.forEach((L,H)=>{H.isValidDocument()||(M=M.add(L))})}).next(()=>f.localDocuments.getOverlayedDocuments(x,C)).next(k=>{v=k;const L=[];for(const H of d){const F=E6(H,v.get(H.key).overlayedDocument);F!=null&&L.push(new sa(H.key,F,RS(F.value.mapValue),ar.exists(!0)))}return f.mutationQueue.addMutationBatch(x,m,L,d)}).next(k=>{b=k;const L=k.applyToLocalDocumentSet(v,M);return f.documentOverlayCache.saveOverlays(x,k.batchId,L)})}).then(()=>({batchId:b.batchId,changes:US(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(u,d,f){let m=u.Au[u.currentUser.toKey()];m||(m=new St(He)),m=m.insert(d,f),u.Au[u.currentUser.toKey()]=m}(i,a.batchId,n),await Bc(i,a.changes),await Kf(i.remoteStore)}catch(a){const l=by(a,"Failed to persist write");n.reject(l)}}async function _A(t,e){const n=Ve(t);try{const i=await v5(n.localStore,e);e.targetChanges.forEach((a,l)=>{const u=n.Eu.get(l);u&&(lt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.cu=!0:a.modifiedDocuments.size>0?lt(u.cu,14607):a.removedDocuments.size>0&&(lt(u.cu,42227),u.cu=!1))}),await Bc(n,i,e)}catch(i){await Pl(i)}}function E1(t,e,n){const i=Ve(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const a=[];i.hu.forEach((l,u)=>{const d=u.view.Fa(e);d.snapshot&&a.push(d.snapshot)}),function(u,d){const f=Ve(u);f.onlineState=d;let m=!1;f.queries.forEach((y,v)=>{for(const b of v.Sa)b.Fa(d)&&(m=!0)}),m&&Ey(f)}(i.eventManager,e),a.length&&i.lu.Y_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function uP(t,e,n){const i=Ve(t);i.sharedClientState.updateQueryState(e,"rejected",n);const a=i.Eu.get(e),l=a&&a.key;if(l){let u=new St(Ne.comparator);u=u.insert(l,xn.newNoDocument(l,Pe.min()));const d=Xe().add(l),f=new Ff(Pe.min(),new Map,new St(He),u,d);await _A(i,f),i.Iu=i.Iu.remove(l),i.Eu.delete(e),xy(i)}else await v0(i.localStore,e,!1).then(()=>E0(i,e,n)).catch(Pl)}async function cP(t,e){const n=Ve(t),i=e.batch.batchId;try{const a=await y5(n.localStore,e);EA(n,i,null),bA(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Bc(n,a)}catch(a){await Pl(a)}}async function dP(t,e,n){const i=Ve(t);try{const a=await function(u,d){const f=Ve(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return f.mutationQueue.lookupMutationBatch(m,d).next(v=>(lt(v!==null,37113),y=v.keys(),f.mutationQueue.removeMutationBatch(m,v))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,y,d)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>f.localDocuments.getDocuments(m,y))})}(i.localStore,e);EA(i,e,n),bA(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Bc(i,a)}catch(a){await Pl(a)}}function bA(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function EA(t,e,n){const i=Ve(t);let a=i.Au[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(n?l.reject(n):l.resolve(),a=a.remove(e)),i.Au[i.currentUser.toKey()]=a}}function E0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Pu.get(e))t.hu.delete(i),n&&t.lu.gu(i,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(i=>{t.du.containsKey(i)||wA(t,i)})}function wA(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(my(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),xy(t))}function w1(t,e,n){for(const i of n)i instanceof pA?(t.du.addReference(i.key,e),hP(t,i)):i instanceof yA?(we(wy,"Document no longer in limbo: "+i.key),t.du.removeReference(i.key,e),t.du.containsKey(i.key)||wA(t,i.key)):Me(19791,{pu:i})}function hP(t,e){const n=e.key,i=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(i)||(we(wy,"New document in limbo: "+n),t.Tu.add(i),xy(t))}function xy(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new Ne(vt.fromString(e)),i=t.Vu.next();t.Eu.set(i,new tP(n)),t.Iu=t.Iu.insert(n,i),cA(t.remoteStore,new Hs(pi(OS(n.path)),i,"TargetPurposeLimboResolution",zf.le))}}async function Bc(t,e,n){const i=Ve(t),a=[],l=[],u=[];i.hu.isEmpty()||(i.hu.forEach((d,f)=>{u.push(i.fu(f,e,n).then(m=>{var y;if((m||n)&&i.isPrimaryClient){const v=m?!m.fromCache:(y=n?.targetChanges.get(f.targetId))===null||y===void 0?void 0:y.current;i.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(m){a.push(m);const v=fy.Rs(f.targetId,m);l.push(v)}}))}),await Promise.all(u),i.lu.Y_(a),await async function(f,m){const y=Ve(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>ye.forEach(m,b=>ye.forEach(b.ds,x=>y.persistence.referenceDelegate.addReference(v,b.targetId,x)).next(()=>ye.forEach(b.As,x=>y.persistence.referenceDelegate.removeReference(v,b.targetId,x)))))}catch(v){if(!Vl(v))throw v;we(gy,"Failed to update sequence numbers: "+v)}for(const v of m){const b=v.targetId;if(!v.fromCache){const x=y.xs.get(b),C=x.snapshotVersion,M=x.withLastLimboFreeSnapshotVersion(C);y.xs=y.xs.insert(b,M)}}}(i.localStore,l))}async function fP(t,e){const n=Ve(t);if(!n.currentUser.isEqual(e)){we(wy,"User change. New user:",e.toKey());const i=await aA(n.localStore,e);n.currentUser=e,function(l,u){l.Ru.forEach(d=>{d.forEach(f=>{f.reject(new xe(pe.CANCELLED,u))})}),l.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Bc(n,i.ks)}}function gP(t,e){const n=Ve(t),i=n.Eu.get(e);if(i&&i.cu)return Xe().add(i.key);{let a=Xe();const l=n.Pu.get(e);if(!l)return a;for(const u of l){const d=n.hu.get(u);a=a.unionWith(d.view.eu)}return a}}function xA(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_A.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uP.bind(null,e),e.lu.Y_=Q5.bind(null,e.eventManager),e.lu.gu=W5.bind(null,e.eventManager),e}function mP(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dP.bind(null,e),e}class gf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return p5(this.persistence,new f5,e.initialUser,this.serializer)}Su(e){return new sA(hy.fi,this.serializer)}bu(e){return new x5}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gf.provider={build:()=>new gf};class pP extends gf{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){lt(this.persistence.referenceDelegate instanceof hf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Z6(i,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new sA(i=>hf.fi(i,n),this.serializer)}}class w0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>E1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=fP.bind(null,this.syncEngine),await F5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Y5}()}createDatastore(e){const n=Gf(e.databaseInfo.databaseId),i=function(l){return new C5(l)}(e.databaseInfo);return function(l,u,d,f){return new D5(l,u,d,f)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,a,l,u,d){return new O5(i,a,l,u,d)}(this.localStore,this.datastore,e.asyncQueue,n=>E1(this.syncEngine,n,0),function(){return m1.C()?new m1:new T5}())}createSyncEngine(e,n){return function(a,l,u,d,f,m,y){const v=new nP(a,l,u,d,f,m);return y&&(v.mu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(a){const l=Ve(a);we(Wa,"RemoteStore shutting down."),l.da.add(5),await Uc(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}w0.provider={build:()=>new w0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):ns("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="FirestoreClient";class vP{constructor(e,n,i,a,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=a,this.user=wn.UNAUTHENTICATED,this.clientId=yS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async u=>{we(ra,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(i,u=>(we(ra,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=by(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Mp(t,e){t.asyncQueue.verifyOperationInProgress(),we(ra,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async a=>{i.isEqual(a)||(await aA(e.localStore,a),i=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function x1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await _P(t);we(ra,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>y1(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,a)=>y1(e.remoteStore,a)),t._onlineComponents=e}async function _P(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){we(ra,"Using user provided OfflineComponentProvider");try{await Mp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(a){return a.name==="FirebaseError"?a.code===pe.FAILED_PRECONDITION||a.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;Sl("Error using user provided cache. Falling back to memory cache: "+n),await Mp(t,new gf)}}else we(ra,"Using default OfflineComponentProvider"),await Mp(t,new pP(void 0));return t._offlineComponents}async function TA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(we(ra,"Using user provided OnlineComponentProvider"),await x1(t,t._uninitializedComponentsProvider._online)):(we(ra,"Using default OnlineComponentProvider"),await x1(t,new w0))),t._onlineComponents}function bP(t){return TA(t).then(e=>e.syncEngine)}async function EP(t){const e=await TA(t),n=e.eventManager;return n.onListen=rP.bind(null,e.syncEngine),n.onUnlisten=aP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=iP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=oP.bind(null,e.syncEngine),n}function wP(t,e,n={}){const i=new Ks;return t.asyncQueue.enqueueAndForget(async()=>function(l,u,d,f,m){const y=new yP({next:b=>{y.xu(),u.enqueueAndForget(()=>X5(l,v)),b.fromCache&&f.source==="server"?m.reject(new xe(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(b)},error:b=>m.reject(b)}),v=new Z5(d,y,{includeMetadataChanges:!0,Qa:!0});return K5(l,v)}(await EP(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(t,e,n){if(!n)throw new xe(pe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function xP(t,e,n,i){if(e===!0&&i===!0)throw new xe(pe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function S1(t){if(!Ne.isDocumentKey(t))throw new xe(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function A1(t){if(Ne.isDocumentKey(t))throw new xe(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Xf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Me(12329,{type:typeof t})}function Za(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xe(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xf(t);throw new xe(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="firestore.googleapis.com",R1=!0;class C1{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new xe(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=RA,this.ssl=R1}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:R1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=iA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Q6)throw new xe(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SA((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new xe(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new xe(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new xe(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qf{constructor(e,n,i,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new C1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new C1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new RO;switch(i.type){case"firstParty":return new kO(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new xe(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=T1.get(n);i&&(we("ComponentProvider","Removing Datastore"),T1.delete(n),i.terminate())}(this),Promise.resolve()}}function TP(t,e,n,i={}){var a;t=Za(t,Qf);const l=to(e),u=t._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:t._getEmulatorOptions()}),f=`${e}:${n}`;l&&(Q0(`https://${f}`),W0("Firestore",!0)),u.host!==RA&&u.host!==f&&Sl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},u),{host:f,ssl:l,emulatorOptions:i});if(!Ka(m,d)&&(t._setSettings(m),i.mockUserToken)){let y,v;if(typeof i.mockUserToken=="string")y=i.mockUserToken,v=wn.MOCK_USER;else{y=ZM(i.mockUserToken,(a=t._app)===null||a===void 0?void 0:a.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new xe(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new wn(b)}t._authCredentials=new CO(new mS(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new io(this.firestore,e,this._query)}}class or{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new or(this.firestore,e,this._key)}}class Xs extends io{constructor(e,n,i){super(e,n,OS(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new or(this.firestore,null,new Ne(e))}withConverter(e){return new Xs(this.firestore,e,this._path)}}function Ty(t,e,...n){if(t=Dt(t),AA("collection","path",e),t instanceof Qf){const i=vt.fromString(e,...n);return A1(i),new Xs(t,null,i)}{if(!(t instanceof or||t instanceof Xs))throw new xe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(vt.fromString(e,...n));return A1(i),new Xs(t.firestore,null,i)}}function Ul(t,e,...n){if(t=Dt(t),arguments.length===1&&(e=yS.newId()),AA("doc","path",e),t instanceof Qf){const i=vt.fromString(e,...n);return S1(i),new or(t,null,new Ne(i))}{if(!(t instanceof or||t instanceof Xs))throw new xe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(vt.fromString(e,...n));return S1(i),new or(t.firestore,t instanceof Xs?t.converter:null,new Ne(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1="AsyncQueue";class I1{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new lA(this,"async_queue_retry"),this.rc=()=>{const i=Dp();i&&we(N1,"Visibility state changed to "+i.visibilityState),this.x_.b_()},this.sc=e;const n=Dp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Dp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Ks;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Vl(e))throw e;we(N1,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(i=>{throw this.Xu=i,this.ec=!1,ns("INTERNAL UNHANDLED ERROR: ",k1(i)),i}).then(i=>(this.ec=!1,i))));return this.sc=n,n}enqueueAfterDelay(e,n,i){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const a=_y.createAndSchedule(this,e,n,i,l=>this.uc(l));return this.Zu.push(a),a}oc(){this.Xu&&Me(47125,{cc:k1(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function k1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class jc extends Qf{constructor(e,n,i,a){super(e,n,i,a),this.type="firestore",this._queue=new I1,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new I1(e),this._firestoreClient=void 0,await e}}}function SP(t,e){const n=typeof t=="object"?t:ey(),i=typeof t=="string"?t:af,a=Vf(n,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=eS("firestore");l&&TP(a,...l)}return a}function Sy(t){if(t._terminated)throw new xe(pe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||AP(t),t._firestoreClient}function AP(t){var e,n,i;const a=t._freezeSettings(),l=function(d,f,m,y){return new GO(d,f,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,SA(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new vP(t._authCredentials,t._appCheckCredentials,t._queue,l,t._componentsProvider&&function(d){const f=d?._online.build();return{_offline:d?._offline.build(f),_online:f}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kl(yn.fromBase64String(e))}catch(n){throw new xe(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new kl(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new xe(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new xe(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new xe(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=/^__.*__$/;class CP{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new sa(e,this.data,this.fieldMask,n,this.fieldTransforms):new zc(e,this.data,n,this.fieldTransforms)}}class CA{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new sa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function NA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ic:t})}}class Ny{constructor(e,n,i,a,l,u){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Ny(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.dc({path:i,Rc:!1});return a.Vc(e),a}mc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.dc({path:i,Rc:!1});return a.Ec(),a}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return mf(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(NA(this.Ic)&&RP.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class NP{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Gf(e)}bc(e,n,i,a=!1){return new Ny({Ic:e,methodName:n,wc:i,path:pn.emptyPath(),Rc:!1,yc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Iy(t){const e=t._freezeSettings(),n=Gf(t._databaseId);return new NP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function IA(t,e,n,i,a,l={}){const u=t.bc(l.merge||l.mergeFields?2:0,e,n,a);ky("Data must be an object, but it was:",u,i);const d=kA(i,u);let f,m;if(l.merge)f=new sr(u.fieldMask),m=u.fieldTransforms;else if(l.mergeFields){const y=[];for(const v of l.mergeFields){const b=x0(e,v,n);if(!u.contains(b))throw new xe(pe.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);MA(y,b)||y.push(b)}f=new sr(y),m=u.fieldTransforms.filter(v=>f.covers(v.field))}else f=null,m=u.fieldTransforms;return new CP(new Hn(d),f,m)}class Zf extends Ay{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zf}}function IP(t,e,n,i){const a=t.bc(1,e,n);ky("Data must be an object, but it was:",a,i);const l=[],u=Hn.empty();ia(i,(f,m)=>{const y=Dy(e,f,n);m=Dt(m);const v=a.mc(y);if(m instanceof Zf)l.push(y);else{const b=Hc(m,v);b!=null&&(l.push(y),u.set(y,b))}});const d=new sr(l);return new CA(u,d,a.fieldTransforms)}function kP(t,e,n,i,a,l){const u=t.bc(1,e,n),d=[x0(e,i,n)],f=[a];if(l.length%2!=0)throw new xe(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)d.push(x0(e,l[b])),f.push(l[b+1]);const m=[],y=Hn.empty();for(let b=d.length-1;b>=0;--b)if(!MA(m,d[b])){const x=d[b];let C=f[b];C=Dt(C);const M=u.mc(x);if(C instanceof Zf)m.push(x);else{const k=Hc(C,M);k!=null&&(m.push(x),y.set(x,k))}}const v=new sr(m);return new CA(y,v,u.fieldTransforms)}function DP(t,e,n,i=!1){return Hc(n,t.bc(i?4:3,e))}function Hc(t,e){if(DA(t=Dt(t)))return ky("Unsupported field value:",e,t),kA(t,e);if(t instanceof Ay)return function(i,a){if(!NA(a.Ic))throw a.gc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.gc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(i,a){const l=[];let u=0;for(const d of i){let f=Hc(d,a.fc(u));f==null&&(f={nullValue:"NULL_VALUE"}),l.push(f),u++}return{arrayValue:{values:l}}}(t,e)}return function(i,a){if((i=Dt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return m6(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=_t.fromDate(i);return{timestampValue:df(a.serializer,l)}}if(i instanceof _t){const l=new _t(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:df(a.serializer,l)}}if(i instanceof Ry)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof kl)return{bytesValue:WS(a.serializer,i._byteString)};if(i instanceof or){const l=a.databaseId,u=i.firestore._databaseId;if(!u.isEqual(l))throw a.gc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:cy(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Cy)return function(u,d){return{mapValue:{fields:{[SS]:{stringValue:AS},[of]:{arrayValue:{values:u.toArray().map(m=>{if(typeof m!="number")throw d.gc("VectorValues must only contain numeric values.");return oy(d.serializer,m)})}}}}}}(i,a);throw a.gc(`Unsupported field value: ${Xf(i)}`)}(t,e)}function kA(t,e){const n={};return _S(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ia(t,(i,a)=>{const l=Hc(a,e.Ac(i));l!=null&&(n[i]=l)}),{mapValue:{fields:n}}}function DA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof Ry||t instanceof kl||t instanceof or||t instanceof Ay||t instanceof Cy)}function ky(t,e,n){if(!DA(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const i=Xf(n);throw i==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+i)}}function x0(t,e,n){if((e=Dt(e))instanceof Wf)return e._internalPath;if(typeof e=="string")return Dy(t,e);throw mf("Field path arguments must be of type string or ",t,!1,void 0,n)}const MP=new RegExp("[~\\*/\\[\\]]");function Dy(t,e,n){if(e.search(MP)>=0)throw mf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Wf(...e.split("."))._internalPath}catch{throw mf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function mf(t,e,n,i,a){const l=i&&!i.isEmpty(),u=a!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(l||u)&&(f+=" (found",l&&(f+=` in field ${i}`),u&&(f+=` in document ${a}`),f+=")"),new xe(pe.INVALID_ARGUMENT,d+t+f)}function MA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,n,i,a,l){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new or(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new OP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Jf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class OP extends OA{data(){return super.data()}}function Jf(t,e){return typeof e=="string"?Dy(t,e):e instanceof Wf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new xe(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class My{}class PA extends My{}function VP(t,e,...n){let i=[];e instanceof My&&i.push(e),i=i.concat(n),function(l){const u=l.filter(f=>f instanceof Oy).length,d=l.filter(f=>f instanceof eg).length;if(u>1||u>0&&d>0)throw new xe(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)t=a._apply(t);return t}class eg extends PA{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new eg(e,n,i)}_apply(e){const n=this._parse(e);return VA(e._query,n),new io(e.firestore,e.converter,h0(e._query,n))}_parse(e){const n=Iy(e.firestore);return function(l,u,d,f,m,y,v){let b;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new xe(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){M1(v,y);const C=[];for(const M of v)C.push(D1(f,l,M));b={arrayValue:{values:C}}}else b=D1(f,l,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||M1(v,y),b=DP(d,u,v,y==="in"||y==="not-in");return Ft.create(m,y,b)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function zP(t,e,n){const i=e,a=Jf("where",t);return eg._create(a,i,n)}class Oy extends My{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Oy(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:jr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(a,l){let u=a;const d=l.getFlattenedFilters();for(const f of d)VA(u,f),u=h0(u,f)}(e._query,n),new io(e.firestore,e.converter,h0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Py extends PA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Py(e,n)}_apply(e){const n=function(a,l,u){if(a.startAt!==null)throw new xe(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new xe(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sc(l,u)}(e._query,this._field,this._direction);return new io(e.firestore,e.converter,function(a,l){const u=a.explicitOrderBy.concat([l]);return new zl(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,n))}}function LP(t,e="asc"){const n=e,i=Jf("orderBy",t);return Py._create(i,n)}function D1(t,e,n){if(typeof(n=Dt(n))=="string"){if(n==="")throw new xe(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PS(e)&&n.indexOf("/")!==-1)throw new xe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(vt.fromString(n));if(!Ne.isDocumentKey(i))throw new xe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Yw(t,new Ne(i))}if(n instanceof or)return Yw(t,n._key);throw new xe(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xf(n)}.`)}function M1(t,e){if(!Array.isArray(t)||t.length===0)throw new xe(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VA(t,e){const n=function(a,l){for(const u of a)for(const d of u.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new xe(pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class UP{convertValue(e,n="none"){switch(ta(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ea(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return ia(e,(a,l)=>{i[a]=this.convertValue(l,n)}),i}convertVectorValue(e){var n,i,a;const l=(a=(i=(n=e.fields)===null||n===void 0?void 0:n[of].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(u=>Vt(u.doubleValue));return new Cy(l)}convertGeoPoint(e){return new Ry(Vt(e.latitude),Vt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Uf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(wc(e));default:return null}}convertTimestamp(e){const n=Js(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=vt.fromString(e);lt(rA(i),9688,{name:e});const a=new xc(i.get(1),i.get(3)),l=new Ne(i.popFirst(5));return a.isEqual(n)||ns(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class BP extends OA{constructor(e,n,i,a,l,u){super(e,n,i,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Uh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Jf("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Uh extends BP{data(e={}){return super.data(e)}}class jP{constructor(e,n,i,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new Rh(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Uh(this._firestore,this._userDataWriter,i.key,i,new Rh(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new xe(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map(d=>{const f=new Uh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Rh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}})}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const f=new Uh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Rh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let m=-1,y=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),y=u.indexOf(d.doc.key)),{type:HP(d.type),doc:f,oldIndex:m,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function HP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:t})}}class qP extends UP{constructor(e){super(),this.firestore=e}convertBytes(e){return new kl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,n)}}function Vy(t){t=Za(t,io);const e=Za(t.firestore,jc),n=Sy(e),i=new qP(e);return PP(t._query),wP(n,t._query).then(a=>new jP(e,i,t,a))}function zy(t,e,n){t=Za(t,or);const i=Za(t.firestore,jc),a=zA(t.converter,e,n);return Ly(i,[IA(Iy(i),"setDoc",t._key,a,t.converter!==null,n).toMutation(t._key,ar.none())])}function $P(t){return Ly(Za(t.firestore,jc),[new $f(t._key,ar.none())])}function Ly(t,e){return function(i,a){const l=new Ks;return i.asyncQueue.enqueueAndForget(async()=>lP(await bP(i),a,l)),l.promise}(Sy(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Iy(e)}set(e,n,i){this._verifyNotCommitted();const a=Op(e,this._firestore),l=zA(a.converter,n,i),u=IA(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(u.toMutation(a._key,ar.none())),this}update(e,n,i,...a){this._verifyNotCommitted();const l=Op(e,this._firestore);let u;return u=typeof(n=Dt(n))=="string"||n instanceof Wf?kP(this._dataReader,"WriteBatch.update",l._key,n,i,a):IP(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(u.toMutation(l._key,ar.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Op(e,this._firestore);return this._mutations=this._mutations.concat(new $f(n._key,ar.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Op(t,e){if((t=Dt(t)).firestore!==e)throw new xe(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(t){return Sy(t=Za(t,jc)),new FP(t,e=>Ly(t,e))}(function(e,n=!0){(function(a){Ol=a})(Ml),Xa(new Ws("firestore",(i,{instanceIdentifier:a,options:l})=>{const u=i.getProvider("app").getImmediate(),d=new jc(new NO(i.getProvider("auth-internal")),new DO(u,i.getProvider("app-check-internal")),function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new xe(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xc(m.options.projectId,y)}(u,a),u);return l=Object.assign({useFetchStreams:n},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),mi(Pw,Vw,e),mi(Pw,Vw,"esm2017")})();function Uy(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n}function UA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GP=UA,BA=new Pc("auth","Firebase",UA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf=new Z0("@firebase/auth");function YP(t,...e){pf.logLevel<=Ke.WARN&&pf.warn(`Auth (${Ml}): ${t}`,...e)}function Bh(t,...e){pf.logLevel<=Ke.ERROR&&pf.error(`Auth (${Ml}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(t,...e){throw By(t,...e)}function vi(t,...e){return By(t,...e)}function jA(t,e,n){const i=Object.assign(Object.assign({},GP()),{[e]:n});return new Pc("auth","Firebase",i).create(e,{appName:t.name})}function Zi(t){return jA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function By(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return BA.create(t,...e)}function De(t,e,...n){if(!t)throw By(e,...n)}function Qi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Bh(e),new Error(e)}function is(t,e){t||Qi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function KP(){return O1()==="http:"||O1()==="https:"}function O1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KP()||i3()||"connection"in navigator)?navigator.onLine:!0}function QP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n){this.shortDelay=e,this.longDelay=n,is(n>e,"Short delay should be less than long delay!"),this.isMobile=t3()||s3()}get(){return XP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(t,e){is(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],JP=new qc(3e4,6e4);function aa(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function oa(t,e,n,i,a={}){return qA(t,a,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const d=Vc(Object.assign({key:t.config.apiKey},u)).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const m=Object.assign({method:e,headers:f},l);return r3()||(m.referrerPolicy="no-referrer"),t.emulatorConfig&&to(t.emulatorConfig.host)&&(m.credentials="include"),HA.fetch()(await $A(t,t.config.apiHost,n,d),m)})}async function qA(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},WP),e);try{const a=new tV(t),l=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Ch(t,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const d=l.ok?u.errorMessage:u.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ch(t,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Ch(t,"email-already-in-use",u);if(f==="USER_DISABLED")throw Ch(t,"user-disabled",u);const y=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw jA(t,y,m);Hr(t,y)}}catch(a){if(a instanceof wi)throw a;Hr(t,"network-request-failed",{message:String(a)})}}async function $c(t,e,n,i,a={}){const l=await oa(t,e,n,i,a);return"mfaPendingCredential"in l&&Hr(t,"multi-factor-auth-required",{_serverResponse:l}),l}async function $A(t,e,n,i){const a=`${e}${n}?${i}`,l=t,u=l.config.emulator?jy(t.config,a):`${t.config.apiScheme}://${a}`;return ZP.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function eV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(vi(this.auth,"network-request-failed")),JP.get())})}}function Ch(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const a=vi(t,e,i);return a.customData._tokenResponse=n,a}function P1(t){return t!==void 0&&t.enterprise!==void 0}class nV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return eV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function rV(t,e){return oa(t,"GET","/v2/recaptchaConfig",aa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iV(t,e){return oa(t,"POST","/v1/accounts:delete",e)}async function yf(t,e){return oa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sV(t,e=!1){const n=Dt(t),i=await n.getIdToken(e),a=Hy(i);De(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l?.sign_in_provider;return{claims:a,token:i,authTime:lc(Pp(a.auth_time)),issuedAtTime:lc(Pp(a.iat)),expirationTime:lc(Pp(a.exp)),signInProvider:u||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Pp(t){return Number(t)*1e3}function Hy(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Bh("JWT malformed, contained fewer than 3 sections"),null;try{const a=ZT(n);return a?JSON.parse(a):(Bh("Failed to decode base64 JWT payload"),null)}catch(a){return Bh("Caught error parsing JWT payload as JSON",a?.toString()),null}}function V1(t){const e=Hy(t);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cc(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof wi&&aV(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function aV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=lc(this.lastLoginAt),this.creationTime=lc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vf(t){var e;const n=t.auth,i=await t.getIdToken(),a=await Cc(t,yf(n,{idToken:i}));De(a?.users.length,n,"internal-error");const l=a.users[0];t._notifyReloadListener(l);const u=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?FA(l.providerUserInfo):[],d=uV(t.providerData,u),f=t.isAnonymous,m=!(t.email&&l.passwordHash)&&!d?.length,y=f?m:!1,v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new S0(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(t,v)}async function lV(t){const e=Dt(t);await vf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uV(t,e){return[...t.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function FA(t){return t.map(e=>{var{providerId:n}=e,i=Uy(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cV(t,e){const n=await qA(t,{},async()=>{const i=Vc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=t.config,u=await $A(t,a,"/v1/token",`key=${l}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:i};return t.emulatorConfig&&to(t.emulatorConfig.host)&&(f.credentials="include"),HA.fetch()(u,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function dV(t,e){return oa(t,"POST","/v2/accounts:revokeToken",aa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):V1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){De(e.length!==0,"internal-error");const n=V1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:a,expiresIn:l}=await cV(e,n);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:a,expirationTime:l}=n,u=new vl;return i&&(De(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),a&&(De(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(De(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vl,this.toJSON())}_performRefresh(){return Qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(t,e){De(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ur{constructor(e){var{uid:n,auth:i,stsTokenManager:a}=e,l=Uy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new oV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new S0(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await Cc(this,this.stsTokenManager.getToken(this.auth,e));return De(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return sV(this,e)}reload(){return lV(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ur(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await vf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ir(this.auth.app))return Promise.reject(Zi(this.auth));const e=await this.getIdToken();return await Cc(this,iV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,a,l,u,d,f,m,y;const v=(i=n.displayName)!==null&&i!==void 0?i:void 0,b=(a=n.email)!==null&&a!==void 0?a:void 0,x=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,C=(u=n.photoURL)!==null&&u!==void 0?u:void 0,M=(d=n.tenantId)!==null&&d!==void 0?d:void 0,k=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,L=(m=n.createdAt)!==null&&m!==void 0?m:void 0,H=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:F,emailVerified:j,isAnonymous:Q,providerData:K,stsTokenManager:S}=n;De(F&&S,e,"internal-error");const T=vl.fromJSON(this.name,S);De(typeof F=="string",e,"internal-error"),Ds(v,e.name),Ds(b,e.name),De(typeof j=="boolean",e,"internal-error"),De(typeof Q=="boolean",e,"internal-error"),Ds(x,e.name),Ds(C,e.name),Ds(M,e.name),Ds(k,e.name),Ds(L,e.name),Ds(H,e.name);const N=new Ur({uid:F,auth:e,email:b,emailVerified:j,displayName:v,isAnonymous:Q,photoURL:C,phoneNumber:x,tenantId:M,stsTokenManager:T,createdAt:L,lastLoginAt:H});return K&&Array.isArray(K)&&(N.providerData=K.map(V=>Object.assign({},V))),k&&(N._redirectEventId=k),N}static async _fromIdTokenResponse(e,n,i=!1){const a=new vl;a.updateFromServerResponse(n);const l=new Ur({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await vf(l),l}static async _fromGetAccountInfoResponse(e,n,i){const a=n.users[0];De(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?FA(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!l?.length,d=new vl;d.updateFromIdToken(i);const f=new Ur({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:u}),m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new S0(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=new Map;function Wi(t){is(t instanceof Function,"Expected a class definition");let e=z1.get(t);return e?(is(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,z1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}GA.type="NONE";const L1=GA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(t,e,n){return`firebase:${t}:${e}:${n}`}class _l{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=jh(this.userKey,a.apiKey,l),this.fullPersistenceKey=jh("persistence",a.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await yf(this.auth,{idToken:e}).catch(()=>{});return n?Ur._fromGetAccountInfoResponse(this.auth,n,e):null}return Ur._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new _l(Wi(L1),e,i);const a=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=a[0]||Wi(L1);const u=jh(i,e.config.apiKey,e.name);let d=null;for(const m of n)try{const y=await m._get(u);if(y){let v;if(typeof y=="string"){const b=await yf(e,{idToken:y}).catch(()=>{});if(!b)break;v=await Ur._fromGetAccountInfoResponse(e,b,y)}else v=Ur._fromJSON(e,y);m!==l&&(d=v),l=m;break}}catch{}const f=a.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!f.length?new _l(l,e,i):(l=f[0],d&&await l._set(u,d.toJSON()),await Promise.all(n.map(async m=>{if(m!==l)try{await m._remove(u)}catch{}})),new _l(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(QA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(YA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZA(e))return"Blackberry";if(JA(e))return"Webos";if(KA(e))return"Safari";if((e.includes("chrome/")||XA(e))&&!e.includes("edge/"))return"Chrome";if(WA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function YA(t=Sn()){return/firefox\//i.test(t)}function KA(t=Sn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function XA(t=Sn()){return/crios\//i.test(t)}function QA(t=Sn()){return/iemobile/i.test(t)}function WA(t=Sn()){return/android/i.test(t)}function ZA(t=Sn()){return/blackberry/i.test(t)}function JA(t=Sn()){return/webos/i.test(t)}function qy(t=Sn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function hV(t=Sn()){var e;return qy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function fV(){return a3()&&document.documentMode===10}function e2(t=Sn()){return qy(t)||WA(t)||JA(t)||ZA(t)||/windows phone/i.test(t)||QA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(t,e=[]){let n;switch(t){case"Browser":n=U1(Sn());break;case"Worker":n=`${U1(Sn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ml}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=l=>new Promise((u,d)=>{try{const f=e(l);u(f)}catch(f){d(f)}});i.onAbort=n,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mV(t,e={}){return oa(t,"GET","/v2/passwordPolicy",aa(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV=6;class yV{constructor(e){var n,i,a,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=u.minPasswordLength)!==null&&n!==void 0?n:pV,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,a,l,u,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(n=f.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(i=f.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(a=f.containsLowercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(l=f.containsUppercaseLetter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e,n,i,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new B1(this),this.idTokenSubscription=new B1(this),this.beforeStateQueue=new gV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wi(n)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await _l.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await yf(this,{idToken:e}),i=await Ur._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ir(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=a?._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===d)&&f?.user&&(a=f.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await vf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ir(this.app))return Promise.reject(Zi(this));const n=e?Dt(e):null;return n&&De(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ir(this.app)?Promise.reject(Zi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ir(this.app)?Promise.reject(Zi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mV(this),n=new yV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await dV(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Wi(e)||this._popupRedirectResolver;De(n,this,"argument-error"),this.redirectPersistenceManager=await _l.create(this,[Wi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,a){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(d,this,"internal-error"),d.then(()=>{u||l(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,i,a);return()=>{u=!0,f()}}else{const f=e.addObserver(n);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=t2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(n["X-Firebase-AppCheck"]=a),n}async _getAppCheckToken(){var e;if(ir(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&YP(`Error while retrieving App Check token: ${n.error}`),n?.token}}function so(t){return Dt(t)}class B1{constructor(e){this.auth=e,this.observer=null,this.addObserver=g3(n=>this.observer=n)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _V(t){tg=t}function n2(t){return tg.loadJS(t)}function bV(){return tg.recaptchaEnterpriseScript}function EV(){return tg.gapiScript}function wV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class xV{constructor(){this.enterprise=new TV}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class TV{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const SV="recaptcha-enterprise",r2="NO_RECAPTCHA";class AV{constructor(e){this.type=SV,this.auth=so(e)}async verify(e="verify",n=!1){async function i(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,d)=>{rV(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new nV(f);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,u(m.siteKey)}}).catch(f=>{d(f)})})}function a(l,u,d){const f=window.grecaptcha;P1(f)?f.enterprise.ready(()=>{f.enterprise.execute(l,{action:e}).then(m=>{u(m)}).catch(()=>{u(r2)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new xV().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{i(this.auth).then(d=>{if(!n&&P1(window.grecaptcha))a(d,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=bV();f.length!==0&&(f+=d),n2(f).then(()=>{a(d,l,u)}).catch(m=>{u(m)})}}).catch(d=>{u(d)})})}}async function j1(t,e,n,i=!1,a=!1){const l=new AV(t);let u;if(a)u=r2;else try{u=await l.verify(n)}catch{u=await l.verify(n,!0)}const d=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function A0(t,e,n,i,a){var l;if(!((l=t._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await j1(t,e,n,n==="getOobCode");return i(t,u)}else return i(t,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await j1(t,e,n,n==="getOobCode");return i(t,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RV(t,e){const n=Vf(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),l=n.getOptions();if(Ka(l,e??{}))return a;Hr(a,"already-initialized")}return n.initialize({options:e})}function CV(t,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Wi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}function NV(t,e,n){const i=so(t);De(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=i2(e),{host:u,port:d}=IV(e),f=d===null?"":`:${d}`,m={url:`${l}//${u}${f}/`},y=Object.freeze({host:u,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){De(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),De(Ka(m,i.config.emulator)&&Ka(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,to(u)?(Q0(`${l}//${u}${f}`),W0("Auth",!0)):kV()}function i2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function IV(t){const e=i2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:H1(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:H1(u)}}}function H1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function kV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qi("not implemented")}_getIdTokenResponse(e){return Qi("not implemented")}_linkToIdToken(e,n){return Qi("not implemented")}_getReauthenticationResolver(e){return Qi("not implemented")}}async function DV(t,e){return oa(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MV(t,e){return $c(t,"POST","/v1/accounts:signInWithPassword",aa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OV(t,e){return $c(t,"POST","/v1/accounts:signInWithEmailLink",aa(t,e))}async function PV(t,e){return $c(t,"POST","/v1/accounts:signInWithEmailLink",aa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc extends $y{constructor(e,n,i,a=null){super("password",i),this._email=e,this._password=n,this._tenantId=a}static _fromEmailAndPassword(e,n){return new Nc(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Nc(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return A0(e,n,"signInWithPassword",MV);case"emailLink":return OV(e,{email:this._email,oobCode:this._password});default:Hr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return A0(e,i,"signUpPassword",DV);case"emailLink":return PV(e,{idToken:n,email:this._email,oobCode:this._password});default:Hr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(t,e){return $c(t,"POST","/v1/accounts:signInWithIdp",aa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV="http://localhost";class Ja extends $y{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ja(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Hr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a}=n,l=Uy(n,["providerId","signInMethod"]);if(!i||!a)return null;const u=new Ja(i,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return bl(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,bl(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,bl(e,n)}buildRequest(){const e={requestUri:VV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Vc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function LV(t){const e=Zu(Ju(t)).link,n=e?Zu(Ju(e)).deep_link_id:null,i=Zu(Ju(t)).deep_link_id;return(i?Zu(Ju(i)).link:null)||i||n||e||t}class Fy{constructor(e){var n,i,a,l,u,d;const f=Zu(Ju(e)),m=(n=f.apiKey)!==null&&n!==void 0?n:null,y=(i=f.oobCode)!==null&&i!==void 0?i:null,v=zV((a=f.mode)!==null&&a!==void 0?a:null);De(m&&y&&v,"argument-error"),this.apiKey=m,this.operation=v,this.code=y,this.continueUrl=(l=f.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(u=f.lang)!==null&&u!==void 0?u:null,this.tenantId=(d=f.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const n=LV(e);try{return new Fy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(){this.providerId=Bl.PROVIDER_ID}static credential(e,n){return Nc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Fy.parseLink(n);return De(i,"argument-error"),Nc._fromEmailAndCode(e,i.code,i.tenantId)}}Bl.PROVIDER_ID="password";Bl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc extends s2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends Fc{constructor(){super("facebook.com")}static credential(e){return Ja._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ls.credential(e.oauthAccessToken)}catch{return null}}}Ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends Fc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ja._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Us.credential(n,i)}catch{return null}}}Us.GOOGLE_SIGN_IN_METHOD="google.com";Us.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends Fc{constructor(){super("github.com")}static credential(e){return Ja._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bs.credential(e.oauthAccessToken)}catch{return null}}}Bs.GITHUB_SIGN_IN_METHOD="github.com";Bs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends Fc{constructor(){super("twitter.com")}static credential(e,n){return Ja._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return js.credential(n,i)}catch{return null}}}js.TWITTER_SIGN_IN_METHOD="twitter.com";js.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UV(t,e){return $c(t,"POST","/v1/accounts:signUp",aa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,a=!1){const l=await Ur._fromIdTokenResponse(e,i,a),u=q1(i);return new eo({user:l,providerId:u,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const a=q1(i);return new eo({user:e,providerId:a,_tokenResponse:i,operationType:n})}}function q1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f extends wi{constructor(e,n,i,a){var l;super(n.code,n.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,_f.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,a){return new _f(e,n,i,a)}}function a2(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?_f._fromErrorAndOperation(t,l,e,i):l})}async function BV(t,e,n=!1){const i=await Cc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return eo._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jV(t,e,n=!1){const{auth:i}=t;if(ir(i.app))return Promise.reject(Zi(i));const a="reauthenticate";try{const l=await Cc(t,a2(i,a,e,t),n);De(l.idToken,i,"internal-error");const u=Hy(l.idToken);De(u,i,"internal-error");const{sub:d}=u;return De(t.uid===d,i,"user-mismatch"),eo._forOperation(t,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Hr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o2(t,e,n=!1){if(ir(t.app))return Promise.reject(Zi(t));const i="signIn",a=await a2(t,i,e),l=await eo._fromIdTokenResponse(t,i,a);return n||await t._updateCurrentUser(l.user),l}async function HV(t,e){return o2(so(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l2(t){const e=so(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function qV(t,e,n){if(ir(t.app))return Promise.reject(Zi(t));const i=so(t),u=await A0(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",UV).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&l2(t),f}),d=await eo._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function $V(t,e,n){return ir(t.app)?Promise.reject(Zi(t)):HV(Dt(t),Bl.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&l2(t),i})}function FV(t,e,n,i){return Dt(t).onIdTokenChanged(e,n,i)}function GV(t,e,n){return Dt(t).beforeAuthStateChanged(e,n)}function YV(t,e,n,i){return Dt(t).onAuthStateChanged(e,n,i)}function KV(t){return Dt(t).signOut()}const bf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bf,"1"),this.storage.removeItem(bf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV=1e3,QV=10;class c2 extends u2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=e2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),a=this.localCache[n];i!==a&&e(n,a,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const i=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(i);!n&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);fV()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,QV):a()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},XV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}c2.type="LOCAL";const WV=c2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2 extends u2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}d2.type="SESSION";const h2=d2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const i=new ng(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:a,data:l}=n.data,u=this.handlersMap[a];if(!u?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(u).map(async m=>m(n.origin,l)),f=await ZV(d);n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ng.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((d,f)=>{const m=Gy("",20);a.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},i);u={messageChannel:a,onMessage(v){const b=v;if(b.data.eventId===m)switch(b.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(b.data.response);break;default:clearTimeout(y),clearTimeout(l),f(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(){return window}function e9(t){_i().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(){return typeof _i().WorkerGlobalScope<"u"&&typeof _i().importScripts=="function"}async function t9(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function n9(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function r9(){return f2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2="firebaseLocalStorageDb",i9=1,Ef="firebaseLocalStorage",m2="fbase_key";class Gc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rg(t,e){return t.transaction([Ef],e?"readwrite":"readonly").objectStore(Ef)}function s9(){const t=indexedDB.deleteDatabase(g2);return new Gc(t).toPromise()}function R0(){const t=indexedDB.open(g2,i9);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Ef,{keyPath:m2})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Ef)?e(i):(i.close(),await s9(),e(await R0()))})})}async function $1(t,e,n){const i=rg(t,!0).put({[m2]:e,value:n});return new Gc(i).toPromise()}async function a9(t,e){const n=rg(t,!1).get(e),i=await new Gc(n).toPromise();return i===void 0?null:i.value}function F1(t,e){const n=rg(t,!0).delete(e);return new Gc(n).toPromise()}const o9=800,l9=3;class p2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await R0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>l9)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return f2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ng._getInstance(r9()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await t9(),!this.activeServiceWorker)return;this.sender=new JV(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||n9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await R0();return await $1(e,bf,"1"),await F1(e,bf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>$1(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>a9(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>F1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=rg(a,!1).getAll();return new Gc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),o9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}p2.type="LOCAL";const u9=p2;new qc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c9(t,e){return e?Wi(e):(De(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy extends $y{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return bl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return bl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function d9(t){return o2(t.auth,new Yy(t),t.bypassAuthState)}function h9(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),jV(n,new Yy(t),t.bypassAuthState)}async function f9(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),BV(n,new Yy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,n,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:a,tenantId:l,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:n,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return d9;case"linkViaPopup":case"linkViaRedirect":return f9;case"reauthViaPopup":case"reauthViaRedirect":return h9;default:Hr(this.auth,"internal-error")}}resolve(e){is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g9=new qc(2e3,1e4);class dl extends y2{constructor(e,n,i,a,l){super(e,n,a,l),this.provider=i,this.authWindow=null,this.pollId=null,dl.currentPopupAction&&dl.currentPopupAction.cancel(),dl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){is(this.filter.length===1,"Popup operations only handle one event");const e=Gy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(vi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(vi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,dl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,g9.get())};e()}}dl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9="pendingRedirect",Hh=new Map;class p9 extends y2{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Hh.get(this.auth._key());if(!e){try{const i=await y9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Hh.set(this.auth._key(),e)}return this.bypassAuthState||Hh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function y9(t,e){const n=b9(e),i=_9(t);if(!await i._isAvailable())return!1;const a=await i._get(n)==="true";return await i._remove(n),a}function v9(t,e){Hh.set(t._key(),e)}function _9(t){return Wi(t._redirectPersistence)}function b9(t){return jh(m9,t.config.apiKey,t.name)}async function E9(t,e,n=!1){if(ir(t.app))return Promise.reject(Zi(t));const i=so(t),a=c9(i,e),u=await new p9(i,a,n).execute();return u&&!n&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w9=10*60*1e3;class x9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!T9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!v2(e)){const a=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(vi(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=w9&&this.cachedEventUids.clear(),this.cachedEventUids.has(G1(e))}saveEventToCache(e){this.cachedEventUids.add(G1(e)),this.lastProcessedEventTime=Date.now()}}function G1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function v2({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function T9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return v2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S9(t,e={}){return oa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,R9=/^https?/;async function C9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await S9(t);for(const n of e)try{if(N9(n))return}catch{}Hr(t,"unauthorized-domain")}function N9(t){const e=T0(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===i}if(!R9.test(n))return!1;if(A9.test(t))return i===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I9=new qc(3e4,6e4);function Y1(){const t=_i().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function k9(t){return new Promise((e,n)=>{var i,a,l;function u(){Y1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Y1(),n(vi(t,"network-request-failed"))},timeout:I9.get()})}if(!((a=(i=_i().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=_i().gapi)===null||l===void 0)&&l.load)u();else{const d=wV("iframefcb");return _i()[d]=()=>{gapi.load?u():n(vi(t,"network-request-failed"))},n2(`${EV()}?onload=${d}`).catch(f=>n(f))}}).catch(e=>{throw qh=null,e})}let qh=null;function D9(t){return qh=qh||k9(t),qh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9=new qc(5e3,15e3),O9="__/auth/iframe",P9="emulator/auth/iframe",V9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},z9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function L9(t){const e=t.config;De(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?jy(e,P9):`https://${t.config.authDomain}/${O9}`,i={apiKey:e.apiKey,appName:t.name,v:Ml},a=z9.get(t.config.apiHost);a&&(i.eid=a);const l=t._getFrameworks();return l.length&&(i.fw=l.join(",")),`${n}?${Vc(i).slice(1)}`}async function U9(t){const e=await D9(t),n=_i().gapi;return De(n,t,"internal-error"),e.open({where:document.body,url:L9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:V9,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const u=vi(t,"network-request-failed"),d=_i().setTimeout(()=>{l(u)},M9.get());function f(){_i().clearTimeout(d),a(i)}i.ping(f).then(f,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},j9=500,H9=600,q9="_blank",$9="http://localhost";class K1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function F9(t,e,n,i=j9,a=H9){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const f=Object.assign(Object.assign({},B9),{width:i.toString(),height:a.toString(),top:l,left:u}),m=Sn().toLowerCase();n&&(d=XA(m)?q9:n),YA(m)&&(e=e||$9,f.scrollbars="yes");const y=Object.entries(f).reduce((b,[x,C])=>`${b}${x}=${C},`,"");if(hV(m)&&d!=="_self")return G9(e||"",d),new K1(null);const v=window.open(e||"",d,y);De(v,t,"popup-blocked");try{v.focus()}catch{}return new K1(v)}function G9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9="__/auth/handler",K9="emulator/auth/handler",X9=encodeURIComponent("fac");async function X1(t,e,n,i,a,l){De(t.config.authDomain,t,"auth-domain-config-required"),De(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Ml,eventId:a};if(e instanceof s2){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",f3(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))u[y]=v}if(e instanceof Fc){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(u.scopes=y.join(","))}t.tenantId&&(u.tid=t.tenantId);const d=u;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const f=await t._getAppCheckToken(),m=f?`#${X9}=${encodeURIComponent(f)}`:"";return`${Q9(t)}?${Vc(d).slice(1)}${m}`}function Q9({config:t}){return t.emulator?jy(t,K9):`https://${t.authDomain}/${Y9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp="webStorageSupport";class W9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=h2,this._completeRedirectFn=E9,this._overrideRedirectResult=v9}async _openPopup(e,n,i,a){var l;is((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const u=await X1(e,n,i,T0(),a);return F9(e,u,Gy())}async _openRedirect(e,n,i,a){await this._originValidation(e);const l=await X1(e,n,i,T0(),a);return e9(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:l}=this.eventManagers[n];return a?Promise.resolve(a):(is(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await U9(e),i=new x9(e);return n.register("authEvent",a=>(De(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Vp,{type:Vp},a=>{var l;const u=(l=a?.[0])===null||l===void 0?void 0:l[Vp];u!==void 0&&n(!!u),Hr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=C9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return e2()||KA()||qy()}}const Z9=W9;var Q1="@firebase/auth",W1="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ez(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tz(t){Xa(new Ws("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;De(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:u,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:t2(t)},m=new vV(i,a,l,f);return CV(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Xa(new Ws("auth-internal",e=>{const n=so(e.getProvider("auth").getImmediate());return(i=>new J9(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),mi(Q1,W1,ez(t)),mi(Q1,W1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nz=5*60,rz=nS("authIdTokenMaxAge")||nz;let Z1=null;const iz=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>rz)return;const a=n?.token;Z1!==a&&(Z1=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function sz(t=ey()){const e=Vf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=RV(t,{popupRedirectResolver:Z9,persistence:[u9,WV,h2]}),i=nS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=iz(l.toString());GV(n,u,()=>u(n.currentUser)),FV(n,d=>u(d))}}const a=JT("auth");return a&&NV(n,`http://${a}`),n}function az(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}_V({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=a=>{const l=vi("internal-error");l.customData=a,n(l)},i.type="text/javascript",i.charset="UTF-8",az().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tz("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oz="type.googleapis.com/google.protobuf.Int64Value",lz="type.googleapis.com/google.protobuf.UInt64Value";function _2(t,e){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function wf(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>wf(e));if(typeof t=="function"||typeof t=="object")return _2(t,e=>wf(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Dl(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case oz:case lz:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Dl(e)):typeof t=="function"||typeof t=="object"?_2(t,e=>Dl(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $n extends wi{constructor(e,n,i){super(`${Ky}/${e}`,n||""),this.details=i,Object.setPrototypeOf(this,$n.prototype)}}function uz(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function xf(t,e){let n=uz(t),i=n,a;try{const l=e&&e.error;if(l){const u=l.status;if(typeof u=="string"){if(!J1[u])return new $n("internal","internal");n=J1[u],i=u}const d=l.message;typeof d=="string"&&(i=d),a=l.details,a!==void 0&&(a=Dl(a))}}catch{}return n==="ok"?null:new $n(n,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cz{constructor(e,n,i,a){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ir(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||n.get().then(l=>this.auth=l,()=>{}),this.messaging||i.get().then(l=>this.messaging=l,()=>{}),this.appCheck||a?.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),i=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="us-central1",dz=/^data: (.*?)(?:\n|$)/;function hz(t){let e=null;return{promise:new Promise((n,i)=>{e=setTimeout(()=>{i(new $n("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class fz{constructor(e,n,i,a,l=C0,u=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new cz(e,n,i,a),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(l);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=C0}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function gz(t,e,n){const i=to(e);t.emulatorOrigin=`http${i?"s":""}://${e}:${n}`,i&&(Q0(t.emulatorOrigin),W0("Functions",!0))}function mz(t,e,n){const i=a=>yz(t,e,a,{});return i.stream=(a,l)=>_z(t,e,a,l),i}async function pz(t,e,n,i){n["Content-Type"]="application/json";let a;try{a=await i(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let l=null;try{l=await a.json()}catch{}return{status:a.status,json:l}}async function b2(t,e){const n={},i=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(n.Authorization="Bearer "+i.authToken),i.messagingToken&&(n["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=i.appCheckToken),n}function yz(t,e,n,i){const a=t._url(e);return vz(t,a,n,i)}async function vz(t,e,n,i){n=wf(n);const a={data:n},l=await b2(t,i),u=i.timeout||7e4,d=hz(u),f=await Promise.race([pz(e,a,l,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!f)throw new $n("cancelled","Firebase Functions instance was deleted.");const m=xf(f.status,f.json);if(m)throw m;if(!f.json)throw new $n("internal","Response is not valid JSON object.");let y=f.json.data;if(typeof y>"u"&&(y=f.json.result),typeof y>"u")throw new $n("internal","Response is missing data field.");return{data:Dl(y)}}function _z(t,e,n,i){const a=t._url(e);return bz(t,a,n,i||{})}async function bz(t,e,n,i){var a;n=wf(n);const l={data:n},u=await b2(t,i);u["Content-Type"]="application/json",u.Accept="text/event-stream";let d;try{d=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(l),headers:u,signal:i?.signal})}catch(x){if(x instanceof Error&&x.name==="AbortError"){const M=new $n("cancelled","Request was cancelled.");return{data:Promise.reject(M),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(M)}}}}}}const C=xf(0,null);return{data:Promise.reject(C),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(C)}}}}}}let f,m;const y=new Promise((x,C)=>{f=x,m=C});(a=i?.signal)===null||a===void 0||a.addEventListener("abort",()=>{const x=new $n("cancelled","Request was cancelled.");m(x)});const v=d.body.getReader(),b=Ez(v,f,m,i?.signal);return{stream:{[Symbol.asyncIterator](){const x=b.getReader();return{async next(){const{value:C,done:M}=await x.read();return{value:C,done:M}},async return(){return await x.cancel(),{done:!0,value:void 0}}}}},data:y}}function Ez(t,e,n,i){const a=(u,d)=>{const f=u.match(dz);if(!f)return;const m=f[1];try{const y=JSON.parse(m);if("result"in y){e(Dl(y.result));return}if("message"in y){d.enqueue(Dl(y.message));return}if("error"in y){const v=xf(0,y);d.error(v),n(v);return}}catch(y){if(y instanceof $n){d.error(y),n(y);return}}},l=new TextDecoder;return new ReadableStream({start(u){let d="";return f();async function f(){if(i?.aborted){const m=new $n("cancelled","Request was cancelled");return u.error(m),n(m),Promise.resolve()}try{const{value:m,done:y}=await t.read();if(y){d.trim()&&a(d.trim(),u),u.close();return}if(i?.aborted){const b=new $n("cancelled","Request was cancelled");u.error(b),n(b),await t.cancel();return}d+=l.decode(m,{stream:!0});const v=d.split(`
`);d=v.pop()||"";for(const b of v)b.trim()&&a(b.trim(),u);return f()}catch(m){const y=m instanceof $n?m:xf(0,null);u.error(y),n(y)}}},cancel(){return t.cancel()}})}const ex="@firebase/functions",tx="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wz="auth-internal",xz="app-check-internal",Tz="messaging-internal";function Sz(t){const e=(n,{instanceIdentifier:i})=>{const a=n.getProvider("app").getImmediate(),l=n.getProvider(wz),u=n.getProvider(Tz),d=n.getProvider(xz);return new fz(a,l,u,d,i)};Xa(new Ws(Ky,e,"PUBLIC").setMultipleInstances(!0)),mi(ex,tx,t),mi(ex,tx,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Az(t=ey(),e=C0){const i=Vf(Dt(t),Ky).getImmediate({identifier:e}),a=eS("functions");return a&&E2(i,...a),i}function E2(t,e,n){gz(Dt(t),e,n)}function w2(t,e,n){return mz(Dt(t),e)}Sz();const Rz={apiKey:"AIzaSyAO9TXM7A0SNeiEXzYo27fW0wdTXqXDEyc",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},Xy=sS(Rz),qr=SP(Xy),Tf=sz(Xy),Qy=Az(Xy,"us-central1");E2(Qy,"localhost",5001);const ur={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},On={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function Cz(){const[t,e]=q.useState(""),[n,i]=q.useState(""),[a,l]=q.useState(!1),[u,d]=q.useState(!1),[f,m]=q.useState(""),y=async b=>{b.preventDefault(),d(!0),m("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(On.INVALID_EMAIL);if(n.length<6)throw new Error(On.WEAK_PASSWORD);const C=await qV(Tf,t,n);console.log("User created successfully:",C.user.uid)}catch(x){console.error("Sign up error:",x);let C="Failed to create account";x.code==="auth/email-already-in-use"?C=On.EMAIL_IN_USE:x.code==="auth/invalid-email"?C=On.INVALID_EMAIL:x.code==="auth/weak-password"?C=On.WEAK_PASSWORD:x.code==="auth/operation-not-allowed"?C="Email/password accounts are not enabled. Please contact support.":x.message&&(C=x.message),m(C)}finally{d(!1)}},v=async b=>{b.preventDefault(),d(!0),m("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(On.INVALID_EMAIL);const C=await $V(Tf,t,n);console.log("User signed in successfully:",C.user.uid)}catch(x){console.error("Sign in error:",x);let C="Failed to sign in";x.code==="auth/user-not-found"?C=On.USER_NOT_FOUND:x.code==="auth/wrong-password"?C=On.WRONG_PASSWORD:x.code==="auth/invalid-email"?C=On.INVALID_EMAIL:x.code==="auth/user-disabled"?C="This account has been disabled. Please contact support.":x.code==="auth/too-many-requests"?C=On.TOO_MANY_REQUESTS:x.message&&(C=x.message),m(C)}finally{d(!1)}};return A.jsx("div",{className:"fixed inset-0 bg-[#1a1a1d]/90 dark:bg-[#1a1a1d]/90 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:A.jsxs("div",{className:`bg-[#222226] dark:bg-[#222226] rounded-2xl shadow-[0_24px_48px_rgba(0,0,0,0.7),0_10px_20px_rgba(0,0,0,0.5)] 
                          p-8 w-full max-w-md border border-white/12 dark:border-white/12`,children:[A.jsxs("div",{className:"text-center mb-8",children:[A.jsx("div",{className:"flex items-center justify-center mb-4",children:A.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center",children:A.jsx("span",{className:"text-white font-bold text-lg",children:"T"})})}),A.jsx("h2",{className:"text-2xl font-bold text-[#f8faff] dark:text-[#f8faff] mb-2",children:a?"Join TinkFlow":"Welcome Back"}),A.jsx("p",{className:"text-[#b0b3b8] dark:text-[#b0b3b8] text-sm",children:a?"Start your AI-powered learning journey":"Continue exploring concepts with AI"})]}),A.jsxs("form",{onSubmit:a?y:v,className:"space-y-6",children:[A.jsx("div",{children:A.jsx("input",{type:"email",placeholder:"Email address",value:t,onChange:b=>e(b.target.value),required:!0,className:`w-full px-4 py-3 bg-[#2a2a2e] dark:bg-[#2a2a2e] border border-white/15 dark:border-white/15 
                                     rounded-lg text-[#f8faff] dark:text-[#f8faff] placeholder-[#8b949e] dark:placeholder-[#8b949e] 
                                     focus:outline-none focus:border-[#5a9cf8] dark:focus:border-[#5a9cf8] focus:shadow-[0_0_0_3px_rgba(90,156,248,0.25)]
                                     transition-all duration-200`})}),A.jsx("div",{children:A.jsx("input",{type:"password",placeholder:"Password",value:n,onChange:b=>i(b.target.value),required:!0,className:`w-full px-4 py-3 bg-[#2a2a2e] dark:bg-[#2a2a2e] border border-white/15 dark:border-white/15 
                                     rounded-lg text-[#f8faff] dark:text-[#f8faff] placeholder-[#8b949e] dark:placeholder-[#8b949e] 
                                     focus:outline-none focus:border-[#5a9cf8] dark:focus:border-[#5a9cf8] focus:shadow-[0_0_0_3px_rgba(90,156,248,0.25)]
                                     transition-all duration-200`})}),A.jsx("button",{type:"submit",disabled:u,className:`w-full py-3 px-4 rounded-lg font-semibold text-white transition-all duration-200 
                                   ${u?"bg-[#3a3a3e] dark:bg-[#3a3a3e] cursor-not-allowed opacity-60":"bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 active:from-indigo-700 active:to-purple-800 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"}
                                   focus:outline-none focus:shadow-[0_0_0_3px_rgba(99,102,241,0.4)]`,children:u?A.jsx("div",{className:"inline-block w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):a?"Create Account":"Sign In"}),f&&A.jsx("div",{className:`bg-red-900/20 dark:bg-red-900/30 border border-red-500/30 dark:border-red-500/40 
                                       rounded-lg p-3 text-red-400 dark:text-red-400 text-sm`,children:f})]}),A.jsxs("div",{className:"auth-switch text-center mt-6",children:[A.jsx("span",{className:"auth-switch-text text-gray-400 dark:text-gray-400 text-sm",children:a?"Already have an account?":"Don't have an account?"}),A.jsx("button",{type:"button",onClick:()=>l(!a),className:`auth-switch-btn ml-2 text-blue-400 dark:text-blue-400 hover:text-blue-300 dark:hover:text-blue-300 
                                 text-sm font-medium transition-colors duration-200 bg-transparent border-none cursor-pointer`,children:a?"Sign In":"Sign Up"})]})]})})}function Nz({show:t,onHide:e,onConfirm:n,isCreating:i=!1}){const[a,l]=q.useState(""),[u,d]=q.useState(!0),f=b=>{const x=b.target.value;l(x),d(x.trim().length>0&&x.trim().length<=50)},m=b=>{b.preventDefault();const x=a.trim();x.length>0&&x.length<=50&&(n(x),l(""),d(!0))},y=()=>{l(""),d(!0),e()},v=b=>{b.key==="Enter"&&m(b)};return t?A.jsx("div",{className:"board-name-modal fixed inset-0 bg-black/60 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-[2001]",children:A.jsxs("div",{className:"bg-gray-800 dark:bg-gray-900 rounded-xl shadow-2xl p-6 w-full max-w-md border border-gray-700 dark:border-gray-600",children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h3",{className:"text-lg font-semibold text-white dark:text-white",children:"Create New Board"}),A.jsx("button",{onClick:y,className:`text-gray-400 dark:text-gray-400 hover:text-gray-200 dark:hover:text-gray-200 
                                 bg-gray-700/50 dark:bg-gray-800/50 hover:bg-gray-600/50 dark:hover:bg-gray-700/50
                                 border border-gray-600 dark:border-gray-700 rounded-lg w-8 h-8 flex items-center justify-center
                                 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500/20`,"aria-label":"Close",children:""})]}),A.jsxs("form",{onSubmit:m,className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-300 dark:text-gray-300 mb-2",children:"Board Name"}),A.jsx("input",{type:"text",value:a,onChange:f,onKeyDown:v,placeholder:"Enter board name...",maxLength:50,autoFocus:!0,className:`w-full px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border rounded-lg 
                                       text-white dark:text-white placeholder-gray-400 dark:placeholder-gray-500 
                                       focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40 
                                       transition-all duration-200 font-medium
                                       ${u?"border-gray-600/50 dark:border-gray-700/50 focus:border-blue-500/60 dark:focus:border-blue-400/60":"border-red-500/60 dark:border-red-500/60 focus:border-red-500/60 dark:focus:border-red-500/60"}`}),!u&&A.jsx("p",{className:"text-red-400 dark:text-red-400 text-sm mt-2",children:"Board name must be between 1 and 50 characters long."}),A.jsxs("p",{className:`text-xs mt-1 ${a.length===50?"text-red-400 dark:text-red-400":"text-gray-500 dark:text-gray-500"}`,children:[a.length,"/50 characters"]})]}),A.jsxs("div",{className:"flex gap-3 pt-4",children:[A.jsx("button",{type:"button",onClick:y,disabled:i,className:`flex-1 px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border border-gray-600/50 dark:border-gray-700/50
                                     text-gray-300 dark:text-gray-300 rounded-lg font-medium transition-all duration-200
                                     hover:bg-gray-600/60 dark:hover:bg-gray-700/60 hover:border-gray-500/60 dark:hover:border-gray-600/60
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20`,children:"Cancel"}),A.jsx("button",{type:"submit",disabled:!u||a.trim().length===0||i,className:`flex-1 px-4 py-3 bg-blue-600/80 dark:bg-blue-500/80 border border-blue-500/50 dark:border-blue-400/50
                                     text-white rounded-lg font-medium transition-all duration-200 
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     hover:bg-blue-500/90 dark:hover:bg-blue-400/90 hover:border-blue-400/60 dark:hover:border-blue-300/60
                                     focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40`,children:i?"Creating...":"Create Board"})]})]})]})}):null}function Iz({allBoards:t,currentBoard:e,onSwitchBoard:n,onCreateBoard:i,onDeleteBoard:a,onSignOut:l,isLoading:u}){const[d,f]=q.useState(!1),[m,y]=q.useState(!1),[v,b]=q.useState(null),x=async L=>{try{f(!0),await i(L),y(!1)}catch(H){console.error("Error in sidebar create board:",H)}finally{f(!1)}},C=()=>{y(!0)},M=()=>{y(!1)},k=(L,H)=>{L.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&a(H)};return A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"left-0 top-0 w-[100%] h-screen bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:A.jsxs("div",{className:"flex flex-col h-full",children:[A.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/50",children:[A.jsx("h2",{className:"m-0 mb-3 text-sm font-semibold text-gray-900 dark:text-gray-100 tracking-tight",children:"TinkFlow Boards"}),A.jsx("button",{onClick:C,disabled:u||d,className:`w-full bg-blue-600 dark:bg-blue-600 text-white dark:text-white border border-blue-600 dark:border-blue-600 
                                      px-3 py-2 rounded-lg cursor-pointer text-xs font-medium transition-all duration-200 
                                      ${u||d?"cursor-not-allowed opacity-60":"hover:bg-blue-700 dark:hover:bg-blue-700 hover:border-blue-700 dark:hover:border-blue-700 hover:-translate-y-0.5 hover:shadow-md"}`,children:d?"Creating...":"+ New Board"})]}),A.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:t.map(L=>{const H=e?.id===L.id,F=v===L.id;return A.jsxs("div",{onClick:()=>!u&&n(L.id),onMouseEnter:()=>b(L.id),onMouseLeave:()=>b(null),className:`
                                        min-h-[44px] px-3 py-2.5 mb-1 rounded-lg flex justify-between items-center
                                        transition-all duration-200 cursor-pointer border font-medium text-sm leading-tight
                                        ${u?"cursor-not-allowed opacity-60":"cursor-pointer"}
                                        ${H?"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/30 text-blue-900 dark:text-blue-100 font-semibold shadow-sm":F?"border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50 text-gray-900 dark:text-gray-100 shadow-sm":"border-transparent bg-transparent text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/30"}
                                    `,role:"button",tabIndex:0,onKeyDown:j=>{(j.key==="Enter"||j.key===" ")&&!u&&n(L.id)},children:[A.jsx("span",{className:`
                                        ${H?"font-semibold":"font-medium"} 
                                        flex-1 whitespace-nowrap overflow-hidden text-ellipsis 
                                        text-sm leading-tight
                                    `,children:L.name}),A.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[L.isOpen&&A.jsx("span",{className:"text-green-500 dark:text-green-400 text-xs",children:""}),t.length>1&&A.jsx("button",{onClick:j=>{j.stopPropagation(),k(j,L.id)},title:"Delete board",className:`
                                                    w-5 h-5 bg-transparent border-none text-red-500 dark:text-red-400 
                                                    cursor-pointer text-sm leading-none flex items-center justify-center
                                                    rounded transition-all duration-150
                                                    ${F?"opacity-100 visible hover:bg-red-50 dark:hover:bg-red-900/30":"opacity-0 invisible"}
                                                    hover:text-red-600 dark:hover:text-red-300
                                                `,children:""})]})]},L.id)})}),u&&A.jsx("div",{className:"p-3 text-center text-gray-500 dark:text-gray-400 text-xs font-medium",children:"Loading boards..."}),A.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:A.jsx("button",{onClick:l,className:`w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 
                                     bg-transparent text-gray-700 dark:text-gray-300 cursor-pointer text-xs font-medium
                                     transition-all duration-200
                                     hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:border-gray-400 dark:hover:border-gray-500 
                                     hover:text-gray-900 dark:hover:text-gray-100`,children:"Sign Out"})})]})}),A.jsx(Nz,{show:m,onHide:M,onConfirm:x,isCreating:d})]})}function kz({explanation:t,onClose:e,isVisible:n}){const[i,a]=q.useState(!1),[l,u]=q.useState(n);q.useEffect(()=>{n?(u(!0),setTimeout(()=>a(!0),10)):(a(!1),setTimeout(()=>u(!1),300))},[n]);const d=()=>{a(!1),setTimeout(()=>e(),300)};return l?A.jsxs("div",{className:`h-full flex flex-col transition-all duration-300 ease-out ${i?"transform translate-x-0 opacity-100":"transform translate-x-full opacity-0"}`,children:[A.jsxs("div",{className:`flex justify-between items-center p-6 border-b border-gray-200/50 dark:border-gray-700/50 
                           transition-all duration-400 ease-out ${i?"transform translate-y-0 opacity-100":"transform -translate-y-4 opacity-0"}`,style:{transitionDelay:"50ms"},children:[A.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[A.jsx("span",{className:"text-blue-500",children:""}),"Explanation"]}),A.jsx("button",{className:`text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 
                             p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700/50 
                             transition-all duration-200 transform hover:scale-105`,onClick:d,title:"Close explanation","aria-label":"Close explanation sidebar",children:A.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:A.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),A.jsx("div",{className:"p-6 overflow-y-auto flex-1 scrollbar-thin",children:t?A.jsxs(A.Fragment,{children:[A.jsx("div",{className:`mb-6 transition-all duration-500 ease-out ${i?"transform translate-y-0 opacity-100":"transform translate-y-4 opacity-0"}`,style:{transitionDelay:"100ms"},children:A.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 leading-tight",children:t.title})}),A.jsx("div",{className:`prose prose-gray dark:prose-invert max-w-none text-gray-700 dark:text-gray-300
                                      [&>h1]:text-gray-900 [&>h1]:dark:text-gray-100 [&>h1]:text-2xl [&>h1]:font-bold [&>h1]:mb-4 [&>h1]:mt-6
                                      [&>h2]:text-gray-900 [&>h2]:dark:text-gray-100 [&>h2]:text-xl [&>h2]:font-semibold [&>h2]:mb-3 [&>h2]:mt-5
                                      [&>h3]:text-gray-900 [&>h3]:dark:text-gray-100 [&>h3]:text-lg [&>h3]:font-medium [&>h3]:mb-2 [&>h3]:mt-4
                                      [&>p]:text-gray-700 [&>p]:dark:text-gray-300 [&>p]:leading-relaxed [&>p]:mb-4
                                      [&>ul]:text-gray-700 [&>ul]:dark:text-gray-300 [&>ul]:mb-4 [&>ul>li]:mb-2
                                      [&>ol]:text-gray-700 [&>ol]:dark:text-gray-300 [&>ol]:mb-4 [&>ol>li]:mb-2
                                      [&>blockquote]:border-l-4 [&>blockquote]:border-blue-400 [&>blockquote]:pl-4 [&>blockquote]:italic [&>blockquote]:text-gray-600 [&>blockquote]:dark:text-gray-400 [&>blockquote]:bg-blue-50 [&>blockquote]:dark:bg-blue-900/20 [&>blockquote]:py-2 [&>blockquote]:rounded-r-lg
                                      [&>code]:bg-gray-100 [&>code]:dark:bg-gray-800 [&>code]:text-blue-600 [&>code]:dark:text-blue-400 [&>code]:px-2 [&>code]:py-1 [&>code]:rounded [&>code]:text-sm [&>code]:font-medium
                                      [&>pre]:bg-gray-100 [&>pre]:dark:bg-gray-800 [&>pre]:text-gray-800 [&>pre]:dark:text-gray-200 [&>pre]:p-4 [&>pre]:rounded-lg [&>pre]:overflow-x-auto [&>pre]:mb-4 [&>pre]:border [&>pre]:border-gray-200 [&>pre]:dark:border-gray-700
                                      transition-all duration-500 ease-out ${i?"transform translate-y-0 opacity-100":"transform translate-y-4 opacity-0"}`,style:{transitionDelay:"200ms"},children:A.jsx("div",{dangerouslySetInnerHTML:{__html:t.text}})})]}):A.jsx("div",{className:`flex items-center justify-center h-full text-gray-500 dark:text-gray-400 
                                   transition-all duration-500 ease-out ${i?"transform translate-y-0 opacity-100":"transform translate-y-8 opacity-0"}`,style:{transitionDelay:"150ms"},children:A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"text-6xl mb-6 opacity-60",children:""}),A.jsx("p",{className:"text-xl font-medium mb-2",children:"No explanation available"}),A.jsx("p",{className:"text-sm opacity-75",children:"Click on a node to see its explanation"})]})})})]}):null}const x2=q.createContext(void 0),Dz=()=>{const t=q.useContext(x2);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},Mz=({children:t})=>{const[e,n]=q.useState(()=>{const a=localStorage.getItem("theme");return a||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});q.useEffect(()=>{const a=window.document.documentElement;a.classList.remove("light","dark"),a.classList.add(e),localStorage.setItem("theme",e)},[e]);const i=()=>{n(a=>a==="light"?"dark":"light")};return A.jsx(x2.Provider,{value:{theme:e,toggleTheme:i},children:t})},T2=()=>{const{theme:t,toggleTheme:e}=Dz();return A.jsx("button",{onClick:e,className:`p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 
                     hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600
                     hover:border-gray-300 dark:hover:border-gray-500 transition-all duration-200 
                     focus:outline-none focus:ring-2 focus:ring-blue-500/30 dark:focus:ring-blue-400/30
                     shadow-sm hover:shadow-md`,title:`Switch to ${t==="light"?"dark":"light"} mode`,"aria-label":`Switch to ${t==="light"?"dark":"light"} mode`,children:t==="light"?A.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:A.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):A.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:A.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})})})};function Oz({name:t,onSetName:e,user:n,isSaving:i}){const[a,l]=q.useState(!1),[u,d]=q.useState(t||"");q.useEffect(()=>{d(t||"")},[t]);const f=y=>{y.key==="Enter"&&(e(u),l(!1))},m=()=>{l(!0),d(t||"")};return A.jsx(A.Fragment,{children:A.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:A.jsx("div",{className:"max-w-none mx-auto px-4",children:A.jsxs("header",{className:"flex justify-between items-center py-3",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsxs("div",{className:"flex items-center space-x-2",children:[A.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-sm",children:A.jsx("span",{className:"text-white font-bold text-sm",children:"T"})}),A.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"TinkFlow"})]}),A.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:""}),a?A.jsx("input",{type:"text",value:u,onChange:y=>d(y.target.value),onKeyDown:f,onBlur:()=>{e(u),l(!1)},className:`bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 
                                             rounded-md px-2 py-1 text-gray-900 dark:text-gray-100 text-sm min-w-[120px]
                                             focus:outline-none focus:border-blue-500 dark:focus:border-blue-400 focus:ring-2 focus:ring-blue-500/20`,autoFocus:!0}):A.jsx("button",{onClick:m,className:`bg-transparent border-none text-gray-600 dark:text-gray-400 text-sm cursor-pointer 
                                             px-2 py-1 rounded-md transition-all duration-150 ease-in-out
                                             hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-100`,children:t||"Untitled Board"})]}),A.jsxs("div",{className:"flex items-center gap-3",children:[i&&A.jsxs("div",{className:`text-green-600 dark:text-green-400 text-sm flex items-center gap-2 
                                               bg-green-50 dark:bg-green-900/20 px-3 py-1.5 rounded-full border border-green-200 dark:border-green-700/50
                                               animate-pulse`,children:[A.jsx("div",{className:"w-2 h-2 bg-green-500 dark:bg-green-400 rounded-full animate-bounce"}),A.jsx("span",{className:"font-medium",children:"Saving..."})]}),A.jsx(T2,{}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-gray-400 to-gray-500 rounded-full flex items-center justify-center",children:A.jsx("span",{className:"text-white font-medium text-xs",children:n?.isAnonymous?"G":n?.email?.charAt(0).toUpperCase()||"U"})}),A.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm font-medium",children:n?.isAnonymous?"Guest":n?.email?.split("@")[0]||"User"})]})]})]})})})})}const Pz=({notification:t,onRemove:e})=>{const n=a=>{switch(a){case"success":return"";case"error":return"";case"warning":return"";case"info":return"";default:return""}},i=a=>{switch(a){case"success":return"bg-green-900/20 dark:bg-green-900/30 border-green-500/30 dark:border-green-500/40 text-green-300 dark:text-green-400";case"error":return"bg-red-900/20 dark:bg-red-900/30 border-red-500/30 dark:border-red-500/40 text-red-300 dark:text-red-400";case"warning":return"bg-yellow-900/20 dark:bg-yellow-900/30 border-yellow-500/30 dark:border-yellow-500/40 text-yellow-300 dark:text-yellow-400";case"info":return"bg-blue-900/20 dark:bg-blue-900/30 border-blue-500/30 dark:border-blue-500/40 text-blue-300 dark:text-blue-400";default:return"bg-gray-900/20 dark:bg-gray-900/30 border-gray-500/30 dark:border-gray-500/40 text-gray-300 dark:text-gray-400"}};return A.jsxs("div",{className:`notification relative min-w-80 max-w-md p-4 rounded-xl border shadow-2xl backdrop-blur-sm                         transform transition-all duration-300 ease-out hover:scale-[1.02] hover:shadow-3xl                        ${i(t.type)}`,children:[" ",A.jsxs("div",{className:"flex items-start gap-3",children:[" ",A.jsxs("span",{className:"text-lg flex-shrink-0 mt-0.5",children:[" ",n(t.type)," "]})," ",A.jsxs("div",{className:"flex-1 min-w-0",children:[" ",A.jsxs("p",{className:"text-sm font-medium leading-5 break-words",children:[" ",t.message," "]})," "]})," ",A.jsxs("button",{onClick:()=>e(t.id),className:"flex-shrink-0 text-gray-400 dark:text-gray-500 hover:text-gray-200 dark:hover:text-gray-300                              hover:bg-gray-700/50 dark:hover:bg-gray-600/50                              rounded-full p-1 transition-all duration-200                              focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20","aria-label":"Close notification",children:[" ",A.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[" ",A.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})," "]})," "]})," "]})," "]})},Vz=({notifications:t,onRemove:e})=>A.jsxs("div",{className:"notification-container fixed top-4 right-4 space-y-3 z-[2000] pointer-events-none",children:[" ",t.map(n=>A.jsxs("div",{className:"pointer-events-auto",children:[" ",A.jsx(Pz,{notification:n,onRemove:e})," "]},n.id))," "]});function zz({onLogin:t}){return A.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 antialiased",children:[" "," ",A.jsxs("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50",children:[" ",A.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",A.jsxs("div",{className:"flex justify-between items-center py-4",children:[" ",A.jsxs("div",{className:"flex items-center space-x-3",children:[" ",A.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",A.jsx("span",{className:"text-white font-bold text-lg",children:"T"})," "]})," ",A.jsxs("div",{className:"flex flex-col",children:[" ",A.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white tracking-tight",children:"TinkFlow"})," ",A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"AI Learning Platform"})," "]})," "]})," ",A.jsxs("div",{className:"flex items-center gap-4",children:[" ",A.jsx(T2,{})," ",A.jsxs("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors duration-200",children:[" ","Get Started"," "]})," "]})," "]})," "]})," "]})," "," ",A.jsxs("section",{className:"relative overflow-hidden",children:[" ",A.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-32",children:[" ",A.jsxs("div",{className:"text-center",children:[" ",A.jsxs("div",{className:"inline-flex items-center gap-2 bg-indigo-50 dark:bg-indigo-900/20 px-4 py-2 rounded-full mb-8",children:[" ",A.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"})," ",A.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 font-medium text-sm",children:"AI-Powered Concept Learning"})," "]})," ",A.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-gray-900 dark:text-white mb-6 leading-tight",children:[" ","Learn & Tinker with"," ",A.jsxs("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent block",children:[" ","AI-Powered Concepts"," "]})," "]})," ",A.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-3xl mx-auto leading-relaxed",children:[" ","TinkFlow is the ultimate AI-powered platform for exploring, understanding, and experimenting with new concepts. Transform your learning journey with interactive visual flows and intelligent insights."," "]})," ",A.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[" ",A.jsxs("button",{onClick:t,className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning Now"," "]})," ",A.jsxs("button",{className:"px-8 py-4 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-semibold text-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",children:[" ","Watch Demo"," "]})," "]})," "]})," "]})," "," ",A.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-indigo-400 to-purple-500 rounded-full opacity-10 blur-3xl"})," ",A.jsx("div",{className:"absolute top-1/4 right-1/4 w-64 h-64 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full opacity-10 blur-2xl"})," "]})," "," ",A.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",A.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",A.jsxs("div",{className:"text-center mb-16",children:[" ",A.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Everything You Need to Learn"," "]})," ",A.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","AI-powered tools and features designed to accelerate your learning and conceptual understanding"," "]})," "]})," ",A.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",A.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-indigo-200 dark:border-indigo-700/50 hover:transform hover:-translate-y-1",children:[" ",A.jsxs("div",{className:"w-14 h-14 bg-indigo-500 rounded-xl flex items-center justify-center mb-6",children:[" ",A.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})," "]})," "]})," ",A.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI-Powered Insights"," "]})," ",A.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Get intelligent explanations and connections between concepts powered by advanced AI that understands your learning style."," "]})," "]})," ",A.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-purple-200 dark:border-purple-700/50 hover:transform hover:-translate-y-1",children:[" ",A.jsxs("div",{className:"w-14 h-14 bg-purple-500 rounded-xl flex items-center justify-center mb-6",children:[" ",A.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"})," "]})," "]})," ",A.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Interactive Visual Flows"," "]})," ",A.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Build and explore concept maps with interactive nodes that respond to your curiosity and create dynamic learning pathways."," "]})," "]})," ",A.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-green-200 dark:border-green-700/50 hover:transform hover:-translate-y-1",children:[" ",A.jsxs("div",{className:"w-14 h-14 bg-green-500 rounded-xl flex items-center justify-center mb-6",children:[" ",A.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})," "]})," "]})," ",A.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Experimentation Sandbox"," "]})," ",A.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Tinker with concepts in a safe, guided environment where you can test ideas and see instant results with AI feedback."," "]})," "]})," "]})," "]})," "]})," "," ",A.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",A.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",A.jsxs("div",{className:"text-center mb-16",children:[" ",A.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","How TinkFlow Works"," "]})," ",A.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Three simple steps to unlock your learning potential with AI-powered concept exploration"," "]})," "]})," ",A.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",A.jsxs("div",{className:"text-center",children:[" ",A.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",A.jsx("span",{className:"text-white font-bold text-xl",children:"1"})," "]})," ",A.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Input Your Concept"," "]})," ",A.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Start by entering any topic, question, or concept you want to explore. Our AI understands context and complexity."," "]})," "]})," ",A.jsxs("div",{className:"text-center",children:[" ",A.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",A.jsx("span",{className:"text-white font-bold text-xl",children:"2"})," "]})," ",A.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI Generates Flow"," "]})," ",A.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Watch as TinkFlow creates an interactive visual map with connected nodes, each representing key aspects of your concept."," "]})," "]})," ",A.jsxs("div",{className:"text-center",children:[" ",A.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",A.jsx("span",{className:"text-white font-bold text-xl",children:"3"})," "]})," ",A.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Explore & Learn"," "]})," ",A.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Click on any node to dive deeper, ask questions, and watch new connections emerge as you explore your learning path."," "]})," "]})," "]})," "]})," "]})," "," ",A.jsxs("section",{className:"py-20 bg-gradient-to-r from-indigo-500 to-purple-600",children:[" ",A.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",A.jsxs("div",{className:"grid md:grid-cols-4 gap-8 text-center",children:[" ",A.jsxs("div",{className:"text-white",children:[" ",A.jsx("div",{className:"text-4xl font-bold mb-2",children:"10K+"})," ",A.jsx("div",{className:"text-indigo-100",children:"Concepts Explored"})," "]})," ",A.jsxs("div",{className:"text-white",children:[" ",A.jsx("div",{className:"text-4xl font-bold mb-2",children:"5K+"})," ",A.jsx("div",{className:"text-indigo-100",children:"Active Learners"})," "]})," ",A.jsxs("div",{className:"text-white",children:[" ",A.jsx("div",{className:"text-4xl font-bold mb-2",children:"98%"})," ",A.jsx("div",{className:"text-indigo-100",children:"Learning Success"})," "]})," ",A.jsxs("div",{className:"text-white",children:[" ",A.jsx("div",{className:"text-4xl font-bold mb-2",children:"24/7"})," ",A.jsx("div",{className:"text-indigo-100",children:"AI Support"})," "]})," "]})," "]})," "]})," "," ",A.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",A.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",A.jsxs("div",{className:"text-center mb-16",children:[" ",A.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Perfect for Every Learning Style"," "]})," ",A.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Whether you're a student, researcher, or curious mind, TinkFlow adapts to your learning needs"," "]})," "]})," ",A.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[" ",A.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/10 dark:to-blue-800/10 p-8 rounded-2xl border border-blue-200 dark:border-blue-700/30",children:[" ",A.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Academic Learning"," "]})," ",A.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Break down complex academic subjects into digestible, interconnected concepts. Perfect for studying sciences, humanities, and technical topics."," "]})," ",A.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",A.jsx("li",{children:" Research paper analysis"})," ",A.jsx("li",{children:" Concept mapping for exams"})," ",A.jsx("li",{children:" Cross-disciplinary connections"})," "]})," "]})," ",A.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/10 dark:to-purple-800/10 p-8 rounded-2xl border border-purple-200 dark:border-purple-700/30",children:[" ",A.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Creative Exploration"," "]})," ",A.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Explore ideas, brainstorm solutions, and discover unexpected connections. Great for creative professionals and innovators."," "]})," ",A.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",A.jsx("li",{children:" Idea generation workflows"})," ",A.jsx("li",{children:" Problem-solving frameworks"})," ",A.jsx("li",{children:" Innovation mapping"})," "]})," "]})," ",A.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/10 dark:to-green-800/10 p-8 rounded-2xl border border-green-200 dark:border-green-700/30",children:[" ",A.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Technical Deep Dives"," "]})," ",A.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Understand complex systems, architectures, and technologies through interactive exploration and AI-guided explanations."," "]})," ",A.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",A.jsx("li",{children:" System architecture learning"})," ",A.jsx("li",{children:" Technology stack exploration"})," ",A.jsx("li",{children:" Code concept mapping"})," "]})," "]})," ",A.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/10 dark:to-orange-800/10 p-8 rounded-2xl border border-orange-200 dark:border-orange-700/30",children:[" ",A.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Professional Development"," "]})," ",A.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Build skills, understand industry trends, and create learning paths for career advancement with AI-powered insights."," "]})," ",A.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",A.jsx("li",{children:" Skill gap analysis"})," ",A.jsx("li",{children:" Career pathway planning"})," ",A.jsx("li",{children:" Industry trend mapping"})," "]})," "]})," "]})," "]})," "]})," "," ",A.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",A.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[" ",A.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-6",children:[" ","Ready to Transform Your Learning?"," "]})," ",A.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10",children:[" ","Join thousands of learners who are already exploring concepts in revolutionary ways with TinkFlow's AI-powered platform."," "]})," ",A.jsxs("button",{onClick:t,className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-12 py-4 rounded-xl text-lg font-semibold hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning for Free"," "]})," ",A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:[" ","No credit card required  Get started in seconds"," "]})," "]})," "]})," "," ",A.jsxs("footer",{className:"bg-gray-900 text-white py-12",children:[" ",A.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",A.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[" ",A.jsxs("div",{className:"col-span-1",children:[" ",A.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[" ",A.jsxs("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",A.jsx("span",{className:"text-white font-bold text-sm",children:"T"})," "]})," ",A.jsx("span",{className:"text-xl font-bold",children:"TinkFlow"})," "]})," ",A.jsxs("p",{className:"text-gray-400 text-sm",children:[" ","AI-powered concept learning platform for curious minds."," "]})," "]})," ",A.jsxs("div",{children:[" ",A.jsx("h4",{className:"font-semibold mb-4",children:"Product"})," ",A.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",A.jsx("li",{children:A.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Features"})})," ",A.jsx("li",{children:A.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Pricing"})})," ",A.jsx("li",{children:A.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"API"})})," "]})," "]})," ",A.jsxs("div",{children:[" ",A.jsx("h4",{className:"font-semibold mb-4",children:"Resources"})," ",A.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",A.jsx("li",{children:A.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Documentation"})})," ",A.jsx("li",{children:A.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Tutorials"})})," ",A.jsx("li",{children:A.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Blog"})})," "]})," "]})," ",A.jsxs("div",{children:[" ",A.jsx("h4",{className:"font-semibold mb-4",children:"Company"})," ",A.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",A.jsx("li",{children:A.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About"})})," ",A.jsx("li",{children:A.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})})," ",A.jsx("li",{children:A.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy"})})," "]})," "]})," "]})," ",A.jsxs("div",{className:"border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[" ",A.jsxs("p",{className:"text-gray-400 text-sm",children:[" "," 2024 TinkFlow. All rights reserved."," "]})," ",A.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[" ",A.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",A.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",A.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})," "]})," "]})," ",A.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",A.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",A.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})," "]})," "]})," ",A.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",A.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",A.jsx("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.747.099.12.112.225.085.344-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.001 12.017z"})," "]})," "]})," "]})," "]})," "]})," "]})," "]})}const Lz=async()=>{try{await KV(Tf),console.log("User signed out successfully")}catch(t){throw console.error("Error signing out:",t),t}},Uz=()=>{const[t,e]=q.useState(null);return q.useEffect(()=>{const i=YV(Tf,a=>{e(a),a?console.log("User signed in:",a.uid):console.log("No user signed in")});return()=>i()},[]),{user:t,signOut:async()=>{try{await Lz(),e(null)}catch(i){console.error("Error in sign out:",i)}}}},S2=t=>!!(t&&t.uid),uc=[{id:"1",type:"staticEditable",data:{label:"The _artificial intelligence_ system processes _natural language_ effectively",title:"AI & Natural Language",suggestions:["Machine Learning","Neural Networks","Deep Learning"],tokenColors:{},previousNode:null},position:{x:250,y:25},draggable:!1}],El=[],Bz=async t=>{if(!S2({uid:t}))throw new Error(On.AUTH_REQUIRED);try{const e=Ty(qr,ur.BOARDS),n=VP(e,zP("userId","==",t),LP("createdAt","desc")),i=await Vy(n);if(i.empty){const l={id:`board_${Date.now()}`,userId:t,name:"Default Board",createdAt:_t.now(),isOpen:!0};return await zy(Ul(qr,ur.BOARDS,l.id),l),console.log("Created default board:",l),[l]}const a=i.docs.map(l=>({id:l.id,...l.data()}));return console.log("Fetched all boards:",a),a}catch(e){if(console.error("Fetch all boards error:",e),e.code==="failed-precondition"||e.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:t,name:"Fallback Board (Create Index)",createdAt:_t.now(),isOpen:!0,isFallback:!0}]}throw new Error(On.LOAD_FAILED)}},nx=async t=>{if(!t)return console.warn("No board ID provided for fetching nodes"),uc;try{const e=Ty(qr,ur.BOARDS,t,ur.NODES),n=await Vy(e);if(n.empty)return console.log("No nodes found for board, using initial nodes"),uc;const i=n.docs.map(a=>{const l=a.data(),u={...l.data,tokenColors:l.data?.tokenColors||{},previousNode:l.data?.previousNode||null};return{id:a.id,type:l.type,position:l.position,data:u,draggable:l.draggable,style:l.style}});return console.log("Fetched nodes from board:",i),i}catch(e){return console.error("Fetch nodes error:",e),uc}},rx=async t=>{if(!t)return console.warn("No board ID provided for fetching edges"),El;try{const e=Ty(qr,ur.BOARDS,t,ur.EDGES),n=await Vy(e);if(n.empty)return console.log("No edges found for board, using initial edges"),El;const i=n.docs.map(a=>({id:a.id,...a.data()}));return console.log("Fetched edges from board:",i),i}catch(e){return console.error("Fetch edges error:",e),El}},jz=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving nodes:",{boardId:t,nodesCount:e?.length});return}try{const n=LA(qr);e.forEach(i=>{const a=Ul(qr,ur.BOARDS,t,ur.NODES,i.id),l={type:i.type,data:i.data,position:i.position,updatedAt:_t.now()};i.draggable!=null&&(l.draggable=i.draggable),i.style!=null&&(l.style=i.style),n.set(a,l)}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(On.SAVE_FAILED)}},Hz=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving edges:",{boardId:t,edgesCount:e?.length});return}try{const n=LA(qr);e.forEach(i=>{const a=Ul(qr,ur.BOARDS,t,ur.EDGES,i.id),l={source:i.source,target:i.target,updatedAt:_t.now()};i.sourceHandle!=null&&(l.sourceHandle=i.sourceHandle),i.targetHandle!=null&&(l.targetHandle=i.targetHandle),i.style!=null&&(l.style=i.style),i.markerEnd!=null&&(l.markerEnd=i.markerEnd),n.set(a,l)}),await n.commit(),console.log("Edges saved to board")}catch(n){throw console.error("Save edges error:",n),new Error(On.SAVE_FAILED)}},qz=async(t,e,n)=>{if(!S2({uid:t}))throw new Error(On.AUTH_REQUIRED);try{const i={id:`board_${Date.now()}`,userId:t,name:e||`Board ${n.length+1}`,createdAt:_t.now(),isOpen:!1};return console.log("Creating board:",i),await zy(Ul(qr,ur.BOARDS,i.id),i),console.log("Board created successfully:",i),i}catch(i){throw console.error("Error creating new board:",i),i.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):i.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},$z=async t=>{if(!t)throw new Error("Board ID is required for deletion");try{await $P(Ul(qr,ur.BOARDS,t)),console.log("Board deleted successfully")}catch(e){throw console.error("Error deleting board:",e),e.code==="permission-denied"?new Error("Permission denied. Cannot delete this board."):e}},rl=async(t,e)=>{if(!t||!e)throw new Error("Board ID and updates are required");try{const n={...e,updatedAt:_t.now()};await zy(Ul(qr,ur.BOARDS,t),n,{merge:!0}),console.log("Board status updated:",n)}catch(n){throw console.error("Error updating board status:",n),n}},Fz=t=>{if(!t||!t.data)return t;const e={...t},n={...t.data};return n.title||(n.title=n.label||n.summary||"Node"),n.suggestions||(n.suggestions=[]),e.draggable===void 0&&(e.draggable=!0),e.data=n,e},Gz=t=>Array.isArray(t)?t.map(Fz):[],Yz=(t,e={})=>{const[n,i,a]=FD([]),[l,u,d]=GD([]),[f,m]=q.useState(!0),[y,v]=q.useState(!1),[b,x]=q.useState(!1),[C,M]=q.useState([]),[k,L]=q.useState(null),H=q.useRef(null),{showSuccess:F,showError:j,showInfo:Q}=e,K=R=>{const D=R.find(G=>G.isOpen===!0);if(D)return D;if(R.length>0){const G={...R[0],isOpen:!0};return rl(G.id,G).catch(console.error),G}return null};q.useEffect(()=>{(async()=>{if(t)try{m(!0);const D=await Bz(t.uid);M(D);const G=D.some(J=>J.isFallback);G&&j&&j("Database index missing. Please create the required Firestore index. Check console for details.");const O=K(D);if(!O){console.error("No board found for user"),j&&j("No boards found. Creating a default board..."),i(uc),u(El);return}L(O);const[Y,ne]=await Promise.all([nx(O.id),rx(O.id)]);i(Y),u(ne),Q&&!G&&Q("Board loaded successfully!")}catch(D){console.error("Error loading initial data:",D),j&&j("Failed to load board data. Using default board."),i(uc),u(El)}finally{m(!1)}})()},[t,i,u]);const S=async(R,D,G)=>{H.current&&clearTimeout(H.current);const O=setTimeout(async()=>{try{x(!0);const Y=[];D&&D.length>0&&Y.push(jz(R,D)),G&&G.length>0&&Y.push(Hz(R,G)),Y.length>0&&(await Promise.all(Y),console.log("Auto-save completed successfully"))}catch(Y){console.error("Auto-save failed:",Y),j&&j("Failed to save changes automatically")}finally{x(!1),H.current=null}},1e3);H.current=O};q.useEffect(()=>(!f&&k&&!y&&!k.isFallback&&S(k.id,n,l),()=>{H.current&&clearTimeout(H.current)}),[n,l,f,k,y]);const T=async R=>{try{if(k?.id===R)return;if(k?.isFallback||C.find(G=>G.id===R)?.isFallback){j&&j("Cannot switch to fallback board. Please create the missing Firestore index first.");return}if(v(!0),k&&!k.isFallback){const G={...k,isOpen:!1};await rl(k.id,G),M(O=>O.map(Y=>Y.id===k.id?G:Y))}const D=C.find(G=>G.id===R);if(D){const G={...D,isOpen:!0};await rl(R,G),L(G),M(J=>J.map(z=>z.id===R?G:z));const[O,Y]=await Promise.all([nx(R),rx(R)]),ne=Gz(O);i(ne),u(Y),F&&F(`Switched to "${G.name}"`)}else console.error("Board not found:",R),j&&j("Board not found")}catch(D){console.error("Error switching board:",D),j&&j("Failed to switch board. Please try again.")}finally{v(!1)}};return{nodes:n,edges:l,allBoards:C,currentBoard:k,isLoading:f,isSwitchingBoard:y,isSaving:b,onNodesChange:a,onEdgesChange:d,setNodes:i,switchToBoard:T,createNewBoard:async R=>{try{if(!t)return j&&j("You must be logged in to create a board"),null;Q&&Q("Creating new board...");const D=await qz(t.uid,R||null,C);if(D){if(k&&!k.isFallback){const O={...k,isOpen:!1};rl(k.id,O).catch(console.error)}const G={...D,isOpen:!0};return M(O=>{const Y=O.map(ne=>ne.id===k?.id?{...ne,isOpen:!1}:ne);return[G,...Y]}),L(G),rl(D.id,G).catch(console.error),i([{id:"1",type:"staticEditable",data:{label:R||"New Board"},position:{x:250,y:25},draggable:!1}]),u(El),F&&F(`Board "${D.name}" created and opened!`),G}else return j&&j("Failed to create board. Please try again."),null}catch(D){return j&&j(`Failed to create board: ${D.message}`),null}},deleteBoard:async R=>{try{if(C.length<=1){j&&j("Cannot delete the last board!");return}if(!C.find(G=>G.id===R)){console.error("Board not found for deletion"),j&&j("Board not found");return}if(Q&&Q("Deleting board..."),k?.id===R){const G=C.find(O=>O.id!==R);G&&await T(G.id)}await $z(R),M(G=>G.filter(O=>O.id!==R)),F&&F("Board deleted successfully!")}catch(D){console.error("Error deleting board:",D),j&&j("Failed to delete board. Please try again.")}},updateBoardName:async R=>{if(k&&k.name!==R){const D={...k,name:R};L(D),M(G=>G.map(O=>O.id===k.id?D:O));try{await rl(k.id,D),console.log("Board name updated successfully")}catch(G){console.error("Error updating board name:",G)}}},clearBoardState:()=>{H.current&&(clearTimeout(H.current),H.current=null),M([]),L(null),i([]),u([]),m(!0),v(!1),x(!1)}}},Kz=()=>{const[t,e]=q.useState([]),n=m=>{e(y=>y.filter(v=>v.id!==m))},i=m=>{const y=Date.now().toString(),v={id:y,timestamp:new Date,...m};return e(b=>[...b,v]),m.autoRemove!==!1&&setTimeout(()=>{n(y)},m.duration||5e3),y};return{notifications:t,addNotification:i,removeNotification:n,clearAllNotifications:()=>{e([])},showSuccess:(m,y={})=>i({type:"success",message:m,...y}),showError:(m,y={})=>i({type:"error",message:m,duration:7e3,...y}),showInfo:(m,y={})=>i({type:"info",message:m,...y}),showWarning:(m,y={})=>i({type:"warning",message:m,duration:6e3,...y})}},A2=t=>{const e=[],n=t.split("_");for(let i=0;i<n.length;i++)if(i%2===0)n[i].split(/\s+/).filter(l=>l.trim()!=="").forEach(l=>{e.push({word:l.trim()})});else{const a=n[i].trim();a.split(/\s+/).filter(u=>u.trim()!=="").forEach(u=>{e.push({word:u.trim(),myConcept:a})})}return e},ix=()=>{const t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];return t[Math.floor(Math.random()*t.length)]},$h=t=>{if(!t)return"#000000";const e=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),i=parseInt(t.substring(5,7),16);return(e*299+n*587+i*114)/1e3>=128?"#000000":"#ffffff"},Fh=(t,e)=>{if(!t)return"#000000";let n=t.startsWith("#")?t.substring(1):t;const i=parseInt(n,16),a=255,l=e,u=i>>16,d=i>>8&255,f=i&255,m=Math.round((a-u)*l)+u,y=Math.round((a-d)*l)+d,v=Math.round((a-f)*l)+f;return`#${(16777216+m*65536+y*256+v).toString(16).slice(1)}`},Xz=t=>{const e=t.replace("#",""),n=parseInt(e.substr(0,2),16),i=parseInt(e.substr(2,2),16),a=parseInt(e.substr(4,2),16),l=30,u=Math.min(255,Math.max(0,n+(Math.random()-.5)*l*2)),d=Math.min(255,Math.max(0,i+(Math.random()-.5)*l*2)),f=Math.min(255,Math.max(0,a+(Math.random()-.5)*l*2));return`#${Math.round(u).toString(16).padStart(2,"0")}${Math.round(d).toString(16).padStart(2,"0")}${Math.round(f).toString(16).padStart(2,"0")}`},Qz=t=>{const i=(Math.random()-.5)*150*2;return{x:t.x+i,y:t.y+200}},Wz=()=>`node_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Zz=(t,e)=>`edge_${t}_${e}`,Jz=(t,e,n,i,a,l,u)=>({id:Wz(),type:"draggableEditable",position:t,draggable:!0,data:{label:e,title:e,summary:i,full_text:n,suggestions:[],myColor:a,tokenColors:{},previousNode:u}}),eL=(t,e,n,i)=>({id:Zz(t,e),source:t,target:e,sourceHandle:i,targetHandle:null,style:{stroke:n,strokeWidth:3},markerEnd:{type:pc.ArrowClosed,color:n}}),tL=t=>t.replace(/\*\*(.*?)\*\*/g,"<strong class='font-semibold text-gray-900 dark:text-gray-100'>$1</strong>").replace(/\((.*?)\)\[(.*?)\]/g,'<a href="$2" target="_blank" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline transition-colors duration-200">$1</a>'),nL=t=>t.map(n=>{const i=Object.keys(n)[0],a=n[i];switch(i){case"large_header":return`<h1 class="text-4xl lg:text-5xl font-bold my-8 text-gray-900 dark:text-gray-100 leading-tight border-b-4 border-blue-600 dark:border-blue-400 pb-2 transition-colors duration-200">${a}</h1>`;case"small_header":return`<h2 class="text-2xl lg:text-3xl font-semibold mt-6 mb-3 text-gray-800 dark:text-gray-200 leading-snug transition-colors duration-200">${a}</h2>`;case"ul":return`<ul class="my-4 pl-6 space-y-2 list-disc list-inside text-gray-700 dark:text-gray-300 transition-colors duration-200">${a.map(B=>`<li class="text-gray-700 dark:text-gray-300 transition-colors duration-200">${B}</li>`).join("")}</ul>`;case"ol":return`<ol class="my-4 pl-6 space-y-2 list-decimal list-inside text-gray-700 dark:text-gray-300 transition-colors duration-200">${a.map(B=>`<li class="text-gray-700 dark:text-gray-300 transition-colors duration-200">${B}</li>`).join("")}</ol>`;case"quiz":const d=a,f=`quiz-set-${Math.random().toString(36).substr(2,9)}`,m=d.map((B,R)=>{const D=`${f}-q${R}`,G=B.answers.map((J,z)=>{const W=Object.keys(J)[0],re=J[W],X=z===B.correctAnswer;return`<button class="quiz-answer w-full bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-lg p-4 text-left font-medium text-gray-700 dark:text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 hover:border-blue-500 dark:hover:border-blue-400 transition-all duration-200 transform hover:scale-[1.02] disabled:cursor-not-allowed disabled:opacity-60" onclick="${`
                                        const quiz = document.getElementById('${D}');
                                        const hintDiv = document.getElementById('${D}-hint');
                                        const resultDiv = document.getElementById('${D}-result');
                                        const nextBtn = document.getElementById('${D}-next');
                                        const buttons = quiz.querySelectorAll('.quiz-answer');
                                        const selectedButton = this;
                                        
                                        if (${X}) {
                                            // Correct answer
                                            hintDiv.classList.add('hidden');
                                            resultDiv.classList.remove('hidden');
                                            if (nextBtn) nextBtn.classList.remove('hidden');
                                            buttons.forEach(btn => btn.disabled = true);
                                            selectedButton.classList.add('quiz-correct');
                                            selectedButton.classList.remove('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                        } else {
                                            // Wrong answer - show hint
                                            hintDiv.textContent = '${re.replace(/'/g,"\\'")}';
                                            hintDiv.classList.remove('hidden');
                                            selectedButton.classList.add('quiz-incorrect');
                                            selectedButton.classList.remove('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                            selectedButton.disabled = true;
                                        }
                                    `}">${W}</button>`}).join(""),O=`
                                const quiz = document.getElementById('${D}');
                                const hintDiv = document.getElementById('${D}-hint');
                                const resultDiv = document.getElementById('${D}-result');
                                const nextBtn = document.getElementById('${D}-next');
                                const buttons = quiz.querySelectorAll('.quiz-answer');
                                
                                // Reset all states
                                hintDiv.classList.add('hidden');
                                hintDiv.textContent = '';
                                resultDiv.classList.add('hidden');
                                if (nextBtn) nextBtn.classList.add('hidden');
                                
                                buttons.forEach(btn => {
                                    btn.disabled = false;
                                    btn.classList.remove('quiz-correct', 'quiz-incorrect');
                                    btn.classList.add('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                });
                            `,Y=R<d.length-1?`
                                document.getElementById('${f}-q${R}').classList.add('hidden');
                                document.getElementById('${f}-q${R+1}').classList.remove('hidden');
                            `:`
                                document.getElementById('${f}-completion').classList.remove('hidden');
                                document.getElementById('${D}').classList.add('hidden');
                            `,ne=R<d.length-1?`<button id="${D}-next" class="hidden bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200" onclick="${Y}">Next Question </button>`:`<button id="${D}-next" class="hidden bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200" onclick="${Y}">Finish Quiz </button>`;return`
                                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6 transition-colors duration-200 ${R===0?"":"hidden"}" id="${D}">
                                    <div class="text-sm font-medium text-blue-600 dark:text-blue-400 mb-2 text-center">Question ${R+1} of ${d.length}</div>
                                    <div class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-6 text-center leading-relaxed">${B.question}</div>
                                    <div class="space-y-3 mb-4">
                                        ${G}
                                    </div>
                                    <div id="${D}-hint" class="hidden bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-700 rounded-lg p-4 text-yellow-800 dark:text-yellow-200 text-sm italic animate-fade-in"></div>
                                    <div id="${D}-result" class="hidden bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-700 rounded-lg p-6 text-center">
                                        <p class="text-xl font-bold text-green-800 dark:text-green-200 mb-4"> Excellent! </p>
                                        <div class="flex flex-col sm:flex-row gap-3 justify-center">
                                            <button class="bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200" onclick="${O}"> Try Again</button>
                                            ${ne}
                                        </div>
                                    </div>
                                </div>
                            `}).join(""),y=`
                        document.getElementById('${f}-completion').classList.add('hidden');
                        document.getElementById('${f}-q0').classList.remove('hidden');
                        // Reset all questions
                        ${d.map((B,R)=>`
                            const quiz${R} = document.getElementById('${f}-q${R}');
                            if (quiz${R}) {
                                const hintDiv = document.getElementById('${f}-q${R}-hint');
                                const resultDiv = document.getElementById('${f}-q${R}-result');
                                const nextBtn = document.getElementById('${f}-q${R}-next');
                                const buttons = quiz${R}.querySelectorAll('.quiz-answer');
                                
                                hintDiv.classList.add('hidden');
                                hintDiv.textContent = '';
                                resultDiv.classList.add('hidden');
                                if (nextBtn) nextBtn.classList.add('hidden');
                                
                                buttons.forEach(btn => {
                                    btn.disabled = false;
                                    btn.classList.remove('quiz-correct', 'quiz-incorrect');
                                    btn.classList.add('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                });
                                
                                if (${R} > 0) quiz${R}.classList.add('hidden');
                            }
                        `).join("")}
                    `;return`
                        <div class="my-8" id="${f}">
                            ${m}
                            <div id="${f}-completion" class="hidden bg-gradient-to-br from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 border-2 border-green-200 dark:border-green-700 rounded-xl p-8 text-center">
                                <div class="text-4xl mb-4"></div>
                                <h3 class="text-2xl font-bold text-green-800 dark:text-green-200 mb-2">Quiz Completed!</h3>
                                <p class="text-green-700 dark:text-green-300 mb-6">Congratulations! You've successfully completed all ${d.length} questions.</p>
                                <button class="bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white px-8 py-3 rounded-lg font-semibold shadow-lg transform hover:scale-105 transition-all duration-200" onclick="${y}"> Start Over</button>
                            </div>
                        </div>
                    `;case"img":const[v,b]=a;return`<figure class="my-6 text-center">
                        <img src="${v}" alt="${b}" 
                             class="max-w-full h-auto rounded-lg shadow-lg mx-auto transition-transform duration-200 hover:scale-105"
                             onerror="this.onerror=null; this.src='${v}' + Math.floor(Math.random()*1000); this.alt='Fallback image (original failed to load)';" />
                        <figcaption class="mt-2 text-sm italic text-gray-600 dark:text-gray-400">${b}</figcaption>
                    </figure>`;case"vid":const[x,C]=a,k=(B=>{const R=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,D=B.match(R);return D&&D[2].length===11?D[2]:null})(x);return k?`<figure class="my-6 text-center">
                            <div class="relative w-full max-w-4xl mx-auto" style="padding-bottom: 56.25%; height: 0;">
                                <iframe 
                                    src="https://www.youtube.com/embed/${k}" 
                                    class="absolute top-0 left-0 w-full h-full rounded-lg shadow-lg"
                                    frameborder="0" 
                                    allowfullscreen>
                                </iframe>
                            </div>
                            <figcaption class="mt-2 text-sm italic text-gray-600 dark:text-gray-400">${C}</figcaption>
                        </figure>`:`<figure class="my-6 text-center">
                            <video controls class="max-w-full h-auto rounded-lg shadow-lg mx-auto" src="${x}"></video>
                            <figcaption class="mt-2 text-sm italic text-gray-600 dark:text-gray-400">${C}</figcaption>
                        </figure>`;case"gif":const[L,H]=a;return`<figure class="my-6 text-center">
                        <img src="${L}" alt="${H}" 
                             class="max-w-full h-auto rounded-lg shadow-lg mx-auto transition-transform duration-200 hover:scale-105"
                             onerror="this.onerror=null; this.src='${L}' + Math.floor(Math.random()*1000); this.alt='Fallback image (original GIF failed to load)';" />
                        <figcaption class="mt-2 text-sm italic text-gray-600 dark:text-gray-400">${H}</figcaption>
                    </figure>`;case"textblock":return`<div class="my-4 leading-relaxed text-gray-700 dark:text-gray-300 transition-colors duration-200">${tL(a)}</div>`;case"codeblock":return`<pre class="my-6 bg-gray-900 dark:bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto border-l-4 border-blue-500 shadow-lg"><code class="font-mono text-sm leading-relaxed">${a}</code></pre>`;case"quote":return`<blockquote class="my-6 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 dark:border-blue-400 p-4 rounded-r-lg relative">
                        <div class="text-blue-600 dark:text-blue-400 text-4xl absolute -top-2 -left-1 font-serif">"</div>
                        <div class="italic text-gray-700 dark:text-gray-300 pl-6">${a}</div>
                    </blockquote>`;case"link":return`<a href="${a}" class="inline-block my-2 px-4 py-2 text-blue-600 dark:text-blue-400 border-2 border-blue-600 dark:border-blue-400 rounded-lg hover:bg-blue-600 hover:text-white dark:hover:bg-blue-500 transition-all duration-200 font-medium" target="_blank">${a}</a>`;case"table":const F=a,j=F[0],Q=F.slice(1),K=`<thead><tr>${j.map(B=>`<th class="bg-blue-600 dark:bg-blue-700 text-white px-4 py-3 text-left font-semibold">${B}</th>`).join("")}</tr></thead>`,S=`<tbody>${Q.map((B,R)=>`<tr class="${R%2===0?"bg-gray-50 dark:bg-gray-800":"bg-white dark:bg-gray-700"} hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors duration-200">${B.map(D=>`<td class="px-4 py-3 border-b border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-300">${D}</td>`).join("")}</tr>`).join("")}</tbody>`;return`<div class="my-6 overflow-x-auto shadow-lg rounded-lg border border-gray-200 dark:border-gray-700">
                        <table class="w-full border-collapse">${K}${S}</table>
                    </div>`;case"purehtml":return`<div class="my-4 p-2 rounded-md bg-gray-50 dark:bg-gray-800 transition-colors duration-200">${a}</div>`;case"sidecontainer":return`<aside class="float-right w-80 max-w-[40%] ml-4 mb-4 p-4 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm leading-relaxed text-gray-700 dark:text-gray-300 transition-colors duration-200 lg:block hidden">
                        ${a}
                    </aside>
                    <div class="lg:hidden my-4 p-4 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm leading-relaxed text-gray-700 dark:text-gray-300 transition-colors duration-200">
                        ${a}
                    </div>`;case"diagram":const T=`diagram${Math.random().toString(36).substr(2,9)}`,N=a.replace(/"/g,"&quot;").replace(/'/g,"&#39;");return`
                        <div class="my-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg p-4 text-center transition-colors duration-200 shadow-lg" 
                             id="${T}" 
                             data-diagram-code="${N}"
                             data-diagram-id="${T}">
                            <div class="text-gray-600 dark:text-gray-400 italic">Rendering diagram...</div>
                            <script>
                                (function() {
                                    const diagramDiv = document.getElementById('${T}');
                                    const code = diagramDiv.getAttribute('data-diagram-code');
                                    const id = diagramDiv.getAttribute('data-diagram-id');
                                    
                                    function renderDiagram() {
                                        if (!window.mermaid) {
                                            const script = document.createElement('script');
                                            script.src = 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js';
                                            script.onload = function() {
                                                setTimeout(function() {
                                                    if (!window.mermaidInitialized) {
                                                        mermaid.initialize({ startOnLoad: false, theme: 'default', securityLevel: 'loose' });
                                                        window.mermaidInitialized = true;
                                                    }
                                                    mermaid.render(id + 'svg', code).then(function(result) {
                                                        diagramDiv.innerHTML = result.svg;
                                                    }).catch(function(error) {
                                                        diagramDiv.innerHTML = '<div class="text-red-600 dark:text-red-400 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg">Error: ' + error.message + '</div>';
                                                    });
                                                }, 100);
                                            };
                                            document.head.appendChild(script);
                                        } else {
                                            if (!window.mermaidInitialized) {
                                                mermaid.initialize({ startOnLoad: false, theme: 'default', securityLevel: 'loose' });
                                                window.mermaidInitialized = true;
                                            }
                                            mermaid.render(id + 'svg', code).then(function(result) {
                                                diagramDiv.innerHTML = result.svg;
                                            }).catch(function(error) {
                                                diagramDiv.innerHTML = '<div class="text-red-600 dark:text-red-400 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg">Error: ' + error.message + '</div>';
                                            });
                                        }
                                    }
                                    
                                    // Auto-render when the script runs
                                    if (document.readyState === 'loading') {
                                        document.addEventListener('DOMContentLoaded', renderDiagram);
                                    } else {
                                        renderDiagram();
                                    }
                                })();
                            <\/script>
                        </div>
                    `;case"note":return`<div class="my-4 flex items-start p-4 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 dark:border-blue-400 rounded-r-lg transition-colors duration-200">
                        <div class="text-blue-600 dark:text-blue-400 text-xl mr-3 flex-shrink-0 mt-0.5"></div>
                        <div class="text-blue-800 dark:text-blue-200 leading-relaxed">${a}</div>
                    </div>`;case"warning":return`<div class="my-4 flex items-start p-4 bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-500 dark:border-yellow-400 rounded-r-lg transition-colors duration-200">
                        <div class="text-yellow-600 dark:text-yellow-400 text-xl mr-3 flex-shrink-0 mt-0.5"></div>
                        <div class="text-yellow-800 dark:text-yellow-200 leading-relaxed">${a}</div>
                    </div>`;case"tip":return`<div class="my-4 flex items-start p-4 bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 dark:border-green-400 rounded-r-lg transition-colors duration-200">
                        <div class="text-green-600 dark:text-green-400 text-xl mr-3 flex-shrink-0 mt-0.5"></div>
                        <div class="text-green-800 dark:text-green-200 leading-relaxed">${a}</div>
                    </div>`;case"htmlCanvas":const V=`canvas_${Math.random().toString(36).substr(2,9)}_${Date.now()}`;return`
                        <div class="my-6 bg-gray-50 dark:bg-gray-800 border-2 border-dashed border-blue-300 dark:border-blue-600 rounded-lg p-6 transition-colors duration-200" data-canvas-code="${a.replace(/"/g,"&quot;").replace(/'/g,"&#39;")}" data-canvas-id="${V}">
                            <canvas id="${V}" width="400" height="300" class="border border-gray-300 dark:border-gray-600 rounded-lg max-w-full mx-auto block bg-white dark:bg-gray-900"></canvas>
                            <div class="flex flex-wrap gap-2 mt-4 justify-center">
                                <button class="bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2" onclick="
                                    (function() {
                                        const canvasDiv = this.closest('[data-canvas-code]');
                                        const code = canvasDiv.getAttribute('data-canvas-code');
                                        const canvasId = canvasDiv.getAttribute('data-canvas-id');
                                        const canvasElement = document.getElementById(canvasId);
                                        const canvasContext = canvasElement.getContext('2d');
                                        const errorDiv = document.getElementById(canvasId + 'Error');
                                        
                                        errorDiv.classList.add('hidden');
                                        errorDiv.textContent = '';
                                        
                                        try {
                                            canvasContext.clearRect(0, 0, canvasElement.width, canvasElement.height);
                                            const canvasFunction = new Function('canvas', 'ctx', code);
                                            canvasFunction(canvasElement, canvasContext);
                                        } catch (error) {
                                            console.error('Canvas error:', error);
                                            errorDiv.textContent = 'Error: ' + error.message;
                                            errorDiv.classList.remove('hidden');
                                        }
                                    }).call(this);
                                "> Run Code</button>
                                <button class="bg-gray-600 hover:bg-gray-700 dark:bg-gray-500 dark:hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2" onclick="
                                    (function() {
                                        const canvasDiv = this.closest('[data-canvas-code]');
                                        const canvasId = canvasDiv.getAttribute('data-canvas-id');
                                        const canvasElement = document.getElementById(canvasId);
                                        const canvasContext = canvasElement.getContext('2d');
                                        const errorDiv = document.getElementById(canvasId + 'Error');
                                        
                                        canvasContext.clearRect(0, 0, canvasElement.width, canvasElement.height);
                                        errorDiv.classList.add('hidden');
                                    }).call(this);
                                "> Clear</button>
                                <button class="bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2" onclick="
                                    (function() {
                                        const canvasDiv = this.closest('[data-canvas-code]');
                                        const canvasId = canvasDiv.getAttribute('data-canvas-id');
                                        const canvasElement = document.getElementById(canvasId);
                                        
                                        if (!document.fullscreenElement) {
                                            canvasElement.requestFullscreen().catch(err => {
                                                console.warn('Fullscreen failed:', err);
                                            });
                                        } else {
                                            document.exitFullscreen();
                                        }
                                    }).call(this);
                                "> Fullscreen</button>
                            </div>
                            <details class="mt-4 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg transition-colors duration-200">
                                <summary class="p-3 font-medium text-gray-700 dark:text-gray-300 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors duration-200"> View Code</summary>
                                <pre class="p-4 bg-gray-900 dark:bg-gray-800 text-gray-100 rounded-b-lg overflow-x-auto"><code class="font-mono text-sm">${a}</code></pre>
                            </details>
                            <div id="${V}Error" class="hidden mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg text-red-800 dark:text-red-200"></div>
                        </div>
                    `;default:return`<div class="my-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded-lg text-red-800 dark:text-red-200 font-mono text-sm">
                        <div class="font-semibold mb-2">Unknown content type:</div>
                        ${JSON.stringify(n)}
                    </div>`}}).join(`
`),rL=nL,sx=async t=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const e=t.trim();if(!e)throw new Error("Message cannot be empty or just whitespace");const i=await w2(Qy,"groqChat")({message:e});return console.log("groqChat response:",i.data),i.data.response}catch(e){throw console.error("Firebase function error:",e),console.error("Message sent:",t),e}},iL=async(t,e)=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const n=t.trim();if(!n)throw new Error("Message cannot be empty or just whitespace");const i=w2(Qy,"groqChat");console.log("Starting streaming request...");const{stream:a,data:l}=await i.stream({message:n});console.log("Stream started, waiting for chunks...");let u="";for await(const f of a)if(console.log("Received chunk:",f),f&&typeof f=="object"&&"type"in f&&"content"in f){const m=f;console.log("Processing chunk:",m),m.type==="chunk"&&m.content&&(u+=m.content,e?.(m.content))}console.log("Waiting for final result...");const d=await l;return console.log("Final result received:",d),d&&typeof d=="object"&&"response"in d?(console.log("Returning final result response"),d.response):(console.log("Returning accumulated response:",u),u)}catch(n){throw console.error("Firebase function streaming error:",n),n}},sL=async(t,e,n)=>{try{const a=`
        Return ONLY a valid JSON array (46 objects).

        RULES
         Each object = exactly one tag from SCHEMA; no new tags.
         Include:
         1 {quiz}
         1 of {codeblock | diagram | htmlCanvas}
         2 distinct support tags from
            {img | vid | gif | ul | ol | sidecontainer | tip | note | warning | quote | table | purehtml | link}
         Use unique tagsno repeats within the array.
         Cover, somewhere in the set: definition, worked example, real-world analogy, misconception + correction.
         Wrap technical terms in [square-brackets].
         Any long-text field 120 words.
         Tone: encouraging, professional.

        OUTPUT
        JSON array only  no fences, comments, or extra text.

        SCHEMA = ${JSON.stringify([{large_header:"Large Header Text"},{small_header:"Small Header Text"},{ul:["Item one","Item 2","Item 3"]},{quiz:[{question:"What is the capital of France?",answers:[{Berlin:"It's germany!"},{Madrid:"It is spain :("},{Paris:"Correct! It's Paris!"}],correctAnswer:2},{question:"What is the capital of Poland?",answers:[{Berlin:"It's germany!"},{Warshava:"Yahoo! It's Poland!"},{Paris:"No!"}],correctAnswer:1}]},{img:["src","description"]},{vid:["src","description"]},{gif:["src","description"]},{textblock:"text, **text**, (text)[text.com]"},{ol:["Heyyo","Nice","That's a list"]},{codeblock:"console.log('Hello World');"},{quote:"This is a quote"},{link:"https://example.com"},{table:[["Header1","Header2"],["Row1Col1","Row1Col2"],["Row2Col1","Row2Col2"]]},{purehtml:"<div>Pure HTML content</div>"},{sidecontainer:"This is a side container with some text."},{diagram:"graph TD; A-->B; A-->C; B-->D; C-->D;"},{note:"This is a note."},{warning:"This is a warning note."},{tip:"This is a tip note."},{htmlCanvas:"code for HTML canvas"}])}
        CONTEXT = ${e}
        CONCEPT = ${t}
        `,l=`Provide a brief explanation in 50 words or less.

        CRITICAL:
        - Highlight EVERY key term with [square-braces], e.g., [artificial intelligence], [mammal], [vector product]
        - NO introductory phrases like "Here is..." or "Summary..."
        - NO bullet points or formatting except [square-braces]
        - Start immediately with explanation content
        - ONLY the explanation text

        Topic to explain: `,u=`You are an expert educator. Respond ONLY with a valid JSON array in the following format: ["concept1", "concept2", "concept3"]. 

        Instructions:
        - Suggest exactly 3-5 topics that are logical next steps for learning the given concept.
        - Each topic must be no more than 5 words.
        - Each topic MUST be enclosed in double quotes, e.g., "example topic".
        - Do NOT include any explanation, commentary, or formatting outside the JSON array.
        - Only output the JSON array as specified.

        Concept: `,d=sx(a),f=sx(u+t);let m="";const y=iL(l+t,H=>{m+=H,n(H)}),[v,b,x]=await Promise.all([d,f,y]);let C=b??"";C=C.replace(/^```json\s*/i,"").replace(/^```\s*/i,"").replace(/```$/i,"");let M=[];const k=C.match(/"(.*?)"/g);k&&(M=k.map(H=>H.replace(/"/g,"")));const L={firstResponse:{response:rL(JSON.parse(v))},secondResponse:{response:x?.replace(/\[/g,"_").replace(/\]/g,"_")},thirdResponse:{response:M}};return console.log("askAITwice response:",L),L}catch(i){throw console.error("Error in askAITwice:",i),i}},R2=q.createContext(null),aL=({children:t,nodes:e,onNodesChange:n,onEdgesChange:i,setNodes:a,showExplanation:l})=>{const u=(d,f,m,y,v,b,x)=>{const C=e.find(K=>K.id===f);if(!C)return null;const M=C.data.tokenColors||{},k=d.myConcept||d.word;if(M[k])return console.log(`Token "${k}" is already colored, ignoring click`),null;let L;y==="staticEditable"?L=ix():L=v?Xz(v):ix();const H={...M};d.myConcept?H[d.myConcept]=L:H[d.word]=L,a(K=>K.map(S=>S.id===f?{...S,data:{...S.data,tokenColors:H}}:S));const F=Qz(m),j=Jz(F,d.word,"Loading...","",L,y,f);j.data.isLoading=!0;const Q=eL(f,j.id,L,x);return n([{type:"add",item:j}]),i([{type:"add",item:Q}]),sL(d.word,b||"",K=>{a(S=>S.map(T=>{if(T.id===j.id){const N=T.data.summary||"";return{...T,data:{...T.data,label:N+K,summary:N+K}}}return T}))}).then(K=>{const S=K.firstResponse?.response||d.word,T=K.secondResponse?.response||d.word,N=K.thirdResponse?.response||{};a(V=>V.map(U=>U.id===j.id?{...U,data:{...U.data,label:T,title:d.word,summary:T,full_text:S,suggestions:N,isLoading:!1}}:U))}).catch(()=>{a(K=>K.map(S=>S.id===j.id?{...S,data:{...S.data,label:d.word,title:d.word,summary:d.word,full_text:d.word,suggestions:[],isLoading:!1}}:S))}),L};return A.jsx(R2.Provider,{value:{handleTokenClick:u,setNodes:a,showExplanation:l},children:t})},C2=()=>{const t=q.useContext(R2);if(!t)throw new Error("useTokenInteraction must be used within a TokenInteractionProvider");return t},N2=({size:t="medium",color:e="#4f86f7"})=>{const n={small:"w-4 h-4 border-2",medium:"w-8 h-8 border-3",large:"w-12 h-12 border-4"};return A.jsx("div",{className:"flex items-center justify-center",children:A.jsx("div",{className:`${n[t]} border-gray-200 dark:border-gray-700 border-t-indigo-500 dark:border-t-indigo-400 rounded-full animate-spin`,style:{borderTopColor:e}})})};function oL({data:t,id:e}){const[n,i]=q.useState(!1),[a,l]=q.useState(t.summary||t.label||"Static Node"),{handleTokenClick:u,showExplanation:d}=C2(),{getNode:f,setViewport:m}=Oc();q.useEffect(()=>{n||l(t.summary||t.label||"Static Node")},[t.summary,t.label,n]);const y=A2(a),v=(Q,K)=>{K.stopPropagation(),console.log("Static Token clicked:",Q),u(Q,e,{x:0,y:0},"staticEditable",t.myColor,t.summary||t.label||"Draggable Node",Q.suggestionId)},b=Q=>{Q.stopPropagation(),i(!0)},x=()=>{i(!1)},C=Q=>{Q.stopPropagation()},M=Q=>{Q.stopPropagation(),Q.key==="Enter"&&x(),Q.key==="Escape"&&(l(t.summary||t.label||"Static Node"),i(!1))},k=Q=>{Q.stopPropagation(),d&&d(t.title||"Explanation",t.full_text||"No detailed information available.")},L=Q=>{if(Q.stopPropagation(),t.previousNode){const K=f(t.previousNode);if(K){const{x:S,y:T}=K.position;m({x:-S+200,y:-T+100,zoom:1},{duration:500})}}},H=(()=>{const Q=t.tokenColors||{};return y.map((K,S)=>{const T=K.myConcept||K.word,N=Q[T],V=!N;return A.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-lg font-medium transition-all duration-200 ease-out
                              ${V?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"} 
                              ${K.myConcept?"bg-blue-500/10 border border-blue-500/30":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:N||"transparent",color:N?t.myColor||"#ffffff":"inherit",border:N?`1px solid ${N}`:""},onClick:U=>V?v(K,U):U.stopPropagation(),children:[K.word,S<y.length-1?" ":""]},S)})})(),F=A.jsxs("div",{className:"node-buttons",children:[t.previousNode&&A.jsx("button",{className:"node-expand-btn previous-node-btn",onClick:L,title:"Go to previous node",children:""}),A.jsx("button",{className:"node-expand-btn explanation-btn-icon",onClick:k,title:"Show full text",children:""})]}),j=q.useMemo(()=>t.isLoading?A.jsxs("div",{className:"flex items-center justify-center gap-2 py-8",children:[A.jsx(N2,{size:"small",color:t.myColor||"#6366f1"}),A.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}):n?A.jsx("input",{type:"text",value:a,onChange:Q=>l(Q.target.value),onBlur:x,onKeyDown:M,onClick:C,className:`w-full bg-gray-700/50 border border-white/15 rounded-lg px-4 py-3 text-gray-100 
                             placeholder-gray-500 focus:outline-none focus:border-blue-500/60 focus:bg-gray-600/50 
                             focus:ring-2 focus:ring-blue-500/25 transition-all duration-200 nodrag`,placeholder:"Enter node content...",autoFocus:!0}):A.jsxs("div",{className:"flex flex-col gap-3",children:[A.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[A.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),A.jsxs("div",{className:"flex gap-2",children:[t.previousNode&&A.jsx("button",{className:`w-8 h-8 bg-gray-500/25 text-gray-400 border border-gray-500/35 rounded-lg 
                                         hover:bg-gray-500/35 hover:border-gray-500/55 hover:-translate-y-0.5 
                                         transition-all duration-150 flex items-center justify-center text-sm font-semibold`,onClick:L,title:"Go to previous node",children:""}),A.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                     hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                     transition-all duration-150 flex items-center justify-center text-sm`,onClick:k,title:"Show full text",children:""})]})]}),A.jsx("div",{className:"flex-1",children:A.jsx("div",{className:"cursor-text leading-relaxed break-words text-lg font-medium",onClick:b,children:H})}),A.jsxs("div",{className:"mt-2",children:[A.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),A.jsx("div",{className:"flex flex-wrap gap-1",children:t.suggestions&&t.suggestions.length>0?t.suggestions.map((Q,K)=>{const T=(t.tokenColors||{})[Q],N=!T;return A.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                                                      bg-white/5 border border-white/10 transition-all duration-200 
                                                      ${N?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:T||"transparent",color:T?t.myColor||"#ffffff":"inherit",border:T?`1px solid ${T}`:""},onClick:V=>N?v({word:Q,myConcept:Q,suggestionId:t.label+Q+K},V):V.stopPropagation(),children:[Q,K<t.suggestions.length-1?" ":"",A.jsx(jn,{type:"source",position:Se.Right,id:t.label+Q+K})]},K)}):A.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"})})]})]}),[n,a,y.length,b,x,M,C,H,F]);return A.jsxs("div",{className:`bg-[#1a1a1d] border border-white/[0.1] rounded-[20px] p-7 min-w-[320px] max-w-[500px] 
                       transition-all duration-150 ease-in-out cursor-pointer select-none overflow-hidden
                       opacity-[0.98] border-b-[3px] border-b-white/[0.06]
                       hover:opacity-100 hover:bg-[#28282c] hover:border-white/[0.2]`,style:{backgroundColor:t.myColor,color:t.myColor?$h(t.myColor):"#f8faff",border:t.myColor?`1px solid ${Fh(t.myColor,20)}`:"1px solid rgba(255, 255, 255, 0.1)"},children:[A.jsx("div",{className:"relative pointer-events-auto text-[#f8faff] text-[18px] leading-[1.7] font-semibold",children:j}),A.jsx(jn,{type:"source",position:Se.Bottom,id:"bottom-source"}),A.jsx(jn,{type:"target",position:Se.Bottom,id:"bottom-target"})]})}function lL({data:t,id:e}){const[n,i]=q.useState(!1),[a,l]=q.useState(t.summary||t.label||"Draggable Node"),{getNodes:u,getNode:d,setViewport:f}=Oc(),{handleTokenClick:m,showExplanation:y}=C2();q.useEffect(()=>{n||l(t.summary||t.label||"Draggable Node")},[t.summary,t.label,n]);const v=A2(a),b=v,x=()=>!0,C=(S,T)=>{T.stopPropagation();const V=u().find(B=>B.id===e);return V?m(S,e,V.position,V.type||"draggableEditable",t.myColor,t.summary||t.label||"Draggable Node"):void 0},M=S=>{S.stopPropagation(),i(!0)},k=()=>{i(!1)},L=S=>{S.stopPropagation()},H=S=>{S.stopPropagation(),S.key==="Enter"&&k(),S.key==="Escape"&&(l(t.summary||t.label||"Draggable Node"),i(!1))},F=S=>{S.stopPropagation(),y&&y(t.title,t.full_text||"No detailed information available.")},j=S=>{if(S.stopPropagation(),t.previousNode){const T=d(t.previousNode);if(T){const{x:N,y:V}=T.position;f({x:-N+200,y:-V+100,zoom:1},{duration:500})}}},Q=q.useMemo(()=>{const S={};return b.forEach(T=>{const N=T.myConcept||T.word;S[N]||(S[N]=[]),S[N].push(T)}),S},[b]),K=q.useMemo(()=>n?A.jsx("input",{type:"text",value:a,onChange:S=>l(S.target.value),onBlur:k,onKeyDown:H,onClick:L,className:`w-full bg-gray-700/50 border border-white/15 rounded-lg px-4 py-3 text-gray-100 
                             placeholder-gray-500 focus:outline-none focus:border-blue-500/60 focus:bg-gray-600/50 
                             focus:ring-2 focus:ring-blue-500/25 transition-all duration-200 nodrag`,placeholder:"Enter node content...",autoFocus:!0}):A.jsxs(A.Fragment,{children:[t.isLoading&&A.jsxs("div",{className:"flex items-center justify-center gap-2 py-5",children:[A.jsx(N2,{size:"small",color:t.myColor||"#6366f1"}),A.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}),A.jsxs("div",{className:"flex flex-col gap-3",children:[A.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[A.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),A.jsxs("div",{className:"flex gap-2",children:[t.previousNode&&A.jsx("button",{className:`w-8 h-8 bg-gray-500/25 text-gray-400 border border-gray-500/35 rounded-lg 
                                             hover:bg-gray-500/35 hover:border-gray-500/55 hover:-translate-y-0.5 
                                             transition-all duration-150 flex items-center justify-center text-sm font-semibold`,onClick:j,title:"Go to previous node",children:""}),A.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                         hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                         transition-all duration-150 flex items-center justify-center text-sm`,onClick:F,title:"Show full text",children:""})]})]}),A.jsx("div",{className:"flex-1",children:A.jsx("div",{className:"cursor-text leading-relaxed break-words",onClick:M,children:b.map((S,T)=>{const N=t.tokenColors||{},V=S.myConcept||S.word,U=N[V],B=!U;return A.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-lg font-medium transition-all duration-300 ease-out
                                                  ${B?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40 hover:scale-105 hover:-translate-y-0.5 active:scale-95 active:translate-y-0":"cursor-not-allowed opacity-70"} 
                                                  ${S.myConcept?"bg-blue-500/10 border border-blue-500/30 shadow-md":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:U||"transparent",color:U?$h(U):"inherit",border:U?`1px solid ${Fh(U,20)}`:"",boxShadow:U?`0 0 0 1px ${U}25`:""},onClick:R=>B?C(S,R):R.stopPropagation(),children:[S.word,T<b.length-1?" ":""]},T)})})}),A.jsxs("div",{className:"mt-2",children:[A.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),A.jsx("div",{className:"flex flex-wrap gap-1",children:t.suggestions&&t.suggestions.length>0?t.suggestions.map((S,T)=>{const V=(t.tokenColors||{})[S],U=!V;return A.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                                                      bg-white/5 border border-white/10 transition-all duration-200 
                                                      ${U?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:V||"transparent",color:V?$h(V):"inherit",border:V?`1px solid ${Fh(V,20)}`:""},onClick:B=>U?C({word:S,myConcept:S,suggestionId:t.label+S+T},B):B.stopPropagation(),children:[S,A.jsx(jn,{type:"source",position:Se.Bottom,id:t.label+S+T})]},T)}):A.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"})})]})]})]}),[n,a,b,v,Q,M,k,H,L,F,C,x,t.previousNode,j,t.tokenColors,t.myColor,t.isLoading]);return A.jsxs("div",{className:`bg-[#202023] border border-white/[0.12] rounded-2xl p-5 min-w-[280px] max-w-[450px] 
                       transition-all duration-200 ease-in-out cursor-grab select-none overflow-hidden
                       hover:transform hover:-translate-y-[3px]
                       hover:border-white/[0.18] hover:bg-[#242427]`,style:{background:t.myColor,color:t.myColor?$h(t.myColor):"#f0f4f8",border:t.myColor?`1px solid ${Fh(t.myColor,20)}`:"1px solid rgba(255, 255, 255, 0.12)"},children:[A.jsx("div",{className:"relative pointer-events-auto text-[#f0f4f8] text-[17px] leading-[1.7] font-medium",children:K}),A.jsx(jn,{type:"source",position:Se.Bottom,id:"bottom-source"}),A.jsx(jn,{type:"target",position:Se.Top,id:"top-target"}),A.jsx(jn,{type:"source",position:Se.Left,id:"left-source"}),A.jsx(jn,{type:"target",position:Se.Left,id:"left-target"}),A.jsx(jn,{type:"source",position:Se.Right,id:"right-source"}),A.jsx(jn,{type:"target",position:Se.Right,id:"right-target"})]})}const uL={staticEditable:oL,draggableEditable:lL};function cL(){const[t,e]=q.useState(!1),[n,i]=q.useState(!1),[a,l]=q.useState(null),u=q.useCallback((Y,ne)=>{l({title:Y,text:ne}),e(!0)},[]),d=q.useCallback(()=>{e(!1)},[]),{user:f,signOut:m}=Uz(),{notifications:y,removeNotification:v,showSuccess:b,showError:x,showInfo:C}=Kz(),{nodes:M,edges:k,allBoards:L,currentBoard:H,isSwitchingBoard:F,isSaving:j,onNodesChange:Q,onEdgesChange:K,setNodes:S,switchToBoard:T,createNewBoard:N,deleteBoard:V,updateBoardName:U,clearBoardState:B}=Yz(f,{showSuccess:b,showError:x,showInfo:C}),R=async()=>{await m(),B()},D=()=>{i(!0)},G=q.useCallback(Y=>{const ne={id:`e${Y.source}-${Y.target}`,source:Y.source,target:Y.target,sourceHandle:Y.sourceHandle,targetHandle:Y.targetHandle};K([{type:"add",item:ne}])},[K]),O=q.useMemo(()=>A.jsxs(AT,{nodes:M,edges:k,onNodesChange:Q,onEdgesChange:K,onConnect:G,nodeTypes:uL,connectionMode:Qs.Loose,fitView:!0,className:"bg-gray-50 dark:bg-gray-900 w-full h-full",children:[A.jsx(JD,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg"}),A.jsx(sM,{variant:Cr.Cross,gap:30,size:10,lineWidth:.5,color:"#94a3b8",className:"bg-gray-50 dark:bg-gray-900"})]}),[M,k,Q,K,G]);return f?A.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 relative",style:{height:"100vh",width:"100vw",overflow:"hidden"},children:[A.jsx(Vz,{notifications:y,onRemove:v}),A.jsxs("div",{style:{height:"100%",position:"relative"},children:[A.jsxs(KT,{direction:"horizontal",children:[A.jsx(Jp,{defaultSize:15,minSize:10,maxSize:30,children:A.jsx("div",{className:"bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700",children:A.jsx(Iz,{allBoards:L,currentBoard:H,onSwitchBoard:T,onCreateBoard:async Y=>{await N(Y)},onDeleteBoard:V,onSignOut:R,isLoading:F})})}),A.jsx(XT,{}),A.jsx(Jp,{children:A.jsxs("div",{className:"bg-white dark:bg-gray-800",style:{height:"100%",position:"relative"},children:[A.jsx(Oz,{name:H?.name||"Loading...",onSetName:U,user:f,isSaving:j}),A.jsx("div",{className:"bg-gray-50 dark:bg-gray-900",style:{height:"calc(100% - 60px)",width:"100%"},children:A.jsx(aL,{nodes:M,onNodesChange:Q,onEdgesChange:K,setNodes:S,showExplanation:u,children:O})})]})})]}),t&&A.jsx(gM,{defaultSize:{width:380},style:{background:"transparent",position:"fixed",right:"12px",top:"80px",borderRadius:"16px",zIndex:1e3},enable:{right:!1,top:!1,bottom:!1,left:!0},children:A.jsxs("div",{className:`bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl
                                       border border-gray-200/50 dark:border-gray-700/50
                                       animate-in slide-in-from-right-3 fade-in duration-500
                                       transition-all ease-out
                                       ring-1 ring-white/20 dark:ring-white/10 rounded-2xl
                                       before:absolute before:inset-0 before:bg-gradient-to-br 
                                       before:from-white/40 before:to-transparent before:pointer-events-none
                                       dark:before:from-gray-800/40 dark:before:to-transparent
                                       relative overflow-auto`,style:{maxHeight:"calc(100vh - 100px)",height:"auto",minHeight:"200px"},children:[A.jsx("div",{className:"absolute top-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-purple-500 opacity-60"}),A.jsx("div",{className:"relative z-10 overflow-auto h-full",children:A.jsx(kz,{explanation:a,onClose:d,isVisible:t})})]})})]})]}):n?A.jsx(Cz,{}):A.jsx(zz,{onLogin:D})}function dL(){return A.jsx(Mz,{children:A.jsx(cL,{})})}const I2=document.getElementById("root");if(!I2)throw new Error("Failed to find the root element");dC.createRoot(I2).render(A.jsx(q.StrictMode,{children:A.jsx(dL,{})}));
