function MM(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function ZA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gy={exports:{}},Su={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z1;function PM(){if(z1)return Su;z1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var c=null;if(a!==void 0&&(c=""+a),s.key!==void 0&&(c=""+s.key),"key"in s){a={};for(var u in s)u!=="key"&&(a[u]=s[u])}else a=s;return s=a.ref,{$$typeof:t,type:r,key:c,ref:s!==void 0?s:null,props:a}}return Su.Fragment=e,Su.jsx=n,Su.jsxs=n,Su}var j1;function OM(){return j1||(j1=1,gy.exports=PM()),gy.exports}var C=OM(),yy={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B1;function VM(){if(B1)return je;B1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.iterator;function _(U){return U===null||typeof U!="object"?null:(U=v&&U[v]||U["@@iterator"],typeof U=="function"?U:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,R={};function I(U,W,ne){this.props=U,this.context=W,this.refs=R,this.updater=ne||b}I.prototype.isReactComponent={},I.prototype.setState=function(U,W){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,W,"setState")},I.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function N(){}N.prototype=I.prototype;function L(U,W,ne){this.props=U,this.context=W,this.refs=R,this.updater=ne||b}var $=L.prototype=new N;$.constructor=L,T($,I.prototype),$.isPureReactComponent=!0;var H=Array.isArray,G={H:null,A:null,T:null,S:null,V:null},K=Object.prototype.hasOwnProperty;function k(U,W,ne,Q,se,fe){return ne=fe.ref,{$$typeof:t,type:U,key:W,ref:ne!==void 0?ne:null,props:fe}}function S(U,W){return k(U.type,W,void 0,void 0,void 0,U.props)}function A(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function V(U){var W={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ne){return W[ne]})}var B=/\/+/g;function F(U,W){return typeof U=="object"&&U!==null&&U.key!=null?V(""+U.key):W.toString(36)}function D(){}function P(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(D,D):(U.status="pending",U.then(function(W){U.status==="pending"&&(U.status="fulfilled",U.value=W)},function(W){U.status==="pending"&&(U.status="rejected",U.reason=W)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function X(U,W,ne,Q,se){var fe=typeof U;(fe==="undefined"||fe==="boolean")&&(U=null);var ue=!1;if(U===null)ue=!0;else switch(fe){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(U.$$typeof){case t:case e:ue=!0;break;case p:return ue=U._init,X(ue(U._payload),W,ne,Q,se)}}if(ue)return se=se(U),ue=Q===""?"."+F(U,0):Q,H(se)?(ne="",ue!=null&&(ne=ue.replace(B,"$&/")+"/"),X(se,W,ne,"",function(Ae){return Ae})):se!=null&&(A(se)&&(se=S(se,ne+(se.key==null||U&&U.key===se.key?"":(""+se.key).replace(B,"$&/")+"/")+ue)),W.push(se)),1;ue=0;var ye=Q===""?".":Q+":";if(H(U))for(var _e=0;_e<U.length;_e++)Q=U[_e],fe=ye+F(Q,_e),ue+=X(Q,W,ne,fe,se);else if(_e=_(U),typeof _e=="function")for(U=_e.call(U),_e=0;!(Q=U.next()).done;)Q=Q.value,fe=ye+F(Q,_e++),ue+=X(Q,W,ne,fe,se);else if(fe==="object"){if(typeof U.then=="function")return X(P(U),W,ne,Q,se);throw W=String(U),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return ue}function z(U,W,ne){if(U==null)return U;var Q=[],se=0;return X(U,Q,"","",function(fe){return W.call(ne,fe,se++)}),Q}function Y(U){if(U._status===-1){var W=U._result;W=W(),W.then(function(ne){(U._status===0||U._status===-1)&&(U._status=1,U._result=ne)},function(ne){(U._status===0||U._status===-1)&&(U._status=2,U._result=ne)}),U._status===-1&&(U._status=0,U._result=W)}if(U._status===1)return U._result.default;throw U._result}var te=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function J(){}return je.Children={map:z,forEach:function(U,W,ne){z(U,function(){W.apply(this,arguments)},ne)},count:function(U){var W=0;return z(U,function(){W++}),W},toArray:function(U){return z(U,function(W){return W})||[]},only:function(U){if(!A(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},je.Component=I,je.Fragment=n,je.Profiler=s,je.PureComponent=L,je.StrictMode=r,je.Suspense=d,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,je.__COMPILER_RUNTIME={__proto__:null,c:function(U){return G.H.useMemoCache(U)}},je.cache=function(U){return function(){return U.apply(null,arguments)}},je.cloneElement=function(U,W,ne){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var Q=T({},U.props),se=U.key,fe=void 0;if(W!=null)for(ue in W.ref!==void 0&&(fe=void 0),W.key!==void 0&&(se=""+W.key),W)!K.call(W,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&W.ref===void 0||(Q[ue]=W[ue]);var ue=arguments.length-2;if(ue===1)Q.children=ne;else if(1<ue){for(var ye=Array(ue),_e=0;_e<ue;_e++)ye[_e]=arguments[_e+2];Q.children=ye}return k(U.type,se,void 0,void 0,fe,Q)},je.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:a,_context:U},U},je.createElement=function(U,W,ne){var Q,se={},fe=null;if(W!=null)for(Q in W.key!==void 0&&(fe=""+W.key),W)K.call(W,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(se[Q]=W[Q]);var ue=arguments.length-2;if(ue===1)se.children=ne;else if(1<ue){for(var ye=Array(ue),_e=0;_e<ue;_e++)ye[_e]=arguments[_e+2];se.children=ye}if(U&&U.defaultProps)for(Q in ue=U.defaultProps,ue)se[Q]===void 0&&(se[Q]=ue[Q]);return k(U,fe,void 0,void 0,null,se)},je.createRef=function(){return{current:null}},je.forwardRef=function(U){return{$$typeof:u,render:U}},je.isValidElement=A,je.lazy=function(U){return{$$typeof:p,_payload:{_status:-1,_result:U},_init:Y}},je.memo=function(U,W){return{$$typeof:f,type:U,compare:W===void 0?null:W}},je.startTransition=function(U){var W=G.T,ne={};G.T=ne;try{var Q=U(),se=G.S;se!==null&&se(ne,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(J,te)}catch(fe){te(fe)}finally{G.T=W}},je.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},je.use=function(U){return G.H.use(U)},je.useActionState=function(U,W,ne){return G.H.useActionState(U,W,ne)},je.useCallback=function(U,W){return G.H.useCallback(U,W)},je.useContext=function(U){return G.H.useContext(U)},je.useDebugValue=function(){},je.useDeferredValue=function(U,W){return G.H.useDeferredValue(U,W)},je.useEffect=function(U,W,ne){var Q=G.H;if(typeof ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Q.useEffect(U,W)},je.useId=function(){return G.H.useId()},je.useImperativeHandle=function(U,W,ne){return G.H.useImperativeHandle(U,W,ne)},je.useInsertionEffect=function(U,W){return G.H.useInsertionEffect(U,W)},je.useLayoutEffect=function(U,W){return G.H.useLayoutEffect(U,W)},je.useMemo=function(U,W){return G.H.useMemo(U,W)},je.useOptimistic=function(U,W){return G.H.useOptimistic(U,W)},je.useReducer=function(U,W,ne){return G.H.useReducer(U,W,ne)},je.useRef=function(U){return G.H.useRef(U)},je.useState=function(U){return G.H.useState(U)},je.useSyncExternalStore=function(U,W,ne){return G.H.useSyncExternalStore(U,W,ne)},je.useTransition=function(){return G.H.useTransition()},je.version="19.1.0",je}var H1;function Nh(){return H1||(H1=1,yy.exports=VM()),yy.exports}var O=Nh();const de=ZA(O),LM=MM({__proto__:null,default:de},[O]);var vy={exports:{}},Au={},_y={exports:{}},Ey={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F1;function UM(){return F1||(F1=1,function(t){function e(z,Y){var te=z.length;z.push(Y);e:for(;0<te;){var J=te-1>>>1,U=z[J];if(0<s(U,Y))z[J]=Y,z[te]=U,te=J;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var Y=z[0],te=z.pop();if(te!==Y){z[0]=te;e:for(var J=0,U=z.length,W=U>>>1;J<W;){var ne=2*(J+1)-1,Q=z[ne],se=ne+1,fe=z[se];if(0>s(Q,te))se<U&&0>s(fe,Q)?(z[J]=fe,z[se]=te,J=se):(z[J]=Q,z[ne]=te,J=ne);else if(se<U&&0>s(fe,te))z[J]=fe,z[se]=te,J=se;else break e}}return Y}function s(z,Y){var te=z.sortIndex-Y.sortIndex;return te!==0?te:z.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var d=[],f=[],p=1,v=null,_=3,b=!1,T=!1,R=!1,I=!1,N=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function H(z){for(var Y=n(f);Y!==null;){if(Y.callback===null)r(f);else if(Y.startTime<=z)r(f),Y.sortIndex=Y.expirationTime,e(d,Y);else break;Y=n(f)}}function G(z){if(R=!1,H(z),!T)if(n(d)!==null)T=!0,K||(K=!0,F());else{var Y=n(f);Y!==null&&X(G,Y.startTime-z)}}var K=!1,k=-1,S=5,A=-1;function V(){return I?!0:!(t.unstable_now()-A<S)}function B(){if(I=!1,K){var z=t.unstable_now();A=z;var Y=!0;try{e:{T=!1,R&&(R=!1,L(k),k=-1),b=!0;var te=_;try{t:{for(H(z),v=n(d);v!==null&&!(v.expirationTime>z&&V());){var J=v.callback;if(typeof J=="function"){v.callback=null,_=v.priorityLevel;var U=J(v.expirationTime<=z);if(z=t.unstable_now(),typeof U=="function"){v.callback=U,H(z),Y=!0;break t}v===n(d)&&r(d),H(z)}else r(d);v=n(d)}if(v!==null)Y=!0;else{var W=n(f);W!==null&&X(G,W.startTime-z),Y=!1}}break e}finally{v=null,_=te,b=!1}Y=void 0}}finally{Y?F():K=!1}}}var F;if(typeof $=="function")F=function(){$(B)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,P=D.port2;D.port1.onmessage=B,F=function(){P.postMessage(null)}}else F=function(){N(B,0)};function X(z,Y){k=N(function(){z(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function(z){switch(_){case 1:case 2:case 3:var Y=3;break;default:Y=_}var te=_;_=Y;try{return z()}finally{_=te}},t.unstable_requestPaint=function(){I=!0},t.unstable_runWithPriority=function(z,Y){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var te=_;_=z;try{return Y()}finally{_=te}},t.unstable_scheduleCallback=function(z,Y,te){var J=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?J+te:J):te=J,z){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=te+U,z={id:p++,callback:Y,priorityLevel:z,startTime:te,expirationTime:U,sortIndex:-1},te>J?(z.sortIndex=te,e(f,z),n(d)===null&&z===n(f)&&(R?(L(k),k=-1):R=!0,X(G,te-J))):(z.sortIndex=U,e(d,z),T||b||(T=!0,K||(K=!0,F()))),z},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(z){var Y=_;return function(){var te=_;_=Y;try{return z.apply(this,arguments)}finally{_=te}}}}(Ey)),Ey}var $1;function zM(){return $1||($1=1,_y.exports=UM()),_y.exports}var by={exports:{}},An={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q1;function jM(){if(q1)return An;q1=1;var t=Nh();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(d,f,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:d,containerInfo:f,implementation:p}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return An.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,An.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(d,f,null,p)},An.flushSync=function(d){var f=c.T,p=r.p;try{if(c.T=null,r.p=2,d)return d()}finally{c.T=f,r.p=p,r.d.f()}},An.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(d,f))},An.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},An.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,v=u(p,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?r.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:_,fetchPriority:b}):p==="script"&&r.d.X(d,{crossOrigin:v,integrity:_,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},An.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);r.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(d)},An.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,v=u(p,f.crossOrigin);r.d.L(d,p,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},An.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=u(f.as,f.crossOrigin);r.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(d)},An.requestFormReset=function(d){r.d.r(d)},An.unstable_batchedUpdates=function(d,f){return d(f)},An.useFormState=function(d,f,p){return c.H.useFormState(d,f,p)},An.useFormStatus=function(){return c.H.useHostTransitionStatus()},An.version="19.1.0",An}var G1;function JA(){if(G1)return by.exports;G1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),by.exports=jM(),by.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y1;function BM(){if(Y1)return Au;Y1=1;var t=zM(),e=Nh(),n=JA();function r(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function c(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function u(i){if(a(i)!==i)throw Error(r(188))}function d(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(r(188));return o!==i?null:i}for(var l=i,h=o;;){var g=l.return;if(g===null)break;var y=g.alternate;if(y===null){if(h=g.return,h!==null){l=h;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===l)return u(g),i;if(y===h)return u(g),o;y=y.sibling}throw Error(r(188))}if(l.return!==h.return)l=g,h=y;else{for(var x=!1,M=g.child;M;){if(M===l){x=!0,l=g,h=y;break}if(M===h){x=!0,h=g,l=y;break}M=M.sibling}if(!x){for(M=y.child;M;){if(M===l){x=!0,l=y,h=g;break}if(M===h){x=!0,h=y,l=g;break}M=M.sibling}if(!x)throw Error(r(189))}}if(l.alternate!==h)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:o}function f(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=f(i),o!==null)return o;i=i.sibling}return null}var p=Object.assign,v=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),$=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function F(i){return i===null||typeof i!="object"?null:(i=B&&i[B]||i["@@iterator"],typeof i=="function"?i:null)}var D=Symbol.for("react.client.reference");function P(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===D?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case T:return"Fragment";case I:return"Profiler";case R:return"StrictMode";case G:return"Suspense";case K:return"SuspenseList";case A:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case b:return"Portal";case $:return(i.displayName||"Context")+".Provider";case L:return(i._context.displayName||"Context")+".Consumer";case H:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case k:return o=i.displayName||null,o!==null?o:P(i.type)||"Memo";case S:o=i._payload,i=i._init;try{return P(i(o))}catch{}}return null}var X=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},J=[],U=-1;function W(i){return{current:i}}function ne(i){0>U||(i.current=J[U],J[U]=null,U--)}function Q(i,o){U++,J[U]=i.current,i.current=o}var se=W(null),fe=W(null),ue=W(null),ye=W(null);function _e(i,o){switch(Q(ue,o),Q(fe,i),Q(se,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?f1(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=f1(o),i=m1(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ne(se),Q(se,i)}function Ae(){ne(se),ne(fe),ne(ue)}function Re(i){i.memoizedState!==null&&Q(ye,i);var o=se.current,l=m1(o,i.type);o!==l&&(Q(fe,i),Q(se,l))}function tt(i){fe.current===i&&(ne(se),ne(fe)),ye.current===i&&(ne(ye),Eu._currentValue=te)}var it=Object.prototype.hasOwnProperty,Ue=t.unstable_scheduleCallback,nt=t.unstable_cancelCallback,st=t.unstable_shouldYield,Ht=t.unstable_requestPaint,ze=t.unstable_now,be=t.unstable_getCurrentPriorityLevel,It=t.unstable_ImmediatePriority,Tn=t.unstable_UserBlockingPriority,Wt=t.unstable_NormalPriority,Jn=t.unstable_LowPriority,Mn=t.unstable_IdlePriority,Pn=t.log,Br=t.unstable_setDisableYieldValue,at=null,Ge=null;function Ft(i){if(typeof Pn=="function"&&Br(i),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(at,i)}catch{}}var xt=Math.clz32?Math.clz32:sn,ii=Math.log,$t=Math.LN2;function sn(i){return i>>>=0,i===0?32:31-(ii(i)/$t|0)|0}var On=256,Vn=4194304;function on(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function mn(i,o,l){var h=i.pendingLanes;if(h===0)return 0;var g=0,y=i.suspendedLanes,x=i.pingedLanes;i=i.warmLanes;var M=h&134217727;return M!==0?(h=M&~y,h!==0?g=on(h):(x&=M,x!==0?g=on(x):l||(l=M&~i,l!==0&&(g=on(l))))):(M=h&~y,M!==0?g=on(M):x!==0?g=on(x):l||(l=h&~i,l!==0&&(g=on(l)))),g===0?0:o!==0&&o!==g&&(o&y)===0&&(y=g&-g,l=o&-o,y>=l||y===32&&(l&4194048)!==0)?o:g}function Ln(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function Ui(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zi(){var i=On;return On<<=1,(On&4194048)===0&&(On=256),i}function Hr(){var i=Vn;return Vn<<=1,(Vn&62914560)===0&&(Vn=4194304),i}function er(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function _r(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function tr(i,o,l,h,g,y){var x=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var M=i.entanglements,q=i.expirationTimes,oe=i.hiddenUpdates;for(l=x&~l;0<l;){var he=31-xt(l),pe=1<<he;M[he]=0,q[he]=-1;var ae=oe[he];if(ae!==null)for(oe[he]=null,he=0;he<ae.length;he++){var le=ae[he];le!==null&&(le.lane&=-536870913)}l&=~pe}h!==0&&Er(i,h,0),y!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=y&~(x&~o))}function Er(i,o,l){i.pendingLanes|=o,i.suspendedLanes&=~o;var h=31-xt(o);i.entangledLanes|=o,i.entanglements[h]=i.entanglements[h]|1073741824|l&4194090}function Do(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var h=31-xt(l),g=1<<h;g&o|i[h]&o&&(i[h]|=o),l&=~g}}function si(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function xs(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function oi(){var i=Y.p;return i!==0?i:(i=window.event,i===void 0?32:M1(i.type))}function Va(i,o){var l=Y.p;try{return Y.p=i,o()}finally{Y.p=l}}var yt=Math.random().toString(36).slice(2),Lt="__reactFiber$"+yt,Nt="__reactProps$"+yt,$n="__reactContainer$"+yt,ko="__reactEvents$"+yt,Ac="__reactListeners$"+yt,ai="__reactHandles$"+yt,La="__reactResources$"+yt,ji="__reactMarker$"+yt;function li(i){delete i[Lt],delete i[Nt],delete i[ko],delete i[Ac],delete i[ai]}function br(i){var o=i[Lt];if(o)return o;for(var l=i.parentNode;l;){if(o=l[$n]||l[Lt]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=v1(i);i!==null;){if(l=i[Lt])return l;i=v1(i)}return o}i=l,l=i.parentNode}return null}function wr(i){if(i=i[Lt]||i[$n]){var o=i.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return i}return null}function xr(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(r(33))}function pn(i){var o=i[La];return o||(o=i[La]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Tt(i){i[ji]=!0}var Mo=new Set,Ts={};function nr(i,o){Fr(i,o),Fr(i+"Capture",o)}function Fr(i,o){for(Ts[i]=o,i=0;i<o.length;i++)Mo.add(o[i])}var Po=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ua={},Bi={};function za(i){return it.call(Bi,i)?!0:it.call(Ua,i)?!1:Po.test(i)?Bi[i]=!0:(Ua[i]=!0,!1)}function ci(i,o,l){if(za(o))if(l===null)i.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var h=o.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+l)}}function Tr(i,o,l){if(l===null)i.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+l)}}function Zt(i,o,l,h){if(h===null)i.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(o,l,""+h)}}var ui,ja;function $r(i){if(ui===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);ui=o&&o[1]||"",ja=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ui+i+ja}var Ss=!1;function hi(i,o){if(!i||Ss)return"";Ss=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(o){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(le){var ae=le}Reflect.construct(i,[],pe)}else{try{pe.call()}catch(le){ae=le}i.call(pe.prototype)}}else{try{throw Error()}catch(le){ae=le}(pe=i())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(le){if(le&&ae&&typeof le.stack=="string")return[le.stack,ae.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=h.DetermineComponentFrameRoot(),x=y[0],M=y[1];if(x&&M){var q=x.split(`
`),oe=M.split(`
`);for(g=h=0;h<q.length&&!q[h].includes("DetermineComponentFrameRoot");)h++;for(;g<oe.length&&!oe[g].includes("DetermineComponentFrameRoot");)g++;if(h===q.length||g===oe.length)for(h=q.length-1,g=oe.length-1;1<=h&&0<=g&&q[h]!==oe[g];)g--;for(;1<=h&&0<=g;h--,g--)if(q[h]!==oe[g]){if(h!==1||g!==1)do if(h--,g--,0>g||q[h]!==oe[g]){var he=`
`+q[h].replace(" at new "," at ");return i.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",i.displayName)),he}while(1<=h&&0<=g);break}}}finally{Ss=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?$r(l):""}function Cc(i){switch(i.tag){case 26:case 27:case 5:return $r(i.type);case 16:return $r("Lazy");case 13:return $r("Suspense");case 19:return $r("SuspenseList");case 0:case 15:return hi(i.type,!1);case 11:return hi(i.type.render,!1);case 1:return hi(i.type,!0);case 31:return $r("Activity");default:return""}}function Ba(i){try{var o="";do o+=Cc(i),i=i.return;while(i);return o}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Un(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Rc(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ep(i){var o=Rc(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),h=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,y=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(x){h=""+x,y.call(this,x)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(x){h=""+x},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Ha(i){i._valueTracker||(i._valueTracker=Ep(i))}function Ic(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),h="";return i&&(h=Rc(i)?i.checked?"true":"false":i.value),i=h,i!==l?(o.setValue(i),!0):!1}function Oo(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var bp=/[\n"\\]/g;function qt(i){return i.replace(bp,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function rr(i,o,l,h,g,y,x,M){i.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?i.type=x:i.removeAttribute("type"),o!=null?x==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+Un(o)):i.value!==""+Un(o)&&(i.value=""+Un(o)):x!=="submit"&&x!=="reset"||i.removeAttribute("value"),o!=null?As(i,x,Un(o)):l!=null?As(i,x,Un(l)):h!=null&&i.removeAttribute("value"),g==null&&y!=null&&(i.defaultChecked=!!y),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?i.name=""+Un(M):i.removeAttribute("name")}function Vo(i,o,l,h,g,y,x,M){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),o!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||o!=null))return;l=l!=null?""+Un(l):"",o=o!=null?""+Un(o):l,M||o===i.value||(i.value=o),i.defaultValue=o}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=M?i.checked:!!h,i.defaultChecked=!!h,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(i.name=x)}function As(i,o,l){o==="number"&&Oo(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Hi(i,o,l,h){if(i=i.options,o){o={};for(var g=0;g<l.length;g++)o["$"+l[g]]=!0;for(l=0;l<i.length;l++)g=o.hasOwnProperty("$"+i[l].value),i[l].selected!==g&&(i[l].selected=g),g&&h&&(i[l].defaultSelected=!0)}else{for(l=""+Un(l),o=null,g=0;g<i.length;g++){if(i[g].value===l){i[g].selected=!0,h&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function dt(i,o,l){if(o!=null&&(o=""+Un(o),o!==i.value&&(i.value=o),l==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=l!=null?""+Un(l):""}function Lo(i,o,l,h){if(o==null){if(h!=null){if(l!=null)throw Error(r(92));if(X(h)){if(1<h.length)throw Error(r(93));h=h[0]}l=h}l==null&&(l=""),o=l}l=Un(o),i.defaultValue=l,h=i.textContent,h===l&&h!==""&&h!==null&&(i.value=h)}function Sr(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var Uo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wh(i,o,l){var h=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":h?i.setProperty(o,l):typeof l!="number"||l===0||Uo.has(o)?o==="float"?i.cssFloat=l:i[o]=(""+l).trim():i[o]=l+"px"}function Nc(i,o,l){if(o!=null&&typeof o!="object")throw Error(r(62));if(i=i.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||o!=null&&o.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var g in o)h=o[g],o.hasOwnProperty(g)&&l[g]!==h&&Wh(i,g,h)}else for(var y in o)o.hasOwnProperty(y)&&Wh(i,y,o[y])}function Dc(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fa(i){return xp.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Fi=null;function Ar(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var $i=null,qi=null;function kc(i){var o=wr(i);if(o&&(i=o.stateNode)){var l=i[Nt]||null;e:switch(i=o.stateNode,o.type){case"input":if(rr(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+qt(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var h=l[o];if(h!==i&&h.form===i.form){var g=h[Nt]||null;if(!g)throw Error(r(90));rr(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<l.length;o++)h=l[o],h.form===i.form&&Ic(h)}break e;case"textarea":dt(i,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&Hi(i,!!l.multiple,o,!1)}}}var di=!1;function Zh(i,o,l){if(di)return i(o,l);di=!0;try{var h=i(o);return h}finally{if(di=!1,($i!==null||qi!==null)&&(qd(),$i&&(o=$i,i=qi,qi=$i=null,kc(o),i)))for(o=0;o<i.length;o++)kc(i[o])}}function zo(i,o){var l=i.stateNode;if(l===null)return null;var h=l[Nt]||null;if(h===null)return null;l=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,o,typeof l));return l}var qr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cr=!1;if(qr)try{var jo={};Object.defineProperty(jo,"passive",{get:function(){Cr=!0}}),window.addEventListener("test",jo,jo),window.removeEventListener("test",jo,jo)}catch{Cr=!1}var fi=null,Cs=null,Gi=null;function Mc(){if(Gi)return Gi;var i,o=Cs,l=o.length,h,g="value"in fi?fi.value:fi.textContent,y=g.length;for(i=0;i<l&&o[i]===g[i];i++);var x=l-i;for(h=1;h<=x&&o[l-h]===g[y-h];h++);return Gi=g.slice(i,1<h?1-h:void 0)}function mi(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function pi(){return!0}function Pc(){return!1}function an(i){function o(l,h,g,y,x){this._reactName=l,this._targetInst=g,this.type=h,this.nativeEvent=y,this.target=x,this.currentTarget=null;for(var M in i)i.hasOwnProperty(M)&&(l=i[M],this[M]=l?l(y):y[M]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?pi:Pc,this.isPropagationStopped=Pc,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=pi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=pi)},persist:function(){},isPersistent:pi}),o}var lt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$a=an(lt),Bo=p({},lt,{view:0,detail:0}),Jh=an(Bo),qa,Ga,gi,Ho=p({},Bo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==gi&&(gi&&i.type==="mousemove"?(qa=i.screenX-gi.screenX,Ga=i.screenY-gi.screenY):Ga=qa=0,gi=i),qa)},movementY:function(i){return"movementY"in i?i.movementY:Ga}}),Rr=an(Ho),ed=p({},Ho,{dataTransfer:0}),Tp=an(ed),Fo=p({},Bo,{relatedTarget:0}),Ya=an(Fo),Oc=p({},lt,{animationName:0,elapsedTime:0,pseudoElement:0}),Ka=an(Oc),td=p({},lt,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Xa=an(td),Sp=p({},lt,{data:0}),Vc=an(Sp),$o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lc(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=rd[i])?!!o[i]:!1}function qo(){return Lc}var id=p({},Bo,{key:function(i){if(i.key){var o=$o[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=mi(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?nd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qo,charCode:function(i){return i.type==="keypress"?mi(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?mi(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Qa=an(id),sd=p({},Ho,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uc=an(sd),Yi=p({},Bo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qo}),od=an(Yi),ad=p({},lt,{propertyName:0,elapsedTime:0,pseudoElement:0}),ld=an(ad),cd=p({},Ho,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Wa=an(cd),zn=p({},lt,{newState:0,oldState:0}),ud=an(zn),hd=[9,13,27,32],yi=qr&&"CompositionEvent"in window,m=null;qr&&"documentMode"in document&&(m=document.documentMode);var E=qr&&"TextEvent"in window&&!m,w=qr&&(!yi||m&&8<m&&11>=m),j=" ",re=!1;function ce(i,o){switch(i){case"keyup":return hd.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ee(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var We=!1;function Jt(i,o){switch(i){case"compositionend":return Ee(o);case"keypress":return o.which!==32?null:(re=!0,j);case"textInput":return i=o.data,i===j&&re?null:i;default:return null}}function Ze(i,o){if(We)return i==="compositionend"||!yi&&ce(i,o)?(i=Mc(),Gi=Cs=fi=null,We=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return w&&o.locale!=="ko"?null:o.data;default:return null}}var ln={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function en(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!ln[i.type]:o==="textarea"}function Ki(i,o,l,h){$i?qi?qi.push(h):qi=[h]:$i=h,o=Wd(o,"onChange"),0<o.length&&(l=new $a("onChange","change",null,l,h),i.push({event:l,listeners:o}))}var gn=null,vi=null;function zc(i){l1(i,0)}function dd(i){var o=xr(i);if(Ic(o))return i}function IE(i,o){if(i==="change")return o}var NE=!1;if(qr){var Ap;if(qr){var Cp="oninput"in document;if(!Cp){var DE=document.createElement("div");DE.setAttribute("oninput","return;"),Cp=typeof DE.oninput=="function"}Ap=Cp}else Ap=!1;NE=Ap&&(!document.documentMode||9<document.documentMode)}function kE(){gn&&(gn.detachEvent("onpropertychange",ME),vi=gn=null)}function ME(i){if(i.propertyName==="value"&&dd(vi)){var o=[];Ki(o,vi,i,Ar(i)),Zh(zc,o)}}function ck(i,o,l){i==="focusin"?(kE(),gn=o,vi=l,gn.attachEvent("onpropertychange",ME)):i==="focusout"&&kE()}function uk(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return dd(vi)}function hk(i,o){if(i==="click")return dd(o)}function dk(i,o){if(i==="input"||i==="change")return dd(o)}function fk(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var ir=typeof Object.is=="function"?Object.is:fk;function jc(i,o){if(ir(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),h=Object.keys(o);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var g=l[h];if(!it.call(o,g)||!ir(i[g],o[g]))return!1}return!0}function PE(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function OE(i,o){var l=PE(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=o&&h>=o)return{node:l,offset:o-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=PE(l)}}function VE(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?VE(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function LE(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Oo(i.document);o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)i=o.contentWindow;else break;o=Oo(i.document)}return o}function Rp(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var mk=qr&&"documentMode"in document&&11>=document.documentMode,Za=null,Ip=null,Bc=null,Np=!1;function UE(i,o,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Np||Za==null||Za!==Oo(h)||(h=Za,"selectionStart"in h&&Rp(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Bc&&jc(Bc,h)||(Bc=h,h=Wd(Ip,"onSelect"),0<h.length&&(o=new $a("onSelect","select",null,o,l),i.push({event:o,listeners:h}),o.target=Za)))}function Go(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var Ja={animationend:Go("Animation","AnimationEnd"),animationiteration:Go("Animation","AnimationIteration"),animationstart:Go("Animation","AnimationStart"),transitionrun:Go("Transition","TransitionRun"),transitionstart:Go("Transition","TransitionStart"),transitioncancel:Go("Transition","TransitionCancel"),transitionend:Go("Transition","TransitionEnd")},Dp={},zE={};qr&&(zE=document.createElement("div").style,"AnimationEvent"in window||(delete Ja.animationend.animation,delete Ja.animationiteration.animation,delete Ja.animationstart.animation),"TransitionEvent"in window||delete Ja.transitionend.transition);function Yo(i){if(Dp[i])return Dp[i];if(!Ja[i])return i;var o=Ja[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in zE)return Dp[i]=o[l];return i}var jE=Yo("animationend"),BE=Yo("animationiteration"),HE=Yo("animationstart"),pk=Yo("transitionrun"),gk=Yo("transitionstart"),yk=Yo("transitioncancel"),FE=Yo("transitionend"),$E=new Map,kp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kp.push("scrollEnd");function Gr(i,o){$E.set(i,o),nr(o,[i])}var qE=new WeakMap;function Ir(i,o){if(typeof i=="object"&&i!==null){var l=qE.get(i);return l!==void 0?l:(o={value:i,source:o,stack:Ba(o)},qE.set(i,o),o)}return{value:i,source:o,stack:Ba(o)}}var Nr=[],el=0,Mp=0;function fd(){for(var i=el,o=Mp=el=0;o<i;){var l=Nr[o];Nr[o++]=null;var h=Nr[o];Nr[o++]=null;var g=Nr[o];Nr[o++]=null;var y=Nr[o];if(Nr[o++]=null,h!==null&&g!==null){var x=h.pending;x===null?g.next=g:(g.next=x.next,x.next=g),h.pending=g}y!==0&&GE(l,g,y)}}function md(i,o,l,h){Nr[el++]=i,Nr[el++]=o,Nr[el++]=l,Nr[el++]=h,Mp|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function Pp(i,o,l,h){return md(i,o,l,h),pd(i)}function tl(i,o){return md(i,null,null,o),pd(i)}function GE(i,o,l){i.lanes|=l;var h=i.alternate;h!==null&&(h.lanes|=l);for(var g=!1,y=i.return;y!==null;)y.childLanes|=l,h=y.alternate,h!==null&&(h.childLanes|=l),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(g=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,g&&o!==null&&(g=31-xt(l),i=y.hiddenUpdates,h=i[g],h===null?i[g]=[o]:h.push(o),o.lane=l|536870912),y):null}function pd(i){if(50<du)throw du=0,jg=null,Error(r(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var nl={};function vk(i,o,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(i,o,l,h){return new vk(i,o,l,h)}function Op(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Xi(i,o){var l=i.alternate;return l===null?(l=sr(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function YE(i,o){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,o=l.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function gd(i,o,l,h,g,y){var x=0;if(h=i,typeof i=="function")Op(i)&&(x=1);else if(typeof i=="string")x=EM(i,l,se.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case A:return i=sr(31,l,o,g),i.elementType=A,i.lanes=y,i;case T:return Ko(l.children,g,y,o);case R:x=8,g|=24;break;case I:return i=sr(12,l,o,g|2),i.elementType=I,i.lanes=y,i;case G:return i=sr(13,l,o,g),i.elementType=G,i.lanes=y,i;case K:return i=sr(19,l,o,g),i.elementType=K,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case N:case $:x=10;break e;case L:x=9;break e;case H:x=11;break e;case k:x=14;break e;case S:x=16,h=null;break e}x=29,l=Error(r(130,i===null?"null":typeof i,"")),h=null}return o=sr(x,l,o,g),o.elementType=i,o.type=h,o.lanes=y,o}function Ko(i,o,l,h){return i=sr(7,i,h,o),i.lanes=l,i}function Vp(i,o,l){return i=sr(6,i,null,o),i.lanes=l,i}function Lp(i,o,l){return o=sr(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var rl=[],il=0,yd=null,vd=0,Dr=[],kr=0,Xo=null,Qi=1,Wi="";function Qo(i,o){rl[il++]=vd,rl[il++]=yd,yd=i,vd=o}function KE(i,o,l){Dr[kr++]=Qi,Dr[kr++]=Wi,Dr[kr++]=Xo,Xo=i;var h=Qi;i=Wi;var g=32-xt(h)-1;h&=~(1<<g),l+=1;var y=32-xt(o)+g;if(30<y){var x=g-g%5;y=(h&(1<<x)-1).toString(32),h>>=x,g-=x,Qi=1<<32-xt(o)+g|l<<g|h,Wi=y+i}else Qi=1<<y|l<<g|h,Wi=i}function Up(i){i.return!==null&&(Qo(i,1),KE(i,1,0))}function zp(i){for(;i===yd;)yd=rl[--il],rl[il]=null,vd=rl[--il],rl[il]=null;for(;i===Xo;)Xo=Dr[--kr],Dr[kr]=null,Wi=Dr[--kr],Dr[kr]=null,Qi=Dr[--kr],Dr[kr]=null}var jn=null,Dt=null,ot=!1,Wo=null,_i=!1,jp=Error(r(519));function Zo(i){var o=Error(r(418,""));throw $c(Ir(o,i)),jp}function XE(i){var o=i.stateNode,l=i.type,h=i.memoizedProps;switch(o[Lt]=i,o[Nt]=h,l){case"dialog":Ke("cancel",o),Ke("close",o);break;case"iframe":case"object":case"embed":Ke("load",o);break;case"video":case"audio":for(l=0;l<mu.length;l++)Ke(mu[l],o);break;case"source":Ke("error",o);break;case"img":case"image":case"link":Ke("error",o),Ke("load",o);break;case"details":Ke("toggle",o);break;case"input":Ke("invalid",o),Vo(o,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),Ha(o);break;case"select":Ke("invalid",o);break;case"textarea":Ke("invalid",o),Lo(o,h.value,h.defaultValue,h.children),Ha(o)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||h.suppressHydrationWarning===!0||d1(o.textContent,l)?(h.popover!=null&&(Ke("beforetoggle",o),Ke("toggle",o)),h.onScroll!=null&&Ke("scroll",o),h.onScrollEnd!=null&&Ke("scrollend",o),h.onClick!=null&&(o.onclick=Zd),o=!0):o=!1,o||Zo(i)}function QE(i){for(jn=i.return;jn;)switch(jn.tag){case 5:case 13:_i=!1;return;case 27:case 3:_i=!0;return;default:jn=jn.return}}function Hc(i){if(i!==jn)return!1;if(!ot)return QE(i),ot=!0,!1;var o=i.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||ny(i.type,i.memoizedProps)),l=!l),l&&Dt&&Zo(i),QE(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8)if(l=i.data,l==="/$"){if(o===0){Dt=Kr(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++;i=i.nextSibling}Dt=null}}else o===27?(o=Dt,Fs(i.type)?(i=oy,oy=null,Dt=i):Dt=o):Dt=jn?Kr(i.stateNode.nextSibling):null;return!0}function Fc(){Dt=jn=null,ot=!1}function WE(){var i=Wo;return i!==null&&(Yn===null?Yn=i:Yn.push.apply(Yn,i),Wo=null),i}function $c(i){Wo===null?Wo=[i]:Wo.push(i)}var Bp=W(null),Jo=null,Zi=null;function Rs(i,o,l){Q(Bp,o._currentValue),o._currentValue=l}function Ji(i){i._currentValue=Bp.current,ne(Bp)}function Hp(i,o,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===l)break;i=i.return}}function Fp(i,o,l,h){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var y=g.dependencies;if(y!==null){var x=g.child;y=y.firstContext;e:for(;y!==null;){var M=y;y=g;for(var q=0;q<o.length;q++)if(M.context===o[q]){y.lanes|=l,M=y.alternate,M!==null&&(M.lanes|=l),Hp(y.return,l,i),h||(x=null);break e}y=M.next}}else if(g.tag===18){if(x=g.return,x===null)throw Error(r(341));x.lanes|=l,y=x.alternate,y!==null&&(y.lanes|=l),Hp(x,l,i),x=null}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===i){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}}function qc(i,o,l,h){i=null;for(var g=o,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var x=g.alternate;if(x===null)throw Error(r(387));if(x=x.memoizedProps,x!==null){var M=g.type;ir(g.pendingProps.value,x.value)||(i!==null?i.push(M):i=[M])}}else if(g===ye.current){if(x=g.alternate,x===null)throw Error(r(387));x.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(Eu):i=[Eu])}g=g.return}i!==null&&Fp(o,i,l,h),o.flags|=262144}function _d(i){for(i=i.firstContext;i!==null;){if(!ir(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ea(i){Jo=i,Zi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Sn(i){return ZE(Jo,i)}function Ed(i,o){return Jo===null&&ea(i),ZE(i,o)}function ZE(i,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},Zi===null){if(i===null)throw Error(r(308));Zi=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Zi=Zi.next=o;return l}var _k=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(l,h){i.push(h)}};this.abort=function(){o.aborted=!0,i.forEach(function(l){return l()})}},Ek=t.unstable_scheduleCallback,bk=t.unstable_NormalPriority,tn={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $p(){return{controller:new _k,data:new Map,refCount:0}}function Gc(i){i.refCount--,i.refCount===0&&Ek(bk,function(){i.controller.abort()})}var Yc=null,qp=0,sl=0,ol=null;function wk(i,o){if(Yc===null){var l=Yc=[];qp=0,sl=Yg(),ol={status:"pending",value:void 0,then:function(h){l.push(h)}}}return qp++,o.then(JE,JE),o}function JE(){if(--qp===0&&Yc!==null){ol!==null&&(ol.status="fulfilled");var i=Yc;Yc=null,sl=0,ol=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function xk(i,o){var l=[],h={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return i.then(function(){h.status="fulfilled",h.value=o;for(var g=0;g<l.length;g++)(0,l[g])(o)},function(g){for(h.status="rejected",h.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),h}var eb=z.S;z.S=function(i,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&wk(i,o),eb!==null&&eb(i,o)};var ta=W(null);function Gp(){var i=ta.current;return i!==null?i:vt.pooledCache}function bd(i,o){o===null?Q(ta,ta.current):Q(ta,o.pool)}function tb(){var i=Gp();return i===null?null:{parent:tn._currentValue,pool:i}}var Kc=Error(r(460)),nb=Error(r(474)),wd=Error(r(542)),Yp={then:function(){}};function rb(i){return i=i.status,i==="fulfilled"||i==="rejected"}function xd(){}function ib(i,o,l){switch(l=i[l],l===void 0?i.push(o):l!==o&&(o.then(xd,xd),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,ob(i),i;default:if(typeof o.status=="string")o.then(xd,xd);else{if(i=vt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=o,i.status="pending",i.then(function(h){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=h}},function(h){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=h}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,ob(i),i}throw Xc=o,Kc}}var Xc=null;function sb(){if(Xc===null)throw Error(r(459));var i=Xc;return Xc=null,i}function ob(i){if(i===Kc||i===wd)throw Error(r(483))}var Is=!1;function Kp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xp(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ns(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ds(i,o,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(ut&2)!==0){var g=h.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),h.pending=o,o=pd(i),GE(i,null,l),o}return md(i,h,o,l),pd(i)}function Qc(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var h=o.lanes;h&=i.pendingLanes,l|=h,o.lanes=l,Do(i,l)}}function Qp(i,o){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var g=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var x={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?g=y=x:y=y.next=x,l=l.next}while(l!==null);y===null?g=y=o:y=y.next=o}else g=y=o;l={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:h.shared,callbacks:h.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}var Wp=!1;function Wc(){if(Wp){var i=ol;if(i!==null)throw i}}function Zc(i,o,l,h){Wp=!1;var g=i.updateQueue;Is=!1;var y=g.firstBaseUpdate,x=g.lastBaseUpdate,M=g.shared.pending;if(M!==null){g.shared.pending=null;var q=M,oe=q.next;q.next=null,x===null?y=oe:x.next=oe,x=q;var he=i.alternate;he!==null&&(he=he.updateQueue,M=he.lastBaseUpdate,M!==x&&(M===null?he.firstBaseUpdate=oe:M.next=oe,he.lastBaseUpdate=q))}if(y!==null){var pe=g.baseState;x=0,he=oe=q=null,M=y;do{var ae=M.lane&-536870913,le=ae!==M.lane;if(le?(Je&ae)===ae:(h&ae)===ae){ae!==0&&ae===sl&&(Wp=!0),he!==null&&(he=he.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var Pe=i,Ne=M;ae=o;var pt=l;switch(Ne.tag){case 1:if(Pe=Ne.payload,typeof Pe=="function"){pe=Pe.call(pt,pe,ae);break e}pe=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Ne.payload,ae=typeof Pe=="function"?Pe.call(pt,pe,ae):Pe,ae==null)break e;pe=p({},pe,ae);break e;case 2:Is=!0}}ae=M.callback,ae!==null&&(i.flags|=64,le&&(i.flags|=8192),le=g.callbacks,le===null?g.callbacks=[ae]:le.push(ae))}else le={lane:ae,tag:M.tag,payload:M.payload,callback:M.callback,next:null},he===null?(oe=he=le,q=pe):he=he.next=le,x|=ae;if(M=M.next,M===null){if(M=g.shared.pending,M===null)break;le=M,M=le.next,le.next=null,g.lastBaseUpdate=le,g.shared.pending=null}}while(!0);he===null&&(q=pe),g.baseState=q,g.firstBaseUpdate=oe,g.lastBaseUpdate=he,y===null&&(g.shared.lanes=0),zs|=x,i.lanes=x,i.memoizedState=pe}}function ab(i,o){if(typeof i!="function")throw Error(r(191,i));i.call(o)}function lb(i,o){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)ab(l[i],o)}var al=W(null),Td=W(0);function cb(i,o){i=os,Q(Td,i),Q(al,o),os=i|o.baseLanes}function Zp(){Q(Td,os),Q(al,al.current)}function Jp(){os=Td.current,ne(al),ne(Td)}var ks=0,He=null,ft=null,Gt=null,Sd=!1,ll=!1,na=!1,Ad=0,Jc=0,cl=null,Tk=0;function Ut(){throw Error(r(321))}function eg(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!ir(i[l],o[l]))return!1;return!0}function tg(i,o,l,h,g,y){return ks=y,He=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,z.H=i===null||i.memoizedState===null?Gb:Yb,na=!1,y=l(h,g),na=!1,ll&&(y=hb(o,l,h,g)),ub(i),y}function ub(i){z.H=kd;var o=ft!==null&&ft.next!==null;if(ks=0,Gt=ft=He=null,Sd=!1,Jc=0,cl=null,o)throw Error(r(300));i===null||cn||(i=i.dependencies,i!==null&&_d(i)&&(cn=!0))}function hb(i,o,l,h){He=i;var g=0;do{if(ll&&(cl=null),Jc=0,ll=!1,25<=g)throw Error(r(301));if(g+=1,Gt=ft=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}z.H=Dk,y=o(l,h)}while(ll);return y}function Sk(){var i=z.H,o=i.useState()[0];return o=typeof o.then=="function"?eu(o):o,i=i.useState()[0],(ft!==null?ft.memoizedState:null)!==i&&(He.flags|=1024),o}function ng(){var i=Ad!==0;return Ad=0,i}function rg(i,o,l){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~l}function ig(i){if(Sd){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Sd=!1}ks=0,Gt=ft=He=null,ll=!1,Jc=Ad=0,cl=null}function qn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?He.memoizedState=Gt=i:Gt=Gt.next=i,Gt}function Yt(){if(ft===null){var i=He.alternate;i=i!==null?i.memoizedState:null}else i=ft.next;var o=Gt===null?He.memoizedState:Gt.next;if(o!==null)Gt=o,ft=i;else{if(i===null)throw He.alternate===null?Error(r(467)):Error(r(310));ft=i,i={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Gt===null?He.memoizedState=Gt=i:Gt=Gt.next=i}return Gt}function sg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function eu(i){var o=Jc;return Jc+=1,cl===null&&(cl=[]),i=ib(cl,i,o),o=He,(Gt===null?o.memoizedState:Gt.next)===null&&(o=o.alternate,z.H=o===null||o.memoizedState===null?Gb:Yb),i}function Cd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return eu(i);if(i.$$typeof===$)return Sn(i)}throw Error(r(438,String(i)))}function og(i){var o=null,l=He.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var h=He.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(o={data:h.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=sg(),He.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(i),h=0;h<i;h++)l[h]=V;return o.index++,l}function es(i,o){return typeof o=="function"?o(i):o}function Rd(i){var o=Yt();return ag(o,ft,i)}function ag(i,o,l){var h=i.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=l;var g=i.baseQueue,y=h.pending;if(y!==null){if(g!==null){var x=g.next;g.next=y.next,y.next=x}o.baseQueue=g=y,h.pending=null}if(y=i.baseState,g===null)i.memoizedState=y;else{o=g.next;var M=x=null,q=null,oe=o,he=!1;do{var pe=oe.lane&-536870913;if(pe!==oe.lane?(Je&pe)===pe:(ks&pe)===pe){var ae=oe.revertLane;if(ae===0)q!==null&&(q=q.next={lane:0,revertLane:0,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),pe===sl&&(he=!0);else if((ks&ae)===ae){oe=oe.next,ae===sl&&(he=!0);continue}else pe={lane:0,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},q===null?(M=q=pe,x=y):q=q.next=pe,He.lanes|=ae,zs|=ae;pe=oe.action,na&&l(y,pe),y=oe.hasEagerState?oe.eagerState:l(y,pe)}else ae={lane:pe,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},q===null?(M=q=ae,x=y):q=q.next=ae,He.lanes|=pe,zs|=pe;oe=oe.next}while(oe!==null&&oe!==o);if(q===null?x=y:q.next=M,!ir(y,i.memoizedState)&&(cn=!0,he&&(l=ol,l!==null)))throw l;i.memoizedState=y,i.baseState=x,i.baseQueue=q,h.lastRenderedState=y}return g===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function lg(i){var o=Yt(),l=o.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var h=l.dispatch,g=l.pending,y=o.memoizedState;if(g!==null){l.pending=null;var x=g=g.next;do y=i(y,x.action),x=x.next;while(x!==g);ir(y,o.memoizedState)||(cn=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),l.lastRenderedState=y}return[y,h]}function db(i,o,l){var h=He,g=Yt(),y=ot;if(y){if(l===void 0)throw Error(r(407));l=l()}else l=o();var x=!ir((ft||g).memoizedState,l);x&&(g.memoizedState=l,cn=!0),g=g.queue;var M=pb.bind(null,h,g,i);if(tu(2048,8,M,[i]),g.getSnapshot!==o||x||Gt!==null&&Gt.memoizedState.tag&1){if(h.flags|=2048,ul(9,Id(),mb.bind(null,h,g,l,o),null),vt===null)throw Error(r(349));y||(ks&124)!==0||fb(h,o,l)}return l}function fb(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=He.updateQueue,o===null?(o=sg(),He.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function mb(i,o,l,h){o.value=l,o.getSnapshot=h,gb(o)&&yb(i)}function pb(i,o,l){return l(function(){gb(o)&&yb(i)})}function gb(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!ir(i,l)}catch{return!0}}function yb(i){var o=tl(i,2);o!==null&&ur(o,i,2)}function cg(i){var o=qn();if(typeof i=="function"){var l=i;if(i=l(),na){Ft(!0);try{l()}finally{Ft(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:i},o}function vb(i,o,l,h){return i.baseState=l,ag(i,ft,typeof h=="function"?h:es)}function Ak(i,o,l,h,g){if(Dd(i))throw Error(r(485));if(i=o.action,i!==null){var y={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){y.listeners.push(x)}};z.T!==null?l(!0):y.isTransition=!1,h(y),l=o.pending,l===null?(y.next=o.pending=y,_b(o,y)):(y.next=l.next,o.pending=l.next=y)}}function _b(i,o){var l=o.action,h=o.payload,g=i.state;if(o.isTransition){var y=z.T,x={};z.T=x;try{var M=l(g,h),q=z.S;q!==null&&q(x,M),Eb(i,o,M)}catch(oe){ug(i,o,oe)}finally{z.T=y}}else try{y=l(g,h),Eb(i,o,y)}catch(oe){ug(i,o,oe)}}function Eb(i,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){bb(i,o,h)},function(h){return ug(i,o,h)}):bb(i,o,l)}function bb(i,o,l){o.status="fulfilled",o.value=l,wb(o),i.state=l,o=i.pending,o!==null&&(l=o.next,l===o?i.pending=null:(l=l.next,o.next=l,_b(i,l)))}function ug(i,o,l){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do o.status="rejected",o.reason=l,wb(o),o=o.next;while(o!==h)}i.action=null}function wb(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function xb(i,o){return o}function Tb(i,o){if(ot){var l=vt.formState;if(l!==null){e:{var h=He;if(ot){if(Dt){t:{for(var g=Dt,y=_i;g.nodeType!==8;){if(!y){g=null;break t}if(g=Kr(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){Dt=Kr(g.nextSibling),h=g.data==="F!";break e}}Zo(h)}h=!1}h&&(o=l[0])}}return l=qn(),l.memoizedState=l.baseState=o,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xb,lastRenderedState:o},l.queue=h,l=Fb.bind(null,He,h),h.dispatch=l,h=cg(!1),y=pg.bind(null,He,!1,h.queue),h=qn(),g={state:o,dispatch:null,action:i,pending:null},h.queue=g,l=Ak.bind(null,He,g,y,l),g.dispatch=l,h.memoizedState=i,[o,l,!1]}function Sb(i){var o=Yt();return Ab(o,ft,i)}function Ab(i,o,l){if(o=ag(i,o,xb)[0],i=Rd(es)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var h=eu(o)}catch(x){throw x===Kc?wd:x}else h=o;o=Yt();var g=o.queue,y=g.dispatch;return l!==o.memoizedState&&(He.flags|=2048,ul(9,Id(),Ck.bind(null,g,l),null)),[h,y,i]}function Ck(i,o){i.action=o}function Cb(i){var o=Yt(),l=ft;if(l!==null)return Ab(o,l,i);Yt(),o=o.memoizedState,l=Yt();var h=l.queue.dispatch;return l.memoizedState=i,[o,h,!1]}function ul(i,o,l,h){return i={tag:i,create:l,deps:h,inst:o,next:null},o=He.updateQueue,o===null&&(o=sg(),He.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,o.lastEffect=i),i}function Id(){return{destroy:void 0,resource:void 0}}function Rb(){return Yt().memoizedState}function Nd(i,o,l,h){var g=qn();h=h===void 0?null:h,He.flags|=i,g.memoizedState=ul(1|o,Id(),l,h)}function tu(i,o,l,h){var g=Yt();h=h===void 0?null:h;var y=g.memoizedState.inst;ft!==null&&h!==null&&eg(h,ft.memoizedState.deps)?g.memoizedState=ul(o,y,l,h):(He.flags|=i,g.memoizedState=ul(1|o,y,l,h))}function Ib(i,o){Nd(8390656,8,i,o)}function Nb(i,o){tu(2048,8,i,o)}function Db(i,o){return tu(4,2,i,o)}function kb(i,o){return tu(4,4,i,o)}function Mb(i,o){if(typeof o=="function"){i=i();var l=o(i);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Pb(i,o,l){l=l!=null?l.concat([i]):null,tu(4,4,Mb.bind(null,o,i),l)}function hg(){}function Ob(i,o){var l=Yt();o=o===void 0?null:o;var h=l.memoizedState;return o!==null&&eg(o,h[1])?h[0]:(l.memoizedState=[i,o],i)}function Vb(i,o){var l=Yt();o=o===void 0?null:o;var h=l.memoizedState;if(o!==null&&eg(o,h[1]))return h[0];if(h=i(),na){Ft(!0);try{i()}finally{Ft(!1)}}return l.memoizedState=[h,o],h}function dg(i,o,l){return l===void 0||(ks&1073741824)!==0?i.memoizedState=o:(i.memoizedState=l,i=zw(),He.lanes|=i,zs|=i,l)}function Lb(i,o,l,h){return ir(l,o)?l:al.current!==null?(i=dg(i,l,h),ir(i,o)||(cn=!0),i):(ks&42)===0?(cn=!0,i.memoizedState=l):(i=zw(),He.lanes|=i,zs|=i,o)}function Ub(i,o,l,h,g){var y=Y.p;Y.p=y!==0&&8>y?y:8;var x=z.T,M={};z.T=M,pg(i,!1,o,l);try{var q=g(),oe=z.S;if(oe!==null&&oe(M,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var he=xk(q,h);nu(i,o,he,cr(i))}else nu(i,o,h,cr(i))}catch(pe){nu(i,o,{then:function(){},status:"rejected",reason:pe},cr())}finally{Y.p=y,z.T=x}}function Rk(){}function fg(i,o,l,h){if(i.tag!==5)throw Error(r(476));var g=zb(i).queue;Ub(i,g,o,te,l===null?Rk:function(){return jb(i),l(h)})}function zb(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:te},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:l},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function jb(i){var o=zb(i).next.queue;nu(i,o,{},cr())}function mg(){return Sn(Eu)}function Bb(){return Yt().memoizedState}function Hb(){return Yt().memoizedState}function Ik(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var l=cr();i=Ns(l);var h=Ds(o,i,l);h!==null&&(ur(h,o,l),Qc(h,o,l)),o={cache:$p()},i.payload=o;return}o=o.return}}function Nk(i,o,l){var h=cr();l={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Dd(i)?$b(o,l):(l=Pp(i,o,l,h),l!==null&&(ur(l,i,h),qb(l,o,h)))}function Fb(i,o,l){var h=cr();nu(i,o,l,h)}function nu(i,o,l,h){var g={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Dd(i))$b(o,g);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var x=o.lastRenderedState,M=y(x,l);if(g.hasEagerState=!0,g.eagerState=M,ir(M,x))return md(i,o,g,0),vt===null&&fd(),!1}catch{}finally{}if(l=Pp(i,o,g,h),l!==null)return ur(l,i,h),qb(l,o,h),!0}return!1}function pg(i,o,l,h){if(h={lane:2,revertLane:Yg(),action:h,hasEagerState:!1,eagerState:null,next:null},Dd(i)){if(o)throw Error(r(479))}else o=Pp(i,l,h,2),o!==null&&ur(o,i,2)}function Dd(i){var o=i.alternate;return i===He||o!==null&&o===He}function $b(i,o){ll=Sd=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function qb(i,o,l){if((l&4194048)!==0){var h=o.lanes;h&=i.pendingLanes,l|=h,o.lanes=l,Do(i,l)}}var kd={readContext:Sn,use:Cd,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut,useHostTransitionStatus:Ut,useFormState:Ut,useActionState:Ut,useOptimistic:Ut,useMemoCache:Ut,useCacheRefresh:Ut},Gb={readContext:Sn,use:Cd,useCallback:function(i,o){return qn().memoizedState=[i,o===void 0?null:o],i},useContext:Sn,useEffect:Ib,useImperativeHandle:function(i,o,l){l=l!=null?l.concat([i]):null,Nd(4194308,4,Mb.bind(null,o,i),l)},useLayoutEffect:function(i,o){return Nd(4194308,4,i,o)},useInsertionEffect:function(i,o){Nd(4,2,i,o)},useMemo:function(i,o){var l=qn();o=o===void 0?null:o;var h=i();if(na){Ft(!0);try{i()}finally{Ft(!1)}}return l.memoizedState=[h,o],h},useReducer:function(i,o,l){var h=qn();if(l!==void 0){var g=l(o);if(na){Ft(!0);try{l(o)}finally{Ft(!1)}}}else g=o;return h.memoizedState=h.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},h.queue=i,i=i.dispatch=Nk.bind(null,He,i),[h.memoizedState,i]},useRef:function(i){var o=qn();return i={current:i},o.memoizedState=i},useState:function(i){i=cg(i);var o=i.queue,l=Fb.bind(null,He,o);return o.dispatch=l,[i.memoizedState,l]},useDebugValue:hg,useDeferredValue:function(i,o){var l=qn();return dg(l,i,o)},useTransition:function(){var i=cg(!1);return i=Ub.bind(null,He,i.queue,!0,!1),qn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,l){var h=He,g=qn();if(ot){if(l===void 0)throw Error(r(407));l=l()}else{if(l=o(),vt===null)throw Error(r(349));(Je&124)!==0||fb(h,o,l)}g.memoizedState=l;var y={value:l,getSnapshot:o};return g.queue=y,Ib(pb.bind(null,h,y,i),[i]),h.flags|=2048,ul(9,Id(),mb.bind(null,h,y,l,o),null),l},useId:function(){var i=qn(),o=vt.identifierPrefix;if(ot){var l=Wi,h=Qi;l=(h&~(1<<32-xt(h)-1)).toString(32)+l,o=""+o+"R"+l,l=Ad++,0<l&&(o+="H"+l.toString(32)),o+=""}else l=Tk++,o=""+o+"r"+l.toString(32)+"";return i.memoizedState=o},useHostTransitionStatus:mg,useFormState:Tb,useActionState:Tb,useOptimistic:function(i){var o=qn();o.memoizedState=o.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=pg.bind(null,He,!0,l),l.dispatch=o,[i,o]},useMemoCache:og,useCacheRefresh:function(){return qn().memoizedState=Ik.bind(null,He)}},Yb={readContext:Sn,use:Cd,useCallback:Ob,useContext:Sn,useEffect:Nb,useImperativeHandle:Pb,useInsertionEffect:Db,useLayoutEffect:kb,useMemo:Vb,useReducer:Rd,useRef:Rb,useState:function(){return Rd(es)},useDebugValue:hg,useDeferredValue:function(i,o){var l=Yt();return Lb(l,ft.memoizedState,i,o)},useTransition:function(){var i=Rd(es)[0],o=Yt().memoizedState;return[typeof i=="boolean"?i:eu(i),o]},useSyncExternalStore:db,useId:Bb,useHostTransitionStatus:mg,useFormState:Sb,useActionState:Sb,useOptimistic:function(i,o){var l=Yt();return vb(l,ft,i,o)},useMemoCache:og,useCacheRefresh:Hb},Dk={readContext:Sn,use:Cd,useCallback:Ob,useContext:Sn,useEffect:Nb,useImperativeHandle:Pb,useInsertionEffect:Db,useLayoutEffect:kb,useMemo:Vb,useReducer:lg,useRef:Rb,useState:function(){return lg(es)},useDebugValue:hg,useDeferredValue:function(i,o){var l=Yt();return ft===null?dg(l,i,o):Lb(l,ft.memoizedState,i,o)},useTransition:function(){var i=lg(es)[0],o=Yt().memoizedState;return[typeof i=="boolean"?i:eu(i),o]},useSyncExternalStore:db,useId:Bb,useHostTransitionStatus:mg,useFormState:Cb,useActionState:Cb,useOptimistic:function(i,o){var l=Yt();return ft!==null?vb(l,ft,i,o):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:og,useCacheRefresh:Hb},hl=null,ru=0;function Md(i){var o=ru;return ru+=1,hl===null&&(hl=[]),ib(hl,i,o)}function iu(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Pd(i,o){throw o.$$typeof===v?Error(r(525)):(i=Object.prototype.toString.call(o),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Kb(i){var o=i._init;return o(i._payload)}function Xb(i){function o(ee,Z){if(i){var ie=ee.deletions;ie===null?(ee.deletions=[Z],ee.flags|=16):ie.push(Z)}}function l(ee,Z){if(!i)return null;for(;Z!==null;)o(ee,Z),Z=Z.sibling;return null}function h(ee){for(var Z=new Map;ee!==null;)ee.key!==null?Z.set(ee.key,ee):Z.set(ee.index,ee),ee=ee.sibling;return Z}function g(ee,Z){return ee=Xi(ee,Z),ee.index=0,ee.sibling=null,ee}function y(ee,Z,ie){return ee.index=ie,i?(ie=ee.alternate,ie!==null?(ie=ie.index,ie<Z?(ee.flags|=67108866,Z):ie):(ee.flags|=67108866,Z)):(ee.flags|=1048576,Z)}function x(ee){return i&&ee.alternate===null&&(ee.flags|=67108866),ee}function M(ee,Z,ie,me){return Z===null||Z.tag!==6?(Z=Vp(ie,ee.mode,me),Z.return=ee,Z):(Z=g(Z,ie),Z.return=ee,Z)}function q(ee,Z,ie,me){var Se=ie.type;return Se===T?he(ee,Z,ie.props.children,me,ie.key):Z!==null&&(Z.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===S&&Kb(Se)===Z.type)?(Z=g(Z,ie.props),iu(Z,ie),Z.return=ee,Z):(Z=gd(ie.type,ie.key,ie.props,null,ee.mode,me),iu(Z,ie),Z.return=ee,Z)}function oe(ee,Z,ie,me){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==ie.containerInfo||Z.stateNode.implementation!==ie.implementation?(Z=Lp(ie,ee.mode,me),Z.return=ee,Z):(Z=g(Z,ie.children||[]),Z.return=ee,Z)}function he(ee,Z,ie,me,Se){return Z===null||Z.tag!==7?(Z=Ko(ie,ee.mode,me,Se),Z.return=ee,Z):(Z=g(Z,ie),Z.return=ee,Z)}function pe(ee,Z,ie){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=Vp(""+Z,ee.mode,ie),Z.return=ee,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case _:return ie=gd(Z.type,Z.key,Z.props,null,ee.mode,ie),iu(ie,Z),ie.return=ee,ie;case b:return Z=Lp(Z,ee.mode,ie),Z.return=ee,Z;case S:var me=Z._init;return Z=me(Z._payload),pe(ee,Z,ie)}if(X(Z)||F(Z))return Z=Ko(Z,ee.mode,ie,null),Z.return=ee,Z;if(typeof Z.then=="function")return pe(ee,Md(Z),ie);if(Z.$$typeof===$)return pe(ee,Ed(ee,Z),ie);Pd(ee,Z)}return null}function ae(ee,Z,ie,me){var Se=Z!==null?Z.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return Se!==null?null:M(ee,Z,""+ie,me);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case _:return ie.key===Se?q(ee,Z,ie,me):null;case b:return ie.key===Se?oe(ee,Z,ie,me):null;case S:return Se=ie._init,ie=Se(ie._payload),ae(ee,Z,ie,me)}if(X(ie)||F(ie))return Se!==null?null:he(ee,Z,ie,me,null);if(typeof ie.then=="function")return ae(ee,Z,Md(ie),me);if(ie.$$typeof===$)return ae(ee,Z,Ed(ee,ie),me);Pd(ee,ie)}return null}function le(ee,Z,ie,me,Se){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return ee=ee.get(ie)||null,M(Z,ee,""+me,Se);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case _:return ee=ee.get(me.key===null?ie:me.key)||null,q(Z,ee,me,Se);case b:return ee=ee.get(me.key===null?ie:me.key)||null,oe(Z,ee,me,Se);case S:var $e=me._init;return me=$e(me._payload),le(ee,Z,ie,me,Se)}if(X(me)||F(me))return ee=ee.get(ie)||null,he(Z,ee,me,Se,null);if(typeof me.then=="function")return le(ee,Z,ie,Md(me),Se);if(me.$$typeof===$)return le(ee,Z,ie,Ed(Z,me),Se);Pd(Z,me)}return null}function Pe(ee,Z,ie,me){for(var Se=null,$e=null,Ce=Z,De=Z=0,hn=null;Ce!==null&&De<ie.length;De++){Ce.index>De?(hn=Ce,Ce=null):hn=Ce.sibling;var rt=ae(ee,Ce,ie[De],me);if(rt===null){Ce===null&&(Ce=hn);break}i&&Ce&&rt.alternate===null&&o(ee,Ce),Z=y(rt,Z,De),$e===null?Se=rt:$e.sibling=rt,$e=rt,Ce=hn}if(De===ie.length)return l(ee,Ce),ot&&Qo(ee,De),Se;if(Ce===null){for(;De<ie.length;De++)Ce=pe(ee,ie[De],me),Ce!==null&&(Z=y(Ce,Z,De),$e===null?Se=Ce:$e.sibling=Ce,$e=Ce);return ot&&Qo(ee,De),Se}for(Ce=h(Ce);De<ie.length;De++)hn=le(Ce,ee,De,ie[De],me),hn!==null&&(i&&hn.alternate!==null&&Ce.delete(hn.key===null?De:hn.key),Z=y(hn,Z,De),$e===null?Se=hn:$e.sibling=hn,$e=hn);return i&&Ce.forEach(function(Ks){return o(ee,Ks)}),ot&&Qo(ee,De),Se}function Ne(ee,Z,ie,me){if(ie==null)throw Error(r(151));for(var Se=null,$e=null,Ce=Z,De=Z=0,hn=null,rt=ie.next();Ce!==null&&!rt.done;De++,rt=ie.next()){Ce.index>De?(hn=Ce,Ce=null):hn=Ce.sibling;var Ks=ae(ee,Ce,rt.value,me);if(Ks===null){Ce===null&&(Ce=hn);break}i&&Ce&&Ks.alternate===null&&o(ee,Ce),Z=y(Ks,Z,De),$e===null?Se=Ks:$e.sibling=Ks,$e=Ks,Ce=hn}if(rt.done)return l(ee,Ce),ot&&Qo(ee,De),Se;if(Ce===null){for(;!rt.done;De++,rt=ie.next())rt=pe(ee,rt.value,me),rt!==null&&(Z=y(rt,Z,De),$e===null?Se=rt:$e.sibling=rt,$e=rt);return ot&&Qo(ee,De),Se}for(Ce=h(Ce);!rt.done;De++,rt=ie.next())rt=le(Ce,ee,De,rt.value,me),rt!==null&&(i&&rt.alternate!==null&&Ce.delete(rt.key===null?De:rt.key),Z=y(rt,Z,De),$e===null?Se=rt:$e.sibling=rt,$e=rt);return i&&Ce.forEach(function(kM){return o(ee,kM)}),ot&&Qo(ee,De),Se}function pt(ee,Z,ie,me){if(typeof ie=="object"&&ie!==null&&ie.type===T&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case _:e:{for(var Se=ie.key;Z!==null;){if(Z.key===Se){if(Se=ie.type,Se===T){if(Z.tag===7){l(ee,Z.sibling),me=g(Z,ie.props.children),me.return=ee,ee=me;break e}}else if(Z.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===S&&Kb(Se)===Z.type){l(ee,Z.sibling),me=g(Z,ie.props),iu(me,ie),me.return=ee,ee=me;break e}l(ee,Z);break}else o(ee,Z);Z=Z.sibling}ie.type===T?(me=Ko(ie.props.children,ee.mode,me,ie.key),me.return=ee,ee=me):(me=gd(ie.type,ie.key,ie.props,null,ee.mode,me),iu(me,ie),me.return=ee,ee=me)}return x(ee);case b:e:{for(Se=ie.key;Z!==null;){if(Z.key===Se)if(Z.tag===4&&Z.stateNode.containerInfo===ie.containerInfo&&Z.stateNode.implementation===ie.implementation){l(ee,Z.sibling),me=g(Z,ie.children||[]),me.return=ee,ee=me;break e}else{l(ee,Z);break}else o(ee,Z);Z=Z.sibling}me=Lp(ie,ee.mode,me),me.return=ee,ee=me}return x(ee);case S:return Se=ie._init,ie=Se(ie._payload),pt(ee,Z,ie,me)}if(X(ie))return Pe(ee,Z,ie,me);if(F(ie)){if(Se=F(ie),typeof Se!="function")throw Error(r(150));return ie=Se.call(ie),Ne(ee,Z,ie,me)}if(typeof ie.then=="function")return pt(ee,Z,Md(ie),me);if(ie.$$typeof===$)return pt(ee,Z,Ed(ee,ie),me);Pd(ee,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,Z!==null&&Z.tag===6?(l(ee,Z.sibling),me=g(Z,ie),me.return=ee,ee=me):(l(ee,Z),me=Vp(ie,ee.mode,me),me.return=ee,ee=me),x(ee)):l(ee,Z)}return function(ee,Z,ie,me){try{ru=0;var Se=pt(ee,Z,ie,me);return hl=null,Se}catch(Ce){if(Ce===Kc||Ce===wd)throw Ce;var $e=sr(29,Ce,null,ee.mode);return $e.lanes=me,$e.return=ee,$e}finally{}}}var dl=Xb(!0),Qb=Xb(!1),Mr=W(null),Ei=null;function Ms(i){var o=i.alternate;Q(nn,nn.current&1),Q(Mr,i),Ei===null&&(o===null||al.current!==null||o.memoizedState!==null)&&(Ei=i)}function Wb(i){if(i.tag===22){if(Q(nn,nn.current),Q(Mr,i),Ei===null){var o=i.alternate;o!==null&&o.memoizedState!==null&&(Ei=i)}}else Ps()}function Ps(){Q(nn,nn.current),Q(Mr,Mr.current)}function ts(i){ne(Mr),Ei===i&&(Ei=null),ne(nn)}var nn=W(0);function Od(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||sy(l)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function gg(i,o,l,h){o=i.memoizedState,l=l(h,o),l=l==null?o:p({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var yg={enqueueSetState:function(i,o,l){i=i._reactInternals;var h=cr(),g=Ns(h);g.payload=o,l!=null&&(g.callback=l),o=Ds(i,g,h),o!==null&&(ur(o,i,h),Qc(o,i,h))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var h=cr(),g=Ns(h);g.tag=1,g.payload=o,l!=null&&(g.callback=l),o=Ds(i,g,h),o!==null&&(ur(o,i,h),Qc(o,i,h))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=cr(),h=Ns(l);h.tag=2,o!=null&&(h.callback=o),o=Ds(i,h,l),o!==null&&(ur(o,i,l),Qc(o,i,l))}};function Zb(i,o,l,h,g,y,x){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,y,x):o.prototype&&o.prototype.isPureReactComponent?!jc(l,h)||!jc(g,y):!0}function Jb(i,o,l,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,h),o.state!==i&&yg.enqueueReplaceState(o,o.state,null)}function ra(i,o){var l=o;if("ref"in o){l={};for(var h in o)h!=="ref"&&(l[h]=o[h])}if(i=i.defaultProps){l===o&&(l=p({},l));for(var g in i)l[g]===void 0&&(l[g]=i[g])}return l}var Vd=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function ew(i){Vd(i)}function tw(i){console.error(i)}function nw(i){Vd(i)}function Ld(i,o){try{var l=i.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(h){setTimeout(function(){throw h})}}function rw(i,o,l){try{var h=i.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function vg(i,o,l){return l=Ns(l),l.tag=3,l.payload={element:null},l.callback=function(){Ld(i,o)},l}function iw(i){return i=Ns(i),i.tag=3,i}function sw(i,o,l,h){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var y=h.value;i.payload=function(){return g(y)},i.callback=function(){rw(o,l,h)}}var x=l.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(i.callback=function(){rw(o,l,h),typeof g!="function"&&(js===null?js=new Set([this]):js.add(this));var M=h.stack;this.componentDidCatch(h.value,{componentStack:M!==null?M:""})})}function kk(i,o,l,h,g){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(o=l.alternate,o!==null&&qc(o,l,g,!0),l=Mr.current,l!==null){switch(l.tag){case 13:return Ei===null?Hg():l.alternate===null&&kt===0&&(kt=3),l.flags&=-257,l.flags|=65536,l.lanes=g,h===Yp?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([h]):o.add(h),$g(i,h,g)),!1;case 22:return l.flags|=65536,h===Yp?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([h]):l.add(h)),$g(i,h,g)),!1}throw Error(r(435,l.tag))}return $g(i,h,g),Hg(),!1}if(ot)return o=Mr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,h!==jp&&(i=Error(r(422),{cause:h}),$c(Ir(i,l)))):(h!==jp&&(o=Error(r(423),{cause:h}),$c(Ir(o,l))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,h=Ir(h,l),g=vg(i.stateNode,h,g),Qp(i,g),kt!==4&&(kt=2)),!1;var y=Error(r(520),{cause:h});if(y=Ir(y,l),hu===null?hu=[y]:hu.push(y),kt!==4&&(kt=2),o===null)return!0;h=Ir(h,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,i=g&-g,l.lanes|=i,i=vg(l.stateNode,h,i),Qp(l,i),!1;case 1:if(o=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(js===null||!js.has(y))))return l.flags|=65536,g&=-g,l.lanes|=g,g=iw(g),sw(g,i,l,h),Qp(l,g),!1}l=l.return}while(l!==null);return!1}var ow=Error(r(461)),cn=!1;function yn(i,o,l,h){o.child=i===null?Qb(o,null,l,h):dl(o,i.child,l,h)}function aw(i,o,l,h,g){l=l.render;var y=o.ref;if("ref"in h){var x={};for(var M in h)M!=="ref"&&(x[M]=h[M])}else x=h;return ea(o),h=tg(i,o,l,x,y,g),M=ng(),i!==null&&!cn?(rg(i,o,g),ns(i,o,g)):(ot&&M&&Up(o),o.flags|=1,yn(i,o,h,g),o.child)}function lw(i,o,l,h,g){if(i===null){var y=l.type;return typeof y=="function"&&!Op(y)&&y.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=y,cw(i,o,y,h,g)):(i=gd(l.type,null,h,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,!Ag(i,g)){var x=y.memoizedProps;if(l=l.compare,l=l!==null?l:jc,l(x,h)&&i.ref===o.ref)return ns(i,o,g)}return o.flags|=1,i=Xi(y,h),i.ref=o.ref,i.return=o,o.child=i}function cw(i,o,l,h,g){if(i!==null){var y=i.memoizedProps;if(jc(y,h)&&i.ref===o.ref)if(cn=!1,o.pendingProps=h=y,Ag(i,g))(i.flags&131072)!==0&&(cn=!0);else return o.lanes=i.lanes,ns(i,o,g)}return _g(i,o,l,h,g)}function uw(i,o,l){var h=o.pendingProps,g=h.children,y=i!==null?i.memoizedState:null;if(h.mode==="hidden"){if((o.flags&128)!==0){if(h=y!==null?y.baseLanes|l:l,i!==null){for(g=o.child=i.child,y=0;g!==null;)y=y|g.lanes|g.childLanes,g=g.sibling;o.childLanes=y&~h}else o.childLanes=0,o.child=null;return hw(i,o,h,l)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&bd(o,y!==null?y.cachePool:null),y!==null?cb(o,y):Zp(),Wb(o);else return o.lanes=o.childLanes=536870912,hw(i,o,y!==null?y.baseLanes|l:l,l)}else y!==null?(bd(o,y.cachePool),cb(o,y),Ps(),o.memoizedState=null):(i!==null&&bd(o,null),Zp(),Ps());return yn(i,o,g,l),o.child}function hw(i,o,l,h){var g=Gp();return g=g===null?null:{parent:tn._currentValue,pool:g},o.memoizedState={baseLanes:l,cachePool:g},i!==null&&bd(o,null),Zp(),Wb(o),i!==null&&qc(i,o,h,!0),null}function Ud(i,o){var l=o.ref;if(l===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(i===null||i.ref!==l)&&(o.flags|=4194816)}}function _g(i,o,l,h,g){return ea(o),l=tg(i,o,l,h,void 0,g),h=ng(),i!==null&&!cn?(rg(i,o,g),ns(i,o,g)):(ot&&h&&Up(o),o.flags|=1,yn(i,o,l,g),o.child)}function dw(i,o,l,h,g,y){return ea(o),o.updateQueue=null,l=hb(o,h,l,g),ub(i),h=ng(),i!==null&&!cn?(rg(i,o,y),ns(i,o,y)):(ot&&h&&Up(o),o.flags|=1,yn(i,o,l,y),o.child)}function fw(i,o,l,h,g){if(ea(o),o.stateNode===null){var y=nl,x=l.contextType;typeof x=="object"&&x!==null&&(y=Sn(x)),y=new l(h,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=yg,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=h,y.state=o.memoizedState,y.refs={},Kp(o),x=l.contextType,y.context=typeof x=="object"&&x!==null?Sn(x):nl,y.state=o.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(gg(o,l,x,h),y.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(x=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),x!==y.state&&yg.enqueueReplaceState(y,y.state,null),Zc(o,h,y,g),Wc(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),h=!0}else if(i===null){y=o.stateNode;var M=o.memoizedProps,q=ra(l,M);y.props=q;var oe=y.context,he=l.contextType;x=nl,typeof he=="object"&&he!==null&&(x=Sn(he));var pe=l.getDerivedStateFromProps;he=typeof pe=="function"||typeof y.getSnapshotBeforeUpdate=="function",M=o.pendingProps!==M,he||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(M||oe!==x)&&Jb(o,y,h,x),Is=!1;var ae=o.memoizedState;y.state=ae,Zc(o,h,y,g),Wc(),oe=o.memoizedState,M||ae!==oe||Is?(typeof pe=="function"&&(gg(o,l,pe,h),oe=o.memoizedState),(q=Is||Zb(o,l,q,h,ae,oe,x))?(he||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=oe),y.props=h,y.state=oe,y.context=x,h=q):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{y=o.stateNode,Xp(i,o),x=o.memoizedProps,he=ra(l,x),y.props=he,pe=o.pendingProps,ae=y.context,oe=l.contextType,q=nl,typeof oe=="object"&&oe!==null&&(q=Sn(oe)),M=l.getDerivedStateFromProps,(oe=typeof M=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x!==pe||ae!==q)&&Jb(o,y,h,q),Is=!1,ae=o.memoizedState,y.state=ae,Zc(o,h,y,g),Wc();var le=o.memoizedState;x!==pe||ae!==le||Is||i!==null&&i.dependencies!==null&&_d(i.dependencies)?(typeof M=="function"&&(gg(o,l,M,h),le=o.memoizedState),(he=Is||Zb(o,l,he,h,ae,le,q)||i!==null&&i.dependencies!==null&&_d(i.dependencies))?(oe||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(h,le,q),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(h,le,q)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||x===i.memoizedProps&&ae===i.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&ae===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=le),y.props=h,y.state=le,y.context=q,h=he):(typeof y.componentDidUpdate!="function"||x===i.memoizedProps&&ae===i.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&ae===i.memoizedState||(o.flags|=1024),h=!1)}return y=h,Ud(i,o),h=(o.flags&128)!==0,y||h?(y=o.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,i!==null&&h?(o.child=dl(o,i.child,null,g),o.child=dl(o,null,l,g)):yn(i,o,l,g),o.memoizedState=y.state,i=o.child):i=ns(i,o,g),i}function mw(i,o,l,h){return Fc(),o.flags|=256,yn(i,o,l,h),o.child}var Eg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bg(i){return{baseLanes:i,cachePool:tb()}}function wg(i,o,l){return i=i!==null?i.childLanes&~l:0,o&&(i|=Pr),i}function pw(i,o,l){var h=o.pendingProps,g=!1,y=(o.flags&128)!==0,x;if((x=y)||(x=i!==null&&i.memoizedState===null?!1:(nn.current&2)!==0),x&&(g=!0,o.flags&=-129),x=(o.flags&32)!==0,o.flags&=-33,i===null){if(ot){if(g?Ms(o):Ps(),ot){var M=Dt,q;if(q=M){e:{for(q=M,M=_i;q.nodeType!==8;){if(!M){M=null;break e}if(q=Kr(q.nextSibling),q===null){M=null;break e}}M=q}M!==null?(o.memoizedState={dehydrated:M,treeContext:Xo!==null?{id:Qi,overflow:Wi}:null,retryLane:536870912,hydrationErrors:null},q=sr(18,null,null,0),q.stateNode=M,q.return=o,o.child=q,jn=o,Dt=null,q=!0):q=!1}q||Zo(o)}if(M=o.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return sy(M)?o.lanes=32:o.lanes=536870912,null;ts(o)}return M=h.children,h=h.fallback,g?(Ps(),g=o.mode,M=zd({mode:"hidden",children:M},g),h=Ko(h,g,l,null),M.return=o,h.return=o,M.sibling=h,o.child=M,g=o.child,g.memoizedState=bg(l),g.childLanes=wg(i,x,l),o.memoizedState=Eg,h):(Ms(o),xg(o,M))}if(q=i.memoizedState,q!==null&&(M=q.dehydrated,M!==null)){if(y)o.flags&256?(Ms(o),o.flags&=-257,o=Tg(i,o,l)):o.memoizedState!==null?(Ps(),o.child=i.child,o.flags|=128,o=null):(Ps(),g=h.fallback,M=o.mode,h=zd({mode:"visible",children:h.children},M),g=Ko(g,M,l,null),g.flags|=2,h.return=o,g.return=o,h.sibling=g,o.child=h,dl(o,i.child,null,l),h=o.child,h.memoizedState=bg(l),h.childLanes=wg(i,x,l),o.memoizedState=Eg,o=g);else if(Ms(o),sy(M)){if(x=M.nextSibling&&M.nextSibling.dataset,x)var oe=x.dgst;x=oe,h=Error(r(419)),h.stack="",h.digest=x,$c({value:h,source:null,stack:null}),o=Tg(i,o,l)}else if(cn||qc(i,o,l,!1),x=(l&i.childLanes)!==0,cn||x){if(x=vt,x!==null&&(h=l&-l,h=(h&42)!==0?1:si(h),h=(h&(x.suspendedLanes|l))!==0?0:h,h!==0&&h!==q.retryLane))throw q.retryLane=h,tl(i,h),ur(x,i,h),ow;M.data==="$?"||Hg(),o=Tg(i,o,l)}else M.data==="$?"?(o.flags|=192,o.child=i.child,o=null):(i=q.treeContext,Dt=Kr(M.nextSibling),jn=o,ot=!0,Wo=null,_i=!1,i!==null&&(Dr[kr++]=Qi,Dr[kr++]=Wi,Dr[kr++]=Xo,Qi=i.id,Wi=i.overflow,Xo=o),o=xg(o,h.children),o.flags|=4096);return o}return g?(Ps(),g=h.fallback,M=o.mode,q=i.child,oe=q.sibling,h=Xi(q,{mode:"hidden",children:h.children}),h.subtreeFlags=q.subtreeFlags&65011712,oe!==null?g=Xi(oe,g):(g=Ko(g,M,l,null),g.flags|=2),g.return=o,h.return=o,h.sibling=g,o.child=h,h=g,g=o.child,M=i.child.memoizedState,M===null?M=bg(l):(q=M.cachePool,q!==null?(oe=tn._currentValue,q=q.parent!==oe?{parent:oe,pool:oe}:q):q=tb(),M={baseLanes:M.baseLanes|l,cachePool:q}),g.memoizedState=M,g.childLanes=wg(i,x,l),o.memoizedState=Eg,h):(Ms(o),l=i.child,i=l.sibling,l=Xi(l,{mode:"visible",children:h.children}),l.return=o,l.sibling=null,i!==null&&(x=o.deletions,x===null?(o.deletions=[i],o.flags|=16):x.push(i)),o.child=l,o.memoizedState=null,l)}function xg(i,o){return o=zd({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function zd(i,o){return i=sr(22,i,null,o),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Tg(i,o,l){return dl(o,i.child,null,l),i=xg(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function gw(i,o,l){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),Hp(i.return,o,l)}function Sg(i,o,l,h,g){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:g}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=l,y.tailMode=g)}function yw(i,o,l){var h=o.pendingProps,g=h.revealOrder,y=h.tail;if(yn(i,o,h.children,l),h=nn.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&gw(i,l,o);else if(i.tag===19)gw(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}switch(Q(nn,h),g){case"forwards":for(l=o.child,g=null;l!==null;)i=l.alternate,i!==null&&Od(i)===null&&(g=l),l=l.sibling;l=g,l===null?(g=o.child,o.child=null):(g=l.sibling,l.sibling=null),Sg(o,!1,g,l,y);break;case"backwards":for(l=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&Od(i)===null){o.child=g;break}i=g.sibling,g.sibling=l,l=g,g=i}Sg(o,!0,l,null,y);break;case"together":Sg(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ns(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),zs|=o.lanes,(l&o.childLanes)===0)if(i!==null){if(qc(i,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(r(153));if(o.child!==null){for(i=o.child,l=Xi(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=Xi(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function Ag(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&_d(i)))}function Mk(i,o,l){switch(o.tag){case 3:_e(o,o.stateNode.containerInfo),Rs(o,tn,i.memoizedState.cache),Fc();break;case 27:case 5:Re(o);break;case 4:_e(o,o.stateNode.containerInfo);break;case 10:Rs(o,o.type,o.memoizedProps.value);break;case 13:var h=o.memoizedState;if(h!==null)return h.dehydrated!==null?(Ms(o),o.flags|=128,null):(l&o.child.childLanes)!==0?pw(i,o,l):(Ms(o),i=ns(i,o,l),i!==null?i.sibling:null);Ms(o);break;case 19:var g=(i.flags&128)!==0;if(h=(l&o.childLanes)!==0,h||(qc(i,o,l,!1),h=(l&o.childLanes)!==0),g){if(h)return yw(i,o,l);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Q(nn,nn.current),h)break;return null;case 22:case 23:return o.lanes=0,uw(i,o,l);case 24:Rs(o,tn,i.memoizedState.cache)}return ns(i,o,l)}function vw(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps)cn=!0;else{if(!Ag(i,l)&&(o.flags&128)===0)return cn=!1,Mk(i,o,l);cn=(i.flags&131072)!==0}else cn=!1,ot&&(o.flags&1048576)!==0&&KE(o,vd,o.index);switch(o.lanes=0,o.tag){case 16:e:{i=o.pendingProps;var h=o.elementType,g=h._init;if(h=g(h._payload),o.type=h,typeof h=="function")Op(h)?(i=ra(h,i),o.tag=1,o=fw(null,o,h,i,l)):(o.tag=0,o=_g(null,o,h,i,l));else{if(h!=null){if(g=h.$$typeof,g===H){o.tag=11,o=aw(null,o,h,i,l);break e}else if(g===k){o.tag=14,o=lw(null,o,h,i,l);break e}}throw o=P(h)||h,Error(r(306,o,""))}}return o;case 0:return _g(i,o,o.type,o.pendingProps,l);case 1:return h=o.type,g=ra(h,o.pendingProps),fw(i,o,h,g,l);case 3:e:{if(_e(o,o.stateNode.containerInfo),i===null)throw Error(r(387));h=o.pendingProps;var y=o.memoizedState;g=y.element,Xp(i,o),Zc(o,h,null,l);var x=o.memoizedState;if(h=x.cache,Rs(o,tn,h),h!==y.cache&&Fp(o,[tn],l,!0),Wc(),h=x.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:x.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=mw(i,o,h,l);break e}else if(h!==g){g=Ir(Error(r(424)),o),$c(g),o=mw(i,o,h,l);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Dt=Kr(i.firstChild),jn=o,ot=!0,Wo=null,_i=!0,l=Qb(o,null,h,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Fc(),h===g){o=ns(i,o,l);break e}yn(i,o,h,l)}o=o.child}return o;case 26:return Ud(i,o),i===null?(l=w1(o.type,null,o.pendingProps,null))?o.memoizedState=l:ot||(l=o.type,i=o.pendingProps,h=Jd(ue.current).createElement(l),h[Lt]=o,h[Nt]=i,_n(h,l,i),Tt(h),o.stateNode=h):o.memoizedState=w1(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return Re(o),i===null&&ot&&(h=o.stateNode=_1(o.type,o.pendingProps,ue.current),jn=o,_i=!0,g=Dt,Fs(o.type)?(oy=g,Dt=Kr(h.firstChild)):Dt=g),yn(i,o,o.pendingProps.children,l),Ud(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&ot&&((g=h=Dt)&&(h=aM(h,o.type,o.pendingProps,_i),h!==null?(o.stateNode=h,jn=o,Dt=Kr(h.firstChild),_i=!1,g=!0):g=!1),g||Zo(o)),Re(o),g=o.type,y=o.pendingProps,x=i!==null?i.memoizedProps:null,h=y.children,ny(g,y)?h=null:x!==null&&ny(g,x)&&(o.flags|=32),o.memoizedState!==null&&(g=tg(i,o,Sk,null,null,l),Eu._currentValue=g),Ud(i,o),yn(i,o,h,l),o.child;case 6:return i===null&&ot&&((i=l=Dt)&&(l=lM(l,o.pendingProps,_i),l!==null?(o.stateNode=l,jn=o,Dt=null,i=!0):i=!1),i||Zo(o)),null;case 13:return pw(i,o,l);case 4:return _e(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=dl(o,null,h,l):yn(i,o,h,l),o.child;case 11:return aw(i,o,o.type,o.pendingProps,l);case 7:return yn(i,o,o.pendingProps,l),o.child;case 8:return yn(i,o,o.pendingProps.children,l),o.child;case 12:return yn(i,o,o.pendingProps.children,l),o.child;case 10:return h=o.pendingProps,Rs(o,o.type,h.value),yn(i,o,h.children,l),o.child;case 9:return g=o.type._context,h=o.pendingProps.children,ea(o),g=Sn(g),h=h(g),o.flags|=1,yn(i,o,h,l),o.child;case 14:return lw(i,o,o.type,o.pendingProps,l);case 15:return cw(i,o,o.type,o.pendingProps,l);case 19:return yw(i,o,l);case 31:return h=o.pendingProps,l=o.mode,h={mode:h.mode,children:h.children},i===null?(l=zd(h,l),l.ref=o.ref,o.child=l,l.return=o,o=l):(l=Xi(i.child,h),l.ref=o.ref,o.child=l,l.return=o,o=l),o;case 22:return uw(i,o,l);case 24:return ea(o),h=Sn(tn),i===null?(g=Gp(),g===null&&(g=vt,y=$p(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=l),g=y),o.memoizedState={parent:h,cache:g},Kp(o),Rs(o,tn,g)):((i.lanes&l)!==0&&(Xp(i,o),Zc(o,null,null,l),Wc()),g=i.memoizedState,y=o.memoizedState,g.parent!==h?(g={parent:h,cache:h},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),Rs(o,tn,h)):(h=y.cache,Rs(o,tn,h),h!==g.cache&&Fp(o,[tn],l,!0))),yn(i,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function rs(i){i.flags|=4}function _w(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!C1(o)){if(o=Mr.current,o!==null&&((Je&4194048)===Je?Ei!==null:(Je&62914560)!==Je&&(Je&536870912)===0||o!==Ei))throw Xc=Yp,nb;i.flags|=8192}}function jd(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?Hr():536870912,i.lanes|=o,gl|=o)}function su(i,o){if(!ot)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function St(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(o)for(var g=i.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=h,i.childLanes=l,o}function Pk(i,o,l){var h=o.pendingProps;switch(zp(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(o),null;case 1:return St(o),null;case 3:return l=o.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),Ji(tn),Ae(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Hc(o)?rs(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,WE())),St(o),null;case 26:return l=o.memoizedState,i===null?(rs(o),l!==null?(St(o),_w(o,l)):(St(o),o.flags&=-16777217)):l?l!==i.memoizedState?(rs(o),St(o),_w(o,l)):(St(o),o.flags&=-16777217):(i.memoizedProps!==h&&rs(o),St(o),o.flags&=-16777217),null;case 27:tt(o),l=ue.current;var g=o.type;if(i!==null&&o.stateNode!=null)i.memoizedProps!==h&&rs(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return St(o),null}i=se.current,Hc(o)?XE(o):(i=_1(g,h,l),o.stateNode=i,rs(o))}return St(o),null;case 5:if(tt(o),l=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==h&&rs(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return St(o),null}if(i=se.current,Hc(o))XE(o);else{switch(g=Jd(ue.current),i){case 1:i=g.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=g.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=g.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof h.is=="string"?g.createElement("select",{is:h.is}):g.createElement("select"),h.multiple?i.multiple=!0:h.size&&(i.size=h.size);break;default:i=typeof h.is=="string"?g.createElement(l,{is:h.is}):g.createElement(l)}}i[Lt]=o,i[Nt]=h;e:for(g=o.child;g!==null;){if(g.tag===5||g.tag===6)i.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===o)break e;for(;g.sibling===null;){if(g.return===null||g.return===o)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}o.stateNode=i;e:switch(_n(i,l,h),l){case"button":case"input":case"select":case"textarea":i=!!h.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&rs(o)}}return St(o),o.flags&=-16777217,null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==h&&rs(o);else{if(typeof h!="string"&&o.stateNode===null)throw Error(r(166));if(i=ue.current,Hc(o)){if(i=o.stateNode,l=o.memoizedProps,h=null,g=jn,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}i[Lt]=o,i=!!(i.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||d1(i.nodeValue,l)),i||Zo(o)}else i=Jd(i).createTextNode(h),i[Lt]=o,o.stateNode=i}return St(o),null;case 13:if(h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=Hc(o),h!==null&&h.dehydrated!==null){if(i===null){if(!g)throw Error(r(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Lt]=o}else Fc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;St(o),g=!1}else g=WE(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(ts(o),o):(ts(o),null)}if(ts(o),(o.flags&128)!==0)return o.lanes=l,o;if(l=h!==null,i=i!==null&&i.memoizedState!==null,l){h=o.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool);var y=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),y!==g&&(h.flags|=2048)}return l!==i&&l&&(o.child.flags|=8192),jd(o,o.updateQueue),St(o),null;case 4:return Ae(),i===null&&Wg(o.stateNode.containerInfo),St(o),null;case 10:return Ji(o.type),St(o),null;case 19:if(ne(nn),g=o.memoizedState,g===null)return St(o),null;if(h=(o.flags&128)!==0,y=g.rendering,y===null)if(h)su(g,!1);else{if(kt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(y=Od(i),y!==null){for(o.flags|=128,su(g,!1),i=y.updateQueue,o.updateQueue=i,jd(o,i),o.subtreeFlags=0,i=l,l=o.child;l!==null;)YE(l,i),l=l.sibling;return Q(nn,nn.current&1|2),o.child}i=i.sibling}g.tail!==null&&ze()>Fd&&(o.flags|=128,h=!0,su(g,!1),o.lanes=4194304)}else{if(!h)if(i=Od(y),i!==null){if(o.flags|=128,h=!0,i=i.updateQueue,o.updateQueue=i,jd(o,i),su(g,!0),g.tail===null&&g.tailMode==="hidden"&&!y.alternate&&!ot)return St(o),null}else 2*ze()-g.renderingStartTime>Fd&&l!==536870912&&(o.flags|=128,h=!0,su(g,!1),o.lanes=4194304);g.isBackwards?(y.sibling=o.child,o.child=y):(i=g.last,i!==null?i.sibling=y:o.child=y,g.last=y)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=ze(),o.sibling=null,i=nn.current,Q(nn,h?i&1|2:i&1),o):(St(o),null);case 22:case 23:return ts(o),Jp(),h=o.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(o.flags|=8192):h&&(o.flags|=8192),h?(l&536870912)!==0&&(o.flags&128)===0&&(St(o),o.subtreeFlags&6&&(o.flags|=8192)):St(o),l=o.updateQueue,l!==null&&jd(o,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==l&&(o.flags|=2048),i!==null&&ne(ta),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),Ji(tn),St(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function Ok(i,o){switch(zp(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Ji(tn),Ae(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return tt(o),null;case 13:if(ts(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(r(340));Fc()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return ne(nn),null;case 4:return Ae(),null;case 10:return Ji(o.type),null;case 22:case 23:return ts(o),Jp(),i!==null&&ne(ta),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Ji(tn),null;case 25:return null;default:return null}}function Ew(i,o){switch(zp(o),o.tag){case 3:Ji(tn),Ae();break;case 26:case 27:case 5:tt(o);break;case 4:Ae();break;case 13:ts(o);break;case 19:ne(nn);break;case 10:Ji(o.type);break;case 22:case 23:ts(o),Jp(),i!==null&&ne(ta);break;case 24:Ji(tn)}}function ou(i,o){try{var l=o.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var g=h.next;l=g;do{if((l.tag&i)===i){h=void 0;var y=l.create,x=l.inst;h=y(),x.destroy=h}l=l.next}while(l!==g)}}catch(M){gt(o,o.return,M)}}function Os(i,o,l){try{var h=o.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var y=g.next;h=y;do{if((h.tag&i)===i){var x=h.inst,M=x.destroy;if(M!==void 0){x.destroy=void 0,g=o;var q=l,oe=M;try{oe()}catch(he){gt(g,q,he)}}}h=h.next}while(h!==y)}}catch(he){gt(o,o.return,he)}}function bw(i){var o=i.updateQueue;if(o!==null){var l=i.stateNode;try{lb(o,l)}catch(h){gt(i,i.return,h)}}}function ww(i,o,l){l.props=ra(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(h){gt(i,o,h)}}function au(i,o){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof l=="function"?i.refCleanup=l(h):l.current=h}}catch(g){gt(i,o,g)}}function bi(i,o){var l=i.ref,h=i.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(g){gt(i,o,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){gt(i,o,g)}else l.current=null}function xw(i){var o=i.type,l=i.memoizedProps,h=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(g){gt(i,i.return,g)}}function Cg(i,o,l){try{var h=i.stateNode;nM(h,i.type,l,o),h[Nt]=o}catch(g){gt(i,i.return,g)}}function Tw(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Fs(i.type)||i.tag===4}function Rg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Tw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Fs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Ig(i,o,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(i),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Zd));else if(h!==4&&(h===27&&Fs(i.type)&&(l=i.stateNode,o=null),i=i.child,i!==null))for(Ig(i,o,l),i=i.sibling;i!==null;)Ig(i,o,l),i=i.sibling}function Bd(i,o,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(h!==4&&(h===27&&Fs(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(Bd(i,o,l),i=i.sibling;i!==null;)Bd(i,o,l),i=i.sibling}function Sw(i){var o=i.stateNode,l=i.memoizedProps;try{for(var h=i.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);_n(o,h,l),o[Lt]=i,o[Nt]=l}catch(y){gt(i,i.return,y)}}var is=!1,zt=!1,Ng=!1,Aw=typeof WeakSet=="function"?WeakSet:Set,un=null;function Vk(i,o){if(i=i.containerInfo,ey=of,i=LE(i),Rp(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var g=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var x=0,M=-1,q=-1,oe=0,he=0,pe=i,ae=null;t:for(;;){for(var le;pe!==l||g!==0&&pe.nodeType!==3||(M=x+g),pe!==y||h!==0&&pe.nodeType!==3||(q=x+h),pe.nodeType===3&&(x+=pe.nodeValue.length),(le=pe.firstChild)!==null;)ae=pe,pe=le;for(;;){if(pe===i)break t;if(ae===l&&++oe===g&&(M=x),ae===y&&++he===h&&(q=x),(le=pe.nextSibling)!==null)break;pe=ae,ae=pe.parentNode}pe=le}l=M===-1||q===-1?null:{start:M,end:q}}else l=null}l=l||{start:0,end:0}}else l=null;for(ty={focusedElem:i,selectionRange:l},of=!1,un=o;un!==null;)if(o=un,i=o.child,(o.subtreeFlags&1024)!==0&&i!==null)i.return=o,un=i;else for(;un!==null;){switch(o=un,y=o.alternate,i=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,l=o,g=y.memoizedProps,y=y.memoizedState,h=l.stateNode;try{var Pe=ra(l.type,g,l.elementType===l.type);i=h.getSnapshotBeforeUpdate(Pe,y),h.__reactInternalSnapshotBeforeUpdate=i}catch(Ne){gt(l,l.return,Ne)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,l=i.nodeType,l===9)iy(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":iy(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=o.sibling,i!==null){i.return=o.return,un=i;break}un=o.return}}function Cw(i,o,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:Vs(i,l),h&4&&ou(5,l);break;case 1:if(Vs(i,l),h&4)if(i=l.stateNode,o===null)try{i.componentDidMount()}catch(x){gt(l,l.return,x)}else{var g=ra(l.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(g,o,i.__reactInternalSnapshotBeforeUpdate)}catch(x){gt(l,l.return,x)}}h&64&&bw(l),h&512&&au(l,l.return);break;case 3:if(Vs(i,l),h&64&&(i=l.updateQueue,i!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{lb(i,o)}catch(x){gt(l,l.return,x)}}break;case 27:o===null&&h&4&&Sw(l);case 26:case 5:Vs(i,l),o===null&&h&4&&xw(l),h&512&&au(l,l.return);break;case 12:Vs(i,l);break;case 13:Vs(i,l),h&4&&Nw(i,l),h&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=qk.bind(null,l),cM(i,l))));break;case 22:if(h=l.memoizedState!==null||is,!h){o=o!==null&&o.memoizedState!==null||zt,g=is;var y=zt;is=h,(zt=o)&&!y?Ls(i,l,(l.subtreeFlags&8772)!==0):Vs(i,l),is=g,zt=y}break;case 30:break;default:Vs(i,l)}}function Rw(i){var o=i.alternate;o!==null&&(i.alternate=null,Rw(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&li(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var bt=null,Gn=!1;function ss(i,o,l){for(l=l.child;l!==null;)Iw(i,o,l),l=l.sibling}function Iw(i,o,l){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(at,l)}catch{}switch(l.tag){case 26:zt||bi(l,o),ss(i,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:zt||bi(l,o);var h=bt,g=Gn;Fs(l.type)&&(bt=l.stateNode,Gn=!1),ss(i,o,l),gu(l.stateNode),bt=h,Gn=g;break;case 5:zt||bi(l,o);case 6:if(h=bt,g=Gn,bt=null,ss(i,o,l),bt=h,Gn=g,bt!==null)if(Gn)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(l.stateNode)}catch(y){gt(l,o,y)}else try{bt.removeChild(l.stateNode)}catch(y){gt(l,o,y)}break;case 18:bt!==null&&(Gn?(i=bt,y1(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Tu(i)):y1(bt,l.stateNode));break;case 4:h=bt,g=Gn,bt=l.stateNode.containerInfo,Gn=!0,ss(i,o,l),bt=h,Gn=g;break;case 0:case 11:case 14:case 15:zt||Os(2,l,o),zt||Os(4,l,o),ss(i,o,l);break;case 1:zt||(bi(l,o),h=l.stateNode,typeof h.componentWillUnmount=="function"&&ww(l,o,h)),ss(i,o,l);break;case 21:ss(i,o,l);break;case 22:zt=(h=zt)||l.memoizedState!==null,ss(i,o,l),zt=h;break;default:ss(i,o,l)}}function Nw(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Tu(i)}catch(l){gt(o,o.return,l)}}function Lk(i){switch(i.tag){case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new Aw),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new Aw),o;default:throw Error(r(435,i.tag))}}function Dg(i,o){var l=Lk(i);o.forEach(function(h){var g=Gk.bind(null,i,h);l.has(h)||(l.add(h),h.then(g,g))})}function or(i,o){var l=o.deletions;if(l!==null)for(var h=0;h<l.length;h++){var g=l[h],y=i,x=o,M=x;e:for(;M!==null;){switch(M.tag){case 27:if(Fs(M.type)){bt=M.stateNode,Gn=!1;break e}break;case 5:bt=M.stateNode,Gn=!1;break e;case 3:case 4:bt=M.stateNode.containerInfo,Gn=!0;break e}M=M.return}if(bt===null)throw Error(r(160));Iw(y,x,g),bt=null,Gn=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)Dw(o,i),o=o.sibling}var Yr=null;function Dw(i,o){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:or(o,i),ar(i),h&4&&(Os(3,i,i.return),ou(3,i),Os(5,i,i.return));break;case 1:or(o,i),ar(i),h&512&&(zt||l===null||bi(l,l.return)),h&64&&is&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var g=Yr;if(or(o,i),ar(i),h&512&&(zt||l===null||bi(l,l.return)),h&4){var y=l!==null?l.memoizedState:null;if(h=i.memoizedState,l===null)if(h===null)if(i.stateNode===null){e:{h=i.type,l=i.memoizedProps,g=g.ownerDocument||g;t:switch(h){case"title":y=g.getElementsByTagName("title")[0],(!y||y[ji]||y[Lt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(h),g.head.insertBefore(y,g.querySelector("head > title"))),_n(y,h,l),y[Lt]=i,Tt(y),h=y;break e;case"link":var x=S1("link","href",g).get(h+(l.href||""));if(x){for(var M=0;M<x.length;M++)if(y=x[M],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){x.splice(M,1);break t}}y=g.createElement(h),_n(y,h,l),g.head.appendChild(y);break;case"meta":if(x=S1("meta","content",g).get(h+(l.content||""))){for(M=0;M<x.length;M++)if(y=x[M],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){x.splice(M,1);break t}}y=g.createElement(h),_n(y,h,l),g.head.appendChild(y);break;default:throw Error(r(468,h))}y[Lt]=i,Tt(y),h=y}i.stateNode=h}else A1(g,i.type,i.stateNode);else i.stateNode=T1(g,h,i.memoizedProps);else y!==h?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,h===null?A1(g,i.type,i.stateNode):T1(g,h,i.memoizedProps)):h===null&&i.stateNode!==null&&Cg(i,i.memoizedProps,l.memoizedProps)}break;case 27:or(o,i),ar(i),h&512&&(zt||l===null||bi(l,l.return)),l!==null&&h&4&&Cg(i,i.memoizedProps,l.memoizedProps);break;case 5:if(or(o,i),ar(i),h&512&&(zt||l===null||bi(l,l.return)),i.flags&32){g=i.stateNode;try{Sr(g,"")}catch(le){gt(i,i.return,le)}}h&4&&i.stateNode!=null&&(g=i.memoizedProps,Cg(i,g,l!==null?l.memoizedProps:g)),h&1024&&(Ng=!0);break;case 6:if(or(o,i),ar(i),h&4){if(i.stateNode===null)throw Error(r(162));h=i.memoizedProps,l=i.stateNode;try{l.nodeValue=h}catch(le){gt(i,i.return,le)}}break;case 3:if(nf=null,g=Yr,Yr=ef(o.containerInfo),or(o,i),Yr=g,ar(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Tu(o.containerInfo)}catch(le){gt(i,i.return,le)}Ng&&(Ng=!1,kw(i));break;case 4:h=Yr,Yr=ef(i.stateNode.containerInfo),or(o,i),ar(i),Yr=h;break;case 12:or(o,i),ar(i);break;case 13:or(o,i),ar(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Lg=ze()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Dg(i,h)));break;case 22:g=i.memoizedState!==null;var q=l!==null&&l.memoizedState!==null,oe=is,he=zt;if(is=oe||g,zt=he||q,or(o,i),zt=he,is=oe,ar(i),h&8192)e:for(o=i.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(l===null||q||is||zt||ia(i)),l=null,o=i;;){if(o.tag===5||o.tag===26){if(l===null){q=l=o;try{if(y=q.stateNode,g)x=y.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{M=q.stateNode;var pe=q.memoizedProps.style,ae=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;M.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(le){gt(q,q.return,le)}}}else if(o.tag===6){if(l===null){q=o;try{q.stateNode.nodeValue=g?"":q.memoizedProps}catch(le){gt(q,q.return,le)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}h&4&&(h=i.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,Dg(i,l))));break;case 19:or(o,i),ar(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Dg(i,h)));break;case 30:break;case 21:break;default:or(o,i),ar(i)}}function ar(i){var o=i.flags;if(o&2){try{for(var l,h=i.return;h!==null;){if(Tw(h)){l=h;break}h=h.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var g=l.stateNode,y=Rg(i);Bd(i,y,g);break;case 5:var x=l.stateNode;l.flags&32&&(Sr(x,""),l.flags&=-33);var M=Rg(i);Bd(i,M,x);break;case 3:case 4:var q=l.stateNode.containerInfo,oe=Rg(i);Ig(i,oe,q);break;default:throw Error(r(161))}}catch(he){gt(i,i.return,he)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function kw(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;kw(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function Vs(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Cw(i,o.alternate,o),o=o.sibling}function ia(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Os(4,o,o.return),ia(o);break;case 1:bi(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&ww(o,o.return,l),ia(o);break;case 27:gu(o.stateNode);case 26:case 5:bi(o,o.return),ia(o);break;case 22:o.memoizedState===null&&ia(o);break;case 30:ia(o);break;default:ia(o)}i=i.sibling}}function Ls(i,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var h=o.alternate,g=i,y=o,x=y.flags;switch(y.tag){case 0:case 11:case 15:Ls(g,y,l),ou(4,y);break;case 1:if(Ls(g,y,l),h=y,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(oe){gt(h,h.return,oe)}if(h=y,g=h.updateQueue,g!==null){var M=h.stateNode;try{var q=g.shared.hiddenCallbacks;if(q!==null)for(g.shared.hiddenCallbacks=null,g=0;g<q.length;g++)ab(q[g],M)}catch(oe){gt(h,h.return,oe)}}l&&x&64&&bw(y),au(y,y.return);break;case 27:Sw(y);case 26:case 5:Ls(g,y,l),l&&h===null&&x&4&&xw(y),au(y,y.return);break;case 12:Ls(g,y,l);break;case 13:Ls(g,y,l),l&&x&4&&Nw(g,y);break;case 22:y.memoizedState===null&&Ls(g,y,l),au(y,y.return);break;case 30:break;default:Ls(g,y,l)}o=o.sibling}}function kg(i,o){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Gc(l))}function Mg(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Gc(i))}function wi(i,o,l,h){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Mw(i,o,l,h),o=o.sibling}function Mw(i,o,l,h){var g=o.flags;switch(o.tag){case 0:case 11:case 15:wi(i,o,l,h),g&2048&&ou(9,o);break;case 1:wi(i,o,l,h);break;case 3:wi(i,o,l,h),g&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Gc(i)));break;case 12:if(g&2048){wi(i,o,l,h),i=o.stateNode;try{var y=o.memoizedProps,x=y.id,M=y.onPostCommit;typeof M=="function"&&M(x,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(q){gt(o,o.return,q)}}else wi(i,o,l,h);break;case 13:wi(i,o,l,h);break;case 23:break;case 22:y=o.stateNode,x=o.alternate,o.memoizedState!==null?y._visibility&2?wi(i,o,l,h):lu(i,o):y._visibility&2?wi(i,o,l,h):(y._visibility|=2,fl(i,o,l,h,(o.subtreeFlags&10256)!==0)),g&2048&&kg(x,o);break;case 24:wi(i,o,l,h),g&2048&&Mg(o.alternate,o);break;default:wi(i,o,l,h)}}function fl(i,o,l,h,g){for(g=g&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var y=i,x=o,M=l,q=h,oe=x.flags;switch(x.tag){case 0:case 11:case 15:fl(y,x,M,q,g),ou(8,x);break;case 23:break;case 22:var he=x.stateNode;x.memoizedState!==null?he._visibility&2?fl(y,x,M,q,g):lu(y,x):(he._visibility|=2,fl(y,x,M,q,g)),g&&oe&2048&&kg(x.alternate,x);break;case 24:fl(y,x,M,q,g),g&&oe&2048&&Mg(x.alternate,x);break;default:fl(y,x,M,q,g)}o=o.sibling}}function lu(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=i,h=o,g=h.flags;switch(h.tag){case 22:lu(l,h),g&2048&&kg(h.alternate,h);break;case 24:lu(l,h),g&2048&&Mg(h.alternate,h);break;default:lu(l,h)}o=o.sibling}}var cu=8192;function ml(i){if(i.subtreeFlags&cu)for(i=i.child;i!==null;)Pw(i),i=i.sibling}function Pw(i){switch(i.tag){case 26:ml(i),i.flags&cu&&i.memoizedState!==null&&wM(Yr,i.memoizedState,i.memoizedProps);break;case 5:ml(i);break;case 3:case 4:var o=Yr;Yr=ef(i.stateNode.containerInfo),ml(i),Yr=o;break;case 22:i.memoizedState===null&&(o=i.alternate,o!==null&&o.memoizedState!==null?(o=cu,cu=16777216,ml(i),cu=o):ml(i));break;default:ml(i)}}function Ow(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function uu(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var h=o[l];un=h,Lw(h,i)}Ow(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Vw(i),i=i.sibling}function Vw(i){switch(i.tag){case 0:case 11:case 15:uu(i),i.flags&2048&&Os(9,i,i.return);break;case 3:uu(i);break;case 12:uu(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Hd(i)):uu(i);break;default:uu(i)}}function Hd(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var h=o[l];un=h,Lw(h,i)}Ow(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Os(8,o,o.return),Hd(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,Hd(o));break;default:Hd(o)}i=i.sibling}}function Lw(i,o){for(;un!==null;){var l=un;switch(l.tag){case 0:case 11:case 15:Os(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Gc(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,un=h;else e:for(l=i;un!==null;){h=un;var g=h.sibling,y=h.return;if(Rw(h),h===l){un=null;break e}if(g!==null){g.return=y,un=g;break e}un=y}}}var Uk={getCacheForType:function(i){var o=Sn(tn),l=o.data.get(i);return l===void 0&&(l=i(),o.data.set(i,l)),l}},zk=typeof WeakMap=="function"?WeakMap:Map,ut=0,vt=null,Ye=null,Je=0,ht=0,lr=null,Us=!1,pl=!1,Pg=!1,os=0,kt=0,zs=0,sa=0,Og=0,Pr=0,gl=0,hu=null,Yn=null,Vg=!1,Lg=0,Fd=1/0,$d=null,js=null,vn=0,Bs=null,yl=null,vl=0,Ug=0,zg=null,Uw=null,du=0,jg=null;function cr(){if((ut&2)!==0&&Je!==0)return Je&-Je;if(z.T!==null){var i=sl;return i!==0?i:Yg()}return oi()}function zw(){Pr===0&&(Pr=(Je&536870912)===0||ot?zi():536870912);var i=Mr.current;return i!==null&&(i.flags|=32),Pr}function ur(i,o,l){(i===vt&&(ht===2||ht===9)||i.cancelPendingCommit!==null)&&(_l(i,0),Hs(i,Je,Pr,!1)),_r(i,l),((ut&2)===0||i!==vt)&&(i===vt&&((ut&2)===0&&(sa|=l),kt===4&&Hs(i,Je,Pr,!1)),xi(i))}function jw(i,o,l){if((ut&6)!==0)throw Error(r(327));var h=!l&&(o&124)===0&&(o&i.expiredLanes)===0||Ln(i,o),g=h?Hk(i,o):Fg(i,o,!0),y=h;do{if(g===0){pl&&!h&&Hs(i,o,0,!1);break}else{if(l=i.current.alternate,y&&!jk(l)){g=Fg(i,o,!1),y=!1;continue}if(g===2){if(y=o,i.errorRecoveryDisabledLanes&y)var x=0;else x=i.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){o=x;e:{var M=i;g=hu;var q=M.current.memoizedState.isDehydrated;if(q&&(_l(M,x).flags|=256),x=Fg(M,x,!1),x!==2){if(Pg&&!q){M.errorRecoveryDisabledLanes|=y,sa|=y,g=4;break e}y=Yn,Yn=g,y!==null&&(Yn===null?Yn=y:Yn.push.apply(Yn,y))}g=x}if(y=!1,g!==2)continue}}if(g===1){_l(i,0),Hs(i,o,0,!0);break}e:{switch(h=i,y=g,y){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Hs(h,o,Pr,!Us);break e;case 2:Yn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(g=Lg+300-ze(),10<g)){if(Hs(h,o,Pr,!Us),mn(h,0,!0)!==0)break e;h.timeoutHandle=p1(Bw.bind(null,h,l,Yn,$d,Vg,o,Pr,sa,gl,Us,y,2,-0,0),g);break e}Bw(h,l,Yn,$d,Vg,o,Pr,sa,gl,Us,y,0,-0,0)}}break}while(!0);xi(i)}function Bw(i,o,l,h,g,y,x,M,q,oe,he,pe,ae,le){if(i.timeoutHandle=-1,pe=o.subtreeFlags,(pe&8192||(pe&16785408)===16785408)&&(_u={stylesheets:null,count:0,unsuspend:bM},Pw(o),pe=xM(),pe!==null)){i.cancelPendingCommit=pe(Kw.bind(null,i,o,y,l,h,g,x,M,q,he,1,ae,le)),Hs(i,y,x,!oe);return}Kw(i,o,y,l,h,g,x,M,q)}function jk(i){for(var o=i;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var g=l[h],y=g.getSnapshot;g=g.value;try{if(!ir(y(),g))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Hs(i,o,l,h){o&=~Og,o&=~sa,i.suspendedLanes|=o,i.pingedLanes&=~o,h&&(i.warmLanes|=o),h=i.expirationTimes;for(var g=o;0<g;){var y=31-xt(g),x=1<<y;h[y]=-1,g&=~x}l!==0&&Er(i,l,o)}function qd(){return(ut&6)===0?(fu(0),!1):!0}function Bg(){if(Ye!==null){if(ht===0)var i=Ye.return;else i=Ye,Zi=Jo=null,ig(i),hl=null,ru=0,i=Ye;for(;i!==null;)Ew(i.alternate,i),i=i.return;Ye=null}}function _l(i,o){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,iM(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Bg(),vt=i,Ye=l=Xi(i.current,null),Je=o,ht=0,lr=null,Us=!1,pl=Ln(i,o),Pg=!1,gl=Pr=Og=sa=zs=kt=0,Yn=hu=null,Vg=!1,(o&8)!==0&&(o|=o&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=o;0<h;){var g=31-xt(h),y=1<<g;o|=i[g],h&=~y}return os=o,fd(),l}function Hw(i,o){He=null,z.H=kd,o===Kc||o===wd?(o=sb(),ht=3):o===nb?(o=sb(),ht=4):ht=o===ow?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,lr=o,Ye===null&&(kt=1,Ld(i,Ir(o,i.current)))}function Fw(){var i=z.H;return z.H=kd,i===null?kd:i}function $w(){var i=z.A;return z.A=Uk,i}function Hg(){kt=4,Us||(Je&4194048)!==Je&&Mr.current!==null||(pl=!0),(zs&134217727)===0&&(sa&134217727)===0||vt===null||Hs(vt,Je,Pr,!1)}function Fg(i,o,l){var h=ut;ut|=2;var g=Fw(),y=$w();(vt!==i||Je!==o)&&($d=null,_l(i,o)),o=!1;var x=kt;e:do try{if(ht!==0&&Ye!==null){var M=Ye,q=lr;switch(ht){case 8:Bg(),x=6;break e;case 3:case 2:case 9:case 6:Mr.current===null&&(o=!0);var oe=ht;if(ht=0,lr=null,El(i,M,q,oe),l&&pl){x=0;break e}break;default:oe=ht,ht=0,lr=null,El(i,M,q,oe)}}Bk(),x=kt;break}catch(he){Hw(i,he)}while(!0);return o&&i.shellSuspendCounter++,Zi=Jo=null,ut=h,z.H=g,z.A=y,Ye===null&&(vt=null,Je=0,fd()),x}function Bk(){for(;Ye!==null;)qw(Ye)}function Hk(i,o){var l=ut;ut|=2;var h=Fw(),g=$w();vt!==i||Je!==o?($d=null,Fd=ze()+500,_l(i,o)):pl=Ln(i,o);e:do try{if(ht!==0&&Ye!==null){o=Ye;var y=lr;t:switch(ht){case 1:ht=0,lr=null,El(i,o,y,1);break;case 2:case 9:if(rb(y)){ht=0,lr=null,Gw(o);break}o=function(){ht!==2&&ht!==9||vt!==i||(ht=7),xi(i)},y.then(o,o);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:rb(y)?(ht=0,lr=null,Gw(o)):(ht=0,lr=null,El(i,o,y,7));break;case 5:var x=null;switch(Ye.tag){case 26:x=Ye.memoizedState;case 5:case 27:var M=Ye;if(!x||C1(x)){ht=0,lr=null;var q=M.sibling;if(q!==null)Ye=q;else{var oe=M.return;oe!==null?(Ye=oe,Gd(oe)):Ye=null}break t}}ht=0,lr=null,El(i,o,y,5);break;case 6:ht=0,lr=null,El(i,o,y,6);break;case 8:Bg(),kt=6;break e;default:throw Error(r(462))}}Fk();break}catch(he){Hw(i,he)}while(!0);return Zi=Jo=null,z.H=h,z.A=g,ut=l,Ye!==null?0:(vt=null,Je=0,fd(),kt)}function Fk(){for(;Ye!==null&&!st();)qw(Ye)}function qw(i){var o=vw(i.alternate,i,os);i.memoizedProps=i.pendingProps,o===null?Gd(i):Ye=o}function Gw(i){var o=i,l=o.alternate;switch(o.tag){case 15:case 0:o=dw(l,o,o.pendingProps,o.type,void 0,Je);break;case 11:o=dw(l,o,o.pendingProps,o.type.render,o.ref,Je);break;case 5:ig(o);default:Ew(l,o),o=Ye=YE(o,os),o=vw(l,o,os)}i.memoizedProps=i.pendingProps,o===null?Gd(i):Ye=o}function El(i,o,l,h){Zi=Jo=null,ig(o),hl=null,ru=0;var g=o.return;try{if(kk(i,g,o,l,Je)){kt=1,Ld(i,Ir(l,i.current)),Ye=null;return}}catch(y){if(g!==null)throw Ye=g,y;kt=1,Ld(i,Ir(l,i.current)),Ye=null;return}o.flags&32768?(ot||h===1?i=!0:pl||(Je&536870912)!==0?i=!1:(Us=i=!0,(h===2||h===9||h===3||h===6)&&(h=Mr.current,h!==null&&h.tag===13&&(h.flags|=16384))),Yw(o,i)):Gd(o)}function Gd(i){var o=i;do{if((o.flags&32768)!==0){Yw(o,Us);return}i=o.return;var l=Pk(o.alternate,o,os);if(l!==null){Ye=l;return}if(o=o.sibling,o!==null){Ye=o;return}Ye=o=i}while(o!==null);kt===0&&(kt=5)}function Yw(i,o){do{var l=Ok(i.alternate,i);if(l!==null){l.flags&=32767,Ye=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(i=i.sibling,i!==null)){Ye=i;return}Ye=i=l}while(i!==null);kt=6,Ye=null}function Kw(i,o,l,h,g,y,x,M,q){i.cancelPendingCommit=null;do Yd();while(vn!==0);if((ut&6)!==0)throw Error(r(327));if(o!==null){if(o===i.current)throw Error(r(177));if(y=o.lanes|o.childLanes,y|=Mp,tr(i,l,y,x,M,q),i===vt&&(Ye=vt=null,Je=0),yl=o,Bs=i,vl=l,Ug=y,zg=g,Uw=h,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,Yk(Wt,function(){return Jw(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||h){h=z.T,z.T=null,g=Y.p,Y.p=2,x=ut,ut|=4;try{Vk(i,o,l)}finally{ut=x,Y.p=g,z.T=h}}vn=1,Xw(),Qw(),Ww()}}function Xw(){if(vn===1){vn=0;var i=Bs,o=yl,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=z.T,z.T=null;var h=Y.p;Y.p=2;var g=ut;ut|=4;try{Dw(o,i);var y=ty,x=LE(i.containerInfo),M=y.focusedElem,q=y.selectionRange;if(x!==M&&M&&M.ownerDocument&&VE(M.ownerDocument.documentElement,M)){if(q!==null&&Rp(M)){var oe=q.start,he=q.end;if(he===void 0&&(he=oe),"selectionStart"in M)M.selectionStart=oe,M.selectionEnd=Math.min(he,M.value.length);else{var pe=M.ownerDocument||document,ae=pe&&pe.defaultView||window;if(ae.getSelection){var le=ae.getSelection(),Pe=M.textContent.length,Ne=Math.min(q.start,Pe),pt=q.end===void 0?Ne:Math.min(q.end,Pe);!le.extend&&Ne>pt&&(x=pt,pt=Ne,Ne=x);var ee=OE(M,Ne),Z=OE(M,pt);if(ee&&Z&&(le.rangeCount!==1||le.anchorNode!==ee.node||le.anchorOffset!==ee.offset||le.focusNode!==Z.node||le.focusOffset!==Z.offset)){var ie=pe.createRange();ie.setStart(ee.node,ee.offset),le.removeAllRanges(),Ne>pt?(le.addRange(ie),le.extend(Z.node,Z.offset)):(ie.setEnd(Z.node,Z.offset),le.addRange(ie))}}}}for(pe=[],le=M;le=le.parentNode;)le.nodeType===1&&pe.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<pe.length;M++){var me=pe[M];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}of=!!ey,ty=ey=null}finally{ut=g,Y.p=h,z.T=l}}i.current=o,vn=2}}function Qw(){if(vn===2){vn=0;var i=Bs,o=yl,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=z.T,z.T=null;var h=Y.p;Y.p=2;var g=ut;ut|=4;try{Cw(i,o.alternate,o)}finally{ut=g,Y.p=h,z.T=l}}vn=3}}function Ww(){if(vn===4||vn===3){vn=0,Ht();var i=Bs,o=yl,l=vl,h=Uw;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?vn=5:(vn=0,yl=Bs=null,Zw(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(js=null),xs(l),o=o.stateNode,Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(at,o,void 0,(o.current.flags&128)===128)}catch{}if(h!==null){o=z.T,g=Y.p,Y.p=2,z.T=null;try{for(var y=i.onRecoverableError,x=0;x<h.length;x++){var M=h[x];y(M.value,{componentStack:M.stack})}}finally{z.T=o,Y.p=g}}(vl&3)!==0&&Yd(),xi(i),g=i.pendingLanes,(l&4194090)!==0&&(g&42)!==0?i===jg?du++:(du=0,jg=i):du=0,fu(0)}}function Zw(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,Gc(o)))}function Yd(i){return Xw(),Qw(),Ww(),Jw()}function Jw(){if(vn!==5)return!1;var i=Bs,o=Ug;Ug=0;var l=xs(vl),h=z.T,g=Y.p;try{Y.p=32>l?32:l,z.T=null,l=zg,zg=null;var y=Bs,x=vl;if(vn=0,yl=Bs=null,vl=0,(ut&6)!==0)throw Error(r(331));var M=ut;if(ut|=4,Vw(y.current),Mw(y,y.current,x,l),ut=M,fu(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(at,y)}catch{}return!0}finally{Y.p=g,z.T=h,Zw(i,o)}}function e1(i,o,l){o=Ir(l,o),o=vg(i.stateNode,o,2),i=Ds(i,o,2),i!==null&&(_r(i,2),xi(i))}function gt(i,o,l){if(i.tag===3)e1(i,i,l);else for(;o!==null;){if(o.tag===3){e1(o,i,l);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(js===null||!js.has(h))){i=Ir(l,i),l=iw(2),h=Ds(o,l,2),h!==null&&(sw(l,h,o,i),_r(h,2),xi(h));break}}o=o.return}}function $g(i,o,l){var h=i.pingCache;if(h===null){h=i.pingCache=new zk;var g=new Set;h.set(o,g)}else g=h.get(o),g===void 0&&(g=new Set,h.set(o,g));g.has(l)||(Pg=!0,g.add(l),i=$k.bind(null,i,o,l),o.then(i,i))}function $k(i,o,l){var h=i.pingCache;h!==null&&h.delete(o),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,vt===i&&(Je&l)===l&&(kt===4||kt===3&&(Je&62914560)===Je&&300>ze()-Lg?(ut&2)===0&&_l(i,0):Og|=l,gl===Je&&(gl=0)),xi(i)}function t1(i,o){o===0&&(o=Hr()),i=tl(i,o),i!==null&&(_r(i,o),xi(i))}function qk(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),t1(i,l)}function Gk(i,o){var l=0;switch(i.tag){case 13:var h=i.stateNode,g=i.memoizedState;g!==null&&(l=g.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(o),t1(i,l)}function Yk(i,o){return Ue(i,o)}var Kd=null,bl=null,qg=!1,Xd=!1,Gg=!1,oa=0;function xi(i){i!==bl&&i.next===null&&(bl===null?Kd=bl=i:bl=bl.next=i),Xd=!0,qg||(qg=!0,Xk())}function fu(i,o){if(!Gg&&Xd){Gg=!0;do for(var l=!1,h=Kd;h!==null;){if(i!==0){var g=h.pendingLanes;if(g===0)var y=0;else{var x=h.suspendedLanes,M=h.pingedLanes;y=(1<<31-xt(42|i)+1)-1,y&=g&~(x&~M),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,s1(h,y))}else y=Je,y=mn(h,h===vt?y:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(y&3)===0||Ln(h,y)||(l=!0,s1(h,y));h=h.next}while(l);Gg=!1}}function Kk(){n1()}function n1(){Xd=qg=!1;var i=0;oa!==0&&(rM()&&(i=oa),oa=0);for(var o=ze(),l=null,h=Kd;h!==null;){var g=h.next,y=r1(h,o);y===0?(h.next=null,l===null?Kd=g:l.next=g,g===null&&(bl=l)):(l=h,(i!==0||(y&3)!==0)&&(Xd=!0)),h=g}fu(i)}function r1(i,o){for(var l=i.suspendedLanes,h=i.pingedLanes,g=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var x=31-xt(y),M=1<<x,q=g[x];q===-1?((M&l)===0||(M&h)!==0)&&(g[x]=Ui(M,o)):q<=o&&(i.expiredLanes|=M),y&=~M}if(o=vt,l=Je,l=mn(i,i===o?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,l===0||i===o&&(ht===2||ht===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&nt(h),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Ln(i,l)){if(o=l&-l,o===i.callbackPriority)return o;switch(h!==null&&nt(h),xs(l)){case 2:case 8:l=Tn;break;case 32:l=Wt;break;case 268435456:l=Mn;break;default:l=Wt}return h=i1.bind(null,i),l=Ue(l,h),i.callbackPriority=o,i.callbackNode=l,o}return h!==null&&h!==null&&nt(h),i.callbackPriority=2,i.callbackNode=null,2}function i1(i,o){if(vn!==0&&vn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(Yd()&&i.callbackNode!==l)return null;var h=Je;return h=mn(i,i===vt?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(jw(i,h,o),r1(i,ze()),i.callbackNode!=null&&i.callbackNode===l?i1.bind(null,i):null)}function s1(i,o){if(Yd())return null;jw(i,o,!0)}function Xk(){sM(function(){(ut&6)!==0?Ue(It,Kk):n1()})}function Yg(){return oa===0&&(oa=zi()),oa}function o1(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Fa(""+i)}function a1(i,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,i.id&&l.setAttribute("form",i.id),o.parentNode.insertBefore(l,o),i=new FormData(i),l.parentNode.removeChild(l),i}function Qk(i,o,l,h,g){if(o==="submit"&&l&&l.stateNode===g){var y=o1((g[Nt]||null).action),x=h.submitter;x&&(o=(o=x[Nt]||null)?o1(o.formAction):x.getAttribute("formAction"),o!==null&&(y=o,x=null));var M=new $a("action","action",null,h,g);i.push({event:M,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(oa!==0){var q=x?a1(g,x):new FormData(g);fg(l,{pending:!0,data:q,method:g.method,action:y},null,q)}}else typeof y=="function"&&(M.preventDefault(),q=x?a1(g,x):new FormData(g),fg(l,{pending:!0,data:q,method:g.method,action:y},y,q))},currentTarget:g}]})}}for(var Kg=0;Kg<kp.length;Kg++){var Xg=kp[Kg],Wk=Xg.toLowerCase(),Zk=Xg[0].toUpperCase()+Xg.slice(1);Gr(Wk,"on"+Zk)}Gr(jE,"onAnimationEnd"),Gr(BE,"onAnimationIteration"),Gr(HE,"onAnimationStart"),Gr("dblclick","onDoubleClick"),Gr("focusin","onFocus"),Gr("focusout","onBlur"),Gr(pk,"onTransitionRun"),Gr(gk,"onTransitionStart"),Gr(yk,"onTransitionCancel"),Gr(FE,"onTransitionEnd"),Fr("onMouseEnter",["mouseout","mouseover"]),Fr("onMouseLeave",["mouseout","mouseover"]),Fr("onPointerEnter",["pointerout","pointerover"]),Fr("onPointerLeave",["pointerout","pointerover"]),nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),nr("onBeforeInput",["compositionend","keypress","textInput","paste"]),nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mu));function l1(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],g=h.event;h=h.listeners;e:{var y=void 0;if(o)for(var x=h.length-1;0<=x;x--){var M=h[x],q=M.instance,oe=M.currentTarget;if(M=M.listener,q!==y&&g.isPropagationStopped())break e;y=M,g.currentTarget=oe;try{y(g)}catch(he){Vd(he)}g.currentTarget=null,y=q}else for(x=0;x<h.length;x++){if(M=h[x],q=M.instance,oe=M.currentTarget,M=M.listener,q!==y&&g.isPropagationStopped())break e;y=M,g.currentTarget=oe;try{y(g)}catch(he){Vd(he)}g.currentTarget=null,y=q}}}}function Ke(i,o){var l=o[ko];l===void 0&&(l=o[ko]=new Set);var h=i+"__bubble";l.has(h)||(c1(o,i,2,!1),l.add(h))}function Qg(i,o,l){var h=0;o&&(h|=4),c1(l,i,h,o)}var Qd="_reactListening"+Math.random().toString(36).slice(2);function Wg(i){if(!i[Qd]){i[Qd]=!0,Mo.forEach(function(l){l!=="selectionchange"&&(Jk.has(l)||Qg(l,!1,i),Qg(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Qd]||(o[Qd]=!0,Qg("selectionchange",!1,o))}}function c1(i,o,l,h){switch(M1(o)){case 2:var g=AM;break;case 8:g=CM;break;default:g=hy}l=g.bind(null,o,l,i),g=void 0,!Cr||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),h?g!==void 0?i.addEventListener(o,l,{capture:!0,passive:g}):i.addEventListener(o,l,!0):g!==void 0?i.addEventListener(o,l,{passive:g}):i.addEventListener(o,l,!1)}function Zg(i,o,l,h,g){var y=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var x=h.tag;if(x===3||x===4){var M=h.stateNode.containerInfo;if(M===g)break;if(x===4)for(x=h.return;x!==null;){var q=x.tag;if((q===3||q===4)&&x.stateNode.containerInfo===g)return;x=x.return}for(;M!==null;){if(x=br(M),x===null)return;if(q=x.tag,q===5||q===6||q===26||q===27){h=y=x;continue e}M=M.parentNode}}h=h.return}Zh(function(){var oe=y,he=Ar(l),pe=[];e:{var ae=$E.get(i);if(ae!==void 0){var le=$a,Pe=i;switch(i){case"keypress":if(mi(l)===0)break e;case"keydown":case"keyup":le=Qa;break;case"focusin":Pe="focus",le=Ya;break;case"focusout":Pe="blur",le=Ya;break;case"beforeblur":case"afterblur":le=Ya;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Rr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Tp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=od;break;case jE:case BE:case HE:le=Ka;break;case FE:le=ld;break;case"scroll":case"scrollend":le=Jh;break;case"wheel":le=Wa;break;case"copy":case"cut":case"paste":le=Xa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=Uc;break;case"toggle":case"beforetoggle":le=ud}var Ne=(o&4)!==0,pt=!Ne&&(i==="scroll"||i==="scrollend"),ee=Ne?ae!==null?ae+"Capture":null:ae;Ne=[];for(var Z=oe,ie;Z!==null;){var me=Z;if(ie=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||ie===null||ee===null||(me=zo(Z,ee),me!=null&&Ne.push(pu(Z,me,ie))),pt)break;Z=Z.return}0<Ne.length&&(ae=new le(ae,Pe,null,l,he),pe.push({event:ae,listeners:Ne}))}}if((o&7)===0){e:{if(ae=i==="mouseover"||i==="pointerover",le=i==="mouseout"||i==="pointerout",ae&&l!==Fi&&(Pe=l.relatedTarget||l.fromElement)&&(br(Pe)||Pe[$n]))break e;if((le||ae)&&(ae=he.window===he?he:(ae=he.ownerDocument)?ae.defaultView||ae.parentWindow:window,le?(Pe=l.relatedTarget||l.toElement,le=oe,Pe=Pe?br(Pe):null,Pe!==null&&(pt=a(Pe),Ne=Pe.tag,Pe!==pt||Ne!==5&&Ne!==27&&Ne!==6)&&(Pe=null)):(le=null,Pe=oe),le!==Pe)){if(Ne=Rr,me="onMouseLeave",ee="onMouseEnter",Z="mouse",(i==="pointerout"||i==="pointerover")&&(Ne=Uc,me="onPointerLeave",ee="onPointerEnter",Z="pointer"),pt=le==null?ae:xr(le),ie=Pe==null?ae:xr(Pe),ae=new Ne(me,Z+"leave",le,l,he),ae.target=pt,ae.relatedTarget=ie,me=null,br(he)===oe&&(Ne=new Ne(ee,Z+"enter",Pe,l,he),Ne.target=ie,Ne.relatedTarget=pt,me=Ne),pt=me,le&&Pe)t:{for(Ne=le,ee=Pe,Z=0,ie=Ne;ie;ie=wl(ie))Z++;for(ie=0,me=ee;me;me=wl(me))ie++;for(;0<Z-ie;)Ne=wl(Ne),Z--;for(;0<ie-Z;)ee=wl(ee),ie--;for(;Z--;){if(Ne===ee||ee!==null&&Ne===ee.alternate)break t;Ne=wl(Ne),ee=wl(ee)}Ne=null}else Ne=null;le!==null&&u1(pe,ae,le,Ne,!1),Pe!==null&&pt!==null&&u1(pe,pt,Pe,Ne,!0)}}e:{if(ae=oe?xr(oe):window,le=ae.nodeName&&ae.nodeName.toLowerCase(),le==="select"||le==="input"&&ae.type==="file")var Se=IE;else if(en(ae))if(NE)Se=dk;else{Se=uk;var $e=ck}else le=ae.nodeName,!le||le.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?oe&&Dc(oe.elementType)&&(Se=IE):Se=hk;if(Se&&(Se=Se(i,oe))){Ki(pe,Se,l,he);break e}$e&&$e(i,ae,oe),i==="focusout"&&oe&&ae.type==="number"&&oe.memoizedProps.value!=null&&As(ae,"number",ae.value)}switch($e=oe?xr(oe):window,i){case"focusin":(en($e)||$e.contentEditable==="true")&&(Za=$e,Ip=oe,Bc=null);break;case"focusout":Bc=Ip=Za=null;break;case"mousedown":Np=!0;break;case"contextmenu":case"mouseup":case"dragend":Np=!1,UE(pe,l,he);break;case"selectionchange":if(mk)break;case"keydown":case"keyup":UE(pe,l,he)}var Ce;if(yi)e:{switch(i){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else We?ce(i,l)&&(De="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(De="onCompositionStart");De&&(w&&l.locale!=="ko"&&(We||De!=="onCompositionStart"?De==="onCompositionEnd"&&We&&(Ce=Mc()):(fi=he,Cs="value"in fi?fi.value:fi.textContent,We=!0)),$e=Wd(oe,De),0<$e.length&&(De=new Vc(De,i,null,l,he),pe.push({event:De,listeners:$e}),Ce?De.data=Ce:(Ce=Ee(l),Ce!==null&&(De.data=Ce)))),(Ce=E?Jt(i,l):Ze(i,l))&&(De=Wd(oe,"onBeforeInput"),0<De.length&&($e=new Vc("onBeforeInput","beforeinput",null,l,he),pe.push({event:$e,listeners:De}),$e.data=Ce)),Qk(pe,i,oe,l,he)}l1(pe,o)})}function pu(i,o,l){return{instance:i,listener:o,currentTarget:l}}function Wd(i,o){for(var l=o+"Capture",h=[];i!==null;){var g=i,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=zo(i,l),g!=null&&h.unshift(pu(i,g,y)),g=zo(i,o),g!=null&&h.push(pu(i,g,y))),i.tag===3)return h;i=i.return}return[]}function wl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function u1(i,o,l,h,g){for(var y=o._reactName,x=[];l!==null&&l!==h;){var M=l,q=M.alternate,oe=M.stateNode;if(M=M.tag,q!==null&&q===h)break;M!==5&&M!==26&&M!==27||oe===null||(q=oe,g?(oe=zo(l,y),oe!=null&&x.unshift(pu(l,oe,q))):g||(oe=zo(l,y),oe!=null&&x.push(pu(l,oe,q)))),l=l.return}x.length!==0&&i.push({event:o,listeners:x})}var eM=/\r\n?/g,tM=/\u0000|\uFFFD/g;function h1(i){return(typeof i=="string"?i:""+i).replace(eM,`
`).replace(tM,"")}function d1(i,o){return o=h1(o),h1(i)===o}function Zd(){}function mt(i,o,l,h,g,y){switch(l){case"children":typeof h=="string"?o==="body"||o==="textarea"&&h===""||Sr(i,h):(typeof h=="number"||typeof h=="bigint")&&o!=="body"&&Sr(i,""+h);break;case"className":Tr(i,"class",h);break;case"tabIndex":Tr(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Tr(i,l,h);break;case"style":Nc(i,h,y);break;case"data":if(o!=="object"){Tr(i,"data",h);break}case"src":case"href":if(h===""&&(o!=="a"||l!=="href")){i.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=Fa(""+h),i.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(o!=="input"&&mt(i,o,"name",g.name,g,null),mt(i,o,"formEncType",g.formEncType,g,null),mt(i,o,"formMethod",g.formMethod,g,null),mt(i,o,"formTarget",g.formTarget,g,null)):(mt(i,o,"encType",g.encType,g,null),mt(i,o,"method",g.method,g,null),mt(i,o,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=Fa(""+h),i.setAttribute(l,h);break;case"onClick":h!=null&&(i.onclick=Zd);break;case"onScroll":h!=null&&Ke("scroll",i);break;case"onScrollEnd":h!=null&&Ke("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}l=Fa(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""+h):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":h===!0?i.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,h):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(l,h):i.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(l):i.setAttribute(l,h);break;case"popover":Ke("beforetoggle",i),Ke("toggle",i),ci(i,"popover",h);break;case"xlinkActuate":Zt(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Zt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Zt(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Zt(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Zt(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Zt(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Zt(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Zt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Zt(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":ci(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=wp.get(l)||l,ci(i,l,h))}}function Jg(i,o,l,h,g,y){switch(l){case"style":Nc(i,h,y);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"children":typeof h=="string"?Sr(i,h):(typeof h=="number"||typeof h=="bigint")&&Sr(i,""+h);break;case"onScroll":h!=null&&Ke("scroll",i);break;case"onScrollEnd":h!=null&&Ke("scrollend",i);break;case"onClick":h!=null&&(i.onclick=Zd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ts.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),o=l.slice(2,g?l.length-7:void 0),y=i[Nt]||null,y=y!=null?y[l]:null,typeof y=="function"&&i.removeEventListener(o,y,g),typeof h=="function")){typeof y!="function"&&y!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(o,h,g);break e}l in i?i[l]=h:h===!0?i.setAttribute(l,""):ci(i,l,h)}}}function _n(i,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",i),Ke("load",i);var h=!1,g=!1,y;for(y in l)if(l.hasOwnProperty(y)){var x=l[y];if(x!=null)switch(y){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:mt(i,o,y,x,l,null)}}g&&mt(i,o,"srcSet",l.srcSet,l,null),h&&mt(i,o,"src",l.src,l,null);return;case"input":Ke("invalid",i);var M=y=x=g=null,q=null,oe=null;for(h in l)if(l.hasOwnProperty(h)){var he=l[h];if(he!=null)switch(h){case"name":g=he;break;case"type":x=he;break;case"checked":q=he;break;case"defaultChecked":oe=he;break;case"value":y=he;break;case"defaultValue":M=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,o));break;default:mt(i,o,h,he,l,null)}}Vo(i,y,M,q,oe,x,g,!1),Ha(i);return;case"select":Ke("invalid",i),h=x=y=null;for(g in l)if(l.hasOwnProperty(g)&&(M=l[g],M!=null))switch(g){case"value":y=M;break;case"defaultValue":x=M;break;case"multiple":h=M;default:mt(i,o,g,M,l,null)}o=y,l=x,i.multiple=!!h,o!=null?Hi(i,!!h,o,!1):l!=null&&Hi(i,!!h,l,!0);return;case"textarea":Ke("invalid",i),y=g=h=null;for(x in l)if(l.hasOwnProperty(x)&&(M=l[x],M!=null))switch(x){case"value":h=M;break;case"defaultValue":g=M;break;case"children":y=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(r(91));break;default:mt(i,o,x,M,l,null)}Lo(i,h,g,y),Ha(i);return;case"option":for(q in l)if(l.hasOwnProperty(q)&&(h=l[q],h!=null))switch(q){case"selected":i.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:mt(i,o,q,h,l,null)}return;case"dialog":Ke("beforetoggle",i),Ke("toggle",i),Ke("cancel",i),Ke("close",i);break;case"iframe":case"object":Ke("load",i);break;case"video":case"audio":for(h=0;h<mu.length;h++)Ke(mu[h],i);break;case"image":Ke("error",i),Ke("load",i);break;case"details":Ke("toggle",i);break;case"embed":case"source":case"link":Ke("error",i),Ke("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in l)if(l.hasOwnProperty(oe)&&(h=l[oe],h!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:mt(i,o,oe,h,l,null)}return;default:if(Dc(o)){for(he in l)l.hasOwnProperty(he)&&(h=l[he],h!==void 0&&Jg(i,o,he,h,l,void 0));return}}for(M in l)l.hasOwnProperty(M)&&(h=l[M],h!=null&&mt(i,o,M,h,l,null))}function nM(i,o,l,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,x=null,M=null,q=null,oe=null,he=null;for(le in l){var pe=l[le];if(l.hasOwnProperty(le)&&pe!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":q=pe;default:h.hasOwnProperty(le)||mt(i,o,le,null,h,pe)}}for(var ae in h){var le=h[ae];if(pe=l[ae],h.hasOwnProperty(ae)&&(le!=null||pe!=null))switch(ae){case"type":y=le;break;case"name":g=le;break;case"checked":oe=le;break;case"defaultChecked":he=le;break;case"value":x=le;break;case"defaultValue":M=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,o));break;default:le!==pe&&mt(i,o,ae,le,h,pe)}}rr(i,x,M,q,oe,he,y,g);return;case"select":le=x=M=ae=null;for(y in l)if(q=l[y],l.hasOwnProperty(y)&&q!=null)switch(y){case"value":break;case"multiple":le=q;default:h.hasOwnProperty(y)||mt(i,o,y,null,h,q)}for(g in h)if(y=h[g],q=l[g],h.hasOwnProperty(g)&&(y!=null||q!=null))switch(g){case"value":ae=y;break;case"defaultValue":M=y;break;case"multiple":x=y;default:y!==q&&mt(i,o,g,y,h,q)}o=M,l=x,h=le,ae!=null?Hi(i,!!l,ae,!1):!!h!=!!l&&(o!=null?Hi(i,!!l,o,!0):Hi(i,!!l,l?[]:"",!1));return;case"textarea":le=ae=null;for(M in l)if(g=l[M],l.hasOwnProperty(M)&&g!=null&&!h.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:mt(i,o,M,null,h,g)}for(x in h)if(g=h[x],y=l[x],h.hasOwnProperty(x)&&(g!=null||y!=null))switch(x){case"value":ae=g;break;case"defaultValue":le=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==y&&mt(i,o,x,g,h,y)}dt(i,ae,le);return;case"option":for(var Pe in l)if(ae=l[Pe],l.hasOwnProperty(Pe)&&ae!=null&&!h.hasOwnProperty(Pe))switch(Pe){case"selected":i.selected=!1;break;default:mt(i,o,Pe,null,h,ae)}for(q in h)if(ae=h[q],le=l[q],h.hasOwnProperty(q)&&ae!==le&&(ae!=null||le!=null))switch(q){case"selected":i.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:mt(i,o,q,ae,h,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in l)ae=l[Ne],l.hasOwnProperty(Ne)&&ae!=null&&!h.hasOwnProperty(Ne)&&mt(i,o,Ne,null,h,ae);for(oe in h)if(ae=h[oe],le=l[oe],h.hasOwnProperty(oe)&&ae!==le&&(ae!=null||le!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,o));break;default:mt(i,o,oe,ae,h,le)}return;default:if(Dc(o)){for(var pt in l)ae=l[pt],l.hasOwnProperty(pt)&&ae!==void 0&&!h.hasOwnProperty(pt)&&Jg(i,o,pt,void 0,h,ae);for(he in h)ae=h[he],le=l[he],!h.hasOwnProperty(he)||ae===le||ae===void 0&&le===void 0||Jg(i,o,he,ae,h,le);return}}for(var ee in l)ae=l[ee],l.hasOwnProperty(ee)&&ae!=null&&!h.hasOwnProperty(ee)&&mt(i,o,ee,null,h,ae);for(pe in h)ae=h[pe],le=l[pe],!h.hasOwnProperty(pe)||ae===le||ae==null&&le==null||mt(i,o,pe,ae,h,le)}var ey=null,ty=null;function Jd(i){return i.nodeType===9?i:i.ownerDocument}function f1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function m1(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function ny(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ry=null;function rM(){var i=window.event;return i&&i.type==="popstate"?i===ry?!1:(ry=i,!0):(ry=null,!1)}var p1=typeof setTimeout=="function"?setTimeout:void 0,iM=typeof clearTimeout=="function"?clearTimeout:void 0,g1=typeof Promise=="function"?Promise:void 0,sM=typeof queueMicrotask=="function"?queueMicrotask:typeof g1<"u"?function(i){return g1.resolve(null).then(i).catch(oM)}:p1;function oM(i){setTimeout(function(){throw i})}function Fs(i){return i==="head"}function y1(i,o){var l=o,h=0,g=0;do{var y=l.nextSibling;if(i.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"){if(0<h&&8>h){l=h;var x=i.ownerDocument;if(l&1&&gu(x.documentElement),l&2&&gu(x.body),l&4)for(l=x.head,gu(l),x=l.firstChild;x;){var M=x.nextSibling,q=x.nodeName;x[ji]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&x.rel.toLowerCase()==="stylesheet"||l.removeChild(x),x=M}}if(g===0){i.removeChild(y),Tu(o);return}g--}else l==="$"||l==="$?"||l==="$!"?g++:h=l.charCodeAt(0)-48;else h=0;l=y}while(l);Tu(o)}function iy(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":iy(l),li(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function aM(i,o,l,h){for(;i.nodeType===1;){var g=l;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[ji])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=Kr(i.nextSibling),i===null)break}return null}function lM(i,o,l){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Kr(i.nextSibling),i===null))return null;return i}function sy(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function cM(i,o){var l=i.ownerDocument;if(i.data!=="$?"||l.readyState==="complete")o();else{var h=function(){o(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Kr(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return i}var oy=null;function v1(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}function _1(i,o,l){switch(o=Jd(l),i){case"html":if(i=o.documentElement,!i)throw Error(r(452));return i;case"head":if(i=o.head,!i)throw Error(r(453));return i;case"body":if(i=o.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function gu(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);li(i)}var Or=new Map,E1=new Set;function ef(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var as=Y.d;Y.d={f:uM,r:hM,D:dM,C:fM,L:mM,m:pM,X:yM,S:gM,M:vM};function uM(){var i=as.f(),o=qd();return i||o}function hM(i){var o=wr(i);o!==null&&o.tag===5&&o.type==="form"?jb(o):as.r(i)}var xl=typeof document>"u"?null:document;function b1(i,o,l){var h=xl;if(h&&typeof o=="string"&&o){var g=qt(o);g='link[rel="'+i+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),E1.has(g)||(E1.add(g),i={rel:i,crossOrigin:l,href:o},h.querySelector(g)===null&&(o=h.createElement("link"),_n(o,"link",i),Tt(o),h.head.appendChild(o)))}}function dM(i){as.D(i),b1("dns-prefetch",i,null)}function fM(i,o){as.C(i,o),b1("preconnect",i,o)}function mM(i,o,l){as.L(i,o,l);var h=xl;if(h&&i&&o){var g='link[rel="preload"][as="'+qt(o)+'"]';o==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+qt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+qt(l.imageSizes)+'"]')):g+='[href="'+qt(i)+'"]';var y=g;switch(o){case"style":y=Tl(i);break;case"script":y=Sl(i)}Or.has(y)||(i=p({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:i,as:o},l),Or.set(y,i),h.querySelector(g)!==null||o==="style"&&h.querySelector(yu(y))||o==="script"&&h.querySelector(vu(y))||(o=h.createElement("link"),_n(o,"link",i),Tt(o),h.head.appendChild(o)))}}function pM(i,o){as.m(i,o);var l=xl;if(l&&i){var h=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+qt(h)+'"][href="'+qt(i)+'"]',y=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Sl(i)}if(!Or.has(y)&&(i=p({rel:"modulepreload",href:i},o),Or.set(y,i),l.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(vu(y)))return}h=l.createElement("link"),_n(h,"link",i),Tt(h),l.head.appendChild(h)}}}function gM(i,o,l){as.S(i,o,l);var h=xl;if(h&&i){var g=pn(h).hoistableStyles,y=Tl(i);o=o||"default";var x=g.get(y);if(!x){var M={loading:0,preload:null};if(x=h.querySelector(yu(y)))M.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":o},l),(l=Or.get(y))&&ay(i,l);var q=x=h.createElement("link");Tt(q),_n(q,"link",i),q._p=new Promise(function(oe,he){q.onload=oe,q.onerror=he}),q.addEventListener("load",function(){M.loading|=1}),q.addEventListener("error",function(){M.loading|=2}),M.loading|=4,tf(x,o,h)}x={type:"stylesheet",instance:x,count:1,state:M},g.set(y,x)}}}function yM(i,o){as.X(i,o);var l=xl;if(l&&i){var h=pn(l).hoistableScripts,g=Sl(i),y=h.get(g);y||(y=l.querySelector(vu(g)),y||(i=p({src:i,async:!0},o),(o=Or.get(g))&&ly(i,o),y=l.createElement("script"),Tt(y),_n(y,"link",i),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(g,y))}}function vM(i,o){as.M(i,o);var l=xl;if(l&&i){var h=pn(l).hoistableScripts,g=Sl(i),y=h.get(g);y||(y=l.querySelector(vu(g)),y||(i=p({src:i,async:!0,type:"module"},o),(o=Or.get(g))&&ly(i,o),y=l.createElement("script"),Tt(y),_n(y,"link",i),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(g,y))}}function w1(i,o,l,h){var g=(g=ue.current)?ef(g):null;if(!g)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=Tl(l.href),l=pn(g).hoistableStyles,h=l.get(o),h||(h={type:"style",instance:null,count:0,state:null},l.set(o,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Tl(l.href);var y=pn(g).hoistableStyles,x=y.get(i);if(x||(g=g.ownerDocument||g,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,x),(y=g.querySelector(yu(i)))&&!y._p&&(x.instance=y,x.state.loading=5),Or.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Or.set(i,l),y||_M(g,i,l,x.state))),o&&h===null)throw Error(r(528,""));return x}if(o&&h!==null)throw Error(r(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Sl(l),l=pn(g).hoistableScripts,h=l.get(o),h||(h={type:"script",instance:null,count:0,state:null},l.set(o,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Tl(i){return'href="'+qt(i)+'"'}function yu(i){return'link[rel="stylesheet"]['+i+"]"}function x1(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function _M(i,o,l,h){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?h.loading=1:(o=i.createElement("link"),h.preload=o,o.addEventListener("load",function(){return h.loading|=1}),o.addEventListener("error",function(){return h.loading|=2}),_n(o,"link",l),Tt(o),i.head.appendChild(o))}function Sl(i){return'[src="'+qt(i)+'"]'}function vu(i){return"script[async]"+i}function T1(i,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var h=i.querySelector('style[data-href~="'+qt(l.href)+'"]');if(h)return o.instance=h,Tt(h),h;var g=p({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),Tt(h),_n(h,"style",g),tf(h,l.precedence,i),o.instance=h;case"stylesheet":g=Tl(l.href);var y=i.querySelector(yu(g));if(y)return o.state.loading|=4,o.instance=y,Tt(y),y;h=x1(l),(g=Or.get(g))&&ay(h,g),y=(i.ownerDocument||i).createElement("link"),Tt(y);var x=y;return x._p=new Promise(function(M,q){x.onload=M,x.onerror=q}),_n(y,"link",h),o.state.loading|=4,tf(y,l.precedence,i),o.instance=y;case"script":return y=Sl(l.src),(g=i.querySelector(vu(y)))?(o.instance=g,Tt(g),g):(h=l,(g=Or.get(y))&&(h=p({},l),ly(h,g)),i=i.ownerDocument||i,g=i.createElement("script"),Tt(g),_n(g,"link",h),i.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(h=o.instance,o.state.loading|=4,tf(h,l.precedence,i));return o.instance}function tf(i,o,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,y=g,x=0;x<h.length;x++){var M=h[x];if(M.dataset.precedence===o)y=M;else if(y!==g)break}y?y.parentNode.insertBefore(i,y.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(i,o.firstChild))}function ay(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function ly(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var nf=null;function S1(i,o,l){if(nf===null){var h=new Map,g=nf=new Map;g.set(l,h)}else g=nf,h=g.get(l),h||(h=new Map,g.set(l,h));if(h.has(i))return h;for(h.set(i,null),l=l.getElementsByTagName(i),g=0;g<l.length;g++){var y=l[g];if(!(y[ji]||y[Lt]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var x=y.getAttribute(o)||"";x=i+x;var M=h.get(x);M?M.push(y):h.set(x,[y])}}return h}function A1(i,o,l){i=i.ownerDocument||i,i.head.insertBefore(l,o==="title"?i.querySelector("head > title"):null)}function EM(i,o,l){if(l===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function C1(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var _u=null;function bM(){}function wM(i,o,l){if(_u===null)throw Error(r(475));var h=_u;if(o.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=Tl(l.href),y=i.querySelector(yu(g));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(h.count++,h=rf.bind(h),i.then(h,h)),o.state.loading|=4,o.instance=y,Tt(y);return}y=i.ownerDocument||i,l=x1(l),(g=Or.get(g))&&ay(l,g),y=y.createElement("link"),Tt(y);var x=y;x._p=new Promise(function(M,q){x.onload=M,x.onerror=q}),_n(y,"link",l),o.instance=y}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(h.count++,o=rf.bind(h),i.addEventListener("load",o),i.addEventListener("error",o))}}function xM(){if(_u===null)throw Error(r(475));var i=_u;return i.stylesheets&&i.count===0&&cy(i,i.stylesheets),0<i.count?function(o){var l=setTimeout(function(){if(i.stylesheets&&cy(i,i.stylesheets),i.unsuspend){var h=i.unsuspend;i.unsuspend=null,h()}},6e4);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(l)}}:null}function rf(){if(this.count--,this.count===0){if(this.stylesheets)cy(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var sf=null;function cy(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,sf=new Map,o.forEach(TM,i),sf=null,rf.call(i))}function TM(i,o){if(!(o.state.loading&4)){var l=sf.get(i);if(l)var h=l.get(null);else{l=new Map,sf.set(i,l);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var x=g[y];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(l.set(x.dataset.precedence,x),h=x)}h&&l.set(null,h)}g=o.instance,x=g.getAttribute("data-precedence"),y=l.get(x)||h,y===h&&l.set(null,g),l.set(x,g),this.count++,h=rf.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),y?y.parentNode.insertBefore(g,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),o.state.loading|=4}}var Eu={$$typeof:$,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function SM(i,o,l,h,g,y,x,M){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=er(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=er(0),this.hiddenUpdates=er(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function R1(i,o,l,h,g,y,x,M,q,oe,he,pe){return i=new SM(i,o,l,x,M,q,oe,pe),o=1,y===!0&&(o|=24),y=sr(3,null,null,o),i.current=y,y.stateNode=i,o=$p(),o.refCount++,i.pooledCache=o,o.refCount++,y.memoizedState={element:h,isDehydrated:l,cache:o},Kp(y),i}function I1(i){return i?(i=nl,i):nl}function N1(i,o,l,h,g,y){g=I1(g),h.context===null?h.context=g:h.pendingContext=g,h=Ns(o),h.payload={element:l},y=y===void 0?null:y,y!==null&&(h.callback=y),l=Ds(i,h,o),l!==null&&(ur(l,i,o),Qc(l,i,o))}function D1(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function uy(i,o){D1(i,o),(i=i.alternate)&&D1(i,o)}function k1(i){if(i.tag===13){var o=tl(i,67108864);o!==null&&ur(o,i,67108864),uy(i,67108864)}}var of=!0;function AM(i,o,l,h){var g=z.T;z.T=null;var y=Y.p;try{Y.p=2,hy(i,o,l,h)}finally{Y.p=y,z.T=g}}function CM(i,o,l,h){var g=z.T;z.T=null;var y=Y.p;try{Y.p=8,hy(i,o,l,h)}finally{Y.p=y,z.T=g}}function hy(i,o,l,h){if(of){var g=dy(h);if(g===null)Zg(i,o,h,af,l),P1(i,h);else if(IM(g,i,o,l,h))h.stopPropagation();else if(P1(i,h),o&4&&-1<RM.indexOf(i)){for(;g!==null;){var y=wr(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var x=on(y.pendingLanes);if(x!==0){var M=y;for(M.pendingLanes|=2,M.entangledLanes|=2;x;){var q=1<<31-xt(x);M.entanglements[1]|=q,x&=~q}xi(y),(ut&6)===0&&(Fd=ze()+500,fu(0))}}break;case 13:M=tl(y,2),M!==null&&ur(M,y,2),qd(),uy(y,2)}if(y=dy(h),y===null&&Zg(i,o,h,af,l),y===g)break;g=y}g!==null&&h.stopPropagation()}else Zg(i,o,h,null,l)}}function dy(i){return i=Ar(i),fy(i)}var af=null;function fy(i){if(af=null,i=br(i),i!==null){var o=a(i);if(o===null)i=null;else{var l=o.tag;if(l===13){if(i=c(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return af=i,null}function M1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(be()){case It:return 2;case Tn:return 8;case Wt:case Jn:return 32;case Mn:return 268435456;default:return 32}default:return 32}}var my=!1,$s=null,qs=null,Gs=null,bu=new Map,wu=new Map,Ys=[],RM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function P1(i,o){switch(i){case"focusin":case"focusout":$s=null;break;case"dragenter":case"dragleave":qs=null;break;case"mouseover":case"mouseout":Gs=null;break;case"pointerover":case"pointerout":bu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":wu.delete(o.pointerId)}}function xu(i,o,l,h,g,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[g]},o!==null&&(o=wr(o),o!==null&&k1(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function IM(i,o,l,h,g){switch(o){case"focusin":return $s=xu($s,i,o,l,h,g),!0;case"dragenter":return qs=xu(qs,i,o,l,h,g),!0;case"mouseover":return Gs=xu(Gs,i,o,l,h,g),!0;case"pointerover":var y=g.pointerId;return bu.set(y,xu(bu.get(y)||null,i,o,l,h,g)),!0;case"gotpointercapture":return y=g.pointerId,wu.set(y,xu(wu.get(y)||null,i,o,l,h,g)),!0}return!1}function O1(i){var o=br(i.target);if(o!==null){var l=a(o);if(l!==null){if(o=l.tag,o===13){if(o=c(l),o!==null){i.blockedOn=o,Va(i.priority,function(){if(l.tag===13){var h=cr();h=si(h);var g=tl(l,h);g!==null&&ur(g,l,h),uy(l,h)}});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function lf(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=dy(i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);Fi=h,l.target.dispatchEvent(h),Fi=null}else return o=wr(l),o!==null&&k1(o),i.blockedOn=l,!1;o.shift()}return!0}function V1(i,o,l){lf(i)&&l.delete(o)}function NM(){my=!1,$s!==null&&lf($s)&&($s=null),qs!==null&&lf(qs)&&(qs=null),Gs!==null&&lf(Gs)&&(Gs=null),bu.forEach(V1),wu.forEach(V1)}function cf(i,o){i.blockedOn===o&&(i.blockedOn=null,my||(my=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,NM)))}var uf=null;function L1(i){uf!==i&&(uf=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){uf===i&&(uf=null);for(var o=0;o<i.length;o+=3){var l=i[o],h=i[o+1],g=i[o+2];if(typeof h!="function"){if(fy(h||l)===null)continue;break}var y=wr(l);y!==null&&(i.splice(o,3),o-=3,fg(y,{pending:!0,data:g,method:l.method,action:h},h,g))}}))}function Tu(i){function o(q){return cf(q,i)}$s!==null&&cf($s,i),qs!==null&&cf(qs,i),Gs!==null&&cf(Gs,i),bu.forEach(o),wu.forEach(o);for(var l=0;l<Ys.length;l++){var h=Ys[l];h.blockedOn===i&&(h.blockedOn=null)}for(;0<Ys.length&&(l=Ys[0],l.blockedOn===null);)O1(l),l.blockedOn===null&&Ys.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var g=l[h],y=l[h+1],x=g[Nt]||null;if(typeof y=="function")x||L1(l);else if(x){var M=null;if(y&&y.hasAttribute("formAction")){if(g=y,x=y[Nt]||null)M=x.formAction;else if(fy(g)!==null)continue}else M=x.action;typeof M=="function"?l[h+1]=M:(l.splice(h,3),h-=3),L1(l)}}}function py(i){this._internalRoot=i}hf.prototype.render=py.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(r(409));var l=o.current,h=cr();N1(l,h,i,o,null,null)},hf.prototype.unmount=py.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;N1(i.current,2,null,i,null,null),qd(),o[$n]=null}};function hf(i){this._internalRoot=i}hf.prototype.unstable_scheduleHydration=function(i){if(i){var o=oi();i={blockedOn:null,target:i,priority:o};for(var l=0;l<Ys.length&&o!==0&&o<Ys[l].priority;l++);Ys.splice(l,0,i),l===0&&O1(i)}};var U1=e.version;if(U1!=="19.1.0")throw Error(r(527,U1,"19.1.0"));Y.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=d(o),i=i!==null?f(i):null,i=i===null?null:i.stateNode,i};var DM={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var df=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!df.isDisabled&&df.supportsFiber)try{at=df.inject(DM),Ge=df}catch{}}return Au.createRoot=function(i,o){if(!s(i))throw Error(r(299));var l=!1,h="",g=ew,y=tw,x=nw,M=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(x=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(M=o.unstable_transitionCallbacks)),o=R1(i,1,!1,null,null,l,h,g,y,x,M,null),i[$n]=o.current,Wg(i),new py(o)},Au.hydrateRoot=function(i,o,l){if(!s(i))throw Error(r(299));var h=!1,g="",y=ew,x=tw,M=nw,q=null,oe=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(M=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(q=l.unstable_transitionCallbacks),l.formState!==void 0&&(oe=l.formState)),o=R1(i,1,!0,o,l??null,h,g,y,x,M,q,oe),o.context=I1(null),l=o.current,h=cr(),h=si(h),g=Ns(h),g.callback=null,Ds(l,g,h),l=h,o.current.lanes=l,_r(o,l),xi(o),i[$n]=o.current,Wg(i),new hf(o)},Au.version="19.1.0",Au}var K1;function HM(){if(K1)return vy.exports;K1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),vy.exports=BM(),vy.exports}var FM=HM();function Fn(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=Fn(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var wy={exports:{}},xy={},Ty={exports:{}},Sy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X1;function $M(){if(X1)return Sy;X1=1;var t=Nh();function e(v,_){return v===_&&(v!==0||1/v===1/_)||v!==v&&_!==_}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,a=t.useLayoutEffect,c=t.useDebugValue;function u(v,_){var b=_(),T=r({inst:{value:b,getSnapshot:_}}),R=T[0].inst,I=T[1];return a(function(){R.value=b,R.getSnapshot=_,d(R)&&I({inst:R})},[v,b,_]),s(function(){return d(R)&&I({inst:R}),v(function(){d(R)&&I({inst:R})})},[v]),c(b),b}function d(v){var _=v.getSnapshot;v=v.value;try{var b=_();return!n(v,b)}catch{return!0}}function f(v,_){return _()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return Sy.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,Sy}var Q1;function qM(){return Q1||(Q1=1,Ty.exports=$M()),Ty.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W1;function GM(){if(W1)return xy;W1=1;var t=Nh(),e=qM();function n(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,a=t.useRef,c=t.useEffect,u=t.useMemo,d=t.useDebugValue;return xy.useSyncExternalStoreWithSelector=function(f,p,v,_,b){var T=a(null);if(T.current===null){var R={hasValue:!1,value:null};T.current=R}else R=T.current;T=u(function(){function N(K){if(!L){if(L=!0,$=K,K=_(K),b!==void 0&&R.hasValue){var k=R.value;if(b(k,K))return H=k}return H=K}if(k=H,r($,K))return k;var S=_(K);return b!==void 0&&b(k,S)?($=K,k):($=K,H=S)}var L=!1,$,H,G=v===void 0?null:v;return[function(){return N(p())},G===null?void 0:function(){return N(G())}]},[p,v,_,b]);var I=s(f,T[0],T[1]);return c(function(){R.hasValue=!0,R.value=I},[I]),d(I),I},xy}var Z1;function YM(){return Z1||(Z1=1,wy.exports=GM()),wy.exports}var KM=YM();const XM=ZA(KM),QM={},J1=t=>{let e;const n=new Set,r=(p,v)=>{const _=typeof p=="function"?p(e):p;if(!Object.is(_,e)){const b=e;e=v??(typeof _!="object"||_===null)?_:Object.assign({},e,_),n.forEach(T=>T(e,b))}},s=()=>e,d={setState:r,getState:s,getInitialState:()=>f,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(QM?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},f=e=t(r,s,d);return d},WM=t=>t?J1(t):J1,{useDebugValue:ZM}=de,{useSyncExternalStoreWithSelector:JM}=XM,e4=t=>t;function e2(t,e=e4,n){const r=JM(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return ZM(r),r}const ex=(t,e)=>{const n=WM(t),r=(s,a=e)=>e2(n,s,a);return Object.assign(r,n),r},t4=(t,e)=>t?ex(t,e):ex;function Dn(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,s]of t)if(!Object.is(s,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var n4={value:()=>{}};function Om(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Pf(n)}function Pf(t){this._=t}function r4(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Pf.prototype=Om.prototype={constructor:Pf,on:function(t,e){var n=this._,r=r4(t+"",n),s,a=-1,c=r.length;if(arguments.length<2){for(;++a<c;)if((s=(t=r[a]).type)&&(s=i4(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<c;)if(s=(t=r[a]).type)n[s]=tx(n[s],t.name,e);else if(e==null)for(s in n)n[s]=tx(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Pf(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,a;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,s=a.length;r<s;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,a=r.length;s<a;++s)r[s].value.apply(e,n)}};function i4(t,e){for(var n=0,r=t.length,s;n<r;++n)if((s=t[n]).name===e)return s.value}function tx(t,e,n){for(var r=0,s=t.length;r<s;++r)if(t[r].name===e){t[r]=n4,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var m0="http://www.w3.org/1999/xhtml";const nx={svg:"http://www.w3.org/2000/svg",xhtml:m0,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Vm(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),nx.hasOwnProperty(e)?{space:nx[e],local:t}:t}function s4(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===m0&&e.documentElement.namespaceURI===m0?e.createElement(t):e.createElementNS(n,t)}}function o4(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function t2(t){var e=Vm(t);return(e.local?o4:s4)(e)}function a4(){}function Av(t){return t==null?a4:function(){return this.querySelector(t)}}function l4(t){typeof t!="function"&&(t=Av(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],c=a.length,u=r[s]=new Array(c),d,f,p=0;p<c;++p)(d=a[p])&&(f=t.call(d,d.__data__,p,a))&&("__data__"in d&&(f.__data__=d.__data__),u[p]=f);return new yr(r,this._parents)}function c4(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function u4(){return[]}function n2(t){return t==null?u4:function(){return this.querySelectorAll(t)}}function h4(t){return function(){return c4(t.apply(this,arguments))}}function d4(t){typeof t=="function"?t=h4(t):t=n2(t);for(var e=this._groups,n=e.length,r=[],s=[],a=0;a<n;++a)for(var c=e[a],u=c.length,d,f=0;f<u;++f)(d=c[f])&&(r.push(t.call(d,d.__data__,f,c)),s.push(d));return new yr(r,s)}function r2(t){return function(){return this.matches(t)}}function i2(t){return function(e){return e.matches(t)}}var f4=Array.prototype.find;function m4(t){return function(){return f4.call(this.children,t)}}function p4(){return this.firstElementChild}function g4(t){return this.select(t==null?p4:m4(typeof t=="function"?t:i2(t)))}var y4=Array.prototype.filter;function v4(){return Array.from(this.children)}function _4(t){return function(){return y4.call(this.children,t)}}function E4(t){return this.selectAll(t==null?v4:_4(typeof t=="function"?t:i2(t)))}function b4(t){typeof t!="function"&&(t=r2(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],c=a.length,u=r[s]=[],d,f=0;f<c;++f)(d=a[f])&&t.call(d,d.__data__,f,a)&&u.push(d);return new yr(r,this._parents)}function s2(t){return new Array(t.length)}function w4(){return new yr(this._enter||this._groups.map(s2),this._parents)}function Jf(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Jf.prototype={constructor:Jf,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function x4(t){return function(){return t}}function T4(t,e,n,r,s,a){for(var c=0,u,d=e.length,f=a.length;c<f;++c)(u=e[c])?(u.__data__=a[c],r[c]=u):n[c]=new Jf(t,a[c]);for(;c<d;++c)(u=e[c])&&(s[c]=u)}function S4(t,e,n,r,s,a,c){var u,d,f=new Map,p=e.length,v=a.length,_=new Array(p),b;for(u=0;u<p;++u)(d=e[u])&&(_[u]=b=c.call(d,d.__data__,u,e)+"",f.has(b)?s[u]=d:f.set(b,d));for(u=0;u<v;++u)b=c.call(t,a[u],u,a)+"",(d=f.get(b))?(r[u]=d,d.__data__=a[u],f.delete(b)):n[u]=new Jf(t,a[u]);for(u=0;u<p;++u)(d=e[u])&&f.get(_[u])===d&&(s[u]=d)}function A4(t){return t.__data__}function C4(t,e){if(!arguments.length)return Array.from(this,A4);var n=e?S4:T4,r=this._parents,s=this._groups;typeof t!="function"&&(t=x4(t));for(var a=s.length,c=new Array(a),u=new Array(a),d=new Array(a),f=0;f<a;++f){var p=r[f],v=s[f],_=v.length,b=R4(t.call(p,p&&p.__data__,f,r)),T=b.length,R=u[f]=new Array(T),I=c[f]=new Array(T),N=d[f]=new Array(_);n(p,v,R,I,N,b,e);for(var L=0,$=0,H,G;L<T;++L)if(H=R[L]){for(L>=$&&($=L+1);!(G=I[$])&&++$<T;);H._next=G||null}}return c=new yr(c,r),c._enter=u,c._exit=d,c}function R4(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function I4(){return new yr(this._exit||this._groups.map(s2),this._parents)}function N4(t,e,n){var r=this.enter(),s=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?a.remove():n(a),r&&s?r.merge(s).order():s}function D4(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,s=n.length,a=r.length,c=Math.min(s,a),u=new Array(s),d=0;d<c;++d)for(var f=n[d],p=r[d],v=f.length,_=u[d]=new Array(v),b,T=0;T<v;++T)(b=f[T]||p[T])&&(_[T]=b);for(;d<s;++d)u[d]=n[d];return new yr(u,this._parents)}function k4(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],s=r.length-1,a=r[s],c;--s>=0;)(c=r[s])&&(a&&c.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(c,a),a=c);return this}function M4(t){t||(t=P4);function e(v,_){return v&&_?t(v.__data__,_.__data__):!v-!_}for(var n=this._groups,r=n.length,s=new Array(r),a=0;a<r;++a){for(var c=n[a],u=c.length,d=s[a]=new Array(u),f,p=0;p<u;++p)(f=c[p])&&(d[p]=f);d.sort(e)}return new yr(s,this._parents).order()}function P4(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function O4(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function V4(){return Array.from(this)}function L4(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,a=r.length;s<a;++s){var c=r[s];if(c)return c}return null}function U4(){let t=0;for(const e of this)++t;return t}function z4(){return!this.node()}function j4(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],a=0,c=s.length,u;a<c;++a)(u=s[a])&&t.call(u,u.__data__,a,s);return this}function B4(t){return function(){this.removeAttribute(t)}}function H4(t){return function(){this.removeAttributeNS(t.space,t.local)}}function F4(t,e){return function(){this.setAttribute(t,e)}}function $4(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function q4(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function G4(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Y4(t,e){var n=Vm(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?H4:B4:typeof e=="function"?n.local?G4:q4:n.local?$4:F4)(n,e))}function o2(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function K4(t){return function(){this.style.removeProperty(t)}}function X4(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Q4(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function W4(t,e,n){return arguments.length>1?this.each((e==null?K4:typeof e=="function"?Q4:X4)(t,e,n??"")):tc(this.node(),t)}function tc(t,e){return t.style.getPropertyValue(e)||o2(t).getComputedStyle(t,null).getPropertyValue(e)}function Z4(t){return function(){delete this[t]}}function J4(t,e){return function(){this[t]=e}}function eP(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function tP(t,e){return arguments.length>1?this.each((e==null?Z4:typeof e=="function"?eP:J4)(t,e)):this.node()[t]}function a2(t){return t.trim().split(/^|\s+/)}function Cv(t){return t.classList||new l2(t)}function l2(t){this._node=t,this._names=a2(t.getAttribute("class")||"")}l2.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function c2(t,e){for(var n=Cv(t),r=-1,s=e.length;++r<s;)n.add(e[r])}function u2(t,e){for(var n=Cv(t),r=-1,s=e.length;++r<s;)n.remove(e[r])}function nP(t){return function(){c2(this,t)}}function rP(t){return function(){u2(this,t)}}function iP(t,e){return function(){(e.apply(this,arguments)?c2:u2)(this,t)}}function sP(t,e){var n=a2(t+"");if(arguments.length<2){for(var r=Cv(this.node()),s=-1,a=n.length;++s<a;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?iP:e?nP:rP)(n,e))}function oP(){this.textContent=""}function aP(t){return function(){this.textContent=t}}function lP(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function cP(t){return arguments.length?this.each(t==null?oP:(typeof t=="function"?lP:aP)(t)):this.node().textContent}function uP(){this.innerHTML=""}function hP(t){return function(){this.innerHTML=t}}function dP(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function fP(t){return arguments.length?this.each(t==null?uP:(typeof t=="function"?dP:hP)(t)):this.node().innerHTML}function mP(){this.nextSibling&&this.parentNode.appendChild(this)}function pP(){return this.each(mP)}function gP(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yP(){return this.each(gP)}function vP(t){var e=typeof t=="function"?t:t2(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function _P(){return null}function EP(t,e){var n=typeof t=="function"?t:t2(t),r=e==null?_P:typeof e=="function"?e:Av(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function bP(){var t=this.parentNode;t&&t.removeChild(this)}function wP(){return this.each(bP)}function xP(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function TP(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function SP(t){return this.select(t?TP:xP)}function AP(t){return arguments.length?this.property("__data__",t):this.node().__data__}function CP(t){return function(e){t.call(this,e,this.__data__)}}function RP(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function IP(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,s=e.length,a;n<s;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function NP(t,e,n){return function(){var r=this.__on,s,a=CP(e);if(r){for(var c=0,u=r.length;c<u;++c)if((s=r[c]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=n),s.value=e;return}}this.addEventListener(t.type,a,n),s={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(s):this.__on=[s]}}function DP(t,e,n){var r=RP(t+""),s,a=r.length,c;if(arguments.length<2){var u=this.node().__on;if(u){for(var d=0,f=u.length,p;d<f;++d)for(s=0,p=u[d];s<a;++s)if((c=r[s]).type===p.type&&c.name===p.name)return p.value}return}for(u=e?NP:IP,s=0;s<a;++s)this.each(u(r[s],e,n));return this}function h2(t,e,n){var r=o2(t),s=r.CustomEvent;typeof s=="function"?s=new s(e,n):(s=r.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function kP(t,e){return function(){return h2(this,t,e)}}function MP(t,e){return function(){return h2(this,t,e.apply(this,arguments))}}function PP(t,e){return this.each((typeof e=="function"?MP:kP)(t,e))}function*OP(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,a=r.length,c;s<a;++s)(c=r[s])&&(yield c)}var d2=[null];function yr(t,e){this._groups=t,this._parents=e}function Dh(){return new yr([[document.documentElement]],d2)}function VP(){return this}yr.prototype=Dh.prototype={constructor:yr,select:l4,selectAll:d4,selectChild:g4,selectChildren:E4,filter:b4,data:C4,enter:w4,exit:I4,join:N4,merge:D4,selection:VP,order:k4,sort:M4,call:O4,nodes:V4,node:L4,size:U4,empty:z4,each:j4,attr:Y4,style:W4,property:tP,classed:sP,text:cP,html:fP,raise:pP,lower:yP,append:vP,insert:EP,remove:wP,clone:SP,datum:AP,on:DP,dispatch:PP,[Symbol.iterator]:OP};function Qr(t){return typeof t=="string"?new yr([[document.querySelector(t)]],[document.documentElement]):new yr([[t]],d2)}function LP(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Ti(t,e){if(t=LP(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const UP={passive:!1},ih={capture:!0,passive:!1};function Ay(t){t.stopImmediatePropagation()}function ql(t){t.preventDefault(),t.stopImmediatePropagation()}function f2(t){var e=t.document.documentElement,n=Qr(t).on("dragstart.drag",ql,ih);"onselectstart"in e?n.on("selectstart.drag",ql,ih):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function m2(t,e){var n=t.document.documentElement,r=Qr(t).on("dragstart.drag",null);e&&(r.on("click.drag",ql,ih),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ff=t=>()=>t;function p0(t,{sourceEvent:e,subject:n,target:r,identifier:s,active:a,x:c,y:u,dx:d,dy:f,dispatch:p}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:p}})}p0.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function zP(t){return!t.ctrlKey&&!t.button}function jP(){return this.parentNode}function BP(t,e){return e??{x:t.x,y:t.y}}function HP(){return navigator.maxTouchPoints||"ontouchstart"in this}function FP(){var t=zP,e=jP,n=BP,r=HP,s={},a=Om("start","drag","end"),c=0,u,d,f,p,v=0;function _(H){H.on("mousedown.drag",b).filter(r).on("touchstart.drag",I).on("touchmove.drag",N,UP).on("touchend.drag touchcancel.drag",L).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(H,G){if(!(p||!t.call(this,H,G))){var K=$(this,e.call(this,H,G),H,G,"mouse");K&&(Qr(H.view).on("mousemove.drag",T,ih).on("mouseup.drag",R,ih),f2(H.view),Ay(H),f=!1,u=H.clientX,d=H.clientY,K("start",H))}}function T(H){if(ql(H),!f){var G=H.clientX-u,K=H.clientY-d;f=G*G+K*K>v}s.mouse("drag",H)}function R(H){Qr(H.view).on("mousemove.drag mouseup.drag",null),m2(H.view,f),ql(H),s.mouse("end",H)}function I(H,G){if(t.call(this,H,G)){var K=H.changedTouches,k=e.call(this,H,G),S=K.length,A,V;for(A=0;A<S;++A)(V=$(this,k,H,G,K[A].identifier,K[A]))&&(Ay(H),V("start",H,K[A]))}}function N(H){var G=H.changedTouches,K=G.length,k,S;for(k=0;k<K;++k)(S=s[G[k].identifier])&&(ql(H),S("drag",H,G[k]))}function L(H){var G=H.changedTouches,K=G.length,k,S;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),k=0;k<K;++k)(S=s[G[k].identifier])&&(Ay(H),S("end",H,G[k]))}function $(H,G,K,k,S,A){var V=a.copy(),B=Ti(A||K,G),F,D,P;if((P=n.call(H,new p0("beforestart",{sourceEvent:K,target:_,identifier:S,active:c,x:B[0],y:B[1],dx:0,dy:0,dispatch:V}),k))!=null)return F=P.x-B[0]||0,D=P.y-B[1]||0,function X(z,Y,te){var J=B,U;switch(z){case"start":s[S]=X,U=c++;break;case"end":delete s[S],--c;case"drag":B=Ti(te||Y,G),U=c;break}V.call(z,H,new p0(z,{sourceEvent:Y,subject:P,target:_,identifier:S,active:U,x:B[0]+F,y:B[1]+D,dx:B[0]-J[0],dy:B[1]-J[1],dispatch:V}),k)}}return _.filter=function(H){return arguments.length?(t=typeof H=="function"?H:ff(!!H),_):t},_.container=function(H){return arguments.length?(e=typeof H=="function"?H:ff(H),_):e},_.subject=function(H){return arguments.length?(n=typeof H=="function"?H:ff(H),_):n},_.touchable=function(H){return arguments.length?(r=typeof H=="function"?H:ff(!!H),_):r},_.on=function(){var H=a.on.apply(a,arguments);return H===a?_:H},_.clickDistance=function(H){return arguments.length?(v=(H=+H)*H,_):Math.sqrt(v)},_}function Rv(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function p2(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function kh(){}var sh=.7,em=1/sh,Gl="\\s*([+-]?\\d+)\\s*",oh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ai="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$P=/^#([0-9a-f]{3,8})$/,qP=new RegExp(`^rgb\\(${Gl},${Gl},${Gl}\\)$`),GP=new RegExp(`^rgb\\(${Ai},${Ai},${Ai}\\)$`),YP=new RegExp(`^rgba\\(${Gl},${Gl},${Gl},${oh}\\)$`),KP=new RegExp(`^rgba\\(${Ai},${Ai},${Ai},${oh}\\)$`),XP=new RegExp(`^hsl\\(${oh},${Ai},${Ai}\\)$`),QP=new RegExp(`^hsla\\(${oh},${Ai},${Ai},${oh}\\)$`),rx={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Rv(kh,ah,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ix,formatHex:ix,formatHex8:WP,formatHsl:ZP,formatRgb:sx,toString:sx});function ix(){return this.rgb().formatHex()}function WP(){return this.rgb().formatHex8()}function ZP(){return g2(this).formatHsl()}function sx(){return this.rgb().formatRgb()}function ah(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=$P.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ox(e):n===3?new Qn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?mf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?mf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=qP.exec(t))?new Qn(e[1],e[2],e[3],1):(e=GP.exec(t))?new Qn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=YP.exec(t))?mf(e[1],e[2],e[3],e[4]):(e=KP.exec(t))?mf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=XP.exec(t))?cx(e[1],e[2]/100,e[3]/100,1):(e=QP.exec(t))?cx(e[1],e[2]/100,e[3]/100,e[4]):rx.hasOwnProperty(t)?ox(rx[t]):t==="transparent"?new Qn(NaN,NaN,NaN,0):null}function ox(t){return new Qn(t>>16&255,t>>8&255,t&255,1)}function mf(t,e,n,r){return r<=0&&(t=e=n=NaN),new Qn(t,e,n,r)}function JP(t){return t instanceof kh||(t=ah(t)),t?(t=t.rgb(),new Qn(t.r,t.g,t.b,t.opacity)):new Qn}function g0(t,e,n,r){return arguments.length===1?JP(t):new Qn(t,e,n,r??1)}function Qn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Rv(Qn,g0,p2(kh,{brighter(t){return t=t==null?em:Math.pow(em,t),new Qn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?sh:Math.pow(sh,t),new Qn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Qn(ya(this.r),ya(this.g),ya(this.b),tm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ax,formatHex:ax,formatHex8:e3,formatRgb:lx,toString:lx}));function ax(){return`#${da(this.r)}${da(this.g)}${da(this.b)}`}function e3(){return`#${da(this.r)}${da(this.g)}${da(this.b)}${da((isNaN(this.opacity)?1:this.opacity)*255)}`}function lx(){const t=tm(this.opacity);return`${t===1?"rgb(":"rgba("}${ya(this.r)}, ${ya(this.g)}, ${ya(this.b)}${t===1?")":`, ${t})`}`}function tm(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ya(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function da(t){return t=ya(t),(t<16?"0":"")+t.toString(16)}function cx(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Wr(t,e,n,r)}function g2(t){if(t instanceof Wr)return new Wr(t.h,t.s,t.l,t.opacity);if(t instanceof kh||(t=ah(t)),!t)return new Wr;if(t instanceof Wr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),a=Math.max(e,n,r),c=NaN,u=a-s,d=(a+s)/2;return u?(e===a?c=(n-r)/u+(n<r)*6:n===a?c=(r-e)/u+2:c=(e-n)/u+4,u/=d<.5?a+s:2-a-s,c*=60):u=d>0&&d<1?0:c,new Wr(c,u,d,t.opacity)}function t3(t,e,n,r){return arguments.length===1?g2(t):new Wr(t,e,n,r??1)}function Wr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Rv(Wr,t3,p2(kh,{brighter(t){return t=t==null?em:Math.pow(em,t),new Wr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?sh:Math.pow(sh,t),new Wr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new Qn(Cy(t>=240?t-240:t+120,s,r),Cy(t,s,r),Cy(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new Wr(ux(this.h),pf(this.s),pf(this.l),tm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=tm(this.opacity);return`${t===1?"hsl(":"hsla("}${ux(this.h)}, ${pf(this.s)*100}%, ${pf(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ux(t){return t=(t||0)%360,t<0?t+360:t}function pf(t){return Math.max(0,Math.min(1,t||0))}function Cy(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Iv=t=>()=>t;function y2(t,e){return function(n){return t+n*e}}function n3(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function _Y(t,e){var n=e-t;return n?y2(t,n>180||n<-180?n-360*Math.round(n/360):n):Iv(isNaN(t)?e:t)}function r3(t){return(t=+t)==1?v2:function(e,n){return n-e?n3(e,n,t):Iv(isNaN(e)?n:e)}}function v2(t,e){var n=e-t;return n?y2(t,n):Iv(isNaN(t)?e:t)}const hx=function t(e){var n=r3(e);function r(s,a){var c=n((s=g0(s)).r,(a=g0(a)).r),u=n(s.g,a.g),d=n(s.b,a.b),f=v2(s.opacity,a.opacity);return function(p){return s.r=c(p),s.g=u(p),s.b=d(p),s.opacity=f(p),s+""}}return r.gamma=t,r}(1);function Zs(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var y0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ry=new RegExp(y0.source,"g");function i3(t){return function(){return t}}function s3(t){return function(e){return t(e)+""}}function o3(t,e){var n=y0.lastIndex=Ry.lastIndex=0,r,s,a,c=-1,u=[],d=[];for(t=t+"",e=e+"";(r=y0.exec(t))&&(s=Ry.exec(e));)(a=s.index)>n&&(a=e.slice(n,a),u[c]?u[c]+=a:u[++c]=a),(r=r[0])===(s=s[0])?u[c]?u[c]+=s:u[++c]=s:(u[++c]=null,d.push({i:c,x:Zs(r,s)})),n=Ry.lastIndex;return n<e.length&&(a=e.slice(n),u[c]?u[c]+=a:u[++c]=a),u.length<2?d[0]?s3(d[0].x):i3(e):(e=d.length,function(f){for(var p=0,v;p<e;++p)u[(v=d[p]).i]=v.x(f);return u.join("")})}var dx=180/Math.PI,v0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function _2(t,e,n,r,s,a){var c,u,d;return(c=Math.sqrt(t*t+e*e))&&(t/=c,e/=c),(d=t*n+e*r)&&(n-=t*d,r-=e*d),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,d/=u),t*r<e*n&&(t=-t,e=-e,d=-d,c=-c),{translateX:s,translateY:a,rotate:Math.atan2(e,t)*dx,skewX:Math.atan(d)*dx,scaleX:c,scaleY:u}}var gf;function a3(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?v0:_2(e.a,e.b,e.c,e.d,e.e,e.f)}function l3(t){return t==null||(gf||(gf=document.createElementNS("http://www.w3.org/2000/svg","g")),gf.setAttribute("transform",t),!(t=gf.transform.baseVal.consolidate()))?v0:(t=t.matrix,_2(t.a,t.b,t.c,t.d,t.e,t.f))}function E2(t,e,n,r){function s(f){return f.length?f.pop()+" ":""}function a(f,p,v,_,b,T){if(f!==v||p!==_){var R=b.push("translate(",null,e,null,n);T.push({i:R-4,x:Zs(f,v)},{i:R-2,x:Zs(p,_)})}else(v||_)&&b.push("translate("+v+e+_+n)}function c(f,p,v,_){f!==p?(f-p>180?p+=360:p-f>180&&(f+=360),_.push({i:v.push(s(v)+"rotate(",null,r)-2,x:Zs(f,p)})):p&&v.push(s(v)+"rotate("+p+r)}function u(f,p,v,_){f!==p?_.push({i:v.push(s(v)+"skewX(",null,r)-2,x:Zs(f,p)}):p&&v.push(s(v)+"skewX("+p+r)}function d(f,p,v,_,b,T){if(f!==v||p!==_){var R=b.push(s(b)+"scale(",null,",",null,")");T.push({i:R-4,x:Zs(f,v)},{i:R-2,x:Zs(p,_)})}else(v!==1||_!==1)&&b.push(s(b)+"scale("+v+","+_+")")}return function(f,p){var v=[],_=[];return f=t(f),p=t(p),a(f.translateX,f.translateY,p.translateX,p.translateY,v,_),c(f.rotate,p.rotate,v,_),u(f.skewX,p.skewX,v,_),d(f.scaleX,f.scaleY,p.scaleX,p.scaleY,v,_),f=p=null,function(b){for(var T=-1,R=_.length,I;++T<R;)v[(I=_[T]).i]=I.x(b);return v.join("")}}}var c3=E2(a3,"px, ","px)","deg)"),u3=E2(l3,", ",")",")"),h3=1e-12;function fx(t){return((t=Math.exp(t))+1/t)/2}function d3(t){return((t=Math.exp(t))-1/t)/2}function f3(t){return((t=Math.exp(2*t))-1)/(t+1)}const m3=function t(e,n,r){function s(a,c){var u=a[0],d=a[1],f=a[2],p=c[0],v=c[1],_=c[2],b=p-u,T=v-d,R=b*b+T*T,I,N;if(R<h3)N=Math.log(_/f)/e,I=function(k){return[u+k*b,d+k*T,f*Math.exp(e*k*N)]};else{var L=Math.sqrt(R),$=(_*_-f*f+r*R)/(2*f*n*L),H=(_*_-f*f-r*R)/(2*_*n*L),G=Math.log(Math.sqrt($*$+1)-$),K=Math.log(Math.sqrt(H*H+1)-H);N=(K-G)/e,I=function(k){var S=k*N,A=fx(G),V=f/(n*L)*(A*f3(e*S+G)-d3(G));return[u+V*b,d+V*T,f*A/fx(e*S+G)]}}return I.duration=N*1e3*e/Math.SQRT2,I}return s.rho=function(a){var c=Math.max(.001,+a),u=c*c,d=u*u;return t(c,u,d)},s}(Math.SQRT2,2,4);var nc=0,Ou=0,Cu=0,b2=1e3,nm,Vu,rm=0,ba=0,Lm=0,lh=typeof performance=="object"&&performance.now?performance:Date,w2=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Nv(){return ba||(w2(p3),ba=lh.now()+Lm)}function p3(){ba=0}function im(){this._call=this._time=this._next=null}im.prototype=x2.prototype={constructor:im,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Nv():+n)+(e==null?0:+e),!this._next&&Vu!==this&&(Vu?Vu._next=this:nm=this,Vu=this),this._call=t,this._time=n,_0()},stop:function(){this._call&&(this._call=null,this._time=1/0,_0())}};function x2(t,e,n){var r=new im;return r.restart(t,e,n),r}function g3(){Nv(),++nc;for(var t=nm,e;t;)(e=ba-t._time)>=0&&t._call.call(void 0,e),t=t._next;--nc}function mx(){ba=(rm=lh.now())+Lm,nc=Ou=0;try{g3()}finally{nc=0,v3(),ba=0}}function y3(){var t=lh.now(),e=t-rm;e>b2&&(Lm-=e,rm=t)}function v3(){for(var t,e=nm,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:nm=n);Vu=t,_0(r)}function _0(t){if(!nc){Ou&&(Ou=clearTimeout(Ou));var e=t-ba;e>24?(t<1/0&&(Ou=setTimeout(mx,t-lh.now()-Lm)),Cu&&(Cu=clearInterval(Cu))):(Cu||(rm=lh.now(),Cu=setInterval(y3,b2)),nc=1,w2(mx))}}function px(t,e,n){var r=new im;return e=e==null?0:+e,r.restart(s=>{r.stop(),t(s+e)},e,n),r}var _3=Om("start","end","cancel","interrupt"),E3=[],T2=0,gx=1,E0=2,Of=3,yx=4,b0=5,Vf=6;function Um(t,e,n,r,s,a){var c=t.__transition;if(!c)t.__transition={};else if(n in c)return;b3(t,n,{name:e,index:r,group:s,on:_3,tween:E3,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:T2})}function Dv(t,e){var n=ri(t,e);if(n.state>T2)throw new Error("too late; already scheduled");return n}function Vi(t,e){var n=ri(t,e);if(n.state>Of)throw new Error("too late; already running");return n}function ri(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function b3(t,e,n){var r=t.__transition,s;r[e]=n,n.timer=x2(a,0,n.time);function a(f){n.state=gx,n.timer.restart(c,n.delay,n.time),n.delay<=f&&c(f-n.delay)}function c(f){var p,v,_,b;if(n.state!==gx)return d();for(p in r)if(b=r[p],b.name===n.name){if(b.state===Of)return px(c);b.state===yx?(b.state=Vf,b.timer.stop(),b.on.call("interrupt",t,t.__data__,b.index,b.group),delete r[p]):+p<e&&(b.state=Vf,b.timer.stop(),b.on.call("cancel",t,t.__data__,b.index,b.group),delete r[p])}if(px(function(){n.state===Of&&(n.state=yx,n.timer.restart(u,n.delay,n.time),u(f))}),n.state=E0,n.on.call("start",t,t.__data__,n.index,n.group),n.state===E0){for(n.state=Of,s=new Array(_=n.tween.length),p=0,v=-1;p<_;++p)(b=n.tween[p].value.call(t,t.__data__,n.index,n.group))&&(s[++v]=b);s.length=v+1}}function u(f){for(var p=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(d),n.state=b0,1),v=-1,_=s.length;++v<_;)s[v].call(t,p);n.state===b0&&(n.on.call("end",t,t.__data__,n.index,n.group),d())}function d(){n.state=Vf,n.timer.stop(),delete r[e];for(var f in r)return;delete t.__transition}}function Lf(t,e){var n=t.__transition,r,s,a=!0,c;if(n){e=e==null?null:e+"";for(c in n){if((r=n[c]).name!==e){a=!1;continue}s=r.state>E0&&r.state<b0,r.state=Vf,r.timer.stop(),r.on.call(s?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[c]}a&&delete t.__transition}}function w3(t){return this.each(function(){Lf(this,t)})}function x3(t,e){var n,r;return function(){var s=Vi(this,t),a=s.tween;if(a!==n){r=n=a;for(var c=0,u=r.length;c<u;++c)if(r[c].name===e){r=r.slice(),r.splice(c,1);break}}s.tween=r}}function T3(t,e,n){var r,s;if(typeof n!="function")throw new Error;return function(){var a=Vi(this,t),c=a.tween;if(c!==r){s=(r=c).slice();for(var u={name:e,value:n},d=0,f=s.length;d<f;++d)if(s[d].name===e){s[d]=u;break}d===f&&s.push(u)}a.tween=s}}function S3(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=ri(this.node(),n).tween,s=0,a=r.length,c;s<a;++s)if((c=r[s]).name===t)return c.value;return null}return this.each((e==null?x3:T3)(n,t,e))}function kv(t,e,n){var r=t._id;return t.each(function(){var s=Vi(this,r);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return ri(s,r).value[e]}}function S2(t,e){var n;return(typeof e=="number"?Zs:e instanceof ah?hx:(n=ah(e))?(e=n,hx):o3)(t,e)}function A3(t){return function(){this.removeAttribute(t)}}function C3(t){return function(){this.removeAttributeNS(t.space,t.local)}}function R3(t,e,n){var r,s=n+"",a;return function(){var c=this.getAttribute(t);return c===s?null:c===r?a:a=e(r=c,n)}}function I3(t,e,n){var r,s=n+"",a;return function(){var c=this.getAttributeNS(t.space,t.local);return c===s?null:c===r?a:a=e(r=c,n)}}function N3(t,e,n){var r,s,a;return function(){var c,u=n(this),d;return u==null?void this.removeAttribute(t):(c=this.getAttribute(t),d=u+"",c===d?null:c===r&&d===s?a:(s=d,a=e(r=c,u)))}}function D3(t,e,n){var r,s,a;return function(){var c,u=n(this),d;return u==null?void this.removeAttributeNS(t.space,t.local):(c=this.getAttributeNS(t.space,t.local),d=u+"",c===d?null:c===r&&d===s?a:(s=d,a=e(r=c,u)))}}function k3(t,e){var n=Vm(t),r=n==="transform"?u3:S2;return this.attrTween(t,typeof e=="function"?(n.local?D3:N3)(n,r,kv(this,"attr."+t,e)):e==null?(n.local?C3:A3)(n):(n.local?I3:R3)(n,r,e))}function M3(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function P3(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function O3(t,e){var n,r;function s(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&P3(t,a)),n}return s._value=e,s}function V3(t,e){var n,r;function s(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&M3(t,a)),n}return s._value=e,s}function L3(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Vm(t);return this.tween(n,(r.local?O3:V3)(r,e))}function U3(t,e){return function(){Dv(this,t).delay=+e.apply(this,arguments)}}function z3(t,e){return e=+e,function(){Dv(this,t).delay=e}}function j3(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?U3:z3)(e,t)):ri(this.node(),e).delay}function B3(t,e){return function(){Vi(this,t).duration=+e.apply(this,arguments)}}function H3(t,e){return e=+e,function(){Vi(this,t).duration=e}}function F3(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?B3:H3)(e,t)):ri(this.node(),e).duration}function $3(t,e){if(typeof e!="function")throw new Error;return function(){Vi(this,t).ease=e}}function q3(t){var e=this._id;return arguments.length?this.each($3(e,t)):ri(this.node(),e).ease}function G3(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Vi(this,t).ease=n}}function Y3(t){if(typeof t!="function")throw new Error;return this.each(G3(this._id,t))}function K3(t){typeof t!="function"&&(t=r2(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],c=a.length,u=r[s]=[],d,f=0;f<c;++f)(d=a[f])&&t.call(d,d.__data__,f,a)&&u.push(d);return new ms(r,this._parents,this._name,this._id)}function X3(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,s=n.length,a=Math.min(r,s),c=new Array(r),u=0;u<a;++u)for(var d=e[u],f=n[u],p=d.length,v=c[u]=new Array(p),_,b=0;b<p;++b)(_=d[b]||f[b])&&(v[b]=_);for(;u<r;++u)c[u]=e[u];return new ms(c,this._parents,this._name,this._id)}function Q3(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function W3(t,e,n){var r,s,a=Q3(e)?Dv:Vi;return function(){var c=a(this,t),u=c.on;u!==r&&(s=(r=u).copy()).on(e,n),c.on=s}}function Z3(t,e){var n=this._id;return arguments.length<2?ri(this.node(),n).on.on(t):this.each(W3(n,t,e))}function J3(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function eO(){return this.on("end.remove",J3(this._id))}function tO(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Av(t));for(var r=this._groups,s=r.length,a=new Array(s),c=0;c<s;++c)for(var u=r[c],d=u.length,f=a[c]=new Array(d),p,v,_=0;_<d;++_)(p=u[_])&&(v=t.call(p,p.__data__,_,u))&&("__data__"in p&&(v.__data__=p.__data__),f[_]=v,Um(f[_],e,n,_,f,ri(p,n)));return new ms(a,this._parents,e,n)}function nO(t){var e=this._name,n=this._id;typeof t!="function"&&(t=n2(t));for(var r=this._groups,s=r.length,a=[],c=[],u=0;u<s;++u)for(var d=r[u],f=d.length,p,v=0;v<f;++v)if(p=d[v]){for(var _=t.call(p,p.__data__,v,d),b,T=ri(p,n),R=0,I=_.length;R<I;++R)(b=_[R])&&Um(b,e,n,R,_,T);a.push(_),c.push(p)}return new ms(a,c,e,n)}var rO=Dh.prototype.constructor;function iO(){return new rO(this._groups,this._parents)}function sO(t,e){var n,r,s;return function(){var a=tc(this,t),c=(this.style.removeProperty(t),tc(this,t));return a===c?null:a===n&&c===r?s:s=e(n=a,r=c)}}function A2(t){return function(){this.style.removeProperty(t)}}function oO(t,e,n){var r,s=n+"",a;return function(){var c=tc(this,t);return c===s?null:c===r?a:a=e(r=c,n)}}function aO(t,e,n){var r,s,a;return function(){var c=tc(this,t),u=n(this),d=u+"";return u==null&&(d=u=(this.style.removeProperty(t),tc(this,t))),c===d?null:c===r&&d===s?a:(s=d,a=e(r=c,u))}}function lO(t,e){var n,r,s,a="style."+e,c="end."+a,u;return function(){var d=Vi(this,t),f=d.on,p=d.value[a]==null?u||(u=A2(e)):void 0;(f!==n||s!==p)&&(r=(n=f).copy()).on(c,s=p),d.on=r}}function cO(t,e,n){var r=(t+="")=="transform"?c3:S2;return e==null?this.styleTween(t,sO(t,r)).on("end.style."+t,A2(t)):typeof e=="function"?this.styleTween(t,aO(t,r,kv(this,"style."+t,e))).each(lO(this._id,t)):this.styleTween(t,oO(t,r,e),n).on("end.style."+t,null)}function uO(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function hO(t,e,n){var r,s;function a(){var c=e.apply(this,arguments);return c!==s&&(r=(s=c)&&uO(t,c,n)),r}return a._value=e,a}function dO(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,hO(t,e,n??""))}function fO(t){return function(){this.textContent=t}}function mO(t){return function(){var e=t(this);this.textContent=e??""}}function pO(t){return this.tween("text",typeof t=="function"?mO(kv(this,"text",t)):fO(t==null?"":t+""))}function gO(t){return function(e){this.textContent=t.call(this,e)}}function yO(t){var e,n;function r(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&gO(s)),e}return r._value=t,r}function vO(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,yO(t))}function _O(){for(var t=this._name,e=this._id,n=C2(),r=this._groups,s=r.length,a=0;a<s;++a)for(var c=r[a],u=c.length,d,f=0;f<u;++f)if(d=c[f]){var p=ri(d,e);Um(d,t,n,f,c,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new ms(r,this._parents,t,n)}function EO(){var t,e,n=this,r=n._id,s=n.size();return new Promise(function(a,c){var u={value:c},d={value:function(){--s===0&&a()}};n.each(function(){var f=Vi(this,r),p=f.on;p!==t&&(e=(t=p).copy(),e._.cancel.push(u),e._.interrupt.push(u),e._.end.push(d)),f.on=e}),s===0&&a()})}var bO=0;function ms(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function C2(){return++bO}var ls=Dh.prototype;ms.prototype={constructor:ms,select:tO,selectAll:nO,selectChild:ls.selectChild,selectChildren:ls.selectChildren,filter:K3,merge:X3,selection:iO,transition:_O,call:ls.call,nodes:ls.nodes,node:ls.node,size:ls.size,empty:ls.empty,each:ls.each,on:Z3,attr:k3,attrTween:L3,style:cO,styleTween:dO,text:pO,textTween:vO,remove:eO,tween:S3,delay:j3,duration:F3,ease:q3,easeVarying:Y3,end:EO,[Symbol.iterator]:ls[Symbol.iterator]};function wO(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var xO={time:null,delay:0,duration:250,ease:wO};function TO(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function SO(t){var e,n;t instanceof ms?(e=t._id,t=t._name):(e=C2(),(n=xO).time=Nv(),t=t==null?null:t+"");for(var r=this._groups,s=r.length,a=0;a<s;++a)for(var c=r[a],u=c.length,d,f=0;f<u;++f)(d=c[f])&&Um(d,t,e,f,c,n||TO(d,e));return new ms(r,this._parents,t,e)}Dh.prototype.interrupt=w3;Dh.prototype.transition=SO;const yf=t=>()=>t;function AO(t,{sourceEvent:e,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function us(t,e,n){this.k=t,this.x=e,this.y=n}us.prototype={constructor:us,scale:function(t){return t===1?this:new us(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new us(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var lo=new us(1,0,0);us.prototype;function Iy(t){t.stopImmediatePropagation()}function Ru(t){t.preventDefault(),t.stopImmediatePropagation()}function CO(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function RO(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function vx(){return this.__zoom||lo}function IO(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function NO(){return navigator.maxTouchPoints||"ontouchstart"in this}function DO(t,e,n){var r=t.invertX(e[0][0])-n[0][0],s=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],c=t.invertY(e[1][1])-n[1][1];return t.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),c>a?(a+c)/2:Math.min(0,a)||Math.max(0,c))}function kO(){var t=CO,e=RO,n=DO,r=IO,s=NO,a=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,d=m3,f=Om("start","zoom","end"),p,v,_,b=500,T=150,R=0,I=10;function N(P){P.property("__zoom",vx).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",V).filter(s).on("touchstart.zoom",B).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}N.transform=function(P,X,z,Y){var te=P.selection?P.selection():P;te.property("__zoom",vx),P!==te?G(P,X,z,Y):te.interrupt().each(function(){K(this,arguments).event(Y).start().zoom(null,typeof X=="function"?X.apply(this,arguments):X).end()})},N.scaleBy=function(P,X,z,Y){N.scaleTo(P,function(){var te=this.__zoom.k,J=typeof X=="function"?X.apply(this,arguments):X;return te*J},z,Y)},N.scaleTo=function(P,X,z,Y){N.transform(P,function(){var te=e.apply(this,arguments),J=this.__zoom,U=z==null?H(te):typeof z=="function"?z.apply(this,arguments):z,W=J.invert(U),ne=typeof X=="function"?X.apply(this,arguments):X;return n($(L(J,ne),U,W),te,c)},z,Y)},N.translateBy=function(P,X,z,Y){N.transform(P,function(){return n(this.__zoom.translate(typeof X=="function"?X.apply(this,arguments):X,typeof z=="function"?z.apply(this,arguments):z),e.apply(this,arguments),c)},null,Y)},N.translateTo=function(P,X,z,Y,te){N.transform(P,function(){var J=e.apply(this,arguments),U=this.__zoom,W=Y==null?H(J):typeof Y=="function"?Y.apply(this,arguments):Y;return n(lo.translate(W[0],W[1]).scale(U.k).translate(typeof X=="function"?-X.apply(this,arguments):-X,typeof z=="function"?-z.apply(this,arguments):-z),J,c)},Y,te)};function L(P,X){return X=Math.max(a[0],Math.min(a[1],X)),X===P.k?P:new us(X,P.x,P.y)}function $(P,X,z){var Y=X[0]-z[0]*P.k,te=X[1]-z[1]*P.k;return Y===P.x&&te===P.y?P:new us(P.k,Y,te)}function H(P){return[(+P[0][0]+ +P[1][0])/2,(+P[0][1]+ +P[1][1])/2]}function G(P,X,z,Y){P.on("start.zoom",function(){K(this,arguments).event(Y).start()}).on("interrupt.zoom end.zoom",function(){K(this,arguments).event(Y).end()}).tween("zoom",function(){var te=this,J=arguments,U=K(te,J).event(Y),W=e.apply(te,J),ne=z==null?H(W):typeof z=="function"?z.apply(te,J):z,Q=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),se=te.__zoom,fe=typeof X=="function"?X.apply(te,J):X,ue=d(se.invert(ne).concat(Q/se.k),fe.invert(ne).concat(Q/fe.k));return function(ye){if(ye===1)ye=fe;else{var _e=ue(ye),Ae=Q/_e[2];ye=new us(Ae,ne[0]-_e[0]*Ae,ne[1]-_e[1]*Ae)}U.zoom(null,ye)}})}function K(P,X,z){return!z&&P.__zooming||new k(P,X)}function k(P,X){this.that=P,this.args=X,this.active=0,this.sourceEvent=null,this.extent=e.apply(P,X),this.taps=0}k.prototype={event:function(P){return P&&(this.sourceEvent=P),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(P,X){return this.mouse&&P!=="mouse"&&(this.mouse[1]=X.invert(this.mouse[0])),this.touch0&&P!=="touch"&&(this.touch0[1]=X.invert(this.touch0[0])),this.touch1&&P!=="touch"&&(this.touch1[1]=X.invert(this.touch1[0])),this.that.__zoom=X,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(P){var X=Qr(this.that).datum();f.call(P,this.that,new AO(P,{sourceEvent:this.sourceEvent,target:N,transform:this.that.__zoom,dispatch:f}),X)}};function S(P,...X){if(!t.apply(this,arguments))return;var z=K(this,X).event(P),Y=this.__zoom,te=Math.max(a[0],Math.min(a[1],Y.k*Math.pow(2,r.apply(this,arguments)))),J=Ti(P);if(z.wheel)(z.mouse[0][0]!==J[0]||z.mouse[0][1]!==J[1])&&(z.mouse[1]=Y.invert(z.mouse[0]=J)),clearTimeout(z.wheel);else{if(Y.k===te)return;z.mouse=[J,Y.invert(J)],Lf(this),z.start()}Ru(P),z.wheel=setTimeout(U,T),z.zoom("mouse",n($(L(Y,te),z.mouse[0],z.mouse[1]),z.extent,c));function U(){z.wheel=null,z.end()}}function A(P,...X){if(_||!t.apply(this,arguments))return;var z=P.currentTarget,Y=K(this,X,!0).event(P),te=Qr(P.view).on("mousemove.zoom",ne,!0).on("mouseup.zoom",Q,!0),J=Ti(P,z),U=P.clientX,W=P.clientY;f2(P.view),Iy(P),Y.mouse=[J,this.__zoom.invert(J)],Lf(this),Y.start();function ne(se){if(Ru(se),!Y.moved){var fe=se.clientX-U,ue=se.clientY-W;Y.moved=fe*fe+ue*ue>R}Y.event(se).zoom("mouse",n($(Y.that.__zoom,Y.mouse[0]=Ti(se,z),Y.mouse[1]),Y.extent,c))}function Q(se){te.on("mousemove.zoom mouseup.zoom",null),m2(se.view,Y.moved),Ru(se),Y.event(se).end()}}function V(P,...X){if(t.apply(this,arguments)){var z=this.__zoom,Y=Ti(P.changedTouches?P.changedTouches[0]:P,this),te=z.invert(Y),J=z.k*(P.shiftKey?.5:2),U=n($(L(z,J),Y,te),e.apply(this,X),c);Ru(P),u>0?Qr(this).transition().duration(u).call(G,U,Y,P):Qr(this).call(N.transform,U,Y,P)}}function B(P,...X){if(t.apply(this,arguments)){var z=P.touches,Y=z.length,te=K(this,X,P.changedTouches.length===Y).event(P),J,U,W,ne;for(Iy(P),U=0;U<Y;++U)W=z[U],ne=Ti(W,this),ne=[ne,this.__zoom.invert(ne),W.identifier],te.touch0?!te.touch1&&te.touch0[2]!==ne[2]&&(te.touch1=ne,te.taps=0):(te.touch0=ne,J=!0,te.taps=1+!!p);p&&(p=clearTimeout(p)),J&&(te.taps<2&&(v=ne[0],p=setTimeout(function(){p=null},b)),Lf(this),te.start())}}function F(P,...X){if(this.__zooming){var z=K(this,X).event(P),Y=P.changedTouches,te=Y.length,J,U,W,ne;for(Ru(P),J=0;J<te;++J)U=Y[J],W=Ti(U,this),z.touch0&&z.touch0[2]===U.identifier?z.touch0[0]=W:z.touch1&&z.touch1[2]===U.identifier&&(z.touch1[0]=W);if(U=z.that.__zoom,z.touch1){var Q=z.touch0[0],se=z.touch0[1],fe=z.touch1[0],ue=z.touch1[1],ye=(ye=fe[0]-Q[0])*ye+(ye=fe[1]-Q[1])*ye,_e=(_e=ue[0]-se[0])*_e+(_e=ue[1]-se[1])*_e;U=L(U,Math.sqrt(ye/_e)),W=[(Q[0]+fe[0])/2,(Q[1]+fe[1])/2],ne=[(se[0]+ue[0])/2,(se[1]+ue[1])/2]}else if(z.touch0)W=z.touch0[0],ne=z.touch0[1];else return;z.zoom("touch",n($(U,W,ne),z.extent,c))}}function D(P,...X){if(this.__zooming){var z=K(this,X).event(P),Y=P.changedTouches,te=Y.length,J,U;for(Iy(P),_&&clearTimeout(_),_=setTimeout(function(){_=null},b),J=0;J<te;++J)U=Y[J],z.touch0&&z.touch0[2]===U.identifier?delete z.touch0:z.touch1&&z.touch1[2]===U.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),z.taps===2&&(U=Ti(U,this),Math.hypot(v[0]-U[0],v[1]-U[1])<I)){var W=Qr(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return N.wheelDelta=function(P){return arguments.length?(r=typeof P=="function"?P:yf(+P),N):r},N.filter=function(P){return arguments.length?(t=typeof P=="function"?P:yf(!!P),N):t},N.touchable=function(P){return arguments.length?(s=typeof P=="function"?P:yf(!!P),N):s},N.extent=function(P){return arguments.length?(e=typeof P=="function"?P:yf([[+P[0][0],+P[0][1]],[+P[1][0],+P[1][1]]]),N):e},N.scaleExtent=function(P){return arguments.length?(a[0]=+P[0],a[1]=+P[1],N):[a[0],a[1]]},N.translateExtent=function(P){return arguments.length?(c[0][0]=+P[0][0],c[1][0]=+P[1][0],c[0][1]=+P[0][1],c[1][1]=+P[1][1],N):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},N.constrain=function(P){return arguments.length?(n=P,N):n},N.duration=function(P){return arguments.length?(u=+P,N):u},N.interpolate=function(P){return arguments.length?(d=P,N):d},N.on=function(){var P=f.on.apply(f,arguments);return P===f?N:P},N.clickDistance=function(P){return arguments.length?(R=(P=+P)*P,N):Math.sqrt(R)},N.tapDistance=function(P){return arguments.length?(I=+P,N):I},N}var MO=JA();const zm=O.createContext(null),PO=zm.Provider,ps={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},R2=ps.error001();function Ct(t,e){const n=O.useContext(zm);if(n===null)throw new Error(R2);return e2(n,t,e)}const fn=()=>{const t=O.useContext(zm);if(t===null)throw new Error(R2);return O.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},OO=t=>t.userSelectionActive?"none":"all";function I2({position:t,children:e,className:n,style:r,...s}){const a=Ct(OO),c=`${t}`.split("-");return de.createElement("div",{className:Fn(["react-flow__panel",n,...c]),style:{...r,pointerEvents:a},...s},e)}function VO({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:de.createElement(I2,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},de.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const LO=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:a={},labelBgPadding:c=[2,4],labelBgBorderRadius:u=2,children:d,className:f,...p})=>{const v=O.useRef(null),[_,b]=O.useState({x:0,y:0,width:0,height:0}),T=Fn(["react-flow__edge-textwrapper",f]);return O.useEffect(()=>{if(v.current){const R=v.current.getBBox();b({x:R.x,y:R.y,width:R.width,height:R.height})}},[n]),typeof n>"u"||!n?null:de.createElement("g",{transform:`translate(${t-_.width/2} ${e-_.height/2})`,className:T,visibility:_.width?"visible":"hidden",...p},s&&de.createElement("rect",{width:_.width+2*c[0],x:-c[0],y:-c[1],height:_.height+2*c[1],className:"react-flow__edge-textbg",style:a,rx:u,ry:u}),de.createElement("text",{className:"react-flow__edge-text",y:_.height/2,dy:"0.3em",ref:v,style:r},n),d)};var UO=O.memo(LO);const Mv=t=>({width:t.offsetWidth,height:t.offsetHeight}),rc=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Pv=(t={x:0,y:0},e)=>({x:rc(t.x,e[0][0],e[1][0]),y:rc(t.y,e[0][1],e[1][1])}),_x=(t,e,n)=>t<e?rc(Math.abs(t-e),1,50)/50:t>n?-rc(Math.abs(t-n),1,50)/50:0,N2=(t,e)=>{const n=_x(t.x,35,e.width-35)*20,r=_x(t.y,35,e.height-35)*20;return[n,r]},D2=t=>t.getRootNode?.()||window?.document,zO=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Ov=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),jO=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),Ex=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),w0=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},BO=t=>Ur(t.width)&&Ur(t.height)&&Ur(t.x)&&Ur(t.y),Ur=t=>!isNaN(t)&&isFinite(t),Ot=Symbol.for("internals"),k2=["Enter"," ","Escape"],HO=(t,e)=>{},FO=t=>"nativeEvent"in t;function x0(t){const n=(FO(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const M2=t=>"clientX"in t,co=(t,e)=>{const n=M2(t),r=n?t.clientX:t.touches?.[0].clientX,s=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:s-(e?.top??0)}},sm=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Mh=({id:t,path:e,labelX:n,labelY:r,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:v,markerStart:_,interactionWidth:b=20})=>de.createElement(de.Fragment,null,de.createElement("path",{id:t,style:p,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:v,markerStart:_}),b&&de.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:b,className:"react-flow__edge-interaction"}),s&&Ur(n)&&Ur(r)?de.createElement(UO,{x:n,y:r,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f}):null);Mh.displayName="BaseEdge";function Iu(t,e,n){return n===void 0?n:r=>{const s=e().edges.find(a=>a.id===t);s&&n(r,{...s})}}function P2({sourceX:t,sourceY:e,targetX:n,targetY:r}){const s=Math.abs(n-t)/2,a=n<t?n+s:n-s,c=Math.abs(r-e)/2,u=r<e?r+c:r-c;return[a,u,s,c]}function O2({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:s,sourceControlY:a,targetControlX:c,targetControlY:u}){const d=t*.125+s*.375+c*.375+n*.125,f=e*.125+a*.375+u*.375+r*.125,p=Math.abs(d-t),v=Math.abs(f-e);return[d,f,p,v]}var go;(function(t){t.Strict="strict",t.Loose="loose"})(go||(go={}));var fa;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(fa||(fa={}));var ch;(function(t){t.Partial="partial",t.Full="full"})(ch||(ch={}));var eo;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(eo||(eo={}));var wa;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(wa||(wa={}));var Te;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Te||(Te={}));function bx({pos:t,x1:e,y1:n,x2:r,y2:s}){return t===Te.Left||t===Te.Right?[.5*(e+r),n]:[e,.5*(n+s)]}function V2({sourceX:t,sourceY:e,sourcePosition:n=Te.Bottom,targetX:r,targetY:s,targetPosition:a=Te.Top}){const[c,u]=bx({pos:n,x1:t,y1:e,x2:r,y2:s}),[d,f]=bx({pos:a,x1:r,y1:s,x2:t,y2:e}),[p,v,_,b]=O2({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:c,sourceControlY:u,targetControlX:d,targetControlY:f});return[`M${t},${e} C${c},${u} ${d},${f} ${r},${s}`,p,v,_,b]}const Vv=O.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=Te.Bottom,targetPosition:a=Te.Top,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:v,style:_,markerEnd:b,markerStart:T,interactionWidth:R})=>{const[I,N,L]=V2({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:a});return de.createElement(Mh,{path:I,labelX:N,labelY:L,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:v,style:_,markerEnd:b,markerStart:T,interactionWidth:R})});Vv.displayName="SimpleBezierEdge";const wx={[Te.Left]:{x:-1,y:0},[Te.Right]:{x:1,y:0},[Te.Top]:{x:0,y:-1},[Te.Bottom]:{x:0,y:1}},$O=({source:t,sourcePosition:e=Te.Bottom,target:n})=>e===Te.Left||e===Te.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},xx=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function qO({source:t,sourcePosition:e=Te.Bottom,target:n,targetPosition:r=Te.Top,center:s,offset:a}){const c=wx[e],u=wx[r],d={x:t.x+c.x*a,y:t.y+c.y*a},f={x:n.x+u.x*a,y:n.y+u.y*a},p=$O({source:d,sourcePosition:e,target:f}),v=p.x!==0?"x":"y",_=p[v];let b=[],T,R;const I={x:0,y:0},N={x:0,y:0},[L,$,H,G]=P2({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(c[v]*u[v]===-1){T=s.x??L,R=s.y??$;const k=[{x:T,y:d.y},{x:T,y:f.y}],S=[{x:d.x,y:R},{x:f.x,y:R}];c[v]===_?b=v==="x"?k:S:b=v==="x"?S:k}else{const k=[{x:d.x,y:f.y}],S=[{x:f.x,y:d.y}];if(v==="x"?b=c.x===_?S:k:b=c.y===_?k:S,e===r){const D=Math.abs(t[v]-n[v]);if(D<=a){const P=Math.min(a-1,a-D);c[v]===_?I[v]=(d[v]>t[v]?-1:1)*P:N[v]=(f[v]>n[v]?-1:1)*P}}if(e!==r){const D=v==="x"?"y":"x",P=c[v]===u[D],X=d[D]>f[D],z=d[D]<f[D];(c[v]===1&&(!P&&X||P&&z)||c[v]!==1&&(!P&&z||P&&X))&&(b=v==="x"?k:S)}const A={x:d.x+I.x,y:d.y+I.y},V={x:f.x+N.x,y:f.y+N.y},B=Math.max(Math.abs(A.x-b[0].x),Math.abs(V.x-b[0].x)),F=Math.max(Math.abs(A.y-b[0].y),Math.abs(V.y-b[0].y));B>=F?(T=(A.x+V.x)/2,R=b[0].y):(T=b[0].x,R=(A.y+V.y)/2)}return[[t,{x:d.x+I.x,y:d.y+I.y},...b,{x:f.x+N.x,y:f.y+N.y},n],T,R,H,G]}function GO(t,e,n,r){const s=Math.min(xx(t,e)/2,xx(e,n)/2,r),{x:a,y:c}=e;if(t.x===a&&a===n.x||t.y===c&&c===n.y)return`L${a} ${c}`;if(t.y===c){const f=t.x<n.x?-1:1,p=t.y<n.y?1:-1;return`L ${a+s*f},${c}Q ${a},${c} ${a},${c+s*p}`}const u=t.x<n.x?1:-1,d=t.y<n.y?-1:1;return`L ${a},${c+s*d}Q ${a},${c} ${a+s*u},${c}`}function T0({sourceX:t,sourceY:e,sourcePosition:n=Te.Bottom,targetX:r,targetY:s,targetPosition:a=Te.Top,borderRadius:c=5,centerX:u,centerY:d,offset:f=20}){const[p,v,_,b,T]=qO({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:s},targetPosition:a,center:{x:u,y:d},offset:f});return[p.reduce((I,N,L)=>{let $="";return L>0&&L<p.length-1?$=GO(p[L-1],N,p[L+1],c):$=`${L===0?"M":"L"}${N.x} ${N.y}`,I+=$,I},""),v,_,b,T]}const jm=O.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,sourcePosition:v=Te.Bottom,targetPosition:_=Te.Top,markerEnd:b,markerStart:T,pathOptions:R,interactionWidth:I})=>{const[N,L,$]=T0({sourceX:t,sourceY:e,sourcePosition:v,targetX:n,targetY:r,targetPosition:_,borderRadius:R?.borderRadius,offset:R?.offset});return de.createElement(Mh,{path:N,labelX:L,labelY:$,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:b,markerStart:T,interactionWidth:I})});jm.displayName="SmoothStepEdge";const Lv=O.memo(t=>de.createElement(jm,{...t,pathOptions:O.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));Lv.displayName="StepEdge";function YO({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[s,a,c,u]=P2({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,s,a,c,u]}const Uv=O.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:v,markerStart:_,interactionWidth:b})=>{const[T,R,I]=YO({sourceX:t,sourceY:e,targetX:n,targetY:r});return de.createElement(Mh,{path:T,labelX:R,labelY:I,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:v,markerStart:_,interactionWidth:b})});Uv.displayName="StraightEdge";function vf(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function Tx({pos:t,x1:e,y1:n,x2:r,y2:s,c:a}){switch(t){case Te.Left:return[e-vf(e-r,a),n];case Te.Right:return[e+vf(r-e,a),n];case Te.Top:return[e,n-vf(n-s,a)];case Te.Bottom:return[e,n+vf(s-n,a)]}}function L2({sourceX:t,sourceY:e,sourcePosition:n=Te.Bottom,targetX:r,targetY:s,targetPosition:a=Te.Top,curvature:c=.25}){const[u,d]=Tx({pos:n,x1:t,y1:e,x2:r,y2:s,c}),[f,p]=Tx({pos:a,x1:r,y1:s,x2:t,y2:e,c}),[v,_,b,T]=O2({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:u,sourceControlY:d,targetControlX:f,targetControlY:p});return[`M${t},${e} C${u},${d} ${f},${p} ${r},${s}`,v,_,b,T]}const om=O.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=Te.Bottom,targetPosition:a=Te.Top,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:v,style:_,markerEnd:b,markerStart:T,pathOptions:R,interactionWidth:I})=>{const[N,L,$]=L2({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:a,curvature:R?.curvature});return de.createElement(Mh,{path:N,labelX:L,labelY:$,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:v,style:_,markerEnd:b,markerStart:T,interactionWidth:I})});om.displayName="BezierEdge";const zv=O.createContext(null),KO=zv.Provider;zv.Consumer;const XO=()=>O.useContext(zv),QO=t=>"id"in t&&"source"in t&&"target"in t,WO=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,S0=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,ZO=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),JO=(t,e)=>{if(!t.source||!t.target)return e;let n;return QO(t)?n={...t}:n={...t,id:WO(t)},ZO(n,e)?e:e.concat(n)},A0=({x:t,y:e},[n,r,s],a,[c,u])=>{const d={x:(t-n)/s,y:(e-r)/s};return a?{x:c*Math.round(d.x/c),y:u*Math.round(d.y/u)}:d},U2=({x:t,y:e},[n,r,s])=>({x:t*s+n,y:e*s+r}),Yl=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],s={x:t.position.x-n,y:t.position.y-r};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:s}},jv=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,s)=>{const{x:a,y:c}=Yl(s,e).positionAbsolute;return zO(r,Ov({x:a,y:c,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return jO(n)},z2=(t,e,[n,r,s]=[0,0,1],a=!1,c=!1,u=[0,0])=>{const d={x:(e.x-n)/s,y:(e.y-r)/s,width:e.width/s,height:e.height/s},f=[];return t.forEach(p=>{const{width:v,height:_,selectable:b=!0,hidden:T=!1}=p;if(c&&!b||T)return!1;const{positionAbsolute:R}=Yl(p,u),I={x:R.x,y:R.y,width:v||0,height:_||0},N=w0(d,I),L=typeof v>"u"||typeof _>"u"||v===null||_===null,$=a&&N>0,H=(v||0)*(_||0);(L||$||N>=H||p.dragging)&&f.push(p)}),f},j2=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},B2=(t,e,n,r,s,a=.1)=>{const c=e/(t.width*(1+a)),u=n/(t.height*(1+a)),d=Math.min(c,u),f=rc(d,r,s),p=t.x+t.width/2,v=t.y+t.height/2,_=e/2-p*f,b=n/2-v*f;return{x:_,y:b,zoom:f}},ca=(t,e=0)=>t.transition().duration(e);function Sx(t,e,n,r){return(e[n]||[]).reduce((s,a)=>(`${t.id}-${a.id}-${n}`!==r&&s.push({id:a.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+a.x+a.width/2,y:(t.positionAbsolute?.y??0)+a.y+a.height/2}),s),[])}function eV(t,e,n,r,s,a){const{x:c,y:u}=co(t),f=e.elementsFromPoint(c,u).find(T=>T.classList.contains("react-flow__handle"));if(f){const T=f.getAttribute("data-nodeid");if(T){const R=Bv(void 0,f),I=f.getAttribute("data-handleid"),N=a({nodeId:T,id:I,type:R});if(N){const L=s.find($=>$.nodeId===T&&$.type===R&&$.id===I);return{handle:{id:I,type:R,nodeId:T,x:L?.x||n.x,y:L?.y||n.y},validHandleResult:N}}}}let p=[],v=1/0;if(s.forEach(T=>{const R=Math.sqrt((T.x-n.x)**2+(T.y-n.y)**2);if(R<=r){const I=a(T);R<=v&&(R<v?p=[{handle:T,validHandleResult:I}]:R===v&&p.push({handle:T,validHandleResult:I}),v=R)}}),!p.length)return{handle:null,validHandleResult:H2()};if(p.length===1)return p[0];const _=p.some(({validHandleResult:T})=>T.isValid),b=p.some(({handle:T})=>T.type==="target");return p.find(({handle:T,validHandleResult:R})=>b?T.type==="target":_?R.isValid:!0)||p[0]}const tV={source:null,target:null,sourceHandle:null,targetHandle:null},H2=()=>({handleDomNode:null,isValid:!1,connection:tV,endHandle:null});function F2(t,e,n,r,s,a,c){const u=s==="target",d=c.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),f={...H2(),handleDomNode:d};if(d){const p=Bv(void 0,d),v=d.getAttribute("data-nodeid"),_=d.getAttribute("data-handleid"),b=d.classList.contains("connectable"),T=d.classList.contains("connectableend"),R={source:u?v:n,sourceHandle:u?_:r,target:u?n:v,targetHandle:u?r:_};f.connection=R,b&&T&&(e===go.Strict?u&&p==="source"||!u&&p==="target":v!==n||_!==r)&&(f.endHandle={nodeId:v,handleId:_,type:p},f.isValid=a(R))}return f}function nV({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((s,a)=>{if(a[Ot]){const{handleBounds:c}=a[Ot];let u=[],d=[];c&&(u=Sx(a,c,"source",`${e}-${n}-${r}`),d=Sx(a,c,"target",`${e}-${n}-${r}`)),s.push(...u,...d)}return s},[])}function Bv(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function Ny(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function rV(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function $2({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:s,getState:a,setState:c,isValidConnection:u,edgeUpdaterType:d,onReconnectEnd:f}){const p=D2(t.target),{connectionMode:v,domNode:_,autoPanOnConnect:b,connectionRadius:T,onConnectStart:R,panBy:I,getNodes:N,cancelConnection:L}=a();let $=0,H;const{x:G,y:K}=co(t),k=p?.elementFromPoint(G,K),S=Bv(d,k),A=_?.getBoundingClientRect();if(!A||!S)return;let V,B=co(t,A),F=!1,D=null,P=!1,X=null;const z=nV({nodes:N(),nodeId:n,handleId:e,handleType:S}),Y=()=>{if(!b)return;const[U,W]=N2(B,A);I({x:U,y:W}),$=requestAnimationFrame(Y)};c({connectionPosition:B,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:S,connectionStartHandle:{nodeId:n,handleId:e,type:S},connectionEndHandle:null}),R?.(t,{nodeId:n,handleId:e,handleType:S});function te(U){const{transform:W}=a();B=co(U,A);const{handle:ne,validHandleResult:Q}=eV(U,p,A0(B,W,!1,[1,1]),T,z,se=>F2(se,v,n,e,s?"target":"source",u,p));if(H=ne,F||(Y(),F=!0),X=Q.handleDomNode,D=Q.connection,P=Q.isValid,c({connectionPosition:H&&P?U2({x:H.x,y:H.y},W):B,connectionStatus:rV(!!H,P),connectionEndHandle:Q.endHandle}),!H&&!P&&!X)return Ny(V);D.source!==D.target&&X&&(Ny(V),V=X,X.classList.add("connecting","react-flow__handle-connecting"),X.classList.toggle("valid",P),X.classList.toggle("react-flow__handle-valid",P))}function J(U){(H||X)&&D&&P&&r?.(D),a().onConnectEnd?.(U),d&&f?.(U),Ny(V),L(),cancelAnimationFrame($),F=!1,P=!1,D=null,X=null,p.removeEventListener("mousemove",te),p.removeEventListener("mouseup",J),p.removeEventListener("touchmove",te),p.removeEventListener("touchend",J)}p.addEventListener("mousemove",te),p.addEventListener("mouseup",J),p.addEventListener("touchmove",te),p.addEventListener("touchend",J)}const Ax=()=>!0,iV=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),sV=(t,e,n)=>r=>{const{connectionStartHandle:s,connectionEndHandle:a,connectionClickStartHandle:c}=r;return{connecting:s?.nodeId===t&&s?.handleId===e&&s?.type===n||a?.nodeId===t&&a?.handleId===e&&a?.type===n,clickConnecting:c?.nodeId===t&&c?.handleId===e&&c?.type===n}},q2=O.forwardRef(({type:t="source",position:e=Te.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:a=!0,id:c,onConnect:u,children:d,className:f,onMouseDown:p,onTouchStart:v,..._},b)=>{const T=c||null,R=t==="target",I=fn(),N=XO(),{connectOnClick:L,noPanClassName:$}=Ct(iV,Dn),{connecting:H,clickConnecting:G}=Ct(sV(N,T,t),Dn);N||I.getState().onError?.("010",ps.error010());const K=A=>{const{defaultEdgeOptions:V,onConnect:B,hasDefaultEdges:F}=I.getState(),D={...V,...A};if(F){const{edges:P,setEdges:X}=I.getState();X(JO(D,P))}B?.(D),u?.(D)},k=A=>{if(!N)return;const V=M2(A);s&&(V&&A.button===0||!V)&&$2({event:A,handleId:T,nodeId:N,onConnect:K,isTarget:R,getState:I.getState,setState:I.setState,isValidConnection:n||I.getState().isValidConnection||Ax}),V?p?.(A):v?.(A)},S=A=>{const{onClickConnectStart:V,onClickConnectEnd:B,connectionClickStartHandle:F,connectionMode:D,isValidConnection:P}=I.getState();if(!N||!F&&!s)return;if(!F){V?.(A,{nodeId:N,handleId:T,handleType:t}),I.setState({connectionClickStartHandle:{nodeId:N,type:t,handleId:T}});return}const X=D2(A.target),z=n||P||Ax,{connection:Y,isValid:te}=F2({nodeId:N,id:T,type:t},D,F.nodeId,F.handleId||null,F.type,z,X);te&&K(Y),B?.(A),I.setState({connectionClickStartHandle:null})};return de.createElement("div",{"data-handleid":T,"data-nodeid":N,"data-handlepos":e,"data-id":`${N}-${T}-${t}`,className:Fn(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",$,f,{source:!R,target:R,connectable:r,connectablestart:s,connectableend:a,connecting:G,connectionindicator:r&&(s&&!H||a&&H)}]),onMouseDown:k,onTouchStart:k,onClick:L?S:void 0,ref:b,..._},d)});q2.displayName="Handle";var Bn=O.memo(q2);const G2=({data:t,isConnectable:e,targetPosition:n=Te.Top,sourcePosition:r=Te.Bottom})=>de.createElement(de.Fragment,null,de.createElement(Bn,{type:"target",position:n,isConnectable:e}),t?.label,de.createElement(Bn,{type:"source",position:r,isConnectable:e}));G2.displayName="DefaultNode";var C0=O.memo(G2);const Y2=({data:t,isConnectable:e,sourcePosition:n=Te.Bottom})=>de.createElement(de.Fragment,null,t?.label,de.createElement(Bn,{type:"source",position:n,isConnectable:e}));Y2.displayName="InputNode";var K2=O.memo(Y2);const X2=({data:t,isConnectable:e,targetPosition:n=Te.Top})=>de.createElement(de.Fragment,null,de.createElement(Bn,{type:"target",position:n,isConnectable:e}),t?.label);X2.displayName="OutputNode";var Q2=O.memo(X2);const Hv=()=>null;Hv.displayName="GroupNode";const oV=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),_f=t=>t.id;function aV(t,e){return Dn(t.selectedNodes.map(_f),e.selectedNodes.map(_f))&&Dn(t.selectedEdges.map(_f),e.selectedEdges.map(_f))}const W2=O.memo(({onSelectionChange:t})=>{const e=fn(),{selectedNodes:n,selectedEdges:r}=Ct(oV,aV);return O.useEffect(()=>{const s={nodes:n,edges:r};t?.(s),e.getState().onSelectionChange.forEach(a=>a(s))},[n,r,t]),null});W2.displayName="SelectionListener";const lV=t=>!!t.onSelectionChange;function cV({onSelectionChange:t}){const e=Ct(lV);return t||e?de.createElement(W2,{onSelectionChange:t}):null}const uV=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function Al(t,e){O.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function qe(t,e,n){O.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const hV=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:s,onConnectStart:a,onConnectEnd:c,onClickConnectStart:u,onClickConnectEnd:d,nodesDraggable:f,nodesConnectable:p,nodesFocusable:v,edgesFocusable:_,edgesUpdatable:b,elevateNodesOnSelect:T,minZoom:R,maxZoom:I,nodeExtent:N,onNodesChange:L,onEdgesChange:$,elementsSelectable:H,connectionMode:G,snapGrid:K,snapToGrid:k,translateExtent:S,connectOnClick:A,defaultEdgeOptions:V,fitView:B,fitViewOptions:F,onNodesDelete:D,onEdgesDelete:P,onNodeDrag:X,onNodeDragStart:z,onNodeDragStop:Y,onSelectionDrag:te,onSelectionDragStart:J,onSelectionDragStop:U,noPanClassName:W,nodeOrigin:ne,rfId:Q,autoPanOnConnect:se,autoPanOnNodeDrag:fe,onError:ue,connectionRadius:ye,isValidConnection:_e,nodeDragThreshold:Ae})=>{const{setNodes:Re,setEdges:tt,setDefaultNodesAndEdges:it,setMinZoom:Ue,setMaxZoom:nt,setTranslateExtent:st,setNodeExtent:Ht,reset:ze}=Ct(uV,Dn),be=fn();return O.useEffect(()=>{const It=r?.map(Tn=>({...Tn,...V}));return it(n,It),()=>{ze()}},[]),qe("defaultEdgeOptions",V,be.setState),qe("connectionMode",G,be.setState),qe("onConnect",s,be.setState),qe("onConnectStart",a,be.setState),qe("onConnectEnd",c,be.setState),qe("onClickConnectStart",u,be.setState),qe("onClickConnectEnd",d,be.setState),qe("nodesDraggable",f,be.setState),qe("nodesConnectable",p,be.setState),qe("nodesFocusable",v,be.setState),qe("edgesFocusable",_,be.setState),qe("edgesUpdatable",b,be.setState),qe("elementsSelectable",H,be.setState),qe("elevateNodesOnSelect",T,be.setState),qe("snapToGrid",k,be.setState),qe("snapGrid",K,be.setState),qe("onNodesChange",L,be.setState),qe("onEdgesChange",$,be.setState),qe("connectOnClick",A,be.setState),qe("fitViewOnInit",B,be.setState),qe("fitViewOnInitOptions",F,be.setState),qe("onNodesDelete",D,be.setState),qe("onEdgesDelete",P,be.setState),qe("onNodeDrag",X,be.setState),qe("onNodeDragStart",z,be.setState),qe("onNodeDragStop",Y,be.setState),qe("onSelectionDrag",te,be.setState),qe("onSelectionDragStart",J,be.setState),qe("onSelectionDragStop",U,be.setState),qe("noPanClassName",W,be.setState),qe("nodeOrigin",ne,be.setState),qe("rfId",Q,be.setState),qe("autoPanOnConnect",se,be.setState),qe("autoPanOnNodeDrag",fe,be.setState),qe("onError",ue,be.setState),qe("connectionRadius",ye,be.setState),qe("isValidConnection",_e,be.setState),qe("nodeDragThreshold",Ae,be.setState),Al(t,Re),Al(e,tt),Al(R,Ue),Al(I,nt),Al(S,st),Al(N,Ht),null},Cx={display:"none"},dV={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Z2="react-flow__node-desc",J2="react-flow__edge-desc",fV="react-flow__aria-live",mV=t=>t.ariaLiveMessage;function pV({rfId:t}){const e=Ct(mV);return de.createElement("div",{id:`${fV}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:dV},e)}function gV({rfId:t,disableKeyboardA11y:e}){return de.createElement(de.Fragment,null,de.createElement("div",{id:`${Z2}-${t}`,style:Cx},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),de.createElement("div",{id:`${J2}-${t}`,style:Cx},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&de.createElement(pV,{rfId:t}))}var uh=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=O.useState(!1),s=O.useRef(!1),a=O.useRef(new Set([])),[c,u]=O.useMemo(()=>{if(t!==null){const f=(Array.isArray(t)?t:[t]).filter(v=>typeof v=="string").map(v=>v.split("+")),p=f.reduce((v,_)=>v.concat(..._),[]);return[f,p]}return[[],[]]},[t]);return O.useEffect(()=>{const d=typeof document<"u"?document:null,f=e?.target||d;if(t!==null){const p=b=>{if(s.current=b.ctrlKey||b.metaKey||b.shiftKey,(!s.current||s.current&&!e.actInsideInputWithModifier)&&x0(b))return!1;const R=Ix(b.code,u);a.current.add(b[R]),Rx(c,a.current,!1)&&(b.preventDefault(),r(!0))},v=b=>{if((!s.current||s.current&&!e.actInsideInputWithModifier)&&x0(b))return!1;const R=Ix(b.code,u);Rx(c,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(b[R]),b.key==="Meta"&&a.current.clear(),s.current=!1},_=()=>{a.current.clear(),r(!1)};return f?.addEventListener("keydown",p),f?.addEventListener("keyup",v),window.addEventListener("blur",_),()=>{f?.removeEventListener("keydown",p),f?.removeEventListener("keyup",v),window.removeEventListener("blur",_)}}},[t,r]),n};function Rx(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(s=>e.has(s)))}function Ix(t,e){return e.includes(t)?"code":"key"}function eC(t,e,n,r){const s=t.parentNode||t.parentId;if(!s)return n;const a=e.get(s),c=Yl(a,r);return eC(a,e,{x:(n.x??0)+c.x,y:(n.y??0)+c.y,z:(a[Ot]?.z??0)>(n.z??0)?a[Ot]?.z??0:n.z??0},r)}function tC(t,e,n){t.forEach(r=>{const s=r.parentNode||r.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||n?.[r.id]){const{x:a,y:c,z:u}=eC(r,t,{...r.position,z:r[Ot]?.z??0},e);r.positionAbsolute={x:a,y:c},r[Ot].z=u,n?.[r.id]&&(r[Ot].isParent=!0)}})}function Dy(t,e,n,r){const s=new Map,a={},c=r?1e3:0;return t.forEach(u=>{const d=(Ur(u.zIndex)?u.zIndex:0)+(u.selected?c:0),f=e.get(u.id),p={...u,positionAbsolute:{x:u.position.x,y:u.position.y}},v=u.parentNode||u.parentId;v&&(a[v]=!0);const _=f?.type&&f?.type!==u.type;Object.defineProperty(p,Ot,{enumerable:!1,value:{handleBounds:_?void 0:f?.[Ot]?.handleBounds,z:d}}),s.set(u.id,p)}),tC(s,n,a),s}function nC(t,e={}){const{getNodes:n,width:r,height:s,minZoom:a,maxZoom:c,d3Zoom:u,d3Selection:d,fitViewOnInitDone:f,fitViewOnInit:p,nodeOrigin:v}=t(),_=e.initial&&!f&&p;if(u&&d&&(_||!e.initial)){const T=n().filter(I=>{const N=e.includeHiddenNodes?I.width&&I.height:!I.hidden;return e.nodes?.length?N&&e.nodes.some(L=>L.id===I.id):N}),R=T.every(I=>I.width&&I.height);if(T.length>0&&R){const I=jv(T,v),{x:N,y:L,zoom:$}=B2(I,r,s,e.minZoom??a,e.maxZoom??c,e.padding??.1),H=lo.translate(N,L).scale($);return typeof e.duration=="number"&&e.duration>0?u.transform(ca(d,e.duration),H):u.transform(d,H),!0}}return!1}function yV(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[Ot]:r[Ot],selected:n.selected})}),new Map(e)}function vV(t,e){return e.map(n=>{const r=t.find(s=>s.id===n.id);return r&&(n.selected=r.selected),n})}function Ef({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:s,edges:a,onNodesChange:c,onEdgesChange:u,hasDefaultNodes:d,hasDefaultEdges:f}=n();t?.length&&(d&&r({nodeInternals:yV(t,s)}),c?.(t)),e?.length&&(f&&r({edges:vV(e,a)}),u?.(e))}const Cl=()=>{},_V={zoomIn:Cl,zoomOut:Cl,zoomTo:Cl,getZoom:()=>1,setViewport:Cl,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Cl,fitBounds:Cl,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},EV=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),bV=()=>{const t=fn(),{d3Zoom:e,d3Selection:n}=Ct(EV,Dn);return O.useMemo(()=>n&&e?{zoomIn:s=>e.scaleBy(ca(n,s?.duration),1.2),zoomOut:s=>e.scaleBy(ca(n,s?.duration),1/1.2),zoomTo:(s,a)=>e.scaleTo(ca(n,a?.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,a)=>{const[c,u,d]=t.getState().transform,f=lo.translate(s.x??c,s.y??u).scale(s.zoom??d);e.transform(ca(n,a?.duration),f)},getViewport:()=>{const[s,a,c]=t.getState().transform;return{x:s,y:a,zoom:c}},fitView:s=>nC(t.getState,s),setCenter:(s,a,c)=>{const{width:u,height:d,maxZoom:f}=t.getState(),p=typeof c?.zoom<"u"?c.zoom:f,v=u/2-s*p,_=d/2-a*p,b=lo.translate(v,_).scale(p);e.transform(ca(n,c?.duration),b)},fitBounds:(s,a)=>{const{width:c,height:u,minZoom:d,maxZoom:f}=t.getState(),{x:p,y:v,zoom:_}=B2(s,c,u,d,f,a?.padding??.1),b=lo.translate(p,v).scale(_);e.transform(ca(n,a?.duration),b)},project:s=>{const{transform:a,snapToGrid:c,snapGrid:u}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),A0(s,a,c,u)},screenToFlowPosition:s=>{const{transform:a,snapToGrid:c,snapGrid:u,domNode:d}=t.getState();if(!d)return s;const{x:f,y:p}=d.getBoundingClientRect(),v={x:s.x-f,y:s.y-p};return A0(v,a,c,u)},flowToScreenPosition:s=>{const{transform:a,domNode:c}=t.getState();if(!c)return s;const{x:u,y:d}=c.getBoundingClientRect(),f=U2(s,a);return{x:f.x+u,y:f.y+d}},viewportInitialized:!0}:_V,[e,n])};function Ph(){const t=bV(),e=fn(),n=O.useCallback(()=>e.getState().getNodes().map(R=>({...R})),[]),r=O.useCallback(R=>e.getState().nodeInternals.get(R),[]),s=O.useCallback(()=>{const{edges:R=[]}=e.getState();return R.map(I=>({...I}))},[]),a=O.useCallback(R=>{const{edges:I=[]}=e.getState();return I.find(N=>N.id===R)},[]),c=O.useCallback(R=>{const{getNodes:I,setNodes:N,hasDefaultNodes:L,onNodesChange:$}=e.getState(),H=I(),G=typeof R=="function"?R(H):R;if(L)N(G);else if($){const K=G.length===0?H.map(k=>({type:"remove",id:k.id})):G.map(k=>({item:k,type:"reset"}));$(K)}},[]),u=O.useCallback(R=>{const{edges:I=[],setEdges:N,hasDefaultEdges:L,onEdgesChange:$}=e.getState(),H=typeof R=="function"?R(I):R;if(L)N(H);else if($){const G=H.length===0?I.map(K=>({type:"remove",id:K.id})):H.map(K=>({item:K,type:"reset"}));$(G)}},[]),d=O.useCallback(R=>{const I=Array.isArray(R)?R:[R],{getNodes:N,setNodes:L,hasDefaultNodes:$,onNodesChange:H}=e.getState();if($){const K=[...N(),...I];L(K)}else if(H){const G=I.map(K=>({item:K,type:"add"}));H(G)}},[]),f=O.useCallback(R=>{const I=Array.isArray(R)?R:[R],{edges:N=[],setEdges:L,hasDefaultEdges:$,onEdgesChange:H}=e.getState();if($)L([...N,...I]);else if(H){const G=I.map(K=>({item:K,type:"add"}));H(G)}},[]),p=O.useCallback(()=>{const{getNodes:R,edges:I=[],transform:N}=e.getState(),[L,$,H]=N;return{nodes:R().map(G=>({...G})),edges:I.map(G=>({...G})),viewport:{x:L,y:$,zoom:H}}},[]),v=O.useCallback(({nodes:R,edges:I})=>{const{nodeInternals:N,getNodes:L,edges:$,hasDefaultNodes:H,hasDefaultEdges:G,onNodesDelete:K,onEdgesDelete:k,onNodesChange:S,onEdgesChange:A}=e.getState(),V=(R||[]).map(X=>X.id),B=(I||[]).map(X=>X.id),F=L().reduce((X,z)=>{const Y=z.parentNode||z.parentId,te=!V.includes(z.id)&&Y&&X.find(U=>U.id===Y);return(typeof z.deletable=="boolean"?z.deletable:!0)&&(V.includes(z.id)||te)&&X.push(z),X},[]),D=$.filter(X=>typeof X.deletable=="boolean"?X.deletable:!0),P=D.filter(X=>B.includes(X.id));if(F||P){const X=j2(F,D),z=[...P,...X],Y=z.reduce((te,J)=>(te.includes(J.id)||te.push(J.id),te),[]);if((G||H)&&(G&&e.setState({edges:$.filter(te=>!Y.includes(te.id))}),H&&(F.forEach(te=>{N.delete(te.id)}),e.setState({nodeInternals:new Map(N)}))),Y.length>0&&(k?.(z),A&&A(Y.map(te=>({id:te,type:"remove"})))),F.length>0&&(K?.(F),S)){const te=F.map(J=>({id:J.id,type:"remove"}));S(te)}}},[]),_=O.useCallback(R=>{const I=BO(R),N=I?null:e.getState().nodeInternals.get(R.id);return!I&&!N?[null,null,I]:[I?R:Ex(N),N,I]},[]),b=O.useCallback((R,I=!0,N)=>{const[L,$,H]=_(R);return L?(N||e.getState().getNodes()).filter(G=>{if(!H&&(G.id===$.id||!G.positionAbsolute))return!1;const K=Ex(G),k=w0(K,L);return I&&k>0||k>=L.width*L.height}):[]},[]),T=O.useCallback((R,I,N=!0)=>{const[L]=_(R);if(!L)return!1;const $=w0(L,I);return N&&$>0||$>=L.width*L.height},[]);return O.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:s,getEdge:a,setNodes:c,setEdges:u,addNodes:d,addEdges:f,toObject:p,deleteElements:v,getIntersectingNodes:b,isNodeIntersecting:T}),[t,n,r,s,a,c,u,d,f,p,v,b,T])}const wV={actInsideInputWithModifier:!1};var xV=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=fn(),{deleteElements:r}=Ph(),s=uh(t,wV),a=uh(e);O.useEffect(()=>{if(s){const{edges:c,getNodes:u}=n.getState(),d=u().filter(p=>p.selected),f=c.filter(p=>p.selected);r({nodes:d,edges:f}),n.setState({nodesSelectionActive:!1})}},[s]),O.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])};function TV(t){const e=fn();O.useEffect(()=>{let n;const r=()=>{if(!t.current)return;const s=Mv(t.current);(s.height===0||s.width===0)&&e.getState().onError?.("004",ps.error004()),e.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const Fv={position:"absolute",width:"100%",height:"100%",top:0,left:0},SV=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,bf=t=>({x:t.x,y:t.y,zoom:t.k}),Rl=(t,e)=>t.target.closest(`.${e}`),Nx=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),Dx=t=>{const e=t.ctrlKey&&sm()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},AV=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),CV=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:a=!0,panOnScroll:c=!1,panOnScrollSpeed:u=.5,panOnScrollMode:d=fa.Free,zoomOnDoubleClick:f=!0,elementsSelectable:p,panOnDrag:v=!0,defaultViewport:_,translateExtent:b,minZoom:T,maxZoom:R,zoomActivationKeyCode:I,preventScrolling:N=!0,children:L,noWheelClassName:$,noPanClassName:H})=>{const G=O.useRef(),K=fn(),k=O.useRef(!1),S=O.useRef(!1),A=O.useRef(null),V=O.useRef({x:0,y:0,zoom:0}),{d3Zoom:B,d3Selection:F,d3ZoomHandler:D,userSelectionActive:P}=Ct(AV,Dn),X=uh(I),z=O.useRef(0),Y=O.useRef(!1),te=O.useRef();return TV(A),O.useEffect(()=>{if(A.current){const J=A.current.getBoundingClientRect(),U=kO().scaleExtent([T,R]).translateExtent(b),W=Qr(A.current).call(U),ne=lo.translate(_.x,_.y).scale(rc(_.zoom,T,R)),Q=[[0,0],[J.width,J.height]],se=U.constrain()(ne,Q,b);U.transform(W,se),U.wheelDelta(Dx),K.setState({d3Zoom:U,d3Selection:W,d3ZoomHandler:W.on("wheel.zoom"),transform:[se.x,se.y,se.k],domNode:A.current.closest(".react-flow")})}},[]),O.useEffect(()=>{F&&B&&(c&&!X&&!P?F.on("wheel.zoom",J=>{if(Rl(J,$))return!1;J.preventDefault(),J.stopImmediatePropagation();const U=F.property("__zoom").k||1;if(J.ctrlKey&&a){const _e=Ti(J),Ae=Dx(J),Re=U*Math.pow(2,Ae);B.scaleTo(F,Re,_e,J);return}const W=J.deltaMode===1?20:1;let ne=d===fa.Vertical?0:J.deltaX*W,Q=d===fa.Horizontal?0:J.deltaY*W;!sm()&&J.shiftKey&&d!==fa.Vertical&&(ne=J.deltaY*W,Q=0),B.translateBy(F,-(ne/U)*u,-(Q/U)*u,{internal:!0});const se=bf(F.property("__zoom")),{onViewportChangeStart:fe,onViewportChange:ue,onViewportChangeEnd:ye}=K.getState();clearTimeout(te.current),Y.current||(Y.current=!0,e?.(J,se),fe?.(se)),Y.current&&(t?.(J,se),ue?.(se),te.current=setTimeout(()=>{n?.(J,se),ye?.(se),Y.current=!1},150))},{passive:!1}):typeof D<"u"&&F.on("wheel.zoom",function(J,U){if(!N&&J.type==="wheel"&&!J.ctrlKey||Rl(J,$))return null;J.preventDefault(),D.call(this,J,U)},{passive:!1}))},[P,c,d,F,B,D,X,a,N,$,e,t,n]),O.useEffect(()=>{B&&B.on("start",J=>{if(!J.sourceEvent||J.sourceEvent.internal)return null;z.current=J.sourceEvent?.button;const{onViewportChangeStart:U}=K.getState(),W=bf(J.transform);k.current=!0,V.current=W,J.sourceEvent?.type==="mousedown"&&K.setState({paneDragging:!0}),U?.(W),e?.(J.sourceEvent,W)})},[B,e]),O.useEffect(()=>{B&&(P&&!k.current?B.on("zoom",null):P||B.on("zoom",J=>{const{onViewportChange:U}=K.getState();if(K.setState({transform:[J.transform.x,J.transform.y,J.transform.k]}),S.current=!!(r&&Nx(v,z.current??0)),(t||U)&&!J.sourceEvent?.internal){const W=bf(J.transform);U?.(W),t?.(J.sourceEvent,W)}}))},[P,B,t,v,r]),O.useEffect(()=>{B&&B.on("end",J=>{if(!J.sourceEvent||J.sourceEvent.internal)return null;const{onViewportChangeEnd:U}=K.getState();if(k.current=!1,K.setState({paneDragging:!1}),r&&Nx(v,z.current??0)&&!S.current&&r(J.sourceEvent),S.current=!1,(n||U)&&SV(V.current,J.transform)){const W=bf(J.transform);V.current=W,clearTimeout(G.current),G.current=setTimeout(()=>{U?.(W),n?.(J.sourceEvent,W)},c?150:0)}})},[B,c,v,n,r]),O.useEffect(()=>{B&&B.filter(J=>{const U=X||s,W=a&&J.ctrlKey;if((v===!0||Array.isArray(v)&&v.includes(1))&&J.button===1&&J.type==="mousedown"&&(Rl(J,"react-flow__node")||Rl(J,"react-flow__edge")))return!0;if(!v&&!U&&!c&&!f&&!a||P||!f&&J.type==="dblclick"||Rl(J,$)&&J.type==="wheel"||Rl(J,H)&&(J.type!=="wheel"||c&&J.type==="wheel"&&!X)||!a&&J.ctrlKey&&J.type==="wheel"||!U&&!c&&!W&&J.type==="wheel"||!v&&(J.type==="mousedown"||J.type==="touchstart")||Array.isArray(v)&&!v.includes(J.button)&&J.type==="mousedown")return!1;const ne=Array.isArray(v)&&v.includes(J.button)||!J.button||J.button<=1;return(!J.ctrlKey||J.type==="wheel")&&ne})},[P,B,s,a,c,f,v,p,X]),de.createElement("div",{className:"react-flow__renderer",ref:A,style:Fv},L)},RV=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function IV(){const{userSelectionActive:t,userSelectionRect:e}=Ct(RV,Dn);return t&&e?de.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function kx(t,e){const n=e.parentNode||e.parentId,r=t.find(s=>s.id===n);if(r){const s=e.position.x+e.width-r.width,a=e.position.y+e.height-r.height;if(s>0||a>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,s>0&&(r.style.width+=s),a>0&&(r.style.height+=a),e.position.x<0){const c=Math.abs(e.position.x);r.position.x=r.position.x-c,r.style.width+=c,e.position.x=0}if(e.position.y<0){const c=Math.abs(e.position.y);r.position.y=r.position.y-c,r.style.height+=c,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function rC(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,s)=>{const a=t.filter(u=>u.id===s.id);if(a.length===0)return r.push(s),r;const c={...s};for(const u of a)if(u)switch(u.type){case"select":{c.selected=u.selected;break}case"position":{typeof u.position<"u"&&(c.position=u.position),typeof u.positionAbsolute<"u"&&(c.positionAbsolute=u.positionAbsolute),typeof u.dragging<"u"&&(c.dragging=u.dragging),c.expandParent&&kx(r,c);break}case"dimensions":{typeof u.dimensions<"u"&&(c.width=u.dimensions.width,c.height=u.dimensions.height),typeof u.updateStyle<"u"&&(c.style={...c.style||{},...u.dimensions}),typeof u.resizing=="boolean"&&(c.resizing=u.resizing),c.expandParent&&kx(r,c);break}case"remove":return r}return r.push(c),r},n)}function iC(t,e){return rC(t,e)}function NV(t,e){return rC(t,e)}const Js=(t,e)=>({id:t,type:"select",selected:e});function Ll(t,e){return t.reduce((n,r)=>{const s=e.includes(r.id);return!r.selected&&s?(r.selected=!0,n.push(Js(r.id,!0))):r.selected&&!s&&(r.selected=!1,n.push(Js(r.id,!1))),n},[])}const ky=(t,e)=>n=>{n.target===e.current&&t?.(n)},DV=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),sC=O.memo(({isSelecting:t,selectionMode:e=ch.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:c,onPaneScroll:u,onPaneMouseEnter:d,onPaneMouseMove:f,onPaneMouseLeave:p,children:v})=>{const _=O.useRef(null),b=fn(),T=O.useRef(0),R=O.useRef(0),I=O.useRef(),{userSelectionActive:N,elementsSelectable:L,dragging:$}=Ct(DV,Dn),H=()=>{b.setState({userSelectionActive:!1,userSelectionRect:null}),T.current=0,R.current=0},G=D=>{a?.(D),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1})},K=D=>{if(Array.isArray(n)&&n?.includes(2)){D.preventDefault();return}c?.(D)},k=u?D=>u(D):void 0,S=D=>{const{resetSelectedElements:P,domNode:X}=b.getState();if(I.current=X?.getBoundingClientRect(),!L||!t||D.button!==0||D.target!==_.current||!I.current)return;const{x:z,y:Y}=co(D,I.current);P(),b.setState({userSelectionRect:{width:0,height:0,startX:z,startY:Y,x:z,y:Y}}),r?.(D)},A=D=>{const{userSelectionRect:P,nodeInternals:X,edges:z,transform:Y,onNodesChange:te,onEdgesChange:J,nodeOrigin:U,getNodes:W}=b.getState();if(!t||!I.current||!P)return;b.setState({userSelectionActive:!0,nodesSelectionActive:!1});const ne=co(D,I.current),Q=P.startX??0,se=P.startY??0,fe={...P,x:ne.x<Q?ne.x:Q,y:ne.y<se?ne.y:se,width:Math.abs(ne.x-Q),height:Math.abs(ne.y-se)},ue=W(),ye=z2(X,fe,Y,e===ch.Partial,!0,U),_e=j2(ye,z).map(Re=>Re.id),Ae=ye.map(Re=>Re.id);if(T.current!==Ae.length){T.current=Ae.length;const Re=Ll(ue,Ae);Re.length&&te?.(Re)}if(R.current!==_e.length){R.current=_e.length;const Re=Ll(z,_e);Re.length&&J?.(Re)}b.setState({userSelectionRect:fe})},V=D=>{if(D.button!==0)return;const{userSelectionRect:P}=b.getState();!N&&P&&D.target===_.current&&G?.(D),b.setState({nodesSelectionActive:T.current>0}),H(),s?.(D)},B=D=>{N&&(b.setState({nodesSelectionActive:T.current>0}),s?.(D)),H()},F=L&&(t||N);return de.createElement("div",{className:Fn(["react-flow__pane",{dragging:$,selection:t}]),onClick:F?void 0:ky(G,_),onContextMenu:ky(K,_),onWheel:ky(k,_),onMouseEnter:F?void 0:d,onMouseDown:F?S:void 0,onMouseMove:F?A:f,onMouseUp:F?V:void 0,onMouseLeave:F?B:p,ref:_,style:Fv},v,de.createElement(IV,null))});sC.displayName="Pane";function oC(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:oC(r,e):!1}function Mx(t,e,n){let r=t;do{if(r?.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function kV(t,e,n,r){return Array.from(t.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||s.parentId||!oC(s,t))&&(s.draggable||e&&typeof s.draggable>"u")).map(s=>({id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(s.positionAbsolute?.x??0),y:n.y-(s.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}))}function MV(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function aC(t,e,n,r,s=[0,0],a){const c=MV(t,t.extent||r);let u=c;const d=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(d&&t.width&&t.height){const v=n.get(d),{x:_,y:b}=Yl(v,s).positionAbsolute;u=v&&Ur(_)&&Ur(b)&&Ur(v.width)&&Ur(v.height)?[[_+t.width*s[0],b+t.height*s[1]],[_+v.width-t.width+t.width*s[0],b+v.height-t.height+t.height*s[1]]]:u}else a?.("005",ps.error005()),u=c;else if(t.extent&&d&&t.extent!=="parent"){const v=n.get(d),{x:_,y:b}=Yl(v,s).positionAbsolute;u=[[t.extent[0][0]+_,t.extent[0][1]+b],[t.extent[1][0]+_,t.extent[1][1]+b]]}let f={x:0,y:0};if(d){const v=n.get(d);f=Yl(v,s).positionAbsolute}const p=u&&u!=="parent"?Pv(e,u):e;return{position:{x:p.x-f.x,y:p.y-f.y},positionAbsolute:p}}function My({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?r.find(s=>s.id===t):r[0],r]}const Px=(t,e,n,r)=>{const s=e.querySelectorAll(t);if(!s||!s.length)return null;const a=Array.from(s),c=e.getBoundingClientRect(),u={x:c.width*r[0],y:c.height*r[1]};return a.map(d=>{const f=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),position:d.getAttribute("data-handlepos"),x:(f.left-c.left-u.x)/n,y:(f.top-c.top-u.y)/n,...Mv(d)}})};function Nu(t,e,n){return n===void 0?n:r=>{const s=e().nodeInternals.get(t);s&&n(r,{...s})}}function R0({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:a,multiSelectionActive:c,nodeInternals:u,onError:d}=e.getState(),f=u.get(t);if(!f){d?.("012",ps.error012(t));return}e.setState({nodesSelectionActive:!1}),f.selected?(n||f.selected&&c)&&(a({nodes:[f],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):s([t])}function PV(){const t=fn();return O.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:s,snapToGrid:a}=t.getState(),c=n.touches?n.touches[0].clientX:n.clientX,u=n.touches?n.touches[0].clientY:n.clientY,d={x:(c-r[0])/r[2],y:(u-r[1])/r[2]};return{xSnapped:a?s[0]*Math.round(d.x/s[0]):d.x,ySnapped:a?s[1]*Math.round(d.y/s[1]):d.y,...d}},[])}function Py(t){return(e,n,r)=>t?.(e,r)}function lC({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:a,selectNodesOnDrag:c}){const u=fn(),[d,f]=O.useState(!1),p=O.useRef([]),v=O.useRef({x:null,y:null}),_=O.useRef(0),b=O.useRef(null),T=O.useRef({x:0,y:0}),R=O.useRef(null),I=O.useRef(!1),N=O.useRef(!1),L=O.useRef(!1),$=PV();return O.useEffect(()=>{if(t?.current){const H=Qr(t.current),G=({x:S,y:A})=>{const{nodeInternals:V,onNodeDrag:B,onSelectionDrag:F,updateNodePositions:D,nodeExtent:P,snapGrid:X,snapToGrid:z,nodeOrigin:Y,onError:te}=u.getState();v.current={x:S,y:A};let J=!1,U={x:0,y:0,x2:0,y2:0};if(p.current.length>1&&P){const ne=jv(p.current,Y);U=Ov(ne)}if(p.current=p.current.map(ne=>{const Q={x:S-ne.distance.x,y:A-ne.distance.y};z&&(Q.x=X[0]*Math.round(Q.x/X[0]),Q.y=X[1]*Math.round(Q.y/X[1]));const se=[[P[0][0],P[0][1]],[P[1][0],P[1][1]]];p.current.length>1&&P&&!ne.extent&&(se[0][0]=ne.positionAbsolute.x-U.x+P[0][0],se[1][0]=ne.positionAbsolute.x+(ne.width??0)-U.x2+P[1][0],se[0][1]=ne.positionAbsolute.y-U.y+P[0][1],se[1][1]=ne.positionAbsolute.y+(ne.height??0)-U.y2+P[1][1]);const fe=aC(ne,Q,V,se,Y,te);return J=J||ne.position.x!==fe.position.x||ne.position.y!==fe.position.y,ne.position=fe.position,ne.positionAbsolute=fe.positionAbsolute,ne}),!J)return;D(p.current,!0,!0),f(!0);const W=s?B:Py(F);if(W&&R.current){const[ne,Q]=My({nodeId:s,dragItems:p.current,nodeInternals:V});W(R.current,ne,Q)}},K=()=>{if(!b.current)return;const[S,A]=N2(T.current,b.current);if(S!==0||A!==0){const{transform:V,panBy:B}=u.getState();v.current.x=(v.current.x??0)-S/V[2],v.current.y=(v.current.y??0)-A/V[2],B({x:S,y:A})&&G(v.current)}_.current=requestAnimationFrame(K)},k=S=>{const{nodeInternals:A,multiSelectionActive:V,nodesDraggable:B,unselectNodesAndEdges:F,onNodeDragStart:D,onSelectionDragStart:P}=u.getState();N.current=!0;const X=s?D:Py(P);(!c||!a)&&!V&&s&&(A.get(s)?.selected||F()),s&&a&&c&&R0({id:s,store:u,nodeRef:t});const z=$(S);if(v.current=z,p.current=kV(A,B,z,s),X&&p.current){const[Y,te]=My({nodeId:s,dragItems:p.current,nodeInternals:A});X(S.sourceEvent,Y,te)}};if(e)H.on(".drag",null);else{const S=FP().on("start",A=>{const{domNode:V,nodeDragThreshold:B}=u.getState();B===0&&k(A),L.current=!1;const F=$(A);v.current=F,b.current=V?.getBoundingClientRect()||null,T.current=co(A.sourceEvent,b.current)}).on("drag",A=>{const V=$(A),{autoPanOnNodeDrag:B,nodeDragThreshold:F}=u.getState();if(A.sourceEvent.type==="touchmove"&&A.sourceEvent.touches.length>1&&(L.current=!0),!L.current){if(!I.current&&N.current&&B&&(I.current=!0,K()),!N.current){const D=V.xSnapped-(v?.current?.x??0),P=V.ySnapped-(v?.current?.y??0);Math.sqrt(D*D+P*P)>F&&k(A)}(v.current.x!==V.xSnapped||v.current.y!==V.ySnapped)&&p.current&&N.current&&(R.current=A.sourceEvent,T.current=co(A.sourceEvent,b.current),G(V))}}).on("end",A=>{if(!(!N.current||L.current)&&(f(!1),I.current=!1,N.current=!1,cancelAnimationFrame(_.current),p.current)){const{updateNodePositions:V,nodeInternals:B,onNodeDragStop:F,onSelectionDragStop:D}=u.getState(),P=s?F:Py(D);if(V(p.current,!1,!1),P){const[X,z]=My({nodeId:s,dragItems:p.current,nodeInternals:B});P(A.sourceEvent,X,z)}}}).filter(A=>{const V=A.target;return!A.button&&(!n||!Mx(V,`.${n}`,t))&&(!r||Mx(V,r,t))});return H.call(S),()=>{H.on(".drag",null)}}}},[t,e,n,r,a,u,s,c,$]),d}function cC(){const t=fn();return O.useCallback(n=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:a,getNodes:c,snapToGrid:u,snapGrid:d,onError:f,nodesDraggable:p}=t.getState(),v=c().filter(L=>L.selected&&(L.draggable||p&&typeof L.draggable>"u")),_=u?d[0]:5,b=u?d[1]:5,T=n.isShiftPressed?4:1,R=n.x*_*T,I=n.y*b*T,N=v.map(L=>{if(L.positionAbsolute){const $={x:L.positionAbsolute.x+R,y:L.positionAbsolute.y+I};u&&($.x=d[0]*Math.round($.x/d[0]),$.y=d[1]*Math.round($.y/d[1]));const{positionAbsolute:H,position:G}=aC(L,$,r,s,void 0,f);L.position=G,L.positionAbsolute=H}return L});a(N,!0,!1)},[])}const Kl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Du=t=>{const e=({id:n,type:r,data:s,xPos:a,yPos:c,xPosOrigin:u,yPosOrigin:d,selected:f,onClick:p,onMouseEnter:v,onMouseMove:_,onMouseLeave:b,onContextMenu:T,onDoubleClick:R,style:I,className:N,isDraggable:L,isSelectable:$,isConnectable:H,isFocusable:G,selectNodesOnDrag:K,sourcePosition:k,targetPosition:S,hidden:A,resizeObserver:V,dragHandle:B,zIndex:F,isParent:D,noDragClassName:P,noPanClassName:X,initialized:z,disableKeyboardA11y:Y,ariaLabel:te,rfId:J,hasHandleBounds:U})=>{const W=fn(),ne=O.useRef(null),Q=O.useRef(null),se=O.useRef(k),fe=O.useRef(S),ue=O.useRef(r),ye=$||L||p||v||_||b,_e=cC(),Ae=Nu(n,W.getState,v),Re=Nu(n,W.getState,_),tt=Nu(n,W.getState,b),it=Nu(n,W.getState,T),Ue=Nu(n,W.getState,R),nt=ze=>{const{nodeDragThreshold:be}=W.getState();if($&&(!K||!L||be>0)&&R0({id:n,store:W,nodeRef:ne}),p){const It=W.getState().nodeInternals.get(n);It&&p(ze,{...It})}},st=ze=>{if(!x0(ze)&&!Y)if(k2.includes(ze.key)&&$){const be=ze.key==="Escape";R0({id:n,store:W,unselect:be,nodeRef:ne})}else L&&f&&Object.prototype.hasOwnProperty.call(Kl,ze.key)&&(W.setState({ariaLiveMessage:`Moved selected node ${ze.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~a}, y: ${~~c}`}),_e({x:Kl[ze.key].x,y:Kl[ze.key].y,isShiftPressed:ze.shiftKey}))};O.useEffect(()=>()=>{Q.current&&(V?.unobserve(Q.current),Q.current=null)},[]),O.useEffect(()=>{if(ne.current&&!A){const ze=ne.current;(!z||!U||Q.current!==ze)&&(Q.current&&V?.unobserve(Q.current),V?.observe(ze),Q.current=ze)}},[A,z,U]),O.useEffect(()=>{const ze=ue.current!==r,be=se.current!==k,It=fe.current!==S;ne.current&&(ze||be||It)&&(ze&&(ue.current=r),be&&(se.current=k),It&&(fe.current=S),W.getState().updateNodeDimensions([{id:n,nodeElement:ne.current,forceUpdate:!0}]))},[n,r,k,S]);const Ht=lC({nodeRef:ne,disabled:A||!L,noDragClassName:P,handleSelector:B,nodeId:n,isSelectable:$,selectNodesOnDrag:K});return A?null:de.createElement("div",{className:Fn(["react-flow__node",`react-flow__node-${r}`,{[X]:L},N,{selected:f,selectable:$,parent:D,dragging:Ht}]),ref:ne,style:{zIndex:F,transform:`translate(${u}px,${d}px)`,pointerEvents:ye?"all":"none",visibility:z?"visible":"hidden",...I},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Ae,onMouseMove:Re,onMouseLeave:tt,onContextMenu:it,onClick:nt,onDoubleClick:Ue,onKeyDown:G?st:void 0,tabIndex:G?0:void 0,role:G?"button":void 0,"aria-describedby":Y?void 0:`${Z2}-${J}`,"aria-label":te},de.createElement(KO,{value:n},de.createElement(t,{id:n,data:s,type:r,xPos:a,yPos:c,selected:f,isConnectable:H,sourcePosition:k,targetPosition:S,dragging:Ht,dragHandle:B,zIndex:F})))};return e.displayName="NodeWrapper",O.memo(e)};const OV=t=>{const e=t.getNodes().filter(n=>n.selected);return{...jv(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function VV({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=fn(),{width:s,height:a,x:c,y:u,transformString:d,userSelectionActive:f}=Ct(OV,Dn),p=cC(),v=O.useRef(null);if(O.useEffect(()=>{n||v.current?.focus({preventScroll:!0})},[n]),lC({nodeRef:v}),f||!s||!a)return null;const _=t?T=>{const R=r.getState().getNodes().filter(I=>I.selected);t(T,R)}:void 0,b=T=>{Object.prototype.hasOwnProperty.call(Kl,T.key)&&p({x:Kl[T.key].x,y:Kl[T.key].y,isShiftPressed:T.shiftKey})};return de.createElement("div",{className:Fn(["react-flow__nodesselection","react-flow__container",e]),style:{transform:d}},de.createElement("div",{ref:v,className:"react-flow__nodesselection-rect",onContextMenu:_,tabIndex:n?void 0:-1,onKeyDown:n?void 0:b,style:{width:s,height:a,top:u,left:c}}))}var LV=O.memo(VV);const UV=t=>t.nodesSelectionActive,uC=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:c,deleteKeyCode:u,onMove:d,onMoveStart:f,onMoveEnd:p,selectionKeyCode:v,selectionOnDrag:_,selectionMode:b,onSelectionStart:T,onSelectionEnd:R,multiSelectionKeyCode:I,panActivationKeyCode:N,zoomActivationKeyCode:L,elementsSelectable:$,zoomOnScroll:H,zoomOnPinch:G,panOnScroll:K,panOnScrollSpeed:k,panOnScrollMode:S,zoomOnDoubleClick:A,panOnDrag:V,defaultViewport:B,translateExtent:F,minZoom:D,maxZoom:P,preventScrolling:X,onSelectionContextMenu:z,noWheelClassName:Y,noPanClassName:te,disableKeyboardA11y:J})=>{const U=Ct(UV),W=uh(v),ne=uh(N),Q=ne||V,se=ne||K,fe=W||_&&Q!==!0;return xV({deleteKeyCode:u,multiSelectionKeyCode:I}),de.createElement(CV,{onMove:d,onMoveStart:f,onMoveEnd:p,onPaneContextMenu:a,elementsSelectable:$,zoomOnScroll:H,zoomOnPinch:G,panOnScroll:se,panOnScrollSpeed:k,panOnScrollMode:S,zoomOnDoubleClick:A,panOnDrag:!W&&Q,defaultViewport:B,translateExtent:F,minZoom:D,maxZoom:P,zoomActivationKeyCode:L,preventScrolling:X,noWheelClassName:Y,noPanClassName:te},de.createElement(sC,{onSelectionStart:T,onSelectionEnd:R,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:c,panOnDrag:Q,isSelecting:!!fe,selectionMode:b},t,U&&de.createElement(LV,{onSelectionContextMenu:z,noPanClassName:te,disableKeyboardA11y:J})))};uC.displayName="FlowRenderer";var zV=O.memo(uC);function jV(t){return Ct(O.useCallback(n=>t?z2(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function BV(t){const e={input:Du(t.input||K2),default:Du(t.default||C0),output:Du(t.output||Q2),group:Du(t.group||Hv)},n={},r=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,a)=>(s[a]=Du(t[a]||C0),s),n);return{...e,...r}}const HV=({x:t,y:e,width:n,height:r,origin:s})=>!n||!r?{x:t,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:e}:{x:t-n*s[0],y:e-r*s[1]},FV=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),hC=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:a,onError:c}=Ct(FV,Dn),u=jV(t.onlyRenderVisibleElements),d=O.useRef(),f=O.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const p=new ResizeObserver(v=>{const _=v.map(b=>({id:b.target.getAttribute("data-id"),nodeElement:b.target,forceUpdate:!0}));a(_)});return d.current=p,p},[]);return O.useEffect(()=>()=>{d?.current?.disconnect()},[]),de.createElement("div",{className:"react-flow__nodes",style:Fv},u.map(p=>{let v=p.type||"default";t.nodeTypes[v]||(c?.("003",ps.error003(v)),v="default");const _=t.nodeTypes[v]||t.nodeTypes.default,b=!!(p.draggable||e&&typeof p.draggable>"u"),T=!!(p.selectable||s&&typeof p.selectable>"u"),R=!!(p.connectable||n&&typeof p.connectable>"u"),I=!!(p.focusable||r&&typeof p.focusable>"u"),N=t.nodeExtent?Pv(p.positionAbsolute,t.nodeExtent):p.positionAbsolute,L=N?.x??0,$=N?.y??0,H=HV({x:L,y:$,width:p.width??0,height:p.height??0,origin:t.nodeOrigin});return de.createElement(_,{key:p.id,id:p.id,className:p.className,style:p.style,type:v,data:p.data,sourcePosition:p.sourcePosition||Te.Bottom,targetPosition:p.targetPosition||Te.Top,hidden:p.hidden,xPos:L,yPos:$,xPosOrigin:H.x,yPosOrigin:H.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!p.selected,isDraggable:b,isSelectable:T,isConnectable:R,isFocusable:I,resizeObserver:f,dragHandle:p.dragHandle,zIndex:p[Ot]?.z??0,isParent:!!p[Ot]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!p.width&&!!p.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:p.ariaLabel,hasHandleBounds:!!p[Ot]?.handleBounds})}))};hC.displayName="NodeRenderer";var $V=O.memo(hC);const qV=(t,e,n)=>n===Te.Left?t-e:n===Te.Right?t+e:t,GV=(t,e,n)=>n===Te.Top?t-e:n===Te.Bottom?t+e:t,Ox="react-flow__edgeupdater",Vx=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:a,onMouseOut:c,type:u})=>de.createElement("circle",{onMouseDown:s,onMouseEnter:a,onMouseOut:c,className:Fn([Ox,`${Ox}-${u}`]),cx:qV(e,r,t),cy:GV(n,r,t),r,stroke:"transparent",fill:"transparent"}),YV=()=>!0;var Il=t=>{const e=({id:n,className:r,type:s,data:a,onClick:c,onEdgeDoubleClick:u,selected:d,animated:f,label:p,labelStyle:v,labelShowBg:_,labelBgStyle:b,labelBgPadding:T,labelBgBorderRadius:R,style:I,source:N,target:L,sourceX:$,sourceY:H,targetX:G,targetY:K,sourcePosition:k,targetPosition:S,elementsSelectable:A,hidden:V,sourceHandleId:B,targetHandleId:F,onContextMenu:D,onMouseEnter:P,onMouseMove:X,onMouseLeave:z,reconnectRadius:Y,onReconnect:te,onReconnectStart:J,onReconnectEnd:U,markerEnd:W,markerStart:ne,rfId:Q,ariaLabel:se,isFocusable:fe,isReconnectable:ue,pathOptions:ye,interactionWidth:_e,disableKeyboardA11y:Ae})=>{const Re=O.useRef(null),[tt,it]=O.useState(!1),[Ue,nt]=O.useState(!1),st=fn(),Ht=O.useMemo(()=>`url('#${S0(ne,Q)}')`,[ne,Q]),ze=O.useMemo(()=>`url('#${S0(W,Q)}')`,[W,Q]);if(V)return null;const be=$t=>{const{edges:sn,addSelectedEdges:On,unselectNodesAndEdges:Vn,multiSelectionActive:on}=st.getState(),mn=sn.find(Ln=>Ln.id===n);mn&&(A&&(st.setState({nodesSelectionActive:!1}),mn.selected&&on?(Vn({nodes:[],edges:[mn]}),Re.current?.blur()):On([n])),c&&c($t,mn))},It=Iu(n,st.getState,u),Tn=Iu(n,st.getState,D),Wt=Iu(n,st.getState,P),Jn=Iu(n,st.getState,X),Mn=Iu(n,st.getState,z),Pn=($t,sn)=>{if($t.button!==0)return;const{edges:On,isValidConnection:Vn}=st.getState(),on=sn?L:N,mn=(sn?F:B)||null,Ln=sn?"target":"source",Ui=Vn||YV,zi=sn,Hr=On.find(tr=>tr.id===n);nt(!0),J?.($t,Hr,Ln);const er=tr=>{nt(!1),U?.(tr,Hr,Ln)};$2({event:$t,handleId:mn,nodeId:on,onConnect:tr=>te?.(Hr,tr),isTarget:zi,getState:st.getState,setState:st.setState,isValidConnection:Ui,edgeUpdaterType:Ln,onReconnectEnd:er})},Br=$t=>Pn($t,!0),at=$t=>Pn($t,!1),Ge=()=>it(!0),Ft=()=>it(!1),xt=!A&&!c,ii=$t=>{if(!Ae&&k2.includes($t.key)&&A){const{unselectNodesAndEdges:sn,addSelectedEdges:On,edges:Vn}=st.getState();$t.key==="Escape"?(Re.current?.blur(),sn({edges:[Vn.find(mn=>mn.id===n)]})):On([n])}};return de.createElement("g",{className:Fn(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:d,animated:f,inactive:xt,updating:tt}]),onClick:be,onDoubleClick:It,onContextMenu:Tn,onMouseEnter:Wt,onMouseMove:Jn,onMouseLeave:Mn,onKeyDown:fe?ii:void 0,tabIndex:fe?0:void 0,role:fe?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":se===null?void 0:se||`Edge from ${N} to ${L}`,"aria-describedby":fe?`${J2}-${Q}`:void 0,ref:Re},!Ue&&de.createElement(t,{id:n,source:N,target:L,selected:d,animated:f,label:p,labelStyle:v,labelShowBg:_,labelBgStyle:b,labelBgPadding:T,labelBgBorderRadius:R,data:a,style:I,sourceX:$,sourceY:H,targetX:G,targetY:K,sourcePosition:k,targetPosition:S,sourceHandleId:B,targetHandleId:F,markerStart:Ht,markerEnd:ze,pathOptions:ye,interactionWidth:_e}),ue&&de.createElement(de.Fragment,null,(ue==="source"||ue===!0)&&de.createElement(Vx,{position:k,centerX:$,centerY:H,radius:Y,onMouseDown:Br,onMouseEnter:Ge,onMouseOut:Ft,type:"source"}),(ue==="target"||ue===!0)&&de.createElement(Vx,{position:S,centerX:G,centerY:K,radius:Y,onMouseDown:at,onMouseEnter:Ge,onMouseOut:Ft,type:"target"})))};return e.displayName="EdgeWrapper",O.memo(e)};function KV(t){const e={default:Il(t.default||om),straight:Il(t.bezier||Uv),step:Il(t.step||Lv),smoothstep:Il(t.step||jm),simplebezier:Il(t.simplebezier||Vv)},n={},r=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,a)=>(s[a]=Il(t[a]||om),s),n);return{...e,...r}}function Lx(t,e,n=null){const r=(n?.x||0)+e.x,s=(n?.y||0)+e.y,a=n?.width||e.width,c=n?.height||e.height;switch(t){case Te.Top:return{x:r+a/2,y:s};case Te.Right:return{x:r+a,y:s+c/2};case Te.Bottom:return{x:r+a/2,y:s+c};case Te.Left:return{x:r,y:s+c/2}}}function Ux(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const XV=(t,e,n,r,s,a)=>{const c=Lx(n,t,e),u=Lx(a,r,s);return{sourceX:c.x,sourceY:c.y,targetX:u.x,targetY:u.y}};function QV({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:s,targetHeight:a,width:c,height:u,transform:d}){const f={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+s),y2:Math.max(t.y+r,e.y+a)};f.x===f.x2&&(f.x2+=1),f.y===f.y2&&(f.y2+=1);const p=Ov({x:(0-d[0])/d[2],y:(0-d[1])/d[2],width:c/d[2],height:u/d[2]}),v=Math.max(0,Math.min(p.x2,f.x2)-Math.max(p.x,f.x)),_=Math.max(0,Math.min(p.y2,f.y2)-Math.max(p.y,f.y));return Math.ceil(v*_)>0}function zx(t){const e=t?.[Ot]?.handleBounds||null,n=e&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},e,!!n]}const WV=[{level:0,isMaxLevel:!0,edges:[]}];function ZV(t,e,n=!1){let r=-1;const s=t.reduce((c,u)=>{const d=Ur(u.zIndex);let f=d?u.zIndex:0;if(n){const p=e.get(u.target),v=e.get(u.source),_=u.selected||p?.selected||v?.selected,b=Math.max(v?.[Ot]?.z||0,p?.[Ot]?.z||0,1e3);f=(d?u.zIndex:0)+(_?b:0)}return c[f]?c[f].push(u):c[f]=[u],r=f>r?f:r,c},{}),a=Object.entries(s).map(([c,u])=>{const d=+c;return{edges:u,level:d,isMaxLevel:d===r}});return a.length===0?WV:a}function JV(t,e,n){const r=Ct(O.useCallback(s=>t?s.edges.filter(a=>{const c=e.get(a.source),u=e.get(a.target);return c?.width&&c?.height&&u?.width&&u?.height&&QV({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:u.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:u.width,targetHeight:u.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,e]));return ZV(r,e,n)}const e5=({color:t="none",strokeWidth:e=1})=>de.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),t5=({color:t="none",strokeWidth:e=1})=>de.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),jx={[wa.Arrow]:e5,[wa.ArrowClosed]:t5};function n5(t){const e=fn();return O.useMemo(()=>Object.prototype.hasOwnProperty.call(jx,t)?jx[t]:(e.getState().onError?.("009",ps.error009(t)),null),[t])}const r5=({id:t,type:e,color:n,width:r=12.5,height:s=12.5,markerUnits:a="strokeWidth",strokeWidth:c,orient:u="auto-start-reverse"})=>{const d=n5(e);return d?de.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:u,refX:"0",refY:"0"},de.createElement(d,{color:n,strokeWidth:c})):null},i5=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((s,a)=>([a.markerStart,a.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const u=S0(c,e);r.includes(u)||(s.push({id:u,color:c.color||t,...c}),r.push(u))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))},dC=({defaultColor:t,rfId:e})=>{const n=Ct(O.useCallback(i5({defaultColor:t,rfId:e}),[t,e]),(r,s)=>!(r.length!==s.length||r.some((a,c)=>a.id!==s[c].id)));return de.createElement("defs",null,n.map(r=>de.createElement(r5,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};dC.displayName="MarkerDefinitions";var s5=O.memo(dC);const o5=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),fC=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:s,noPanClassName:a,onEdgeContextMenu:c,onEdgeMouseEnter:u,onEdgeMouseMove:d,onEdgeMouseLeave:f,onEdgeClick:p,onEdgeDoubleClick:v,onReconnect:_,onReconnectStart:b,onReconnectEnd:T,reconnectRadius:R,children:I,disableKeyboardA11y:N})=>{const{edgesFocusable:L,edgesUpdatable:$,elementsSelectable:H,width:G,height:K,connectionMode:k,nodeInternals:S,onError:A}=Ct(o5,Dn),V=JV(e,S,n);return G?de.createElement(de.Fragment,null,V.map(({level:B,edges:F,isMaxLevel:D})=>de.createElement("svg",{key:B,style:{zIndex:B},width:G,height:K,className:"react-flow__edges react-flow__container"},D&&de.createElement(s5,{defaultColor:t,rfId:r}),de.createElement("g",null,F.map(P=>{const[X,z,Y]=zx(S.get(P.source)),[te,J,U]=zx(S.get(P.target));if(!Y||!U)return null;let W=P.type||"default";s[W]||(A?.("011",ps.error011(W)),W="default");const ne=s[W]||s.default,Q=k===go.Strict?J.target:(J.target??[]).concat(J.source??[]),se=Ux(z.source,P.sourceHandle),fe=Ux(Q,P.targetHandle),ue=se?.position||Te.Bottom,ye=fe?.position||Te.Top,_e=!!(P.focusable||L&&typeof P.focusable>"u"),Ae=P.reconnectable||P.updatable,Re=typeof _<"u"&&(Ae||$&&typeof Ae>"u");if(!se||!fe)return A?.("008",ps.error008(se,P)),null;const{sourceX:tt,sourceY:it,targetX:Ue,targetY:nt}=XV(X,se,ue,te,fe,ye);return de.createElement(ne,{key:P.id,id:P.id,className:Fn([P.className,a]),type:W,data:P.data,selected:!!P.selected,animated:!!P.animated,hidden:!!P.hidden,label:P.label,labelStyle:P.labelStyle,labelShowBg:P.labelShowBg,labelBgStyle:P.labelBgStyle,labelBgPadding:P.labelBgPadding,labelBgBorderRadius:P.labelBgBorderRadius,style:P.style,source:P.source,target:P.target,sourceHandleId:P.sourceHandle,targetHandleId:P.targetHandle,markerEnd:P.markerEnd,markerStart:P.markerStart,sourceX:tt,sourceY:it,targetX:Ue,targetY:nt,sourcePosition:ue,targetPosition:ye,elementsSelectable:H,onContextMenu:c,onMouseEnter:u,onMouseMove:d,onMouseLeave:f,onClick:p,onEdgeDoubleClick:v,onReconnect:_,onReconnectStart:b,onReconnectEnd:T,reconnectRadius:R,rfId:r,ariaLabel:P.ariaLabel,isFocusable:_e,isReconnectable:Re,pathOptions:"pathOptions"in P?P.pathOptions:void 0,interactionWidth:P.interactionWidth,disableKeyboardA11y:N})})))),I):null};fC.displayName="EdgeRenderer";var a5=O.memo(fC);const l5=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function c5({children:t}){const e=Ct(l5);return de.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function u5(t){const e=Ph(),n=O.useRef(!1);O.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const h5={[Te.Left]:Te.Right,[Te.Right]:Te.Left,[Te.Top]:Te.Bottom,[Te.Bottom]:Te.Top},mC=({nodeId:t,handleType:e,style:n,type:r=eo.Bezier,CustomComponent:s,connectionStatus:a})=>{const{fromNode:c,handleId:u,toX:d,toY:f,connectionMode:p}=Ct(O.useCallback(K=>({fromNode:K.nodeInternals.get(t),handleId:K.connectionHandleId,toX:(K.connectionPosition.x-K.transform[0])/K.transform[2],toY:(K.connectionPosition.y-K.transform[1])/K.transform[2],connectionMode:K.connectionMode}),[t]),Dn),v=c?.[Ot]?.handleBounds;let _=v?.[e];if(p===go.Loose&&(_=_||v?.[e==="source"?"target":"source"]),!c||!_)return null;const b=u?_.find(K=>K.id===u):_[0],T=b?b.x+b.width/2:(c.width??0)/2,R=b?b.y+b.height/2:c.height??0,I=(c.positionAbsolute?.x??0)+T,N=(c.positionAbsolute?.y??0)+R,L=b?.position,$=L?h5[L]:null;if(!L||!$)return null;if(s)return de.createElement(s,{connectionLineType:r,connectionLineStyle:n,fromNode:c,fromHandle:b,fromX:I,fromY:N,toX:d,toY:f,fromPosition:L,toPosition:$,connectionStatus:a});let H="";const G={sourceX:I,sourceY:N,sourcePosition:L,targetX:d,targetY:f,targetPosition:$};return r===eo.Bezier?[H]=L2(G):r===eo.Step?[H]=T0({...G,borderRadius:0}):r===eo.SmoothStep?[H]=T0(G):r===eo.SimpleBezier?[H]=V2(G):H=`M${I},${N} ${d},${f}`,de.createElement("path",{d:H,fill:"none",className:"react-flow__connection-path",style:n})};mC.displayName="ConnectionLine";const d5=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function f5({containerStyle:t,style:e,type:n,component:r}){const{nodeId:s,handleType:a,nodesConnectable:c,width:u,height:d,connectionStatus:f}=Ct(d5,Dn);return!(s&&a&&u&&c)?null:de.createElement("svg",{style:t,width:u,height:d,className:"react-flow__edges react-flow__connectionline react-flow__container"},de.createElement("g",{className:Fn(["react-flow__connection",f])},de.createElement(mC,{nodeId:s,handleType:a,style:e,type:n,CustomComponent:r,connectionStatus:f})))}function Bx(t,e){return O.useRef(null),fn(),O.useMemo(()=>e(t),[t])}const pC=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:s,onInit:a,onNodeClick:c,onEdgeClick:u,onNodeDoubleClick:d,onEdgeDoubleClick:f,onNodeMouseEnter:p,onNodeMouseMove:v,onNodeMouseLeave:_,onNodeContextMenu:b,onSelectionContextMenu:T,onSelectionStart:R,onSelectionEnd:I,connectionLineType:N,connectionLineStyle:L,connectionLineComponent:$,connectionLineContainerStyle:H,selectionKeyCode:G,selectionOnDrag:K,selectionMode:k,multiSelectionKeyCode:S,panActivationKeyCode:A,zoomActivationKeyCode:V,deleteKeyCode:B,onlyRenderVisibleElements:F,elementsSelectable:D,selectNodesOnDrag:P,defaultViewport:X,translateExtent:z,minZoom:Y,maxZoom:te,preventScrolling:J,defaultMarkerColor:U,zoomOnScroll:W,zoomOnPinch:ne,panOnScroll:Q,panOnScrollSpeed:se,panOnScrollMode:fe,zoomOnDoubleClick:ue,panOnDrag:ye,onPaneClick:_e,onPaneMouseEnter:Ae,onPaneMouseMove:Re,onPaneMouseLeave:tt,onPaneScroll:it,onPaneContextMenu:Ue,onEdgeContextMenu:nt,onEdgeMouseEnter:st,onEdgeMouseMove:Ht,onEdgeMouseLeave:ze,onReconnect:be,onReconnectStart:It,onReconnectEnd:Tn,reconnectRadius:Wt,noDragClassName:Jn,noWheelClassName:Mn,noPanClassName:Pn,elevateEdgesOnSelect:Br,disableKeyboardA11y:at,nodeOrigin:Ge,nodeExtent:Ft,rfId:xt})=>{const ii=Bx(t,BV),$t=Bx(e,KV);return u5(a),de.createElement(zV,{onPaneClick:_e,onPaneMouseEnter:Ae,onPaneMouseMove:Re,onPaneMouseLeave:tt,onPaneContextMenu:Ue,onPaneScroll:it,deleteKeyCode:B,selectionKeyCode:G,selectionOnDrag:K,selectionMode:k,onSelectionStart:R,onSelectionEnd:I,multiSelectionKeyCode:S,panActivationKeyCode:A,zoomActivationKeyCode:V,elementsSelectable:D,onMove:n,onMoveStart:r,onMoveEnd:s,zoomOnScroll:W,zoomOnPinch:ne,zoomOnDoubleClick:ue,panOnScroll:Q,panOnScrollSpeed:se,panOnScrollMode:fe,panOnDrag:ye,defaultViewport:X,translateExtent:z,minZoom:Y,maxZoom:te,onSelectionContextMenu:T,preventScrolling:J,noDragClassName:Jn,noWheelClassName:Mn,noPanClassName:Pn,disableKeyboardA11y:at},de.createElement(c5,null,de.createElement(a5,{edgeTypes:$t,onEdgeClick:u,onEdgeDoubleClick:f,onlyRenderVisibleElements:F,onEdgeContextMenu:nt,onEdgeMouseEnter:st,onEdgeMouseMove:Ht,onEdgeMouseLeave:ze,onReconnect:be,onReconnectStart:It,onReconnectEnd:Tn,reconnectRadius:Wt,defaultMarkerColor:U,noPanClassName:Pn,elevateEdgesOnSelect:!!Br,disableKeyboardA11y:at,rfId:xt},de.createElement(f5,{style:L,type:N,component:$,containerStyle:H})),de.createElement("div",{className:"react-flow__edgelabel-renderer"}),de.createElement($V,{nodeTypes:ii,onNodeClick:c,onNodeDoubleClick:d,onNodeMouseEnter:p,onNodeMouseMove:v,onNodeMouseLeave:_,onNodeContextMenu:b,selectNodesOnDrag:P,onlyRenderVisibleElements:F,noPanClassName:Pn,noDragClassName:Jn,disableKeyboardA11y:at,nodeOrigin:Ge,nodeExtent:Ft,rfId:xt})))};pC.displayName="GraphView";var m5=O.memo(pC);const I0=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Xs={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:I0,nodeExtent:I0,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:go.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:HO,isValidConnection:void 0},p5=()=>t4((t,e)=>({...Xs,setNodes:n=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:a}=e();t({nodeInternals:Dy(n,r,s,a)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(n,r)=>{const s=typeof n<"u",a=typeof r<"u",c=s?Dy(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:c,edges:a?r:[],hasDefaultNodes:s,hasDefaultEdges:a})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:a,fitViewOnInitDone:c,fitViewOnInitOptions:u,domNode:d,nodeOrigin:f}=e(),p=d?.querySelector(".react-flow__viewport");if(!p)return;const v=window.getComputedStyle(p),{m22:_}=new window.DOMMatrixReadOnly(v.transform),b=n.reduce((R,I)=>{const N=s.get(I.id);if(N?.hidden)s.set(N.id,{...N,[Ot]:{...N[Ot],handleBounds:void 0}});else if(N){const L=Mv(I.nodeElement);!!(L.width&&L.height&&(N.width!==L.width||N.height!==L.height||I.forceUpdate))&&(s.set(N.id,{...N,[Ot]:{...N[Ot],handleBounds:{source:Px(".source",I.nodeElement,_,f),target:Px(".target",I.nodeElement,_,f)}},...L}),R.push({id:N.id,type:"dimensions",dimensions:L}))}return R},[]);tC(s,f);const T=c||a&&!c&&nC(e,{initial:!0,...u});t({nodeInternals:new Map(s),fitViewOnInitDone:T}),b?.length>0&&r?.(b)},updateNodePositions:(n,r=!0,s=!1)=>{const{triggerNodeChanges:a}=e(),c=n.map(u=>{const d={id:u.id,type:"position",dragging:s};return r&&(d.positionAbsolute=u.positionAbsolute,d.position=u.position),d});a(c)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:a,nodeOrigin:c,getNodes:u,elevateNodesOnSelect:d}=e();if(n?.length){if(a){const f=iC(n,u()),p=Dy(f,s,c,d);t({nodeInternals:p})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:s,getNodes:a}=e();let c,u=null;r?c=n.map(d=>Js(d,!0)):(c=Ll(a(),n),u=Ll(s,[])),Ef({changedNodes:c,changedEdges:u,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:s,getNodes:a}=e();let c,u=null;r?c=n.map(d=>Js(d,!0)):(c=Ll(s,n),u=Ll(a(),[])),Ef({changedNodes:u,changedEdges:c,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:s,getNodes:a}=e(),c=n||a(),u=r||s,d=c.map(p=>(p.selected=!1,Js(p.id,!1))),f=u.map(p=>Js(p.id,!1));Ef({changedNodes:d,changedEdges:f,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:s}=e();r?.scaleExtent([n,s]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:s}=e();r?.scaleExtent([s,n]),t({maxZoom:n})},setTranslateExtent:n=>{e().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),a=r().filter(u=>u.selected).map(u=>Js(u.id,!1)),c=n.filter(u=>u.selected).map(u=>Js(u.id,!1));Ef({changedNodes:a,changedEdges:c,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(s=>{s.positionAbsolute=Pv(s.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:s,height:a,d3Zoom:c,d3Selection:u,translateExtent:d}=e();if(!c||!u||!n.x&&!n.y)return!1;const f=lo.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),p=[[0,0],[s,a]],v=c?.constrain()(f,p,d);return c.transform(u,v),r[0]!==v.x||r[1]!==v.y||r[2]!==v.k},cancelConnection:()=>t({connectionNodeId:Xs.connectionNodeId,connectionHandleId:Xs.connectionHandleId,connectionHandleType:Xs.connectionHandleType,connectionStatus:Xs.connectionStatus,connectionStartHandle:Xs.connectionStartHandle,connectionEndHandle:Xs.connectionEndHandle}),reset:()=>t({...Xs})}),Object.is),gC=({children:t})=>{const e=O.useRef(null);return e.current||(e.current=p5()),de.createElement(PO,{value:e.current},t)};gC.displayName="ReactFlowProvider";const yC=({children:t})=>O.useContext(zm)?de.createElement(de.Fragment,null,t):de.createElement(gC,null,t);yC.displayName="ReactFlowWrapper";const g5={input:K2,default:C0,output:Q2,group:Hv},y5={default:om,straight:Uv,step:Lv,smoothstep:jm,simplebezier:Vv},v5=[0,0],_5=[15,15],E5={x:0,y:0,zoom:1},b5={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},vC=O.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:a=g5,edgeTypes:c=y5,onNodeClick:u,onEdgeClick:d,onInit:f,onMove:p,onMoveStart:v,onMoveEnd:_,onConnect:b,onConnectStart:T,onConnectEnd:R,onClickConnectStart:I,onClickConnectEnd:N,onNodeMouseEnter:L,onNodeMouseMove:$,onNodeMouseLeave:H,onNodeContextMenu:G,onNodeDoubleClick:K,onNodeDragStart:k,onNodeDrag:S,onNodeDragStop:A,onNodesDelete:V,onEdgesDelete:B,onSelectionChange:F,onSelectionDragStart:D,onSelectionDrag:P,onSelectionDragStop:X,onSelectionContextMenu:z,onSelectionStart:Y,onSelectionEnd:te,connectionMode:J=go.Strict,connectionLineType:U=eo.Bezier,connectionLineStyle:W,connectionLineComponent:ne,connectionLineContainerStyle:Q,deleteKeyCode:se="Backspace",selectionKeyCode:fe="Shift",selectionOnDrag:ue=!1,selectionMode:ye=ch.Full,panActivationKeyCode:_e="Space",multiSelectionKeyCode:Ae=sm()?"Meta":"Control",zoomActivationKeyCode:Re=sm()?"Meta":"Control",snapToGrid:tt=!1,snapGrid:it=_5,onlyRenderVisibleElements:Ue=!1,selectNodesOnDrag:nt=!0,nodesDraggable:st,nodesConnectable:Ht,nodesFocusable:ze,nodeOrigin:be=v5,edgesFocusable:It,edgesUpdatable:Tn,elementsSelectable:Wt,defaultViewport:Jn=E5,minZoom:Mn=.5,maxZoom:Pn=2,translateExtent:Br=I0,preventScrolling:at=!0,nodeExtent:Ge,defaultMarkerColor:Ft="#b1b1b7",zoomOnScroll:xt=!0,zoomOnPinch:ii=!0,panOnScroll:$t=!1,panOnScrollSpeed:sn=.5,panOnScrollMode:On=fa.Free,zoomOnDoubleClick:Vn=!0,panOnDrag:on=!0,onPaneClick:mn,onPaneMouseEnter:Ln,onPaneMouseMove:Ui,onPaneMouseLeave:zi,onPaneScroll:Hr,onPaneContextMenu:er,children:_r,onEdgeContextMenu:tr,onEdgeDoubleClick:Er,onEdgeMouseEnter:Do,onEdgeMouseMove:si,onEdgeMouseLeave:xs,onEdgeUpdate:oi,onEdgeUpdateStart:Va,onEdgeUpdateEnd:yt,onReconnect:Lt,onReconnectStart:Nt,onReconnectEnd:$n,reconnectRadius:ko=10,edgeUpdaterRadius:Ac=10,onNodesChange:ai,onEdgesChange:La,noDragClassName:ji="nodrag",noWheelClassName:li="nowheel",noPanClassName:br="nopan",fitView:wr=!1,fitViewOptions:xr,connectOnClick:pn=!0,attributionPosition:Tt,proOptions:Mo,defaultEdgeOptions:Ts,elevateNodesOnSelect:nr=!0,elevateEdgesOnSelect:Fr=!1,disableKeyboardA11y:Po=!1,autoPanOnConnect:Ua=!0,autoPanOnNodeDrag:Bi=!0,connectionRadius:za=20,isValidConnection:ci,onError:Tr,style:Zt,id:ui,nodeDragThreshold:ja,...$r},Ss)=>{const hi=ui||"1";return de.createElement("div",{...$r,style:{...Zt,...b5},ref:Ss,className:Fn(["react-flow",s]),"data-testid":"rf__wrapper",id:ui},de.createElement(yC,null,de.createElement(m5,{onInit:f,onMove:p,onMoveStart:v,onMoveEnd:_,onNodeClick:u,onEdgeClick:d,onNodeMouseEnter:L,onNodeMouseMove:$,onNodeMouseLeave:H,onNodeContextMenu:G,onNodeDoubleClick:K,nodeTypes:a,edgeTypes:c,connectionLineType:U,connectionLineStyle:W,connectionLineComponent:ne,connectionLineContainerStyle:Q,selectionKeyCode:fe,selectionOnDrag:ue,selectionMode:ye,deleteKeyCode:se,multiSelectionKeyCode:Ae,panActivationKeyCode:_e,zoomActivationKeyCode:Re,onlyRenderVisibleElements:Ue,selectNodesOnDrag:nt,defaultViewport:Jn,translateExtent:Br,minZoom:Mn,maxZoom:Pn,preventScrolling:at,zoomOnScroll:xt,zoomOnPinch:ii,zoomOnDoubleClick:Vn,panOnScroll:$t,panOnScrollSpeed:sn,panOnScrollMode:On,panOnDrag:on,onPaneClick:mn,onPaneMouseEnter:Ln,onPaneMouseMove:Ui,onPaneMouseLeave:zi,onPaneScroll:Hr,onPaneContextMenu:er,onSelectionContextMenu:z,onSelectionStart:Y,onSelectionEnd:te,onEdgeContextMenu:tr,onEdgeDoubleClick:Er,onEdgeMouseEnter:Do,onEdgeMouseMove:si,onEdgeMouseLeave:xs,onReconnect:Lt??oi,onReconnectStart:Nt??Va,onReconnectEnd:$n??yt,reconnectRadius:ko??Ac,defaultMarkerColor:Ft,noDragClassName:ji,noWheelClassName:li,noPanClassName:br,elevateEdgesOnSelect:Fr,rfId:hi,disableKeyboardA11y:Po,nodeOrigin:be,nodeExtent:Ge}),de.createElement(hV,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:b,onConnectStart:T,onConnectEnd:R,onClickConnectStart:I,onClickConnectEnd:N,nodesDraggable:st,nodesConnectable:Ht,nodesFocusable:ze,edgesFocusable:It,edgesUpdatable:Tn,elementsSelectable:Wt,elevateNodesOnSelect:nr,minZoom:Mn,maxZoom:Pn,nodeExtent:Ge,onNodesChange:ai,onEdgesChange:La,snapToGrid:tt,snapGrid:it,connectionMode:J,translateExtent:Br,connectOnClick:pn,defaultEdgeOptions:Ts,fitView:wr,fitViewOptions:xr,onNodesDelete:V,onEdgesDelete:B,onNodeDragStart:k,onNodeDrag:S,onNodeDragStop:A,onSelectionDrag:P,onSelectionDragStart:D,onSelectionDragStop:X,noPanClassName:br,nodeOrigin:be,rfId:hi,autoPanOnConnect:Ua,autoPanOnNodeDrag:Bi,onError:Tr,connectionRadius:za,isValidConnection:ci,nodeDragThreshold:ja}),de.createElement(cV,{onSelectionChange:F}),_r,de.createElement(VO,{proOptions:Mo,position:Tt}),de.createElement(gV,{rfId:hi,disableKeyboardA11y:Po})))});vC.displayName="ReactFlow";function _C(t){return e=>{const[n,r]=O.useState(e),s=O.useCallback(a=>r(c=>t(a,c)),[]);return[n,r,s]}}const w5=_C(iC),x5=_C(NV);function T5(){return de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},de.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function S5(){return de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},de.createElement("path",{d:"M0 0h32v4.2H0z"}))}function A5(){return de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},de.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function C5(){return de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},de.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function R5(){return de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},de.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Lu=({children:t,className:e,...n})=>de.createElement("button",{type:"button",className:Fn(["react-flow__controls-button",e]),...n},t);Lu.displayName="ControlButton";const I5=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),EC=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:a,onZoomOut:c,onFitView:u,onInteractiveChange:d,className:f,children:p,position:v="bottom-left"})=>{const _=fn(),[b,T]=O.useState(!1),{isInteractive:R,minZoomReached:I,maxZoomReached:N}=Ct(I5,Dn),{zoomIn:L,zoomOut:$,fitView:H}=Ph();if(O.useEffect(()=>{T(!0)},[]),!b)return null;const G=()=>{L(),a?.()},K=()=>{$(),c?.()},k=()=>{H(s),u?.()},S=()=>{_.setState({nodesDraggable:!R,nodesConnectable:!R,elementsSelectable:!R}),d?.(!R)};return de.createElement(I2,{className:Fn(["react-flow__controls",f]),position:v,style:t,"data-testid":"rf__controls"},e&&de.createElement(de.Fragment,null,de.createElement(Lu,{onClick:G,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:N},de.createElement(T5,null)),de.createElement(Lu,{onClick:K,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:I},de.createElement(S5,null))),n&&de.createElement(Lu,{className:"react-flow__controls-fitview",onClick:k,title:"fit view","aria-label":"fit view"},de.createElement(A5,null)),r&&de.createElement(Lu,{className:"react-flow__controls-interactive",onClick:S,title:"toggle interactivity","aria-label":"toggle interactivity"},R?de.createElement(R5,null):de.createElement(C5,null)),p)};EC.displayName="Controls";var N5=O.memo(EC),zr;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(zr||(zr={}));function D5({color:t,dimensions:e,lineWidth:n}){return de.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function k5({color:t,radius:e}){return de.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const M5={[zr.Dots]:"#91919a",[zr.Lines]:"#eee",[zr.Cross]:"#e2e2e2"},P5={[zr.Dots]:1,[zr.Lines]:1,[zr.Cross]:6},O5=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function bC({id:t,variant:e=zr.Dots,gap:n=20,size:r,lineWidth:s=1,offset:a=2,color:c,style:u,className:d}){const f=O.useRef(null),{transform:p,patternId:v}=Ct(O5,Dn),_=c||M5[e],b=r||P5[e],T=e===zr.Dots,R=e===zr.Cross,I=Array.isArray(n)?n:[n,n],N=[I[0]*p[2]||1,I[1]*p[2]||1],L=b*p[2],$=R?[L,L]:N,H=T?[L/a,L/a]:[$[0]/a,$[1]/a];return de.createElement("svg",{className:Fn(["react-flow__background",d]),style:{...u,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:f,"data-testid":"rf__background"},de.createElement("pattern",{id:v+t,x:p[0]%N[0],y:p[1]%N[1],width:N[0],height:N[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${H[0]},-${H[1]})`},T?de.createElement(k5,{color:_,radius:L/a}):de.createElement(D5,{dimensions:$,color:_,lineWidth:s})),de.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${v+t})`}))}bC.displayName="Background";var V5=O.memo(bC);const Bm=O.createContext(null);Bm.displayName="PanelGroupContext";const Pt={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},$v=10,va=O.useLayoutEffect,Hx=LM.useId,L5=typeof Hx=="function"?Hx:()=>null;let U5=0;function qv(t=null){const e=L5(),n=O.useRef(t||e||null);return n.current===null&&(n.current=""+U5++),t??n.current}function wC({children:t,className:e="",collapsedSize:n,collapsible:r,defaultSize:s,forwardedRef:a,id:c,maxSize:u,minSize:d,onCollapse:f,onExpand:p,onResize:v,order:_,style:b,tagName:T="div",...R}){const I=O.useContext(Bm);if(I===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:N,expandPanel:L,getPanelSize:$,getPanelStyle:H,groupId:G,isPanelCollapsed:K,reevaluatePanelConstraints:k,registerPanel:S,resizePanel:A,unregisterPanel:V}=I,B=qv(c),F=O.useRef({callbacks:{onCollapse:f,onExpand:p,onResize:v},constraints:{collapsedSize:n,collapsible:r,defaultSize:s,maxSize:u,minSize:d},id:B,idIsFromProps:c!==void 0,order:_});O.useRef({didLogMissingDefaultSizeWarning:!1}),va(()=>{const{callbacks:P,constraints:X}=F.current,z={...X};F.current.id=B,F.current.idIsFromProps=c!==void 0,F.current.order=_,P.onCollapse=f,P.onExpand=p,P.onResize=v,X.collapsedSize=n,X.collapsible=r,X.defaultSize=s,X.maxSize=u,X.minSize=d,(z.collapsedSize!==X.collapsedSize||z.collapsible!==X.collapsible||z.maxSize!==X.maxSize||z.minSize!==X.minSize)&&k(F.current,z)}),va(()=>{const P=F.current;return S(P),()=>{V(P)}},[_,B,S,V]),O.useImperativeHandle(a,()=>({collapse:()=>{N(F.current)},expand:P=>{L(F.current,P)},getId(){return B},getSize(){return $(F.current)},isCollapsed(){return K(F.current)},isExpanded(){return!K(F.current)},resize:P=>{A(F.current,P)}}),[N,L,$,K,B,A]);const D=H(F.current,s);return O.createElement(T,{...R,children:t,className:e,id:B,style:{...D,...b},[Pt.groupId]:G,[Pt.panel]:"",[Pt.panelCollapsible]:r||void 0,[Pt.panelId]:B,[Pt.panelSize]:parseFloat(""+D.flexGrow).toFixed(1)})}const N0=O.forwardRef((t,e)=>O.createElement(wC,{...t,forwardedRef:e}));wC.displayName="Panel";N0.displayName="forwardRef(Panel)";let D0=null,Uf=-1,to=null;function z5(t,e){if(e){const n=(e&CC)!==0,r=(e&RC)!==0,s=(e&IC)!==0,a=(e&NC)!==0;if(n)return s?"se-resize":a?"ne-resize":"e-resize";if(r)return s?"sw-resize":a?"nw-resize":"w-resize";if(s)return"s-resize";if(a)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function j5(){to!==null&&(document.head.removeChild(to),D0=null,to=null,Uf=-1)}function Oy(t,e){var n,r;const s=z5(t,e);if(D0!==s){if(D0=s,to===null&&(to=document.createElement("style"),document.head.appendChild(to)),Uf>=0){var a;(a=to.sheet)===null||a===void 0||a.removeRule(Uf)}Uf=(n=(r=to.sheet)===null||r===void 0?void 0:r.insertRule(`*{cursor: ${s} !important;}`))!==null&&n!==void 0?n:-1}}function xC(t){return t.type==="keydown"}function TC(t){return t.type.startsWith("pointer")}function SC(t){return t.type.startsWith("mouse")}function Hm(t){if(TC(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(SC(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function B5(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function H5(t,e,n){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function F5(t,e){if(t===e)throw new Error("Cannot compare node with itself");const n={a:qx(t),b:qx(e)};let r;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),e=n.b.pop(),r=t;Be(r,"Stacking order can only be calculated for elements with a common ancestor");const s={a:$x(Fx(n.a)),b:$x(Fx(n.b))};if(s.a===s.b){const a=r.childNodes,c={a:n.a.at(-1),b:n.b.at(-1)};let u=a.length;for(;u--;){const d=a[u];if(d===c.a)return 1;if(d===c.b)return-1}}return Math.sign(s.a-s.b)}const $5=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function q5(t){var e;const n=getComputedStyle((e=AC(t))!==null&&e!==void 0?e:t).display;return n==="flex"||n==="inline-flex"}function G5(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||q5(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||$5.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function Fx(t){let e=t.length;for(;e--;){const n=t[e];if(Be(n,"Missing node"),G5(n))return n}return null}function $x(t){return t&&Number(getComputedStyle(t).zIndex)||0}function qx(t){const e=[];for(;t;)e.push(t),t=AC(t);return e}function AC(t){const{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}const CC=1,RC=2,IC=4,NC=8,Y5=B5()==="coarse";let Jr=[],Xl=!1,no=new Map,Fm=new Map;const hh=new Set;function K5(t,e,n,r,s){var a;const{ownerDocument:c}=e,u={direction:n,element:e,hitAreaMargins:r,setResizeHandlerState:s},d=(a=no.get(c))!==null&&a!==void 0?a:0;return no.set(c,d+1),hh.add(u),am(),function(){var p;Fm.delete(t),hh.delete(u);const v=(p=no.get(c))!==null&&p!==void 0?p:1;if(no.set(c,v-1),am(),v===1&&no.delete(c),Jr.includes(u)){const _=Jr.indexOf(u);_>=0&&Jr.splice(_,1),Yv(),s("up",!0,null)}}}function X5(t){const{target:e}=t,{x:n,y:r}=Hm(t);Xl=!0,Gv({target:e,x:n,y:r}),am(),Jr.length>0&&(lm("down",t),t.preventDefault(),DC(e)||t.stopImmediatePropagation())}function Vy(t){const{x:e,y:n}=Hm(t);if(Xl&&t.buttons===0&&(Xl=!1,lm("up",t)),!Xl){const{target:r}=t;Gv({target:r,x:e,y:n})}lm("move",t),Yv(),Jr.length>0&&t.preventDefault()}function Ly(t){const{target:e}=t,{x:n,y:r}=Hm(t);Fm.clear(),Xl=!1,Jr.length>0&&(t.preventDefault(),DC(e)||t.stopImmediatePropagation()),lm("up",t),Gv({target:e,x:n,y:r}),Yv(),am()}function DC(t){let e=t;for(;e;){if(e.hasAttribute(Pt.resizeHandle))return!0;e=e.parentElement}return!1}function Gv({target:t,x:e,y:n}){Jr.splice(0);let r=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(r=t),hh.forEach(s=>{const{element:a,hitAreaMargins:c}=s,u=a.getBoundingClientRect(),{bottom:d,left:f,right:p,top:v}=u,_=Y5?c.coarse:c.fine;if(e>=f-_&&e<=p+_&&n>=v-_&&n<=d+_){if(r!==null&&document.contains(r)&&a!==r&&!a.contains(r)&&!r.contains(a)&&F5(r,a)>0){let T=r,R=!1;for(;T&&!T.contains(a);){if(H5(T.getBoundingClientRect(),u)){R=!0;break}T=T.parentElement}if(R)return}Jr.push(s)}})}function Uy(t,e){Fm.set(t,e)}function Yv(){let t=!1,e=!1;Jr.forEach(r=>{const{direction:s}=r;s==="horizontal"?t=!0:e=!0});let n=0;Fm.forEach(r=>{n|=r}),t&&e?Oy("intersection",n):t?Oy("horizontal",n):e?Oy("vertical",n):j5()}let zy;function am(){var t;(t=zy)===null||t===void 0||t.abort(),zy=new AbortController;const e={capture:!0,signal:zy.signal};hh.size&&(Xl?(Jr.length>0&&no.forEach((n,r)=>{const{body:s}=r;n>0&&(s.addEventListener("contextmenu",Ly,e),s.addEventListener("pointerleave",Vy,e),s.addEventListener("pointermove",Vy,e))}),no.forEach((n,r)=>{const{body:s}=r;s.addEventListener("pointerup",Ly,e),s.addEventListener("pointercancel",Ly,e)})):no.forEach((n,r)=>{const{body:s}=r;n>0&&(s.addEventListener("pointerdown",X5,e),s.addEventListener("pointermove",Vy,e))}))}function lm(t,e){hh.forEach(n=>{const{setResizeHandlerState:r}=n,s=Jr.includes(n);r(t,s,e)})}function Q5(){const[t,e]=O.useState(0);return O.useCallback(()=>e(n=>n+1),[])}function Be(t,e){if(!t)throw console.error(e),Error(e)}function xa(t,e,n=$v){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function cs(t,e,n=$v){return xa(t,e,n)===0}function hr(t,e,n){return xa(t,e,n)===0}function W5(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){const s=t[r],a=e[r];if(!hr(s,a,n))return!1}return!0}function Ul({panelConstraints:t,panelIndex:e,size:n}){const r=t[e];Be(r!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:s=0,collapsible:a,maxSize:c=100,minSize:u=0}=r;if(xa(n,u)<0)if(a){const d=(s+u)/2;xa(n,d)<0?n=s:n=u}else n=u;return n=Math.min(c,n),n=parseFloat(n.toFixed($v)),n}function Uu({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:r,prevLayout:s,trigger:a}){if(hr(t,0))return e;const c=[...e],[u,d]=r;Be(u!=null,"Invalid first pivot index"),Be(d!=null,"Invalid second pivot index");let f=0;if(a==="keyboard"){{const v=t<0?d:u,_=n[v];Be(_,`Panel constraints not found for index ${v}`);const{collapsedSize:b=0,collapsible:T,minSize:R=0}=_;if(T){const I=e[v];if(Be(I!=null,`Previous layout not found for panel index ${v}`),hr(I,b)){const N=R-I;xa(N,Math.abs(t))>0&&(t=t<0?0-N:N)}}}{const v=t<0?u:d,_=n[v];Be(_,`No panel constraints found for index ${v}`);const{collapsedSize:b=0,collapsible:T,minSize:R=0}=_;if(T){const I=e[v];if(Be(I!=null,`Previous layout not found for panel index ${v}`),hr(I,R)){const N=I-b;xa(N,Math.abs(t))>0&&(t=t<0?0-N:N)}}}}{const v=t<0?1:-1;let _=t<0?d:u,b=0;for(;;){const R=e[_];Be(R!=null,`Previous layout not found for panel index ${_}`);const N=Ul({panelConstraints:n,panelIndex:_,size:100})-R;if(b+=N,_+=v,_<0||_>=n.length)break}const T=Math.min(Math.abs(t),Math.abs(b));t=t<0?0-T:T}{let _=t<0?u:d;for(;_>=0&&_<n.length;){const b=Math.abs(t)-Math.abs(f),T=e[_];Be(T!=null,`Previous layout not found for panel index ${_}`);const R=T-b,I=Ul({panelConstraints:n,panelIndex:_,size:R});if(!hr(T,I)&&(f+=T-I,c[_]=I,f.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?_--:_++}}if(W5(s,c))return s;{const v=t<0?d:u,_=e[v];Be(_!=null,`Previous layout not found for panel index ${v}`);const b=_+f,T=Ul({panelConstraints:n,panelIndex:v,size:b});if(c[v]=T,!hr(T,b)){let R=b-T,N=t<0?d:u;for(;N>=0&&N<n.length;){const L=c[N];Be(L!=null,`Previous layout not found for panel index ${N}`);const $=L+R,H=Ul({panelConstraints:n,panelIndex:N,size:$});if(hr(L,H)||(R-=H-L,c[N]=H),hr(R,0))break;t>0?N--:N++}}}const p=c.reduce((v,_)=>_+v,0);return hr(p,100)?c:s}function Z5({layout:t,panelsArray:e,pivotIndices:n}){let r=0,s=100,a=0,c=0;const u=n[0];Be(u!=null,"No pivot index found"),e.forEach((v,_)=>{const{constraints:b}=v,{maxSize:T=100,minSize:R=0}=b;_===u?(r=R,s=T):(a+=R,c+=T)});const d=Math.min(s,100-a),f=Math.max(r,100-c),p=t[u];return{valueMax:d,valueMin:f,valueNow:p}}function dh(t,e=document){return Array.from(e.querySelectorAll(`[${Pt.resizeHandleId}][data-panel-group-id="${t}"]`))}function kC(t,e,n=document){const s=dh(t,n).findIndex(a=>a.getAttribute(Pt.resizeHandleId)===e);return s??null}function MC(t,e,n){const r=kC(t,e,n);return r!=null?[r,r+1]:[-1,-1]}function J5(t){return t instanceof HTMLElement?!0:typeof t=="object"&&t!==null&&"tagName"in t&&"getAttribute"in t}function PC(t,e=document){if(J5(e)&&e.dataset.panelGroupId==t)return e;const n=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return n||null}function $m(t,e=document){const n=e.querySelector(`[${Pt.resizeHandleId}="${t}"]`);return n||null}function e6(t,e,n,r=document){var s,a,c,u;const d=$m(e,r),f=dh(t,r),p=d?f.indexOf(d):-1,v=(s=(a=n[p])===null||a===void 0?void 0:a.id)!==null&&s!==void 0?s:null,_=(c=(u=n[p+1])===null||u===void 0?void 0:u.id)!==null&&c!==void 0?c:null;return[v,_]}function t6({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:r,panelDataArray:s,panelGroupElement:a,setLayout:c}){O.useRef({didWarnAboutMissingResizeHandle:!1}),va(()=>{if(!a)return;const u=dh(n,a);for(let d=0;d<s.length-1;d++){const{valueMax:f,valueMin:p,valueNow:v}=Z5({layout:r,panelsArray:s,pivotIndices:[d,d+1]}),_=u[d];if(_!=null){const b=s[d];Be(b,`No panel data found for index "${d}"`),_.setAttribute("aria-controls",b.id),_.setAttribute("aria-valuemax",""+Math.round(f)),_.setAttribute("aria-valuemin",""+Math.round(p)),_.setAttribute("aria-valuenow",v!=null?""+Math.round(v):"")}}return()=>{u.forEach((d,f)=>{d.removeAttribute("aria-controls"),d.removeAttribute("aria-valuemax"),d.removeAttribute("aria-valuemin"),d.removeAttribute("aria-valuenow")})}},[n,r,s,a]),O.useEffect(()=>{if(!a)return;const u=e.current;Be(u,"Eager values not found");const{panelDataArray:d}=u,f=PC(n,a);Be(f!=null,`No group found for id "${n}"`);const p=dh(n,a);Be(p,`No resize handles found for group id "${n}"`);const v=p.map(_=>{const b=_.getAttribute(Pt.resizeHandleId);Be(b,"Resize handle element has no handle id attribute");const[T,R]=e6(n,b,d,a);if(T==null||R==null)return()=>{};const I=N=>{if(!N.defaultPrevented)switch(N.key){case"Enter":{N.preventDefault();const L=d.findIndex($=>$.id===T);if(L>=0){const $=d[L];Be($,`No panel data found for index ${L}`);const H=r[L],{collapsedSize:G=0,collapsible:K,minSize:k=0}=$.constraints;if(H!=null&&K){const S=Uu({delta:hr(H,G)?k-G:G-H,initialLayout:r,panelConstraints:d.map(A=>A.constraints),pivotIndices:MC(n,b,a),prevLayout:r,trigger:"keyboard"});r!==S&&c(S)}}break}}};return _.addEventListener("keydown",I),()=>{_.removeEventListener("keydown",I)}});return()=>{v.forEach(_=>_())}},[a,t,e,n,r,s,c])}function Gx(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function OC(t,e){const n=t==="horizontal",{x:r,y:s}=Hm(e);return n?r:s}function n6(t,e,n,r,s){const a=n==="horizontal",c=$m(e,s);Be(c,`No resize handle element found for id "${e}"`);const u=c.getAttribute(Pt.groupId);Be(u,"Resize handle element has no group id attribute");let{initialCursorPosition:d}=r;const f=OC(n,t),p=PC(u,s);Be(p,`No group element found for id "${u}"`);const v=p.getBoundingClientRect(),_=a?v.width:v.height;return(f-d)/_*100}function r6(t,e,n,r,s,a){if(xC(t)){const c=n==="horizontal";let u=0;t.shiftKey?u=100:s!=null?u=s:u=10;let d=0;switch(t.key){case"ArrowDown":d=c?0:u;break;case"ArrowLeft":d=c?-u:0;break;case"ArrowRight":d=c?u:0;break;case"ArrowUp":d=c?0:-u;break;case"End":d=100;break;case"Home":d=-100;break}return d}else return r==null?0:n6(t,e,n,r,a)}function i6({panelDataArray:t}){const e=Array(t.length),n=t.map(a=>a.constraints);let r=0,s=100;for(let a=0;a<t.length;a++){const c=n[a];Be(c,`Panel constraints not found for index ${a}`);const{defaultSize:u}=c;u!=null&&(r++,e[a]=u,s-=u)}for(let a=0;a<t.length;a++){const c=n[a];Be(c,`Panel constraints not found for index ${a}`);const{defaultSize:u}=c;if(u!=null)continue;const d=t.length-r,f=s/d;r++,e[a]=f,s-=f}return e}function Nl(t,e,n){e.forEach((r,s)=>{const a=t[s];Be(a,`Panel data not found for index ${s}`);const{callbacks:c,constraints:u,id:d}=a,{collapsedSize:f=0,collapsible:p}=u,v=n[d];if(v==null||r!==v){n[d]=r;const{onCollapse:_,onExpand:b,onResize:T}=c;T&&T(r,v),p&&(_||b)&&(b&&(v==null||cs(v,f))&&!cs(r,f)&&b(),_&&(v==null||!cs(v,f))&&cs(r,f)&&_())}})}function wf(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function s6({defaultSize:t,dragState:e,layout:n,panelData:r,panelIndex:s,precision:a=3}){const c=n[s];let u;return c==null?u=t!=null?t.toPrecision(a):"1":r.length===1?u="1":u=c.toPrecision(a),{flexBasis:0,flexGrow:u,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function o6(t,e=10){let n=null;return(...s)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...s)},e)}}function Yx(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function VC(t){return`react-resizable-panels:${t}`}function LC(t){return t.map(e=>{const{constraints:n,id:r,idIsFromProps:s,order:a}=e;return s?r:a?`${a}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function UC(t,e){try{const n=VC(t),r=e.getItem(n);if(r){const s=JSON.parse(r);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function a6(t,e,n){var r,s;const a=(r=UC(t,n))!==null&&r!==void 0?r:{},c=LC(e);return(s=a[c])!==null&&s!==void 0?s:null}function l6(t,e,n,r,s){var a;const c=VC(t),u=LC(e),d=(a=UC(t,s))!==null&&a!==void 0?a:{};d[u]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{s.setItem(c,JSON.stringify(d))}catch(f){console.error(f)}}function Kx({layout:t,panelConstraints:e}){const n=[...t],r=n.reduce((a,c)=>a+c,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(a=>`${a}%`).join(", ")}`);if(!hr(r,100)&&n.length>0)for(let a=0;a<e.length;a++){const c=n[a];Be(c!=null,`No layout data found for index ${a}`);const u=100/r*c;n[a]=u}let s=0;for(let a=0;a<e.length;a++){const c=n[a];Be(c!=null,`No layout data found for index ${a}`);const u=Ul({panelConstraints:e,panelIndex:a,size:c});c!=u&&(s+=c-u,n[a]=u)}if(!hr(s,0))for(let a=0;a<e.length;a++){const c=n[a];Be(c!=null,`No layout data found for index ${a}`);const u=c+s,d=Ul({panelConstraints:e,panelIndex:a,size:u});if(c!==d&&(s-=d-c,n[a]=d,hr(s,0)))break}return n}const c6=100,zu={getItem:t=>(Yx(zu),zu.getItem(t)),setItem:(t,e)=>{Yx(zu),zu.setItem(t,e)}},Xx={};function zC({autoSaveId:t=null,children:e,className:n="",direction:r,forwardedRef:s,id:a=null,onLayout:c=null,keyboardResizeBy:u=null,storage:d=zu,style:f,tagName:p="div",...v}){const _=qv(a),b=O.useRef(null),[T,R]=O.useState(null),[I,N]=O.useState([]),L=Q5(),$=O.useRef({}),H=O.useRef(new Map),G=O.useRef(0),K=O.useRef({autoSaveId:t,direction:r,dragState:T,id:_,keyboardResizeBy:u,onLayout:c,storage:d}),k=O.useRef({layout:I,panelDataArray:[],panelDataArrayChanged:!1});O.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),O.useImperativeHandle(s,()=>({getId:()=>K.current.id,getLayout:()=>{const{layout:Q}=k.current;return Q},setLayout:Q=>{const{onLayout:se}=K.current,{layout:fe,panelDataArray:ue}=k.current,ye=Kx({layout:Q,panelConstraints:ue.map(_e=>_e.constraints)});Gx(fe,ye)||(N(ye),k.current.layout=ye,se&&se(ye),Nl(ue,ye,$.current))}}),[]),va(()=>{K.current.autoSaveId=t,K.current.direction=r,K.current.dragState=T,K.current.id=_,K.current.onLayout=c,K.current.storage=d}),t6({committedValuesRef:K,eagerValuesRef:k,groupId:_,layout:I,panelDataArray:k.current.panelDataArray,setLayout:N,panelGroupElement:b.current}),O.useEffect(()=>{const{panelDataArray:Q}=k.current;if(t){if(I.length===0||I.length!==Q.length)return;let se=Xx[t];se==null&&(se=o6(l6,c6),Xx[t]=se);const fe=[...Q],ue=new Map(H.current);se(t,fe,ue,I,d)}},[t,I,d]),O.useEffect(()=>{});const S=O.useCallback(Q=>{const{onLayout:se}=K.current,{layout:fe,panelDataArray:ue}=k.current;if(Q.constraints.collapsible){const ye=ue.map(tt=>tt.constraints),{collapsedSize:_e=0,panelSize:Ae,pivotIndices:Re}=aa(ue,Q,fe);if(Be(Ae!=null,`Panel size not found for panel "${Q.id}"`),!cs(Ae,_e)){H.current.set(Q.id,Ae);const it=kl(ue,Q)===ue.length-1?Ae-_e:_e-Ae,Ue=Uu({delta:it,initialLayout:fe,panelConstraints:ye,pivotIndices:Re,prevLayout:fe,trigger:"imperative-api"});wf(fe,Ue)||(N(Ue),k.current.layout=Ue,se&&se(Ue),Nl(ue,Ue,$.current))}}},[]),A=O.useCallback((Q,se)=>{const{onLayout:fe}=K.current,{layout:ue,panelDataArray:ye}=k.current;if(Q.constraints.collapsible){const _e=ye.map(nt=>nt.constraints),{collapsedSize:Ae=0,panelSize:Re=0,minSize:tt=0,pivotIndices:it}=aa(ye,Q,ue),Ue=se??tt;if(cs(Re,Ae)){const nt=H.current.get(Q.id),st=nt!=null&&nt>=Ue?nt:Ue,ze=kl(ye,Q)===ye.length-1?Re-st:st-Re,be=Uu({delta:ze,initialLayout:ue,panelConstraints:_e,pivotIndices:it,prevLayout:ue,trigger:"imperative-api"});wf(ue,be)||(N(be),k.current.layout=be,fe&&fe(be),Nl(ye,be,$.current))}}},[]),V=O.useCallback(Q=>{const{layout:se,panelDataArray:fe}=k.current,{panelSize:ue}=aa(fe,Q,se);return Be(ue!=null,`Panel size not found for panel "${Q.id}"`),ue},[]),B=O.useCallback((Q,se)=>{const{panelDataArray:fe}=k.current,ue=kl(fe,Q);return s6({defaultSize:se,dragState:T,layout:I,panelData:fe,panelIndex:ue})},[T,I]),F=O.useCallback(Q=>{const{layout:se,panelDataArray:fe}=k.current,{collapsedSize:ue=0,collapsible:ye,panelSize:_e}=aa(fe,Q,se);return Be(_e!=null,`Panel size not found for panel "${Q.id}"`),ye===!0&&cs(_e,ue)},[]),D=O.useCallback(Q=>{const{layout:se,panelDataArray:fe}=k.current,{collapsedSize:ue=0,collapsible:ye,panelSize:_e}=aa(fe,Q,se);return Be(_e!=null,`Panel size not found for panel "${Q.id}"`),!ye||xa(_e,ue)>0},[]),P=O.useCallback(Q=>{const{panelDataArray:se}=k.current;se.push(Q),se.sort((fe,ue)=>{const ye=fe.order,_e=ue.order;return ye==null&&_e==null?0:ye==null?-1:_e==null?1:ye-_e}),k.current.panelDataArrayChanged=!0,L()},[L]);va(()=>{if(k.current.panelDataArrayChanged){k.current.panelDataArrayChanged=!1;const{autoSaveId:Q,onLayout:se,storage:fe}=K.current,{layout:ue,panelDataArray:ye}=k.current;let _e=null;if(Q){const Re=a6(Q,ye,fe);Re&&(H.current=new Map(Object.entries(Re.expandToSizes)),_e=Re.layout)}_e==null&&(_e=i6({panelDataArray:ye}));const Ae=Kx({layout:_e,panelConstraints:ye.map(Re=>Re.constraints)});Gx(ue,Ae)||(N(Ae),k.current.layout=Ae,se&&se(Ae),Nl(ye,Ae,$.current))}}),va(()=>{const Q=k.current;return()=>{Q.layout=[]}},[]);const X=O.useCallback(Q=>{let se=!1;const fe=b.current;return fe&&window.getComputedStyle(fe,null).getPropertyValue("direction")==="rtl"&&(se=!0),function(ye){ye.preventDefault();const _e=b.current;if(!_e)return()=>null;const{direction:Ae,dragState:Re,id:tt,keyboardResizeBy:it,onLayout:Ue}=K.current,{layout:nt,panelDataArray:st}=k.current,{initialLayout:Ht}=Re??{},ze=MC(tt,Q,_e);let be=r6(ye,Q,Ae,Re,it,_e);const It=Ae==="horizontal";It&&se&&(be=-be);const Tn=st.map(Mn=>Mn.constraints),Wt=Uu({delta:be,initialLayout:Ht??nt,panelConstraints:Tn,pivotIndices:ze,prevLayout:nt,trigger:xC(ye)?"keyboard":"mouse-or-touch"}),Jn=!wf(nt,Wt);(TC(ye)||SC(ye))&&G.current!=be&&(G.current=be,!Jn&&be!==0?It?Uy(Q,be<0?CC:RC):Uy(Q,be<0?IC:NC):Uy(Q,0)),Jn&&(N(Wt),k.current.layout=Wt,Ue&&Ue(Wt),Nl(st,Wt,$.current))}},[]),z=O.useCallback((Q,se)=>{const{onLayout:fe}=K.current,{layout:ue,panelDataArray:ye}=k.current,_e=ye.map(nt=>nt.constraints),{panelSize:Ae,pivotIndices:Re}=aa(ye,Q,ue);Be(Ae!=null,`Panel size not found for panel "${Q.id}"`);const it=kl(ye,Q)===ye.length-1?Ae-se:se-Ae,Ue=Uu({delta:it,initialLayout:ue,panelConstraints:_e,pivotIndices:Re,prevLayout:ue,trigger:"imperative-api"});wf(ue,Ue)||(N(Ue),k.current.layout=Ue,fe&&fe(Ue),Nl(ye,Ue,$.current))},[]),Y=O.useCallback((Q,se)=>{const{layout:fe,panelDataArray:ue}=k.current,{collapsedSize:ye=0,collapsible:_e}=se,{collapsedSize:Ae=0,collapsible:Re,maxSize:tt=100,minSize:it=0}=Q.constraints,{panelSize:Ue}=aa(ue,Q,fe);Ue!=null&&(_e&&Re&&cs(Ue,ye)?cs(ye,Ae)||z(Q,Ae):Ue<it?z(Q,it):Ue>tt&&z(Q,tt))},[z]),te=O.useCallback((Q,se)=>{const{direction:fe}=K.current,{layout:ue}=k.current;if(!b.current)return;const ye=$m(Q,b.current);Be(ye,`Drag handle element not found for id "${Q}"`);const _e=OC(fe,se);R({dragHandleId:Q,dragHandleRect:ye.getBoundingClientRect(),initialCursorPosition:_e,initialLayout:ue})},[]),J=O.useCallback(()=>{R(null)},[]),U=O.useCallback(Q=>{const{panelDataArray:se}=k.current,fe=kl(se,Q);fe>=0&&(se.splice(fe,1),delete $.current[Q.id],k.current.panelDataArrayChanged=!0,L())},[L]),W=O.useMemo(()=>({collapsePanel:S,direction:r,dragState:T,expandPanel:A,getPanelSize:V,getPanelStyle:B,groupId:_,isPanelCollapsed:F,isPanelExpanded:D,reevaluatePanelConstraints:Y,registerPanel:P,registerResizeHandle:X,resizePanel:z,startDragging:te,stopDragging:J,unregisterPanel:U,panelGroupElement:b.current}),[S,T,r,A,V,B,_,F,D,Y,P,X,z,te,J,U]),ne={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return O.createElement(Bm.Provider,{value:W},O.createElement(p,{...v,children:e,className:n,id:a,ref:b,style:{...ne,...f},[Pt.group]:"",[Pt.groupDirection]:r,[Pt.groupId]:_}))}const jC=O.forwardRef((t,e)=>O.createElement(zC,{...t,forwardedRef:e}));zC.displayName="PanelGroup";jC.displayName="forwardRef(PanelGroup)";function kl(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function aa(t,e,n){const r=kl(t,e),a=r===t.length-1?[r-1,r]:[r,r+1],c=n[r];return{...e.constraints,panelSize:c,pivotIndices:a}}function u6({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:r}){O.useEffect(()=>{if(t||n==null||r==null)return;const s=$m(e,r);if(s==null)return;const a=c=>{if(!c.defaultPrevented)switch(c.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{c.preventDefault(),n(c);break}case"F6":{c.preventDefault();const u=s.getAttribute(Pt.groupId);Be(u,`No group element found for id "${u}"`);const d=dh(u,r),f=kC(u,e,r);Be(f!==null,`No resize element found for id "${e}"`);const p=c.shiftKey?f>0?f-1:d.length-1:f+1<d.length?f+1:0;d[p].focus();break}}};return s.addEventListener("keydown",a),()=>{s.removeEventListener("keydown",a)}},[r,t,e,n])}function BC({children:t=null,className:e="",disabled:n=!1,hitAreaMargins:r,id:s,onBlur:a,onClick:c,onDragging:u,onFocus:d,onPointerDown:f,onPointerUp:p,style:v={},tabIndex:_=0,tagName:b="div",...T}){var R,I;const N=O.useRef(null),L=O.useRef({onClick:c,onDragging:u,onPointerDown:f,onPointerUp:p});O.useEffect(()=>{L.current.onClick=c,L.current.onDragging=u,L.current.onPointerDown=f,L.current.onPointerUp=p});const $=O.useContext(Bm);if($===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:H,groupId:G,registerResizeHandle:K,startDragging:k,stopDragging:S,panelGroupElement:A}=$,V=qv(s),[B,F]=O.useState("inactive"),[D,P]=O.useState(!1),[X,z]=O.useState(null),Y=O.useRef({state:B});va(()=>{Y.current.state=B}),O.useEffect(()=>{if(n)z(null);else{const W=K(V);z(()=>W)}},[n,V,K]);const te=(R=r?.coarse)!==null&&R!==void 0?R:15,J=(I=r?.fine)!==null&&I!==void 0?I:5;O.useEffect(()=>{if(n||X==null)return;const W=N.current;Be(W,"Element ref not attached");let ne=!1;return K5(V,W,H,{coarse:te,fine:J},(se,fe,ue)=>{if(!fe){F("inactive");return}switch(se){case"down":{F("drag"),ne=!1,Be(ue,'Expected event to be defined for "down" action'),k(V,ue);const{onDragging:ye,onPointerDown:_e}=L.current;ye?.(!0),_e?.();break}case"move":{const{state:ye}=Y.current;ne=!0,ye!=="drag"&&F("hover"),Be(ue,'Expected event to be defined for "move" action'),X(ue);break}case"up":{F("hover"),S();const{onClick:ye,onDragging:_e,onPointerUp:Ae}=L.current;_e?.(!1),Ae?.(),ne||ye?.();break}}})},[te,H,n,J,K,V,X,k,S]),u6({disabled:n,handleId:V,resizeHandler:X,panelGroupElement:A});const U={touchAction:"none",userSelect:"none"};return O.createElement(b,{...T,children:t,className:e,id:s,onBlur:()=>{P(!1),a?.()},onFocus:()=>{P(!0),d?.()},ref:N,role:"separator",style:{...U,...v},tabIndex:_,[Pt.groupDirection]:H,[Pt.groupId]:G,[Pt.resizeHandle]:"",[Pt.resizeHandleActive]:B==="drag"?"pointer":D?"keyboard":void 0,[Pt.resizeHandleEnabled]:!n,[Pt.resizeHandleId]:V,[Pt.resizeHandleState]:B})}BC.displayName="PanelResizeHandle";const HC=t=>{const e=[],n=t.split("_");for(let r=0;r<n.length;r++)if(r%2===0)n[r].split(/\s+/).filter(a=>a.trim()!=="").forEach(a=>{e.push({word:a.trim()})});else{const s=n[r].trim();s.split(/\s+/).filter(c=>c.trim()!=="").forEach(c=>{e.push({word:c.trim(),myConcept:s})})}return e},Qx=()=>{const t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];return t[Math.floor(Math.random()*t.length)]},Wx=(t,e)=>{if(!t)return"#000000";let n=t.startsWith("#")?t.slice(1):t,r=parseInt(n.slice(0,2),16),s=parseInt(n.slice(2,4),16),a=parseInt(n.slice(4,6),16);const c=d=>Math.max(0,Math.min(255,d)),u=1-e;return r=c(Math.round(r*u)),s=c(Math.round(s*u)),a=c(Math.round(a*u)),`#${[r,s,a].map(d=>d.toString(16).padStart(2,"0")).join("")}`},h6=t=>{const e=t.replace("#",""),n=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),s=parseInt(e.substr(4,2),16),a=30,c=Math.min(255,Math.max(0,n+(Math.random()-.5)*a*2)),u=Math.min(255,Math.max(0,r+(Math.random()-.5)*a*2)),d=Math.min(255,Math.max(0,s+(Math.random()-.5)*a*2));return`#${Math.round(c).toString(16).padStart(2,"0")}${Math.round(u).toString(16).padStart(2,"0")}${Math.round(d).toString(16).padStart(2,"0")}`},d6=t=>{const s=(Math.random()-.5)*400*2,a=(Math.random()-.5)*30*2;return{x:t.x+s,y:t.y+650+a}},f6=()=>`node_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,m6=(t,e)=>`edge_${t}_${e}`,p6=(t,e,n,r,s,a,c)=>({id:f6(),type:"draggableEditable",position:t,draggable:!0,data:{label:e,title:e,summary:r,full_text:n,suggestions:[],myColor:s,tokenColors:{},previousNode:c}}),g6=(t,e,n,r)=>({id:m6(t,e),source:t,target:e,sourceHandle:r,targetHandle:null,style:{stroke:n,strokeWidth:3},markerEnd:{type:wa.ArrowClosed,color:n}}),y6="modulepreload",v6=function(t){return"/"+t},Zx={},FC=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let d=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");s=d(n.map(f=>{if(f=v6(f),f in Zx)return;Zx[f]=!0;const p=f.endsWith(".css"),v=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${v}`))return;const _=document.createElement("link");if(_.rel=p?"stylesheet":y6,p||(_.as="script"),_.crossOrigin="",_.href=f,u&&_.setAttribute("nonce",u),document.head.appendChild(_),p)return new Promise((b,T)=>{_.addEventListener("load",b),_.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return s.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})},_6=()=>{};var Jx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},E6=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],c=t[n++],u=t[n++],d=((s&7)<<18|(a&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const a=t[n++],c=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|c&63)}}return e.join("")},qC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],c=s+1<t.length,u=c?t[s+1]:0,d=s+2<t.length,f=d?t[s+2]:0,p=a>>2,v=(a&3)<<4|u>>4;let _=(u&15)<<2|f>>6,b=f&63;d||(b=64,c||(_=64)),r.push(n[p],n[v],n[_],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($C(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):E6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const v=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||u==null||f==null||v==null)throw new b6;const _=a<<2|u>>4;if(r.push(_),f!==64){const b=u<<4&240|f>>2;if(r.push(b),v!==64){const T=f<<6&192|v;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class b6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const w6=function(t){const e=$C(t);return qC.encodeByteArray(e,!0)},cm=function(t){return w6(t).replace(/\./g,"")},GC=function(t){try{return qC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6=()=>x6().__FIREBASE_DEFAULTS__,S6=()=>{if(typeof process>"u"||typeof Jx>"u")return;const t=Jx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},A6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&GC(t[1]);return e&&JSON.parse(e)},qm=()=>{try{return _6()||T6()||S6()||A6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},YC=t=>{var e,n;return(n=(e=qm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},KC=t=>{const e=YC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},XC=()=>{var t;return(t=qm())===null||t===void 0?void 0:t.config},QC=t=>{var e;return(e=qm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(t){return t.endsWith(".cloudworkstations.dev")}async function Kv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[cm(JSON.stringify(n)),cm(JSON.stringify(c)),""].join(".")}const Gu={};function I6(){const t={prod:[],emulator:[]};for(const e of Object.keys(Gu))Gu[e]?t.emulator.push(e):t.prod.push(e);return t}function N6(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let eT=!1;function Xv(t,e){if(typeof window>"u"||typeof document>"u"||!Da(window.location.host)||Gu[t]===e||Gu[t]||eT)return;Gu[t]=e;function n(_){return`__firebase__banner__${_}`}const r="__firebase__banner",a=I6().prod.length>0;function c(){const _=document.getElementById(r);_&&_.remove()}function u(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function d(_,b){_.setAttribute("width","24"),_.setAttribute("id",b),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{eT=!0,c()},_}function p(_,b){_.setAttribute("id",b),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){const _=N6(r),b=n("text"),T=document.getElementById(b)||document.createElement("span"),R=n("learnmore"),I=document.getElementById(R)||document.createElement("a"),N=n("preprendIcon"),L=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const $=_.element;u($),p(I,R);const H=f();d(L,N),$.append(L,T,I,H),document.body.appendChild($)}a?(T.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function D6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kn())}function k6(){var t;const e=(t=qm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function M6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function P6(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function O6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function V6(){const t=kn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function L6(){return!k6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function U6(){try{return typeof indexedDB=="object"}catch{return!1}}function z6(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6="FirebaseError";class Li extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=j6,Object.setPrototypeOf(this,Li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oh.prototype.create)}}class Oh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],c=a?B6(a,r):"Error",u=`${this.serviceName}: ${c} (${s}).`;return new Li(s,u,r)}}function B6(t,e){return t.replace(H6,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const H6=/\{\$([^}]+)}/g;function F6(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ta(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],c=e[s];if(tT(a)&&tT(c)){if(!Ta(a,c))return!1}else if(a!==c)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function tT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ju(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Bu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function $6(t,e){const n=new q6(t,e);return n.subscribe.bind(n)}class q6{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");G6(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=jy),s.error===void 0&&(s.error=jy),s.complete===void 0&&(s.complete=jy);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function G6(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t){return t&&t._delegate?t._delegate:t}class yo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new C6;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(X6(e))try{this.getOrInitializeService({instanceIdentifier:ua})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=ua){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ua){return this.instances.has(e)}getOptions(e=ua){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&c.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const c=this.instances.get(s);return c&&e(c,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:K6(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ua){return this.component?this.component.multipleInstances?e:ua:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function K6(t){return t===ua?void 0:t}function X6(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Y6(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Xe||(Xe={}));const W6={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},Z6=Xe.INFO,J6={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},eL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=J6[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qv{constructor(e){this.name=e,this._logLevel=Z6,this._logHandler=eL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?W6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const tL=(t,e)=>e.some(n=>t instanceof n);let nT,rT;function nL(){return nT||(nT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rL(){return rT||(rT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const WC=new WeakMap,k0=new WeakMap,ZC=new WeakMap,By=new WeakMap,Wv=new WeakMap;function iL(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n(uo(t.result)),s()},c=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&WC.set(n,t)}).catch(()=>{}),Wv.set(e,t),e}function sL(t){if(k0.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),s()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});k0.set(t,e)}let M0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return k0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ZC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return uo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function oL(t){M0=t(M0)}function aL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Hy(this),e,...n);return ZC.set(r,e.sort?e.sort():[e]),uo(r)}:rL().includes(t)?function(...e){return t.apply(Hy(this),e),uo(WC.get(this))}:function(...e){return uo(t.apply(Hy(this),e))}}function lL(t){return typeof t=="function"?aL(t):(t instanceof IDBTransaction&&sL(t),tL(t,nL())?new Proxy(t,M0):t)}function uo(t){if(t instanceof IDBRequest)return iL(t);if(By.has(t))return By.get(t);const e=lL(t);return e!==t&&(By.set(t,e),Wv.set(e,t)),e}const Hy=t=>Wv.get(t);function cL(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const c=indexedDB.open(t,e),u=uo(c);return r&&c.addEventListener("upgradeneeded",d=>{r(uo(c.result),d.oldVersion,d.newVersion,uo(c.transaction),d)}),n&&c.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),u.then(d=>{a&&d.addEventListener("close",()=>a()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const uL=["get","getKey","getAll","getAllKeys","count"],hL=["put","add","delete","clear"],Fy=new Map;function iT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Fy.get(e))return Fy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=hL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||uL.includes(n)))return;const a=async function(c,...u){const d=this.transaction(c,s?"readwrite":"readonly");let f=d.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),s&&d.done]))[0]};return Fy.set(e,a),a}oL(t=>({...t,get:(e,n,r)=>iT(e,n)||t.get(e,n,r),has:(e,n)=>!!iT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function fL(t){const e=t.getComponent();return e?.type==="VERSION"}const P0="@firebase/app",sT="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new Qv("@firebase/app"),mL="@firebase/app-compat",pL="@firebase/analytics-compat",gL="@firebase/analytics",yL="@firebase/app-check-compat",vL="@firebase/app-check",_L="@firebase/auth",EL="@firebase/auth-compat",bL="@firebase/database",wL="@firebase/data-connect",xL="@firebase/database-compat",TL="@firebase/functions",SL="@firebase/functions-compat",AL="@firebase/installations",CL="@firebase/installations-compat",RL="@firebase/messaging",IL="@firebase/messaging-compat",NL="@firebase/performance",DL="@firebase/performance-compat",kL="@firebase/remote-config",ML="@firebase/remote-config-compat",PL="@firebase/storage",OL="@firebase/storage-compat",VL="@firebase/firestore",LL="@firebase/ai",UL="@firebase/firestore-compat",zL="firebase",jL="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0="[DEFAULT]",BL={[P0]:"fire-core",[mL]:"fire-core-compat",[gL]:"fire-analytics",[pL]:"fire-analytics-compat",[vL]:"fire-app-check",[yL]:"fire-app-check-compat",[_L]:"fire-auth",[EL]:"fire-auth-compat",[bL]:"fire-rtdb",[wL]:"fire-data-connect",[xL]:"fire-rtdb-compat",[TL]:"fire-fn",[SL]:"fire-fn-compat",[AL]:"fire-iid",[CL]:"fire-iid-compat",[RL]:"fire-fcm",[IL]:"fire-fcm-compat",[NL]:"fire-perf",[DL]:"fire-perf-compat",[kL]:"fire-rc",[ML]:"fire-rc-compat",[PL]:"fire-gcs",[OL]:"fire-gcs-compat",[VL]:"fire-fst",[UL]:"fire-fst-compat",[LL]:"fire-vertex","fire-js":"fire-js",[zL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um=new Map,HL=new Map,V0=new Map;function oT(t,e){try{t.container.addComponent(e)}catch(n){gs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Sa(t){const e=t.name;if(V0.has(e))return gs.debug(`There were multiple attempts to register component ${e}.`),!1;V0.set(e,t);for(const n of um.values())oT(n,t);for(const n of HL.values())oT(n,t);return!0}function Gm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function fr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ho=new Oh("app","Firebase",FL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ho.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=jL;function JC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:O0,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw ho.create("bad-app-name",{appName:String(s)});if(n||(n=XC()),!n)throw ho.create("no-options");const a=um.get(s);if(a){if(Ta(n,a.options)&&Ta(r,a.config))return a;throw ho.create("duplicate-app",{appName:s})}const c=new Q6(s);for(const d of V0.values())c.addComponent(d);const u=new $L(n,r,c);return um.set(s,u),u}function Zv(t=O0){const e=um.get(t);if(!e&&t===O0&&XC())return JC();if(!e)throw ho.create("no-app",{appName:t});return e}function Ci(t,e,n){var r;let s=(r=BL[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gs.warn(u.join(" "));return}Sa(new yo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL="firebase-heartbeat-database",GL=1,fh="firebase-heartbeat-store";let $y=null;function eR(){return $y||($y=cL(qL,GL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fh)}catch(n){console.warn(n)}}}}).catch(t=>{throw ho.create("idb-open",{originalErrorMessage:t.message})})),$y}async function YL(t){try{const n=(await eR()).transaction(fh),r=await n.objectStore(fh).get(tR(t));return await n.done,r}catch(e){if(e instanceof Li)gs.warn(e.message);else{const n=ho.create("idb-get",{originalErrorMessage:e?.message});gs.warn(n.message)}}}async function aT(t,e){try{const r=(await eR()).transaction(fh,"readwrite");await r.objectStore(fh).put(e,tR(t)),await r.done}catch(n){if(n instanceof Li)gs.warn(n.message);else{const r=ho.create("idb-set",{originalErrorMessage:n?.message});gs.warn(r.message)}}}function tR(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=1024,XL=30;class QL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ZL(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=lT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>XL){const c=JL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){gs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=lT(),{heartbeatsToSend:r,unsentEntries:s}=WL(this._heartbeatsCache.heartbeats),a=cm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return gs.warn(n),""}}}function lT(){return new Date().toISOString().substring(0,10)}function WL(t,e=KL){const n=[];let r=t.slice();for(const s of t){const a=n.find(c=>c.agent===s.agent);if(a){if(a.dates.push(s.date),cT(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),cT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ZL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return U6()?z6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await YL(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return aT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return aT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function cT(t){return cm(JSON.stringify({version:2,heartbeats:t})).length}function JL(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e9(t){Sa(new yo("platform-logger",e=>new dL(e),"PRIVATE")),Sa(new yo("heartbeat",e=>new QL(e),"PRIVATE")),Ci(P0,sT,t),Ci(P0,sT,"esm2017"),Ci("fire-js","")}e9("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t9="type.googleapis.com/google.protobuf.Int64Value",n9="type.googleapis.com/google.protobuf.UInt64Value";function nR(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function hm(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>hm(e));if(typeof t=="function"||typeof t=="object")return nR(t,e=>hm(e));throw new Error("Data cannot be encoded in JSON: "+t)}function ic(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case t9:case n9:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>ic(e)):typeof t=="function"||typeof t=="object"?nR(t,e=>ic(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wn extends Li{constructor(e,n,r){super(`${Jv}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Wn.prototype)}}function r9(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function dm(t,e){let n=r9(t),r=n,s;try{const a=e&&e.error;if(a){const c=a.status;if(typeof c=="string"){if(!uT[c])return new Wn("internal","internal");n=uT[c],r=c}const u=a.message;typeof u=="string"&&(r=u),s=a.details,s!==void 0&&(s=ic(s))}}catch{}return n==="ok"?null:new Wn(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,fr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s?.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="us-central1",s9=/^data: (.*?)(?:\n|$)/;function o9(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Wn("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class a9{constructor(e,n,r,s,a=L0,c=(...u)=>fetch(...u)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new i9(e,n,r,s),this.cancelAllRequests=new Promise(u=>{this.deleteService=()=>Promise.resolve(u())});try{const u=new URL(a);this.customDomain=u.origin+(u.pathname==="/"?"":u.pathname),this.region=L0}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function l9(t,e,n){const r=Da(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(Kv(t.emulatorOrigin),Xv("Functions",!0))}function c9(t,e,n){const r=s=>h9(t,e,s,{});return r.stream=(s,a)=>f9(t,e,s,a),r}async function u9(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}async function rR(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function h9(t,e,n,r){const s=t._url(e);return d9(t,s,n,r)}async function d9(t,e,n,r){n=hm(n);const s={data:n},a=await rR(t,r),c=r.timeout||7e4,u=o9(c),d=await Promise.race([u9(e,s,a,t.fetchImpl),u.promise,t.cancelAllRequests]);if(u.cancel(),!d)throw new Wn("cancelled","Firebase Functions instance was deleted.");const f=dm(d.status,d.json);if(f)throw f;if(!d.json)throw new Wn("internal","Response is not valid JSON object.");let p=d.json.data;if(typeof p>"u"&&(p=d.json.result),typeof p>"u")throw new Wn("internal","Response is missing data field.");return{data:ic(p)}}function f9(t,e,n,r){const s=t._url(e);return m9(t,s,n,r||{})}async function m9(t,e,n,r){var s;n=hm(n);const a={data:n},c=await rR(t,r);c["Content-Type"]="application/json",c.Accept="text/event-stream";let u;try{u=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(a),headers:c,signal:r?.signal})}catch(b){if(b instanceof Error&&b.name==="AbortError"){const R=new Wn("cancelled","Request was cancelled.");return{data:Promise.reject(R),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(R)}}}}}}const T=dm(0,null);return{data:Promise.reject(T),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(T)}}}}}}let d,f;const p=new Promise((b,T)=>{d=b,f=T});(s=r?.signal)===null||s===void 0||s.addEventListener("abort",()=>{const b=new Wn("cancelled","Request was cancelled.");f(b)});const v=u.body.getReader(),_=p9(v,d,f,r?.signal);return{stream:{[Symbol.asyncIterator](){const b=_.getReader();return{async next(){const{value:T,done:R}=await b.read();return{value:T,done:R}},async return(){return await b.cancel(),{done:!0,value:void 0}}}}},data:p}}function p9(t,e,n,r){const s=(c,u)=>{const d=c.match(s9);if(!d)return;const f=d[1];try{const p=JSON.parse(f);if("result"in p){e(ic(p.result));return}if("message"in p){u.enqueue(ic(p.message));return}if("error"in p){const v=dm(0,p);u.error(v),n(v);return}}catch(p){if(p instanceof Wn){u.error(p),n(p);return}}},a=new TextDecoder;return new ReadableStream({start(c){let u="";return d();async function d(){if(r?.aborted){const f=new Wn("cancelled","Request was cancelled");return c.error(f),n(f),Promise.resolve()}try{const{value:f,done:p}=await t.read();if(p){u.trim()&&s(u.trim(),c),c.close();return}if(r?.aborted){const _=new Wn("cancelled","Request was cancelled");c.error(_),n(_),await t.cancel();return}u+=a.decode(f,{stream:!0});const v=u.split(`
`);u=v.pop()||"";for(const _ of v)_.trim()&&s(_.trim(),c);return d()}catch(f){const p=f instanceof Wn?f:dm(0,null);c.error(p),n(p)}}},cancel(){return t.cancel()}})}const hT="@firebase/functions",dT="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g9="auth-internal",y9="app-check-internal",v9="messaging-internal";function _9(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),a=n.getProvider(g9),c=n.getProvider(v9),u=n.getProvider(y9);return new a9(s,a,c,u,r)};Sa(new yo(Jv,e,"PUBLIC").setMultipleInstances(!0)),Ci(hT,dT,t),Ci(hT,dT,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E9(t=Zv(),e=L0){const r=Gm(Vt(t),Jv).getImmediate({identifier:e}),s=KC("functions");return s&&b9(r,...s),r}function b9(t,e,n){l9(Vt(t),e,n)}function w9(t,e,n){return c9(Vt(t),e)}_9();var x9="firebase",T9="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ci(x9,T9,"app");var fT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fo,iR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,S){function A(){}A.prototype=S.prototype,k.D=S.prototype,k.prototype=new A,k.prototype.constructor=k,k.C=function(V,B,F){for(var D=Array(arguments.length-2),P=2;P<arguments.length;P++)D[P-2]=arguments[P];return S.prototype[B].apply(V,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,S,A){A||(A=0);var V=Array(16);if(typeof S=="string")for(var B=0;16>B;++B)V[B]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(B=0;16>B;++B)V[B]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=k.g[0],A=k.g[1],B=k.g[2];var F=k.g[3],D=S+(F^A&(B^F))+V[0]+3614090360&4294967295;S=A+(D<<7&4294967295|D>>>25),D=F+(B^S&(A^B))+V[1]+3905402710&4294967295,F=S+(D<<12&4294967295|D>>>20),D=B+(A^F&(S^A))+V[2]+606105819&4294967295,B=F+(D<<17&4294967295|D>>>15),D=A+(S^B&(F^S))+V[3]+3250441966&4294967295,A=B+(D<<22&4294967295|D>>>10),D=S+(F^A&(B^F))+V[4]+4118548399&4294967295,S=A+(D<<7&4294967295|D>>>25),D=F+(B^S&(A^B))+V[5]+1200080426&4294967295,F=S+(D<<12&4294967295|D>>>20),D=B+(A^F&(S^A))+V[6]+2821735955&4294967295,B=F+(D<<17&4294967295|D>>>15),D=A+(S^B&(F^S))+V[7]+4249261313&4294967295,A=B+(D<<22&4294967295|D>>>10),D=S+(F^A&(B^F))+V[8]+1770035416&4294967295,S=A+(D<<7&4294967295|D>>>25),D=F+(B^S&(A^B))+V[9]+2336552879&4294967295,F=S+(D<<12&4294967295|D>>>20),D=B+(A^F&(S^A))+V[10]+4294925233&4294967295,B=F+(D<<17&4294967295|D>>>15),D=A+(S^B&(F^S))+V[11]+2304563134&4294967295,A=B+(D<<22&4294967295|D>>>10),D=S+(F^A&(B^F))+V[12]+1804603682&4294967295,S=A+(D<<7&4294967295|D>>>25),D=F+(B^S&(A^B))+V[13]+4254626195&4294967295,F=S+(D<<12&4294967295|D>>>20),D=B+(A^F&(S^A))+V[14]+2792965006&4294967295,B=F+(D<<17&4294967295|D>>>15),D=A+(S^B&(F^S))+V[15]+1236535329&4294967295,A=B+(D<<22&4294967295|D>>>10),D=S+(B^F&(A^B))+V[1]+4129170786&4294967295,S=A+(D<<5&4294967295|D>>>27),D=F+(A^B&(S^A))+V[6]+3225465664&4294967295,F=S+(D<<9&4294967295|D>>>23),D=B+(S^A&(F^S))+V[11]+643717713&4294967295,B=F+(D<<14&4294967295|D>>>18),D=A+(F^S&(B^F))+V[0]+3921069994&4294967295,A=B+(D<<20&4294967295|D>>>12),D=S+(B^F&(A^B))+V[5]+3593408605&4294967295,S=A+(D<<5&4294967295|D>>>27),D=F+(A^B&(S^A))+V[10]+38016083&4294967295,F=S+(D<<9&4294967295|D>>>23),D=B+(S^A&(F^S))+V[15]+3634488961&4294967295,B=F+(D<<14&4294967295|D>>>18),D=A+(F^S&(B^F))+V[4]+3889429448&4294967295,A=B+(D<<20&4294967295|D>>>12),D=S+(B^F&(A^B))+V[9]+568446438&4294967295,S=A+(D<<5&4294967295|D>>>27),D=F+(A^B&(S^A))+V[14]+3275163606&4294967295,F=S+(D<<9&4294967295|D>>>23),D=B+(S^A&(F^S))+V[3]+4107603335&4294967295,B=F+(D<<14&4294967295|D>>>18),D=A+(F^S&(B^F))+V[8]+1163531501&4294967295,A=B+(D<<20&4294967295|D>>>12),D=S+(B^F&(A^B))+V[13]+2850285829&4294967295,S=A+(D<<5&4294967295|D>>>27),D=F+(A^B&(S^A))+V[2]+4243563512&4294967295,F=S+(D<<9&4294967295|D>>>23),D=B+(S^A&(F^S))+V[7]+1735328473&4294967295,B=F+(D<<14&4294967295|D>>>18),D=A+(F^S&(B^F))+V[12]+2368359562&4294967295,A=B+(D<<20&4294967295|D>>>12),D=S+(A^B^F)+V[5]+4294588738&4294967295,S=A+(D<<4&4294967295|D>>>28),D=F+(S^A^B)+V[8]+2272392833&4294967295,F=S+(D<<11&4294967295|D>>>21),D=B+(F^S^A)+V[11]+1839030562&4294967295,B=F+(D<<16&4294967295|D>>>16),D=A+(B^F^S)+V[14]+4259657740&4294967295,A=B+(D<<23&4294967295|D>>>9),D=S+(A^B^F)+V[1]+2763975236&4294967295,S=A+(D<<4&4294967295|D>>>28),D=F+(S^A^B)+V[4]+1272893353&4294967295,F=S+(D<<11&4294967295|D>>>21),D=B+(F^S^A)+V[7]+4139469664&4294967295,B=F+(D<<16&4294967295|D>>>16),D=A+(B^F^S)+V[10]+3200236656&4294967295,A=B+(D<<23&4294967295|D>>>9),D=S+(A^B^F)+V[13]+681279174&4294967295,S=A+(D<<4&4294967295|D>>>28),D=F+(S^A^B)+V[0]+3936430074&4294967295,F=S+(D<<11&4294967295|D>>>21),D=B+(F^S^A)+V[3]+3572445317&4294967295,B=F+(D<<16&4294967295|D>>>16),D=A+(B^F^S)+V[6]+76029189&4294967295,A=B+(D<<23&4294967295|D>>>9),D=S+(A^B^F)+V[9]+3654602809&4294967295,S=A+(D<<4&4294967295|D>>>28),D=F+(S^A^B)+V[12]+3873151461&4294967295,F=S+(D<<11&4294967295|D>>>21),D=B+(F^S^A)+V[15]+530742520&4294967295,B=F+(D<<16&4294967295|D>>>16),D=A+(B^F^S)+V[2]+3299628645&4294967295,A=B+(D<<23&4294967295|D>>>9),D=S+(B^(A|~F))+V[0]+4096336452&4294967295,S=A+(D<<6&4294967295|D>>>26),D=F+(A^(S|~B))+V[7]+1126891415&4294967295,F=S+(D<<10&4294967295|D>>>22),D=B+(S^(F|~A))+V[14]+2878612391&4294967295,B=F+(D<<15&4294967295|D>>>17),D=A+(F^(B|~S))+V[5]+4237533241&4294967295,A=B+(D<<21&4294967295|D>>>11),D=S+(B^(A|~F))+V[12]+1700485571&4294967295,S=A+(D<<6&4294967295|D>>>26),D=F+(A^(S|~B))+V[3]+2399980690&4294967295,F=S+(D<<10&4294967295|D>>>22),D=B+(S^(F|~A))+V[10]+4293915773&4294967295,B=F+(D<<15&4294967295|D>>>17),D=A+(F^(B|~S))+V[1]+2240044497&4294967295,A=B+(D<<21&4294967295|D>>>11),D=S+(B^(A|~F))+V[8]+1873313359&4294967295,S=A+(D<<6&4294967295|D>>>26),D=F+(A^(S|~B))+V[15]+4264355552&4294967295,F=S+(D<<10&4294967295|D>>>22),D=B+(S^(F|~A))+V[6]+2734768916&4294967295,B=F+(D<<15&4294967295|D>>>17),D=A+(F^(B|~S))+V[13]+1309151649&4294967295,A=B+(D<<21&4294967295|D>>>11),D=S+(B^(A|~F))+V[4]+4149444226&4294967295,S=A+(D<<6&4294967295|D>>>26),D=F+(A^(S|~B))+V[11]+3174756917&4294967295,F=S+(D<<10&4294967295|D>>>22),D=B+(S^(F|~A))+V[2]+718787259&4294967295,B=F+(D<<15&4294967295|D>>>17),D=A+(F^(B|~S))+V[9]+3951481745&4294967295,k.g[0]=k.g[0]+S&4294967295,k.g[1]=k.g[1]+(B+(D<<21&4294967295|D>>>11))&4294967295,k.g[2]=k.g[2]+B&4294967295,k.g[3]=k.g[3]+F&4294967295}r.prototype.u=function(k,S){S===void 0&&(S=k.length);for(var A=S-this.blockSize,V=this.B,B=this.h,F=0;F<S;){if(B==0)for(;F<=A;)s(this,k,F),F+=this.blockSize;if(typeof k=="string"){for(;F<S;)if(V[B++]=k.charCodeAt(F++),B==this.blockSize){s(this,V),B=0;break}}else for(;F<S;)if(V[B++]=k[F++],B==this.blockSize){s(this,V),B=0;break}}this.h=B,this.o+=S},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var S=1;S<k.length-8;++S)k[S]=0;var A=8*this.o;for(S=k.length-8;S<k.length;++S)k[S]=A&255,A/=256;for(this.u(k),k=Array(16),S=A=0;4>S;++S)for(var V=0;32>V;V+=8)k[A++]=this.g[S]>>>V&255;return k};function a(k,S){var A=u;return Object.prototype.hasOwnProperty.call(A,k)?A[k]:A[k]=S(k)}function c(k,S){this.h=S;for(var A=[],V=!0,B=k.length-1;0<=B;B--){var F=k[B]|0;V&&F==S||(A[B]=F,V=!1)}this.g=A}var u={};function d(k){return-128<=k&&128>k?a(k,function(S){return new c([S|0],0>S?-1:0)}):new c([k|0],0>k?-1:0)}function f(k){if(isNaN(k)||!isFinite(k))return v;if(0>k)return I(f(-k));for(var S=[],A=1,V=0;k>=A;V++)S[V]=k/A|0,A*=4294967296;return new c(S,0)}function p(k,S){if(k.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(k.charAt(0)=="-")return I(p(k.substring(1),S));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=f(Math.pow(S,8)),V=v,B=0;B<k.length;B+=8){var F=Math.min(8,k.length-B),D=parseInt(k.substring(B,B+F),S);8>F?(F=f(Math.pow(S,F)),V=V.j(F).add(f(D))):(V=V.j(A),V=V.add(f(D)))}return V}var v=d(0),_=d(1),b=d(16777216);t=c.prototype,t.m=function(){if(R(this))return-I(this).m();for(var k=0,S=1,A=0;A<this.g.length;A++){var V=this.i(A);k+=(0<=V?V:4294967296+V)*S,S*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(T(this))return"0";if(R(this))return"-"+I(this).toString(k);for(var S=f(Math.pow(k,6)),A=this,V="";;){var B=H(A,S).g;A=N(A,B.j(S));var F=((0<A.g.length?A.g[0]:A.h)>>>0).toString(k);if(A=B,T(A))return F+V;for(;6>F.length;)F="0"+F;V=F+V}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function T(k){if(k.h!=0)return!1;for(var S=0;S<k.g.length;S++)if(k.g[S]!=0)return!1;return!0}function R(k){return k.h==-1}t.l=function(k){return k=N(this,k),R(k)?-1:T(k)?0:1};function I(k){for(var S=k.g.length,A=[],V=0;V<S;V++)A[V]=~k.g[V];return new c(A,~k.h).add(_)}t.abs=function(){return R(this)?I(this):this},t.add=function(k){for(var S=Math.max(this.g.length,k.g.length),A=[],V=0,B=0;B<=S;B++){var F=V+(this.i(B)&65535)+(k.i(B)&65535),D=(F>>>16)+(this.i(B)>>>16)+(k.i(B)>>>16);V=D>>>16,F&=65535,D&=65535,A[B]=D<<16|F}return new c(A,A[A.length-1]&-2147483648?-1:0)};function N(k,S){return k.add(I(S))}t.j=function(k){if(T(this)||T(k))return v;if(R(this))return R(k)?I(this).j(I(k)):I(I(this).j(k));if(R(k))return I(this.j(I(k)));if(0>this.l(b)&&0>k.l(b))return f(this.m()*k.m());for(var S=this.g.length+k.g.length,A=[],V=0;V<2*S;V++)A[V]=0;for(V=0;V<this.g.length;V++)for(var B=0;B<k.g.length;B++){var F=this.i(V)>>>16,D=this.i(V)&65535,P=k.i(B)>>>16,X=k.i(B)&65535;A[2*V+2*B]+=D*X,L(A,2*V+2*B),A[2*V+2*B+1]+=F*X,L(A,2*V+2*B+1),A[2*V+2*B+1]+=D*P,L(A,2*V+2*B+1),A[2*V+2*B+2]+=F*P,L(A,2*V+2*B+2)}for(V=0;V<S;V++)A[V]=A[2*V+1]<<16|A[2*V];for(V=S;V<2*S;V++)A[V]=0;return new c(A,0)};function L(k,S){for(;(k[S]&65535)!=k[S];)k[S+1]+=k[S]>>>16,k[S]&=65535,S++}function $(k,S){this.g=k,this.h=S}function H(k,S){if(T(S))throw Error("division by zero");if(T(k))return new $(v,v);if(R(k))return S=H(I(k),S),new $(I(S.g),I(S.h));if(R(S))return S=H(k,I(S)),new $(I(S.g),S.h);if(30<k.g.length){if(R(k)||R(S))throw Error("slowDivide_ only works with positive integers.");for(var A=_,V=S;0>=V.l(k);)A=G(A),V=G(V);var B=K(A,1),F=K(V,1);for(V=K(V,2),A=K(A,2);!T(V);){var D=F.add(V);0>=D.l(k)&&(B=B.add(A),F=D),V=K(V,1),A=K(A,1)}return S=N(k,B.j(S)),new $(B,S)}for(B=v;0<=k.l(S);){for(A=Math.max(1,Math.floor(k.m()/S.m())),V=Math.ceil(Math.log(A)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),F=f(A),D=F.j(S);R(D)||0<D.l(k);)A-=V,F=f(A),D=F.j(S);T(F)&&(F=_),B=B.add(F),k=N(k,D)}return new $(B,k)}t.A=function(k){return H(this,k).h},t.and=function(k){for(var S=Math.max(this.g.length,k.g.length),A=[],V=0;V<S;V++)A[V]=this.i(V)&k.i(V);return new c(A,this.h&k.h)},t.or=function(k){for(var S=Math.max(this.g.length,k.g.length),A=[],V=0;V<S;V++)A[V]=this.i(V)|k.i(V);return new c(A,this.h|k.h)},t.xor=function(k){for(var S=Math.max(this.g.length,k.g.length),A=[],V=0;V<S;V++)A[V]=this.i(V)^k.i(V);return new c(A,this.h^k.h)};function G(k){for(var S=k.g.length+1,A=[],V=0;V<S;V++)A[V]=k.i(V)<<1|k.i(V-1)>>>31;return new c(A,k.h)}function K(k,S){var A=S>>5;S%=32;for(var V=k.g.length-A,B=[],F=0;F<V;F++)B[F]=0<S?k.i(F+A)>>>S|k.i(F+A+1)<<32-S:k.i(F+A);return new c(B,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,iR=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=p,fo=c}).apply(typeof fT<"u"?fT:typeof self<"u"?self:typeof window<"u"?window:{});var xf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sR,Hu,oR,zf,U0,aR,lR,cR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,E,w){return m==Array.prototype||m==Object.prototype||(m[E]=w.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof xf=="object"&&xf];for(var E=0;E<m.length;++E){var w=m[E];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function s(m,E){if(E)e:{var w=r;m=m.split(".");for(var j=0;j<m.length-1;j++){var re=m[j];if(!(re in w))break e;w=w[re]}m=m[m.length-1],j=w[m],E=E(j),E!=j&&E!=null&&e(w,m,{configurable:!0,writable:!0,value:E})}}function a(m,E){m instanceof String&&(m+="");var w=0,j=!1,re={next:function(){if(!j&&w<m.length){var ce=w++;return{value:E(ce,m[ce]),done:!1}}return j=!0,{done:!0,value:void 0}}};return re[Symbol.iterator]=function(){return re},re}s("Array.prototype.values",function(m){return m||function(){return a(this,function(E,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function d(m){var E=typeof m;return E=E!="object"?E:m?Array.isArray(m)?"array":E:"null",E=="array"||E=="object"&&typeof m.length=="number"}function f(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function p(m,E,w){return m.call.apply(m.bind,arguments)}function v(m,E,w){if(!m)throw Error();if(2<arguments.length){var j=Array.prototype.slice.call(arguments,2);return function(){var re=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(re,j),m.apply(E,re)}}return function(){return m.apply(E,arguments)}}function _(m,E,w){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:v,_.apply(null,arguments)}function b(m,E){var w=Array.prototype.slice.call(arguments,1);return function(){var j=w.slice();return j.push.apply(j,arguments),m.apply(this,j)}}function T(m,E){function w(){}w.prototype=E.prototype,m.aa=E.prototype,m.prototype=new w,m.prototype.constructor=m,m.Qb=function(j,re,ce){for(var Ee=Array(arguments.length-2),We=2;We<arguments.length;We++)Ee[We-2]=arguments[We];return E.prototype[re].apply(j,Ee)}}function R(m){const E=m.length;if(0<E){const w=Array(E);for(let j=0;j<E;j++)w[j]=m[j];return w}return[]}function I(m,E){for(let w=1;w<arguments.length;w++){const j=arguments[w];if(d(j)){const re=m.length||0,ce=j.length||0;m.length=re+ce;for(let Ee=0;Ee<ce;Ee++)m[re+Ee]=j[Ee]}else m.push(j)}}class N{constructor(E,w){this.i=E,this.j=w,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function L(m){return/^[\s\xa0]*$/.test(m)}function $(){var m=u.navigator;return m&&(m=m.userAgent)?m:""}function H(m){return H[" "](m),m}H[" "]=function(){};var G=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function K(m,E,w){for(const j in m)E.call(w,m[j],j,m)}function k(m,E){for(const w in m)E.call(void 0,m[w],w,m)}function S(m){const E={};for(const w in m)E[w]=m[w];return E}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(m,E){let w,j;for(let re=1;re<arguments.length;re++){j=arguments[re];for(w in j)m[w]=j[w];for(let ce=0;ce<A.length;ce++)w=A[ce],Object.prototype.hasOwnProperty.call(j,w)&&(m[w]=j[w])}}function B(m){var E=1;m=m.split(":");const w=[];for(;0<E&&m.length;)w.push(m.shift()),E--;return m.length&&w.push(m.join(":")),w}function F(m){u.setTimeout(()=>{throw m},0)}function D(){var m=J;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class P{constructor(){this.h=this.g=null}add(E,w){const j=X.get();j.set(E,w),this.h?this.h.next=j:this.g=j,this.h=j}}var X=new N(()=>new z,m=>m.reset());class z{constructor(){this.next=this.g=this.h=null}set(E,w){this.h=E,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,te=!1,J=new P,U=()=>{const m=u.Promise.resolve(void 0);Y=()=>{m.then(W)}};var W=()=>{for(var m;m=D();){try{m.h.call(m.g)}catch(w){F(w)}var E=X;E.j(m),100>E.h&&(E.h++,m.next=E.g,E.g=m)}te=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Q(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}Q.prototype.h=function(){this.defaultPrevented=!0};var se=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const w=()=>{};u.addEventListener("test",w,E),u.removeEventListener("test",w,E)}catch{}return m}();function fe(m,E){if(Q.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var w=this.type=m.type,j=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget){if(G){e:{try{H(E.nodeName);var re=!0;break e}catch{}re=!1}re||(E=null)}}else w=="mouseover"?E=m.fromElement:w=="mouseout"&&(E=m.toElement);this.relatedTarget=E,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:ue[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&fe.aa.h.call(this)}}T(fe,Q);var ue={2:"touch",3:"pen",4:"mouse"};fe.prototype.h=function(){fe.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var ye="closure_listenable_"+(1e6*Math.random()|0),_e=0;function Ae(m,E,w,j,re){this.listener=m,this.proxy=null,this.src=E,this.type=w,this.capture=!!j,this.ha=re,this.key=++_e,this.da=this.fa=!1}function Re(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function tt(m){this.src=m,this.g={},this.h=0}tt.prototype.add=function(m,E,w,j,re){var ce=m.toString();m=this.g[ce],m||(m=this.g[ce]=[],this.h++);var Ee=Ue(m,E,j,re);return-1<Ee?(E=m[Ee],w||(E.fa=!1)):(E=new Ae(E,this.src,ce,!!j,re),E.fa=w,m.push(E)),E};function it(m,E){var w=E.type;if(w in m.g){var j=m.g[w],re=Array.prototype.indexOf.call(j,E,void 0),ce;(ce=0<=re)&&Array.prototype.splice.call(j,re,1),ce&&(Re(E),m.g[w].length==0&&(delete m.g[w],m.h--))}}function Ue(m,E,w,j){for(var re=0;re<m.length;++re){var ce=m[re];if(!ce.da&&ce.listener==E&&ce.capture==!!w&&ce.ha==j)return re}return-1}var nt="closure_lm_"+(1e6*Math.random()|0),st={};function Ht(m,E,w,j,re){if(Array.isArray(E)){for(var ce=0;ce<E.length;ce++)Ht(m,E[ce],w,j,re);return null}return w=Br(w),m&&m[ye]?m.K(E,w,f(j)?!!j.capture:!1,re):ze(m,E,w,!1,j,re)}function ze(m,E,w,j,re,ce){if(!E)throw Error("Invalid event type");var Ee=f(re)?!!re.capture:!!re,We=Mn(m);if(We||(m[nt]=We=new tt(m)),w=We.add(E,w,j,Ee,ce),w.proxy)return w;if(j=be(),w.proxy=j,j.src=m,j.listener=w,m.addEventListener)se||(re=Ee),re===void 0&&(re=!1),m.addEventListener(E.toString(),j,re);else if(m.attachEvent)m.attachEvent(Wt(E.toString()),j);else if(m.addListener&&m.removeListener)m.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return w}function be(){function m(w){return E.call(m.src,m.listener,w)}const E=Jn;return m}function It(m,E,w,j,re){if(Array.isArray(E))for(var ce=0;ce<E.length;ce++)It(m,E[ce],w,j,re);else j=f(j)?!!j.capture:!!j,w=Br(w),m&&m[ye]?(m=m.i,E=String(E).toString(),E in m.g&&(ce=m.g[E],w=Ue(ce,w,j,re),-1<w&&(Re(ce[w]),Array.prototype.splice.call(ce,w,1),ce.length==0&&(delete m.g[E],m.h--)))):m&&(m=Mn(m))&&(E=m.g[E.toString()],m=-1,E&&(m=Ue(E,w,j,re)),(w=-1<m?E[m]:null)&&Tn(w))}function Tn(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[ye])it(E.i,m);else{var w=m.type,j=m.proxy;E.removeEventListener?E.removeEventListener(w,j,m.capture):E.detachEvent?E.detachEvent(Wt(w),j):E.addListener&&E.removeListener&&E.removeListener(j),(w=Mn(E))?(it(w,m),w.h==0&&(w.src=null,E[nt]=null)):Re(m)}}}function Wt(m){return m in st?st[m]:st[m]="on"+m}function Jn(m,E){if(m.da)m=!0;else{E=new fe(E,this);var w=m.listener,j=m.ha||m.src;m.fa&&Tn(m),m=w.call(j,E)}return m}function Mn(m){return m=m[nt],m instanceof tt?m:null}var Pn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Br(m){return typeof m=="function"?m:(m[Pn]||(m[Pn]=function(E){return m.handleEvent(E)}),m[Pn])}function at(){ne.call(this),this.i=new tt(this),this.M=this,this.F=null}T(at,ne),at.prototype[ye]=!0,at.prototype.removeEventListener=function(m,E,w,j){It(this,m,E,w,j)};function Ge(m,E){var w,j=m.F;if(j)for(w=[];j;j=j.F)w.push(j);if(m=m.M,j=E.type||E,typeof E=="string")E=new Q(E,m);else if(E instanceof Q)E.target=E.target||m;else{var re=E;E=new Q(j,m),V(E,re)}if(re=!0,w)for(var ce=w.length-1;0<=ce;ce--){var Ee=E.g=w[ce];re=Ft(Ee,j,!0,E)&&re}if(Ee=E.g=m,re=Ft(Ee,j,!0,E)&&re,re=Ft(Ee,j,!1,E)&&re,w)for(ce=0;ce<w.length;ce++)Ee=E.g=w[ce],re=Ft(Ee,j,!1,E)&&re}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var m=this.i,E;for(E in m.g){for(var w=m.g[E],j=0;j<w.length;j++)Re(w[j]);delete m.g[E],m.h--}}this.F=null},at.prototype.K=function(m,E,w,j){return this.i.add(String(m),E,!1,w,j)},at.prototype.L=function(m,E,w,j){return this.i.add(String(m),E,!0,w,j)};function Ft(m,E,w,j){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();for(var re=!0,ce=0;ce<E.length;++ce){var Ee=E[ce];if(Ee&&!Ee.da&&Ee.capture==w){var We=Ee.listener,Jt=Ee.ha||Ee.src;Ee.fa&&it(m.i,Ee),re=We.call(Jt,j)!==!1&&re}}return re&&!j.defaultPrevented}function xt(m,E,w){if(typeof m=="function")w&&(m=_(m,w));else if(m&&typeof m.handleEvent=="function")m=_(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:u.setTimeout(m,E||0)}function ii(m){m.g=xt(()=>{m.g=null,m.i&&(m.i=!1,ii(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class $t extends ne{constructor(E,w){super(),this.m=E,this.l=w,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:ii(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sn(m){ne.call(this),this.h=m,this.g={}}T(sn,ne);var On=[];function Vn(m){K(m.g,function(E,w){this.g.hasOwnProperty(w)&&Tn(E)},m),m.g={}}sn.prototype.N=function(){sn.aa.N.call(this),Vn(this)},sn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var on=u.JSON.stringify,mn=u.JSON.parse,Ln=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function Ui(){}Ui.prototype.h=null;function zi(m){return m.h||(m.h=m.i())}function Hr(){}var er={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _r(){Q.call(this,"d")}T(_r,Q);function tr(){Q.call(this,"c")}T(tr,Q);var Er={},Do=null;function si(){return Do=Do||new at}Er.La="serverreachability";function xs(m){Q.call(this,Er.La,m)}T(xs,Q);function oi(m){const E=si();Ge(E,new xs(E))}Er.STAT_EVENT="statevent";function Va(m,E){Q.call(this,Er.STAT_EVENT,m),this.stat=E}T(Va,Q);function yt(m){const E=si();Ge(E,new Va(E,m))}Er.Ma="timingevent";function Lt(m,E){Q.call(this,Er.Ma,m),this.size=E}T(Lt,Q);function Nt(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},E)}function $n(){this.g=!0}$n.prototype.xa=function(){this.g=!1};function ko(m,E,w,j,re,ce){m.info(function(){if(m.g)if(ce)for(var Ee="",We=ce.split("&"),Jt=0;Jt<We.length;Jt++){var Ze=We[Jt].split("=");if(1<Ze.length){var ln=Ze[0];Ze=Ze[1];var en=ln.split("_");Ee=2<=en.length&&en[1]=="type"?Ee+(ln+"="+Ze+"&"):Ee+(ln+"=redacted&")}}else Ee=null;else Ee=ce;return"XMLHTTP REQ ("+j+") [attempt "+re+"]: "+E+`
`+w+`
`+Ee})}function Ac(m,E,w,j,re,ce,Ee){m.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+re+"]: "+E+`
`+w+`
`+ce+" "+Ee})}function ai(m,E,w,j){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+ji(m,w)+(j?" "+j:"")})}function La(m,E){m.info(function(){return"TIMEOUT: "+E})}$n.prototype.info=function(){};function ji(m,E){if(!m.g)return E;if(!E)return null;try{var w=JSON.parse(E);if(w){for(m=0;m<w.length;m++)if(Array.isArray(w[m])){var j=w[m];if(!(2>j.length)){var re=j[1];if(Array.isArray(re)&&!(1>re.length)){var ce=re[0];if(ce!="noop"&&ce!="stop"&&ce!="close")for(var Ee=1;Ee<re.length;Ee++)re[Ee]=""}}}}return on(w)}catch{return E}}var li={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},br={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wr;function xr(){}T(xr,Ui),xr.prototype.g=function(){return new XMLHttpRequest},xr.prototype.i=function(){return{}},wr=new xr;function pn(m,E,w,j){this.j=m,this.i=E,this.l=w,this.R=j||1,this.U=new sn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tt}function Tt(){this.i=null,this.g="",this.h=!1}var Mo={},Ts={};function nr(m,E,w){m.L=1,m.v=Lo(rr(E)),m.m=w,m.P=!0,Fr(m,null)}function Fr(m,E){m.F=Date.now(),Bi(m),m.A=rr(m.v);var w=m.A,j=m.R;Array.isArray(j)||(j=[String(j)]),kc(w.i,"t",j),m.C=0,w=m.j.J,m.h=new Tt,m.g=ld(m.j,w?E:null,!m.m),0<m.O&&(m.M=new $t(_(m.Y,m,m.g),m.O)),E=m.U,w=m.g,j=m.ca;var re="readystatechange";Array.isArray(re)||(re&&(On[0]=re.toString()),re=On);for(var ce=0;ce<re.length;ce++){var Ee=Ht(w,re[ce],j||E.handleEvent,!1,E.h||E);if(!Ee)break;E.g[Ee.key]=Ee}E=m.H?S(m.H):{},m.m?(m.u||(m.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,E)):(m.u="GET",m.g.ea(m.A,m.u,null,E)),oi(),ko(m.i,m.u,m.A,m.l,m.R,m.m)}pn.prototype.ca=function(m){m=m.target;const E=this.M;E&&Rr(m)==3?E.j():this.Y(m)},pn.prototype.Y=function(m){try{if(m==this.g)e:{const en=Rr(this.g);var E=this.g.Ba();const Ki=this.g.Z();if(!(3>en)&&(en!=3||this.g&&(this.h.h||this.g.oa()||ed(this.g)))){this.J||en!=4||E==7||(E==8||0>=Ki?oi(3):oi(2)),ci(this);var w=this.g.Z();this.X=w;t:if(Po(this)){var j=ed(this.g);m="";var re=j.length,ce=Rr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zt(this),Tr(this);var Ee="";break t}this.h.i=new u.TextDecoder}for(E=0;E<re;E++)this.h.h=!0,m+=this.h.i.decode(j[E],{stream:!(ce&&E==re-1)});j.length=0,this.h.g+=m,this.C=0,Ee=this.h.g}else Ee=this.g.oa();if(this.o=w==200,Ac(this.i,this.u,this.A,this.l,this.R,en,w),this.o){if(this.T&&!this.K){t:{if(this.g){var We,Jt=this.g;if((We=Jt.g?Jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(We)){var Ze=We;break t}}Ze=null}if(w=Ze)ai(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ui(this,w);else{this.o=!1,this.s=3,yt(12),Zt(this),Tr(this);break e}}if(this.P){w=!0;let gn;for(;!this.J&&this.C<Ee.length;)if(gn=Ua(this,Ee),gn==Ts){en==4&&(this.s=4,yt(14),w=!1),ai(this.i,this.l,null,"[Incomplete Response]");break}else if(gn==Mo){this.s=4,yt(15),ai(this.i,this.l,Ee,"[Invalid Chunk]"),w=!1;break}else ai(this.i,this.l,gn,null),ui(this,gn);if(Po(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),en!=4||Ee.length!=0||this.h.h||(this.s=1,yt(16),w=!1),this.o=this.o&&w,!w)ai(this.i,this.l,Ee,"[Invalid Chunked Response]"),Zt(this),Tr(this);else if(0<Ee.length&&!this.W){this.W=!0;var ln=this.j;ln.g==this&&ln.ba&&!ln.M&&(ln.j.info("Great, no buffering proxy detected. Bytes received: "+Ee.length),qo(ln),ln.M=!0,yt(11))}}else ai(this.i,this.l,Ee,null),ui(this,Ee);en==4&&Zt(this),this.o&&!this.J&&(en==4?sd(this.j,this):(this.o=!1,Bi(this)))}else Tp(this.g),w==400&&0<Ee.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),Zt(this),Tr(this)}}}catch{}finally{}};function Po(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Ua(m,E){var w=m.C,j=E.indexOf(`
`,w);return j==-1?Ts:(w=Number(E.substring(w,j)),isNaN(w)?Mo:(j+=1,j+w>E.length?Ts:(E=E.slice(j,j+w),m.C=j+w,E)))}pn.prototype.cancel=function(){this.J=!0,Zt(this)};function Bi(m){m.S=Date.now()+m.I,za(m,m.I)}function za(m,E){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Nt(_(m.ba,m),E)}function ci(m){m.B&&(u.clearTimeout(m.B),m.B=null)}pn.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(La(this.i,this.A),this.L!=2&&(oi(),yt(17)),Zt(this),this.s=2,Tr(this)):za(this,this.S-m)};function Tr(m){m.j.G==0||m.J||sd(m.j,m)}function Zt(m){ci(m);var E=m.M;E&&typeof E.ma=="function"&&E.ma(),m.M=null,Vn(m.U),m.g&&(E=m.g,m.g=null,E.abort(),E.ma())}function ui(m,E){try{var w=m.j;if(w.G!=0&&(w.g==m||Cc(w.h,m))){if(!m.K&&Cc(w.h,m)&&w.G==3){try{var j=w.Da.g.parse(E)}catch{j=null}if(Array.isArray(j)&&j.length==3){var re=j;if(re[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<m.F)Qa(w),Ka(w);else break e;Lc(w),yt(18)}}else w.za=re[1],0<w.za-w.T&&37500>re[2]&&w.F&&w.v==0&&!w.C&&(w.C=Nt(_(w.Za,w),6e3));if(1>=hi(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Yi(w,11)}else if((m.K||w.g==m)&&Qa(w),!L(E))for(re=w.Da.g.parse(E),E=0;E<re.length;E++){let Ze=re[E];if(w.T=Ze[0],Ze=Ze[1],w.G==2)if(Ze[0]=="c"){w.K=Ze[1],w.ia=Ze[2];const ln=Ze[3];ln!=null&&(w.la=ln,w.j.info("VER="+w.la));const en=Ze[4];en!=null&&(w.Aa=en,w.j.info("SVER="+w.Aa));const Ki=Ze[5];Ki!=null&&typeof Ki=="number"&&0<Ki&&(j=1.5*Ki,w.L=j,w.j.info("backChannelRequestTimeoutMs_="+j)),j=w;const gn=m.g;if(gn){const vi=gn.g?gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vi){var ce=j.h;ce.g||vi.indexOf("spdy")==-1&&vi.indexOf("quic")==-1&&vi.indexOf("h2")==-1||(ce.j=ce.l,ce.g=new Set,ce.h&&(Ba(ce,ce.h),ce.h=null))}if(j.D){const zc=gn.g?gn.g.getResponseHeader("X-HTTP-Session-Id"):null;zc&&(j.ya=zc,dt(j.I,j.D,zc))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-m.F,w.j.info("Handshake RTT: "+w.R+"ms")),j=w;var Ee=m;if(j.qa=ad(j,j.J?j.ia:null,j.W),Ee.K){Un(j.h,Ee);var We=Ee,Jt=j.L;Jt&&(We.I=Jt),We.B&&(ci(We),Bi(We)),j.g=Ee}else rd(j);0<w.i.length&&Xa(w)}else Ze[0]!="stop"&&Ze[0]!="close"||Yi(w,7);else w.G==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?Yi(w,7):Oc(w):Ze[0]!="noop"&&w.l&&w.l.ta(Ze),w.v=0)}}oi(4)}catch{}}var ja=class{constructor(m,E){this.g=m,this.map=E}};function $r(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ss(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function hi(m){return m.h?1:m.g?m.g.size:0}function Cc(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function Ba(m,E){m.g?m.g.add(E):m.h=E}function Un(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}$r.prototype.cancel=function(){if(this.i=Rc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Rc(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const w of m.g.values())E=E.concat(w.D);return E}return R(m.i)}function Ep(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(d(m)){for(var E=[],w=m.length,j=0;j<w;j++)E.push(m[j]);return E}E=[],w=0;for(j in m)E[w++]=m[j];return E}function Ha(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(d(m)||typeof m=="string"){var E=[];m=m.length;for(var w=0;w<m;w++)E.push(w);return E}E=[],w=0;for(const j in m)E[w++]=j;return E}}}function Ic(m,E){if(m.forEach&&typeof m.forEach=="function")m.forEach(E,void 0);else if(d(m)||typeof m=="string")Array.prototype.forEach.call(m,E,void 0);else for(var w=Ha(m),j=Ep(m),re=j.length,ce=0;ce<re;ce++)E.call(void 0,j[ce],w&&w[ce],m)}var Oo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bp(m,E){if(m){m=m.split("&");for(var w=0;w<m.length;w++){var j=m[w].indexOf("="),re=null;if(0<=j){var ce=m[w].substring(0,j);re=m[w].substring(j+1)}else ce=m[w];E(ce,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function qt(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof qt){this.h=m.h,Vo(this,m.j),this.o=m.o,this.g=m.g,As(this,m.s),this.l=m.l;var E=m.i,w=new Fi;w.i=E.i,E.g&&(w.g=new Map(E.g),w.h=E.h),Hi(this,w),this.m=m.m}else m&&(E=String(m).match(Oo))?(this.h=!1,Vo(this,E[1]||"",!0),this.o=Sr(E[2]||""),this.g=Sr(E[3]||"",!0),As(this,E[4]),this.l=Sr(E[5]||"",!0),Hi(this,E[6]||"",!0),this.m=Sr(E[7]||"")):(this.h=!1,this.i=new Fi(null,this.h))}qt.prototype.toString=function(){var m=[],E=this.j;E&&m.push(Uo(E,Nc,!0),":");var w=this.g;return(w||E=="file")&&(m.push("//"),(E=this.o)&&m.push(Uo(E,Nc,!0),"@"),m.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&m.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&m.push("/"),m.push(Uo(w,w.charAt(0)=="/"?wp:Dc,!0))),(w=this.i.toString())&&m.push("?",w),(w=this.m)&&m.push("#",Uo(w,Fa)),m.join("")};function rr(m){return new qt(m)}function Vo(m,E,w){m.j=w?Sr(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function As(m,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);m.s=E}else m.s=null}function Hi(m,E,w){E instanceof Fi?(m.i=E,Zh(m.i,m.h)):(w||(E=Uo(E,xp)),m.i=new Fi(E,m.h))}function dt(m,E,w){m.i.set(E,w)}function Lo(m){return dt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Sr(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Uo(m,E,w){return typeof m=="string"?(m=encodeURI(m).replace(E,Wh),w&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Wh(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Nc=/[#\/\?@]/g,Dc=/[#\?:]/g,wp=/[#\?]/g,xp=/[#\?@]/g,Fa=/#/g;function Fi(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function Ar(m){m.g||(m.g=new Map,m.h=0,m.i&&bp(m.i,function(E,w){m.add(decodeURIComponent(E.replace(/\+/g," ")),w)}))}t=Fi.prototype,t.add=function(m,E){Ar(this),this.i=null,m=di(this,m);var w=this.g.get(m);return w||this.g.set(m,w=[]),w.push(E),this.h+=1,this};function $i(m,E){Ar(m),E=di(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function qi(m,E){return Ar(m),E=di(m,E),m.g.has(E)}t.forEach=function(m,E){Ar(this),this.g.forEach(function(w,j){w.forEach(function(re){m.call(E,re,j,this)},this)},this)},t.na=function(){Ar(this);const m=Array.from(this.g.values()),E=Array.from(this.g.keys()),w=[];for(let j=0;j<E.length;j++){const re=m[j];for(let ce=0;ce<re.length;ce++)w.push(E[j])}return w},t.V=function(m){Ar(this);let E=[];if(typeof m=="string")qi(this,m)&&(E=E.concat(this.g.get(di(this,m))));else{m=Array.from(this.g.values());for(let w=0;w<m.length;w++)E=E.concat(m[w])}return E},t.set=function(m,E){return Ar(this),this.i=null,m=di(this,m),qi(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},t.get=function(m,E){return m?(m=this.V(m),0<m.length?String(m[0]):E):E};function kc(m,E,w){$i(m,E),0<w.length&&(m.i=null,m.g.set(di(m,E),R(w)),m.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(var w=0;w<E.length;w++){var j=E[w];const ce=encodeURIComponent(String(j)),Ee=this.V(j);for(j=0;j<Ee.length;j++){var re=ce;Ee[j]!==""&&(re+="="+encodeURIComponent(String(Ee[j]))),m.push(re)}}return this.i=m.join("&")};function di(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function Zh(m,E){E&&!m.j&&(Ar(m),m.i=null,m.g.forEach(function(w,j){var re=j.toLowerCase();j!=re&&($i(this,j),kc(this,re,w))},m)),m.j=E}function zo(m,E){const w=new $n;if(u.Image){const j=new Image;j.onload=b(Cr,w,"TestLoadImage: loaded",!0,E,j),j.onerror=b(Cr,w,"TestLoadImage: error",!1,E,j),j.onabort=b(Cr,w,"TestLoadImage: abort",!1,E,j),j.ontimeout=b(Cr,w,"TestLoadImage: timeout",!1,E,j),u.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=m}else E(!1)}function qr(m,E){const w=new $n,j=new AbortController,re=setTimeout(()=>{j.abort(),Cr(w,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:j.signal}).then(ce=>{clearTimeout(re),ce.ok?Cr(w,"TestPingServer: ok",!0,E):Cr(w,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(re),Cr(w,"TestPingServer: error",!1,E)})}function Cr(m,E,w,j,re){try{re&&(re.onload=null,re.onerror=null,re.onabort=null,re.ontimeout=null),j(w)}catch{}}function jo(){this.g=new Ln}function fi(m,E,w){const j=w||"";try{Ic(m,function(re,ce){let Ee=re;f(re)&&(Ee=on(re)),E.push(j+ce+"="+encodeURIComponent(Ee))})}catch(re){throw E.push(j+"type="+encodeURIComponent("_badmap")),re}}function Cs(m){this.l=m.Ub||null,this.j=m.eb||!1}T(Cs,Ui),Cs.prototype.g=function(){return new Gi(this.l,this.j)},Cs.prototype.i=function(m){return function(){return m}}({});function Gi(m,E){at.call(this),this.D=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Gi,at),t=Gi.prototype,t.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=E,this.readyState=1,pi(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(E.body=m),(this.D||u).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mi(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,pi(this)),this.g&&(this.readyState=3,pi(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Mc(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Mc(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?mi(this):pi(this),this.readyState==3&&Mc(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,mi(this))},t.Qa=function(m){this.g&&(this.response=m,mi(this))},t.ga=function(){this.g&&mi(this)};function mi(m){m.readyState=4,m.l=null,m.j=null,m.v=null,pi(m)}t.setRequestHeader=function(m,E){this.u.append(m,E)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var w=E.next();!w.done;)w=w.value,m.push(w[0]+": "+w[1]),w=E.next();return m.join(`\r
`)};function pi(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Gi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Pc(m){let E="";return K(m,function(w,j){E+=j,E+=":",E+=w,E+=`\r
`}),E}function an(m,E,w){e:{for(j in w){var j=!1;break e}j=!0}j||(w=Pc(w),typeof m=="string"?w!=null&&encodeURIComponent(String(w)):dt(m,E,w))}function lt(m){at.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(lt,at);var $a=/^https?$/i,Bo=["POST","PUT"];t=lt.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,E,w,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wr.g(),this.v=this.o?zi(this.o):zi(wr),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(ce){Jh(this,ce);return}if(m=w||"",w=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var re in j)w.set(re,j[re]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const ce of j.keys())w.set(ce,j.get(ce));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(w.keys()).find(ce=>ce.toLowerCase()=="content-type"),re=u.FormData&&m instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Bo,E,void 0))||j||re||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ce,Ee]of w)this.g.setRequestHeader(ce,Ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ho(this),this.u=!0,this.g.send(m),this.u=!1}catch(ce){Jh(this,ce)}};function Jh(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.m=5,qa(m),gi(m)}function qa(m){m.A||(m.A=!0,Ge(m,"complete"),Ge(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Ge(this,"complete"),Ge(this,"abort"),gi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gi(this,!0)),lt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ga(this):this.bb())},t.bb=function(){Ga(this)};function Ga(m){if(m.h&&typeof c<"u"&&(!m.v[1]||Rr(m)!=4||m.Z()!=2)){if(m.u&&Rr(m)==4)xt(m.Ea,0,m);else if(Ge(m,"readystatechange"),Rr(m)==4){m.h=!1;try{const Ee=m.Z();e:switch(Ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var w;if(!(w=E)){var j;if(j=Ee===0){var re=String(m.D).match(Oo)[1]||null;!re&&u.self&&u.self.location&&(re=u.self.location.protocol.slice(0,-1)),j=!$a.test(re?re.toLowerCase():"")}w=j}if(w)Ge(m,"complete"),Ge(m,"success");else{m.m=6;try{var ce=2<Rr(m)?m.g.statusText:""}catch{ce=""}m.l=ce+" ["+m.Z()+"]",qa(m)}}finally{gi(m)}}}}function gi(m,E){if(m.g){Ho(m);const w=m.g,j=m.v[0]?()=>{}:null;m.g=null,m.v=null,E||Ge(m,"ready");try{w.onreadystatechange=j}catch{}}}function Ho(m){m.I&&(u.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function Rr(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<Rr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),mn(E)}};function ed(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Tp(m){const E={};m=(m.g&&2<=Rr(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<m.length;j++){if(L(m[j]))continue;var w=B(m[j]);const re=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const ce=E[re]||[];E[re]=ce,ce.push(w)}k(E,function(j){return j.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fo(m,E,w){return w&&w.internalChannelParams&&w.internalChannelParams[m]||E}function Ya(m){this.Aa=0,this.i=[],this.j=new $n,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fo("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fo("baseRetryDelayMs",5e3,m),this.cb=Fo("retryDelaySeedMs",1e4,m),this.Wa=Fo("forwardChannelMaxRetries",2,m),this.wa=Fo("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new $r(m&&m.concurrentRequestLimit),this.Da=new jo,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ya.prototype,t.la=8,t.G=1,t.connect=function(m,E,w,j){yt(0),this.W=m,this.H=E||{},w&&j!==void 0&&(this.H.OSID=w,this.H.OAID=j),this.F=this.X,this.I=ad(this,null,this.W),Xa(this)};function Oc(m){if(td(m),m.G==3){var E=m.U++,w=rr(m.I);if(dt(w,"SID",m.K),dt(w,"RID",E),dt(w,"TYPE","terminate"),$o(m,w),E=new pn(m,m.j,E),E.L=2,E.v=Lo(rr(w)),w=!1,u.navigator&&u.navigator.sendBeacon)try{w=u.navigator.sendBeacon(E.v.toString(),"")}catch{}!w&&u.Image&&(new Image().src=E.v,w=!0),w||(E.g=ld(E.j,null),E.g.ea(E.v)),E.F=Date.now(),Bi(E)}od(m)}function Ka(m){m.g&&(qo(m),m.g.cancel(),m.g=null)}function td(m){Ka(m),m.u&&(u.clearTimeout(m.u),m.u=null),Qa(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&u.clearTimeout(m.s),m.s=null)}function Xa(m){if(!Ss(m.h)&&!m.s){m.s=!0;var E=m.Ga;Y||U(),te||(Y(),te=!0),J.add(E,m),m.B=0}}function Sp(m,E){return hi(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=E.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Nt(_(m.Ga,m,E),Uc(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const re=new pn(this,this.j,m);let ce=this.o;if(this.S&&(ce?(ce=S(ce),V(ce,this.S)):ce=this.S),this.m!==null||this.O||(re.H=ce,ce=null),this.P)e:{for(var E=0,w=0;w<this.i.length;w++){t:{var j=this.i[w];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(E+=j,4096<E){E=w;break e}if(E===4096||w===this.i.length-1){E=w+1;break e}}E=1e3}else E=1e3;E=nd(this,re,E),w=rr(this.I),dt(w,"RID",m),dt(w,"CVER",22),this.D&&dt(w,"X-HTTP-Session-Id",this.D),$o(this,w),ce&&(this.O?E="headers="+encodeURIComponent(String(Pc(ce)))+"&"+E:this.m&&an(w,this.m,ce)),Ba(this.h,re),this.Ua&&dt(w,"TYPE","init"),this.P?(dt(w,"$req",E),dt(w,"SID","null"),re.T=!0,nr(re,w,null)):nr(re,w,E),this.G=2}}else this.G==3&&(m?Vc(this,m):this.i.length==0||Ss(this.h)||Vc(this))};function Vc(m,E){var w;E?w=E.l:w=m.U++;const j=rr(m.I);dt(j,"SID",m.K),dt(j,"RID",w),dt(j,"AID",m.T),$o(m,j),m.m&&m.o&&an(j,m.m,m.o),w=new pn(m,m.j,w,m.B+1),m.m===null&&(w.H=m.o),E&&(m.i=E.D.concat(m.i)),E=nd(m,w,1e3),w.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Ba(m.h,w),nr(w,j,E)}function $o(m,E){m.H&&K(m.H,function(w,j){dt(E,j,w)}),m.l&&Ic({},function(w,j){dt(E,j,w)})}function nd(m,E,w){w=Math.min(m.i.length,w);var j=m.l?_(m.l.Na,m.l,m):null;e:{var re=m.i;let ce=-1;for(;;){const Ee=["count="+w];ce==-1?0<w?(ce=re[0].g,Ee.push("ofs="+ce)):ce=0:Ee.push("ofs="+ce);let We=!0;for(let Jt=0;Jt<w;Jt++){let Ze=re[Jt].g;const ln=re[Jt].map;if(Ze-=ce,0>Ze)ce=Math.max(0,re[Jt].g-100),We=!1;else try{fi(ln,Ee,"req"+Ze+"_")}catch{j&&j(ln)}}if(We){j=Ee.join("&");break e}}}return m=m.i.splice(0,w),E.D=m,j}function rd(m){if(!m.g&&!m.u){m.Y=1;var E=m.Fa;Y||U(),te||(Y(),te=!0),J.add(E,m),m.v=0}}function Lc(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Nt(_(m.Fa,m),Uc(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,id(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Nt(_(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),Ka(this),id(this))};function qo(m){m.A!=null&&(u.clearTimeout(m.A),m.A=null)}function id(m){m.g=new pn(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var E=rr(m.qa);dt(E,"RID","rpc"),dt(E,"SID",m.K),dt(E,"AID",m.T),dt(E,"CI",m.F?"0":"1"),!m.F&&m.ja&&dt(E,"TO",m.ja),dt(E,"TYPE","xmlhttp"),$o(m,E),m.m&&m.o&&an(E,m.m,m.o),m.L&&(m.g.I=m.L);var w=m.g;m=m.ia,w.L=1,w.v=Lo(rr(E)),w.m=null,w.P=!0,Fr(w,m)}t.Za=function(){this.C!=null&&(this.C=null,Ka(this),Lc(this),yt(19))};function Qa(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function sd(m,E){var w=null;if(m.g==E){Qa(m),qo(m),m.g=null;var j=2}else if(Cc(m.h,E))w=E.D,Un(m.h,E),j=1;else return;if(m.G!=0){if(E.o)if(j==1){w=E.m?E.m.length:0,E=Date.now()-E.F;var re=m.B;j=si(),Ge(j,new Lt(j,w)),Xa(m)}else rd(m);else if(re=E.s,re==3||re==0&&0<E.X||!(j==1&&Sp(m,E)||j==2&&Lc(m)))switch(w&&0<w.length&&(E=m.h,E.i=E.i.concat(w)),re){case 1:Yi(m,5);break;case 4:Yi(m,10);break;case 3:Yi(m,6);break;default:Yi(m,2)}}}function Uc(m,E){let w=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(w*=2),w*E}function Yi(m,E){if(m.j.info("Error code "+E),E==2){var w=_(m.fb,m),j=m.Xa;const re=!j;j=new qt(j||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Vo(j,"https"),Lo(j),re?zo(j.toString(),w):qr(j.toString(),w)}else yt(2);m.G=0,m.l&&m.l.sa(E),od(m),td(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function od(m){if(m.G=0,m.ka=[],m.l){const E=Rc(m.h);(E.length!=0||m.i.length!=0)&&(I(m.ka,E),I(m.ka,m.i),m.h.i.length=0,R(m.i),m.i.length=0),m.l.ra()}}function ad(m,E,w){var j=w instanceof qt?rr(w):new qt(w);if(j.g!="")E&&(j.g=E+"."+j.g),As(j,j.s);else{var re=u.location;j=re.protocol,E=E?E+"."+re.hostname:re.hostname,re=+re.port;var ce=new qt(null);j&&Vo(ce,j),E&&(ce.g=E),re&&As(ce,re),w&&(ce.l=w),j=ce}return w=m.D,E=m.ya,w&&E&&dt(j,w,E),dt(j,"VER",m.la),$o(m,j),j}function ld(m,E,w){if(E&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Ca&&!m.pa?new lt(new Cs({eb:w})):new lt(m.pa),E.Ha(m.J),E}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function cd(){}t=cd.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Wa(){}Wa.prototype.g=function(m,E){return new zn(m,E)};function zn(m,E){at.call(this),this.g=new Ya(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(m?m["X-WebChannel-Client-Profile"]=E.va:m={"X-WebChannel-Client-Profile":E.va}),this.g.S=m,(m=E&&E.Sb)&&!L(m)&&(this.g.m=m),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!L(E)&&(this.g.D=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new yi(this)}T(zn,at),zn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zn.prototype.close=function(){Oc(this.g)},zn.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var w={};w.__data__=m,m=w}else this.u&&(w={},w.__data__=on(m),m=w);E.i.push(new ja(E.Ya++,m)),E.G==3&&Xa(E)},zn.prototype.N=function(){this.g.l=null,delete this.j,Oc(this.g),delete this.g,zn.aa.N.call(this)};function ud(m){_r.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const w in E){m=w;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}T(ud,_r);function hd(){tr.call(this),this.status=1}T(hd,tr);function yi(m){this.g=m}T(yi,cd),yi.prototype.ua=function(){Ge(this.g,"a")},yi.prototype.ta=function(m){Ge(this.g,new ud(m))},yi.prototype.sa=function(m){Ge(this.g,new hd)},yi.prototype.ra=function(){Ge(this.g,"b")},Wa.prototype.createWebChannel=Wa.prototype.g,zn.prototype.send=zn.prototype.o,zn.prototype.open=zn.prototype.m,zn.prototype.close=zn.prototype.close,cR=function(){return new Wa},lR=function(){return si()},aR=Er,U0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},li.NO_ERROR=0,li.TIMEOUT=8,li.HTTP_ERROR=6,zf=li,br.COMPLETE="complete",oR=br,Hr.EventType=er,er.OPEN="a",er.CLOSE="b",er.ERROR="c",er.MESSAGE="d",at.prototype.listen=at.prototype.K,Hu=Hr,lt.prototype.listenOnce=lt.prototype.L,lt.prototype.getLastError=lt.prototype.Ka,lt.prototype.getLastErrorCode=lt.prototype.Ba,lt.prototype.getStatus=lt.prototype.Z,lt.prototype.getResponseJson=lt.prototype.Oa,lt.prototype.getResponseText=lt.prototype.oa,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Ha,sR=lt}).apply(typeof xf<"u"?xf:typeof self<"u"?self:typeof window<"u"?window:{});const mT="@firebase/firestore",pT="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rn.UNAUTHENTICATED=new Rn(null),Rn.GOOGLE_CREDENTIALS=new Rn("google-credentials-uid"),Rn.FIRST_PARTY=new Rn("first-party-uid"),Rn.MOCK_USER=new Rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pc="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=new Qv("@firebase/firestore");function Ml(){return Aa.logLevel}function we(t,...e){if(Aa.logLevel<=Xe.DEBUG){const n=e.map(e_);Aa.debug(`Firestore (${pc}): ${t}`,...n)}}function ys(t,...e){if(Aa.logLevel<=Xe.ERROR){const n=e.map(e_);Aa.error(`Firestore (${pc}): ${t}`,...n)}}function sc(t,...e){if(Aa.logLevel<=Xe.WARN){const n=e.map(e_);Aa.warn(`Firestore (${pc}): ${t}`,...n)}}function e_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,uR(t,r,n)}function uR(t,e,n){let r=`FIRESTORE (${pc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ys(r),new Error(r)}function ct(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||uR(e,s,r)}function Le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Li{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class S9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Rn.UNAUTHENTICATED))}shutdown(){}}class A9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class C9{constructor(e){this.t=e,this.currentUser=Rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ct(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let a=new mo;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new mo,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const d=a;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},u=d=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new mo)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct(typeof r.accessToken=="string",31837,{l:r}),new hR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string",2055,{h:e}),new Rn(e)}}class R9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class I9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new R9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class N9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ct(this.o===void 0,3512);const r=a=>{a.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,we("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new gT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ct(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new gT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=D9(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function Fe(t,e){return t<e?-1:t>e?1:0}function z0(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return Fe(r,s);{const a=dR(),c=k9(a.encode(yT(t,n)),a.encode(yT(e,n)));return c!==0?c:Fe(r,s)}}n+=r>65535?2:1}return Fe(t.length,e.length)}function yT(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function k9(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Fe(t[n],e[n]);return Fe(t.length,e.length)}function oc(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT=-62135596800,_T=1e6;class Et{static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*_T);return new Et(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new xe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<vT)throw new xe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_T}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-vT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new Et(0,0))}static max(){return new Ve(new Et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="__name__";class Si{constructor(e,n,r){n===void 0?n=0:n>e.length&&Me(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Me(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Si.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Si?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=Si.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return Fe(e.length,n.length)}static compareSegments(e,n){const r=Si.isNumericId(e),s=Si.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Si.extractNumericId(e).compare(Si.extractNumericId(n)):z0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fo.fromString(e.substring(4,e.length-2))}}class _t extends Si{construct(e,n,r){return new _t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new _t(n)}static emptyPath(){return new _t([])}}const M9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wn extends Si{construct(e,n,r){return new wn(e,n,r)}static isValidIdentifier(e){return M9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ET}static keyField(){return new wn([ET])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new xe(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new xe(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new xe(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else u==="`"?(c=!c,s++):u!=="."||c?(r+=u,s++):(a(),s++)}if(a(),c)throw new xe(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wn(n)}static emptyPath(){return new wn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(_t.fromString(e))}static fromName(e){return new Ie(_t.fromString(e).popFirst(5))}static empty(){return new Ie(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _t.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new _t(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh=-1;function P9(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ve.fromTimestamp(r===1e9?new Et(n+1,0):new Et(n,r));return new vo(s,Ie.empty(),e)}function O9(t){return new vo(t.readTime,t.key,mh)}class vo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new vo(Ve.min(),Ie.empty(),mh)}static max(){return new vo(Ve.max(),Ie.empty(),mh)}}function V9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ie.comparator(t.documentKey,e.documentKey),n!==0?n:Fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class U9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gc(t){if(t.code!==ge.FAILED_PRECONDITION||t.message!==L9)throw t;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ve((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ve?n:ve.resolve(n)}catch(n){return ve.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ve.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ve.reject(n)}static resolve(e){return new ve((n,r)=>{n(e)})}static reject(e){return new ve((n,r)=>{r(e)})}static waitFor(e){return new ve((n,r)=>{let s=0,a=0,c=!1;e.forEach(u=>{++s,u.next(()=>{++a,c&&a===s&&n()},d=>r(d))}),c=!0,a===s&&n()})}static or(e){let n=ve.resolve(!1);for(const r of e)n=n.next(s=>s?ve.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new ve((r,s)=>{const a=e.length,c=new Array(a);let u=0;for(let d=0;d<a;d++){const f=d;n(e[f]).next(p=>{c[f]=p,++u,u===a&&r(c)},p=>s(p))}})}static doWhile(e,n){return new ve((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function z9(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function yc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Ym.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_=-1;function Km(t){return t==null}function fm(t){return t===0&&1/t==-1/0}function j9(t){return typeof t=="number"&&Number.isInteger(t)&&!fm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR="";function B9(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=bT(e)),e=H9(t.get(n),e);return bT(e)}function H9(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case mR:n+="";break;default:n+=a}}return n}function bT(t){return t+mR+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ao(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n){this.comparator=e,this.root=n||bn.EMPTY}insert(e,n){return new Rt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,bn.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tf(this.root,e,this.comparator,!0)}}class Tf{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bn{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??bn.RED,this.left=s??bn.EMPTY,this.right=a??bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new bn(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return bn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}bn.EMPTY=null,bn.RED=!0,bn.BLACK=!1;bn.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new bn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new xT(this.data.getIterator())}getIteratorFrom(e){return new xT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof rn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new rn(this.comparator);return n.data=e,n}}class xT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.fields=e,e.sort(wn.comparator)}static empty(){return new mr([])}unionWith(e){let n=new rn(wn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new mr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new gR("Invalid base64 string: "+a):a}}(e);return new xn(n)}static fromUint8Array(e){const n=function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a}(e);return new xn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xn.EMPTY_BYTE_STRING=new xn("");const F9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _o(t){if(ct(!!t,39018),typeof t=="string"){let e=0;const n=F9.exec(t);if(ct(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Bt(t.seconds),nanos:Bt(t.nanos)}}function Bt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Eo(t){return typeof t=="string"?xn.fromBase64String(t):xn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR="server_timestamp",vR="__type__",_R="__previous_value__",ER="__local_write_time__";function n_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[vR])===null||n===void 0?void 0:n.stringValue)===yR}function Xm(t){const e=t.mapValue.fields[_R];return n_(e)?Xm(e):e}function ph(t){const e=_o(t.mapValue.fields[ER].timestampValue);return new Et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(e,n,r,s,a,c,u,d,f,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=p}}const mm="(default)";class gh{constructor(e,n){this.projectId=e,this.database=n||mm}static empty(){return new gh("","")}get isDefaultDatabase(){return this.database===mm}isEqual(e){return e instanceof gh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR="__type__",q9="__max__",Sf={mapValue:{}},wR="__vector__",pm="value";function bo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?n_(t)?4:Y9(t)?9007199254740991:G9(t)?10:11:Me(28295,{value:t})}function Oi(t,e){if(t===e)return!0;const n=bo(t);if(n!==bo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ph(t).isEqual(ph(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=_o(s.timestampValue),u=_o(a.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return Eo(s.bytesValue).isEqual(Eo(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return Bt(s.geoPointValue.latitude)===Bt(a.geoPointValue.latitude)&&Bt(s.geoPointValue.longitude)===Bt(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Bt(s.integerValue)===Bt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=Bt(s.doubleValue),u=Bt(a.doubleValue);return c===u?fm(c)===fm(u):isNaN(c)&&isNaN(u)}return!1}(t,e);case 9:return oc(t.arrayValue.values||[],e.arrayValue.values||[],Oi);case 10:case 11:return function(s,a){const c=s.mapValue.fields||{},u=a.mapValue.fields||{};if(wT(c)!==wT(u))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(u[d]===void 0||!Oi(c[d],u[d])))return!1;return!0}(t,e);default:return Me(52216,{left:t})}}function yh(t,e){return(t.values||[]).find(n=>Oi(n,e))!==void 0}function ac(t,e){if(t===e)return 0;const n=bo(t),r=bo(e);if(n!==r)return Fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(t.booleanValue,e.booleanValue);case 2:return function(a,c){const u=Bt(a.integerValue||a.doubleValue),d=Bt(c.integerValue||c.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(t,e);case 3:return TT(t.timestampValue,e.timestampValue);case 4:return TT(ph(t),ph(e));case 5:return z0(t.stringValue,e.stringValue);case 6:return function(a,c){const u=Eo(a),d=Eo(c);return u.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(a,c){const u=a.split("/"),d=c.split("/");for(let f=0;f<u.length&&f<d.length;f++){const p=Fe(u[f],d[f]);if(p!==0)return p}return Fe(u.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,c){const u=Fe(Bt(a.latitude),Bt(c.latitude));return u!==0?u:Fe(Bt(a.longitude),Bt(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ST(t.arrayValue,e.arrayValue);case 10:return function(a,c){var u,d,f,p;const v=a.fields||{},_=c.fields||{},b=(u=v[pm])===null||u===void 0?void 0:u.arrayValue,T=(d=_[pm])===null||d===void 0?void 0:d.arrayValue,R=Fe(((f=b?.values)===null||f===void 0?void 0:f.length)||0,((p=T?.values)===null||p===void 0?void 0:p.length)||0);return R!==0?R:ST(b,T)}(t.mapValue,e.mapValue);case 11:return function(a,c){if(a===Sf.mapValue&&c===Sf.mapValue)return 0;if(a===Sf.mapValue)return 1;if(c===Sf.mapValue)return-1;const u=a.fields||{},d=Object.keys(u),f=c.fields||{},p=Object.keys(f);d.sort(),p.sort();for(let v=0;v<d.length&&v<p.length;++v){const _=z0(d[v],p[v]);if(_!==0)return _;const b=ac(u[d[v]],f[p[v]]);if(b!==0)return b}return Fe(d.length,p.length)}(t.mapValue,e.mapValue);default:throw Me(23264,{Pe:n})}}function TT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Fe(t,e);const n=_o(t),r=_o(e),s=Fe(n.seconds,r.seconds);return s!==0?s:Fe(n.nanos,r.nanos)}function ST(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=ac(n[s],r[s]);if(a)return a}return Fe(n.length,r.length)}function lc(t){return j0(t)}function j0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=_o(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Eo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=j0(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const c of r)a?a=!1:s+=",",s+=`${c}:${j0(n.fields[c])}`;return s+"}"}(t.mapValue):Me(61005,{value:t})}function jf(t){switch(bo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xm(t);return e?16+jf(e):16;case 5:return 2*t.stringValue.length;case 6:return Eo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+jf(a),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ao(r.fields,(a,c)=>{s+=a.length+jf(c)}),s}(t.mapValue);default:throw Me(13486,{value:t})}}function AT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function B0(t){return!!t&&"integerValue"in t}function r_(t){return!!t&&"arrayValue"in t}function CT(t){return!!t&&"nullValue"in t}function RT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bf(t){return!!t&&"mapValue"in t}function G9(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[bR])===null||n===void 0?void 0:n.stringValue)===wR}function Yu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ao(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Yu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Yu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Y9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===q9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.value=e}static empty(){return new Xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Bf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yu(n)}setAll(e){let n=wn.emptyPath(),r={},s=[];e.forEach((c,u)=>{if(!n.isImmediateParentOf(u)){const d=this.getFieldsMap(n);this.applyChanges(d,r,s),r={},s=[],n=u.popLast()}c?r[u.lastSegment()]=Yu(c):s.push(u.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());Bf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Oi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Bf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ao(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new Xn(Yu(this.value))}}function xR(t){const e=[];return Ao(t.fields,(n,r)=>{const s=new wn([n]);if(Bf(r)){const a=xR(r.mapValue).fields;if(a.length===0)e.push(s);else for(const c of a)e.push(s.child(c))}else e.push(s)}),new mr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n,r,s,a,c,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=c,this.documentState=u}static newInvalidDocument(e){return new In(e,0,Ve.min(),Ve.min(),Ve.min(),Xn.empty(),0)}static newFoundDocument(e,n,r,s){return new In(e,1,n,Ve.min(),r,s,0)}static newNoDocument(e,n){return new In(e,2,n,Ve.min(),Ve.min(),Xn.empty(),0)}static newUnknownDocument(e,n){return new In(e,3,n,Ve.min(),Ve.min(),Xn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof In&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new In(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,n){this.position=e,this.inclusive=n}}function IT(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],c=t.position[s];if(a.field.isKeyField()?r=Ie.comparator(Ie.fromName(c.referenceValue),n.key):r=ac(c,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function NT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Oi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n="asc"){this.field=e,this.dir=n}}function K9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{}class Qt extends TR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Q9(e,n,r):n==="array-contains"?new J9(e,r):n==="in"?new eU(e,r):n==="not-in"?new tU(e,r):n==="array-contains-any"?new nU(e,r):new Qt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new W9(e,r):new Z9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ac(n,this.value)):n!==null&&bo(this.value)===bo(n)&&this.matchesComparison(ac(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ei extends TR{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new ei(e,n)}matches(e){return SR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function SR(t){return t.op==="and"}function AR(t){return X9(t)&&SR(t)}function X9(t){for(const e of t.filters)if(e instanceof ei)return!1;return!0}function H0(t){if(t instanceof Qt)return t.field.canonicalString()+t.op.toString()+lc(t.value);if(AR(t))return t.filters.map(e=>H0(e)).join(",");{const e=t.filters.map(n=>H0(n)).join(",");return`${t.op}(${e})`}}function CR(t,e){return t instanceof Qt?function(r,s){return s instanceof Qt&&r.op===s.op&&r.field.isEqual(s.field)&&Oi(r.value,s.value)}(t,e):t instanceof ei?function(r,s){return s instanceof ei&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,c,u)=>a&&CR(c,s.filters[u]),!0):!1}(t,e):void Me(19439)}function RR(t){return t instanceof Qt?function(n){return`${n.field.canonicalString()} ${n.op} ${lc(n.value)}`}(t):t instanceof ei?function(n){return n.op.toString()+" {"+n.getFilters().map(RR).join(" ,")+"}"}(t):"Filter"}class Q9 extends Qt{constructor(e,n,r){super(e,n,r),this.key=Ie.fromName(r.referenceValue)}matches(e){const n=Ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class W9 extends Qt{constructor(e,n){super(e,"in",n),this.keys=IR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Z9 extends Qt{constructor(e,n){super(e,"not-in",n),this.keys=IR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function IR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ie.fromName(r.referenceValue))}class J9 extends Qt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return r_(n)&&yh(n.arrayValue,this.value)}}class eU extends Qt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yh(this.value.arrayValue,n)}}class tU extends Qt{constructor(e,n){super(e,"not-in",n)}matches(e){if(yh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!yh(this.value.arrayValue,n)}}class nU extends Qt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!r_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>yh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e,n=null,r=[],s=[],a=null,c=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=c,this.endAt=u,this.Ie=null}}function DT(t,e=null,n=[],r=[],s=null,a=null,c=null){return new rU(t,e,n,r,s,a,c)}function i_(t){const e=Le(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>H0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Km(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>lc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>lc(r)).join(",")),e.Ie=n}return e.Ie}function s_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!K9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!CR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!NT(t.startAt,e.startAt)&&NT(t.endAt,e.endAt)}function F0(t){return Ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n=null,r=[],s=[],a=null,c="F",u=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=c,this.startAt=u,this.endAt=d,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function iU(t,e,n,r,s,a,c,u){return new vc(t,e,n,r,s,a,c,u)}function NR(t){return new vc(t)}function kT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function DR(t){return t.collectionGroup!==null}function Ku(t){const e=Le(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new rn(wn.comparator);return c.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new vh(a,r))}),n.has(wn.keyField().canonicalString())||e.Ee.push(new vh(wn.keyField(),r))}return e.Ee}function Ri(t){const e=Le(t);return e.de||(e.de=sU(e,Ku(t))),e.de}function sU(t,e){if(t.limitType==="F")return DT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new vh(s.field,a)});const n=t.endAt?new gm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new gm(t.startAt.position,t.startAt.inclusive):null;return DT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function $0(t,e){const n=t.filters.concat([e]);return new vc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function q0(t,e,n){return new vc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Qm(t,e){return s_(Ri(t),Ri(e))&&t.limitType===e.limitType}function kR(t){return`${i_(Ri(t))}|lt:${t.limitType}`}function Pl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>RR(s)).join(", ")}]`),Km(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>lc(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>lc(s)).join(",")),`Target(${r})`}(Ri(t))}; limitType=${t.limitType})`}function Wm(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ie.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of Ku(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(c,u,d){const f=IT(c,u,d);return c.inclusive?f<=0:f<0}(r.startAt,Ku(r),s)||r.endAt&&!function(c,u,d){const f=IT(c,u,d);return c.inclusive?f>=0:f>0}(r.endAt,Ku(r),s))}(t,e)}function oU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function MR(t){return(e,n)=>{let r=!1;for(const s of Ku(t)){const a=aU(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function aU(t,e,n){const r=t.field.isKeyField()?Ie.comparator(e.key,n.key):function(a,c,u){const d=c.data.field(a),f=u.data.field(a);return d!==null&&f!==null?ac(d,f):Me(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ao(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return pR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU=new Rt(Ie.comparator);function vs(){return lU}const PR=new Rt(Ie.comparator);function Fu(...t){let e=PR;for(const n of t)e=e.insert(n.key,n);return e}function OR(t){let e=PR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ma(){return Xu()}function VR(){return Xu()}function Xu(){return new ka(t=>t.toString(),(t,e)=>t.isEqual(e))}const cU=new Rt(Ie.comparator),uU=new rn(Ie.comparator);function Qe(...t){let e=uU;for(const n of t)e=e.add(n);return e}const hU=new rn(Fe);function dU(){return hU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fm(e)?"-0":e}}function LR(t){return{integerValue:""+t}}function fU(t,e){return j9(e)?LR(e):o_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(){this._=void 0}}function mU(t,e,n){return t instanceof ym?function(s,a){const c={fields:{[vR]:{stringValue:yR},[ER]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&n_(a)&&(a=Xm(a)),a&&(c.fields[_R]=a),{mapValue:c}}(n,e):t instanceof _h?zR(t,e):t instanceof Eh?jR(t,e):function(s,a){const c=UR(s,a),u=MT(c)+MT(s.Re);return B0(c)&&B0(s.Re)?LR(u):o_(s.serializer,u)}(t,e)}function pU(t,e,n){return t instanceof _h?zR(t,e):t instanceof Eh?jR(t,e):n}function UR(t,e){return t instanceof vm?function(r){return B0(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class ym extends Zm{}class _h extends Zm{constructor(e){super(),this.elements=e}}function zR(t,e){const n=BR(e);for(const r of t.elements)n.some(s=>Oi(s,r))||n.push(r);return{arrayValue:{values:n}}}class Eh extends Zm{constructor(e){super(),this.elements=e}}function jR(t,e){let n=BR(e);for(const r of t.elements)n=n.filter(s=>!Oi(s,r));return{arrayValue:{values:n}}}class vm extends Zm{constructor(e,n){super(),this.serializer=e,this.Re=n}}function MT(t){return Bt(t.integerValue||t.doubleValue)}function BR(t){return r_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function gU(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof _h&&s instanceof _h||r instanceof Eh&&s instanceof Eh?oc(r.elements,s.elements,Oi):r instanceof vm&&s instanceof vm?Oi(r.Re,s.Re):r instanceof ym&&s instanceof ym}(t.transform,e.transform)}class yU{constructor(e,n){this.version=e,this.transformResults=n}}class pr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pr}static exists(e){return new pr(void 0,e)}static updateTime(e){return new pr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Jm{}function HR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ep(t.key,pr.none()):new Lh(t.key,t.data,pr.none());{const n=t.data,r=Xn.empty();let s=new rn(wn.comparator);for(let a of e.fields)if(!s.has(a)){let c=n.field(a);c===null&&a.length>1&&(a=a.popLast(),c=n.field(a)),c===null?r.delete(a):r.set(a,c),s=s.add(a)}return new Co(t.key,r,new mr(s.toArray()),pr.none())}}function vU(t,e,n){t instanceof Lh?function(s,a,c){const u=s.value.clone(),d=OT(s.fieldTransforms,a,c.transformResults);u.setAll(d),a.convertToFoundDocument(c.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Co?function(s,a,c){if(!Hf(s.precondition,a))return void a.convertToUnknownDocument(c.version);const u=OT(s.fieldTransforms,a,c.transformResults),d=a.data;d.setAll(FR(s)),d.setAll(u),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(t,e,n):function(s,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function Qu(t,e,n,r){return t instanceof Lh?function(a,c,u,d){if(!Hf(a.precondition,c))return u;const f=a.value.clone(),p=VT(a.fieldTransforms,d,c);return f.setAll(p),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof Co?function(a,c,u,d){if(!Hf(a.precondition,c))return u;const f=VT(a.fieldTransforms,d,c),p=c.data;return p.setAll(FR(a)),p.setAll(f),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(v=>v.field))}(t,e,n,r):function(a,c,u){return Hf(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u}(t,e,n)}function _U(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=UR(r.transform,s||null);a!=null&&(n===null&&(n=Xn.empty()),n.set(r.field,a))}return n||null}function PT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&oc(r,s,(a,c)=>gU(a,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Lh extends Jm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Co extends Jm{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function FR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function OT(t,e,n){const r=new Map;ct(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const a=t[s],c=a.transform,u=e.data.field(a.field);r.set(a.field,pU(c,u,n[s]))}return r}function VT(t,e,n){const r=new Map;for(const s of t){const a=s.transform,c=n.data.field(s.field);r.set(s.field,mU(a,c,e))}return r}class ep extends Jm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class EU extends Jm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&vU(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Qu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Qu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=VR();return this.mutations.forEach(s=>{const a=e.get(s.key),c=a.overlayedDocument;let u=this.applyToLocalView(c,a.mutatedFields);u=n.has(s.key)?null:u;const d=HR(c,u);d!==null&&r.set(s.key,d),c.isValidDocument()||c.convertToNoDocument(Ve.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Qe())}isEqual(e){return this.batchId===e.batchId&&oc(this.mutations,e.mutations,(n,r)=>PT(n,r))&&oc(this.baseMutations,e.baseMutations,(n,r)=>PT(n,r))}}class a_{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ct(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return cU}();const a=e.mutations;for(let c=0;c<a.length;c++)s=s.insert(a[c].key,r[c].version);return new a_(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt,et;function TU(t){switch(t){case ge.OK:return Me(64938);case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0;default:return Me(15467,{code:t})}}function $R(t){if(t===void 0)return ys("GRPC error has no .code"),ge.UNKNOWN;switch(t){case Kt.OK:return ge.OK;case Kt.CANCELLED:return ge.CANCELLED;case Kt.UNKNOWN:return ge.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return ge.INTERNAL;case Kt.UNAVAILABLE:return ge.UNAVAILABLE;case Kt.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Kt.NOT_FOUND:return ge.NOT_FOUND;case Kt.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Kt.ABORTED:return ge.ABORTED;case Kt.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Kt.DATA_LOSS:return ge.DATA_LOSS;default:return Me(39323,{code:t})}}(et=Kt||(Kt={}))[et.OK=0]="OK",et[et.CANCELLED=1]="CANCELLED",et[et.UNKNOWN=2]="UNKNOWN",et[et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",et[et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",et[et.NOT_FOUND=5]="NOT_FOUND",et[et.ALREADY_EXISTS=6]="ALREADY_EXISTS",et[et.PERMISSION_DENIED=7]="PERMISSION_DENIED",et[et.UNAUTHENTICATED=16]="UNAUTHENTICATED",et[et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",et[et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",et[et.ABORTED=10]="ABORTED",et[et.OUT_OF_RANGE=11]="OUT_OF_RANGE",et[et.UNIMPLEMENTED=12]="UNIMPLEMENTED",et[et.INTERNAL=13]="INTERNAL",et[et.UNAVAILABLE=14]="UNAVAILABLE",et[et.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU=new fo([4294967295,4294967295],0);function LT(t){const e=dR().encode(t),n=new iR;return n.update(e),new Uint8Array(n.digest())}function UT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new fo([n,r],0),new fo([s,a],0)]}class l_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new $u(`Invalid padding: ${n}`);if(r<0)throw new $u(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $u(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new $u(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=fo.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(fo.fromNumber(r)));return s.compare(SU)===1&&(s=new fo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=LT(e),[r,s]=UT(n);for(let a=0;a<this.hashCount;a++){const c=this.we(r,s,a);if(!this.be(c))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new l_(a,s,n);return r.forEach(u=>c.insert(u)),c}insert(e){if(this.pe===0)return;const n=LT(e),[r,s]=UT(n);for(let a=0;a<this.hashCount;a++){const c=this.we(r,s,a);this.Se(c)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class $u extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Uh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new tp(Ve.min(),s,new Rt(Fe),vs(),Qe())}}class Uh{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Uh(r,n,Qe(),Qe(),Qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class qR{constructor(e,n){this.targetId=e,this.Ce=n}}class GR{constructor(e,n,r=xn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class zT{constructor(){this.Fe=0,this.Me=jT(),this.xe=xn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Qe(),n=Qe(),r=Qe();return this.Me.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Me(38017,{changeType:a})}}),new Uh(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=jT()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ct(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class AU{constructor(e){this.ze=e,this.je=new Map,this.He=vs(),this.Je=Af(),this.Ye=Af(),this.Ze=new Rt(Fe)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:Me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const a=s.target;if(F0(a))if(r===0){const c=new Ie(a.path);this.tt(n,c,In.newNoDocument(c,Ve.min()))}else ct(r===1,20013,{expectedCount:r});else{const c=this.ut(n);if(c!==r){const u=this.ct(e),d=u?this.lt(u,e,c):1;if(d!==0){this.st(n);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,f)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let c,u;try{c=Eo(r).toUint8Array()}catch(d){if(d instanceof gR)return sc("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new l_(c,s,a)}catch(d){return sc(d instanceof $u?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.pe===0?null:u}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const c=this.ze.Pt(),u=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.tt(n,a,null),s++)}),s}It(e){const n=new Map;this.je.forEach((a,c)=>{const u=this._t(c);if(u){if(a.current&&F0(u.target)){const d=new Ie(u.target.path);this.Et(d).has(c)||this.dt(c,d)||this.tt(c,d,In.newNoDocument(d,e))}a.Le&&(n.set(c,a.qe()),a.Qe())}});let r=Qe();this.Ye.forEach((a,c)=>{let u=!0;c.forEachWhile(d=>{const f=this._t(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(a))}),this.He.forEach((a,c)=>c.setReadTime(e));const s=new tp(e,n,this.Ze,this.He,r);return this.He=vs(),this.Je=Af(),this.Ye=Af(),this.Ze=new Rt(Fe),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new zT,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new rn(Fe),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new rn(Fe),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new zT),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Af(){return new Rt(Ie.comparator)}function jT(){return new Rt(Ie.comparator)}const CU={asc:"ASCENDING",desc:"DESCENDING"},RU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IU={and:"AND",or:"OR"};class NU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function G0(t,e){return t.useProto3Json||Km(e)?e:{value:e}}function _m(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function DU(t,e){return _m(t,e.toTimestamp())}function Ii(t){return ct(!!t,49232),Ve.fromTimestamp(function(n){const r=_o(n);return new Et(r.seconds,r.nanos)}(t))}function c_(t,e){return Y0(t,e).canonicalString()}function Y0(t,e){const n=function(s){return new _t(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function KR(t){const e=_t.fromString(t);return ct(JR(e),10190,{key:e.toString()}),e}function K0(t,e){return c_(t.databaseId,e.path)}function qy(t,e){const n=KR(e);if(n.get(1)!==t.databaseId.projectId)throw new xe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new xe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ie(QR(n))}function XR(t,e){return c_(t.databaseId,e)}function kU(t){const e=KR(t);return e.length===4?_t.emptyPath():QR(e)}function X0(t){return new _t(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function QR(t){return ct(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function BT(t,e,n){return{name:K0(t,e),fields:n.value.mapValue.fields}}function MU(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Me(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(f,p){return f.useProto3Json?(ct(p===void 0||typeof p=="string",58123),xn.fromBase64String(p||"")):(ct(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),xn.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&function(f){const p=f.code===void 0?ge.UNKNOWN:$R(f.code);return new xe(p,f.message||"")}(c);n=new GR(r,s,a,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=qy(t,r.document.name),a=Ii(r.document.updateTime),c=r.document.createTime?Ii(r.document.createTime):Ve.min(),u=new Xn({mapValue:{fields:r.document.fields}}),d=In.newFoundDocument(s,a,c,u),f=r.targetIds||[],p=r.removedTargetIds||[];n=new Ff(f,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=qy(t,r.document),a=r.readTime?Ii(r.readTime):Ve.min(),c=In.newNoDocument(s,a),u=r.removedTargetIds||[];n=new Ff([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=qy(t,r.document),a=r.removedTargetIds||[];n=new Ff([],a,s,null)}else{if(!("filter"in e))return Me(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,c=new xU(s,a),u=r.targetId;n=new qR(u,c)}}return n}function PU(t,e){let n;if(e instanceof Lh)n={update:BT(t,e.key,e.value)};else if(e instanceof ep)n={delete:K0(t,e.key)};else if(e instanceof Co)n={update:BT(t,e.key,e.data),updateMask:FU(e.fieldMask)};else{if(!(e instanceof EU))return Me(16599,{ft:e.type});n={verify:K0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const u=c.transform;if(u instanceof ym)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof _h)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Eh)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof vm)return{fieldPath:c.field.canonicalString(),increment:u.Re};throw Me(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:DU(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Me(27497)}(t,e.precondition)),n}function OU(t,e){return t&&t.length>0?(ct(e!==void 0,14353),t.map(n=>function(s,a){let c=s.updateTime?Ii(s.updateTime):Ii(a);return c.isEqual(Ve.min())&&(c=Ii(a)),new yU(c,s.transformResults||[])}(n,e))):[]}function VU(t,e){return{documents:[XR(t,e.path)]}}function LU(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=XR(t,s);const a=function(f){if(f.length!==0)return ZR(ei.create(f,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const c=function(f){if(f.length!==0)return f.map(p=>function(_){return{field:Ol(_.field),direction:jU(_.dir)}}(p))}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const u=G0(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{gt:n,parent:s}}function UU(t){let e=kU(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ct(r===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let a=[];n.where&&(a=function(v){const _=WR(v);return _ instanceof ei&&AR(_)?_.getFilters():[_]}(n.where));let c=[];n.orderBy&&(c=function(v){return v.map(_=>function(T){return new vh(Vl(T.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(_))}(n.orderBy));let u=null;n.limit&&(u=function(v){let _;return _=typeof v=="object"?v.value:v,Km(_)?null:_}(n.limit));let d=null;n.startAt&&(d=function(v){const _=!!v.before,b=v.values||[];return new gm(b,_)}(n.startAt));let f=null;return n.endAt&&(f=function(v){const _=!v.before,b=v.values||[];return new gm(b,_)}(n.endAt)),iU(e,s,c,a,u,"F",d,f)}function zU(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function WR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Vl(n.unaryFilter.field);return Qt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Vl(n.unaryFilter.field);return Qt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Vl(n.unaryFilter.field);return Qt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Vl(n.unaryFilter.field);return Qt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}}(t):t.fieldFilter!==void 0?function(n){return Qt.create(Vl(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ei.create(n.compositeFilter.filters.map(r=>WR(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Me(1026)}}(n.compositeFilter.op))}(t):Me(30097,{filter:t})}function jU(t){return CU[t]}function BU(t){return RU[t]}function HU(t){return IU[t]}function Ol(t){return{fieldPath:t.canonicalString()}}function Vl(t){return wn.fromServerFormat(t.fieldPath)}function ZR(t){return t instanceof Qt?function(n){if(n.op==="=="){if(RT(n.value))return{unaryFilter:{field:Ol(n.field),op:"IS_NAN"}};if(CT(n.value))return{unaryFilter:{field:Ol(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(RT(n.value))return{unaryFilter:{field:Ol(n.field),op:"IS_NOT_NAN"}};if(CT(n.value))return{unaryFilter:{field:Ol(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ol(n.field),op:BU(n.op),value:n.value}}}(t):t instanceof ei?function(n){const r=n.getFilters().map(s=>ZR(s));return r.length===1?r[0]:{compositeFilter:{op:HU(n.op),filters:r}}}(t):Me(54877,{filter:t})}function FU(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function JR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n,r,s,a=Ve.min(),c=Ve.min(),u=xn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new ao(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ao(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ao(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ao(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e){this.wt=e}}function qU(t){const e=UU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?q0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(){this.Cn=new YU}addToCollectionParentIndex(e,n){return this.Cn.add(n),ve.resolve()}getCollectionParents(e,n){return ve.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ve.resolve()}deleteFieldIndex(e,n){return ve.resolve()}deleteAllFieldIndexes(e){return ve.resolve()}createTargetIndexes(e,n){return ve.resolve()}getDocumentsMatchingTarget(e,n){return ve.resolve(null)}getIndexType(e,n){return ve.resolve(0)}getFieldIndexes(e,n){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}getMinOffset(e,n){return ve.resolve(vo.min())}getMinOffsetFromCollectionGroup(e,n){return ve.resolve(vo.min())}updateCollectionGroup(e,n,r){return ve.resolve()}updateIndexEntries(e,n){return ve.resolve()}}class YU{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new rn(_t.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new rn(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eI=41943040;class Kn{static withCacheSize(e){return new Kn(e,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kn.DEFAULT_COLLECTION_PERCENTILE=10,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kn.DEFAULT=new Kn(eI,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kn.DISABLED=new Kn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new cc(0)}static lr(){return new cc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="LruGarbageCollector",KU=1048576;function $T([t,e],[n,r]){const s=Fe(t,n);return s===0?Fe(e,r):s}class XU{constructor(e){this.Er=e,this.buffer=new rn($T),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();$T(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class QU{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){we(FT,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){yc(n)?we(FT,"Ignoring IndexedDB error during garbage collection: ",n):await gc(n)}await this.mr(3e5)})}}class WU{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ve.resolve(Ym.le);const r=new XU(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(HT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HT):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,a,c,u,d,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,c=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(r=v,u=Date.now(),this.removeTargets(e,r,n))).next(v=>(a=v,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(f=Date.now(),Ml()<=Xe.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-p}ms
	Determined least recently used ${s} in `+(u-c)+`ms
	Removed ${a} targets in `+(d-u)+`ms
	Removed ${v} documents in `+(f-d)+`ms
Total Duration: ${f-p}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:v})))}}function ZU(t,e){return new WU(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{constructor(){this.changes=new ka(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,In.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ve.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ez{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tz{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Qu(r.mutation,s,mr.empty(),Et.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Qe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Qe()){const s=ma();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let c=Fu();return a.forEach((u,d)=>{c=c.insert(u,d.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const r=ma();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Qe()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((c,u)=>{n.set(c,u)})})}computeViews(e,n,r,s){let a=vs();const c=Xu(),u=function(){return Xu()}();return n.forEach((d,f)=>{const p=r.get(f.key);s.has(f.key)&&(p===void 0||p.mutation instanceof Co)?a=a.insert(f.key,f):p!==void 0?(c.set(f.key,p.mutation.getFieldMask()),Qu(p.mutation,f,p.mutation.getFieldMask(),Et.now())):c.set(f.key,mr.empty())}),this.recalculateAndSaveOverlays(e,a).next(d=>(d.forEach((f,p)=>c.set(f,p)),n.forEach((f,p)=>{var v;return u.set(f,new ez(p,(v=c.get(f))!==null&&v!==void 0?v:null))}),u))}recalculateAndSaveOverlays(e,n){const r=Xu();let s=new Rt((c,u)=>c-u),a=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const u of c)u.keys().forEach(d=>{const f=n.get(d);if(f===null)return;let p=r.get(d)||mr.empty();p=u.applyToLocalView(f,p),r.set(d,p);const v=(s.get(u.batchId)||Qe()).add(d);s=s.insert(u.batchId,v)})}).next(()=>{const c=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,p=d.value,v=VR();p.forEach(_=>{if(!a.has(_)){const b=HR(n.get(_),r.get(_));b!==null&&v.set(_,b),a=a.add(_)}}),c.push(this.documentOverlayCache.saveOverlays(e,f,v))}return ve.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(c){return Ie.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):DR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const c=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):ve.resolve(ma());let u=mh,d=a;return c.next(f=>ve.forEach(f,(p,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),a.get(p)?ve.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{d=d.insert(p,_)}))).next(()=>this.populateOverlays(e,f,a)).next(()=>this.computeViews(e,d,f,Qe())).next(p=>({batchId:u,changes:OR(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ie(n)).next(r=>{let s=Fu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let c=Fu();return this.indexManager.getCollectionParents(e,a).next(u=>ve.forEach(u,d=>{const f=function(v,_){return new vc(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next(p=>{p.forEach((v,_)=>{c=c.insert(v,_)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(c=>{a.forEach((d,f)=>{const p=f.getKey();c.get(p)===null&&(c=c.insert(p,In.newInvalidDocument(p)))});let u=Fu();return c.forEach((d,f)=>{const p=a.get(d);p!==void 0&&Qu(p.mutation,f,mr.empty(),Et.now()),Wm(n,f)&&(u=u.insert(d,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return ve.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ii(s.createTime)}}(n)),ve.resolve()}getNamedQuery(e,n){return ve.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:qU(s.bundledQuery),readTime:Ii(s.readTime)}}(n)),ve.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rz{constructor(){this.overlays=new Rt(Ie.comparator),this.Qr=new Map}getOverlay(e,n){return ve.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ma();return ve.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.St(e,n,a)}),ve.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Qr.delete(r)),ve.resolve()}getOverlaysForCollection(e,n,r){const s=ma(),a=n.length+1,c=new Ie(n.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===a&&d.largestBatchId>r&&s.set(d.getKey(),d)}return ve.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new Rt((f,p)=>f-p);const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let p=a.get(f.largestBatchId);p===null&&(p=ma(),a=a.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const u=ma(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,p)=>u.set(f,p)),!(u.size()>=s)););return ve.resolve(u)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const c=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new wU(n,r));let a=this.Qr.get(n);a===void 0&&(a=Qe(),this.Qr.set(n,a)),this.Qr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iz{constructor(){this.sessionToken=xn.EMPTY_BYTE_STRING}getSessionToken(e){return ve.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ve.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(){this.$r=new rn(dn.Ur),this.Kr=new rn(dn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new dn(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new dn(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new Ie(new _t([])),r=new dn(n,e),s=new dn(n,e+1),a=[];return this.Kr.forEachInRange([r,s],c=>{this.zr(c),a.push(c.key)}),a}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Ie(new _t([])),r=new dn(n,e),s=new dn(n,e+1);let a=Qe();return this.Kr.forEachInRange([r,s],c=>{a=a.add(c.key)}),a}containsKey(e){const n=new dn(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class dn{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Ie.comparator(e.key,n.key)||Fe(e.Zr,n.Zr)}static Wr(e,n){return Fe(e.Zr,n.Zr)||Ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new rn(dn.Ur)}checkEmpty(e){return ve.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new bU(a,n,r,s);this.mutationQueue.push(c);for(const u of s)this.Xr=this.Xr.add(new dn(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return ve.resolve(c)}lookupMutationBatch(e,n){return ve.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),a=s<0?0:s;return ve.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(this.mutationQueue.length===0?t_:this.nr-1)}getAllMutationBatches(e){return ve.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new dn(n,0),s=new dn(n,Number.POSITIVE_INFINITY),a=[];return this.Xr.forEachInRange([r,s],c=>{const u=this.ei(c.Zr);a.push(u)}),ve.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new rn(Fe);return n.forEach(s=>{const a=new dn(s,0),c=new dn(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([a,c],u=>{r=r.add(u.Zr)})}),ve.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;Ie.isDocumentKey(a)||(a=a.child(""));const c=new dn(new Ie(a),0);let u=new rn(Fe);return this.Xr.forEachWhile(d=>{const f=d.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(u=u.add(d.Zr)),!0)},c),ve.resolve(this.ni(u))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ct(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return ve.forEach(n.mutations,s=>{const a=new dn(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new dn(n,0),s=this.Xr.firstAfterOrEqual(r);return ve.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ve.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oz{constructor(e){this.ii=e,this.docs=function(){return new Rt(Ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,c=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ve.resolve(r?r.document.mutableCopy():In.newInvalidDocument(n))}getEntries(e,n){let r=vs();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():In.newInvalidDocument(s))}),ve.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=vs();const c=n.path,u=new Ie(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:p}}=d.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||V9(O9(p),r)<=0||(s.has(p.key)||Wm(n,p))&&(a=a.insert(p.key,p.mutableCopy()))}return ve.resolve(a)}getAllFromCollectionGroup(e,n,r,s){Me(9500)}si(e,n){return ve.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new az(this)}getSize(e){return ve.resolve(this.size)}}class az extends JU{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),ve.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lz{constructor(e){this.persistence=e,this.oi=new ka(n=>i_(n),s_),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this._i=0,this.ai=new u_,this.targetCount=0,this.ui=cc.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),ve.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new cc(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,ve.resolve()}updateTargetData(e,n){return this.Tr(n),ve.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.oi.forEach((c,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.oi.delete(c),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),ve.waitFor(a).next(()=>s)}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return ve.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),ve.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(c=>{a.push(s.markPotentiallyOrphaned(e,c))}),ve.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),ve.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return ve.resolve(r)}containsKey(e,n){return ve.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,n){this.ci={},this.overlays={},this.li=new Ym(0),this.hi=!1,this.hi=!0,this.Pi=new iz,this.referenceDelegate=e(this),this.Ti=new lz(this),this.indexManager=new GU,this.remoteDocumentCache=function(s){return new oz(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new $U(n),this.Ei=new nz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new sz(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){we("MemoryPersistence","Starting transaction:",e);const s=new cz(this.li.next());return this.referenceDelegate.di(),r(s).next(a=>this.referenceDelegate.Ai(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ri(e,n){return ve.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class cz extends U9{constructor(e){super(),this.currentSequenceNumber=e}}class h_{constructor(e){this.persistence=e,this.Vi=new u_,this.mi=null}static fi(e){return new h_(e)}get gi(){if(this.mi)return this.mi;throw Me(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),ve.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),ve.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),ve.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.gi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.gi,r=>{const s=Ie.fromPath(r);return this.pi(e,s).next(a=>{a||n.removeEntry(s,Ve.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return ve.or([()=>ve.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Em{constructor(e,n){this.persistence=e,this.yi=new ka(r=>B9(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=ZU(this,n)}static fi(e,n){return new Em(e,n)}di(){}Ai(e){return ve.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return ve.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(a=>a?ve.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.si(e,c=>this.Dr(e,c,n).next(u=>{u||(r++,a.removeEntry(c,Ve.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),ve.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),ve.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),ve.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),ve.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=jf(e.data.value)),n}Dr(e,n,r){return ve.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return ve.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=Qe(),s=Qe();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new d_(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hz{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return L6()?8:z9(kn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.ws(e,n).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.bs(e,n,s,r).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new uz;return this.Ss(e,n,c).next(u=>{if(a.result=u,this.fs)return this.Ds(e,n,c,u.size)})}).next(()=>a.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(Ml()<=Xe.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",Pl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ve.resolve()):(Ml()<=Xe.DEBUG&&we("QueryEngine","Query:",Pl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(Ml()<=Xe.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",Pl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ri(n))):ve.resolve())}ws(e,n){if(kT(n))return ve.resolve(null);let r=Ri(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=q0(n,null,"F"),r=Ri(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=Qe(...a);return this.ys.getDocuments(e,c).next(u=>this.indexManager.getMinOffset(e,r).next(d=>{const f=this.vs(n,u);return this.Cs(n,f,c,d.readTime)?this.ws(e,q0(n,null,"F")):this.Fs(e,f,n,d)}))})))}bs(e,n,r,s){return kT(n)||s.isEqual(Ve.min())?ve.resolve(null):this.ys.getDocuments(e,r).next(a=>{const c=this.vs(n,a);return this.Cs(n,c,r,s)?ve.resolve(null):(Ml()<=Xe.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Pl(n)),this.Fs(e,c,n,P9(s,mh)).next(u=>u))})}vs(e,n){let r=new rn(MR(e));return n.forEach((s,a)=>{Wm(e,a)&&(r=r.add(a))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,n,r){return Ml()<=Xe.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",Pl(n)),this.ys.getDocumentsMatchingQuery(e,n,vo.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="LocalStore",dz=3e8;class fz{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new Rt(Fe),this.Os=new ka(a=>i_(a),s_),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tz(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function mz(t,e,n,r){return new fz(t,e,n,r)}async function nI(t,e){const n=Le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],u=[];let d=Qe();for(const f of s){c.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}for(const f of a){u.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}return n.localDocuments.getDocuments(r,d).next(f=>({ks:f,removedBatchIds:c,addedBatchIds:u}))})})}function pz(t,e){const n=Le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.Bs.newChangeBuffer({trackRemovals:!0});return function(u,d,f,p){const v=f.batch,_=v.keys();let b=ve.resolve();return _.forEach(T=>{b=b.next(()=>p.getEntry(d,T)).next(R=>{const I=f.docVersions.get(T);ct(I!==null,48541),R.version.compareTo(I)<0&&(v.applyToRemoteDocument(R,f),R.isValidDocument()&&(R.setReadTime(f.commitVersion),p.addEntry(R)))})}),b.next(()=>u.mutationQueue.removeMutationBatch(d,v))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let d=Qe();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function rI(t){const e=Le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function gz(t,e){const n=Le(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const u=[];e.targetChanges.forEach((p,v)=>{const _=s.get(v);if(!_)return;u.push(n.Ti.removeMatchingKeys(a,p.removedDocuments,v).next(()=>n.Ti.addMatchingKeys(a,p.addedDocuments,v)));let b=_.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(v)!==null?b=b.withResumeToken(xn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,r)),s=s.insert(v,b),function(R,I,N){return R.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=dz?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(_,b,p)&&u.push(n.Ti.updateTargetData(a,b))});let d=vs(),f=Qe();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(a,p))}),u.push(yz(a,c,e.documentUpdates).next(p=>{d=p.qs,f=p.Qs})),!r.isEqual(Ve.min())){const p=n.Ti.getLastRemoteSnapshotVersion(a).next(v=>n.Ti.setTargetsMetadata(a,a.currentSequenceNumber,r));u.push(p)}return ve.waitFor(u).next(()=>c.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,d,f)).next(()=>d)}).then(a=>(n.xs=s,a))}function yz(t,e,n){let r=Qe(),s=Qe();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let c=vs();return n.forEach((u,d)=>{const f=a.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(Ve.min())?(e.removeEntry(u,d.readTime),c=c.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),c=c.insert(u,d)):we(f_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)}),{qs:c,Qs:s}})}function vz(t,e){const n=Le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=t_),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _z(t,e){const n=Le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(a=>a?(s=a,ve.resolve(s)):n.Ti.allocateTargetId(r).next(c=>(s=new ao(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function Q0(t,e,n){const r=Le(t),s=r.xs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,s))}catch(c){if(!yc(c))throw c;we(f_,`Failed to update sequence numbers for target ${e}: ${c}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function qT(t,e,n){const r=Le(t);let s=Ve.min(),a=Qe();return r.persistence.runTransaction("Execute query","readwrite",c=>function(d,f,p){const v=Le(d),_=v.Os.get(p);return _!==void 0?ve.resolve(v.xs.get(_)):v.Ti.getTargetData(f,p)}(r,c,Ri(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(c,u.targetId).next(d=>{a=d})}).next(()=>r.Ms.getDocumentsMatchingQuery(c,e,n?s:Ve.min(),n?a:Qe())).next(u=>(Ez(r,oU(e),u),{documents:u,$s:a})))}function Ez(t,e,n){let r=t.Ns.get(e)||Ve.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Ns.set(e,r)}class GT{constructor(){this.activeTargetIds=dU()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bz{constructor(){this.xo=new GT,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new GT,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT="ConnectivityMonitor";class KT{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){we(YT,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){we(YT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cf=null;function W0(){return Cf===null?Cf=function(){return 268435456+Math.round(2147483648*Math.random())}():Cf++,"0x"+Cf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="RestConnection",xz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Tz{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===mm?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,a){const c=W0(),u=this.jo(e,n.toUriEncodedString());we(Gy,`Sending RPC '${e}' ${c}:`,u,r);const d={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(d,s,a);const{host:f}=new URL(u),p=Da(f);return this.Jo(e,u,d,r,p).then(v=>(we(Gy,`Received RPC '${e}' ${c}: `,v),v),v=>{throw sc(Gy,`RPC '${e}' ${c} failed with error: `,v,"url: ",u,"request:",r),v})}Yo(e,n,r,s,a,c){return this.zo(e,n,r,s,a)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}jo(e,n){const r=xz[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="WebChannelConnection";class Az extends Tz{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,a){const c=W0();return new Promise((u,d)=>{const f=new sR;f.setWithCredentials(!0),f.listenOnce(oR.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case zf.NO_ERROR:const v=f.getResponseJson();we(Cn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),u(v);break;case zf.TIMEOUT:we(Cn,`RPC '${e}' ${c} timed out`),d(new xe(ge.DEADLINE_EXCEEDED,"Request time out"));break;case zf.HTTP_ERROR:const _=f.getStatus();if(we(Cn,`RPC '${e}' ${c} failed with status:`,_,"response text:",f.getResponseText()),_>0){let b=f.getResponseJson();Array.isArray(b)&&(b=b[0]);const T=b?.error;if(T&&T.status&&T.message){const R=function(N){const L=N.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(L)>=0?L:ge.UNKNOWN}(T.status);d(new xe(R,T.message))}else d(new xe(ge.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new xe(ge.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{h_:e,streamId:c,P_:f.getLastErrorCode(),T_:f.getLastError()})}}finally{we(Cn,`RPC '${e}' ${c} completed.`)}});const p=JSON.stringify(s);we(Cn,`RPC '${e}' ${c} sending request:`,s),f.send(n,"POST",p,r,15)})}I_(e,n,r){const s=W0(),a=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=cR(),u=lR(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Ho(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const p=a.join("");we(Cn,`Creating RPC '${e}' stream ${s}: ${p}`,d);const v=c.createWebChannel(p,d);this.E_(v);let _=!1,b=!1;const T=new Sz({Zo:I=>{b?we(Cn,`Not sending because RPC '${e}' stream ${s} is closed:`,I):(_||(we(Cn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),_=!0),we(Cn,`RPC '${e}' stream ${s} sending:`,I),v.send(I))},Xo:()=>v.close()}),R=(I,N,L)=>{I.listen(N,$=>{try{L($)}catch(H){setTimeout(()=>{throw H},0)}})};return R(v,Hu.EventType.OPEN,()=>{b||(we(Cn,`RPC '${e}' stream ${s} transport opened.`),T.__())}),R(v,Hu.EventType.CLOSE,()=>{b||(b=!0,we(Cn,`RPC '${e}' stream ${s} transport closed`),T.u_(),this.d_(v))}),R(v,Hu.EventType.ERROR,I=>{b||(b=!0,sc(Cn,`RPC '${e}' stream ${s} transport errored. Name:`,I.name,"Message:",I.message),T.u_(new xe(ge.UNAVAILABLE,"The operation could not be completed")))}),R(v,Hu.EventType.MESSAGE,I=>{var N;if(!b){const L=I.data[0];ct(!!L,16349);const $=L,H=$?.error||((N=$[0])===null||N===void 0?void 0:N.error);if(H){we(Cn,`RPC '${e}' stream ${s} received error:`,H);const G=H.status;let K=function(A){const V=Kt[A];if(V!==void 0)return $R(V)}(G),k=H.message;K===void 0&&(K=ge.INTERNAL,k="Unknown error status: "+G+" with message "+H.message),b=!0,T.u_(new xe(K,k)),v.close()}else we(Cn,`RPC '${e}' stream ${s} received:`,L),T.c_(L)}}),R(u,aR.STAT_EVENT,I=>{I.stat===U0.PROXY?we(Cn,`RPC '${e}' stream ${s} detected buffering proxy`):I.stat===U0.NOPROXY&&we(Cn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{T.a_()},0),T}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Yy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(t){return new NU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n,r=1e3,s=1.5,a=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=s,this.V_=a,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&we("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="PersistentStream";class sI{constructor(e,n,r,s,a,c,u,d){this.xi=e,this.S_=r,this.D_=s,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new iI(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===ge.RESOURCE_EXHAUSTED?(ys(n.toString()),ys("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{e(()=>{const s=new xe(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return we(XT,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(we(XT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Cz extends sI{constructor(e,n,r,s,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,c),this.serializer=a}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=MU(this.serializer,e),r=function(a){if(!("targetChange"in a))return Ve.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Ve.min():c.readTime?Ii(c.readTime):Ve.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=X0(this.serializer),n.addTarget=function(a,c){let u;const d=c.target;if(u=F0(d)?{documents:VU(a,d)}:{query:LU(a,d).gt},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=YR(a,c.resumeToken);const f=G0(a,c.expectedCount);f!==null&&(u.expectedCount=f)}else if(c.snapshotVersion.compareTo(Ve.min())>0){u.readTime=_m(a,c.snapshotVersion.toTimestamp());const f=G0(a,c.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const r=zU(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=X0(this.serializer),n.removeTarget=e,this.Q_(n)}}class Rz extends sI{constructor(e,n,r,s,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,c),this.serializer=a}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return ct(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ct(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ct(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=OU(e.writeResults,e.commitTime),r=Ii(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=X0(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>PU(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{}class Nz extends Iz{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new xe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.zo(e,Y0(n,r),s,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new xe(ge.UNKNOWN,a.toString())})}Yo(e,n,r,s,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,u])=>this.connection.Yo(e,Y0(n,r),s,c,u,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new xe(ge.UNKNOWN,c.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class Dz{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(ys(n),this.ua=!1):we("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca="RemoteStore";class kz{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=a,this.Ra.No(c=>{r.enqueueAndForget(async()=>{Ma(this)&&(we(Ca,"Restarting streams for network reachability change."),await async function(d){const f=Le(d);f.da.add(4),await zh(f),f.Va.set("Unknown"),f.da.delete(4),await rp(f)}(this))})}),this.Va=new Dz(r,s)}}async function rp(t){if(Ma(t))for(const e of t.Aa)await e(!0)}async function zh(t){for(const e of t.Aa)await e(!1)}function oI(t,e){const n=Le(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),y_(n)?g_(n):_c(n).N_()&&p_(n,e))}function m_(t,e){const n=Le(t),r=_c(n);n.Ea.delete(e),r.N_()&&aI(n,e),n.Ea.size===0&&(r.N_()?r.k_():Ma(n)&&n.Va.set("Unknown"))}function p_(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_c(t).Z_(e)}function aI(t,e){t.ma.Ke(e),_c(t).X_(e)}function g_(t){t.ma=new AU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),_c(t).start(),t.Va.ca()}function y_(t){return Ma(t)&&!_c(t).O_()&&t.Ea.size>0}function Ma(t){return Le(t).da.size===0}function lI(t){t.ma=void 0}async function Mz(t){t.Va.set("Online")}async function Pz(t){t.Ea.forEach((e,n)=>{p_(t,e)})}async function Oz(t,e){lI(t),y_(t)?(t.Va.Pa(e),g_(t)):t.Va.set("Unknown")}async function Vz(t,e,n){if(t.Va.set("Online"),e instanceof GR&&e.state===2&&e.cause)try{await async function(s,a){const c=a.cause;for(const u of a.targetIds)s.Ea.has(u)&&(await s.remoteSyncer.rejectListen(u,c),s.Ea.delete(u),s.ma.removeTarget(u))}(t,e)}catch(r){we(Ca,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bm(t,r)}else if(e instanceof Ff?t.ma.Xe(e):e instanceof qR?t.ma.ot(e):t.ma.nt(e),!n.isEqual(Ve.min()))try{const r=await rI(t.localStore);n.compareTo(r)>=0&&await function(a,c){const u=a.ma.It(c);return u.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const p=a.Ea.get(f);p&&a.Ea.set(f,p.withResumeToken(d.resumeToken,c))}}),u.targetMismatches.forEach((d,f)=>{const p=a.Ea.get(d);if(!p)return;a.Ea.set(d,p.withResumeToken(xn.EMPTY_BYTE_STRING,p.snapshotVersion)),aI(a,d);const v=new ao(p.target,d,f,p.sequenceNumber);p_(a,v)}),a.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){we(Ca,"Failed to raise snapshot:",r),await bm(t,r)}}async function bm(t,e,n){if(!yc(e))throw e;t.da.add(1),await zh(t),t.Va.set("Offline"),n||(n=()=>rI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{we(Ca,"Retrying IndexedDB access"),await n(),t.da.delete(1),await rp(t)})}function cI(t,e){return e().catch(n=>bm(t,n,e))}async function ip(t){const e=Le(t),n=wo(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:t_;for(;Lz(e);)try{const s=await vz(e.localStore,r);if(s===null){e.Ia.length===0&&n.k_();break}r=s.batchId,Uz(e,s)}catch(s){await bm(e,s)}uI(e)&&hI(e)}function Lz(t){return Ma(t)&&t.Ia.length<10}function Uz(t,e){t.Ia.push(e);const n=wo(t);n.N_()&&n.ea&&n.ta(e.mutations)}function uI(t){return Ma(t)&&!wo(t).O_()&&t.Ia.length>0}function hI(t){wo(t).start()}async function zz(t){wo(t).ia()}async function jz(t){const e=wo(t);for(const n of t.Ia)e.ta(n.mutations)}async function Bz(t,e,n){const r=t.Ia.shift(),s=a_.from(r,e,n);await cI(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ip(t)}async function Hz(t,e){e&&wo(t).ea&&await async function(r,s){if(function(c){return TU(c)&&c!==ge.ABORTED}(s.code)){const a=r.Ia.shift();wo(r).L_(),await cI(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await ip(r)}}(t,e),uI(t)&&hI(t)}async function QT(t,e){const n=Le(t);n.asyncQueue.verifyOperationInProgress(),we(Ca,"RemoteStore received new credentials");const r=Ma(n);n.da.add(3),await zh(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await rp(n)}async function Fz(t,e){const n=Le(t);e?(n.da.delete(2),await rp(n)):e||(n.da.add(2),await zh(n),n.Va.set("Unknown"))}function _c(t){return t.fa||(t.fa=function(n,r,s){const a=Le(n);return a.oa(),new Cz(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{e_:Mz.bind(null,t),n_:Pz.bind(null,t),i_:Oz.bind(null,t),Y_:Vz.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),y_(t)?g_(t):t.Va.set("Unknown")):(await t.fa.stop(),lI(t))})),t.fa}function wo(t){return t.ga||(t.ga=function(n,r,s){const a=Le(n);return a.oa(),new Rz(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:zz.bind(null,t),i_:Hz.bind(null,t),na:jz.bind(null,t),ra:Bz.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await ip(t)):(await t.ga.stop(),t.Ia.length>0&&(we(Ca,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new mo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const c=Date.now()+r,u=new v_(e,n,c,s,a);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __(t,e){if(ys("AsyncQueue",`${e}: ${t}`),yc(t))return new xe(ge.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{static emptySet(e){return new Ql(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ie.comparator(n.key,r.key):(n,r)=>Ie.comparator(n.key,r.key),this.keyedMap=Fu(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ql)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ql;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(){this.pa=new Rt(Ie.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Me(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class uc{constructor(e,n,r,s,a,c,u,d,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,s,a){const c=[];return n.forEach(u=>{c.push({type:0,doc:u})}),new uc(e,n,Ql.emptySet(n),c,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class qz{constructor(){this.queries=ZT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Le(n),a=s.queries;s.queries=ZT(),a.forEach((c,u)=>{for(const d of u.Sa)d.onError(r)})})(this,new xe(ge.ABORTED,"Firestore shutting down"))}}function ZT(){return new ka(t=>kR(t),Qm)}async function Gz(t,e){const n=Le(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.Da()&&e.va()&&(r=2):(a=new $z,r=e.va()?0:1);try{switch(r){case 0:a.ba=await n.onListen(s,!0);break;case 1:a.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(c){const u=__(c,`Initialization of query '${Pl(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,a),a.Sa.push(e),e.Fa(n.onlineState),a.ba&&e.Ma(a.ba)&&E_(n)}async function Yz(t,e){const n=Le(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const c=a.Sa.indexOf(e);c>=0&&(a.Sa.splice(c,1),a.Sa.length===0?s=e.va()?0:1:!a.Da()&&e.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Kz(t,e){const n=Le(t);let r=!1;for(const s of e){const a=s.query,c=n.queries.get(a);if(c){for(const u of c.Sa)u.Ma(s)&&(r=!0);c.ba=s}}r&&E_(n)}function Xz(t,e,n){const r=Le(t),s=r.queries.get(e);if(s)for(const a of s.Sa)a.onError(n);r.queries.delete(e)}function E_(t){t.Ca.forEach(e=>{e.next()})}var Z0,JT;(JT=Z0||(Z0={})).xa="default",JT.Cache="cache";class Qz{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new uc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=uc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Z0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e){this.key=e}}class fI{constructor(e){this.key=e}}class Wz{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Qe(),this.mutatedKeys=Qe(),this.Za=MR(e),this.Xa=new Ql(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new WT,s=n?n.Xa:this.Xa;let a=n?n.mutatedKeys:this.mutatedKeys,c=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,v)=>{const _=s.get(p),b=Wm(this.query,v)?v:null,T=!!_&&this.mutatedKeys.has(_.key),R=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let I=!1;_&&b?_.data.isEqual(b.data)?T!==R&&(r.track({type:3,doc:b}),I=!0):this.ru(_,b)||(r.track({type:2,doc:b}),I=!0,(d&&this.Za(b,d)>0||f&&this.Za(b,f)<0)&&(u=!0)):!_&&b?(r.track({type:0,doc:b}),I=!0):_&&!b&&(r.track({type:1,doc:_}),I=!0,(d||f)&&(u=!0)),I&&(b?(c=c.add(b),a=R?a.add(p):a.delete(p)):(c=c.delete(p),a=a.delete(p)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const p=this.query.limitType==="F"?c.last():c.first();c=c.delete(p.key),a=a.delete(p.key),r.track({type:1,doc:p})}return{Xa:c,nu:r,Cs:u,mutatedKeys:a}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const c=e.nu.wa();c.sort((p,v)=>function(b,T){const R=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Vt:I})}};return R(b)-R(T)}(p.type,v.type)||this.Za(p.doc,v.doc)),this.iu(r),s=s!=null&&s;const u=n&&!s?this.su():[],d=this.Ya.size===0&&this.current&&!s?1:0,f=d!==this.Ja;return this.Ja=d,c.length!==0||f?{snapshot:new uc(this.query,e.Xa,a,c,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:u}:{ou:u}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new WT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Qe(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new fI(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new dI(r))}),n}au(e){this.Ha=e.$s,this.Ya=Qe();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return uc.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const b_="SyncEngine";class Zz{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Jz{constructor(e){this.key=e,this.cu=!1}}class e7{constructor(e,n,r,s,a,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.lu={},this.hu=new ka(u=>kR(u),Qm),this.Pu=new Map,this.Tu=new Set,this.Iu=new Rt(Ie.comparator),this.Eu=new Map,this.du=new u_,this.Au={},this.Ru=new Map,this.Vu=cc.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function t7(t,e,n=!0){const r=_I(t);let s;const a=r.hu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.uu()):s=await mI(r,e,n,!0),s}async function n7(t,e){const n=_I(t);await mI(n,e,!0,!1)}async function mI(t,e,n,r){const s=await _z(t.localStore,Ri(e)),a=s.targetId,c=t.sharedClientState.addLocalQueryTarget(a,n);let u;return r&&(u=await r7(t,e,a,c==="current",s.resumeToken)),t.isPrimaryClient&&n&&oI(t.remoteStore,s),u}async function r7(t,e,n,r,s){t.fu=(v,_,b)=>async function(R,I,N,L){let $=I.view.tu(N);$.Cs&&($=await qT(R.localStore,I.query,!1).then(({documents:k})=>I.view.tu(k,$)));const H=L&&L.targetChanges.get(I.targetId),G=L&&L.targetMismatches.get(I.targetId)!=null,K=I.view.applyChanges($,R.isPrimaryClient,H,G);return tS(R,I.targetId,K.ou),K.snapshot}(t,v,_,b);const a=await qT(t.localStore,e,!0),c=new Wz(e,a.$s),u=c.tu(a.documents),d=Uh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),f=c.applyChanges(u,t.isPrimaryClient,d);tS(t,n,f.ou);const p=new Zz(e,n,c);return t.hu.set(e,p),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),f.snapshot}async function i7(t,e,n){const r=Le(t),s=r.hu.get(e),a=r.Pu.get(s.targetId);if(a.length>1)return r.Pu.set(s.targetId,a.filter(c=>!Qm(c,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Q0(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&m_(r.remoteStore,s.targetId),J0(r,s.targetId)}).catch(gc)):(J0(r,s.targetId),await Q0(r.localStore,s.targetId,!0))}async function s7(t,e){const n=Le(t),r=n.hu.get(e),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),m_(n.remoteStore,r.targetId))}async function o7(t,e,n){const r=f7(t);try{const s=await function(c,u){const d=Le(c),f=Et.now(),p=u.reduce((b,T)=>b.add(T.key),Qe());let v,_;return d.persistence.runTransaction("Locally write mutations","readwrite",b=>{let T=vs(),R=Qe();return d.Bs.getEntries(b,p).next(I=>{T=I,T.forEach((N,L)=>{L.isValidDocument()||(R=R.add(N))})}).next(()=>d.localDocuments.getOverlayedDocuments(b,T)).next(I=>{v=I;const N=[];for(const L of u){const $=_U(L,v.get(L.key).overlayedDocument);$!=null&&N.push(new Co(L.key,$,xR($.value.mapValue),pr.exists(!0)))}return d.mutationQueue.addMutationBatch(b,f,N,u)}).next(I=>{_=I;const N=I.applyToLocalDocumentSet(v,R);return d.documentOverlayCache.saveOverlays(b,I.batchId,N)})}).then(()=>({batchId:_.batchId,changes:OR(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(c,u,d){let f=c.Au[c.currentUser.toKey()];f||(f=new Rt(Fe)),f=f.insert(u,d),c.Au[c.currentUser.toKey()]=f}(r,s.batchId,n),await jh(r,s.changes),await ip(r.remoteStore)}catch(s){const a=__(s,"Failed to persist write");n.reject(a)}}async function pI(t,e){const n=Le(t);try{const r=await gz(n.localStore,e);e.targetChanges.forEach((s,a)=>{const c=n.Eu.get(a);c&&(ct(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.cu=!0:s.modifiedDocuments.size>0?ct(c.cu,14607):s.removedDocuments.size>0&&(ct(c.cu,42227),c.cu=!1))}),await jh(n,r,e)}catch(r){await gc(r)}}function eS(t,e,n){const r=Le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((a,c)=>{const u=c.view.Fa(e);u.snapshot&&s.push(u.snapshot)}),function(c,u){const d=Le(c);d.onlineState=u;let f=!1;d.queries.forEach((p,v)=>{for(const _ of v.Sa)_.Fa(u)&&(f=!0)}),f&&E_(d)}(r.eventManager,e),s.length&&r.lu.Y_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function a7(t,e,n){const r=Le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),a=s&&s.key;if(a){let c=new Rt(Ie.comparator);c=c.insert(a,In.newNoDocument(a,Ve.min()));const u=Qe().add(a),d=new tp(Ve.min(),new Map,new Rt(Fe),c,u);await pI(r,d),r.Iu=r.Iu.remove(a),r.Eu.delete(e),w_(r)}else await Q0(r.localStore,e,!1).then(()=>J0(r,e,n)).catch(gc)}async function l7(t,e){const n=Le(t),r=e.batch.batchId;try{const s=await pz(n.localStore,e);yI(n,r,null),gI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await jh(n,s)}catch(s){await gc(s)}}async function c7(t,e,n){const r=Le(t);try{const s=await function(c,u){const d=Le(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let p;return d.mutationQueue.lookupMutationBatch(f,u).next(v=>(ct(v!==null,37113),p=v.keys(),d.mutationQueue.removeMutationBatch(f,v))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,p,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p)).next(()=>d.localDocuments.getDocuments(f,p))})}(r.localStore,e);yI(r,e,n),gI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await jh(r,s)}catch(s){await gc(s)}}function gI(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function yI(t,e,n){const r=Le(t);let s=r.Au[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Au[r.currentUser.toKey()]=s}}function J0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||vI(t,r)})}function vI(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(m_(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),w_(t))}function tS(t,e,n){for(const r of n)r instanceof dI?(t.du.addReference(r.key,e),u7(t,r)):r instanceof fI?(we(b_,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||vI(t,r.key)):Me(19791,{pu:r})}function u7(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(we(b_,"New document in limbo: "+n),t.Tu.add(r),w_(t))}function w_(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new Ie(_t.fromString(e)),r=t.Vu.next();t.Eu.set(r,new Jz(n)),t.Iu=t.Iu.insert(n,r),oI(t.remoteStore,new ao(Ri(NR(n.path)),r,"TargetPurposeLimboResolution",Ym.le))}}async function jh(t,e,n){const r=Le(t),s=[],a=[],c=[];r.hu.isEmpty()||(r.hu.forEach((u,d)=>{c.push(r.fu(d,e,n).then(f=>{var p;if((f||n)&&r.isPrimaryClient){const v=f?!f.fromCache:(p=n?.targetChanges.get(d.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(f){s.push(f);const v=d_.Rs(d.targetId,f);a.push(v)}}))}),await Promise.all(c),r.lu.Y_(s),await async function(d,f){const p=Le(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>ve.forEach(f,_=>ve.forEach(_.ds,b=>p.persistence.referenceDelegate.addReference(v,_.targetId,b)).next(()=>ve.forEach(_.As,b=>p.persistence.referenceDelegate.removeReference(v,_.targetId,b)))))}catch(v){if(!yc(v))throw v;we(f_,"Failed to update sequence numbers: "+v)}for(const v of f){const _=v.targetId;if(!v.fromCache){const b=p.xs.get(_),T=b.snapshotVersion,R=b.withLastLimboFreeSnapshotVersion(T);p.xs=p.xs.insert(_,R)}}}(r.localStore,a))}async function h7(t,e){const n=Le(t);if(!n.currentUser.isEqual(e)){we(b_,"User change. New user:",e.toKey());const r=await nI(n.localStore,e);n.currentUser=e,function(a,c){a.Ru.forEach(u=>{u.forEach(d=>{d.reject(new xe(ge.CANCELLED,c))})}),a.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await jh(n,r.ks)}}function d7(t,e){const n=Le(t),r=n.Eu.get(e);if(r&&r.cu)return Qe().add(r.key);{let s=Qe();const a=n.Pu.get(e);if(!a)return s;for(const c of a){const u=n.hu.get(c);s=s.unionWith(u.view.eu)}return s}}function _I(t){const e=Le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=pI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=d7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=a7.bind(null,e),e.lu.Y_=Kz.bind(null,e.eventManager),e.lu.gu=Xz.bind(null,e.eventManager),e}function f7(t){const e=Le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=l7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=c7.bind(null,e),e}class wm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=np(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return mz(this.persistence,new hz,e.initialUser,this.serializer)}Su(e){return new tI(h_.fi,this.serializer)}bu(e){return new bz}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wm.provider={build:()=>new wm};class m7 extends wm{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){ct(this.persistence.referenceDelegate instanceof Em,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new QU(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Kn.withCacheSize(this.cacheSizeBytes):Kn.DEFAULT;return new tI(r=>Em.fi(r,n),this.serializer)}}class ev{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>eS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=h7.bind(null,this.syncEngine),await Fz(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new qz}()}createDatastore(e){const n=np(e.databaseInfo.databaseId),r=function(a){return new Az(a)}(e.databaseInfo);return function(a,c,u,d){return new Nz(a,c,u,d)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,c,u){return new kz(r,s,a,c,u)}(this.localStore,this.datastore,e.asyncQueue,n=>eS(this.syncEngine,n,0),function(){return KT.C()?new KT:new wz}())}createSyncEngine(e,n){return function(s,a,c,u,d,f,p){const v=new e7(s,a,c,u,d,f);return p&&(v.mu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=Le(s);we(Ca,"RemoteStore shutting down."),a.da.add(5),await zh(a),a.Ra.shutdown(),a.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ev.provider={build:()=>new ev};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p7{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):ys("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo="FirestoreClient";class g7{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Rn.UNAUTHENTICATED,this.clientId=fR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async c=>{we(xo,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(we(xo,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=__(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ky(t,e){t.asyncQueue.verifyOperationInProgress(),we(xo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await nI(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function nS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await y7(t);we(xo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>QT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>QT(e.remoteStore,s)),t._onlineComponents=e}async function y7(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){we(xo,"Using user provided OfflineComponentProvider");try{await Ky(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ge.FAILED_PRECONDITION||s.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;sc("Error using user provided cache. Falling back to memory cache: "+n),await Ky(t,new wm)}}else we(xo,"Using default OfflineComponentProvider"),await Ky(t,new m7(void 0));return t._offlineComponents}async function EI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(we(xo,"Using user provided OnlineComponentProvider"),await nS(t,t._uninitializedComponentsProvider._online)):(we(xo,"Using default OnlineComponentProvider"),await nS(t,new ev))),t._onlineComponents}function v7(t){return EI(t).then(e=>e.syncEngine)}async function _7(t){const e=await EI(t),n=e.eventManager;return n.onListen=t7.bind(null,e.syncEngine),n.onUnlisten=i7.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=n7.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=s7.bind(null,e.syncEngine),n}function E7(t,e,n={}){const r=new mo;return t.asyncQueue.enqueueAndForget(async()=>function(a,c,u,d,f){const p=new p7({next:_=>{p.xu(),c.enqueueAndForget(()=>Yz(a,v)),_.fromCache&&d.source==="server"?f.reject(new xe(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),v=new Qz(u,p,{includeMetadataChanges:!0,Qa:!0});return Gz(a,v)}(await _7(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(t,e,n){if(!n)throw new xe(ge.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function b7(t,e,n,r){if(e===!0&&r===!0)throw new xe(ge.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function iS(t){if(!Ie.isDocumentKey(t))throw new xe(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sS(t){if(Ie.isDocumentKey(t))throw new xe(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function sp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Me(12329,{type:typeof t})}function Ra(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xe(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sp(t);throw new xe(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="firestore.googleapis.com",oS=!0;class aS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new xe(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xI,this.ssl=oS}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:oS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=eI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<KU)throw new xe(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}b7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new xe(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new xe(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new xe(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class op{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new S9;switch(r.type){case"firstParty":return new I9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new xe(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=rS.get(n);r&&(we("ComponentProvider","Removing Datastore"),rS.delete(n),r.terminate())}(this),Promise.resolve()}}function w7(t,e,n,r={}){var s;t=Ra(t,op);const a=Da(e),c=t._getSettings(),u=Object.assign(Object.assign({},c),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;a&&(Kv(`https://${d}`),Xv("Firestore",!0)),c.host!==xI&&c.host!==d&&sc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},c),{host:d,ssl:a,emulatorOptions:r});if(!Ta(f,u)&&(t._setSettings(f),r.mockUserToken)){let p,v;if(typeof r.mockUserToken=="string")p=r.mockUserToken,v=Rn.MOCK_USER;else{p=R6(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new xe(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Rn(_)}t._authCredentials=new A9(new hR(p,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pa(this.firestore,e,this._query)}}class gr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new po(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gr(this.firestore,e,this._key)}}class po extends Pa{constructor(e,n,r){super(e,n,NR(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gr(this.firestore,null,new Ie(e))}withConverter(e){return new po(this.firestore,e,this._path)}}function x_(t,e,...n){if(t=Vt(t),wI("collection","path",e),t instanceof op){const r=_t.fromString(e,...n);return sS(r),new po(t,null,r)}{if(!(t instanceof gr||t instanceof po))throw new xe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_t.fromString(e,...n));return sS(r),new po(t.firestore,null,r)}}function Ec(t,e,...n){if(t=Vt(t),arguments.length===1&&(e=fR.newId()),wI("doc","path",e),t instanceof op){const r=_t.fromString(e,...n);return iS(r),new gr(t,null,new Ie(r))}{if(!(t instanceof gr||t instanceof po))throw new xe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_t.fromString(e,...n));return iS(r),new gr(t.firestore,t instanceof po?t.converter:null,new Ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="AsyncQueue";class cS{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new iI(this,"async_queue_retry"),this.rc=()=>{const r=Yy();r&&we(lS,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=Yy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Yy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new mo;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!yc(e))throw e;we(lS,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,ys("INTERNAL UNHANDLED ERROR: ",uS(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const s=v_.createAndSchedule(this,e,n,r,a=>this.uc(a));return this.Zu.push(s),s}oc(){this.Xu&&Me(47125,{cc:uS(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function uS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Bh extends op{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new cS,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cS(e),this._firestoreClient=void 0,await e}}}function x7(t,e){const n=typeof t=="object"?t:Zv(),r=typeof t=="string"?t:mm,s=Gm(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=KC("firestore");a&&w7(s,...a)}return s}function T_(t){if(t._terminated)throw new xe(ge.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||T7(t),t._firestoreClient}function T7(t){var e,n,r;const s=t._freezeSettings(),a=function(u,d,f,p){return new $9(u,d,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,bI(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new g7(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(u){const d=u?._online.build();return{_offline:u?._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hc(xn.fromBase64String(e))}catch(n){throw new xe(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new hc(xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new xe(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new xe(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new xe(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S7=/^__.*__$/;class A7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Co(e,this.data,this.fieldMask,n,this.fieldTransforms):new Lh(e,this.data,n,this.fieldTransforms)}}class TI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Co(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function SI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ic:t})}}class R_{constructor(e,n,r,s,a,c){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Ec(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new R_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Vc(e),s}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Ec(),s}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return xm(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(SI(this.Ic)&&S7.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class C7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||np(e)}bc(e,n,r,s=!1){return new R_({Ic:e,methodName:n,wc:r,path:wn.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function I_(t){const e=t._freezeSettings(),n=np(t._databaseId);return new C7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function AI(t,e,n,r,s,a={}){const c=t.bc(a.merge||a.mergeFields?2:0,e,n,s);N_("Data must be an object, but it was:",c,r);const u=CI(r,c);let d,f;if(a.merge)d=new mr(c.fieldMask),f=c.fieldTransforms;else if(a.mergeFields){const p=[];for(const v of a.mergeFields){const _=tv(e,v,n);if(!c.contains(_))throw new xe(ge.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);II(p,_)||p.push(_)}d=new mr(p),f=c.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,f=c.fieldTransforms;return new A7(new Xn(u),d,f)}class lp extends S_{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lp}}function R7(t,e,n,r){const s=t.bc(1,e,n);N_("Data must be an object, but it was:",s,r);const a=[],c=Xn.empty();Ao(r,(d,f)=>{const p=D_(e,d,n);f=Vt(f);const v=s.mc(p);if(f instanceof lp)a.push(p);else{const _=Hh(f,v);_!=null&&(a.push(p),c.set(p,_))}});const u=new mr(a);return new TI(c,u,s.fieldTransforms)}function I7(t,e,n,r,s,a){const c=t.bc(1,e,n),u=[tv(e,r,n)],d=[s];if(a.length%2!=0)throw new xe(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<a.length;_+=2)u.push(tv(e,a[_])),d.push(a[_+1]);const f=[],p=Xn.empty();for(let _=u.length-1;_>=0;--_)if(!II(f,u[_])){const b=u[_];let T=d[_];T=Vt(T);const R=c.mc(b);if(T instanceof lp)f.push(b);else{const I=Hh(T,R);I!=null&&(f.push(b),p.set(b,I))}}const v=new mr(f);return new TI(p,v,c.fieldTransforms)}function N7(t,e,n,r=!1){return Hh(n,t.bc(r?4:3,e))}function Hh(t,e){if(RI(t=Vt(t)))return N_("Unsupported field value:",e,t),CI(t,e);if(t instanceof S_)return function(r,s){if(!SI(s.Ic))throw s.gc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,s){const a=[];let c=0;for(const u of r){let d=Hh(u,s.fc(c));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),c++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=Vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return fU(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Et.fromDate(r);return{timestampValue:_m(s.serializer,a)}}if(r instanceof Et){const a=new Et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_m(s.serializer,a)}}if(r instanceof A_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof hc)return{bytesValue:YR(s.serializer,r._byteString)};if(r instanceof gr){const a=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw s.gc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:c_(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof C_)return function(c,u){return{mapValue:{fields:{[bR]:{stringValue:wR},[pm]:{arrayValue:{values:c.toArray().map(f=>{if(typeof f!="number")throw u.gc("VectorValues must only contain numeric values.");return o_(u.serializer,f)})}}}}}}(r,s);throw s.gc(`Unsupported field value: ${sp(r)}`)}(t,e)}function CI(t,e){const n={};return pR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ao(t,(r,s)=>{const a=Hh(s,e.Ac(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function RI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Et||t instanceof A_||t instanceof hc||t instanceof gr||t instanceof S_||t instanceof C_)}function N_(t,e,n){if(!RI(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=sp(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function tv(t,e,n){if((e=Vt(e))instanceof ap)return e._internalPath;if(typeof e=="string")return D_(t,e);throw xm("Field path arguments must be of type string or ",t,!1,void 0,n)}const D7=new RegExp("[~\\*/\\[\\]]");function D_(t,e,n){if(e.search(D7)>=0)throw xm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ap(...e.split("."))._internalPath}catch{throw xm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function xm(t,e,n,r,s){const a=r&&!r.isEmpty(),c=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(a||c)&&(d+=" (found",a&&(d+=` in field ${r}`),c&&(d+=` in document ${s}`),d+=")"),new xe(ge.INVALID_ARGUMENT,u+t+d)}function II(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new gr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new k7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(cp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class k7 extends NI{data(){return super.data()}}function cp(t,e){return typeof e=="string"?D_(t,e):e instanceof ap?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new xe(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class k_{}class DI extends k_{}function P7(t,e,...n){let r=[];e instanceof k_&&r.push(e),r=r.concat(n),function(a){const c=a.filter(d=>d instanceof M_).length,u=a.filter(d=>d instanceof up).length;if(c>1||c>0&&u>0)throw new xe(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class up extends DI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new up(e,n,r)}_apply(e){const n=this._parse(e);return kI(e._query,n),new Pa(e.firestore,e.converter,$0(e._query,n))}_parse(e){const n=I_(e.firestore);return function(a,c,u,d,f,p,v){let _;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new xe(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){dS(v,p);const T=[];for(const R of v)T.push(hS(d,a,R));_={arrayValue:{values:T}}}else _=hS(d,a,v)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||dS(v,p),_=N7(u,c,v,p==="in"||p==="not-in");return Qt.create(f,p,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function O7(t,e,n){const r=e,s=cp("where",t);return up._create(s,r,n)}class M_ extends k_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new M_(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ei.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let c=s;const u=a.getFlattenedFilters();for(const d of u)kI(c,d),c=$0(c,d)}(e._query,n),new Pa(e.firestore,e.converter,$0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class P_ extends DI{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new P_(e,n)}_apply(e){const n=function(s,a,c){if(s.startAt!==null)throw new xe(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new xe(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vh(a,c)}(e._query,this._field,this._direction);return new Pa(e.firestore,e.converter,function(s,a){const c=s.explicitOrderBy.concat([a]);return new vc(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function V7(t,e="asc"){const n=e,r=cp("orderBy",t);return P_._create(r,n)}function hS(t,e,n){if(typeof(n=Vt(n))=="string"){if(n==="")throw new xe(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DR(e)&&n.indexOf("/")!==-1)throw new xe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(_t.fromString(n));if(!Ie.isDocumentKey(r))throw new xe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return AT(t,new Ie(r))}if(n instanceof gr)return AT(t,n._key);throw new xe(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sp(n)}.`)}function dS(t,e){if(!Array.isArray(t)||t.length===0)throw new xe(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kI(t,e){const n=function(s,a){for(const c of s)for(const u of c.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new xe(ge.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(ge.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class L7{convertValue(e,n="none"){switch(bo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Eo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ao(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,s;const a=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[pm].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(c=>Bt(c.doubleValue));return new C_(a)}convertGeoPoint(e){return new A_(Bt(e.latitude),Bt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Xm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ph(e));default:return null}}convertTimestamp(e){const n=_o(e);return new Et(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=_t.fromString(e);ct(JR(r),9688,{name:e});const s=new gh(r.get(1),r.get(3)),a=new Ie(r.popFirst(5));return s.isEqual(n)||ys(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class U7 extends NI{constructor(e,n,r,s,a,c){super(e,n,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $f(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(cp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class $f extends U7{data(e={}){return super.data(e)}}class z7{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Rf(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new $f(this._firestore,this._userDataWriter,r.key,r,new Rf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new xe(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(u=>{const d=new $f(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Rf(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}})}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>a||u.type!==3).map(u=>{const d=new $f(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Rf(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,p=-1;return u.type!==0&&(f=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),p=c.indexOf(u.doc.key)),{type:j7(u.type),doc:d,oldIndex:f,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function j7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:t})}}class B7 extends L7{constructor(e){super(),this.firestore=e}convertBytes(e){return new hc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gr(this.firestore,null,n)}}function O_(t){t=Ra(t,Pa);const e=Ra(t.firestore,Bh),n=T_(e),r=new B7(e);return M7(t._query),E7(n,t._query).then(s=>new z7(e,r,t,s))}function V_(t,e,n){t=Ra(t,gr);const r=Ra(t.firestore,Bh),s=MI(t.converter,e,n);return L_(r,[AI(I_(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,pr.none())])}function H7(t){return L_(Ra(t.firestore,Bh),[new ep(t._key,pr.none())])}function L_(t,e){return function(r,s){const a=new mo;return r.asyncQueue.enqueueAndForget(async()=>o7(await v7(r),s,a)),a.promise}(T_(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=I_(e)}set(e,n,r){this._verifyNotCommitted();const s=Xy(e,this._firestore),a=MI(s.converter,n,r),c=AI(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,r);return this._mutations.push(c.toMutation(s._key,pr.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const a=Xy(e,this._firestore);let c;return c=typeof(n=Vt(n))=="string"||n instanceof ap?I7(this._dataReader,"WriteBatch.update",a._key,n,r,s):R7(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(c.toMutation(a._key,pr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Xy(e,this._firestore);return this._mutations=this._mutations.concat(new ep(n._key,pr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xy(t,e){if((t=Vt(t)).firestore!==e)throw new xe(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(t){return T_(t=Ra(t,Bh)),new F7(t,e=>L_(t,e))}(function(e,n=!0){(function(s){pc=s})(mc),Sa(new yo("firestore",(r,{instanceIdentifier:s,options:a})=>{const c=r.getProvider("app").getImmediate(),u=new Bh(new C9(r.getProvider("auth-internal")),new N9(c,r.getProvider("app-check-internal")),function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new xe(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gh(f.options.projectId,p)}(c,s),c);return a=Object.assign({useFetchStreams:n},a),u._setSettings(a),u},"PUBLIC").setMultipleInstances(!0)),Ci(mT,pT,e),Ci(mT,pT,"esm2017")})();function U_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function OI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $7=OI,VI=new Oh("auth","Firebase",OI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm=new Qv("@firebase/auth");function q7(t,...e){Tm.logLevel<=Xe.WARN&&Tm.warn(`Auth (${mc}): ${t}`,...e)}function qf(t,...e){Tm.logLevel<=Xe.ERROR&&Tm.error(`Auth (${mc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t,...e){throw z_(t,...e)}function Ni(t,...e){return z_(t,...e)}function LI(t,e,n){const r=Object.assign(Object.assign({},$7()),{[e]:n});return new Oh("auth","Firebase",r).create(e,{appName:t.name})}function fs(t){return LI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function z_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return VI.create(t,...e)}function ke(t,e,...n){if(!t)throw z_(e,...n)}function hs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw qf(e),new Error(e)}function _s(t,e){t||hs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function G7(){return fS()==="http:"||fS()==="https:"}function fS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(G7()||P6()||"connection"in navigator)?navigator.onLine:!0}function K7(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n){this.shortDelay=e,this.longDelay=n,_s(n>e,"Short delay should be less than long delay!"),this.isMobile=D6()||O6()}get(){return Y7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(t,e){_s(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q7=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],W7=new Fh(3e4,6e4);function Ro(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Io(t,e,n,r,s={}){return zI(t,s,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const u=Vh(Object.assign({key:t.config.apiKey},c)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:d},a);return M6()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Da(t.emulatorConfig.host)&&(f.credentials="include"),UI.fetch()(await jI(t,t.config.apiHost,n,u),f)})}async function zI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},X7),e);try{const s=new J7(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw If(t,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const u=a.ok?c.errorMessage:c.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw If(t,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw If(t,"email-already-in-use",c);if(d==="USER_DISABLED")throw If(t,"user-disabled",c);const p=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw LI(t,p,f);ti(t,p)}}catch(s){if(s instanceof Li)throw s;ti(t,"network-request-failed",{message:String(s)})}}async function $h(t,e,n,r,s={}){const a=await Io(t,e,n,r,s);return"mfaPendingCredential"in a&&ti(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function jI(t,e,n,r){const s=`${e}${n}?${r}`,a=t,c=a.config.emulator?j_(t.config,s):`${t.config.apiScheme}://${s}`;return Q7.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function Z7(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class J7{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ni(this.auth,"network-request-failed")),W7.get())})}}function If(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ni(t,e,r);return s.customData._tokenResponse=n,s}function mS(t){return t!==void 0&&t.enterprise!==void 0}class e8{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Z7(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function t8(t,e){return Io(t,"GET","/v2/recaptchaConfig",Ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n8(t,e){return Io(t,"POST","/v1/accounts:delete",e)}async function Sm(t,e){return Io(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function r8(t,e=!1){const n=Vt(t),r=await n.getIdToken(e),s=B_(r);ke(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,c=a?.sign_in_provider;return{claims:s,token:r,authTime:Wu(Qy(s.auth_time)),issuedAtTime:Wu(Qy(s.iat)),expirationTime:Wu(Qy(s.exp)),signInProvider:c||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Qy(t){return Number(t)*1e3}function B_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return qf("JWT malformed, contained fewer than 3 sections"),null;try{const s=GC(n);return s?JSON.parse(s):(qf("Failed to decode base64 JWT payload"),null)}catch(s){return qf("Caught error parsing JWT payload as JSON",s?.toString()),null}}function pS(t){const e=B_(t);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bh(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Li&&i8(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function i8({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wu(this.lastLoginAt),this.creationTime=Wu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Am(t){var e;const n=t.auth,r=await t.getIdToken(),s=await bh(t,Sm(n,{idToken:r}));ke(s?.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?BI(a.providerUserInfo):[],u=a8(t.providerData,c),d=t.isAnonymous,f=!(t.email&&a.passwordHash)&&!u?.length,p=d?f:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new rv(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(t,v)}async function o8(t){const e=Vt(t);await Am(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function a8(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function BI(t){return t.map(e=>{var{providerId:n}=e,r=U_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l8(t,e){const n=await zI(t,{},async()=>{const r=Vh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,c=await jI(t,s,"/v1/token",`key=${a}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:r};return t.emulatorConfig&&Da(t.emulatorConfig.host)&&(d.credentials="include"),UI.fetch()(c,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function c8(t,e){return Io(t,"POST","/v2/accounts:revokeToken",Ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const n=pS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await l8(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,c=new Wl;return r&&(ke(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),s&&(ke(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),a&&(ke(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wl,this.toJSON())}_performRefresh(){return hs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(t,e){ke(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Zr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,a=U_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new s8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new rv(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await bh(this,this.stsTokenManager.getToken(this.auth,e));return ke(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return r8(this,e)}reload(){return o8(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Am(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fr(this.auth.app))return Promise.reject(fs(this.auth));const e=await this.getIdToken();return await bh(this,n8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,a,c,u,d,f,p;const v=(r=n.displayName)!==null&&r!==void 0?r:void 0,_=(s=n.email)!==null&&s!==void 0?s:void 0,b=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,T=(c=n.photoURL)!==null&&c!==void 0?c:void 0,R=(u=n.tenantId)!==null&&u!==void 0?u:void 0,I=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,N=(f=n.createdAt)!==null&&f!==void 0?f:void 0,L=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:$,emailVerified:H,isAnonymous:G,providerData:K,stsTokenManager:k}=n;ke($&&k,e,"internal-error");const S=Wl.fromJSON(this.name,k);ke(typeof $=="string",e,"internal-error"),Qs(v,e.name),Qs(_,e.name),ke(typeof H=="boolean",e,"internal-error"),ke(typeof G=="boolean",e,"internal-error"),Qs(b,e.name),Qs(T,e.name),Qs(R,e.name),Qs(I,e.name),Qs(N,e.name),Qs(L,e.name);const A=new Zr({uid:$,auth:e,email:_,emailVerified:H,displayName:v,isAnonymous:G,photoURL:T,phoneNumber:b,tenantId:R,stsTokenManager:S,createdAt:N,lastLoginAt:L});return K&&Array.isArray(K)&&(A.providerData=K.map(V=>Object.assign({},V))),I&&(A._redirectEventId=I),A}static async _fromIdTokenResponse(e,n,r=!1){const s=new Wl;s.updateFromServerResponse(n);const a=new Zr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Am(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ke(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?BI(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!a?.length,u=new Wl;u.updateFromIdToken(r);const d=new Zr({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:c}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new rv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!a?.length};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=new Map;function ds(t){_s(t instanceof Function,"Expected a class definition");let e=gS.get(t);return e?(_s(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,gS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}HI.type="NONE";const yS=HI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(t,e,n){return`firebase:${t}:${e}:${n}`}class Zl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Gf(this.userKey,s.apiKey,a),this.fullPersistenceKey=Gf("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Sm(this.auth,{idToken:e}).catch(()=>{});return n?Zr._fromGetAccountInfoResponse(this.auth,n,e):null}return Zr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Zl(ds(yS),e,r);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=s[0]||ds(yS);const c=Gf(r,e.config.apiKey,e.name);let u=null;for(const f of n)try{const p=await f._get(c);if(p){let v;if(typeof p=="string"){const _=await Sm(e,{idToken:p}).catch(()=>{});if(!_)break;v=await Zr._fromGetAccountInfoResponse(e,_,p)}else v=Zr._fromJSON(e,p);f!==a&&(u=v),a=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new Zl(a,e,r):(a=d[0],u&&await a._set(c,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==a)try{await f._remove(c)}catch{}})),new Zl(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(KI(e))return"Blackberry";if(XI(e))return"Webos";if($I(e))return"Safari";if((e.includes("chrome/")||qI(e))&&!e.includes("edge/"))return"Chrome";if(YI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function FI(t=kn()){return/firefox\//i.test(t)}function $I(t=kn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qI(t=kn()){return/crios\//i.test(t)}function GI(t=kn()){return/iemobile/i.test(t)}function YI(t=kn()){return/android/i.test(t)}function KI(t=kn()){return/blackberry/i.test(t)}function XI(t=kn()){return/webos/i.test(t)}function H_(t=kn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function u8(t=kn()){var e;return H_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function h8(){return V6()&&document.documentMode===10}function QI(t=kn()){return H_(t)||YI(t)||XI(t)||KI(t)||/windows phone/i.test(t)||GI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(t,e=[]){let n;switch(t){case"Browser":n=vS(kn());break;case"Worker":n=`${vS(kn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((c,u)=>{try{const d=e(a);c(d)}catch(d){u(d)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f8(t,e={}){return Io(t,"GET","/v2/passwordPolicy",Ro(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m8=6;class p8{constructor(e){var n,r,s,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:m8,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,a,c,u;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(a=d.containsUppercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(c=d.containsNumericCharacter)!==null&&c!==void 0?c:!0),d.isValid&&(d.isValid=(u=d.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),d}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _S(this),this.idTokenSubscription=new _S(this),this.beforeStateQueue=new d8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ds(n)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await Zl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Sm(this,{idToken:e}),r=await Zr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(fr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s?._redirectEventId,d=await this.tryRedirectSignIn(e);(!c||c===u)&&d?.user&&(s=d.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Am(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=K7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fr(this.app))return Promise.reject(fs(this));const n=e?Vt(e):null;return n&&ke(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fr(this.app)?Promise.reject(fs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fr(this.app)?Promise.reject(fs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await f8(this),n=new p8(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Oh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await c8(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ds(e)||this._popupRedirectResolver;ke(n,this,"argument-error"),this.redirectPersistenceManager=await Zl.create(this,[ds(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(u,this,"internal-error"),u.then(()=>{c||a(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,s);return()=>{c=!0,d()}}else{const d=e.addObserver(n);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(fr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&q7(`Error while retrieving App Check token: ${n.error}`),n?.token}}function Oa(t){return Vt(t)}class _S{constructor(e){this.auth=e,this.observer=null,this.addObserver=$6(n=>this.observer=n)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function y8(t){hp=t}function ZI(t){return hp.loadJS(t)}function v8(){return hp.recaptchaEnterpriseScript}function _8(){return hp.gapiScript}function E8(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class b8{constructor(){this.enterprise=new w8}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class w8{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const x8="recaptcha-enterprise",JI="NO_RECAPTCHA";class T8{constructor(e){this.type=x8,this.auth=Oa(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,u)=>{t8(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new e8(d);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,c(f.siteKey)}}).catch(d=>{u(d)})})}function s(a,c,u){const d=window.grecaptcha;mS(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(f=>{c(f)}).catch(()=>{c(JI)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new b8().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(u=>{if(!n&&mS(window.grecaptcha))s(u,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=v8();d.length!==0&&(d+=u),ZI(d).then(()=>{s(u,a,c)}).catch(f=>{c(f)})}}).catch(u=>{c(u)})})}}async function ES(t,e,n,r=!1,s=!1){const a=new T8(t);let c;if(s)c=JI;else try{c=await a.verify(n)}catch{c=await a.verify(n,!0)}const u=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function iv(t,e,n,r,s){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await ES(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await ES(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S8(t,e){const n=Gm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(Ta(a,e??{}))return s;ti(s,"already-initialized")}return n.initialize({options:e})}function A8(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ds);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function C8(t,e,n){const r=Oa(t);ke(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=eN(e),{host:c,port:u}=R8(e),d=u===null?"":`:${u}`,f={url:`${a}//${c}${d}/`},p=Object.freeze({host:c,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ke(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ke(Ta(f,r.config.emulator)&&Ta(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,Da(c)?(Kv(`${a}//${c}${d}`),Xv("Auth",!0)):I8()}function eN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function R8(t){const e=eN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:bS(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:bS(c)}}}function bS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function I8(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hs("not implemented")}_getIdTokenResponse(e){return hs("not implemented")}_linkToIdToken(e,n){return hs("not implemented")}_getReauthenticationResolver(e){return hs("not implemented")}}async function N8(t,e){return Io(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D8(t,e){return $h(t,"POST","/v1/accounts:signInWithPassword",Ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k8(t,e){return $h(t,"POST","/v1/accounts:signInWithEmailLink",Ro(t,e))}async function M8(t,e){return $h(t,"POST","/v1/accounts:signInWithEmailLink",Ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh extends F_{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new wh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new wh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return iv(e,n,"signInWithPassword",D8);case"emailLink":return k8(e,{email:this._email,oobCode:this._password});default:ti(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return iv(e,r,"signUpPassword",N8);case"emailLink":return M8(e,{idToken:n,email:this._email,oobCode:this._password});default:ti(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jl(t,e){return $h(t,"POST","/v1/accounts:signInWithIdp",Ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P8="http://localhost";class Ia extends F_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ia(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ti("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,a=U_(n,["providerId","signInMethod"]);if(!r||!s)return null;const c=new Ia(r,s);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return Jl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Jl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Jl(e,n)}buildRequest(){const e={requestUri:P8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Vh(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O8(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function V8(t){const e=ju(Bu(t)).link,n=e?ju(Bu(e)).deep_link_id:null,r=ju(Bu(t)).deep_link_id;return(r?ju(Bu(r)).link:null)||r||n||e||t}class $_{constructor(e){var n,r,s,a,c,u;const d=ju(Bu(e)),f=(n=d.apiKey)!==null&&n!==void 0?n:null,p=(r=d.oobCode)!==null&&r!==void 0?r:null,v=O8((s=d.mode)!==null&&s!==void 0?s:null);ke(f&&p&&v,"argument-error"),this.apiKey=f,this.operation=v,this.code=p,this.continueUrl=(a=d.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=d.lang)!==null&&c!==void 0?c:null,this.tenantId=(u=d.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=V8(e);try{return new $_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(){this.providerId=bc.PROVIDER_ID}static credential(e,n){return wh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=$_.parseLink(n);return ke(r,"argument-error"),wh._fromEmailAndCode(e,r.code,r.tenantId)}}bc.PROVIDER_ID="password";bc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";bc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh extends tN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro extends qh{constructor(){super("facebook.com")}static credential(e){return Ia._fromParams({providerId:ro.PROVIDER_ID,signInMethod:ro.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ro.credentialFromTaggedObject(e)}static credentialFromError(e){return ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ro.credential(e.oauthAccessToken)}catch{return null}}}ro.FACEBOOK_SIGN_IN_METHOD="facebook.com";ro.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io extends qh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ia._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return io.credentialFromTaggedObject(e)}static credentialFromError(e){return io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return io.credential(n,r)}catch{return null}}}io.GOOGLE_SIGN_IN_METHOD="google.com";io.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends qh{constructor(){super("github.com")}static credential(e){return Ia._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return so.credential(e.oauthAccessToken)}catch{return null}}}so.GITHUB_SIGN_IN_METHOD="github.com";so.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo extends qh{constructor(){super("twitter.com")}static credential(e,n){return Ia._fromParams({providerId:oo.PROVIDER_ID,signInMethod:oo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return oo.credentialFromTaggedObject(e)}static credentialFromError(e){return oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return oo.credential(n,r)}catch{return null}}}oo.TWITTER_SIGN_IN_METHOD="twitter.com";oo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L8(t,e){return $h(t,"POST","/v1/accounts:signUp",Ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await Zr._fromIdTokenResponse(e,r,s),c=wS(r);return new Na({user:a,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=wS(r);return new Na({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function wS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm extends Li{constructor(e,n,r,s){var a;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Cm.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Cm(e,n,r,s)}}function nN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Cm._fromErrorAndOperation(t,a,e,r):a})}async function U8(t,e,n=!1){const r=await bh(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Na._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z8(t,e,n=!1){const{auth:r}=t;if(fr(r.app))return Promise.reject(fs(r));const s="reauthenticate";try{const a=await bh(t,nN(r,s,e,t),n);ke(a.idToken,r,"internal-error");const c=B_(a.idToken);ke(c,r,"internal-error");const{sub:u}=c;return ke(t.uid===u,r,"user-mismatch"),Na._forOperation(t,s,a)}catch(a){throw a?.code==="auth/user-not-found"&&ti(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN(t,e,n=!1){if(fr(t.app))return Promise.reject(fs(t));const r="signIn",s=await nN(t,r,e),a=await Na._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function j8(t,e){return rN(Oa(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iN(t){const e=Oa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function B8(t,e,n){if(fr(t.app))return Promise.reject(fs(t));const r=Oa(t),c=await iv(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",L8).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&iN(t),d}),u=await Na._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(u.user),u}function H8(t,e,n){return fr(t.app)?Promise.reject(fs(t)):j8(Vt(t),bc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&iN(t),r})}function F8(t,e,n,r){return Vt(t).onIdTokenChanged(e,n,r)}function $8(t,e,n){return Vt(t).beforeAuthStateChanged(e,n)}function q8(t,e,n,r){return Vt(t).onAuthStateChanged(e,n,r)}function G8(t){return Vt(t).signOut()}const Rm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Rm,"1"),this.storage.removeItem(Rm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y8=1e3,K8=10;class oN extends sN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=QI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,u,d)=>{this.notifyListeners(c,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);h8()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,K8):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Y8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}oN.type="LOCAL";const X8=oN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN extends sN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}aN.type="SESSION";const lN=aN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q8(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new dp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,c=this.handlersMap[s];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(c).map(async f=>f(n.origin,a)),d=await Q8(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,c;return new Promise((u,d)=>{const f=q_("",20);s.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(v){const _=v;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(_.data.response);break;default:clearTimeout(p),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(){return window}function Z8(t){Di().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(){return typeof Di().WorkerGlobalScope<"u"&&typeof Di().importScripts=="function"}async function J8(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ej(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function tj(){return cN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="firebaseLocalStorageDb",nj=1,Im="firebaseLocalStorage",hN="fbase_key";class Gh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function fp(t,e){return t.transaction([Im],e?"readwrite":"readonly").objectStore(Im)}function rj(){const t=indexedDB.deleteDatabase(uN);return new Gh(t).toPromise()}function sv(){const t=indexedDB.open(uN,nj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Im,{keyPath:hN})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Im)?e(r):(r.close(),await rj(),e(await sv()))})})}async function xS(t,e,n){const r=fp(t,!0).put({[hN]:e,value:n});return new Gh(r).toPromise()}async function ij(t,e){const n=fp(t,!1).get(e),r=await new Gh(n).toPromise();return r===void 0?null:r.value}function TS(t,e){const n=fp(t,!0).delete(e);return new Gh(n).toPromise()}const sj=800,oj=3;class dN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>oj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dp._getInstance(tj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await J8(),!this.activeServiceWorker)return;this.sender=new W8(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ej()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sv();return await xS(e,Rm,"1"),await TS(e,Rm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>xS(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>ij(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>TS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=fp(s,!1).getAll();return new Gh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dN.type="LOCAL";const aj=dN;new Fh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(t,e){return e?ds(e):(ke(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_ extends F_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Jl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Jl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function cj(t){return rN(t.auth,new G_(t),t.bypassAuthState)}function uj(t){const{auth:e,user:n}=t;return ke(n,e,"internal-error"),z8(n,new G_(t),t.bypassAuthState)}async function hj(t){const{auth:e,user:n}=t;return ke(n,e,"internal-error"),U8(n,new G_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:c,type:u}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cj;case"linkViaPopup":case"linkViaRedirect":return hj;case"reauthViaPopup":case"reauthViaRedirect":return uj;default:ti(this.auth,"internal-error")}}resolve(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj=new Fh(2e3,1e4);class zl extends fN{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,zl.currentPopupAction&&zl.currentPopupAction.cancel(),zl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){_s(this.filter.length===1,"Popup operations only handle one event");const e=q_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ni(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ni(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ni(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dj.get())};e()}}zl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj="pendingRedirect",Yf=new Map;class mj extends fN{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Yf.get(this.auth._key());if(!e){try{const r=await pj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Yf.set(this.auth._key(),e)}return this.bypassAuthState||Yf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pj(t,e){const n=vj(e),r=yj(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function gj(t,e){Yf.set(t._key(),e)}function yj(t){return ds(t._redirectPersistence)}function vj(t){return Gf(fj,t.config.apiKey,t.name)}async function _j(t,e,n=!1){if(fr(t.app))return Promise.reject(fs(t));const r=Oa(t),s=lj(r,e),c=await new mj(r,s,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej=10*60*1e3;class bj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!mN(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ni(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ej&&this.cachedEventUids.clear(),this.cachedEventUids.has(SS(e))}saveEventToCache(e){this.cachedEventUids.add(SS(e)),this.lastProcessedEventTime=Date.now()}}function SS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function mN({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function wj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xj(t,e={}){return Io(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sj=/^https?/;async function Aj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await xj(t);for(const n of e)try{if(Cj(n))return}catch{}ti(t,"unauthorized-domain")}function Cj(t){const e=nv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!Sj.test(n))return!1;if(Tj.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rj=new Fh(3e4,6e4);function AS(){const t=Di().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Ij(t){return new Promise((e,n)=>{var r,s,a;function c(){AS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{AS(),n(Ni(t,"network-request-failed"))},timeout:Rj.get()})}if(!((s=(r=Di().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Di().gapi)===null||a===void 0)&&a.load)c();else{const u=E8("iframefcb");return Di()[u]=()=>{gapi.load?c():n(Ni(t,"network-request-failed"))},ZI(`${_8()}?onload=${u}`).catch(d=>n(d))}}).catch(e=>{throw Kf=null,e})}let Kf=null;function Nj(t){return Kf=Kf||Ij(t),Kf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj=new Fh(5e3,15e3),kj="__/auth/iframe",Mj="emulator/auth/iframe",Pj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Oj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vj(t){const e=t.config;ke(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?j_(e,Mj):`https://${t.config.authDomain}/${kj}`,r={apiKey:e.apiKey,appName:t.name,v:mc},s=Oj.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Vh(r).slice(1)}`}async function Lj(t){const e=await Nj(t),n=Di().gapi;return ke(n,t,"internal-error"),e.open({where:document.body,url:Vj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pj,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const c=Ni(t,"network-request-failed"),u=Di().setTimeout(()=>{a(c)},Dj.get());function d(){Di().clearTimeout(u),s(r)}r.ping(d).then(d,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zj=500,jj=600,Bj="_blank",Hj="http://localhost";class CS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Fj(t,e,n,r=zj,s=jj){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d=Object.assign(Object.assign({},Uj),{width:r.toString(),height:s.toString(),top:a,left:c}),f=kn().toLowerCase();n&&(u=qI(f)?Bj:n),FI(f)&&(e=e||Hj,d.scrollbars="yes");const p=Object.entries(d).reduce((_,[b,T])=>`${_}${b}=${T},`,"");if(u8(f)&&u!=="_self")return $j(e||"",u),new CS(null);const v=window.open(e||"",u,p);ke(v,t,"popup-blocked");try{v.focus()}catch{}return new CS(v)}function $j(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj="__/auth/handler",Gj="emulator/auth/handler",Yj=encodeURIComponent("fac");async function RS(t,e,n,r,s,a){ke(t.config.authDomain,t,"auth-domain-config-required"),ke(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:mc,eventId:s};if(e instanceof tN){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",F6(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,v]of Object.entries({}))c[p]=v}if(e instanceof qh){const p=e.getScopes().filter(v=>v!=="");p.length>0&&(c.scopes=p.join(","))}t.tenantId&&(c.tid=t.tenantId);const u=c;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const d=await t._getAppCheckToken(),f=d?`#${Yj}=${encodeURIComponent(d)}`:"";return`${Kj(t)}?${Vh(u).slice(1)}${f}`}function Kj({config:t}){return t.emulator?j_(t,Gj):`https://${t.authDomain}/${qj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="webStorageSupport";class Xj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lN,this._completeRedirectFn=_j,this._overrideRedirectResult=gj}async _openPopup(e,n,r,s){var a;_s((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await RS(e,n,r,nv(),s);return Fj(e,c,q_())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await RS(e,n,r,nv(),s);return Z8(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(_s(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Lj(e),r=new bj(e);return n.register("authEvent",s=>(ke(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Wy,{type:Wy},s=>{var a;const c=(a=s?.[0])===null||a===void 0?void 0:a[Wy];c!==void 0&&n(!!c),ti(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Aj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return QI()||$I()||H_()}}const Qj=Xj;var IS="@firebase/auth",NS="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Jj(t){Sa(new yo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;ke(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:c,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WI(t)},f=new g8(r,s,a,d);return A8(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Sa(new yo("auth-internal",e=>{const n=Oa(e.getProvider("auth").getImmediate());return(r=>new Wj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ci(IS,NS,Zj(t)),Ci(IS,NS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eB=5*60,tB=QC("authIdTokenMaxAge")||eB;let DS=null;const nB=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>tB)return;const s=n?.token;DS!==s&&(DS=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function rB(t=Zv()){const e=Gm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=S8(t,{popupRedirectResolver:Qj,persistence:[aj,X8,lN]}),r=QC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=nB(a.toString());$8(n,c,()=>c(n.currentUser)),F8(n,u=>c(u))}}const s=YC("auth");return s&&C8(n,`http://${s}`),n}function iB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}y8({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=Ni("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",iB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Jj("Browser");const sB={apiKey:"AIzaSyAO9TXM7A0SNeiEXzYo27fW0wdTXqXDEyc",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},Y_=JC(sB),ni=x7(Y_),K_=rB(Y_),oB=E9(Y_,"us-central1"),pN={1:"Hero image with bold title and minimal supporting visuals - perfect for impactful concepts",2:"Visual story grid - large images with short captions for step-by-step processes",3:"Interactive flowchart diagram - visual process mapping with minimal text",4:"Mind map visualization - central concept with visual branches",5:"Data visualization - pie chart with key statistics prominently displayed",6:"Quadrant matrix - visual categorization with icons and brief labels",7:"Hero infographic - dominant image with key facts overlay",8:"Visual comparison - main concept image with supporting evidence thumbnails",9:"Video showcase - large embedded video with minimal caption",12:"Icon-driven list - animated visual with key points as icons and brief text",13:"Media spotlight - video content with visual title treatment",14:"Visual narrative - alternating large images with concise explanations",15:"Timeline infographic - visual chronology with dates, images, and brief descriptions",16:"Card mosaic - visual grid showcasing multiple concepts with icons and minimal text"},aB={1:'["impactful_title", "concise_tagline", ["hero_image_prompt", "supporting_visual_1", "supporting_visual_2"]]',2:'[["large_step_image_1", "brief_caption_1"], ["large_step_image_2", "brief_caption_2"], ["large_step_image_3", "brief_caption_3"]]',3:[`flowchart TD
    A[concept] -->|action| B(result)
    B --> C{decision}
    C -->|yes| D[outcome_1]
    C -->|no| E[outcome_2]
    C -->|maybe| F[fa:fa-star Special]`,"brief_visual_explanation"],4:[`mindmap
  root((Central Concept))
    Visual_Branch
      Key_Point_1
      Key_Point_2
    Impact_Branch
      Effect_1
      Effect_2`,"minimal_context_explanation"],5:[`pie
    title Key Statistics
    "Primary Factor" : 60
    "Secondary Factor" : 25
    "Other Factors" : 15`,"data_insight_summary"],6:[`quadrantChart
    title Decision Matrix
    x-axis Low Impact --> High Impact
    y-axis Low Effort --> High Effort
    quadrant-1 Quick Wins
    quadrant-2 Major Projects
    quadrant-3 Fill-ins
    quadrant-4 Thankless Tasks
    "Option A": [0.3, 0.7]
    "Option B": [0.8, 0.4]
    "Option C": [0.2, 0.2]`,"strategic_overview"],7:"[hero_image_prompt, bold_title, key_fact_1, key_fact_2, key_fact_3]",8:"[main_concept_image, visual_title, [evidence_thumbnail_1, evidence_thumbnail_2, evidence_thumbnail_3]]",9:"[compelling_video_prompt, impactful_caption]",12:"[central_illustration_prompt, [icon_point_1, icon_point_2, icon_point_3, icon_point_4]]",13:"[visual_section_title, brief_overview, engaging_video_prompt]",14:"[striking_image_1, concise_explanation_1, striking_image_2, concise_explanation_2, striking_image_3, concise_explanation_3]",15:"[milestone_date_1, milestone_image_1, brief_event_1, milestone_date_2, milestone_image_2, brief_event_2]",16:"[concept_title_1, concept_icon_1, brief_description_1, concept_title_2, concept_icon_2, brief_description_2]"},lB=Object.freeze(Object.defineProperty({__proto__:null,LAYOUT_SCHEMA:aB,LAYOUT_TYPES:pN},Symbol.toStringTag,{value:"Module"})),cB=(t,e,n,r)=>`You are an expert infographic designer and educator who creates visually compelling, concise content.
    Return ONLY a valid array. Do not include markdown formatting, code blocks, or any text before or after the array.
        
        CRITICAL INFOGRAPHIC RULES:
         VISUAL FIRST: Focus on creating compelling image prompts that tell the story
         CONCISE TEXT: Keep all text elements brief, punchy, and easy to scan (max 10-15 words per text element)
         STORYTELLING: Use visuals to guide the narrative flow
         IMPACT: Every element should have visual impact - bold, clear, memorable
         CLARITY: Prioritize immediate understanding over comprehensive detail
        
        TEXT GUIDELINES:
         Titles: Bold, attention-grabbing (3-5 words max)
         Descriptions: Key insights only (1-2 sentences max)
         Captions: Essential context only (5-8 words max)
         Facts: Bullet-worthy, memorable statements
        
        IMAGE PROMPTS:
         Be specific and visual: "Glowing neural network connections" not "brain thinking"
         Include style hints: "minimalist", "vibrant", "clean illustration", "photorealistic"
         Focus on the concept's essence visually
        
        OUTPUT FORMAT:
        Return ONLY a valid array based on the SCHEMA. Follow the exact structure.
        NO markdown code blocks, NO extra text.
        RETURN AN ARRAY [] - NOT AN OBJECT!

        CONCEPT: ${e}
        SCHEMA: ${r}`,uB=(t,e)=>{const n=(r,s)=>`Respond ONLY with a valid JSON array like ["topic1", "topic2"].
        Instructions:
        - Suggest exactly ${r}-${s} logical next topics.
        - Each topic <4 words, doublequoted.
        - No explanation or extra text.
  
    Concept: ${t}`;switch(e){case"explain":return n(4,5);case"argue":return n(3,5);case"answer":return n(2,3);default:return n(3,5)}},hB=(t,e)=>`RETURN ONLY THE FA ICON CORRESPONDING TO THE CONCEPT: "${t}". EXAMPLE: <i class="fas fa-check"></i>`,dB=(t,e)=>`Choose the most VISUALLY IMPACTFUL layout for "${t}" - prioritize visual storytelling over text.
        
        SELECTION CRITERIA:
         Visual Impact: Which layout will create the strongest visual impression?
         Concept Clarity: Which format best communicates the core idea through visuals?
         Engagement: Which layout will grab attention and maintain interest?
         Infographic Style: Choose layouts that work like professional infographics
        
        LAYOUT PRIORITIES:
         Use diagrams (3-6) ONLY for processes, relationships, or data visualization
         Use hero layouts (1, 7, 8) for broad concepts needing strong visual anchor
         Use story layouts (2, 14, 15) for sequential or comparative concepts
         Use card layouts (16) for multiple related concepts
         Use media layouts (9, 12, 13) for dynamic or demonstrable concepts
        
        Return ONLY the layout number as an integer.
        
        LAYOUT TYPES:
        ${JSON.stringify(pN)}`,gN=t=>{let e=t.replace(/```json\s*\n?/gi,"").replace(/```\s*$/gi,"");e=e.trim();const n=e.match(/\[[\s\S]*\]|\{[\s\S]*\}/);return n&&(e=n[0]),e},mp=async t=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const e=t.trim();if(!e)throw new Error("Message cannot be empty or just whitespace");const r=await w9(oB,"groqChat")({message:e});return console.log("groqChat response:",r.data),r.data.response}catch(e){throw console.error("Firebase function error:",e),console.error("Message sent:",t),e}},fB=async t=>{try{const e=await mp(uB(t,"default"));console.log("Suggestions response:",e);const n=gN(e),r=JSON.parse(n);return Array.isArray(r)?r:[]}catch(e){return console.error("Error fetching suggestions:",e),[]}},mB=async t=>{try{const e=await mp(hB(t,"default"));return console.log("Icon response:",e),e||""}catch(e){return console.error("Error fetching icon:",e),""}},pB=async t=>{try{const e=await mp(dB(t,"default"));console.log("Layout response:",e);const n=e.replace(/[^\d]/g,""),r=parseInt(n);return isNaN(r)||r<1||r>16?(console.warn(`Invalid layout number: ${r}, defaulting to 1`),1):r}catch(e){return console.error("Error fetching layout:",e),1}},gB=async(t,e,n,r)=>{try{const a=(await FC(()=>Promise.resolve().then(()=>lB),void 0)).LAYOUT_SCHEMA[n.toString()],c=Array.isArray(a)?JSON.stringify(a):a,u=await mp(cB(e,t,r,c));console.log("Content response:",u);const d=gN(u),f=JSON.parse(d);return Array.isArray(f)?f:[]}catch(s){return console.error("Error fetching content:",s),[]}},yB=async(t,e="",n="default")=>{try{const r=await pB(t);console.log("Selected layout:",r);const[s,a,c]=await Promise.all([gB(t,e,r,n),fB(t),mB(t)]);return console.log("Generated content:",s),console.log("Generated suggestions:",a),console.log("Generated icon:",c),{layout:r,content:s,suggestions:a,icon:c,title:t,fullText:t}}catch(r){return console.error("Error in generateNodeContent:",r),{layout:1,content:[t,"Content loading failed",[]],suggestions:[],icon:"",title:t,fullText:t}}},vB="AIzaSyD2LVnTgBbk-5Wo1V2sCmY9ebcmIPdS1ng",_B="93fe2cec9d77f4202",EB="https://www.googleapis.com/customsearch/v1",bB="AIzaSyDxTJKoi1S8YjJZD12QTa4F9hV8fN8pNqo",wB="https://www.googleapis.com/youtube/v3/search",ku=new Map,Mu=new Map,Es=async t=>{if(ku.has(t))return ku.get(t);try{const e=encodeURIComponent(t),n=`${EB}?key=${vB}&cx=${_B}&q=${e}&searchType=image&num=1&safe=active`,r=await fetch(n);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.items&&s.items.length>0){const c=s.items[0],u=c.link||c.pagemap?.cse_image?.[0]?.src;if(u)return ku.set(t,u),u}const a=`https://via.placeholder.com/640x360/e5e7eb/6b7280?text=${e}`;return ku.set(t,a),a}catch(e){console.error("Error fetching Google image:",e);const n="https://via.placeholder.com/640x360/ef4444/ffffff?text=Image+Error";return ku.set(t,n),n}},yN=async t=>{if(Mu.has(t))return Mu.get(t);try{const e=encodeURIComponent(t),n=`${wB}?key=${bB}&q=${e}&part=snippet&type=video&maxResults=1&videoEmbeddable=true&safeSearch=strict`,r=await fetch(n);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.items&&s.items.length>0){const c=s.items[0].id.videoId;if(c)return Mu.set(t,c),c}const a="dQw4w9WgXcQ";return Mu.set(t,a),a}catch(e){console.error("Error fetching YouTube video:",e);const n="dQw4w9WgXcQ";return Mu.set(t,n),n}},vN=t=>`https://www.youtube.com/embed/${t}`;async function pp(t){const n=(await FC(()=>import("./mermaid.core-CWmwJDFR.js").then(a=>a.bo),[])).default??window.mermaid?.mermaidAPI;window.___mermaidInitialised||(n.initialize({startOnLoad:!1,theme:"default",securityLevel:"loose",fontFamily:"inherit"}),window.___mermaidInitialised=!0);let r;try{r=(await n.render("m_"+Math.random().toString(36).slice(2),t.trim())).svg}catch(a){throw a}return new DOMParser().parseFromString(r,"image/svg+xml").documentElement}const xB=async(t,e,n)=>{let r="";try{switch(t){case 1:r=await kS(e,n);break;case 2:r=await TB(e,n);break;case 3:r=await SB(e,n);break;case 4:r=await AB(e,n);break;case 5:r=await CB(e,n);break;case 6:r=await RB(e,n);break;case 7:r=await IB(e,n);break;case 8:r=await NB(e,n);break;case 9:r=await DB(e,n);break;case 12:r=await kB(e,n);break;case 13:r=await MB(e,n);break;case 14:r=await PB(e,n);break;case 15:r=await OB(e,n);break;case 16:r=await VB(e,n);break;default:r=await kS(e,n)}}catch(s){console.error("Error parsing layout content:",s),r='<div class="error-content">Error loading content</div>'}return{html:r}};async function kS(t,e){const[n,r,s]=t;let a=`
        <div class="layout-1">
            <h2 class="layout-title">${n||"Title"}</h2>
            <div class="layout-textbar">${r||"Content"}</div>
            <div class="layout-images">
    `;return Array.isArray(s)&&(await Promise.all(s.map(u=>Es(u).catch(()=>null)))).forEach((u,d)=>{u?a+=`<img class="layout-small-image" src="${u}" alt="Image ${d+1}" />`:a+=`<div class="image-error">Error loading image ${d+1}</div>`}),a+=`
            </div>
        </div>
    `,a}async function TB(t,e){let n='<div class="layout-2">',r=[];if(t.length>0&&Array.isArray(t[0]))r=t.filter(c=>Array.isArray(c)&&c.length>=2);else for(let c=0;c<t.length;c+=2)c+1<t.length&&r.push([t[c],t[c+1]]);const s=r.map(async([c,u])=>{try{return{url:await Es(c),caption:u}}catch{return{url:null,caption:u}}});return(await Promise.all(s)).forEach(({url:c,caption:u},d)=>{c?n+=`
                <div class="layout-image-caption">
                    <img class="layout-image" src="${c}" alt="Image ${d+1}" />
                    <p class="layout-caption">${u}</p>
                </div>
            `:n+=`
                <div class="layout-image-caption">
                    <div class="image-error">Error loading image ${d+1}</div>
                    <p class="layout-caption">${u}</p>
                </div>
            `}),n+="</div>",n}async function SB(t,e){const[n,r]=t;let a=`
        <div class="layout-3">
            <div id="${`mermaid-${e}`}" class="layout-mermaid">Loading diagram...</div>
            <p class="layout-description">${r||""}</p>
        </div>
    `;try{const c=await pp(n);a=a.replace("Loading diagram...",c.outerHTML)}catch{a=a.replace("Loading diagram...",'<div class="mermaid-error">Error loading diagram</div>')}return a}async function AB(t,e){const[n,r]=t;let a=`
        <div class="layout-4">
            <div id="${`mermaid-${e}`}" class="layout-mermaid">Loading mindmap...</div>
            <p class="layout-description">${r||""}</p>
        </div>
    `;try{const c=await pp(n);a=a.replace("Loading mindmap...",c.outerHTML)}catch{a=a.replace("Loading mindmap...",'<div class="mermaid-error">Error loading mindmap</div>')}return a}async function CB(t,e){const[n,r]=t;let a=`
        <div class="layout-5">
            <div id="${`mermaid-${e}`}" class="layout-mermaid">Loading piechart...</div>
            <p class="layout-description">${r||""}</p>
        </div>
    `;try{const c=await pp(n);a=a.replace("Loading piechart...",c.outerHTML)}catch{a=a.replace("Loading piechart...",'<div class="mermaid-error">Error loading piechart</div>')}return a}async function RB(t,e){const[n,r]=t;let a=`
        <div class="layout-6">
            <div id="${`mermaid-${e}`}" class="layout-mermaid">Loading quadrant chart...</div>
            <p class="layout-description">${r||""}</p>
        </div>
    `;try{const c=await pp(n);a=a.replace("Loading quadrant chart...",c.outerHTML)}catch{a=a.replace("Loading quadrant chart...",'<div class="mermaid-error">Error loading quadrant chart</div>')}return a}async function IB(t,e){const[n,r,s,a,c]=t,u=`img-${e}`;try{const d=await Es(n);return`
            <div class="layout-7">
                <div class="layout-hero-container">
                    <img id="${u}" class="layout-hero-image" src="${d}" alt="Hero Image" />
                    <div class="layout-hero-overlay">
                        <h2 class="layout-hero-title">${r||"Title"}</h2>
                        <div class="layout-key-facts">
                            ${s?`<div class="layout-fact-item">${s}</div>`:""}
                            ${a?`<div class="layout-fact-item">${a}</div>`:""}
                            ${c?`<div class="layout-fact-item">${c}</div>`:""}
                        </div>
                    </div>
                </div>
            </div>
        `}catch{return`
            <div class="layout-7">
                <div class="layout-hero-container">
                    <div class="image-error">Error loading hero image</div>
                    <div class="layout-hero-overlay">
                        <h2 class="layout-hero-title">${r||"Title"}</h2>
                        <div class="layout-key-facts">
                            ${s?`<div class="layout-fact-item">${s}</div>`:""}
                            ${a?`<div class="layout-fact-item">${a}</div>`:""}
                            ${c?`<div class="layout-fact-item">${c}</div>`:""}
                        </div>
                    </div>
                </div>
            </div>
        `}}async function NB(t,e){const[n,r,s]=t,a=`img-main-${e}`;try{const c=await Es(n);let u=`
            <div class="layout-8">
                <div class="layout-left">
                    <h2 class="layout-title">${r||"Title"}</h2>
                    <div class="layout-small-images">
        `;return Array.isArray(s)&&(await Promise.all(s.map(f=>Es(f).catch(()=>null)))).forEach((f,p)=>{f?u+=`<img class="layout-small-image" src="${f}" alt="Small Image ${p+1}" />`:u+=`<div class="image-error">Error loading image ${p+1}</div>`}),u+=`
                    </div>
                </div>
                <div class="layout-right">
                    <img id="${a}" class="layout-large-image" src="${c}" alt="Main Image" />
                </div>
            </div>
        `,u}catch{return`
            <div class="layout-8">
                <div class="layout-left">
                    <h2 class="layout-title">${r||"Title"}</h2>
                    <div class="layout-small-images">
                        <div class="image-error">Error loading images</div>
                    </div>
                </div>
                <div class="layout-right">
                    <div class="image-error">Error loading main image</div>
                </div>
            </div>
        `}}async function DB(t,e){const[n,r]=t,s=`video-${e}`;try{const a=await yN(n),c=vN(a);return`
            <div class="layout-9">
                <div id="${s}" class="layout-video">
                    <iframe src="${c}" frameborder="0" allowfullscreen></iframe>
                </div>
                <p class="layout-caption">${r||""}</p>
            </div>
        `}catch{return`
            <div class="layout-9">
                <div id="${s}" class="layout-video">
                    <div class="video-error">Error loading video</div>
                </div>
                <p class="layout-caption">${r||""}</p>
            </div>
        `}}async function kB(t,e){const[n,r]=t,s=`illustration-${e}`;try{const a=await Es(n);let c=`
            <div class="layout-12">
                <div class="layout-central-visual">
                    <img id="${s}" class="layout-central-image" src="${a}" alt="Central Illustration" />
                </div>
                <div class="layout-icon-points">
        `;return Array.isArray(r)&&r.forEach((u,d)=>{const f=u.match(new RegExp("^(\\p{Emoji}|\\p{Symbol})\\s+(.+)$","u")),p=f?f[1]:"",v=f?f[2]:u;c+=`
                    <div class="layout-icon-point">
                        <span class="layout-point-icon">${p}</span>
                        <span class="layout-point-text">${v}</span>
                    </div>
                `}),c+=`
                </div>
            </div>
        `,c}catch{let c=`
            <div class="layout-12">
                <div class="layout-central-visual">
                    <div class="image-error">Error loading illustration</div>
                </div>
                <div class="layout-icon-points">
        `;return Array.isArray(r)&&r.forEach((u,d)=>{const f=u.match(new RegExp("^(\\p{Emoji}|\\p{Symbol})\\s+(.+)$","u")),p=f?f[1]:"",v=f?f[2]:u;c+=`
                    <div class="layout-icon-point">
                        <span class="layout-point-icon">${p}</span>
                        <span class="layout-point-text">${v}</span>
                    </div>
                `}),c+=`
                </div>
            </div>
        `,c}}async function MB(t,e){const[n,r,s]=t,a=`video-${e}`;try{const c=await yN(s),u=vN(c);return`
            <div class="layout-13">
                <div class="layout-left">
                    <h2 class="layout-title">${n||"Title"}</h2>
                    <p class="layout-text">${r||""}</p>
                </div>
                <div class="layout-right">
                    <div id="${a}" class="layout-video">
                        <iframe src="${u}" frameborder="0" allowfullscreen></iframe>
                    </div>
                </div>
            </div>
        `}catch{return`
            <div class="layout-13">
                <div class="layout-left">
                    <h2 class="layout-title">${n||"Title"}</h2>
                    <p class="layout-text">${r||""}</p>
                </div>
                <div class="layout-right">
                    <div id="${a}" class="layout-video">
                        <div class="video-error">Error loading video</div>
                    </div>
                </div>
            </div>
        `}}async function PB(t,e){let n='<div class="layout-14">';for(let r=0;r<t.length;r+=2){const s=t[r],a=t[r+1];if(s&&a){const c=r/2,u=c%2===0;try{const d=await Es(s);n+=`
                    <div class="layout-section ${u?"layout-section-normal":"layout-section-reverse"}">
                        <div class="layout-section-image">
                            <img class="layout-large-image" src="${d}" alt="Section ${c+1}" />
                        </div>
                        <div class="layout-section-content">
                            <p class="layout-text">${a}</p>
                        </div>
                    </div>
                `}catch{n+=`
                    <div class="layout-section ${u?"layout-section-normal":"layout-section-reverse"}">
                        <div class="layout-section-image">
                            <div class="image-error">Error loading image</div>
                        </div>
                        <div class="layout-section-content">
                            <p class="layout-text">${a}</p>
                        </div>
                    </div>
                `}}}return n+="</div>",n}async function OB(t,e){let n='<div class="layout-15">';for(let r=0;r<t.length;r+=3){const s=t[r],a=t[r+1],c=t[r+2];if(s&&a&&c)try{const u=await Es(a);n+=`
                    <div class="layout-timeline-item">
                        <div class="layout-timeline-date">${s}</div>
                        <img class="layout-timeline-image" src="${u}" alt="Timeline event" />
                        <div class="layout-timeline-content">
                            <p class="layout-timeline-text">${c}</p>
                        </div>
                    </div>
                `}catch{n+=`
                    <div class="layout-timeline-item">
                        <div class="layout-timeline-date">${s}</div>
                        <div class="image-error">Error loading image</div>
                        <div class="layout-timeline-content">
                            <p class="layout-timeline-text">${c}</p>
                        </div>
                    </div>
                `}}return n+="</div>",n}async function VB(t,e){let n='<div class="layout-16">';for(let r=0;r<t.length;r+=3){const s=t[r],a=t[r+1],c=t[r+2];if(s&&a&&c)try{const u=await Es(a);n+=`
                    <div class="layout-card">
                        <h3 class="layout-card-title">${s}</h3>
                        <img class="layout-card-image" src="${u}" alt="${s}" />
                        <p class="layout-card-description">${c}</p>
                    </div>
                `}catch{n+=`
                    <div class="layout-card">
                        <h3 class="layout-card-title">${s}</h3>
                        <div class="image-error">Error loading image</div>
                        <p class="layout-card-description">${c}</p>
                    </div>
                `}}return n+="</div>",n}const _N=O.createContext(null),EN=(t,e,n,r,s,a,c,u,d,f,p,v,_,b)=>{console.log(1);const T=s.find(L=>L.id===e);if(!T)return null;console.log(2);const R=T.data.tokenColors||{};if(console.log(3),!v){const L=t.myConcept||t.word;if(R[L])return console.log(`Token "${L}" is already colored, ignoring click`),null}console.log(4);let I;r==="staticEditable"?I=Qx():I=d?h6(d):Qx();let N=null;if(v)N=_;else{const L={...R};t.myConcept?L[t.myConcept]=I:L[t.word]=I,a(G=>G.map(K=>K.id===e?{...K,data:{...K.data,tokenColors:L}}:K));const $=d6(n);N=p6($,t.myConcept||t.word,"Loading...","",I,r,e);const H=g6(e,N.id,I,p);c([{type:"add",item:N}]),u([{type:"add",item:H}])}return N&&(N.data.isLoading=!0,N.data.previousNode=e),v&&a(L=>L.map($=>$.id===N?.id?{...$,data:{...N.data}}:$)),yB(t.myConcept||t.word,f||"",b||"default").then(async L=>{console.log("AI Response received:",L),console.log("Selected layout:",L.layout),console.log("Content array:",L.content);const{html:$}=await xB(L.layout,L.content,N?.id||"");console.log("Layout HTML generated (first 500 chars):",$.substring(0,500)),console.log("Layout HTML full length:",$.length),a(H=>H.map(G=>{if(G.id===N?.id){const K={...G,data:{...G.data,title:L.title,full_text:L.fullText,suggestions:L.suggestions,layout:L.layout,contents:[$],isLoading:!1,icon:L.icon}};return console.log("Updated node data:",K.data),K}return G}))}).catch(L=>{console.error("Error generating node content:",L),a($=>$.map(H=>H.id===N?.id?{...H,data:{...H.data,title:t.word,full_text:t.word,suggestions:[],layout:1,contents:[`<div class="error-content">Failed to load content for "${t.word}"</div>`],isLoading:!1,icon:""}}:H))}),I},LB=({children:t,nodes:e,onNodesChange:n,onEdgesChange:r,setNodes:s})=>{const a=(c,u,d,f,p,v,_,b,T,R)=>EN(c,u,d,f,e,s,n,r,p,v,_,b,T,R);return C.jsx(_N.Provider,{value:{handleTokenClick:a,setNodes:s},children:t})},bN=()=>{const t=O.useContext(_N);if(!t)throw new Error("useTokenInteraction must be used within a TokenInteractionProvider");return t};function UB({title:t,titleId:e,...n},r){return O.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?O.createElement("title",{id:e},t):null,O.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const zB=O.forwardRef(UB);function jB({title:t,titleId:e,...n},r){return O.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?O.createElement("title",{id:e},t):null,O.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const BB=O.forwardRef(jB);function HB({title:t,titleId:e,...n},r){return O.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?O.createElement("title",{id:e},t):null,O.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const FB=O.forwardRef(HB);function $B({title:t,titleId:e,...n},r){return O.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?O.createElement("title",{id:e},t):null,O.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const qB=O.forwardRef($B);function GB({title:t,titleId:e,...n},r){return O.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?O.createElement("title",{id:e},t):null,O.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),O.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const YB=O.forwardRef(GB);function KB({title:t,titleId:e,...n},r){return O.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?O.createElement("title",{id:e},t):null,O.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const XB=O.forwardRef(KB);function QB({title:t,titleId:e,...n},r){return O.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?O.createElement("title",{id:e},t):null,O.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const WB=O.forwardRef(QB),X_=O.createContext({});function Q_(t){const e=O.useRef(null);return e.current===null&&(e.current=t()),e.current}const W_=typeof window<"u",wN=W_?O.useLayoutEffect:O.useEffect,gp=O.createContext(null);function Z_(t,e){t.indexOf(e)===-1&&t.push(e)}function J_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const bs=(t,e,n)=>n>e?e:n<t?t:n;let eE=()=>{};const ws={},xN=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function TN(t){return typeof t=="object"&&t!==null}const SN=t=>/^0[^.\s]+$/u.test(t);function tE(t){let e;return()=>(e===void 0&&(e=t()),e)}const jr=t=>t,ZB=(t,e)=>n=>e(t(n)),Yh=(...t)=>t.reduce(ZB),xh=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class nE{constructor(){this.subscriptions=[]}add(e){return Z_(this.subscriptions,e),()=>J_(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let a=0;a<s;a++){const c=this.subscriptions[a];c&&c(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ki=t=>t*1e3,Mi=t=>t/1e3;function AN(t,e){return e?t*(1e3/e):0}const CN=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,JB=1e-7,eH=12;function tH(t,e,n,r,s){let a,c,u=0;do c=e+(n-e)/2,a=CN(c,r,s)-t,a>0?n=c:e=c;while(Math.abs(a)>JB&&++u<eH);return c}function Kh(t,e,n,r){if(t===e&&n===r)return jr;const s=a=>tH(a,0,1,t,n);return a=>a===0||a===1?a:CN(s(a),e,r)}const RN=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,IN=t=>e=>1-t(1-e),NN=Kh(.33,1.53,.69,.99),rE=IN(NN),DN=RN(rE),kN=t=>(t*=2)<1?.5*rE(t):.5*(2-Math.pow(2,-10*(t-1))),iE=t=>1-Math.sin(Math.acos(t)),MN=IN(iE),PN=RN(iE),nH=Kh(.42,0,1,1),rH=Kh(0,0,.58,1),ON=Kh(.42,0,.58,1),iH=t=>Array.isArray(t)&&typeof t[0]!="number",VN=t=>Array.isArray(t)&&typeof t[0]=="number",sH={linear:jr,easeIn:nH,easeInOut:ON,easeOut:rH,circIn:iE,circInOut:PN,circOut:MN,backIn:rE,backInOut:DN,backOut:NN,anticipate:kN},oH=t=>typeof t=="string",MS=t=>{if(VN(t)){eE(t.length===4);const[e,n,r,s]=t;return Kh(e,n,r,s)}else if(oH(t))return sH[t];return t},Nf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function aH(t,e){let n=new Set,r=new Set,s=!1,a=!1;const c=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function d(p){c.has(p)&&(f.schedule(p),t()),p(u)}const f={schedule:(p,v=!1,_=!1)=>{const T=_&&s?n:r;return v&&c.add(p),T.has(p)||T.add(p),p},cancel:p=>{r.delete(p),c.delete(p)},process:p=>{if(u=p,s){a=!0;return}s=!0,[n,r]=[r,n],n.forEach(d),n.clear(),s=!1,a&&(a=!1,f.process(p))}};return f}const lH=40;function LN(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,c=Nf.reduce(($,H)=>($[H]=aH(a),$),{}),{setup:u,read:d,resolveKeyframes:f,preUpdate:p,update:v,preRender:_,render:b,postRender:T}=c,R=()=>{const $=ws.useManualTiming?s.timestamp:performance.now();n=!1,ws.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min($-s.timestamp,lH),1)),s.timestamp=$,s.isProcessing=!0,u.process(s),d.process(s),f.process(s),p.process(s),v.process(s),_.process(s),b.process(s),T.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(R))},I=()=>{n=!0,r=!0,s.isProcessing||t(R)};return{schedule:Nf.reduce(($,H)=>{const G=c[H];return $[H]=(K,k=!1,S=!1)=>(n||I(),G.schedule(K,k,S)),$},{}),cancel:$=>{for(let H=0;H<Nf.length;H++)c[Nf[H]].cancel($)},state:s,steps:c}}const{schedule:wt,cancel:To,state:En,steps:Zy}=LN(typeof requestAnimationFrame<"u"?requestAnimationFrame:jr,!0);let Xf;function cH(){Xf=void 0}const Zn={now:()=>(Xf===void 0&&Zn.set(En.isProcessing||ws.useManualTiming?En.timestamp:performance.now()),Xf),set:t=>{Xf=t,queueMicrotask(cH)}},UN=t=>e=>typeof e=="string"&&e.startsWith(t),sE=UN("--"),uH=UN("var(--"),oE=t=>uH(t)?hH.test(t.split("/*")[0].trim()):!1,hH=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,wc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Th={...wc,transform:t=>bs(0,1,t)},Df={...wc,default:1},Zu=t=>Math.round(t*1e5)/1e5,aE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function dH(t){return t==null}const fH=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,lE=(t,e)=>n=>!!(typeof n=="string"&&fH.test(n)&&n.startsWith(t)||e&&!dH(n)&&Object.prototype.hasOwnProperty.call(n,e)),zN=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,a,c,u]=r.match(aE);return{[t]:parseFloat(s),[e]:parseFloat(a),[n]:parseFloat(c),alpha:u!==void 0?parseFloat(u):1}},mH=t=>bs(0,255,t),Jy={...wc,transform:t=>Math.round(mH(t))},pa={test:lE("rgb","red"),parse:zN("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Jy.transform(t)+", "+Jy.transform(e)+", "+Jy.transform(n)+", "+Zu(Th.transform(r))+")"};function pH(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const ov={test:lE("#"),parse:pH,transform:pa.transform},Xh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ws=Xh("deg"),Pi=Xh("%"),Oe=Xh("px"),gH=Xh("vh"),yH=Xh("vw"),PS={...Pi,parse:t=>Pi.parse(t)/100,transform:t=>Pi.transform(t*100)},jl={test:lE("hsl","hue"),parse:zN("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Pi.transform(Zu(e))+", "+Pi.transform(Zu(n))+", "+Zu(Th.transform(r))+")"},Xt={test:t=>pa.test(t)||ov.test(t)||jl.test(t),parse:t=>pa.test(t)?pa.parse(t):jl.test(t)?jl.parse(t):ov.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?pa.transform(t):jl.transform(t),getAnimatableNone:t=>{const e=Xt.parse(t);return e.alpha=0,Xt.transform(e)}},vH=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function _H(t){return isNaN(t)&&typeof t=="string"&&(t.match(aE)?.length||0)+(t.match(vH)?.length||0)>0}const jN="number",BN="color",EH="var",bH="var(",OS="${}",wH=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Sh(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const u=e.replace(wH,d=>(Xt.test(d)?(r.color.push(a),s.push(BN),n.push(Xt.parse(d))):d.startsWith(bH)?(r.var.push(a),s.push(EH),n.push(d)):(r.number.push(a),s.push(jN),n.push(parseFloat(d))),++a,OS)).split(OS);return{values:n,split:u,indexes:r,types:s}}function HN(t){return Sh(t).values}function FN(t){const{split:e,types:n}=Sh(t),r=e.length;return s=>{let a="";for(let c=0;c<r;c++)if(a+=e[c],s[c]!==void 0){const u=n[c];u===jN?a+=Zu(s[c]):u===BN?a+=Xt.transform(s[c]):a+=s[c]}return a}}const xH=t=>typeof t=="number"?0:Xt.test(t)?Xt.getAnimatableNone(t):t;function TH(t){const e=HN(t);return FN(t)(e.map(xH))}const So={test:_H,parse:HN,createTransformer:FN,getAnimatableNone:TH};function e0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function SH({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,a=0,c=0;if(!e)s=a=c=n;else{const u=n<.5?n*(1+e):n+e-n*e,d=2*n-u;s=e0(d,u,t+1/3),a=e0(d,u,t),c=e0(d,u,t-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(c*255),alpha:r}}function Nm(t,e){return n=>n>0?e:t}const At=(t,e,n)=>t+(e-t)*n,t0=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},AH=[ov,pa,jl],CH=t=>AH.find(e=>e.test(t));function VS(t){const e=CH(t);if(!e)return!1;let n=e.parse(t);return e===jl&&(n=SH(n)),n}const LS=(t,e)=>{const n=VS(t),r=VS(e);if(!n||!r)return Nm(t,e);const s={...n};return a=>(s.red=t0(n.red,r.red,a),s.green=t0(n.green,r.green,a),s.blue=t0(n.blue,r.blue,a),s.alpha=At(n.alpha,r.alpha,a),pa.transform(s))},av=new Set(["none","hidden"]);function RH(t,e){return av.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function IH(t,e){return n=>At(t,e,n)}function cE(t){return typeof t=="number"?IH:typeof t=="string"?oE(t)?Nm:Xt.test(t)?LS:kH:Array.isArray(t)?$N:typeof t=="object"?Xt.test(t)?LS:NH:Nm}function $N(t,e){const n=[...t],r=n.length,s=t.map((a,c)=>cE(a)(a,e[c]));return a=>{for(let c=0;c<r;c++)n[c]=s[c](a);return n}}function NH(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=cE(t[s])(t[s],e[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function DH(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],c=t.indexes[a][r[a]],u=t.values[c]??0;n[s]=u,r[a]++}return n}const kH=(t,e)=>{const n=So.createTransformer(e),r=Sh(t),s=Sh(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?av.has(t)&&!s.values.length||av.has(e)&&!r.values.length?RH(t,e):Yh($N(DH(r,s),s.values),n):Nm(t,e)};function qN(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?At(t,e,n):cE(t)(t,e)}const MH=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>wt.update(e,n),stop:()=>To(e),now:()=>En.isProcessing?En.timestamp:Zn.now()}},GN=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let a=0;a<s;a++)r+=Math.round(t(a/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Dm=2e4;function uE(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Dm;)e+=n,r=t.next(e);return e>=Dm?1/0:e}function PH(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(uE(r),Dm);return{type:"keyframes",ease:a=>r.next(s*a).value/e,duration:Mi(s)}}const OH=5;function YN(t,e,n){const r=Math.max(e-OH,0);return AN(n-t(r),e-r)}const Mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},n0=.001;function VH({duration:t=Mt.duration,bounce:e=Mt.bounce,velocity:n=Mt.velocity,mass:r=Mt.mass}){let s,a,c=1-e;c=bs(Mt.minDamping,Mt.maxDamping,c),t=bs(Mt.minDuration,Mt.maxDuration,Mi(t)),c<1?(s=f=>{const p=f*c,v=p*t,_=p-n,b=lv(f,c),T=Math.exp(-v);return n0-_/b*T},a=f=>{const v=f*c*t,_=v*n+n,b=Math.pow(c,2)*Math.pow(f,2)*t,T=Math.exp(-v),R=lv(Math.pow(f,2),c);return(-s(f)+n0>0?-1:1)*((_-b)*T)/R}):(s=f=>{const p=Math.exp(-f*t),v=(f-n)*t+1;return-n0+p*v},a=f=>{const p=Math.exp(-f*t),v=(n-f)*(t*t);return p*v});const u=5/t,d=UH(s,a,u);if(t=ki(t),isNaN(d))return{stiffness:Mt.stiffness,damping:Mt.damping,duration:t};{const f=Math.pow(d,2)*r;return{stiffness:f,damping:c*2*Math.sqrt(r*f),duration:t}}}const LH=12;function UH(t,e,n){let r=n;for(let s=1;s<LH;s++)r=r-t(r)/e(r);return r}function lv(t,e){return t*Math.sqrt(1-e*e)}const zH=["duration","bounce"],jH=["stiffness","damping","mass"];function US(t,e){return e.some(n=>t[n]!==void 0)}function BH(t){let e={velocity:Mt.velocity,stiffness:Mt.stiffness,damping:Mt.damping,mass:Mt.mass,isResolvedFromDuration:!1,...t};if(!US(t,jH)&&US(t,zH))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,a=2*bs(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Mt.mass,stiffness:s,damping:a}}else{const n=VH(t);e={...e,...n,mass:Mt.mass},e.isResolvedFromDuration=!0}return e}function km(t=Mt.visualDuration,e=Mt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],u={done:!1,value:a},{stiffness:d,damping:f,mass:p,duration:v,velocity:_,isResolvedFromDuration:b}=BH({...n,velocity:-Mi(n.velocity||0)}),T=_||0,R=f/(2*Math.sqrt(d*p)),I=c-a,N=Mi(Math.sqrt(d/p)),L=Math.abs(I)<5;r||(r=L?Mt.restSpeed.granular:Mt.restSpeed.default),s||(s=L?Mt.restDelta.granular:Mt.restDelta.default);let $;if(R<1){const G=lv(N,R);$=K=>{const k=Math.exp(-R*N*K);return c-k*((T+R*N*I)/G*Math.sin(G*K)+I*Math.cos(G*K))}}else if(R===1)$=G=>c-Math.exp(-N*G)*(I+(T+N*I)*G);else{const G=N*Math.sqrt(R*R-1);$=K=>{const k=Math.exp(-R*N*K),S=Math.min(G*K,300);return c-k*((T+R*N*I)*Math.sinh(S)+G*I*Math.cosh(S))/G}}const H={calculatedDuration:b&&v||null,next:G=>{const K=$(G);if(b)u.done=G>=v;else{let k=G===0?T:0;R<1&&(k=G===0?ki(T):YN($,G,K));const S=Math.abs(k)<=r,A=Math.abs(c-K)<=s;u.done=S&&A}return u.value=u.done?c:K,u},toString:()=>{const G=Math.min(uE(H),Dm),K=GN(k=>H.next(G*k).value,G,30);return G+"ms "+K},toTransition:()=>{}};return H}km.applyToOptions=t=>{const e=PH(t,100,km);return t.ease=e.ease,t.duration=ki(e.duration),t.type="keyframes",t};function cv({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:c,min:u,max:d,restDelta:f=.5,restSpeed:p}){const v=t[0],_={done:!1,value:v},b=S=>u!==void 0&&S<u||d!==void 0&&S>d,T=S=>u===void 0?d:d===void 0||Math.abs(u-S)<Math.abs(d-S)?u:d;let R=n*e;const I=v+R,N=c===void 0?I:c(I);N!==I&&(R=N-v);const L=S=>-R*Math.exp(-S/r),$=S=>N+L(S),H=S=>{const A=L(S),V=$(S);_.done=Math.abs(A)<=f,_.value=_.done?N:V};let G,K;const k=S=>{b(_.value)&&(G=S,K=km({keyframes:[_.value,T(_.value)],velocity:YN($,S,_.value),damping:s,stiffness:a,restDelta:f,restSpeed:p}))};return k(0),{calculatedDuration:null,next:S=>{let A=!1;return!K&&G===void 0&&(A=!0,H(S),k(S)),G!==void 0&&S>=G?K.next(S-G):(!A&&H(S),_)}}}function HH(t,e,n){const r=[],s=n||ws.mix||qN,a=t.length-1;for(let c=0;c<a;c++){let u=s(t[c],t[c+1]);if(e){const d=Array.isArray(e)?e[c]||jr:e;u=Yh(d,u)}r.push(u)}return r}function FH(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const a=t.length;if(eE(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=HH(e,r,s),d=u.length,f=p=>{if(c&&p<t[0])return e[0];let v=0;if(d>1)for(;v<t.length-2&&!(p<t[v+1]);v++);const _=xh(t[v],t[v+1],p);return u[v](_)};return n?p=>f(bs(t[0],t[a-1],p)):f}function $H(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=xh(0,e,r);t.push(At(n,1,s))}}function qH(t){const e=[0];return $H(e,t.length-1),e}function GH(t,e){return t.map(n=>n*e)}function YH(t,e){return t.map(()=>e||ON).splice(0,t.length-1)}function Ju({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=iH(r)?r.map(MS):MS(r),a={done:!1,value:e[0]},c=GH(n&&n.length===e.length?n:qH(e),t),u=FH(c,e,{ease:Array.isArray(s)?s:YH(e,s)});return{calculatedDuration:t,next:d=>(a.value=u(d),a.done=d>=t,a)}}const KH=t=>t!==null;function hE(t,{repeat:e,repeatType:n="loop"},r,s=1){const a=t.filter(KH),u=s<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!u||r===void 0?a[u]:r}const XH={decay:cv,inertia:cv,tween:Ju,keyframes:Ju,spring:km};function KN(t){typeof t.type=="string"&&(t.type=XH[t.type])}class dE{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const QH=t=>t/100;class fE extends dE{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Zn.now()&&this.tick(Zn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;KN(e);const{type:n=Ju,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:c=0}=e;let{keyframes:u}=e;const d=n||Ju;d!==Ju&&typeof u[0]!="number"&&(this.mixKeyframes=Yh(QH,qN(u[0],u[1])),u=[0,100]);const f=d({...e,keyframes:u});a==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...u].reverse(),velocity:-c})),f.calculatedDuration===null&&(f.calculatedDuration=uE(f));const{calculatedDuration:p}=f;this.calculatedDuration=p,this.resolvedDuration=p+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=f}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:c,resolvedDuration:u,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:p,repeat:v,repeatType:_,repeatDelay:b,type:T,onUpdate:R,finalKeyframe:I}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const N=this.currentTime-f*(this.playbackSpeed>=0?1:-1),L=this.playbackSpeed>=0?N<0:N>s;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let $=this.currentTime,H=r;if(v){const S=Math.min(this.currentTime,s)/u;let A=Math.floor(S),V=S%1;!V&&S>=1&&(V=1),V===1&&A--,A=Math.min(A,v+1),!!(A%2)&&(_==="reverse"?(V=1-V,b&&(V-=b/u)):_==="mirror"&&(H=c)),$=bs(0,1,V)*u}const G=L?{done:!1,value:p[0]}:H.next($);a&&(G.value=a(G.value));let{done:K}=G;!L&&d!==null&&(K=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&K);return k&&T!==cv&&(G.value=hE(p,this.options,I,this.speed)),R&&R(G.value),k&&this.finish(),G}then(e,n){return this.finished.then(e,n)}get duration(){return Mi(this.calculatedDuration)}get time(){return Mi(this.currentTime)}set time(e){e=ki(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Zn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Mi(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=MH,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Zn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function WH(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ga=t=>t*180/Math.PI,uv=t=>{const e=ga(Math.atan2(t[1],t[0]));return hv(e)},ZH={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:uv,rotateZ:uv,skewX:t=>ga(Math.atan(t[1])),skewY:t=>ga(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},hv=t=>(t=t%360,t<0&&(t+=360),t),zS=uv,jS=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),BS=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),JH={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:jS,scaleY:BS,scale:t=>(jS(t)+BS(t))/2,rotateX:t=>hv(ga(Math.atan2(t[6],t[5]))),rotateY:t=>hv(ga(Math.atan2(-t[2],t[0]))),rotateZ:zS,rotate:zS,skewX:t=>ga(Math.atan(t[4])),skewY:t=>ga(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function dv(t){return t.includes("scale")?1:0}function fv(t,e){if(!t||t==="none")return dv(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=JH,s=n;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=ZH,s=u}if(!s)return dv(e);const a=r[e],c=s[1].split(",").map(tF);return typeof a=="function"?a(c):c[a]}const eF=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return fv(n,e)};function tF(t){return parseFloat(t.trim())}const xc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Tc=new Set(xc),HS=t=>t===wc||t===Oe,nF=new Set(["x","y","z"]),rF=xc.filter(t=>!nF.has(t));function iF(t){const e=[];return rF.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const _a={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>fv(e,"x"),y:(t,{transform:e})=>fv(e,"y")};_a.translateX=_a.x;_a.translateY=_a.y;const Ea=new Set;let mv=!1,pv=!1,gv=!1;function XN(){if(pv){const t=Array.from(Ea).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=iF(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,c])=>{r.getValue(a)?.set(c)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}pv=!1,mv=!1,Ea.forEach(t=>t.complete(gv)),Ea.clear()}function QN(){Ea.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(pv=!0)})}function sF(){gv=!0,QN(),XN(),gv=!1}class mE{constructor(e,n,r,s,a,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(Ea.add(this),mv||(mv=!0,wt.read(QN),wt.resolveKeyframes(XN))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const a=s?.get(),c=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const u=r.readValue(n,c);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=c),s&&a===void 0&&s.set(e[0])}WH(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ea.delete(this)}cancel(){this.state==="scheduled"&&(Ea.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const oF=t=>t.startsWith("--");function aF(t,e,n){oF(e)?t.style.setProperty(e,n):t.style[e]=n}const lF=tE(()=>window.ScrollTimeline!==void 0),cF={};function uF(t,e){const n=tE(t);return()=>cF[e]??n()}const WN=uF(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),qu=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,FS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qu([0,.65,.55,1]),circOut:qu([.55,0,1,.45]),backIn:qu([.31,.01,.66,-.59]),backOut:qu([.33,1.53,.69,.99])};function ZN(t,e){if(t)return typeof t=="function"?WN()?GN(t,e):"ease-out":VN(t)?qu(t):Array.isArray(t)?t.map(n=>ZN(n,e)||FS.easeOut):FS[t]}function hF(t,e,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:c="loop",ease:u="easeOut",times:d}={},f=void 0){const p={[e]:n};d&&(p.offset=d);const v=ZN(u,s);Array.isArray(v)&&(p.easing=v);const _={delay:r,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:a+1,direction:c==="reverse"?"alternate":"normal"};return f&&(_.pseudoElement=f),t.animate(p,_)}function JN(t){return typeof t=="function"&&"applyToOptions"in t}function dF({type:t,...e}){return JN(t)&&WN()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class fF extends dE{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:a,allowFlatten:c=!1,finalKeyframe:u,onComplete:d}=e;this.isPseudoElement=!!a,this.allowFlatten=c,this.options=e,eE(typeof e.type!="string");const f=dF(e);this.animation=hF(n,r,s,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const p=hE(s,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(p):aF(n,r,p),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Mi(Number(e))}get time(){return Mi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ki(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&lF()?(this.animation.timeline=e,jr):n(this)}}const eD={anticipate:kN,backInOut:DN,circInOut:PN};function mF(t){return t in eD}function pF(t){typeof t.ease=="string"&&mF(t.ease)&&(t.ease=eD[t.ease])}const $S=10;class gF extends fF{constructor(e){pF(e),KN(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:a,...c}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const u=new fE({...c,autoplay:!1}),d=ki(this.finishedTime??this.time);n.setWithVelocity(u.sample(d-$S).value,u.sample(d).value,$S),u.stop()}}const qS=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(So.test(t)||t==="0")&&!t.startsWith("url("));function yF(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function vF(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],c=qS(s,e),u=qS(a,e);return!c||!u?!1:yF(t)||(n==="spring"||JN(n))&&r}const _F=new Set(["opacity","clipPath","filter","transform"]),EF=tE(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function bF(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:a,type:c}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=e.owner.getProps();return EF()&&n&&_F.has(n)&&(n!=="transform"||!f)&&!d&&!r&&s!=="mirror"&&a!==0&&c!=="inertia"}const wF=40;class xF extends dE{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:c="loop",keyframes:u,name:d,motionValue:f,element:p,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Zn.now();const _={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:c,name:d,motionValue:f,element:p,...v},b=p?.KeyframeResolver||mE;this.keyframeResolver=new b(u,(T,R,I)=>this.onKeyframesResolved(T,R,_,!I),d,f,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:a,type:c,velocity:u,delay:d,isHandoff:f,onUpdate:p}=r;this.resolvedAt=Zn.now(),vF(e,a,c,u)||((ws.instantAnimations||!d)&&p?.(hE(e,r,n)),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const _={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>wF?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},b=!f&&bF(_)?new gF({..._,element:_.motionValue.owner.current}):new fE(_);b.finished.then(()=>this.notifyFinished()).catch(jr),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),sF()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const TF=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function SF(t){const e=TF.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function tD(t,e,n=1){const[r,s]=SF(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const c=a.trim();return xN(c)?parseFloat(c):c}return oE(s)?tD(s,e,n+1):s}function pE(t,e){return t?.[e]??t?.default??t}const nD=new Set(["width","height","top","left","right","bottom",...xc]),AF={test:t=>t==="auto",parse:t=>t},rD=t=>e=>e.test(t),iD=[wc,Oe,Pi,Ws,yH,gH,AF],GS=t=>iD.find(rD(t));function CF(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||SN(t):!0}const RF=new Set(["brightness","contrast","saturate","opacity"]);function IF(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(aE)||[];if(!r)return t;const s=n.replace(r,"");let a=RF.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+s+")"}const NF=/\b([a-z-]*)\(.*?\)/gu,yv={...So,getAnimatableNone:t=>{const e=t.match(NF);return e?e.map(IF).join(" "):t}},YS={...wc,transform:Math.round},DF={rotate:Ws,rotateX:Ws,rotateY:Ws,rotateZ:Ws,scale:Df,scaleX:Df,scaleY:Df,scaleZ:Df,skew:Ws,skewX:Ws,skewY:Ws,distance:Oe,translateX:Oe,translateY:Oe,translateZ:Oe,x:Oe,y:Oe,z:Oe,perspective:Oe,transformPerspective:Oe,opacity:Th,originX:PS,originY:PS,originZ:Oe},gE={borderWidth:Oe,borderTopWidth:Oe,borderRightWidth:Oe,borderBottomWidth:Oe,borderLeftWidth:Oe,borderRadius:Oe,radius:Oe,borderTopLeftRadius:Oe,borderTopRightRadius:Oe,borderBottomRightRadius:Oe,borderBottomLeftRadius:Oe,width:Oe,maxWidth:Oe,height:Oe,maxHeight:Oe,top:Oe,right:Oe,bottom:Oe,left:Oe,padding:Oe,paddingTop:Oe,paddingRight:Oe,paddingBottom:Oe,paddingLeft:Oe,margin:Oe,marginTop:Oe,marginRight:Oe,marginBottom:Oe,marginLeft:Oe,backgroundPositionX:Oe,backgroundPositionY:Oe,...DF,zIndex:YS,fillOpacity:Th,strokeOpacity:Th,numOctaves:YS},kF={...gE,color:Xt,backgroundColor:Xt,outlineColor:Xt,fill:Xt,stroke:Xt,borderColor:Xt,borderTopColor:Xt,borderRightColor:Xt,borderBottomColor:Xt,borderLeftColor:Xt,filter:yv,WebkitFilter:yv},sD=t=>kF[t];function oD(t,e){let n=sD(t);return n!==yv&&(n=So),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const MF=new Set(["auto","none","0"]);function PF(t,e,n){let r=0,s;for(;r<t.length&&!s;){const a=t[r];typeof a=="string"&&!MF.has(a)&&Sh(a).values.length&&(s=t[r]),r++}if(s&&n)for(const a of e)t[a]=oD(n,s)}class OF extends mE{constructor(e,n,r,s,a){super(e,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),oE(f))){const p=tD(f,n.current);p!==void 0&&(e[d]=p),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!nD.has(r)||e.length!==2)return;const[s,a]=e,c=GS(s),u=GS(a);if(c!==u)if(HS(c)&&HS(u))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else _a[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||CF(e[s]))&&r.push(s);r.length&&PF(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=_a[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,c=r[a];r[a]=_a[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,d])=>{e.getValue(u).set(d)}),this.resolveNoneKeyframes()}}function VF(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=n?.[t]??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const aD=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function lD(t){return TN(t)&&"offsetHeight"in t}const KS=30,LF=t=>!isNaN(parseFloat(t));class UF{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const a=Zn.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty();s&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Zn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=LF(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new nE);const r=this.events[e].add(n);return e==="change"?()=>{r(),wt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Zn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>KS)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,KS);return AN(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function dc(t,e){return new UF(t,e)}const{schedule:yE}=LN(queueMicrotask,!1),Xr={x:!1,y:!1};function cD(){return Xr.x||Xr.y}function zF(t){return t==="x"||t==="y"?Xr[t]?null:(Xr[t]=!0,()=>{Xr[t]=!1}):Xr.x||Xr.y?null:(Xr.x=Xr.y=!0,()=>{Xr.x=Xr.y=!1})}function uD(t,e){const n=VF(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function XS(t){return!(t.pointerType==="touch"||cD())}function jF(t,e,n={}){const[r,s,a]=uD(t,n),c=u=>{if(!XS(u))return;const{target:d}=u,f=e(d,u);if(typeof f!="function"||!d)return;const p=v=>{XS(v)&&(f(v),d.removeEventListener("pointerleave",p))};d.addEventListener("pointerleave",p,s)};return r.forEach(u=>{u.addEventListener("pointerenter",c,s)}),a}const hD=(t,e)=>e?t===e?!0:hD(t,e.parentElement):!1,vE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,BF=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function HF(t){return BF.has(t.tagName)||t.tabIndex!==-1}const Qf=new WeakSet;function QS(t){return e=>{e.key==="Enter"&&t(e)}}function r0(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const FF=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=QS(()=>{if(Qf.has(n))return;r0(n,"down");const s=QS(()=>{r0(n,"up")}),a=()=>r0(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function WS(t){return vE(t)&&!cD()}function $F(t,e,n={}){const[r,s,a]=uD(t,n),c=u=>{const d=u.currentTarget;if(!WS(u))return;Qf.add(d);const f=e(d,u),p=(b,T)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",_),Qf.has(d)&&Qf.delete(d),WS(b)&&typeof f=="function"&&f(b,{success:T})},v=b=>{p(b,d===window||d===document||n.useGlobalTarget||hD(d,b.target))},_=b=>{p(b,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",_,s)};return r.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",c,s),lD(u)&&(u.addEventListener("focus",f=>FF(f,s)),!HF(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),a}function dD(t){return TN(t)&&"ownerSVGElement"in t}function qF(t){return dD(t)&&t.tagName==="svg"}const Nn=t=>!!(t&&t.getVelocity),GF=[...iD,Xt,So],YF=t=>GF.find(rD(t)),_E=O.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class KF extends O.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=lD(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function XF({children:t,isPresent:e,anchorX:n,root:r}){const s=O.useId(),a=O.useRef(null),c=O.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=O.useContext(_E);return O.useInsertionEffect(()=>{const{width:d,height:f,top:p,left:v,right:_}=c.current;if(e||!a.current||!d||!f)return;const b=n==="left"?`left: ${v}`:`right: ${_}`;a.current.dataset.motionPopId=s;const T=document.createElement("style");u&&(T.nonce=u);const R=r??document.head;return R.appendChild(T),T.sheet&&T.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${f}px !important;
            ${b}px !important;
            top: ${p}px !important;
          }
        `),()=>{R.removeChild(T),R.contains(T)&&R.removeChild(T)}},[e]),C.jsx(KF,{isPresent:e,childRef:a,sizeRef:c,children:O.cloneElement(t,{ref:a})})}const QF=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:c,anchorX:u,root:d})=>{const f=Q_(WF),p=O.useId();let v=!0,_=O.useMemo(()=>(v=!1,{id:p,initial:e,isPresent:n,custom:s,onExitComplete:b=>{f.set(b,!0);for(const T of f.values())if(!T)return;r&&r()},register:b=>(f.set(b,!1),()=>f.delete(b))}),[n,f,r]);return a&&v&&(_={..._}),O.useMemo(()=>{f.forEach((b,T)=>f.set(T,!1))},[n]),O.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),c==="popLayout"&&(t=C.jsx(XF,{isPresent:n,anchorX:u,root:d,children:t})),C.jsx(gp.Provider,{value:_,children:t})};function WF(){return new Map}function fD(t=!0){const e=O.useContext(gp);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,a=O.useId();O.useEffect(()=>{if(t)return s(a)},[t]);const c=O.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,c]:[!0]}const kf=t=>t.key||"";function ZS(t){const e=[];return O.Children.forEach(t,n=>{O.isValidElement(n)&&e.push(n)}),e}const JS=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:a="sync",propagate:c=!1,anchorX:u="left",root:d})=>{const[f,p]=fD(c),v=O.useMemo(()=>ZS(t),[t]),_=c&&!f?[]:v.map(kf),b=O.useRef(!0),T=O.useRef(v),R=Q_(()=>new Map),[I,N]=O.useState(v),[L,$]=O.useState(v);wN(()=>{b.current=!1,T.current=v;for(let K=0;K<L.length;K++){const k=kf(L[K]);_.includes(k)?R.delete(k):R.get(k)!==!0&&R.set(k,!1)}},[L,_.length,_.join("-")]);const H=[];if(v!==I){let K=[...v];for(let k=0;k<L.length;k++){const S=L[k],A=kf(S);_.includes(A)||(K.splice(k,0,S),H.push(S))}return a==="wait"&&H.length&&(K=H),$(ZS(K)),N(v),null}const{forceRender:G}=O.useContext(X_);return C.jsx(C.Fragment,{children:L.map(K=>{const k=kf(K),S=c&&!f?!1:v===L||_.includes(k),A=()=>{if(R.has(k))R.set(k,!0);else return;let V=!0;R.forEach(B=>{B||(V=!1)}),V&&(G?.(),$(T.current),c&&p?.(),r&&r())};return C.jsx(QF,{isPresent:S,initial:!b.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:a,root:d,onExitComplete:S?void 0:A,anchorX:u,children:K},k)})})},mD=O.createContext({strict:!1}),eA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},fc={};for(const t in eA)fc[t]={isEnabled:e=>eA[t].some(n=>!!e[n])};function ZF(t){for(const e in t)fc[e]={...fc[e],...t[e]}}const JF=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Mm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||JF.has(t)}let pD=t=>!Mm(t);function e$(t){typeof t=="function"&&(pD=e=>e.startsWith("on")?!Mm(e):t(e))}try{e$(require("@emotion/is-prop-valid").default)}catch{}function t$(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(pD(s)||n===!0&&Mm(s)||!e&&!Mm(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const yp=O.createContext({});function vp(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Ah(t){return typeof t=="string"||Array.isArray(t)}const EE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],bE=["initial",...EE];function _p(t){return vp(t.animate)||bE.some(e=>Ah(t[e]))}function gD(t){return!!(_p(t)||t.variants)}function n$(t,e){if(_p(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Ah(n)?n:void 0,animate:Ah(r)?r:void 0}}return t.inherit!==!1?e:{}}function r$(t){const{initial:e,animate:n}=n$(t,O.useContext(yp));return O.useMemo(()=>({initial:e,animate:n}),[tA(e),tA(n)])}function tA(t){return Array.isArray(t)?t.join(" "):t}const Ch={};function i$(t){for(const e in t)Ch[e]=t[e],sE(e)&&(Ch[e].isCSSVariable=!0)}function yD(t,{layout:e,layoutId:n}){return Tc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ch[t]||t==="opacity")}const s$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},o$=xc.length;function a$(t,e,n){let r="",s=!0;for(let a=0;a<o$;a++){const c=xc[a],u=t[c];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(c.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||n){const f=aD(u,gE[c]);if(!d){s=!1;const p=s$[c]||c;r+=`${p}(${f}) `}n&&(e[c]=f)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function wE(t,e,n){const{style:r,vars:s,transformOrigin:a}=t;let c=!1,u=!1;for(const d in e){const f=e[d];if(Tc.has(d)){c=!0;continue}else if(sE(d)){s[d]=f;continue}else{const p=aD(f,gE[d]);d.startsWith("origin")?(u=!0,a[d]=p):r[d]=p}}if(e.transform||(c||n?r.transform=a$(e,t.transform,n):r.transform&&(r.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:p=0}=a;r.transformOrigin=`${d} ${f} ${p}`}}const xE=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function vD(t,e,n){for(const r in e)!Nn(e[r])&&!yD(r,n)&&(t[r]=e[r])}function l$({transformTemplate:t},e){return O.useMemo(()=>{const n=xE();return wE(n,e,t),Object.assign({},n.vars,n.style)},[e])}function c$(t,e){const n=t.style||{},r={};return vD(r,n,t),Object.assign(r,l$(t,e)),r}function u$(t,e){const n={},r=c$(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const h$={offset:"stroke-dashoffset",array:"stroke-dasharray"},d$={offset:"strokeDashoffset",array:"strokeDasharray"};function f$(t,e,n=1,r=0,s=!0){t.pathLength=1;const a=s?h$:d$;t[a.offset]=Oe.transform(-r);const c=Oe.transform(e),u=Oe.transform(n);t[a.array]=`${c} ${u}`}function _D(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:c=0,...u},d,f,p){if(wE(t,u,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:v,style:_}=t;v.transform&&(_.transform=v.transform,delete v.transform),(_.transform||v.transformOrigin)&&(_.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),_.transform&&(_.transformBox=p?.transformBox??"fill-box",delete v.transformBox),e!==void 0&&(v.x=e),n!==void 0&&(v.y=n),r!==void 0&&(v.scale=r),s!==void 0&&f$(v,s,a,c,!1)}const ED=()=>({...xE(),attrs:{}}),bD=t=>typeof t=="string"&&t.toLowerCase()==="svg";function m$(t,e,n,r){const s=O.useMemo(()=>{const a=ED();return _D(a,e,bD(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};vD(a,t.style,t),s.style={...a,...s.style}}return s}const p$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function TE(t){return typeof t!="string"||t.includes("-")?!1:!!(p$.indexOf(t)>-1||/[A-Z]/u.test(t))}function g$(t,e,n,{latestValues:r},s,a=!1){const u=(TE(t)?m$:u$)(e,r,s,t),d=t$(e,typeof t=="string",a),f=t!==O.Fragment?{...d,...u,ref:n}:{},{children:p}=e,v=O.useMemo(()=>Nn(p)?p.get():p,[p]);return O.createElement(t,{...f,children:v})}function nA(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function SE(t,e,n,r){if(typeof e=="function"){const[s,a]=nA(r);e=e(n!==void 0?n:t.custom,s,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,a]=nA(r);e=e(n!==void 0?n:t.custom,s,a)}return e}function Wf(t){return Nn(t)?t.get():t}function y$({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:v$(n,r,s,t),renderState:e()}}function v$(t,e,n,r){const s={},a=r(t,{});for(const _ in a)s[_]=Wf(a[_]);let{initial:c,animate:u}=t;const d=_p(t),f=gD(t);e&&f&&!d&&t.inherit!==!1&&(c===void 0&&(c=e.initial),u===void 0&&(u=e.animate));let p=n?n.initial===!1:!1;p=p||c===!1;const v=p?u:c;if(v&&typeof v!="boolean"&&!vp(v)){const _=Array.isArray(v)?v:[v];for(let b=0;b<_.length;b++){const T=SE(t,_[b]);if(T){const{transitionEnd:R,transition:I,...N}=T;for(const L in N){let $=N[L];if(Array.isArray($)){const H=p?$.length-1:0;$=$[H]}$!==null&&(s[L]=$)}for(const L in R)s[L]=R[L]}}}return s}const wD=t=>(e,n)=>{const r=O.useContext(yp),s=O.useContext(gp),a=()=>y$(t,e,r,s);return n?a():Q_(a)};function AE(t,e,n){const{style:r}=t,s={};for(const a in r)(Nn(r[a])||e.style&&Nn(e.style[a])||yD(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(s[a]=r[a]);return s}const _$=wD({scrapeMotionValuesFromProps:AE,createRenderState:xE});function xD(t,e,n){const r=AE(t,e,n);for(const s in t)if(Nn(t[s])||Nn(e[s])){const a=xc.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=t[s]}return r}const E$=wD({scrapeMotionValuesFromProps:xD,createRenderState:ED}),b$=Symbol.for("motionComponentSymbol");function Bl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function w$(t,e,n){return O.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Bl(n)&&(n.current=r))},[e])}const CE=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),x$="framerAppearId",TD="data-"+CE(x$),SD=O.createContext({});function T$(t,e,n,r,s){const{visualElement:a}=O.useContext(yp),c=O.useContext(mD),u=O.useContext(gp),d=O.useContext(_E).reducedMotion,f=O.useRef(null);r=r||c.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:a,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const p=f.current,v=O.useContext(SD);p&&!p.projection&&s&&(p.type==="html"||p.type==="svg")&&S$(f.current,n,s,v);const _=O.useRef(!1);O.useInsertionEffect(()=>{p&&_.current&&p.update(n,u)});const b=n[TD],T=O.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return wN(()=>{p&&(_.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),T.current&&p.animationState&&p.animationState.animateChanges())}),O.useEffect(()=>{p&&(!T.current&&p.animationState&&p.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),T.current=!1))}),p}function S$(t,e,n,r){const{layoutId:s,layout:a,drag:c,dragConstraints:u,layoutScroll:d,layoutRoot:f,layoutCrossfade:p}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:AD(t.parent)),t.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!c||u&&Bl(u),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:p,layoutScroll:d,layoutRoot:f})}function AD(t){if(t)return t.options.allowProjection!==!1?t.projection:AD(t.parent)}function i0(t,{forwardMotionProps:e=!1}={},n,r){n&&ZF(n);const s=TE(t)?E$:_$;function a(u,d){let f;const p={...O.useContext(_E),...u,layoutId:A$(u)},{isStatic:v}=p,_=r$(u),b=s(u,v);if(!v&&W_){C$();const T=R$(p);f=T.MeasureLayout,_.visualElement=T$(t,b,p,r,T.ProjectionNode)}return C.jsxs(yp.Provider,{value:_,children:[f&&_.visualElement?C.jsx(f,{visualElement:_.visualElement,...p}):null,g$(t,u,w$(b,_.visualElement,d),b,v,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=O.forwardRef(a);return c[b$]=t,c}function A$({layoutId:t}){const e=O.useContext(X_).id;return e&&t!==void 0?e+"-"+t:t}function C$(t,e){O.useContext(mD).strict}function R$(t){const{drag:e,layout:n}=fc;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function I$(t,e){if(typeof Proxy>"u")return i0;const n=new Map,r=(a,c)=>i0(a,c,t,e),s=(a,c)=>r(a,c);return new Proxy(s,{get:(a,c)=>c==="create"?r:(n.has(c)||n.set(c,i0(c,void 0,t,e)),n.get(c))})}function CD({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function N$({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function D$(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function s0(t){return t===void 0||t===1}function vv({scale:t,scaleX:e,scaleY:n}){return!s0(t)||!s0(e)||!s0(n)}function ha(t){return vv(t)||RD(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function RD(t){return rA(t.x)||rA(t.y)}function rA(t){return t&&t!=="0%"}function Pm(t,e,n){const r=t-n,s=e*r;return n+s}function iA(t,e,n,r,s){return s!==void 0&&(t=Pm(t,s,r)),Pm(t,n,r)+e}function _v(t,e=0,n=1,r,s){t.min=iA(t.min,e,n,r,s),t.max=iA(t.max,e,n,r,s)}function ID(t,{x:e,y:n}){_v(t.x,e.translate,e.scale,e.originPoint),_v(t.y,n.translate,n.scale,n.originPoint)}const sA=.999999999999,oA=1.0000000000001;function k$(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let a,c;for(let u=0;u<s;u++){a=n[u],c=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Fl(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,ID(t,c)),r&&ha(a.latestValues)&&Fl(t,a.latestValues))}e.x<oA&&e.x>sA&&(e.x=1),e.y<oA&&e.y>sA&&(e.y=1)}function Hl(t,e){t.min=t.min+e,t.max=t.max+e}function aA(t,e,n,r,s=.5){const a=At(t.min,t.max,s);_v(t,e,n,a,r)}function Fl(t,e){aA(t.x,e.x,e.scaleX,e.scale,e.originX),aA(t.y,e.y,e.scaleY,e.scale,e.originY)}function ND(t,e){return CD(D$(t.getBoundingClientRect(),e))}function M$(t,e,n){const r=ND(t,n),{scroll:s}=e;return s&&(Hl(r.x,s.offset.x),Hl(r.y,s.offset.y)),r}const lA=()=>({translate:0,scale:1,origin:0,originPoint:0}),$l=()=>({x:lA(),y:lA()}),cA=()=>({min:0,max:0}),jt=()=>({x:cA(),y:cA()}),Ev={current:null},DD={current:!1};function P$(){if(DD.current=!0,!!W_)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Ev.current=t.matches;t.addEventListener("change",e),e()}else Ev.current=!1}const O$=new WeakMap;function V$(t,e,n){for(const r in e){const s=e[r],a=n[r];if(Nn(s))t.addValue(r,s);else if(Nn(a))t.addValue(r,dc(s,{owner:t}));else if(a!==s)if(t.hasValue(r)){const c=t.getValue(r);c.liveStyle===!0?c.jump(s):c.hasAnimated||c.set(s)}else{const c=t.getStaticValue(r);t.addValue(r,dc(c!==void 0?c:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const uA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class L${scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:c},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=mE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=Zn.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,wt.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=c;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=u,this.blockInitialAnimation=!!a,this.isControllingVariants=_p(n),this.isVariantNode=gD(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...v}=this.scrapeMotionValuesFromProps(n,{},this);for(const _ in v){const b=v[_];d[_]!==void 0&&Nn(b)&&b.set(d[_],!1)}}mount(e){this.current=e,O$.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),DD.current||P$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ev.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),To(this.notifyUpdate),To(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Tc.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&wt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),a(),c&&c(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in fc){const n=fc[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):jt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<uA.length;r++){const s=uA[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,c=e[a];c&&(this.propEventSubscriptions[s]=this.on(s,c))}this.prevMotionValues=V$(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=dc(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(xN(r)||SN(r))?r=parseFloat(r):!YF(r)&&So.test(n)&&(r=oD(e,n)),this.setBaseTarget(e,Nn(r)?r.get():r)),Nn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=SE(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Nn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new nE),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){yE.render(this.render)}}class kD extends L${constructor(){super(...arguments),this.KeyframeResolver=OF}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Nn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function MD(t,{style:e,vars:n},r,s){const a=t.style;let c;for(c in e)a[c]=e[c];s?.applyProjectionStyles(a,r);for(c in n)a.setProperty(c,n[c])}function U$(t){return window.getComputedStyle(t)}class z$ extends kD{constructor(){super(...arguments),this.type="html",this.renderInstance=MD}readValueFromInstance(e,n){if(Tc.has(n))return this.projection?.isProjecting?dv(n):eF(e,n);{const r=U$(e),s=(sE(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return ND(e,n)}build(e,n,r){wE(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return AE(e,n,r)}}const PD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function j$(t,e,n,r){MD(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(PD.has(s)?s:CE(s),e.attrs[s])}class B$ extends kD{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=jt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Tc.has(n)){const r=sD(n);return r&&r.default||0}return n=PD.has(n)?n:CE(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return xD(e,n,r)}build(e,n,r){_D(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){j$(e,n,r,s)}mount(e){this.isSVGTag=bD(e.tagName),super.mount(e)}}const H$=(t,e)=>TE(t)?new B$(e):new z$(e,{allowProjection:t!==O.Fragment});function Rh(t,e,n){const r=t.getProps();return SE(r,e,n!==void 0?n:r.custom,t)}const bv=t=>Array.isArray(t);function F$(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,dc(n))}function $$(t){return bv(t)?t[t.length-1]||0:t}function q$(t,e){const n=Rh(t,e);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const c in a){const u=$$(a[c]);F$(t,c,u)}}function G$(t){return!!(Nn(t)&&t.add)}function wv(t,e){const n=t.getValue("willChange");if(G$(n))return n.add(e);if(!n&&ws.WillChange){const r=new ws.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function OD(t){return t.props[TD]}const Y$=t=>t!==null;function K$(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(Y$),a=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[a]}const X$={type:"spring",stiffness:500,damping:25,restSpeed:10},Q$=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),W$={type:"keyframes",duration:.8},Z$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},J$=(t,{keyframes:e})=>e.length>2?W$:Tc.has(t)?t.startsWith("scale")?Q$(e[1]):X$:Z$;function eq({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:c,repeatDelay:u,from:d,elapsed:f,...p}){return!!Object.keys(p).length}const RE=(t,e,n,r={},s,a)=>c=>{const u=pE(r,t)||{},d=u.delay||r.delay||0;let{elapsed:f=0}=r;f=f-ki(d);const p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:_=>{e.set(_),u.onUpdate&&u.onUpdate(_)},onComplete:()=>{c(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:a?void 0:s};eq(u)||Object.assign(p,J$(t,p)),p.duration&&(p.duration=ki(p.duration)),p.repeatDelay&&(p.repeatDelay=ki(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let v=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(v=!0)),(ws.instantAnimations||ws.skipAnimations)&&(v=!0,p.duration=0,p.delay=0),p.allowFlatten=!u.type&&!u.ease,v&&!a&&e.get()!==void 0){const _=K$(p.keyframes,u);if(_!==void 0){wt.update(()=>{p.onUpdate(_),p.onComplete()});return}}return u.isSync?new fE(p):new xF(p)};function tq({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function VD(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:c,...u}=e;r&&(a=r);const d=[],f=s&&t.animationState&&t.animationState.getState()[s];for(const p in u){const v=t.getValue(p,t.latestValues[p]??null),_=u[p];if(_===void 0||f&&tq(f,p))continue;const b={delay:n,...pE(a||{},p)},T=v.get();if(T!==void 0&&!v.isAnimating&&!Array.isArray(_)&&_===T&&!b.velocity)continue;let R=!1;if(window.MotionHandoffAnimation){const N=OD(t);if(N){const L=window.MotionHandoffAnimation(N,p,wt);L!==null&&(b.startTime=L,R=!0)}}wv(t,p),v.start(RE(p,v,_,t.shouldReduceMotion&&nD.has(p)?{type:!1}:b,t,R));const I=v.animation;I&&d.push(I)}return c&&Promise.all(d).then(()=>{wt.update(()=>{c&&q$(t,c)})}),d}function xv(t,e,n={}){const r=Rh(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(VD(t,r,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:p,staggerDirection:v}=s;return nq(t,e,d,f,p,v,n)}:()=>Promise.resolve(),{when:u}=s;if(u){const[d,f]=u==="beforeChildren"?[a,c]:[c,a];return d().then(()=>f())}else return Promise.all([a(),c(n.delay)])}function nq(t,e,n=0,r=0,s=0,a=1,c){const u=[],d=t.variantChildren.size,f=(d-1)*s,p=typeof r=="function",v=p?_=>r(_,d):a===1?(_=0)=>_*s:(_=0)=>f-_*s;return Array.from(t.variantChildren).sort(rq).forEach((_,b)=>{_.notify("AnimationStart",e),u.push(xv(_,e,{...c,delay:n+(p?0:r)+v(b)}).then(()=>_.notify("AnimationComplete",e)))}),Promise.all(u)}function rq(t,e){return t.sortNodePosition(e)}function iq(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(a=>xv(t,a,n));r=Promise.all(s)}else if(typeof e=="string")r=xv(t,e,n);else{const s=typeof e=="function"?Rh(t,e,n.custom):e;r=Promise.all(VD(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function LD(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const sq=bE.length;function UD(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?UD(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<sq;n++){const r=bE[n],s=t.props[r];(Ah(s)||s===!1)&&(e[r]=s)}return e}const oq=[...EE].reverse(),aq=EE.length;function lq(t){return e=>Promise.all(e.map(({animation:n,options:r})=>iq(t,n,r)))}function cq(t){let e=lq(t),n=hA(),r=!0;const s=d=>(f,p)=>{const v=Rh(t,p,d==="exit"?t.presenceContext?.custom:void 0);if(v){const{transition:_,transitionEnd:b,...T}=v;f={...f,...T,...b}}return f};function a(d){e=d(t)}function c(d){const{props:f}=t,p=UD(t.parent)||{},v=[],_=new Set;let b={},T=1/0;for(let I=0;I<aq;I++){const N=oq[I],L=n[N],$=f[N]!==void 0?f[N]:p[N],H=Ah($),G=N===d?L.isActive:null;G===!1&&(T=I);let K=$===p[N]&&$!==f[N]&&H;if(K&&r&&t.manuallyAnimateOnMount&&(K=!1),L.protectedKeys={...b},!L.isActive&&G===null||!$&&!L.prevProp||vp($)||typeof $=="boolean")continue;const k=uq(L.prevProp,$);let S=k||N===d&&L.isActive&&!K&&H||I>T&&H,A=!1;const V=Array.isArray($)?$:[$];let B=V.reduce(s(N),{});G===!1&&(B={});const{prevResolvedValues:F={}}=L,D={...F,...B},P=Y=>{S=!0,_.has(Y)&&(A=!0,_.delete(Y)),L.needsAnimating[Y]=!0;const te=t.getValue(Y);te&&(te.liveStyle=!1)};for(const Y in D){const te=B[Y],J=F[Y];if(b.hasOwnProperty(Y))continue;let U=!1;bv(te)&&bv(J)?U=!LD(te,J):U=te!==J,U?te!=null?P(Y):_.add(Y):te!==void 0&&_.has(Y)?P(Y):L.protectedKeys[Y]=!0}L.prevProp=$,L.prevResolvedValues=B,L.isActive&&(b={...b,...B}),r&&t.blockInitialAnimation&&(S=!1),S&&(!(K&&k)||A)&&v.push(...V.map(Y=>({animation:Y,options:{type:N}})))}if(_.size){const I={};if(typeof f.initial!="boolean"){const N=Rh(t,Array.isArray(f.initial)?f.initial[0]:f.initial);N&&N.transition&&(I.transition=N.transition)}_.forEach(N=>{const L=t.getBaseTarget(N),$=t.getValue(N);$&&($.liveStyle=!0),I[N]=L??null}),v.push({animation:I})}let R=!!v.length;return r&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(R=!1),r=!1,R?e(v):Promise.resolve()}function u(d,f){if(n[d].isActive===f)return Promise.resolve();t.variantChildren?.forEach(v=>v.animationState?.setActive(d,f)),n[d].isActive=f;const p=c(d);for(const v in n)n[v].protectedKeys={};return p}return{animateChanges:c,setActive:u,setAnimateFunction:a,getState:()=>n,reset:()=>{n=hA(),r=!0}}}function uq(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!LD(e,t):!1}function la(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function hA(){return{animate:la(!0),whileInView:la(),whileHover:la(),whileTap:la(),whileDrag:la(),whileFocus:la(),exit:la()}}class No{constructor(e){this.isMounted=!1,this.node=e}update(){}}class hq extends No{constructor(e){super(e),e.animationState||(e.animationState=cq(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();vp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let dq=0;class fq extends No{constructor(){super(...arguments),this.id=dq++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const mq={animation:{Feature:hq},exit:{Feature:fq}};function Ih(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Qh(t){return{point:{x:t.pageX,y:t.pageY}}}const pq=t=>e=>vE(e)&&t(e,Qh(e));function eh(t,e,n,r){return Ih(t,e,pq(n),r)}const zD=1e-4,gq=1-zD,yq=1+zD,jD=.01,vq=0-jD,_q=0+jD;function Hn(t){return t.max-t.min}function Eq(t,e,n){return Math.abs(t-e)<=n}function dA(t,e,n,r=.5){t.origin=r,t.originPoint=At(e.min,e.max,t.origin),t.scale=Hn(n)/Hn(e),t.translate=At(n.min,n.max,t.origin)-t.originPoint,(t.scale>=gq&&t.scale<=yq||isNaN(t.scale))&&(t.scale=1),(t.translate>=vq&&t.translate<=_q||isNaN(t.translate))&&(t.translate=0)}function th(t,e,n,r){dA(t.x,e.x,n.x,r?r.originX:void 0),dA(t.y,e.y,n.y,r?r.originY:void 0)}function fA(t,e,n){t.min=n.min+e.min,t.max=t.min+Hn(e)}function bq(t,e,n){fA(t.x,e.x,n.x),fA(t.y,e.y,n.y)}function mA(t,e,n){t.min=e.min-n.min,t.max=t.min+Hn(e)}function nh(t,e,n){mA(t.x,e.x,n.x),mA(t.y,e.y,n.y)}function Lr(t){return[t("x"),t("y")]}const BD=({current:t})=>t?t.ownerDocument.defaultView:null,pA=(t,e)=>Math.abs(t-e);function wq(t,e){const n=pA(t.x,e.x),r=pA(t.y,e.y);return Math.sqrt(n**2+r**2)}class HD{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=a0(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,T=wq(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!T)return;const{point:R}=_,{timestamp:I}=En;this.history.push({...R,timestamp:I});const{onStart:N,onMove:L}=this.handlers;b||(N&&N(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),L&&L(this.lastMoveEvent,_)},this.handlePointerMove=(_,b)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=o0(b,this.transformPagePoint),wt.update(this.updatePoint,!0)},this.handlePointerUp=(_,b)=>{this.end();const{onEnd:T,onSessionEnd:R,resumeAnimation:I}=this.handlers;if(this.dragSnapToOrigin&&I&&I(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=a0(_.type==="pointercancel"?this.lastMoveEventInfo:o0(b,this.transformPagePoint),this.history);this.startEvent&&T&&T(_,N),R&&R(_,N)},!vE(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=s||window;const u=Qh(e),d=o0(u,this.transformPagePoint),{point:f}=d,{timestamp:p}=En;this.history=[{...f,timestamp:p}];const{onSessionStart:v}=n;v&&v(e,a0(d,this.history)),this.removeListeners=Yh(eh(this.contextWindow,"pointermove",this.handlePointerMove),eh(this.contextWindow,"pointerup",this.handlePointerUp),eh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),To(this.updatePoint)}}function o0(t,e){return e?{point:e(t.point)}:t}function gA(t,e){return{x:t.x-e.x,y:t.y-e.y}}function a0({point:t},e){return{point:t,delta:gA(t,FD(e)),offset:gA(t,xq(e)),velocity:Tq(e,.1)}}function xq(t){return t[0]}function FD(t){return t[t.length-1]}function Tq(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=FD(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>ki(e)));)n--;if(!r)return{x:0,y:0};const a=Mi(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const c={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function Sq(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?At(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?At(n,t,r.max):Math.min(t,n)),t}function yA(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Aq(t,{top:e,left:n,bottom:r,right:s}){return{x:yA(t.x,n,s),y:yA(t.y,e,r)}}function vA(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Cq(t,e){return{x:vA(t.x,e.x),y:vA(t.y,e.y)}}function Rq(t,e){let n=.5;const r=Hn(t),s=Hn(e);return s>r?n=xh(e.min,e.max-r,t.min):r>s&&(n=xh(t.min,t.max-s,e.min)),bs(0,1,n)}function Iq(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Tv=.35;function Nq(t=Tv){return t===!1?t=0:t===!0&&(t=Tv),{x:_A(t,"left","right"),y:_A(t,"top","bottom")}}function _A(t,e,n){return{min:EA(t,e),max:EA(t,n)}}function EA(t,e){return typeof t=="number"?t:t[e]||0}const Dq=new WeakMap;class kq{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=jt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=v=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Qh(v).point)},c=(v,_)=>{const{drag:b,dragPropagation:T,onDragStart:R}=this.getProps();if(b&&!T&&(this.openDragLock&&this.openDragLock(),this.openDragLock=zF(b),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Lr(N=>{let L=this.getAxisMotionValue(N).get()||0;if(Pi.test(L)){const{projection:$}=this.visualElement;if($&&$.layout){const H=$.layout.layoutBox[N];H&&(L=Hn(H)*(parseFloat(L)/100))}}this.originPoint[N]=L}),R&&wt.postRender(()=>R(v,_)),wv(this.visualElement,"transform");const{animationState:I}=this.visualElement;I&&I.setActive("whileDrag",!0)},u=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_;const{dragPropagation:b,dragDirectionLock:T,onDirectionLock:R,onDrag:I}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:N}=_;if(T&&this.currentDirection===null){this.currentDirection=Mq(N),this.currentDirection!==null&&R&&R(this.currentDirection);return}this.updateAxis("x",_.point,N),this.updateAxis("y",_.point,N),this.visualElement.render(),I&&I(v,_)},d=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_,this.stop(v,_),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Lr(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new HD(e,{onSessionStart:a,onStart:c,onMove:u,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:r,contextWindow:BD(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!r)return;const{velocity:c}=s;this.startAnimation(c);const{onDragEnd:u}=this.getProps();u&&wt.postRender(()=>u(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Mf(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=Sq(c,this.constraints[e],this.elastic[e])),a.set(c)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&Bl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Aq(r.layoutBox,e):this.constraints=!1,this.elastic=Nq(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Lr(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Iq(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Bl(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=M$(r,s.root,this.visualElement.getTransformPagePoint());let c=Cq(s.layout.layoutBox,a);if(n){const u=n(N$(c));this.hasMutatedConstraints=!!u,u&&(c=CD(u))}return c}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:c,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},f=Lr(p=>{if(!Mf(p,n,this.currentDirection))return;let v=d&&d[p]||{};c&&(v={min:0,max:0});const _=s?200:1e6,b=s?40:1e7,T={type:"inertia",velocity:r?e[p]:0,bounceStiffness:_,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...a,...v};return this.startAxisValueAnimation(p,T)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return wv(this.visualElement,e),r.start(RE(e,r,0,n,this.visualElement,!1))}stopAnimation(){Lr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Lr(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Lr(n=>{const{drag:r}=this.getProps();if(!Mf(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:c,max:u}=s.layout.layoutBox[n];a.set(e[n]-At(c,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Bl(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Lr(c=>{const u=this.getAxisMotionValue(c);if(u&&this.constraints!==!1){const d=u.get();s[c]=Rq({min:d,max:d},this.constraints[c])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Lr(c=>{if(!Mf(c,e,null))return;const u=this.getAxisMotionValue(c),{min:d,max:f}=this.constraints[c];u.set(At(d,f,s[c]))})}addListeners(){if(!this.visualElement.current)return;Dq.set(this.visualElement,this);const e=this.visualElement.current,n=eh(e,"pointerdown",d=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Bl(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),wt.read(r);const c=Ih(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(Lr(p=>{const v=this.getAxisMotionValue(p);v&&(this.originPoint[p]+=d[p].translate,v.set(v.get()+d[p].translate))}),this.visualElement.render())});return()=>{c(),n(),a(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:c=Tv,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:c,dragMomentum:u}}}function Mf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Mq(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Pq extends No{constructor(e){super(e),this.removeGroupControls=jr,this.removeListeners=jr,this.controls=new kq(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||jr}unmount(){this.removeGroupControls(),this.removeListeners()}}const bA=t=>(e,n)=>{t&&wt.postRender(()=>t(e,n))};class Oq extends No{constructor(){super(...arguments),this.removePointerDownListener=jr}onPointerDown(e){this.session=new HD(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:BD(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:bA(e),onStart:bA(n),onMove:r,onEnd:(a,c)=>{delete this.session,s&&wt.postRender(()=>s(a,c))}}}mount(){this.removePointerDownListener=eh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Zf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function wA(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Pu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Oe.test(t))t=parseFloat(t);else return t;const n=wA(t,e.target.x),r=wA(t,e.target.y);return`${n}% ${r}%`}},Vq={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=So.parse(t);if(s.length>5)return r;const a=So.createTransformer(t),c=typeof s[0]!="number"?1:0,u=n.x.scale*e.x,d=n.y.scale*e.y;s[0+c]/=u,s[1+c]/=d;const f=At(u,d,.5);return typeof s[2+c]=="number"&&(s[2+c]/=f),typeof s[3+c]=="number"&&(s[3+c]/=f),a(s)}};let xA=!1;class Lq extends O.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=e;i$(Uq),a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),xA&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Zf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,{projection:c}=r;return c&&(c.isPresent=a,xA=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==a?c.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?c.promote():c.relegate()||wt.postRender(()=>{const u=c.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),yE.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function $D(t){const[e,n]=fD(),r=O.useContext(X_);return C.jsx(Lq,{...t,layoutGroup:r,switchLayoutGroup:O.useContext(SD),isPresent:e,safeToRemove:n})}const Uq={borderRadius:{...Pu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Pu,borderTopRightRadius:Pu,borderBottomLeftRadius:Pu,borderBottomRightRadius:Pu,boxShadow:Vq};function zq(t,e,n){const r=Nn(t)?t:dc(t);return r.start(RE("",r,e,n)),r.animation}const jq=(t,e)=>t.depth-e.depth;class Bq{constructor(){this.children=[],this.isDirty=!1}add(e){Z_(this.children,e),this.isDirty=!0}remove(e){J_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(jq),this.isDirty=!1,this.children.forEach(e)}}function Hq(t,e){const n=Zn.now(),r=({timestamp:s})=>{const a=s-n;a>=e&&(To(r),t(a-e))};return wt.setup(r,!0),()=>To(r)}const qD=["TopLeft","TopRight","BottomLeft","BottomRight"],Fq=qD.length,TA=t=>typeof t=="string"?parseFloat(t):t,SA=t=>typeof t=="number"||Oe.test(t);function $q(t,e,n,r,s,a){s?(t.opacity=At(0,n.opacity??1,qq(r)),t.opacityExit=At(e.opacity??1,0,Gq(r))):a&&(t.opacity=At(e.opacity??1,n.opacity??1,r));for(let c=0;c<Fq;c++){const u=`border${qD[c]}Radius`;let d=AA(e,u),f=AA(n,u);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||SA(d)===SA(f)?(t[u]=Math.max(At(TA(d),TA(f),r),0),(Pi.test(f)||Pi.test(d))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=At(e.rotate||0,n.rotate||0,r))}function AA(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const qq=GD(0,.5,MN),Gq=GD(.5,.95,jr);function GD(t,e,n){return r=>r<t?0:r>e?1:n(xh(t,e,r))}function CA(t,e){t.min=e.min,t.max=e.max}function Vr(t,e){CA(t.x,e.x),CA(t.y,e.y)}function RA(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function IA(t,e,n,r,s){return t-=e,t=Pm(t,1/n,r),s!==void 0&&(t=Pm(t,1/s,r)),t}function Yq(t,e=0,n=1,r=.5,s,a=t,c=t){if(Pi.test(e)&&(e=parseFloat(e),e=At(c.min,c.max,e/100)-c.min),typeof e!="number")return;let u=At(a.min,a.max,r);t===a&&(u-=e),t.min=IA(t.min,e,n,u,s),t.max=IA(t.max,e,n,u,s)}function NA(t,e,[n,r,s],a,c){Yq(t,e[n],e[r],e[s],e.scale,a,c)}const Kq=["x","scaleX","originX"],Xq=["y","scaleY","originY"];function DA(t,e,n,r){NA(t.x,e,Kq,n?n.x:void 0,r?r.x:void 0),NA(t.y,e,Xq,n?n.y:void 0,r?r.y:void 0)}function kA(t){return t.translate===0&&t.scale===1}function YD(t){return kA(t.x)&&kA(t.y)}function MA(t,e){return t.min===e.min&&t.max===e.max}function Qq(t,e){return MA(t.x,e.x)&&MA(t.y,e.y)}function PA(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function KD(t,e){return PA(t.x,e.x)&&PA(t.y,e.y)}function OA(t){return Hn(t.x)/Hn(t.y)}function VA(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Wq{constructor(){this.members=[]}add(e){Z_(this.members,e),e.scheduleRender()}remove(e){if(J_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Zq(t,e,n){let r="";const s=t.x.translate/e.x,a=t.y.translate/e.y,c=n?.z||0;if((s||a||c)&&(r=`translate3d(${s}px, ${a}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:p,rotateX:v,rotateY:_,skewX:b,skewY:T}=n;f&&(r=`perspective(${f}px) ${r}`),p&&(r+=`rotate(${p}deg) `),v&&(r+=`rotateX(${v}deg) `),_&&(r+=`rotateY(${_}deg) `),b&&(r+=`skewX(${b}deg) `),T&&(r+=`skewY(${T}deg) `)}const u=t.x.scale*e.x,d=t.y.scale*e.y;return(u!==1||d!==1)&&(r+=`scale(${u}, ${d})`),r||"none"}const l0=["","X","Y","Z"],Jq=1e3;let eG=0;function c0(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function XD(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=OD(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",wt,!(s||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&XD(r)}function QD({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(c={},u=e?.()){this.id=eG++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(rG),this.nodes.forEach(aG),this.nodes.forEach(lG),this.nodes.forEach(iG)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new Bq)}addEventListener(c,u){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new nE),this.eventHandlers.get(c).add(u)}notifyListeners(c,...u){const d=this.eventHandlers.get(c);d&&d.notify(...u)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=dD(c)&&!qF(c),this.instance=c;const{layoutId:u,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||u)&&(this.isLayoutDirty=!0),t){let p,v=0;const _=()=>this.root.updateBlockedByResize=!1;wt.read(()=>{v=window.innerWidth}),t(c,()=>{const b=window.innerWidth;b!==v&&(v=b,this.root.updateBlockedByResize=!0,p&&p(),p=Hq(_,250),Zf.hasAnimatedSinceResize&&(Zf.hasAnimatedSinceResize=!1,this.nodes.forEach(zA)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||d)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:v,hasRelativeLayoutChanged:_,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||f.getDefaultTransition()||fG,{onLayoutAnimationStart:R,onLayoutAnimationComplete:I}=f.getProps(),N=!this.targetLayout||!KD(this.targetLayout,b),L=!v&&_;if(this.options.layoutRoot||this.resumeFrom||L||v&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const $={...pE(T,"layout"),onPlay:R,onComplete:I};(f.shouldReduceMotion||this.options.layoutRoot)&&($.delay=0,$.type=!1),this.startAnimation($),this.setAnimationOrigin(p,L)}else v||zA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),To(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(cG),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&XD(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const v=this.path[p];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(LA);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(UA);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(oG),this.nodes.forEach(tG),this.nodes.forEach(nG)):this.nodes.forEach(UA),this.clearAllSnapshots();const u=Zn.now();En.delta=bs(0,1e3/60,u-En.timestamp),En.timestamp=u,En.isProcessing=!0,Zy.update.process(En),Zy.preRender.process(En),Zy.render.process(En),En.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,yE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(sG),this.sharedNodes.forEach(uG)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,wt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){wt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Hn(this.snapshot.measuredBox.x)&&!Hn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=jt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(u=!1),u&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!YD(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;c&&this.instance&&(u||ha(this.latestValues)||p)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return c&&(d=this.removeTransform(d)),mG(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return jt();const u=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(pG))){const{scroll:f}=this.root;f&&(Hl(u.x,f.offset.x),Hl(u.y,f.offset.y))}return u}removeElementScroll(c){const u=jt();if(Vr(u,c),this.scroll?.wasRoot)return u;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:p,options:v}=f;f!==this.root&&p&&v.layoutScroll&&(p.wasRoot&&Vr(u,c),Hl(u.x,p.offset.x),Hl(u.y,p.offset.y))}return u}applyTransform(c,u=!1){const d=jt();Vr(d,c);for(let f=0;f<this.path.length;f++){const p=this.path[f];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Fl(d,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),ha(p.latestValues)&&Fl(d,p.latestValues)}return ha(this.latestValues)&&Fl(d,this.latestValues),d}removeTransform(c){const u=jt();Vr(u,c);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!ha(f.latestValues))continue;vv(f.latestValues)&&f.updateSnapshot();const p=jt(),v=f.measurePageBox();Vr(p,v),DA(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return ha(this.latestValues)&&DA(u,this.latestValues),u}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==En.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(c||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:v}=this.options;if(!(!this.layout||!(p||v))){if(this.resolvedRelativeTargetAt=En.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jt(),this.relativeTargetOrigin=jt(),nh(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),Vr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=jt(),this.targetWithTransforms=jt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),bq(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Vr(this.target,this.layout.layoutBox),ID(this.target,this.targetDelta)):Vr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jt(),this.relativeTargetOrigin=jt(),nh(this.relativeTargetOrigin,this.target,_.target),Vr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||vv(this.parent.latestValues)||RD(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const c=this.getLead(),u=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===En.timestamp&&(d=!1),d)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;Vr(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,_=this.treeScale.y;k$(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=jt());const{target:b}=c;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(RA(this.prevProjectionDelta.x,this.projectionDelta.x),RA(this.prevProjectionDelta.y,this.projectionDelta.y)),th(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==_||!VA(this.projectionDelta.x,this.prevProjectionDelta.x)||!VA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=$l(),this.projectionDelta=$l(),this.projectionDeltaWithTransform=$l()}setAnimationOrigin(c,u=!1){const d=this.snapshot,f=d?d.latestValues:{},p={...this.latestValues},v=$l();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const _=jt(),b=d?d.source:void 0,T=this.layout?this.layout.source:void 0,R=b!==T,I=this.getStack(),N=!I||I.members.length<=1,L=!!(R&&!N&&this.options.crossfade===!0&&!this.path.some(dG));this.animationProgress=0;let $;this.mixTargetDelta=H=>{const G=H/1e3;jA(v.x,c.x,G),jA(v.y,c.y,G),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(nh(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),hG(this.relativeTarget,this.relativeTargetOrigin,_,G),$&&Qq(this.relativeTarget,$)&&(this.isProjectionDirty=!1),$||($=jt()),Vr($,this.relativeTarget)),R&&(this.animationValues=p,$q(p,f,this.latestValues,G,L,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=G},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(To(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=wt.update(()=>{Zf.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=dc(0)),this.currentAnimation=zq(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),c.onUpdate&&c.onUpdate(u)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Jq),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:u,target:d,layout:f,latestValues:p}=c;if(!(!u||!d||!f)){if(this!==c&&this.layout&&f&&WD(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||jt();const v=Hn(this.layout.layoutBox.x);d.x.min=c.target.x.min,d.x.max=d.x.min+v;const _=Hn(this.layout.layoutBox.y);d.y.min=c.target.y.min,d.y.max=d.y.min+_}Vr(u,d),Fl(u,p),th(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(c,u){this.sharedNodes.has(c)||this.sharedNodes.set(c,new Wq),this.sharedNodes.get(c).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:u,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),c&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let u=!1;const{latestValues:d}=c;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const f={};d.z&&c0("z",c,f,this.animationValues);for(let p=0;p<l0.length;p++)c0(`rotate${l0[p]}`,c,f,this.animationValues),c0(`skew${l0[p]}`,c,f,this.animationValues);c.render();for(const p in f)c.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);c.scheduleRender()}applyProjectionStyles(c,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=Wf(u?.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=Wf(u?.pointerEvents)||""),this.hasProjected&&!ha(this.latestValues)&&(c.transform=d?d({},""):"none",this.hasProjected=!1);return}c.visibility="";const p=f.animationValues||f.latestValues;this.applyTransformsToTarget();let v=Zq(this.projectionDeltaWithTransform,this.treeScale,p);d&&(v=d(p,v)),c.transform=v;const{x:_,y:b}=this.projectionDelta;c.transformOrigin=`${_.origin*100}% ${b.origin*100}% 0`,f.animationValues?c.opacity=f===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const T in Ch){if(p[T]===void 0)continue;const{correct:R,applyTo:I,isCSSVariable:N}=Ch[T],L=v==="none"?p[T]:R(p[T],f);if(I){const $=I.length;for(let H=0;H<$;H++)c[I[H]]=L}else N?this.options.visualElement.renderState.vars[T]=L:c[T]=L}this.options.layoutId&&(c.pointerEvents=f===this?Wf(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(LA),this.root.sharedNodes.clear()}}}function tG(t){t.updateLayout()}function nG(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:s}=t.options,a=e.source!==t.layout.source;s==="size"?Lr(p=>{const v=a?e.measuredBox[p]:e.layoutBox[p],_=Hn(v);v.min=n[p].min,v.max=v.min+_}):WD(s,e.layoutBox,n)&&Lr(p=>{const v=a?e.measuredBox[p]:e.layoutBox[p],_=Hn(n[p]);v.max=v.min+_,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+_)});const c=$l();th(c,n,e.layoutBox);const u=$l();a?th(u,t.applyTransform(r,!0),e.measuredBox):th(u,n,e.layoutBox);const d=!YD(c);let f=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:v,layout:_}=p;if(v&&_){const b=jt();nh(b,e.layoutBox,v.layoutBox);const T=jt();nh(T,n,_.layoutBox),KD(b,T)||(f=!0),p.options.layoutRoot&&(t.relativeTarget=T,t.relativeTargetOrigin=b,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:u,layoutDelta:c,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function rG(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function iG(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function sG(t){t.clearSnapshot()}function LA(t){t.clearMeasurements()}function UA(t){t.isLayoutDirty=!1}function oG(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function zA(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function aG(t){t.resolveTargetDelta()}function lG(t){t.calcProjection()}function cG(t){t.resetSkewAndRotation()}function uG(t){t.removeLeadSnapshot()}function jA(t,e,n){t.translate=At(e.translate,0,n),t.scale=At(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function BA(t,e,n,r){t.min=At(e.min,n.min,r),t.max=At(e.max,n.max,r)}function hG(t,e,n,r){BA(t.x,e.x,n.x,r),BA(t.y,e.y,n.y,r)}function dG(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const fG={duration:.45,ease:[.4,0,.1,1]},HA=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),FA=HA("applewebkit/")&&!HA("chrome/")?Math.round:jr;function $A(t){t.min=FA(t.min),t.max=FA(t.max)}function mG(t){$A(t.x),$A(t.y)}function WD(t,e,n){return t==="position"||t==="preserve-aspect"&&!Eq(OA(e),OA(n),.2)}function pG(t){return t!==t.root&&t.scroll?.wasRoot}const gG=QD({attachResizeListener:(t,e)=>Ih(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),u0={current:void 0},ZD=QD({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!u0.current){const t=new gG({});t.mount(window),t.setOptions({layoutScroll:!0}),u0.current=t}return u0.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),yG={pan:{Feature:Oq},drag:{Feature:Pq,ProjectionNode:ZD,MeasureLayout:$D}};function qA(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,a=r[s];a&&wt.postRender(()=>a(e,Qh(e)))}class vG extends No{mount(){const{current:e}=this.node;e&&(this.unmount=jF(e,(n,r)=>(qA(this.node,r,"Start"),s=>qA(this.node,s,"End"))))}unmount(){}}class _G extends No{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Yh(Ih(this.node.current,"focus",()=>this.onFocus()),Ih(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function GA(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),a=r[s];a&&wt.postRender(()=>a(e,Qh(e)))}class EG extends No{mount(){const{current:e}=this.node;e&&(this.unmount=$F(e,(n,r)=>(GA(this.node,r,"Start"),(s,{success:a})=>GA(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Sv=new WeakMap,h0=new WeakMap,bG=t=>{const e=Sv.get(t.target);e&&e(t)},wG=t=>{t.forEach(bG)};function xG({root:t,...e}){const n=t||document;h0.has(n)||h0.set(n,{});const r=h0.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(wG,{root:t,...e})),r[s]}function TG(t,e,n){const r=xG(e);return Sv.set(t,n),r.observe(t),()=>{Sv.delete(t),r.unobserve(t)}}const SG={some:0,all:1};class AG extends No{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=e,c={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:SG[s]},u=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:v}=this.node.getProps(),_=f?p:v;_&&_(d)};return TG(this.node.current,c,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(CG(e,n))&&this.startObserver()}unmount(){}}function CG({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const RG={inView:{Feature:AG},tap:{Feature:EG},focus:{Feature:_G},hover:{Feature:vG}},IG={layout:{ProjectionNode:ZD,MeasureLayout:$D}},NG={...mq,...RG,...yG,...IG},d0=I$(NG,H$),vr={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},dr={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function DG(){const[t,e]=O.useState(""),[n,r]=O.useState(""),[s,a]=O.useState(!1),[c,u]=O.useState(!1),[d,f]=O.useState(!1),[p,v]=O.useState(""),_=async R=>{R.preventDefault(),f(!0),v("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(dr.INVALID_EMAIL);if(n.length<6)throw new Error(dr.WEAK_PASSWORD);const N=s?B8:H8,{user:L}=await N(K_,t,n);console.info("Auth success  uid:",L.uid)}catch(I){v(b(I))}finally{f(!1)}},b=R=>{switch(R.code){case"auth/email-already-in-use":return dr.EMAIL_IN_USE;case"auth/invalid-email":return dr.INVALID_EMAIL;case"auth/weak-password":return dr.WEAK_PASSWORD;case"auth/user-not-found":return dr.USER_NOT_FOUND;case"auth/wrong-password":return dr.WRONG_PASSWORD;case"auth/too-many-requests":return dr.TOO_MANY_REQUESTS;case"auth/user-disabled":return"This account has been disabled. Please contact support.";default:return R.message||"Authentication error"}},T="w-full px-4 py-3 rounded-lg border bg-white/80 dark:bg-gray-800/80 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 transition";return C.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900/40 dark:bg-gray-950/60 backdrop-blur-sm p-4",children:C.jsxs(d0.div,{initial:{opacity:0,scale:.96},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.25},className:"w-full max-w-md rounded-3xl shadow-lg bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 overflow-hidden",children:[C.jsxs("div",{className:"px-8 pt-8 pb-4 text-center",children:[C.jsx(JS,{mode:"wait",children:C.jsx(d0.h2,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.25},className:"text-3xl font-semibold text-gray-900 dark:text-gray-100",children:s?"Create an account":"Welcome back"},s?"signup-header":"signin-header")}),C.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:s?"Start your AIpowered journey.":"Sign in to continue."})]}),C.jsxs("form",{onSubmit:_,className:"px-8 pb-8 space-y-6",children:[C.jsxs("div",{children:[C.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),C.jsxs("div",{className:"relative",children:[C.jsx(BB,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),C.jsx("input",{id:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:R=>e(R.target.value),placeholder:"you@example.com",className:`${T} pl-11`})]})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),C.jsxs("div",{className:"relative",children:[C.jsx(XB,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),C.jsx("input",{id:"password",type:c?"text":"password",autoComplete:s?"new-password":"current-password",required:!0,value:n,onChange:R=>r(R.target.value),placeholder:"",className:`${T} pl-11 pr-11`}),C.jsx("button",{type:"button",onClick:()=>u(R=>!R),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300","aria-label":c?"Hide password":"Show password",children:c?C.jsx(qB,{className:"h-5 w-5"}):C.jsx(YB,{className:"h-5 w-5"})})]})]}),C.jsx(JS,{children:p&&C.jsxs(d0.div,{initial:{y:-6,opacity:0},animate:{y:0,opacity:1},exit:{y:-6,opacity:0},className:"flex items-start gap-3 rounded-lg border border-red-300 dark:border-red-800 bg-red-50 dark:bg-red-900/30 px-4 py-3 text-sm text-red-700 dark:text-red-300",role:"alert",children:[C.jsx(FB,{className:"h-5 w-5 flex-shrink-0"}),C.jsx("span",{children:p})]},"error")}),C.jsxs("button",{type:"submit",disabled:d,className:"inline-flex w-full items-center justify-center gap-2 rounded-lg bg-indigo-600 px-4 py-3 font-medium text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-indigo-500 dark:hover:bg-indigo-400",children:[d?C.jsxs("svg",{className:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[C.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),C.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}):s?C.jsx(WB,{className:"h-5 w-5"}):C.jsx(zB,{className:"h-5 w-5"}),C.jsx("span",{children:d?s?"Creating account":"Signing in":s?"Sign Up":"Sign In"})]})]}),C.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 px-8 py-4 text-center",children:[C.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s?"Already have an account?":"New to TinkFlow?"}),C.jsx("button",{onClick:()=>a(R=>!R),type:"button",className:"mt-2 text-sm font-medium text-indigo-600 hover:text-indigo-500 focus:outline-none dark:text-indigo-400 dark:hover:text-indigo-300",children:s?"Sign In":"Create an account"})]})]})})}function kG({show:t,onHide:e,onConfirm:n,isCreating:r=!1}){const[s,a]=O.useState(""),[c,u]=O.useState(!0),d=_=>{const b=_.target.value;a(b),u(b.trim().length>0&&b.trim().length<=50)},f=_=>{_.preventDefault();const b=s.trim();b.length>0&&b.length<=50&&(n(b),a(""),u(!0))},p=()=>{a(""),u(!0),e()},v=_=>{_.key==="Enter"&&f(_)};return t?C.jsx("div",{className:"board-name-modal fixed inset-0 bg-black/60 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-[2001]",children:C.jsxs("div",{className:"bg-gray-800 dark:bg-gray-900 rounded-xl shadow-2xl p-6 w-full max-w-md border border-gray-700 dark:border-gray-600",children:[C.jsxs("div",{className:"flex justify-between items-center mb-6",children:[C.jsx("h3",{className:"text-lg font-semibold text-white dark:text-white",children:"Create New Board"}),C.jsx("button",{onClick:p,className:`text-gray-400 dark:text-gray-400 hover:text-gray-200 dark:hover:text-gray-200 
                                 bg-gray-700/50 dark:bg-gray-800/50 hover:bg-gray-600/50 dark:hover:bg-gray-700/50
                                 border border-gray-600 dark:border-gray-700 rounded-lg w-8 h-8 flex items-center justify-center
                                 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500/20`,"aria-label":"Close",children:""})]}),C.jsxs("form",{onSubmit:f,className:"space-y-4",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-300 dark:text-gray-300 mb-2",children:"Board Name"}),C.jsx("input",{type:"text",value:s,onChange:d,onKeyDown:v,placeholder:"Enter board name...",maxLength:50,autoFocus:!0,className:`w-full px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border rounded-lg 
                                       text-white dark:text-white placeholder-gray-400 dark:placeholder-gray-500 
                                       focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40 
                                       transition-all duration-200 font-medium
                                       ${c?"border-gray-600/50 dark:border-gray-700/50 focus:border-blue-500/60 dark:focus:border-blue-400/60":"border-red-500/60 dark:border-red-500/60 focus:border-red-500/60 dark:focus:border-red-500/60"}`}),!c&&C.jsx("p",{className:"text-red-400 dark:text-red-400 text-sm mt-2",children:"Board name must be between 1 and 50 characters long."}),C.jsxs("p",{className:`text-xs mt-1 ${s.length===50?"text-red-400 dark:text-red-400":"text-gray-500 dark:text-gray-500"}`,children:[s.length,"/50 characters"]})]}),C.jsxs("div",{className:"flex gap-3 pt-4",children:[C.jsx("button",{type:"button",onClick:p,disabled:r,className:`flex-1 px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border border-gray-600/50 dark:border-gray-700/50
                                     text-gray-300 dark:text-gray-300 rounded-lg font-medium transition-all duration-200
                                     hover:bg-gray-600/60 dark:hover:bg-gray-700/60 hover:border-gray-500/60 dark:hover:border-gray-600/60
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20`,children:"Cancel"}),C.jsx("button",{type:"submit",disabled:!c||s.trim().length===0||r,className:`flex-1 px-4 py-3 bg-blue-600/80 dark:bg-blue-500/80 border border-blue-500/50 dark:border-blue-400/50
                                     text-white rounded-lg font-medium transition-all duration-200 
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     hover:bg-blue-500/90 dark:hover:bg-blue-400/90 hover:border-blue-400/60 dark:hover:border-blue-300/60
                                     focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40`,children:r?"Creating...":"Create Board"})]})]})]})}):null}function MG({allBoards:t,currentBoard:e,onSwitchBoard:n,onCreateBoard:r,onDeleteBoard:s,onSignOut:a,isLoading:c}){const[u,d]=O.useState(!1),[f,p]=O.useState(!1),[v,_]=O.useState(null),b=async N=>{try{d(!0),await r(N),p(!1)}catch(L){console.error("Error in sidebar create board:",L)}finally{d(!1)}},T=()=>{p(!0)},R=()=>{p(!1)},I=(N,L)=>{N.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&s(L)};return C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"left-0 top-0 w-[100%] h-screen bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:C.jsxs("div",{className:"flex flex-col h-full",children:[C.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/50",children:[C.jsx("h2",{className:"m-0 mb-3 text-sm font-semibold text-gray-900 dark:text-gray-100 tracking-tight",children:"TinkFlow Boards"}),C.jsx("button",{onClick:T,disabled:c||u,className:`w-full bg-blue-600 dark:bg-blue-600 text-white dark:text-white border border-blue-600 dark:border-blue-600 
                                      px-3 py-2 rounded-lg cursor-pointer text-xs font-medium transition-all duration-200 
                                      ${c||u?"cursor-not-allowed opacity-60":"hover:bg-blue-700 dark:hover:bg-blue-700 hover:border-blue-700 dark:hover:border-blue-700 hover:-translate-y-0.5 hover:shadow-md"}`,children:u?"Creating...":"+ New Board"})]}),C.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:t.map(N=>{const L=e?.id===N.id,$=v===N.id;return C.jsxs("div",{onClick:()=>!c&&n(N.id),onMouseEnter:()=>_(N.id),onMouseLeave:()=>_(null),className:`
                                        min-h-[44px] px-3 py-2.5 mb-1 rounded-lg flex justify-between items-center
                                        transition-all duration-200 cursor-pointer border font-medium text-sm leading-tight
                                        ${c?"cursor-not-allowed opacity-60":"cursor-pointer"}
                                        ${L?"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/30 text-blue-900 dark:text-blue-100 font-semibold shadow-sm":$?"border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50 text-gray-900 dark:text-gray-100 shadow-sm":"border-transparent bg-transparent text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/30"}
                                    `,role:"button",tabIndex:0,onKeyDown:H=>{(H.key==="Enter"||H.key===" ")&&!c&&n(N.id)},children:[C.jsx("span",{className:`
                                        ${L?"font-semibold":"font-medium"} 
                                        flex-1 whitespace-nowrap overflow-hidden text-ellipsis 
                                        text-sm leading-tight
                                    `,children:N.name}),C.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[N.isOpen&&C.jsx("span",{className:"text-green-500 dark:text-green-400 text-xs",children:""}),t.length>1&&C.jsx("button",{onClick:H=>{H.stopPropagation(),I(H,N.id)},title:"Delete board",className:`
                                                    w-5 h-5 bg-transparent border-none text-red-500 dark:text-red-400 
                                                    cursor-pointer text-sm leading-none flex items-center justify-center
                                                    rounded transition-all duration-150
                                                    ${$?"opacity-100 visible hover:bg-red-50 dark:hover:bg-red-900/30":"opacity-0 invisible"}
                                                    hover:text-red-600 dark:hover:text-red-300
                                                `,children:""})]})]},N.id)})}),c&&C.jsx("div",{className:"p-3 text-center text-gray-500 dark:text-gray-400 text-xs font-medium",children:"Loading boards..."}),C.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:C.jsx("button",{onClick:a,className:`w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 
                                     bg-transparent text-gray-700 dark:text-gray-300 cursor-pointer text-xs font-medium
                                     transition-all duration-200
                                     hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:border-gray-400 dark:hover:border-gray-500 
                                     hover:text-gray-900 dark:hover:text-gray-100`,children:"Sign Out"})})]})}),C.jsx(kG,{show:f,onHide:R,onConfirm:b,isCreating:u})]})}const JD=O.createContext(void 0),PG=()=>{const t=O.useContext(JD);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},OG=({children:t})=>{const[e,n]=O.useState(()=>{const s=localStorage.getItem("theme");return s||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});O.useEffect(()=>{const s=window.document.documentElement;s.classList.remove("light","dark"),s.classList.add(e),localStorage.setItem("theme",e)},[e]);const r=()=>{n(s=>s==="light"?"dark":"light")};return C.jsx(JD.Provider,{value:{theme:e,toggleTheme:r},children:t})},ek=()=>{const{theme:t,toggleTheme:e}=PG();return C.jsx("button",{onClick:e,className:`p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 
                     hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600
                     hover:border-gray-300 dark:hover:border-gray-500 transition-all duration-200 
                     focus:outline-none focus:ring-2 focus:ring-blue-500/30 dark:focus:ring-blue-400/30
                     shadow-sm hover:shadow-md`,title:`Switch to ${t==="light"?"dark":"light"} mode`,"aria-label":`Switch to ${t==="light"?"dark":"light"} mode`,children:t==="light"?C.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):C.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})})})};function VG({name:t,onSetName:e,user:n,isSaving:r}){const[s,a]=O.useState(!1),[c,u]=O.useState(t||"");O.useEffect(()=>{u(t||"")},[t]);const d=p=>{p.key==="Enter"&&(e(c),a(!1))},f=()=>{a(!0),u(t||"")};return C.jsx(C.Fragment,{children:C.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:C.jsx("div",{className:"max-w-none mx-auto px-4",children:C.jsxs("header",{className:"flex justify-between items-center py-3",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-sm",children:C.jsx("span",{className:"text-white font-bold text-sm",children:"T"})}),C.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"TinkFlow"})]}),C.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:""}),s?C.jsx("input",{type:"text",value:c,onChange:p=>u(p.target.value),onKeyDown:d,onBlur:()=>{e(c),a(!1)},className:`bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 
                                             rounded-md px-2 py-1 text-gray-900 dark:text-gray-100 text-sm min-w-[120px]
                                             focus:outline-none focus:border-blue-500 dark:focus:border-blue-400 focus:ring-2 focus:ring-blue-500/20`,autoFocus:!0}):C.jsx("button",{onClick:f,className:`bg-transparent border-none text-gray-600 dark:text-gray-400 text-sm cursor-pointer 
                                             px-2 py-1 rounded-md transition-all duration-150 ease-in-out
                                             hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-100`,children:t||"Untitled Board"})]}),C.jsxs("div",{className:"flex items-center gap-3",children:[r&&C.jsxs("div",{className:`text-green-600 dark:text-green-400 text-sm flex items-center gap-2 
                                               bg-green-50 dark:bg-green-900/20 px-3 py-1.5 rounded-full border border-green-200 dark:border-green-700/50
                                               animate-pulse`,children:[C.jsx("div",{className:"w-2 h-2 bg-green-500 dark:bg-green-400 rounded-full animate-bounce"}),C.jsx("span",{className:"font-medium",children:"Saving..."})]}),C.jsx(ek,{}),C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-gray-400 to-gray-500 rounded-full flex items-center justify-center",children:C.jsx("span",{className:"text-white font-medium text-xs",children:n?.isAnonymous?"G":n?.email?.charAt(0).toUpperCase()||"U"})}),C.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm font-medium",children:n?.isAnonymous?"Guest":n?.email?.split("@")[0]||"User"})]})]})]})})})})}const LG=({notification:t,onRemove:e})=>{const n=s=>{switch(s){case"success":return"";case"error":return"";case"warning":return"";case"info":return"";default:return""}},r=s=>{switch(s){case"success":return"bg-green-900/20 dark:bg-green-900/30 border-green-500/30 dark:border-green-500/40 text-green-300 dark:text-green-400";case"error":return"bg-red-900/20 dark:bg-red-900/30 border-red-500/30 dark:border-red-500/40 text-red-300 dark:text-red-400";case"warning":return"bg-yellow-900/20 dark:bg-yellow-900/30 border-yellow-500/30 dark:border-yellow-500/40 text-yellow-300 dark:text-yellow-400";case"info":return"bg-blue-900/20 dark:bg-blue-900/30 border-blue-500/30 dark:border-blue-500/40 text-blue-300 dark:text-blue-400";default:return"bg-gray-900/20 dark:bg-gray-900/30 border-gray-500/30 dark:border-gray-500/40 text-gray-300 dark:text-gray-400"}};return C.jsxs("div",{className:`notification relative min-w-80 max-w-md p-4 rounded-xl border shadow-2xl backdrop-blur-sm                         transform transition-all duration-300 ease-out hover:scale-[1.02] hover:shadow-3xl                        ${r(t.type)}`,children:[" ",C.jsxs("div",{className:"flex items-start gap-3",children:[" ",C.jsxs("span",{className:"text-lg flex-shrink-0 mt-0.5",children:[" ",n(t.type)," "]})," ",C.jsxs("div",{className:"flex-1 min-w-0",children:[" ",C.jsxs("p",{className:"text-sm font-medium leading-5 break-words",children:[" ",t.message," "]})," "]})," ",C.jsxs("button",{onClick:()=>e(t.id),className:"flex-shrink-0 text-gray-400 dark:text-gray-500 hover:text-gray-200 dark:hover:text-gray-300                              hover:bg-gray-700/50 dark:hover:bg-gray-600/50                              rounded-full p-1 transition-all duration-200                              focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20","aria-label":"Close notification",children:[" ",C.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[" ",C.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})," "]})," "]})," "]})," "]})},UG=({notifications:t,onRemove:e})=>C.jsxs("div",{className:"notification-container fixed top-4 right-4 space-y-3 z-[2000] pointer-events-none",children:[" ",t.map(n=>C.jsxs("div",{className:"pointer-events-auto",children:[" ",C.jsx(LG,{notification:n,onRemove:e})," "]},n.id))," "]});function zG({onLogin:t}){return C.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 antialiased",children:[" "," ",C.jsxs("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50",children:[" ",C.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",C.jsxs("div",{className:"flex justify-between items-center py-4",children:[" ",C.jsxs("div",{className:"flex items-center space-x-3",children:[" ",C.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",C.jsx("span",{className:"text-white font-bold text-lg",children:"T"})," "]})," ",C.jsxs("div",{className:"flex flex-col",children:[" ",C.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white tracking-tight",children:"TinkFlow"})," ",C.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"AI Learning Platform"})," "]})," "]})," ",C.jsxs("div",{className:"flex items-center gap-4",children:[" ",C.jsx(ek,{})," ",C.jsxs("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors duration-200",children:[" ","Get Started"," "]})," "]})," "]})," "]})," "]})," "," ",C.jsxs("section",{className:"relative overflow-hidden",children:[" ",C.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-32",children:[" ",C.jsxs("div",{className:"text-center",children:[" ",C.jsxs("div",{className:"inline-flex items-center gap-2 bg-indigo-50 dark:bg-indigo-900/20 px-4 py-2 rounded-full mb-8",children:[" ",C.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"})," ",C.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 font-medium text-sm",children:"AI-Powered Concept Learning"})," "]})," ",C.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-gray-900 dark:text-white mb-6 leading-tight",children:[" ","Learn & Tinker with"," ",C.jsxs("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent block",children:[" ","AI-Powered Concepts"," "]})," "]})," ",C.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-3xl mx-auto leading-relaxed",children:[" ","TinkFlow is the ultimate AI-powered platform for exploring, understanding, and experimenting with new concepts. Transform your learning journey with interactive visual flows and intelligent insights."," "]})," ",C.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[" ",C.jsxs("button",{onClick:t,className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning Now"," "]})," ",C.jsxs("button",{className:"px-8 py-4 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-semibold text-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",children:[" ","Watch Demo"," "]})," "]})," "]})," "]})," "," ",C.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-indigo-400 to-purple-500 rounded-full opacity-10 blur-3xl"})," ",C.jsx("div",{className:"absolute top-1/4 right-1/4 w-64 h-64 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full opacity-10 blur-2xl"})," "]})," "," ",C.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",C.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",C.jsxs("div",{className:"text-center mb-16",children:[" ",C.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Everything You Need to Learn"," "]})," ",C.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","AI-powered tools and features designed to accelerate your learning and conceptual understanding"," "]})," "]})," ",C.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",C.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-indigo-200 dark:border-indigo-700/50 hover:transform hover:-translate-y-1",children:[" ",C.jsxs("div",{className:"w-14 h-14 bg-indigo-500 rounded-xl flex items-center justify-center mb-6",children:[" ",C.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})," "]})," "]})," ",C.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI-Powered Insights"," "]})," ",C.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Get intelligent explanations and connections between concepts powered by advanced AI that understands your learning style."," "]})," "]})," ",C.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-purple-200 dark:border-purple-700/50 hover:transform hover:-translate-y-1",children:[" ",C.jsxs("div",{className:"w-14 h-14 bg-purple-500 rounded-xl flex items-center justify-center mb-6",children:[" ",C.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"})," "]})," "]})," ",C.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Interactive Visual Flows"," "]})," ",C.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Build and explore concept maps with interactive nodes that respond to your curiosity and create dynamic learning pathways."," "]})," "]})," ",C.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-green-200 dark:border-green-700/50 hover:transform hover:-translate-y-1",children:[" ",C.jsxs("div",{className:"w-14 h-14 bg-green-500 rounded-xl flex items-center justify-center mb-6",children:[" ",C.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})," "]})," "]})," ",C.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Experimentation Sandbox"," "]})," ",C.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Tinker with concepts in a safe, guided environment where you can test ideas and see instant results with AI feedback."," "]})," "]})," "]})," "]})," "]})," "," ",C.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",C.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",C.jsxs("div",{className:"text-center mb-16",children:[" ",C.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","How TinkFlow Works"," "]})," ",C.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Three simple steps to unlock your learning potential with AI-powered concept exploration"," "]})," "]})," ",C.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",C.jsxs("div",{className:"text-center",children:[" ",C.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",C.jsx("span",{className:"text-white font-bold text-xl",children:"1"})," "]})," ",C.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Input Your Concept"," "]})," ",C.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Start by entering any topic, question, or concept you want to explore. Our AI understands context and complexity."," "]})," "]})," ",C.jsxs("div",{className:"text-center",children:[" ",C.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",C.jsx("span",{className:"text-white font-bold text-xl",children:"2"})," "]})," ",C.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI Generates Flow"," "]})," ",C.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Watch as TinkFlow creates an interactive visual map with connected nodes, each representing key aspects of your concept."," "]})," "]})," ",C.jsxs("div",{className:"text-center",children:[" ",C.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",C.jsx("span",{className:"text-white font-bold text-xl",children:"3"})," "]})," ",C.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Explore & Learn"," "]})," ",C.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Click on any node to dive deeper, ask questions, and watch new connections emerge as you explore your learning path."," "]})," "]})," "]})," "]})," "]})," "," ",C.jsxs("section",{className:"py-20 bg-gradient-to-r from-indigo-500 to-purple-600",children:[" ",C.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",C.jsxs("div",{className:"grid md:grid-cols-4 gap-8 text-center",children:[" ",C.jsxs("div",{className:"text-white",children:[" ",C.jsx("div",{className:"text-4xl font-bold mb-2",children:"27K+"})," ",C.jsx("div",{className:"text-indigo-100",children:"Concepts Explored"})," "]})," ",C.jsxs("div",{className:"text-white",children:[" ",C.jsx("div",{className:"text-4xl font-bold mb-2",children:"2.4K+"})," ",C.jsx("div",{className:"text-indigo-100",children:"Active Learners"})," "]})," ",C.jsxs("div",{className:"text-white",children:[" ",C.jsx("div",{className:"text-4xl font-bold mb-2",children:"98%"})," ",C.jsx("div",{className:"text-indigo-100",children:"Learning Success"})," "]})," ",C.jsxs("div",{className:"text-white",children:[" ",C.jsx("div",{className:"text-4xl font-bold mb-2",children:"24/7"})," ",C.jsx("div",{className:"text-indigo-100",children:"AI Support"})," "]})," "]})," "]})," "]})," "," ",C.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",C.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",C.jsxs("div",{className:"text-center mb-16",children:[" ",C.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Perfect for Every Learning Style"," "]})," ",C.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Whether you're a student, researcher, or curious mind, TinkFlow adapts to your learning needs"," "]})," "]})," ",C.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[" ",C.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/10 dark:to-blue-800/10 p-8 rounded-2xl border border-blue-200 dark:border-blue-700/30",children:[" ",C.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Academic Learning"," "]})," ",C.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Break down complex academic subjects into digestible, interconnected concepts. Perfect for studying sciences, humanities, and technical topics."," "]})," ",C.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",C.jsx("li",{children:" Research paper analysis"})," ",C.jsx("li",{children:" Concept mapping for exams"})," ",C.jsx("li",{children:" Cross-disciplinary connections"})," "]})," "]})," ",C.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/10 dark:to-purple-800/10 p-8 rounded-2xl border border-purple-200 dark:border-purple-700/30",children:[" ",C.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Creative Exploration"," "]})," ",C.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Explore ideas, brainstorm solutions, and discover unexpected connections. Great for creative professionals and innovators."," "]})," ",C.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",C.jsx("li",{children:" Idea generation workflows"})," ",C.jsx("li",{children:" Problem-solving frameworks"})," ",C.jsx("li",{children:" Innovation mapping"})," "]})," "]})," ",C.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/10 dark:to-green-800/10 p-8 rounded-2xl border border-green-200 dark:border-green-700/30",children:[" ",C.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Technical Deep Dives"," "]})," ",C.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Understand complex systems, architectures, and technologies through interactive exploration and AI-guided explanations."," "]})," ",C.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",C.jsx("li",{children:" System architecture learning"})," ",C.jsx("li",{children:" Technology stack exploration"})," ",C.jsx("li",{children:" Code concept mapping"})," "]})," "]})," ",C.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/10 dark:to-orange-800/10 p-8 rounded-2xl border border-orange-200 dark:border-orange-700/30",children:[" ",C.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Professional Development"," "]})," ",C.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Build skills, understand industry trends, and create learning paths for career advancement with AI-powered insights."," "]})," ",C.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",C.jsx("li",{children:" Skill gap analysis"})," ",C.jsx("li",{children:" Career pathway planning"})," ",C.jsx("li",{children:" Industry trend mapping"})," "]})," "]})," "]})," "]})," "]})," "," ",C.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",C.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[" ",C.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-6",children:[" ","Ready to Transform Your Learning?"," "]})," ",C.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10",children:[" ","Join thousands of learners who are already exploring concepts in revolutionary ways with TinkFlow's AI-powered platform."," "]})," ",C.jsxs("button",{onClick:t,className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-12 py-4 rounded-xl text-lg font-semibold hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning for Free"," "]})," ",C.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:[" ","No credit card required  Get started in seconds"," "]})," "]})," "]})," "," ",C.jsxs("footer",{className:"bg-gray-900 text-white py-12",children:[" ",C.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",C.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[" ",C.jsxs("div",{className:"col-span-1",children:[" ",C.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[" ",C.jsxs("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",C.jsx("span",{className:"text-white font-bold text-sm",children:"T"})," "]})," ",C.jsx("span",{className:"text-xl font-bold",children:"TinkFlow"})," "]})," ",C.jsxs("p",{className:"text-gray-400 text-sm",children:[" ","AI-powered concept learning platform for curious minds."," "]})," "]})," ",C.jsxs("div",{children:[" ",C.jsx("h4",{className:"font-semibold mb-4",children:"Product"})," ",C.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",C.jsx("li",{children:C.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Features"})})," ",C.jsx("li",{children:C.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Pricing"})})," ",C.jsx("li",{children:C.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"API"})})," "]})," "]})," ",C.jsxs("div",{children:[" ",C.jsx("h4",{className:"font-semibold mb-4",children:"Resources"})," ",C.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",C.jsx("li",{children:C.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Documentation"})})," ",C.jsx("li",{children:C.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Tutorials"})})," ",C.jsx("li",{children:C.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Blog"})})," "]})," "]})," ",C.jsxs("div",{children:[" ",C.jsx("h4",{className:"font-semibold mb-4",children:"Company"})," ",C.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",C.jsx("li",{children:C.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About"})})," ",C.jsx("li",{children:C.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})})," ",C.jsx("li",{children:C.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy"})})," "]})," "]})," "]})," ",C.jsxs("div",{className:"border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[" ",C.jsxs("p",{className:"text-gray-400 text-sm",children:[" "," 2025 TinkFlow. All rights reserved."," "]})," ",C.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[" ",C.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",C.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",C.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})," "]})," "]})," ",C.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",C.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",C.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})," "]})," "]})," ",C.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",C.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",C.jsx("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.747.099.12.112.225.085.344-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.001 12.017z"})," "]})," "]})," "]})," "]})," "]})," "]})," "]})}/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jG=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),BG=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),YA=t=>{const e=BG(t);return e.charAt(0).toUpperCase()+e.slice(1)},tk=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),HG=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FG={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $G=O.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:c,...u},d)=>O.createElement("svg",{ref:d,...FG,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:tk("lucide",s),...!a&&!HG(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,p])=>O.createElement(f,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=(t,e)=>{const n=O.forwardRef(({className:r,...s},a)=>O.createElement($G,{ref:a,iconNode:e,className:tk(`lucide-${jG(YA(t))}`,`lucide-${t}`,r),...s}));return n.displayName=YA(t),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qG=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],GG=Sc("arrow-left",qG);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YG=[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]],nk=Sc("gavel",YG);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KG=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],rk=Sc("info",KG);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XG=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],ik=Sc("lightbulb",XG);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QG=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],WG=Sc("loader-circle",QG);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZG=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],KA=Sc("sparkles",ZG),JG={explain:{border:"border-blue-400",ring:"ring-blue-100 dark:ring-blue-500/30",placeholder:"Explain this concept...",Icon:rk},answer:{border:"border-emerald-400",ring:"ring-emerald-100 dark:ring-emerald-500/30",placeholder:"Answer this question...",Icon:ik},argue:{border:"border-rose-400",ring:"ring-rose-100 dark:ring-rose-500/30",placeholder:"Argue this point...",Icon:nk}};function eY({data:t}){const[e,n]=O.useState(""),r=O.useRef(null);O.useEffect(()=>{const f=r.current;if(!f)return;const p=new IntersectionObserver(([v])=>{v.isIntersecting&&(f.focus(),p.disconnect())});return p.observe(f),()=>p.disconnect()},[]);const s=f=>{f.preventDefault();const p=e.trim();p&&t.onSubmit(p)},{border:a,ring:c,placeholder:u,Icon:d}=JG[t.mode];return C.jsxs("div",{className:`relative bg-white dark:bg-gray-900 shadow-lg rounded-xl px-4 py-3 min-w-[200px] border ${a} ring-1 ${c} transition-shadow`,children:[C.jsxs("form",{onSubmit:s,className:"flex items-center gap-2",children:[C.jsx(d,{size:18,className:"text-gray-400 dark:text-gray-500 shrink-0"}),C.jsx("input",{ref:r,value:e,onChange:f=>n(f.target.value),placeholder:u,className:"flex-1 bg-transparent outline-none text-sm placeholder-gray-400 dark:placeholder-gray-500 caret-gray-900 dark:caret-gray-100 text-gray-900 dark:text-gray-100"})]}),C.jsx(Bn,{type:"target",position:Te.Top}),C.jsx(Bn,{type:"source",position:Te.Bottom})]})}const tY=async()=>{try{await G8(K_),console.log("User signed out successfully")}catch(t){throw console.error("Error signing out:",t),t}},nY=()=>{const[t,e]=O.useState(null);return O.useEffect(()=>{const r=q8(K_,s=>{e(s),s?console.log("User signed in:",s.uid):console.log("No user signed in")});return()=>r()},[]),{user:t,signOut:async()=>{try{await tY(),e(null)}catch(r){console.error("Error in sign out:",r)}}}},sk=t=>!!(t&&t.uid),rh=[{id:"1",type:"staticEditable",data:{label:"The _artificial intelligence_ system processes _natural language_ effectively",title:"AI & Natural Language",suggestions:["Machine Learning","Neural Networks","Deep Learning"],tokenColors:{},previousNode:null},position:{x:250,y:25},draggable:!1}],ec=[],rY=async t=>{if(!sk({uid:t}))throw new Error(dr.AUTH_REQUIRED);try{const e=x_(ni,vr.BOARDS),n=P7(e,O7("userId","==",t),V7("createdAt","desc")),r=await O_(n);if(r.empty){const a={id:`board_${Date.now()}`,userId:t,name:"Default Board",createdAt:Et.now(),isOpen:!0};return await V_(Ec(ni,vr.BOARDS,a.id),a),console.log("Created default board:",a),[a]}const s=r.docs.map(a=>({id:a.id,...a.data()}));return console.log("Fetched all boards:",s),s}catch(e){if(console.error("Fetch all boards error:",e),e.code==="failed-precondition"||e.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:t,name:"Fallback Board (Create Index)",createdAt:Et.now(),isOpen:!0,isFallback:!0}]}throw new Error(dr.LOAD_FAILED)}},XA=async t=>{if(!t)return console.warn("No board ID provided for fetching nodes"),rh;try{const e=x_(ni,vr.BOARDS,t,vr.NODES),n=await O_(e);if(n.empty)return console.log("No nodes found for board, using initial nodes"),rh;const r=n.docs.map(s=>{const a=s.data(),c={...a.data,tokenColors:a.data?.tokenColors||{},previousNode:a.data?.previousNode||null};return{id:s.id,type:a.type,position:a.position,data:c,draggable:a.draggable,style:a.style}});return console.log("Fetched nodes from board:",r),r}catch(e){return console.error("Fetch nodes error:",e),rh}},QA=async t=>{if(!t)return console.warn("No board ID provided for fetching edges"),ec;try{const e=x_(ni,vr.BOARDS,t,vr.EDGES),n=await O_(e);if(n.empty)return console.log("No edges found for board, using initial edges"),ec;const r=n.docs.map(s=>({id:s.id,...s.data()}));return console.log("Fetched edges from board:",r),r}catch(e){return console.error("Fetch edges error:",e),ec}},iY=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving nodes:",{boardId:t,nodesCount:e?.length});return}try{const n=PI(ni);e.forEach(r=>{const s=Ec(ni,vr.BOARDS,t,vr.NODES,r.id),a={type:r.type,data:r.data,position:r.position,updatedAt:Et.now()};r.draggable!=null&&(a.draggable=r.draggable),r.style!=null&&(a.style=r.style),n.set(s,a)}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(dr.SAVE_FAILED)}},sY=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving edges:",{boardId:t,edgesCount:e?.length});return}try{const n=PI(ni);e.forEach(r=>{const s=Ec(ni,vr.BOARDS,t,vr.EDGES,r.id),a={source:r.source,target:r.target,updatedAt:Et.now()};r.sourceHandle!=null&&(a.sourceHandle=r.sourceHandle),r.targetHandle!=null&&(a.targetHandle=r.targetHandle),r.style!=null&&(a.style=r.style),r.markerEnd!=null&&(a.markerEnd=r.markerEnd),n.set(s,a)}),await n.commit(),console.log("Edges saved to board")}catch(n){throw console.error("Save edges error:",n),new Error(dr.SAVE_FAILED)}},oY=async(t,e,n)=>{if(!sk({uid:t}))throw new Error(dr.AUTH_REQUIRED);try{const r={id:`board_${Date.now()}`,userId:t,name:e||`Board ${n.length+1}`,createdAt:Et.now(),isOpen:!1};return console.log("Creating board:",r),await V_(Ec(ni,vr.BOARDS,r.id),r),console.log("Board created successfully:",r),r}catch(r){throw console.error("Error creating new board:",r),r.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):r.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},aY=async t=>{if(!t)throw new Error("Board ID is required for deletion");try{await H7(Ec(ni,vr.BOARDS,t)),console.log("Board deleted successfully")}catch(e){throw console.error("Error deleting board:",e),e.code==="permission-denied"?new Error("Permission denied. Cannot delete this board."):e}},Dl=async(t,e)=>{if(!t||!e)throw new Error("Board ID and updates are required");try{const n={...e,updatedAt:Et.now()};await V_(Ec(ni,vr.BOARDS,t),n,{merge:!0}),console.log("Board status updated:",n)}catch(n){throw console.error("Error updating board status:",n),n}},lY=t=>{if(!t||!t.data)return t;const e={...t},n={...t.data};return n.title||(n.title=n.label||n.summary||"Node"),n.suggestions||(n.suggestions=[]),e.draggable===void 0&&(e.draggable=!0),e.data=n,e},cY=t=>Array.isArray(t)?t.map(lY):[],uY=(t,e={})=>{const[n,r,s]=w5([]),[a,c,u]=x5([]),[d,f]=O.useState(!0),[p,v]=O.useState(!1),[_,b]=O.useState(!1),[T,R]=O.useState([]),[I,N]=O.useState(null),L=O.useRef(null),{showSuccess:$,showError:H,showInfo:G}=e,K=D=>{const P=D.find(X=>X.isOpen===!0);if(P)return P;if(D.length>0){const X={...D[0],isOpen:!0};return Dl(X.id,X).catch(console.error),X}return null};O.useEffect(()=>{(async()=>{if(t)try{f(!0);const P=await rY(t.uid);R(P);const X=P.some(J=>J.isFallback);X&&H&&H("Database index missing. Please create the required Firestore index. Check console for details.");const z=K(P);if(!z){console.error("No board found for user"),H&&H("No boards found. Creating a default board..."),r(rh),c(ec);return}N(z);const[Y,te]=await Promise.all([XA(z.id),QA(z.id)]);r(Y),c(te),G&&!X&&G("Board loaded successfully!")}catch(P){console.error("Error loading initial data:",P),H&&H("Failed to load board data. Using default board."),r(rh),c(ec)}finally{f(!1)}})()},[t,r,c]);const k=async(D,P,X)=>{L.current&&clearTimeout(L.current);const z=setTimeout(async()=>{try{b(!0);const Y=[];P&&P.length>0&&Y.push(iY(D,P)),X&&X.length>0&&Y.push(sY(D,X)),Y.length>0&&(await Promise.all(Y),console.log("Auto-save completed successfully"))}catch(Y){console.error("Auto-save failed:",Y),H&&H("Failed to save changes automatically")}finally{b(!1),L.current=null}},1e3);L.current=z};O.useEffect(()=>(!d&&I&&!p&&!I.isFallback&&k(I.id,n,a),()=>{L.current&&clearTimeout(L.current)}),[n,a,d,I,p]);const S=async D=>{try{if(I?.id===D)return;if(I?.isFallback||T.find(X=>X.id===D)?.isFallback){H&&H("Cannot switch to fallback board. Please create the missing Firestore index first.");return}if(v(!0),I&&!I.isFallback){const X={...I,isOpen:!1};await Dl(I.id,X),R(z=>z.map(Y=>Y.id===I.id?X:Y))}const P=T.find(X=>X.id===D);if(P){const X={...P,isOpen:!0};await Dl(D,X),N(X),R(J=>J.map(U=>U.id===D?X:U));const[z,Y]=await Promise.all([XA(D),QA(D)]),te=cY(z);r(te),c(Y),$&&$(`Switched to "${X.name}"`)}else console.error("Board not found:",D),H&&H("Board not found")}catch(P){console.error("Error switching board:",P),H&&H("Failed to switch board. Please try again.")}finally{v(!1)}};return{nodes:n,edges:a,allBoards:T,currentBoard:I,isLoading:d,isSwitchingBoard:p,isSaving:_,onNodesChange:s,onEdgesChange:u,setNodes:r,setEdges:c,switchToBoard:S,createNewBoard:async D=>{try{if(!t)return H&&H("You must be logged in to create a board"),null;G&&G("Creating new board...");const P=await oY(t.uid,D||null,T);if(P){if(I&&!I.isFallback){const z={...I,isOpen:!1};Dl(I.id,z).catch(console.error)}const X={...P,isOpen:!0};return R(z=>{const Y=z.map(te=>te.id===I?.id?{...te,isOpen:!1}:te);return[X,...Y]}),N(X),Dl(P.id,X).catch(console.error),r([{id:"1",type:"staticEditable",data:{label:D||"New Board"},position:{x:250,y:25},draggable:!1}]),c(ec),$&&$(`Board "${P.name}" created and opened!`),X}else return H&&H("Failed to create board. Please try again."),null}catch(P){return H&&H(`Failed to create board: ${P.message}`),null}},deleteBoard:async D=>{try{if(T.length<=1){H&&H("Cannot delete the last board!");return}if(!T.find(X=>X.id===D)){console.error("Board not found for deletion"),H&&H("Board not found");return}if(G&&G("Deleting board..."),I?.id===D){const X=T.find(z=>z.id!==D);X&&await S(X.id)}await aY(D),R(X=>X.filter(z=>z.id!==D)),$&&$("Board deleted successfully!")}catch(P){console.error("Error deleting board:",P),H&&H("Failed to delete board. Please try again.")}},updateBoardName:async D=>{if(I&&I.name!==D){const P={...I,name:D};N(P),R(X=>X.map(z=>z.id===I.id?P:z));try{await Dl(I.id,P),console.log("Board name updated successfully")}catch(X){console.error("Error updating board name:",X)}}},clearBoardState:()=>{L.current&&(clearTimeout(L.current),L.current=null),R([]),N(null),r([]),c([]),f(!0),v(!1),b(!1)}}},hY=()=>{const[t,e]=O.useState([]),n=f=>{e(p=>p.filter(v=>v.id!==f))},r=f=>{const p=Date.now().toString(),v={id:p,timestamp:new Date,...f};return e(_=>[..._,v]),f.autoRemove!==!1&&setTimeout(()=>{n(p)},f.duration||5e3),p};return{notifications:t,addNotification:r,removeNotification:n,clearAllNotifications:()=>{e([])},showSuccess:(f,p={})=>r({type:"success",message:f,...p}),showError:(f,p={})=>r({type:"error",message:f,duration:7e3,...p}),showInfo:(f,p={})=>r({type:"info",message:f,...p}),showWarning:(f,p={})=>r({type:"warning",message:f,duration:6e3,...p})}},ok=({size:t="medium",color:e="#4f86f7"})=>{const n={small:"w-4 h-4 border-2",medium:"w-8 h-8 border-3",large:"w-12 h-12 border-4"};return C.jsx("div",{className:"flex items-center justify-center",children:C.jsx("div",{className:`${n[t]} border-gray-200 dark:border-gray-700 border-t-indigo-500 dark:border-t-indigo-400 rounded-full animate-spin`,style:{borderTopColor:e}})})},f0={explain:{classes:"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100 dark:bg-blue-950 dark:text-blue-300 dark:border-blue-700",color:"#3b82f6",Icon:rk},answer:{classes:"bg-emerald-50 text-emerald-700 border-emerald-200 hover:bg-emerald-100 dark:bg-emerald-950 dark:text-emerald-300 dark:border-emerald-700",color:"#10b981",Icon:ik},argue:{classes:"bg-rose-50 text-rose-700 border-rose-200 hover:bg-rose-100 dark:bg-rose-950 dark:text-rose-300 dark:border-rose-700",color:"#fb7185",Icon:nk}};function ak({dragState:t,handleDragStart:e,handleOrigin:n,getParentCenter:r}){return C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"absolute left-1/2 z-10 flex gap-2 select-none",style:{transform:"translateX(-50%) translateY(24px)"},children:["explain","answer","argue"].map(s=>{const{classes:a,Icon:c}=f0[s],u=t.isDragging&&t.mode===s;return C.jsxs("div",{draggable:!1,onPointerDown:d=>{d.stopPropagation(),d.preventDefault(),d.button===0&&e(s,d.nativeEvent)},className:`px-2 py-1 rounded-lg border text-sm font-medium flex items-center gap-1 shadow-sm cursor-grab transition-opacity duration-150 ${a} ${u?"opacity-0":"opacity-100"}`,style:{position:"relative",zIndex:11},children:[C.jsx(c,{size:16,strokeWidth:2}),s.charAt(0).toUpperCase()+s.slice(1),C.jsx(Bn,{type:"source",position:Te.Bottom,id:s})]},s)})}),t.isDragging&&typeof window<"u"&&MO.createPortal(C.jsxs(C.Fragment,{children:[C.jsx("svg",{className:"fixed inset-0 pointer-events-none z-[9998]",width:"100vw",height:"100vh",children:C.jsx("line",{x1:n?n.x:r().x,y1:n?n.y:r().y,x2:t.x,y2:t.y,stroke:f0[t.mode??"explain"].color,strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round"})}),C.jsx("div",{className:"fixed pointer-events-none z-[9999] -translate-x-1/2 -translate-y-1/2",style:{left:t.x,top:t.y},children:C.jsx("div",{className:"px-4 py-1 rounded-lg shadow-lg font-semibold text-white backdrop-blur-sm",style:{background:f0[t.mode??"explain"].color},children:t.mode&&t.mode.charAt(0).toUpperCase()+t.mode.slice(1)})})]}),document.body)]})}function WA(t){if(!t)return"#ffffff";const e=(t??"000000").replace(/^#/,""),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16),[a,c,u]=[n,r,s].map(f=>{const p=f/255;return p<=.03928?p/12.92:Math.pow((p+.055)/1.055,2.4)});return .2126*a+.7152*c+.0722*u>.179?"#000000":"#ffffff"}function dY({data:t,id:e}){const[n,r]=O.useState(t.summary||t.label||"Static Node"),{screenToFlowPosition:s}=Ph(),{handleTokenClick:a,showExplanation:c}=bN(),u=O.useRef(null),[d,f]=O.useState({mode:void 0,x:0,y:0,isDragging:!1}),p=O.useRef(d);O.useEffect(()=>{p.current=d},[d]);const[v,_]=O.useState(null);O.useEffect(()=>{r(t.summary||t.label||"Static Node")},[t.summary,t.label]);const T=HC(n),R=(S,A)=>{A.stopPropagation(),a(S,e,{x:0,y:0},"staticEditable",t.myColor,t.label||"Static Node",S.suggestionId)},I=S=>{S.stopPropagation(),c&&c(t.title||"Explanation",t.full_text||"No detailed information available.")},N=(S,A)=>{const B=A.target.getBoundingClientRect();_({x:B.left+B.width/2,y:B.top+B.height/2}),f({mode:S,x:A.clientX,y:A.clientY,isDragging:!0}),document.addEventListener("pointermove",L),document.addEventListener("pointerup",$)},L=S=>{f(A=>A.isDragging?{...A,x:S.clientX,y:S.clientY}:A)},$=()=>{const S=p.current;if(console.log("handleDragEnd",S),S.isDragging&&t.onNodeCallback){const A=s({x:S.x,y:S.y});console.log("Calling onNodeCallback",S.mode,A),t.onNodeCallback(S.mode||void 0,e,A)}f({mode:"explain",x:0,y:0,isDragging:!1}),_(null),document.removeEventListener("pointermove",L),document.removeEventListener("pointerup",$)},H=()=>{if(!u.current)return{x:0,y:0};const S=u.current.getBoundingClientRect();return{x:S.left+S.width/2,y:S.top+S.height/2}},G=O.useMemo(()=>{const S=t.tokenColors||{};return T.map((A,V)=>{const B=A.myConcept||A.word,F=S[B],D=!F;return C.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-lg font-medium transition-all duration-200 ease-out
                        ${D?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}
                        ${A.myConcept?"bg-blue-500/10 border border-blue-500/30":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:F||"transparent",color:F?WA(F):"#f8faff",border:F?`1px solid ${Wx(F,20)}`:""},onClick:P=>D?R(A,P):P.stopPropagation(),children:[A.word,V<T.length-1?" ":""]},V)})},[T,t.tokenColors]),K=O.useMemo(()=>{const S=t.tokenColors||{};return!t.suggestions||t.suggestions.length===0?C.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"}):t.suggestions.map((A,V)=>{const B=S[A],F=!B;return C.jsx("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                        bg-white/5 border border-white/10 transition-all duration-200 
                        ${F?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:B||"transparent",color:B?WA(B):"#f8faff",border:B?`1px solid ${Wx(B,20)}`:""},onClick:D=>F?R({word:A,myConcept:A,suggestionId:(t.label||"")+A+V},D):D.stopPropagation(),children:A},V)})},[t.suggestions,t.tokenColors]),k=O.useMemo(()=>t.isLoading?C.jsxs("div",{className:"flex items-center justify-center gap-2 py-8",children:[C.jsx(ok,{size:"small",color:"#6366f1"}),C.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}):C.jsxs("div",{className:"flex flex-col gap-3",children:[C.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[C.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),C.jsx("div",{className:"flex gap-2",children:C.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                transition-all duration-150 flex items-center justify-center text-sm`,onClick:I,title:"Show full text",children:""})})]}),C.jsx("div",{className:"flex-1",children:C.jsx("div",{className:"cursor-text leading-relaxed break-words text-lg font-medium",children:G})}),C.jsxs("div",{className:"mt-2",children:[C.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),C.jsx("div",{className:"flex flex-wrap gap-1",children:K})]})]}),[t.isLoading,t.title,G,K]);return C.jsxs("div",{ref:u,className:`bg-black border border-white/[0.1] rounded-[20px] p-7 min-w-[320px] max-w-[500px] 
                transition-all duration-150 ease-in-out cursor-pointer select-none overflow-hidden
                opacity-[0.98] border-b-[3px] border-b-white/[0.06]
                hover:opacity-100 hover:bg-[#28282c] hover:border-white/[0.2]`,style:{backgroundColor:"#000000",color:"#f8faff",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[C.jsx("div",{className:"relative pointer-events-auto text-[#f8faff] text-[18px] leading-[1.7] font-semibold",children:k}),C.jsx(Bn,{type:"source",position:Te.Bottom,id:"bottom-source"}),C.jsx(Bn,{type:"target",position:Te.Bottom,id:"bottom-target"}),C.jsx(ak,{dragState:d,handleDragStart:N,handleOrigin:v,getParentCenter:H})]})}function fY(){return C.jsxs(C.Fragment,{children:[C.jsx(Bn,{type:"source",position:Te.Bottom,id:"bottom-source"}),C.jsx(Bn,{style:{transform:"translateY(100%)"},type:"target",position:Te.Top,id:"top-target"}),C.jsx(Bn,{style:{transform:"translateY(100%)"},type:"source",position:Te.Left,id:"left-source"}),C.jsx(Bn,{style:{transform:"translateY(100%)"},type:"target",position:Te.Left,id:"left-target"}),C.jsx(Bn,{style:{transform:"translateY(100%)"},type:"source",position:Te.Right,id:"right-source"}),C.jsx(Bn,{style:{transform:"translateY(100%)"},type:"target",position:Te.Right,id:"right-target"})]})}function mY({data:t,id:e}){const[n,r]=O.useState(t.summary||t.label||"Draggable Node");O.useEffect(()=>{t.layout||(t.layout=1)},[t.layout]);const{getNode:s,setViewport:a,screenToFlowPosition:c}=Ph(),{handleTokenClick:u}=bN(),[d,f]=O.useState(!1),p=O.useRef(null),[v,_]=O.useState({mode:void 0,x:0,y:0,isDragging:!1}),b=O.useRef(v);O.useEffect(()=>{b.current=v},[v]);const[T]=O.useState(null);function R(){f(!0)}function I(){f(!1)}O.useEffect(()=>{r(t.summary||t.label||"Draggable Node")},[t.summary,t.label]);const N=HC(n),L=N,$=()=>!0,H=(A,V)=>{if(V.stopPropagation(),p.current){const B=p.current.getBoundingClientRect(),F=c({x:B.left,y:B.top});u(A,e,F,"draggableEditable",t.myColor,t.full_text||n)}},G=O.useMemo(()=>t.contents&&t.contents.length>0?t.contents[0].trim()?C.jsx("div",{className:"node-rich-content w-full",dangerouslySetInnerHTML:{__html:t.contents[0]}}):C.jsx("div",{className:"text-center py-8 text-gray-500",children:C.jsx("p",{children:"No content available"})}):t.isLoading?C.jsxs("div",{className:"flex items-center justify-center gap-3 py-6",children:[C.jsx(ok,{}),C.jsx("span",{className:"text-slate-400 text-sm",children:"Generating content..."})]}):C.jsxs("div",{className:"space-y-4",children:[C.jsx("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-4 border border-white/80",children:C.jsx("div",{className:"flex flex-wrap gap-2",children:L.map((A,V)=>{const F=(t.tokenColors||{})[A.myConcept||A.word],D=!F;return C.jsx("span",{onClick:P=>D?H(A,P):P.stopPropagation(),style:{backgroundColor:F||void 0,borderColor:F||"transparent"},className:["inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium","transition-all duration-200 ease-out",F?"text-white shadow-sm":"bg-white/80 backdrop-blur-sm text-gray-700 border border-white/90",D?"cursor-pointer hover:scale-105 active:scale-95":"cursor-default opacity-80"].join(" "),children:A.word},V)})})}),t.suggestions&&t.suggestions.length>0&&C.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-4 border border-white/80",children:[C.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[C.jsx(KA,{className:"w-4 h-4 text-blue-500"}),C.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Explore Next"})]}),C.jsx("div",{className:"flex flex-wrap gap-2",children:t.suggestions.map((A,V)=>C.jsx("button",{className:`px-3 py-1.5 text-sm rounded-full bg-blue-50/80 text-blue-700 
                                             border border-blue-200/60 backdrop-blur-sm transition-all duration-200
                                             hover:bg-blue-100/80 hover:border-blue-300/80 hover:scale-105
                                             active:scale-95`,onClick:B=>{if(B.stopPropagation(),p.current){const F=p.current.getBoundingClientRect(),D=c({x:F.left,y:F.top});u({word:A},e,D,"draggableEditable",t.myColor,t.full_text||t.title||A)}},children:A},V))})]})]}),[t.contents,t.isLoading,t.title,t.suggestions,L,$,t.tokenColors,H,t.myColor,u,e,p,c,t.full_text]),K=A=>{if(A.stopPropagation(),t.previousNode){const V=s(t.previousNode);V&&a({x:-V.position.x+200,y:-V.position.y+200,zoom:1})}},k=(A,V)=>{_({mode:A,x:V.clientX,y:V.clientY,isDragging:!0})},S=()=>{if(!p.current)return{x:0,y:0};const A=p.current.getBoundingClientRect();return{x:A.left+A.width/2,y:A.top+A.height/2}};return C.jsxs("div",{ref:p,className:`group relative bg-white/95 backdrop-blur-xl border border-gray-200/60 rounded-3xl
                       min-w-[320px] max-w-[640px] cursor-grab select-none
                       transition-all duration-300 ease-[cubic-bezier(0.4,0,0.2,1)]
                       hover:border-gray-300/80`,style:{background:t.myColor?`linear-gradient(135deg, ${t.myColor}f0, ${t.myColor}e0)`:"linear-gradient(135deg, #ffffff, #fafafa)",borderColor:t.myColor?`${t.myColor}60`:"rgba(229, 231, 235, 0.6)",transform:"translateZ(0)",willChange:"transform",backfaceVisibility:"hidden"},onMouseEnter:R,onMouseLeave:I,children:[C.jsxs("div",{className:"relative p-6 text-gray-900",children:[t.isLoading&&C.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 py-12",children:[C.jsxs("div",{className:"relative",children:[C.jsx(WG,{className:"w-8 h-8 text-blue-500 animate-spin"}),C.jsx("div",{className:"absolute inset-0 w-8 h-8 rounded-full bg-blue-500/20 animate-ping"})]}),C.jsx("span",{className:"text-gray-600 text-sm font-medium",children:"Generating content..."})]}),!t.isLoading&&C.jsxs("header",{className:"flex flex-col items-center gap-4 mb-6",children:[C.jsxs("div",{className:"flex items-center gap-3 group/header",children:[t.icon?C.jsx("div",{className:`w-12 h-12 flex items-center justify-center rounded-2xl bg-white/50 backdrop-blur-sm border border-white/80 
                                               transition-transform duration-200 ease-out group-hover/header:scale-105`,children:C.jsx("span",{className:"text-2xl",dangerouslySetInnerHTML:{__html:t.icon}})}):C.jsx("div",{className:`w-12 h-12 flex items-center justify-center rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 text-white 
                                               transition-transform duration-200 ease-out group-hover/header:scale-105`,children:C.jsx(KA,{className:"w-6 h-6"})}),C.jsx("h2",{className:`text-2xl font-bold tracking-tight text-gray-900 
                                          transition-colors duration-200 group-hover/header:text-gray-700`,children:t.title||t.label||"Node"})]}),d&&t.previousNode&&C.jsx("div",{className:"flex justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 ease-out",style:{animation:d?"slideInFromTop 0.3s ease-out forwards":void 0},children:C.jsxs("button",{onClick:K,title:"Go to previous node",className:`flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/60 backdrop-blur-sm text-gray-700 
                                             border border-white/80 transition-all duration-200 ease-out
                                             hover:bg-white/80 hover:text-gray-900 hover:scale-105 
                                             active:scale-95`,children:[C.jsx(GG,{className:"w-4 h-4"}),C.jsx("span",{className:"text-sm font-medium",children:"Back"})]})})]}),!t.isLoading&&G,C.jsx(ak,{dragState:v,handleDragStart:k,handleOrigin:T,getParentCenter:S})]}),C.jsx(fY,{})]})}const pY={staticEditable:dY,draggableEditable:mY},gY={...pY,tempInput:eY};function yY(){const[t,e]=O.useState(!1),{user:n,signOut:r}=nY(),{notifications:s,removeNotification:a,showSuccess:c,showError:u,showInfo:d}=hY(),{nodes:f,edges:p,allBoards:v,currentBoard:_,isSwitchingBoard:b,isSaving:T,onNodesChange:R,onEdgesChange:I,setNodes:N,setEdges:L,switchToBoard:$,createNewBoard:H,deleteBoard:G,updateBoardName:K,clearBoardState:k}=uY(n,{showSuccess:c,showError:u,showInfo:d}),S=async()=>{await r(),k()},A=()=>{e(!0)},V=O.useCallback(P=>{const X={id:`e${P.source}-${P.target}`,source:P.source,target:P.target,sourceHandle:P.sourceHandle,targetHandle:P.targetHandle};I([{type:"add",item:X}])},[I]),B=O.useCallback((P,X,z,Y,te)=>{if(!z||!te){console.warn("handleNodeCallback called without mode or position",z,te);return}const J=`temp-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;N(ne=>[...ne,{id:J,type:"tempInput",position:{x:te.x-80,y:te.y-40},data:{mode:z,parent:Y}}]);const U={default:"#FFFFFF",explain:"#3b82f6",answer:"#10b981",argue:"#fb7185"},W=U[z in U?z:"default"];Y&&I([{type:"add",item:{id:`e${Y}-${J}`,source:Y,target:J,sourceHandle:z,style:{stroke:W,strokeWidth:3},markerEnd:{type:wa.ArrowClosed,color:W}}}])},[N]),F=O.useMemo(()=>f.map(P=>{let X={...P.data};return X.onNodeCallback=(z,Y,te)=>B(P.id,P.data,z,Y,te),P.type==="tempInput"&&(X.onSubmit=z=>{N(ye=>ye.map(_e=>_e.id===P.id?{..._e,type:"draggableEditable",data:{..._e.data,label:z}}:_e));const Y=f.find(ye=>ye.id===P.data.parent),te=Y?.data?.color,J=Y?.data?.label,U={word:z},W=P.data.parent,ne={x:P.position.x,y:P.position.y},ue=EN(U,W,ne,"draggableEditable",f,N,R,I,te,J,void 0,!0,P,P.data.mode);if(N(ye=>ye.map(_e=>_e.id===P.id?{..._e,data:{..._e.data,myColor:ue}}:_e)),P.data.parent){if(!ue)return;L(ye=>ye.map(_e=>_e.id===`e${P.data.parent}-${P.id}`?{..._e,style:{..._e.style||{},stroke:ue,strokeWidth:3},markerEnd:{type:wa.ArrowClosed,color:ue}}:_e))}}),{...P,data:X}}),[f,B,N]),D=O.useMemo(()=>C.jsxs(vC,{nodes:F,edges:p,onNodesChange:R,onEdgesChange:I,onConnect:V,nodeTypes:gY,connectionMode:go.Loose,fitView:!0,className:"bg-gray-50 dark:bg-gray-900 w-full h-full",children:[C.jsx(N5,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg"}),C.jsx(V5,{variant:zr.Cross,gap:30,size:10,lineWidth:.5,color:"#94a3b8",className:"bg-gray-50 dark:bg-gray-900"})]}),[F,p,R,I,V]);return n?C.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 relative",style:{height:"100vh",width:"100vw",overflow:"hidden"},children:[C.jsx(UG,{notifications:s,onRemove:a}),C.jsx("div",{style:{height:"100%",position:"relative"},children:C.jsxs(jC,{direction:"horizontal",children:[C.jsx(N0,{defaultSize:15,minSize:10,maxSize:30,children:C.jsx("div",{className:"bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700",children:C.jsx(MG,{allBoards:v,currentBoard:_,onSwitchBoard:$,onCreateBoard:async P=>{await H(P)},onDeleteBoard:G,onSignOut:S,isLoading:b})})}),C.jsx(BC,{}),C.jsx(N0,{children:C.jsxs("div",{className:"bg-white dark:bg-gray-800",style:{height:"100%",position:"relative"},children:[C.jsx(VG,{name:_?.name||"Loading...",onSetName:K,user:n,isSaving:T}),C.jsx("div",{className:"bg-gray-50 dark:bg-gray-900",style:{height:"calc(100% - 60px)",width:"100%"},children:C.jsx(LB,{nodes:f,onNodesChange:R,onEdgesChange:I,setNodes:N,children:D})})]})})]})})]}):t?C.jsx(DG,{}):C.jsx(zG,{onLogin:A})}function vY(){return C.jsx(OG,{children:C.jsx(yY,{})})}const lk=document.getElementById("root");if(!lk)throw new Error("Failed to find the root element");FM.createRoot(lk).render(C.jsx(O.StrictMode,{children:C.jsx(vY,{})}));export{kh as C,Qn as R,FC as _,hx as a,o3 as b,Iv as c,ah as d,Rv as e,p2 as f,ZA as g,_Y as h,Zs as i,v2 as n,JP as r,Qr as s};
