function v4(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Kv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var P0={exports:{}},Oc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cx;function _4(){if(cx)return Oc;cx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,o){var l=null;if(o!==void 0&&(l=""+o),s.key!==void 0&&(l=""+s.key),"key"in s){o={};for(var c in s)c!=="key"&&(o[c]=s[c])}else o=s;return s=o.ref,{$$typeof:t,type:r,key:l,ref:s!==void 0?s:null,props:o}}return Oc.Fragment=e,Oc.jsx=n,Oc.jsxs=n,Oc}var dx;function b4(){return dx||(dx=1,P0.exports=_4()),P0.exports}var A=b4(),O0={exports:{}},Be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fx;function w4(){if(fx)return Be;fx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.iterator;function b(z){return z===null||typeof z!="object"?null:(z=v&&z[v]||z["@@iterator"],typeof z=="function"?z:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,O={};function L(z,W,ne){this.props=z,this.context=W,this.refs=O,this.updater=ne||R}L.prototype.isReactComponent={},L.prototype.setState=function(z,W){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,W,"setState")},L.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function j(){}j.prototype=L.prototype;function $(z,W,ne){this.props=z,this.context=W,this.refs=O,this.updater=ne||R}var Y=$.prototype=new j;Y.constructor=$,M(Y,L.prototype),Y.isPureReactComponent=!0;var y=Array.isArray,E={H:null,A:null,T:null,S:null,V:null},w=Object.prototype.hasOwnProperty;function x(z,W,ne,J,ee,ae){return ne=ae.ref,{$$typeof:t,type:z,key:W,ref:ne!==void 0?ne:null,props:ae}}function S(z,W){return x(z.type,W,void 0,void 0,void 0,z.props)}function N(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function C(z){var W={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ne){return W[ne]})}var D=/\/+/g;function H(z,W){return typeof z=="object"&&z!==null&&z.key!=null?C(""+z.key):W.toString(36)}function V(){}function U(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(V,V):(z.status="pending",z.then(function(W){z.status==="pending"&&(z.status="fulfilled",z.value=W)},function(W){z.status==="pending"&&(z.status="rejected",z.reason=W)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function Q(z,W,ne,J,ee){var ae=typeof z;(ae==="undefined"||ae==="boolean")&&(z=null);var le=!1;if(z===null)le=!0;else switch(ae){case"bigint":case"string":case"number":le=!0;break;case"object":switch(z.$$typeof){case t:case e:le=!0;break;case p:return le=z._init,Q(le(z._payload),W,ne,J,ee)}}if(le)return ee=ee(z),le=J===""?"."+H(z,0):J,y(ee)?(ne="",le!=null&&(ne=le.replace(D,"$&/")+"/"),Q(ee,W,ne,"",function(Ee){return Ee})):ee!=null&&(N(ee)&&(ee=S(ee,ne+(ee.key==null||z&&z.key===ee.key?"":(""+ee.key).replace(D,"$&/")+"/")+le)),W.push(ee)),1;le=0;var fe=J===""?".":J+":";if(y(z))for(var he=0;he<z.length;he++)J=z[he],ae=fe+H(J,he),le+=Q(J,W,ne,ae,ee);else if(he=b(z),typeof he=="function")for(z=he.call(z),he=0;!(J=z.next()).done;)J=J.value,ae=fe+H(J,he++),le+=Q(J,W,ne,ae,ee);else if(ae==="object"){if(typeof z.then=="function")return Q(U(z),W,ne,J,ee);throw W=String(z),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return le}function k(z,W,ne){if(z==null)return z;var J=[],ee=0;return Q(z,J,"","",function(ae){return W.call(ne,ae,ee++)}),J}function F(z){if(z._status===-1){var W=z._result;W=W(),W.then(function(ne){(z._status===0||z._status===-1)&&(z._status=1,z._result=ne)},function(ne){(z._status===0||z._status===-1)&&(z._status=2,z._result=ne)}),z._status===-1&&(z._status=0,z._result=W)}if(z._status===1)return z._result.default;throw z._result}var G=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function X(){}return Be.Children={map:k,forEach:function(z,W,ne){k(z,function(){W.apply(this,arguments)},ne)},count:function(z){var W=0;return k(z,function(){W++}),W},toArray:function(z){return k(z,function(W){return W})||[]},only:function(z){if(!N(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Be.Component=L,Be.Fragment=n,Be.Profiler=s,Be.PureComponent=$,Be.StrictMode=r,Be.Suspense=f,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,Be.__COMPILER_RUNTIME={__proto__:null,c:function(z){return E.H.useMemoCache(z)}},Be.cache=function(z){return function(){return z.apply(null,arguments)}},Be.cloneElement=function(z,W,ne){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var J=M({},z.props),ee=z.key,ae=void 0;if(W!=null)for(le in W.ref!==void 0&&(ae=void 0),W.key!==void 0&&(ee=""+W.key),W)!w.call(W,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&W.ref===void 0||(J[le]=W[le]);var le=arguments.length-2;if(le===1)J.children=ne;else if(1<le){for(var fe=Array(le),he=0;he<le;he++)fe[he]=arguments[he+2];J.children=fe}return x(z.type,ee,void 0,void 0,ae,J)},Be.createContext=function(z){return z={$$typeof:l,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:o,_context:z},z},Be.createElement=function(z,W,ne){var J,ee={},ae=null;if(W!=null)for(J in W.key!==void 0&&(ae=""+W.key),W)w.call(W,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(ee[J]=W[J]);var le=arguments.length-2;if(le===1)ee.children=ne;else if(1<le){for(var fe=Array(le),he=0;he<le;he++)fe[he]=arguments[he+2];ee.children=fe}if(z&&z.defaultProps)for(J in le=z.defaultProps,le)ee[J]===void 0&&(ee[J]=le[J]);return x(z,ae,void 0,void 0,null,ee)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(z){return{$$typeof:c,render:z}},Be.isValidElement=N,Be.lazy=function(z){return{$$typeof:p,_payload:{_status:-1,_result:z},_init:F}},Be.memo=function(z,W){return{$$typeof:h,type:z,compare:W===void 0?null:W}},Be.startTransition=function(z){var W=E.T,ne={};E.T=ne;try{var J=z(),ee=E.S;ee!==null&&ee(ne,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(X,G)}catch(ae){G(ae)}finally{E.T=W}},Be.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},Be.use=function(z){return E.H.use(z)},Be.useActionState=function(z,W,ne){return E.H.useActionState(z,W,ne)},Be.useCallback=function(z,W){return E.H.useCallback(z,W)},Be.useContext=function(z){return E.H.useContext(z)},Be.useDebugValue=function(){},Be.useDeferredValue=function(z,W){return E.H.useDeferredValue(z,W)},Be.useEffect=function(z,W,ne){var J=E.H;if(typeof ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(z,W)},Be.useId=function(){return E.H.useId()},Be.useImperativeHandle=function(z,W,ne){return E.H.useImperativeHandle(z,W,ne)},Be.useInsertionEffect=function(z,W){return E.H.useInsertionEffect(z,W)},Be.useLayoutEffect=function(z,W){return E.H.useLayoutEffect(z,W)},Be.useMemo=function(z,W){return E.H.useMemo(z,W)},Be.useOptimistic=function(z,W){return E.H.useOptimistic(z,W)},Be.useReducer=function(z,W,ne){return E.H.useReducer(z,W,ne)},Be.useRef=function(z){return E.H.useRef(z)},Be.useState=function(z){return E.H.useState(z)},Be.useSyncExternalStore=function(z,W,ne){return E.H.useSyncExternalStore(z,W,ne)},Be.useTransition=function(){return E.H.useTransition()},Be.version="19.1.0",Be}var hx;function $d(){return hx||(hx=1,O0.exports=w4()),O0.exports}var B=$d();const pe=Kv(B),E4=v4({__proto__:null,default:pe},[B]);var V0={exports:{}},Vc={},L0={exports:{}},j0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mx;function x4(){return mx||(mx=1,function(t){function e(k,F){var G=k.length;k.push(F);e:for(;0<G;){var X=G-1>>>1,z=k[X];if(0<s(z,F))k[X]=F,k[G]=z,G=X;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var F=k[0],G=k.pop();if(G!==F){k[0]=G;e:for(var X=0,z=k.length,W=z>>>1;X<W;){var ne=2*(X+1)-1,J=k[ne],ee=ne+1,ae=k[ee];if(0>s(J,G))ee<z&&0>s(ae,J)?(k[X]=ae,k[ee]=G,X=ee):(k[X]=J,k[ne]=G,X=ne);else if(ee<z&&0>s(ae,G))k[X]=ae,k[ee]=G,X=ee;else break e}}return F}function s(k,F){var G=k.sortIndex-F.sortIndex;return G!==0?G:k.id-F.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var f=[],h=[],p=1,v=null,b=3,R=!1,M=!1,O=!1,L=!1,j=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function y(k){for(var F=n(h);F!==null;){if(F.callback===null)r(h);else if(F.startTime<=k)r(h),F.sortIndex=F.expirationTime,e(f,F);else break;F=n(h)}}function E(k){if(O=!1,y(k),!M)if(n(f)!==null)M=!0,w||(w=!0,H());else{var F=n(h);F!==null&&Q(E,F.startTime-k)}}var w=!1,x=-1,S=5,N=-1;function C(){return L?!0:!(t.unstable_now()-N<S)}function D(){if(L=!1,w){var k=t.unstable_now();N=k;var F=!0;try{e:{M=!1,O&&(O=!1,$(x),x=-1),R=!0;var G=b;try{t:{for(y(k),v=n(f);v!==null&&!(v.expirationTime>k&&C());){var X=v.callback;if(typeof X=="function"){v.callback=null,b=v.priorityLevel;var z=X(v.expirationTime<=k);if(k=t.unstable_now(),typeof z=="function"){v.callback=z,y(k),F=!0;break t}v===n(f)&&r(f),y(k)}else r(f);v=n(f)}if(v!==null)F=!0;else{var W=n(h);W!==null&&Q(E,W.startTime-k),F=!1}}break e}finally{v=null,b=G,R=!1}F=void 0}}finally{F?H():w=!1}}}var H;if(typeof Y=="function")H=function(){Y(D)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,U=V.port2;V.port1.onmessage=D,H=function(){U.postMessage(null)}}else H=function(){j(D,0)};function Q(k,F){x=j(function(){k(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(k){switch(b){case 1:case 2:case 3:var F=3;break;default:F=b}var G=b;b=F;try{return k()}finally{b=G}},t.unstable_requestPaint=function(){L=!0},t.unstable_runWithPriority=function(k,F){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var G=b;b=k;try{return F()}finally{b=G}},t.unstable_scheduleCallback=function(k,F,G){var X=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?X+G:X):G=X,k){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=G+z,k={id:p++,callback:F,priorityLevel:k,startTime:G,expirationTime:z,sortIndex:-1},G>X?(k.sortIndex=G,e(h,k),n(f)===null&&k===n(h)&&(O?($(x),x=-1):O=!0,Q(E,G-X))):(k.sortIndex=z,e(f,k),M||R||(M=!0,w||(w=!0,H()))),k},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(k){var F=b;return function(){var G=b;b=F;try{return k.apply(this,arguments)}finally{b=G}}}}(j0)),j0}var px;function T4(){return px||(px=1,L0.exports=x4()),L0.exports}var z0={exports:{}},kn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gx;function S4(){if(gx)return kn;gx=1;var t=$d();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(f,h,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:f,containerInfo:h,implementation:p}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return kn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,kn.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(f,h,null,p)},kn.flushSync=function(f){var h=l.T,p=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=h,r.p=p,r.d.f()}},kn.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},kn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},kn.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,v=c(p,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,R=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:R}):p==="script"&&r.d.X(f,{crossOrigin:v,integrity:b,fetchPriority:R,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},kn.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=c(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},kn.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,v=c(p,h.crossOrigin);r.d.L(f,p,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},kn.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=c(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},kn.requestFormReset=function(f){r.d.r(f)},kn.unstable_batchedUpdates=function(f,h){return f(h)},kn.useFormState=function(f,h,p){return l.H.useFormState(f,h,p)},kn.useFormStatus=function(){return l.H.useHostTransitionStatus()},kn.version="19.1.0",kn}var yx;function DA(){if(yx)return z0.exports;yx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),z0.exports=S4(),z0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vx;function A4(){if(vx)return Vc;vx=1;var t=T4(),e=$d(),n=DA();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,u=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(u=a.return),i=a.return;while(i)}return a.tag===3?u:null}function l(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function c(i){if(o(i)!==i)throw Error(r(188))}function f(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(r(188));return a!==i?null:i}for(var u=i,d=a;;){var g=u.return;if(g===null)break;var _=g.alternate;if(_===null){if(d=g.return,d!==null){u=d;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===u)return c(g),i;if(_===d)return c(g),a;_=_.sibling}throw Error(r(188))}if(u.return!==d.return)u=g,d=_;else{for(var P=!1,q=g.child;q;){if(q===u){P=!0,u=g,d=_;break}if(q===d){P=!0,d=g,u=_;break}q=q.sibling}if(!P){for(q=_.child;q;){if(q===u){P=!0,u=_,d=g;break}if(q===d){P=!0,d=_,u=g;break}q=q.sibling}if(!P)throw Error(r(189))}}if(u.alternate!==d)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?i:a}function h(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=h(i),a!==null)return a;i=i.sibling}return null}var p=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),$=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),C=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function H(i){return i===null||typeof i!="object"?null:(i=D&&i[D]||i["@@iterator"],typeof i=="function"?i:null)}var V=Symbol.for("react.client.reference");function U(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===V?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case M:return"Fragment";case L:return"Profiler";case O:return"StrictMode";case E:return"Suspense";case w:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case R:return"Portal";case Y:return(i.displayName||"Context")+".Provider";case $:return(i._context.displayName||"Context")+".Consumer";case y:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case x:return a=i.displayName||null,a!==null?a:U(i.type)||"Memo";case S:a=i._payload,i=i._init;try{return U(i(a))}catch{}}return null}var Q=Array.isArray,k=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},X=[],z=-1;function W(i){return{current:i}}function ne(i){0>z||(i.current=X[z],X[z]=null,z--)}function J(i,a){z++,X[z]=i.current,i.current=a}var ee=W(null),ae=W(null),le=W(null),fe=W(null);function he(i,a){switch(J(le,a),J(ae,i),J(ee,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?jE(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=jE(a),i=zE(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ne(ee),J(ee,i)}function Ee(){ne(ee),ne(ae),ne(le)}function Ae(i){i.memoizedState!==null&&J(fe,i);var a=ee.current,u=zE(a,i.type);a!==u&&(J(ae,i),J(ee,u))}function $e(i){ae.current===i&&(ne(ee),ne(ae)),fe.current===i&&(ne(fe),Nc._currentValue=G)}var Ye=Object.prototype.hasOwnProperty,Ve=t.unstable_scheduleCallback,st=t.unstable_cancelCallback,at=t.unstable_shouldYield,jt=t.unstable_requestPaint,Le=t.unstable_now,we=t.unstable_getCurrentPriorityLevel,Xe=t.unstable_ImmediatePriority,An=t.unstable_UserBlockingPriority,Zt=t.unstable_NormalPriority,ir=t.unstable_LowPriority,On=t.unstable_IdlePriority,Vn=t.log,qr=t.unstable_setDisableYieldValue,ut=null,We=null;function Ft(i){if(typeof Vn=="function"&&qr(i),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(ut,i)}catch{}}var St=Math.clz32?Math.clz32:an,ui=Math.log,qt=Math.LN2;function an(i){return i>>>=0,i===0?32:31-(ui(i)/qt|0)|0}var Ln=256,jn=4194304;function on(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function gn(i,a,u){var d=i.pendingLanes;if(d===0)return 0;var g=0,_=i.suspendedLanes,P=i.pingedLanes;i=i.warmLanes;var q=d&134217727;return q!==0?(d=q&~_,d!==0?g=on(d):(P&=q,P!==0?g=on(P):u||(u=q&~i,u!==0&&(g=on(u))))):(q=d&~_,q!==0?g=on(q):P!==0?g=on(P):u||(u=d&~i,u!==0&&(g=on(u)))),g===0?0:a!==0&&a!==g&&(a&_)===0&&(_=g&-g,u=a&-a,_>=u||_===32&&(u&4194048)!==0)?a:g}function zn(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function qi(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gi(){var i=Ln;return Ln<<=1,(Ln&4194048)===0&&(Ln=256),i}function Gr(){var i=jn;return jn<<=1,(jn&62914560)===0&&(jn=4194304),i}function sr(i){for(var a=[],u=0;31>u;u++)a.push(i);return a}function xr(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function ar(i,a,u,d,g,_){var P=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var q=i.entanglements,Z=i.expirationTimes,oe=i.hiddenUpdates;for(u=P&~u;0<u;){var me=31-St(u),ye=1<<me;q[me]=0,Z[me]=-1;var ue=oe[me];if(ue!==null)for(oe[me]=null,me=0;me<ue.length;me++){var ce=ue[me];ce!==null&&(ce.lane&=-536870913)}u&=~ye}d!==0&&Tr(i,d,0),_!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=_&~(P&~a))}function Tr(i,a,u){i.pendingLanes|=a,i.suspendedLanes&=~a;var d=31-St(a);i.entangledLanes|=a,i.entanglements[d]=i.entanglements[d]|1073741824|u&4194090}function Va(i,a){var u=i.entangledLanes|=a;for(i=i.entanglements;u;){var d=31-St(u),g=1<<d;g&a|i[d]&a&&(i[d]|=a),u&=~g}}function ci(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Rs(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function di(){var i=F.p;return i!==0?i:(i=window.event,i===void 0?32:ix(i.type))}function Ko(i,a){var u=F.p;try{return F.p=i,a()}finally{F.p=u}}var bt=Math.random().toString(36).slice(2),zt="__reactFiber$"+bt,Dt="__reactProps$"+bt,Yn="__reactContainer$"+bt,La="__reactEvents$"+bt,Vu="__reactListeners$"+bt,fi="__reactHandles$"+bt,Yo="__reactResources$"+bt,Ki="__reactMarker$"+bt;function hi(i){delete i[zt],delete i[Dt],delete i[La],delete i[Vu],delete i[fi]}function Sr(i){var a=i[zt];if(a)return a;for(var u=i.parentNode;u;){if(a=u[Yn]||u[zt]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(i=$E(i);i!==null;){if(u=i[zt])return u;i=$E(i)}return a}i=u,u=i.parentNode}return null}function Ar(i){if(i=i[zt]||i[Yn]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function Cr(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function yn(i){var a=i[Yo];return a||(a=i[Yo]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function At(i){i[Ki]=!0}var ja=new Set,Ns={};function or(i,a){Kr(i,a),Kr(i+"Capture",a)}function Kr(i,a){for(Ns[i]=a,i=0;i<a.length;i++)ja.add(a[i])}var za=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xo={},Yi={};function Wo(i){return Ye.call(Yi,i)?!0:Ye.call(Xo,i)?!1:za.test(i)?Yi[i]=!0:(Xo[i]=!0,!1)}function mi(i,a,u){if(Wo(a))if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+u)}}function kr(i,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+u)}}function Jt(i,a,u,d){if(d===null)i.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(a,u,""+d)}}var pi,Qo;function Yr(i){if(pi===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);pi=a&&a[1]||"",Qo=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pi+i+Qo}var Is=!1;function gi(i,a){if(!i||Is)return"";Is=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(ce){var ue=ce}Reflect.construct(i,[],ye)}else{try{ye.call()}catch(ce){ue=ce}i.call(ye.prototype)}}else{try{throw Error()}catch(ce){ue=ce}(ye=i())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(ce){if(ce&&ue&&typeof ce.stack=="string")return[ce.stack,ue.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=d.DetermineComponentFrameRoot(),P=_[0],q=_[1];if(P&&q){var Z=P.split(`
`),oe=q.split(`
`);for(g=d=0;d<Z.length&&!Z[d].includes("DetermineComponentFrameRoot");)d++;for(;g<oe.length&&!oe[g].includes("DetermineComponentFrameRoot");)g++;if(d===Z.length||g===oe.length)for(d=Z.length-1,g=oe.length-1;1<=d&&0<=g&&Z[d]!==oe[g];)g--;for(;1<=d&&0<=g;d--,g--)if(Z[d]!==oe[g]){if(d!==1||g!==1)do if(d--,g--,0>g||Z[d]!==oe[g]){var me=`
`+Z[d].replace(" at new "," at ");return i.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",i.displayName)),me}while(1<=d&&0<=g);break}}}finally{Is=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?Yr(u):""}function Lu(i){switch(i.tag){case 26:case 27:case 5:return Yr(i.type);case 16:return Yr("Lazy");case 13:return Yr("Suspense");case 19:return Yr("SuspenseList");case 0:case 15:return gi(i.type,!1);case 11:return gi(i.type.render,!1);case 1:return gi(i.type,!0);case 31:return Yr("Activity");default:return""}}function Zo(i){try{var a="";do a+=Lu(i),i=i.return;while(i);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function Un(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ju(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function jp(i){var a=ju(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),d=""+i[a];if(!i.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,_=u.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(P){d=""+P,_.call(this,P)}}),Object.defineProperty(i,a,{enumerable:u.enumerable}),{getValue:function(){return d},setValue:function(P){d=""+P},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Jo(i){i._valueTracker||(i._valueTracker=jp(i))}function zu(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var u=a.getValue(),d="";return i&&(d=ju(i)?i.checked?"true":"false":i.value),i=d,i!==u?(a.setValue(i),!0):!1}function Ua(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var zp=/[\n"\\]/g;function Gt(i){return i.replace(zp,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function lr(i,a,u,d,g,_,P,q){i.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?i.type=P:i.removeAttribute("type"),a!=null?P==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+Un(a)):i.value!==""+Un(a)&&(i.value=""+Un(a)):P!=="submit"&&P!=="reset"||i.removeAttribute("value"),a!=null?Ds(i,P,Un(a)):u!=null?Ds(i,P,Un(u)):d!=null&&i.removeAttribute("value"),g==null&&_!=null&&(i.defaultChecked=!!_),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?i.name=""+Un(q):i.removeAttribute("name")}function Ba(i,a,u,d,g,_,P,q){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),a!=null||u!=null){if(!(_!=="submit"&&_!=="reset"||a!=null))return;u=u!=null?""+Un(u):"",a=a!=null?""+Un(a):u,q||a===i.value||(i.value=a),i.defaultValue=a}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=q?i.checked:!!d,i.defaultChecked=!!d,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(i.name=P)}function Ds(i,a,u){a==="number"&&Ua(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function Xi(i,a,u,d){if(i=i.options,a){a={};for(var g=0;g<u.length;g++)a["$"+u[g]]=!0;for(u=0;u<i.length;u++)g=a.hasOwnProperty("$"+i[u].value),i[u].selected!==g&&(i[u].selected=g),g&&d&&(i[u].defaultSelected=!0)}else{for(u=""+Un(u),a=null,g=0;g<i.length;g++){if(i[g].value===u){i[g].selected=!0,d&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function pt(i,a,u){if(a!=null&&(a=""+Un(a),a!==i.value&&(i.value=a),u==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=u!=null?""+Un(u):""}function Ha(i,a,u,d){if(a==null){if(d!=null){if(u!=null)throw Error(r(92));if(Q(d)){if(1<d.length)throw Error(r(93));d=d[0]}u=d}u==null&&(u=""),a=u}u=Un(a),i.defaultValue=u,d=i.textContent,d===u&&d!==""&&d!==null&&(i.value=d)}function Rr(i,a){if(a){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=a;return}}i.textContent=a}var $a=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mf(i,a,u){var d=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?d?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":d?i.setProperty(a,u):typeof u!="number"||u===0||$a.has(a)?a==="float"?i.cssFloat=u:i[a]=(""+u).trim():i[a]=u+"px"}function Uu(i,a,u){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,u!=null){for(var d in u)!u.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var g in a)d=a[g],a.hasOwnProperty(g)&&u[g]!==d&&mf(i,g,d)}else for(var _ in a)a.hasOwnProperty(_)&&mf(i,_,a[_])}function Bu(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Up=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function el(i){return Bp.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Wi=null;function Nr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Qi=null,Zi=null;function Hu(i){var a=Ar(i);if(a&&(i=a.stateNode)){var u=i[Dt]||null;e:switch(i=a.stateNode,a.type){case"input":if(lr(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Gt(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var d=u[a];if(d!==i&&d.form===i.form){var g=d[Dt]||null;if(!g)throw Error(r(90));lr(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<u.length;a++)d=u[a],d.form===i.form&&zu(d)}break e;case"textarea":pt(i,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&Xi(i,!!u.multiple,a,!1)}}}var yi=!1;function pf(i,a,u){if(yi)return i(a,u);yi=!0;try{var d=i(a);return d}finally{if(yi=!1,(Qi!==null||Zi!==null)&&(lh(),Qi&&(a=Qi,i=Zi,Zi=Qi=null,Hu(a),i)))for(a=0;a<i.length;a++)Hu(i[a])}}function Fa(i,a){var u=i.stateNode;if(u===null)return null;var d=u[Dt]||null;if(d===null)return null;u=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(r(231,a,typeof u));return u}var Xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ir=!1;if(Xr)try{var qa={};Object.defineProperty(qa,"passive",{get:function(){Ir=!0}}),window.addEventListener("test",qa,qa),window.removeEventListener("test",qa,qa)}catch{Ir=!1}var vi=null,Ms=null,Ji=null;function $u(){if(Ji)return Ji;var i,a=Ms,u=a.length,d,g="value"in vi?vi.value:vi.textContent,_=g.length;for(i=0;i<u&&a[i]===g[i];i++);var P=u-i;for(d=1;d<=P&&a[u-d]===g[_-d];d++);return Ji=g.slice(i,1<d?1-d:void 0)}function _i(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function bi(){return!0}function Fu(){return!1}function ln(i){function a(u,d,g,_,P){this._reactName=u,this._targetInst=g,this.type=d,this.nativeEvent=_,this.target=P,this.currentTarget=null;for(var q in i)i.hasOwnProperty(q)&&(u=i[q],this[q]=u?u(_):_[q]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?bi:Fu,this.isPropagationStopped=Fu,this}return p(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=bi)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=bi)},persist:function(){},isPersistent:bi}),a}var ct={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tl=ln(ct),Ga=p({},ct,{view:0,detail:0}),gf=ln(Ga),nl,rl,wi,Ka=p({},Ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wa,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==wi&&(wi&&i.type==="mousemove"?(nl=i.screenX-wi.screenX,rl=i.screenY-wi.screenY):rl=nl=0,wi=i),nl)},movementY:function(i){return"movementY"in i?i.movementY:rl}}),Dr=ln(Ka),yf=p({},Ka,{dataTransfer:0}),Hp=ln(yf),Ya=p({},Ga,{relatedTarget:0}),il=ln(Ya),qu=p({},ct,{animationName:0,elapsedTime:0,pseudoElement:0}),sl=ln(qu),vf=p({},ct,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),al=ln(vf),$p=p({},ct,{data:0}),Gu=ln($p),Xa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_f={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ku(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=bf[i])?!!a[i]:!1}function Wa(){return Ku}var wf=p({},Ga,{key:function(i){if(i.key){var a=Xa[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=_i(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?_f[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wa,charCode:function(i){return i.type==="keypress"?_i(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?_i(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ol=ln(wf),Ef=p({},Ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yu=ln(Ef),es=p({},Ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wa}),xf=ln(es),Tf=p({},ct,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sf=ln(Tf),Af=p({},Ka,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ll=ln(Af),Bn=p({},ct,{newState:0,oldState:0}),Cf=ln(Bn),kf=[9,13,27,32],Ei=Xr&&"CompositionEvent"in window,m=null;Xr&&"documentMode"in document&&(m=document.documentMode);var T=Xr&&"TextEvent"in window&&!m,I=Xr&&(!Ei||m&&8<m&&11>=m),K=" ",ie=!1;function de(i,a){switch(i){case"keyup":return kf.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function be(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var tt=!1;function en(i,a){switch(i){case"compositionend":return be(a);case"keypress":return a.which!==32?null:(ie=!0,K);case"textInput":return i=a.data,i===K&&ie?null:i;default:return null}}function nt(i,a){if(tt)return i==="compositionend"||!Ei&&de(i,a)?(i=$u(),Ji=Ms=vi=null,tt=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return I&&a.locale!=="ko"?null:a.data;default:return null}}var un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tn(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!un[i.type]:a==="textarea"}function ts(i,a,u,d){Qi?Zi?Zi.push(d):Zi=[d]:Qi=d,a=mh(a,"onChange"),0<a.length&&(u=new tl("onChange","change",null,u,d),i.push({event:u,listeners:a}))}var vn=null,xi=null;function Xu(i){ME(i,0)}function Rf(i){var a=Cr(i);if(zu(a))return i}function ew(i,a){if(i==="change")return a}var tw=!1;if(Xr){var Fp;if(Xr){var qp="oninput"in document;if(!qp){var nw=document.createElement("div");nw.setAttribute("oninput","return;"),qp=typeof nw.oninput=="function"}Fp=qp}else Fp=!1;tw=Fp&&(!document.documentMode||9<document.documentMode)}function rw(){vn&&(vn.detachEvent("onpropertychange",iw),xi=vn=null)}function iw(i){if(i.propertyName==="value"&&Rf(xi)){var a=[];ts(a,xi,i,Nr(i)),pf(Xu,a)}}function Y8(i,a,u){i==="focusin"?(rw(),vn=a,xi=u,vn.attachEvent("onpropertychange",iw)):i==="focusout"&&rw()}function X8(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Rf(xi)}function W8(i,a){if(i==="click")return Rf(a)}function Q8(i,a){if(i==="input"||i==="change")return Rf(a)}function Z8(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var ur=typeof Object.is=="function"?Object.is:Z8;function Wu(i,a){if(ur(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var u=Object.keys(i),d=Object.keys(a);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var g=u[d];if(!Ye.call(a,g)||!ur(i[g],a[g]))return!1}return!0}function sw(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function aw(i,a){var u=sw(i);i=0;for(var d;u;){if(u.nodeType===3){if(d=i+u.textContent.length,i<=a&&d>=a)return{node:u,offset:a-i};i=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=sw(u)}}function ow(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?ow(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function lw(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=Ua(i.document);a instanceof i.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)i=a.contentWindow;else break;a=Ua(i.document)}return a}function Gp(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var J8=Xr&&"documentMode"in document&&11>=document.documentMode,ul=null,Kp=null,Qu=null,Yp=!1;function uw(i,a,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Yp||ul==null||ul!==Ua(d)||(d=ul,"selectionStart"in d&&Gp(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Qu&&Wu(Qu,d)||(Qu=d,d=mh(Kp,"onSelect"),0<d.length&&(a=new tl("onSelect","select",null,a,u),i.push({event:a,listeners:d}),a.target=ul)))}function Qa(i,a){var u={};return u[i.toLowerCase()]=a.toLowerCase(),u["Webkit"+i]="webkit"+a,u["Moz"+i]="moz"+a,u}var cl={animationend:Qa("Animation","AnimationEnd"),animationiteration:Qa("Animation","AnimationIteration"),animationstart:Qa("Animation","AnimationStart"),transitionrun:Qa("Transition","TransitionRun"),transitionstart:Qa("Transition","TransitionStart"),transitioncancel:Qa("Transition","TransitionCancel"),transitionend:Qa("Transition","TransitionEnd")},Xp={},cw={};Xr&&(cw=document.createElement("div").style,"AnimationEvent"in window||(delete cl.animationend.animation,delete cl.animationiteration.animation,delete cl.animationstart.animation),"TransitionEvent"in window||delete cl.transitionend.transition);function Za(i){if(Xp[i])return Xp[i];if(!cl[i])return i;var a=cl[i],u;for(u in a)if(a.hasOwnProperty(u)&&u in cw)return Xp[i]=a[u];return i}var dw=Za("animationend"),fw=Za("animationiteration"),hw=Za("animationstart"),eI=Za("transitionrun"),tI=Za("transitionstart"),nI=Za("transitioncancel"),mw=Za("transitionend"),pw=new Map,Wp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wp.push("scrollEnd");function Wr(i,a){pw.set(i,a),or(a,[i])}var gw=new WeakMap;function Mr(i,a){if(typeof i=="object"&&i!==null){var u=gw.get(i);return u!==void 0?u:(a={value:i,source:a,stack:Zo(a)},gw.set(i,a),a)}return{value:i,source:a,stack:Zo(a)}}var Pr=[],dl=0,Qp=0;function Nf(){for(var i=dl,a=Qp=dl=0;a<i;){var u=Pr[a];Pr[a++]=null;var d=Pr[a];Pr[a++]=null;var g=Pr[a];Pr[a++]=null;var _=Pr[a];if(Pr[a++]=null,d!==null&&g!==null){var P=d.pending;P===null?g.next=g:(g.next=P.next,P.next=g),d.pending=g}_!==0&&yw(u,g,_)}}function If(i,a,u,d){Pr[dl++]=i,Pr[dl++]=a,Pr[dl++]=u,Pr[dl++]=d,Qp|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function Zp(i,a,u,d){return If(i,a,u,d),Df(i)}function fl(i,a){return If(i,null,null,a),Df(i)}function yw(i,a,u){i.lanes|=u;var d=i.alternate;d!==null&&(d.lanes|=u);for(var g=!1,_=i.return;_!==null;)_.childLanes|=u,d=_.alternate,d!==null&&(d.childLanes|=u),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(g=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,g&&a!==null&&(g=31-St(u),i=_.hiddenUpdates,d=i[g],d===null?i[g]=[a]:d.push(a),a.lane=u|536870912),_):null}function Df(i){if(50<Ec)throw Ec=0,i0=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var hl={};function rI(i,a,u,d){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cr(i,a,u,d){return new rI(i,a,u,d)}function Jp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ns(i,a){var u=i.alternate;return u===null?(u=cr(i.tag,a,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=a,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,a=i.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function vw(i,a){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,a=u.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Mf(i,a,u,d,g,_){var P=0;if(d=i,typeof i=="function")Jp(i)&&(P=1);else if(typeof i=="string")P=s4(i,u,ee.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case N:return i=cr(31,u,a,g),i.elementType=N,i.lanes=_,i;case M:return Ja(u.children,g,_,a);case O:P=8,g|=24;break;case L:return i=cr(12,u,a,g|2),i.elementType=L,i.lanes=_,i;case E:return i=cr(13,u,a,g),i.elementType=E,i.lanes=_,i;case w:return i=cr(19,u,a,g),i.elementType=w,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case j:case Y:P=10;break e;case $:P=9;break e;case y:P=11;break e;case x:P=14;break e;case S:P=16,d=null;break e}P=29,u=Error(r(130,i===null?"null":typeof i,"")),d=null}return a=cr(P,u,a,g),a.elementType=i,a.type=d,a.lanes=_,a}function Ja(i,a,u,d){return i=cr(7,i,d,a),i.lanes=u,i}function eg(i,a,u){return i=cr(6,i,null,a),i.lanes=u,i}function tg(i,a,u){return a=cr(4,i.children!==null?i.children:[],i.key,a),a.lanes=u,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var ml=[],pl=0,Pf=null,Of=0,Or=[],Vr=0,eo=null,rs=1,is="";function to(i,a){ml[pl++]=Of,ml[pl++]=Pf,Pf=i,Of=a}function _w(i,a,u){Or[Vr++]=rs,Or[Vr++]=is,Or[Vr++]=eo,eo=i;var d=rs;i=is;var g=32-St(d)-1;d&=~(1<<g),u+=1;var _=32-St(a)+g;if(30<_){var P=g-g%5;_=(d&(1<<P)-1).toString(32),d>>=P,g-=P,rs=1<<32-St(a)+g|u<<g|d,is=_+i}else rs=1<<_|u<<g|d,is=i}function ng(i){i.return!==null&&(to(i,1),_w(i,1,0))}function rg(i){for(;i===Pf;)Pf=ml[--pl],ml[pl]=null,Of=ml[--pl],ml[pl]=null;for(;i===eo;)eo=Or[--Vr],Or[Vr]=null,is=Or[--Vr],Or[Vr]=null,rs=Or[--Vr],Or[Vr]=null}var Hn=null,Mt=null,lt=!1,no=null,Ti=!1,ig=Error(r(519));function ro(i){var a=Error(r(418,""));throw ec(Mr(a,i)),ig}function bw(i){var a=i.stateNode,u=i.type,d=i.memoizedProps;switch(a[zt]=i,a[Dt]=d,u){case"dialog":Ze("cancel",a),Ze("close",a);break;case"iframe":case"object":case"embed":Ze("load",a);break;case"video":case"audio":for(u=0;u<Tc.length;u++)Ze(Tc[u],a);break;case"source":Ze("error",a);break;case"img":case"image":case"link":Ze("error",a),Ze("load",a);break;case"details":Ze("toggle",a);break;case"input":Ze("invalid",a),Ba(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Jo(a);break;case"select":Ze("invalid",a);break;case"textarea":Ze("invalid",a),Ha(a,d.value,d.defaultValue,d.children),Jo(a)}u=d.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||d.suppressHydrationWarning===!0||LE(a.textContent,u)?(d.popover!=null&&(Ze("beforetoggle",a),Ze("toggle",a)),d.onScroll!=null&&Ze("scroll",a),d.onScrollEnd!=null&&Ze("scrollend",a),d.onClick!=null&&(a.onclick=ph),a=!0):a=!1,a||ro(i)}function ww(i){for(Hn=i.return;Hn;)switch(Hn.tag){case 5:case 13:Ti=!1;return;case 27:case 3:Ti=!0;return;default:Hn=Hn.return}}function Zu(i){if(i!==Hn)return!1;if(!lt)return ww(i),lt=!0,!1;var a=i.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||b0(i.type,i.memoizedProps)),u=!u),u&&Mt&&ro(i),ww(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(u=i.data,u==="/$"){if(a===0){Mt=Zr(i.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++;i=i.nextSibling}Mt=null}}else a===27?(a=Mt,Xs(i.type)?(i=T0,T0=null,Mt=i):Mt=a):Mt=Hn?Zr(i.stateNode.nextSibling):null;return!0}function Ju(){Mt=Hn=null,lt=!1}function Ew(){var i=no;return i!==null&&(Qn===null?Qn=i:Qn.push.apply(Qn,i),no=null),i}function ec(i){no===null?no=[i]:no.push(i)}var sg=W(null),io=null,ss=null;function Ps(i,a,u){J(sg,a._currentValue),a._currentValue=u}function as(i){i._currentValue=sg.current,ne(sg)}function ag(i,a,u){for(;i!==null;){var d=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),i===u)break;i=i.return}}function og(i,a,u,d){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var _=g.dependencies;if(_!==null){var P=g.child;_=_.firstContext;e:for(;_!==null;){var q=_;_=g;for(var Z=0;Z<a.length;Z++)if(q.context===a[Z]){_.lanes|=u,q=_.alternate,q!==null&&(q.lanes|=u),ag(_.return,u,i),d||(P=null);break e}_=q.next}}else if(g.tag===18){if(P=g.return,P===null)throw Error(r(341));P.lanes|=u,_=P.alternate,_!==null&&(_.lanes|=u),ag(P,u,i),P=null}else P=g.child;if(P!==null)P.return=g;else for(P=g;P!==null;){if(P===i){P=null;break}if(g=P.sibling,g!==null){g.return=P.return,P=g;break}P=P.return}g=P}}function tc(i,a,u,d){i=null;for(var g=a,_=!1;g!==null;){if(!_){if((g.flags&524288)!==0)_=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var P=g.alternate;if(P===null)throw Error(r(387));if(P=P.memoizedProps,P!==null){var q=g.type;ur(g.pendingProps.value,P.value)||(i!==null?i.push(q):i=[q])}}else if(g===fe.current){if(P=g.alternate,P===null)throw Error(r(387));P.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(Nc):i=[Nc])}g=g.return}i!==null&&og(a,i,u,d),a.flags|=262144}function Vf(i){for(i=i.firstContext;i!==null;){if(!ur(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function so(i){io=i,ss=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Cn(i){return xw(io,i)}function Lf(i,a){return io===null&&so(i),xw(i,a)}function xw(i,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},ss===null){if(i===null)throw Error(r(308));ss=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else ss=ss.next=a;return u}var iI=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(u,d){i.push(d)}};this.abort=function(){a.aborted=!0,i.forEach(function(u){return u()})}},sI=t.unstable_scheduleCallback,aI=t.unstable_NormalPriority,nn={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lg(){return{controller:new iI,data:new Map,refCount:0}}function nc(i){i.refCount--,i.refCount===0&&sI(aI,function(){i.controller.abort()})}var rc=null,ug=0,gl=0,yl=null;function oI(i,a){if(rc===null){var u=rc=[];ug=0,gl=d0(),yl={status:"pending",value:void 0,then:function(d){u.push(d)}}}return ug++,a.then(Tw,Tw),a}function Tw(){if(--ug===0&&rc!==null){yl!==null&&(yl.status="fulfilled");var i=rc;rc=null,gl=0,yl=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function lI(i,a){var u=[],d={status:"pending",value:null,reason:null,then:function(g){u.push(g)}};return i.then(function(){d.status="fulfilled",d.value=a;for(var g=0;g<u.length;g++)(0,u[g])(a)},function(g){for(d.status="rejected",d.reason=g,g=0;g<u.length;g++)(0,u[g])(void 0)}),d}var Sw=k.S;k.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&oI(i,a),Sw!==null&&Sw(i,a)};var ao=W(null);function cg(){var i=ao.current;return i!==null?i:wt.pooledCache}function jf(i,a){a===null?J(ao,ao.current):J(ao,a.pool)}function Aw(){var i=cg();return i===null?null:{parent:nn._currentValue,pool:i}}var ic=Error(r(460)),Cw=Error(r(474)),zf=Error(r(542)),dg={then:function(){}};function kw(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Uf(){}function Rw(i,a,u){switch(u=i[u],u===void 0?i.push(a):u!==a&&(a.then(Uf,Uf),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Iw(i),i;default:if(typeof a.status=="string")a.then(Uf,Uf);else{if(i=wt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(d){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=d}},function(d){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Iw(i),i}throw sc=a,ic}}var sc=null;function Nw(){if(sc===null)throw Error(r(459));var i=sc;return sc=null,i}function Iw(i){if(i===ic||i===zf)throw Error(r(483))}var Os=!1;function fg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hg(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Vs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ls(i,a,u){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(ht&2)!==0){var g=d.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),d.pending=a,a=Df(i),yw(i,null,u),a}return If(i,d,a,u),Df(i)}function ac(i,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var d=a.lanes;d&=i.pendingLanes,u|=d,a.lanes=u,Va(i,u)}}function mg(i,a){var u=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var g=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var P={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};_===null?g=_=P:_=_.next=P,u=u.next}while(u!==null);_===null?g=_=a:_=_.next=a}else g=_=a;u={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:d.shared,callbacks:d.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=a:i.next=a,u.lastBaseUpdate=a}var pg=!1;function oc(){if(pg){var i=yl;if(i!==null)throw i}}function lc(i,a,u,d){pg=!1;var g=i.updateQueue;Os=!1;var _=g.firstBaseUpdate,P=g.lastBaseUpdate,q=g.shared.pending;if(q!==null){g.shared.pending=null;var Z=q,oe=Z.next;Z.next=null,P===null?_=oe:P.next=oe,P=Z;var me=i.alternate;me!==null&&(me=me.updateQueue,q=me.lastBaseUpdate,q!==P&&(q===null?me.firstBaseUpdate=oe:q.next=oe,me.lastBaseUpdate=Z))}if(_!==null){var ye=g.baseState;P=0,me=oe=Z=null,q=_;do{var ue=q.lane&-536870913,ce=ue!==q.lane;if(ce?(rt&ue)===ue:(d&ue)===ue){ue!==0&&ue===gl&&(pg=!0),me!==null&&(me=me.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});e:{var Pe=i,Ne=q;ue=a;var vt=u;switch(Ne.tag){case 1:if(Pe=Ne.payload,typeof Pe=="function"){ye=Pe.call(vt,ye,ue);break e}ye=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Ne.payload,ue=typeof Pe=="function"?Pe.call(vt,ye,ue):Pe,ue==null)break e;ye=p({},ye,ue);break e;case 2:Os=!0}}ue=q.callback,ue!==null&&(i.flags|=64,ce&&(i.flags|=8192),ce=g.callbacks,ce===null?g.callbacks=[ue]:ce.push(ue))}else ce={lane:ue,tag:q.tag,payload:q.payload,callback:q.callback,next:null},me===null?(oe=me=ce,Z=ye):me=me.next=ce,P|=ue;if(q=q.next,q===null){if(q=g.shared.pending,q===null)break;ce=q,q=ce.next,ce.next=null,g.lastBaseUpdate=ce,g.shared.pending=null}}while(!0);me===null&&(Z=ye),g.baseState=Z,g.firstBaseUpdate=oe,g.lastBaseUpdate=me,_===null&&(g.shared.lanes=0),qs|=P,i.lanes=P,i.memoizedState=ye}}function Dw(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function Mw(i,a){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)Dw(u[i],a)}var vl=W(null),Bf=W(0);function Pw(i,a){i=hs,J(Bf,i),J(vl,a),hs=i|a.baseLanes}function gg(){J(Bf,hs),J(vl,vl.current)}function yg(){hs=Bf.current,ne(vl),ne(Bf)}var js=0,Fe=null,gt=null,Kt=null,Hf=!1,_l=!1,oo=!1,$f=0,uc=0,bl=null,uI=0;function Ut(){throw Error(r(321))}function vg(i,a){if(a===null)return!1;for(var u=0;u<a.length&&u<i.length;u++)if(!ur(i[u],a[u]))return!1;return!0}function _g(i,a,u,d,g,_){return js=_,Fe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,k.H=i===null||i.memoizedState===null?y1:v1,oo=!1,_=u(d,g),oo=!1,_l&&(_=Vw(a,u,d,g)),Ow(i),_}function Ow(i){k.H=Xf;var a=gt!==null&&gt.next!==null;if(js=0,Kt=gt=Fe=null,Hf=!1,uc=0,bl=null,a)throw Error(r(300));i===null||cn||(i=i.dependencies,i!==null&&Vf(i)&&(cn=!0))}function Vw(i,a,u,d){Fe=i;var g=0;do{if(_l&&(bl=null),uc=0,_l=!1,25<=g)throw Error(r(301));if(g+=1,Kt=gt=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}k.H=gI,_=a(u,d)}while(_l);return _}function cI(){var i=k.H,a=i.useState()[0];return a=typeof a.then=="function"?cc(a):a,i=i.useState()[0],(gt!==null?gt.memoizedState:null)!==i&&(Fe.flags|=1024),a}function bg(){var i=$f!==0;return $f=0,i}function wg(i,a,u){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~u}function Eg(i){if(Hf){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Hf=!1}js=0,Kt=gt=Fe=null,_l=!1,uc=$f=0,bl=null}function Xn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?Fe.memoizedState=Kt=i:Kt=Kt.next=i,Kt}function Yt(){if(gt===null){var i=Fe.alternate;i=i!==null?i.memoizedState:null}else i=gt.next;var a=Kt===null?Fe.memoizedState:Kt.next;if(a!==null)Kt=a,gt=i;else{if(i===null)throw Fe.alternate===null?Error(r(467)):Error(r(310));gt=i,i={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},Kt===null?Fe.memoizedState=Kt=i:Kt=Kt.next=i}return Kt}function xg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cc(i){var a=uc;return uc+=1,bl===null&&(bl=[]),i=Rw(bl,i,a),a=Fe,(Kt===null?a.memoizedState:Kt.next)===null&&(a=a.alternate,k.H=a===null||a.memoizedState===null?y1:v1),i}function Ff(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return cc(i);if(i.$$typeof===Y)return Cn(i)}throw Error(r(438,String(i)))}function Tg(i){var a=null,u=Fe.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var d=Fe.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=xg(),Fe.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(i),d=0;d<i;d++)u[d]=C;return a.index++,u}function os(i,a){return typeof a=="function"?a(i):a}function qf(i){var a=Yt();return Sg(a,gt,i)}function Sg(i,a,u){var d=i.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=u;var g=i.baseQueue,_=d.pending;if(_!==null){if(g!==null){var P=g.next;g.next=_.next,_.next=P}a.baseQueue=g=_,d.pending=null}if(_=i.baseState,g===null)i.memoizedState=_;else{a=g.next;var q=P=null,Z=null,oe=a,me=!1;do{var ye=oe.lane&-536870913;if(ye!==oe.lane?(rt&ye)===ye:(js&ye)===ye){var ue=oe.revertLane;if(ue===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),ye===gl&&(me=!0);else if((js&ue)===ue){oe=oe.next,ue===gl&&(me=!0);continue}else ye={lane:0,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},Z===null?(q=Z=ye,P=_):Z=Z.next=ye,Fe.lanes|=ue,qs|=ue;ye=oe.action,oo&&u(_,ye),_=oe.hasEagerState?oe.eagerState:u(_,ye)}else ue={lane:ye,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},Z===null?(q=Z=ue,P=_):Z=Z.next=ue,Fe.lanes|=ye,qs|=ye;oe=oe.next}while(oe!==null&&oe!==a);if(Z===null?P=_:Z.next=q,!ur(_,i.memoizedState)&&(cn=!0,me&&(u=yl,u!==null)))throw u;i.memoizedState=_,i.baseState=P,i.baseQueue=Z,d.lastRenderedState=_}return g===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function Ag(i){var a=Yt(),u=a.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=i;var d=u.dispatch,g=u.pending,_=a.memoizedState;if(g!==null){u.pending=null;var P=g=g.next;do _=i(_,P.action),P=P.next;while(P!==g);ur(_,a.memoizedState)||(cn=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),u.lastRenderedState=_}return[_,d]}function Lw(i,a,u){var d=Fe,g=Yt(),_=lt;if(_){if(u===void 0)throw Error(r(407));u=u()}else u=a();var P=!ur((gt||g).memoizedState,u);P&&(g.memoizedState=u,cn=!0),g=g.queue;var q=Uw.bind(null,d,g,i);if(dc(2048,8,q,[i]),g.getSnapshot!==a||P||Kt!==null&&Kt.memoizedState.tag&1){if(d.flags|=2048,wl(9,Gf(),zw.bind(null,d,g,u,a),null),wt===null)throw Error(r(349));_||(js&124)!==0||jw(d,a,u)}return u}function jw(i,a,u){i.flags|=16384,i={getSnapshot:a,value:u},a=Fe.updateQueue,a===null?(a=xg(),Fe.updateQueue=a,a.stores=[i]):(u=a.stores,u===null?a.stores=[i]:u.push(i))}function zw(i,a,u,d){a.value=u,a.getSnapshot=d,Bw(a)&&Hw(i)}function Uw(i,a,u){return u(function(){Bw(a)&&Hw(i)})}function Bw(i){var a=i.getSnapshot;i=i.value;try{var u=a();return!ur(i,u)}catch{return!0}}function Hw(i){var a=fl(i,2);a!==null&&pr(a,i,2)}function Cg(i){var a=Xn();if(typeof i=="function"){var u=i;if(i=u(),oo){Ft(!0);try{u()}finally{Ft(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:i},a}function $w(i,a,u,d){return i.baseState=u,Sg(i,gt,typeof d=="function"?d:os)}function dI(i,a,u,d,g){if(Yf(i))throw Error(r(485));if(i=a.action,i!==null){var _={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){_.listeners.push(P)}};k.T!==null?u(!0):_.isTransition=!1,d(_),u=a.pending,u===null?(_.next=a.pending=_,Fw(a,_)):(_.next=u.next,a.pending=u.next=_)}}function Fw(i,a){var u=a.action,d=a.payload,g=i.state;if(a.isTransition){var _=k.T,P={};k.T=P;try{var q=u(g,d),Z=k.S;Z!==null&&Z(P,q),qw(i,a,q)}catch(oe){kg(i,a,oe)}finally{k.T=_}}else try{_=u(g,d),qw(i,a,_)}catch(oe){kg(i,a,oe)}}function qw(i,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(d){Gw(i,a,d)},function(d){return kg(i,a,d)}):Gw(i,a,u)}function Gw(i,a,u){a.status="fulfilled",a.value=u,Kw(a),i.state=u,a=i.pending,a!==null&&(u=a.next,u===a?i.pending=null:(u=u.next,a.next=u,Fw(i,u)))}function kg(i,a,u){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=u,Kw(a),a=a.next;while(a!==d)}i.action=null}function Kw(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function Yw(i,a){return a}function Xw(i,a){if(lt){var u=wt.formState;if(u!==null){e:{var d=Fe;if(lt){if(Mt){t:{for(var g=Mt,_=Ti;g.nodeType!==8;){if(!_){g=null;break t}if(g=Zr(g.nextSibling),g===null){g=null;break t}}_=g.data,g=_==="F!"||_==="F"?g:null}if(g){Mt=Zr(g.nextSibling),d=g.data==="F!";break e}}ro(d)}d=!1}d&&(a=u[0])}}return u=Xn(),u.memoizedState=u.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yw,lastRenderedState:a},u.queue=d,u=m1.bind(null,Fe,d),d.dispatch=u,d=Cg(!1),_=Mg.bind(null,Fe,!1,d.queue),d=Xn(),g={state:a,dispatch:null,action:i,pending:null},d.queue=g,u=dI.bind(null,Fe,g,_,u),g.dispatch=u,d.memoizedState=i,[a,u,!1]}function Ww(i){var a=Yt();return Qw(a,gt,i)}function Qw(i,a,u){if(a=Sg(i,a,Yw)[0],i=qf(os)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=cc(a)}catch(P){throw P===ic?zf:P}else d=a;a=Yt();var g=a.queue,_=g.dispatch;return u!==a.memoizedState&&(Fe.flags|=2048,wl(9,Gf(),fI.bind(null,g,u),null)),[d,_,i]}function fI(i,a){i.action=a}function Zw(i){var a=Yt(),u=gt;if(u!==null)return Qw(a,u,i);Yt(),a=a.memoizedState,u=Yt();var d=u.queue.dispatch;return u.memoizedState=i,[a,d,!1]}function wl(i,a,u,d){return i={tag:i,create:u,deps:d,inst:a,next:null},a=Fe.updateQueue,a===null&&(a=xg(),Fe.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=i.next=i:(d=u.next,u.next=i,i.next=d,a.lastEffect=i),i}function Gf(){return{destroy:void 0,resource:void 0}}function Jw(){return Yt().memoizedState}function Kf(i,a,u,d){var g=Xn();d=d===void 0?null:d,Fe.flags|=i,g.memoizedState=wl(1|a,Gf(),u,d)}function dc(i,a,u,d){var g=Yt();d=d===void 0?null:d;var _=g.memoizedState.inst;gt!==null&&d!==null&&vg(d,gt.memoizedState.deps)?g.memoizedState=wl(a,_,u,d):(Fe.flags|=i,g.memoizedState=wl(1|a,_,u,d))}function e1(i,a){Kf(8390656,8,i,a)}function t1(i,a){dc(2048,8,i,a)}function n1(i,a){return dc(4,2,i,a)}function r1(i,a){return dc(4,4,i,a)}function i1(i,a){if(typeof a=="function"){i=i();var u=a(i);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function s1(i,a,u){u=u!=null?u.concat([i]):null,dc(4,4,i1.bind(null,a,i),u)}function Rg(){}function a1(i,a){var u=Yt();a=a===void 0?null:a;var d=u.memoizedState;return a!==null&&vg(a,d[1])?d[0]:(u.memoizedState=[i,a],i)}function o1(i,a){var u=Yt();a=a===void 0?null:a;var d=u.memoizedState;if(a!==null&&vg(a,d[1]))return d[0];if(d=i(),oo){Ft(!0);try{i()}finally{Ft(!1)}}return u.memoizedState=[d,a],d}function Ng(i,a,u){return u===void 0||(js&1073741824)!==0?i.memoizedState=a:(i.memoizedState=u,i=cE(),Fe.lanes|=i,qs|=i,u)}function l1(i,a,u,d){return ur(u,a)?u:vl.current!==null?(i=Ng(i,u,d),ur(i,a)||(cn=!0),i):(js&42)===0?(cn=!0,i.memoizedState=u):(i=cE(),Fe.lanes|=i,qs|=i,a)}function u1(i,a,u,d,g){var _=F.p;F.p=_!==0&&8>_?_:8;var P=k.T,q={};k.T=q,Mg(i,!1,a,u);try{var Z=g(),oe=k.S;if(oe!==null&&oe(q,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var me=lI(Z,d);fc(i,a,me,mr(i))}else fc(i,a,d,mr(i))}catch(ye){fc(i,a,{then:function(){},status:"rejected",reason:ye},mr())}finally{F.p=_,k.T=P}}function hI(){}function Ig(i,a,u,d){if(i.tag!==5)throw Error(r(476));var g=c1(i).queue;u1(i,g,a,G,u===null?hI:function(){return d1(i),u(d)})}function c1(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:G},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:u},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function d1(i){var a=c1(i).next.queue;fc(i,a,{},mr())}function Dg(){return Cn(Nc)}function f1(){return Yt().memoizedState}function h1(){return Yt().memoizedState}function mI(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var u=mr();i=Vs(u);var d=Ls(a,i,u);d!==null&&(pr(d,a,u),ac(d,a,u)),a={cache:lg()},i.payload=a;return}a=a.return}}function pI(i,a,u){var d=mr();u={lane:d,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},Yf(i)?p1(a,u):(u=Zp(i,a,u,d),u!==null&&(pr(u,i,d),g1(u,a,d)))}function m1(i,a,u){var d=mr();fc(i,a,u,d)}function fc(i,a,u,d){var g={lane:d,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(Yf(i))p1(a,g);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var P=a.lastRenderedState,q=_(P,u);if(g.hasEagerState=!0,g.eagerState=q,ur(q,P))return If(i,a,g,0),wt===null&&Nf(),!1}catch{}finally{}if(u=Zp(i,a,g,d),u!==null)return pr(u,i,d),g1(u,a,d),!0}return!1}function Mg(i,a,u,d){if(d={lane:2,revertLane:d0(),action:d,hasEagerState:!1,eagerState:null,next:null},Yf(i)){if(a)throw Error(r(479))}else a=Zp(i,u,d,2),a!==null&&pr(a,i,2)}function Yf(i){var a=i.alternate;return i===Fe||a!==null&&a===Fe}function p1(i,a){_l=Hf=!0;var u=i.pending;u===null?a.next=a:(a.next=u.next,u.next=a),i.pending=a}function g1(i,a,u){if((u&4194048)!==0){var d=a.lanes;d&=i.pendingLanes,u|=d,a.lanes=u,Va(i,u)}}var Xf={readContext:Cn,use:Ff,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut,useHostTransitionStatus:Ut,useFormState:Ut,useActionState:Ut,useOptimistic:Ut,useMemoCache:Ut,useCacheRefresh:Ut},y1={readContext:Cn,use:Ff,useCallback:function(i,a){return Xn().memoizedState=[i,a===void 0?null:a],i},useContext:Cn,useEffect:e1,useImperativeHandle:function(i,a,u){u=u!=null?u.concat([i]):null,Kf(4194308,4,i1.bind(null,a,i),u)},useLayoutEffect:function(i,a){return Kf(4194308,4,i,a)},useInsertionEffect:function(i,a){Kf(4,2,i,a)},useMemo:function(i,a){var u=Xn();a=a===void 0?null:a;var d=i();if(oo){Ft(!0);try{i()}finally{Ft(!1)}}return u.memoizedState=[d,a],d},useReducer:function(i,a,u){var d=Xn();if(u!==void 0){var g=u(a);if(oo){Ft(!0);try{u(a)}finally{Ft(!1)}}}else g=a;return d.memoizedState=d.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},d.queue=i,i=i.dispatch=pI.bind(null,Fe,i),[d.memoizedState,i]},useRef:function(i){var a=Xn();return i={current:i},a.memoizedState=i},useState:function(i){i=Cg(i);var a=i.queue,u=m1.bind(null,Fe,a);return a.dispatch=u,[i.memoizedState,u]},useDebugValue:Rg,useDeferredValue:function(i,a){var u=Xn();return Ng(u,i,a)},useTransition:function(){var i=Cg(!1);return i=u1.bind(null,Fe,i.queue,!0,!1),Xn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,u){var d=Fe,g=Xn();if(lt){if(u===void 0)throw Error(r(407));u=u()}else{if(u=a(),wt===null)throw Error(r(349));(rt&124)!==0||jw(d,a,u)}g.memoizedState=u;var _={value:u,getSnapshot:a};return g.queue=_,e1(Uw.bind(null,d,_,i),[i]),d.flags|=2048,wl(9,Gf(),zw.bind(null,d,_,u,a),null),u},useId:function(){var i=Xn(),a=wt.identifierPrefix;if(lt){var u=is,d=rs;u=(d&~(1<<32-St(d)-1)).toString(32)+u,a="«"+a+"R"+u,u=$f++,0<u&&(a+="H"+u.toString(32)),a+="»"}else u=uI++,a="«"+a+"r"+u.toString(32)+"»";return i.memoizedState=a},useHostTransitionStatus:Dg,useFormState:Xw,useActionState:Xw,useOptimistic:function(i){var a=Xn();a.memoizedState=a.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=Mg.bind(null,Fe,!0,u),u.dispatch=a,[i,a]},useMemoCache:Tg,useCacheRefresh:function(){return Xn().memoizedState=mI.bind(null,Fe)}},v1={readContext:Cn,use:Ff,useCallback:a1,useContext:Cn,useEffect:t1,useImperativeHandle:s1,useInsertionEffect:n1,useLayoutEffect:r1,useMemo:o1,useReducer:qf,useRef:Jw,useState:function(){return qf(os)},useDebugValue:Rg,useDeferredValue:function(i,a){var u=Yt();return l1(u,gt.memoizedState,i,a)},useTransition:function(){var i=qf(os)[0],a=Yt().memoizedState;return[typeof i=="boolean"?i:cc(i),a]},useSyncExternalStore:Lw,useId:f1,useHostTransitionStatus:Dg,useFormState:Ww,useActionState:Ww,useOptimistic:function(i,a){var u=Yt();return $w(u,gt,i,a)},useMemoCache:Tg,useCacheRefresh:h1},gI={readContext:Cn,use:Ff,useCallback:a1,useContext:Cn,useEffect:t1,useImperativeHandle:s1,useInsertionEffect:n1,useLayoutEffect:r1,useMemo:o1,useReducer:Ag,useRef:Jw,useState:function(){return Ag(os)},useDebugValue:Rg,useDeferredValue:function(i,a){var u=Yt();return gt===null?Ng(u,i,a):l1(u,gt.memoizedState,i,a)},useTransition:function(){var i=Ag(os)[0],a=Yt().memoizedState;return[typeof i=="boolean"?i:cc(i),a]},useSyncExternalStore:Lw,useId:f1,useHostTransitionStatus:Dg,useFormState:Zw,useActionState:Zw,useOptimistic:function(i,a){var u=Yt();return gt!==null?$w(u,gt,i,a):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:Tg,useCacheRefresh:h1},El=null,hc=0;function Wf(i){var a=hc;return hc+=1,El===null&&(El=[]),Rw(El,i,a)}function mc(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Qf(i,a){throw a.$$typeof===v?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function _1(i){var a=i._init;return a(i._payload)}function b1(i){function a(re,te){if(i){var se=re.deletions;se===null?(re.deletions=[te],re.flags|=16):se.push(te)}}function u(re,te){if(!i)return null;for(;te!==null;)a(re,te),te=te.sibling;return null}function d(re){for(var te=new Map;re!==null;)re.key!==null?te.set(re.key,re):te.set(re.index,re),re=re.sibling;return te}function g(re,te){return re=ns(re,te),re.index=0,re.sibling=null,re}function _(re,te,se){return re.index=se,i?(se=re.alternate,se!==null?(se=se.index,se<te?(re.flags|=67108866,te):se):(re.flags|=67108866,te)):(re.flags|=1048576,te)}function P(re){return i&&re.alternate===null&&(re.flags|=67108866),re}function q(re,te,se,ge){return te===null||te.tag!==6?(te=eg(se,re.mode,ge),te.return=re,te):(te=g(te,se),te.return=re,te)}function Z(re,te,se,ge){var Ce=se.type;return Ce===M?me(re,te,se.props.children,ge,se.key):te!==null&&(te.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===S&&_1(Ce)===te.type)?(te=g(te,se.props),mc(te,se),te.return=re,te):(te=Mf(se.type,se.key,se.props,null,re.mode,ge),mc(te,se),te.return=re,te)}function oe(re,te,se,ge){return te===null||te.tag!==4||te.stateNode.containerInfo!==se.containerInfo||te.stateNode.implementation!==se.implementation?(te=tg(se,re.mode,ge),te.return=re,te):(te=g(te,se.children||[]),te.return=re,te)}function me(re,te,se,ge,Ce){return te===null||te.tag!==7?(te=Ja(se,re.mode,ge,Ce),te.return=re,te):(te=g(te,se),te.return=re,te)}function ye(re,te,se){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return te=eg(""+te,re.mode,se),te.return=re,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case b:return se=Mf(te.type,te.key,te.props,null,re.mode,se),mc(se,te),se.return=re,se;case R:return te=tg(te,re.mode,se),te.return=re,te;case S:var ge=te._init;return te=ge(te._payload),ye(re,te,se)}if(Q(te)||H(te))return te=Ja(te,re.mode,se,null),te.return=re,te;if(typeof te.then=="function")return ye(re,Wf(te),se);if(te.$$typeof===Y)return ye(re,Lf(re,te),se);Qf(re,te)}return null}function ue(re,te,se,ge){var Ce=te!==null?te.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return Ce!==null?null:q(re,te,""+se,ge);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case b:return se.key===Ce?Z(re,te,se,ge):null;case R:return se.key===Ce?oe(re,te,se,ge):null;case S:return Ce=se._init,se=Ce(se._payload),ue(re,te,se,ge)}if(Q(se)||H(se))return Ce!==null?null:me(re,te,se,ge,null);if(typeof se.then=="function")return ue(re,te,Wf(se),ge);if(se.$$typeof===Y)return ue(re,te,Lf(re,se),ge);Qf(re,se)}return null}function ce(re,te,se,ge,Ce){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return re=re.get(se)||null,q(te,re,""+ge,Ce);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case b:return re=re.get(ge.key===null?se:ge.key)||null,Z(te,re,ge,Ce);case R:return re=re.get(ge.key===null?se:ge.key)||null,oe(te,re,ge,Ce);case S:var Ge=ge._init;return ge=Ge(ge._payload),ce(re,te,se,ge,Ce)}if(Q(ge)||H(ge))return re=re.get(se)||null,me(te,re,ge,Ce,null);if(typeof ge.then=="function")return ce(re,te,se,Wf(ge),Ce);if(ge.$$typeof===Y)return ce(re,te,se,Lf(te,ge),Ce);Qf(te,ge)}return null}function Pe(re,te,se,ge){for(var Ce=null,Ge=null,ke=te,Ie=te=0,fn=null;ke!==null&&Ie<se.length;Ie++){ke.index>Ie?(fn=ke,ke=null):fn=ke.sibling;var ot=ue(re,ke,se[Ie],ge);if(ot===null){ke===null&&(ke=fn);break}i&&ke&&ot.alternate===null&&a(re,ke),te=_(ot,te,Ie),Ge===null?Ce=ot:Ge.sibling=ot,Ge=ot,ke=fn}if(Ie===se.length)return u(re,ke),lt&&to(re,Ie),Ce;if(ke===null){for(;Ie<se.length;Ie++)ke=ye(re,se[Ie],ge),ke!==null&&(te=_(ke,te,Ie),Ge===null?Ce=ke:Ge.sibling=ke,Ge=ke);return lt&&to(re,Ie),Ce}for(ke=d(ke);Ie<se.length;Ie++)fn=ce(ke,re,Ie,se[Ie],ge),fn!==null&&(i&&fn.alternate!==null&&ke.delete(fn.key===null?Ie:fn.key),te=_(fn,te,Ie),Ge===null?Ce=fn:Ge.sibling=fn,Ge=fn);return i&&ke.forEach(function(ea){return a(re,ea)}),lt&&to(re,Ie),Ce}function Ne(re,te,se,ge){if(se==null)throw Error(r(151));for(var Ce=null,Ge=null,ke=te,Ie=te=0,fn=null,ot=se.next();ke!==null&&!ot.done;Ie++,ot=se.next()){ke.index>Ie?(fn=ke,ke=null):fn=ke.sibling;var ea=ue(re,ke,ot.value,ge);if(ea===null){ke===null&&(ke=fn);break}i&&ke&&ea.alternate===null&&a(re,ke),te=_(ea,te,Ie),Ge===null?Ce=ea:Ge.sibling=ea,Ge=ea,ke=fn}if(ot.done)return u(re,ke),lt&&to(re,Ie),Ce;if(ke===null){for(;!ot.done;Ie++,ot=se.next())ot=ye(re,ot.value,ge),ot!==null&&(te=_(ot,te,Ie),Ge===null?Ce=ot:Ge.sibling=ot,Ge=ot);return lt&&to(re,Ie),Ce}for(ke=d(ke);!ot.done;Ie++,ot=se.next())ot=ce(ke,re,Ie,ot.value,ge),ot!==null&&(i&&ot.alternate!==null&&ke.delete(ot.key===null?Ie:ot.key),te=_(ot,te,Ie),Ge===null?Ce=ot:Ge.sibling=ot,Ge=ot);return i&&ke.forEach(function(y4){return a(re,y4)}),lt&&to(re,Ie),Ce}function vt(re,te,se,ge){if(typeof se=="object"&&se!==null&&se.type===M&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case b:e:{for(var Ce=se.key;te!==null;){if(te.key===Ce){if(Ce=se.type,Ce===M){if(te.tag===7){u(re,te.sibling),ge=g(te,se.props.children),ge.return=re,re=ge;break e}}else if(te.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===S&&_1(Ce)===te.type){u(re,te.sibling),ge=g(te,se.props),mc(ge,se),ge.return=re,re=ge;break e}u(re,te);break}else a(re,te);te=te.sibling}se.type===M?(ge=Ja(se.props.children,re.mode,ge,se.key),ge.return=re,re=ge):(ge=Mf(se.type,se.key,se.props,null,re.mode,ge),mc(ge,se),ge.return=re,re=ge)}return P(re);case R:e:{for(Ce=se.key;te!==null;){if(te.key===Ce)if(te.tag===4&&te.stateNode.containerInfo===se.containerInfo&&te.stateNode.implementation===se.implementation){u(re,te.sibling),ge=g(te,se.children||[]),ge.return=re,re=ge;break e}else{u(re,te);break}else a(re,te);te=te.sibling}ge=tg(se,re.mode,ge),ge.return=re,re=ge}return P(re);case S:return Ce=se._init,se=Ce(se._payload),vt(re,te,se,ge)}if(Q(se))return Pe(re,te,se,ge);if(H(se)){if(Ce=H(se),typeof Ce!="function")throw Error(r(150));return se=Ce.call(se),Ne(re,te,se,ge)}if(typeof se.then=="function")return vt(re,te,Wf(se),ge);if(se.$$typeof===Y)return vt(re,te,Lf(re,se),ge);Qf(re,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,te!==null&&te.tag===6?(u(re,te.sibling),ge=g(te,se),ge.return=re,re=ge):(u(re,te),ge=eg(se,re.mode,ge),ge.return=re,re=ge),P(re)):u(re,te)}return function(re,te,se,ge){try{hc=0;var Ce=vt(re,te,se,ge);return El=null,Ce}catch(ke){if(ke===ic||ke===zf)throw ke;var Ge=cr(29,ke,null,re.mode);return Ge.lanes=ge,Ge.return=re,Ge}finally{}}}var xl=b1(!0),w1=b1(!1),Lr=W(null),Si=null;function zs(i){var a=i.alternate;J(rn,rn.current&1),J(Lr,i),Si===null&&(a===null||vl.current!==null||a.memoizedState!==null)&&(Si=i)}function E1(i){if(i.tag===22){if(J(rn,rn.current),J(Lr,i),Si===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(Si=i)}}else Us()}function Us(){J(rn,rn.current),J(Lr,Lr.current)}function ls(i){ne(Lr),Si===i&&(Si=null),ne(rn)}var rn=W(0);function Zf(i){for(var a=i;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||x0(u)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Pg(i,a,u,d){a=i.memoizedState,u=u(d,a),u=u==null?a:p({},a,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Og={enqueueSetState:function(i,a,u){i=i._reactInternals;var d=mr(),g=Vs(d);g.payload=a,u!=null&&(g.callback=u),a=Ls(i,g,d),a!==null&&(pr(a,i,d),ac(a,i,d))},enqueueReplaceState:function(i,a,u){i=i._reactInternals;var d=mr(),g=Vs(d);g.tag=1,g.payload=a,u!=null&&(g.callback=u),a=Ls(i,g,d),a!==null&&(pr(a,i,d),ac(a,i,d))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var u=mr(),d=Vs(u);d.tag=2,a!=null&&(d.callback=a),a=Ls(i,d,u),a!==null&&(pr(a,i,u),ac(a,i,u))}};function x1(i,a,u,d,g,_,P){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,_,P):a.prototype&&a.prototype.isPureReactComponent?!Wu(u,d)||!Wu(g,_):!0}function T1(i,a,u,d){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,d),a.state!==i&&Og.enqueueReplaceState(a,a.state,null)}function lo(i,a){var u=a;if("ref"in a){u={};for(var d in a)d!=="ref"&&(u[d]=a[d])}if(i=i.defaultProps){u===a&&(u=p({},u));for(var g in i)u[g]===void 0&&(u[g]=i[g])}return u}var Jf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function S1(i){Jf(i)}function A1(i){console.error(i)}function C1(i){Jf(i)}function eh(i,a){try{var u=i.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function k1(i,a,u){try{var d=i.onCaughtError;d(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Vg(i,a,u){return u=Vs(u),u.tag=3,u.payload={element:null},u.callback=function(){eh(i,a)},u}function R1(i){return i=Vs(i),i.tag=3,i}function N1(i,a,u,d){var g=u.type.getDerivedStateFromError;if(typeof g=="function"){var _=d.value;i.payload=function(){return g(_)},i.callback=function(){k1(a,u,d)}}var P=u.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(i.callback=function(){k1(a,u,d),typeof g!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var q=d.stack;this.componentDidCatch(d.value,{componentStack:q!==null?q:""})})}function yI(i,a,u,d,g){if(u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=u.alternate,a!==null&&tc(a,u,g,!0),u=Lr.current,u!==null){switch(u.tag){case 13:return Si===null?a0():u.alternate===null&&Pt===0&&(Pt=3),u.flags&=-257,u.flags|=65536,u.lanes=g,d===dg?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([d]):a.add(d),l0(i,d,g)),!1;case 22:return u.flags|=65536,d===dg?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([d]):u.add(d)),l0(i,d,g)),!1}throw Error(r(435,u.tag))}return l0(i,d,g),a0(),!1}if(lt)return a=Lr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,d!==ig&&(i=Error(r(422),{cause:d}),ec(Mr(i,u)))):(d!==ig&&(a=Error(r(423),{cause:d}),ec(Mr(a,u))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,d=Mr(d,u),g=Vg(i.stateNode,d,g),mg(i,g),Pt!==4&&(Pt=2)),!1;var _=Error(r(520),{cause:d});if(_=Mr(_,u),wc===null?wc=[_]:wc.push(_),Pt!==4&&(Pt=2),a===null)return!0;d=Mr(d,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,i=g&-g,u.lanes|=i,i=Vg(u.stateNode,d,i),mg(u,i),!1;case 1:if(a=u.type,_=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Gs===null||!Gs.has(_))))return u.flags|=65536,g&=-g,u.lanes|=g,g=R1(g),N1(g,i,u,d),mg(u,g),!1}u=u.return}while(u!==null);return!1}var I1=Error(r(461)),cn=!1;function _n(i,a,u,d){a.child=i===null?w1(a,null,u,d):xl(a,i.child,u,d)}function D1(i,a,u,d,g){u=u.render;var _=a.ref;if("ref"in d){var P={};for(var q in d)q!=="ref"&&(P[q]=d[q])}else P=d;return so(a),d=_g(i,a,u,P,_,g),q=bg(),i!==null&&!cn?(wg(i,a,g),us(i,a,g)):(lt&&q&&ng(a),a.flags|=1,_n(i,a,d,g),a.child)}function M1(i,a,u,d,g){if(i===null){var _=u.type;return typeof _=="function"&&!Jp(_)&&_.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=_,P1(i,a,_,d,g)):(i=Mf(u.type,null,d,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(_=i.child,!Fg(i,g)){var P=_.memoizedProps;if(u=u.compare,u=u!==null?u:Wu,u(P,d)&&i.ref===a.ref)return us(i,a,g)}return a.flags|=1,i=ns(_,d),i.ref=a.ref,i.return=a,a.child=i}function P1(i,a,u,d,g){if(i!==null){var _=i.memoizedProps;if(Wu(_,d)&&i.ref===a.ref)if(cn=!1,a.pendingProps=d=_,Fg(i,g))(i.flags&131072)!==0&&(cn=!0);else return a.lanes=i.lanes,us(i,a,g)}return Lg(i,a,u,d,g)}function O1(i,a,u){var d=a.pendingProps,g=d.children,_=i!==null?i.memoizedState:null;if(d.mode==="hidden"){if((a.flags&128)!==0){if(d=_!==null?_.baseLanes|u:u,i!==null){for(g=a.child=i.child,_=0;g!==null;)_=_|g.lanes|g.childLanes,g=g.sibling;a.childLanes=_&~d}else a.childLanes=0,a.child=null;return V1(i,a,d,u)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&jf(a,_!==null?_.cachePool:null),_!==null?Pw(a,_):gg(),E1(a);else return a.lanes=a.childLanes=536870912,V1(i,a,_!==null?_.baseLanes|u:u,u)}else _!==null?(jf(a,_.cachePool),Pw(a,_),Us(),a.memoizedState=null):(i!==null&&jf(a,null),gg(),Us());return _n(i,a,g,u),a.child}function V1(i,a,u,d){var g=cg();return g=g===null?null:{parent:nn._currentValue,pool:g},a.memoizedState={baseLanes:u,cachePool:g},i!==null&&jf(a,null),gg(),E1(a),i!==null&&tc(i,a,d,!0),null}function th(i,a){var u=a.ref;if(u===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(i===null||i.ref!==u)&&(a.flags|=4194816)}}function Lg(i,a,u,d,g){return so(a),u=_g(i,a,u,d,void 0,g),d=bg(),i!==null&&!cn?(wg(i,a,g),us(i,a,g)):(lt&&d&&ng(a),a.flags|=1,_n(i,a,u,g),a.child)}function L1(i,a,u,d,g,_){return so(a),a.updateQueue=null,u=Vw(a,d,u,g),Ow(i),d=bg(),i!==null&&!cn?(wg(i,a,_),us(i,a,_)):(lt&&d&&ng(a),a.flags|=1,_n(i,a,u,_),a.child)}function j1(i,a,u,d,g){if(so(a),a.stateNode===null){var _=hl,P=u.contextType;typeof P=="object"&&P!==null&&(_=Cn(P)),_=new u(d,_),a.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Og,a.stateNode=_,_._reactInternals=a,_=a.stateNode,_.props=d,_.state=a.memoizedState,_.refs={},fg(a),P=u.contextType,_.context=typeof P=="object"&&P!==null?Cn(P):hl,_.state=a.memoizedState,P=u.getDerivedStateFromProps,typeof P=="function"&&(Pg(a,u,P,d),_.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(P=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),P!==_.state&&Og.enqueueReplaceState(_,_.state,null),lc(a,d,_,g),oc(),_.state=a.memoizedState),typeof _.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(i===null){_=a.stateNode;var q=a.memoizedProps,Z=lo(u,q);_.props=Z;var oe=_.context,me=u.contextType;P=hl,typeof me=="object"&&me!==null&&(P=Cn(me));var ye=u.getDerivedStateFromProps;me=typeof ye=="function"||typeof _.getSnapshotBeforeUpdate=="function",q=a.pendingProps!==q,me||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(q||oe!==P)&&T1(a,_,d,P),Os=!1;var ue=a.memoizedState;_.state=ue,lc(a,d,_,g),oc(),oe=a.memoizedState,q||ue!==oe||Os?(typeof ye=="function"&&(Pg(a,u,ye,d),oe=a.memoizedState),(Z=Os||x1(a,u,Z,d,ue,oe,P))?(me||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(a.flags|=4194308)):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=oe),_.props=d,_.state=oe,_.context=P,d=Z):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{_=a.stateNode,hg(i,a),P=a.memoizedProps,me=lo(u,P),_.props=me,ye=a.pendingProps,ue=_.context,oe=u.contextType,Z=hl,typeof oe=="object"&&oe!==null&&(Z=Cn(oe)),q=u.getDerivedStateFromProps,(oe=typeof q=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(P!==ye||ue!==Z)&&T1(a,_,d,Z),Os=!1,ue=a.memoizedState,_.state=ue,lc(a,d,_,g),oc();var ce=a.memoizedState;P!==ye||ue!==ce||Os||i!==null&&i.dependencies!==null&&Vf(i.dependencies)?(typeof q=="function"&&(Pg(a,u,q,d),ce=a.memoizedState),(me=Os||x1(a,u,me,d,ue,ce,Z)||i!==null&&i.dependencies!==null&&Vf(i.dependencies))?(oe||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(d,ce,Z),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(d,ce,Z)),typeof _.componentDidUpdate=="function"&&(a.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof _.componentDidUpdate!="function"||P===i.memoizedProps&&ue===i.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||P===i.memoizedProps&&ue===i.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=ce),_.props=d,_.state=ce,_.context=Z,d=me):(typeof _.componentDidUpdate!="function"||P===i.memoizedProps&&ue===i.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||P===i.memoizedProps&&ue===i.memoizedState||(a.flags|=1024),d=!1)}return _=d,th(i,a),d=(a.flags&128)!==0,_||d?(_=a.stateNode,u=d&&typeof u.getDerivedStateFromError!="function"?null:_.render(),a.flags|=1,i!==null&&d?(a.child=xl(a,i.child,null,g),a.child=xl(a,null,u,g)):_n(i,a,u,g),a.memoizedState=_.state,i=a.child):i=us(i,a,g),i}function z1(i,a,u,d){return Ju(),a.flags|=256,_n(i,a,u,d),a.child}var jg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zg(i){return{baseLanes:i,cachePool:Aw()}}function Ug(i,a,u){return i=i!==null?i.childLanes&~u:0,a&&(i|=jr),i}function U1(i,a,u){var d=a.pendingProps,g=!1,_=(a.flags&128)!==0,P;if((P=_)||(P=i!==null&&i.memoizedState===null?!1:(rn.current&2)!==0),P&&(g=!0,a.flags&=-129),P=(a.flags&32)!==0,a.flags&=-33,i===null){if(lt){if(g?zs(a):Us(),lt){var q=Mt,Z;if(Z=q){e:{for(Z=q,q=Ti;Z.nodeType!==8;){if(!q){q=null;break e}if(Z=Zr(Z.nextSibling),Z===null){q=null;break e}}q=Z}q!==null?(a.memoizedState={dehydrated:q,treeContext:eo!==null?{id:rs,overflow:is}:null,retryLane:536870912,hydrationErrors:null},Z=cr(18,null,null,0),Z.stateNode=q,Z.return=a,a.child=Z,Hn=a,Mt=null,Z=!0):Z=!1}Z||ro(a)}if(q=a.memoizedState,q!==null&&(q=q.dehydrated,q!==null))return x0(q)?a.lanes=32:a.lanes=536870912,null;ls(a)}return q=d.children,d=d.fallback,g?(Us(),g=a.mode,q=nh({mode:"hidden",children:q},g),d=Ja(d,g,u,null),q.return=a,d.return=a,q.sibling=d,a.child=q,g=a.child,g.memoizedState=zg(u),g.childLanes=Ug(i,P,u),a.memoizedState=jg,d):(zs(a),Bg(a,q))}if(Z=i.memoizedState,Z!==null&&(q=Z.dehydrated,q!==null)){if(_)a.flags&256?(zs(a),a.flags&=-257,a=Hg(i,a,u)):a.memoizedState!==null?(Us(),a.child=i.child,a.flags|=128,a=null):(Us(),g=d.fallback,q=a.mode,d=nh({mode:"visible",children:d.children},q),g=Ja(g,q,u,null),g.flags|=2,d.return=a,g.return=a,d.sibling=g,a.child=d,xl(a,i.child,null,u),d=a.child,d.memoizedState=zg(u),d.childLanes=Ug(i,P,u),a.memoizedState=jg,a=g);else if(zs(a),x0(q)){if(P=q.nextSibling&&q.nextSibling.dataset,P)var oe=P.dgst;P=oe,d=Error(r(419)),d.stack="",d.digest=P,ec({value:d,source:null,stack:null}),a=Hg(i,a,u)}else if(cn||tc(i,a,u,!1),P=(u&i.childLanes)!==0,cn||P){if(P=wt,P!==null&&(d=u&-u,d=(d&42)!==0?1:ci(d),d=(d&(P.suspendedLanes|u))!==0?0:d,d!==0&&d!==Z.retryLane))throw Z.retryLane=d,fl(i,d),pr(P,i,d),I1;q.data==="$?"||a0(),a=Hg(i,a,u)}else q.data==="$?"?(a.flags|=192,a.child=i.child,a=null):(i=Z.treeContext,Mt=Zr(q.nextSibling),Hn=a,lt=!0,no=null,Ti=!1,i!==null&&(Or[Vr++]=rs,Or[Vr++]=is,Or[Vr++]=eo,rs=i.id,is=i.overflow,eo=a),a=Bg(a,d.children),a.flags|=4096);return a}return g?(Us(),g=d.fallback,q=a.mode,Z=i.child,oe=Z.sibling,d=ns(Z,{mode:"hidden",children:d.children}),d.subtreeFlags=Z.subtreeFlags&65011712,oe!==null?g=ns(oe,g):(g=Ja(g,q,u,null),g.flags|=2),g.return=a,d.return=a,d.sibling=g,a.child=d,d=g,g=a.child,q=i.child.memoizedState,q===null?q=zg(u):(Z=q.cachePool,Z!==null?(oe=nn._currentValue,Z=Z.parent!==oe?{parent:oe,pool:oe}:Z):Z=Aw(),q={baseLanes:q.baseLanes|u,cachePool:Z}),g.memoizedState=q,g.childLanes=Ug(i,P,u),a.memoizedState=jg,d):(zs(a),u=i.child,i=u.sibling,u=ns(u,{mode:"visible",children:d.children}),u.return=a,u.sibling=null,i!==null&&(P=a.deletions,P===null?(a.deletions=[i],a.flags|=16):P.push(i)),a.child=u,a.memoizedState=null,u)}function Bg(i,a){return a=nh({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function nh(i,a){return i=cr(22,i,null,a),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Hg(i,a,u){return xl(a,i.child,null,u),i=Bg(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function B1(i,a,u){i.lanes|=a;var d=i.alternate;d!==null&&(d.lanes|=a),ag(i.return,a,u)}function $g(i,a,u,d,g){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:g}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=d,_.tail=u,_.tailMode=g)}function H1(i,a,u){var d=a.pendingProps,g=d.revealOrder,_=d.tail;if(_n(i,a,d.children,u),d=rn.current,(d&2)!==0)d=d&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&B1(i,u,a);else if(i.tag===19)B1(i,u,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}switch(J(rn,d),g){case"forwards":for(u=a.child,g=null;u!==null;)i=u.alternate,i!==null&&Zf(i)===null&&(g=u),u=u.sibling;u=g,u===null?(g=a.child,a.child=null):(g=u.sibling,u.sibling=null),$g(a,!1,g,u,_);break;case"backwards":for(u=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&Zf(i)===null){a.child=g;break}i=g.sibling,g.sibling=u,u=g,g=i}$g(a,!0,u,null,_);break;case"together":$g(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function us(i,a,u){if(i!==null&&(a.dependencies=i.dependencies),qs|=a.lanes,(u&a.childLanes)===0)if(i!==null){if(tc(i,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,u=ns(i,i.pendingProps),a.child=u,u.return=a;i.sibling!==null;)i=i.sibling,u=u.sibling=ns(i,i.pendingProps),u.return=a;u.sibling=null}return a.child}function Fg(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Vf(i)))}function vI(i,a,u){switch(a.tag){case 3:he(a,a.stateNode.containerInfo),Ps(a,nn,i.memoizedState.cache),Ju();break;case 27:case 5:Ae(a);break;case 4:he(a,a.stateNode.containerInfo);break;case 10:Ps(a,a.type,a.memoizedProps.value);break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(zs(a),a.flags|=128,null):(u&a.child.childLanes)!==0?U1(i,a,u):(zs(a),i=us(i,a,u),i!==null?i.sibling:null);zs(a);break;case 19:var g=(i.flags&128)!==0;if(d=(u&a.childLanes)!==0,d||(tc(i,a,u,!1),d=(u&a.childLanes)!==0),g){if(d)return H1(i,a,u);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),J(rn,rn.current),d)break;return null;case 22:case 23:return a.lanes=0,O1(i,a,u);case 24:Ps(a,nn,i.memoizedState.cache)}return us(i,a,u)}function $1(i,a,u){if(i!==null)if(i.memoizedProps!==a.pendingProps)cn=!0;else{if(!Fg(i,u)&&(a.flags&128)===0)return cn=!1,vI(i,a,u);cn=(i.flags&131072)!==0}else cn=!1,lt&&(a.flags&1048576)!==0&&_w(a,Of,a.index);switch(a.lanes=0,a.tag){case 16:e:{i=a.pendingProps;var d=a.elementType,g=d._init;if(d=g(d._payload),a.type=d,typeof d=="function")Jp(d)?(i=lo(d,i),a.tag=1,a=j1(null,a,d,i,u)):(a.tag=0,a=Lg(null,a,d,i,u));else{if(d!=null){if(g=d.$$typeof,g===y){a.tag=11,a=D1(null,a,d,i,u);break e}else if(g===x){a.tag=14,a=M1(null,a,d,i,u);break e}}throw a=U(d)||d,Error(r(306,a,""))}}return a;case 0:return Lg(i,a,a.type,a.pendingProps,u);case 1:return d=a.type,g=lo(d,a.pendingProps),j1(i,a,d,g,u);case 3:e:{if(he(a,a.stateNode.containerInfo),i===null)throw Error(r(387));d=a.pendingProps;var _=a.memoizedState;g=_.element,hg(i,a),lc(a,d,null,u);var P=a.memoizedState;if(d=P.cache,Ps(a,nn,d),d!==_.cache&&og(a,[nn],u,!0),oc(),d=P.element,_.isDehydrated)if(_={element:d,isDehydrated:!1,cache:P.cache},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){a=z1(i,a,d,u);break e}else if(d!==g){g=Mr(Error(r(424)),a),ec(g),a=z1(i,a,d,u);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Mt=Zr(i.firstChild),Hn=a,lt=!0,no=null,Ti=!0,u=w1(a,null,d,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Ju(),d===g){a=us(i,a,u);break e}_n(i,a,d,u)}a=a.child}return a;case 26:return th(i,a),i===null?(u=KE(a.type,null,a.pendingProps,null))?a.memoizedState=u:lt||(u=a.type,i=a.pendingProps,d=gh(le.current).createElement(u),d[zt]=a,d[Dt]=i,wn(d,u,i),At(d),a.stateNode=d):a.memoizedState=KE(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return Ae(a),i===null&&lt&&(d=a.stateNode=FE(a.type,a.pendingProps,le.current),Hn=a,Ti=!0,g=Mt,Xs(a.type)?(T0=g,Mt=Zr(d.firstChild)):Mt=g),_n(i,a,a.pendingProps.children,u),th(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&lt&&((g=d=Mt)&&(d=GI(d,a.type,a.pendingProps,Ti),d!==null?(a.stateNode=d,Hn=a,Mt=Zr(d.firstChild),Ti=!1,g=!0):g=!1),g||ro(a)),Ae(a),g=a.type,_=a.pendingProps,P=i!==null?i.memoizedProps:null,d=_.children,b0(g,_)?d=null:P!==null&&b0(g,P)&&(a.flags|=32),a.memoizedState!==null&&(g=_g(i,a,cI,null,null,u),Nc._currentValue=g),th(i,a),_n(i,a,d,u),a.child;case 6:return i===null&&lt&&((i=u=Mt)&&(u=KI(u,a.pendingProps,Ti),u!==null?(a.stateNode=u,Hn=a,Mt=null,i=!0):i=!1),i||ro(a)),null;case 13:return U1(i,a,u);case 4:return he(a,a.stateNode.containerInfo),d=a.pendingProps,i===null?a.child=xl(a,null,d,u):_n(i,a,d,u),a.child;case 11:return D1(i,a,a.type,a.pendingProps,u);case 7:return _n(i,a,a.pendingProps,u),a.child;case 8:return _n(i,a,a.pendingProps.children,u),a.child;case 12:return _n(i,a,a.pendingProps.children,u),a.child;case 10:return d=a.pendingProps,Ps(a,a.type,d.value),_n(i,a,d.children,u),a.child;case 9:return g=a.type._context,d=a.pendingProps.children,so(a),g=Cn(g),d=d(g),a.flags|=1,_n(i,a,d,u),a.child;case 14:return M1(i,a,a.type,a.pendingProps,u);case 15:return P1(i,a,a.type,a.pendingProps,u);case 19:return H1(i,a,u);case 31:return d=a.pendingProps,u=a.mode,d={mode:d.mode,children:d.children},i===null?(u=nh(d,u),u.ref=a.ref,a.child=u,u.return=a,a=u):(u=ns(i.child,d),u.ref=a.ref,a.child=u,u.return=a,a=u),a;case 22:return O1(i,a,u);case 24:return so(a),d=Cn(nn),i===null?(g=cg(),g===null&&(g=wt,_=lg(),g.pooledCache=_,_.refCount++,_!==null&&(g.pooledCacheLanes|=u),g=_),a.memoizedState={parent:d,cache:g},fg(a),Ps(a,nn,g)):((i.lanes&u)!==0&&(hg(i,a),lc(a,null,null,u),oc()),g=i.memoizedState,_=a.memoizedState,g.parent!==d?(g={parent:d,cache:d},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),Ps(a,nn,d)):(d=_.cache,Ps(a,nn,d),d!==g.cache&&og(a,[nn],u,!0))),_n(i,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function cs(i){i.flags|=4}function F1(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!ZE(a)){if(a=Lr.current,a!==null&&((rt&4194048)===rt?Si!==null:(rt&62914560)!==rt&&(rt&536870912)===0||a!==Si))throw sc=dg,Cw;i.flags|=8192}}function rh(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?Gr():536870912,i.lanes|=a,Cl|=a)}function pc(i,a){if(!lt)switch(i.tailMode){case"hidden":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function Ct(i){var a=i.alternate!==null&&i.alternate.child===i.child,u=0,d=0;if(a)for(var g=i.child;g!==null;)u|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)u|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=d,i.childLanes=u,a}function _I(i,a,u){var d=a.pendingProps;switch(rg(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(a),null;case 1:return Ct(a),null;case 3:return u=a.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),as(nn),Ee(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(Zu(a)?cs(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Ew())),Ct(a),null;case 26:return u=a.memoizedState,i===null?(cs(a),u!==null?(Ct(a),F1(a,u)):(Ct(a),a.flags&=-16777217)):u?u!==i.memoizedState?(cs(a),Ct(a),F1(a,u)):(Ct(a),a.flags&=-16777217):(i.memoizedProps!==d&&cs(a),Ct(a),a.flags&=-16777217),null;case 27:$e(a),u=le.current;var g=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==d&&cs(a);else{if(!d){if(a.stateNode===null)throw Error(r(166));return Ct(a),null}i=ee.current,Zu(a)?bw(a):(i=FE(g,d,u),a.stateNode=i,cs(a))}return Ct(a),null;case 5:if($e(a),u=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==d&&cs(a);else{if(!d){if(a.stateNode===null)throw Error(r(166));return Ct(a),null}if(i=ee.current,Zu(a))bw(a);else{switch(g=gh(le.current),i){case 1:i=g.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:i=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":i=g.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":i=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":i=g.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof d.is=="string"?g.createElement("select",{is:d.is}):g.createElement("select"),d.multiple?i.multiple=!0:d.size&&(i.size=d.size);break;default:i=typeof d.is=="string"?g.createElement(u,{is:d.is}):g.createElement(u)}}i[zt]=a,i[Dt]=d;e:for(g=a.child;g!==null;){if(g.tag===5||g.tag===6)i.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===a)break e;for(;g.sibling===null;){if(g.return===null||g.return===a)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}a.stateNode=i;e:switch(wn(i,u,d),u){case"button":case"input":case"select":case"textarea":i=!!d.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&cs(a)}}return Ct(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==d&&cs(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(r(166));if(i=le.current,Zu(a)){if(i=a.stateNode,u=a.memoizedProps,d=null,g=Hn,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}i[zt]=a,i=!!(i.nodeValue===u||d!==null&&d.suppressHydrationWarning===!0||LE(i.nodeValue,u)),i||ro(a)}else i=gh(i).createTextNode(d),i[zt]=a,a.stateNode=i}return Ct(a),null;case 13:if(d=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=Zu(a),d!==null&&d.dehydrated!==null){if(i===null){if(!g)throw Error(r(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[zt]=a}else Ju(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ct(a),g=!1}else g=Ew(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(ls(a),a):(ls(a),null)}if(ls(a),(a.flags&128)!==0)return a.lanes=u,a;if(u=d!==null,i=i!==null&&i.memoizedState!==null,u){d=a.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool);var _=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(_=d.memoizedState.cachePool.pool),_!==g&&(d.flags|=2048)}return u!==i&&u&&(a.child.flags|=8192),rh(a,a.updateQueue),Ct(a),null;case 4:return Ee(),i===null&&p0(a.stateNode.containerInfo),Ct(a),null;case 10:return as(a.type),Ct(a),null;case 19:if(ne(rn),g=a.memoizedState,g===null)return Ct(a),null;if(d=(a.flags&128)!==0,_=g.rendering,_===null)if(d)pc(g,!1);else{if(Pt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(_=Zf(i),_!==null){for(a.flags|=128,pc(g,!1),i=_.updateQueue,a.updateQueue=i,rh(a,i),a.subtreeFlags=0,i=u,u=a.child;u!==null;)vw(u,i),u=u.sibling;return J(rn,rn.current&1|2),a.child}i=i.sibling}g.tail!==null&&Le()>ah&&(a.flags|=128,d=!0,pc(g,!1),a.lanes=4194304)}else{if(!d)if(i=Zf(_),i!==null){if(a.flags|=128,d=!0,i=i.updateQueue,a.updateQueue=i,rh(a,i),pc(g,!0),g.tail===null&&g.tailMode==="hidden"&&!_.alternate&&!lt)return Ct(a),null}else 2*Le()-g.renderingStartTime>ah&&u!==536870912&&(a.flags|=128,d=!0,pc(g,!1),a.lanes=4194304);g.isBackwards?(_.sibling=a.child,a.child=_):(i=g.last,i!==null?i.sibling=_:a.child=_,g.last=_)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=Le(),a.sibling=null,i=rn.current,J(rn,d?i&1|2:i&1),a):(Ct(a),null);case 22:case 23:return ls(a),yg(),d=a.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(u&536870912)!==0&&(a.flags&128)===0&&(Ct(a),a.subtreeFlags&6&&(a.flags|=8192)):Ct(a),u=a.updateQueue,u!==null&&rh(a,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==u&&(a.flags|=2048),i!==null&&ne(ao),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),as(nn),Ct(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function bI(i,a){switch(rg(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return as(nn),Ee(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return $e(a),null;case 13:if(ls(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Ju()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return ne(rn),null;case 4:return Ee(),null;case 10:return as(a.type),null;case 22:case 23:return ls(a),yg(),i!==null&&ne(ao),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return as(nn),null;case 25:return null;default:return null}}function q1(i,a){switch(rg(a),a.tag){case 3:as(nn),Ee();break;case 26:case 27:case 5:$e(a);break;case 4:Ee();break;case 13:ls(a);break;case 19:ne(rn);break;case 10:as(a.type);break;case 22:case 23:ls(a),yg(),i!==null&&ne(ao);break;case 24:as(nn)}}function gc(i,a){try{var u=a.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var g=d.next;u=g;do{if((u.tag&i)===i){d=void 0;var _=u.create,P=u.inst;d=_(),P.destroy=d}u=u.next}while(u!==g)}}catch(q){_t(a,a.return,q)}}function Bs(i,a,u){try{var d=a.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var _=g.next;d=_;do{if((d.tag&i)===i){var P=d.inst,q=P.destroy;if(q!==void 0){P.destroy=void 0,g=a;var Z=u,oe=q;try{oe()}catch(me){_t(g,Z,me)}}}d=d.next}while(d!==_)}}catch(me){_t(a,a.return,me)}}function G1(i){var a=i.updateQueue;if(a!==null){var u=i.stateNode;try{Mw(a,u)}catch(d){_t(i,i.return,d)}}}function K1(i,a,u){u.props=lo(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(d){_t(i,a,d)}}function yc(i,a){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof u=="function"?i.refCleanup=u(d):u.current=d}}catch(g){_t(i,a,g)}}function Ai(i,a){var u=i.ref,d=i.refCleanup;if(u!==null)if(typeof d=="function")try{d()}catch(g){_t(i,a,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(g){_t(i,a,g)}else u.current=null}function Y1(i){var a=i.type,u=i.memoizedProps,d=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&d.focus();break e;case"img":u.src?d.src=u.src:u.srcSet&&(d.srcset=u.srcSet)}}catch(g){_t(i,i.return,g)}}function qg(i,a,u){try{var d=i.stateNode;BI(d,i.type,u,a),d[Dt]=a}catch(g){_t(i,i.return,g)}}function X1(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Xs(i.type)||i.tag===4}function Gg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||X1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Xs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Kg(i,a,u){var d=i.tag;if(d===5||d===6)i=i.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(i),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=ph));else if(d!==4&&(d===27&&Xs(i.type)&&(u=i.stateNode,a=null),i=i.child,i!==null))for(Kg(i,a,u),i=i.sibling;i!==null;)Kg(i,a,u),i=i.sibling}function ih(i,a,u){var d=i.tag;if(d===5||d===6)i=i.stateNode,a?u.insertBefore(i,a):u.appendChild(i);else if(d!==4&&(d===27&&Xs(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(ih(i,a,u),i=i.sibling;i!==null;)ih(i,a,u),i=i.sibling}function W1(i){var a=i.stateNode,u=i.memoizedProps;try{for(var d=i.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);wn(a,d,u),a[zt]=i,a[Dt]=u}catch(_){_t(i,i.return,_)}}var ds=!1,Bt=!1,Yg=!1,Q1=typeof WeakSet=="function"?WeakSet:Set,dn=null;function wI(i,a){if(i=i.containerInfo,v0=Eh,i=lw(i),Gp(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var g=d.anchorOffset,_=d.focusNode;d=d.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var P=0,q=-1,Z=-1,oe=0,me=0,ye=i,ue=null;t:for(;;){for(var ce;ye!==u||g!==0&&ye.nodeType!==3||(q=P+g),ye!==_||d!==0&&ye.nodeType!==3||(Z=P+d),ye.nodeType===3&&(P+=ye.nodeValue.length),(ce=ye.firstChild)!==null;)ue=ye,ye=ce;for(;;){if(ye===i)break t;if(ue===u&&++oe===g&&(q=P),ue===_&&++me===d&&(Z=P),(ce=ye.nextSibling)!==null)break;ye=ue,ue=ye.parentNode}ye=ce}u=q===-1||Z===-1?null:{start:q,end:Z}}else u=null}u=u||{start:0,end:0}}else u=null;for(_0={focusedElem:i,selectionRange:u},Eh=!1,dn=a;dn!==null;)if(a=dn,i=a.child,(a.subtreeFlags&1024)!==0&&i!==null)i.return=a,dn=i;else for(;dn!==null;){switch(a=dn,_=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,u=a,g=_.memoizedProps,_=_.memoizedState,d=u.stateNode;try{var Pe=lo(u.type,g,u.elementType===u.type);i=d.getSnapshotBeforeUpdate(Pe,_),d.__reactInternalSnapshotBeforeUpdate=i}catch(Ne){_t(u,u.return,Ne)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,u=i.nodeType,u===9)E0(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":E0(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,dn=i;break}dn=a.return}}function Z1(i,a,u){var d=u.flags;switch(u.tag){case 0:case 11:case 15:Hs(i,u),d&4&&gc(5,u);break;case 1:if(Hs(i,u),d&4)if(i=u.stateNode,a===null)try{i.componentDidMount()}catch(P){_t(u,u.return,P)}else{var g=lo(u.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(g,a,i.__reactInternalSnapshotBeforeUpdate)}catch(P){_t(u,u.return,P)}}d&64&&G1(u),d&512&&yc(u,u.return);break;case 3:if(Hs(i,u),d&64&&(i=u.updateQueue,i!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{Mw(i,a)}catch(P){_t(u,u.return,P)}}break;case 27:a===null&&d&4&&W1(u);case 26:case 5:Hs(i,u),a===null&&d&4&&Y1(u),d&512&&yc(u,u.return);break;case 12:Hs(i,u);break;case 13:Hs(i,u),d&4&&tE(i,u),d&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=NI.bind(null,u),YI(i,u))));break;case 22:if(d=u.memoizedState!==null||ds,!d){a=a!==null&&a.memoizedState!==null||Bt,g=ds;var _=Bt;ds=d,(Bt=a)&&!_?$s(i,u,(u.subtreeFlags&8772)!==0):Hs(i,u),ds=g,Bt=_}break;case 30:break;default:Hs(i,u)}}function J1(i){var a=i.alternate;a!==null&&(i.alternate=null,J1(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&hi(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var xt=null,Wn=!1;function fs(i,a,u){for(u=u.child;u!==null;)eE(i,a,u),u=u.sibling}function eE(i,a,u){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(ut,u)}catch{}switch(u.tag){case 26:Bt||Ai(u,a),fs(i,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Bt||Ai(u,a);var d=xt,g=Wn;Xs(u.type)&&(xt=u.stateNode,Wn=!1),fs(i,a,u),Ac(u.stateNode),xt=d,Wn=g;break;case 5:Bt||Ai(u,a);case 6:if(d=xt,g=Wn,xt=null,fs(i,a,u),xt=d,Wn=g,xt!==null)if(Wn)try{(xt.nodeType===9?xt.body:xt.nodeName==="HTML"?xt.ownerDocument.body:xt).removeChild(u.stateNode)}catch(_){_t(u,a,_)}else try{xt.removeChild(u.stateNode)}catch(_){_t(u,a,_)}break;case 18:xt!==null&&(Wn?(i=xt,HE(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),Pc(i)):HE(xt,u.stateNode));break;case 4:d=xt,g=Wn,xt=u.stateNode.containerInfo,Wn=!0,fs(i,a,u),xt=d,Wn=g;break;case 0:case 11:case 14:case 15:Bt||Bs(2,u,a),Bt||Bs(4,u,a),fs(i,a,u);break;case 1:Bt||(Ai(u,a),d=u.stateNode,typeof d.componentWillUnmount=="function"&&K1(u,a,d)),fs(i,a,u);break;case 21:fs(i,a,u);break;case 22:Bt=(d=Bt)||u.memoizedState!==null,fs(i,a,u),Bt=d;break;default:fs(i,a,u)}}function tE(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Pc(i)}catch(u){_t(a,a.return,u)}}function EI(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new Q1),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new Q1),a;default:throw Error(r(435,i.tag))}}function Xg(i,a){var u=EI(i);a.forEach(function(d){var g=II.bind(null,i,d);u.has(d)||(u.add(d),d.then(g,g))})}function dr(i,a){var u=a.deletions;if(u!==null)for(var d=0;d<u.length;d++){var g=u[d],_=i,P=a,q=P;e:for(;q!==null;){switch(q.tag){case 27:if(Xs(q.type)){xt=q.stateNode,Wn=!1;break e}break;case 5:xt=q.stateNode,Wn=!1;break e;case 3:case 4:xt=q.stateNode.containerInfo,Wn=!0;break e}q=q.return}if(xt===null)throw Error(r(160));eE(_,P,g),xt=null,Wn=!1,_=g.alternate,_!==null&&(_.return=null),g.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)nE(a,i),a=a.sibling}var Qr=null;function nE(i,a){var u=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:dr(a,i),fr(i),d&4&&(Bs(3,i,i.return),gc(3,i),Bs(5,i,i.return));break;case 1:dr(a,i),fr(i),d&512&&(Bt||u===null||Ai(u,u.return)),d&64&&ds&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?d:u.concat(d))));break;case 26:var g=Qr;if(dr(a,i),fr(i),d&512&&(Bt||u===null||Ai(u,u.return)),d&4){var _=u!==null?u.memoizedState:null;if(d=i.memoizedState,u===null)if(d===null)if(i.stateNode===null){e:{d=i.type,u=i.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":_=g.getElementsByTagName("title")[0],(!_||_[Ki]||_[zt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=g.createElement(d),g.head.insertBefore(_,g.querySelector("head > title"))),wn(_,d,u),_[zt]=i,At(_),d=_;break e;case"link":var P=WE("link","href",g).get(d+(u.href||""));if(P){for(var q=0;q<P.length;q++)if(_=P[q],_.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&_.getAttribute("rel")===(u.rel==null?null:u.rel)&&_.getAttribute("title")===(u.title==null?null:u.title)&&_.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){P.splice(q,1);break t}}_=g.createElement(d),wn(_,d,u),g.head.appendChild(_);break;case"meta":if(P=WE("meta","content",g).get(d+(u.content||""))){for(q=0;q<P.length;q++)if(_=P[q],_.getAttribute("content")===(u.content==null?null:""+u.content)&&_.getAttribute("name")===(u.name==null?null:u.name)&&_.getAttribute("property")===(u.property==null?null:u.property)&&_.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&_.getAttribute("charset")===(u.charSet==null?null:u.charSet)){P.splice(q,1);break t}}_=g.createElement(d),wn(_,d,u),g.head.appendChild(_);break;default:throw Error(r(468,d))}_[zt]=i,At(_),d=_}i.stateNode=d}else QE(g,i.type,i.stateNode);else i.stateNode=XE(g,d,i.memoizedProps);else _!==d?(_===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):_.count--,d===null?QE(g,i.type,i.stateNode):XE(g,d,i.memoizedProps)):d===null&&i.stateNode!==null&&qg(i,i.memoizedProps,u.memoizedProps)}break;case 27:dr(a,i),fr(i),d&512&&(Bt||u===null||Ai(u,u.return)),u!==null&&d&4&&qg(i,i.memoizedProps,u.memoizedProps);break;case 5:if(dr(a,i),fr(i),d&512&&(Bt||u===null||Ai(u,u.return)),i.flags&32){g=i.stateNode;try{Rr(g,"")}catch(ce){_t(i,i.return,ce)}}d&4&&i.stateNode!=null&&(g=i.memoizedProps,qg(i,g,u!==null?u.memoizedProps:g)),d&1024&&(Yg=!0);break;case 6:if(dr(a,i),fr(i),d&4){if(i.stateNode===null)throw Error(r(162));d=i.memoizedProps,u=i.stateNode;try{u.nodeValue=d}catch(ce){_t(i,i.return,ce)}}break;case 3:if(_h=null,g=Qr,Qr=yh(a.containerInfo),dr(a,i),Qr=g,fr(i),d&4&&u!==null&&u.memoizedState.isDehydrated)try{Pc(a.containerInfo)}catch(ce){_t(i,i.return,ce)}Yg&&(Yg=!1,rE(i));break;case 4:d=Qr,Qr=yh(i.stateNode.containerInfo),dr(a,i),fr(i),Qr=d;break;case 12:dr(a,i),fr(i);break;case 13:dr(a,i),fr(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(t0=Le()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Xg(i,d)));break;case 22:g=i.memoizedState!==null;var Z=u!==null&&u.memoizedState!==null,oe=ds,me=Bt;if(ds=oe||g,Bt=me||Z,dr(a,i),Bt=me,ds=oe,fr(i),d&8192)e:for(a=i.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(u===null||Z||ds||Bt||uo(i)),u=null,a=i;;){if(a.tag===5||a.tag===26){if(u===null){Z=u=a;try{if(_=Z.stateNode,g)P=_.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{q=Z.stateNode;var ye=Z.memoizedProps.style,ue=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;q.style.display=ue==null||typeof ue=="boolean"?"":(""+ue).trim()}}catch(ce){_t(Z,Z.return,ce)}}}else if(a.tag===6){if(u===null){Z=a;try{Z.stateNode.nodeValue=g?"":Z.memoizedProps}catch(ce){_t(Z,Z.return,ce)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=i.updateQueue,d!==null&&(u=d.retryQueue,u!==null&&(d.retryQueue=null,Xg(i,u))));break;case 19:dr(a,i),fr(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Xg(i,d)));break;case 30:break;case 21:break;default:dr(a,i),fr(i)}}function fr(i){var a=i.flags;if(a&2){try{for(var u,d=i.return;d!==null;){if(X1(d)){u=d;break}d=d.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var g=u.stateNode,_=Gg(i);ih(i,_,g);break;case 5:var P=u.stateNode;u.flags&32&&(Rr(P,""),u.flags&=-33);var q=Gg(i);ih(i,q,P);break;case 3:case 4:var Z=u.stateNode.containerInfo,oe=Gg(i);Kg(i,oe,Z);break;default:throw Error(r(161))}}catch(me){_t(i,i.return,me)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function rE(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;rE(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function Hs(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Z1(i,a.alternate,a),a=a.sibling}function uo(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Bs(4,a,a.return),uo(a);break;case 1:Ai(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&K1(a,a.return,u),uo(a);break;case 27:Ac(a.stateNode);case 26:case 5:Ai(a,a.return),uo(a);break;case 22:a.memoizedState===null&&uo(a);break;case 30:uo(a);break;default:uo(a)}i=i.sibling}}function $s(i,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,g=i,_=a,P=_.flags;switch(_.tag){case 0:case 11:case 15:$s(g,_,u),gc(4,_);break;case 1:if($s(g,_,u),d=_,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(oe){_t(d,d.return,oe)}if(d=_,g=d.updateQueue,g!==null){var q=d.stateNode;try{var Z=g.shared.hiddenCallbacks;if(Z!==null)for(g.shared.hiddenCallbacks=null,g=0;g<Z.length;g++)Dw(Z[g],q)}catch(oe){_t(d,d.return,oe)}}u&&P&64&&G1(_),yc(_,_.return);break;case 27:W1(_);case 26:case 5:$s(g,_,u),u&&d===null&&P&4&&Y1(_),yc(_,_.return);break;case 12:$s(g,_,u);break;case 13:$s(g,_,u),u&&P&4&&tE(g,_);break;case 22:_.memoizedState===null&&$s(g,_,u),yc(_,_.return);break;case 30:break;default:$s(g,_,u)}a=a.sibling}}function Wg(i,a){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&nc(u))}function Qg(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&nc(i))}function Ci(i,a,u,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)iE(i,a,u,d),a=a.sibling}function iE(i,a,u,d){var g=a.flags;switch(a.tag){case 0:case 11:case 15:Ci(i,a,u,d),g&2048&&gc(9,a);break;case 1:Ci(i,a,u,d);break;case 3:Ci(i,a,u,d),g&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&nc(i)));break;case 12:if(g&2048){Ci(i,a,u,d),i=a.stateNode;try{var _=a.memoizedProps,P=_.id,q=_.onPostCommit;typeof q=="function"&&q(P,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Z){_t(a,a.return,Z)}}else Ci(i,a,u,d);break;case 13:Ci(i,a,u,d);break;case 23:break;case 22:_=a.stateNode,P=a.alternate,a.memoizedState!==null?_._visibility&2?Ci(i,a,u,d):vc(i,a):_._visibility&2?Ci(i,a,u,d):(_._visibility|=2,Tl(i,a,u,d,(a.subtreeFlags&10256)!==0)),g&2048&&Wg(P,a);break;case 24:Ci(i,a,u,d),g&2048&&Qg(a.alternate,a);break;default:Ci(i,a,u,d)}}function Tl(i,a,u,d,g){for(g=g&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var _=i,P=a,q=u,Z=d,oe=P.flags;switch(P.tag){case 0:case 11:case 15:Tl(_,P,q,Z,g),gc(8,P);break;case 23:break;case 22:var me=P.stateNode;P.memoizedState!==null?me._visibility&2?Tl(_,P,q,Z,g):vc(_,P):(me._visibility|=2,Tl(_,P,q,Z,g)),g&&oe&2048&&Wg(P.alternate,P);break;case 24:Tl(_,P,q,Z,g),g&&oe&2048&&Qg(P.alternate,P);break;default:Tl(_,P,q,Z,g)}a=a.sibling}}function vc(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=i,d=a,g=d.flags;switch(d.tag){case 22:vc(u,d),g&2048&&Wg(d.alternate,d);break;case 24:vc(u,d),g&2048&&Qg(d.alternate,d);break;default:vc(u,d)}a=a.sibling}}var _c=8192;function Sl(i){if(i.subtreeFlags&_c)for(i=i.child;i!==null;)sE(i),i=i.sibling}function sE(i){switch(i.tag){case 26:Sl(i),i.flags&_c&&i.memoizedState!==null&&o4(Qr,i.memoizedState,i.memoizedProps);break;case 5:Sl(i);break;case 3:case 4:var a=Qr;Qr=yh(i.stateNode.containerInfo),Sl(i),Qr=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=_c,_c=16777216,Sl(i),_c=a):Sl(i));break;default:Sl(i)}}function aE(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function bc(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var d=a[u];dn=d,lE(d,i)}aE(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)oE(i),i=i.sibling}function oE(i){switch(i.tag){case 0:case 11:case 15:bc(i),i.flags&2048&&Bs(9,i,i.return);break;case 3:bc(i);break;case 12:bc(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,sh(i)):bc(i);break;default:bc(i)}}function sh(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var d=a[u];dn=d,lE(d,i)}aE(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Bs(8,a,a.return),sh(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,sh(a));break;default:sh(a)}i=i.sibling}}function lE(i,a){for(;dn!==null;){var u=dn;switch(u.tag){case 0:case 11:case 15:Bs(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var d=u.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:nc(u.memoizedState.cache)}if(d=u.child,d!==null)d.return=u,dn=d;else e:for(u=i;dn!==null;){d=dn;var g=d.sibling,_=d.return;if(J1(d),d===u){dn=null;break e}if(g!==null){g.return=_,dn=g;break e}dn=_}}}var xI={getCacheForType:function(i){var a=Cn(nn),u=a.data.get(i);return u===void 0&&(u=i(),a.data.set(i,u)),u}},TI=typeof WeakMap=="function"?WeakMap:Map,ht=0,wt=null,Qe=null,rt=0,mt=0,hr=null,Fs=!1,Al=!1,Zg=!1,hs=0,Pt=0,qs=0,co=0,Jg=0,jr=0,Cl=0,wc=null,Qn=null,e0=!1,t0=0,ah=1/0,oh=null,Gs=null,bn=0,Ks=null,kl=null,Rl=0,n0=0,r0=null,uE=null,Ec=0,i0=null;function mr(){if((ht&2)!==0&&rt!==0)return rt&-rt;if(k.T!==null){var i=gl;return i!==0?i:d0()}return di()}function cE(){jr===0&&(jr=(rt&536870912)===0||lt?Gi():536870912);var i=Lr.current;return i!==null&&(i.flags|=32),jr}function pr(i,a,u){(i===wt&&(mt===2||mt===9)||i.cancelPendingCommit!==null)&&(Nl(i,0),Ys(i,rt,jr,!1)),xr(i,u),((ht&2)===0||i!==wt)&&(i===wt&&((ht&2)===0&&(co|=u),Pt===4&&Ys(i,rt,jr,!1)),ki(i))}function dE(i,a,u){if((ht&6)!==0)throw Error(r(327));var d=!u&&(a&124)===0&&(a&i.expiredLanes)===0||zn(i,a),g=d?CI(i,a):o0(i,a,!0),_=d;do{if(g===0){Al&&!d&&Ys(i,a,0,!1);break}else{if(u=i.current.alternate,_&&!SI(u)){g=o0(i,a,!1),_=!1;continue}if(g===2){if(_=a,i.errorRecoveryDisabledLanes&_)var P=0;else P=i.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){a=P;e:{var q=i;g=wc;var Z=q.current.memoizedState.isDehydrated;if(Z&&(Nl(q,P).flags|=256),P=o0(q,P,!1),P!==2){if(Zg&&!Z){q.errorRecoveryDisabledLanes|=_,co|=_,g=4;break e}_=Qn,Qn=g,_!==null&&(Qn===null?Qn=_:Qn.push.apply(Qn,_))}g=P}if(_=!1,g!==2)continue}}if(g===1){Nl(i,0),Ys(i,a,0,!0);break}e:{switch(d=i,_=g,_){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Ys(d,a,jr,!Fs);break e;case 2:Qn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(g=t0+300-Le(),10<g)){if(Ys(d,a,jr,!Fs),gn(d,0,!0)!==0)break e;d.timeoutHandle=UE(fE.bind(null,d,u,Qn,oh,e0,a,jr,co,Cl,Fs,_,2,-0,0),g);break e}fE(d,u,Qn,oh,e0,a,jr,co,Cl,Fs,_,0,-0,0)}}break}while(!0);ki(i)}function fE(i,a,u,d,g,_,P,q,Z,oe,me,ye,ue,ce){if(i.timeoutHandle=-1,ye=a.subtreeFlags,(ye&8192||(ye&16785408)===16785408)&&(Rc={stylesheets:null,count:0,unsuspend:a4},sE(a),ye=l4(),ye!==null)){i.cancelPendingCommit=ye(_E.bind(null,i,a,_,u,d,g,P,q,Z,me,1,ue,ce)),Ys(i,_,P,!oe);return}_E(i,a,_,u,d,g,P,q,Z)}function SI(i){for(var a=i;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var d=0;d<u.length;d++){var g=u[d],_=g.getSnapshot;g=g.value;try{if(!ur(_(),g))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ys(i,a,u,d){a&=~Jg,a&=~co,i.suspendedLanes|=a,i.pingedLanes&=~a,d&&(i.warmLanes|=a),d=i.expirationTimes;for(var g=a;0<g;){var _=31-St(g),P=1<<_;d[_]=-1,g&=~P}u!==0&&Tr(i,u,a)}function lh(){return(ht&6)===0?(xc(0),!1):!0}function s0(){if(Qe!==null){if(mt===0)var i=Qe.return;else i=Qe,ss=io=null,Eg(i),El=null,hc=0,i=Qe;for(;i!==null;)q1(i.alternate,i),i=i.return;Qe=null}}function Nl(i,a){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,$I(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),s0(),wt=i,Qe=u=ns(i.current,null),rt=a,mt=0,hr=null,Fs=!1,Al=zn(i,a),Zg=!1,Cl=jr=Jg=co=qs=Pt=0,Qn=wc=null,e0=!1,(a&8)!==0&&(a|=a&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=a;0<d;){var g=31-St(d),_=1<<g;a|=i[g],d&=~_}return hs=a,Nf(),u}function hE(i,a){Fe=null,k.H=Xf,a===ic||a===zf?(a=Nw(),mt=3):a===Cw?(a=Nw(),mt=4):mt=a===I1?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,hr=a,Qe===null&&(Pt=1,eh(i,Mr(a,i.current)))}function mE(){var i=k.H;return k.H=Xf,i===null?Xf:i}function pE(){var i=k.A;return k.A=xI,i}function a0(){Pt=4,Fs||(rt&4194048)!==rt&&Lr.current!==null||(Al=!0),(qs&134217727)===0&&(co&134217727)===0||wt===null||Ys(wt,rt,jr,!1)}function o0(i,a,u){var d=ht;ht|=2;var g=mE(),_=pE();(wt!==i||rt!==a)&&(oh=null,Nl(i,a)),a=!1;var P=Pt;e:do try{if(mt!==0&&Qe!==null){var q=Qe,Z=hr;switch(mt){case 8:s0(),P=6;break e;case 3:case 2:case 9:case 6:Lr.current===null&&(a=!0);var oe=mt;if(mt=0,hr=null,Il(i,q,Z,oe),u&&Al){P=0;break e}break;default:oe=mt,mt=0,hr=null,Il(i,q,Z,oe)}}AI(),P=Pt;break}catch(me){hE(i,me)}while(!0);return a&&i.shellSuspendCounter++,ss=io=null,ht=d,k.H=g,k.A=_,Qe===null&&(wt=null,rt=0,Nf()),P}function AI(){for(;Qe!==null;)gE(Qe)}function CI(i,a){var u=ht;ht|=2;var d=mE(),g=pE();wt!==i||rt!==a?(oh=null,ah=Le()+500,Nl(i,a)):Al=zn(i,a);e:do try{if(mt!==0&&Qe!==null){a=Qe;var _=hr;t:switch(mt){case 1:mt=0,hr=null,Il(i,a,_,1);break;case 2:case 9:if(kw(_)){mt=0,hr=null,yE(a);break}a=function(){mt!==2&&mt!==9||wt!==i||(mt=7),ki(i)},_.then(a,a);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:kw(_)?(mt=0,hr=null,yE(a)):(mt=0,hr=null,Il(i,a,_,7));break;case 5:var P=null;switch(Qe.tag){case 26:P=Qe.memoizedState;case 5:case 27:var q=Qe;if(!P||ZE(P)){mt=0,hr=null;var Z=q.sibling;if(Z!==null)Qe=Z;else{var oe=q.return;oe!==null?(Qe=oe,uh(oe)):Qe=null}break t}}mt=0,hr=null,Il(i,a,_,5);break;case 6:mt=0,hr=null,Il(i,a,_,6);break;case 8:s0(),Pt=6;break e;default:throw Error(r(462))}}kI();break}catch(me){hE(i,me)}while(!0);return ss=io=null,k.H=d,k.A=g,ht=u,Qe!==null?0:(wt=null,rt=0,Nf(),Pt)}function kI(){for(;Qe!==null&&!at();)gE(Qe)}function gE(i){var a=$1(i.alternate,i,hs);i.memoizedProps=i.pendingProps,a===null?uh(i):Qe=a}function yE(i){var a=i,u=a.alternate;switch(a.tag){case 15:case 0:a=L1(u,a,a.pendingProps,a.type,void 0,rt);break;case 11:a=L1(u,a,a.pendingProps,a.type.render,a.ref,rt);break;case 5:Eg(a);default:q1(u,a),a=Qe=vw(a,hs),a=$1(u,a,hs)}i.memoizedProps=i.pendingProps,a===null?uh(i):Qe=a}function Il(i,a,u,d){ss=io=null,Eg(a),El=null,hc=0;var g=a.return;try{if(yI(i,g,a,u,rt)){Pt=1,eh(i,Mr(u,i.current)),Qe=null;return}}catch(_){if(g!==null)throw Qe=g,_;Pt=1,eh(i,Mr(u,i.current)),Qe=null;return}a.flags&32768?(lt||d===1?i=!0:Al||(rt&536870912)!==0?i=!1:(Fs=i=!0,(d===2||d===9||d===3||d===6)&&(d=Lr.current,d!==null&&d.tag===13&&(d.flags|=16384))),vE(a,i)):uh(a)}function uh(i){var a=i;do{if((a.flags&32768)!==0){vE(a,Fs);return}i=a.return;var u=_I(a.alternate,a,hs);if(u!==null){Qe=u;return}if(a=a.sibling,a!==null){Qe=a;return}Qe=a=i}while(a!==null);Pt===0&&(Pt=5)}function vE(i,a){do{var u=bI(i.alternate,i);if(u!==null){u.flags&=32767,Qe=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(i=i.sibling,i!==null)){Qe=i;return}Qe=i=u}while(i!==null);Pt=6,Qe=null}function _E(i,a,u,d,g,_,P,q,Z){i.cancelPendingCommit=null;do ch();while(bn!==0);if((ht&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(_=a.lanes|a.childLanes,_|=Qp,ar(i,u,_,P,q,Z),i===wt&&(Qe=wt=null,rt=0),kl=a,Ks=i,Rl=u,n0=_,r0=g,uE=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,DI(Zt,function(){return TE(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=k.T,k.T=null,g=F.p,F.p=2,P=ht,ht|=4;try{wI(i,a,u)}finally{ht=P,F.p=g,k.T=d}}bn=1,bE(),wE(),EE()}}function bE(){if(bn===1){bn=0;var i=Ks,a=kl,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=k.T,k.T=null;var d=F.p;F.p=2;var g=ht;ht|=4;try{nE(a,i);var _=_0,P=lw(i.containerInfo),q=_.focusedElem,Z=_.selectionRange;if(P!==q&&q&&q.ownerDocument&&ow(q.ownerDocument.documentElement,q)){if(Z!==null&&Gp(q)){var oe=Z.start,me=Z.end;if(me===void 0&&(me=oe),"selectionStart"in q)q.selectionStart=oe,q.selectionEnd=Math.min(me,q.value.length);else{var ye=q.ownerDocument||document,ue=ye&&ye.defaultView||window;if(ue.getSelection){var ce=ue.getSelection(),Pe=q.textContent.length,Ne=Math.min(Z.start,Pe),vt=Z.end===void 0?Ne:Math.min(Z.end,Pe);!ce.extend&&Ne>vt&&(P=vt,vt=Ne,Ne=P);var re=aw(q,Ne),te=aw(q,vt);if(re&&te&&(ce.rangeCount!==1||ce.anchorNode!==re.node||ce.anchorOffset!==re.offset||ce.focusNode!==te.node||ce.focusOffset!==te.offset)){var se=ye.createRange();se.setStart(re.node,re.offset),ce.removeAllRanges(),Ne>vt?(ce.addRange(se),ce.extend(te.node,te.offset)):(se.setEnd(te.node,te.offset),ce.addRange(se))}}}}for(ye=[],ce=q;ce=ce.parentNode;)ce.nodeType===1&&ye.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<ye.length;q++){var ge=ye[q];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}Eh=!!v0,_0=v0=null}finally{ht=g,F.p=d,k.T=u}}i.current=a,bn=2}}function wE(){if(bn===2){bn=0;var i=Ks,a=kl,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=k.T,k.T=null;var d=F.p;F.p=2;var g=ht;ht|=4;try{Z1(i,a.alternate,a)}finally{ht=g,F.p=d,k.T=u}}bn=3}}function EE(){if(bn===4||bn===3){bn=0,jt();var i=Ks,a=kl,u=Rl,d=uE;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?bn=5:(bn=0,kl=Ks=null,xE(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Gs=null),Rs(u),a=a.stateNode,We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(ut,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=k.T,g=F.p,F.p=2,k.T=null;try{for(var _=i.onRecoverableError,P=0;P<d.length;P++){var q=d[P];_(q.value,{componentStack:q.stack})}}finally{k.T=a,F.p=g}}(Rl&3)!==0&&ch(),ki(i),g=i.pendingLanes,(u&4194090)!==0&&(g&42)!==0?i===i0?Ec++:(Ec=0,i0=i):Ec=0,xc(0)}}function xE(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,nc(a)))}function ch(i){return bE(),wE(),EE(),TE()}function TE(){if(bn!==5)return!1;var i=Ks,a=n0;n0=0;var u=Rs(Rl),d=k.T,g=F.p;try{F.p=32>u?32:u,k.T=null,u=r0,r0=null;var _=Ks,P=Rl;if(bn=0,kl=Ks=null,Rl=0,(ht&6)!==0)throw Error(r(331));var q=ht;if(ht|=4,oE(_.current),iE(_,_.current,P,u),ht=q,xc(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(ut,_)}catch{}return!0}finally{F.p=g,k.T=d,xE(i,a)}}function SE(i,a,u){a=Mr(u,a),a=Vg(i.stateNode,a,2),i=Ls(i,a,2),i!==null&&(xr(i,2),ki(i))}function _t(i,a,u){if(i.tag===3)SE(i,i,u);else for(;a!==null;){if(a.tag===3){SE(a,i,u);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Gs===null||!Gs.has(d))){i=Mr(u,i),u=R1(2),d=Ls(a,u,2),d!==null&&(N1(u,d,a,i),xr(d,2),ki(d));break}}a=a.return}}function l0(i,a,u){var d=i.pingCache;if(d===null){d=i.pingCache=new TI;var g=new Set;d.set(a,g)}else g=d.get(a),g===void 0&&(g=new Set,d.set(a,g));g.has(u)||(Zg=!0,g.add(u),i=RI.bind(null,i,a,u),a.then(i,i))}function RI(i,a,u){var d=i.pingCache;d!==null&&d.delete(a),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,wt===i&&(rt&u)===u&&(Pt===4||Pt===3&&(rt&62914560)===rt&&300>Le()-t0?(ht&2)===0&&Nl(i,0):Jg|=u,Cl===rt&&(Cl=0)),ki(i)}function AE(i,a){a===0&&(a=Gr()),i=fl(i,a),i!==null&&(xr(i,a),ki(i))}function NI(i){var a=i.memoizedState,u=0;a!==null&&(u=a.retryLane),AE(i,u)}function II(i,a){var u=0;switch(i.tag){case 13:var d=i.stateNode,g=i.memoizedState;g!==null&&(u=g.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(a),AE(i,u)}function DI(i,a){return Ve(i,a)}var dh=null,Dl=null,u0=!1,fh=!1,c0=!1,fo=0;function ki(i){i!==Dl&&i.next===null&&(Dl===null?dh=Dl=i:Dl=Dl.next=i),fh=!0,u0||(u0=!0,PI())}function xc(i,a){if(!c0&&fh){c0=!0;do for(var u=!1,d=dh;d!==null;){if(i!==0){var g=d.pendingLanes;if(g===0)var _=0;else{var P=d.suspendedLanes,q=d.pingedLanes;_=(1<<31-St(42|i)+1)-1,_&=g&~(P&~q),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(u=!0,NE(d,_))}else _=rt,_=gn(d,d===wt?_:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(_&3)===0||zn(d,_)||(u=!0,NE(d,_));d=d.next}while(u);c0=!1}}function MI(){CE()}function CE(){fh=u0=!1;var i=0;fo!==0&&(HI()&&(i=fo),fo=0);for(var a=Le(),u=null,d=dh;d!==null;){var g=d.next,_=kE(d,a);_===0?(d.next=null,u===null?dh=g:u.next=g,g===null&&(Dl=u)):(u=d,(i!==0||(_&3)!==0)&&(fh=!0)),d=g}xc(i)}function kE(i,a){for(var u=i.suspendedLanes,d=i.pingedLanes,g=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var P=31-St(_),q=1<<P,Z=g[P];Z===-1?((q&u)===0||(q&d)!==0)&&(g[P]=qi(q,a)):Z<=a&&(i.expiredLanes|=q),_&=~q}if(a=wt,u=rt,u=gn(i,i===a?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,u===0||i===a&&(mt===2||mt===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&st(d),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||zn(i,u)){if(a=u&-u,a===i.callbackPriority)return a;switch(d!==null&&st(d),Rs(u)){case 2:case 8:u=An;break;case 32:u=Zt;break;case 268435456:u=On;break;default:u=Zt}return d=RE.bind(null,i),u=Ve(u,d),i.callbackPriority=a,i.callbackNode=u,a}return d!==null&&d!==null&&st(d),i.callbackPriority=2,i.callbackNode=null,2}function RE(i,a){if(bn!==0&&bn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(ch()&&i.callbackNode!==u)return null;var d=rt;return d=gn(i,i===wt?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(dE(i,d,a),kE(i,Le()),i.callbackNode!=null&&i.callbackNode===u?RE.bind(null,i):null)}function NE(i,a){if(ch())return null;dE(i,a,!0)}function PI(){FI(function(){(ht&6)!==0?Ve(Xe,MI):CE()})}function d0(){return fo===0&&(fo=Gi()),fo}function IE(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:el(""+i)}function DE(i,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,i.id&&u.setAttribute("form",i.id),a.parentNode.insertBefore(u,a),i=new FormData(i),u.parentNode.removeChild(u),i}function OI(i,a,u,d,g){if(a==="submit"&&u&&u.stateNode===g){var _=IE((g[Dt]||null).action),P=d.submitter;P&&(a=(a=P[Dt]||null)?IE(a.formAction):P.getAttribute("formAction"),a!==null&&(_=a,P=null));var q=new tl("action","action",null,d,g);i.push({event:q,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(fo!==0){var Z=P?DE(g,P):new FormData(g);Ig(u,{pending:!0,data:Z,method:g.method,action:_},null,Z)}}else typeof _=="function"&&(q.preventDefault(),Z=P?DE(g,P):new FormData(g),Ig(u,{pending:!0,data:Z,method:g.method,action:_},_,Z))},currentTarget:g}]})}}for(var f0=0;f0<Wp.length;f0++){var h0=Wp[f0],VI=h0.toLowerCase(),LI=h0[0].toUpperCase()+h0.slice(1);Wr(VI,"on"+LI)}Wr(dw,"onAnimationEnd"),Wr(fw,"onAnimationIteration"),Wr(hw,"onAnimationStart"),Wr("dblclick","onDoubleClick"),Wr("focusin","onFocus"),Wr("focusout","onBlur"),Wr(eI,"onTransitionRun"),Wr(tI,"onTransitionStart"),Wr(nI,"onTransitionCancel"),Wr(mw,"onTransitionEnd"),Kr("onMouseEnter",["mouseout","mouseover"]),Kr("onMouseLeave",["mouseout","mouseover"]),Kr("onPointerEnter",["pointerout","pointerover"]),Kr("onPointerLeave",["pointerout","pointerover"]),or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),or("onBeforeInput",["compositionend","keypress","textInput","paste"]),or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tc));function ME(i,a){a=(a&4)!==0;for(var u=0;u<i.length;u++){var d=i[u],g=d.event;d=d.listeners;e:{var _=void 0;if(a)for(var P=d.length-1;0<=P;P--){var q=d[P],Z=q.instance,oe=q.currentTarget;if(q=q.listener,Z!==_&&g.isPropagationStopped())break e;_=q,g.currentTarget=oe;try{_(g)}catch(me){Jf(me)}g.currentTarget=null,_=Z}else for(P=0;P<d.length;P++){if(q=d[P],Z=q.instance,oe=q.currentTarget,q=q.listener,Z!==_&&g.isPropagationStopped())break e;_=q,g.currentTarget=oe;try{_(g)}catch(me){Jf(me)}g.currentTarget=null,_=Z}}}}function Ze(i,a){var u=a[La];u===void 0&&(u=a[La]=new Set);var d=i+"__bubble";u.has(d)||(PE(a,i,2,!1),u.add(d))}function m0(i,a,u){var d=0;a&&(d|=4),PE(u,i,d,a)}var hh="_reactListening"+Math.random().toString(36).slice(2);function p0(i){if(!i[hh]){i[hh]=!0,ja.forEach(function(u){u!=="selectionchange"&&(jI.has(u)||m0(u,!1,i),m0(u,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[hh]||(a[hh]=!0,m0("selectionchange",!1,a))}}function PE(i,a,u,d){switch(ix(a)){case 2:var g=d4;break;case 8:g=f4;break;default:g=R0}u=g.bind(null,a,u,i),g=void 0,!Ir||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),d?g!==void 0?i.addEventListener(a,u,{capture:!0,passive:g}):i.addEventListener(a,u,!0):g!==void 0?i.addEventListener(a,u,{passive:g}):i.addEventListener(a,u,!1)}function g0(i,a,u,d,g){var _=d;if((a&1)===0&&(a&2)===0&&d!==null)e:for(;;){if(d===null)return;var P=d.tag;if(P===3||P===4){var q=d.stateNode.containerInfo;if(q===g)break;if(P===4)for(P=d.return;P!==null;){var Z=P.tag;if((Z===3||Z===4)&&P.stateNode.containerInfo===g)return;P=P.return}for(;q!==null;){if(P=Sr(q),P===null)return;if(Z=P.tag,Z===5||Z===6||Z===26||Z===27){d=_=P;continue e}q=q.parentNode}}d=d.return}pf(function(){var oe=_,me=Nr(u),ye=[];e:{var ue=pw.get(i);if(ue!==void 0){var ce=tl,Pe=i;switch(i){case"keypress":if(_i(u)===0)break e;case"keydown":case"keyup":ce=ol;break;case"focusin":Pe="focus",ce=il;break;case"focusout":Pe="blur",ce=il;break;case"beforeblur":case"afterblur":ce=il;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Dr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=Hp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=xf;break;case dw:case fw:case hw:ce=sl;break;case mw:ce=Sf;break;case"scroll":case"scrollend":ce=gf;break;case"wheel":ce=ll;break;case"copy":case"cut":case"paste":ce=al;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=Yu;break;case"toggle":case"beforetoggle":ce=Cf}var Ne=(a&4)!==0,vt=!Ne&&(i==="scroll"||i==="scrollend"),re=Ne?ue!==null?ue+"Capture":null:ue;Ne=[];for(var te=oe,se;te!==null;){var ge=te;if(se=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||se===null||re===null||(ge=Fa(te,re),ge!=null&&Ne.push(Sc(te,ge,se))),vt)break;te=te.return}0<Ne.length&&(ue=new ce(ue,Pe,null,u,me),ye.push({event:ue,listeners:Ne}))}}if((a&7)===0){e:{if(ue=i==="mouseover"||i==="pointerover",ce=i==="mouseout"||i==="pointerout",ue&&u!==Wi&&(Pe=u.relatedTarget||u.fromElement)&&(Sr(Pe)||Pe[Yn]))break e;if((ce||ue)&&(ue=me.window===me?me:(ue=me.ownerDocument)?ue.defaultView||ue.parentWindow:window,ce?(Pe=u.relatedTarget||u.toElement,ce=oe,Pe=Pe?Sr(Pe):null,Pe!==null&&(vt=o(Pe),Ne=Pe.tag,Pe!==vt||Ne!==5&&Ne!==27&&Ne!==6)&&(Pe=null)):(ce=null,Pe=oe),ce!==Pe)){if(Ne=Dr,ge="onMouseLeave",re="onMouseEnter",te="mouse",(i==="pointerout"||i==="pointerover")&&(Ne=Yu,ge="onPointerLeave",re="onPointerEnter",te="pointer"),vt=ce==null?ue:Cr(ce),se=Pe==null?ue:Cr(Pe),ue=new Ne(ge,te+"leave",ce,u,me),ue.target=vt,ue.relatedTarget=se,ge=null,Sr(me)===oe&&(Ne=new Ne(re,te+"enter",Pe,u,me),Ne.target=se,Ne.relatedTarget=vt,ge=Ne),vt=ge,ce&&Pe)t:{for(Ne=ce,re=Pe,te=0,se=Ne;se;se=Ml(se))te++;for(se=0,ge=re;ge;ge=Ml(ge))se++;for(;0<te-se;)Ne=Ml(Ne),te--;for(;0<se-te;)re=Ml(re),se--;for(;te--;){if(Ne===re||re!==null&&Ne===re.alternate)break t;Ne=Ml(Ne),re=Ml(re)}Ne=null}else Ne=null;ce!==null&&OE(ye,ue,ce,Ne,!1),Pe!==null&&vt!==null&&OE(ye,vt,Pe,Ne,!0)}}e:{if(ue=oe?Cr(oe):window,ce=ue.nodeName&&ue.nodeName.toLowerCase(),ce==="select"||ce==="input"&&ue.type==="file")var Ce=ew;else if(tn(ue))if(tw)Ce=Q8;else{Ce=X8;var Ge=Y8}else ce=ue.nodeName,!ce||ce.toLowerCase()!=="input"||ue.type!=="checkbox"&&ue.type!=="radio"?oe&&Bu(oe.elementType)&&(Ce=ew):Ce=W8;if(Ce&&(Ce=Ce(i,oe))){ts(ye,Ce,u,me);break e}Ge&&Ge(i,ue,oe),i==="focusout"&&oe&&ue.type==="number"&&oe.memoizedProps.value!=null&&Ds(ue,"number",ue.value)}switch(Ge=oe?Cr(oe):window,i){case"focusin":(tn(Ge)||Ge.contentEditable==="true")&&(ul=Ge,Kp=oe,Qu=null);break;case"focusout":Qu=Kp=ul=null;break;case"mousedown":Yp=!0;break;case"contextmenu":case"mouseup":case"dragend":Yp=!1,uw(ye,u,me);break;case"selectionchange":if(J8)break;case"keydown":case"keyup":uw(ye,u,me)}var ke;if(Ei)e:{switch(i){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else tt?de(i,u)&&(Ie="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Ie="onCompositionStart");Ie&&(I&&u.locale!=="ko"&&(tt||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&tt&&(ke=$u()):(vi=me,Ms="value"in vi?vi.value:vi.textContent,tt=!0)),Ge=mh(oe,Ie),0<Ge.length&&(Ie=new Gu(Ie,i,null,u,me),ye.push({event:Ie,listeners:Ge}),ke?Ie.data=ke:(ke=be(u),ke!==null&&(Ie.data=ke)))),(ke=T?en(i,u):nt(i,u))&&(Ie=mh(oe,"onBeforeInput"),0<Ie.length&&(Ge=new Gu("onBeforeInput","beforeinput",null,u,me),ye.push({event:Ge,listeners:Ie}),Ge.data=ke)),OI(ye,i,oe,u,me)}ME(ye,a)})}function Sc(i,a,u){return{instance:i,listener:a,currentTarget:u}}function mh(i,a){for(var u=a+"Capture",d=[];i!==null;){var g=i,_=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||_===null||(g=Fa(i,u),g!=null&&d.unshift(Sc(i,g,_)),g=Fa(i,a),g!=null&&d.push(Sc(i,g,_))),i.tag===3)return d;i=i.return}return[]}function Ml(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function OE(i,a,u,d,g){for(var _=a._reactName,P=[];u!==null&&u!==d;){var q=u,Z=q.alternate,oe=q.stateNode;if(q=q.tag,Z!==null&&Z===d)break;q!==5&&q!==26&&q!==27||oe===null||(Z=oe,g?(oe=Fa(u,_),oe!=null&&P.unshift(Sc(u,oe,Z))):g||(oe=Fa(u,_),oe!=null&&P.push(Sc(u,oe,Z)))),u=u.return}P.length!==0&&i.push({event:a,listeners:P})}var zI=/\r\n?/g,UI=/\u0000|\uFFFD/g;function VE(i){return(typeof i=="string"?i:""+i).replace(zI,`
`).replace(UI,"")}function LE(i,a){return a=VE(a),VE(i)===a}function ph(){}function yt(i,a,u,d,g,_){switch(u){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||Rr(i,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&Rr(i,""+d);break;case"className":kr(i,"class",d);break;case"tabIndex":kr(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":kr(i,u,d);break;case"style":Uu(i,d,_);break;case"data":if(a!=="object"){kr(i,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||u!=="href")){i.removeAttribute(u);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(u);break}d=el(""+d),i.setAttribute(u,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(u==="formAction"?(a!=="input"&&yt(i,a,"name",g.name,g,null),yt(i,a,"formEncType",g.formEncType,g,null),yt(i,a,"formMethod",g.formMethod,g,null),yt(i,a,"formTarget",g.formTarget,g,null)):(yt(i,a,"encType",g.encType,g,null),yt(i,a,"method",g.method,g,null),yt(i,a,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(u);break}d=el(""+d),i.setAttribute(u,d);break;case"onClick":d!=null&&(i.onclick=ph);break;case"onScroll":d!=null&&Ze("scroll",i);break;case"onScrollEnd":d!=null&&Ze("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(u=d.__html,u!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}u=el(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(u,""+d):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":d===!0?i.setAttribute(u,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(u,d):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(u,d):i.removeAttribute(u);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(u):i.setAttribute(u,d);break;case"popover":Ze("beforetoggle",i),Ze("toggle",i),mi(i,"popover",d);break;case"xlinkActuate":Jt(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Jt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Jt(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Jt(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Jt(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Jt(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Jt(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Jt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Jt(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":mi(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Up.get(u)||u,mi(i,u,d))}}function y0(i,a,u,d,g,_){switch(u){case"style":Uu(i,d,_);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(u=d.__html,u!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"children":typeof d=="string"?Rr(i,d):(typeof d=="number"||typeof d=="bigint")&&Rr(i,""+d);break;case"onScroll":d!=null&&Ze("scroll",i);break;case"onScrollEnd":d!=null&&Ze("scrollend",i);break;case"onClick":d!=null&&(i.onclick=ph);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ns.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(g=u.endsWith("Capture"),a=u.slice(2,g?u.length-7:void 0),_=i[Dt]||null,_=_!=null?_[u]:null,typeof _=="function"&&i.removeEventListener(a,_,g),typeof d=="function")){typeof _!="function"&&_!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(a,d,g);break e}u in i?i[u]=d:d===!0?i.setAttribute(u,""):mi(i,u,d)}}}function wn(i,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ze("error",i),Ze("load",i);var d=!1,g=!1,_;for(_ in u)if(u.hasOwnProperty(_)){var P=u[_];if(P!=null)switch(_){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:yt(i,a,_,P,u,null)}}g&&yt(i,a,"srcSet",u.srcSet,u,null),d&&yt(i,a,"src",u.src,u,null);return;case"input":Ze("invalid",i);var q=_=P=g=null,Z=null,oe=null;for(d in u)if(u.hasOwnProperty(d)){var me=u[d];if(me!=null)switch(d){case"name":g=me;break;case"type":P=me;break;case"checked":Z=me;break;case"defaultChecked":oe=me;break;case"value":_=me;break;case"defaultValue":q=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(r(137,a));break;default:yt(i,a,d,me,u,null)}}Ba(i,_,q,Z,oe,P,g,!1),Jo(i);return;case"select":Ze("invalid",i),d=P=_=null;for(g in u)if(u.hasOwnProperty(g)&&(q=u[g],q!=null))switch(g){case"value":_=q;break;case"defaultValue":P=q;break;case"multiple":d=q;default:yt(i,a,g,q,u,null)}a=_,u=P,i.multiple=!!d,a!=null?Xi(i,!!d,a,!1):u!=null&&Xi(i,!!d,u,!0);return;case"textarea":Ze("invalid",i),_=g=d=null;for(P in u)if(u.hasOwnProperty(P)&&(q=u[P],q!=null))switch(P){case"value":d=q;break;case"defaultValue":g=q;break;case"children":_=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(91));break;default:yt(i,a,P,q,u,null)}Ha(i,d,g,_),Jo(i);return;case"option":for(Z in u)if(u.hasOwnProperty(Z)&&(d=u[Z],d!=null))switch(Z){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:yt(i,a,Z,d,u,null)}return;case"dialog":Ze("beforetoggle",i),Ze("toggle",i),Ze("cancel",i),Ze("close",i);break;case"iframe":case"object":Ze("load",i);break;case"video":case"audio":for(d=0;d<Tc.length;d++)Ze(Tc[d],i);break;case"image":Ze("error",i),Ze("load",i);break;case"details":Ze("toggle",i);break;case"embed":case"source":case"link":Ze("error",i),Ze("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in u)if(u.hasOwnProperty(oe)&&(d=u[oe],d!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:yt(i,a,oe,d,u,null)}return;default:if(Bu(a)){for(me in u)u.hasOwnProperty(me)&&(d=u[me],d!==void 0&&y0(i,a,me,d,u,void 0));return}}for(q in u)u.hasOwnProperty(q)&&(d=u[q],d!=null&&yt(i,a,q,d,u,null))}function BI(i,a,u,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,_=null,P=null,q=null,Z=null,oe=null,me=null;for(ce in u){var ye=u[ce];if(u.hasOwnProperty(ce)&&ye!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":Z=ye;default:d.hasOwnProperty(ce)||yt(i,a,ce,null,d,ye)}}for(var ue in d){var ce=d[ue];if(ye=u[ue],d.hasOwnProperty(ue)&&(ce!=null||ye!=null))switch(ue){case"type":_=ce;break;case"name":g=ce;break;case"checked":oe=ce;break;case"defaultChecked":me=ce;break;case"value":P=ce;break;case"defaultValue":q=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,a));break;default:ce!==ye&&yt(i,a,ue,ce,d,ye)}}lr(i,P,q,Z,oe,me,_,g);return;case"select":ce=P=q=ue=null;for(_ in u)if(Z=u[_],u.hasOwnProperty(_)&&Z!=null)switch(_){case"value":break;case"multiple":ce=Z;default:d.hasOwnProperty(_)||yt(i,a,_,null,d,Z)}for(g in d)if(_=d[g],Z=u[g],d.hasOwnProperty(g)&&(_!=null||Z!=null))switch(g){case"value":ue=_;break;case"defaultValue":q=_;break;case"multiple":P=_;default:_!==Z&&yt(i,a,g,_,d,Z)}a=q,u=P,d=ce,ue!=null?Xi(i,!!u,ue,!1):!!d!=!!u&&(a!=null?Xi(i,!!u,a,!0):Xi(i,!!u,u?[]:"",!1));return;case"textarea":ce=ue=null;for(q in u)if(g=u[q],u.hasOwnProperty(q)&&g!=null&&!d.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:yt(i,a,q,null,d,g)}for(P in d)if(g=d[P],_=u[P],d.hasOwnProperty(P)&&(g!=null||_!=null))switch(P){case"value":ue=g;break;case"defaultValue":ce=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==_&&yt(i,a,P,g,d,_)}pt(i,ue,ce);return;case"option":for(var Pe in u)if(ue=u[Pe],u.hasOwnProperty(Pe)&&ue!=null&&!d.hasOwnProperty(Pe))switch(Pe){case"selected":i.selected=!1;break;default:yt(i,a,Pe,null,d,ue)}for(Z in d)if(ue=d[Z],ce=u[Z],d.hasOwnProperty(Z)&&ue!==ce&&(ue!=null||ce!=null))switch(Z){case"selected":i.selected=ue&&typeof ue!="function"&&typeof ue!="symbol";break;default:yt(i,a,Z,ue,d,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in u)ue=u[Ne],u.hasOwnProperty(Ne)&&ue!=null&&!d.hasOwnProperty(Ne)&&yt(i,a,Ne,null,d,ue);for(oe in d)if(ue=d[oe],ce=u[oe],d.hasOwnProperty(oe)&&ue!==ce&&(ue!=null||ce!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,a));break;default:yt(i,a,oe,ue,d,ce)}return;default:if(Bu(a)){for(var vt in u)ue=u[vt],u.hasOwnProperty(vt)&&ue!==void 0&&!d.hasOwnProperty(vt)&&y0(i,a,vt,void 0,d,ue);for(me in d)ue=d[me],ce=u[me],!d.hasOwnProperty(me)||ue===ce||ue===void 0&&ce===void 0||y0(i,a,me,ue,d,ce);return}}for(var re in u)ue=u[re],u.hasOwnProperty(re)&&ue!=null&&!d.hasOwnProperty(re)&&yt(i,a,re,null,d,ue);for(ye in d)ue=d[ye],ce=u[ye],!d.hasOwnProperty(ye)||ue===ce||ue==null&&ce==null||yt(i,a,ye,ue,d,ce)}var v0=null,_0=null;function gh(i){return i.nodeType===9?i:i.ownerDocument}function jE(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zE(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function b0(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var w0=null;function HI(){var i=window.event;return i&&i.type==="popstate"?i===w0?!1:(w0=i,!0):(w0=null,!1)}var UE=typeof setTimeout=="function"?setTimeout:void 0,$I=typeof clearTimeout=="function"?clearTimeout:void 0,BE=typeof Promise=="function"?Promise:void 0,FI=typeof queueMicrotask=="function"?queueMicrotask:typeof BE<"u"?function(i){return BE.resolve(null).then(i).catch(qI)}:UE;function qI(i){setTimeout(function(){throw i})}function Xs(i){return i==="head"}function HE(i,a){var u=a,d=0,g=0;do{var _=u.nextSibling;if(i.removeChild(u),_&&_.nodeType===8)if(u=_.data,u==="/$"){if(0<d&&8>d){u=d;var P=i.ownerDocument;if(u&1&&Ac(P.documentElement),u&2&&Ac(P.body),u&4)for(u=P.head,Ac(u),P=u.firstChild;P;){var q=P.nextSibling,Z=P.nodeName;P[Ki]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&P.rel.toLowerCase()==="stylesheet"||u.removeChild(P),P=q}}if(g===0){i.removeChild(_),Pc(a);return}g--}else u==="$"||u==="$?"||u==="$!"?g++:d=u.charCodeAt(0)-48;else d=0;u=_}while(u);Pc(a)}function E0(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":E0(u),hi(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function GI(i,a,u,d){for(;i.nodeType===1;){var g=u;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[Ki])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var _=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Zr(i.nextSibling),i===null)break}return null}function KI(i,a,u){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=Zr(i.nextSibling),i===null))return null;return i}function x0(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function YI(i,a){var u=i.ownerDocument;if(i.data!=="$?"||u.readyState==="complete")a();else{var d=function(){a(),u.removeEventListener("DOMContentLoaded",d)};u.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function Zr(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}var T0=null;function $E(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return i;a--}else u==="/$"&&a++}i=i.previousSibling}return null}function FE(i,a,u){switch(a=gh(u),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Ac(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);hi(i)}var zr=new Map,qE=new Set;function yh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ms=F.d;F.d={f:XI,r:WI,D:QI,C:ZI,L:JI,m:e4,X:n4,S:t4,M:r4};function XI(){var i=ms.f(),a=lh();return i||a}function WI(i){var a=Ar(i);a!==null&&a.tag===5&&a.type==="form"?d1(a):ms.r(i)}var Pl=typeof document>"u"?null:document;function GE(i,a,u){var d=Pl;if(d&&typeof a=="string"&&a){var g=Gt(a);g='link[rel="'+i+'"][href="'+g+'"]',typeof u=="string"&&(g+='[crossorigin="'+u+'"]'),qE.has(g)||(qE.add(g),i={rel:i,crossOrigin:u,href:a},d.querySelector(g)===null&&(a=d.createElement("link"),wn(a,"link",i),At(a),d.head.appendChild(a)))}}function QI(i){ms.D(i),GE("dns-prefetch",i,null)}function ZI(i,a){ms.C(i,a),GE("preconnect",i,a)}function JI(i,a,u){ms.L(i,a,u);var d=Pl;if(d&&i&&a){var g='link[rel="preload"][as="'+Gt(a)+'"]';a==="image"&&u&&u.imageSrcSet?(g+='[imagesrcset="'+Gt(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(g+='[imagesizes="'+Gt(u.imageSizes)+'"]')):g+='[href="'+Gt(i)+'"]';var _=g;switch(a){case"style":_=Ol(i);break;case"script":_=Vl(i)}zr.has(_)||(i=p({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:i,as:a},u),zr.set(_,i),d.querySelector(g)!==null||a==="style"&&d.querySelector(Cc(_))||a==="script"&&d.querySelector(kc(_))||(a=d.createElement("link"),wn(a,"link",i),At(a),d.head.appendChild(a)))}}function e4(i,a){ms.m(i,a);var u=Pl;if(u&&i){var d=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+Gt(d)+'"][href="'+Gt(i)+'"]',_=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Vl(i)}if(!zr.has(_)&&(i=p({rel:"modulepreload",href:i},a),zr.set(_,i),u.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(kc(_)))return}d=u.createElement("link"),wn(d,"link",i),At(d),u.head.appendChild(d)}}}function t4(i,a,u){ms.S(i,a,u);var d=Pl;if(d&&i){var g=yn(d).hoistableStyles,_=Ol(i);a=a||"default";var P=g.get(_);if(!P){var q={loading:0,preload:null};if(P=d.querySelector(Cc(_)))q.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":a},u),(u=zr.get(_))&&S0(i,u);var Z=P=d.createElement("link");At(Z),wn(Z,"link",i),Z._p=new Promise(function(oe,me){Z.onload=oe,Z.onerror=me}),Z.addEventListener("load",function(){q.loading|=1}),Z.addEventListener("error",function(){q.loading|=2}),q.loading|=4,vh(P,a,d)}P={type:"stylesheet",instance:P,count:1,state:q},g.set(_,P)}}}function n4(i,a){ms.X(i,a);var u=Pl;if(u&&i){var d=yn(u).hoistableScripts,g=Vl(i),_=d.get(g);_||(_=u.querySelector(kc(g)),_||(i=p({src:i,async:!0},a),(a=zr.get(g))&&A0(i,a),_=u.createElement("script"),At(_),wn(_,"link",i),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},d.set(g,_))}}function r4(i,a){ms.M(i,a);var u=Pl;if(u&&i){var d=yn(u).hoistableScripts,g=Vl(i),_=d.get(g);_||(_=u.querySelector(kc(g)),_||(i=p({src:i,async:!0,type:"module"},a),(a=zr.get(g))&&A0(i,a),_=u.createElement("script"),At(_),wn(_,"link",i),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},d.set(g,_))}}function KE(i,a,u,d){var g=(g=le.current)?yh(g):null;if(!g)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Ol(u.href),u=yn(g).hoistableStyles,d=u.get(a),d||(d={type:"style",instance:null,count:0,state:null},u.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=Ol(u.href);var _=yn(g).hoistableStyles,P=_.get(i);if(P||(g=g.ownerDocument||g,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,P),(_=g.querySelector(Cc(i)))&&!_._p&&(P.instance=_,P.state.loading=5),zr.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},zr.set(i,u),_||i4(g,i,u,P.state))),a&&d===null)throw Error(r(528,""));return P}if(a&&d!==null)throw Error(r(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Vl(u),u=yn(g).hoistableScripts,d=u.get(a),d||(d={type:"script",instance:null,count:0,state:null},u.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Ol(i){return'href="'+Gt(i)+'"'}function Cc(i){return'link[rel="stylesheet"]['+i+"]"}function YE(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function i4(i,a,u,d){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=i.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),wn(a,"link",u),At(a),i.head.appendChild(a))}function Vl(i){return'[src="'+Gt(i)+'"]'}function kc(i){return"script[async]"+i}function XE(i,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var d=i.querySelector('style[data-href~="'+Gt(u.href)+'"]');if(d)return a.instance=d,At(d),d;var g=p({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),At(d),wn(d,"style",g),vh(d,u.precedence,i),a.instance=d;case"stylesheet":g=Ol(u.href);var _=i.querySelector(Cc(g));if(_)return a.state.loading|=4,a.instance=_,At(_),_;d=YE(u),(g=zr.get(g))&&S0(d,g),_=(i.ownerDocument||i).createElement("link"),At(_);var P=_;return P._p=new Promise(function(q,Z){P.onload=q,P.onerror=Z}),wn(_,"link",d),a.state.loading|=4,vh(_,u.precedence,i),a.instance=_;case"script":return _=Vl(u.src),(g=i.querySelector(kc(_)))?(a.instance=g,At(g),g):(d=u,(g=zr.get(_))&&(d=p({},u),A0(d,g)),i=i.ownerDocument||i,g=i.createElement("script"),At(g),wn(g,"link",d),i.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,vh(d,u.precedence,i));return a.instance}function vh(i,a,u){for(var d=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,_=g,P=0;P<d.length;P++){var q=d[P];if(q.dataset.precedence===a)_=q;else if(_!==g)break}_?_.parentNode.insertBefore(i,_.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(i,a.firstChild))}function S0(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function A0(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var _h=null;function WE(i,a,u){if(_h===null){var d=new Map,g=_h=new Map;g.set(u,d)}else g=_h,d=g.get(u),d||(d=new Map,g.set(u,d));if(d.has(i))return d;for(d.set(i,null),u=u.getElementsByTagName(i),g=0;g<u.length;g++){var _=u[g];if(!(_[Ki]||_[zt]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var P=_.getAttribute(a)||"";P=i+P;var q=d.get(P);q?q.push(_):d.set(P,[_])}}return d}function QE(i,a,u){i=i.ownerDocument||i,i.head.insertBefore(u,a==="title"?i.querySelector("head > title"):null)}function s4(i,a,u){if(u===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function ZE(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Rc=null;function a4(){}function o4(i,a,u){if(Rc===null)throw Error(r(475));var d=Rc;if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=Ol(u.href),_=i.querySelector(Cc(g));if(_){i=_._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(d.count++,d=bh.bind(d),i.then(d,d)),a.state.loading|=4,a.instance=_,At(_);return}_=i.ownerDocument||i,u=YE(u),(g=zr.get(g))&&S0(u,g),_=_.createElement("link"),At(_);var P=_;P._p=new Promise(function(q,Z){P.onload=q,P.onerror=Z}),wn(_,"link",u),a.instance=_}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(d.count++,a=bh.bind(d),i.addEventListener("load",a),i.addEventListener("error",a))}}function l4(){if(Rc===null)throw Error(r(475));var i=Rc;return i.stylesheets&&i.count===0&&C0(i,i.stylesheets),0<i.count?function(a){var u=setTimeout(function(){if(i.stylesheets&&C0(i,i.stylesheets),i.unsuspend){var d=i.unsuspend;i.unsuspend=null,d()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u)}}:null}function bh(){if(this.count--,this.count===0){if(this.stylesheets)C0(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var wh=null;function C0(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,wh=new Map,a.forEach(u4,i),wh=null,bh.call(i))}function u4(i,a){if(!(a.state.loading&4)){var u=wh.get(i);if(u)var d=u.get(null);else{u=new Map,wh.set(i,u);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<g.length;_++){var P=g[_];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(u.set(P.dataset.precedence,P),d=P)}d&&u.set(null,d)}g=a.instance,P=g.getAttribute("data-precedence"),_=u.get(P)||d,_===d&&u.set(null,g),u.set(P,g),this.count++,d=bh.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),_?_.parentNode.insertBefore(g,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),a.state.loading|=4}}var Nc={$$typeof:Y,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function c4(i,a,u,d,g,_,P,q){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=sr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sr(0),this.hiddenUpdates=sr(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=_,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function JE(i,a,u,d,g,_,P,q,Z,oe,me,ye){return i=new c4(i,a,u,P,q,Z,oe,ye),a=1,_===!0&&(a|=24),_=cr(3,null,null,a),i.current=_,_.stateNode=i,a=lg(),a.refCount++,i.pooledCache=a,a.refCount++,_.memoizedState={element:d,isDehydrated:u,cache:a},fg(_),i}function ex(i){return i?(i=hl,i):hl}function tx(i,a,u,d,g,_){g=ex(g),d.context===null?d.context=g:d.pendingContext=g,d=Vs(a),d.payload={element:u},_=_===void 0?null:_,_!==null&&(d.callback=_),u=Ls(i,d,a),u!==null&&(pr(u,i,a),ac(u,i,a))}function nx(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<a?u:a}}function k0(i,a){nx(i,a),(i=i.alternate)&&nx(i,a)}function rx(i){if(i.tag===13){var a=fl(i,67108864);a!==null&&pr(a,i,67108864),k0(i,67108864)}}var Eh=!0;function d4(i,a,u,d){var g=k.T;k.T=null;var _=F.p;try{F.p=2,R0(i,a,u,d)}finally{F.p=_,k.T=g}}function f4(i,a,u,d){var g=k.T;k.T=null;var _=F.p;try{F.p=8,R0(i,a,u,d)}finally{F.p=_,k.T=g}}function R0(i,a,u,d){if(Eh){var g=N0(d);if(g===null)g0(i,a,d,xh,u),sx(i,d);else if(m4(g,i,a,u,d))d.stopPropagation();else if(sx(i,d),a&4&&-1<h4.indexOf(i)){for(;g!==null;){var _=Ar(g);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var P=on(_.pendingLanes);if(P!==0){var q=_;for(q.pendingLanes|=2,q.entangledLanes|=2;P;){var Z=1<<31-St(P);q.entanglements[1]|=Z,P&=~Z}ki(_),(ht&6)===0&&(ah=Le()+500,xc(0))}}break;case 13:q=fl(_,2),q!==null&&pr(q,_,2),lh(),k0(_,2)}if(_=N0(d),_===null&&g0(i,a,d,xh,u),_===g)break;g=_}g!==null&&d.stopPropagation()}else g0(i,a,d,null,u)}}function N0(i){return i=Nr(i),I0(i)}var xh=null;function I0(i){if(xh=null,i=Sr(i),i!==null){var a=o(i);if(a===null)i=null;else{var u=a.tag;if(u===13){if(i=l(a),i!==null)return i;i=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return xh=i,null}function ix(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(we()){case Xe:return 2;case An:return 8;case Zt:case ir:return 32;case On:return 268435456;default:return 32}default:return 32}}var D0=!1,Ws=null,Qs=null,Zs=null,Ic=new Map,Dc=new Map,Js=[],h4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sx(i,a){switch(i){case"focusin":case"focusout":Ws=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":Zs=null;break;case"pointerover":case"pointerout":Ic.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dc.delete(a.pointerId)}}function Mc(i,a,u,d,g,_){return i===null||i.nativeEvent!==_?(i={blockedOn:a,domEventName:u,eventSystemFlags:d,nativeEvent:_,targetContainers:[g]},a!==null&&(a=Ar(a),a!==null&&rx(a)),i):(i.eventSystemFlags|=d,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function m4(i,a,u,d,g){switch(a){case"focusin":return Ws=Mc(Ws,i,a,u,d,g),!0;case"dragenter":return Qs=Mc(Qs,i,a,u,d,g),!0;case"mouseover":return Zs=Mc(Zs,i,a,u,d,g),!0;case"pointerover":var _=g.pointerId;return Ic.set(_,Mc(Ic.get(_)||null,i,a,u,d,g)),!0;case"gotpointercapture":return _=g.pointerId,Dc.set(_,Mc(Dc.get(_)||null,i,a,u,d,g)),!0}return!1}function ax(i){var a=Sr(i.target);if(a!==null){var u=o(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){i.blockedOn=a,Ko(i.priority,function(){if(u.tag===13){var d=mr();d=ci(d);var g=fl(u,d);g!==null&&pr(g,u,d),k0(u,d)}});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Th(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var u=N0(i.nativeEvent);if(u===null){u=i.nativeEvent;var d=new u.constructor(u.type,u);Wi=d,u.target.dispatchEvent(d),Wi=null}else return a=Ar(u),a!==null&&rx(a),i.blockedOn=u,!1;a.shift()}return!0}function ox(i,a,u){Th(i)&&u.delete(a)}function p4(){D0=!1,Ws!==null&&Th(Ws)&&(Ws=null),Qs!==null&&Th(Qs)&&(Qs=null),Zs!==null&&Th(Zs)&&(Zs=null),Ic.forEach(ox),Dc.forEach(ox)}function Sh(i,a){i.blockedOn===a&&(i.blockedOn=null,D0||(D0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,p4)))}var Ah=null;function lx(i){Ah!==i&&(Ah=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ah===i&&(Ah=null);for(var a=0;a<i.length;a+=3){var u=i[a],d=i[a+1],g=i[a+2];if(typeof d!="function"){if(I0(d||u)===null)continue;break}var _=Ar(u);_!==null&&(i.splice(a,3),a-=3,Ig(_,{pending:!0,data:g,method:u.method,action:d},d,g))}}))}function Pc(i){function a(Z){return Sh(Z,i)}Ws!==null&&Sh(Ws,i),Qs!==null&&Sh(Qs,i),Zs!==null&&Sh(Zs,i),Ic.forEach(a),Dc.forEach(a);for(var u=0;u<Js.length;u++){var d=Js[u];d.blockedOn===i&&(d.blockedOn=null)}for(;0<Js.length&&(u=Js[0],u.blockedOn===null);)ax(u),u.blockedOn===null&&Js.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(d=0;d<u.length;d+=3){var g=u[d],_=u[d+1],P=g[Dt]||null;if(typeof _=="function")P||lx(u);else if(P){var q=null;if(_&&_.hasAttribute("formAction")){if(g=_,P=_[Dt]||null)q=P.formAction;else if(I0(g)!==null)continue}else q=P.action;typeof q=="function"?u[d+1]=q:(u.splice(d,3),d-=3),lx(u)}}}function M0(i){this._internalRoot=i}Ch.prototype.render=M0.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var u=a.current,d=mr();tx(u,d,i,a,null,null)},Ch.prototype.unmount=M0.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;tx(i.current,2,null,i,null,null),lh(),a[Yn]=null}};function Ch(i){this._internalRoot=i}Ch.prototype.unstable_scheduleHydration=function(i){if(i){var a=di();i={blockedOn:null,target:i,priority:a};for(var u=0;u<Js.length&&a!==0&&a<Js[u].priority;u++);Js.splice(u,0,i),u===0&&ax(i)}};var ux=e.version;if(ux!=="19.1.0")throw Error(r(527,ux,"19.1.0"));F.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=f(a),i=i!==null?h(i):null,i=i===null?null:i.stateNode,i};var g4={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kh.isDisabled&&kh.supportsFiber)try{ut=kh.inject(g4),We=kh}catch{}}return Vc.createRoot=function(i,a){if(!s(i))throw Error(r(299));var u=!1,d="",g=S1,_=A1,P=C1,q=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(P=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(q=a.unstable_transitionCallbacks)),a=JE(i,1,!1,null,null,u,d,g,_,P,q,null),i[Yn]=a.current,p0(i),new M0(a)},Vc.hydrateRoot=function(i,a,u){if(!s(i))throw Error(r(299));var d=!1,g="",_=S1,P=A1,q=C1,Z=null,oe=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(P=u.onCaughtError),u.onRecoverableError!==void 0&&(q=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(Z=u.unstable_transitionCallbacks),u.formState!==void 0&&(oe=u.formState)),a=JE(i,1,!0,a,u??null,d,g,_,P,q,Z,oe),a.context=ex(null),u=a.current,d=mr(),d=ci(d),g=Vs(d),g.callback=null,Ls(u,g,d),u=d,a.current.lanes=u,xr(a,u),ki(a),i[Yn]=a.current,p0(i),new Ch(a)},Vc.version="19.1.0",Vc}var _x;function C4(){if(_x)return V0.exports;_x=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),V0.exports=A4(),V0.exports}var k4=C4();function Gn(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=Gn(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var U0={exports:{}},B0={},H0={exports:{}},$0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bx;function R4(){if(bx)return $0;bx=1;var t=$d();function e(v,b){return v===b&&(v!==0||1/v===1/b)||v!==v&&b!==b}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,o=t.useLayoutEffect,l=t.useDebugValue;function c(v,b){var R=b(),M=r({inst:{value:R,getSnapshot:b}}),O=M[0].inst,L=M[1];return o(function(){O.value=R,O.getSnapshot=b,f(O)&&L({inst:O})},[v,R,b]),s(function(){return f(O)&&L({inst:O}),v(function(){f(O)&&L({inst:O})})},[v]),l(R),R}function f(v){var b=v.getSnapshot;v=v.value;try{var R=b();return!n(v,R)}catch{return!0}}function h(v,b){return b()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:c;return $0.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,$0}var wx;function N4(){return wx||(wx=1,H0.exports=R4()),H0.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ex;function I4(){if(Ex)return B0;Ex=1;var t=$d(),e=N4();function n(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,o=t.useRef,l=t.useEffect,c=t.useMemo,f=t.useDebugValue;return B0.useSyncExternalStoreWithSelector=function(h,p,v,b,R){var M=o(null);if(M.current===null){var O={hasValue:!1,value:null};M.current=O}else O=M.current;M=c(function(){function j(w){if(!$){if($=!0,Y=w,w=b(w),R!==void 0&&O.hasValue){var x=O.value;if(R(x,w))return y=x}return y=w}if(x=y,r(Y,w))return x;var S=b(w);return R!==void 0&&R(x,S)?(Y=w,x):(Y=w,y=S)}var $=!1,Y,y,E=v===void 0?null:v;return[function(){return j(p())},E===null?void 0:function(){return j(E())}]},[p,v,b,R]);var L=s(h,M[0],M[1]);return l(function(){O.hasValue=!0,O.value=L},[L]),f(L),L},B0}var xx;function D4(){return xx||(xx=1,U0.exports=I4()),U0.exports}var M4=D4();const P4=Kv(M4),O4={},Tx=t=>{let e;const n=new Set,r=(p,v)=>{const b=typeof p=="function"?p(e):p;if(!Object.is(b,e)){const R=e;e=v??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(M=>M(e,R))}},s=()=>e,f={setState:r,getState:s,getInitialState:()=>h,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(O4?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},h=e=t(r,s,f);return f},V4=t=>t?Tx(t):Tx,{useDebugValue:L4}=pe,{useSyncExternalStoreWithSelector:j4}=P4,z4=t=>t;function MA(t,e=z4,n){const r=j4(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return L4(r),r}const Sx=(t,e)=>{const n=V4(t),r=(s,o=e)=>MA(n,s,o);return Object.assign(r,n),r},U4=(t,e)=>t?Sx(t,e):Sx;function Mn(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,s]of t)if(!Object.is(s,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var B4={value:()=>{}};function ep(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Qh(n)}function Qh(t){this._=t}function H4(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Qh.prototype=ep.prototype={constructor:Qh,on:function(t,e){var n=this._,r=H4(t+"",n),s,o=-1,l=r.length;if(arguments.length<2){for(;++o<l;)if((s=(t=r[o]).type)&&(s=$4(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<l;)if(s=(t=r[o]).type)n[s]=Ax(n[s],t.name,e);else if(e==null)for(s in n)n[s]=Ax(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Qh(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,o;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,s=o.length;r<s;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,o=r.length;s<o;++s)r[s].value.apply(e,n)}};function $4(t,e){for(var n=0,r=t.length,s;n<r;++n)if((s=t[n]).name===e)return s.value}function Ax(t,e,n){for(var r=0,s=t.length;r<s;++r)if(t[r].name===e){t[r]=B4,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Dy="http://www.w3.org/1999/xhtml";const Cx={svg:"http://www.w3.org/2000/svg",xhtml:Dy,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function tp(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Cx.hasOwnProperty(e)?{space:Cx[e],local:t}:t}function F4(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Dy&&e.documentElement.namespaceURI===Dy?e.createElement(t):e.createElementNS(n,t)}}function q4(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function PA(t){var e=tp(t);return(e.local?q4:F4)(e)}function G4(){}function Yv(t){return t==null?G4:function(){return this.querySelector(t)}}function K4(t){typeof t!="function"&&(t=Yv(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],l=o.length,c=r[s]=new Array(l),f,h,p=0;p<l;++p)(f=o[p])&&(h=t.call(f,f.__data__,p,o))&&("__data__"in f&&(h.__data__=f.__data__),c[p]=h);return new br(r,this._parents)}function Y4(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function X4(){return[]}function OA(t){return t==null?X4:function(){return this.querySelectorAll(t)}}function W4(t){return function(){return Y4(t.apply(this,arguments))}}function Q4(t){typeof t=="function"?t=W4(t):t=OA(t);for(var e=this._groups,n=e.length,r=[],s=[],o=0;o<n;++o)for(var l=e[o],c=l.length,f,h=0;h<c;++h)(f=l[h])&&(r.push(t.call(f,f.__data__,h,l)),s.push(f));return new br(r,s)}function VA(t){return function(){return this.matches(t)}}function LA(t){return function(e){return e.matches(t)}}var Z4=Array.prototype.find;function J4(t){return function(){return Z4.call(this.children,t)}}function eD(){return this.firstElementChild}function tD(t){return this.select(t==null?eD:J4(typeof t=="function"?t:LA(t)))}var nD=Array.prototype.filter;function rD(){return Array.from(this.children)}function iD(t){return function(){return nD.call(this.children,t)}}function sD(t){return this.selectAll(t==null?rD:iD(typeof t=="function"?t:LA(t)))}function aD(t){typeof t!="function"&&(t=VA(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],l=o.length,c=r[s]=[],f,h=0;h<l;++h)(f=o[h])&&t.call(f,f.__data__,h,o)&&c.push(f);return new br(r,this._parents)}function jA(t){return new Array(t.length)}function oD(){return new br(this._enter||this._groups.map(jA),this._parents)}function vm(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}vm.prototype={constructor:vm,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function lD(t){return function(){return t}}function uD(t,e,n,r,s,o){for(var l=0,c,f=e.length,h=o.length;l<h;++l)(c=e[l])?(c.__data__=o[l],r[l]=c):n[l]=new vm(t,o[l]);for(;l<f;++l)(c=e[l])&&(s[l]=c)}function cD(t,e,n,r,s,o,l){var c,f,h=new Map,p=e.length,v=o.length,b=new Array(p),R;for(c=0;c<p;++c)(f=e[c])&&(b[c]=R=l.call(f,f.__data__,c,e)+"",h.has(R)?s[c]=f:h.set(R,f));for(c=0;c<v;++c)R=l.call(t,o[c],c,o)+"",(f=h.get(R))?(r[c]=f,f.__data__=o[c],h.delete(R)):n[c]=new vm(t,o[c]);for(c=0;c<p;++c)(f=e[c])&&h.get(b[c])===f&&(s[c]=f)}function dD(t){return t.__data__}function fD(t,e){if(!arguments.length)return Array.from(this,dD);var n=e?cD:uD,r=this._parents,s=this._groups;typeof t!="function"&&(t=lD(t));for(var o=s.length,l=new Array(o),c=new Array(o),f=new Array(o),h=0;h<o;++h){var p=r[h],v=s[h],b=v.length,R=hD(t.call(p,p&&p.__data__,h,r)),M=R.length,O=c[h]=new Array(M),L=l[h]=new Array(M),j=f[h]=new Array(b);n(p,v,O,L,j,R,e);for(var $=0,Y=0,y,E;$<M;++$)if(y=O[$]){for($>=Y&&(Y=$+1);!(E=L[Y])&&++Y<M;);y._next=E||null}}return l=new br(l,r),l._enter=c,l._exit=f,l}function hD(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function mD(){return new br(this._exit||this._groups.map(jA),this._parents)}function pD(t,e,n){var r=this.enter(),s=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?o.remove():n(o),r&&s?r.merge(s).order():s}function gD(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,s=n.length,o=r.length,l=Math.min(s,o),c=new Array(s),f=0;f<l;++f)for(var h=n[f],p=r[f],v=h.length,b=c[f]=new Array(v),R,M=0;M<v;++M)(R=h[M]||p[M])&&(b[M]=R);for(;f<s;++f)c[f]=n[f];return new br(c,this._parents)}function yD(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],s=r.length-1,o=r[s],l;--s>=0;)(l=r[s])&&(o&&l.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(l,o),o=l);return this}function vD(t){t||(t=_D);function e(v,b){return v&&b?t(v.__data__,b.__data__):!v-!b}for(var n=this._groups,r=n.length,s=new Array(r),o=0;o<r;++o){for(var l=n[o],c=l.length,f=s[o]=new Array(c),h,p=0;p<c;++p)(h=l[p])&&(f[p]=h);f.sort(e)}return new br(s,this._parents).order()}function _D(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function bD(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function wD(){return Array.from(this)}function ED(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,o=r.length;s<o;++s){var l=r[s];if(l)return l}return null}function xD(){let t=0;for(const e of this)++t;return t}function TD(){return!this.node()}function SD(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],o=0,l=s.length,c;o<l;++o)(c=s[o])&&t.call(c,c.__data__,o,s);return this}function AD(t){return function(){this.removeAttribute(t)}}function CD(t){return function(){this.removeAttributeNS(t.space,t.local)}}function kD(t,e){return function(){this.setAttribute(t,e)}}function RD(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ND(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function ID(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function DD(t,e){var n=tp(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?CD:AD:typeof e=="function"?n.local?ID:ND:n.local?RD:kD)(n,e))}function zA(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function MD(t){return function(){this.style.removeProperty(t)}}function PD(t,e,n){return function(){this.style.setProperty(t,e,n)}}function OD(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function VD(t,e,n){return arguments.length>1?this.each((e==null?MD:typeof e=="function"?OD:PD)(t,e,n??"")):hu(this.node(),t)}function hu(t,e){return t.style.getPropertyValue(e)||zA(t).getComputedStyle(t,null).getPropertyValue(e)}function LD(t){return function(){delete this[t]}}function jD(t,e){return function(){this[t]=e}}function zD(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function UD(t,e){return arguments.length>1?this.each((e==null?LD:typeof e=="function"?zD:jD)(t,e)):this.node()[t]}function UA(t){return t.trim().split(/^|\s+/)}function Xv(t){return t.classList||new BA(t)}function BA(t){this._node=t,this._names=UA(t.getAttribute("class")||"")}BA.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function HA(t,e){for(var n=Xv(t),r=-1,s=e.length;++r<s;)n.add(e[r])}function $A(t,e){for(var n=Xv(t),r=-1,s=e.length;++r<s;)n.remove(e[r])}function BD(t){return function(){HA(this,t)}}function HD(t){return function(){$A(this,t)}}function $D(t,e){return function(){(e.apply(this,arguments)?HA:$A)(this,t)}}function FD(t,e){var n=UA(t+"");if(arguments.length<2){for(var r=Xv(this.node()),s=-1,o=n.length;++s<o;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?$D:e?BD:HD)(n,e))}function qD(){this.textContent=""}function GD(t){return function(){this.textContent=t}}function KD(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function YD(t){return arguments.length?this.each(t==null?qD:(typeof t=="function"?KD:GD)(t)):this.node().textContent}function XD(){this.innerHTML=""}function WD(t){return function(){this.innerHTML=t}}function QD(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function ZD(t){return arguments.length?this.each(t==null?XD:(typeof t=="function"?QD:WD)(t)):this.node().innerHTML}function JD(){this.nextSibling&&this.parentNode.appendChild(this)}function eM(){return this.each(JD)}function tM(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function nM(){return this.each(tM)}function rM(t){var e=typeof t=="function"?t:PA(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function iM(){return null}function sM(t,e){var n=typeof t=="function"?t:PA(t),r=e==null?iM:typeof e=="function"?e:Yv(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function aM(){var t=this.parentNode;t&&t.removeChild(this)}function oM(){return this.each(aM)}function lM(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function uM(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function cM(t){return this.select(t?uM:lM)}function dM(t){return arguments.length?this.property("__data__",t):this.node().__data__}function fM(t){return function(e){t.call(this,e,this.__data__)}}function hM(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function mM(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,s=e.length,o;n<s;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function pM(t,e,n){return function(){var r=this.__on,s,o=fM(e);if(r){for(var l=0,c=r.length;l<c;++l)if((s=r[l]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=n),s.value=e;return}}this.addEventListener(t.type,o,n),s={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(s):this.__on=[s]}}function gM(t,e,n){var r=hM(t+""),s,o=r.length,l;if(arguments.length<2){var c=this.node().__on;if(c){for(var f=0,h=c.length,p;f<h;++f)for(s=0,p=c[f];s<o;++s)if((l=r[s]).type===p.type&&l.name===p.name)return p.value}return}for(c=e?pM:mM,s=0;s<o;++s)this.each(c(r[s],e,n));return this}function FA(t,e,n){var r=zA(t),s=r.CustomEvent;typeof s=="function"?s=new s(e,n):(s=r.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function yM(t,e){return function(){return FA(this,t,e)}}function vM(t,e){return function(){return FA(this,t,e.apply(this,arguments))}}function _M(t,e){return this.each((typeof e=="function"?vM:yM)(t,e))}function*bM(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,o=r.length,l;s<o;++s)(l=r[s])&&(yield l)}var qA=[null];function br(t,e){this._groups=t,this._parents=e}function Fd(){return new br([[document.documentElement]],qA)}function wM(){return this}br.prototype=Fd.prototype={constructor:br,select:K4,selectAll:Q4,selectChild:tD,selectChildren:sD,filter:aD,data:fD,enter:oD,exit:mD,join:pD,merge:gD,selection:wM,order:yD,sort:vD,call:bD,nodes:wD,node:ED,size:xD,empty:TD,each:SD,attr:DD,style:VD,property:UD,classed:FD,text:YD,html:ZD,raise:eM,lower:nM,append:rM,insert:sM,remove:oM,clone:cM,datum:dM,on:gM,dispatch:_M,[Symbol.iterator]:bM};function ti(t){return typeof t=="string"?new br([[document.querySelector(t)]],[document.documentElement]):new br([[t]],qA)}function EM(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Ni(t,e){if(t=EM(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const xM={passive:!1},gd={capture:!0,passive:!1};function F0(t){t.stopImmediatePropagation()}function ru(t){t.preventDefault(),t.stopImmediatePropagation()}function GA(t){var e=t.document.documentElement,n=ti(t).on("dragstart.drag",ru,gd);"onselectstart"in e?n.on("selectstart.drag",ru,gd):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function KA(t,e){var n=t.document.documentElement,r=ti(t).on("dragstart.drag",null);e&&(r.on("click.drag",ru,gd),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Rh=t=>()=>t;function My(t,{sourceEvent:e,subject:n,target:r,identifier:s,active:o,x:l,y:c,dx:f,dy:h,dispatch:p}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:p}})}My.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function TM(t){return!t.ctrlKey&&!t.button}function SM(){return this.parentNode}function AM(t,e){return e??{x:t.x,y:t.y}}function CM(){return navigator.maxTouchPoints||"ontouchstart"in this}function kM(){var t=TM,e=SM,n=AM,r=CM,s={},o=ep("start","drag","end"),l=0,c,f,h,p,v=0;function b(y){y.on("mousedown.drag",R).filter(r).on("touchstart.drag",L).on("touchmove.drag",j,xM).on("touchend.drag touchcancel.drag",$).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function R(y,E){if(!(p||!t.call(this,y,E))){var w=Y(this,e.call(this,y,E),y,E,"mouse");w&&(ti(y.view).on("mousemove.drag",M,gd).on("mouseup.drag",O,gd),GA(y.view),F0(y),h=!1,c=y.clientX,f=y.clientY,w("start",y))}}function M(y){if(ru(y),!h){var E=y.clientX-c,w=y.clientY-f;h=E*E+w*w>v}s.mouse("drag",y)}function O(y){ti(y.view).on("mousemove.drag mouseup.drag",null),KA(y.view,h),ru(y),s.mouse("end",y)}function L(y,E){if(t.call(this,y,E)){var w=y.changedTouches,x=e.call(this,y,E),S=w.length,N,C;for(N=0;N<S;++N)(C=Y(this,x,y,E,w[N].identifier,w[N]))&&(F0(y),C("start",y,w[N]))}}function j(y){var E=y.changedTouches,w=E.length,x,S;for(x=0;x<w;++x)(S=s[E[x].identifier])&&(ru(y),S("drag",y,E[x]))}function $(y){var E=y.changedTouches,w=E.length,x,S;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),x=0;x<w;++x)(S=s[E[x].identifier])&&(F0(y),S("end",y,E[x]))}function Y(y,E,w,x,S,N){var C=o.copy(),D=Ni(N||w,E),H,V,U;if((U=n.call(y,new My("beforestart",{sourceEvent:w,target:b,identifier:S,active:l,x:D[0],y:D[1],dx:0,dy:0,dispatch:C}),x))!=null)return H=U.x-D[0]||0,V=U.y-D[1]||0,function Q(k,F,G){var X=D,z;switch(k){case"start":s[S]=Q,z=l++;break;case"end":delete s[S],--l;case"drag":D=Ni(G||F,E),z=l;break}C.call(k,y,new My(k,{sourceEvent:F,subject:U,target:b,identifier:S,active:z,x:D[0]+H,y:D[1]+V,dx:D[0]-X[0],dy:D[1]-X[1],dispatch:C}),x)}}return b.filter=function(y){return arguments.length?(t=typeof y=="function"?y:Rh(!!y),b):t},b.container=function(y){return arguments.length?(e=typeof y=="function"?y:Rh(y),b):e},b.subject=function(y){return arguments.length?(n=typeof y=="function"?y:Rh(y),b):n},b.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:Rh(!!y),b):r},b.on=function(){var y=o.on.apply(o,arguments);return y===o?b:y},b.clickDistance=function(y){return arguments.length?(v=(y=+y)*y,b):Math.sqrt(v)},b}function Wv(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function YA(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function qd(){}var yd=.7,_m=1/yd,iu="\\s*([+-]?\\d+)\\s*",vd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Di="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",RM=/^#([0-9a-f]{3,8})$/,NM=new RegExp(`^rgb\\(${iu},${iu},${iu}\\)$`),IM=new RegExp(`^rgb\\(${Di},${Di},${Di}\\)$`),DM=new RegExp(`^rgba\\(${iu},${iu},${iu},${vd}\\)$`),MM=new RegExp(`^rgba\\(${Di},${Di},${Di},${vd}\\)$`),PM=new RegExp(`^hsl\\(${vd},${Di},${Di}\\)$`),OM=new RegExp(`^hsla\\(${vd},${Di},${Di},${vd}\\)$`),kx={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Wv(qd,_d,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Rx,formatHex:Rx,formatHex8:VM,formatHsl:LM,formatRgb:Nx,toString:Nx});function Rx(){return this.rgb().formatHex()}function VM(){return this.rgb().formatHex8()}function LM(){return XA(this).formatHsl()}function Nx(){return this.rgb().formatRgb()}function _d(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=RM.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ix(e):n===3?new er(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Nh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Nh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=NM.exec(t))?new er(e[1],e[2],e[3],1):(e=IM.exec(t))?new er(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=DM.exec(t))?Nh(e[1],e[2],e[3],e[4]):(e=MM.exec(t))?Nh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=PM.exec(t))?Px(e[1],e[2]/100,e[3]/100,1):(e=OM.exec(t))?Px(e[1],e[2]/100,e[3]/100,e[4]):kx.hasOwnProperty(t)?Ix(kx[t]):t==="transparent"?new er(NaN,NaN,NaN,0):null}function Ix(t){return new er(t>>16&255,t>>8&255,t&255,1)}function Nh(t,e,n,r){return r<=0&&(t=e=n=NaN),new er(t,e,n,r)}function jM(t){return t instanceof qd||(t=_d(t)),t?(t=t.rgb(),new er(t.r,t.g,t.b,t.opacity)):new er}function Py(t,e,n,r){return arguments.length===1?jM(t):new er(t,e,n,r??1)}function er(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Wv(er,Py,YA(qd,{brighter(t){return t=t==null?_m:Math.pow(_m,t),new er(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?yd:Math.pow(yd,t),new er(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new er(So(this.r),So(this.g),So(this.b),bm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Dx,formatHex:Dx,formatHex8:zM,formatRgb:Mx,toString:Mx}));function Dx(){return`#${bo(this.r)}${bo(this.g)}${bo(this.b)}`}function zM(){return`#${bo(this.r)}${bo(this.g)}${bo(this.b)}${bo((isNaN(this.opacity)?1:this.opacity)*255)}`}function Mx(){const t=bm(this.opacity);return`${t===1?"rgb(":"rgba("}${So(this.r)}, ${So(this.g)}, ${So(this.b)}${t===1?")":`, ${t})`}`}function bm(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function So(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function bo(t){return t=So(t),(t<16?"0":"")+t.toString(16)}function Px(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ni(t,e,n,r)}function XA(t){if(t instanceof ni)return new ni(t.h,t.s,t.l,t.opacity);if(t instanceof qd||(t=_d(t)),!t)return new ni;if(t instanceof ni)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),o=Math.max(e,n,r),l=NaN,c=o-s,f=(o+s)/2;return c?(e===o?l=(n-r)/c+(n<r)*6:n===o?l=(r-e)/c+2:l=(e-n)/c+4,c/=f<.5?o+s:2-o-s,l*=60):c=f>0&&f<1?0:l,new ni(l,c,f,t.opacity)}function UM(t,e,n,r){return arguments.length===1?XA(t):new ni(t,e,n,r??1)}function ni(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Wv(ni,UM,YA(qd,{brighter(t){return t=t==null?_m:Math.pow(_m,t),new ni(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?yd:Math.pow(yd,t),new ni(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new er(q0(t>=240?t-240:t+120,s,r),q0(t,s,r),q0(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new ni(Ox(this.h),Ih(this.s),Ih(this.l),bm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=bm(this.opacity);return`${t===1?"hsl(":"hsla("}${Ox(this.h)}, ${Ih(this.s)*100}%, ${Ih(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ox(t){return t=(t||0)%360,t<0?t+360:t}function Ih(t){return Math.max(0,Math.min(1,t||0))}function q0(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Qv=t=>()=>t;function WA(t,e){return function(n){return t+n*e}}function BM(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function pX(t,e){var n=e-t;return n?WA(t,n>180||n<-180?n-360*Math.round(n/360):n):Qv(isNaN(t)?e:t)}function HM(t){return(t=+t)==1?QA:function(e,n){return n-e?BM(e,n,t):Qv(isNaN(e)?n:e)}}function QA(t,e){var n=e-t;return n?WA(t,n):Qv(isNaN(t)?e:t)}const Vx=function t(e){var n=HM(e);function r(s,o){var l=n((s=Py(s)).r,(o=Py(o)).r),c=n(s.g,o.g),f=n(s.b,o.b),h=QA(s.opacity,o.opacity);return function(p){return s.r=l(p),s.g=c(p),s.b=f(p),s.opacity=h(p),s+""}}return r.gamma=t,r}(1);function ia(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Oy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,G0=new RegExp(Oy.source,"g");function $M(t){return function(){return t}}function FM(t){return function(e){return t(e)+""}}function qM(t,e){var n=Oy.lastIndex=G0.lastIndex=0,r,s,o,l=-1,c=[],f=[];for(t=t+"",e=e+"";(r=Oy.exec(t))&&(s=G0.exec(e));)(o=s.index)>n&&(o=e.slice(n,o),c[l]?c[l]+=o:c[++l]=o),(r=r[0])===(s=s[0])?c[l]?c[l]+=s:c[++l]=s:(c[++l]=null,f.push({i:l,x:ia(r,s)})),n=G0.lastIndex;return n<e.length&&(o=e.slice(n),c[l]?c[l]+=o:c[++l]=o),c.length<2?f[0]?FM(f[0].x):$M(e):(e=f.length,function(h){for(var p=0,v;p<e;++p)c[(v=f[p]).i]=v.x(h);return c.join("")})}var Lx=180/Math.PI,Vy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ZA(t,e,n,r,s,o){var l,c,f;return(l=Math.sqrt(t*t+e*e))&&(t/=l,e/=l),(f=t*n+e*r)&&(n-=t*f,r-=e*f),(c=Math.sqrt(n*n+r*r))&&(n/=c,r/=c,f/=c),t*r<e*n&&(t=-t,e=-e,f=-f,l=-l),{translateX:s,translateY:o,rotate:Math.atan2(e,t)*Lx,skewX:Math.atan(f)*Lx,scaleX:l,scaleY:c}}var Dh;function GM(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Vy:ZA(e.a,e.b,e.c,e.d,e.e,e.f)}function KM(t){return t==null||(Dh||(Dh=document.createElementNS("http://www.w3.org/2000/svg","g")),Dh.setAttribute("transform",t),!(t=Dh.transform.baseVal.consolidate()))?Vy:(t=t.matrix,ZA(t.a,t.b,t.c,t.d,t.e,t.f))}function JA(t,e,n,r){function s(h){return h.length?h.pop()+" ":""}function o(h,p,v,b,R,M){if(h!==v||p!==b){var O=R.push("translate(",null,e,null,n);M.push({i:O-4,x:ia(h,v)},{i:O-2,x:ia(p,b)})}else(v||b)&&R.push("translate("+v+e+b+n)}function l(h,p,v,b){h!==p?(h-p>180?p+=360:p-h>180&&(h+=360),b.push({i:v.push(s(v)+"rotate(",null,r)-2,x:ia(h,p)})):p&&v.push(s(v)+"rotate("+p+r)}function c(h,p,v,b){h!==p?b.push({i:v.push(s(v)+"skewX(",null,r)-2,x:ia(h,p)}):p&&v.push(s(v)+"skewX("+p+r)}function f(h,p,v,b,R,M){if(h!==v||p!==b){var O=R.push(s(R)+"scale(",null,",",null,")");M.push({i:O-4,x:ia(h,v)},{i:O-2,x:ia(p,b)})}else(v!==1||b!==1)&&R.push(s(R)+"scale("+v+","+b+")")}return function(h,p){var v=[],b=[];return h=t(h),p=t(p),o(h.translateX,h.translateY,p.translateX,p.translateY,v,b),l(h.rotate,p.rotate,v,b),c(h.skewX,p.skewX,v,b),f(h.scaleX,h.scaleY,p.scaleX,p.scaleY,v,b),h=p=null,function(R){for(var M=-1,O=b.length,L;++M<O;)v[(L=b[M]).i]=L.x(R);return v.join("")}}}var YM=JA(GM,"px, ","px)","deg)"),XM=JA(KM,", ",")",")"),WM=1e-12;function jx(t){return((t=Math.exp(t))+1/t)/2}function QM(t){return((t=Math.exp(t))-1/t)/2}function ZM(t){return((t=Math.exp(2*t))-1)/(t+1)}const JM=function t(e,n,r){function s(o,l){var c=o[0],f=o[1],h=o[2],p=l[0],v=l[1],b=l[2],R=p-c,M=v-f,O=R*R+M*M,L,j;if(O<WM)j=Math.log(b/h)/e,L=function(x){return[c+x*R,f+x*M,h*Math.exp(e*x*j)]};else{var $=Math.sqrt(O),Y=(b*b-h*h+r*O)/(2*h*n*$),y=(b*b-h*h-r*O)/(2*b*n*$),E=Math.log(Math.sqrt(Y*Y+1)-Y),w=Math.log(Math.sqrt(y*y+1)-y);j=(w-E)/e,L=function(x){var S=x*j,N=jx(E),C=h/(n*$)*(N*ZM(e*S+E)-QM(E));return[c+C*R,f+C*M,h*N/jx(e*S+E)]}}return L.duration=j*1e3*e/Math.SQRT2,L}return s.rho=function(o){var l=Math.max(.001,+o),c=l*l,f=c*c;return t(l,c,f)},s}(Math.SQRT2,2,4);var mu=0,Gc=0,Lc=0,e3=1e3,wm,Kc,Em=0,Ro=0,np=0,bd=typeof performance=="object"&&performance.now?performance:Date,t3=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Zv(){return Ro||(t3(eP),Ro=bd.now()+np)}function eP(){Ro=0}function xm(){this._call=this._time=this._next=null}xm.prototype=n3.prototype={constructor:xm,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Zv():+n)+(e==null?0:+e),!this._next&&Kc!==this&&(Kc?Kc._next=this:wm=this,Kc=this),this._call=t,this._time=n,Ly()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ly())}};function n3(t,e,n){var r=new xm;return r.restart(t,e,n),r}function tP(){Zv(),++mu;for(var t=wm,e;t;)(e=Ro-t._time)>=0&&t._call.call(void 0,e),t=t._next;--mu}function zx(){Ro=(Em=bd.now())+np,mu=Gc=0;try{tP()}finally{mu=0,rP(),Ro=0}}function nP(){var t=bd.now(),e=t-Em;e>e3&&(np-=e,Em=t)}function rP(){for(var t,e=wm,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:wm=n);Kc=t,Ly(r)}function Ly(t){if(!mu){Gc&&(Gc=clearTimeout(Gc));var e=t-Ro;e>24?(t<1/0&&(Gc=setTimeout(zx,t-bd.now()-np)),Lc&&(Lc=clearInterval(Lc))):(Lc||(Em=bd.now(),Lc=setInterval(nP,e3)),mu=1,t3(zx))}}function Ux(t,e,n){var r=new xm;return e=e==null?0:+e,r.restart(s=>{r.stop(),t(s+e)},e,n),r}var iP=ep("start","end","cancel","interrupt"),sP=[],r3=0,Bx=1,jy=2,Zh=3,Hx=4,zy=5,Jh=6;function rp(t,e,n,r,s,o){var l=t.__transition;if(!l)t.__transition={};else if(n in l)return;aP(t,n,{name:e,index:r,group:s,on:iP,tween:sP,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:r3})}function Jv(t,e){var n=li(t,e);if(n.state>r3)throw new Error("too late; already scheduled");return n}function $i(t,e){var n=li(t,e);if(n.state>Zh)throw new Error("too late; already running");return n}function li(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function aP(t,e,n){var r=t.__transition,s;r[e]=n,n.timer=n3(o,0,n.time);function o(h){n.state=Bx,n.timer.restart(l,n.delay,n.time),n.delay<=h&&l(h-n.delay)}function l(h){var p,v,b,R;if(n.state!==Bx)return f();for(p in r)if(R=r[p],R.name===n.name){if(R.state===Zh)return Ux(l);R.state===Hx?(R.state=Jh,R.timer.stop(),R.on.call("interrupt",t,t.__data__,R.index,R.group),delete r[p]):+p<e&&(R.state=Jh,R.timer.stop(),R.on.call("cancel",t,t.__data__,R.index,R.group),delete r[p])}if(Ux(function(){n.state===Zh&&(n.state=Hx,n.timer.restart(c,n.delay,n.time),c(h))}),n.state=jy,n.on.call("start",t,t.__data__,n.index,n.group),n.state===jy){for(n.state=Zh,s=new Array(b=n.tween.length),p=0,v=-1;p<b;++p)(R=n.tween[p].value.call(t,t.__data__,n.index,n.group))&&(s[++v]=R);s.length=v+1}}function c(h){for(var p=h<n.duration?n.ease.call(null,h/n.duration):(n.timer.restart(f),n.state=zy,1),v=-1,b=s.length;++v<b;)s[v].call(t,p);n.state===zy&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=Jh,n.timer.stop(),delete r[e];for(var h in r)return;delete t.__transition}}function em(t,e){var n=t.__transition,r,s,o=!0,l;if(n){e=e==null?null:e+"";for(l in n){if((r=n[l]).name!==e){o=!1;continue}s=r.state>jy&&r.state<zy,r.state=Jh,r.timer.stop(),r.on.call(s?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[l]}o&&delete t.__transition}}function oP(t){return this.each(function(){em(this,t)})}function lP(t,e){var n,r;return function(){var s=$i(this,t),o=s.tween;if(o!==n){r=n=o;for(var l=0,c=r.length;l<c;++l)if(r[l].name===e){r=r.slice(),r.splice(l,1);break}}s.tween=r}}function uP(t,e,n){var r,s;if(typeof n!="function")throw new Error;return function(){var o=$i(this,t),l=o.tween;if(l!==r){s=(r=l).slice();for(var c={name:e,value:n},f=0,h=s.length;f<h;++f)if(s[f].name===e){s[f]=c;break}f===h&&s.push(c)}o.tween=s}}function cP(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=li(this.node(),n).tween,s=0,o=r.length,l;s<o;++s)if((l=r[s]).name===t)return l.value;return null}return this.each((e==null?lP:uP)(n,t,e))}function e_(t,e,n){var r=t._id;return t.each(function(){var s=$i(this,r);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return li(s,r).value[e]}}function i3(t,e){var n;return(typeof e=="number"?ia:e instanceof _d?Vx:(n=_d(e))?(e=n,Vx):qM)(t,e)}function dP(t){return function(){this.removeAttribute(t)}}function fP(t){return function(){this.removeAttributeNS(t.space,t.local)}}function hP(t,e,n){var r,s=n+"",o;return function(){var l=this.getAttribute(t);return l===s?null:l===r?o:o=e(r=l,n)}}function mP(t,e,n){var r,s=n+"",o;return function(){var l=this.getAttributeNS(t.space,t.local);return l===s?null:l===r?o:o=e(r=l,n)}}function pP(t,e,n){var r,s,o;return function(){var l,c=n(this),f;return c==null?void this.removeAttribute(t):(l=this.getAttribute(t),f=c+"",l===f?null:l===r&&f===s?o:(s=f,o=e(r=l,c)))}}function gP(t,e,n){var r,s,o;return function(){var l,c=n(this),f;return c==null?void this.removeAttributeNS(t.space,t.local):(l=this.getAttributeNS(t.space,t.local),f=c+"",l===f?null:l===r&&f===s?o:(s=f,o=e(r=l,c)))}}function yP(t,e){var n=tp(t),r=n==="transform"?XM:i3;return this.attrTween(t,typeof e=="function"?(n.local?gP:pP)(n,r,e_(this,"attr."+t,e)):e==null?(n.local?fP:dP)(n):(n.local?mP:hP)(n,r,e))}function vP(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function _P(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function bP(t,e){var n,r;function s(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&_P(t,o)),n}return s._value=e,s}function wP(t,e){var n,r;function s(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&vP(t,o)),n}return s._value=e,s}function EP(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=tp(t);return this.tween(n,(r.local?bP:wP)(r,e))}function xP(t,e){return function(){Jv(this,t).delay=+e.apply(this,arguments)}}function TP(t,e){return e=+e,function(){Jv(this,t).delay=e}}function SP(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?xP:TP)(e,t)):li(this.node(),e).delay}function AP(t,e){return function(){$i(this,t).duration=+e.apply(this,arguments)}}function CP(t,e){return e=+e,function(){$i(this,t).duration=e}}function kP(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?AP:CP)(e,t)):li(this.node(),e).duration}function RP(t,e){if(typeof e!="function")throw new Error;return function(){$i(this,t).ease=e}}function NP(t){var e=this._id;return arguments.length?this.each(RP(e,t)):li(this.node(),e).ease}function IP(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;$i(this,t).ease=n}}function DP(t){if(typeof t!="function")throw new Error;return this.each(IP(this._id,t))}function MP(t){typeof t!="function"&&(t=VA(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],l=o.length,c=r[s]=[],f,h=0;h<l;++h)(f=o[h])&&t.call(f,f.__data__,h,o)&&c.push(f);return new ws(r,this._parents,this._name,this._id)}function PP(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,s=n.length,o=Math.min(r,s),l=new Array(r),c=0;c<o;++c)for(var f=e[c],h=n[c],p=f.length,v=l[c]=new Array(p),b,R=0;R<p;++R)(b=f[R]||h[R])&&(v[R]=b);for(;c<r;++c)l[c]=e[c];return new ws(l,this._parents,this._name,this._id)}function OP(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function VP(t,e,n){var r,s,o=OP(e)?Jv:$i;return function(){var l=o(this,t),c=l.on;c!==r&&(s=(r=c).copy()).on(e,n),l.on=s}}function LP(t,e){var n=this._id;return arguments.length<2?li(this.node(),n).on.on(t):this.each(VP(n,t,e))}function jP(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function zP(){return this.on("end.remove",jP(this._id))}function UP(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Yv(t));for(var r=this._groups,s=r.length,o=new Array(s),l=0;l<s;++l)for(var c=r[l],f=c.length,h=o[l]=new Array(f),p,v,b=0;b<f;++b)(p=c[b])&&(v=t.call(p,p.__data__,b,c))&&("__data__"in p&&(v.__data__=p.__data__),h[b]=v,rp(h[b],e,n,b,h,li(p,n)));return new ws(o,this._parents,e,n)}function BP(t){var e=this._name,n=this._id;typeof t!="function"&&(t=OA(t));for(var r=this._groups,s=r.length,o=[],l=[],c=0;c<s;++c)for(var f=r[c],h=f.length,p,v=0;v<h;++v)if(p=f[v]){for(var b=t.call(p,p.__data__,v,f),R,M=li(p,n),O=0,L=b.length;O<L;++O)(R=b[O])&&rp(R,e,n,O,b,M);o.push(b),l.push(p)}return new ws(o,l,e,n)}var HP=Fd.prototype.constructor;function $P(){return new HP(this._groups,this._parents)}function FP(t,e){var n,r,s;return function(){var o=hu(this,t),l=(this.style.removeProperty(t),hu(this,t));return o===l?null:o===n&&l===r?s:s=e(n=o,r=l)}}function s3(t){return function(){this.style.removeProperty(t)}}function qP(t,e,n){var r,s=n+"",o;return function(){var l=hu(this,t);return l===s?null:l===r?o:o=e(r=l,n)}}function GP(t,e,n){var r,s,o;return function(){var l=hu(this,t),c=n(this),f=c+"";return c==null&&(f=c=(this.style.removeProperty(t),hu(this,t))),l===f?null:l===r&&f===s?o:(s=f,o=e(r=l,c))}}function KP(t,e){var n,r,s,o="style."+e,l="end."+o,c;return function(){var f=$i(this,t),h=f.on,p=f.value[o]==null?c||(c=s3(e)):void 0;(h!==n||s!==p)&&(r=(n=h).copy()).on(l,s=p),f.on=r}}function YP(t,e,n){var r=(t+="")=="transform"?YM:i3;return e==null?this.styleTween(t,FP(t,r)).on("end.style."+t,s3(t)):typeof e=="function"?this.styleTween(t,GP(t,r,e_(this,"style."+t,e))).each(KP(this._id,t)):this.styleTween(t,qP(t,r,e),n).on("end.style."+t,null)}function XP(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function WP(t,e,n){var r,s;function o(){var l=e.apply(this,arguments);return l!==s&&(r=(s=l)&&XP(t,l,n)),r}return o._value=e,o}function QP(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,WP(t,e,n??""))}function ZP(t){return function(){this.textContent=t}}function JP(t){return function(){var e=t(this);this.textContent=e??""}}function e6(t){return this.tween("text",typeof t=="function"?JP(e_(this,"text",t)):ZP(t==null?"":t+""))}function t6(t){return function(e){this.textContent=t.call(this,e)}}function n6(t){var e,n;function r(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&t6(s)),e}return r._value=t,r}function r6(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,n6(t))}function i6(){for(var t=this._name,e=this._id,n=a3(),r=this._groups,s=r.length,o=0;o<s;++o)for(var l=r[o],c=l.length,f,h=0;h<c;++h)if(f=l[h]){var p=li(f,e);rp(f,t,n,h,l,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new ws(r,this._parents,t,n)}function s6(){var t,e,n=this,r=n._id,s=n.size();return new Promise(function(o,l){var c={value:l},f={value:function(){--s===0&&o()}};n.each(function(){var h=$i(this,r),p=h.on;p!==t&&(e=(t=p).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(f)),h.on=e}),s===0&&o()})}var a6=0;function ws(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function a3(){return++a6}var ps=Fd.prototype;ws.prototype={constructor:ws,select:UP,selectAll:BP,selectChild:ps.selectChild,selectChildren:ps.selectChildren,filter:MP,merge:PP,selection:$P,transition:i6,call:ps.call,nodes:ps.nodes,node:ps.node,size:ps.size,empty:ps.empty,each:ps.each,on:LP,attr:yP,attrTween:EP,style:YP,styleTween:QP,text:e6,textTween:r6,remove:zP,tween:cP,delay:SP,duration:kP,ease:NP,easeVarying:DP,end:s6,[Symbol.iterator]:ps[Symbol.iterator]};function o6(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var l6={time:null,delay:0,duration:250,ease:o6};function u6(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function c6(t){var e,n;t instanceof ws?(e=t._id,t=t._name):(e=a3(),(n=l6).time=Zv(),t=t==null?null:t+"");for(var r=this._groups,s=r.length,o=0;o<s;++o)for(var l=r[o],c=l.length,f,h=0;h<c;++h)(f=l[h])&&rp(f,t,e,h,l,n||u6(f,e));return new ws(r,this._parents,t,e)}Fd.prototype.interrupt=oP;Fd.prototype.transition=c6;const Mh=t=>()=>t;function d6(t,{sourceEvent:e,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function ys(t,e,n){this.k=t,this.x=e,this.y=n}ys.prototype={constructor:ys,scale:function(t){return t===1?this:new ys(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ys(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ma=new ys(1,0,0);ys.prototype;function K0(t){t.stopImmediatePropagation()}function jc(t){t.preventDefault(),t.stopImmediatePropagation()}function f6(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function h6(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function $x(){return this.__zoom||ma}function m6(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function p6(){return navigator.maxTouchPoints||"ontouchstart"in this}function g6(t,e,n){var r=t.invertX(e[0][0])-n[0][0],s=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],l=t.invertY(e[1][1])-n[1][1];return t.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),l>o?(o+l)/2:Math.min(0,o)||Math.max(0,l))}function y6(){var t=f6,e=h6,n=g6,r=m6,s=p6,o=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,f=JM,h=ep("start","zoom","end"),p,v,b,R=500,M=150,O=0,L=10;function j(U){U.property("__zoom",$x).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",C).filter(s).on("touchstart.zoom",D).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",V).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}j.transform=function(U,Q,k,F){var G=U.selection?U.selection():U;G.property("__zoom",$x),U!==G?E(U,Q,k,F):G.interrupt().each(function(){w(this,arguments).event(F).start().zoom(null,typeof Q=="function"?Q.apply(this,arguments):Q).end()})},j.scaleBy=function(U,Q,k,F){j.scaleTo(U,function(){var G=this.__zoom.k,X=typeof Q=="function"?Q.apply(this,arguments):Q;return G*X},k,F)},j.scaleTo=function(U,Q,k,F){j.transform(U,function(){var G=e.apply(this,arguments),X=this.__zoom,z=k==null?y(G):typeof k=="function"?k.apply(this,arguments):k,W=X.invert(z),ne=typeof Q=="function"?Q.apply(this,arguments):Q;return n(Y($(X,ne),z,W),G,l)},k,F)},j.translateBy=function(U,Q,k,F){j.transform(U,function(){return n(this.__zoom.translate(typeof Q=="function"?Q.apply(this,arguments):Q,typeof k=="function"?k.apply(this,arguments):k),e.apply(this,arguments),l)},null,F)},j.translateTo=function(U,Q,k,F,G){j.transform(U,function(){var X=e.apply(this,arguments),z=this.__zoom,W=F==null?y(X):typeof F=="function"?F.apply(this,arguments):F;return n(ma.translate(W[0],W[1]).scale(z.k).translate(typeof Q=="function"?-Q.apply(this,arguments):-Q,typeof k=="function"?-k.apply(this,arguments):-k),X,l)},F,G)};function $(U,Q){return Q=Math.max(o[0],Math.min(o[1],Q)),Q===U.k?U:new ys(Q,U.x,U.y)}function Y(U,Q,k){var F=Q[0]-k[0]*U.k,G=Q[1]-k[1]*U.k;return F===U.x&&G===U.y?U:new ys(U.k,F,G)}function y(U){return[(+U[0][0]+ +U[1][0])/2,(+U[0][1]+ +U[1][1])/2]}function E(U,Q,k,F){U.on("start.zoom",function(){w(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).event(F).end()}).tween("zoom",function(){var G=this,X=arguments,z=w(G,X).event(F),W=e.apply(G,X),ne=k==null?y(W):typeof k=="function"?k.apply(G,X):k,J=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),ee=G.__zoom,ae=typeof Q=="function"?Q.apply(G,X):Q,le=f(ee.invert(ne).concat(J/ee.k),ae.invert(ne).concat(J/ae.k));return function(fe){if(fe===1)fe=ae;else{var he=le(fe),Ee=J/he[2];fe=new ys(Ee,ne[0]-he[0]*Ee,ne[1]-he[1]*Ee)}z.zoom(null,fe)}})}function w(U,Q,k){return!k&&U.__zooming||new x(U,Q)}function x(U,Q){this.that=U,this.args=Q,this.active=0,this.sourceEvent=null,this.extent=e.apply(U,Q),this.taps=0}x.prototype={event:function(U){return U&&(this.sourceEvent=U),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(U,Q){return this.mouse&&U!=="mouse"&&(this.mouse[1]=Q.invert(this.mouse[0])),this.touch0&&U!=="touch"&&(this.touch0[1]=Q.invert(this.touch0[0])),this.touch1&&U!=="touch"&&(this.touch1[1]=Q.invert(this.touch1[0])),this.that.__zoom=Q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(U){var Q=ti(this.that).datum();h.call(U,this.that,new d6(U,{sourceEvent:this.sourceEvent,target:j,transform:this.that.__zoom,dispatch:h}),Q)}};function S(U,...Q){if(!t.apply(this,arguments))return;var k=w(this,Q).event(U),F=this.__zoom,G=Math.max(o[0],Math.min(o[1],F.k*Math.pow(2,r.apply(this,arguments)))),X=Ni(U);if(k.wheel)(k.mouse[0][0]!==X[0]||k.mouse[0][1]!==X[1])&&(k.mouse[1]=F.invert(k.mouse[0]=X)),clearTimeout(k.wheel);else{if(F.k===G)return;k.mouse=[X,F.invert(X)],em(this),k.start()}jc(U),k.wheel=setTimeout(z,M),k.zoom("mouse",n(Y($(F,G),k.mouse[0],k.mouse[1]),k.extent,l));function z(){k.wheel=null,k.end()}}function N(U,...Q){if(b||!t.apply(this,arguments))return;var k=U.currentTarget,F=w(this,Q,!0).event(U),G=ti(U.view).on("mousemove.zoom",ne,!0).on("mouseup.zoom",J,!0),X=Ni(U,k),z=U.clientX,W=U.clientY;GA(U.view),K0(U),F.mouse=[X,this.__zoom.invert(X)],em(this),F.start();function ne(ee){if(jc(ee),!F.moved){var ae=ee.clientX-z,le=ee.clientY-W;F.moved=ae*ae+le*le>O}F.event(ee).zoom("mouse",n(Y(F.that.__zoom,F.mouse[0]=Ni(ee,k),F.mouse[1]),F.extent,l))}function J(ee){G.on("mousemove.zoom mouseup.zoom",null),KA(ee.view,F.moved),jc(ee),F.event(ee).end()}}function C(U,...Q){if(t.apply(this,arguments)){var k=this.__zoom,F=Ni(U.changedTouches?U.changedTouches[0]:U,this),G=k.invert(F),X=k.k*(U.shiftKey?.5:2),z=n(Y($(k,X),F,G),e.apply(this,Q),l);jc(U),c>0?ti(this).transition().duration(c).call(E,z,F,U):ti(this).call(j.transform,z,F,U)}}function D(U,...Q){if(t.apply(this,arguments)){var k=U.touches,F=k.length,G=w(this,Q,U.changedTouches.length===F).event(U),X,z,W,ne;for(K0(U),z=0;z<F;++z)W=k[z],ne=Ni(W,this),ne=[ne,this.__zoom.invert(ne),W.identifier],G.touch0?!G.touch1&&G.touch0[2]!==ne[2]&&(G.touch1=ne,G.taps=0):(G.touch0=ne,X=!0,G.taps=1+!!p);p&&(p=clearTimeout(p)),X&&(G.taps<2&&(v=ne[0],p=setTimeout(function(){p=null},R)),em(this),G.start())}}function H(U,...Q){if(this.__zooming){var k=w(this,Q).event(U),F=U.changedTouches,G=F.length,X,z,W,ne;for(jc(U),X=0;X<G;++X)z=F[X],W=Ni(z,this),k.touch0&&k.touch0[2]===z.identifier?k.touch0[0]=W:k.touch1&&k.touch1[2]===z.identifier&&(k.touch1[0]=W);if(z=k.that.__zoom,k.touch1){var J=k.touch0[0],ee=k.touch0[1],ae=k.touch1[0],le=k.touch1[1],fe=(fe=ae[0]-J[0])*fe+(fe=ae[1]-J[1])*fe,he=(he=le[0]-ee[0])*he+(he=le[1]-ee[1])*he;z=$(z,Math.sqrt(fe/he)),W=[(J[0]+ae[0])/2,(J[1]+ae[1])/2],ne=[(ee[0]+le[0])/2,(ee[1]+le[1])/2]}else if(k.touch0)W=k.touch0[0],ne=k.touch0[1];else return;k.zoom("touch",n(Y(z,W,ne),k.extent,l))}}function V(U,...Q){if(this.__zooming){var k=w(this,Q).event(U),F=U.changedTouches,G=F.length,X,z;for(K0(U),b&&clearTimeout(b),b=setTimeout(function(){b=null},R),X=0;X<G;++X)z=F[X],k.touch0&&k.touch0[2]===z.identifier?delete k.touch0:k.touch1&&k.touch1[2]===z.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&(z=Ni(z,this),Math.hypot(v[0]-z[0],v[1]-z[1])<L)){var W=ti(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return j.wheelDelta=function(U){return arguments.length?(r=typeof U=="function"?U:Mh(+U),j):r},j.filter=function(U){return arguments.length?(t=typeof U=="function"?U:Mh(!!U),j):t},j.touchable=function(U){return arguments.length?(s=typeof U=="function"?U:Mh(!!U),j):s},j.extent=function(U){return arguments.length?(e=typeof U=="function"?U:Mh([[+U[0][0],+U[0][1]],[+U[1][0],+U[1][1]]]),j):e},j.scaleExtent=function(U){return arguments.length?(o[0]=+U[0],o[1]=+U[1],j):[o[0],o[1]]},j.translateExtent=function(U){return arguments.length?(l[0][0]=+U[0][0],l[1][0]=+U[1][0],l[0][1]=+U[0][1],l[1][1]=+U[1][1],j):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},j.constrain=function(U){return arguments.length?(n=U,j):n},j.duration=function(U){return arguments.length?(c=+U,j):c},j.interpolate=function(U){return arguments.length?(f=U,j):f},j.on=function(){var U=h.on.apply(h,arguments);return U===h?j:U},j.clickDistance=function(U){return arguments.length?(O=(U=+U)*U,j):Math.sqrt(O)},j.tapDistance=function(U){return arguments.length?(L=+U,j):L},j}var v6=DA();const ip=B.createContext(null),_6=ip.Provider,Es={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},o3=Es.error001();function Rt(t,e){const n=B.useContext(ip);if(n===null)throw new Error(o3);return MA(n,t,e)}const pn=()=>{const t=B.useContext(ip);if(t===null)throw new Error(o3);return B.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},b6=t=>t.userSelectionActive?"none":"all";function l3({position:t,children:e,className:n,style:r,...s}){const o=Rt(b6),l=`${t}`.split("-");return pe.createElement("div",{className:Gn(["react-flow__panel",n,...l]),style:{...r,pointerEvents:o},...s},e)}function w6({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:pe.createElement(l3,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},pe.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const E6=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:o={},labelBgPadding:l=[2,4],labelBgBorderRadius:c=2,children:f,className:h,...p})=>{const v=B.useRef(null),[b,R]=B.useState({x:0,y:0,width:0,height:0}),M=Gn(["react-flow__edge-textwrapper",h]);return B.useEffect(()=>{if(v.current){const O=v.current.getBBox();R({x:O.x,y:O.y,width:O.width,height:O.height})}},[n]),typeof n>"u"||!n?null:pe.createElement("g",{transform:`translate(${t-b.width/2} ${e-b.height/2})`,className:M,visibility:b.width?"visible":"hidden",...p},s&&pe.createElement("rect",{width:b.width+2*l[0],x:-l[0],y:-l[1],height:b.height+2*l[1],className:"react-flow__edge-textbg",style:o,rx:c,ry:c}),pe.createElement("text",{className:"react-flow__edge-text",y:b.height/2,dy:"0.3em",ref:v,style:r},n),f)};var x6=B.memo(E6);const t_=t=>({width:t.offsetWidth,height:t.offsetHeight}),pu=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),n_=(t={x:0,y:0},e)=>({x:pu(t.x,e[0][0],e[1][0]),y:pu(t.y,e[0][1],e[1][1])}),Fx=(t,e,n)=>t<e?pu(Math.abs(t-e),1,50)/50:t>n?-pu(Math.abs(t-n),1,50)/50:0,u3=(t,e)=>{const n=Fx(t.x,35,e.width-35)*20,r=Fx(t.y,35,e.height-35)*20;return[n,r]},c3=t=>t.getRootNode?.()||window?.document,T6=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),r_=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),S6=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),qx=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),Uy=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},A6=t=>Hr(t.width)&&Hr(t.height)&&Hr(t.x)&&Hr(t.y),Hr=t=>!isNaN(t)&&isFinite(t),Lt=Symbol.for("internals"),d3=["Enter"," ","Escape"],C6=(t,e)=>{},k6=t=>"nativeEvent"in t;function By(t){const n=(k6(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const f3=t=>"clientX"in t,pa=(t,e)=>{const n=f3(t),r=n?t.clientX:t.touches?.[0].clientX,s=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:s-(e?.top??0)}},Tm=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Gd=({id:t,path:e,labelX:n,labelY:r,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:v,markerStart:b,interactionWidth:R=20})=>pe.createElement(pe.Fragment,null,pe.createElement("path",{id:t,style:p,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:v,markerStart:b}),R&&pe.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:R,className:"react-flow__edge-interaction"}),s&&Hr(n)&&Hr(r)?pe.createElement(x6,{x:n,y:r,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h}):null);Gd.displayName="BaseEdge";function zc(t,e,n){return n===void 0?n:r=>{const s=e().edges.find(o=>o.id===t);s&&n(r,{...s})}}function h3({sourceX:t,sourceY:e,targetX:n,targetY:r}){const s=Math.abs(n-t)/2,o=n<t?n+s:n-s,l=Math.abs(r-e)/2,c=r<e?r+l:r-l;return[o,c,s,l]}function m3({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:s,sourceControlY:o,targetControlX:l,targetControlY:c}){const f=t*.125+s*.375+l*.375+n*.125,h=e*.125+o*.375+c*.375+r*.125,p=Math.abs(f-t),v=Math.abs(h-e);return[f,h,p,v]}var wa;(function(t){t.Strict="strict",t.Loose="loose"})(wa||(wa={}));var wo;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(wo||(wo={}));var wd;(function(t){t.Partial="partial",t.Full="full"})(wd||(wd={}));var aa;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(aa||(aa={}));var No;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(No||(No={}));var xe;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(xe||(xe={}));function Gx({pos:t,x1:e,y1:n,x2:r,y2:s}){return t===xe.Left||t===xe.Right?[.5*(e+r),n]:[e,.5*(n+s)]}function p3({sourceX:t,sourceY:e,sourcePosition:n=xe.Bottom,targetX:r,targetY:s,targetPosition:o=xe.Top}){const[l,c]=Gx({pos:n,x1:t,y1:e,x2:r,y2:s}),[f,h]=Gx({pos:o,x1:r,y1:s,x2:t,y2:e}),[p,v,b,R]=m3({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:l,sourceControlY:c,targetControlX:f,targetControlY:h});return[`M${t},${e} C${l},${c} ${f},${h} ${r},${s}`,p,v,b,R]}const i_=B.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=xe.Bottom,targetPosition:o=xe.Top,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:b,markerEnd:R,markerStart:M,interactionWidth:O})=>{const[L,j,$]=p3({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:o});return pe.createElement(Gd,{path:L,labelX:j,labelY:$,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:b,markerEnd:R,markerStart:M,interactionWidth:O})});i_.displayName="SimpleBezierEdge";const Kx={[xe.Left]:{x:-1,y:0},[xe.Right]:{x:1,y:0},[xe.Top]:{x:0,y:-1},[xe.Bottom]:{x:0,y:1}},R6=({source:t,sourcePosition:e=xe.Bottom,target:n})=>e===xe.Left||e===xe.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},Yx=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function N6({source:t,sourcePosition:e=xe.Bottom,target:n,targetPosition:r=xe.Top,center:s,offset:o}){const l=Kx[e],c=Kx[r],f={x:t.x+l.x*o,y:t.y+l.y*o},h={x:n.x+c.x*o,y:n.y+c.y*o},p=R6({source:f,sourcePosition:e,target:h}),v=p.x!==0?"x":"y",b=p[v];let R=[],M,O;const L={x:0,y:0},j={x:0,y:0},[$,Y,y,E]=h3({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(l[v]*c[v]===-1){M=s.x??$,O=s.y??Y;const x=[{x:M,y:f.y},{x:M,y:h.y}],S=[{x:f.x,y:O},{x:h.x,y:O}];l[v]===b?R=v==="x"?x:S:R=v==="x"?S:x}else{const x=[{x:f.x,y:h.y}],S=[{x:h.x,y:f.y}];if(v==="x"?R=l.x===b?S:x:R=l.y===b?x:S,e===r){const V=Math.abs(t[v]-n[v]);if(V<=o){const U=Math.min(o-1,o-V);l[v]===b?L[v]=(f[v]>t[v]?-1:1)*U:j[v]=(h[v]>n[v]?-1:1)*U}}if(e!==r){const V=v==="x"?"y":"x",U=l[v]===c[V],Q=f[V]>h[V],k=f[V]<h[V];(l[v]===1&&(!U&&Q||U&&k)||l[v]!==1&&(!U&&k||U&&Q))&&(R=v==="x"?x:S)}const N={x:f.x+L.x,y:f.y+L.y},C={x:h.x+j.x,y:h.y+j.y},D=Math.max(Math.abs(N.x-R[0].x),Math.abs(C.x-R[0].x)),H=Math.max(Math.abs(N.y-R[0].y),Math.abs(C.y-R[0].y));D>=H?(M=(N.x+C.x)/2,O=R[0].y):(M=R[0].x,O=(N.y+C.y)/2)}return[[t,{x:f.x+L.x,y:f.y+L.y},...R,{x:h.x+j.x,y:h.y+j.y},n],M,O,y,E]}function I6(t,e,n,r){const s=Math.min(Yx(t,e)/2,Yx(e,n)/2,r),{x:o,y:l}=e;if(t.x===o&&o===n.x||t.y===l&&l===n.y)return`L${o} ${l}`;if(t.y===l){const h=t.x<n.x?-1:1,p=t.y<n.y?1:-1;return`L ${o+s*h},${l}Q ${o},${l} ${o},${l+s*p}`}const c=t.x<n.x?1:-1,f=t.y<n.y?-1:1;return`L ${o},${l+s*f}Q ${o},${l} ${o+s*c},${l}`}function Hy({sourceX:t,sourceY:e,sourcePosition:n=xe.Bottom,targetX:r,targetY:s,targetPosition:o=xe.Top,borderRadius:l=5,centerX:c,centerY:f,offset:h=20}){const[p,v,b,R,M]=N6({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:s},targetPosition:o,center:{x:c,y:f},offset:h});return[p.reduce((L,j,$)=>{let Y="";return $>0&&$<p.length-1?Y=I6(p[$-1],j,p[$+1],l):Y=`${$===0?"M":"L"}${j.x} ${j.y}`,L+=Y,L},""),v,b,R,M]}const sp=B.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:p,sourcePosition:v=xe.Bottom,targetPosition:b=xe.Top,markerEnd:R,markerStart:M,pathOptions:O,interactionWidth:L})=>{const[j,$,Y]=Hy({sourceX:t,sourceY:e,sourcePosition:v,targetX:n,targetY:r,targetPosition:b,borderRadius:O?.borderRadius,offset:O?.offset});return pe.createElement(Gd,{path:j,labelX:$,labelY:Y,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:R,markerStart:M,interactionWidth:L})});sp.displayName="SmoothStepEdge";const s_=B.memo(t=>pe.createElement(sp,{...t,pathOptions:B.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));s_.displayName="StepEdge";function D6({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[s,o,l,c]=h3({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,s,o,l,c]}const a_=B.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:v,markerStart:b,interactionWidth:R})=>{const[M,O,L]=D6({sourceX:t,sourceY:e,targetX:n,targetY:r});return pe.createElement(Gd,{path:M,labelX:O,labelY:L,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:v,markerStart:b,interactionWidth:R})});a_.displayName="StraightEdge";function Ph(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function Xx({pos:t,x1:e,y1:n,x2:r,y2:s,c:o}){switch(t){case xe.Left:return[e-Ph(e-r,o),n];case xe.Right:return[e+Ph(r-e,o),n];case xe.Top:return[e,n-Ph(n-s,o)];case xe.Bottom:return[e,n+Ph(s-n,o)]}}function g3({sourceX:t,sourceY:e,sourcePosition:n=xe.Bottom,targetX:r,targetY:s,targetPosition:o=xe.Top,curvature:l=.25}){const[c,f]=Xx({pos:n,x1:t,y1:e,x2:r,y2:s,c:l}),[h,p]=Xx({pos:o,x1:r,y1:s,x2:t,y2:e,c:l}),[v,b,R,M]=m3({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:c,sourceControlY:f,targetControlX:h,targetControlY:p});return[`M${t},${e} C${c},${f} ${h},${p} ${r},${s}`,v,b,R,M]}const Sm=B.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=xe.Bottom,targetPosition:o=xe.Top,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:b,markerEnd:R,markerStart:M,pathOptions:O,interactionWidth:L})=>{const[j,$,Y]=g3({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:o,curvature:O?.curvature});return pe.createElement(Gd,{path:j,labelX:$,labelY:Y,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:b,markerEnd:R,markerStart:M,interactionWidth:L})});Sm.displayName="BezierEdge";const o_=B.createContext(null),M6=o_.Provider;o_.Consumer;const P6=()=>B.useContext(o_),O6=t=>"id"in t&&"source"in t&&"target"in t,V6=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,$y=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,L6=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),j6=(t,e)=>{if(!t.source||!t.target)return e;let n;return O6(t)?n={...t}:n={...t,id:V6(t)},L6(n,e)?e:e.concat(n)},Fy=({x:t,y:e},[n,r,s],o,[l,c])=>{const f={x:(t-n)/s,y:(e-r)/s};return o?{x:l*Math.round(f.x/l),y:c*Math.round(f.y/c)}:f},y3=({x:t,y:e},[n,r,s])=>({x:t*s+n,y:e*s+r}),su=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],s={x:t.position.x-n,y:t.position.y-r};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:s}},l_=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,s)=>{const{x:o,y:l}=su(s,e).positionAbsolute;return T6(r,r_({x:o,y:l,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return S6(n)},v3=(t,e,[n,r,s]=[0,0,1],o=!1,l=!1,c=[0,0])=>{const f={x:(e.x-n)/s,y:(e.y-r)/s,width:e.width/s,height:e.height/s},h=[];return t.forEach(p=>{const{width:v,height:b,selectable:R=!0,hidden:M=!1}=p;if(l&&!R||M)return!1;const{positionAbsolute:O}=su(p,c),L={x:O.x,y:O.y,width:v||0,height:b||0},j=Uy(f,L),$=typeof v>"u"||typeof b>"u"||v===null||b===null,Y=o&&j>0,y=(v||0)*(b||0);($||Y||j>=y||p.dragging)&&h.push(p)}),h},_3=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},b3=(t,e,n,r,s,o=.1)=>{const l=e/(t.width*(1+o)),c=n/(t.height*(1+o)),f=Math.min(l,c),h=pu(f,r,s),p=t.x+t.width/2,v=t.y+t.height/2,b=e/2-p*h,R=n/2-v*h;return{x:b,y:R,zoom:h}},go=(t,e=0)=>t.transition().duration(e);function Wx(t,e,n,r){return(e[n]||[]).reduce((s,o)=>(`${t.id}-${o.id}-${n}`!==r&&s.push({id:o.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+o.x+o.width/2,y:(t.positionAbsolute?.y??0)+o.y+o.height/2}),s),[])}function z6(t,e,n,r,s,o){const{x:l,y:c}=pa(t),h=e.elementsFromPoint(l,c).find(M=>M.classList.contains("react-flow__handle"));if(h){const M=h.getAttribute("data-nodeid");if(M){const O=u_(void 0,h),L=h.getAttribute("data-handleid"),j=o({nodeId:M,id:L,type:O});if(j){const $=s.find(Y=>Y.nodeId===M&&Y.type===O&&Y.id===L);return{handle:{id:L,type:O,nodeId:M,x:$?.x||n.x,y:$?.y||n.y},validHandleResult:j}}}}let p=[],v=1/0;if(s.forEach(M=>{const O=Math.sqrt((M.x-n.x)**2+(M.y-n.y)**2);if(O<=r){const L=o(M);O<=v&&(O<v?p=[{handle:M,validHandleResult:L}]:O===v&&p.push({handle:M,validHandleResult:L}),v=O)}}),!p.length)return{handle:null,validHandleResult:w3()};if(p.length===1)return p[0];const b=p.some(({validHandleResult:M})=>M.isValid),R=p.some(({handle:M})=>M.type==="target");return p.find(({handle:M,validHandleResult:O})=>R?M.type==="target":b?O.isValid:!0)||p[0]}const U6={source:null,target:null,sourceHandle:null,targetHandle:null},w3=()=>({handleDomNode:null,isValid:!1,connection:U6,endHandle:null});function E3(t,e,n,r,s,o,l){const c=s==="target",f=l.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),h={...w3(),handleDomNode:f};if(f){const p=u_(void 0,f),v=f.getAttribute("data-nodeid"),b=f.getAttribute("data-handleid"),R=f.classList.contains("connectable"),M=f.classList.contains("connectableend"),O={source:c?v:n,sourceHandle:c?b:r,target:c?n:v,targetHandle:c?r:b};h.connection=O,R&&M&&(e===wa.Strict?c&&p==="source"||!c&&p==="target":v!==n||b!==r)&&(h.endHandle={nodeId:v,handleId:b,type:p},h.isValid=o(O))}return h}function B6({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((s,o)=>{if(o[Lt]){const{handleBounds:l}=o[Lt];let c=[],f=[];l&&(c=Wx(o,l,"source",`${e}-${n}-${r}`),f=Wx(o,l,"target",`${e}-${n}-${r}`)),s.push(...c,...f)}return s},[])}function u_(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function Y0(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function H6(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function x3({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:s,getState:o,setState:l,isValidConnection:c,edgeUpdaterType:f,onReconnectEnd:h}){const p=c3(t.target),{connectionMode:v,domNode:b,autoPanOnConnect:R,connectionRadius:M,onConnectStart:O,panBy:L,getNodes:j,cancelConnection:$}=o();let Y=0,y;const{x:E,y:w}=pa(t),x=p?.elementFromPoint(E,w),S=u_(f,x),N=b?.getBoundingClientRect();if(!N||!S)return;let C,D=pa(t,N),H=!1,V=null,U=!1,Q=null;const k=B6({nodes:j(),nodeId:n,handleId:e,handleType:S}),F=()=>{if(!R)return;const[z,W]=u3(D,N);L({x:z,y:W}),Y=requestAnimationFrame(F)};l({connectionPosition:D,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:S,connectionStartHandle:{nodeId:n,handleId:e,type:S},connectionEndHandle:null}),O?.(t,{nodeId:n,handleId:e,handleType:S});function G(z){const{transform:W}=o();D=pa(z,N);const{handle:ne,validHandleResult:J}=z6(z,p,Fy(D,W,!1,[1,1]),M,k,ee=>E3(ee,v,n,e,s?"target":"source",c,p));if(y=ne,H||(F(),H=!0),Q=J.handleDomNode,V=J.connection,U=J.isValid,l({connectionPosition:y&&U?y3({x:y.x,y:y.y},W):D,connectionStatus:H6(!!y,U),connectionEndHandle:J.endHandle}),!y&&!U&&!Q)return Y0(C);V.source!==V.target&&Q&&(Y0(C),C=Q,Q.classList.add("connecting","react-flow__handle-connecting"),Q.classList.toggle("valid",U),Q.classList.toggle("react-flow__handle-valid",U))}function X(z){(y||Q)&&V&&U&&r?.(V),o().onConnectEnd?.(z),f&&h?.(z),Y0(C),$(),cancelAnimationFrame(Y),H=!1,U=!1,V=null,Q=null,p.removeEventListener("mousemove",G),p.removeEventListener("mouseup",X),p.removeEventListener("touchmove",G),p.removeEventListener("touchend",X)}p.addEventListener("mousemove",G),p.addEventListener("mouseup",X),p.addEventListener("touchmove",G),p.addEventListener("touchend",X)}const Qx=()=>!0,$6=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),F6=(t,e,n)=>r=>{const{connectionStartHandle:s,connectionEndHandle:o,connectionClickStartHandle:l}=r;return{connecting:s?.nodeId===t&&s?.handleId===e&&s?.type===n||o?.nodeId===t&&o?.handleId===e&&o?.type===n,clickConnecting:l?.nodeId===t&&l?.handleId===e&&l?.type===n}},T3=B.forwardRef(({type:t="source",position:e=xe.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:o=!0,id:l,onConnect:c,children:f,className:h,onMouseDown:p,onTouchStart:v,...b},R)=>{const M=l||null,O=t==="target",L=pn(),j=P6(),{connectOnClick:$,noPanClassName:Y}=Rt($6,Mn),{connecting:y,clickConnecting:E}=Rt(F6(j,M,t),Mn);j||L.getState().onError?.("010",Es.error010());const w=N=>{const{defaultEdgeOptions:C,onConnect:D,hasDefaultEdges:H}=L.getState(),V={...C,...N};if(H){const{edges:U,setEdges:Q}=L.getState();Q(j6(V,U))}D?.(V),c?.(V)},x=N=>{if(!j)return;const C=f3(N);s&&(C&&N.button===0||!C)&&x3({event:N,handleId:M,nodeId:j,onConnect:w,isTarget:O,getState:L.getState,setState:L.setState,isValidConnection:n||L.getState().isValidConnection||Qx}),C?p?.(N):v?.(N)},S=N=>{const{onClickConnectStart:C,onClickConnectEnd:D,connectionClickStartHandle:H,connectionMode:V,isValidConnection:U}=L.getState();if(!j||!H&&!s)return;if(!H){C?.(N,{nodeId:j,handleId:M,handleType:t}),L.setState({connectionClickStartHandle:{nodeId:j,type:t,handleId:M}});return}const Q=c3(N.target),k=n||U||Qx,{connection:F,isValid:G}=E3({nodeId:j,id:M,type:t},V,H.nodeId,H.handleId||null,H.type,k,Q);G&&w(F),D?.(N),L.setState({connectionClickStartHandle:null})};return pe.createElement("div",{"data-handleid":M,"data-nodeid":j,"data-handlepos":e,"data-id":`${j}-${M}-${t}`,className:Gn(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",Y,h,{source:!O,target:O,connectable:r,connectablestart:s,connectableend:o,connecting:E,connectionindicator:r&&(s&&!y||o&&y)}]),onMouseDown:x,onTouchStart:x,onClick:$?S:void 0,ref:R,...b},f)});T3.displayName="Handle";var $n=B.memo(T3);const S3=({data:t,isConnectable:e,targetPosition:n=xe.Top,sourcePosition:r=xe.Bottom})=>pe.createElement(pe.Fragment,null,pe.createElement($n,{type:"target",position:n,isConnectable:e}),t?.label,pe.createElement($n,{type:"source",position:r,isConnectable:e}));S3.displayName="DefaultNode";var qy=B.memo(S3);const A3=({data:t,isConnectable:e,sourcePosition:n=xe.Bottom})=>pe.createElement(pe.Fragment,null,t?.label,pe.createElement($n,{type:"source",position:n,isConnectable:e}));A3.displayName="InputNode";var C3=B.memo(A3);const k3=({data:t,isConnectable:e,targetPosition:n=xe.Top})=>pe.createElement(pe.Fragment,null,pe.createElement($n,{type:"target",position:n,isConnectable:e}),t?.label);k3.displayName="OutputNode";var R3=B.memo(k3);const c_=()=>null;c_.displayName="GroupNode";const q6=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),Oh=t=>t.id;function G6(t,e){return Mn(t.selectedNodes.map(Oh),e.selectedNodes.map(Oh))&&Mn(t.selectedEdges.map(Oh),e.selectedEdges.map(Oh))}const N3=B.memo(({onSelectionChange:t})=>{const e=pn(),{selectedNodes:n,selectedEdges:r}=Rt(q6,G6);return B.useEffect(()=>{const s={nodes:n,edges:r};t?.(s),e.getState().onSelectionChange.forEach(o=>o(s))},[n,r,t]),null});N3.displayName="SelectionListener";const K6=t=>!!t.onSelectionChange;function Y6({onSelectionChange:t}){const e=Rt(K6);return t||e?pe.createElement(N3,{onSelectionChange:t}):null}const X6=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function Ll(t,e){B.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function Ke(t,e,n){B.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const W6=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:s,onConnectStart:o,onConnectEnd:l,onClickConnectStart:c,onClickConnectEnd:f,nodesDraggable:h,nodesConnectable:p,nodesFocusable:v,edgesFocusable:b,edgesUpdatable:R,elevateNodesOnSelect:M,minZoom:O,maxZoom:L,nodeExtent:j,onNodesChange:$,onEdgesChange:Y,elementsSelectable:y,connectionMode:E,snapGrid:w,snapToGrid:x,translateExtent:S,connectOnClick:N,defaultEdgeOptions:C,fitView:D,fitViewOptions:H,onNodesDelete:V,onEdgesDelete:U,onNodeDrag:Q,onNodeDragStart:k,onNodeDragStop:F,onSelectionDrag:G,onSelectionDragStart:X,onSelectionDragStop:z,noPanClassName:W,nodeOrigin:ne,rfId:J,autoPanOnConnect:ee,autoPanOnNodeDrag:ae,onError:le,connectionRadius:fe,isValidConnection:he,nodeDragThreshold:Ee})=>{const{setNodes:Ae,setEdges:$e,setDefaultNodesAndEdges:Ye,setMinZoom:Ve,setMaxZoom:st,setTranslateExtent:at,setNodeExtent:jt,reset:Le}=Rt(X6,Mn),we=pn();return B.useEffect(()=>{const Xe=r?.map(An=>({...An,...C}));return Ye(n,Xe),()=>{Le()}},[]),Ke("defaultEdgeOptions",C,we.setState),Ke("connectionMode",E,we.setState),Ke("onConnect",s,we.setState),Ke("onConnectStart",o,we.setState),Ke("onConnectEnd",l,we.setState),Ke("onClickConnectStart",c,we.setState),Ke("onClickConnectEnd",f,we.setState),Ke("nodesDraggable",h,we.setState),Ke("nodesConnectable",p,we.setState),Ke("nodesFocusable",v,we.setState),Ke("edgesFocusable",b,we.setState),Ke("edgesUpdatable",R,we.setState),Ke("elementsSelectable",y,we.setState),Ke("elevateNodesOnSelect",M,we.setState),Ke("snapToGrid",x,we.setState),Ke("snapGrid",w,we.setState),Ke("onNodesChange",$,we.setState),Ke("onEdgesChange",Y,we.setState),Ke("connectOnClick",N,we.setState),Ke("fitViewOnInit",D,we.setState),Ke("fitViewOnInitOptions",H,we.setState),Ke("onNodesDelete",V,we.setState),Ke("onEdgesDelete",U,we.setState),Ke("onNodeDrag",Q,we.setState),Ke("onNodeDragStart",k,we.setState),Ke("onNodeDragStop",F,we.setState),Ke("onSelectionDrag",G,we.setState),Ke("onSelectionDragStart",X,we.setState),Ke("onSelectionDragStop",z,we.setState),Ke("noPanClassName",W,we.setState),Ke("nodeOrigin",ne,we.setState),Ke("rfId",J,we.setState),Ke("autoPanOnConnect",ee,we.setState),Ke("autoPanOnNodeDrag",ae,we.setState),Ke("onError",le,we.setState),Ke("connectionRadius",fe,we.setState),Ke("isValidConnection",he,we.setState),Ke("nodeDragThreshold",Ee,we.setState),Ll(t,Ae),Ll(e,$e),Ll(O,Ve),Ll(L,st),Ll(S,at),Ll(j,jt),null},Zx={display:"none"},Q6={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},I3="react-flow__node-desc",D3="react-flow__edge-desc",Z6="react-flow__aria-live",J6=t=>t.ariaLiveMessage;function e5({rfId:t}){const e=Rt(J6);return pe.createElement("div",{id:`${Z6}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:Q6},e)}function t5({rfId:t,disableKeyboardA11y:e}){return pe.createElement(pe.Fragment,null,pe.createElement("div",{id:`${I3}-${t}`,style:Zx},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),pe.createElement("div",{id:`${D3}-${t}`,style:Zx},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&pe.createElement(e5,{rfId:t}))}var Ed=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=B.useState(!1),s=B.useRef(!1),o=B.useRef(new Set([])),[l,c]=B.useMemo(()=>{if(t!==null){const h=(Array.isArray(t)?t:[t]).filter(v=>typeof v=="string").map(v=>v.split("+")),p=h.reduce((v,b)=>v.concat(...b),[]);return[h,p]}return[[],[]]},[t]);return B.useEffect(()=>{const f=typeof document<"u"?document:null,h=e?.target||f;if(t!==null){const p=R=>{if(s.current=R.ctrlKey||R.metaKey||R.shiftKey,(!s.current||s.current&&!e.actInsideInputWithModifier)&&By(R))return!1;const O=eT(R.code,c);o.current.add(R[O]),Jx(l,o.current,!1)&&(R.preventDefault(),r(!0))},v=R=>{if((!s.current||s.current&&!e.actInsideInputWithModifier)&&By(R))return!1;const O=eT(R.code,c);Jx(l,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(R[O]),R.key==="Meta"&&o.current.clear(),s.current=!1},b=()=>{o.current.clear(),r(!1)};return h?.addEventListener("keydown",p),h?.addEventListener("keyup",v),window.addEventListener("blur",b),()=>{h?.removeEventListener("keydown",p),h?.removeEventListener("keyup",v),window.removeEventListener("blur",b)}}},[t,r]),n};function Jx(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(s=>e.has(s)))}function eT(t,e){return e.includes(t)?"code":"key"}function M3(t,e,n,r){const s=t.parentNode||t.parentId;if(!s)return n;const o=e.get(s),l=su(o,r);return M3(o,e,{x:(n.x??0)+l.x,y:(n.y??0)+l.y,z:(o[Lt]?.z??0)>(n.z??0)?o[Lt]?.z??0:n.z??0},r)}function P3(t,e,n){t.forEach(r=>{const s=r.parentNode||r.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||n?.[r.id]){const{x:o,y:l,z:c}=M3(r,t,{...r.position,z:r[Lt]?.z??0},e);r.positionAbsolute={x:o,y:l},r[Lt].z=c,n?.[r.id]&&(r[Lt].isParent=!0)}})}function X0(t,e,n,r){const s=new Map,o={},l=r?1e3:0;return t.forEach(c=>{const f=(Hr(c.zIndex)?c.zIndex:0)+(c.selected?l:0),h=e.get(c.id),p={...c,positionAbsolute:{x:c.position.x,y:c.position.y}},v=c.parentNode||c.parentId;v&&(o[v]=!0);const b=h?.type&&h?.type!==c.type;Object.defineProperty(p,Lt,{enumerable:!1,value:{handleBounds:b?void 0:h?.[Lt]?.handleBounds,z:f}}),s.set(c.id,p)}),P3(s,n,o),s}function O3(t,e={}){const{getNodes:n,width:r,height:s,minZoom:o,maxZoom:l,d3Zoom:c,d3Selection:f,fitViewOnInitDone:h,fitViewOnInit:p,nodeOrigin:v}=t(),b=e.initial&&!h&&p;if(c&&f&&(b||!e.initial)){const M=n().filter(L=>{const j=e.includeHiddenNodes?L.width&&L.height:!L.hidden;return e.nodes?.length?j&&e.nodes.some($=>$.id===L.id):j}),O=M.every(L=>L.width&&L.height);if(M.length>0&&O){const L=l_(M,v),{x:j,y:$,zoom:Y}=b3(L,r,s,e.minZoom??o,e.maxZoom??l,e.padding??.1),y=ma.translate(j,$).scale(Y);return typeof e.duration=="number"&&e.duration>0?c.transform(go(f,e.duration),y):c.transform(f,y),!0}}return!1}function n5(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[Lt]:r[Lt],selected:n.selected})}),new Map(e)}function r5(t,e){return e.map(n=>{const r=t.find(s=>s.id===n.id);return r&&(n.selected=r.selected),n})}function Vh({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:s,edges:o,onNodesChange:l,onEdgesChange:c,hasDefaultNodes:f,hasDefaultEdges:h}=n();t?.length&&(f&&r({nodeInternals:n5(t,s)}),l?.(t)),e?.length&&(h&&r({edges:r5(e,o)}),c?.(e))}const jl=()=>{},i5={zoomIn:jl,zoomOut:jl,zoomTo:jl,getZoom:()=>1,setViewport:jl,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:jl,fitBounds:jl,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},s5=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),a5=()=>{const t=pn(),{d3Zoom:e,d3Selection:n}=Rt(s5,Mn);return B.useMemo(()=>n&&e?{zoomIn:s=>e.scaleBy(go(n,s?.duration),1.2),zoomOut:s=>e.scaleBy(go(n,s?.duration),1/1.2),zoomTo:(s,o)=>e.scaleTo(go(n,o?.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,o)=>{const[l,c,f]=t.getState().transform,h=ma.translate(s.x??l,s.y??c).scale(s.zoom??f);e.transform(go(n,o?.duration),h)},getViewport:()=>{const[s,o,l]=t.getState().transform;return{x:s,y:o,zoom:l}},fitView:s=>O3(t.getState,s),setCenter:(s,o,l)=>{const{width:c,height:f,maxZoom:h}=t.getState(),p=typeof l?.zoom<"u"?l.zoom:h,v=c/2-s*p,b=f/2-o*p,R=ma.translate(v,b).scale(p);e.transform(go(n,l?.duration),R)},fitBounds:(s,o)=>{const{width:l,height:c,minZoom:f,maxZoom:h}=t.getState(),{x:p,y:v,zoom:b}=b3(s,l,c,f,h,o?.padding??.1),R=ma.translate(p,v).scale(b);e.transform(go(n,o?.duration),R)},project:s=>{const{transform:o,snapToGrid:l,snapGrid:c}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Fy(s,o,l,c)},screenToFlowPosition:s=>{const{transform:o,snapToGrid:l,snapGrid:c,domNode:f}=t.getState();if(!f)return s;const{x:h,y:p}=f.getBoundingClientRect(),v={x:s.x-h,y:s.y-p};return Fy(v,o,l,c)},flowToScreenPosition:s=>{const{transform:o,domNode:l}=t.getState();if(!l)return s;const{x:c,y:f}=l.getBoundingClientRect(),h=y3(s,o);return{x:h.x+c,y:h.y+f}},viewportInitialized:!0}:i5,[e,n])};function Kd(){const t=a5(),e=pn(),n=B.useCallback(()=>e.getState().getNodes().map(O=>({...O})),[]),r=B.useCallback(O=>e.getState().nodeInternals.get(O),[]),s=B.useCallback(()=>{const{edges:O=[]}=e.getState();return O.map(L=>({...L}))},[]),o=B.useCallback(O=>{const{edges:L=[]}=e.getState();return L.find(j=>j.id===O)},[]),l=B.useCallback(O=>{const{getNodes:L,setNodes:j,hasDefaultNodes:$,onNodesChange:Y}=e.getState(),y=L(),E=typeof O=="function"?O(y):O;if($)j(E);else if(Y){const w=E.length===0?y.map(x=>({type:"remove",id:x.id})):E.map(x=>({item:x,type:"reset"}));Y(w)}},[]),c=B.useCallback(O=>{const{edges:L=[],setEdges:j,hasDefaultEdges:$,onEdgesChange:Y}=e.getState(),y=typeof O=="function"?O(L):O;if($)j(y);else if(Y){const E=y.length===0?L.map(w=>({type:"remove",id:w.id})):y.map(w=>({item:w,type:"reset"}));Y(E)}},[]),f=B.useCallback(O=>{const L=Array.isArray(O)?O:[O],{getNodes:j,setNodes:$,hasDefaultNodes:Y,onNodesChange:y}=e.getState();if(Y){const w=[...j(),...L];$(w)}else if(y){const E=L.map(w=>({item:w,type:"add"}));y(E)}},[]),h=B.useCallback(O=>{const L=Array.isArray(O)?O:[O],{edges:j=[],setEdges:$,hasDefaultEdges:Y,onEdgesChange:y}=e.getState();if(Y)$([...j,...L]);else if(y){const E=L.map(w=>({item:w,type:"add"}));y(E)}},[]),p=B.useCallback(()=>{const{getNodes:O,edges:L=[],transform:j}=e.getState(),[$,Y,y]=j;return{nodes:O().map(E=>({...E})),edges:L.map(E=>({...E})),viewport:{x:$,y:Y,zoom:y}}},[]),v=B.useCallback(({nodes:O,edges:L})=>{const{nodeInternals:j,getNodes:$,edges:Y,hasDefaultNodes:y,hasDefaultEdges:E,onNodesDelete:w,onEdgesDelete:x,onNodesChange:S,onEdgesChange:N}=e.getState(),C=(O||[]).map(Q=>Q.id),D=(L||[]).map(Q=>Q.id),H=$().reduce((Q,k)=>{const F=k.parentNode||k.parentId,G=!C.includes(k.id)&&F&&Q.find(z=>z.id===F);return(typeof k.deletable=="boolean"?k.deletable:!0)&&(C.includes(k.id)||G)&&Q.push(k),Q},[]),V=Y.filter(Q=>typeof Q.deletable=="boolean"?Q.deletable:!0),U=V.filter(Q=>D.includes(Q.id));if(H||U){const Q=_3(H,V),k=[...U,...Q],F=k.reduce((G,X)=>(G.includes(X.id)||G.push(X.id),G),[]);if((E||y)&&(E&&e.setState({edges:Y.filter(G=>!F.includes(G.id))}),y&&(H.forEach(G=>{j.delete(G.id)}),e.setState({nodeInternals:new Map(j)}))),F.length>0&&(x?.(k),N&&N(F.map(G=>({id:G,type:"remove"})))),H.length>0&&(w?.(H),S)){const G=H.map(X=>({id:X.id,type:"remove"}));S(G)}}},[]),b=B.useCallback(O=>{const L=A6(O),j=L?null:e.getState().nodeInternals.get(O.id);return!L&&!j?[null,null,L]:[L?O:qx(j),j,L]},[]),R=B.useCallback((O,L=!0,j)=>{const[$,Y,y]=b(O);return $?(j||e.getState().getNodes()).filter(E=>{if(!y&&(E.id===Y.id||!E.positionAbsolute))return!1;const w=qx(E),x=Uy(w,$);return L&&x>0||x>=$.width*$.height}):[]},[]),M=B.useCallback((O,L,j=!0)=>{const[$]=b(O);if(!$)return!1;const Y=Uy($,L);return j&&Y>0||Y>=$.width*$.height},[]);return B.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:s,getEdge:o,setNodes:l,setEdges:c,addNodes:f,addEdges:h,toObject:p,deleteElements:v,getIntersectingNodes:R,isNodeIntersecting:M}),[t,n,r,s,o,l,c,f,h,p,v,R,M])}const o5={actInsideInputWithModifier:!1};var l5=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=pn(),{deleteElements:r}=Kd(),s=Ed(t,o5),o=Ed(e);B.useEffect(()=>{if(s){const{edges:l,getNodes:c}=n.getState(),f=c().filter(p=>p.selected),h=l.filter(p=>p.selected);r({nodes:f,edges:h}),n.setState({nodesSelectionActive:!1})}},[s]),B.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])};function u5(t){const e=pn();B.useEffect(()=>{let n;const r=()=>{if(!t.current)return;const s=t_(t.current);(s.height===0||s.width===0)&&e.getState().onError?.("004",Es.error004()),e.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const d_={position:"absolute",width:"100%",height:"100%",top:0,left:0},c5=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Lh=t=>({x:t.x,y:t.y,zoom:t.k}),zl=(t,e)=>t.target.closest(`.${e}`),tT=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),nT=t=>{const e=t.ctrlKey&&Tm()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},d5=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),f5=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:o=!0,panOnScroll:l=!1,panOnScrollSpeed:c=.5,panOnScrollMode:f=wo.Free,zoomOnDoubleClick:h=!0,elementsSelectable:p,panOnDrag:v=!0,defaultViewport:b,translateExtent:R,minZoom:M,maxZoom:O,zoomActivationKeyCode:L,preventScrolling:j=!0,children:$,noWheelClassName:Y,noPanClassName:y})=>{const E=B.useRef(),w=pn(),x=B.useRef(!1),S=B.useRef(!1),N=B.useRef(null),C=B.useRef({x:0,y:0,zoom:0}),{d3Zoom:D,d3Selection:H,d3ZoomHandler:V,userSelectionActive:U}=Rt(d5,Mn),Q=Ed(L),k=B.useRef(0),F=B.useRef(!1),G=B.useRef();return u5(N),B.useEffect(()=>{if(N.current){const X=N.current.getBoundingClientRect(),z=y6().scaleExtent([M,O]).translateExtent(R),W=ti(N.current).call(z),ne=ma.translate(b.x,b.y).scale(pu(b.zoom,M,O)),J=[[0,0],[X.width,X.height]],ee=z.constrain()(ne,J,R);z.transform(W,ee),z.wheelDelta(nT),w.setState({d3Zoom:z,d3Selection:W,d3ZoomHandler:W.on("wheel.zoom"),transform:[ee.x,ee.y,ee.k],domNode:N.current.closest(".react-flow")})}},[]),B.useEffect(()=>{H&&D&&(l&&!Q&&!U?H.on("wheel.zoom",X=>{if(zl(X,Y))return!1;X.preventDefault(),X.stopImmediatePropagation();const z=H.property("__zoom").k||1;if(X.ctrlKey&&o){const he=Ni(X),Ee=nT(X),Ae=z*Math.pow(2,Ee);D.scaleTo(H,Ae,he,X);return}const W=X.deltaMode===1?20:1;let ne=f===wo.Vertical?0:X.deltaX*W,J=f===wo.Horizontal?0:X.deltaY*W;!Tm()&&X.shiftKey&&f!==wo.Vertical&&(ne=X.deltaY*W,J=0),D.translateBy(H,-(ne/z)*c,-(J/z)*c,{internal:!0});const ee=Lh(H.property("__zoom")),{onViewportChangeStart:ae,onViewportChange:le,onViewportChangeEnd:fe}=w.getState();clearTimeout(G.current),F.current||(F.current=!0,e?.(X,ee),ae?.(ee)),F.current&&(t?.(X,ee),le?.(ee),G.current=setTimeout(()=>{n?.(X,ee),fe?.(ee),F.current=!1},150))},{passive:!1}):typeof V<"u"&&H.on("wheel.zoom",function(X,z){if(!j&&X.type==="wheel"&&!X.ctrlKey||zl(X,Y))return null;X.preventDefault(),V.call(this,X,z)},{passive:!1}))},[U,l,f,H,D,V,Q,o,j,Y,e,t,n]),B.useEffect(()=>{D&&D.on("start",X=>{if(!X.sourceEvent||X.sourceEvent.internal)return null;k.current=X.sourceEvent?.button;const{onViewportChangeStart:z}=w.getState(),W=Lh(X.transform);x.current=!0,C.current=W,X.sourceEvent?.type==="mousedown"&&w.setState({paneDragging:!0}),z?.(W),e?.(X.sourceEvent,W)})},[D,e]),B.useEffect(()=>{D&&(U&&!x.current?D.on("zoom",null):U||D.on("zoom",X=>{const{onViewportChange:z}=w.getState();if(w.setState({transform:[X.transform.x,X.transform.y,X.transform.k]}),S.current=!!(r&&tT(v,k.current??0)),(t||z)&&!X.sourceEvent?.internal){const W=Lh(X.transform);z?.(W),t?.(X.sourceEvent,W)}}))},[U,D,t,v,r]),B.useEffect(()=>{D&&D.on("end",X=>{if(!X.sourceEvent||X.sourceEvent.internal)return null;const{onViewportChangeEnd:z}=w.getState();if(x.current=!1,w.setState({paneDragging:!1}),r&&tT(v,k.current??0)&&!S.current&&r(X.sourceEvent),S.current=!1,(n||z)&&c5(C.current,X.transform)){const W=Lh(X.transform);C.current=W,clearTimeout(E.current),E.current=setTimeout(()=>{z?.(W),n?.(X.sourceEvent,W)},l?150:0)}})},[D,l,v,n,r]),B.useEffect(()=>{D&&D.filter(X=>{const z=Q||s,W=o&&X.ctrlKey;if((v===!0||Array.isArray(v)&&v.includes(1))&&X.button===1&&X.type==="mousedown"&&(zl(X,"react-flow__node")||zl(X,"react-flow__edge")))return!0;if(!v&&!z&&!l&&!h&&!o||U||!h&&X.type==="dblclick"||zl(X,Y)&&X.type==="wheel"||zl(X,y)&&(X.type!=="wheel"||l&&X.type==="wheel"&&!Q)||!o&&X.ctrlKey&&X.type==="wheel"||!z&&!l&&!W&&X.type==="wheel"||!v&&(X.type==="mousedown"||X.type==="touchstart")||Array.isArray(v)&&!v.includes(X.button)&&X.type==="mousedown")return!1;const ne=Array.isArray(v)&&v.includes(X.button)||!X.button||X.button<=1;return(!X.ctrlKey||X.type==="wheel")&&ne})},[U,D,s,o,l,h,v,p,Q]),pe.createElement("div",{className:"react-flow__renderer",ref:N,style:d_},$)},h5=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function m5(){const{userSelectionActive:t,userSelectionRect:e}=Rt(h5,Mn);return t&&e?pe.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function rT(t,e){const n=e.parentNode||e.parentId,r=t.find(s=>s.id===n);if(r){const s=e.position.x+e.width-r.width,o=e.position.y+e.height-r.height;if(s>0||o>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,s>0&&(r.style.width+=s),o>0&&(r.style.height+=o),e.position.x<0){const l=Math.abs(e.position.x);r.position.x=r.position.x-l,r.style.width+=l,e.position.x=0}if(e.position.y<0){const l=Math.abs(e.position.y);r.position.y=r.position.y-l,r.style.height+=l,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function V3(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,s)=>{const o=t.filter(c=>c.id===s.id);if(o.length===0)return r.push(s),r;const l={...s};for(const c of o)if(c)switch(c.type){case"select":{l.selected=c.selected;break}case"position":{typeof c.position<"u"&&(l.position=c.position),typeof c.positionAbsolute<"u"&&(l.positionAbsolute=c.positionAbsolute),typeof c.dragging<"u"&&(l.dragging=c.dragging),l.expandParent&&rT(r,l);break}case"dimensions":{typeof c.dimensions<"u"&&(l.width=c.dimensions.width,l.height=c.dimensions.height),typeof c.updateStyle<"u"&&(l.style={...l.style||{},...c.dimensions}),typeof c.resizing=="boolean"&&(l.resizing=c.resizing),l.expandParent&&rT(r,l);break}case"remove":return r}return r.push(l),r},n)}function L3(t,e){return V3(t,e)}function p5(t,e){return V3(t,e)}const sa=(t,e)=>({id:t,type:"select",selected:e});function Xl(t,e){return t.reduce((n,r)=>{const s=e.includes(r.id);return!r.selected&&s?(r.selected=!0,n.push(sa(r.id,!0))):r.selected&&!s&&(r.selected=!1,n.push(sa(r.id,!1))),n},[])}const W0=(t,e)=>n=>{n.target===e.current&&t?.(n)},g5=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),j3=B.memo(({isSelecting:t,selectionMode:e=wd.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:s,onPaneClick:o,onPaneContextMenu:l,onPaneScroll:c,onPaneMouseEnter:f,onPaneMouseMove:h,onPaneMouseLeave:p,children:v})=>{const b=B.useRef(null),R=pn(),M=B.useRef(0),O=B.useRef(0),L=B.useRef(),{userSelectionActive:j,elementsSelectable:$,dragging:Y}=Rt(g5,Mn),y=()=>{R.setState({userSelectionActive:!1,userSelectionRect:null}),M.current=0,O.current=0},E=V=>{o?.(V),R.getState().resetSelectedElements(),R.setState({nodesSelectionActive:!1})},w=V=>{if(Array.isArray(n)&&n?.includes(2)){V.preventDefault();return}l?.(V)},x=c?V=>c(V):void 0,S=V=>{const{resetSelectedElements:U,domNode:Q}=R.getState();if(L.current=Q?.getBoundingClientRect(),!$||!t||V.button!==0||V.target!==b.current||!L.current)return;const{x:k,y:F}=pa(V,L.current);U(),R.setState({userSelectionRect:{width:0,height:0,startX:k,startY:F,x:k,y:F}}),r?.(V)},N=V=>{const{userSelectionRect:U,nodeInternals:Q,edges:k,transform:F,onNodesChange:G,onEdgesChange:X,nodeOrigin:z,getNodes:W}=R.getState();if(!t||!L.current||!U)return;R.setState({userSelectionActive:!0,nodesSelectionActive:!1});const ne=pa(V,L.current),J=U.startX??0,ee=U.startY??0,ae={...U,x:ne.x<J?ne.x:J,y:ne.y<ee?ne.y:ee,width:Math.abs(ne.x-J),height:Math.abs(ne.y-ee)},le=W(),fe=v3(Q,ae,F,e===wd.Partial,!0,z),he=_3(fe,k).map(Ae=>Ae.id),Ee=fe.map(Ae=>Ae.id);if(M.current!==Ee.length){M.current=Ee.length;const Ae=Xl(le,Ee);Ae.length&&G?.(Ae)}if(O.current!==he.length){O.current=he.length;const Ae=Xl(k,he);Ae.length&&X?.(Ae)}R.setState({userSelectionRect:ae})},C=V=>{if(V.button!==0)return;const{userSelectionRect:U}=R.getState();!j&&U&&V.target===b.current&&E?.(V),R.setState({nodesSelectionActive:M.current>0}),y(),s?.(V)},D=V=>{j&&(R.setState({nodesSelectionActive:M.current>0}),s?.(V)),y()},H=$&&(t||j);return pe.createElement("div",{className:Gn(["react-flow__pane",{dragging:Y,selection:t}]),onClick:H?void 0:W0(E,b),onContextMenu:W0(w,b),onWheel:W0(x,b),onMouseEnter:H?void 0:f,onMouseDown:H?S:void 0,onMouseMove:H?N:h,onMouseUp:H?C:void 0,onMouseLeave:H?D:p,ref:b,style:d_},v,pe.createElement(m5,null))});j3.displayName="Pane";function z3(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:z3(r,e):!1}function iT(t,e,n){let r=t;do{if(r?.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function y5(t,e,n,r){return Array.from(t.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||s.parentId||!z3(s,t))&&(s.draggable||e&&typeof s.draggable>"u")).map(s=>({id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(s.positionAbsolute?.x??0),y:n.y-(s.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}))}function v5(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function U3(t,e,n,r,s=[0,0],o){const l=v5(t,t.extent||r);let c=l;const f=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(f&&t.width&&t.height){const v=n.get(f),{x:b,y:R}=su(v,s).positionAbsolute;c=v&&Hr(b)&&Hr(R)&&Hr(v.width)&&Hr(v.height)?[[b+t.width*s[0],R+t.height*s[1]],[b+v.width-t.width+t.width*s[0],R+v.height-t.height+t.height*s[1]]]:c}else o?.("005",Es.error005()),c=l;else if(t.extent&&f&&t.extent!=="parent"){const v=n.get(f),{x:b,y:R}=su(v,s).positionAbsolute;c=[[t.extent[0][0]+b,t.extent[0][1]+R],[t.extent[1][0]+b,t.extent[1][1]+R]]}let h={x:0,y:0};if(f){const v=n.get(f);h=su(v,s).positionAbsolute}const p=c&&c!=="parent"?n_(e,c):e;return{position:{x:p.x-h.x,y:p.y-h.y},positionAbsolute:p}}function Q0({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?r.find(s=>s.id===t):r[0],r]}const sT=(t,e,n,r)=>{const s=e.querySelectorAll(t);if(!s||!s.length)return null;const o=Array.from(s),l=e.getBoundingClientRect(),c={x:l.width*r[0],y:l.height*r[1]};return o.map(f=>{const h=f.getBoundingClientRect();return{id:f.getAttribute("data-handleid"),position:f.getAttribute("data-handlepos"),x:(h.left-l.left-c.x)/n,y:(h.top-l.top-c.y)/n,...t_(f)}})};function Uc(t,e,n){return n===void 0?n:r=>{const s=e().nodeInternals.get(t);s&&n(r,{...s})}}function Gy({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:o,multiSelectionActive:l,nodeInternals:c,onError:f}=e.getState(),h=c.get(t);if(!h){f?.("012",Es.error012(t));return}e.setState({nodesSelectionActive:!1}),h.selected?(n||h.selected&&l)&&(o({nodes:[h],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):s([t])}function _5(){const t=pn();return B.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:s,snapToGrid:o}=t.getState(),l=n.touches?n.touches[0].clientX:n.clientX,c=n.touches?n.touches[0].clientY:n.clientY,f={x:(l-r[0])/r[2],y:(c-r[1])/r[2]};return{xSnapped:o?s[0]*Math.round(f.x/s[0]):f.x,ySnapped:o?s[1]*Math.round(f.y/s[1]):f.y,...f}},[])}function Z0(t){return(e,n,r)=>t?.(e,r)}function B3({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:o,selectNodesOnDrag:l}){const c=pn(),[f,h]=B.useState(!1),p=B.useRef([]),v=B.useRef({x:null,y:null}),b=B.useRef(0),R=B.useRef(null),M=B.useRef({x:0,y:0}),O=B.useRef(null),L=B.useRef(!1),j=B.useRef(!1),$=B.useRef(!1),Y=_5();return B.useEffect(()=>{if(t?.current){const y=ti(t.current),E=({x:S,y:N})=>{const{nodeInternals:C,onNodeDrag:D,onSelectionDrag:H,updateNodePositions:V,nodeExtent:U,snapGrid:Q,snapToGrid:k,nodeOrigin:F,onError:G}=c.getState();v.current={x:S,y:N};let X=!1,z={x:0,y:0,x2:0,y2:0};if(p.current.length>1&&U){const ne=l_(p.current,F);z=r_(ne)}if(p.current=p.current.map(ne=>{const J={x:S-ne.distance.x,y:N-ne.distance.y};k&&(J.x=Q[0]*Math.round(J.x/Q[0]),J.y=Q[1]*Math.round(J.y/Q[1]));const ee=[[U[0][0],U[0][1]],[U[1][0],U[1][1]]];p.current.length>1&&U&&!ne.extent&&(ee[0][0]=ne.positionAbsolute.x-z.x+U[0][0],ee[1][0]=ne.positionAbsolute.x+(ne.width??0)-z.x2+U[1][0],ee[0][1]=ne.positionAbsolute.y-z.y+U[0][1],ee[1][1]=ne.positionAbsolute.y+(ne.height??0)-z.y2+U[1][1]);const ae=U3(ne,J,C,ee,F,G);return X=X||ne.position.x!==ae.position.x||ne.position.y!==ae.position.y,ne.position=ae.position,ne.positionAbsolute=ae.positionAbsolute,ne}),!X)return;V(p.current,!0,!0),h(!0);const W=s?D:Z0(H);if(W&&O.current){const[ne,J]=Q0({nodeId:s,dragItems:p.current,nodeInternals:C});W(O.current,ne,J)}},w=()=>{if(!R.current)return;const[S,N]=u3(M.current,R.current);if(S!==0||N!==0){const{transform:C,panBy:D}=c.getState();v.current.x=(v.current.x??0)-S/C[2],v.current.y=(v.current.y??0)-N/C[2],D({x:S,y:N})&&E(v.current)}b.current=requestAnimationFrame(w)},x=S=>{const{nodeInternals:N,multiSelectionActive:C,nodesDraggable:D,unselectNodesAndEdges:H,onNodeDragStart:V,onSelectionDragStart:U}=c.getState();j.current=!0;const Q=s?V:Z0(U);(!l||!o)&&!C&&s&&(N.get(s)?.selected||H()),s&&o&&l&&Gy({id:s,store:c,nodeRef:t});const k=Y(S);if(v.current=k,p.current=y5(N,D,k,s),Q&&p.current){const[F,G]=Q0({nodeId:s,dragItems:p.current,nodeInternals:N});Q(S.sourceEvent,F,G)}};if(e)y.on(".drag",null);else{const S=kM().on("start",N=>{const{domNode:C,nodeDragThreshold:D}=c.getState();D===0&&x(N),$.current=!1;const H=Y(N);v.current=H,R.current=C?.getBoundingClientRect()||null,M.current=pa(N.sourceEvent,R.current)}).on("drag",N=>{const C=Y(N),{autoPanOnNodeDrag:D,nodeDragThreshold:H}=c.getState();if(N.sourceEvent.type==="touchmove"&&N.sourceEvent.touches.length>1&&($.current=!0),!$.current){if(!L.current&&j.current&&D&&(L.current=!0,w()),!j.current){const V=C.xSnapped-(v?.current?.x??0),U=C.ySnapped-(v?.current?.y??0);Math.sqrt(V*V+U*U)>H&&x(N)}(v.current.x!==C.xSnapped||v.current.y!==C.ySnapped)&&p.current&&j.current&&(O.current=N.sourceEvent,M.current=pa(N.sourceEvent,R.current),E(C))}}).on("end",N=>{if(!(!j.current||$.current)&&(h(!1),L.current=!1,j.current=!1,cancelAnimationFrame(b.current),p.current)){const{updateNodePositions:C,nodeInternals:D,onNodeDragStop:H,onSelectionDragStop:V}=c.getState(),U=s?H:Z0(V);if(C(p.current,!1,!1),U){const[Q,k]=Q0({nodeId:s,dragItems:p.current,nodeInternals:D});U(N.sourceEvent,Q,k)}}}).filter(N=>{const C=N.target;return!N.button&&(!n||!iT(C,`.${n}`,t))&&(!r||iT(C,r,t))});return y.call(S),()=>{y.on(".drag",null)}}}},[t,e,n,r,o,c,s,l,Y]),f}function H3(){const t=pn();return B.useCallback(n=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:o,getNodes:l,snapToGrid:c,snapGrid:f,onError:h,nodesDraggable:p}=t.getState(),v=l().filter($=>$.selected&&($.draggable||p&&typeof $.draggable>"u")),b=c?f[0]:5,R=c?f[1]:5,M=n.isShiftPressed?4:1,O=n.x*b*M,L=n.y*R*M,j=v.map($=>{if($.positionAbsolute){const Y={x:$.positionAbsolute.x+O,y:$.positionAbsolute.y+L};c&&(Y.x=f[0]*Math.round(Y.x/f[0]),Y.y=f[1]*Math.round(Y.y/f[1]));const{positionAbsolute:y,position:E}=U3($,Y,r,s,void 0,h);$.position=E,$.positionAbsolute=y}return $});o(j,!0,!1)},[])}const au={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Bc=t=>{const e=({id:n,type:r,data:s,xPos:o,yPos:l,xPosOrigin:c,yPosOrigin:f,selected:h,onClick:p,onMouseEnter:v,onMouseMove:b,onMouseLeave:R,onContextMenu:M,onDoubleClick:O,style:L,className:j,isDraggable:$,isSelectable:Y,isConnectable:y,isFocusable:E,selectNodesOnDrag:w,sourcePosition:x,targetPosition:S,hidden:N,resizeObserver:C,dragHandle:D,zIndex:H,isParent:V,noDragClassName:U,noPanClassName:Q,initialized:k,disableKeyboardA11y:F,ariaLabel:G,rfId:X,hasHandleBounds:z})=>{const W=pn(),ne=B.useRef(null),J=B.useRef(null),ee=B.useRef(x),ae=B.useRef(S),le=B.useRef(r),fe=Y||$||p||v||b||R,he=H3(),Ee=Uc(n,W.getState,v),Ae=Uc(n,W.getState,b),$e=Uc(n,W.getState,R),Ye=Uc(n,W.getState,M),Ve=Uc(n,W.getState,O),st=Le=>{const{nodeDragThreshold:we}=W.getState();if(Y&&(!w||!$||we>0)&&Gy({id:n,store:W,nodeRef:ne}),p){const Xe=W.getState().nodeInternals.get(n);Xe&&p(Le,{...Xe})}},at=Le=>{if(!By(Le)&&!F)if(d3.includes(Le.key)&&Y){const we=Le.key==="Escape";Gy({id:n,store:W,unselect:we,nodeRef:ne})}else $&&h&&Object.prototype.hasOwnProperty.call(au,Le.key)&&(W.setState({ariaLiveMessage:`Moved selected node ${Le.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~l}`}),he({x:au[Le.key].x,y:au[Le.key].y,isShiftPressed:Le.shiftKey}))};B.useEffect(()=>()=>{J.current&&(C?.unobserve(J.current),J.current=null)},[]),B.useEffect(()=>{if(ne.current&&!N){const Le=ne.current;(!k||!z||J.current!==Le)&&(J.current&&C?.unobserve(J.current),C?.observe(Le),J.current=Le)}},[N,k,z]),B.useEffect(()=>{const Le=le.current!==r,we=ee.current!==x,Xe=ae.current!==S;ne.current&&(Le||we||Xe)&&(Le&&(le.current=r),we&&(ee.current=x),Xe&&(ae.current=S),W.getState().updateNodeDimensions([{id:n,nodeElement:ne.current,forceUpdate:!0}]))},[n,r,x,S]);const jt=B3({nodeRef:ne,disabled:N||!$,noDragClassName:U,handleSelector:D,nodeId:n,isSelectable:Y,selectNodesOnDrag:w});return N?null:pe.createElement("div",{className:Gn(["react-flow__node",`react-flow__node-${r}`,{[Q]:$},j,{selected:h,selectable:Y,parent:V,dragging:jt}]),ref:ne,style:{zIndex:H,transform:`translate(${c}px,${f}px)`,pointerEvents:fe?"all":"none",visibility:k?"visible":"hidden",...L},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Ee,onMouseMove:Ae,onMouseLeave:$e,onContextMenu:Ye,onClick:st,onDoubleClick:Ve,onKeyDown:E?at:void 0,tabIndex:E?0:void 0,role:E?"button":void 0,"aria-describedby":F?void 0:`${I3}-${X}`,"aria-label":G},pe.createElement(M6,{value:n},pe.createElement(t,{id:n,data:s,type:r,xPos:o,yPos:l,selected:h,isConnectable:y,sourcePosition:x,targetPosition:S,dragging:jt,dragHandle:D,zIndex:H})))};return e.displayName="NodeWrapper",B.memo(e)};const b5=t=>{const e=t.getNodes().filter(n=>n.selected);return{...l_(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function w5({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=pn(),{width:s,height:o,x:l,y:c,transformString:f,userSelectionActive:h}=Rt(b5,Mn),p=H3(),v=B.useRef(null);if(B.useEffect(()=>{n||v.current?.focus({preventScroll:!0})},[n]),B3({nodeRef:v}),h||!s||!o)return null;const b=t?M=>{const O=r.getState().getNodes().filter(L=>L.selected);t(M,O)}:void 0,R=M=>{Object.prototype.hasOwnProperty.call(au,M.key)&&p({x:au[M.key].x,y:au[M.key].y,isShiftPressed:M.shiftKey})};return pe.createElement("div",{className:Gn(["react-flow__nodesselection","react-flow__container",e]),style:{transform:f}},pe.createElement("div",{ref:v,className:"react-flow__nodesselection-rect",onContextMenu:b,tabIndex:n?void 0:-1,onKeyDown:n?void 0:R,style:{width:s,height:o,top:c,left:l}}))}var E5=B.memo(w5);const x5=t=>t.nodesSelectionActive,$3=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:l,deleteKeyCode:c,onMove:f,onMoveStart:h,onMoveEnd:p,selectionKeyCode:v,selectionOnDrag:b,selectionMode:R,onSelectionStart:M,onSelectionEnd:O,multiSelectionKeyCode:L,panActivationKeyCode:j,zoomActivationKeyCode:$,elementsSelectable:Y,zoomOnScroll:y,zoomOnPinch:E,panOnScroll:w,panOnScrollSpeed:x,panOnScrollMode:S,zoomOnDoubleClick:N,panOnDrag:C,defaultViewport:D,translateExtent:H,minZoom:V,maxZoom:U,preventScrolling:Q,onSelectionContextMenu:k,noWheelClassName:F,noPanClassName:G,disableKeyboardA11y:X})=>{const z=Rt(x5),W=Ed(v),ne=Ed(j),J=ne||C,ee=ne||w,ae=W||b&&J!==!0;return l5({deleteKeyCode:c,multiSelectionKeyCode:L}),pe.createElement(f5,{onMove:f,onMoveStart:h,onMoveEnd:p,onPaneContextMenu:o,elementsSelectable:Y,zoomOnScroll:y,zoomOnPinch:E,panOnScroll:ee,panOnScrollSpeed:x,panOnScrollMode:S,zoomOnDoubleClick:N,panOnDrag:!W&&J,defaultViewport:D,translateExtent:H,minZoom:V,maxZoom:U,zoomActivationKeyCode:$,preventScrolling:Q,noWheelClassName:F,noPanClassName:G},pe.createElement(j3,{onSelectionStart:M,onSelectionEnd:O,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:l,panOnDrag:J,isSelecting:!!ae,selectionMode:R},t,z&&pe.createElement(E5,{onSelectionContextMenu:k,noPanClassName:G,disableKeyboardA11y:X})))};$3.displayName="FlowRenderer";var T5=B.memo($3);function S5(t){return Rt(B.useCallback(n=>t?v3(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function A5(t){const e={input:Bc(t.input||C3),default:Bc(t.default||qy),output:Bc(t.output||R3),group:Bc(t.group||c_)},n={},r=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,o)=>(s[o]=Bc(t[o]||qy),s),n);return{...e,...r}}const C5=({x:t,y:e,width:n,height:r,origin:s})=>!n||!r?{x:t,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:e}:{x:t-n*s[0],y:e-r*s[1]},k5=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),F3=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:o,onError:l}=Rt(k5,Mn),c=S5(t.onlyRenderVisibleElements),f=B.useRef(),h=B.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const p=new ResizeObserver(v=>{const b=v.map(R=>({id:R.target.getAttribute("data-id"),nodeElement:R.target,forceUpdate:!0}));o(b)});return f.current=p,p},[]);return B.useEffect(()=>()=>{f?.current?.disconnect()},[]),pe.createElement("div",{className:"react-flow__nodes",style:d_},c.map(p=>{let v=p.type||"default";t.nodeTypes[v]||(l?.("003",Es.error003(v)),v="default");const b=t.nodeTypes[v]||t.nodeTypes.default,R=!!(p.draggable||e&&typeof p.draggable>"u"),M=!!(p.selectable||s&&typeof p.selectable>"u"),O=!!(p.connectable||n&&typeof p.connectable>"u"),L=!!(p.focusable||r&&typeof p.focusable>"u"),j=t.nodeExtent?n_(p.positionAbsolute,t.nodeExtent):p.positionAbsolute,$=j?.x??0,Y=j?.y??0,y=C5({x:$,y:Y,width:p.width??0,height:p.height??0,origin:t.nodeOrigin});return pe.createElement(b,{key:p.id,id:p.id,className:p.className,style:p.style,type:v,data:p.data,sourcePosition:p.sourcePosition||xe.Bottom,targetPosition:p.targetPosition||xe.Top,hidden:p.hidden,xPos:$,yPos:Y,xPosOrigin:y.x,yPosOrigin:y.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!p.selected,isDraggable:R,isSelectable:M,isConnectable:O,isFocusable:L,resizeObserver:h,dragHandle:p.dragHandle,zIndex:p[Lt]?.z??0,isParent:!!p[Lt]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!p.width&&!!p.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:p.ariaLabel,hasHandleBounds:!!p[Lt]?.handleBounds})}))};F3.displayName="NodeRenderer";var R5=B.memo(F3);const N5=(t,e,n)=>n===xe.Left?t-e:n===xe.Right?t+e:t,I5=(t,e,n)=>n===xe.Top?t-e:n===xe.Bottom?t+e:t,aT="react-flow__edgeupdater",oT=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:o,onMouseOut:l,type:c})=>pe.createElement("circle",{onMouseDown:s,onMouseEnter:o,onMouseOut:l,className:Gn([aT,`${aT}-${c}`]),cx:N5(e,r,t),cy:I5(n,r,t),r,stroke:"transparent",fill:"transparent"}),D5=()=>!0;var Ul=t=>{const e=({id:n,className:r,type:s,data:o,onClick:l,onEdgeDoubleClick:c,selected:f,animated:h,label:p,labelStyle:v,labelShowBg:b,labelBgStyle:R,labelBgPadding:M,labelBgBorderRadius:O,style:L,source:j,target:$,sourceX:Y,sourceY:y,targetX:E,targetY:w,sourcePosition:x,targetPosition:S,elementsSelectable:N,hidden:C,sourceHandleId:D,targetHandleId:H,onContextMenu:V,onMouseEnter:U,onMouseMove:Q,onMouseLeave:k,reconnectRadius:F,onReconnect:G,onReconnectStart:X,onReconnectEnd:z,markerEnd:W,markerStart:ne,rfId:J,ariaLabel:ee,isFocusable:ae,isReconnectable:le,pathOptions:fe,interactionWidth:he,disableKeyboardA11y:Ee})=>{const Ae=B.useRef(null),[$e,Ye]=B.useState(!1),[Ve,st]=B.useState(!1),at=pn(),jt=B.useMemo(()=>`url('#${$y(ne,J)}')`,[ne,J]),Le=B.useMemo(()=>`url('#${$y(W,J)}')`,[W,J]);if(C)return null;const we=qt=>{const{edges:an,addSelectedEdges:Ln,unselectNodesAndEdges:jn,multiSelectionActive:on}=at.getState(),gn=an.find(zn=>zn.id===n);gn&&(N&&(at.setState({nodesSelectionActive:!1}),gn.selected&&on?(jn({nodes:[],edges:[gn]}),Ae.current?.blur()):Ln([n])),l&&l(qt,gn))},Xe=zc(n,at.getState,c),An=zc(n,at.getState,V),Zt=zc(n,at.getState,U),ir=zc(n,at.getState,Q),On=zc(n,at.getState,k),Vn=(qt,an)=>{if(qt.button!==0)return;const{edges:Ln,isValidConnection:jn}=at.getState(),on=an?$:j,gn=(an?H:D)||null,zn=an?"target":"source",qi=jn||D5,Gi=an,Gr=Ln.find(ar=>ar.id===n);st(!0),X?.(qt,Gr,zn);const sr=ar=>{st(!1),z?.(ar,Gr,zn)};x3({event:qt,handleId:gn,nodeId:on,onConnect:ar=>G?.(Gr,ar),isTarget:Gi,getState:at.getState,setState:at.setState,isValidConnection:qi,edgeUpdaterType:zn,onReconnectEnd:sr})},qr=qt=>Vn(qt,!0),ut=qt=>Vn(qt,!1),We=()=>Ye(!0),Ft=()=>Ye(!1),St=!N&&!l,ui=qt=>{if(!Ee&&d3.includes(qt.key)&&N){const{unselectNodesAndEdges:an,addSelectedEdges:Ln,edges:jn}=at.getState();qt.key==="Escape"?(Ae.current?.blur(),an({edges:[jn.find(gn=>gn.id===n)]})):Ln([n])}};return pe.createElement("g",{className:Gn(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:f,animated:h,inactive:St,updating:$e}]),onClick:we,onDoubleClick:Xe,onContextMenu:An,onMouseEnter:Zt,onMouseMove:ir,onMouseLeave:On,onKeyDown:ae?ui:void 0,tabIndex:ae?0:void 0,role:ae?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":ee===null?void 0:ee||`Edge from ${j} to ${$}`,"aria-describedby":ae?`${D3}-${J}`:void 0,ref:Ae},!Ve&&pe.createElement(t,{id:n,source:j,target:$,selected:f,animated:h,label:p,labelStyle:v,labelShowBg:b,labelBgStyle:R,labelBgPadding:M,labelBgBorderRadius:O,data:o,style:L,sourceX:Y,sourceY:y,targetX:E,targetY:w,sourcePosition:x,targetPosition:S,sourceHandleId:D,targetHandleId:H,markerStart:jt,markerEnd:Le,pathOptions:fe,interactionWidth:he}),le&&pe.createElement(pe.Fragment,null,(le==="source"||le===!0)&&pe.createElement(oT,{position:x,centerX:Y,centerY:y,radius:F,onMouseDown:qr,onMouseEnter:We,onMouseOut:Ft,type:"source"}),(le==="target"||le===!0)&&pe.createElement(oT,{position:S,centerX:E,centerY:w,radius:F,onMouseDown:ut,onMouseEnter:We,onMouseOut:Ft,type:"target"})))};return e.displayName="EdgeWrapper",B.memo(e)};function M5(t){const e={default:Ul(t.default||Sm),straight:Ul(t.bezier||a_),step:Ul(t.step||s_),smoothstep:Ul(t.step||sp),simplebezier:Ul(t.simplebezier||i_)},n={},r=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,o)=>(s[o]=Ul(t[o]||Sm),s),n);return{...e,...r}}function lT(t,e,n=null){const r=(n?.x||0)+e.x,s=(n?.y||0)+e.y,o=n?.width||e.width,l=n?.height||e.height;switch(t){case xe.Top:return{x:r+o/2,y:s};case xe.Right:return{x:r+o,y:s+l/2};case xe.Bottom:return{x:r+o/2,y:s+l};case xe.Left:return{x:r,y:s+l/2}}}function uT(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const P5=(t,e,n,r,s,o)=>{const l=lT(n,t,e),c=lT(o,r,s);return{sourceX:l.x,sourceY:l.y,targetX:c.x,targetY:c.y}};function O5({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:s,targetHeight:o,width:l,height:c,transform:f}){const h={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+s),y2:Math.max(t.y+r,e.y+o)};h.x===h.x2&&(h.x2+=1),h.y===h.y2&&(h.y2+=1);const p=r_({x:(0-f[0])/f[2],y:(0-f[1])/f[2],width:l/f[2],height:c/f[2]}),v=Math.max(0,Math.min(p.x2,h.x2)-Math.max(p.x,h.x)),b=Math.max(0,Math.min(p.y2,h.y2)-Math.max(p.y,h.y));return Math.ceil(v*b)>0}function cT(t){const e=t?.[Lt]?.handleBounds||null,n=e&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},e,!!n]}const V5=[{level:0,isMaxLevel:!0,edges:[]}];function L5(t,e,n=!1){let r=-1;const s=t.reduce((l,c)=>{const f=Hr(c.zIndex);let h=f?c.zIndex:0;if(n){const p=e.get(c.target),v=e.get(c.source),b=c.selected||p?.selected||v?.selected,R=Math.max(v?.[Lt]?.z||0,p?.[Lt]?.z||0,1e3);h=(f?c.zIndex:0)+(b?R:0)}return l[h]?l[h].push(c):l[h]=[c],r=h>r?h:r,l},{}),o=Object.entries(s).map(([l,c])=>{const f=+l;return{edges:c,level:f,isMaxLevel:f===r}});return o.length===0?V5:o}function j5(t,e,n){const r=Rt(B.useCallback(s=>t?s.edges.filter(o=>{const l=e.get(o.source),c=e.get(o.target);return l?.width&&l?.height&&c?.width&&c?.height&&O5({sourcePos:l.positionAbsolute||{x:0,y:0},targetPos:c.positionAbsolute||{x:0,y:0},sourceWidth:l.width,sourceHeight:l.height,targetWidth:c.width,targetHeight:c.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,e]));return L5(r,e,n)}const z5=({color:t="none",strokeWidth:e=1})=>pe.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),U5=({color:t="none",strokeWidth:e=1})=>pe.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),dT={[No.Arrow]:z5,[No.ArrowClosed]:U5};function B5(t){const e=pn();return B.useMemo(()=>Object.prototype.hasOwnProperty.call(dT,t)?dT[t]:(e.getState().onError?.("009",Es.error009(t)),null),[t])}const H5=({id:t,type:e,color:n,width:r=12.5,height:s=12.5,markerUnits:o="strokeWidth",strokeWidth:l,orient:c="auto-start-reverse"})=>{const f=B5(e);return f?pe.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:c,refX:"0",refY:"0"},pe.createElement(f,{color:n,strokeWidth:l})):null},$5=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((s,o)=>([o.markerStart,o.markerEnd].forEach(l=>{if(l&&typeof l=="object"){const c=$y(l,e);r.includes(c)||(s.push({id:c,color:l.color||t,...l}),r.push(c))}}),s),[]).sort((s,o)=>s.id.localeCompare(o.id))},q3=({defaultColor:t,rfId:e})=>{const n=Rt(B.useCallback($5({defaultColor:t,rfId:e}),[t,e]),(r,s)=>!(r.length!==s.length||r.some((o,l)=>o.id!==s[l].id)));return pe.createElement("defs",null,n.map(r=>pe.createElement(H5,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};q3.displayName="MarkerDefinitions";var F5=B.memo(q3);const q5=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),G3=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:s,noPanClassName:o,onEdgeContextMenu:l,onEdgeMouseEnter:c,onEdgeMouseMove:f,onEdgeMouseLeave:h,onEdgeClick:p,onEdgeDoubleClick:v,onReconnect:b,onReconnectStart:R,onReconnectEnd:M,reconnectRadius:O,children:L,disableKeyboardA11y:j})=>{const{edgesFocusable:$,edgesUpdatable:Y,elementsSelectable:y,width:E,height:w,connectionMode:x,nodeInternals:S,onError:N}=Rt(q5,Mn),C=j5(e,S,n);return E?pe.createElement(pe.Fragment,null,C.map(({level:D,edges:H,isMaxLevel:V})=>pe.createElement("svg",{key:D,style:{zIndex:D},width:E,height:w,className:"react-flow__edges react-flow__container"},V&&pe.createElement(F5,{defaultColor:t,rfId:r}),pe.createElement("g",null,H.map(U=>{const[Q,k,F]=cT(S.get(U.source)),[G,X,z]=cT(S.get(U.target));if(!F||!z)return null;let W=U.type||"default";s[W]||(N?.("011",Es.error011(W)),W="default");const ne=s[W]||s.default,J=x===wa.Strict?X.target:(X.target??[]).concat(X.source??[]),ee=uT(k.source,U.sourceHandle),ae=uT(J,U.targetHandle),le=ee?.position||xe.Bottom,fe=ae?.position||xe.Top,he=!!(U.focusable||$&&typeof U.focusable>"u"),Ee=U.reconnectable||U.updatable,Ae=typeof b<"u"&&(Ee||Y&&typeof Ee>"u");if(!ee||!ae)return N?.("008",Es.error008(ee,U)),null;const{sourceX:$e,sourceY:Ye,targetX:Ve,targetY:st}=P5(Q,ee,le,G,ae,fe);return pe.createElement(ne,{key:U.id,id:U.id,className:Gn([U.className,o]),type:W,data:U.data,selected:!!U.selected,animated:!!U.animated,hidden:!!U.hidden,label:U.label,labelStyle:U.labelStyle,labelShowBg:U.labelShowBg,labelBgStyle:U.labelBgStyle,labelBgPadding:U.labelBgPadding,labelBgBorderRadius:U.labelBgBorderRadius,style:U.style,source:U.source,target:U.target,sourceHandleId:U.sourceHandle,targetHandleId:U.targetHandle,markerEnd:U.markerEnd,markerStart:U.markerStart,sourceX:$e,sourceY:Ye,targetX:Ve,targetY:st,sourcePosition:le,targetPosition:fe,elementsSelectable:y,onContextMenu:l,onMouseEnter:c,onMouseMove:f,onMouseLeave:h,onClick:p,onEdgeDoubleClick:v,onReconnect:b,onReconnectStart:R,onReconnectEnd:M,reconnectRadius:O,rfId:r,ariaLabel:U.ariaLabel,isFocusable:he,isReconnectable:Ae,pathOptions:"pathOptions"in U?U.pathOptions:void 0,interactionWidth:U.interactionWidth,disableKeyboardA11y:j})})))),L):null};G3.displayName="EdgeRenderer";var G5=B.memo(G3);const K5=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function Y5({children:t}){const e=Rt(K5);return pe.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function X5(t){const e=Kd(),n=B.useRef(!1);B.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const W5={[xe.Left]:xe.Right,[xe.Right]:xe.Left,[xe.Top]:xe.Bottom,[xe.Bottom]:xe.Top},K3=({nodeId:t,handleType:e,style:n,type:r=aa.Bezier,CustomComponent:s,connectionStatus:o})=>{const{fromNode:l,handleId:c,toX:f,toY:h,connectionMode:p}=Rt(B.useCallback(w=>({fromNode:w.nodeInternals.get(t),handleId:w.connectionHandleId,toX:(w.connectionPosition.x-w.transform[0])/w.transform[2],toY:(w.connectionPosition.y-w.transform[1])/w.transform[2],connectionMode:w.connectionMode}),[t]),Mn),v=l?.[Lt]?.handleBounds;let b=v?.[e];if(p===wa.Loose&&(b=b||v?.[e==="source"?"target":"source"]),!l||!b)return null;const R=c?b.find(w=>w.id===c):b[0],M=R?R.x+R.width/2:(l.width??0)/2,O=R?R.y+R.height/2:l.height??0,L=(l.positionAbsolute?.x??0)+M,j=(l.positionAbsolute?.y??0)+O,$=R?.position,Y=$?W5[$]:null;if(!$||!Y)return null;if(s)return pe.createElement(s,{connectionLineType:r,connectionLineStyle:n,fromNode:l,fromHandle:R,fromX:L,fromY:j,toX:f,toY:h,fromPosition:$,toPosition:Y,connectionStatus:o});let y="";const E={sourceX:L,sourceY:j,sourcePosition:$,targetX:f,targetY:h,targetPosition:Y};return r===aa.Bezier?[y]=g3(E):r===aa.Step?[y]=Hy({...E,borderRadius:0}):r===aa.SmoothStep?[y]=Hy(E):r===aa.SimpleBezier?[y]=p3(E):y=`M${L},${j} ${f},${h}`,pe.createElement("path",{d:y,fill:"none",className:"react-flow__connection-path",style:n})};K3.displayName="ConnectionLine";const Q5=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function Z5({containerStyle:t,style:e,type:n,component:r}){const{nodeId:s,handleType:o,nodesConnectable:l,width:c,height:f,connectionStatus:h}=Rt(Q5,Mn);return!(s&&o&&c&&l)?null:pe.createElement("svg",{style:t,width:c,height:f,className:"react-flow__edges react-flow__connectionline react-flow__container"},pe.createElement("g",{className:Gn(["react-flow__connection",h])},pe.createElement(K3,{nodeId:s,handleType:o,style:e,type:n,CustomComponent:r,connectionStatus:h})))}function fT(t,e){return B.useRef(null),pn(),B.useMemo(()=>e(t),[t])}const Y3=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:s,onInit:o,onNodeClick:l,onEdgeClick:c,onNodeDoubleClick:f,onEdgeDoubleClick:h,onNodeMouseEnter:p,onNodeMouseMove:v,onNodeMouseLeave:b,onNodeContextMenu:R,onSelectionContextMenu:M,onSelectionStart:O,onSelectionEnd:L,connectionLineType:j,connectionLineStyle:$,connectionLineComponent:Y,connectionLineContainerStyle:y,selectionKeyCode:E,selectionOnDrag:w,selectionMode:x,multiSelectionKeyCode:S,panActivationKeyCode:N,zoomActivationKeyCode:C,deleteKeyCode:D,onlyRenderVisibleElements:H,elementsSelectable:V,selectNodesOnDrag:U,defaultViewport:Q,translateExtent:k,minZoom:F,maxZoom:G,preventScrolling:X,defaultMarkerColor:z,zoomOnScroll:W,zoomOnPinch:ne,panOnScroll:J,panOnScrollSpeed:ee,panOnScrollMode:ae,zoomOnDoubleClick:le,panOnDrag:fe,onPaneClick:he,onPaneMouseEnter:Ee,onPaneMouseMove:Ae,onPaneMouseLeave:$e,onPaneScroll:Ye,onPaneContextMenu:Ve,onEdgeContextMenu:st,onEdgeMouseEnter:at,onEdgeMouseMove:jt,onEdgeMouseLeave:Le,onReconnect:we,onReconnectStart:Xe,onReconnectEnd:An,reconnectRadius:Zt,noDragClassName:ir,noWheelClassName:On,noPanClassName:Vn,elevateEdgesOnSelect:qr,disableKeyboardA11y:ut,nodeOrigin:We,nodeExtent:Ft,rfId:St})=>{const ui=fT(t,A5),qt=fT(e,M5);return X5(o),pe.createElement(T5,{onPaneClick:he,onPaneMouseEnter:Ee,onPaneMouseMove:Ae,onPaneMouseLeave:$e,onPaneContextMenu:Ve,onPaneScroll:Ye,deleteKeyCode:D,selectionKeyCode:E,selectionOnDrag:w,selectionMode:x,onSelectionStart:O,onSelectionEnd:L,multiSelectionKeyCode:S,panActivationKeyCode:N,zoomActivationKeyCode:C,elementsSelectable:V,onMove:n,onMoveStart:r,onMoveEnd:s,zoomOnScroll:W,zoomOnPinch:ne,zoomOnDoubleClick:le,panOnScroll:J,panOnScrollSpeed:ee,panOnScrollMode:ae,panOnDrag:fe,defaultViewport:Q,translateExtent:k,minZoom:F,maxZoom:G,onSelectionContextMenu:M,preventScrolling:X,noDragClassName:ir,noWheelClassName:On,noPanClassName:Vn,disableKeyboardA11y:ut},pe.createElement(Y5,null,pe.createElement(G5,{edgeTypes:qt,onEdgeClick:c,onEdgeDoubleClick:h,onlyRenderVisibleElements:H,onEdgeContextMenu:st,onEdgeMouseEnter:at,onEdgeMouseMove:jt,onEdgeMouseLeave:Le,onReconnect:we,onReconnectStart:Xe,onReconnectEnd:An,reconnectRadius:Zt,defaultMarkerColor:z,noPanClassName:Vn,elevateEdgesOnSelect:!!qr,disableKeyboardA11y:ut,rfId:St},pe.createElement(Z5,{style:$,type:j,component:Y,containerStyle:y})),pe.createElement("div",{className:"react-flow__edgelabel-renderer"}),pe.createElement(R5,{nodeTypes:ui,onNodeClick:l,onNodeDoubleClick:f,onNodeMouseEnter:p,onNodeMouseMove:v,onNodeMouseLeave:b,onNodeContextMenu:R,selectNodesOnDrag:U,onlyRenderVisibleElements:H,noPanClassName:Vn,noDragClassName:ir,disableKeyboardA11y:ut,nodeOrigin:We,nodeExtent:Ft,rfId:St})))};Y3.displayName="GraphView";var J5=B.memo(Y3);const Ky=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ta={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Ky,nodeExtent:Ky,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:wa.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:C6,isValidConnection:void 0},eO=()=>U4((t,e)=>({...ta,setNodes:n=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:o}=e();t({nodeInternals:X0(n,r,s,o)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(n,r)=>{const s=typeof n<"u",o=typeof r<"u",l=s?X0(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:l,edges:o?r:[],hasDefaultNodes:s,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:o,fitViewOnInitDone:l,fitViewOnInitOptions:c,domNode:f,nodeOrigin:h}=e(),p=f?.querySelector(".react-flow__viewport");if(!p)return;const v=window.getComputedStyle(p),{m22:b}=new window.DOMMatrixReadOnly(v.transform),R=n.reduce((O,L)=>{const j=s.get(L.id);if(j?.hidden)s.set(j.id,{...j,[Lt]:{...j[Lt],handleBounds:void 0}});else if(j){const $=t_(L.nodeElement);!!($.width&&$.height&&(j.width!==$.width||j.height!==$.height||L.forceUpdate))&&(s.set(j.id,{...j,[Lt]:{...j[Lt],handleBounds:{source:sT(".source",L.nodeElement,b,h),target:sT(".target",L.nodeElement,b,h)}},...$}),O.push({id:j.id,type:"dimensions",dimensions:$}))}return O},[]);P3(s,h);const M=l||o&&!l&&O3(e,{initial:!0,...c});t({nodeInternals:new Map(s),fitViewOnInitDone:M}),R?.length>0&&r?.(R)},updateNodePositions:(n,r=!0,s=!1)=>{const{triggerNodeChanges:o}=e(),l=n.map(c=>{const f={id:c.id,type:"position",dragging:s};return r&&(f.positionAbsolute=c.positionAbsolute,f.position=c.position),f});o(l)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:o,nodeOrigin:l,getNodes:c,elevateNodesOnSelect:f}=e();if(n?.length){if(o){const h=L3(n,c()),p=X0(h,s,l,f);t({nodeInternals:p})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:s,getNodes:o}=e();let l,c=null;r?l=n.map(f=>sa(f,!0)):(l=Xl(o(),n),c=Xl(s,[])),Vh({changedNodes:l,changedEdges:c,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:s,getNodes:o}=e();let l,c=null;r?l=n.map(f=>sa(f,!0)):(l=Xl(s,n),c=Xl(o(),[])),Vh({changedNodes:c,changedEdges:l,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:s,getNodes:o}=e(),l=n||o(),c=r||s,f=l.map(p=>(p.selected=!1,sa(p.id,!1))),h=c.map(p=>sa(p.id,!1));Vh({changedNodes:f,changedEdges:h,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:s}=e();r?.scaleExtent([n,s]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:s}=e();r?.scaleExtent([s,n]),t({maxZoom:n})},setTranslateExtent:n=>{e().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),o=r().filter(c=>c.selected).map(c=>sa(c.id,!1)),l=n.filter(c=>c.selected).map(c=>sa(c.id,!1));Vh({changedNodes:o,changedEdges:l,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(s=>{s.positionAbsolute=n_(s.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:s,height:o,d3Zoom:l,d3Selection:c,translateExtent:f}=e();if(!l||!c||!n.x&&!n.y)return!1;const h=ma.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),p=[[0,0],[s,o]],v=l?.constrain()(h,p,f);return l.transform(c,v),r[0]!==v.x||r[1]!==v.y||r[2]!==v.k},cancelConnection:()=>t({connectionNodeId:ta.connectionNodeId,connectionHandleId:ta.connectionHandleId,connectionHandleType:ta.connectionHandleType,connectionStatus:ta.connectionStatus,connectionStartHandle:ta.connectionStartHandle,connectionEndHandle:ta.connectionEndHandle}),reset:()=>t({...ta})}),Object.is),X3=({children:t})=>{const e=B.useRef(null);return e.current||(e.current=eO()),pe.createElement(_6,{value:e.current},t)};X3.displayName="ReactFlowProvider";const W3=({children:t})=>B.useContext(ip)?pe.createElement(pe.Fragment,null,t):pe.createElement(X3,null,t);W3.displayName="ReactFlowWrapper";const tO={input:C3,default:qy,output:R3,group:c_},nO={default:Sm,straight:a_,step:s_,smoothstep:sp,simplebezier:i_},rO=[0,0],iO=[15,15],sO={x:0,y:0,zoom:1},aO={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Q3=B.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:o=tO,edgeTypes:l=nO,onNodeClick:c,onEdgeClick:f,onInit:h,onMove:p,onMoveStart:v,onMoveEnd:b,onConnect:R,onConnectStart:M,onConnectEnd:O,onClickConnectStart:L,onClickConnectEnd:j,onNodeMouseEnter:$,onNodeMouseMove:Y,onNodeMouseLeave:y,onNodeContextMenu:E,onNodeDoubleClick:w,onNodeDragStart:x,onNodeDrag:S,onNodeDragStop:N,onNodesDelete:C,onEdgesDelete:D,onSelectionChange:H,onSelectionDragStart:V,onSelectionDrag:U,onSelectionDragStop:Q,onSelectionContextMenu:k,onSelectionStart:F,onSelectionEnd:G,connectionMode:X=wa.Strict,connectionLineType:z=aa.Bezier,connectionLineStyle:W,connectionLineComponent:ne,connectionLineContainerStyle:J,deleteKeyCode:ee="Backspace",selectionKeyCode:ae="Shift",selectionOnDrag:le=!1,selectionMode:fe=wd.Full,panActivationKeyCode:he="Space",multiSelectionKeyCode:Ee=Tm()?"Meta":"Control",zoomActivationKeyCode:Ae=Tm()?"Meta":"Control",snapToGrid:$e=!1,snapGrid:Ye=iO,onlyRenderVisibleElements:Ve=!1,selectNodesOnDrag:st=!0,nodesDraggable:at,nodesConnectable:jt,nodesFocusable:Le,nodeOrigin:we=rO,edgesFocusable:Xe,edgesUpdatable:An,elementsSelectable:Zt,defaultViewport:ir=sO,minZoom:On=.5,maxZoom:Vn=2,translateExtent:qr=Ky,preventScrolling:ut=!0,nodeExtent:We,defaultMarkerColor:Ft="#b1b1b7",zoomOnScroll:St=!0,zoomOnPinch:ui=!0,panOnScroll:qt=!1,panOnScrollSpeed:an=.5,panOnScrollMode:Ln=wo.Free,zoomOnDoubleClick:jn=!0,panOnDrag:on=!0,onPaneClick:gn,onPaneMouseEnter:zn,onPaneMouseMove:qi,onPaneMouseLeave:Gi,onPaneScroll:Gr,onPaneContextMenu:sr,children:xr,onEdgeContextMenu:ar,onEdgeDoubleClick:Tr,onEdgeMouseEnter:Va,onEdgeMouseMove:ci,onEdgeMouseLeave:Rs,onEdgeUpdate:di,onEdgeUpdateStart:Ko,onEdgeUpdateEnd:bt,onReconnect:zt,onReconnectStart:Dt,onReconnectEnd:Yn,reconnectRadius:La=10,edgeUpdaterRadius:Vu=10,onNodesChange:fi,onEdgesChange:Yo,noDragClassName:Ki="nodrag",noWheelClassName:hi="nowheel",noPanClassName:Sr="nopan",fitView:Ar=!1,fitViewOptions:Cr,connectOnClick:yn=!0,attributionPosition:At,proOptions:ja,defaultEdgeOptions:Ns,elevateNodesOnSelect:or=!0,elevateEdgesOnSelect:Kr=!1,disableKeyboardA11y:za=!1,autoPanOnConnect:Xo=!0,autoPanOnNodeDrag:Yi=!0,connectionRadius:Wo=20,isValidConnection:mi,onError:kr,style:Jt,id:pi,nodeDragThreshold:Qo,...Yr},Is)=>{const gi=pi||"1";return pe.createElement("div",{...Yr,style:{...Jt,...aO},ref:Is,className:Gn(["react-flow",s]),"data-testid":"rf__wrapper",id:pi},pe.createElement(W3,null,pe.createElement(J5,{onInit:h,onMove:p,onMoveStart:v,onMoveEnd:b,onNodeClick:c,onEdgeClick:f,onNodeMouseEnter:$,onNodeMouseMove:Y,onNodeMouseLeave:y,onNodeContextMenu:E,onNodeDoubleClick:w,nodeTypes:o,edgeTypes:l,connectionLineType:z,connectionLineStyle:W,connectionLineComponent:ne,connectionLineContainerStyle:J,selectionKeyCode:ae,selectionOnDrag:le,selectionMode:fe,deleteKeyCode:ee,multiSelectionKeyCode:Ee,panActivationKeyCode:he,zoomActivationKeyCode:Ae,onlyRenderVisibleElements:Ve,selectNodesOnDrag:st,defaultViewport:ir,translateExtent:qr,minZoom:On,maxZoom:Vn,preventScrolling:ut,zoomOnScroll:St,zoomOnPinch:ui,zoomOnDoubleClick:jn,panOnScroll:qt,panOnScrollSpeed:an,panOnScrollMode:Ln,panOnDrag:on,onPaneClick:gn,onPaneMouseEnter:zn,onPaneMouseMove:qi,onPaneMouseLeave:Gi,onPaneScroll:Gr,onPaneContextMenu:sr,onSelectionContextMenu:k,onSelectionStart:F,onSelectionEnd:G,onEdgeContextMenu:ar,onEdgeDoubleClick:Tr,onEdgeMouseEnter:Va,onEdgeMouseMove:ci,onEdgeMouseLeave:Rs,onReconnect:zt??di,onReconnectStart:Dt??Ko,onReconnectEnd:Yn??bt,reconnectRadius:La??Vu,defaultMarkerColor:Ft,noDragClassName:Ki,noWheelClassName:hi,noPanClassName:Sr,elevateEdgesOnSelect:Kr,rfId:gi,disableKeyboardA11y:za,nodeOrigin:we,nodeExtent:We}),pe.createElement(W6,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:R,onConnectStart:M,onConnectEnd:O,onClickConnectStart:L,onClickConnectEnd:j,nodesDraggable:at,nodesConnectable:jt,nodesFocusable:Le,edgesFocusable:Xe,edgesUpdatable:An,elementsSelectable:Zt,elevateNodesOnSelect:or,minZoom:On,maxZoom:Vn,nodeExtent:We,onNodesChange:fi,onEdgesChange:Yo,snapToGrid:$e,snapGrid:Ye,connectionMode:X,translateExtent:qr,connectOnClick:yn,defaultEdgeOptions:Ns,fitView:Ar,fitViewOptions:Cr,onNodesDelete:C,onEdgesDelete:D,onNodeDragStart:x,onNodeDrag:S,onNodeDragStop:N,onSelectionDrag:U,onSelectionDragStart:V,onSelectionDragStop:Q,noPanClassName:Sr,nodeOrigin:we,rfId:gi,autoPanOnConnect:Xo,autoPanOnNodeDrag:Yi,onError:kr,connectionRadius:Wo,isValidConnection:mi,nodeDragThreshold:Qo}),pe.createElement(Y6,{onSelectionChange:H}),xr,pe.createElement(w6,{proOptions:ja,position:At}),pe.createElement(t5,{rfId:gi,disableKeyboardA11y:za})))});Q3.displayName="ReactFlow";function Z3(t){return e=>{const[n,r]=B.useState(e),s=B.useCallback(o=>r(l=>t(o,l)),[]);return[n,r,s]}}const oO=Z3(L3),lO=Z3(p5);function uO(){return pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},pe.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function cO(){return pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},pe.createElement("path",{d:"M0 0h32v4.2H0z"}))}function dO(){return pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},pe.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function fO(){return pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},pe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function hO(){return pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},pe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Yc=({children:t,className:e,...n})=>pe.createElement("button",{type:"button",className:Gn(["react-flow__controls-button",e]),...n},t);Yc.displayName="ControlButton";const mO=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),J3=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:o,onZoomOut:l,onFitView:c,onInteractiveChange:f,className:h,children:p,position:v="bottom-left"})=>{const b=pn(),[R,M]=B.useState(!1),{isInteractive:O,minZoomReached:L,maxZoomReached:j}=Rt(mO,Mn),{zoomIn:$,zoomOut:Y,fitView:y}=Kd();if(B.useEffect(()=>{M(!0)},[]),!R)return null;const E=()=>{$(),o?.()},w=()=>{Y(),l?.()},x=()=>{y(s),c?.()},S=()=>{b.setState({nodesDraggable:!O,nodesConnectable:!O,elementsSelectable:!O}),f?.(!O)};return pe.createElement(l3,{className:Gn(["react-flow__controls",h]),position:v,style:t,"data-testid":"rf__controls"},e&&pe.createElement(pe.Fragment,null,pe.createElement(Yc,{onClick:E,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:j},pe.createElement(uO,null)),pe.createElement(Yc,{onClick:w,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:L},pe.createElement(cO,null))),n&&pe.createElement(Yc,{className:"react-flow__controls-fitview",onClick:x,title:"fit view","aria-label":"fit view"},pe.createElement(dO,null)),r&&pe.createElement(Yc,{className:"react-flow__controls-interactive",onClick:S,title:"toggle interactivity","aria-label":"toggle interactivity"},O?pe.createElement(hO,null):pe.createElement(fO,null)),p)};J3.displayName="Controls";var pO=B.memo(J3),$r;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})($r||($r={}));function gO({color:t,dimensions:e,lineWidth:n}){return pe.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function yO({color:t,radius:e}){return pe.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const vO={[$r.Dots]:"#91919a",[$r.Lines]:"#eee",[$r.Cross]:"#e2e2e2"},_O={[$r.Dots]:1,[$r.Lines]:1,[$r.Cross]:6},bO=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function eC({id:t,variant:e=$r.Dots,gap:n=20,size:r,lineWidth:s=1,offset:o=2,color:l,style:c,className:f}){const h=B.useRef(null),{transform:p,patternId:v}=Rt(bO,Mn),b=l||vO[e],R=r||_O[e],M=e===$r.Dots,O=e===$r.Cross,L=Array.isArray(n)?n:[n,n],j=[L[0]*p[2]||1,L[1]*p[2]||1],$=R*p[2],Y=O?[$,$]:j,y=M?[$/o,$/o]:[Y[0]/o,Y[1]/o];return pe.createElement("svg",{className:Gn(["react-flow__background",f]),style:{...c,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:h,"data-testid":"rf__background"},pe.createElement("pattern",{id:v+t,x:p[0]%j[0],y:p[1]%j[1],width:j[0],height:j[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${y[0]},-${y[1]})`},M?pe.createElement(yO,{color:b,radius:$/o}):pe.createElement(gO,{dimensions:Y,color:b,lineWidth:s})),pe.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${v+t})`}))}eC.displayName="Background";var wO=B.memo(eC);const ap=B.createContext(null);ap.displayName="PanelGroupContext";const Vt={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},f_=10,Ao=B.useLayoutEffect,hT=E4.useId,EO=typeof hT=="function"?hT:()=>null;let xO=0;function h_(t=null){const e=EO(),n=B.useRef(t||e||null);return n.current===null&&(n.current=""+xO++),t??n.current}function tC({children:t,className:e="",collapsedSize:n,collapsible:r,defaultSize:s,forwardedRef:o,id:l,maxSize:c,minSize:f,onCollapse:h,onExpand:p,onResize:v,order:b,style:R,tagName:M="div",...O}){const L=B.useContext(ap);if(L===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:j,expandPanel:$,getPanelSize:Y,getPanelStyle:y,groupId:E,isPanelCollapsed:w,reevaluatePanelConstraints:x,registerPanel:S,resizePanel:N,unregisterPanel:C}=L,D=h_(l),H=B.useRef({callbacks:{onCollapse:h,onExpand:p,onResize:v},constraints:{collapsedSize:n,collapsible:r,defaultSize:s,maxSize:c,minSize:f},id:D,idIsFromProps:l!==void 0,order:b});B.useRef({didLogMissingDefaultSizeWarning:!1}),Ao(()=>{const{callbacks:U,constraints:Q}=H.current,k={...Q};H.current.id=D,H.current.idIsFromProps=l!==void 0,H.current.order=b,U.onCollapse=h,U.onExpand=p,U.onResize=v,Q.collapsedSize=n,Q.collapsible=r,Q.defaultSize=s,Q.maxSize=c,Q.minSize=f,(k.collapsedSize!==Q.collapsedSize||k.collapsible!==Q.collapsible||k.maxSize!==Q.maxSize||k.minSize!==Q.minSize)&&x(H.current,k)}),Ao(()=>{const U=H.current;return S(U),()=>{C(U)}},[b,D,S,C]),B.useImperativeHandle(o,()=>({collapse:()=>{j(H.current)},expand:U=>{$(H.current,U)},getId(){return D},getSize(){return Y(H.current)},isCollapsed(){return w(H.current)},isExpanded(){return!w(H.current)},resize:U=>{N(H.current,U)}}),[j,$,Y,w,D,N]);const V=y(H.current,s);return B.createElement(M,{...O,children:t,className:e,id:D,style:{...V,...R},[Vt.groupId]:E,[Vt.panel]:"",[Vt.panelCollapsible]:r||void 0,[Vt.panelId]:D,[Vt.panelSize]:parseFloat(""+V.flexGrow).toFixed(1)})}const Yy=B.forwardRef((t,e)=>B.createElement(tC,{...t,forwardedRef:e}));tC.displayName="Panel";Yy.displayName="forwardRef(Panel)";let Xy=null,tm=-1,oa=null;function TO(t,e){if(e){const n=(e&aC)!==0,r=(e&oC)!==0,s=(e&lC)!==0,o=(e&uC)!==0;if(n)return s?"se-resize":o?"ne-resize":"e-resize";if(r)return s?"sw-resize":o?"nw-resize":"w-resize";if(s)return"s-resize";if(o)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function SO(){oa!==null&&(document.head.removeChild(oa),Xy=null,oa=null,tm=-1)}function J0(t,e){var n,r;const s=TO(t,e);if(Xy!==s){if(Xy=s,oa===null&&(oa=document.createElement("style"),document.head.appendChild(oa)),tm>=0){var o;(o=oa.sheet)===null||o===void 0||o.removeRule(tm)}tm=(n=(r=oa.sheet)===null||r===void 0?void 0:r.insertRule(`*{cursor: ${s} !important;}`))!==null&&n!==void 0?n:-1}}function nC(t){return t.type==="keydown"}function rC(t){return t.type.startsWith("pointer")}function iC(t){return t.type.startsWith("mouse")}function op(t){if(rC(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(iC(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function AO(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function CO(t,e,n){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function kO(t,e){if(t===e)throw new Error("Cannot compare node with itself");const n={a:gT(t),b:gT(e)};let r;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),e=n.b.pop(),r=t;He(r,"Stacking order can only be calculated for elements with a common ancestor");const s={a:pT(mT(n.a)),b:pT(mT(n.b))};if(s.a===s.b){const o=r.childNodes,l={a:n.a.at(-1),b:n.b.at(-1)};let c=o.length;for(;c--;){const f=o[c];if(f===l.a)return 1;if(f===l.b)return-1}}return Math.sign(s.a-s.b)}const RO=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function NO(t){var e;const n=getComputedStyle((e=sC(t))!==null&&e!==void 0?e:t).display;return n==="flex"||n==="inline-flex"}function IO(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||NO(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||RO.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function mT(t){let e=t.length;for(;e--;){const n=t[e];if(He(n,"Missing node"),IO(n))return n}return null}function pT(t){return t&&Number(getComputedStyle(t).zIndex)||0}function gT(t){const e=[];for(;t;)e.push(t),t=sC(t);return e}function sC(t){const{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}const aC=1,oC=2,lC=4,uC=8,DO=AO()==="coarse";let ii=[],ou=!1,la=new Map,lp=new Map;const xd=new Set;function MO(t,e,n,r,s){var o;const{ownerDocument:l}=e,c={direction:n,element:e,hitAreaMargins:r,setResizeHandlerState:s},f=(o=la.get(l))!==null&&o!==void 0?o:0;return la.set(l,f+1),xd.add(c),Am(),function(){var p;lp.delete(t),xd.delete(c);const v=(p=la.get(l))!==null&&p!==void 0?p:1;if(la.set(l,v-1),Am(),v===1&&la.delete(l),ii.includes(c)){const b=ii.indexOf(c);b>=0&&ii.splice(b,1),p_(),s("up",!0,null)}}}function PO(t){const{target:e}=t,{x:n,y:r}=op(t);ou=!0,m_({target:e,x:n,y:r}),Am(),ii.length>0&&(Cm("down",t),t.preventDefault(),cC(e)||t.stopImmediatePropagation())}function ey(t){const{x:e,y:n}=op(t);if(ou&&t.buttons===0&&(ou=!1,Cm("up",t)),!ou){const{target:r}=t;m_({target:r,x:e,y:n})}Cm("move",t),p_(),ii.length>0&&t.preventDefault()}function ty(t){const{target:e}=t,{x:n,y:r}=op(t);lp.clear(),ou=!1,ii.length>0&&(t.preventDefault(),cC(e)||t.stopImmediatePropagation()),Cm("up",t),m_({target:e,x:n,y:r}),p_(),Am()}function cC(t){let e=t;for(;e;){if(e.hasAttribute(Vt.resizeHandle))return!0;e=e.parentElement}return!1}function m_({target:t,x:e,y:n}){ii.splice(0);let r=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(r=t),xd.forEach(s=>{const{element:o,hitAreaMargins:l}=s,c=o.getBoundingClientRect(),{bottom:f,left:h,right:p,top:v}=c,b=DO?l.coarse:l.fine;if(e>=h-b&&e<=p+b&&n>=v-b&&n<=f+b){if(r!==null&&document.contains(r)&&o!==r&&!o.contains(r)&&!r.contains(o)&&kO(r,o)>0){let M=r,O=!1;for(;M&&!M.contains(o);){if(CO(M.getBoundingClientRect(),c)){O=!0;break}M=M.parentElement}if(O)return}ii.push(s)}})}function ny(t,e){lp.set(t,e)}function p_(){let t=!1,e=!1;ii.forEach(r=>{const{direction:s}=r;s==="horizontal"?t=!0:e=!0});let n=0;lp.forEach(r=>{n|=r}),t&&e?J0("intersection",n):t?J0("horizontal",n):e?J0("vertical",n):SO()}let ry;function Am(){var t;(t=ry)===null||t===void 0||t.abort(),ry=new AbortController;const e={capture:!0,signal:ry.signal};xd.size&&(ou?(ii.length>0&&la.forEach((n,r)=>{const{body:s}=r;n>0&&(s.addEventListener("contextmenu",ty,e),s.addEventListener("pointerleave",ey,e),s.addEventListener("pointermove",ey,e))}),la.forEach((n,r)=>{const{body:s}=r;s.addEventListener("pointerup",ty,e),s.addEventListener("pointercancel",ty,e)})):la.forEach((n,r)=>{const{body:s}=r;n>0&&(s.addEventListener("pointerdown",PO,e),s.addEventListener("pointermove",ey,e))}))}function Cm(t,e){xd.forEach(n=>{const{setResizeHandlerState:r}=n,s=ii.includes(n);r(t,s,e)})}function OO(){const[t,e]=B.useState(0);return B.useCallback(()=>e(n=>n+1),[])}function He(t,e){if(!t)throw console.error(e),Error(e)}function Io(t,e,n=f_){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function gs(t,e,n=f_){return Io(t,e,n)===0}function gr(t,e,n){return Io(t,e,n)===0}function VO(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){const s=t[r],o=e[r];if(!gr(s,o,n))return!1}return!0}function Wl({panelConstraints:t,panelIndex:e,size:n}){const r=t[e];He(r!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:s=0,collapsible:o,maxSize:l=100,minSize:c=0}=r;if(Io(n,c)<0)if(o){const f=(s+c)/2;Io(n,f)<0?n=s:n=c}else n=c;return n=Math.min(l,n),n=parseFloat(n.toFixed(f_)),n}function Xc({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:r,prevLayout:s,trigger:o}){if(gr(t,0))return e;const l=[...e],[c,f]=r;He(c!=null,"Invalid first pivot index"),He(f!=null,"Invalid second pivot index");let h=0;if(o==="keyboard"){{const v=t<0?f:c,b=n[v];He(b,`Panel constraints not found for index ${v}`);const{collapsedSize:R=0,collapsible:M,minSize:O=0}=b;if(M){const L=e[v];if(He(L!=null,`Previous layout not found for panel index ${v}`),gr(L,R)){const j=O-L;Io(j,Math.abs(t))>0&&(t=t<0?0-j:j)}}}{const v=t<0?c:f,b=n[v];He(b,`No panel constraints found for index ${v}`);const{collapsedSize:R=0,collapsible:M,minSize:O=0}=b;if(M){const L=e[v];if(He(L!=null,`Previous layout not found for panel index ${v}`),gr(L,O)){const j=L-R;Io(j,Math.abs(t))>0&&(t=t<0?0-j:j)}}}}{const v=t<0?1:-1;let b=t<0?f:c,R=0;for(;;){const O=e[b];He(O!=null,`Previous layout not found for panel index ${b}`);const j=Wl({panelConstraints:n,panelIndex:b,size:100})-O;if(R+=j,b+=v,b<0||b>=n.length)break}const M=Math.min(Math.abs(t),Math.abs(R));t=t<0?0-M:M}{let b=t<0?c:f;for(;b>=0&&b<n.length;){const R=Math.abs(t)-Math.abs(h),M=e[b];He(M!=null,`Previous layout not found for panel index ${b}`);const O=M-R,L=Wl({panelConstraints:n,panelIndex:b,size:O});if(!gr(M,L)&&(h+=M-L,l[b]=L,h.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?b--:b++}}if(VO(s,l))return s;{const v=t<0?f:c,b=e[v];He(b!=null,`Previous layout not found for panel index ${v}`);const R=b+h,M=Wl({panelConstraints:n,panelIndex:v,size:R});if(l[v]=M,!gr(M,R)){let O=R-M,j=t<0?f:c;for(;j>=0&&j<n.length;){const $=l[j];He($!=null,`Previous layout not found for panel index ${j}`);const Y=$+O,y=Wl({panelConstraints:n,panelIndex:j,size:Y});if(gr($,y)||(O-=y-$,l[j]=y),gr(O,0))break;t>0?j--:j++}}}const p=l.reduce((v,b)=>b+v,0);return gr(p,100)?l:s}function LO({layout:t,panelsArray:e,pivotIndices:n}){let r=0,s=100,o=0,l=0;const c=n[0];He(c!=null,"No pivot index found"),e.forEach((v,b)=>{const{constraints:R}=v,{maxSize:M=100,minSize:O=0}=R;b===c?(r=O,s=M):(o+=O,l+=M)});const f=Math.min(s,100-o),h=Math.max(r,100-l),p=t[c];return{valueMax:f,valueMin:h,valueNow:p}}function Td(t,e=document){return Array.from(e.querySelectorAll(`[${Vt.resizeHandleId}][data-panel-group-id="${t}"]`))}function dC(t,e,n=document){const s=Td(t,n).findIndex(o=>o.getAttribute(Vt.resizeHandleId)===e);return s??null}function fC(t,e,n){const r=dC(t,e,n);return r!=null?[r,r+1]:[-1,-1]}function jO(t){return t instanceof HTMLElement?!0:typeof t=="object"&&t!==null&&"tagName"in t&&"getAttribute"in t}function hC(t,e=document){if(jO(e)&&e.dataset.panelGroupId==t)return e;const n=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return n||null}function up(t,e=document){const n=e.querySelector(`[${Vt.resizeHandleId}="${t}"]`);return n||null}function zO(t,e,n,r=document){var s,o,l,c;const f=up(e,r),h=Td(t,r),p=f?h.indexOf(f):-1,v=(s=(o=n[p])===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:null,b=(l=(c=n[p+1])===null||c===void 0?void 0:c.id)!==null&&l!==void 0?l:null;return[v,b]}function UO({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:r,panelDataArray:s,panelGroupElement:o,setLayout:l}){B.useRef({didWarnAboutMissingResizeHandle:!1}),Ao(()=>{if(!o)return;const c=Td(n,o);for(let f=0;f<s.length-1;f++){const{valueMax:h,valueMin:p,valueNow:v}=LO({layout:r,panelsArray:s,pivotIndices:[f,f+1]}),b=c[f];if(b!=null){const R=s[f];He(R,`No panel data found for index "${f}"`),b.setAttribute("aria-controls",R.id),b.setAttribute("aria-valuemax",""+Math.round(h)),b.setAttribute("aria-valuemin",""+Math.round(p)),b.setAttribute("aria-valuenow",v!=null?""+Math.round(v):"")}}return()=>{c.forEach((f,h)=>{f.removeAttribute("aria-controls"),f.removeAttribute("aria-valuemax"),f.removeAttribute("aria-valuemin"),f.removeAttribute("aria-valuenow")})}},[n,r,s,o]),B.useEffect(()=>{if(!o)return;const c=e.current;He(c,"Eager values not found");const{panelDataArray:f}=c,h=hC(n,o);He(h!=null,`No group found for id "${n}"`);const p=Td(n,o);He(p,`No resize handles found for group id "${n}"`);const v=p.map(b=>{const R=b.getAttribute(Vt.resizeHandleId);He(R,"Resize handle element has no handle id attribute");const[M,O]=zO(n,R,f,o);if(M==null||O==null)return()=>{};const L=j=>{if(!j.defaultPrevented)switch(j.key){case"Enter":{j.preventDefault();const $=f.findIndex(Y=>Y.id===M);if($>=0){const Y=f[$];He(Y,`No panel data found for index ${$}`);const y=r[$],{collapsedSize:E=0,collapsible:w,minSize:x=0}=Y.constraints;if(y!=null&&w){const S=Xc({delta:gr(y,E)?x-E:E-y,initialLayout:r,panelConstraints:f.map(N=>N.constraints),pivotIndices:fC(n,R,o),prevLayout:r,trigger:"keyboard"});r!==S&&l(S)}}break}}};return b.addEventListener("keydown",L),()=>{b.removeEventListener("keydown",L)}});return()=>{v.forEach(b=>b())}},[o,t,e,n,r,s,l])}function yT(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function mC(t,e){const n=t==="horizontal",{x:r,y:s}=op(e);return n?r:s}function BO(t,e,n,r,s){const o=n==="horizontal",l=up(e,s);He(l,`No resize handle element found for id "${e}"`);const c=l.getAttribute(Vt.groupId);He(c,"Resize handle element has no group id attribute");let{initialCursorPosition:f}=r;const h=mC(n,t),p=hC(c,s);He(p,`No group element found for id "${c}"`);const v=p.getBoundingClientRect(),b=o?v.width:v.height;return(h-f)/b*100}function HO(t,e,n,r,s,o){if(nC(t)){const l=n==="horizontal";let c=0;t.shiftKey?c=100:s!=null?c=s:c=10;let f=0;switch(t.key){case"ArrowDown":f=l?0:c;break;case"ArrowLeft":f=l?-c:0;break;case"ArrowRight":f=l?c:0;break;case"ArrowUp":f=l?0:-c;break;case"End":f=100;break;case"Home":f=-100;break}return f}else return r==null?0:BO(t,e,n,r,o)}function $O({panelDataArray:t}){const e=Array(t.length),n=t.map(o=>o.constraints);let r=0,s=100;for(let o=0;o<t.length;o++){const l=n[o];He(l,`Panel constraints not found for index ${o}`);const{defaultSize:c}=l;c!=null&&(r++,e[o]=c,s-=c)}for(let o=0;o<t.length;o++){const l=n[o];He(l,`Panel constraints not found for index ${o}`);const{defaultSize:c}=l;if(c!=null)continue;const f=t.length-r,h=s/f;r++,e[o]=h,s-=h}return e}function Bl(t,e,n){e.forEach((r,s)=>{const o=t[s];He(o,`Panel data not found for index ${s}`);const{callbacks:l,constraints:c,id:f}=o,{collapsedSize:h=0,collapsible:p}=c,v=n[f];if(v==null||r!==v){n[f]=r;const{onCollapse:b,onExpand:R,onResize:M}=l;M&&M(r,v),p&&(b||R)&&(R&&(v==null||gs(v,h))&&!gs(r,h)&&R(),b&&(v==null||!gs(v,h))&&gs(r,h)&&b())}})}function jh(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function FO({defaultSize:t,dragState:e,layout:n,panelData:r,panelIndex:s,precision:o=3}){const l=n[s];let c;return l==null?c=t!=null?t.toPrecision(o):"1":r.length===1?c="1":c=l.toPrecision(o),{flexBasis:0,flexGrow:c,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function qO(t,e=10){let n=null;return(...s)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...s)},e)}}function vT(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function pC(t){return`react-resizable-panels:${t}`}function gC(t){return t.map(e=>{const{constraints:n,id:r,idIsFromProps:s,order:o}=e;return s?r:o?`${o}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function yC(t,e){try{const n=pC(t),r=e.getItem(n);if(r){const s=JSON.parse(r);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function GO(t,e,n){var r,s;const o=(r=yC(t,n))!==null&&r!==void 0?r:{},l=gC(e);return(s=o[l])!==null&&s!==void 0?s:null}function KO(t,e,n,r,s){var o;const l=pC(t),c=gC(e),f=(o=yC(t,s))!==null&&o!==void 0?o:{};f[c]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{s.setItem(l,JSON.stringify(f))}catch(h){console.error(h)}}function _T({layout:t,panelConstraints:e}){const n=[...t],r=n.reduce((o,l)=>o+l,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(o=>`${o}%`).join(", ")}`);if(!gr(r,100)&&n.length>0)for(let o=0;o<e.length;o++){const l=n[o];He(l!=null,`No layout data found for index ${o}`);const c=100/r*l;n[o]=c}let s=0;for(let o=0;o<e.length;o++){const l=n[o];He(l!=null,`No layout data found for index ${o}`);const c=Wl({panelConstraints:e,panelIndex:o,size:l});l!=c&&(s+=l-c,n[o]=c)}if(!gr(s,0))for(let o=0;o<e.length;o++){const l=n[o];He(l!=null,`No layout data found for index ${o}`);const c=l+s,f=Wl({panelConstraints:e,panelIndex:o,size:c});if(l!==f&&(s-=f-l,n[o]=f,gr(s,0)))break}return n}const YO=100,Wc={getItem:t=>(vT(Wc),Wc.getItem(t)),setItem:(t,e)=>{vT(Wc),Wc.setItem(t,e)}},bT={};function vC({autoSaveId:t=null,children:e,className:n="",direction:r,forwardedRef:s,id:o=null,onLayout:l=null,keyboardResizeBy:c=null,storage:f=Wc,style:h,tagName:p="div",...v}){const b=h_(o),R=B.useRef(null),[M,O]=B.useState(null),[L,j]=B.useState([]),$=OO(),Y=B.useRef({}),y=B.useRef(new Map),E=B.useRef(0),w=B.useRef({autoSaveId:t,direction:r,dragState:M,id:b,keyboardResizeBy:c,onLayout:l,storage:f}),x=B.useRef({layout:L,panelDataArray:[],panelDataArrayChanged:!1});B.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),B.useImperativeHandle(s,()=>({getId:()=>w.current.id,getLayout:()=>{const{layout:J}=x.current;return J},setLayout:J=>{const{onLayout:ee}=w.current,{layout:ae,panelDataArray:le}=x.current,fe=_T({layout:J,panelConstraints:le.map(he=>he.constraints)});yT(ae,fe)||(j(fe),x.current.layout=fe,ee&&ee(fe),Bl(le,fe,Y.current))}}),[]),Ao(()=>{w.current.autoSaveId=t,w.current.direction=r,w.current.dragState=M,w.current.id=b,w.current.onLayout=l,w.current.storage=f}),UO({committedValuesRef:w,eagerValuesRef:x,groupId:b,layout:L,panelDataArray:x.current.panelDataArray,setLayout:j,panelGroupElement:R.current}),B.useEffect(()=>{const{panelDataArray:J}=x.current;if(t){if(L.length===0||L.length!==J.length)return;let ee=bT[t];ee==null&&(ee=qO(KO,YO),bT[t]=ee);const ae=[...J],le=new Map(y.current);ee(t,ae,le,L,f)}},[t,L,f]),B.useEffect(()=>{});const S=B.useCallback(J=>{const{onLayout:ee}=w.current,{layout:ae,panelDataArray:le}=x.current;if(J.constraints.collapsible){const fe=le.map($e=>$e.constraints),{collapsedSize:he=0,panelSize:Ee,pivotIndices:Ae}=ho(le,J,ae);if(He(Ee!=null,`Panel size not found for panel "${J.id}"`),!gs(Ee,he)){y.current.set(J.id,Ee);const Ye=Fl(le,J)===le.length-1?Ee-he:he-Ee,Ve=Xc({delta:Ye,initialLayout:ae,panelConstraints:fe,pivotIndices:Ae,prevLayout:ae,trigger:"imperative-api"});jh(ae,Ve)||(j(Ve),x.current.layout=Ve,ee&&ee(Ve),Bl(le,Ve,Y.current))}}},[]),N=B.useCallback((J,ee)=>{const{onLayout:ae}=w.current,{layout:le,panelDataArray:fe}=x.current;if(J.constraints.collapsible){const he=fe.map(st=>st.constraints),{collapsedSize:Ee=0,panelSize:Ae=0,minSize:$e=0,pivotIndices:Ye}=ho(fe,J,le),Ve=ee??$e;if(gs(Ae,Ee)){const st=y.current.get(J.id),at=st!=null&&st>=Ve?st:Ve,Le=Fl(fe,J)===fe.length-1?Ae-at:at-Ae,we=Xc({delta:Le,initialLayout:le,panelConstraints:he,pivotIndices:Ye,prevLayout:le,trigger:"imperative-api"});jh(le,we)||(j(we),x.current.layout=we,ae&&ae(we),Bl(fe,we,Y.current))}}},[]),C=B.useCallback(J=>{const{layout:ee,panelDataArray:ae}=x.current,{panelSize:le}=ho(ae,J,ee);return He(le!=null,`Panel size not found for panel "${J.id}"`),le},[]),D=B.useCallback((J,ee)=>{const{panelDataArray:ae}=x.current,le=Fl(ae,J);return FO({defaultSize:ee,dragState:M,layout:L,panelData:ae,panelIndex:le})},[M,L]),H=B.useCallback(J=>{const{layout:ee,panelDataArray:ae}=x.current,{collapsedSize:le=0,collapsible:fe,panelSize:he}=ho(ae,J,ee);return He(he!=null,`Panel size not found for panel "${J.id}"`),fe===!0&&gs(he,le)},[]),V=B.useCallback(J=>{const{layout:ee,panelDataArray:ae}=x.current,{collapsedSize:le=0,collapsible:fe,panelSize:he}=ho(ae,J,ee);return He(he!=null,`Panel size not found for panel "${J.id}"`),!fe||Io(he,le)>0},[]),U=B.useCallback(J=>{const{panelDataArray:ee}=x.current;ee.push(J),ee.sort((ae,le)=>{const fe=ae.order,he=le.order;return fe==null&&he==null?0:fe==null?-1:he==null?1:fe-he}),x.current.panelDataArrayChanged=!0,$()},[$]);Ao(()=>{if(x.current.panelDataArrayChanged){x.current.panelDataArrayChanged=!1;const{autoSaveId:J,onLayout:ee,storage:ae}=w.current,{layout:le,panelDataArray:fe}=x.current;let he=null;if(J){const Ae=GO(J,fe,ae);Ae&&(y.current=new Map(Object.entries(Ae.expandToSizes)),he=Ae.layout)}he==null&&(he=$O({panelDataArray:fe}));const Ee=_T({layout:he,panelConstraints:fe.map(Ae=>Ae.constraints)});yT(le,Ee)||(j(Ee),x.current.layout=Ee,ee&&ee(Ee),Bl(fe,Ee,Y.current))}}),Ao(()=>{const J=x.current;return()=>{J.layout=[]}},[]);const Q=B.useCallback(J=>{let ee=!1;const ae=R.current;return ae&&window.getComputedStyle(ae,null).getPropertyValue("direction")==="rtl"&&(ee=!0),function(fe){fe.preventDefault();const he=R.current;if(!he)return()=>null;const{direction:Ee,dragState:Ae,id:$e,keyboardResizeBy:Ye,onLayout:Ve}=w.current,{layout:st,panelDataArray:at}=x.current,{initialLayout:jt}=Ae??{},Le=fC($e,J,he);let we=HO(fe,J,Ee,Ae,Ye,he);const Xe=Ee==="horizontal";Xe&&ee&&(we=-we);const An=at.map(On=>On.constraints),Zt=Xc({delta:we,initialLayout:jt??st,panelConstraints:An,pivotIndices:Le,prevLayout:st,trigger:nC(fe)?"keyboard":"mouse-or-touch"}),ir=!jh(st,Zt);(rC(fe)||iC(fe))&&E.current!=we&&(E.current=we,!ir&&we!==0?Xe?ny(J,we<0?aC:oC):ny(J,we<0?lC:uC):ny(J,0)),ir&&(j(Zt),x.current.layout=Zt,Ve&&Ve(Zt),Bl(at,Zt,Y.current))}},[]),k=B.useCallback((J,ee)=>{const{onLayout:ae}=w.current,{layout:le,panelDataArray:fe}=x.current,he=fe.map(st=>st.constraints),{panelSize:Ee,pivotIndices:Ae}=ho(fe,J,le);He(Ee!=null,`Panel size not found for panel "${J.id}"`);const Ye=Fl(fe,J)===fe.length-1?Ee-ee:ee-Ee,Ve=Xc({delta:Ye,initialLayout:le,panelConstraints:he,pivotIndices:Ae,prevLayout:le,trigger:"imperative-api"});jh(le,Ve)||(j(Ve),x.current.layout=Ve,ae&&ae(Ve),Bl(fe,Ve,Y.current))},[]),F=B.useCallback((J,ee)=>{const{layout:ae,panelDataArray:le}=x.current,{collapsedSize:fe=0,collapsible:he}=ee,{collapsedSize:Ee=0,collapsible:Ae,maxSize:$e=100,minSize:Ye=0}=J.constraints,{panelSize:Ve}=ho(le,J,ae);Ve!=null&&(he&&Ae&&gs(Ve,fe)?gs(fe,Ee)||k(J,Ee):Ve<Ye?k(J,Ye):Ve>$e&&k(J,$e))},[k]),G=B.useCallback((J,ee)=>{const{direction:ae}=w.current,{layout:le}=x.current;if(!R.current)return;const fe=up(J,R.current);He(fe,`Drag handle element not found for id "${J}"`);const he=mC(ae,ee);O({dragHandleId:J,dragHandleRect:fe.getBoundingClientRect(),initialCursorPosition:he,initialLayout:le})},[]),X=B.useCallback(()=>{O(null)},[]),z=B.useCallback(J=>{const{panelDataArray:ee}=x.current,ae=Fl(ee,J);ae>=0&&(ee.splice(ae,1),delete Y.current[J.id],x.current.panelDataArrayChanged=!0,$())},[$]),W=B.useMemo(()=>({collapsePanel:S,direction:r,dragState:M,expandPanel:N,getPanelSize:C,getPanelStyle:D,groupId:b,isPanelCollapsed:H,isPanelExpanded:V,reevaluatePanelConstraints:F,registerPanel:U,registerResizeHandle:Q,resizePanel:k,startDragging:G,stopDragging:X,unregisterPanel:z,panelGroupElement:R.current}),[S,M,r,N,C,D,b,H,V,F,U,Q,k,G,X,z]),ne={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return B.createElement(ap.Provider,{value:W},B.createElement(p,{...v,children:e,className:n,id:o,ref:R,style:{...ne,...h},[Vt.group]:"",[Vt.groupDirection]:r,[Vt.groupId]:b}))}const _C=B.forwardRef((t,e)=>B.createElement(vC,{...t,forwardedRef:e}));vC.displayName="PanelGroup";_C.displayName="forwardRef(PanelGroup)";function Fl(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function ho(t,e,n){const r=Fl(t,e),o=r===t.length-1?[r-1,r]:[r,r+1],l=n[r];return{...e.constraints,panelSize:l,pivotIndices:o}}function XO({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:r}){B.useEffect(()=>{if(t||n==null||r==null)return;const s=up(e,r);if(s==null)return;const o=l=>{if(!l.defaultPrevented)switch(l.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{l.preventDefault(),n(l);break}case"F6":{l.preventDefault();const c=s.getAttribute(Vt.groupId);He(c,`No group element found for id "${c}"`);const f=Td(c,r),h=dC(c,e,r);He(h!==null,`No resize element found for id "${e}"`);const p=l.shiftKey?h>0?h-1:f.length-1:h+1<f.length?h+1:0;f[p].focus();break}}};return s.addEventListener("keydown",o),()=>{s.removeEventListener("keydown",o)}},[r,t,e,n])}function bC({children:t=null,className:e="",disabled:n=!1,hitAreaMargins:r,id:s,onBlur:o,onClick:l,onDragging:c,onFocus:f,onPointerDown:h,onPointerUp:p,style:v={},tabIndex:b=0,tagName:R="div",...M}){var O,L;const j=B.useRef(null),$=B.useRef({onClick:l,onDragging:c,onPointerDown:h,onPointerUp:p});B.useEffect(()=>{$.current.onClick=l,$.current.onDragging=c,$.current.onPointerDown=h,$.current.onPointerUp=p});const Y=B.useContext(ap);if(Y===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:y,groupId:E,registerResizeHandle:w,startDragging:x,stopDragging:S,panelGroupElement:N}=Y,C=h_(s),[D,H]=B.useState("inactive"),[V,U]=B.useState(!1),[Q,k]=B.useState(null),F=B.useRef({state:D});Ao(()=>{F.current.state=D}),B.useEffect(()=>{if(n)k(null);else{const W=w(C);k(()=>W)}},[n,C,w]);const G=(O=r?.coarse)!==null&&O!==void 0?O:15,X=(L=r?.fine)!==null&&L!==void 0?L:5;B.useEffect(()=>{if(n||Q==null)return;const W=j.current;He(W,"Element ref not attached");let ne=!1;return MO(C,W,y,{coarse:G,fine:X},(ee,ae,le)=>{if(!ae){H("inactive");return}switch(ee){case"down":{H("drag"),ne=!1,He(le,'Expected event to be defined for "down" action'),x(C,le);const{onDragging:fe,onPointerDown:he}=$.current;fe?.(!0),he?.();break}case"move":{const{state:fe}=F.current;ne=!0,fe!=="drag"&&H("hover"),He(le,'Expected event to be defined for "move" action'),Q(le);break}case"up":{H("hover"),S();const{onClick:fe,onDragging:he,onPointerUp:Ee}=$.current;he?.(!1),Ee?.(),ne||fe?.();break}}})},[G,y,n,X,w,C,Q,x,S]),XO({disabled:n,handleId:C,resizeHandler:Q,panelGroupElement:N});const z={touchAction:"none",userSelect:"none"};return B.createElement(R,{...M,children:t,className:e,id:s,onBlur:()=>{U(!1),o?.()},onFocus:()=>{U(!0),f?.()},ref:j,role:"separator",style:{...z,...v},tabIndex:b,[Vt.groupDirection]:y,[Vt.groupId]:E,[Vt.resizeHandle]:"",[Vt.resizeHandleActive]:D==="drag"?"pointer":V?"keyboard":void 0,[Vt.resizeHandleEnabled]:!n,[Vt.resizeHandleId]:C,[Vt.resizeHandleState]:D})}bC.displayName="PanelResizeHandle";const WO=t=>{const e=[],n=t.split("_");for(let r=0;r<n.length;r++)if(r%2===0)n[r].split(/\s+/).filter(o=>o.trim()!=="").forEach(o=>{e.push({word:o.trim()})});else{const s=n[r].trim();s.split(/\s+/).filter(l=>l.trim()!=="").forEach(l=>{e.push({word:l.trim(),myConcept:s})})}return e},wT=()=>{const t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];return t[Math.floor(Math.random()*t.length)]},ET=(t,e)=>{if(!t)return"#000000";let n=t.startsWith("#")?t.slice(1):t,r=parseInt(n.slice(0,2),16),s=parseInt(n.slice(2,4),16),o=parseInt(n.slice(4,6),16);const l=f=>Math.max(0,Math.min(255,f)),c=1-e;return r=l(Math.round(r*c)),s=l(Math.round(s*c)),o=l(Math.round(o*c)),`#${[r,s,o].map(f=>f.toString(16).padStart(2,"0")).join("")}`},QO=t=>{const e=t.replace("#",""),n=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),s=parseInt(e.substr(4,2),16),o=30,l=Math.min(255,Math.max(0,n+(Math.random()-.5)*o*2)),c=Math.min(255,Math.max(0,r+(Math.random()-.5)*o*2)),f=Math.min(255,Math.max(0,s+(Math.random()-.5)*o*2));return`#${Math.round(l).toString(16).padStart(2,"0")}${Math.round(c).toString(16).padStart(2,"0")}${Math.round(f).toString(16).padStart(2,"0")}`},ZO=t=>{const s=(Math.random()-.5)*400*2,o=(Math.random()-.5)*30*2;return{x:t.x+s,y:t.y+650+o}},JO=()=>`node_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,eV=(t,e)=>`edge_${t}_${e}`,tV=(t,e,n,r,s,o,l)=>({id:JO(),type:"draggableEditable",position:t,draggable:!0,data:{label:e,title:e,summary:r,full_text:n,suggestions:[],myColor:s,tokenColors:{},previousNode:l}}),nV=(t,e,n,r)=>({id:eV(t,e),source:t,target:e,sourceHandle:r,targetHandle:null,style:{stroke:n,strokeWidth:3},markerEnd:{type:No.ArrowClosed,color:n}}),rV="modulepreload",iV=function(t){return"/"+t},xT={},g_=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let f=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");s=f(n.map(h=>{if(h=iV(h),h in xT)return;xT[h]=!0;const p=h.endsWith(".css"),v=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${v}`))return;const b=document.createElement("link");if(b.rel=p?"stylesheet":rV,p||(b.as="script"),b.crossOrigin="",b.href=h,c&&b.setAttribute("nonce",c),document.head.appendChild(b),p)return new Promise((R,M)=>{b.addEventListener("load",R),b.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return s.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},sV=()=>{};var TT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},aV=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],c=t[n++],f=((s&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const o=t[n++],l=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},EC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,c=l?t[s+1]:0,f=s+2<t.length,h=f?t[s+2]:0,p=o>>2,v=(o&3)<<4|c>>4;let b=(c&15)<<2|h>>6,R=h&63;f||(R=64,l||(b=64)),r.push(n[p],n[v],n[b],n[R])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):aV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const v=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||c==null||h==null||v==null)throw new oV;const b=o<<2|c>>4;if(r.push(b),h!==64){const R=c<<4&240|h>>2;if(r.push(R),v!==64){const M=h<<6&192|v;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class oV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lV=function(t){const e=wC(t);return EC.encodeByteArray(e,!0)},km=function(t){return lV(t).replace(/\./g,"")},xC=function(t){try{return EC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV=()=>uV().__FIREBASE_DEFAULTS__,dV=()=>{if(typeof process>"u"||typeof TT>"u")return;const t=TT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&xC(t[1]);return e&&JSON.parse(e)},cp=()=>{try{return sV()||cV()||dV()||fV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},TC=t=>{var e,n;return(n=(e=cp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},SC=t=>{const e=TC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},AC=()=>{var t;return(t=cp())===null||t===void 0?void 0:t.config},CC=t=>{var e;return(e=cp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(t){return t.endsWith(".cloudworkstations.dev")}async function y_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mV(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[km(JSON.stringify(n)),km(JSON.stringify(l)),""].join(".")}const rd={};function pV(){const t={prod:[],emulator:[]};for(const e of Object.keys(rd))rd[e]?t.emulator.push(e):t.prod.push(e);return t}function gV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ST=!1;function v_(t,e){if(typeof window>"u"||typeof document>"u"||!Uo(window.location.host)||rd[t]===e||rd[t]||ST)return;rd[t]=e;function n(b){return`__firebase__banner__${b}`}const r="__firebase__banner",o=pV().prod.length>0;function l(){const b=document.getElementById(r);b&&b.remove()}function c(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function f(b,R){b.setAttribute("width","24"),b.setAttribute("id",R),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function h(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{ST=!0,l()},b}function p(b,R){b.setAttribute("id",R),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function v(){const b=gV(r),R=n("text"),M=document.getElementById(R)||document.createElement("span"),O=n("learnmore"),L=document.getElementById(O)||document.createElement("a"),j=n("preprendIcon"),$=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const Y=b.element;c(Y),p(L,O);const y=h();f($,j),Y.append($,M,L,y),document.body.appendChild(Y)}o?(M.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pn())}function vV(){var t;const e=(t=cp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _V(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bV(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function wV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function EV(){const t=Pn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xV(){return!vV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TV(){try{return typeof indexedDB=="object"}catch{return!1}}function SV(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV="FirebaseError";class Fi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=AV,Object.setPrototypeOf(this,Fi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yd.prototype.create)}}class Yd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?CV(o,r):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new Fi(s,c,r)}}function CV(t,e){return t.replace(kV,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const kV=/\{\$([^}]+)}/g;function RV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Do(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],l=e[s];if(AT(o)&&AT(l)){if(!Do(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function AT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Qc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Zc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function NV(t,e){const n=new IV(t,e);return n.subscribe.bind(n)}class IV{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");DV(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=iy),s.error===void 0&&(s.error=iy),s.complete===void 0&&(s.complete=iy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DV(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function iy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(t){return t&&t._delegate?t._delegate:t}class Ea{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new hV;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OV(e))try{this.getOrInitializeService({instanceIdentifier:yo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=yo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yo){return this.instances.has(e)}getOptions(e=yo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:PV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=yo){return this.component?this.component.multipleInstances?e:yo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PV(t){return t===yo?void 0:t}function OV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new MV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Je||(Je={}));const LV={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},jV=Je.INFO,zV={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},UV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=zV[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class __{constructor(e){this.name=e,this._logLevel=jV,this._logHandler=UV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const BV=(t,e)=>e.some(n=>t instanceof n);let CT,kT;function HV(){return CT||(CT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $V(){return kT||(kT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kC=new WeakMap,Wy=new WeakMap,RC=new WeakMap,sy=new WeakMap,b_=new WeakMap;function FV(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(ga(t.result)),s()},l=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&kC.set(n,t)}).catch(()=>{}),b_.set(e,t),e}function qV(t){if(Wy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Wy.set(t,e)}let Qy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||RC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ga(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function GV(t){Qy=t(Qy)}function KV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ay(this),e,...n);return RC.set(r,e.sort?e.sort():[e]),ga(r)}:$V().includes(t)?function(...e){return t.apply(ay(this),e),ga(kC.get(this))}:function(...e){return ga(t.apply(ay(this),e))}}function YV(t){return typeof t=="function"?KV(t):(t instanceof IDBTransaction&&qV(t),BV(t,HV())?new Proxy(t,Qy):t)}function ga(t){if(t instanceof IDBRequest)return FV(t);if(sy.has(t))return sy.get(t);const e=YV(t);return e!==t&&(sy.set(t,e),b_.set(e,t)),e}const ay=t=>b_.get(t);function XV(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),c=ga(l);return r&&l.addEventListener("upgradeneeded",f=>{r(ga(l.result),f.oldVersion,f.newVersion,ga(l.transaction),f)}),n&&l.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),c.then(f=>{o&&f.addEventListener("close",()=>o()),s&&f.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const WV=["get","getKey","getAll","getAllKeys","count"],QV=["put","add","delete","clear"],oy=new Map;function RT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(oy.get(e))return oy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=QV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||WV.includes(n)))return;const o=async function(l,...c){const f=this.transaction(l,s?"readwrite":"readonly");let h=f.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&f.done]))[0]};return oy.set(e,o),o}GV(t=>({...t,get:(e,n,r)=>RT(e,n)||t.get(e,n,r),has:(e,n)=>!!RT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(JV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function JV(t){const e=t.getComponent();return e?.type==="VERSION"}const Zy="@firebase/app",NT="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new __("@firebase/app"),eL="@firebase/app-compat",tL="@firebase/analytics-compat",nL="@firebase/analytics",rL="@firebase/app-check-compat",iL="@firebase/app-check",sL="@firebase/auth",aL="@firebase/auth-compat",oL="@firebase/database",lL="@firebase/data-connect",uL="@firebase/database-compat",cL="@firebase/functions",dL="@firebase/functions-compat",fL="@firebase/installations",hL="@firebase/installations-compat",mL="@firebase/messaging",pL="@firebase/messaging-compat",gL="@firebase/performance",yL="@firebase/performance-compat",vL="@firebase/remote-config",_L="@firebase/remote-config-compat",bL="@firebase/storage",wL="@firebase/storage-compat",EL="@firebase/firestore",xL="@firebase/ai",TL="@firebase/firestore-compat",SL="firebase",AL="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="[DEFAULT]",CL={[Zy]:"fire-core",[eL]:"fire-core-compat",[nL]:"fire-analytics",[tL]:"fire-analytics-compat",[iL]:"fire-app-check",[rL]:"fire-app-check-compat",[sL]:"fire-auth",[aL]:"fire-auth-compat",[oL]:"fire-rtdb",[lL]:"fire-data-connect",[uL]:"fire-rtdb-compat",[cL]:"fire-fn",[dL]:"fire-fn-compat",[fL]:"fire-iid",[hL]:"fire-iid-compat",[mL]:"fire-fcm",[pL]:"fire-fcm-compat",[gL]:"fire-perf",[yL]:"fire-perf-compat",[vL]:"fire-rc",[_L]:"fire-rc-compat",[bL]:"fire-gcs",[wL]:"fire-gcs-compat",[EL]:"fire-fst",[TL]:"fire-fst-compat",[xL]:"fire-vertex","fire-js":"fire-js",[SL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm=new Map,kL=new Map,ev=new Map;function IT(t,e){try{t.container.addComponent(e)}catch(n){xs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Mo(t){const e=t.name;if(ev.has(e))return xs.debug(`There were multiple attempts to register component ${e}.`),!1;ev.set(e,t);for(const n of Rm.values())IT(n,t);for(const n of kL.values())IT(n,t);return!0}function dp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function vr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ya=new Yd("app","Firebase",RL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ea("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ya.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au=AL;function NC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Jy,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw ya.create("bad-app-name",{appName:String(s)});if(n||(n=AC()),!n)throw ya.create("no-options");const o=Rm.get(s);if(o){if(Do(n,o.options)&&Do(r,o.config))return o;throw ya.create("duplicate-app",{appName:s})}const l=new VV(s);for(const f of ev.values())l.addComponent(f);const c=new NL(n,r,l);return Rm.set(s,c),c}function w_(t=Jy){const e=Rm.get(t);if(!e&&t===Jy&&AC())return NC();if(!e)throw ya.create("no-app",{appName:t});return e}function Mi(t,e,n){var r;let s=(r=CL[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xs.warn(c.join(" "));return}Mo(new Ea(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL="firebase-heartbeat-database",DL=1,Sd="firebase-heartbeat-store";let ly=null;function IC(){return ly||(ly=XV(IL,DL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Sd)}catch(n){console.warn(n)}}}}).catch(t=>{throw ya.create("idb-open",{originalErrorMessage:t.message})})),ly}async function ML(t){try{const n=(await IC()).transaction(Sd),r=await n.objectStore(Sd).get(DC(t));return await n.done,r}catch(e){if(e instanceof Fi)xs.warn(e.message);else{const n=ya.create("idb-get",{originalErrorMessage:e?.message});xs.warn(n.message)}}}async function DT(t,e){try{const r=(await IC()).transaction(Sd,"readwrite");await r.objectStore(Sd).put(e,DC(t)),await r.done}catch(n){if(n instanceof Fi)xs.warn(n.message);else{const r=ya.create("idb-set",{originalErrorMessage:n?.message});xs.warn(r.message)}}}function DC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL=1024,OL=30;class VL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jL(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=MT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>OL){const l=zL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){xs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=MT(),{heartbeatsToSend:r,unsentEntries:s}=LL(this._heartbeatsCache.heartbeats),o=km(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return xs.warn(n),""}}}function MT(){return new Date().toISOString().substring(0,10)}function LL(t,e=PL){const n=[];let r=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),PT(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),PT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class jL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TV()?SV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ML(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return DT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return DT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function PT(t){return km(JSON.stringify({version:2,heartbeats:t})).length}function zL(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UL(t){Mo(new Ea("platform-logger",e=>new ZV(e),"PRIVATE")),Mo(new Ea("heartbeat",e=>new VL(e),"PRIVATE")),Mi(Zy,NT,t),Mi(Zy,NT,"esm2017"),Mi("fire-js","")}UL("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL="type.googleapis.com/google.protobuf.Int64Value",HL="type.googleapis.com/google.protobuf.UInt64Value";function MC(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Nm(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Nm(e));if(typeof t=="function"||typeof t=="object")return MC(t,e=>Nm(e));throw new Error("Data cannot be encoded in JSON: "+t)}function gu(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case BL:case HL:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>gu(e)):typeof t=="function"||typeof t=="object"?MC(t,e=>gu(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tr extends Fi{constructor(e,n,r){super(`${E_}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,tr.prototype)}}function $L(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Im(t,e){let n=$L(t),r=n,s;try{const o=e&&e.error;if(o){const l=o.status;if(typeof l=="string"){if(!OT[l])return new tr("internal","internal");n=OT[l],r=l}const c=o.message;typeof c=="string"&&(r=c),s=o.details,s!==void 0&&(s=gu(s))}}catch{}return n==="ok"?null:new tr(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,vr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||s?.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="us-central1",qL=/^data: (.*?)(?:\n|$)/;function GL(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new tr("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class KL{constructor(e,n,r,s,o=tv,l=(...c)=>fetch(...c)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new FL(e,n,r,s),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(o);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=tv}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function YL(t,e,n){const r=Uo(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(y_(t.emulatorOrigin),v_("Functions",!0))}function XL(t,e,n){const r=s=>QL(t,e,s,{});return r.stream=(s,o)=>JL(t,e,s,o),r}async function WL(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await s.json()}catch{}return{status:s.status,json:o}}async function PC(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function QL(t,e,n,r){const s=t._url(e);return ZL(t,s,n,r)}async function ZL(t,e,n,r){n=Nm(n);const s={data:n},o=await PC(t,r),l=r.timeout||7e4,c=GL(l),f=await Promise.race([WL(e,s,o,t.fetchImpl),c.promise,t.cancelAllRequests]);if(c.cancel(),!f)throw new tr("cancelled","Firebase Functions instance was deleted.");const h=Im(f.status,f.json);if(h)throw h;if(!f.json)throw new tr("internal","Response is not valid JSON object.");let p=f.json.data;if(typeof p>"u"&&(p=f.json.result),typeof p>"u")throw new tr("internal","Response is missing data field.");return{data:gu(p)}}function JL(t,e,n,r){const s=t._url(e);return e9(t,s,n,r||{})}async function e9(t,e,n,r){var s;n=Nm(n);const o={data:n},l=await PC(t,r);l["Content-Type"]="application/json",l.Accept="text/event-stream";let c;try{c=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:l,signal:r?.signal})}catch(R){if(R instanceof Error&&R.name==="AbortError"){const O=new tr("cancelled","Request was cancelled.");return{data:Promise.reject(O),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(O)}}}}}}const M=Im(0,null);return{data:Promise.reject(M),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(M)}}}}}}let f,h;const p=new Promise((R,M)=>{f=R,h=M});(s=r?.signal)===null||s===void 0||s.addEventListener("abort",()=>{const R=new tr("cancelled","Request was cancelled.");h(R)});const v=c.body.getReader(),b=t9(v,f,h,r?.signal);return{stream:{[Symbol.asyncIterator](){const R=b.getReader();return{async next(){const{value:M,done:O}=await R.read();return{value:M,done:O}},async return(){return await R.cancel(),{done:!0,value:void 0}}}}},data:p}}function t9(t,e,n,r){const s=(l,c)=>{const f=l.match(qL);if(!f)return;const h=f[1];try{const p=JSON.parse(h);if("result"in p){e(gu(p.result));return}if("message"in p){c.enqueue(gu(p.message));return}if("error"in p){const v=Im(0,p);c.error(v),n(v);return}}catch(p){if(p instanceof tr){c.error(p),n(p);return}}},o=new TextDecoder;return new ReadableStream({start(l){let c="";return f();async function f(){if(r?.aborted){const h=new tr("cancelled","Request was cancelled");return l.error(h),n(h),Promise.resolve()}try{const{value:h,done:p}=await t.read();if(p){c.trim()&&s(c.trim(),l),l.close();return}if(r?.aborted){const b=new tr("cancelled","Request was cancelled");l.error(b),n(b),await t.cancel();return}c+=o.decode(h,{stream:!0});const v=c.split(`
`);c=v.pop()||"";for(const b of v)b.trim()&&s(b.trim(),l);return f()}catch(h){const p=h instanceof tr?h:Im(0,null);l.error(p),n(p)}}},cancel(){return t.cancel()}})}const VT="@firebase/functions",LT="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9="auth-internal",r9="app-check-internal",i9="messaging-internal";function s9(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),o=n.getProvider(n9),l=n.getProvider(i9),c=n.getProvider(r9);return new KL(s,o,l,c,r)};Mo(new Ea(E_,e,"PUBLIC").setMultipleInstances(!0)),Mi(VT,LT,t),Mi(VT,LT,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a9(t=w_(),e=tv){const r=dp(Nt(t),E_).getImmediate({identifier:e}),s=SC("functions");return s&&OC(r,...s),r}function OC(t,e,n){YL(Nt(t),e,n)}function VC(t,e,n){return XL(Nt(t),e)}s9();var o9="firebase",l9="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mi(o9,l9,"app");var jT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var va,LC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,S){function N(){}N.prototype=S.prototype,x.D=S.prototype,x.prototype=new N,x.prototype.constructor=x,x.C=function(C,D,H){for(var V=Array(arguments.length-2),U=2;U<arguments.length;U++)V[U-2]=arguments[U];return S.prototype[D].apply(C,V)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,S,N){N||(N=0);var C=Array(16);if(typeof S=="string")for(var D=0;16>D;++D)C[D]=S.charCodeAt(N++)|S.charCodeAt(N++)<<8|S.charCodeAt(N++)<<16|S.charCodeAt(N++)<<24;else for(D=0;16>D;++D)C[D]=S[N++]|S[N++]<<8|S[N++]<<16|S[N++]<<24;S=x.g[0],N=x.g[1],D=x.g[2];var H=x.g[3],V=S+(H^N&(D^H))+C[0]+3614090360&4294967295;S=N+(V<<7&4294967295|V>>>25),V=H+(D^S&(N^D))+C[1]+3905402710&4294967295,H=S+(V<<12&4294967295|V>>>20),V=D+(N^H&(S^N))+C[2]+606105819&4294967295,D=H+(V<<17&4294967295|V>>>15),V=N+(S^D&(H^S))+C[3]+3250441966&4294967295,N=D+(V<<22&4294967295|V>>>10),V=S+(H^N&(D^H))+C[4]+4118548399&4294967295,S=N+(V<<7&4294967295|V>>>25),V=H+(D^S&(N^D))+C[5]+1200080426&4294967295,H=S+(V<<12&4294967295|V>>>20),V=D+(N^H&(S^N))+C[6]+2821735955&4294967295,D=H+(V<<17&4294967295|V>>>15),V=N+(S^D&(H^S))+C[7]+4249261313&4294967295,N=D+(V<<22&4294967295|V>>>10),V=S+(H^N&(D^H))+C[8]+1770035416&4294967295,S=N+(V<<7&4294967295|V>>>25),V=H+(D^S&(N^D))+C[9]+2336552879&4294967295,H=S+(V<<12&4294967295|V>>>20),V=D+(N^H&(S^N))+C[10]+4294925233&4294967295,D=H+(V<<17&4294967295|V>>>15),V=N+(S^D&(H^S))+C[11]+2304563134&4294967295,N=D+(V<<22&4294967295|V>>>10),V=S+(H^N&(D^H))+C[12]+1804603682&4294967295,S=N+(V<<7&4294967295|V>>>25),V=H+(D^S&(N^D))+C[13]+4254626195&4294967295,H=S+(V<<12&4294967295|V>>>20),V=D+(N^H&(S^N))+C[14]+2792965006&4294967295,D=H+(V<<17&4294967295|V>>>15),V=N+(S^D&(H^S))+C[15]+1236535329&4294967295,N=D+(V<<22&4294967295|V>>>10),V=S+(D^H&(N^D))+C[1]+4129170786&4294967295,S=N+(V<<5&4294967295|V>>>27),V=H+(N^D&(S^N))+C[6]+3225465664&4294967295,H=S+(V<<9&4294967295|V>>>23),V=D+(S^N&(H^S))+C[11]+643717713&4294967295,D=H+(V<<14&4294967295|V>>>18),V=N+(H^S&(D^H))+C[0]+3921069994&4294967295,N=D+(V<<20&4294967295|V>>>12),V=S+(D^H&(N^D))+C[5]+3593408605&4294967295,S=N+(V<<5&4294967295|V>>>27),V=H+(N^D&(S^N))+C[10]+38016083&4294967295,H=S+(V<<9&4294967295|V>>>23),V=D+(S^N&(H^S))+C[15]+3634488961&4294967295,D=H+(V<<14&4294967295|V>>>18),V=N+(H^S&(D^H))+C[4]+3889429448&4294967295,N=D+(V<<20&4294967295|V>>>12),V=S+(D^H&(N^D))+C[9]+568446438&4294967295,S=N+(V<<5&4294967295|V>>>27),V=H+(N^D&(S^N))+C[14]+3275163606&4294967295,H=S+(V<<9&4294967295|V>>>23),V=D+(S^N&(H^S))+C[3]+4107603335&4294967295,D=H+(V<<14&4294967295|V>>>18),V=N+(H^S&(D^H))+C[8]+1163531501&4294967295,N=D+(V<<20&4294967295|V>>>12),V=S+(D^H&(N^D))+C[13]+2850285829&4294967295,S=N+(V<<5&4294967295|V>>>27),V=H+(N^D&(S^N))+C[2]+4243563512&4294967295,H=S+(V<<9&4294967295|V>>>23),V=D+(S^N&(H^S))+C[7]+1735328473&4294967295,D=H+(V<<14&4294967295|V>>>18),V=N+(H^S&(D^H))+C[12]+2368359562&4294967295,N=D+(V<<20&4294967295|V>>>12),V=S+(N^D^H)+C[5]+4294588738&4294967295,S=N+(V<<4&4294967295|V>>>28),V=H+(S^N^D)+C[8]+2272392833&4294967295,H=S+(V<<11&4294967295|V>>>21),V=D+(H^S^N)+C[11]+1839030562&4294967295,D=H+(V<<16&4294967295|V>>>16),V=N+(D^H^S)+C[14]+4259657740&4294967295,N=D+(V<<23&4294967295|V>>>9),V=S+(N^D^H)+C[1]+2763975236&4294967295,S=N+(V<<4&4294967295|V>>>28),V=H+(S^N^D)+C[4]+1272893353&4294967295,H=S+(V<<11&4294967295|V>>>21),V=D+(H^S^N)+C[7]+4139469664&4294967295,D=H+(V<<16&4294967295|V>>>16),V=N+(D^H^S)+C[10]+3200236656&4294967295,N=D+(V<<23&4294967295|V>>>9),V=S+(N^D^H)+C[13]+681279174&4294967295,S=N+(V<<4&4294967295|V>>>28),V=H+(S^N^D)+C[0]+3936430074&4294967295,H=S+(V<<11&4294967295|V>>>21),V=D+(H^S^N)+C[3]+3572445317&4294967295,D=H+(V<<16&4294967295|V>>>16),V=N+(D^H^S)+C[6]+76029189&4294967295,N=D+(V<<23&4294967295|V>>>9),V=S+(N^D^H)+C[9]+3654602809&4294967295,S=N+(V<<4&4294967295|V>>>28),V=H+(S^N^D)+C[12]+3873151461&4294967295,H=S+(V<<11&4294967295|V>>>21),V=D+(H^S^N)+C[15]+530742520&4294967295,D=H+(V<<16&4294967295|V>>>16),V=N+(D^H^S)+C[2]+3299628645&4294967295,N=D+(V<<23&4294967295|V>>>9),V=S+(D^(N|~H))+C[0]+4096336452&4294967295,S=N+(V<<6&4294967295|V>>>26),V=H+(N^(S|~D))+C[7]+1126891415&4294967295,H=S+(V<<10&4294967295|V>>>22),V=D+(S^(H|~N))+C[14]+2878612391&4294967295,D=H+(V<<15&4294967295|V>>>17),V=N+(H^(D|~S))+C[5]+4237533241&4294967295,N=D+(V<<21&4294967295|V>>>11),V=S+(D^(N|~H))+C[12]+1700485571&4294967295,S=N+(V<<6&4294967295|V>>>26),V=H+(N^(S|~D))+C[3]+2399980690&4294967295,H=S+(V<<10&4294967295|V>>>22),V=D+(S^(H|~N))+C[10]+4293915773&4294967295,D=H+(V<<15&4294967295|V>>>17),V=N+(H^(D|~S))+C[1]+2240044497&4294967295,N=D+(V<<21&4294967295|V>>>11),V=S+(D^(N|~H))+C[8]+1873313359&4294967295,S=N+(V<<6&4294967295|V>>>26),V=H+(N^(S|~D))+C[15]+4264355552&4294967295,H=S+(V<<10&4294967295|V>>>22),V=D+(S^(H|~N))+C[6]+2734768916&4294967295,D=H+(V<<15&4294967295|V>>>17),V=N+(H^(D|~S))+C[13]+1309151649&4294967295,N=D+(V<<21&4294967295|V>>>11),V=S+(D^(N|~H))+C[4]+4149444226&4294967295,S=N+(V<<6&4294967295|V>>>26),V=H+(N^(S|~D))+C[11]+3174756917&4294967295,H=S+(V<<10&4294967295|V>>>22),V=D+(S^(H|~N))+C[2]+718787259&4294967295,D=H+(V<<15&4294967295|V>>>17),V=N+(H^(D|~S))+C[9]+3951481745&4294967295,x.g[0]=x.g[0]+S&4294967295,x.g[1]=x.g[1]+(D+(V<<21&4294967295|V>>>11))&4294967295,x.g[2]=x.g[2]+D&4294967295,x.g[3]=x.g[3]+H&4294967295}r.prototype.u=function(x,S){S===void 0&&(S=x.length);for(var N=S-this.blockSize,C=this.B,D=this.h,H=0;H<S;){if(D==0)for(;H<=N;)s(this,x,H),H+=this.blockSize;if(typeof x=="string"){for(;H<S;)if(C[D++]=x.charCodeAt(H++),D==this.blockSize){s(this,C),D=0;break}}else for(;H<S;)if(C[D++]=x[H++],D==this.blockSize){s(this,C),D=0;break}}this.h=D,this.o+=S},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var S=1;S<x.length-8;++S)x[S]=0;var N=8*this.o;for(S=x.length-8;S<x.length;++S)x[S]=N&255,N/=256;for(this.u(x),x=Array(16),S=N=0;4>S;++S)for(var C=0;32>C;C+=8)x[N++]=this.g[S]>>>C&255;return x};function o(x,S){var N=c;return Object.prototype.hasOwnProperty.call(N,x)?N[x]:N[x]=S(x)}function l(x,S){this.h=S;for(var N=[],C=!0,D=x.length-1;0<=D;D--){var H=x[D]|0;C&&H==S||(N[D]=H,C=!1)}this.g=N}var c={};function f(x){return-128<=x&&128>x?o(x,function(S){return new l([S|0],0>S?-1:0)}):new l([x|0],0>x?-1:0)}function h(x){if(isNaN(x)||!isFinite(x))return v;if(0>x)return L(h(-x));for(var S=[],N=1,C=0;x>=N;C++)S[C]=x/N|0,N*=4294967296;return new l(S,0)}function p(x,S){if(x.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(x.charAt(0)=="-")return L(p(x.substring(1),S));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=h(Math.pow(S,8)),C=v,D=0;D<x.length;D+=8){var H=Math.min(8,x.length-D),V=parseInt(x.substring(D,D+H),S);8>H?(H=h(Math.pow(S,H)),C=C.j(H).add(h(V))):(C=C.j(N),C=C.add(h(V)))}return C}var v=f(0),b=f(1),R=f(16777216);t=l.prototype,t.m=function(){if(O(this))return-L(this).m();for(var x=0,S=1,N=0;N<this.g.length;N++){var C=this.i(N);x+=(0<=C?C:4294967296+C)*S,S*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(M(this))return"0";if(O(this))return"-"+L(this).toString(x);for(var S=h(Math.pow(x,6)),N=this,C="";;){var D=y(N,S).g;N=j(N,D.j(S));var H=((0<N.g.length?N.g[0]:N.h)>>>0).toString(x);if(N=D,M(N))return H+C;for(;6>H.length;)H="0"+H;C=H+C}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function M(x){if(x.h!=0)return!1;for(var S=0;S<x.g.length;S++)if(x.g[S]!=0)return!1;return!0}function O(x){return x.h==-1}t.l=function(x){return x=j(this,x),O(x)?-1:M(x)?0:1};function L(x){for(var S=x.g.length,N=[],C=0;C<S;C++)N[C]=~x.g[C];return new l(N,~x.h).add(b)}t.abs=function(){return O(this)?L(this):this},t.add=function(x){for(var S=Math.max(this.g.length,x.g.length),N=[],C=0,D=0;D<=S;D++){var H=C+(this.i(D)&65535)+(x.i(D)&65535),V=(H>>>16)+(this.i(D)>>>16)+(x.i(D)>>>16);C=V>>>16,H&=65535,V&=65535,N[D]=V<<16|H}return new l(N,N[N.length-1]&-2147483648?-1:0)};function j(x,S){return x.add(L(S))}t.j=function(x){if(M(this)||M(x))return v;if(O(this))return O(x)?L(this).j(L(x)):L(L(this).j(x));if(O(x))return L(this.j(L(x)));if(0>this.l(R)&&0>x.l(R))return h(this.m()*x.m());for(var S=this.g.length+x.g.length,N=[],C=0;C<2*S;C++)N[C]=0;for(C=0;C<this.g.length;C++)for(var D=0;D<x.g.length;D++){var H=this.i(C)>>>16,V=this.i(C)&65535,U=x.i(D)>>>16,Q=x.i(D)&65535;N[2*C+2*D]+=V*Q,$(N,2*C+2*D),N[2*C+2*D+1]+=H*Q,$(N,2*C+2*D+1),N[2*C+2*D+1]+=V*U,$(N,2*C+2*D+1),N[2*C+2*D+2]+=H*U,$(N,2*C+2*D+2)}for(C=0;C<S;C++)N[C]=N[2*C+1]<<16|N[2*C];for(C=S;C<2*S;C++)N[C]=0;return new l(N,0)};function $(x,S){for(;(x[S]&65535)!=x[S];)x[S+1]+=x[S]>>>16,x[S]&=65535,S++}function Y(x,S){this.g=x,this.h=S}function y(x,S){if(M(S))throw Error("division by zero");if(M(x))return new Y(v,v);if(O(x))return S=y(L(x),S),new Y(L(S.g),L(S.h));if(O(S))return S=y(x,L(S)),new Y(L(S.g),S.h);if(30<x.g.length){if(O(x)||O(S))throw Error("slowDivide_ only works with positive integers.");for(var N=b,C=S;0>=C.l(x);)N=E(N),C=E(C);var D=w(N,1),H=w(C,1);for(C=w(C,2),N=w(N,2);!M(C);){var V=H.add(C);0>=V.l(x)&&(D=D.add(N),H=V),C=w(C,1),N=w(N,1)}return S=j(x,D.j(S)),new Y(D,S)}for(D=v;0<=x.l(S);){for(N=Math.max(1,Math.floor(x.m()/S.m())),C=Math.ceil(Math.log(N)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),H=h(N),V=H.j(S);O(V)||0<V.l(x);)N-=C,H=h(N),V=H.j(S);M(H)&&(H=b),D=D.add(H),x=j(x,V)}return new Y(D,x)}t.A=function(x){return y(this,x).h},t.and=function(x){for(var S=Math.max(this.g.length,x.g.length),N=[],C=0;C<S;C++)N[C]=this.i(C)&x.i(C);return new l(N,this.h&x.h)},t.or=function(x){for(var S=Math.max(this.g.length,x.g.length),N=[],C=0;C<S;C++)N[C]=this.i(C)|x.i(C);return new l(N,this.h|x.h)},t.xor=function(x){for(var S=Math.max(this.g.length,x.g.length),N=[],C=0;C<S;C++)N[C]=this.i(C)^x.i(C);return new l(N,this.h^x.h)};function E(x){for(var S=x.g.length+1,N=[],C=0;C<S;C++)N[C]=x.i(C)<<1|x.i(C-1)>>>31;return new l(N,x.h)}function w(x,S){var N=S>>5;S%=32;for(var C=x.g.length-N,D=[],H=0;H<C;H++)D[H]=0<S?x.i(H+N)>>>S|x.i(H+N+1)<<32-S:x.i(H+N);return new l(D,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,LC=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=p,va=l}).apply(typeof jT<"u"?jT:typeof self<"u"?self:typeof window<"u"?window:{});var zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jC,Jc,zC,nm,nv,UC,BC,HC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,T,I){return m==Array.prototype||m==Object.prototype||(m[T]=I.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof zh=="object"&&zh];for(var T=0;T<m.length;++T){var I=m[T];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function s(m,T){if(T)e:{var I=r;m=m.split(".");for(var K=0;K<m.length-1;K++){var ie=m[K];if(!(ie in I))break e;I=I[ie]}m=m[m.length-1],K=I[m],T=T(K),T!=K&&T!=null&&e(I,m,{configurable:!0,writable:!0,value:T})}}function o(m,T){m instanceof String&&(m+="");var I=0,K=!1,ie={next:function(){if(!K&&I<m.length){var de=I++;return{value:T(de,m[de]),done:!1}}return K=!0,{done:!0,value:void 0}}};return ie[Symbol.iterator]=function(){return ie},ie}s("Array.prototype.values",function(m){return m||function(){return o(this,function(T,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(m){var T=typeof m;return T=T!="object"?T:m?Array.isArray(m)?"array":T:"null",T=="array"||T=="object"&&typeof m.length=="number"}function h(m){var T=typeof m;return T=="object"&&m!=null||T=="function"}function p(m,T,I){return m.call.apply(m.bind,arguments)}function v(m,T,I){if(!m)throw Error();if(2<arguments.length){var K=Array.prototype.slice.call(arguments,2);return function(){var ie=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ie,K),m.apply(T,ie)}}return function(){return m.apply(T,arguments)}}function b(m,T,I){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:v,b.apply(null,arguments)}function R(m,T){var I=Array.prototype.slice.call(arguments,1);return function(){var K=I.slice();return K.push.apply(K,arguments),m.apply(this,K)}}function M(m,T){function I(){}I.prototype=T.prototype,m.aa=T.prototype,m.prototype=new I,m.prototype.constructor=m,m.Qb=function(K,ie,de){for(var be=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)be[tt-2]=arguments[tt];return T.prototype[ie].apply(K,be)}}function O(m){const T=m.length;if(0<T){const I=Array(T);for(let K=0;K<T;K++)I[K]=m[K];return I}return[]}function L(m,T){for(let I=1;I<arguments.length;I++){const K=arguments[I];if(f(K)){const ie=m.length||0,de=K.length||0;m.length=ie+de;for(let be=0;be<de;be++)m[ie+be]=K[be]}else m.push(K)}}class j{constructor(T,I){this.i=T,this.j=I,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function $(m){return/^[\s\xa0]*$/.test(m)}function Y(){var m=c.navigator;return m&&(m=m.userAgent)?m:""}function y(m){return y[" "](m),m}y[" "]=function(){};var E=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function w(m,T,I){for(const K in m)T.call(I,m[K],K,m)}function x(m,T){for(const I in m)T.call(void 0,m[I],I,m)}function S(m){const T={};for(const I in m)T[I]=m[I];return T}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(m,T){let I,K;for(let ie=1;ie<arguments.length;ie++){K=arguments[ie];for(I in K)m[I]=K[I];for(let de=0;de<N.length;de++)I=N[de],Object.prototype.hasOwnProperty.call(K,I)&&(m[I]=K[I])}}function D(m){var T=1;m=m.split(":");const I=[];for(;0<T&&m.length;)I.push(m.shift()),T--;return m.length&&I.push(m.join(":")),I}function H(m){c.setTimeout(()=>{throw m},0)}function V(){var m=X;let T=null;return m.g&&(T=m.g,m.g=m.g.next,m.g||(m.h=null),T.next=null),T}class U{constructor(){this.h=this.g=null}add(T,I){const K=Q.get();K.set(T,I),this.h?this.h.next=K:this.g=K,this.h=K}}var Q=new j(()=>new k,m=>m.reset());class k{constructor(){this.next=this.g=this.h=null}set(T,I){this.h=T,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let F,G=!1,X=new U,z=()=>{const m=c.Promise.resolve(void 0);F=()=>{m.then(W)}};var W=()=>{for(var m;m=V();){try{m.h.call(m.g)}catch(I){H(I)}var T=Q;T.j(m),100>T.h&&(T.h++,m.next=T.g,T.g=m)}G=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(m,T){this.type=m,this.g=this.target=T,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var ee=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,T=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const I=()=>{};c.addEventListener("test",I,T),c.removeEventListener("test",I,T)}catch{}return m}();function ae(m,T){if(J.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var I=this.type=m.type,K=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=T,T=m.relatedTarget){if(E){e:{try{y(T.nodeName);var ie=!0;break e}catch{}ie=!1}ie||(T=null)}}else I=="mouseover"?T=m.fromElement:I=="mouseout"&&(T=m.toElement);this.relatedTarget=T,K?(this.clientX=K.clientX!==void 0?K.clientX:K.pageX,this.clientY=K.clientY!==void 0?K.clientY:K.pageY,this.screenX=K.screenX||0,this.screenY=K.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:le[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&ae.aa.h.call(this)}}M(ae,J);var le={2:"touch",3:"pen",4:"mouse"};ae.prototype.h=function(){ae.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var fe="closure_listenable_"+(1e6*Math.random()|0),he=0;function Ee(m,T,I,K,ie){this.listener=m,this.proxy=null,this.src=T,this.type=I,this.capture=!!K,this.ha=ie,this.key=++he,this.da=this.fa=!1}function Ae(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function $e(m){this.src=m,this.g={},this.h=0}$e.prototype.add=function(m,T,I,K,ie){var de=m.toString();m=this.g[de],m||(m=this.g[de]=[],this.h++);var be=Ve(m,T,K,ie);return-1<be?(T=m[be],I||(T.fa=!1)):(T=new Ee(T,this.src,de,!!K,ie),T.fa=I,m.push(T)),T};function Ye(m,T){var I=T.type;if(I in m.g){var K=m.g[I],ie=Array.prototype.indexOf.call(K,T,void 0),de;(de=0<=ie)&&Array.prototype.splice.call(K,ie,1),de&&(Ae(T),m.g[I].length==0&&(delete m.g[I],m.h--))}}function Ve(m,T,I,K){for(var ie=0;ie<m.length;++ie){var de=m[ie];if(!de.da&&de.listener==T&&de.capture==!!I&&de.ha==K)return ie}return-1}var st="closure_lm_"+(1e6*Math.random()|0),at={};function jt(m,T,I,K,ie){if(Array.isArray(T)){for(var de=0;de<T.length;de++)jt(m,T[de],I,K,ie);return null}return I=qr(I),m&&m[fe]?m.K(T,I,h(K)?!!K.capture:!1,ie):Le(m,T,I,!1,K,ie)}function Le(m,T,I,K,ie,de){if(!T)throw Error("Invalid event type");var be=h(ie)?!!ie.capture:!!ie,tt=On(m);if(tt||(m[st]=tt=new $e(m)),I=tt.add(T,I,K,be,de),I.proxy)return I;if(K=we(),I.proxy=K,K.src=m,K.listener=I,m.addEventListener)ee||(ie=be),ie===void 0&&(ie=!1),m.addEventListener(T.toString(),K,ie);else if(m.attachEvent)m.attachEvent(Zt(T.toString()),K);else if(m.addListener&&m.removeListener)m.addListener(K);else throw Error("addEventListener and attachEvent are unavailable.");return I}function we(){function m(I){return T.call(m.src,m.listener,I)}const T=ir;return m}function Xe(m,T,I,K,ie){if(Array.isArray(T))for(var de=0;de<T.length;de++)Xe(m,T[de],I,K,ie);else K=h(K)?!!K.capture:!!K,I=qr(I),m&&m[fe]?(m=m.i,T=String(T).toString(),T in m.g&&(de=m.g[T],I=Ve(de,I,K,ie),-1<I&&(Ae(de[I]),Array.prototype.splice.call(de,I,1),de.length==0&&(delete m.g[T],m.h--)))):m&&(m=On(m))&&(T=m.g[T.toString()],m=-1,T&&(m=Ve(T,I,K,ie)),(I=-1<m?T[m]:null)&&An(I))}function An(m){if(typeof m!="number"&&m&&!m.da){var T=m.src;if(T&&T[fe])Ye(T.i,m);else{var I=m.type,K=m.proxy;T.removeEventListener?T.removeEventListener(I,K,m.capture):T.detachEvent?T.detachEvent(Zt(I),K):T.addListener&&T.removeListener&&T.removeListener(K),(I=On(T))?(Ye(I,m),I.h==0&&(I.src=null,T[st]=null)):Ae(m)}}}function Zt(m){return m in at?at[m]:at[m]="on"+m}function ir(m,T){if(m.da)m=!0;else{T=new ae(T,this);var I=m.listener,K=m.ha||m.src;m.fa&&An(m),m=I.call(K,T)}return m}function On(m){return m=m[st],m instanceof $e?m:null}var Vn="__closure_events_fn_"+(1e9*Math.random()>>>0);function qr(m){return typeof m=="function"?m:(m[Vn]||(m[Vn]=function(T){return m.handleEvent(T)}),m[Vn])}function ut(){ne.call(this),this.i=new $e(this),this.M=this,this.F=null}M(ut,ne),ut.prototype[fe]=!0,ut.prototype.removeEventListener=function(m,T,I,K){Xe(this,m,T,I,K)};function We(m,T){var I,K=m.F;if(K)for(I=[];K;K=K.F)I.push(K);if(m=m.M,K=T.type||T,typeof T=="string")T=new J(T,m);else if(T instanceof J)T.target=T.target||m;else{var ie=T;T=new J(K,m),C(T,ie)}if(ie=!0,I)for(var de=I.length-1;0<=de;de--){var be=T.g=I[de];ie=Ft(be,K,!0,T)&&ie}if(be=T.g=m,ie=Ft(be,K,!0,T)&&ie,ie=Ft(be,K,!1,T)&&ie,I)for(de=0;de<I.length;de++)be=T.g=I[de],ie=Ft(be,K,!1,T)&&ie}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var m=this.i,T;for(T in m.g){for(var I=m.g[T],K=0;K<I.length;K++)Ae(I[K]);delete m.g[T],m.h--}}this.F=null},ut.prototype.K=function(m,T,I,K){return this.i.add(String(m),T,!1,I,K)},ut.prototype.L=function(m,T,I,K){return this.i.add(String(m),T,!0,I,K)};function Ft(m,T,I,K){if(T=m.i.g[String(T)],!T)return!0;T=T.concat();for(var ie=!0,de=0;de<T.length;++de){var be=T[de];if(be&&!be.da&&be.capture==I){var tt=be.listener,en=be.ha||be.src;be.fa&&Ye(m.i,be),ie=tt.call(en,K)!==!1&&ie}}return ie&&!K.defaultPrevented}function St(m,T,I){if(typeof m=="function")I&&(m=b(m,I));else if(m&&typeof m.handleEvent=="function")m=b(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:c.setTimeout(m,T||0)}function ui(m){m.g=St(()=>{m.g=null,m.i&&(m.i=!1,ui(m))},m.l);const T=m.h;m.h=null,m.m.apply(null,T)}class qt extends ne{constructor(T,I){super(),this.m=T,this.l=I,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:ui(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function an(m){ne.call(this),this.h=m,this.g={}}M(an,ne);var Ln=[];function jn(m){w(m.g,function(T,I){this.g.hasOwnProperty(I)&&An(T)},m),m.g={}}an.prototype.N=function(){an.aa.N.call(this),jn(this)},an.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var on=c.JSON.stringify,gn=c.JSON.parse,zn=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function qi(){}qi.prototype.h=null;function Gi(m){return m.h||(m.h=m.i())}function Gr(){}var sr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xr(){J.call(this,"d")}M(xr,J);function ar(){J.call(this,"c")}M(ar,J);var Tr={},Va=null;function ci(){return Va=Va||new ut}Tr.La="serverreachability";function Rs(m){J.call(this,Tr.La,m)}M(Rs,J);function di(m){const T=ci();We(T,new Rs(T))}Tr.STAT_EVENT="statevent";function Ko(m,T){J.call(this,Tr.STAT_EVENT,m),this.stat=T}M(Ko,J);function bt(m){const T=ci();We(T,new Ko(T,m))}Tr.Ma="timingevent";function zt(m,T){J.call(this,Tr.Ma,m),this.size=T}M(zt,J);function Dt(m,T){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},T)}function Yn(){this.g=!0}Yn.prototype.xa=function(){this.g=!1};function La(m,T,I,K,ie,de){m.info(function(){if(m.g)if(de)for(var be="",tt=de.split("&"),en=0;en<tt.length;en++){var nt=tt[en].split("=");if(1<nt.length){var un=nt[0];nt=nt[1];var tn=un.split("_");be=2<=tn.length&&tn[1]=="type"?be+(un+"="+nt+"&"):be+(un+"=redacted&")}}else be=null;else be=de;return"XMLHTTP REQ ("+K+") [attempt "+ie+"]: "+T+`
`+I+`
`+be})}function Vu(m,T,I,K,ie,de,be){m.info(function(){return"XMLHTTP RESP ("+K+") [ attempt "+ie+"]: "+T+`
`+I+`
`+de+" "+be})}function fi(m,T,I,K){m.info(function(){return"XMLHTTP TEXT ("+T+"): "+Ki(m,I)+(K?" "+K:"")})}function Yo(m,T){m.info(function(){return"TIMEOUT: "+T})}Yn.prototype.info=function(){};function Ki(m,T){if(!m.g)return T;if(!T)return null;try{var I=JSON.parse(T);if(I){for(m=0;m<I.length;m++)if(Array.isArray(I[m])){var K=I[m];if(!(2>K.length)){var ie=K[1];if(Array.isArray(ie)&&!(1>ie.length)){var de=ie[0];if(de!="noop"&&de!="stop"&&de!="close")for(var be=1;be<ie.length;be++)ie[be]=""}}}}return on(I)}catch{return T}}var hi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ar;function Cr(){}M(Cr,qi),Cr.prototype.g=function(){return new XMLHttpRequest},Cr.prototype.i=function(){return{}},Ar=new Cr;function yn(m,T,I,K){this.j=m,this.i=T,this.l=I,this.R=K||1,this.U=new an(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new At}function At(){this.i=null,this.g="",this.h=!1}var ja={},Ns={};function or(m,T,I){m.L=1,m.v=Ha(lr(T)),m.m=I,m.P=!0,Kr(m,null)}function Kr(m,T){m.F=Date.now(),Yi(m),m.A=lr(m.v);var I=m.A,K=m.R;Array.isArray(K)||(K=[String(K)]),Hu(I.i,"t",K),m.C=0,I=m.j.J,m.h=new At,m.g=Sf(m.j,I?T:null,!m.m),0<m.O&&(m.M=new qt(b(m.Y,m,m.g),m.O)),T=m.U,I=m.g,K=m.ca;var ie="readystatechange";Array.isArray(ie)||(ie&&(Ln[0]=ie.toString()),ie=Ln);for(var de=0;de<ie.length;de++){var be=jt(I,ie[de],K||T.handleEvent,!1,T.h||T);if(!be)break;T.g[be.key]=be}T=m.H?S(m.H):{},m.m?(m.u||(m.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,T)):(m.u="GET",m.g.ea(m.A,m.u,null,T)),di(),La(m.i,m.u,m.A,m.l,m.R,m.m)}yn.prototype.ca=function(m){m=m.target;const T=this.M;T&&Dr(m)==3?T.j():this.Y(m)},yn.prototype.Y=function(m){try{if(m==this.g)e:{const tn=Dr(this.g);var T=this.g.Ba();const ts=this.g.Z();if(!(3>tn)&&(tn!=3||this.g&&(this.h.h||this.g.oa()||yf(this.g)))){this.J||tn!=4||T==7||(T==8||0>=ts?di(3):di(2)),mi(this);var I=this.g.Z();this.X=I;t:if(za(this)){var K=yf(this.g);m="";var ie=K.length,de=Dr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jt(this),kr(this);var be="";break t}this.h.i=new c.TextDecoder}for(T=0;T<ie;T++)this.h.h=!0,m+=this.h.i.decode(K[T],{stream:!(de&&T==ie-1)});K.length=0,this.h.g+=m,this.C=0,be=this.h.g}else be=this.g.oa();if(this.o=I==200,Vu(this.i,this.u,this.A,this.l,this.R,tn,I),this.o){if(this.T&&!this.K){t:{if(this.g){var tt,en=this.g;if((tt=en.g?en.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(tt)){var nt=tt;break t}}nt=null}if(I=nt)fi(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pi(this,I);else{this.o=!1,this.s=3,bt(12),Jt(this),kr(this);break e}}if(this.P){I=!0;let vn;for(;!this.J&&this.C<be.length;)if(vn=Xo(this,be),vn==Ns){tn==4&&(this.s=4,bt(14),I=!1),fi(this.i,this.l,null,"[Incomplete Response]");break}else if(vn==ja){this.s=4,bt(15),fi(this.i,this.l,be,"[Invalid Chunk]"),I=!1;break}else fi(this.i,this.l,vn,null),pi(this,vn);if(za(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tn!=4||be.length!=0||this.h.h||(this.s=1,bt(16),I=!1),this.o=this.o&&I,!I)fi(this.i,this.l,be,"[Invalid Chunked Response]"),Jt(this),kr(this);else if(0<be.length&&!this.W){this.W=!0;var un=this.j;un.g==this&&un.ba&&!un.M&&(un.j.info("Great, no buffering proxy detected. Bytes received: "+be.length),Wa(un),un.M=!0,bt(11))}}else fi(this.i,this.l,be,null),pi(this,be);tn==4&&Jt(this),this.o&&!this.J&&(tn==4?Ef(this.j,this):(this.o=!1,Yi(this)))}else Hp(this.g),I==400&&0<be.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),Jt(this),kr(this)}}}catch{}finally{}};function za(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Xo(m,T){var I=m.C,K=T.indexOf(`
`,I);return K==-1?Ns:(I=Number(T.substring(I,K)),isNaN(I)?ja:(K+=1,K+I>T.length?Ns:(T=T.slice(K,K+I),m.C=K+I,T)))}yn.prototype.cancel=function(){this.J=!0,Jt(this)};function Yi(m){m.S=Date.now()+m.I,Wo(m,m.I)}function Wo(m,T){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Dt(b(m.ba,m),T)}function mi(m){m.B&&(c.clearTimeout(m.B),m.B=null)}yn.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Yo(this.i,this.A),this.L!=2&&(di(),bt(17)),Jt(this),this.s=2,kr(this)):Wo(this,this.S-m)};function kr(m){m.j.G==0||m.J||Ef(m.j,m)}function Jt(m){mi(m);var T=m.M;T&&typeof T.ma=="function"&&T.ma(),m.M=null,jn(m.U),m.g&&(T=m.g,m.g=null,T.abort(),T.ma())}function pi(m,T){try{var I=m.j;if(I.G!=0&&(I.g==m||Lu(I.h,m))){if(!m.K&&Lu(I.h,m)&&I.G==3){try{var K=I.Da.g.parse(T)}catch{K=null}if(Array.isArray(K)&&K.length==3){var ie=K;if(ie[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<m.F)ol(I),sl(I);else break e;Ku(I),bt(18)}}else I.za=ie[1],0<I.za-I.T&&37500>ie[2]&&I.F&&I.v==0&&!I.C&&(I.C=Dt(b(I.Za,I),6e3));if(1>=gi(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else es(I,11)}else if((m.K||I.g==m)&&ol(I),!$(T))for(ie=I.Da.g.parse(T),T=0;T<ie.length;T++){let nt=ie[T];if(I.T=nt[0],nt=nt[1],I.G==2)if(nt[0]=="c"){I.K=nt[1],I.ia=nt[2];const un=nt[3];un!=null&&(I.la=un,I.j.info("VER="+I.la));const tn=nt[4];tn!=null&&(I.Aa=tn,I.j.info("SVER="+I.Aa));const ts=nt[5];ts!=null&&typeof ts=="number"&&0<ts&&(K=1.5*ts,I.L=K,I.j.info("backChannelRequestTimeoutMs_="+K)),K=I;const vn=m.g;if(vn){const xi=vn.g?vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xi){var de=K.h;de.g||xi.indexOf("spdy")==-1&&xi.indexOf("quic")==-1&&xi.indexOf("h2")==-1||(de.j=de.l,de.g=new Set,de.h&&(Zo(de,de.h),de.h=null))}if(K.D){const Xu=vn.g?vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Xu&&(K.ya=Xu,pt(K.I,K.D,Xu))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-m.F,I.j.info("Handshake RTT: "+I.R+"ms")),K=I;var be=m;if(K.qa=Tf(K,K.J?K.ia:null,K.W),be.K){Un(K.h,be);var tt=be,en=K.L;en&&(tt.I=en),tt.B&&(mi(tt),Yi(tt)),K.g=be}else bf(K);0<I.i.length&&al(I)}else nt[0]!="stop"&&nt[0]!="close"||es(I,7);else I.G==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?es(I,7):qu(I):nt[0]!="noop"&&I.l&&I.l.ta(nt),I.v=0)}}di(4)}catch{}}var Qo=class{constructor(m,T){this.g=m,this.map=T}};function Yr(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Is(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function gi(m){return m.h?1:m.g?m.g.size:0}function Lu(m,T){return m.h?m.h==T:m.g?m.g.has(T):!1}function Zo(m,T){m.g?m.g.add(T):m.h=T}function Un(m,T){m.h&&m.h==T?m.h=null:m.g&&m.g.has(T)&&m.g.delete(T)}Yr.prototype.cancel=function(){if(this.i=ju(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function ju(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let T=m.i;for(const I of m.g.values())T=T.concat(I.D);return T}return O(m.i)}function jp(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(f(m)){for(var T=[],I=m.length,K=0;K<I;K++)T.push(m[K]);return T}T=[],I=0;for(K in m)T[I++]=m[K];return T}function Jo(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(f(m)||typeof m=="string"){var T=[];m=m.length;for(var I=0;I<m;I++)T.push(I);return T}T=[],I=0;for(const K in m)T[I++]=K;return T}}}function zu(m,T){if(m.forEach&&typeof m.forEach=="function")m.forEach(T,void 0);else if(f(m)||typeof m=="string")Array.prototype.forEach.call(m,T,void 0);else for(var I=Jo(m),K=jp(m),ie=K.length,de=0;de<ie;de++)T.call(void 0,K[de],I&&I[de],m)}var Ua=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zp(m,T){if(m){m=m.split("&");for(var I=0;I<m.length;I++){var K=m[I].indexOf("="),ie=null;if(0<=K){var de=m[I].substring(0,K);ie=m[I].substring(K+1)}else de=m[I];T(de,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function Gt(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Gt){this.h=m.h,Ba(this,m.j),this.o=m.o,this.g=m.g,Ds(this,m.s),this.l=m.l;var T=m.i,I=new Wi;I.i=T.i,T.g&&(I.g=new Map(T.g),I.h=T.h),Xi(this,I),this.m=m.m}else m&&(T=String(m).match(Ua))?(this.h=!1,Ba(this,T[1]||"",!0),this.o=Rr(T[2]||""),this.g=Rr(T[3]||"",!0),Ds(this,T[4]),this.l=Rr(T[5]||"",!0),Xi(this,T[6]||"",!0),this.m=Rr(T[7]||"")):(this.h=!1,this.i=new Wi(null,this.h))}Gt.prototype.toString=function(){var m=[],T=this.j;T&&m.push($a(T,Uu,!0),":");var I=this.g;return(I||T=="file")&&(m.push("//"),(T=this.o)&&m.push($a(T,Uu,!0),"@"),m.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&m.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&m.push("/"),m.push($a(I,I.charAt(0)=="/"?Up:Bu,!0))),(I=this.i.toString())&&m.push("?",I),(I=this.m)&&m.push("#",$a(I,el)),m.join("")};function lr(m){return new Gt(m)}function Ba(m,T,I){m.j=I?Rr(T,!0):T,m.j&&(m.j=m.j.replace(/:$/,""))}function Ds(m,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);m.s=T}else m.s=null}function Xi(m,T,I){T instanceof Wi?(m.i=T,pf(m.i,m.h)):(I||(T=$a(T,Bp)),m.i=new Wi(T,m.h))}function pt(m,T,I){m.i.set(T,I)}function Ha(m){return pt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Rr(m,T){return m?T?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function $a(m,T,I){return typeof m=="string"?(m=encodeURI(m).replace(T,mf),I&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function mf(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Uu=/[#\/\?@]/g,Bu=/[#\?:]/g,Up=/[#\?]/g,Bp=/[#\?@]/g,el=/#/g;function Wi(m,T){this.h=this.g=null,this.i=m||null,this.j=!!T}function Nr(m){m.g||(m.g=new Map,m.h=0,m.i&&zp(m.i,function(T,I){m.add(decodeURIComponent(T.replace(/\+/g," ")),I)}))}t=Wi.prototype,t.add=function(m,T){Nr(this),this.i=null,m=yi(this,m);var I=this.g.get(m);return I||this.g.set(m,I=[]),I.push(T),this.h+=1,this};function Qi(m,T){Nr(m),T=yi(m,T),m.g.has(T)&&(m.i=null,m.h-=m.g.get(T).length,m.g.delete(T))}function Zi(m,T){return Nr(m),T=yi(m,T),m.g.has(T)}t.forEach=function(m,T){Nr(this),this.g.forEach(function(I,K){I.forEach(function(ie){m.call(T,ie,K,this)},this)},this)},t.na=function(){Nr(this);const m=Array.from(this.g.values()),T=Array.from(this.g.keys()),I=[];for(let K=0;K<T.length;K++){const ie=m[K];for(let de=0;de<ie.length;de++)I.push(T[K])}return I},t.V=function(m){Nr(this);let T=[];if(typeof m=="string")Zi(this,m)&&(T=T.concat(this.g.get(yi(this,m))));else{m=Array.from(this.g.values());for(let I=0;I<m.length;I++)T=T.concat(m[I])}return T},t.set=function(m,T){return Nr(this),this.i=null,m=yi(this,m),Zi(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[T]),this.h+=1,this},t.get=function(m,T){return m?(m=this.V(m),0<m.length?String(m[0]):T):T};function Hu(m,T,I){Qi(m,T),0<I.length&&(m.i=null,m.g.set(yi(m,T),O(I)),m.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],T=Array.from(this.g.keys());for(var I=0;I<T.length;I++){var K=T[I];const de=encodeURIComponent(String(K)),be=this.V(K);for(K=0;K<be.length;K++){var ie=de;be[K]!==""&&(ie+="="+encodeURIComponent(String(be[K]))),m.push(ie)}}return this.i=m.join("&")};function yi(m,T){return T=String(T),m.j&&(T=T.toLowerCase()),T}function pf(m,T){T&&!m.j&&(Nr(m),m.i=null,m.g.forEach(function(I,K){var ie=K.toLowerCase();K!=ie&&(Qi(this,K),Hu(this,ie,I))},m)),m.j=T}function Fa(m,T){const I=new Yn;if(c.Image){const K=new Image;K.onload=R(Ir,I,"TestLoadImage: loaded",!0,T,K),K.onerror=R(Ir,I,"TestLoadImage: error",!1,T,K),K.onabort=R(Ir,I,"TestLoadImage: abort",!1,T,K),K.ontimeout=R(Ir,I,"TestLoadImage: timeout",!1,T,K),c.setTimeout(function(){K.ontimeout&&K.ontimeout()},1e4),K.src=m}else T(!1)}function Xr(m,T){const I=new Yn,K=new AbortController,ie=setTimeout(()=>{K.abort(),Ir(I,"TestPingServer: timeout",!1,T)},1e4);fetch(m,{signal:K.signal}).then(de=>{clearTimeout(ie),de.ok?Ir(I,"TestPingServer: ok",!0,T):Ir(I,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(ie),Ir(I,"TestPingServer: error",!1,T)})}function Ir(m,T,I,K,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),K(I)}catch{}}function qa(){this.g=new zn}function vi(m,T,I){const K=I||"";try{zu(m,function(ie,de){let be=ie;h(ie)&&(be=on(ie)),T.push(K+de+"="+encodeURIComponent(be))})}catch(ie){throw T.push(K+"type="+encodeURIComponent("_badmap")),ie}}function Ms(m){this.l=m.Ub||null,this.j=m.eb||!1}M(Ms,qi),Ms.prototype.g=function(){return new Ji(this.l,this.j)},Ms.prototype.i=function(m){return function(){return m}}({});function Ji(m,T){ut.call(this),this.D=m,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(Ji,ut),t=Ji.prototype,t.open=function(m,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=T,this.readyState=1,bi(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(T.body=m),(this.D||c).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_i(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,bi(this)),this.g&&(this.readyState=3,bi(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$u(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function $u(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var T=m.value?m.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!m.done}))&&(this.response=this.responseText+=T)}m.done?_i(this):bi(this),this.readyState==3&&$u(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,_i(this))},t.Qa=function(m){this.g&&(this.response=m,_i(this))},t.ga=function(){this.g&&_i(this)};function _i(m){m.readyState=4,m.l=null,m.j=null,m.v=null,bi(m)}t.setRequestHeader=function(m,T){this.u.append(m,T)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],T=this.h.entries();for(var I=T.next();!I.done;)I=I.value,m.push(I[0]+": "+I[1]),I=T.next();return m.join(`\r
`)};function bi(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Ji.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Fu(m){let T="";return w(m,function(I,K){T+=K,T+=":",T+=I,T+=`\r
`}),T}function ln(m,T,I){e:{for(K in I){var K=!1;break e}K=!0}K||(I=Fu(I),typeof m=="string"?I!=null&&encodeURIComponent(String(I)):pt(m,T,I))}function ct(m){ut.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(ct,ut);var tl=/^https?$/i,Ga=["POST","PUT"];t=ct.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,T,I,K){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);T=T?T.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ar.g(),this.v=this.o?Gi(this.o):Gi(Ar),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(T,String(m),!0),this.B=!1}catch(de){gf(this,de);return}if(m=I||"",I=new Map(this.headers),K)if(Object.getPrototypeOf(K)===Object.prototype)for(var ie in K)I.set(ie,K[ie]);else if(typeof K.keys=="function"&&typeof K.get=="function")for(const de of K.keys())I.set(de,K.get(de));else throw Error("Unknown input type for opt_headers: "+String(K));K=Array.from(I.keys()).find(de=>de.toLowerCase()=="content-type"),ie=c.FormData&&m instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Ga,T,void 0))||K||ie||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[de,be]of I)this.g.setRequestHeader(de,be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ka(this),this.u=!0,this.g.send(m),this.u=!1}catch(de){gf(this,de)}};function gf(m,T){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=T,m.m=5,nl(m),wi(m)}function nl(m){m.A||(m.A=!0,We(m,"complete"),We(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,We(this,"complete"),We(this,"abort"),wi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wi(this,!0)),ct.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?rl(this):this.bb())},t.bb=function(){rl(this)};function rl(m){if(m.h&&typeof l<"u"&&(!m.v[1]||Dr(m)!=4||m.Z()!=2)){if(m.u&&Dr(m)==4)St(m.Ea,0,m);else if(We(m,"readystatechange"),Dr(m)==4){m.h=!1;try{const be=m.Z();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var I;if(!(I=T)){var K;if(K=be===0){var ie=String(m.D).match(Ua)[1]||null;!ie&&c.self&&c.self.location&&(ie=c.self.location.protocol.slice(0,-1)),K=!tl.test(ie?ie.toLowerCase():"")}I=K}if(I)We(m,"complete"),We(m,"success");else{m.m=6;try{var de=2<Dr(m)?m.g.statusText:""}catch{de=""}m.l=de+" ["+m.Z()+"]",nl(m)}}finally{wi(m)}}}}function wi(m,T){if(m.g){Ka(m);const I=m.g,K=m.v[0]?()=>{}:null;m.g=null,m.v=null,T||We(m,"ready");try{I.onreadystatechange=K}catch{}}}function Ka(m){m.I&&(c.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function Dr(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<Dr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var T=this.g.responseText;return m&&T.indexOf(m)==0&&(T=T.substring(m.length)),gn(T)}};function yf(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Hp(m){const T={};m=(m.g&&2<=Dr(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let K=0;K<m.length;K++){if($(m[K]))continue;var I=D(m[K]);const ie=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const de=T[ie]||[];T[ie]=de,de.push(I)}x(T,function(K){return K.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ya(m,T,I){return I&&I.internalChannelParams&&I.internalChannelParams[m]||T}function il(m){this.Aa=0,this.i=[],this.j=new Yn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ya("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ya("baseRetryDelayMs",5e3,m),this.cb=Ya("retryDelaySeedMs",1e4,m),this.Wa=Ya("forwardChannelMaxRetries",2,m),this.wa=Ya("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Yr(m&&m.concurrentRequestLimit),this.Da=new qa,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=il.prototype,t.la=8,t.G=1,t.connect=function(m,T,I,K){bt(0),this.W=m,this.H=T||{},I&&K!==void 0&&(this.H.OSID=I,this.H.OAID=K),this.F=this.X,this.I=Tf(this,null,this.W),al(this)};function qu(m){if(vf(m),m.G==3){var T=m.U++,I=lr(m.I);if(pt(I,"SID",m.K),pt(I,"RID",T),pt(I,"TYPE","terminate"),Xa(m,I),T=new yn(m,m.j,T),T.L=2,T.v=Ha(lr(I)),I=!1,c.navigator&&c.navigator.sendBeacon)try{I=c.navigator.sendBeacon(T.v.toString(),"")}catch{}!I&&c.Image&&(new Image().src=T.v,I=!0),I||(T.g=Sf(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Yi(T)}xf(m)}function sl(m){m.g&&(Wa(m),m.g.cancel(),m.g=null)}function vf(m){sl(m),m.u&&(c.clearTimeout(m.u),m.u=null),ol(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&c.clearTimeout(m.s),m.s=null)}function al(m){if(!Is(m.h)&&!m.s){m.s=!0;var T=m.Ga;F||z(),G||(F(),G=!0),X.add(T,m),m.B=0}}function $p(m,T){return gi(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=T.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Dt(b(m.Ga,m,T),Yu(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const ie=new yn(this,this.j,m);let de=this.o;if(this.S&&(de?(de=S(de),C(de,this.S)):de=this.S),this.m!==null||this.O||(ie.H=de,de=null),this.P)e:{for(var T=0,I=0;I<this.i.length;I++){t:{var K=this.i[I];if("__data__"in K.map&&(K=K.map.__data__,typeof K=="string")){K=K.length;break t}K=void 0}if(K===void 0)break;if(T+=K,4096<T){T=I;break e}if(T===4096||I===this.i.length-1){T=I+1;break e}}T=1e3}else T=1e3;T=_f(this,ie,T),I=lr(this.I),pt(I,"RID",m),pt(I,"CVER",22),this.D&&pt(I,"X-HTTP-Session-Id",this.D),Xa(this,I),de&&(this.O?T="headers="+encodeURIComponent(String(Fu(de)))+"&"+T:this.m&&ln(I,this.m,de)),Zo(this.h,ie),this.Ua&&pt(I,"TYPE","init"),this.P?(pt(I,"$req",T),pt(I,"SID","null"),ie.T=!0,or(ie,I,null)):or(ie,I,T),this.G=2}}else this.G==3&&(m?Gu(this,m):this.i.length==0||Is(this.h)||Gu(this))};function Gu(m,T){var I;T?I=T.l:I=m.U++;const K=lr(m.I);pt(K,"SID",m.K),pt(K,"RID",I),pt(K,"AID",m.T),Xa(m,K),m.m&&m.o&&ln(K,m.m,m.o),I=new yn(m,m.j,I,m.B+1),m.m===null&&(I.H=m.o),T&&(m.i=T.D.concat(m.i)),T=_f(m,I,1e3),I.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Zo(m.h,I),or(I,K,T)}function Xa(m,T){m.H&&w(m.H,function(I,K){pt(T,K,I)}),m.l&&zu({},function(I,K){pt(T,K,I)})}function _f(m,T,I){I=Math.min(m.i.length,I);var K=m.l?b(m.l.Na,m.l,m):null;e:{var ie=m.i;let de=-1;for(;;){const be=["count="+I];de==-1?0<I?(de=ie[0].g,be.push("ofs="+de)):de=0:be.push("ofs="+de);let tt=!0;for(let en=0;en<I;en++){let nt=ie[en].g;const un=ie[en].map;if(nt-=de,0>nt)de=Math.max(0,ie[en].g-100),tt=!1;else try{vi(un,be,"req"+nt+"_")}catch{K&&K(un)}}if(tt){K=be.join("&");break e}}}return m=m.i.splice(0,I),T.D=m,K}function bf(m){if(!m.g&&!m.u){m.Y=1;var T=m.Fa;F||z(),G||(F(),G=!0),X.add(T,m),m.v=0}}function Ku(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Dt(b(m.Fa,m),Yu(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,wf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Dt(b(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),sl(this),wf(this))};function Wa(m){m.A!=null&&(c.clearTimeout(m.A),m.A=null)}function wf(m){m.g=new yn(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var T=lr(m.qa);pt(T,"RID","rpc"),pt(T,"SID",m.K),pt(T,"AID",m.T),pt(T,"CI",m.F?"0":"1"),!m.F&&m.ja&&pt(T,"TO",m.ja),pt(T,"TYPE","xmlhttp"),Xa(m,T),m.m&&m.o&&ln(T,m.m,m.o),m.L&&(m.g.I=m.L);var I=m.g;m=m.ia,I.L=1,I.v=Ha(lr(T)),I.m=null,I.P=!0,Kr(I,m)}t.Za=function(){this.C!=null&&(this.C=null,sl(this),Ku(this),bt(19))};function ol(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function Ef(m,T){var I=null;if(m.g==T){ol(m),Wa(m),m.g=null;var K=2}else if(Lu(m.h,T))I=T.D,Un(m.h,T),K=1;else return;if(m.G!=0){if(T.o)if(K==1){I=T.m?T.m.length:0,T=Date.now()-T.F;var ie=m.B;K=ci(),We(K,new zt(K,I)),al(m)}else bf(m);else if(ie=T.s,ie==3||ie==0&&0<T.X||!(K==1&&$p(m,T)||K==2&&Ku(m)))switch(I&&0<I.length&&(T=m.h,T.i=T.i.concat(I)),ie){case 1:es(m,5);break;case 4:es(m,10);break;case 3:es(m,6);break;default:es(m,2)}}}function Yu(m,T){let I=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(I*=2),I*T}function es(m,T){if(m.j.info("Error code "+T),T==2){var I=b(m.fb,m),K=m.Xa;const ie=!K;K=new Gt(K||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ba(K,"https"),Ha(K),ie?Fa(K.toString(),I):Xr(K.toString(),I)}else bt(2);m.G=0,m.l&&m.l.sa(T),xf(m),vf(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function xf(m){if(m.G=0,m.ka=[],m.l){const T=ju(m.h);(T.length!=0||m.i.length!=0)&&(L(m.ka,T),L(m.ka,m.i),m.h.i.length=0,O(m.i),m.i.length=0),m.l.ra()}}function Tf(m,T,I){var K=I instanceof Gt?lr(I):new Gt(I);if(K.g!="")T&&(K.g=T+"."+K.g),Ds(K,K.s);else{var ie=c.location;K=ie.protocol,T=T?T+"."+ie.hostname:ie.hostname,ie=+ie.port;var de=new Gt(null);K&&Ba(de,K),T&&(de.g=T),ie&&Ds(de,ie),I&&(de.l=I),K=de}return I=m.D,T=m.ya,I&&T&&pt(K,I,T),pt(K,"VER",m.la),Xa(m,K),K}function Sf(m,T,I){if(T&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=m.Ca&&!m.pa?new ct(new Ms({eb:I})):new ct(m.pa),T.Ha(m.J),T}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Af(){}t=Af.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ll(){}ll.prototype.g=function(m,T){return new Bn(m,T)};function Bn(m,T){ut.call(this),this.g=new il(T),this.l=m,this.h=T&&T.messageUrlParams||null,m=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(m?m["X-WebChannel-Content-Type"]=T.messageContentType:m={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(m?m["X-WebChannel-Client-Profile"]=T.va:m={"X-WebChannel-Client-Profile":T.va}),this.g.S=m,(m=T&&T.Sb)&&!$(m)&&(this.g.m=m),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!$(T)&&(this.g.D=T,m=this.h,m!==null&&T in m&&(m=this.h,T in m&&delete m[T])),this.j=new Ei(this)}M(Bn,ut),Bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bn.prototype.close=function(){qu(this.g)},Bn.prototype.o=function(m){var T=this.g;if(typeof m=="string"){var I={};I.__data__=m,m=I}else this.u&&(I={},I.__data__=on(m),m=I);T.i.push(new Qo(T.Ya++,m)),T.G==3&&al(T)},Bn.prototype.N=function(){this.g.l=null,delete this.j,qu(this.g),delete this.g,Bn.aa.N.call(this)};function Cf(m){xr.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var T=m.__sm__;if(T){e:{for(const I in T){m=I;break e}m=void 0}(this.i=m)&&(m=this.i,T=T!==null&&m in T?T[m]:void 0),this.data=T}else this.data=m}M(Cf,xr);function kf(){ar.call(this),this.status=1}M(kf,ar);function Ei(m){this.g=m}M(Ei,Af),Ei.prototype.ua=function(){We(this.g,"a")},Ei.prototype.ta=function(m){We(this.g,new Cf(m))},Ei.prototype.sa=function(m){We(this.g,new kf)},Ei.prototype.ra=function(){We(this.g,"b")},ll.prototype.createWebChannel=ll.prototype.g,Bn.prototype.send=Bn.prototype.o,Bn.prototype.open=Bn.prototype.m,Bn.prototype.close=Bn.prototype.close,HC=function(){return new ll},BC=function(){return ci()},UC=Tr,nv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hi.NO_ERROR=0,hi.TIMEOUT=8,hi.HTTP_ERROR=6,nm=hi,Sr.COMPLETE="complete",zC=Sr,Gr.EventType=sr,sr.OPEN="a",sr.CLOSE="b",sr.ERROR="c",sr.MESSAGE="d",ut.prototype.listen=ut.prototype.K,Jc=Gr,ct.prototype.listenOnce=ct.prototype.L,ct.prototype.getLastError=ct.prototype.Ka,ct.prototype.getLastErrorCode=ct.prototype.Ba,ct.prototype.getStatus=ct.prototype.Z,ct.prototype.getResponseJson=ct.prototype.Oa,ct.prototype.getResponseText=ct.prototype.oa,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Ha,jC=ct}).apply(typeof zh<"u"?zh:typeof self<"u"?self:typeof window<"u"?window:{});const zT="@firebase/firestore",UT="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Nn.UNAUTHENTICATED=new Nn(null),Nn.GOOGLE_CREDENTIALS=new Nn("google-credentials-uid"),Nn.FIRST_PARTY=new Nn("first-party-uid"),Nn.MOCK_USER=new Nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cu="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=new __("@firebase/firestore");function ql(){return Po.logLevel}function Te(t,...e){if(Po.logLevel<=Je.DEBUG){const n=e.map(x_);Po.debug(`Firestore (${Cu}): ${t}`,...n)}}function Ts(t,...e){if(Po.logLevel<=Je.ERROR){const n=e.map(x_);Po.error(`Firestore (${Cu}): ${t}`,...n)}}function yu(t,...e){if(Po.logLevel<=Je.WARN){const n=e.map(x_);Po.warn(`Firestore (${Cu}): ${t}`,...n)}}function x_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,$C(t,r,n)}function $C(t,e,n){let r=`FIRESTORE (${Cu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ts(r),new Error(r)}function dt(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||$C(e,s,r)}function Ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends Fi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class u9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Nn.UNAUTHENTICATED))}shutdown(){}}class c9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class d9{constructor(e){this.t=e,this.currentUser=Nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){dt(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let o=new _a;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new _a,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const f=o;e.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},c=f=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(f=>c(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?c(f):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new _a)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(dt(typeof r.accessToken=="string",31837,{l:r}),new FC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dt(e===null||typeof e=="string",2055,{h:e}),new Nn(e)}}class f9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class h9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new f9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class BT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class m9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){dt(this.o===void 0,3512);const r=o=>{o.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,Te("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new BT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(dt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new BT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=p9(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function qe(t,e){return t<e?-1:t>e?1:0}function rv(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return qe(r,s);{const o=qC(),l=g9(o.encode(HT(t,n)),o.encode(HT(e,n)));return l!==0?l:qe(r,s)}}n+=r>65535?2:1}return qe(t.length,e.length)}function HT(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function g9(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return qe(t[n],e[n]);return qe(t.length,e.length)}function vu(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T=-62135596800,FT=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*FT);return new ft(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Se(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Se(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<$T)throw new Se(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/FT}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-$T;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{static fromTimestamp(e){return new je(e)}static min(){return new je(new ft(0,0))}static max(){return new je(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="__name__";class Ii{constructor(e,n,r){n===void 0?n=0:n>e.length&&Me(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Me(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ii.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ii?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=Ii.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return qe(e.length,n.length)}static compareSegments(e,n){const r=Ii.isNumericId(e),s=Ii.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ii.extractNumericId(e).compare(Ii.extractNumericId(n)):rv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return va.fromString(e.substring(4,e.length-2))}}class Et extends Ii{construct(e,n,r){return new Et(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Se(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Et(n)}static emptyPath(){return new Et([])}}const y9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tn extends Ii{construct(e,n,r){return new Tn(e,n,r)}static isValidIdentifier(e){return y9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qT}static keyField(){return new Tn([qT])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new Se(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Se(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Se(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(r+=c,s++):(o(),s++)}if(o(),l)throw new Se(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tn(n)}static emptyPath(){return new Tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.path=e}static fromPath(e){return new Re(Et.fromString(e))}static fromName(e){return new Re(Et.fromString(e).popFirst(5))}static empty(){return new Re(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new Et(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad=-1;function v9(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=je.fromTimestamp(r===1e9?new ft(n+1,0):new ft(n,r));return new xa(s,Re.empty(),e)}function _9(t){return new xa(t.readTime,t.key,Ad)}class xa{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new xa(je.min(),Re.empty(),Ad)}static max(){return new xa(je.max(),Re.empty(),Ad)}}function b9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Re.comparator(t.documentKey,e.documentKey),n!==0?n:qe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class E9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ku(t){if(t.code!==ve.FAILED_PRECONDITION||t.message!==w9)throw t;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new _e((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof _e?n:_e.resolve(n)}catch(n){return _e.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):_e.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):_e.reject(n)}static resolve(e){return new _e((n,r)=>{n(e)})}static reject(e){return new _e((n,r)=>{r(e)})}static waitFor(e){return new _e((n,r)=>{let s=0,o=0,l=!1;e.forEach(c=>{++s,c.next(()=>{++o,l&&o===s&&n()},f=>r(f))}),l=!0,o===s&&n()})}static or(e){let n=_e.resolve(!1);for(const r of e)n=n.next(s=>s?_e.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,o)=>{r.push(n.call(this,s,o))}),this.waitFor(r)}static mapArray(e,n){return new _e((r,s)=>{const o=e.length,l=new Array(o);let c=0;for(let f=0;f<o;f++){const h=f;n(e[h]).next(p=>{l[h]=p,++c,c===o&&r(l)},p=>s(p))}})}static doWhile(e,n){return new _e((r,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):r()};o()})}}function x9(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ru(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}fp.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=-1;function hp(t){return t==null}function Dm(t){return t===0&&1/t==-1/0}function T9(t){return typeof t=="number"&&Number.isInteger(t)&&!Dm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC="";function S9(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=GT(e)),e=A9(t.get(n),e);return GT(e)}function A9(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case KC:n+="";break;default:n+=o}}return n}function GT(t){return t+KC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ia(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function YC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n){this.comparator=e,this.root=n||xn.EMPTY}insert(e,n){return new It(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xn.BLACK,null,null))}remove(e){return new It(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uh(this.root,e,this.comparator,!0)}}class Uh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xn{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??xn.RED,this.left=s??xn.EMPTY,this.right=o??xn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new xn(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return xn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return xn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}xn.EMPTY=null,xn.RED=!0,xn.BLACK=!1;xn.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,n,r,s,o){return this}insert(e,n,r){return new xn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.comparator=e,this.data=new It(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new YT(this.data.getIterator())}getIteratorFrom(e){return new YT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof sn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new sn(this.comparator);return n.data=e,n}}class YT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.fields=e,e.sort(Tn.comparator)}static empty(){return new _r([])}unionWith(e){let n=new sn(Tn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new _r(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return vu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new XC("Invalid base64 string: "+o):o}}(e);return new Sn(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new Sn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sn.EMPTY_BYTE_STRING=new Sn("");const C9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ta(t){if(dt(!!t,39018),typeof t=="string"){let e=0;const n=C9.exec(t);if(dt(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$t(t.seconds),nanos:$t(t.nanos)}}function $t(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Sa(t){return typeof t=="string"?Sn.fromBase64String(t):Sn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC="server_timestamp",QC="__type__",ZC="__previous_value__",JC="__local_write_time__";function S_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[QC])===null||n===void 0?void 0:n.stringValue)===WC}function mp(t){const e=t.mapValue.fields[ZC];return S_(e)?mp(e):e}function Cd(t){const e=Ta(t.mapValue.fields[JC].timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{constructor(e,n,r,s,o,l,c,f,h,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=f,this.useFetchStreams=h,this.isUsingEmulator=p}}const Mm="(default)";class kd{constructor(e,n){this.projectId=e,this.database=n||Mm}static empty(){return new kd("","")}get isDefaultDatabase(){return this.database===Mm}isEqual(e){return e instanceof kd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek="__type__",R9="__max__",Bh={mapValue:{}},tk="__vector__",Pm="value";function Aa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?S_(t)?4:I9(t)?9007199254740991:N9(t)?10:11:Me(28295,{value:t})}function Bi(t,e){if(t===e)return!0;const n=Aa(t);if(n!==Aa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Cd(t).isEqual(Cd(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Ta(s.timestampValue),c=Ta(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return Sa(s.bytesValue).isEqual(Sa(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return $t(s.geoPointValue.latitude)===$t(o.geoPointValue.latitude)&&$t(s.geoPointValue.longitude)===$t(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return $t(s.integerValue)===$t(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=$t(s.doubleValue),c=$t(o.doubleValue);return l===c?Dm(l)===Dm(c):isNaN(l)&&isNaN(c)}return!1}(t,e);case 9:return vu(t.arrayValue.values||[],e.arrayValue.values||[],Bi);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},c=o.mapValue.fields||{};if(KT(l)!==KT(c))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(c[f]===void 0||!Bi(l[f],c[f])))return!1;return!0}(t,e);default:return Me(52216,{left:t})}}function Rd(t,e){return(t.values||[]).find(n=>Bi(n,e))!==void 0}function _u(t,e){if(t===e)return 0;const n=Aa(t),r=Aa(e);if(n!==r)return qe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return qe(t.booleanValue,e.booleanValue);case 2:return function(o,l){const c=$t(o.integerValue||o.doubleValue),f=$t(l.integerValue||l.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(t,e);case 3:return XT(t.timestampValue,e.timestampValue);case 4:return XT(Cd(t),Cd(e));case 5:return rv(t.stringValue,e.stringValue);case 6:return function(o,l){const c=Sa(o),f=Sa(l);return c.compareTo(f)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const c=o.split("/"),f=l.split("/");for(let h=0;h<c.length&&h<f.length;h++){const p=qe(c[h],f[h]);if(p!==0)return p}return qe(c.length,f.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const c=qe($t(o.latitude),$t(l.latitude));return c!==0?c:qe($t(o.longitude),$t(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return WT(t.arrayValue,e.arrayValue);case 10:return function(o,l){var c,f,h,p;const v=o.fields||{},b=l.fields||{},R=(c=v[Pm])===null||c===void 0?void 0:c.arrayValue,M=(f=b[Pm])===null||f===void 0?void 0:f.arrayValue,O=qe(((h=R?.values)===null||h===void 0?void 0:h.length)||0,((p=M?.values)===null||p===void 0?void 0:p.length)||0);return O!==0?O:WT(R,M)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===Bh.mapValue&&l===Bh.mapValue)return 0;if(o===Bh.mapValue)return 1;if(l===Bh.mapValue)return-1;const c=o.fields||{},f=Object.keys(c),h=l.fields||{},p=Object.keys(h);f.sort(),p.sort();for(let v=0;v<f.length&&v<p.length;++v){const b=rv(f[v],p[v]);if(b!==0)return b;const R=_u(c[f[v]],h[p[v]]);if(R!==0)return R}return qe(f.length,p.length)}(t.mapValue,e.mapValue);default:throw Me(23264,{Pe:n})}}function XT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return qe(t,e);const n=Ta(t),r=Ta(e),s=qe(n.seconds,r.seconds);return s!==0?s:qe(n.nanos,r.nanos)}function WT(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=_u(n[s],r[s]);if(o)return o}return qe(n.length,r.length)}function bu(t){return iv(t)}function iv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ta(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Sa(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Re.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=iv(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${iv(n.fields[l])}`;return s+"}"}(t.mapValue):Me(61005,{value:t})}function rm(t){switch(Aa(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mp(t);return e?16+rm(e):16;case 5:return 2*t.stringValue.length;case 6:return Sa(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+rm(o),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ia(r.fields,(o,l)=>{s+=o.length+rm(l)}),s}(t.mapValue);default:throw Me(13486,{value:t})}}function QT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function sv(t){return!!t&&"integerValue"in t}function A_(t){return!!t&&"arrayValue"in t}function ZT(t){return!!t&&"nullValue"in t}function JT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function im(t){return!!t&&"mapValue"in t}function N9(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[ek])===null||n===void 0?void 0:n.stringValue)===tk}function id(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ia(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=id(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=id(t.arrayValue.values[n]);return e}return Object.assign({},t)}function I9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===R9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.value=e}static empty(){return new Jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!im(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=id(n)}setAll(e){let n=Tn.emptyPath(),r={},s=[];e.forEach((l,c)=>{if(!n.isImmediateParentOf(c)){const f=this.getFieldsMap(n);this.applyChanges(f,r,s),r={},s=[],n=c.popLast()}l?r[c.lastSegment()]=id(l):s.push(c.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());im(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];im(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ia(n,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new Jn(id(this.value))}}function nk(t){const e=[];return Ia(t.fields,(n,r)=>{const s=new Tn([n]);if(im(r)){const o=nk(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new _r(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n,r,s,o,l,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new In(e,0,je.min(),je.min(),je.min(),Jn.empty(),0)}static newFoundDocument(e,n,r,s){return new In(e,1,n,je.min(),r,s,0)}static newNoDocument(e,n){return new In(e,2,n,je.min(),je.min(),Jn.empty(),0)}static newUnknownDocument(e,n){return new In(e,3,n,je.min(),je.min(),Jn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof In&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new In(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n){this.position=e,this.inclusive=n}}function eS(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?r=Re.comparator(Re.fromName(l.referenceValue),n.key):r=_u(l,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function tS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n="asc"){this.field=e,this.dir=n}}function D9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{}class Qt extends rk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new P9(e,n,r):n==="array-contains"?new L9(e,r):n==="in"?new j9(e,r):n==="not-in"?new z9(e,r):n==="array-contains-any"?new U9(e,r):new Qt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new O9(e,r):new V9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(_u(n,this.value)):n!==null&&Aa(this.value)===Aa(n)&&this.matchesComparison(_u(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class si extends rk{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new si(e,n)}matches(e){return ik(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function ik(t){return t.op==="and"}function sk(t){return M9(t)&&ik(t)}function M9(t){for(const e of t.filters)if(e instanceof si)return!1;return!0}function av(t){if(t instanceof Qt)return t.field.canonicalString()+t.op.toString()+bu(t.value);if(sk(t))return t.filters.map(e=>av(e)).join(",");{const e=t.filters.map(n=>av(n)).join(",");return`${t.op}(${e})`}}function ak(t,e){return t instanceof Qt?function(r,s){return s instanceof Qt&&r.op===s.op&&r.field.isEqual(s.field)&&Bi(r.value,s.value)}(t,e):t instanceof si?function(r,s){return s instanceof si&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,l,c)=>o&&ak(l,s.filters[c]),!0):!1}(t,e):void Me(19439)}function ok(t){return t instanceof Qt?function(n){return`${n.field.canonicalString()} ${n.op} ${bu(n.value)}`}(t):t instanceof si?function(n){return n.op.toString()+" {"+n.getFilters().map(ok).join(" ,")+"}"}(t):"Filter"}class P9 extends Qt{constructor(e,n,r){super(e,n,r),this.key=Re.fromName(r.referenceValue)}matches(e){const n=Re.comparator(e.key,this.key);return this.matchesComparison(n)}}class O9 extends Qt{constructor(e,n){super(e,"in",n),this.keys=lk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class V9 extends Qt{constructor(e,n){super(e,"not-in",n),this.keys=lk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function lk(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Re.fromName(r.referenceValue))}class L9 extends Qt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return A_(n)&&Rd(n.arrayValue,this.value)}}class j9 extends Qt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Rd(this.value.arrayValue,n)}}class z9 extends Qt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Rd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Rd(this.value.arrayValue,n)}}class U9 extends Qt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!A_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Rd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{constructor(e,n=null,r=[],s=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=c,this.Ie=null}}function nS(t,e=null,n=[],r=[],s=null,o=null,l=null){return new B9(t,e,n,r,s,o,l)}function C_(t){const e=Ue(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>av(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),hp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>bu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>bu(r)).join(",")),e.Ie=n}return e.Ie}function k_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!D9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ak(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!tS(t.startAt,e.startAt)&&tS(t.endAt,e.endAt)}function ov(t){return Re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n=null,r=[],s=[],o=null,l="F",c=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=f,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function H9(t,e,n,r,s,o,l,c){return new Nu(t,e,n,r,s,o,l,c)}function uk(t){return new Nu(t)}function rS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ck(t){return t.collectionGroup!==null}function sd(t){const e=Ue(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ee.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new sn(Tn.comparator);return l.filters.forEach(f=>{f.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new Nd(o,r))}),n.has(Tn.keyField().canonicalString())||e.Ee.push(new Nd(Tn.keyField(),r))}return e.Ee}function Pi(t){const e=Ue(t);return e.de||(e.de=$9(e,sd(t))),e.de}function $9(t,e){if(t.limitType==="F")return nS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Nd(s.field,o)});const n=t.endAt?new Om(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Om(t.startAt.position,t.startAt.inclusive):null;return nS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function lv(t,e){const n=t.filters.concat([e]);return new Nu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function uv(t,e,n){return new Nu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pp(t,e){return k_(Pi(t),Pi(e))&&t.limitType===e.limitType}function dk(t){return`${C_(Pi(t))}|lt:${t.limitType}`}function Gl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>ok(s)).join(", ")}]`),hp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>bu(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>bu(s)).join(",")),`Target(${r})`}(Pi(t))}; limitType=${t.limitType})`}function gp(t,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Re.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,s){for(const o of sd(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(l,c,f){const h=eS(l,c,f);return l.inclusive?h<=0:h<0}(r.startAt,sd(r),s)||r.endAt&&!function(l,c,f){const h=eS(l,c,f);return l.inclusive?h>=0:h>0}(r.endAt,sd(r),s))}(t,e)}function F9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function fk(t){return(e,n)=>{let r=!1;for(const s of sd(t)){const o=q9(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function q9(t,e,n){const r=t.field.isKeyField()?Re.comparator(e.key,n.key):function(o,l,c){const f=l.data.field(o),h=c.data.field(o);return f!==null&&h!==null?_u(f,h):Me(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ia(this.inner,(n,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return YC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G9=new It(Re.comparator);function Ss(){return G9}const hk=new It(Re.comparator);function ed(...t){let e=hk;for(const n of t)e=e.insert(n.key,n);return e}function mk(t){let e=hk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Eo(){return ad()}function pk(){return ad()}function ad(){return new Bo(t=>t.toString(),(t,e)=>t.isEqual(e))}const K9=new It(Re.comparator),Y9=new sn(Re.comparator);function et(...t){let e=Y9;for(const n of t)e=e.add(n);return e}const X9=new sn(qe);function W9(){return X9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dm(e)?"-0":e}}function gk(t){return{integerValue:""+t}}function Q9(t,e){return T9(e)?gk(e):R_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(){this._=void 0}}function Z9(t,e,n){return t instanceof Vm?function(s,o){const l={fields:{[QC]:{stringValue:WC},[JC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&S_(o)&&(o=mp(o)),o&&(l.fields[ZC]=o),{mapValue:l}}(n,e):t instanceof Id?vk(t,e):t instanceof Dd?_k(t,e):function(s,o){const l=yk(s,o),c=iS(l)+iS(s.Re);return sv(l)&&sv(s.Re)?gk(c):R_(s.serializer,c)}(t,e)}function J9(t,e,n){return t instanceof Id?vk(t,e):t instanceof Dd?_k(t,e):n}function yk(t,e){return t instanceof Lm?function(r){return sv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Vm extends yp{}class Id extends yp{constructor(e){super(),this.elements=e}}function vk(t,e){const n=bk(e);for(const r of t.elements)n.some(s=>Bi(s,r))||n.push(r);return{arrayValue:{values:n}}}class Dd extends yp{constructor(e){super(),this.elements=e}}function _k(t,e){let n=bk(e);for(const r of t.elements)n=n.filter(s=>!Bi(s,r));return{arrayValue:{values:n}}}class Lm extends yp{constructor(e,n){super(),this.serializer=e,this.Re=n}}function iS(t){return $t(t.integerValue||t.doubleValue)}function bk(t){return A_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function ej(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Id&&s instanceof Id||r instanceof Dd&&s instanceof Dd?vu(r.elements,s.elements,Bi):r instanceof Lm&&s instanceof Lm?Bi(r.Re,s.Re):r instanceof Vm&&s instanceof Vm}(t.transform,e.transform)}class tj{constructor(e,n){this.version=e,this.transformResults=n}}class qn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new qn}static exists(e){return new qn(void 0,e)}static updateTime(e){return new qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class vp{}function wk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _p(t.key,qn.none()):new Wd(t.key,t.data,qn.none());{const n=t.data,r=Jn.empty();let s=new sn(Tn.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new Da(t.key,r,new _r(s.toArray()),qn.none())}}function nj(t,e,n){t instanceof Wd?function(s,o,l){const c=s.value.clone(),f=aS(s.fieldTransforms,o,l.transformResults);c.setAll(f),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Da?function(s,o,l){if(!sm(s.precondition,o))return void o.convertToUnknownDocument(l.version);const c=aS(s.fieldTransforms,o,l.transformResults),f=o.data;f.setAll(Ek(s)),f.setAll(c),o.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function od(t,e,n,r){return t instanceof Wd?function(o,l,c,f){if(!sm(o.precondition,l))return c;const h=o.value.clone(),p=oS(o.fieldTransforms,f,l);return h.setAll(p),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Da?function(o,l,c,f){if(!sm(o.precondition,l))return c;const h=oS(o.fieldTransforms,f,l),p=l.data;return p.setAll(Ek(o)),p.setAll(h),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(t,e,n,r):function(o,l,c){return sm(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(t,e,n)}function rj(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=yk(r.transform,s||null);o!=null&&(n===null&&(n=Jn.empty()),n.set(r.field,o))}return n||null}function sS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&vu(r,s,(o,l)=>ej(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Wd extends vp{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Da extends vp{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Ek(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function aS(t,e,n){const r=new Map;dt(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,c=e.data.field(o.field);r.set(o.field,J9(l,c,n[s]))}return r}function oS(t,e,n){const r=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);r.set(s.field,Z9(o,l,e))}return r}class _p extends vp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ij extends vp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&nj(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=od(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=od(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=pk();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=n.has(s.key)?null:c;const f=wk(l,c);f!==null&&r.set(s.key,f),l.isValidDocument()||l.convertToNoDocument(je.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),et())}isEqual(e){return this.batchId===e.batchId&&vu(this.mutations,e.mutations,(n,r)=>sS(n,r))&&vu(this.baseMutations,e.baseMutations,(n,r)=>sS(n,r))}}class N_{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){dt(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return K9}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new N_(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt,it;function lj(t){switch(t){case ve.OK:return Me(64938);case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0;default:return Me(15467,{code:t})}}function xk(t){if(t===void 0)return Ts("GRPC error has no .code"),ve.UNKNOWN;switch(t){case Xt.OK:return ve.OK;case Xt.CANCELLED:return ve.CANCELLED;case Xt.UNKNOWN:return ve.UNKNOWN;case Xt.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case Xt.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case Xt.INTERNAL:return ve.INTERNAL;case Xt.UNAVAILABLE:return ve.UNAVAILABLE;case Xt.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case Xt.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case Xt.NOT_FOUND:return ve.NOT_FOUND;case Xt.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case Xt.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case Xt.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case Xt.ABORTED:return ve.ABORTED;case Xt.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case Xt.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case Xt.DATA_LOSS:return ve.DATA_LOSS;default:return Me(39323,{code:t})}}(it=Xt||(Xt={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=new va([4294967295,4294967295],0);function lS(t){const e=qC().encode(t),n=new LC;return n.update(e),new Uint8Array(n.digest())}function uS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new va([n,r],0),new va([s,o],0)]}class I_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new td(`Invalid padding: ${n}`);if(r<0)throw new td(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new td(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new td(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=va.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(va.fromNumber(r)));return s.compare(uj)===1&&(s=new va([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=lS(e),[r,s]=uS(n);for(let o=0;o<this.hashCount;o++){const l=this.we(r,s,o);if(!this.be(l))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new I_(o,s,n);return r.forEach(c=>l.insert(c)),l}insert(e){if(this.pe===0)return;const n=lS(e),[r,s]=uS(n);for(let o=0;o<this.hashCount;o++){const l=this.we(r,s,o);this.Se(l)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class td extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Qd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new bp(je.min(),s,new It(qe),Ss(),et())}}class Qd{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Qd(r,n,et(),et(),et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class Tk{constructor(e,n){this.targetId=e,this.Ce=n}}class Sk{constructor(e,n,r=Sn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class cS{constructor(){this.Fe=0,this.Me=dS(),this.xe=Sn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=et(),n=et(),r=et();return this.Me.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Me(38017,{changeType:o})}}),new Qd(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=dS()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,dt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class cj{constructor(e){this.ze=e,this.je=new Map,this.He=Ss(),this.Je=Hh(),this.Ye=Hh(),this.Ze=new It(qe)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:Me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const o=s.target;if(ov(o))if(r===0){const l=new Re(o.path);this.tt(n,l,In.newNoDocument(l,je.min()))}else dt(r===1,20013,{expectedCount:r});else{const l=this.ut(n);if(l!==r){const c=this.ct(e),f=c?this.lt(c,e,l):1;if(f!==0){this.st(n);const h=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,h)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let l,c;try{l=Sa(r).toUint8Array()}catch(f){if(f instanceof XC)return yu("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{c=new I_(l,s,o)}catch(f){return yu(f instanceof td?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return c.pe===0?null:c}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(o=>{const l=this.ze.Pt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.tt(n,o,null),s++)}),s}It(e){const n=new Map;this.je.forEach((o,l)=>{const c=this._t(l);if(c){if(o.current&&ov(c.target)){const f=new Re(c.target.path);this.Et(f).has(l)||this.dt(l,f)||this.tt(l,f,In.newNoDocument(f,e))}o.Le&&(n.set(l,o.qe()),o.Qe())}});let r=et();this.Ye.forEach((o,l)=>{let c=!0;l.forEachWhile(f=>{const h=this._t(f);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.He.forEach((o,l)=>l.setReadTime(e));const s=new bp(e,n,this.Ze,this.He,r);return this.He=Ss(),this.Je=Hh(),this.Ye=Hh(),this.Ze=new It(qe),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new cS,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new sn(qe),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new sn(qe),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||Te("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new cS),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Hh(){return new It(Re.comparator)}function dS(){return new It(Re.comparator)}const dj={asc:"ASCENDING",desc:"DESCENDING"},fj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hj={and:"AND",or:"OR"};class mj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function cv(t,e){return t.useProto3Json||hp(e)?e:{value:e}}function jm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ak(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pj(t,e){return jm(t,e.toTimestamp())}function Oi(t){return dt(!!t,49232),je.fromTimestamp(function(n){const r=Ta(n);return new ft(r.seconds,r.nanos)}(t))}function D_(t,e){return dv(t,e).canonicalString()}function dv(t,e){const n=function(s){return new Et(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Ck(t){const e=Et.fromString(t);return dt(Dk(e),10190,{key:e.toString()}),e}function fv(t,e){return D_(t.databaseId,e.path)}function uy(t,e){const n=Ck(e);if(n.get(1)!==t.databaseId.projectId)throw new Se(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Se(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Re(Rk(n))}function kk(t,e){return D_(t.databaseId,e)}function gj(t){const e=Ck(t);return e.length===4?Et.emptyPath():Rk(e)}function hv(t){return new Et(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Rk(t){return dt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function fS(t,e,n){return{name:fv(t,e),fields:n.value.mapValue.fields}}function yj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Me(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(h,p){return h.useProto3Json?(dt(p===void 0||typeof p=="string",58123),Sn.fromBase64String(p||"")):(dt(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Sn.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(h){const p=h.code===void 0?ve.UNKNOWN:xk(h.code);return new Se(p,h.message||"")}(l);n=new Sk(r,s,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=uy(t,r.document.name),o=Oi(r.document.updateTime),l=r.document.createTime?Oi(r.document.createTime):je.min(),c=new Jn({mapValue:{fields:r.document.fields}}),f=In.newFoundDocument(s,o,l,c),h=r.targetIds||[],p=r.removedTargetIds||[];n=new am(h,p,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=uy(t,r.document),o=r.readTime?Oi(r.readTime):je.min(),l=In.newNoDocument(s,o),c=r.removedTargetIds||[];n=new am([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=uy(t,r.document),o=r.removedTargetIds||[];n=new am([],o,s,null)}else{if(!("filter"in e))return Me(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new oj(s,o),c=r.targetId;n=new Tk(c,l)}}return n}function vj(t,e){let n;if(e instanceof Wd)n={update:fS(t,e.key,e.value)};else if(e instanceof _p)n={delete:fv(t,e.key)};else if(e instanceof Da)n={update:fS(t,e.key,e.data),updateMask:Cj(e.fieldMask)};else{if(!(e instanceof ij))return Me(16599,{ft:e.type});n={verify:fv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const c=l.transform;if(c instanceof Vm)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Id)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Dd)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Lm)return{fieldPath:l.field.canonicalString(),increment:c.Re};throw Me(20930,{transform:l.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:pj(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Me(27497)}(t,e.precondition)),n}function _j(t,e){return t&&t.length>0?(dt(e!==void 0,14353),t.map(n=>function(s,o){let l=s.updateTime?Oi(s.updateTime):Oi(o);return l.isEqual(je.min())&&(l=Oi(o)),new tj(l,s.transformResults||[])}(n,e))):[]}function bj(t,e){return{documents:[kk(t,e.path)]}}function wj(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=kk(t,s);const o=function(h){if(h.length!==0)return Ik(si.create(h,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(h){if(h.length!==0)return h.map(p=>function(b){return{field:Kl(b.field),direction:Tj(b.dir)}}(p))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const c=cv(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{gt:n,parent:s}}function Ej(t){let e=gj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){dt(r===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=function(v){const b=Nk(v);return b instanceof si&&sk(b)?b.getFilters():[b]}(n.where));let l=[];n.orderBy&&(l=function(v){return v.map(b=>function(M){return new Nd(Yl(M.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(b))}(n.orderBy));let c=null;n.limit&&(c=function(v){let b;return b=typeof v=="object"?v.value:v,hp(b)?null:b}(n.limit));let f=null;n.startAt&&(f=function(v){const b=!!v.before,R=v.values||[];return new Om(R,b)}(n.startAt));let h=null;return n.endAt&&(h=function(v){const b=!v.before,R=v.values||[];return new Om(R,b)}(n.endAt)),H9(e,s,l,o,c,"F",f,h)}function xj(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Nk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Yl(n.unaryFilter.field);return Qt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Yl(n.unaryFilter.field);return Qt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Yl(n.unaryFilter.field);return Qt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Yl(n.unaryFilter.field);return Qt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}}(t):t.fieldFilter!==void 0?function(n){return Qt.create(Yl(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return si.create(n.compositeFilter.filters.map(r=>Nk(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Me(1026)}}(n.compositeFilter.op))}(t):Me(30097,{filter:t})}function Tj(t){return dj[t]}function Sj(t){return fj[t]}function Aj(t){return hj[t]}function Kl(t){return{fieldPath:t.canonicalString()}}function Yl(t){return Tn.fromServerFormat(t.fieldPath)}function Ik(t){return t instanceof Qt?function(n){if(n.op==="=="){if(JT(n.value))return{unaryFilter:{field:Kl(n.field),op:"IS_NAN"}};if(ZT(n.value))return{unaryFilter:{field:Kl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(JT(n.value))return{unaryFilter:{field:Kl(n.field),op:"IS_NOT_NAN"}};if(ZT(n.value))return{unaryFilter:{field:Kl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kl(n.field),op:Sj(n.op),value:n.value}}}(t):t instanceof si?function(n){const r=n.getFilters().map(s=>Ik(s));return r.length===1?r[0]:{compositeFilter:{op:Aj(n.op),filters:r}}}(t):Me(54877,{filter:t})}function Cj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Dk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,n,r,s,o=je.min(),l=je.min(),c=Sn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=f}withSequenceNumber(e){return new ha(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ha(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ha(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ha(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e){this.wt=e}}function Rj(t){const e=Ej({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?uv(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(){this.Cn=new Ij}addToCollectionParentIndex(e,n){return this.Cn.add(n),_e.resolve()}getCollectionParents(e,n){return _e.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return _e.resolve()}deleteFieldIndex(e,n){return _e.resolve()}deleteAllFieldIndexes(e){return _e.resolve()}createTargetIndexes(e,n){return _e.resolve()}getDocumentsMatchingTarget(e,n){return _e.resolve(null)}getIndexType(e,n){return _e.resolve(0)}getFieldIndexes(e,n){return _e.resolve([])}getNextCollectionGroupToUpdate(e){return _e.resolve(null)}getMinOffset(e,n){return _e.resolve(xa.min())}getMinOffsetFromCollectionGroup(e,n){return _e.resolve(xa.min())}updateCollectionGroup(e,n,r){return _e.resolve()}updateIndexEntries(e,n){return _e.resolve()}}class Ij{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new sn(Et.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new sn(Et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Mk=41943040;class Zn{static withCacheSize(e){return new Zn(e,Zn.DEFAULT_COLLECTION_PERCENTILE,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zn.DEFAULT_COLLECTION_PERCENTILE=10,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zn.DEFAULT=new Zn(Mk,Zn.DEFAULT_COLLECTION_PERCENTILE,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zn.DISABLED=new Zn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new wu(0)}static lr(){return new wu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="LruGarbageCollector",Dj=1048576;function pS([t,e],[n,r]){const s=qe(t,n);return s===0?qe(e,r):s}class Mj{constructor(e){this.Er=e,this.buffer=new sn(pS),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();pS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Pj{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Te(mS,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ru(n)?Te(mS,"Ignoring IndexedDB error during garbage collection: ",n):await ku(n)}await this.mr(3e5)})}}class Oj{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return _e.resolve(fp.le);const r=new Mj(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),_e.resolve(hS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hS):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,o,l,c,f,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(r=v,c=Date.now(),this.removeTargets(e,r,n))).next(v=>(o=v,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(h=Date.now(),ql()<=Je.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-p}ms
	Determined least recently used ${s} in `+(c-l)+`ms
	Removed ${o} targets in `+(f-c)+`ms
	Removed ${v} documents in `+(h-f)+`ms
Total Duration: ${h-p}ms`),_e.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v})))}}function Vj(t,e){return new Oj(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(){this.changes=new Bo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,In.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?_e.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&od(r.mutation,s,_r.empty(),ft.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,et()).next(()=>r))}getLocalViewOfDocuments(e,n,r=et()){const s=Eo();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(o=>{let l=ed();return o.forEach((c,f)=>{l=l.insert(c,f.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const r=Eo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,et()))}populateOverlays(e,n,r){const s=[];return r.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,c)=>{n.set(l,c)})})}computeViews(e,n,r,s){let o=Ss();const l=ad(),c=function(){return ad()}();return n.forEach((f,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof Da)?o=o.insert(h.key,h):p!==void 0?(l.set(h.key,p.mutation.getFieldMask()),od(p.mutation,h,p.mutation.getFieldMask(),ft.now())):l.set(h.key,_r.empty())}),this.recalculateAndSaveOverlays(e,o).next(f=>(f.forEach((h,p)=>l.set(h,p)),n.forEach((h,p)=>{var v;return c.set(h,new jj(p,(v=l.get(h))!==null&&v!==void 0?v:null))}),c))}recalculateAndSaveOverlays(e,n){const r=ad();let s=new It((l,c)=>l-c),o=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const c of l)c.keys().forEach(f=>{const h=n.get(f);if(h===null)return;let p=r.get(f)||_r.empty();p=c.applyToLocalView(h,p),r.set(f,p);const v=(s.get(c.batchId)||et()).add(f);s=s.insert(c.batchId,v)})}).next(()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const f=c.getNext(),h=f.key,p=f.value,v=pk();p.forEach(b=>{if(!o.has(b)){const R=wk(n.get(b),r.get(b));R!==null&&v.set(b,R),o=o.add(b)}}),l.push(this.documentOverlayCache.saveOverlays(e,h,v))}return _e.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(l){return Re.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ck(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):_e.resolve(Eo());let c=Ad,f=o;return l.next(h=>_e.forEach(h,(p,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),o.get(p)?_e.resolve():this.remoteDocumentCache.getEntry(e,p).next(b=>{f=f.insert(p,b)}))).next(()=>this.populateOverlays(e,h,o)).next(()=>this.computeViews(e,f,h,et())).next(p=>({batchId:c,changes:mk(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Re(n)).next(r=>{let s=ed();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let l=ed();return this.indexManager.getCollectionParents(e,o).next(c=>_e.forEach(c,f=>{const h=function(v,b){return new Nu(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((v,b)=>{l=l.insert(v,b)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s))).next(l=>{o.forEach((f,h)=>{const p=h.getKey();l.get(p)===null&&(l=l.insert(p,In.newInvalidDocument(p)))});let c=ed();return l.forEach((f,h)=>{const p=o.get(f);p!==void 0&&od(p.mutation,h,_r.empty(),ft.now()),gp(n,h)&&(c=c.insert(f,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return _e.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Oi(s.createTime)}}(n)),_e.resolve()}getNamedQuery(e,n){return _e.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:Rj(s.bundledQuery),readTime:Oi(s.readTime)}}(n)),_e.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(){this.overlays=new It(Re.comparator),this.Qr=new Map}getOverlay(e,n){return _e.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Eo();return _e.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,o)=>{this.St(e,n,o)}),_e.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),_e.resolve()}getOverlaysForCollection(e,n,r){const s=Eo(),o=n.length+1,l=new Re(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const f=c.getNext().value,h=f.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===o&&f.largestBatchId>r&&s.set(f.getKey(),f)}return _e.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new It((h,p)=>h-p);const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=o.get(h.largestBatchId);p===null&&(p=Eo(),o=o.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=Eo(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((h,p)=>c.set(h,p)),!(c.size()>=s)););return _e.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new aj(n,r));let o=this.Qr.get(n);o===void 0&&(o=et(),this.Qr.set(n,o)),this.Qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(){this.sessionToken=Sn.EMPTY_BYTE_STRING}getSessionToken(e){return _e.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,_e.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(){this.$r=new sn(hn.Ur),this.Kr=new sn(hn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new hn(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new hn(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new Re(new Et([])),r=new hn(n,e),s=new hn(n,e+1),o=[];return this.Kr.forEachInRange([r,s],l=>{this.zr(l),o.push(l.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Re(new Et([])),r=new hn(n,e),s=new hn(n,e+1);let o=et();return this.Kr.forEachInRange([r,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new hn(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class hn{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Re.comparator(e.key,n.key)||qe(e.Zr,n.Zr)}static Wr(e,n){return qe(e.Zr,n.Zr)||Re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new sn(hn.Ur)}checkEmpty(e){return _e.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new sj(o,n,r,s);this.mutationQueue.push(l);for(const c of s)this.Xr=this.Xr.add(new hn(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return _e.resolve(l)}lookupMutationBatch(e,n){return _e.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),o=s<0?0:s;return _e.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(this.mutationQueue.length===0?T_:this.nr-1)}getAllMutationBatches(e){return _e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new hn(n,0),s=new hn(n,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,s],l=>{const c=this.ei(l.Zr);o.push(c)}),_e.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new sn(qe);return n.forEach(s=>{const o=new hn(s,0),l=new hn(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,l],c=>{r=r.add(c.Zr)})}),_e.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;Re.isDocumentKey(o)||(o=o.child(""));const l=new hn(new Re(o),0);let c=new sn(qe);return this.Xr.forEachWhile(f=>{const h=f.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(c=c.add(f.Zr)),!0)},l),_e.resolve(this.ni(c))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){dt(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return _e.forEach(n.mutations,s=>{const o=new hn(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new hn(n,0),s=this.Xr.firstAfterOrEqual(r);return _e.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,_e.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e){this.ii=e,this.docs=function(){return new It(Re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,l=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return _e.resolve(r?r.document.mutableCopy():In.newInvalidDocument(n))}getEntries(e,n){let r=Ss();return n.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():In.newInvalidDocument(s))}),_e.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=Ss();const l=n.path,c=new Re(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(c);for(;f.hasNext();){const{key:h,value:{document:p}}=f.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||b9(_9(p),r)<=0||(s.has(p.key)||gp(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return _e.resolve(o)}getAllFromCollectionGroup(e,n,r,s){Me(9500)}si(e,n){return _e.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new qj(this)}getSize(e){return _e.resolve(this.size)}}class qj extends Lj{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),_e.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e){this.persistence=e,this.oi=new Bo(n=>C_(n),k_),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this._i=0,this.ai=new M_,this.targetCount=0,this.ui=wu.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),_e.resolve()}getLastRemoteSnapshotVersion(e){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _e.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),_e.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new wu(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,_e.resolve()}updateTargetData(e,n){return this.Tr(n),_e.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,_e.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.oi.forEach((l,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.oi.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),_e.waitFor(o).next(()=>s)}getTargetCount(e){return _e.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return _e.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),_e.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),_e.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),_e.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return _e.resolve(r)}containsKey(e,n){return _e.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,n){this.ci={},this.overlays={},this.li=new fp(0),this.hi=!1,this.hi=!0,this.Pi=new Hj,this.referenceDelegate=e(this),this.Ti=new Gj(this),this.indexManager=new Nj,this.remoteDocumentCache=function(s){return new Fj(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new kj(n),this.Ei=new Uj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Bj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new $j(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){Te("MemoryPersistence","Starting transaction:",e);const s=new Kj(this.li.next());return this.referenceDelegate.di(),r(s).next(o=>this.referenceDelegate.Ai(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ri(e,n){return _e.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class Kj extends E9{constructor(e){super(),this.currentSequenceNumber=e}}class P_{constructor(e){this.persistence=e,this.Vi=new M_,this.mi=null}static fi(e){return new P_(e)}get gi(){if(this.mi)return this.mi;throw Me(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),_e.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),_e.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),_e.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.gi,r=>{const s=Re.fromPath(r);return this.pi(e,s).next(o=>{o||n.removeEntry(s,je.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return _e.or([()=>_e.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class zm{constructor(e,n){this.persistence=e,this.yi=new Bo(r=>S9(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Vj(this,n)}static fi(e,n){return new zm(e,n)}di(){}Ai(e){return _e.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return _e.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(o=>o?_e.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.si(e,l=>this.Dr(e,l,n).next(c=>{c||(r++,o.removeEntry(l,je.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),_e.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),_e.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),_e.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),_e.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=rm(e.data.value)),n}Dr(e,n,r){return _e.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return _e.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=et(),s=et();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new O_(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return xV()?8:x9(Pn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ws(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.bs(e,n,s,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new Yj;return this.Ss(e,n,l).next(c=>{if(o.result=c,this.fs)return this.Ds(e,n,l,c.size)})}).next(()=>o.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(ql()<=Je.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",Gl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),_e.resolve()):(ql()<=Je.DEBUG&&Te("QueryEngine","Query:",Gl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(ql()<=Je.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",Gl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pi(n))):_e.resolve())}ws(e,n){if(rS(n))return _e.resolve(null);let r=Pi(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=uv(n,null,"F"),r=Pi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=et(...o);return this.ys.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,r).next(f=>{const h=this.vs(n,c);return this.Cs(n,h,l,f.readTime)?this.ws(e,uv(n,null,"F")):this.Fs(e,h,n,f)}))})))}bs(e,n,r,s){return rS(n)||s.isEqual(je.min())?_e.resolve(null):this.ys.getDocuments(e,r).next(o=>{const l=this.vs(n,o);return this.Cs(n,l,r,s)?_e.resolve(null):(ql()<=Je.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Gl(n)),this.Fs(e,l,n,v9(s,Ad)).next(c=>c))})}vs(e,n){let r=new sn(fk(e));return n.forEach((s,o)=>{gp(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,r){return ql()<=Je.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",Gl(n)),this.ys.getDocumentsMatchingQuery(e,n,xa.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="LocalStore",Wj=3e8;class Qj{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new It(qe),this.Os=new Bo(o=>C_(o),k_),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zj(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function Zj(t,e,n,r){return new Qj(t,e,n,r)}async function Ok(t,e){const n=Ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],c=[];let f=et();for(const h of s){l.push(h.batchId);for(const p of h.mutations)f=f.add(p.key)}for(const h of o){c.push(h.batchId);for(const p of h.mutations)f=f.add(p.key)}return n.localDocuments.getDocuments(r,f).next(h=>({ks:h,removedBatchIds:l,addedBatchIds:c}))})})}function Jj(t,e){const n=Ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=n.Bs.newChangeBuffer({trackRemovals:!0});return function(c,f,h,p){const v=h.batch,b=v.keys();let R=_e.resolve();return b.forEach(M=>{R=R.next(()=>p.getEntry(f,M)).next(O=>{const L=h.docVersions.get(M);dt(L!==null,48541),O.version.compareTo(L)<0&&(v.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),p.addEntry(O)))})}),R.next(()=>c.mutationQueue.removeMutationBatch(f,v))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let f=et();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(f=f.add(c.batch.mutations[h].key));return f}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Vk(t){const e=Ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function e7(t,e){const n=Ue(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const c=[];e.targetChanges.forEach((p,v)=>{const b=s.get(v);if(!b)return;c.push(n.Ti.removeMatchingKeys(o,p.removedDocuments,v).next(()=>n.Ti.addMatchingKeys(o,p.addedDocuments,v)));let R=b.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?R=R.withResumeToken(Sn.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):p.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(p.resumeToken,r)),s=s.insert(v,R),function(O,L,j){return O.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=Wj?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(b,R,p)&&c.push(n.Ti.updateTargetData(o,R))});let f=Ss(),h=et();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))}),c.push(t7(o,l,e.documentUpdates).next(p=>{f=p.qs,h=p.Qs})),!r.isEqual(je.min())){const p=n.Ti.getLastRemoteSnapshotVersion(o).next(v=>n.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(p)}return _e.waitFor(c).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,f,h)).next(()=>f)}).then(o=>(n.xs=s,o))}function t7(t,e,n){let r=et(),s=et();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let l=Ss();return n.forEach((c,f)=>{const h=o.get(c);f.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),f.isNoDocument()&&f.version.isEqual(je.min())?(e.removeEntry(c,f.readTime),l=l.insert(c,f)):!h.isValidDocument()||f.version.compareTo(h.version)>0||f.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(f),l=l.insert(c,f)):Te(V_,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",f.version)}),{qs:l,Qs:s}})}function n7(t,e){const n=Ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=T_),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function r7(t,e){const n=Ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(o=>o?(s=o,_e.resolve(s)):n.Ti.allocateTargetId(r).next(l=>(s=new ha(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function mv(t,e,n){const r=Ue(t),s=r.xs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!Ru(l))throw l;Te(V_,`Failed to update sequence numbers for target ${e}: ${l}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function gS(t,e,n){const r=Ue(t);let s=je.min(),o=et();return r.persistence.runTransaction("Execute query","readwrite",l=>function(f,h,p){const v=Ue(f),b=v.Os.get(p);return b!==void 0?_e.resolve(v.xs.get(b)):v.Ti.getTargetData(h,p)}(r,l,Pi(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(l,c.targetId).next(f=>{o=f})}).next(()=>r.Ms.getDocumentsMatchingQuery(l,e,n?s:je.min(),n?o:et())).next(c=>(i7(r,F9(e),c),{documents:c,$s:o})))}function i7(t,e,n){let r=t.Ns.get(e)||je.min();n.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Ns.set(e,r)}class yS{constructor(){this.activeTargetIds=W9()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class s7{constructor(){this.xo=new yS,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new yS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a7{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="ConnectivityMonitor";class _S{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Te(vS,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Te(vS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $h=null;function pv(){return $h===null?$h=function(){return 268435456+Math.round(2147483648*Math.random())}():$h++,"0x"+$h.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy="RestConnection",o7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class l7{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===Mm?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,o){const l=pv(),c=this.jo(e,n.toUriEncodedString());Te(cy,`Sending RPC '${e}' ${l}:`,c,r);const f={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(f,s,o);const{host:h}=new URL(c),p=Uo(h);return this.Jo(e,c,f,r,p).then(v=>(Te(cy,`Received RPC '${e}' ${l}: `,v),v),v=>{throw yu(cy,`RPC '${e}' ${l} failed with error: `,v,"url: ",c,"request:",r),v})}Yo(e,n,r,s,o,l){return this.zo(e,n,r,s,o)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Cu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}jo(e,n){const r=o7[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn="WebChannelConnection";class c7 extends l7{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,o){const l=pv();return new Promise((c,f)=>{const h=new jC;h.setWithCredentials(!0),h.listenOnce(zC.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case nm.NO_ERROR:const v=h.getResponseJson();Te(Rn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),c(v);break;case nm.TIMEOUT:Te(Rn,`RPC '${e}' ${l} timed out`),f(new Se(ve.DEADLINE_EXCEEDED,"Request time out"));break;case nm.HTTP_ERROR:const b=h.getStatus();if(Te(Rn,`RPC '${e}' ${l} failed with status:`,b,"response text:",h.getResponseText()),b>0){let R=h.getResponseJson();Array.isArray(R)&&(R=R[0]);const M=R?.error;if(M&&M.status&&M.message){const O=function(j){const $=j.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf($)>=0?$:ve.UNKNOWN}(M.status);f(new Se(O,M.message))}else f(new Se(ve.UNKNOWN,"Server responded with status "+h.getStatus()))}else f(new Se(ve.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{h_:e,streamId:l,P_:h.getLastErrorCode(),T_:h.getLastError()})}}finally{Te(Rn,`RPC '${e}' ${l} completed.`)}});const p=JSON.stringify(s);Te(Rn,`RPC '${e}' ${l} sending request:`,s),h.send(n,"POST",p,r,15)})}I_(e,n,r){const s=pv(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=HC(),c=BC(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(f.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Ho(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const p=o.join("");Te(Rn,`Creating RPC '${e}' stream ${s}: ${p}`,f);const v=l.createWebChannel(p,f);this.E_(v);let b=!1,R=!1;const M=new u7({Zo:L=>{R?Te(Rn,`Not sending because RPC '${e}' stream ${s} is closed:`,L):(b||(Te(Rn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),b=!0),Te(Rn,`RPC '${e}' stream ${s} sending:`,L),v.send(L))},Xo:()=>v.close()}),O=(L,j,$)=>{L.listen(j,Y=>{try{$(Y)}catch(y){setTimeout(()=>{throw y},0)}})};return O(v,Jc.EventType.OPEN,()=>{R||(Te(Rn,`RPC '${e}' stream ${s} transport opened.`),M.__())}),O(v,Jc.EventType.CLOSE,()=>{R||(R=!0,Te(Rn,`RPC '${e}' stream ${s} transport closed`),M.u_(),this.d_(v))}),O(v,Jc.EventType.ERROR,L=>{R||(R=!0,yu(Rn,`RPC '${e}' stream ${s} transport errored. Name:`,L.name,"Message:",L.message),M.u_(new Se(ve.UNAVAILABLE,"The operation could not be completed")))}),O(v,Jc.EventType.MESSAGE,L=>{var j;if(!R){const $=L.data[0];dt(!!$,16349);const Y=$,y=Y?.error||((j=Y[0])===null||j===void 0?void 0:j.error);if(y){Te(Rn,`RPC '${e}' stream ${s} received error:`,y);const E=y.status;let w=function(N){const C=Xt[N];if(C!==void 0)return xk(C)}(E),x=y.message;w===void 0&&(w=ve.INTERNAL,x="Unknown error status: "+E+" with message "+y.message),R=!0,M.u_(new Se(w,x)),v.close()}else Te(Rn,`RPC '${e}' stream ${s} received:`,$),M.c_($)}}),O(c,UC.STAT_EVENT,L=>{L.stat===nv.PROXY?Te(Rn,`RPC '${e}' stream ${s} detected buffering proxy`):L.stat===nv.NOPROXY&&Te(Rn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{M.a_()},0),M}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function dy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(t){return new mj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e,n,r=1e3,s=1.5,o=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=s,this.V_=o,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&Te("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS="PersistentStream";class jk{constructor(e,n,r,s,o,l,c,f){this.xi=e,this.S_=r,this.D_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=f,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Lk(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===ve.RESOURCE_EXHAUSTED?(Ts(n.toString()),Ts("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{e(()=>{const s=new Se(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return Te(bS,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(Te(bS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class d7 extends jk{constructor(e,n,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=yj(this.serializer,e),r=function(o){if(!("targetChange"in o))return je.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?je.min():l.readTime?Oi(l.readTime):je.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=hv(this.serializer),n.addTarget=function(o,l){let c;const f=l.target;if(c=ov(f)?{documents:bj(o,f)}:{query:wj(o,f).gt},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=Ak(o,l.resumeToken);const h=cv(o,l.expectedCount);h!==null&&(c.expectedCount=h)}else if(l.snapshotVersion.compareTo(je.min())>0){c.readTime=jm(o,l.snapshotVersion.toTimestamp());const h=cv(o,l.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);const r=xj(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=hv(this.serializer),n.removeTarget=e,this.Q_(n)}}class f7 extends jk{constructor(e,n,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=_j(e.writeResults,e.commitTime),r=Oi(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=hv(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>vj(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{}class m7 extends h7{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new Se(ve.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.zo(e,dv(n,r),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(ve.UNKNOWN,o.toString())})}Yo(e,n,r,s,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Yo(e,dv(n,r),s,l,c,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Se(ve.UNKNOWN,l.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class p7{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Ts(n),this.ua=!1):Te("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo="RemoteStore";class g7{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=o,this.Ra.No(l=>{r.enqueueAndForget(async()=>{Ho(this)&&(Te(Oo,"Restarting streams for network reachability change."),await async function(f){const h=Ue(f);h.da.add(4),await Zd(h),h.Va.set("Unknown"),h.da.delete(4),await Ep(h)}(this))})}),this.Va=new p7(r,s)}}async function Ep(t){if(Ho(t))for(const e of t.Aa)await e(!0)}async function Zd(t){for(const e of t.Aa)await e(!1)}function zk(t,e){const n=Ue(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),U_(n)?z_(n):Iu(n).N_()&&j_(n,e))}function L_(t,e){const n=Ue(t),r=Iu(n);n.Ea.delete(e),r.N_()&&Uk(n,e),n.Ea.size===0&&(r.N_()?r.k_():Ho(n)&&n.Va.set("Unknown"))}function j_(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Iu(t).Z_(e)}function Uk(t,e){t.ma.Ke(e),Iu(t).X_(e)}function z_(t){t.ma=new cj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Iu(t).start(),t.Va.ca()}function U_(t){return Ho(t)&&!Iu(t).O_()&&t.Ea.size>0}function Ho(t){return Ue(t).da.size===0}function Bk(t){t.ma=void 0}async function y7(t){t.Va.set("Online")}async function v7(t){t.Ea.forEach((e,n)=>{j_(t,e)})}async function _7(t,e){Bk(t),U_(t)?(t.Va.Pa(e),z_(t)):t.Va.set("Unknown")}async function b7(t,e,n){if(t.Va.set("Online"),e instanceof Sk&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const c of o.targetIds)s.Ea.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.Ea.delete(c),s.ma.removeTarget(c))}(t,e)}catch(r){Te(Oo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Um(t,r)}else if(e instanceof am?t.ma.Xe(e):e instanceof Tk?t.ma.ot(e):t.ma.nt(e),!n.isEqual(je.min()))try{const r=await Vk(t.localStore);n.compareTo(r)>=0&&await function(o,l){const c=o.ma.It(l);return c.targetChanges.forEach((f,h)=>{if(f.resumeToken.approximateByteSize()>0){const p=o.Ea.get(h);p&&o.Ea.set(h,p.withResumeToken(f.resumeToken,l))}}),c.targetMismatches.forEach((f,h)=>{const p=o.Ea.get(f);if(!p)return;o.Ea.set(f,p.withResumeToken(Sn.EMPTY_BYTE_STRING,p.snapshotVersion)),Uk(o,f);const v=new ha(p.target,f,h,p.sequenceNumber);j_(o,v)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Te(Oo,"Failed to raise snapshot:",r),await Um(t,r)}}async function Um(t,e,n){if(!Ru(e))throw e;t.da.add(1),await Zd(t),t.Va.set("Offline"),n||(n=()=>Vk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Te(Oo,"Retrying IndexedDB access"),await n(),t.da.delete(1),await Ep(t)})}function Hk(t,e){return e().catch(n=>Um(t,n,e))}async function xp(t){const e=Ue(t),n=Ca(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:T_;for(;w7(e);)try{const s=await n7(e.localStore,r);if(s===null){e.Ia.length===0&&n.k_();break}r=s.batchId,E7(e,s)}catch(s){await Um(e,s)}$k(e)&&Fk(e)}function w7(t){return Ho(t)&&t.Ia.length<10}function E7(t,e){t.Ia.push(e);const n=Ca(t);n.N_()&&n.ea&&n.ta(e.mutations)}function $k(t){return Ho(t)&&!Ca(t).O_()&&t.Ia.length>0}function Fk(t){Ca(t).start()}async function x7(t){Ca(t).ia()}async function T7(t){const e=Ca(t);for(const n of t.Ia)e.ta(n.mutations)}async function S7(t,e,n){const r=t.Ia.shift(),s=N_.from(r,e,n);await Hk(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await xp(t)}async function A7(t,e){e&&Ca(t).ea&&await async function(r,s){if(function(l){return lj(l)&&l!==ve.ABORTED}(s.code)){const o=r.Ia.shift();Ca(r).L_(),await Hk(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await xp(r)}}(t,e),$k(t)&&Fk(t)}async function wS(t,e){const n=Ue(t);n.asyncQueue.verifyOperationInProgress(),Te(Oo,"RemoteStore received new credentials");const r=Ho(n);n.da.add(3),await Zd(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Ep(n)}async function C7(t,e){const n=Ue(t);e?(n.da.delete(2),await Ep(n)):e||(n.da.add(2),await Zd(n),n.Va.set("Unknown"))}function Iu(t){return t.fa||(t.fa=function(n,r,s){const o=Ue(n);return o.oa(),new d7(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{e_:y7.bind(null,t),n_:v7.bind(null,t),i_:_7.bind(null,t),Y_:b7.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),U_(t)?z_(t):t.Va.set("Unknown")):(await t.fa.stop(),Bk(t))})),t.fa}function Ca(t){return t.ga||(t.ga=function(n,r,s){const o=Ue(n);return o.oa(),new f7(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:x7.bind(null,t),i_:A7.bind(null,t),na:T7.bind(null,t),ra:S7.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await xp(t)):(await t.ga.stop(),t.Ia.length>0&&(Te(Oo,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new _a,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const l=Date.now()+r,c=new B_(e,n,l,s,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function H_(t,e){if(Ts("AsyncQueue",`${e}: ${t}`),Ru(t))return new Se(ve.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{static emptySet(e){return new lu(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Re.comparator(n.key,r.key):(n,r)=>Re.comparator(n.key,r.key),this.keyedMap=ed(),this.sortedSet=new It(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof lu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new lu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(){this.pa=new It(Re.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Me(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Eu{constructor(e,n,r,s,o,l,c,f,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=f,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,o){const l=[];return n.forEach(c=>{l.push({type:0,doc:c})}),new Eu(e,n,lu.emptySet(n),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k7{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class R7{constructor(){this.queries=xS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Ue(n),o=s.queries;s.queries=xS(),o.forEach((l,c)=>{for(const f of c.Sa)f.onError(r)})})(this,new Se(ve.ABORTED,"Firestore shutting down"))}}function xS(){return new Bo(t=>dk(t),pp)}async function N7(t,e){const n=Ue(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.Da()&&e.va()&&(r=2):(o=new k7,r=e.va()?0:1);try{switch(r){case 0:o.ba=await n.onListen(s,!0);break;case 1:o.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const c=H_(l,`Initialization of query '${Gl(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,o),o.Sa.push(e),e.Fa(n.onlineState),o.ba&&e.Ma(o.ba)&&$_(n)}async function I7(t,e){const n=Ue(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.va()?0:1:!o.Da()&&e.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function D7(t,e){const n=Ue(t);let r=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const c of l.Sa)c.Ma(s)&&(r=!0);l.ba=s}}r&&$_(n)}function M7(t,e,n){const r=Ue(t),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);r.queries.delete(e)}function $_(t){t.Ca.forEach(e=>{e.next()})}var gv,TS;(TS=gv||(gv={})).xa="default",TS.Cache="cache";class P7{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Eu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Eu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==gv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e){this.key=e}}class Gk{constructor(e){this.key=e}}class O7{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=et(),this.mutatedKeys=et(),this.Za=fk(e),this.Xa=new lu(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new ES,s=n?n.Xa:this.Xa;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,c=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,v)=>{const b=s.get(p),R=gp(this.query,v)?v:null,M=!!b&&this.mutatedKeys.has(b.key),O=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let L=!1;b&&R?b.data.isEqual(R.data)?M!==O&&(r.track({type:3,doc:R}),L=!0):this.ru(b,R)||(r.track({type:2,doc:R}),L=!0,(f&&this.Za(R,f)>0||h&&this.Za(R,h)<0)&&(c=!0)):!b&&R?(r.track({type:0,doc:R}),L=!0):b&&!R&&(r.track({type:1,doc:b}),L=!0,(f||h)&&(c=!0)),L&&(R?(l=l.add(R),o=O?o.add(p):o.delete(p)):(l=l.delete(p),o=o.delete(p)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const p=this.query.limitType==="F"?l.last():l.first();l=l.delete(p.key),o=o.delete(p.key),r.track({type:1,doc:p})}return{Xa:l,nu:r,Cs:c,mutatedKeys:o}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const l=e.nu.wa();l.sort((p,v)=>function(R,M){const O=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Vt:L})}};return O(R)-O(M)}(p.type,v.type)||this.Za(p.doc,v.doc)),this.iu(r),s=s!=null&&s;const c=n&&!s?this.su():[],f=this.Ya.size===0&&this.current&&!s?1:0,h=f!==this.Ja;return this.Ja=f,l.length!==0||h?{snapshot:new Eu(this.query,e.Xa,o,l,e.mutatedKeys,f===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:c}:{ou:c}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new ES,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=et(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new Gk(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new qk(r))}),n}au(e){this.Ha=e.$s,this.Ya=et();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Eu.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const F_="SyncEngine";class V7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class L7{constructor(e){this.key=e,this.cu=!1}}class j7{constructor(e,n,r,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.lu={},this.hu=new Bo(c=>dk(c),pp),this.Pu=new Map,this.Tu=new Set,this.Iu=new It(Re.comparator),this.Eu=new Map,this.du=new M_,this.Au={},this.Ru=new Map,this.Vu=wu.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function z7(t,e,n=!0){const r=Zk(t);let s;const o=r.hu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.uu()):s=await Kk(r,e,n,!0),s}async function U7(t,e){const n=Zk(t);await Kk(n,e,!0,!1)}async function Kk(t,e,n,r){const s=await r7(t.localStore,Pi(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let c;return r&&(c=await B7(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&zk(t.remoteStore,s),c}async function B7(t,e,n,r,s){t.fu=(v,b,R)=>async function(O,L,j,$){let Y=L.view.tu(j);Y.Cs&&(Y=await gS(O.localStore,L.query,!1).then(({documents:x})=>L.view.tu(x,Y)));const y=$&&$.targetChanges.get(L.targetId),E=$&&$.targetMismatches.get(L.targetId)!=null,w=L.view.applyChanges(Y,O.isPrimaryClient,y,E);return AS(O,L.targetId,w.ou),w.snapshot}(t,v,b,R);const o=await gS(t.localStore,e,!0),l=new O7(e,o.$s),c=l.tu(o.documents),f=Qd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=l.applyChanges(c,t.isPrimaryClient,f);AS(t,n,h.ou);const p=new V7(e,n,l);return t.hu.set(e,p),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),h.snapshot}async function H7(t,e,n){const r=Ue(t),s=r.hu.get(e),o=r.Pu.get(s.targetId);if(o.length>1)return r.Pu.set(s.targetId,o.filter(l=>!pp(l,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await mv(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&L_(r.remoteStore,s.targetId),yv(r,s.targetId)}).catch(ku)):(yv(r,s.targetId),await mv(r.localStore,s.targetId,!0))}async function $7(t,e){const n=Ue(t),r=n.hu.get(e),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),L_(n.remoteStore,r.targetId))}async function F7(t,e,n){const r=Q7(t);try{const s=await function(l,c){const f=Ue(l),h=ft.now(),p=c.reduce((R,M)=>R.add(M.key),et());let v,b;return f.persistence.runTransaction("Locally write mutations","readwrite",R=>{let M=Ss(),O=et();return f.Bs.getEntries(R,p).next(L=>{M=L,M.forEach((j,$)=>{$.isValidDocument()||(O=O.add(j))})}).next(()=>f.localDocuments.getOverlayedDocuments(R,M)).next(L=>{v=L;const j=[];for(const $ of c){const Y=rj($,v.get($.key).overlayedDocument);Y!=null&&j.push(new Da($.key,Y,nk(Y.value.mapValue),qn.exists(!0)))}return f.mutationQueue.addMutationBatch(R,h,j,c)}).next(L=>{b=L;const j=L.applyToLocalDocumentSet(v,O);return f.documentOverlayCache.saveOverlays(R,L.batchId,j)})}).then(()=>({batchId:b.batchId,changes:mk(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,c,f){let h=l.Au[l.currentUser.toKey()];h||(h=new It(qe)),h=h.insert(c,f),l.Au[l.currentUser.toKey()]=h}(r,s.batchId,n),await Jd(r,s.changes),await xp(r.remoteStore)}catch(s){const o=H_(s,"Failed to persist write");n.reject(o)}}async function Yk(t,e){const n=Ue(t);try{const r=await e7(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Eu.get(o);l&&(dt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.cu=!0:s.modifiedDocuments.size>0?dt(l.cu,14607):s.removedDocuments.size>0&&(dt(l.cu,42227),l.cu=!1))}),await Jd(n,r,e)}catch(r){await ku(r)}}function SS(t,e,n){const r=Ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((o,l)=>{const c=l.view.Fa(e);c.snapshot&&s.push(c.snapshot)}),function(l,c){const f=Ue(l);f.onlineState=c;let h=!1;f.queries.forEach((p,v)=>{for(const b of v.Sa)b.Fa(c)&&(h=!0)}),h&&$_(f)}(r.eventManager,e),s.length&&r.lu.Y_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function q7(t,e,n){const r=Ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),o=s&&s.key;if(o){let l=new It(Re.comparator);l=l.insert(o,In.newNoDocument(o,je.min()));const c=et().add(o),f=new bp(je.min(),new Map,new It(qe),l,c);await Yk(r,f),r.Iu=r.Iu.remove(o),r.Eu.delete(e),q_(r)}else await mv(r.localStore,e,!1).then(()=>yv(r,e,n)).catch(ku)}async function G7(t,e){const n=Ue(t),r=e.batch.batchId;try{const s=await Jj(n.localStore,e);Wk(n,r,null),Xk(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Jd(n,s)}catch(s){await ku(s)}}async function K7(t,e,n){const r=Ue(t);try{const s=await function(l,c){const f=Ue(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return f.mutationQueue.lookupMutationBatch(h,c).next(v=>(dt(v!==null,37113),p=v.keys(),f.mutationQueue.removeMutationBatch(h,v))).next(()=>f.mutationQueue.performConsistencyCheck(h)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(h,p,c)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>f.localDocuments.getDocuments(h,p))})}(r.localStore,e);Wk(r,e,n),Xk(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Jd(r,s)}catch(s){await ku(s)}}function Xk(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function Wk(t,e,n){const r=Ue(t);let s=r.Au[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Au[r.currentUser.toKey()]=s}}function yv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||Qk(t,r)})}function Qk(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(L_(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),q_(t))}function AS(t,e,n){for(const r of n)r instanceof qk?(t.du.addReference(r.key,e),Y7(t,r)):r instanceof Gk?(Te(F_,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||Qk(t,r.key)):Me(19791,{pu:r})}function Y7(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(Te(F_,"New document in limbo: "+n),t.Tu.add(r),q_(t))}function q_(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new Re(Et.fromString(e)),r=t.Vu.next();t.Eu.set(r,new L7(n)),t.Iu=t.Iu.insert(n,r),zk(t.remoteStore,new ha(Pi(uk(n.path)),r,"TargetPurposeLimboResolution",fp.le))}}async function Jd(t,e,n){const r=Ue(t),s=[],o=[],l=[];r.hu.isEmpty()||(r.hu.forEach((c,f)=>{l.push(r.fu(f,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const v=h?!h.fromCache:(p=n?.targetChanges.get(f.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(h){s.push(h);const v=O_.Rs(f.targetId,h);o.push(v)}}))}),await Promise.all(l),r.lu.Y_(s),await async function(f,h){const p=Ue(f);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>_e.forEach(h,b=>_e.forEach(b.ds,R=>p.persistence.referenceDelegate.addReference(v,b.targetId,R)).next(()=>_e.forEach(b.As,R=>p.persistence.referenceDelegate.removeReference(v,b.targetId,R)))))}catch(v){if(!Ru(v))throw v;Te(V_,"Failed to update sequence numbers: "+v)}for(const v of h){const b=v.targetId;if(!v.fromCache){const R=p.xs.get(b),M=R.snapshotVersion,O=R.withLastLimboFreeSnapshotVersion(M);p.xs=p.xs.insert(b,O)}}}(r.localStore,o))}async function X7(t,e){const n=Ue(t);if(!n.currentUser.isEqual(e)){Te(F_,"User change. New user:",e.toKey());const r=await Ok(n.localStore,e);n.currentUser=e,function(o,l){o.Ru.forEach(c=>{c.forEach(f=>{f.reject(new Se(ve.CANCELLED,l))})}),o.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Jd(n,r.ks)}}function W7(t,e){const n=Ue(t),r=n.Eu.get(e);if(r&&r.cu)return et().add(r.key);{let s=et();const o=n.Pu.get(e);if(!o)return s;for(const l of o){const c=n.hu.get(l);s=s.unionWith(c.view.eu)}return s}}function Zk(t){const e=Ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Yk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=W7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=q7.bind(null,e),e.lu.Y_=D7.bind(null,e.eventManager),e.lu.gu=M7.bind(null,e.eventManager),e}function Q7(t){const e=Ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=G7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=K7.bind(null,e),e}class Bm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wp(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return Zj(this.persistence,new Xj,e.initialUser,this.serializer)}Su(e){return new Pk(P_.fi,this.serializer)}bu(e){return new s7}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bm.provider={build:()=>new Bm};class Z7 extends Bm{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){dt(this.persistence.referenceDelegate instanceof zm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Pj(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Zn.withCacheSize(this.cacheSizeBytes):Zn.DEFAULT;return new Pk(r=>zm.fi(r,n),this.serializer)}}class vv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>SS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=X7.bind(null,this.syncEngine),await C7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new R7}()}createDatastore(e){const n=wp(e.databaseInfo.databaseId),r=function(o){return new c7(o)}(e.databaseInfo);return function(o,l,c,f){return new m7(o,l,c,f)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,o,l,c){return new g7(r,s,o,l,c)}(this.localStore,this.datastore,e.asyncQueue,n=>SS(this.syncEngine,n,0),function(){return _S.C()?new _S:new a7}())}createSyncEngine(e,n){return function(s,o,l,c,f,h,p){const v=new j7(s,o,l,c,f,h);return p&&(v.mu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=Ue(s);Te(Oo,"RemoteStore shutting down."),o.da.add(5),await Zd(o),o.Ra.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}vv.provider={build:()=>new vv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Ts("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka="FirestoreClient";class ez{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Nn.UNAUTHENTICATED,this.clientId=GC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{Te(ka,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(Te(ka,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _a;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=H_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function fy(t,e){t.asyncQueue.verifyOperationInProgress(),Te(ka,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Ok(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function CS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await tz(t);Te(ka,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>wS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>wS(e.remoteStore,s)),t._onlineComponents=e}async function tz(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Te(ka,"Using user provided OfflineComponentProvider");try{await fy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ve.FAILED_PRECONDITION||s.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;yu("Error using user provided cache. Falling back to memory cache: "+n),await fy(t,new Bm)}}else Te(ka,"Using default OfflineComponentProvider"),await fy(t,new Z7(void 0));return t._offlineComponents}async function Jk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Te(ka,"Using user provided OnlineComponentProvider"),await CS(t,t._uninitializedComponentsProvider._online)):(Te(ka,"Using default OnlineComponentProvider"),await CS(t,new vv))),t._onlineComponents}function nz(t){return Jk(t).then(e=>e.syncEngine)}async function rz(t){const e=await Jk(t),n=e.eventManager;return n.onListen=z7.bind(null,e.syncEngine),n.onUnlisten=H7.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=U7.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=$7.bind(null,e.syncEngine),n}function iz(t,e,n={}){const r=new _a;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,c,f,h){const p=new J7({next:b=>{p.xu(),l.enqueueAndForget(()=>I7(o,v)),b.fromCache&&f.source==="server"?h.reject(new Se(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(b)},error:b=>h.reject(b)}),v=new P7(c,p,{includeMetadataChanges:!0,Qa:!0});return N7(o,v)}(await rz(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(t,e,n){if(!n)throw new Se(ve.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sz(t,e,n,r){if(e===!0&&r===!0)throw new Se(ve.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function RS(t){if(!Re.isDocumentKey(t))throw new Se(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function NS(t){if(Re.isDocumentKey(t))throw new Se(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Tp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Me(12329,{type:typeof t})}function Hi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Se(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Tp(t);throw new Se(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="firestore.googleapis.com",IS=!0;class DS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Se(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nR,this.ssl=IS}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:IS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Mk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Dj)throw new Se(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sz("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Se(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Se(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Se(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new DS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new DS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new u9;switch(r.type){case"firstParty":return new h9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Se(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=kS.get(n);r&&(Te("ComponentProvider","Removing Datastore"),kS.delete(n),r.terminate())}(this),Promise.resolve()}}function az(t,e,n,r={}){var s;t=Hi(t,Sp);const o=Uo(e),l=t._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:t._getEmulatorOptions()}),f=`${e}:${n}`;o&&(y_(`https://${f}`),v_("Firestore",!0)),l.host!==nR&&l.host!==f&&yu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},l),{host:f,ssl:o,emulatorOptions:r});if(!Do(h,c)&&(t._setSettings(h),r.mockUserToken)){let p,v;if(typeof r.mockUserToken=="string")p=r.mockUserToken,v=Nn.MOCK_USER;else{p=mV(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new Se(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Nn(b)}t._authCredentials=new c9(new FC(p,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $o(this.firestore,e,this._query)}}class rr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ba(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rr(this.firestore,e,this._key)}}class ba extends $o{constructor(e,n,r){super(e,n,uk(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rr(this.firestore,null,new Re(e))}withConverter(e){return new ba(this.firestore,e,this._path)}}function ef(t,e,...n){if(t=Nt(t),tR("collection","path",e),t instanceof Sp){const r=Et.fromString(e,...n);return NS(r),new ba(t,null,r)}{if(!(t instanceof rr||t instanceof ba))throw new Se(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Et.fromString(e,...n));return NS(r),new ba(t.firestore,null,r)}}function Fo(t,e,...n){if(t=Nt(t),arguments.length===1&&(e=GC.newId()),tR("doc","path",e),t instanceof Sp){const r=Et.fromString(e,...n);return RS(r),new rr(t,null,new Re(r))}{if(!(t instanceof rr||t instanceof ba))throw new Se(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Et.fromString(e,...n));return RS(r),new rr(t.firestore,t instanceof ba?t.converter:null,new Re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="AsyncQueue";class PS{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Lk(this,"async_queue_retry"),this.rc=()=>{const r=dy();r&&Te(MS,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=dy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=dy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new _a;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Ru(e))throw e;Te(MS,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,Ts("INTERNAL UNHANDLED ERROR: ",OS(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const s=B_.createAndSchedule(this,e,n,r,o=>this.uc(o));return this.Zu.push(s),s}oc(){this.Xu&&Me(47125,{cc:OS(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function OS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class qo extends Sp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new PS,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new PS(e),this._firestoreClient=void 0,await e}}}function oz(t,e){const n=typeof t=="object"?t:w_(),r=typeof t=="string"?t:Mm,s=dp(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=SC("firestore");o&&az(s,...o)}return s}function G_(t){if(t._terminated)throw new Se(ve.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||lz(t),t._firestoreClient}function lz(t){var e,n,r;const s=t._freezeSettings(),o=function(c,f,h,p){return new k9(c,f,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,eR(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new ez(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(c){const f=c?._online.build();return{_offline:c?._offline.build(f),_online:f}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xu(Sn.fromBase64String(e))}catch(n){throw new Se(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xu(Sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Se(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Se(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Se(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uz=/^__.*__$/;class cz{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Da(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wd(e,this.data,n,this.fieldTransforms)}}class rR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Da(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function iR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ic:t})}}class W_{constructor(e,n,r,s,o,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Ec(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new W_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Vc(e),s}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Ec(),s}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Hm(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(iR(this.Ic)&&uz.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class dz{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||wp(e)}bc(e,n,r,s=!1){return new W_({Ic:e,methodName:n,wc:r,path:Tn.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nf(t){const e=t._freezeSettings(),n=wp(t._databaseId);return new dz(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Q_(t,e,n,r,s,o={}){const l=t.bc(o.merge||o.mergeFields?2:0,e,n,s);Z_("Data must be an object, but it was:",l,r);const c=oR(r,l);let f,h;if(o.merge)f=new _r(l.fieldMask),h=l.fieldTransforms;else if(o.mergeFields){const p=[];for(const v of o.mergeFields){const b=_v(e,v,n);if(!l.contains(b))throw new Se(ve.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);uR(p,b)||p.push(b)}f=new _r(p),h=l.fieldTransforms.filter(v=>f.covers(v.field))}else f=null,h=l.fieldTransforms;return new cz(new Jn(c),f,h)}class Ap extends K_{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ap}}function sR(t,e,n,r){const s=t.bc(1,e,n);Z_("Data must be an object, but it was:",s,r);const o=[],l=Jn.empty();Ia(r,(f,h)=>{const p=J_(e,f,n);h=Nt(h);const v=s.mc(p);if(h instanceof Ap)o.push(p);else{const b=rf(h,v);b!=null&&(o.push(p),l.set(p,b))}});const c=new _r(o);return new rR(l,c,s.fieldTransforms)}function aR(t,e,n,r,s,o){const l=t.bc(1,e,n),c=[_v(e,r,n)],f=[s];if(o.length%2!=0)throw new Se(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<o.length;b+=2)c.push(_v(e,o[b])),f.push(o[b+1]);const h=[],p=Jn.empty();for(let b=c.length-1;b>=0;--b)if(!uR(h,c[b])){const R=c[b];let M=f[b];M=Nt(M);const O=l.mc(R);if(M instanceof Ap)h.push(R);else{const L=rf(M,O);L!=null&&(h.push(R),p.set(R,L))}}const v=new _r(h);return new rR(p,v,l.fieldTransforms)}function fz(t,e,n,r=!1){return rf(n,t.bc(r?4:3,e))}function rf(t,e){if(lR(t=Nt(t)))return Z_("Unsupported field value:",e,t),oR(t,e);if(t instanceof K_)return function(r,s){if(!iR(s.Ic))throw s.gc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,s){const o=[];let l=0;for(const c of r){let f=rf(c,s.fc(l));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),l++}return{arrayValue:{values:o}}}(t,e)}return function(r,s){if((r=Nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Q9(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=ft.fromDate(r);return{timestampValue:jm(s.serializer,o)}}if(r instanceof ft){const o=new ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jm(s.serializer,o)}}if(r instanceof Y_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xu)return{bytesValue:Ak(s.serializer,r._byteString)};if(r instanceof rr){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.gc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:D_(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof X_)return function(l,c){return{mapValue:{fields:{[ek]:{stringValue:tk},[Pm]:{arrayValue:{values:l.toArray().map(h=>{if(typeof h!="number")throw c.gc("VectorValues must only contain numeric values.");return R_(c.serializer,h)})}}}}}}(r,s);throw s.gc(`Unsupported field value: ${Tp(r)}`)}(t,e)}function oR(t,e){const n={};return YC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ia(t,(r,s)=>{const o=rf(s,e.Ac(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function lR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ft||t instanceof Y_||t instanceof xu||t instanceof rr||t instanceof K_||t instanceof X_)}function Z_(t,e,n){if(!lR(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Tp(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function _v(t,e,n){if((e=Nt(e))instanceof tf)return e._internalPath;if(typeof e=="string")return J_(t,e);throw Hm("Field path arguments must be of type string or ",t,!1,void 0,n)}const hz=new RegExp("[~\\*/\\[\\]]");function J_(t,e,n){if(e.search(hz)>=0)throw Hm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new tf(...e.split("."))._internalPath}catch{throw Hm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hm(t,e,n,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let f="";return(o||l)&&(f+=" (found",o&&(f+=` in field ${r}`),l&&(f+=` in document ${s}`),f+=")"),new Se(ve.INVALID_ARGUMENT,c+t+f)}function uR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new rr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Cp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class mz extends cR{data(){return super.data()}}function Cp(t,e){return typeof e=="string"?J_(t,e):e instanceof tf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pz(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Se(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eb{}class dR extends eb{}function fR(t,e,...n){let r=[];e instanceof eb&&r.push(e),r=r.concat(n),function(o){const l=o.filter(f=>f instanceof tb).length,c=o.filter(f=>f instanceof kp).length;if(l>1||l>0&&c>0)throw new Se(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class kp extends dR{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new kp(e,n,r)}_apply(e){const n=this._parse(e);return mR(e._query,n),new $o(e.firestore,e.converter,lv(e._query,n))}_parse(e){const n=nf(e.firestore);return function(o,l,c,f,h,p,v){let b;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Se(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){LS(v,p);const M=[];for(const O of v)M.push(VS(f,o,O));b={arrayValue:{values:M}}}else b=VS(f,o,v)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||LS(v,p),b=fz(c,l,v,p==="in"||p==="not-in");return Qt.create(h,p,b)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function hR(t,e,n){const r=e,s=Cp("where",t);return kp._create(s,r,n)}class tb extends eb{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new tb(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:si.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let l=s;const c=o.getFlattenedFilters();for(const f of c)mR(l,f),l=lv(l,f)}(e._query,n),new $o(e.firestore,e.converter,lv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class nb extends dR{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new nb(e,n)}_apply(e){const n=function(s,o,l){if(s.startAt!==null)throw new Se(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Se(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Nd(o,l)}(e._query,this._field,this._direction);return new $o(e.firestore,e.converter,function(s,o){const l=s.explicitOrderBy.concat([o]);return new Nu(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function gz(t,e="asc"){const n=e,r=Cp("orderBy",t);return nb._create(r,n)}function VS(t,e,n){if(typeof(n=Nt(n))=="string"){if(n==="")throw new Se(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ck(e)&&n.indexOf("/")!==-1)throw new Se(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Et.fromString(n));if(!Re.isDocumentKey(r))throw new Se(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return QT(t,new Re(r))}if(n instanceof rr)return QT(t,n._key);throw new Se(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tp(n)}.`)}function LS(t,e){if(!Array.isArray(t)||t.length===0)throw new Se(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mR(t,e){const n=function(s,o){for(const l of s)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Se(ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Se(ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class yz{convertValue(e,n="none"){switch(Aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Sa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ia(e,(s,o)=>{r[s]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,s;const o=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Pm].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(l=>$t(l.doubleValue));return new X_(o)}convertGeoPoint(e){return new Y_($t(e.latitude),$t(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=mp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Cd(e));default:return null}}convertTimestamp(e){const n=Ta(e);return new ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Et.fromString(e);dt(Dk(r),9688,{name:e});const s=new kd(r.get(1),r.get(3)),o=new Re(r.popFirst(5));return s.isEqual(n)||Ts(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vz extends cR{constructor(e,n,r,s,o,l){super(e,n,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new om(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Cp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class om extends vz{data(e={}){return super.data(e)}}class _z{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Fh(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new om(this._firestore,this._userDataWriter,r.key,r,new Fh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Se(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(c=>{const f=new om(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Fh(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const f=new om(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Fh(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return c.type!==0&&(h=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),p=l.indexOf(c.doc.key)),{type:bz(c.type),doc:f,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function bz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:t})}}class wz extends yz{constructor(e){super(),this.firestore=e}convertBytes(e){return new xu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rr(this.firestore,null,n)}}function Rp(t){t=Hi(t,$o);const e=Hi(t.firestore,qo),n=G_(e),r=new wz(e);return pz(t._query),iz(n,t._query).then(s=>new _z(e,r,t,s))}function ib(t,e,n){t=Hi(t,rr);const r=Hi(t.firestore,qo),s=rb(t.converter,e,n);return sf(r,[Q_(nf(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,qn.none())])}function Ez(t,e,n,...r){t=Hi(t,rr);const s=Hi(t.firestore,qo),o=nf(s);let l;return l=typeof(e=Nt(e))=="string"||e instanceof tf?aR(o,"updateDoc",t._key,e,n,r):sR(o,"updateDoc",t._key,e),sf(s,[l.toMutation(t._key,qn.exists(!0))])}function xz(t){return sf(Hi(t.firestore,qo),[new _p(t._key,qn.none())])}function bv(t,e){const n=Hi(t.firestore,qo),r=Fo(t),s=rb(t.converter,e);return sf(n,[Q_(nf(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,qn.exists(!1))]).then(()=>r)}function sf(t,e){return function(r,s){const o=new _a;return r.asyncQueue.enqueueAndForget(async()=>F7(await nz(r),s,o)),o.promise}(G_(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=nf(e)}set(e,n,r){this._verifyNotCommitted();const s=hy(e,this._firestore),o=rb(s.converter,n,r),l=Q_(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,r);return this._mutations.push(l.toMutation(s._key,qn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const o=hy(e,this._firestore);let l;return l=typeof(n=Nt(n))=="string"||n instanceof tf?aR(this._dataReader,"WriteBatch.update",o._key,n,r,s):sR(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(l.toMutation(o._key,qn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=hy(e,this._firestore);return this._mutations=this._mutations.concat(new _p(n._key,qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hy(t,e){if((t=Nt(t)).firestore!==e)throw new Se(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(t){return G_(t=Hi(t,qo)),new Tz(t,e=>sf(t,e))}(function(e,n=!0){(function(s){Cu=s})(Au),Mo(new Ea("firestore",(r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new qo(new d9(r.getProvider("auth-internal")),new m9(l,r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Se(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kd(h.options.projectId,p)}(l,s),l);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Mi(zT,UT,e),Mi(zT,UT,"esm2017")})();function sb(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function gR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Sz=gR,yR=new Yd("auth","Firebase",gR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m=new __("@firebase/auth");function Az(t,...e){$m.logLevel<=Je.WARN&&$m.warn(`Auth (${Au}): ${t}`,...e)}function lm(t,...e){$m.logLevel<=Je.ERROR&&$m.error(`Auth (${Au}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(t,...e){throw ab(t,...e)}function Vi(t,...e){return ab(t,...e)}function vR(t,e,n){const r=Object.assign(Object.assign({},Sz()),{[e]:n});return new Yd("auth","Firebase",r).create(e,{appName:t.name})}function bs(t){return vR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ab(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return yR.create(t,...e)}function De(t,e,...n){if(!t)throw ab(e,...n)}function vs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw lm(e),new Error(e)}function As(t,e){t||vs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Cz(){return jS()==="http:"||jS()==="https:"}function jS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Cz()||bV()||"connection"in navigator)?navigator.onLine:!0}function Rz(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,n){this.shortDelay=e,this.longDelay=n,As(n>e,"Short delay should be less than long delay!"),this.isMobile=yV()||wV()}get(){return kz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(t,e){As(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Dz=new af(3e4,6e4);function Ma(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Pa(t,e,n,r,s={}){return bR(t,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=Xd(Object.assign({key:t.config.apiKey},l)).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:f},o);return _V()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Uo(t.emulatorConfig.host)&&(h.credentials="include"),_R.fetch()(await wR(t,t.config.apiHost,n,c),h)})}async function bR(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Nz),e);try{const s=new Pz(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw qh(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[f,h]=c.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw qh(t,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw qh(t,"email-already-in-use",l);if(f==="USER_DISABLED")throw qh(t,"user-disabled",l);const p=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw vR(t,p,h);ai(t,p)}}catch(s){if(s instanceof Fi)throw s;ai(t,"network-request-failed",{message:String(s)})}}async function of(t,e,n,r,s={}){const o=await Pa(t,e,n,r,s);return"mfaPendingCredential"in o&&ai(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function wR(t,e,n,r){const s=`${e}${n}?${r}`,o=t,l=o.config.emulator?ob(t.config,s):`${t.config.apiScheme}://${s}`;return Iz.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function Mz(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Pz{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Vi(this.auth,"network-request-failed")),Dz.get())})}}function qh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Vi(t,e,r);return s.customData._tokenResponse=n,s}function zS(t){return t!==void 0&&t.enterprise!==void 0}class Oz{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Mz(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Vz(t,e){return Pa(t,"GET","/v2/recaptchaConfig",Ma(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lz(t,e){return Pa(t,"POST","/v1/accounts:delete",e)}async function Fm(t,e){return Pa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jz(t,e=!1){const n=Nt(t),r=await n.getIdToken(e),s=lb(r);De(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o?.sign_in_provider;return{claims:s,token:r,authTime:ld(my(s.auth_time)),issuedAtTime:ld(my(s.iat)),expirationTime:ld(my(s.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function my(t){return Number(t)*1e3}function lb(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return lm("JWT malformed, contained fewer than 3 sections"),null;try{const s=xC(n);return s?JSON.parse(s):(lm("Failed to decode base64 JWT payload"),null)}catch(s){return lm("Caught error parsing JWT payload as JSON",s?.toString()),null}}function US(t){const e=lb(t);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Md(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Fi&&zz(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function zz({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ld(this.lastLoginAt),this.creationTime=ld(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qm(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Md(t,Fm(n,{idToken:r}));De(s?.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?ER(o.providerUserInfo):[],c=Hz(t.providerData,l),f=t.isAnonymous,h=!(t.email&&o.passwordHash)&&!c?.length,p=f?h:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Ev(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(t,v)}async function Bz(t){const e=Nt(t);await qm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Hz(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function ER(t){return t.map(e=>{var{providerId:n}=e,r=sb(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $z(t,e){const n=await bR(t,{},async()=>{const r=Xd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=await wR(t,s,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:c,body:r};return t.emulatorConfig&&Uo(t.emulatorConfig.host)&&(f.credentials="include"),_R.fetch()(l,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Fz(t,e){return Pa(t,"POST","/v2/accounts:revokeToken",Ma(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):US(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){De(e.length!==0,"internal-error");const n=US(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await $z(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,l=new uu;return r&&(De(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(De(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(De(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uu,this.toJSON())}_performRefresh(){return vs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t,e){De(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ri{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,o=sb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Uz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ev(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Md(this,this.stsTokenManager.getToken(this.auth,e));return De(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return jz(this,e)}reload(){return Bz(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ri(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await qm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vr(this.auth.app))return Promise.reject(bs(this.auth));const e=await this.getIdToken();return await Md(this,Lz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,o,l,c,f,h,p;const v=(r=n.displayName)!==null&&r!==void 0?r:void 0,b=(s=n.email)!==null&&s!==void 0?s:void 0,R=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,M=(l=n.photoURL)!==null&&l!==void 0?l:void 0,O=(c=n.tenantId)!==null&&c!==void 0?c:void 0,L=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,j=(h=n.createdAt)!==null&&h!==void 0?h:void 0,$=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:Y,emailVerified:y,isAnonymous:E,providerData:w,stsTokenManager:x}=n;De(Y&&x,e,"internal-error");const S=uu.fromJSON(this.name,x);De(typeof Y=="string",e,"internal-error"),na(v,e.name),na(b,e.name),De(typeof y=="boolean",e,"internal-error"),De(typeof E=="boolean",e,"internal-error"),na(R,e.name),na(M,e.name),na(O,e.name),na(L,e.name),na(j,e.name),na($,e.name);const N=new ri({uid:Y,auth:e,email:b,emailVerified:y,displayName:v,isAnonymous:E,photoURL:M,phoneNumber:R,tenantId:O,stsTokenManager:S,createdAt:j,lastLoginAt:$});return w&&Array.isArray(w)&&(N.providerData=w.map(C=>Object.assign({},C))),L&&(N._redirectEventId=L),N}static async _fromIdTokenResponse(e,n,r=!1){const s=new uu;s.updateFromServerResponse(n);const o=new ri({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await qm(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];De(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?ER(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!o?.length,c=new uu;c.updateFromIdToken(r);const f=new ri({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:l}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Ev(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(f,h),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=new Map;function _s(t){As(t instanceof Function,"Expected a class definition");let e=BS.get(t);return e?(As(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,BS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}xR.type="NONE";const HS=xR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(t,e,n){return`firebase:${t}:${e}:${n}`}class cu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=um(this.userKey,s.apiKey,o),this.fullPersistenceKey=um("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Fm(this.auth,{idToken:e}).catch(()=>{});return n?ri._fromGetAccountInfoResponse(this.auth,n,e):null}return ri._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new cu(_s(HS),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let o=s[0]||_s(HS);const l=um(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const p=await h._get(l);if(p){let v;if(typeof p=="string"){const b=await Fm(e,{idToken:p}).catch(()=>{});if(!b)break;v=await ri._fromGetAccountInfoResponse(e,b,p)}else v=ri._fromJSON(e,p);h!==o&&(c=v),o=h;break}}catch{}const f=s.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new cu(o,e,r):(o=f[0],c&&await o._set(l,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==o)try{await h._remove(l)}catch{}})),new cu(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RR(e))return"Blackberry";if(NR(e))return"Webos";if(SR(e))return"Safari";if((e.includes("chrome/")||AR(e))&&!e.includes("edge/"))return"Chrome";if(kR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function TR(t=Pn()){return/firefox\//i.test(t)}function SR(t=Pn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AR(t=Pn()){return/crios\//i.test(t)}function CR(t=Pn()){return/iemobile/i.test(t)}function kR(t=Pn()){return/android/i.test(t)}function RR(t=Pn()){return/blackberry/i.test(t)}function NR(t=Pn()){return/webos/i.test(t)}function ub(t=Pn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function qz(t=Pn()){var e;return ub(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Gz(){return EV()&&document.documentMode===10}function IR(t=Pn()){return ub(t)||kR(t)||NR(t)||RR(t)||/windows phone/i.test(t)||CR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(t,e=[]){let n;switch(t){case"Browser":n=$S(Pn());break;case"Worker":n=`${$S(Pn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Au}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((l,c)=>{try{const f=e(o);l(f)}catch(f){c(f)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yz(t,e={}){return Pa(t,"GET","/v2/passwordPolicy",Ma(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xz=6;class Wz{constructor(e){var n,r,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:Xz,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,o,l,c;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(n=f.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(o=f.containsUppercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(l=f.containsNumericCharacter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(c=f.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),f}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qz{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new FS(this),this.idTokenSubscription=new FS(this),this.beforeStateQueue=new Kz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_s(n)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await cu.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Fm(this,{idToken:e}),r=await ri._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(vr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===c)&&f?.user&&(s=f.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await qm(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Rz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vr(this.app))return Promise.reject(bs(this));const n=e?Nt(e):null;return n&&De(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vr(this.app)?Promise.reject(bs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vr(this.app)?Promise.reject(bs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_s(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Yz(this),n=new Wz(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Fz(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_s(e)||this._popupRedirectResolver;De(n,this,"argument-error"),this.redirectPersistenceManager=await cu.create(this,[_s(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,r,s);return()=>{l=!0,f()}}else{const f=e.addObserver(n);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(vr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&Az(`Error while retrieving App Check token: ${n.error}`),n?.token}}function Go(t){return Nt(t)}class FS{constructor(e){this.auth=e,this.observer=null,this.addObserver=NV(n=>this.observer=n)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Np={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Zz(t){Np=t}function MR(t){return Np.loadJS(t)}function Jz(){return Np.recaptchaEnterpriseScript}function eU(){return Np.gapiScript}function tU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class nU{constructor(){this.enterprise=new rU}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class rU{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const iU="recaptcha-enterprise",PR="NO_RECAPTCHA";class sU{constructor(e){this.type=iU,this.auth=Go(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{Vz(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new Oz(f);return o.tenantId==null?o._agentRecaptchaConfig=h:o._tenantRecaptchaConfigs[o.tenantId]=h,l(h.siteKey)}}).catch(f=>{c(f)})})}function s(o,l,c){const f=window.grecaptcha;zS(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:e}).then(h=>{l(h)}).catch(()=>{l(PR)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new nU().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(c=>{if(!n&&zS(window.grecaptcha))s(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let f=Jz();f.length!==0&&(f+=c),MR(f).then(()=>{s(c,o,l)}).catch(h=>{l(h)})}}).catch(c=>{l(c)})})}}async function qS(t,e,n,r=!1,s=!1){const o=new sU(t);let l;if(s)l=PR;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const f=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const f=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function xv(t,e,n,r,s){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await qS(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await qS(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aU(t,e){const n=dp(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Do(o,e??{}))return s;ai(s,"already-initialized")}return n.initialize({options:e})}function oU(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(_s);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function lU(t,e,n){const r=Go(t);De(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=OR(e),{host:l,port:c}=uU(e),f=c===null?"":`:${c}`,h={url:`${o}//${l}${f}/`},p=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){De(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),De(Do(h,r.config.emulator)&&Do(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,Uo(l)?(y_(`${o}//${l}${f}`),v_("Auth",!0)):cU()}function OR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function uU(t){const e=OR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:GS(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:GS(l)}}}function GS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function cU(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vs("not implemented")}_getIdTokenResponse(e){return vs("not implemented")}_linkToIdToken(e,n){return vs("not implemented")}_getReauthenticationResolver(e){return vs("not implemented")}}async function dU(t,e){return Pa(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fU(t,e){return of(t,"POST","/v1/accounts:signInWithPassword",Ma(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hU(t,e){return of(t,"POST","/v1/accounts:signInWithEmailLink",Ma(t,e))}async function mU(t,e){return of(t,"POST","/v1/accounts:signInWithEmailLink",Ma(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd extends cb{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Pd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Pd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xv(e,n,"signInWithPassword",fU);case"emailLink":return hU(e,{email:this._email,oobCode:this._password});default:ai(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xv(e,r,"signUpPassword",dU);case"emailLink":return mU(e,{idToken:n,email:this._email,oobCode:this._password});default:ai(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(t,e){return of(t,"POST","/v1/accounts:signInWithIdp",Ma(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU="http://localhost";class Vo extends cb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Vo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ai("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,o=sb(n,["providerId","signInMethod"]);if(!r||!s)return null;const l=new Vo(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return du(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,du(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,du(e,n)}buildRequest(){const e={requestUri:pU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function yU(t){const e=Qc(Zc(t)).link,n=e?Qc(Zc(e)).deep_link_id:null,r=Qc(Zc(t)).deep_link_id;return(r?Qc(Zc(r)).link:null)||r||n||e||t}class db{constructor(e){var n,r,s,o,l,c;const f=Qc(Zc(e)),h=(n=f.apiKey)!==null&&n!==void 0?n:null,p=(r=f.oobCode)!==null&&r!==void 0?r:null,v=gU((s=f.mode)!==null&&s!==void 0?s:null);De(h&&p&&v,"argument-error"),this.apiKey=h,this.operation=v,this.code=p,this.continueUrl=(o=f.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=f.lang)!==null&&l!==void 0?l:null,this.tenantId=(c=f.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=yU(e);try{return new db(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(){this.providerId=Du.PROVIDER_ID}static credential(e,n){return Pd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=db.parseLink(n);return De(r,"argument-error"),Pd._fromEmailAndCode(e,r.code,r.tenantId)}}Du.PROVIDER_ID="password";Du.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Du.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf extends VR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua extends lf{constructor(){super("facebook.com")}static credential(e){return Vo._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ua.credential(e.oauthAccessToken)}catch{return null}}}ua.FACEBOOK_SIGN_IN_METHOD="facebook.com";ua.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends lf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Vo._fromParams({providerId:ca.PROVIDER_ID,signInMethod:ca.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ca.credentialFromTaggedObject(e)}static credentialFromError(e){return ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ca.credential(n,r)}catch{return null}}}ca.GOOGLE_SIGN_IN_METHOD="google.com";ca.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da extends lf{constructor(){super("github.com")}static credential(e){return Vo._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return da.credential(e.oauthAccessToken)}catch{return null}}}da.GITHUB_SIGN_IN_METHOD="github.com";da.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends lf{constructor(){super("twitter.com")}static credential(e,n){return Vo._fromParams({providerId:fa.PROVIDER_ID,signInMethod:fa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return fa.credentialFromTaggedObject(e)}static credentialFromError(e){return fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return fa.credential(n,r)}catch{return null}}}fa.TWITTER_SIGN_IN_METHOD="twitter.com";fa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vU(t,e){return of(t,"POST","/v1/accounts:signUp",Ma(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await ri._fromIdTokenResponse(e,r,s),l=KS(r);return new Lo({user:o,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=KS(r);return new Lo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function KS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm extends Fi{constructor(e,n,r,s){var o;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Gm.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Gm(e,n,r,s)}}function LR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Gm._fromErrorAndOperation(t,o,e,r):o})}async function _U(t,e,n=!1){const r=await Md(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Lo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bU(t,e,n=!1){const{auth:r}=t;if(vr(r.app))return Promise.reject(bs(r));const s="reauthenticate";try{const o=await Md(t,LR(r,s,e,t),n);De(o.idToken,r,"internal-error");const l=lb(o.idToken);De(l,r,"internal-error");const{sub:c}=l;return De(t.uid===c,r,"user-mismatch"),Lo._forOperation(t,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&ai(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(t,e,n=!1){if(vr(t.app))return Promise.reject(bs(t));const r="signIn",s=await LR(t,r,e),o=await Lo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function wU(t,e){return jR(Go(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zR(t){const e=Go(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function EU(t,e,n){if(vr(t.app))return Promise.reject(bs(t));const r=Go(t),l=await xv(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vU).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&zR(t),f}),c=await Lo._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(c.user),c}function xU(t,e,n){return vr(t.app)?Promise.reject(bs(t)):wU(Nt(t),Du.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&zR(t),r})}function TU(t,e,n,r){return Nt(t).onIdTokenChanged(e,n,r)}function SU(t,e,n){return Nt(t).beforeAuthStateChanged(e,n)}function AU(t,e,n,r){return Nt(t).onAuthStateChanged(e,n,r)}function CU(t){return Nt(t).signOut()}const Km="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Km,"1"),this.storage.removeItem(Km),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU=1e3,RU=10;class BR extends UR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,f)=>{this.notifyListeners(l,f)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);Gz()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,RU):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},kU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}BR.type="LOCAL";const NU=BR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR extends UR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}HR.type="SESSION";const $R=HR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ip(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!l?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(l).map(async h=>h(n.origin,o)),f=await IU(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ip.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((c,f)=>{const h=fb("",20);s.port1.start();const p=setTimeout(()=>{f(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(v){const b=v;if(b.data.eventId===h)switch(b.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(b.data.response);break;default:clearTimeout(p),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(){return window}function MU(t){Li().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(){return typeof Li().WorkerGlobalScope<"u"&&typeof Li().importScripts=="function"}async function PU(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OU(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function VU(){return FR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR="firebaseLocalStorageDb",LU=1,Ym="firebaseLocalStorage",GR="fbase_key";class uf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Dp(t,e){return t.transaction([Ym],e?"readwrite":"readonly").objectStore(Ym)}function jU(){const t=indexedDB.deleteDatabase(qR);return new uf(t).toPromise()}function Tv(){const t=indexedDB.open(qR,LU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ym,{keyPath:GR})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ym)?e(r):(r.close(),await jU(),e(await Tv()))})})}async function YS(t,e,n){const r=Dp(t,!0).put({[GR]:e,value:n});return new uf(r).toPromise()}async function zU(t,e){const n=Dp(t,!1).get(e),r=await new uf(n).toPromise();return r===void 0?null:r.value}function XS(t,e){const n=Dp(t,!0).delete(e);return new uf(n).toPromise()}const UU=800,BU=3;class KR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Tv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>BU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ip._getInstance(VU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await PU(),!this.activeServiceWorker)return;this.sender=new DU(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Tv();return await YS(e,Km,"1"),await XS(e,Km),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>YS(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>zU(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>XS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Dp(s,!1).getAll();return new uf(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KR.type="LOCAL";const HU=KR;new af(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $U(t,e){return e?_s(e):(De(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb extends cb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return du(e,this._buildIdpRequest())}_linkToIdToken(e,n){return du(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return du(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function FU(t){return jR(t.auth,new hb(t),t.bypassAuthState)}function qU(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),bU(n,new hb(t),t.bypassAuthState)}async function GU(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),_U(n,new hb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FU;case"linkViaPopup":case"linkViaRedirect":return GU;case"reauthViaPopup":case"reauthViaRedirect":return qU;default:ai(this.auth,"internal-error")}}resolve(e){As(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){As(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU=new af(2e3,1e4);class Ql extends YR{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Ql.currentPopupAction&&Ql.currentPopupAction.cancel(),Ql.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){As(this.filter.length===1,"Popup operations only handle one event");const e=fb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Vi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ql.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KU.get())};e()}}Ql.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YU="pendingRedirect",cm=new Map;class XU extends YR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=cm.get(this.auth._key());if(!e){try{const r=await WU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}cm.set(this.auth._key(),e)}return this.bypassAuthState||cm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function WU(t,e){const n=JU(e),r=ZU(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function QU(t,e){cm.set(t._key(),e)}function ZU(t){return _s(t._redirectPersistence)}function JU(t){return um(YU,t.config.apiKey,t.name)}async function eB(t,e,n=!1){if(vr(t.app))return Promise.reject(bs(t));const r=Go(t),s=$U(r,e),l=await new XU(r,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB=10*60*1e3;class nB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!XR(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Vi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tB&&this.cachedEventUids.clear(),this.cachedEventUids.has(WS(e))}saveEventToCache(e){this.cachedEventUids.add(WS(e)),this.lastProcessedEventTime=Date.now()}}function WS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function XR({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function rB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iB(t,e={}){return Pa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aB=/^https?/;async function oB(t){if(t.config.emulator)return;const{authorizedDomains:e}=await iB(t);for(const n of e)try{if(lB(n))return}catch{}ai(t,"unauthorized-domain")}function lB(t){const e=wv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!aB.test(n))return!1;if(sB.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB=new af(3e4,6e4);function QS(){const t=Li().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function cB(t){return new Promise((e,n)=>{var r,s,o;function l(){QS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{QS(),n(Vi(t,"network-request-failed"))},timeout:uB.get()})}if(!((s=(r=Li().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Li().gapi)===null||o===void 0)&&o.load)l();else{const c=tU("iframefcb");return Li()[c]=()=>{gapi.load?l():n(Vi(t,"network-request-failed"))},MR(`${eU()}?onload=${c}`).catch(f=>n(f))}}).catch(e=>{throw dm=null,e})}let dm=null;function dB(t){return dm=dm||cB(t),dm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fB=new af(5e3,15e3),hB="__/auth/iframe",mB="emulator/auth/iframe",pB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yB(t){const e=t.config;De(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ob(e,mB):`https://${t.config.authDomain}/${hB}`,r={apiKey:e.apiKey,appName:t.name,v:Au},s=gB.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Xd(r).slice(1)}`}async function vB(t){const e=await dB(t),n=Li().gapi;return De(n,t,"internal-error"),e.open({where:document.body,url:yB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pB,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=Vi(t,"network-request-failed"),c=Li().setTimeout(()=>{o(l)},fB.get());function f(){Li().clearTimeout(c),s(r)}r.ping(f).then(f,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bB=500,wB=600,EB="_blank",xB="http://localhost";class ZS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function TB(t,e,n,r=bB,s=wB){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const f=Object.assign(Object.assign({},_B),{width:r.toString(),height:s.toString(),top:o,left:l}),h=Pn().toLowerCase();n&&(c=AR(h)?EB:n),TR(h)&&(e=e||xB,f.scrollbars="yes");const p=Object.entries(f).reduce((b,[R,M])=>`${b}${R}=${M},`,"");if(qz(h)&&c!=="_self")return SB(e||"",c),new ZS(null);const v=window.open(e||"",c,p);De(v,t,"popup-blocked");try{v.focus()}catch{}return new ZS(v)}function SB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AB="__/auth/handler",CB="emulator/auth/handler",kB=encodeURIComponent("fac");async function JS(t,e,n,r,s,o){De(t.config.authDomain,t,"auth-domain-config-required"),De(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Au,eventId:s};if(e instanceof VR){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",RV(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,v]of Object.entries({}))l[p]=v}if(e instanceof lf){const p=e.getScopes().filter(v=>v!=="");p.length>0&&(l.scopes=p.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const f=await t._getAppCheckToken(),h=f?`#${kB}=${encodeURIComponent(f)}`:"";return`${RB(t)}?${Xd(c).slice(1)}${h}`}function RB({config:t}){return t.emulator?ob(t,CB):`https://${t.authDomain}/${AB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="webStorageSupport";class NB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$R,this._completeRedirectFn=eB,this._overrideRedirectResult=QU}async _openPopup(e,n,r,s){var o;As((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await JS(e,n,r,wv(),s);return TB(e,l,fb())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await JS(e,n,r,wv(),s);return MU(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(As(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await vB(e),r=new nB(e);return n.register("authEvent",s=>(De(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(py,{type:py},s=>{var o;const l=(o=s?.[0])===null||o===void 0?void 0:o[py];l!==void 0&&n(!!l),ai(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return IR()||SR()||ub()}}const IB=NB;var e2="@firebase/auth",t2="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PB(t){Mo(new Ea("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;De(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DR(t)},h=new Qz(r,s,o,f);return oU(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Mo(new Ea("auth-internal",e=>{const n=Go(e.getProvider("auth").getImmediate());return(r=>new DB(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mi(e2,t2,MB(t)),Mi(e2,t2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OB=5*60,VB=CC("authIdTokenMaxAge")||OB;let n2=null;const LB=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>VB)return;const s=n?.token;n2!==s&&(n2=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function jB(t=w_()){const e=dp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=aU(t,{popupRedirectResolver:IB,persistence:[HU,NU,$R]}),r=CC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=LB(o.toString());SU(n,l,()=>l(n.currentUser)),TU(n,c=>l(c))}}const s=TC("auth");return s&&lU(n,`http://${s}`),n}function zB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Zz({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=Vi("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",zB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PB("Browser");const UB={apiKey:"AIzaSyAO9TXM7A0SNeiEXzYo27fW0wdTXqXDEyc",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},mb=NC(UB),wr=oz(mb),pb=jB(mb),gb=a9(mb,"us-central1");try{OC(gb,"localhost",5001),console.log("Connected to Firebase Functions emulator")}catch(t){console.warn("Failed to connect to Firebase Functions emulator:",t)}class Hl extends Error{constructor(e,n){super(`${e} at position ${n}`),this.position=n}}const WR=32,BB=10,QR=9,ZR=13,HB=160,$B=8192,FB=8202,qB=8239,GB=8287,KB=12288;function YB(t){return/^[0-9A-Fa-f]$/.test(t)}function mo(t){return t>="0"&&t<="9"}function XB(t){return t>=" "}function Gh(t){return`,:[]/{}()
+`.includes(t)}function r2(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||t==="_"||t==="$"}function i2(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||t==="_"||t==="$"||t>="0"&&t<="9"}const s2=/^(http|https|ftp|mailto|file|data|irc):\/\/$/,a2=/^[A-Za-z0-9-._~:/?#@!$&'()*+;=]$/;function o2(t){return`,[]/{}
+`.includes(t)}function l2(t){return fm(t)||WB.test(t)}const WB=/^[[{\w-]$/;function QB(t){return t===`
`||t==="\r"||t==="	"||t==="\b"||t==="\f"}function _o(t,e){const n=t.charCodeAt(e);return n===WR||n===BB||n===QR||n===ZR}function ZB(t,e){const n=t.charCodeAt(e);return n===WR||n===QR||n===ZR}function JB(t,e){const n=t.charCodeAt(e);return n===HB||n>=$B&&n<=FB||n===qB||n===GB||n===KB}function fm(t){return JR(t)||Sv(t)}function JR(t){return t==='"'||t==="“"||t==="”"}function u2(t){return t==='"'}function Sv(t){return t==="'"||t==="‘"||t==="’"||t==="`"||t==="´"}function c2(t){return t==="'"}function Hc(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=t.lastIndexOf(e);return r!==-1?t.substring(0,r)+(n?"":t.substring(r+1)):t}function Jr(t,e){let n=t.length;if(!_o(t,n-1))return t+e;for(;_o(t,n-1);)n--;return t.substring(0,n)+e+t.substring(n)}function eH(t,e,n){return t.substring(0,e)+t.substring(e+n)}function tH(t){return/[,\n][ \t\r]*$/.test(t)}const nH={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},rH={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function yb(t){let e=0,n="";h(["```","[```","{```"]),o()||U(),h(["```","```]","```}"]);const s=v(",");for(s&&l(),l2(t[e])&&tH(n)?(s||(n=Jr(n,",")),j()):s&&(n=Hc(n,","));t[e]==="}"||t[e]==="]";)e++,l();if(e>=t.length)return n;V();function o(){l();const G=O()||L()||$()||y()||E()||x(!1)||S();return l(),G}function l(){let G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const X=e;let z=c(G);do z=f(),z&&(z=c(G));while(z);return e>X}function c(G){const X=G?_o:ZB;let z="";for(;;)if(X(t,e))z+=t[e],e++;else if(JB(t,e))z+=" ",e++;else break;return z.length>0?(n+=z,!0):!1}function f(){if(t[e]==="/"&&t[e+1]==="*"){for(;e<t.length&&!iH(t,e);)e++;return e+=2,!0}if(t[e]==="/"&&t[e+1]==="/"){for(;e<t.length&&t[e]!==`
`;)e++;return!0}return!1}function h(G){if(p(G)){if(r2(t[e]))for(;e<t.length&&i2(t[e]);)e++;return l(),!0}return!1}function p(G){for(const X of G){const z=e+X.length;if(t.slice(e,z)===X)return e=z,!0}return!1}function v(G){return t[e]===G?(n+=t[e],e++,!0):!1}function b(G){return t[e]===G?(e++,!0):!1}function R(){return b("\\")}function M(){return l(),t[e]==="."&&t[e+1]==="."&&t[e+2]==="."?(e+=3,l(),b(","),!0):!1}function O(){if(t[e]==="{"){n+="{",e++,l(),b(",")&&l();let G=!0;for(;e<t.length&&t[e]!=="}";){let X;if(G?(X=!0,G=!1):(X=v(","),X||(n=Jr(n,",")),l()),M(),!($()||x(!0))){t[e]==="}"||t[e]==="{"||t[e]==="]"||t[e]==="["||t[e]===void 0?n=Hc(n,","):Q();break}l();const W=v(":"),ne=e>=t.length;W||(l2(t[e])||ne?n=Jr(n,":"):k()),o()||(W||ne?n+="null":k())}return t[e]==="}"?(n+="}",e++):n=Jr(n,"}"),!0}return!1}function L(){if(t[e]==="["){n+="[",e++,l(),b(",")&&l();let G=!0;for(;e<t.length&&t[e]!=="]";)if(G?G=!1:v(",")||(n=Jr(n,",")),M(),!o()){n=Hc(n,",");break}return t[e]==="]"?(n+="]",e++):n=Jr(n,"]"),!0}return!1}function j(){let G=!0,X=!0;for(;X;)G?G=!1:v(",")||(n=Jr(n,",")),X=o();X||(n=Hc(n,",")),n=`[
${n}
]`}function $(){let G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,z=t[e]==="\\";if(z&&(e++,z=!0),fm(t[e])){const W=u2(t[e])?u2:c2(t[e])?c2:Sv(t[e])?Sv:JR,ne=e,J=n.length;let ee='"';for(e++;;){if(e>=t.length){const ae=N(e-1);return!G&&Gh(t.charAt(ae))?(e=ne,n=n.substring(0,J),$(!0)):(ee=Jr(ee,'"'),n+=ee,!0)}if(e===X)return ee=Jr(ee,'"'),n+=ee,!0;if(W(t[e])){const ae=e,le=ee.length;if(ee+='"',e++,n+=ee,l(!1),G||e>=t.length||Gh(t[e])||fm(t[e])||mo(t[e]))return Y(),!0;const fe=N(ae-1),he=t.charAt(fe);if(he===",")return e=ne,n=n.substring(0,J),$(!1,fe);if(Gh(he))return e=ne,n=n.substring(0,J),$(!0);n=n.substring(0,J),e=ae+1,ee=`${ee.substring(0,le)}\\${ee.substring(le)}`}else if(G&&o2(t[e])){if(t[e-1]===":"&&s2.test(t.substring(ne+1,e+2)))for(;e<t.length&&a2.test(t[e]);)ee+=t[e],e++;return ee=Jr(ee,'"'),n+=ee,Y(),!0}else if(t[e]==="\\"){const ae=t.charAt(e+1);if(rH[ae]!==void 0)ee+=t.slice(e,e+2),e+=2;else if(ae==="u"){let fe=2;for(;fe<6&&YB(t[e+fe]);)fe++;fe===6?(ee+=t.slice(e,e+6),e+=6):e+fe>=t.length?e=t.length:F()}else ee+=ae,e+=2}else{const ae=t.charAt(e);ae==='"'&&t[e-1]!=="\\"?(ee+=`\\${ae}`,e++):QB(ae)?(ee+=nH[ae],e++):(XB(ae)||H(ae),ee+=ae,e++)}z&&R()}}return!1}function Y(){let G=!1;for(l();t[e]==="+";){G=!0,e++,l(),n=Hc(n,'"',!0);const X=n.length;$()?n=eH(n,X,1):n=Jr(n,'"')}return G}function y(){const G=e;if(t[e]==="-"){if(e++,C())return D(G),!0;if(!mo(t[e]))return e=G,!1}for(;mo(t[e]);)e++;if(t[e]==="."){if(e++,C())return D(G),!0;if(!mo(t[e]))return e=G,!1;for(;mo(t[e]);)e++}if(t[e]==="e"||t[e]==="E"){if(e++,(t[e]==="-"||t[e]==="+")&&e++,C())return D(G),!0;if(!mo(t[e]))return e=G,!1;for(;mo(t[e]);)e++}if(!C())return e=G,!1;if(e>G){const X=t.slice(G,e),z=/^0\d/.test(X);return n+=z?`"${X}"`:X,!0}return!1}function E(){return w("true","true")||w("false","false")||w("null","null")||w("True","true")||w("False","false")||w("None","null")}function w(G,X){return t.slice(e,e+G.length)===G?(n+=X,e+=G.length,!0):!1}function x(G){const X=e;if(r2(t[e])){for(;e<t.length&&i2(t[e]);)e++;let z=e;for(;_o(t,z);)z++;if(t[z]==="(")return e=z+1,o(),t[e]===")"&&(e++,t[e]===";"&&e++),!0}for(;e<t.length&&!o2(t[e])&&!fm(t[e])&&(!G||t[e]!==":");)e++;if(t[e-1]===":"&&s2.test(t.substring(X,e+2)))for(;e<t.length&&a2.test(t[e]);)e++;if(e>X){for(;_o(t,e-1)&&e>0;)e--;const z=t.slice(X,e);return n+=z==="undefined"?"null":JSON.stringify(z),t[e]==='"'&&e++,!0}}function S(){if(t[e]==="/"){const G=e;for(e++;e<t.length&&(t[e]!=="/"||t[e-1]==="\\");)e++;return e++,n+=`"${t.substring(G,e)}"`,!0}}function N(G){let X=G;for(;X>0&&_o(t,X);)X--;return X}function C(){return e>=t.length||Gh(t[e])||_o(t,e)}function D(G){n+=`${t.slice(G,e)}0`}function H(G){throw new Hl(`Invalid character ${JSON.stringify(G)}`,e)}function V(){throw new Hl(`Unexpected character ${JSON.stringify(t[e])}`,e)}function U(){throw new Hl("Unexpected end of json string",t.length)}function Q(){throw new Hl("Object key expected",e)}function k(){throw new Hl("Colon expected",e)}function F(){const G=t.slice(e,e+6);throw new Hl(`Invalid unicode character "${G}"`,e)}}function iH(t,e){return t[e]==="*"&&t[e+1]==="/"}const sH={3:[`flowchart TD
    A[Problem Identification] -->|Analysis| B(Data Collection)
    B --> C{Decision Point}
    C -->|Option 1| D[Solution A]
    C -->|Option 2| E[Solution B]
    C -->|Complex Case| F[fa:fa-cogs Advanced Process]`,`flowchart LR
    Start([Beginning]) --> Process1[Step One]
    Process1 --> Process2[Step Two]
    Process2 --> Decision{Is Complete?}
    Decision -->|Yes| End([Finish])
    Decision -->|No| Process1`,`flowchart TB
    Input[User Input] --> Validate{Valid?}
    Validate -->|No| Error[Display Error]
    Validate -->|Yes| Process[Process Data]
    Process --> Store[(Database)]
    Store --> Output[Show Result]
    Error --> Input`],4:[`mindmap
  root((Learning Strategy))
    Visual Learning
      Diagrams
      Charts
      Infographics
    Auditory Learning
      Lectures
      Discussions
      Music
    Kinesthetic Learning
      Hands-on Activities
      Movement
      Practice`,`mindmap
  root((Project Management))
    Planning
      Requirements
      Timeline
      Resources
    Execution
      Team Coordination
      Task Management
      Quality Control
    Review
      Testing
      Feedback
      Optimization`,`mindmap
  root((Innovation Process))
    Research
      Market Analysis
      User Needs
      Technology Trends
    Ideation
      Brainstorming
      Prototyping
      Testing
    Implementation
      Development
      Launch
      Iteration`],5:[`pie
    title Learning Preferences
    "Visual Learners" : 65
    "Auditory Learners" : 20
    "Kinesthetic Learners" : 15`,`pie
    title Project Time Distribution
    "Development" : 50
    "Testing" : 25
    "Planning" : 15
    "Documentation" : 10`,`pie
    title Market Share Analysis
    "Leader" : 40
    "Challenger" : 30
    "Follower" : 20
    "Niche Player" : 10`],6:[`quadrantChart
    title Priority Matrix
    x-axis Low Effort --> High Effort
    y-axis Low Impact --> High Impact
    quadrant-1 Quick Wins
    quadrant-2 Major Projects
    quadrant-3 Fill-ins
    quadrant-4 Thankless Tasks
    "Task A": [0.2, 0.8]
    "Task B": [0.7, 0.9]
    "Task C": [0.3, 0.3]`,`quadrantChart
    title Skills Assessment
    x-axis Beginner --> Expert
    y-axis Low Demand --> High Demand
    quadrant-1 Develop
    quadrant-2 Leverage
    quadrant-3 Maintain
    quadrant-4 Focus
    "JavaScript": [0.8, 0.9]
    "Python": [0.6, 0.7]
    "Design": [0.4, 0.8]`,`quadrantChart
    title Market Position
    x-axis Low Price --> High Price
    y-axis Low Quality --> High Quality
    quadrant-1 Economy
    quadrant-2 Premium
    quadrant-3 Budget
    quadrant-4 Value
    "Product A": [0.3, 0.7]
    "Product B": [0.8, 0.8]
    "Product C": [0.2, 0.4]`]},eN={1:"Hero visual with comprehensive explanation - large image with detailed educational content",2:"Step-by-step visual guide - multiple images with substantial explanations for each step",3:"Process diagram with detailed explanation - flowchart showing complex processes with educational context",4:"Concept map with analysis - mind map with detailed explanations of relationships",5:"Data visualization with analysis - pie chart with detailed statistical breakdown and interpretation",6:"Strategic framework with detailed explanation - quadrant analysis with comprehensive guidelines",7:"Featured concept layout - large visual with title and multiple paragraphs of educational content",8:"Comparative analysis - main concept with supporting evidence and detailed explanations",9:"Video learning with context - educational video with substantial background information",12:"Illustrated guide with key insights - central visual with detailed bullet points and explanations",13:"Media-rich educational content - video with comprehensive overview and context",14:"Comprehensive topic exploration - alternating visuals and detailed explanations for thorough understanding",15:"Historical timeline with detailed context - chronological progression with substantial descriptions",16:"Multi-concept comparison - grid layout with detailed descriptions for comparing related topics",17:"Code tutorial with visual examples - code snippets with explanations and visual diagrams",18:"Technical documentation - code examples with comprehensive API documentation and use cases"},aH={1:'["compelling_title", "comprehensive_educational_content", ["hero_image_prompt", "supporting_visual_1", "supporting_visual_2"]]',2:'[["step_image_1", "detailed_step_explanation_1"], ["step_image_2", "detailed_step_explanation_2"], ["step_image_3", "detailed_step_explanation_3"]]',3:[`flowchart TD
    A[starting_concept] -->|process_1| B(intermediate_result)
    B --> C{decision_point}
    C -->|outcome_a| D[final_result_1]
    C -->|outcome_b| E[final_result_2]
    C -->|outcome_c| F[fa:fa-star special_case]`,"comprehensive_process_explanation"],4:[`mindmap
  root((Central_Educational_Concept))
    Key_Aspect_1
      Supporting_Detail_A
      Supporting_Detail_B
    Key_Aspect_2
      Supporting_Detail_C
      Supporting_Detail_D`,"detailed_concept_analysis"],5:[`pie
    title Educational_Data_Analysis
    "Primary_Factor" : 45
    "Secondary_Factor" : 30
    "Additional_Factors" : 25`,"comprehensive_data_interpretation"],6:[`quadrantChart
    title Educational_Framework
    x-axis Low_Complexity --> High_Complexity
    y-axis Low_Impact --> High_Impact
    quadrant-1 Quick_Concepts
    quadrant-2 Advanced_Topics
    quadrant-3 Basic_Ideas
    quadrant-4 Fundamental_Principles
    "Concept_A": [0.3, 0.7]
    "Concept_B": [0.8, 0.4]
    "Concept_C": [0.2, 0.8]`,"detailed_framework_explanation"],7:"[featured_visual_prompt, educational_title, detailed_paragraph_1, detailed_paragraph_2, detailed_paragraph_3]",8:"[main_concept_visual, educational_title, comprehensive_explanation, [evidence_visual_1, evidence_visual_2, evidence_visual_3]]",9:"[educational_video_prompt, comprehensive_contextual_explanation]",12:"[central_educational_visual, [detailed_insight_1, detailed_insight_2, detailed_insight_3, detailed_insight_4]]",13:"[educational_section_title, comprehensive_overview_text, instructional_video_prompt]",14:"[educational_visual_1, detailed_explanation_1, educational_visual_2, detailed_explanation_2, educational_visual_3, detailed_explanation_3]",15:"[date_1, historical_visual_1, comprehensive_event_description_1, date_2, historical_visual_2, comprehensive_event_description_2]",16:"[topic_title_1, topic_visual_1, detailed_description_1, topic_title_2, topic_visual_2, detailed_description_2]",17:"[tutorial_title, code_example_1, code_explanation_1, architecture_diagram_prompt, implementation_explanation, code_example_2, code_explanation_2]",18:"[api_title, code_snippet, comprehensive_documentation, usage_examples, visual_diagram_prompt, best_practices_explanation]"},tN=Object.freeze(Object.defineProperty({__proto__:null,EXAMPLE_DIAGRAMS:sH,LAYOUT_SCHEMA:aH,LAYOUT_TYPES:eN},Symbol.toStringTag,{value:"Module"})),oH=(t,e,n,r)=>`
You are creating educational content. **Return ONLY a valid JSON _array_ — no extra text.**

════════════════════════════════════════
GLOBAL GUIDELINES
════════════════════════════════════════
• **Comprehensive** – ≥100 words per node  
• **Well‑structured** – 3–5 sentences per paragraph (20–40 words each)  
• **Visual balance** – 70% rich markdown text, 30% visuals  
• **Educational depth** – thorough explanations, concrete examples  
• **Engaging writing** – heavy markdown (**bold**, *italic*, ## headers, - lists)

════════════════════════════════════════
LAYOUT‑SPECIFIC RULES
════════════════════════════════════════
${r===12?'FOR LAYOUT 12 → Return exactly ["image_prompt", ["insight1", "insight2", "insight3", "insight4"]] — each insight 40–50 words.':""}
${r===15?"FOR TIMELINE 15 → [date1, image_prompt1, description1, …] — 4–8 items, 2–3 sentences per description.":""}
${[3,4,5,6].includes(r)?"FOR DIAGRAM 3 / 4 / 5 / 6 → First array element **MUST BE A VALID MERMAID diagram string** (e.g. `flowchart TD ...`). NOT A DESCRIPTION, A VALID DIAGRAM":""}
${r===14?"FOR LAYOUT 14 → Keep descriptions 2–3 sentences.":""}
${r===2?"FOR LAYOUT 2  → Keep descriptions 2–3 sentences.":""}


IMAGE PROMPTS
• Educational, specific, with style & medium  
  e.g. “Detailed illustration of photosynthesis in chloroplasts, realistic scientific style”

OUTPUT FORMAT (STRICT)
• Return **only** a JSON array \`[]\`.  
• Never nest objects inside the array (arrays only).  
• Absolutely no prose, markdown, or code fences outside the array.

CONCEPT: ${t}
CONTEXT: ${e}
SCHEMA: ${n}
`,lH=(t,e)=>{const n=(r,s)=>`Respond ONLY with a valid JSON array like ["topic1", "topic2"].
        Instructions:
        - Suggest exactly ${r}-${s} logical next topics.
        - Each topic <4 words, double‑quoted.
        - No explanation or extra text.
  
    Concept: ${t}`;switch(e){case"explain":return n(4,5);case"argue":return n(3,5);case"answer":return n(2,3);default:return n(3,5)}},uH=(t,e)=>`RETURN ONLY THE FA ICON CORRESPONDING TO THE CONCEPT: "${t}". EXAMPLE: <i class="fas fa-check"></i>. If no icon is suitable, return the closest match or a generic icon like <i class="fas fa-lightbulb"></i>. Do not return any text or explanation, just the icon HTML.`,cH=(t,e,n=[])=>{const r=n.length>0?`Last used layouts: ${n.join(", ")}`:"No recent layout history available.";return`Choose the best educational layout for "${t}" - prioritize diversity and optimal content presentation.
        
        ${r}
        
        Use diverse layouts for better user experience. If multiple layouts are suitable, STRONGLY PREFER layouts that are NOT in the recent history.
        
        SELECTION CRITERIA:
        • Layout Variety - Avoid recently used layouts (${n.join(", ")})
        • Content Type Match: Which layout best fits the specific content structure?
        • Visual Balance: Optimal text-to-visual ratio for the topic
        • Learning Effectiveness: Best presentation for comprehension
        
        PRIORITY LAYOUT SELECTION GUIDE:
        • **Technical/Programming topics**: Use layouts 17, 18 (code tutorials, API docs), 1, 8
        • **Process/systems**: Use diagram layouts 3, 4, 5(good for composition data), 6
        • **Comprehensive explanations**: Use hero layouts 1, 7, 12
        • **Step-by-step content**: Use layouts 2, 15 (timeline), 17 (code tutorial)
        • **Multi-aspect topics**: Use layouts 12, 13, 16
        • **Media-heavy content**: Use layouts 9, 13
        • **Quick concepts**: Use layouts 1, 6, 8
        • **Historical/chronological**: Use layout 15
        • **Comparison content**: Use layouts 8, 16, 14
        
        DIVERSIFICATION RULES:
        - PRIORITY #1: Prefer layouts not in recent history: ${n.join(", ")}
        - Prioritize new code layouts (17, 18) for technical content
        - Rotate between different layout families
        - Match complexity of layout to complexity of content
        - Consider visual appeal and educational effectiveness
        
        Return ONLY the layout number as an integer (1-18).
        
        LAYOUT TYPES:
        ${JSON.stringify(eN)}`},nN=t=>{try{let e=t.replace(/```json\s*\n?/gi,"").replace(/```\s*$/gi,"");e=e.trim();const n=e.match(/\[[\s\S]*\]|\{[\s\S]*\}/);return n&&(e=n[0]),yb(e)}catch(e){console.warn("Failed to repair JSON:",e),console.warn("Original response:",t);let n=t.replace(/```json\s*\n?/gi,"").replace(/```\s*$/gi,"").trim();const r=n.match(/\[[\s\S]*\]|\{[\s\S]*\}/);return r?r[0]:n}},jo=async t=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const e=t.trim();if(!e)throw new Error("Message cannot be empty or just whitespace");const r=await VC(gb,"groqChat")({message:e});return console.log("groqChat response:",r.data),r.data.response}catch(e){throw console.error("Firebase function error:",e),console.error("Message sent:",t),e}},dH=[{type:"function",function:{name:"create_knowledge_node",description:"Creates a detailed knowledge node with AI-generated content about a specific topic",parameters:{type:"object",properties:{title:{type:"string",description:"The title/topic for the knowledge node"},description:{type:"string",description:"A detailed description or context for the knowledge node content"},layout:{type:"number",description:"Optional layout type (1-18), defaults to AI selection"},position:{type:"object",properties:{x:{type:"number"},y:{type:"number"}},description:"Optional position for the node"},parentNodeId:{type:"string",description:"ID of parent node to connect to (optional)"}},required:["title","description"]}}},{type:"function",function:{name:"create_concept_map",description:"Creates a mind map/concept map node showing relationships between concepts",parameters:{type:"object",properties:{title:{type:"string",description:"The central concept for the mind map"},description:{type:"string",description:"Description of the concept and related topics to include"},parentNodeId:{type:"string",description:"ID of parent node to connect to (optional)"}},required:["title","description"]}}},{type:"function",function:{name:"create_flowchart",description:"Creates a process flowchart node showing step-by-step workflows or procedures",parameters:{type:"object",properties:{title:{type:"string",description:"The process name for the flowchart"},description:{type:"string",description:"Description of the process steps and workflow"},parentNodeId:{type:"string",description:"ID of parent node to connect to (optional)"}},required:["title","description"]}}}],fH=async(t,e,n,r,s)=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const o=t.trim();if(!o)throw new Error("Message cannot be empty or just whitespace");const l={message:o};s?.enableTools&&s?.availableTools&&(l.tools=s.availableTools,l.tool_choice="auto"),console.log("Calling Firebase function with payload:",{...l,tools:l.tools?`${l.tools.length} tools`:"no tools"});const c=VC(gb,"groqChat");try{console.log("Starting streaming request...");const{stream:f,data:h}=await c.stream(l);console.log("Stream started, waiting for chunks...");let p="";for await(const b of f)if(console.log("Received chunk:",b),b&&typeof b=="object"&&"type"in b&&"content"in b){const R=b;console.log("Processing chunk:",R),R.type==="chunk"&&R.content&&(p+=R.content,e(R.content))}console.log("Waiting for final result...");const v=await h;if(console.log("Final result received:",v),v){const b=v;if(console.log("Response data structure:",{hasResponse:!!b.response,hasToolCalls:!!b.tool_calls?.length,toolCallsCount:b.tool_calls?.length||0,keys:Object.keys(b)}),b.tool_calls&&b.tool_calls.length>0&&s?.onToolCall){console.log("Processing tool calls:",b.tool_calls);for(const R of b.tool_calls)try{e(`
🔧 Using ${R.function.name}...
`);const M=await s.onToolCall(R);e(`✅ ${M}
`)}catch(M){console.error("Tool execution error:",M),e(`❌ Tool execution failed: ${M}
`)}}n&&n()}else throw console.error("No final result received"),new Error("No final result received from Firebase function")}catch(f){console.error("Firebase function call failed:",f);let h="I'm having trouble connecting to the AI service. ";f.code==="functions/not-found"?h+="The chat function is not available. Please ensure the Firebase function is deployed.":f.code==="functions/unavailable"?h+="The service is temporarily unavailable. Please try again in a moment.":f.code==="functions/unauthenticated"?h+="Please sign in to use the chat feature.":f.code==="functions/permission-denied"?h+="You don't have permission to use this feature.":f.code==="functions/internal"?h+="There was an internal server error. Please try again.":f.message?h+=`Error: ${f.message}`:h+="Please check your internet connection and try again.",e(h),r&&r(new Error(h)),n&&n()}}catch(o){console.error("AI Stream error:",o);const l=o instanceof Error?o.message:"An unexpected error occurred";e(`Sorry, there was an error: ${l}`),r&&r(o instanceof Error?o:new Error("Unknown error occurred")),n&&n()}},hH=async t=>{try{const e=await jo(lH(t,"default"));console.log("Suggestions response:",e);const n=nN(e);try{const r=JSON.parse(n);return Array.isArray(r)?r:[]}catch(r){console.warn("JSON parse failed for suggestions, attempting repair:",r);const s=yb(e),o=JSON.parse(s);return Array.isArray(o)?o:[]}}catch(e){return console.error("Error fetching suggestions:",e),[]}},mH=async t=>{try{const e=await jo(uH(t,"default"));return console.log("Icon response:",e),e||"✨"}catch(e){return console.error("Error fetching icon:",e),"✨"}},pH=async(t,e=[])=>{try{const n=await jo(cH(t,"default",e));console.log("Layout response:",n);const r=n.replace(/[^\d]/g,""),s=parseInt(r);return isNaN(s)||s<1||s>18?(console.warn(`Invalid layout number: ${s}, defaulting to 1`),1):s}catch(n){return console.error("Error fetching layout:",n),1}},gH=async(t,e,n)=>{try{const s={3:"flowchart/process diagram",4:"mind map/concept map",5:"pie chart/data visualization",6:"quadrant chart/strategic framework"}[n]||"diagram",o=`You are creating educational content. Generate a detailed description of what should be shown in a ${s} for the concept: "${t}".

Context: ${e}

Requirements:
- Describe the key elements that should appear in the diagram
- Explain the relationships between elements
- Specify the main flow or structure
- Include 3-5 key components/nodes
- Keep description comprehensive but focused (100-150 words)
- Write in a clear, educational tone

Return ONLY the description text, no JSON formatting or extra text.`;return await jo(o)||`Description for ${s} showing ${t}`}catch(r){return console.error("Error fetching diagram description:",r),`Educational diagram showing ${t}`}},yH=async(t,e,n,r)=>{try{const o=(await g_(()=>Promise.resolve().then(()=>tN),void 0)).EXAMPLE_DIAGRAMS[n.toString()],l=o&&Array.isArray(o)?o.slice(0,2).join(`

--- EXAMPLE 2 ---

`):"",f={3:"flowchart",4:"mindmap",5:"pie",6:"quadrantChart"}[n]||"flowchart",h=`Generate a valid Mermaid ${f} diagram for the educational concept: "${t}".

Context: ${e}
Diagram Description: ${r}

EXAMPLES OF VALID ${f.toUpperCase()} DIAGRAMS:
${l}

REQUIREMENTS:
- Generate ONLY a valid Mermaid ${f} syntax
- Use educational, clear node names (no generic A, B, C labels)
- Include 4-7 meaningful elements
- For flowcharts: use proper arrows and decision points
- For mindmaps: use nested structure with ((root))
- For pie charts: use meaningful categories with percentages
- For quadrant charts: include axis labels and data points
- Make it educational and relevant to "${t}"
- NO explanatory text, just the diagram code

Return ONLY the Mermaid diagram string, nothing else.`,p=await jo(h);console.log("Mermaid diagram response:",p);let v=p.replace(/```mermaid\s*\n?/gi,"").replace(/```\s*$/gi,"").trim();const b=v.match(/^(flowchart|mindmap|pie|quadrantChart)[\s\S]*?(?=\n\n|$)/);return b&&(v=b[0]),v||d2(n,t)}catch(s){return console.error("Error fetching Mermaid diagram:",s),d2(n,t)}},d2=(t,e)=>{const n={3:`flowchart TD
    A[${e}] --> B[Understanding]
    B --> C[Application]
    C --> D[Mastery]`,4:`mindmap
  root((${e}))
    Key Concept 1
    Key Concept 2
    Key Concept 3`,5:`pie
    title ${e} Analysis
    "Primary Aspect" : 50
    "Secondary Aspect" : 30
    "Other Aspects" : 20`,6:`quadrantChart
    title ${e} Framework
    x-axis Low --> High
    y-axis Simple --> Complex
    quadrant-1 Basic
    quadrant-2 Advanced
    quadrant-3 Elementary
    quadrant-4 Expert`};return n[t]||n[3]},vH=async(t,e,n,r)=>{try{if(n>=3&&n<=6){console.log(`Handling diagram layout ${n} with split requests`);const[h,p]=await Promise.all([gH(t,e,n),jo(`Generate a comprehensive educational explanation for "${t}" in the context: ${e}. 
                      Provide 150-200 words of detailed, educational content explaining the concept thoroughly.
                      Write in clear, engaging paragraphs with proper educational structure.
                      Return ONLY the explanation text, no JSON formatting.`)]);console.log("Diagram description:",h),console.log("Explanation response:",p);const v=await yH(t,e,n,h);return console.log("Generated Mermaid diagram:",v),[v,p||`Educational explanation for ${t}`]}const o=(await g_(()=>Promise.resolve().then(()=>tN),void 0)).LAYOUT_SCHEMA[n.toString()],l=Array.isArray(o)?JSON.stringify(o):o,c=await jo(oH(e,t,l,n));console.log("Content response:",c);const f=nN(c);try{const h=JSON.parse(f);return Array.isArray(h)?h:[]}catch(h){console.warn("JSON parse failed, attempting repair:",h);const p=yb(c),v=JSON.parse(p);return Array.isArray(v)?v:[]}}catch(s){return console.error("Error fetching content:",s),[]}},_H=async(t,e="",n="default",r=[])=>{try{const s=await pH(t,r);console.log("Selected layout:",s);const[o,l,c]=await Promise.all([vH(t,e,s,n),hH(t),mH(t)]);return console.log("Generated content:",o),console.log("Generated suggestions:",l),console.log("Generated icon:",c),{layout:s,content:o,suggestions:l,icon:c,title:t,fullText:t}}catch(s){return console.error("Error in generateNodeContent:",s),{layout:1,content:[t,"Content loading failed",[]],suggestions:[],icon:"✨",title:t,fullText:t}}},bH="AIzaSyD2LVnTgBbk-5Wo1V2sCmY9ebcmIPdS1ng",wH="93fe2cec9d77f4202",EH="https://www.googleapis.com/customsearch/v1",xH="AIzaSyDxTJKoi1S8YjJZD12QTa4F9hV8fN8pNqo",TH="https://www.googleapis.com/youtube/v3/search",$c=new Map,Fc=new Map,oi=async t=>{if($c.has(t))return $c.get(t);try{const e=encodeURIComponent(t),n=`${EH}?key=${bH}&cx=${wH}&q=${e}&searchType=image&num=1&safe=active`,r=await fetch(n);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.items&&s.items.length>0){const l=s.items[0],c=l.link||l.pagemap?.cse_image?.[0]?.src;if(c)return $c.set(t,c),c}const o=`https://via.placeholder.com/640x360/e5e7eb/6b7280?text=${e}`;return $c.set(t,o),o}catch(e){console.error("Error fetching Google image:",e);const n="https://via.placeholder.com/640x360/ef4444/ffffff?text=Image+Error";return $c.set(t,n),n}},rN=async t=>{if(Fc.has(t))return Fc.get(t);try{const e=encodeURIComponent(t),n=`${TH}?key=${xH}&q=${e}&part=snippet&type=video&maxResults=1&videoEmbeddable=true&safeSearch=strict`,r=await fetch(n);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.items&&s.items.length>0){const l=s.items[0].id.videoId;if(l)return Fc.set(t,l),l}const o="dQw4w9WgXcQ";return Fc.set(t,o),o}catch(e){console.error("Error fetching YouTube video:",e);const n="dQw4w9WgXcQ";return Fc.set(t,n),n}},iN=t=>`https://www.youtube.com/embed/${t}`;async function Mp(t){const n=(await g_(()=>import("./mermaid.core-DoX4A2Wy.js").then(o=>o.bo),[])).default??window.mermaid?.mermaidAPI;window.___mermaidInitialised||(n.initialize({startOnLoad:!1,theme:"default",securityLevel:"loose",fontFamily:"inherit"}),window.___mermaidInitialised=!0);let r;try{r=(await n.render("m_"+Math.random().toString(36).slice(2),t.trim())).svg}catch(o){throw o}return new DOMParser().parseFromString(r,"image/svg+xml").documentElement}var hm={exports:{}},SH=hm.exports,f2;function AH(){return f2||(f2=1,function(t){(function(){function e(y){var E={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:`Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `«««` and `»»»` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(y===!1)return JSON.parse(JSON.stringify(E));var w={};for(var x in E)E.hasOwnProperty(x)&&(w[x]=E[x].defaultValue);return w}function n(){var y=e(!0),E={};for(var w in y)y.hasOwnProperty(w)&&(E[w]=!0);return E}var r={},s={},o={},l=e(!0),c="vanilla",f={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:e(!0),allOn:n()};r.helper={},r.extensions={},r.setOption=function(y,E){return l[y]=E,this},r.getOption=function(y){return l[y]},r.getOptions=function(){return l},r.resetOptions=function(){l=e(!0)},r.setFlavor=function(y){if(!f.hasOwnProperty(y))throw Error(y+" flavor was not found");r.resetOptions();var E=f[y];c=y;for(var w in E)E.hasOwnProperty(w)&&(l[w]=E[w])},r.getFlavor=function(){return c},r.getFlavorOptions=function(y){if(f.hasOwnProperty(y))return f[y]},r.getDefaultOptions=function(y){return e(y)},r.subParser=function(y,E){if(r.helper.isString(y))if(typeof E<"u")s[y]=E;else{if(s.hasOwnProperty(y))return s[y];throw Error("SubParser named "+y+" not registered!")}},r.extension=function(y,E){if(!r.helper.isString(y))throw Error("Extension 'name' must be a string");if(y=r.helper.stdExtName(y),r.helper.isUndefined(E)){if(!o.hasOwnProperty(y))throw Error("Extension named "+y+" is not registered!");return o[y]}else{typeof E=="function"&&(E=E()),r.helper.isArray(E)||(E=[E]);var w=h(E,y);if(w.valid)o[y]=E;else throw Error(w.error)}},r.getAllExtensions=function(){return o},r.removeExtension=function(y){delete o[y]},r.resetExtensions=function(){o={}};function h(y,E){var w=E?"Error in "+E+" extension->":"Error in unnamed extension",x={valid:!0,error:""};r.helper.isArray(y)||(y=[y]);for(var S=0;S<y.length;++S){var N=w+" sub-extension "+S+": ",C=y[S];if(typeof C!="object")return x.valid=!1,x.error=N+"must be an object, but "+typeof C+" given",x;if(!r.helper.isString(C.type))return x.valid=!1,x.error=N+'property "type" must be a string, but '+typeof C.type+" given",x;var D=C.type=C.type.toLowerCase();if(D==="language"&&(D=C.type="lang"),D==="html"&&(D=C.type="output"),D!=="lang"&&D!=="output"&&D!=="listener")return x.valid=!1,x.error=N+"type "+D+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',x;if(D==="listener"){if(r.helper.isUndefined(C.listeners))return x.valid=!1,x.error=N+'. Extensions of type "listener" must have a property called "listeners"',x}else if(r.helper.isUndefined(C.filter)&&r.helper.isUndefined(C.regex))return x.valid=!1,x.error=N+D+' extensions must define either a "regex" property or a "filter" method',x;if(C.listeners){if(typeof C.listeners!="object")return x.valid=!1,x.error=N+'"listeners" property must be an object but '+typeof C.listeners+" given",x;for(var H in C.listeners)if(C.listeners.hasOwnProperty(H)&&typeof C.listeners[H]!="function")return x.valid=!1,x.error=N+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+H+" must be a function but "+typeof C.listeners[H]+" given",x}if(C.filter){if(typeof C.filter!="function")return x.valid=!1,x.error=N+'"filter" must be a function, but '+typeof C.filter+" given",x}else if(C.regex){if(r.helper.isString(C.regex)&&(C.regex=new RegExp(C.regex,"g")),!(C.regex instanceof RegExp))return x.valid=!1,x.error=N+'"regex" property must either be a string or a RegExp object, but '+typeof C.regex+" given",x;if(r.helper.isUndefined(C.replace))return x.valid=!1,x.error=N+'"regex" extensions must implement a replace string or function',x}}return x}r.validateExtension=function(y){var E=h(y,null);return E.valid?!0:(console.warn(E.error),!1)},r.hasOwnProperty("helper")||(r.helper={}),r.helper.isString=function(y){return typeof y=="string"||y instanceof String},r.helper.isFunction=function(y){var E={};return y&&E.toString.call(y)==="[object Function]"},r.helper.isArray=function(y){return Array.isArray(y)},r.helper.isUndefined=function(y){return typeof y>"u"},r.helper.forEach=function(y,E){if(r.helper.isUndefined(y))throw new Error("obj param is required");if(r.helper.isUndefined(E))throw new Error("callback param is required");if(!r.helper.isFunction(E))throw new Error("callback param must be a function/closure");if(typeof y.forEach=="function")y.forEach(E);else if(r.helper.isArray(y))for(var w=0;w<y.length;w++)E(y[w],w,y);else if(typeof y=="object")for(var x in y)y.hasOwnProperty(x)&&E(y[x],x,y);else throw new Error("obj does not seem to be an array or an iterable object")},r.helper.stdExtName=function(y){return y.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};function p(y,E){var w=E.charCodeAt(0);return"¨E"+w+"E"}r.helper.escapeCharactersCallback=p,r.helper.escapeCharacters=function(y,E,w){var x="(["+E.replace(/([\[\]\\])/g,"\\$1")+"])";w&&(x="\\\\"+x);var S=new RegExp(x,"g");return y=y.replace(S,p),y},r.helper.unescapeHTMLEntities=function(y){return y.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var v=function(y,E,w,x){var S=x||"",N=S.indexOf("g")>-1,C=new RegExp(E+"|"+w,"g"+S.replace(/g/g,"")),D=new RegExp(E,S.replace(/g/g,"")),H=[],V,U,Q,k,F;do for(V=0;Q=C.exec(y);)if(D.test(Q[0]))V++||(U=C.lastIndex,k=U-Q[0].length);else if(V&&!--V){F=Q.index+Q[0].length;var G={left:{start:k,end:U},match:{start:U,end:Q.index},right:{start:Q.index,end:F},wholeMatch:{start:k,end:F}};if(H.push(G),!N)return H}while(V&&(C.lastIndex=U));return H};r.helper.matchRecursiveRegExp=function(y,E,w,x){for(var S=v(y,E,w,x),N=[],C=0;C<S.length;++C)N.push([y.slice(S[C].wholeMatch.start,S[C].wholeMatch.end),y.slice(S[C].match.start,S[C].match.end),y.slice(S[C].left.start,S[C].left.end),y.slice(S[C].right.start,S[C].right.end)]);return N},r.helper.replaceRecursiveRegExp=function(y,E,w,x,S){if(!r.helper.isFunction(E)){var N=E;E=function(){return N}}var C=v(y,w,x,S),D=y,H=C.length;if(H>0){var V=[];C[0].wholeMatch.start!==0&&V.push(y.slice(0,C[0].wholeMatch.start));for(var U=0;U<H;++U)V.push(E(y.slice(C[U].wholeMatch.start,C[U].wholeMatch.end),y.slice(C[U].match.start,C[U].match.end),y.slice(C[U].left.start,C[U].left.end),y.slice(C[U].right.start,C[U].right.end))),U<H-1&&V.push(y.slice(C[U].wholeMatch.end,C[U+1].wholeMatch.start));C[H-1].wholeMatch.end<y.length&&V.push(y.slice(C[H-1].wholeMatch.end)),D=V.join("")}return D},r.helper.regexIndexOf=function(y,E,w){if(!r.helper.isString(y))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(!(E instanceof RegExp))throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var x=y.substring(w||0).search(E);return x>=0?x+(w||0):x},r.helper.splitAtIndex=function(y,E){if(!r.helper.isString(y))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[y.substring(0,E),y.substring(E)]},r.helper.encodeEmailAddress=function(y){var E=[function(w){return"&#"+w.charCodeAt(0)+";"},function(w){return"&#x"+w.charCodeAt(0).toString(16)+";"},function(w){return w}];return y=y.replace(/./g,function(w){if(w==="@")w=E[Math.floor(Math.random()*2)](w);else{var x=Math.random();w=x>.9?E[2](w):x>.45?E[1](w):E[0](w)}return w}),y},r.helper.padEnd=function(E,w,x){return w=w>>0,x=String(x||" "),E.length>w?String(E):(w=w-E.length,w>x.length&&(x+=x.repeat(w/x.length)),String(E)+x.slice(0,w))},typeof console>"u"&&(console={warn:function(y){alert(y)},log:function(y){alert(y)},error:function(y){throw y}}),r.helper.regexes={asteriskDashAndColon:/([*_:~])/g},r.helper.emojis={"+1":"👍","-1":"👎",100:"💯",1234:"🔢","1st_place_medal":"🥇","2nd_place_medal":"🥈","3rd_place_medal":"🥉","8ball":"🎱",a:"🅰️",ab:"🆎",abc:"🔤",abcd:"🔡",accept:"🉑",aerial_tramway:"🚡",airplane:"✈️",alarm_clock:"⏰",alembic:"⚗️",alien:"👽",ambulance:"🚑",amphora:"🏺",anchor:"⚓️",angel:"👼",anger:"💢",angry:"😠",anguished:"😧",ant:"🐜",apple:"🍎",aquarius:"♒️",aries:"♈️",arrow_backward:"◀️",arrow_double_down:"⏬",arrow_double_up:"⏫",arrow_down:"⬇️",arrow_down_small:"🔽",arrow_forward:"▶️",arrow_heading_down:"⤵️",arrow_heading_up:"⤴️",arrow_left:"⬅️",arrow_lower_left:"↙️",arrow_lower_right:"↘️",arrow_right:"➡️",arrow_right_hook:"↪️",arrow_up:"⬆️",arrow_up_down:"↕️",arrow_up_small:"🔼",arrow_upper_left:"↖️",arrow_upper_right:"↗️",arrows_clockwise:"🔃",arrows_counterclockwise:"🔄",art:"🎨",articulated_lorry:"🚛",artificial_satellite:"🛰",astonished:"😲",athletic_shoe:"👟",atm:"🏧",atom_symbol:"⚛️",avocado:"🥑",b:"🅱️",baby:"👶",baby_bottle:"🍼",baby_chick:"🐤",baby_symbol:"🚼",back:"🔙",bacon:"🥓",badminton:"🏸",baggage_claim:"🛄",baguette_bread:"🥖",balance_scale:"⚖️",balloon:"🎈",ballot_box:"🗳",ballot_box_with_check:"☑️",bamboo:"🎍",banana:"🍌",bangbang:"‼️",bank:"🏦",bar_chart:"📊",barber:"💈",baseball:"⚾️",basketball:"🏀",basketball_man:"⛹️",basketball_woman:"⛹️&zwj;♀️",bat:"🦇",bath:"🛀",bathtub:"🛁",battery:"🔋",beach_umbrella:"🏖",bear:"🐻",bed:"🛏",bee:"🐝",beer:"🍺",beers:"🍻",beetle:"🐞",beginner:"🔰",bell:"🔔",bellhop_bell:"🛎",bento:"🍱",biking_man:"🚴",bike:"🚲",biking_woman:"🚴&zwj;♀️",bikini:"👙",biohazard:"☣️",bird:"🐦",birthday:"🎂",black_circle:"⚫️",black_flag:"🏴",black_heart:"🖤",black_joker:"🃏",black_large_square:"⬛️",black_medium_small_square:"◾️",black_medium_square:"◼️",black_nib:"✒️",black_small_square:"▪️",black_square_button:"🔲",blonde_man:"👱",blonde_woman:"👱&zwj;♀️",blossom:"🌼",blowfish:"🐡",blue_book:"📘",blue_car:"🚙",blue_heart:"💙",blush:"😊",boar:"🐗",boat:"⛵️",bomb:"💣",book:"📖",bookmark:"🔖",bookmark_tabs:"📑",books:"📚",boom:"💥",boot:"👢",bouquet:"💐",bowing_man:"🙇",bow_and_arrow:"🏹",bowing_woman:"🙇&zwj;♀️",bowling:"🎳",boxing_glove:"🥊",boy:"👦",bread:"🍞",bride_with_veil:"👰",bridge_at_night:"🌉",briefcase:"💼",broken_heart:"💔",bug:"🐛",building_construction:"🏗",bulb:"💡",bullettrain_front:"🚅",bullettrain_side:"🚄",burrito:"🌯",bus:"🚌",business_suit_levitating:"🕴",busstop:"🚏",bust_in_silhouette:"👤",busts_in_silhouette:"👥",butterfly:"🦋",cactus:"🌵",cake:"🍰",calendar:"📆",call_me_hand:"🤙",calling:"📲",camel:"🐫",camera:"📷",camera_flash:"📸",camping:"🏕",cancer:"♋️",candle:"🕯",candy:"🍬",canoe:"🛶",capital_abcd:"🔠",capricorn:"♑️",car:"🚗",card_file_box:"🗃",card_index:"📇",card_index_dividers:"🗂",carousel_horse:"🎠",carrot:"🥕",cat:"🐱",cat2:"🐈",cd:"💿",chains:"⛓",champagne:"🍾",chart:"💹",chart_with_downwards_trend:"📉",chart_with_upwards_trend:"📈",checkered_flag:"🏁",cheese:"🧀",cherries:"🍒",cherry_blossom:"🌸",chestnut:"🌰",chicken:"🐔",children_crossing:"🚸",chipmunk:"🐿",chocolate_bar:"🍫",christmas_tree:"🎄",church:"⛪️",cinema:"🎦",circus_tent:"🎪",city_sunrise:"🌇",city_sunset:"🌆",cityscape:"🏙",cl:"🆑",clamp:"🗜",clap:"👏",clapper:"🎬",classical_building:"🏛",clinking_glasses:"🥂",clipboard:"📋",clock1:"🕐",clock10:"🕙",clock1030:"🕥",clock11:"🕚",clock1130:"🕦",clock12:"🕛",clock1230:"🕧",clock130:"🕜",clock2:"🕑",clock230:"🕝",clock3:"🕒",clock330:"🕞",clock4:"🕓",clock430:"🕟",clock5:"🕔",clock530:"🕠",clock6:"🕕",clock630:"🕡",clock7:"🕖",clock730:"🕢",clock8:"🕗",clock830:"🕣",clock9:"🕘",clock930:"🕤",closed_book:"📕",closed_lock_with_key:"🔐",closed_umbrella:"🌂",cloud:"☁️",cloud_with_lightning:"🌩",cloud_with_lightning_and_rain:"⛈",cloud_with_rain:"🌧",cloud_with_snow:"🌨",clown_face:"🤡",clubs:"♣️",cocktail:"🍸",coffee:"☕️",coffin:"⚰️",cold_sweat:"😰",comet:"☄️",computer:"💻",computer_mouse:"🖱",confetti_ball:"🎊",confounded:"😖",confused:"😕",congratulations:"㊗️",construction:"🚧",construction_worker_man:"👷",construction_worker_woman:"👷&zwj;♀️",control_knobs:"🎛",convenience_store:"🏪",cookie:"🍪",cool:"🆒",policeman:"👮",copyright:"©️",corn:"🌽",couch_and_lamp:"🛋",couple:"👫",couple_with_heart_woman_man:"💑",couple_with_heart_man_man:"👨&zwj;❤️&zwj;👨",couple_with_heart_woman_woman:"👩&zwj;❤️&zwj;👩",couplekiss_man_man:"👨&zwj;❤️&zwj;💋&zwj;👨",couplekiss_man_woman:"💏",couplekiss_woman_woman:"👩&zwj;❤️&zwj;💋&zwj;👩",cow:"🐮",cow2:"🐄",cowboy_hat_face:"🤠",crab:"🦀",crayon:"🖍",credit_card:"💳",crescent_moon:"🌙",cricket:"🏏",crocodile:"🐊",croissant:"🥐",crossed_fingers:"🤞",crossed_flags:"🎌",crossed_swords:"⚔️",crown:"👑",cry:"😢",crying_cat_face:"😿",crystal_ball:"🔮",cucumber:"🥒",cupid:"💘",curly_loop:"➰",currency_exchange:"💱",curry:"🍛",custard:"🍮",customs:"🛃",cyclone:"🌀",dagger:"🗡",dancer:"💃",dancing_women:"👯",dancing_men:"👯&zwj;♂️",dango:"🍡",dark_sunglasses:"🕶",dart:"🎯",dash:"💨",date:"📅",deciduous_tree:"🌳",deer:"🦌",department_store:"🏬",derelict_house:"🏚",desert:"🏜",desert_island:"🏝",desktop_computer:"🖥",male_detective:"🕵️",diamond_shape_with_a_dot_inside:"💠",diamonds:"♦️",disappointed:"😞",disappointed_relieved:"😥",dizzy:"💫",dizzy_face:"😵",do_not_litter:"🚯",dog:"🐶",dog2:"🐕",dollar:"💵",dolls:"🎎",dolphin:"🐬",door:"🚪",doughnut:"🍩",dove:"🕊",dragon:"🐉",dragon_face:"🐲",dress:"👗",dromedary_camel:"🐪",drooling_face:"🤤",droplet:"💧",drum:"🥁",duck:"🦆",dvd:"📀","e-mail":"📧",eagle:"🦅",ear:"👂",ear_of_rice:"🌾",earth_africa:"🌍",earth_americas:"🌎",earth_asia:"🌏",egg:"🥚",eggplant:"🍆",eight_pointed_black_star:"✴️",eight_spoked_asterisk:"✳️",electric_plug:"🔌",elephant:"🐘",email:"✉️",end:"🔚",envelope_with_arrow:"📩",euro:"💶",european_castle:"🏰",european_post_office:"🏤",evergreen_tree:"🌲",exclamation:"❗️",expressionless:"😑",eye:"👁",eye_speech_bubble:"👁&zwj;🗨",eyeglasses:"👓",eyes:"👀",face_with_head_bandage:"🤕",face_with_thermometer:"🤒",fist_oncoming:"👊",factory:"🏭",fallen_leaf:"🍂",family_man_woman_boy:"👪",family_man_boy:"👨&zwj;👦",family_man_boy_boy:"👨&zwj;👦&zwj;👦",family_man_girl:"👨&zwj;👧",family_man_girl_boy:"👨&zwj;👧&zwj;👦",family_man_girl_girl:"👨&zwj;👧&zwj;👧",family_man_man_boy:"👨&zwj;👨&zwj;👦",family_man_man_boy_boy:"👨&zwj;👨&zwj;👦&zwj;👦",family_man_man_girl:"👨&zwj;👨&zwj;👧",family_man_man_girl_boy:"👨&zwj;👨&zwj;👧&zwj;👦",family_man_man_girl_girl:"👨&zwj;👨&zwj;👧&zwj;👧",family_man_woman_boy_boy:"👨&zwj;👩&zwj;👦&zwj;👦",family_man_woman_girl:"👨&zwj;👩&zwj;👧",family_man_woman_girl_boy:"👨&zwj;👩&zwj;👧&zwj;👦",family_man_woman_girl_girl:"👨&zwj;👩&zwj;👧&zwj;👧",family_woman_boy:"👩&zwj;👦",family_woman_boy_boy:"👩&zwj;👦&zwj;👦",family_woman_girl:"👩&zwj;👧",family_woman_girl_boy:"👩&zwj;👧&zwj;👦",family_woman_girl_girl:"👩&zwj;👧&zwj;👧",family_woman_woman_boy:"👩&zwj;👩&zwj;👦",family_woman_woman_boy_boy:"👩&zwj;👩&zwj;👦&zwj;👦",family_woman_woman_girl:"👩&zwj;👩&zwj;👧",family_woman_woman_girl_boy:"👩&zwj;👩&zwj;👧&zwj;👦",family_woman_woman_girl_girl:"👩&zwj;👩&zwj;👧&zwj;👧",fast_forward:"⏩",fax:"📠",fearful:"😨",feet:"🐾",female_detective:"🕵️&zwj;♀️",ferris_wheel:"🎡",ferry:"⛴",field_hockey:"🏑",file_cabinet:"🗄",file_folder:"📁",film_projector:"📽",film_strip:"🎞",fire:"🔥",fire_engine:"🚒",fireworks:"🎆",first_quarter_moon:"🌓",first_quarter_moon_with_face:"🌛",fish:"🐟",fish_cake:"🍥",fishing_pole_and_fish:"🎣",fist_raised:"✊",fist_left:"🤛",fist_right:"🤜",flags:"🎏",flashlight:"🔦",fleur_de_lis:"⚜️",flight_arrival:"🛬",flight_departure:"🛫",floppy_disk:"💾",flower_playing_cards:"🎴",flushed:"😳",fog:"🌫",foggy:"🌁",football:"🏈",footprints:"👣",fork_and_knife:"🍴",fountain:"⛲️",fountain_pen:"🖋",four_leaf_clover:"🍀",fox_face:"🦊",framed_picture:"🖼",free:"🆓",fried_egg:"🍳",fried_shrimp:"🍤",fries:"🍟",frog:"🐸",frowning:"😦",frowning_face:"☹️",frowning_man:"🙍&zwj;♂️",frowning_woman:"🙍",middle_finger:"🖕",fuelpump:"⛽️",full_moon:"🌕",full_moon_with_face:"🌝",funeral_urn:"⚱️",game_die:"🎲",gear:"⚙️",gem:"💎",gemini:"♊️",ghost:"👻",gift:"🎁",gift_heart:"💝",girl:"👧",globe_with_meridians:"🌐",goal_net:"🥅",goat:"🐐",golf:"⛳️",golfing_man:"🏌️",golfing_woman:"🏌️&zwj;♀️",gorilla:"🦍",grapes:"🍇",green_apple:"🍏",green_book:"📗",green_heart:"💚",green_salad:"🥗",grey_exclamation:"❕",grey_question:"❔",grimacing:"😬",grin:"😁",grinning:"😀",guardsman:"💂",guardswoman:"💂&zwj;♀️",guitar:"🎸",gun:"🔫",haircut_woman:"💇",haircut_man:"💇&zwj;♂️",hamburger:"🍔",hammer:"🔨",hammer_and_pick:"⚒",hammer_and_wrench:"🛠",hamster:"🐹",hand:"✋",handbag:"👜",handshake:"🤝",hankey:"💩",hatched_chick:"🐥",hatching_chick:"🐣",headphones:"🎧",hear_no_evil:"🙉",heart:"❤️",heart_decoration:"💟",heart_eyes:"😍",heart_eyes_cat:"😻",heartbeat:"💓",heartpulse:"💗",hearts:"♥️",heavy_check_mark:"✔️",heavy_division_sign:"➗",heavy_dollar_sign:"💲",heavy_heart_exclamation:"❣️",heavy_minus_sign:"➖",heavy_multiplication_x:"✖️",heavy_plus_sign:"➕",helicopter:"🚁",herb:"🌿",hibiscus:"🌺",high_brightness:"🔆",high_heel:"👠",hocho:"🔪",hole:"🕳",honey_pot:"🍯",horse:"🐴",horse_racing:"🏇",hospital:"🏥",hot_pepper:"🌶",hotdog:"🌭",hotel:"🏨",hotsprings:"♨️",hourglass:"⌛️",hourglass_flowing_sand:"⏳",house:"🏠",house_with_garden:"🏡",houses:"🏘",hugs:"🤗",hushed:"😯",ice_cream:"🍨",ice_hockey:"🏒",ice_skate:"⛸",icecream:"🍦",id:"🆔",ideograph_advantage:"🉐",imp:"👿",inbox_tray:"📥",incoming_envelope:"📨",tipping_hand_woman:"💁",information_source:"ℹ️",innocent:"😇",interrobang:"⁉️",iphone:"📱",izakaya_lantern:"🏮",jack_o_lantern:"🎃",japan:"🗾",japanese_castle:"🏯",japanese_goblin:"👺",japanese_ogre:"👹",jeans:"👖",joy:"😂",joy_cat:"😹",joystick:"🕹",kaaba:"🕋",key:"🔑",keyboard:"⌨️",keycap_ten:"🔟",kick_scooter:"🛴",kimono:"👘",kiss:"💋",kissing:"😗",kissing_cat:"😽",kissing_closed_eyes:"😚",kissing_heart:"😘",kissing_smiling_eyes:"😙",kiwi_fruit:"🥝",koala:"🐨",koko:"🈁",label:"🏷",large_blue_circle:"🔵",large_blue_diamond:"🔷",large_orange_diamond:"🔶",last_quarter_moon:"🌗",last_quarter_moon_with_face:"🌜",latin_cross:"✝️",laughing:"😆",leaves:"🍃",ledger:"📒",left_luggage:"🛅",left_right_arrow:"↔️",leftwards_arrow_with_hook:"↩️",lemon:"🍋",leo:"♌️",leopard:"🐆",level_slider:"🎚",libra:"♎️",light_rail:"🚈",link:"🔗",lion:"🦁",lips:"👄",lipstick:"💄",lizard:"🦎",lock:"🔒",lock_with_ink_pen:"🔏",lollipop:"🍭",loop:"➿",loud_sound:"🔊",loudspeaker:"📢",love_hotel:"🏩",love_letter:"💌",low_brightness:"🔅",lying_face:"🤥",m:"Ⓜ️",mag:"🔍",mag_right:"🔎",mahjong:"🀄️",mailbox:"📫",mailbox_closed:"📪",mailbox_with_mail:"📬",mailbox_with_no_mail:"📭",man:"👨",man_artist:"👨&zwj;🎨",man_astronaut:"👨&zwj;🚀",man_cartwheeling:"🤸&zwj;♂️",man_cook:"👨&zwj;🍳",man_dancing:"🕺",man_facepalming:"🤦&zwj;♂️",man_factory_worker:"👨&zwj;🏭",man_farmer:"👨&zwj;🌾",man_firefighter:"👨&zwj;🚒",man_health_worker:"👨&zwj;⚕️",man_in_tuxedo:"🤵",man_judge:"👨&zwj;⚖️",man_juggling:"🤹&zwj;♂️",man_mechanic:"👨&zwj;🔧",man_office_worker:"👨&zwj;💼",man_pilot:"👨&zwj;✈️",man_playing_handball:"🤾&zwj;♂️",man_playing_water_polo:"🤽&zwj;♂️",man_scientist:"👨&zwj;🔬",man_shrugging:"🤷&zwj;♂️",man_singer:"👨&zwj;🎤",man_student:"👨&zwj;🎓",man_teacher:"👨&zwj;🏫",man_technologist:"👨&zwj;💻",man_with_gua_pi_mao:"👲",man_with_turban:"👳",tangerine:"🍊",mans_shoe:"👞",mantelpiece_clock:"🕰",maple_leaf:"🍁",martial_arts_uniform:"🥋",mask:"😷",massage_woman:"💆",massage_man:"💆&zwj;♂️",meat_on_bone:"🍖",medal_military:"🎖",medal_sports:"🏅",mega:"📣",melon:"🍈",memo:"📝",men_wrestling:"🤼&zwj;♂️",menorah:"🕎",mens:"🚹",metal:"🤘",metro:"🚇",microphone:"🎤",microscope:"🔬",milk_glass:"🥛",milky_way:"🌌",minibus:"🚐",minidisc:"💽",mobile_phone_off:"📴",money_mouth_face:"🤑",money_with_wings:"💸",moneybag:"💰",monkey:"🐒",monkey_face:"🐵",monorail:"🚝",moon:"🌔",mortar_board:"🎓",mosque:"🕌",motor_boat:"🛥",motor_scooter:"🛵",motorcycle:"🏍",motorway:"🛣",mount_fuji:"🗻",mountain:"⛰",mountain_biking_man:"🚵",mountain_biking_woman:"🚵&zwj;♀️",mountain_cableway:"🚠",mountain_railway:"🚞",mountain_snow:"🏔",mouse:"🐭",mouse2:"🐁",movie_camera:"🎥",moyai:"🗿",mrs_claus:"🤶",muscle:"💪",mushroom:"🍄",musical_keyboard:"🎹",musical_note:"🎵",musical_score:"🎼",mute:"🔇",nail_care:"💅",name_badge:"📛",national_park:"🏞",nauseated_face:"🤢",necktie:"👔",negative_squared_cross_mark:"❎",nerd_face:"🤓",neutral_face:"😐",new:"🆕",new_moon:"🌑",new_moon_with_face:"🌚",newspaper:"📰",newspaper_roll:"🗞",next_track_button:"⏭",ng:"🆖",no_good_man:"🙅&zwj;♂️",no_good_woman:"🙅",night_with_stars:"🌃",no_bell:"🔕",no_bicycles:"🚳",no_entry:"⛔️",no_entry_sign:"🚫",no_mobile_phones:"📵",no_mouth:"😶",no_pedestrians:"🚷",no_smoking:"🚭","non-potable_water":"🚱",nose:"👃",notebook:"📓",notebook_with_decorative_cover:"📔",notes:"🎶",nut_and_bolt:"🔩",o:"⭕️",o2:"🅾️",ocean:"🌊",octopus:"🐙",oden:"🍢",office:"🏢",oil_drum:"🛢",ok:"🆗",ok_hand:"👌",ok_man:"🙆&zwj;♂️",ok_woman:"🙆",old_key:"🗝",older_man:"👴",older_woman:"👵",om:"🕉",on:"🔛",oncoming_automobile:"🚘",oncoming_bus:"🚍",oncoming_police_car:"🚔",oncoming_taxi:"🚖",open_file_folder:"📂",open_hands:"👐",open_mouth:"😮",open_umbrella:"☂️",ophiuchus:"⛎",orange_book:"📙",orthodox_cross:"☦️",outbox_tray:"📤",owl:"🦉",ox:"🐂",package:"📦",page_facing_up:"📄",page_with_curl:"📃",pager:"📟",paintbrush:"🖌",palm_tree:"🌴",pancakes:"🥞",panda_face:"🐼",paperclip:"📎",paperclips:"🖇",parasol_on_ground:"⛱",parking:"🅿️",part_alternation_mark:"〽️",partly_sunny:"⛅️",passenger_ship:"🛳",passport_control:"🛂",pause_button:"⏸",peace_symbol:"☮️",peach:"🍑",peanuts:"🥜",pear:"🍐",pen:"🖊",pencil2:"✏️",penguin:"🐧",pensive:"😔",performing_arts:"🎭",persevere:"😣",person_fencing:"🤺",pouting_woman:"🙎",phone:"☎️",pick:"⛏",pig:"🐷",pig2:"🐖",pig_nose:"🐽",pill:"💊",pineapple:"🍍",ping_pong:"🏓",pisces:"♓️",pizza:"🍕",place_of_worship:"🛐",plate_with_cutlery:"🍽",play_or_pause_button:"⏯",point_down:"👇",point_left:"👈",point_right:"👉",point_up:"☝️",point_up_2:"👆",police_car:"🚓",policewoman:"👮&zwj;♀️",poodle:"🐩",popcorn:"🍿",post_office:"🏣",postal_horn:"📯",postbox:"📮",potable_water:"🚰",potato:"🥔",pouch:"👝",poultry_leg:"🍗",pound:"💷",rage:"😡",pouting_cat:"😾",pouting_man:"🙎&zwj;♂️",pray:"🙏",prayer_beads:"📿",pregnant_woman:"🤰",previous_track_button:"⏮",prince:"🤴",princess:"👸",printer:"🖨",purple_heart:"💜",purse:"👛",pushpin:"📌",put_litter_in_its_place:"🚮",question:"❓",rabbit:"🐰",rabbit2:"🐇",racehorse:"🐎",racing_car:"🏎",radio:"📻",radio_button:"🔘",radioactive:"☢️",railway_car:"🚃",railway_track:"🛤",rainbow:"🌈",rainbow_flag:"🏳️&zwj;🌈",raised_back_of_hand:"🤚",raised_hand_with_fingers_splayed:"🖐",raised_hands:"🙌",raising_hand_woman:"🙋",raising_hand_man:"🙋&zwj;♂️",ram:"🐏",ramen:"🍜",rat:"🐀",record_button:"⏺",recycle:"♻️",red_circle:"🔴",registered:"®️",relaxed:"☺️",relieved:"😌",reminder_ribbon:"🎗",repeat:"🔁",repeat_one:"🔂",rescue_worker_helmet:"⛑",restroom:"🚻",revolving_hearts:"💞",rewind:"⏪",rhinoceros:"🦏",ribbon:"🎀",rice:"🍚",rice_ball:"🍙",rice_cracker:"🍘",rice_scene:"🎑",right_anger_bubble:"🗯",ring:"💍",robot:"🤖",rocket:"🚀",rofl:"🤣",roll_eyes:"🙄",roller_coaster:"🎢",rooster:"🐓",rose:"🌹",rosette:"🏵",rotating_light:"🚨",round_pushpin:"📍",rowing_man:"🚣",rowing_woman:"🚣&zwj;♀️",rugby_football:"🏉",running_man:"🏃",running_shirt_with_sash:"🎽",running_woman:"🏃&zwj;♀️",sa:"🈂️",sagittarius:"♐️",sake:"🍶",sandal:"👡",santa:"🎅",satellite:"📡",saxophone:"🎷",school:"🏫",school_satchel:"🎒",scissors:"✂️",scorpion:"🦂",scorpius:"♏️",scream:"😱",scream_cat:"🙀",scroll:"📜",seat:"💺",secret:"㊙️",see_no_evil:"🙈",seedling:"🌱",selfie:"🤳",shallow_pan_of_food:"🥘",shamrock:"☘️",shark:"🦈",shaved_ice:"🍧",sheep:"🐑",shell:"🐚",shield:"🛡",shinto_shrine:"⛩",ship:"🚢",shirt:"👕",shopping:"🛍",shopping_cart:"🛒",shower:"🚿",shrimp:"🦐",signal_strength:"📶",six_pointed_star:"🔯",ski:"🎿",skier:"⛷",skull:"💀",skull_and_crossbones:"☠️",sleeping:"😴",sleeping_bed:"🛌",sleepy:"😪",slightly_frowning_face:"🙁",slightly_smiling_face:"🙂",slot_machine:"🎰",small_airplane:"🛩",small_blue_diamond:"🔹",small_orange_diamond:"🔸",small_red_triangle:"🔺",small_red_triangle_down:"🔻",smile:"😄",smile_cat:"😸",smiley:"😃",smiley_cat:"😺",smiling_imp:"😈",smirk:"😏",smirk_cat:"😼",smoking:"🚬",snail:"🐌",snake:"🐍",sneezing_face:"🤧",snowboarder:"🏂",snowflake:"❄️",snowman:"⛄️",snowman_with_snow:"☃️",sob:"😭",soccer:"⚽️",soon:"🔜",sos:"🆘",sound:"🔉",space_invader:"👾",spades:"♠️",spaghetti:"🍝",sparkle:"❇️",sparkler:"🎇",sparkles:"✨",sparkling_heart:"💖",speak_no_evil:"🙊",speaker:"🔈",speaking_head:"🗣",speech_balloon:"💬",speedboat:"🚤",spider:"🕷",spider_web:"🕸",spiral_calendar:"🗓",spiral_notepad:"🗒",spoon:"🥄",squid:"🦑",stadium:"🏟",star:"⭐️",star2:"🌟",star_and_crescent:"☪️",star_of_david:"✡️",stars:"🌠",station:"🚉",statue_of_liberty:"🗽",steam_locomotive:"🚂",stew:"🍲",stop_button:"⏹",stop_sign:"🛑",stopwatch:"⏱",straight_ruler:"📏",strawberry:"🍓",stuck_out_tongue:"😛",stuck_out_tongue_closed_eyes:"😝",stuck_out_tongue_winking_eye:"😜",studio_microphone:"🎙",stuffed_flatbread:"🥙",sun_behind_large_cloud:"🌥",sun_behind_rain_cloud:"🌦",sun_behind_small_cloud:"🌤",sun_with_face:"🌞",sunflower:"🌻",sunglasses:"😎",sunny:"☀️",sunrise:"🌅",sunrise_over_mountains:"🌄",surfing_man:"🏄",surfing_woman:"🏄&zwj;♀️",sushi:"🍣",suspension_railway:"🚟",sweat:"😓",sweat_drops:"💦",sweat_smile:"😅",sweet_potato:"🍠",swimming_man:"🏊",swimming_woman:"🏊&zwj;♀️",symbols:"🔣",synagogue:"🕍",syringe:"💉",taco:"🌮",tada:"🎉",tanabata_tree:"🎋",taurus:"♉️",taxi:"🚕",tea:"🍵",telephone_receiver:"📞",telescope:"🔭",tennis:"🎾",tent:"⛺️",thermometer:"🌡",thinking:"🤔",thought_balloon:"💭",ticket:"🎫",tickets:"🎟",tiger:"🐯",tiger2:"🐅",timer_clock:"⏲",tipping_hand_man:"💁&zwj;♂️",tired_face:"😫",tm:"™️",toilet:"🚽",tokyo_tower:"🗼",tomato:"🍅",tongue:"👅",top:"🔝",tophat:"🎩",tornado:"🌪",trackball:"🖲",tractor:"🚜",traffic_light:"🚥",train:"🚋",train2:"🚆",tram:"🚊",triangular_flag_on_post:"🚩",triangular_ruler:"📐",trident:"🔱",triumph:"😤",trolleybus:"🚎",trophy:"🏆",tropical_drink:"🍹",tropical_fish:"🐠",truck:"🚚",trumpet:"🎺",tulip:"🌷",tumbler_glass:"🥃",turkey:"🦃",turtle:"🐢",tv:"📺",twisted_rightwards_arrows:"🔀",two_hearts:"💕",two_men_holding_hands:"👬",two_women_holding_hands:"👭",u5272:"🈹",u5408:"🈴",u55b6:"🈺",u6307:"🈯️",u6708:"🈷️",u6709:"🈶",u6e80:"🈵",u7121:"🈚️",u7533:"🈸",u7981:"🈲",u7a7a:"🈳",umbrella:"☔️",unamused:"😒",underage:"🔞",unicorn:"🦄",unlock:"🔓",up:"🆙",upside_down_face:"🙃",v:"✌️",vertical_traffic_light:"🚦",vhs:"📼",vibration_mode:"📳",video_camera:"📹",video_game:"🎮",violin:"🎻",virgo:"♍️",volcano:"🌋",volleyball:"🏐",vs:"🆚",vulcan_salute:"🖖",walking_man:"🚶",walking_woman:"🚶&zwj;♀️",waning_crescent_moon:"🌘",waning_gibbous_moon:"🌖",warning:"⚠️",wastebasket:"🗑",watch:"⌚️",water_buffalo:"🐃",watermelon:"🍉",wave:"👋",wavy_dash:"〰️",waxing_crescent_moon:"🌒",wc:"🚾",weary:"😩",wedding:"💒",weight_lifting_man:"🏋️",weight_lifting_woman:"🏋️&zwj;♀️",whale:"🐳",whale2:"🐋",wheel_of_dharma:"☸️",wheelchair:"♿️",white_check_mark:"✅",white_circle:"⚪️",white_flag:"🏳️",white_flower:"💮",white_large_square:"⬜️",white_medium_small_square:"◽️",white_medium_square:"◻️",white_small_square:"▫️",white_square_button:"🔳",wilted_flower:"🥀",wind_chime:"🎐",wind_face:"🌬",wine_glass:"🍷",wink:"😉",wolf:"🐺",woman:"👩",woman_artist:"👩&zwj;🎨",woman_astronaut:"👩&zwj;🚀",woman_cartwheeling:"🤸&zwj;♀️",woman_cook:"👩&zwj;🍳",woman_facepalming:"🤦&zwj;♀️",woman_factory_worker:"👩&zwj;🏭",woman_farmer:"👩&zwj;🌾",woman_firefighter:"👩&zwj;🚒",woman_health_worker:"👩&zwj;⚕️",woman_judge:"👩&zwj;⚖️",woman_juggling:"🤹&zwj;♀️",woman_mechanic:"👩&zwj;🔧",woman_office_worker:"👩&zwj;💼",woman_pilot:"👩&zwj;✈️",woman_playing_handball:"🤾&zwj;♀️",woman_playing_water_polo:"🤽&zwj;♀️",woman_scientist:"👩&zwj;🔬",woman_shrugging:"🤷&zwj;♀️",woman_singer:"👩&zwj;🎤",woman_student:"👩&zwj;🎓",woman_teacher:"👩&zwj;🏫",woman_technologist:"👩&zwj;💻",woman_with_turban:"👳&zwj;♀️",womans_clothes:"👚",womans_hat:"👒",women_wrestling:"🤼&zwj;♀️",womens:"🚺",world_map:"🗺",worried:"😟",wrench:"🔧",writing_hand:"✍️",x:"❌",yellow_heart:"💛",yen:"💴",yin_yang:"☯️",yum:"😋",zap:"⚡️",zipper_mouth_face:"🤐",zzz:"💤",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:`<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`},r.Converter=function(y){var E={},w=[],x=[],S={},N=c,C={parsed:{},raw:"",format:""};D();function D(){y=y||{};for(var k in l)l.hasOwnProperty(k)&&(E[k]=l[k]);if(typeof y=="object")for(var F in y)y.hasOwnProperty(F)&&(E[F]=y[F]);else throw Error("Converter expects the passed parameter to be an object, but "+typeof y+" was passed instead.");E.extensions&&r.helper.forEach(E.extensions,H)}function H(k,F){if(F=F||null,r.helper.isString(k))if(k=r.helper.stdExtName(k),F=k,r.extensions[k]){console.warn("DEPRECATION WARNING: "+k+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),V(r.extensions[k],k);return}else if(!r.helper.isUndefined(o[k]))k=o[k];else throw Error('Extension "'+k+'" could not be loaded. It was either not found or is not a valid extension.');typeof k=="function"&&(k=k()),r.helper.isArray(k)||(k=[k]);var G=h(k,F);if(!G.valid)throw Error(G.error);for(var X=0;X<k.length;++X){switch(k[X].type){case"lang":w.push(k[X]);break;case"output":x.push(k[X]);break}if(k[X].hasOwnProperty("listeners"))for(var z in k[X].listeners)k[X].listeners.hasOwnProperty(z)&&U(z,k[X].listeners[z])}}function V(k,F){typeof k=="function"&&(k=k(new r.Converter)),r.helper.isArray(k)||(k=[k]);var G=h(k,F);if(!G.valid)throw Error(G.error);for(var X=0;X<k.length;++X)switch(k[X].type){case"lang":w.push(k[X]);break;case"output":x.push(k[X]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function U(k,F){if(!r.helper.isString(k))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof k+" given");if(typeof F!="function")throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof F+" given");S.hasOwnProperty(k)||(S[k]=[]),S[k].push(F)}function Q(k){var F=k.match(/^\s*/)[0].length,G=new RegExp("^\\s{0,"+F+"}","gm");return k.replace(G,"")}this._dispatch=function(F,G,X,z){if(S.hasOwnProperty(F))for(var W=0;W<S[F].length;++W){var ne=S[F][W](F,G,this,X,z);ne&&typeof ne<"u"&&(G=ne)}return G},this.listen=function(k,F){return U(k,F),this},this.makeHtml=function(k){if(!k)return k;var F={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:w,outputModifiers:x,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return k=k.replace(/¨/g,"¨T"),k=k.replace(/\$/g,"¨D"),k=k.replace(/\r\n/g,`
`),k=k.replace(/\r/g,`
`),k=k.replace(/\u00A0/g,"&nbsp;"),E.smartIndentationFix&&(k=Q(k)),k=`

`+k+`

`,k=r.subParser("detab")(k,E,F),k=k.replace(/^[ \t]+$/mg,""),r.helper.forEach(w,function(G){k=r.subParser("runExtension")(G,k,E,F)}),k=r.subParser("metadata")(k,E,F),k=r.subParser("hashPreCodeTags")(k,E,F),k=r.subParser("githubCodeBlocks")(k,E,F),k=r.subParser("hashHTMLBlocks")(k,E,F),k=r.subParser("hashCodeTags")(k,E,F),k=r.subParser("stripLinkDefinitions")(k,E,F),k=r.subParser("blockGamut")(k,E,F),k=r.subParser("unhashHTMLSpans")(k,E,F),k=r.subParser("unescapeSpecialChars")(k,E,F),k=k.replace(/¨D/g,"$$"),k=k.replace(/¨T/g,"¨"),k=r.subParser("completeHTMLDocument")(k,E,F),r.helper.forEach(x,function(G){k=r.subParser("runExtension")(G,k,E,F)}),C=F.metadata,k},this.makeMarkdown=this.makeMd=function(k,F){if(k=k.replace(/\r\n/g,`
`),k=k.replace(/\r/g,`
`),k=k.replace(/>[ \t]+</,">¨NBSP;<"),!F)if(window&&window.document)F=window.document;else throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");var G=F.createElement("div");G.innerHTML=k;var X={preList:ee(G)};J(G);for(var z=G.childNodes,W="",ne=0;ne<z.length;ne++)W+=r.subParser("makeMarkdown.node")(z[ne],X);function J(ae){for(var le=0;le<ae.childNodes.length;++le){var fe=ae.childNodes[le];fe.nodeType===3?!/\S/.test(fe.nodeValue)&&!/^[ ]+$/.test(fe.nodeValue)?(ae.removeChild(fe),--le):(fe.nodeValue=fe.nodeValue.split(`
`).join(" "),fe.nodeValue=fe.nodeValue.replace(/(\s)+/g,"$1")):fe.nodeType===1&&J(fe)}}function ee(ae){for(var le=ae.querySelectorAll("pre"),fe=[],he=0;he<le.length;++he)if(le[he].childElementCount===1&&le[he].firstChild.tagName.toLowerCase()==="code"){var Ee=le[he].firstChild.innerHTML.trim(),Ae=le[he].firstChild.getAttribute("data-language")||"";if(Ae==="")for(var $e=le[he].firstChild.className.split(" "),Ye=0;Ye<$e.length;++Ye){var Ve=$e[Ye].match(/^language-(.+)$/);if(Ve!==null){Ae=Ve[1];break}}Ee=r.helper.unescapeHTMLEntities(Ee),fe.push(Ee),le[he].outerHTML='<precode language="'+Ae+'" precodenum="'+he.toString()+'"></precode>'}else fe.push(le[he].innerHTML),le[he].innerHTML="",le[he].setAttribute("prenum",he.toString());return fe}return W},this.setOption=function(k,F){E[k]=F},this.getOption=function(k){return E[k]},this.getOptions=function(){return E},this.addExtension=function(k,F){F=F||null,H(k,F)},this.useExtension=function(k){H(k)},this.setFlavor=function(k){if(!f.hasOwnProperty(k))throw Error(k+" flavor was not found");var F=f[k];N=k;for(var G in F)F.hasOwnProperty(G)&&(E[G]=F[G])},this.getFlavor=function(){return N},this.removeExtension=function(k){r.helper.isArray(k)||(k=[k]);for(var F=0;F<k.length;++F){for(var G=k[F],X=0;X<w.length;++X)w[X]===G&&w.splice(X,1);for(var z=0;z<x.length;++z)x[z]===G&&x.splice(z,1)}},this.getAllExtensions=function(){return{language:w,output:x}},this.getMetadata=function(k){return k?C.raw:C.parsed},this.getMetadataFormat=function(){return C.format},this._setMetadataPair=function(k,F){C.parsed[k]=F},this._setMetadataFormat=function(k){C.format=k},this._setMetadataRaw=function(k){C.raw=k}},r.subParser("anchors",function(y,E,w){y=w.converter._dispatch("anchors.before",y,E,w);var x=function(S,N,C,D,H,V,U){if(r.helper.isUndefined(U)&&(U=""),C=C.toLowerCase(),S.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)D="";else if(!D)if(C||(C=N.toLowerCase().replace(/ ?\n/g," ")),D="#"+C,!r.helper.isUndefined(w.gUrls[C]))D=w.gUrls[C],r.helper.isUndefined(w.gTitles[C])||(U=w.gTitles[C]);else return S;D=D.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var Q='<a href="'+D+'"';return U!==""&&U!==null&&(U=U.replace(/"/g,"&quot;"),U=U.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),Q+=' title="'+U+'"'),E.openLinksInNewWindow&&!/^#/.test(D)&&(Q+=' rel="noopener noreferrer" target="¨E95Eblank"'),Q+=">"+N+"</a>",Q};return y=y.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,x),y=y.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,x),y=y.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,x),y=y.replace(/\[([^\[\]]+)]()()()()()/g,x),E.ghMentions&&(y=y.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi,function(S,N,C,D,H){if(C==="\\")return N+D;if(!r.helper.isString(E.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var V=E.ghMentionsLink.replace(/\{u}/g,H),U="";return E.openLinksInNewWindow&&(U=' rel="noopener noreferrer" target="¨E95Eblank"'),N+'<a href="'+V+'"'+U+">"+D+"</a>"})),y=w.converter._dispatch("anchors.after",y,E,w),y});var b=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,R=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,M=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,O=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,L=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,j=function(y){return function(E,w,x,S,N,C,D){x=x.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var H=x,V="",U="",Q=w||"",k=D||"";return/^www\./i.test(x)&&(x=x.replace(/^www\./i,"http://www.")),y.excludeTrailingPunctuationFromURLs&&C&&(V=C),y.openLinksInNewWindow&&(U=' rel="noopener noreferrer" target="¨E95Eblank"'),Q+'<a href="'+x+'"'+U+">"+H+"</a>"+V+k}},$=function(y,E){return function(w,x,S){var N="mailto:";return x=x||"",S=r.subParser("unescapeSpecialChars")(S,y,E),y.encodeEmails?(N=r.helper.encodeEmailAddress(N+S),S=r.helper.encodeEmailAddress(S)):N=N+S,x+'<a href="'+N+'">'+S+"</a>"}};r.subParser("autoLinks",function(y,E,w){return y=w.converter._dispatch("autoLinks.before",y,E,w),y=y.replace(M,j(E)),y=y.replace(L,$(E,w)),y=w.converter._dispatch("autoLinks.after",y,E,w),y}),r.subParser("simplifiedAutoLinks",function(y,E,w){return E.simplifiedAutoLink&&(y=w.converter._dispatch("simplifiedAutoLinks.before",y,E,w),E.excludeTrailingPunctuationFromURLs?y=y.replace(R,j(E)):y=y.replace(b,j(E)),y=y.replace(O,$(E,w)),y=w.converter._dispatch("simplifiedAutoLinks.after",y,E,w)),y}),r.subParser("blockGamut",function(y,E,w){return y=w.converter._dispatch("blockGamut.before",y,E,w),y=r.subParser("blockQuotes")(y,E,w),y=r.subParser("headers")(y,E,w),y=r.subParser("horizontalRule")(y,E,w),y=r.subParser("lists")(y,E,w),y=r.subParser("codeBlocks")(y,E,w),y=r.subParser("tables")(y,E,w),y=r.subParser("hashHTMLBlocks")(y,E,w),y=r.subParser("paragraphs")(y,E,w),y=w.converter._dispatch("blockGamut.after",y,E,w),y}),r.subParser("blockQuotes",function(y,E,w){y=w.converter._dispatch("blockQuotes.before",y,E,w),y=y+`

`;var x=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return E.splitAdjacentBlockquotes&&(x=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),y=y.replace(x,function(S){return S=S.replace(/^[ \t]*>[ \t]?/gm,""),S=S.replace(/¨0/g,""),S=S.replace(/^[ \t]+$/gm,""),S=r.subParser("githubCodeBlocks")(S,E,w),S=r.subParser("blockGamut")(S,E,w),S=S.replace(/(^|\n)/g,"$1  "),S=S.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(N,C){var D=C;return D=D.replace(/^  /mg,"¨0"),D=D.replace(/¨0/g,""),D}),r.subParser("hashBlock")(`<blockquote>
`+S+`
</blockquote>`,E,w)}),y=w.converter._dispatch("blockQuotes.after",y,E,w),y}),r.subParser("codeBlocks",function(y,E,w){y=w.converter._dispatch("codeBlocks.before",y,E,w),y+="¨0";var x=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=¨0))/g;return y=y.replace(x,function(S,N,C){var D=N,H=C,V=`
`;return D=r.subParser("outdent")(D,E,w),D=r.subParser("encodeCode")(D,E,w),D=r.subParser("detab")(D,E,w),D=D.replace(/^\n+/g,""),D=D.replace(/\n+$/g,""),E.omitExtraWLInCodeBlocks&&(V=""),D="<pre><code>"+D+V+"</code></pre>",r.subParser("hashBlock")(D,E,w)+H}),y=y.replace(/¨0/,""),y=w.converter._dispatch("codeBlocks.after",y,E,w),y}),r.subParser("codeSpans",function(y,E,w){return y=w.converter._dispatch("codeSpans.before",y,E,w),typeof y>"u"&&(y=""),y=y.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(x,S,N,C){var D=C;return D=D.replace(/^([ \t]*)/g,""),D=D.replace(/[ \t]*$/g,""),D=r.subParser("encodeCode")(D,E,w),D=S+"<code>"+D+"</code>",D=r.subParser("hashHTMLSpans")(D,E,w),D}),y=w.converter._dispatch("codeSpans.after",y,E,w),y}),r.subParser("completeHTMLDocument",function(y,E,w){if(!E.completeHTMLDocument)return y;y=w.converter._dispatch("completeHTMLDocument.before",y,E,w);var x="html",S=`<!DOCTYPE HTML>
`,N="",C=`<meta charset="utf-8">
`,D="",H="";typeof w.metadata.parsed.doctype<"u"&&(S="<!DOCTYPE "+w.metadata.parsed.doctype+`>
`,x=w.metadata.parsed.doctype.toString().toLowerCase(),(x==="html"||x==="html5")&&(C='<meta charset="utf-8">'));for(var V in w.metadata.parsed)if(w.metadata.parsed.hasOwnProperty(V))switch(V.toLowerCase()){case"doctype":break;case"title":N="<title>"+w.metadata.parsed.title+`</title>
`;break;case"charset":x==="html"||x==="html5"?C='<meta charset="'+w.metadata.parsed.charset+`">
`:C='<meta name="charset" content="'+w.metadata.parsed.charset+`">
`;break;case"language":case"lang":D=' lang="'+w.metadata.parsed[V]+'"',H+='<meta name="'+V+'" content="'+w.metadata.parsed[V]+`">
`;break;default:H+='<meta name="'+V+'" content="'+w.metadata.parsed[V]+`">
`}return y=S+"<html"+D+`>
<head>
`+N+C+H+`</head>
<body>
`+y.trim()+`
</body>
</html>`,y=w.converter._dispatch("completeHTMLDocument.after",y,E,w),y}),r.subParser("detab",function(y,E,w){return y=w.converter._dispatch("detab.before",y,E,w),y=y.replace(/\t(?=\t)/g,"    "),y=y.replace(/\t/g,"¨A¨B"),y=y.replace(/¨B(.+?)¨A/g,function(x,S){for(var N=S,C=4-N.length%4,D=0;D<C;D++)N+=" ";return N}),y=y.replace(/¨A/g,"    "),y=y.replace(/¨B/g,""),y=w.converter._dispatch("detab.after",y,E,w),y}),r.subParser("ellipsis",function(y,E,w){return E.ellipsis&&(y=w.converter._dispatch("ellipsis.before",y,E,w),y=y.replace(/\.\.\./g,"…"),y=w.converter._dispatch("ellipsis.after",y,E,w)),y}),r.subParser("emoji",function(y,E,w){if(!E.emoji)return y;y=w.converter._dispatch("emoji.before",y,E,w);var x=/:([\S]+?):/g;return y=y.replace(x,function(S,N){return r.helper.emojis.hasOwnProperty(N)?r.helper.emojis[N]:S}),y=w.converter._dispatch("emoji.after",y,E,w),y}),r.subParser("encodeAmpsAndAngles",function(y,E,w){return y=w.converter._dispatch("encodeAmpsAndAngles.before",y,E,w),y=y.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),y=y.replace(/<(?![a-z\/?$!])/gi,"&lt;"),y=y.replace(/</g,"&lt;"),y=y.replace(/>/g,"&gt;"),y=w.converter._dispatch("encodeAmpsAndAngles.after",y,E,w),y}),r.subParser("encodeBackslashEscapes",function(y,E,w){return y=w.converter._dispatch("encodeBackslashEscapes.before",y,E,w),y=y.replace(/\\(\\)/g,r.helper.escapeCharactersCallback),y=y.replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,r.helper.escapeCharactersCallback),y=w.converter._dispatch("encodeBackslashEscapes.after",y,E,w),y}),r.subParser("encodeCode",function(y,E,w){return y=w.converter._dispatch("encodeCode.before",y,E,w),y=y.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,r.helper.escapeCharactersCallback),y=w.converter._dispatch("encodeCode.after",y,E,w),y}),r.subParser("escapeSpecialCharsWithinTagAttributes",function(y,E,w){y=w.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",y,E,w);var x=/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,S=/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;return y=y.replace(x,function(N){return N.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),y=y.replace(S,function(N){return N.replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),y=w.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",y,E,w),y}),r.subParser("githubCodeBlocks",function(y,E,w){return E.ghCodeBlocks?(y=w.converter._dispatch("githubCodeBlocks.before",y,E,w),y+="¨0",y=y.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(x,S,N,C){var D=E.omitExtraWLInCodeBlocks?"":`
`;return C=r.subParser("encodeCode")(C,E,w),C=r.subParser("detab")(C,E,w),C=C.replace(/^\n+/g,""),C=C.replace(/\n+$/g,""),C="<pre><code"+(N?' class="'+N+" language-"+N+'"':"")+">"+C+D+"</code></pre>",C=r.subParser("hashBlock")(C,E,w),`

¨G`+(w.ghCodeBlocks.push({text:x,codeblock:C})-1)+`G

`}),y=y.replace(/¨0/,""),w.converter._dispatch("githubCodeBlocks.after",y,E,w)):y}),r.subParser("hashBlock",function(y,E,w){return y=w.converter._dispatch("hashBlock.before",y,E,w),y=y.replace(/(^\n+|\n+$)/g,""),y=`

¨K`+(w.gHtmlBlocks.push(y)-1)+`K

`,y=w.converter._dispatch("hashBlock.after",y,E,w),y}),r.subParser("hashCodeTags",function(y,E,w){y=w.converter._dispatch("hashCodeTags.before",y,E,w);var x=function(S,N,C,D){var H=C+r.subParser("encodeCode")(N,E,w)+D;return"¨C"+(w.gHtmlSpans.push(H)-1)+"C"};return y=r.helper.replaceRecursiveRegExp(y,x,"<code\\b[^>]*>","</code>","gim"),y=w.converter._dispatch("hashCodeTags.after",y,E,w),y}),r.subParser("hashElement",function(y,E,w){return function(x,S){var N=S;return N=N.replace(/\n\n/g,`
`),N=N.replace(/^\n/,""),N=N.replace(/\n+$/g,""),N=`

¨K`+(w.gHtmlBlocks.push(N)-1)+`K

`,N}}),r.subParser("hashHTMLBlocks",function(y,E,w){y=w.converter._dispatch("hashHTMLBlocks.before",y,E,w);var x=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],S=function(k,F,G,X){var z=k;return G.search(/\bmarkdown\b/)!==-1&&(z=G+w.converter.makeHtml(F)+X),`

¨K`+(w.gHtmlBlocks.push(z)-1)+`K

`};E.backslashEscapesHTMLTags&&(y=y.replace(/\\<(\/?[^>]+?)>/g,function(k,F){return"&lt;"+F+"&gt;"}));for(var N=0;N<x.length;++N)for(var C,D=new RegExp("^ {0,3}(<"+x[N]+"\\b[^>]*>)","im"),H="<"+x[N]+"\\b[^>]*>",V="</"+x[N]+">";(C=r.helper.regexIndexOf(y,D))!==-1;){var U=r.helper.splitAtIndex(y,C),Q=r.helper.replaceRecursiveRegExp(U[1],S,H,V,"im");if(Q===U[1])break;y=U[0].concat(Q)}return y=y.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(y,E,w)),y=r.helper.replaceRecursiveRegExp(y,function(k){return`

¨K`+(w.gHtmlBlocks.push(k)-1)+`K

`},"^ {0,3}<!--","-->","gm"),y=y.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(y,E,w)),y=w.converter._dispatch("hashHTMLBlocks.after",y,E,w),y}),r.subParser("hashHTMLSpans",function(y,E,w){y=w.converter._dispatch("hashHTMLSpans.before",y,E,w);function x(S){return"¨C"+(w.gHtmlSpans.push(S)-1)+"C"}return y=y.replace(/<[^>]+?\/>/gi,function(S){return x(S)}),y=y.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(S){return x(S)}),y=y.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(S){return x(S)}),y=y.replace(/<[^>]+?>/gi,function(S){return x(S)}),y=w.converter._dispatch("hashHTMLSpans.after",y,E,w),y}),r.subParser("unhashHTMLSpans",function(y,E,w){y=w.converter._dispatch("unhashHTMLSpans.before",y,E,w);for(var x=0;x<w.gHtmlSpans.length;++x){for(var S=w.gHtmlSpans[x],N=0;/¨C(\d+)C/.test(S);){var C=RegExp.$1;if(S=S.replace("¨C"+C+"C",w.gHtmlSpans[C]),N===10){console.error("maximum nesting of 10 spans reached!!!");break}++N}y=y.replace("¨C"+x+"C",S)}return y=w.converter._dispatch("unhashHTMLSpans.after",y,E,w),y}),r.subParser("hashPreCodeTags",function(y,E,w){y=w.converter._dispatch("hashPreCodeTags.before",y,E,w);var x=function(S,N,C,D){var H=C+r.subParser("encodeCode")(N,E,w)+D;return`

¨G`+(w.ghCodeBlocks.push({text:S,codeblock:H})-1)+`G

`};return y=r.helper.replaceRecursiveRegExp(y,x,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),y=w.converter._dispatch("hashPreCodeTags.after",y,E,w),y}),r.subParser("headers",function(y,E,w){y=w.converter._dispatch("headers.before",y,E,w);var x=isNaN(parseInt(E.headerLevelStart))?1:parseInt(E.headerLevelStart),S=E.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,N=E.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;y=y.replace(S,function(H,V){var U=r.subParser("spanGamut")(V,E,w),Q=E.noHeaderId?"":' id="'+D(V)+'"',k=x,F="<h"+k+Q+">"+U+"</h"+k+">";return r.subParser("hashBlock")(F,E,w)}),y=y.replace(N,function(H,V){var U=r.subParser("spanGamut")(V,E,w),Q=E.noHeaderId?"":' id="'+D(V)+'"',k=x+1,F="<h"+k+Q+">"+U+"</h"+k+">";return r.subParser("hashBlock")(F,E,w)});var C=E.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;y=y.replace(C,function(H,V,U){var Q=U;E.customizedHeaderId&&(Q=U.replace(/\s?\{([^{]+?)}\s*$/,""));var k=r.subParser("spanGamut")(Q,E,w),F=E.noHeaderId?"":' id="'+D(U)+'"',G=x-1+V.length,X="<h"+G+F+">"+k+"</h"+G+">";return r.subParser("hashBlock")(X,E,w)});function D(H){var V,U;if(E.customizedHeaderId){var Q=H.match(/\{([^{]+?)}\s*$/);Q&&Q[1]&&(H=Q[1])}return V=H,r.helper.isString(E.prefixHeaderId)?U=E.prefixHeaderId:E.prefixHeaderId===!0?U="section-":U="",E.rawPrefixHeaderId||(V=U+V),E.ghCompatibleHeaderId?V=V.replace(/ /g,"-").replace(/&amp;/g,"").replace(/¨T/g,"").replace(/¨D/g,"").replace(/[&+$,\/:;=?@"#{}|^¨~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():E.rawHeaderId?V=V.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/¨T/g,"¨").replace(/¨D/g,"$").replace(/["']/g,"-").toLowerCase():V=V.replace(/[^\w]/g,"").toLowerCase(),E.rawPrefixHeaderId&&(V=U+V),w.hashLinkCounts[V]?V=V+"-"+w.hashLinkCounts[V]++:w.hashLinkCounts[V]=1,V}return y=w.converter._dispatch("headers.after",y,E,w),y}),r.subParser("horizontalRule",function(y,E,w){y=w.converter._dispatch("horizontalRule.before",y,E,w);var x=r.subParser("hashBlock")("<hr />",E,w);return y=y.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,x),y=y.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,x),y=y.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,x),y=w.converter._dispatch("horizontalRule.after",y,E,w),y}),r.subParser("images",function(y,E,w){y=w.converter._dispatch("images.before",y,E,w);var x=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,S=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,N=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,C=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,D=/!\[([^\[\]]+)]()()()()()/g;function H(U,Q,k,F,G,X,z,W){return F=F.replace(/\s/g,""),V(U,Q,k,F,G,X,z,W)}function V(U,Q,k,F,G,X,z,W){var ne=w.gUrls,J=w.gTitles,ee=w.gDimensions;if(k=k.toLowerCase(),W||(W=""),U.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)F="";else if(F===""||F===null)if((k===""||k===null)&&(k=Q.toLowerCase().replace(/ ?\n/g," ")),F="#"+k,!r.helper.isUndefined(ne[k]))F=ne[k],r.helper.isUndefined(J[k])||(W=J[k]),r.helper.isUndefined(ee[k])||(G=ee[k].width,X=ee[k].height);else return U;Q=Q.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),F=F.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var ae='<img src="'+F+'" alt="'+Q+'"';return W&&r.helper.isString(W)&&(W=W.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),ae+=' title="'+W+'"'),G&&X&&(G=G==="*"?"auto":G,X=X==="*"?"auto":X,ae+=' width="'+G+'"',ae+=' height="'+X+'"'),ae+=" />",ae}return y=y.replace(C,V),y=y.replace(N,H),y=y.replace(S,V),y=y.replace(x,V),y=y.replace(D,V),y=w.converter._dispatch("images.after",y,E,w),y}),r.subParser("italicsAndBold",function(y,E,w){y=w.converter._dispatch("italicsAndBold.before",y,E,w);function x(S,N,C){return N+S+C}return E.literalMidWordUnderscores?(y=y.replace(/\b___(\S[\s\S]*?)___\b/g,function(S,N){return x(N,"<strong><em>","</em></strong>")}),y=y.replace(/\b__(\S[\s\S]*?)__\b/g,function(S,N){return x(N,"<strong>","</strong>")}),y=y.replace(/\b_(\S[\s\S]*?)_\b/g,function(S,N){return x(N,"<em>","</em>")})):(y=y.replace(/___(\S[\s\S]*?)___/g,function(S,N){return/\S$/.test(N)?x(N,"<strong><em>","</em></strong>"):S}),y=y.replace(/__(\S[\s\S]*?)__/g,function(S,N){return/\S$/.test(N)?x(N,"<strong>","</strong>"):S}),y=y.replace(/_([^\s_][\s\S]*?)_/g,function(S,N){return/\S$/.test(N)?x(N,"<em>","</em>"):S})),E.literalMidWordAsterisks?(y=y.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(S,N,C){return x(C,N+"<strong><em>","</em></strong>")}),y=y.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(S,N,C){return x(C,N+"<strong>","</strong>")}),y=y.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(S,N,C){return x(C,N+"<em>","</em>")})):(y=y.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(S,N){return/\S$/.test(N)?x(N,"<strong><em>","</em></strong>"):S}),y=y.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(S,N){return/\S$/.test(N)?x(N,"<strong>","</strong>"):S}),y=y.replace(/\*([^\s*][\s\S]*?)\*/g,function(S,N){return/\S$/.test(N)?x(N,"<em>","</em>"):S})),y=w.converter._dispatch("italicsAndBold.after",y,E,w),y}),r.subParser("lists",function(y,E,w){function x(C,D){w.gListLevel++,C=C.replace(/\n{2,}$/,`
`),C+="¨0";var H=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,V=/\n[ \t]*\n(?!¨0)/.test(C);return E.disableForced4SpacesIndentedSublists&&(H=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0|\2([*+-]|\d+[.])[ \t]+))/gm),C=C.replace(H,function(U,Q,k,F,G,X,z){z=z&&z.trim()!=="";var W=r.subParser("outdent")(G,E,w),ne="";return X&&E.tasklists&&(ne=' class="task-list-item" style="list-style-type: none;"',W=W.replace(/^[ \t]*\[(x|X| )?]/m,function(){var J='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return z&&(J+=" checked"),J+=">",J})),W=W.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(J){return"¨A"+J}),Q||W.search(/\n{2,}/)>-1?(W=r.subParser("githubCodeBlocks")(W,E,w),W=r.subParser("blockGamut")(W,E,w)):(W=r.subParser("lists")(W,E,w),W=W.replace(/\n$/,""),W=r.subParser("hashHTMLBlocks")(W,E,w),W=W.replace(/\n\n+/g,`

`),V?W=r.subParser("paragraphs")(W,E,w):W=r.subParser("spanGamut")(W,E,w)),W=W.replace("¨A",""),W="<li"+ne+">"+W+`</li>
`,W}),C=C.replace(/¨0/g,""),w.gListLevel--,D&&(C=C.replace(/\s+$/,"")),C}function S(C,D){if(D==="ol"){var H=C.match(/^ *(\d+)\./);if(H&&H[1]!=="1")return' start="'+H[1]+'"'}return""}function N(C,D,H){var V=E.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,U=E.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,Q=D==="ul"?V:U,k="";if(C.search(Q)!==-1)(function G(X){var z=X.search(Q),W=S(C,D);z!==-1?(k+=`

<`+D+W+`>
`+x(X.slice(0,z),!!H)+"</"+D+`>
`,D=D==="ul"?"ol":"ul",Q=D==="ul"?V:U,G(X.slice(z))):k+=`

<`+D+W+`>
`+x(X,!!H)+"</"+D+`>
`})(C);else{var F=S(C,D);k=`

<`+D+F+`>
`+x(C,!!H)+"</"+D+`>
`}return k}return y=w.converter._dispatch("lists.before",y,E,w),y+="¨0",w.gListLevel?y=y.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(C,D,H){var V=H.search(/[*+-]/g)>-1?"ul":"ol";return N(D,V,!0)}):y=y.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(C,D,H,V){var U=V.search(/[*+-]/g)>-1?"ul":"ol";return N(H,U,!1)}),y=y.replace(/¨0/,""),y=w.converter._dispatch("lists.after",y,E,w),y}),r.subParser("metadata",function(y,E,w){if(!E.metadata)return y;y=w.converter._dispatch("metadata.before",y,E,w);function x(S){w.metadata.raw=S,S=S.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),S=S.replace(/\n {4}/g," "),S.replace(/^([\S ]+): +([\s\S]+?)$/gm,function(N,C,D){return w.metadata.parsed[C]=D,""})}return y=y.replace(/^\s*«««+(\S*?)\n([\s\S]+?)\n»»»+\n/,function(S,N,C){return x(C),"¨M"}),y=y.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(S,N,C){return N&&(w.metadata.format=N),x(C),"¨M"}),y=y.replace(/¨M/g,""),y=w.converter._dispatch("metadata.after",y,E,w),y}),r.subParser("outdent",function(y,E,w){return y=w.converter._dispatch("outdent.before",y,E,w),y=y.replace(/^(\t|[ ]{1,4})/gm,"¨0"),y=y.replace(/¨0/g,""),y=w.converter._dispatch("outdent.after",y,E,w),y}),r.subParser("paragraphs",function(y,E,w){y=w.converter._dispatch("paragraphs.before",y,E,w),y=y.replace(/^\n+/g,""),y=y.replace(/\n+$/g,"");for(var x=y.split(/\n{2,}/g),S=[],N=x.length,C=0;C<N;C++){var D=x[C];D.search(/¨(K|G)(\d+)\1/g)>=0?S.push(D):D.search(/\S/)>=0&&(D=r.subParser("spanGamut")(D,E,w),D=D.replace(/^([ \t]*)/g,"<p>"),D+="</p>",S.push(D))}for(N=S.length,C=0;C<N;C++){for(var H="",V=S[C],U=!1;/¨(K|G)(\d+)\1/.test(V);){var Q=RegExp.$1,k=RegExp.$2;Q==="K"?H=w.gHtmlBlocks[k]:U?H=r.subParser("encodeCode")(w.ghCodeBlocks[k].text,E,w):H=w.ghCodeBlocks[k].codeblock,H=H.replace(/\$/g,"$$$$"),V=V.replace(/(\n\n)?¨(K|G)\d+\2(\n\n)?/,H),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(V)&&(U=!0)}S[C]=V}return y=S.join(`
`),y=y.replace(/^\n+/g,""),y=y.replace(/\n+$/g,""),w.converter._dispatch("paragraphs.after",y,E,w)}),r.subParser("runExtension",function(y,E,w,x){if(y.filter)E=y.filter(E,x.converter,w);else if(y.regex){var S=y.regex;S instanceof RegExp||(S=new RegExp(S,"g")),E=E.replace(S,y.replace)}return E}),r.subParser("spanGamut",function(y,E,w){return y=w.converter._dispatch("spanGamut.before",y,E,w),y=r.subParser("codeSpans")(y,E,w),y=r.subParser("escapeSpecialCharsWithinTagAttributes")(y,E,w),y=r.subParser("encodeBackslashEscapes")(y,E,w),y=r.subParser("images")(y,E,w),y=r.subParser("anchors")(y,E,w),y=r.subParser("autoLinks")(y,E,w),y=r.subParser("simplifiedAutoLinks")(y,E,w),y=r.subParser("emoji")(y,E,w),y=r.subParser("underline")(y,E,w),y=r.subParser("italicsAndBold")(y,E,w),y=r.subParser("strikethrough")(y,E,w),y=r.subParser("ellipsis")(y,E,w),y=r.subParser("hashHTMLSpans")(y,E,w),y=r.subParser("encodeAmpsAndAngles")(y,E,w),E.simpleLineBreaks?/\n\n¨K/.test(y)||(y=y.replace(/\n+/g,`<br />
`)):y=y.replace(/  +\n/g,`<br />
`),y=w.converter._dispatch("spanGamut.after",y,E,w),y}),r.subParser("strikethrough",function(y,E,w){function x(S){return E.simplifiedAutoLink&&(S=r.subParser("simplifiedAutoLinks")(S,E,w)),"<del>"+S+"</del>"}return E.strikethrough&&(y=w.converter._dispatch("strikethrough.before",y,E,w),y=y.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(S,N){return x(N)}),y=w.converter._dispatch("strikethrough.after",y,E,w)),y}),r.subParser("stripLinkDefinitions",function(y,E,w){var x=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=¨0))/gm,S=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=¨0)|(?=\n\[))/gm;y+="¨0";var N=function(C,D,H,V,U,Q,k){return D=D.toLowerCase(),y.toLowerCase().split(D).length-1<2?C:(H.match(/^data:.+?\/.+?;base64,/)?w.gUrls[D]=H.replace(/\s/g,""):w.gUrls[D]=r.subParser("encodeAmpsAndAngles")(H,E,w),Q?Q+k:(k&&(w.gTitles[D]=k.replace(/"|'/g,"&quot;")),E.parseImgDimensions&&V&&U&&(w.gDimensions[D]={width:V,height:U}),""))};return y=y.replace(S,N),y=y.replace(x,N),y=y.replace(/¨0/,""),y}),r.subParser("tables",function(y,E,w){if(!E.tables)return y;var x=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|¨0)/gm,S=/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|¨0)/gm;function N(U){return/^:[ \t]*--*$/.test(U)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(U)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(U)?' style="text-align:center;"':""}function C(U,Q){var k="";return U=U.trim(),(E.tablesHeaderId||E.tableHeaderId)&&(k=' id="'+U.replace(/ /g,"_").toLowerCase()+'"'),U=r.subParser("spanGamut")(U,E,w),"<th"+k+Q+">"+U+`</th>
`}function D(U,Q){var k=r.subParser("spanGamut")(U,E,w);return"<td"+Q+">"+k+`</td>
`}function H(U,Q){for(var k=`<table>
<thead>
<tr>
`,F=U.length,G=0;G<F;++G)k+=U[G];for(k+=`</tr>
</thead>
<tbody>
`,G=0;G<Q.length;++G){k+=`<tr>
`;for(var X=0;X<F;++X)k+=Q[G][X];k+=`</tr>
`}return k+=`</tbody>
</table>
`,k}function V(U){var Q,k=U.split(`
`);for(Q=0;Q<k.length;++Q)/^ {0,3}\|/.test(k[Q])&&(k[Q]=k[Q].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(k[Q])&&(k[Q]=k[Q].replace(/\|[ \t]*$/,"")),k[Q]=r.subParser("codeSpans")(k[Q],E,w);var F=k[0].split("|").map(function(ae){return ae.trim()}),G=k[1].split("|").map(function(ae){return ae.trim()}),X=[],z=[],W=[],ne=[];for(k.shift(),k.shift(),Q=0;Q<k.length;++Q)k[Q].trim()!==""&&X.push(k[Q].split("|").map(function(ae){return ae.trim()}));if(F.length<G.length)return U;for(Q=0;Q<G.length;++Q)W.push(N(G[Q]));for(Q=0;Q<F.length;++Q)r.helper.isUndefined(W[Q])&&(W[Q]=""),z.push(C(F[Q],W[Q]));for(Q=0;Q<X.length;++Q){for(var J=[],ee=0;ee<z.length;++ee)r.helper.isUndefined(X[Q][ee]),J.push(D(X[Q][ee],W[ee]));ne.push(J)}return H(z,ne)}return y=w.converter._dispatch("tables.before",y,E,w),y=y.replace(/\\(\|)/g,r.helper.escapeCharactersCallback),y=y.replace(x,V),y=y.replace(S,V),y=w.converter._dispatch("tables.after",y,E,w),y}),r.subParser("underline",function(y,E,w){return E.underline&&(y=w.converter._dispatch("underline.before",y,E,w),E.literalMidWordUnderscores?(y=y.replace(/\b___(\S[\s\S]*?)___\b/g,function(x,S){return"<u>"+S+"</u>"}),y=y.replace(/\b__(\S[\s\S]*?)__\b/g,function(x,S){return"<u>"+S+"</u>"})):(y=y.replace(/___(\S[\s\S]*?)___/g,function(x,S){return/\S$/.test(S)?"<u>"+S+"</u>":x}),y=y.replace(/__(\S[\s\S]*?)__/g,function(x,S){return/\S$/.test(S)?"<u>"+S+"</u>":x})),y=y.replace(/(_)/g,r.helper.escapeCharactersCallback),y=w.converter._dispatch("underline.after",y,E,w)),y}),r.subParser("unescapeSpecialChars",function(y,E,w){return y=w.converter._dispatch("unescapeSpecialChars.before",y,E,w),y=y.replace(/¨E(\d+)E/g,function(x,S){var N=parseInt(S);return String.fromCharCode(N)}),y=w.converter._dispatch("unescapeSpecialChars.after",y,E,w),y}),r.subParser("makeMarkdown.blockquote",function(y,E){var w="";if(y.hasChildNodes())for(var x=y.childNodes,S=x.length,N=0;N<S;++N){var C=r.subParser("makeMarkdown.node")(x[N],E);C!==""&&(w+=C)}return w=w.trim(),w="> "+w.split(`
`).join(`
> `),w}),r.subParser("makeMarkdown.codeBlock",function(y,E){var w=y.getAttribute("language"),x=y.getAttribute("precodenum");return"```"+w+`
`+E.preList[x]+"\n```"}),r.subParser("makeMarkdown.codeSpan",function(y){return"`"+y.innerHTML+"`"}),r.subParser("makeMarkdown.emphasis",function(y,E){var w="";if(y.hasChildNodes()){w+="*";for(var x=y.childNodes,S=x.length,N=0;N<S;++N)w+=r.subParser("makeMarkdown.node")(x[N],E);w+="*"}return w}),r.subParser("makeMarkdown.header",function(y,E,w){var x=new Array(w+1).join("#"),S="";if(y.hasChildNodes()){S=x+" ";for(var N=y.childNodes,C=N.length,D=0;D<C;++D)S+=r.subParser("makeMarkdown.node")(N[D],E)}return S}),r.subParser("makeMarkdown.hr",function(){return"---"}),r.subParser("makeMarkdown.image",function(y){var E="";return y.hasAttribute("src")&&(E+="!["+y.getAttribute("alt")+"](",E+="<"+y.getAttribute("src")+">",y.hasAttribute("width")&&y.hasAttribute("height")&&(E+=" ="+y.getAttribute("width")+"x"+y.getAttribute("height")),y.hasAttribute("title")&&(E+=' "'+y.getAttribute("title")+'"'),E+=")"),E}),r.subParser("makeMarkdown.links",function(y,E){var w="";if(y.hasChildNodes()&&y.hasAttribute("href")){var x=y.childNodes,S=x.length;w="[";for(var N=0;N<S;++N)w+=r.subParser("makeMarkdown.node")(x[N],E);w+="](",w+="<"+y.getAttribute("href")+">",y.hasAttribute("title")&&(w+=' "'+y.getAttribute("title")+'"'),w+=")"}return w}),r.subParser("makeMarkdown.list",function(y,E,w){var x="";if(!y.hasChildNodes())return"";for(var S=y.childNodes,N=S.length,C=y.getAttribute("start")||1,D=0;D<N;++D)if(!(typeof S[D].tagName>"u"||S[D].tagName.toLowerCase()!=="li")){var H="";w==="ol"?H=C.toString()+". ":H="- ",x+=H+r.subParser("makeMarkdown.listItem")(S[D],E),++C}return x+=`
<!-- -->
`,x.trim()}),r.subParser("makeMarkdown.listItem",function(y,E){for(var w="",x=y.childNodes,S=x.length,N=0;N<S;++N)w+=r.subParser("makeMarkdown.node")(x[N],E);return/\n$/.test(w)?w=w.split(`
`).join(`
    `).replace(/^ {4}$/gm,"").replace(/\n\n+/g,`

`):w+=`
`,w}),r.subParser("makeMarkdown.node",function(y,E,w){w=w||!1;var x="";if(y.nodeType===3)return r.subParser("makeMarkdown.txt")(y,E);if(y.nodeType===8)return"<!--"+y.data+`-->

`;if(y.nodeType!==1)return"";var S=y.tagName.toLowerCase();switch(S){case"h1":w||(x=r.subParser("makeMarkdown.header")(y,E,1)+`

`);break;case"h2":w||(x=r.subParser("makeMarkdown.header")(y,E,2)+`

`);break;case"h3":w||(x=r.subParser("makeMarkdown.header")(y,E,3)+`

`);break;case"h4":w||(x=r.subParser("makeMarkdown.header")(y,E,4)+`

`);break;case"h5":w||(x=r.subParser("makeMarkdown.header")(y,E,5)+`

`);break;case"h6":w||(x=r.subParser("makeMarkdown.header")(y,E,6)+`

`);break;case"p":w||(x=r.subParser("makeMarkdown.paragraph")(y,E)+`

`);break;case"blockquote":w||(x=r.subParser("makeMarkdown.blockquote")(y,E)+`

`);break;case"hr":w||(x=r.subParser("makeMarkdown.hr")(y,E)+`

`);break;case"ol":w||(x=r.subParser("makeMarkdown.list")(y,E,"ol")+`

`);break;case"ul":w||(x=r.subParser("makeMarkdown.list")(y,E,"ul")+`

`);break;case"precode":w||(x=r.subParser("makeMarkdown.codeBlock")(y,E)+`

`);break;case"pre":w||(x=r.subParser("makeMarkdown.pre")(y,E)+`

`);break;case"table":w||(x=r.subParser("makeMarkdown.table")(y,E)+`

`);break;case"code":x=r.subParser("makeMarkdown.codeSpan")(y,E);break;case"em":case"i":x=r.subParser("makeMarkdown.emphasis")(y,E);break;case"strong":case"b":x=r.subParser("makeMarkdown.strong")(y,E);break;case"del":x=r.subParser("makeMarkdown.strikethrough")(y,E);break;case"a":x=r.subParser("makeMarkdown.links")(y,E);break;case"img":x=r.subParser("makeMarkdown.image")(y,E);break;default:x=y.outerHTML+`

`}return x}),r.subParser("makeMarkdown.paragraph",function(y,E){var w="";if(y.hasChildNodes())for(var x=y.childNodes,S=x.length,N=0;N<S;++N)w+=r.subParser("makeMarkdown.node")(x[N],E);return w=w.trim(),w}),r.subParser("makeMarkdown.pre",function(y,E){var w=y.getAttribute("prenum");return"<pre>"+E.preList[w]+"</pre>"}),r.subParser("makeMarkdown.strikethrough",function(y,E){var w="";if(y.hasChildNodes()){w+="~~";for(var x=y.childNodes,S=x.length,N=0;N<S;++N)w+=r.subParser("makeMarkdown.node")(x[N],E);w+="~~"}return w}),r.subParser("makeMarkdown.strong",function(y,E){var w="";if(y.hasChildNodes()){w+="**";for(var x=y.childNodes,S=x.length,N=0;N<S;++N)w+=r.subParser("makeMarkdown.node")(x[N],E);w+="**"}return w}),r.subParser("makeMarkdown.table",function(y,E){var w="",x=[[],[]],S=y.querySelectorAll("thead>tr>th"),N=y.querySelectorAll("tbody>tr"),C,D;for(C=0;C<S.length;++C){var H=r.subParser("makeMarkdown.tableCell")(S[C],E),V="---";if(S[C].hasAttribute("style")){var U=S[C].getAttribute("style").toLowerCase().replace(/\s/g,"");switch(U){case"text-align:left;":V=":---";break;case"text-align:right;":V="---:";break;case"text-align:center;":V=":---:";break}}x[0][C]=H.trim(),x[1][C]=V}for(C=0;C<N.length;++C){var Q=x.push([])-1,k=N[C].getElementsByTagName("td");for(D=0;D<S.length;++D){var F=" ";typeof k[D]<"u"&&(F=r.subParser("makeMarkdown.tableCell")(k[D],E)),x[Q].push(F)}}var G=3;for(C=0;C<x.length;++C)for(D=0;D<x[C].length;++D){var X=x[C][D].length;X>G&&(G=X)}for(C=0;C<x.length;++C){for(D=0;D<x[C].length;++D)C===1?x[C][D].slice(-1)===":"?x[C][D]=r.helper.padEnd(x[C][D].slice(-1),G-1,"-")+":":x[C][D]=r.helper.padEnd(x[C][D],G,"-"):x[C][D]=r.helper.padEnd(x[C][D],G);w+="| "+x[C].join(" | ")+` |
`}return w.trim()}),r.subParser("makeMarkdown.tableCell",function(y,E){var w="";if(!y.hasChildNodes())return"";for(var x=y.childNodes,S=x.length,N=0;N<S;++N)w+=r.subParser("makeMarkdown.node")(x[N],E,!0);return w.trim()}),r.subParser("makeMarkdown.txt",function(y){var E=y.nodeValue;return E=E.replace(/ +/g," "),E=E.replace(/¨NBSP;/g," "),E=r.helper.unescapeHTMLEntities(E),E=E.replace(/([*_~|`])/g,"\\$1"),E=E.replace(/^(\s*)>/g,"\\$1>"),E=E.replace(/^#/gm,"\\#"),E=E.replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3"),E=E.replace(/^( {0,3}\d+)\./gm,"$1\\."),E=E.replace(/^( {0,3})([+-])/gm,"$1\\$2"),E=E.replace(/]([\s]*)\(/g,"\\]$1\\("),E=E.replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:"),E});var Y=this;t.exports?t.exports=r:Y.showdown=r}).call(SH)}(hm)),hm.exports}var CH=AH();const kH=Kv(CH),RH=new kH.Converter({tables:!0,strikethrough:!0,emoji:!0,underline:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,openLinksInNewWindow:!0,backslashEscapesHTMLTags:!0,ghCodeBlocks:!0,tasklists:!0});function ze(t){return t?RH.makeHtml(t):""}function NH(t,e,n){return Array.isArray(t)?t.length<e?(console.warn(`Layout ${n}: Content array has ${t.length} items, expected at least ${e}`),!1):!0:(console.warn(`Layout ${n}: Content is not an array`),!1)}const IH=async(t,e,n)=>{let r="";if(!Array.isArray(e)||e.length===0)return console.warn(`Layout ${t}: Empty or invalid content array`),{html:`<div class="layout-error">
                <div class="error-icon">⚠️</div>
                <div class="error-message">No content available</div>
            </div>`};try{switch(t){case 1:r=await h2(e,n);break;case 2:r=await DH(e,n);break;case 3:r=await MH(e,n);break;case 4:r=await PH(e,n);break;case 5:r=await OH(e,n);break;case 6:r=await VH(e,n);break;case 7:r=await LH(e,n);break;case 8:r=await jH(e,n);break;case 9:r=await zH(e,n);break;case 12:r=await UH(e,n);break;case 13:r=await BH(e,n);break;case 14:r=await HH(e,n);break;case 15:r=await $H(e,n);break;case 16:r=await FH(e,n);break;case 17:r=await qH(e,n);break;case 18:r=await GH(e,n);break;default:console.warn(`Layout ${t} not implemented, falling back to layout 1`),r=await h2(e,n)}if(!r||r.trim().length===0)throw new Error("Layout parser returned empty HTML")}catch(s){console.error(`Error parsing layout ${t}:`,s),r=`
            <div class="layout-error">
                <div class="error-icon">⚠️</div>
                <div class="error-message">
                    <strong>Layout Error</strong><br>
                    Unable to render content for layout ${t}
                </div>
                <div class="error-details">
                    ${s instanceof Error?s.message:"Unknown error occurred"}
                </div>
            </div>
        `}return{html:r}};async function h2(t,e){const[n,r,s]=t;let o=`
        <div class="layout-1">
            <div class="layout-header">
                <h2 class="layout-title">${ze(n||"Educational Topic")}</h2>
                <div class="layout-textbar">${ze(r||"Content description")}</div>
            </div>
    `;return Array.isArray(s)&&s.length>0&&(o+='<div class="layout-images">',(await Promise.all(s.map(c=>oi(c).catch(()=>null)))).forEach((c,f)=>{c?o+=`
                    <div class="layout-image-wrapper">
                        <img class="layout-small-image" src="${c}" alt="Illustration ${f+1}" loading="lazy" />
                    </div>
                `:o+=`
                    <div class="layout-image-wrapper">
                        <div class="image-error">
                            <span class="error-icon">⚠️</span>
                            <span>Image ${f+1} unavailable</span>
                        </div>
                    </div>
                `}),o+="</div>"),o+=`
        </div>
    `,o}async function DH(t,e){let n='<div class="layout-2">',r=[];if(t.length>0&&Array.isArray(t[0]))r=t.filter(l=>Array.isArray(l)&&l.length>=2);else for(let l=0;l<t.length;l+=2)l+1<t.length&&r.push([t[l],t[l+1]]);if(r.length===0)return n+=`
            <div class="layout-error">
                <div class="error-icon">⚠️</div>
                <div class="error-message">No image-caption pairs found</div>
            </div>
        `,n+="</div>",n;const s=r.map(async([l,c])=>{try{return{url:await oi(l),caption:c,error:null}}catch(f){return{url:null,caption:c,error:f instanceof Error?f.message:"Unknown error"}}});return(await Promise.all(s)).forEach(({url:l,caption:c,error:f},h)=>{n+=`
            <div class="layout-image-caption">
        `,l?n+=`
                <div class="layout-image-wrapper">
                    <img class="layout-image" src="${l}" alt="Educational image ${h+1}" loading="lazy" />
                </div>
            `:n+=`
                <div class="layout-image-wrapper">
                    <div class="image-error">
                        <div class="error-icon">⚠️</div>
                        <span class="error-message">Image ${h+1} unavailable</span>
                        ${f?`<span class="error-details">${f}</span>`:""}
                    </div>
                </div>
            `,n+=`
                <div class="layout-caption-wrapper">
                    <p class="layout-caption">${ze(c)}</p>
                </div>
            </div>
        `}),n+="</div>",n}async function MH(t,e){const[n,r]=t;let o=`
        <div class="layout-3">
            <div class="layout-diagram-section">
                <div class="diagram-container">
                    <div id="${`mermaid-${e}`}" class="layout-mermaid-enhanced">Loading diagram...</div>
                </div>
            </div>
            <div class="layout-analysis-section">
                <div class="analysis-header">
                    <div class="analysis-icon">🔄</div>
                    <h3 class="analysis-title">Process Analysis</h3>
                </div>
                <div class="layout-description-content">
                    ${ze(r||"")}
                </div>
            </div>
        </div>
    `;try{const c=(await Mp(n)).outerHTML.replace("<svg",'<svg class="flowchart-svg"');o=o.replace("Loading diagram...",c)}catch{o=o.replace("Loading diagram...",`<div class="mermaid-error">
                <div class="error-icon">⚠️</div>
                <div class="error-text">Unable to render process diagram</div>
                <div class="error-details">Please try refreshing or contact support</div>
            </div>`)}return o}async function PH(t,e){const[n,r]=t;let o=`
        <div class="layout-4">
            <div class="layout-mindmap-hero">
                <div class="mindmap-container">
                    <div id="${`mermaid-${e}`}" class="layout-mermaid-large">Loading mindmap...</div>
                </div>
            </div>
            <div class="layout-concept-analysis">
                <div class="concept-header">
                    <div class="concept-icon">🧠</div>
                    <h3 class="concept-title">Concept Breakdown</h3>
                </div>
                <div class="concept-description">
                    ${ze(r||"")}
                </div>
                <div class="concept-callout">
                    <div class="callout-icon">💡</div>
                    <span class="callout-text">Explore the connections between different concepts in the mindmap above</span>
                </div>
            </div>
        </div>
    `;try{const c=(await Mp(n)).outerHTML.replace("<svg",'<svg class="mindmap-svg"').replace(/width="[^"]*"/,'width="100%"').replace(/height="[^"]*"/,'height="auto"');o=o.replace("Loading mindmap...",c)}catch{o=o.replace("Loading mindmap...",`<div class="mermaid-error">
                <div class="error-icon">🧠</div>
                <div class="error-text">Unable to render mindmap</div>
                <div class="error-details">Mindmap visualization temporarily unavailable</div>
            </div>`)}return o}async function OH(t,e){const[n,r]=t;let o=`
        <div class="layout-5">
            <div class="layout-chart-section">
                <div class="chart-container">
                    <div id="${`mermaid-${e}`}" class="layout-mermaid-chart">Loading piechart...</div>
                </div>
            </div>
            <div class="layout-analysis-section">
                <div class="analysis-header">
                    <div class="analysis-icon">📊</div>
                    <h3 class="analysis-title">Data Analysis</h3>
                </div>
                <div class="layout-description-content">
                    ${ze(r||"")}
                </div>
            </div>
        </div>
    `;try{const c=(await Mp(n)).outerHTML.replace("<svg",'<svg class="piechart-svg"');o=o.replace("Loading piechart...",c)}catch(l){console.error("Layout 5 mermaid error:",l),o=o.replace("Loading piechart...",`<div class="mermaid-error">
                <div class="error-icon">📊</div>
                <div class="error-text">Unable to render data visualization</div>
                <div class="error-details">Chart data temporarily unavailable</div>
            </div>`)}return o}async function VH(t,e){const[n,r]=t;let o=`
        <div class="layout-6">
            <div class="layout-quadrant-section">
                <div class="quadrant-container">
                    <div id="${`mermaid-${e}`}" class="layout-mermaid-quadrant">Loading quadrant chart...</div>
                </div>
            </div>
            <div class="layout-framework-section">
                <div class="framework-header">
                    <div class="framework-icon">🎯</div>
                    <h3 class="framework-title">Strategic Framework</h3>
                </div>
                <div class="layout-description-content">
                    ${ze(r||"")}
                </div>
                <div class="framework-callout">
                    <div class="callout-icon">💡</div>
                    <span class="callout-text">Use the quadrant analysis to understand positioning and priorities</span>
                </div>
            </div>
        </div>
    `;try{const c=(await Mp(n)).outerHTML.replace("<svg",'<svg class="quadrant-svg"');o=o.replace("Loading quadrant chart...",c)}catch(l){console.error("Layout 6 mermaid error:",l),o=o.replace("Loading quadrant chart...",`<div class="mermaid-error">
                <div class="error-icon">🎯</div>
                <div class="error-text">Unable to render strategic framework</div>
                <div class="error-details">Quadrant analysis temporarily unavailable</div>
            </div>`)}return o}async function LH(t,e){const[n,r,s,o,l]=t,c=`img-${e}`;try{const f=await oi(n);return`
            <div class="layout-7">
                <div class="layout-hero-header">
                    <h2 class="layout-hero-title">${ze(r||"Educational Topic")}</h2>
                </div>
                <div class="layout-content-grid">
                    <div class="layout-visual-section">
                        <div class="layout-image-container">
                            <img id="${c}" class="layout-featured-image" src="${f}" alt="Featured Visual" />
                        </div>
                    </div>
                    <div class="layout-content-section">
                        <div class="layout-educational-content">
                            ${s?`<div class="layout-paragraph-card">
                                        <div class="paragraph-icon">📚</div>
                                        <p class="layout-paragraph">${ze(s)}</p>
                                    </div>`:""}
                            ${o?`<div class="layout-paragraph-card">
                                        <div class="paragraph-icon">🔍</div>
                                        <p class="layout-paragraph">${ze(o)}</p>
                                    </div>`:""}
                            ${l?`<div class="layout-paragraph-card">
                                        <div class="paragraph-icon">💡</div>
                                        <p class="layout-paragraph">${ze(l)}</p>
                                    </div>`:""}
                        </div>
                    </div>
                </div>
            </div>
        `}catch{return`
            <div class="layout-7">
                <div class="layout-hero-header">
                    <h2 class="layout-hero-title">${ze(r||"Educational Topic")}</h2>
                </div>
                <div class="layout-content-grid">
                    <div class="layout-visual-section">
                        <div class="layout-image-container">
                            <div class="image-error">
                                <div class="error-icon">⚠️</div>
                                <span>Featured image unavailable</span>
                            </div>
                        </div>
                    </div>
                    <div class="layout-content-section">
                        <div class="layout-educational-content">
                            ${s?`<div class="layout-paragraph-card">
                                        <div class="paragraph-icon">📚</div>
                                        <p class="layout-paragraph">${ze(s)}</p>
                                    </div>`:""}
                            ${o?`<div class="layout-paragraph-card">
                                        <div class="paragraph-icon">🔍</div>
                                        <p class="layout-paragraph">${ze(o)}</p>
                                    </div>`:""}
                            ${l?`<div class="layout-paragraph-card">
                                        <div class="paragraph-icon">💡</div>
                                        <p class="layout-paragraph">${ze(l)}</p>
                                    </div>`:""}
                        </div>
                    </div>
                </div>
            </div>
        `}}async function jH(t,e){const[n,r,s,o]=t,l=`img-main-${e}`;try{const c=await oi(n);let f=`
            <div class="layout-8">
                <div class="layout-primary-content">
                    <div class="layout-content-header">
                        <h2 class="layout-title">${ze(r||"Educational Topic")}</h2>
                    </div>
                    <div class="layout-explanation">
                        ${ze(s||"")}
                    </div>
        `;return Array.isArray(o)&&o.length>0&&(f+='<div class="layout-thumbnail-grid">',(await Promise.all(o.map(p=>oi(p).catch(()=>null)))).forEach((p,v)=>{p?f+=`
                        <div class="layout-thumbnail-wrapper">
                            <img class="layout-thumbnail-image" src="${p}" alt="Detail ${v+1}" loading="lazy" />
                        </div>
                    `:f+=`
                        <div class="layout-thumbnail-wrapper">
                            <div class="thumbnail-error">
                                <span>⚠️</span>
                            </div>
                        </div>
                    `}),f+="</div>"),f+=`
                </div>
                <div class="layout-hero-visual">
                    <img id="${l}" class="layout-hero-image" src="${c}" alt="Main Visual" loading="lazy" />
                </div>
            </div>
        `,f}catch(c){console.error("Layout 8 error:",c);let f=`
            <div class="layout-8">
                <div class="layout-primary-content">
                    <div class="layout-content-header">
                        <h2 class="layout-title">${ze(r||"Educational Topic")}</h2>
                    </div>
                    <div class="layout-explanation">
                        ${ze(s||"")}
                    </div>
        `;return Array.isArray(o)&&o.length>0&&(f+=`
                <div class="layout-thumbnail-grid">
                    ${o.map((h,p)=>`
                        <div class="layout-thumbnail-wrapper">
                            <div class="thumbnail-error">
                                <span class="error-icon">⚠️</span>
                                <span class="error-text">Error ${p+1}</span>
                            </div>
                        </div>
                    `).join("")}
                </div>
            `),f+=`
                </div>
                <div class="layout-hero-visual">
                    <div class="image-error">
                        <div class="error-icon">⚠️</div>
                        <span>Main image unavailable</span>
                    </div>
                </div>
            </div>
        `,f}}async function zH(t,e){if(!NH(t,2,9))return`<div class="layout-error">
            <div class="error-icon">⚠️</div>
            <div class="error-message">Invalid content structure for video layout</div>
        </div>`;const[n,r]=t;let o=`
        <div class="layout-9">
            <div class="layout-video-section">
                <div class="video-header">
                    <div class="video-icon">🎥</div>
                    <h3 class="video-title">Educational Video</h3>
                </div>
                <div id="${`video-${e}`}" class="layout-video-container">Loading video...</div>
            </div>
            <div class="layout-video-context">
                <div class="context-header">
                    <div class="context-icon">📝</div>
                    <h4 class="context-title">Video Context</h4>
                </div>
                <div class="layout-video-caption">
                    ${ze(r||"Educational video content")}
                </div>
            </div>
        </div>
    `;try{const l=await rN(n),f=`
            <div class="video-embed-wrapper">
                <iframe class="video-embed" 
                        src="${iN(l)}" 
                        frameborder="0" 
                        allowfullscreen
                        title="Educational Video">
                </iframe>
            </div>
        `;o=o.replace("Loading video...",f)}catch(l){console.error("Layout 9 video error:",l),o=o.replace("Loading video...",`
            <div class="video-error">
                <div class="error-icon">🎥</div>
                <div class="error-text">Video temporarily unavailable</div>
                <div class="error-details">Please try again later or check your connection</div>
            </div>
        `)}return o}async function UH(t,e){const[n,r]=t,s=`illustration-${e}`;try{const o=await oi(n);let l=`
            <div class="layout-12">
                <div class="layout-hero-section">
                    <div class="layout-central-visual">
                        <img id="${s}" class="layout-hero-image" src="${o}" alt="Educational Illustration" />
                    </div>
                </div>
                <div class="layout-content-section">
                    <div class="layout-educational-content">
        `;return typeof r=="string"?l+=`
                <div class="layout-text-content">
                    <p class="layout-description">${ze(r)}</p>
                </div>
            `:Array.isArray(r)&&(l+='<div class="layout-points-grid">',r.forEach((c,f)=>{const h=c.match(new RegExp("^(\\p{Emoji}|\\p{Symbol})\\s+(.+)$","u")),p=h?h[1]:m2(f),v=h?h[2]:c;l+=`
                    <div class="layout-educational-point">
                        <div class="layout-point-icon">${p}</div>
                        <div class="layout-point-content">
                            <span class="layout-point-text">${ze(v)}</span>
                        </div>
                    </div>
                `}),l+="</div>"),l+=`
                    </div>
                </div>
            </div>
        `,l}catch(o){console.error("Layout 12 error:",o);let l=`
            <div class="layout-12">
                <div class="layout-hero-section">
                    <div class="layout-central-visual">
                        <div class="image-error">
                            <div class="error-icon">⚠️</div>
                            <span>Unable to load illustration</span>
                        </div>
                    </div>
                </div>
                <div class="layout-content-section">
                    <div class="layout-educational-content">
        `;return typeof r=="string"?l+=`
                <div class="layout-text-content">
                    <p class="layout-description">${ze(r)}</p>
                </div>
            `:Array.isArray(r)&&(l+='<div class="layout-points-grid">',r.forEach((c,f)=>{const h=c.match(new RegExp("^(\\p{Emoji}|\\p{Symbol})\\s+(.+)$","u")),p=h?h[1]:m2(f),v=h?h[2]:c;l+=`
                    <div class="layout-educational-point">
                        <div class="layout-point-icon">${p}</div>
                        <div class="layout-point-content">
                            <span class="layout-point-text">${ze(v)}</span>
                        </div>
                    </div>
                `}),l+="</div>"),l+=`
                    </div>
                </div>
            </div>
        `,l}}function m2(t){const e=["💡","🔍","⚡","🎯","🚀","✨","🎨","🔧","📊","🌟"];return e[t%e.length]}async function BH(t,e){const[n,r,s]=t,o=`video-${e}`;try{const l=await rN(s),c=iN(l);return`
            <div class="layout-13">
                <div class="layout-left">
                    <h2 class="layout-title">${ze(n||"Title")}</h2>
                    <div class="layout-text">${ze(r||"")}</div>
                </div>
                <div class="layout-right">
                    <div id="${o}" class="layout-video">
                        <iframe src="${c}" frameborder="0" allowfullscreen></iframe>
                    </div>
                </div>
            </div>
        `}catch{return`
            <div class="layout-13">
                <div class="layout-left">
                    <h2 class="layout-title">${ze(n||"Title")}</h2>
                    <div class="layout-text">${ze(r||"")}</div>
                </div>
                <div class="layout-right">
                    <div id="${o}" class="layout-video">
                        <div class="video-error">
                            <div class="error-icon">⚠️</div>
                            <span>Video unavailable</span>
                        </div>
                    </div>
                </div>
            </div>
        `}}async function HH(t,e){let n='<div class="layout-14">';for(let r=0;r<t.length;r+=2){const s=t[r],o=t[r+1];if(s&&o){const l=r/2,c=l%2===0;try{const f=await oi(s);n+=`
                    <div class="layout-section ${c?"layout-section-normal":"layout-section-reverse"}">
                        <div class="layout-section-image">
                            <img class="layout-large-image" src="${f}" alt="Section ${l+1}" />
                        </div>
                        <div class="layout-section-content">
                            <div class="layout-text">${ze(o)}</div>
                        </div>
                    </div>
                `}catch{n+=`
                    <div class="layout-section ${c?"layout-section-normal":"layout-section-reverse"}">
                        <div class="layout-section-image">
                            <div class="image-error">
                                <div class="error-icon">⚠️</div>
                                <span>Section image unavailable</span>
                            </div>
                        </div>
                        <div class="layout-section-content">
                            <div class="layout-text">${ze(o)}</div>
                        </div>
                    </div>
                `}}}return n+="</div>",n}async function $H(t,e){let n='<div class="layout-15"><div class="layout-15-container">';for(let r=0;r<t.length;r+=3){const s=t[r],o=t[r+1],l=t[r+2];if(s&&o&&l)try{const c=await oi(o);n+=`
                    <div class="layout-timeline-item">
                        <div class="layout-timeline-date">${s}</div>
                        <img class="layout-timeline-image" src="${c}" alt="Timeline event" />
                        <div class="layout-timeline-content">
                            <div class="layout-timeline-text">${ze(l)}</div>
                        </div>
                    </div>
                `}catch{n+=`
                    <div class="layout-timeline-item">
                        <div class="layout-timeline-date">${s}</div>
                        <div class="image-error">
                            <div class="error-icon">⚠️</div>
                            <span>Timeline image unavailable</span>
                        </div>
                        <div class="layout-timeline-content">
                            <div class="layout-timeline-text">${ze(l)}</div>
                        </div>
                    </div>
                `}}return n+="</div></div>",n}async function FH(t,e){let n='<div class="layout-16">';for(let r=0;r<t.length;r+=3){const s=t[r],o=t[r+1],l=t[r+2];if(s&&o&&l)try{const c=await oi(o);n+=`
                    <div class="layout-card">
                        <h3 class="layout-card-title">${ze(s)}</h3>
                        <img class="layout-card-image" src="${c}" alt="${s}" />
                        <p class="layout-card-description">${ze(l)}</p>
                    </div>
                `}catch{n+=`
                    <div class="layout-card">
                        <h3 class="layout-card-title">${ze(s)}</h3>
                        <div class="image-error">Error loading image</div>
                        <p class="layout-card-description">${ze(l)}</p>
                    </div>
                `}}return n+="</div>",n}async function qH(t,e){const[n,r,s,o,l,c,f]=t;try{const h=await oi(o),p=L=>{let j="javascript",$=(L||"").toString();if($.startsWith("```")){const Y=$.match(/```(\w+)?\n?([\s\S]*?)\n?```$/);Y?(Y[1]&&(j=Y[1]),$=Y[2]||""):$=$.replace(/^```\w*\n?/,"").replace(/\n?```$/,"")}else $.includes("def ")||$.includes("import ")||$.includes("print(")?j="python":$.includes("function ")||$.includes("const ")||$.includes("let ")?j="javascript":$.includes("public class ")||$.includes("System.out.println")?j="java":$.includes("#include")||$.includes("int main")?j="cpp":($.includes("SELECT ")||$.includes("FROM "))&&(j="sql");return(!$||$.trim()==="")&&($="// No code provided"),{lang:j,cleanCode:$}},{lang:v,cleanCode:b}=p(r),{lang:R,cleanCode:M}=p(c);return`
            <div class="layout-17">
                <h2 class="layout-title">${ze(n||"Code Tutorial")}</h2>
                
                <div class="layout-code-section">
                    <pre class="layout-code-block language-${v}"><code class="language-${v}">${b}</code></pre>
                    <div class="layout-code-explanation">${ze(s||"")}</div>
                </div>
                
                <div class="layout-diagram-section">
                    <img class="layout-diagram-image" src="${h}" alt="Architecture Diagram" />
                    <div class="layout-implementation-explanation">${ze(l||"")}</div>
                </div>
                
                <div class="layout-code-section">
                    <pre class="layout-code-block language-${R}"><code class="language-${R}">${M}</code></pre>
                    <div class="layout-code-explanation">${ze(f||"")}</div>
                </div>
            </div>
        `}catch{return'<div class="layout-17"><div class="error-content">Error loading tutorial content</div></div>'}}async function GH(t,e){const[n,r,s,o,l,c]=t;try{const f=await oi(l),h=R=>{let M="javascript",O=(R||"").toString();if(O.startsWith("```")){const L=O.match(/```(\w+)?\n?([\s\S]*?)\n?```$/);L?(L[1]&&(M=L[1]),O=L[2]||""):O=O.replace(/^```\w*\n?/,"").replace(/\n?```$/,"")}else O.includes("def ")||O.includes("import ")||O.includes("print(")?M="python":O.includes("function ")||O.includes("const ")||O.includes("let ")?M="javascript":O.includes("public class ")||O.includes("System.out.println")?M="java":O.includes("#include")||O.includes("int main")?M="cpp":O.includes("SELECT ")||O.includes("FROM ")?M="sql":(O.includes("curl ")||O.includes("GET ")||O.includes("POST "))&&(M="bash");return(!O||O.trim()==="")&&(O="// No code provided"),{lang:M,cleanCode:O}},{lang:p,cleanCode:v}=h(r);return`
            <div class="layout-18">
                <h2 class="layout-title">${ze(n||"API Documentation")}</h2>
                
                <div class="layout-api-section">
                    <div class="layout-code-container">
                        <pre class="layout-code-block language-${p}"><code class="language-${p}">${v}</code></pre>
                    </div>
                    <div class="layout-documentation">${ze(s||"")}</div>
                </div>
                
                <div class="layout-usage-section">
                    <h3 class="layout-subtitle">Usage Examples</h3>
                    <div class="layout-usage-examples">${ze(o||"")}</div>
                </div>
                
                <div class="layout-diagram-section">
                    <img class="layout-api-diagram" src="${f}" alt="API Flow Diagram" />
                    <div class="layout-best-practices">
                        <h3 class="layout-subtitle">Best Practices</h3>
                        ${ze(c||"")}
                    </div>
                </div>
            </div>
        `}catch{return'<div class="layout-18"><div class="error-content">Error loading documentation content</div></div>'}}const sN=B.createContext(null),vb=(t,e,n,r,s,o,l,c,f,h,p,v,b,R,M,O,L)=>{console.log(1);const j=s.find(w=>w.id===e);if(!j)return null;console.log(2);const $=j.data.tokenColors||{};if(console.log(3),!v){const w=t.myConcept||t.word;if($[w])return console.log(`Token "${w}" is already colored, ignoring click`),null}console.log(4);let Y;r==="staticEditable"?Y=wT():Y=f?QO(f):wT();let y=null;if(v)y=b;else{const w={...$};t.myConcept?w[t.myConcept]=Y:w[t.word]=Y,o(N=>N.map(C=>C.id===e?{...C,data:{...C.data,tokenColors:w}}:C));const x=ZO(n);y=tV(x,t.myConcept||t.word,"Loading...","",Y,r,e);const S=nV(e,y.id,Y,p);l([{type:"add",item:y}]),c([{type:"add",item:S}])}y&&(y.data.isLoading=!0,y.data.previousNode=e),v&&o(w=>w.map(x=>x.id===y?.id?{...x,data:{...y.data}}:x));const E=O?O():[];return _H(t.myConcept||t.word,h||"",R||"default",E).then(async w=>{console.log("AI Response received:",w),console.log("Selected layout:",w.layout),console.log("Content array:",w.content),L&&L(w.layout);const{html:x}=await IH(w.layout,w.content,y?.id||"");if(console.log("Layout HTML generated (first 500 chars):",x.substring(0,500)),console.log("Layout HTML full length:",x.length),o(S=>S.map(N=>{if(N.id===y?.id){const C={...N,data:{...N.data,title:w.title,full_text:w.fullText,suggestions:w.suggestions,layout:w.layout,contents:[x],isLoading:!1,icon:w.icon}};return console.log("Updated node data:",C.data),C}return N})),M)try{await M()}catch(S){console.error("Error saving new node content:",S)}}).catch(async w=>{if(console.error("Error generating node content:",w),o(x=>x.map(S=>S.id===y?.id?{...S,data:{...S.data,title:t.word,full_text:t.word,suggestions:[],layout:1,contents:[`<div class="error-content">Failed to load content for "${t.word}"</div>`],isLoading:!1,icon:"❌"}}:S)),M)try{await M()}catch(x){console.error("Error saving new node content after error:",x)}}),Y},KH=({children:t,nodes:e,onNodesChange:n,onEdgesChange:r,setNodes:s,saveCallback:o,getLastTwoLayouts:l,addLayout:c})=>{const f=(h,p,v,b,R,M,O,L,j,$)=>vb(h,p,v,b,e,s,n,r,R,M,O,L,j,$,o,l,c);return A.jsx(sN.Provider,{value:{handleTokenClick:f,setNodes:s},children:t})},YH=()=>{const t=B.useContext(sN);if(!t)throw new Error("useTokenInteraction must be used within a TokenInteractionProvider");return t};function XH({title:t,titleId:e,...n},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?B.createElement("title",{id:e},t):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const WH=B.forwardRef(XH);function QH({title:t,titleId:e,...n},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?B.createElement("title",{id:e},t):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const ZH=B.forwardRef(QH);function JH({title:t,titleId:e,...n},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?B.createElement("title",{id:e},t):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const e$=B.forwardRef(JH);function t$({title:t,titleId:e,...n},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?B.createElement("title",{id:e},t):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const n$=B.forwardRef(t$);function r$({title:t,titleId:e,...n},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?B.createElement("title",{id:e},t):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const i$=B.forwardRef(r$);function s$({title:t,titleId:e,...n},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?B.createElement("title",{id:e},t):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const a$=B.forwardRef(s$);function o$({title:t,titleId:e,...n},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?B.createElement("title",{id:e},t):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const l$=B.forwardRef(o$),_b=B.createContext({});function bb(t){const e=B.useRef(null);return e.current===null&&(e.current=t()),e.current}const wb=typeof window<"u",aN=wb?B.useLayoutEffect:B.useEffect,Pp=B.createContext(null);function Eb(t,e){t.indexOf(e)===-1&&t.push(e)}function xb(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Cs=(t,e,n)=>n>e?e:n<t?t:n;let Tb=()=>{};const ks={},oN=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function lN(t){return typeof t=="object"&&t!==null}const uN=t=>/^0[^.\s]+$/u.test(t);function Sb(t){let e;return()=>(e===void 0&&(e=t()),e)}const Fr=t=>t,u$=(t,e)=>n=>e(t(n)),cf=(...t)=>t.reduce(u$),Od=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Ab{constructor(){this.subscriptions=[]}add(e){return Eb(this.subscriptions,e),()=>xb(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let o=0;o<s;o++){const l=this.subscriptions[o];l&&l(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ji=t=>t*1e3,zi=t=>t/1e3;function cN(t,e){return e?t*(1e3/e):0}const dN=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,c$=1e-7,d$=12;function f$(t,e,n,r,s){let o,l,c=0;do l=e+(n-e)/2,o=dN(l,r,s)-t,o>0?n=l:e=l;while(Math.abs(o)>c$&&++c<d$);return l}function df(t,e,n,r){if(t===e&&n===r)return Fr;const s=o=>f$(o,0,1,t,n);return o=>o===0||o===1?o:dN(s(o),e,r)}const fN=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,hN=t=>e=>1-t(1-e),mN=df(.33,1.53,.69,.99),Cb=hN(mN),pN=fN(Cb),gN=t=>(t*=2)<1?.5*Cb(t):.5*(2-Math.pow(2,-10*(t-1))),kb=t=>1-Math.sin(Math.acos(t)),yN=hN(kb),vN=fN(kb),h$=df(.42,0,1,1),m$=df(0,0,.58,1),_N=df(.42,0,.58,1),p$=t=>Array.isArray(t)&&typeof t[0]!="number",bN=t=>Array.isArray(t)&&typeof t[0]=="number",g$={linear:Fr,easeIn:h$,easeInOut:_N,easeOut:m$,circIn:kb,circInOut:vN,circOut:yN,backIn:Cb,backInOut:pN,backOut:mN,anticipate:gN},y$=t=>typeof t=="string",p2=t=>{if(bN(t)){Tb(t.length===4);const[e,n,r,s]=t;return df(e,n,r,s)}else if(y$(t))return g$[t];return t},Kh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function v$(t,e){let n=new Set,r=new Set,s=!1,o=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function f(p){l.has(p)&&(h.schedule(p),t()),p(c)}const h={schedule:(p,v=!1,b=!1)=>{const M=b&&s?n:r;return v&&l.add(p),M.has(p)||M.add(p),p},cancel:p=>{r.delete(p),l.delete(p)},process:p=>{if(c=p,s){o=!0;return}s=!0,[n,r]=[r,n],n.forEach(f),n.clear(),s=!1,o&&(o=!1,h.process(p))}};return h}const _$=40;function wN(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=Kh.reduce((Y,y)=>(Y[y]=v$(o),Y),{}),{setup:c,read:f,resolveKeyframes:h,preUpdate:p,update:v,preRender:b,render:R,postRender:M}=l,O=()=>{const Y=ks.useManualTiming?s.timestamp:performance.now();n=!1,ks.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(Y-s.timestamp,_$),1)),s.timestamp=Y,s.isProcessing=!0,c.process(s),f.process(s),h.process(s),p.process(s),v.process(s),b.process(s),R.process(s),M.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(O))},L=()=>{n=!0,r=!0,s.isProcessing||t(O)};return{schedule:Kh.reduce((Y,y)=>{const E=l[y];return Y[y]=(w,x=!1,S=!1)=>(n||L(),E.schedule(w,x,S)),Y},{}),cancel:Y=>{for(let y=0;y<Kh.length;y++)l[Kh[y]].cancel(Y)},state:s,steps:l}}const{schedule:Tt,cancel:Ra,state:En,steps:gy}=wN(typeof requestAnimationFrame<"u"?requestAnimationFrame:Fr,!0);let mm;function b$(){mm=void 0}const nr={now:()=>(mm===void 0&&nr.set(En.isProcessing||ks.useManualTiming?En.timestamp:performance.now()),mm),set:t=>{mm=t,queueMicrotask(b$)}},EN=t=>e=>typeof e=="string"&&e.startsWith(t),Rb=EN("--"),w$=EN("var(--"),Nb=t=>w$(t)?E$.test(t.split("/*")[0].trim()):!1,E$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Mu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Vd={...Mu,transform:t=>Cs(0,1,t)},Yh={...Mu,default:1},ud=t=>Math.round(t*1e5)/1e5,Ib=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function x$(t){return t==null}const T$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Db=(t,e)=>n=>!!(typeof n=="string"&&T$.test(n)&&n.startsWith(t)||e&&!x$(n)&&Object.prototype.hasOwnProperty.call(n,e)),xN=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,o,l,c]=r.match(Ib);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},S$=t=>Cs(0,255,t),yy={...Mu,transform:t=>Math.round(S$(t))},xo={test:Db("rgb","red"),parse:xN("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+yy.transform(t)+", "+yy.transform(e)+", "+yy.transform(n)+", "+ud(Vd.transform(r))+")"};function A$(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Av={test:Db("#"),parse:A$,transform:xo.transform},ff=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ra=ff("deg"),Ui=ff("%"),Oe=ff("px"),C$=ff("vh"),k$=ff("vw"),g2={...Ui,parse:t=>Ui.parse(t)/100,transform:t=>Ui.transform(t*100)},Zl={test:Db("hsl","hue"),parse:xN("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ui.transform(ud(e))+", "+Ui.transform(ud(n))+", "+ud(Vd.transform(r))+")"},Wt={test:t=>xo.test(t)||Av.test(t)||Zl.test(t),parse:t=>xo.test(t)?xo.parse(t):Zl.test(t)?Zl.parse(t):Av.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?xo.transform(t):Zl.transform(t),getAnimatableNone:t=>{const e=Wt.parse(t);return e.alpha=0,Wt.transform(e)}},R$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function N$(t){return isNaN(t)&&typeof t=="string"&&(t.match(Ib)?.length||0)+(t.match(R$)?.length||0)>0}const TN="number",SN="color",I$="var",D$="var(",y2="${}",M$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ld(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let o=0;const c=e.replace(M$,f=>(Wt.test(f)?(r.color.push(o),s.push(SN),n.push(Wt.parse(f))):f.startsWith(D$)?(r.var.push(o),s.push(I$),n.push(f)):(r.number.push(o),s.push(TN),n.push(parseFloat(f))),++o,y2)).split(y2);return{values:n,split:c,indexes:r,types:s}}function AN(t){return Ld(t).values}function CN(t){const{split:e,types:n}=Ld(t),r=e.length;return s=>{let o="";for(let l=0;l<r;l++)if(o+=e[l],s[l]!==void 0){const c=n[l];c===TN?o+=ud(s[l]):c===SN?o+=Wt.transform(s[l]):o+=s[l]}return o}}const P$=t=>typeof t=="number"?0:Wt.test(t)?Wt.getAnimatableNone(t):t;function O$(t){const e=AN(t);return CN(t)(e.map(P$))}const Na={test:N$,parse:AN,createTransformer:CN,getAnimatableNone:O$};function vy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function V$({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,o=0,l=0;if(!e)s=o=l=n;else{const c=n<.5?n*(1+e):n+e-n*e,f=2*n-c;s=vy(f,c,t+1/3),o=vy(f,c,t),l=vy(f,c,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:r}}function Xm(t,e){return n=>n>0?e:t}const kt=(t,e,n)=>t+(e-t)*n,_y=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},L$=[Av,xo,Zl],j$=t=>L$.find(e=>e.test(t));function v2(t){const e=j$(t);if(!e)return!1;let n=e.parse(t);return e===Zl&&(n=V$(n)),n}const _2=(t,e)=>{const n=v2(t),r=v2(e);if(!n||!r)return Xm(t,e);const s={...n};return o=>(s.red=_y(n.red,r.red,o),s.green=_y(n.green,r.green,o),s.blue=_y(n.blue,r.blue,o),s.alpha=kt(n.alpha,r.alpha,o),xo.transform(s))},Cv=new Set(["none","hidden"]);function z$(t,e){return Cv.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function U$(t,e){return n=>kt(t,e,n)}function Mb(t){return typeof t=="number"?U$:typeof t=="string"?Nb(t)?Xm:Wt.test(t)?_2:$$:Array.isArray(t)?kN:typeof t=="object"?Wt.test(t)?_2:B$:Xm}function kN(t,e){const n=[...t],r=n.length,s=t.map((o,l)=>Mb(o)(o,e[l]));return o=>{for(let l=0;l<r;l++)n[l]=s[l](o);return n}}function B$(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Mb(t[s])(t[s],e[s]));return s=>{for(const o in r)n[o]=r[o](s);return n}}function H$(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],l=t.indexes[o][r[o]],c=t.values[l]??0;n[s]=c,r[o]++}return n}const $$=(t,e)=>{const n=Na.createTransformer(e),r=Ld(t),s=Ld(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Cv.has(t)&&!s.values.length||Cv.has(e)&&!r.values.length?z$(t,e):cf(kN(H$(r,s),s.values),n):Xm(t,e)};function RN(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?kt(t,e,n):Mb(t)(t,e)}const F$=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Tt.update(e,n),stop:()=>Ra(e),now:()=>En.isProcessing?En.timestamp:nr.now()}},NN=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)r+=Math.round(t(o/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Wm=2e4;function Pb(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Wm;)e+=n,r=t.next(e);return e>=Wm?1/0:e}function q$(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(Pb(r),Wm);return{type:"keyframes",ease:o=>r.next(s*o).value/e,duration:zi(s)}}const G$=5;function IN(t,e,n){const r=Math.max(e-G$,0);return cN(n-t(r),e-r)}const Ot={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},by=.001;function K$({duration:t=Ot.duration,bounce:e=Ot.bounce,velocity:n=Ot.velocity,mass:r=Ot.mass}){let s,o,l=1-e;l=Cs(Ot.minDamping,Ot.maxDamping,l),t=Cs(Ot.minDuration,Ot.maxDuration,zi(t)),l<1?(s=h=>{const p=h*l,v=p*t,b=p-n,R=kv(h,l),M=Math.exp(-v);return by-b/R*M},o=h=>{const v=h*l*t,b=v*n+n,R=Math.pow(l,2)*Math.pow(h,2)*t,M=Math.exp(-v),O=kv(Math.pow(h,2),l);return(-s(h)+by>0?-1:1)*((b-R)*M)/O}):(s=h=>{const p=Math.exp(-h*t),v=(h-n)*t+1;return-by+p*v},o=h=>{const p=Math.exp(-h*t),v=(n-h)*(t*t);return p*v});const c=5/t,f=X$(s,o,c);if(t=ji(t),isNaN(f))return{stiffness:Ot.stiffness,damping:Ot.damping,duration:t};{const h=Math.pow(f,2)*r;return{stiffness:h,damping:l*2*Math.sqrt(r*h),duration:t}}}const Y$=12;function X$(t,e,n){let r=n;for(let s=1;s<Y$;s++)r=r-t(r)/e(r);return r}function kv(t,e){return t*Math.sqrt(1-e*e)}const W$=["duration","bounce"],Q$=["stiffness","damping","mass"];function b2(t,e){return e.some(n=>t[n]!==void 0)}function Z$(t){let e={velocity:Ot.velocity,stiffness:Ot.stiffness,damping:Ot.damping,mass:Ot.mass,isResolvedFromDuration:!1,...t};if(!b2(t,Q$)&&b2(t,W$))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,o=2*Cs(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Ot.mass,stiffness:s,damping:o}}else{const n=K$(t);e={...e,...n,mass:Ot.mass},e.isResolvedFromDuration=!0}return e}function Qm(t=Ot.visualDuration,e=Ot.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],c={done:!1,value:o},{stiffness:f,damping:h,mass:p,duration:v,velocity:b,isResolvedFromDuration:R}=Z$({...n,velocity:-zi(n.velocity||0)}),M=b||0,O=h/(2*Math.sqrt(f*p)),L=l-o,j=zi(Math.sqrt(f/p)),$=Math.abs(L)<5;r||(r=$?Ot.restSpeed.granular:Ot.restSpeed.default),s||(s=$?Ot.restDelta.granular:Ot.restDelta.default);let Y;if(O<1){const E=kv(j,O);Y=w=>{const x=Math.exp(-O*j*w);return l-x*((M+O*j*L)/E*Math.sin(E*w)+L*Math.cos(E*w))}}else if(O===1)Y=E=>l-Math.exp(-j*E)*(L+(M+j*L)*E);else{const E=j*Math.sqrt(O*O-1);Y=w=>{const x=Math.exp(-O*j*w),S=Math.min(E*w,300);return l-x*((M+O*j*L)*Math.sinh(S)+E*L*Math.cosh(S))/E}}const y={calculatedDuration:R&&v||null,next:E=>{const w=Y(E);if(R)c.done=E>=v;else{let x=E===0?M:0;O<1&&(x=E===0?ji(M):IN(Y,E,w));const S=Math.abs(x)<=r,N=Math.abs(l-w)<=s;c.done=S&&N}return c.value=c.done?l:w,c},toString:()=>{const E=Math.min(Pb(y),Wm),w=NN(x=>y.next(E*x).value,E,30);return E+"ms "+w},toTransition:()=>{}};return y}Qm.applyToOptions=t=>{const e=q$(t,100,Qm);return t.ease=e.ease,t.duration=ji(e.duration),t.type="keyframes",t};function Rv({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:f,restDelta:h=.5,restSpeed:p}){const v=t[0],b={done:!1,value:v},R=S=>c!==void 0&&S<c||f!==void 0&&S>f,M=S=>c===void 0?f:f===void 0||Math.abs(c-S)<Math.abs(f-S)?c:f;let O=n*e;const L=v+O,j=l===void 0?L:l(L);j!==L&&(O=j-v);const $=S=>-O*Math.exp(-S/r),Y=S=>j+$(S),y=S=>{const N=$(S),C=Y(S);b.done=Math.abs(N)<=h,b.value=b.done?j:C};let E,w;const x=S=>{R(b.value)&&(E=S,w=Qm({keyframes:[b.value,M(b.value)],velocity:IN(Y,S,b.value),damping:s,stiffness:o,restDelta:h,restSpeed:p}))};return x(0),{calculatedDuration:null,next:S=>{let N=!1;return!w&&E===void 0&&(N=!0,y(S),x(S)),E!==void 0&&S>=E?w.next(S-E):(!N&&y(S),b)}}}function J$(t,e,n){const r=[],s=n||ks.mix||RN,o=t.length-1;for(let l=0;l<o;l++){let c=s(t[l],t[l+1]);if(e){const f=Array.isArray(e)?e[l]||Fr:e;c=cf(f,c)}r.push(c)}return r}function eF(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const o=t.length;if(Tb(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=J$(e,r,s),f=c.length,h=p=>{if(l&&p<t[0])return e[0];let v=0;if(f>1)for(;v<t.length-2&&!(p<t[v+1]);v++);const b=Od(t[v],t[v+1],p);return c[v](b)};return n?p=>h(Cs(t[0],t[o-1],p)):h}function tF(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Od(0,e,r);t.push(kt(n,1,s))}}function nF(t){const e=[0];return tF(e,t.length-1),e}function rF(t,e){return t.map(n=>n*e)}function iF(t,e){return t.map(()=>e||_N).splice(0,t.length-1)}function cd({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=p$(r)?r.map(p2):p2(r),o={done:!1,value:e[0]},l=rF(n&&n.length===e.length?n:nF(e),t),c=eF(l,e,{ease:Array.isArray(s)?s:iF(e,s)});return{calculatedDuration:t,next:f=>(o.value=c(f),o.done=f>=t,o)}}const sF=t=>t!==null;function Ob(t,{repeat:e,repeatType:n="loop"},r,s=1){const o=t.filter(sF),c=s<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!c||r===void 0?o[c]:r}const aF={decay:Rv,inertia:Rv,tween:cd,keyframes:cd,spring:Qm};function DN(t){typeof t.type=="string"&&(t.type=aF[t.type])}class Vb{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const oF=t=>t/100;class Lb extends Vb{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==nr.now()&&this.tick(nr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;DN(e);const{type:n=cd,repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:l=0}=e;let{keyframes:c}=e;const f=n||cd;f!==cd&&typeof c[0]!="number"&&(this.mixKeyframes=cf(oF,RN(c[0],c[1])),c=[0,100]);const h=f({...e,keyframes:c});o==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...c].reverse(),velocity:-l})),h.calculatedDuration===null&&(h.calculatedDuration=Pb(h));const{calculatedDuration:p}=h;this.calculatedDuration=p,this.resolvedDuration=p+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=h}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:f}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:p,repeat:v,repeatType:b,repeatDelay:R,type:M,onUpdate:O,finalKeyframe:L}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const j=this.currentTime-h*(this.playbackSpeed>=0?1:-1),$=this.playbackSpeed>=0?j<0:j>s;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let Y=this.currentTime,y=r;if(v){const S=Math.min(this.currentTime,s)/c;let N=Math.floor(S),C=S%1;!C&&S>=1&&(C=1),C===1&&N--,N=Math.min(N,v+1),!!(N%2)&&(b==="reverse"?(C=1-C,R&&(C-=R/c)):b==="mirror"&&(y=l)),Y=Cs(0,1,C)*c}const E=$?{done:!1,value:p[0]}:y.next(Y);o&&(E.value=o(E.value));let{done:w}=E;!$&&f!==null&&(w=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const x=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&w);return x&&M!==Rv&&(E.value=Ob(p,this.options,L,this.speed)),O&&O(E.value),x&&this.finish(),E}then(e,n){return this.finished.then(e,n)}get duration(){return zi(this.calculatedDuration)}get time(){return zi(this.currentTime)}set time(e){e=ji(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(nr.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=zi(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=F$,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(nr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function lF(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const To=t=>t*180/Math.PI,Nv=t=>{const e=To(Math.atan2(t[1],t[0]));return Iv(e)},uF={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Nv,rotateZ:Nv,skewX:t=>To(Math.atan(t[1])),skewY:t=>To(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Iv=t=>(t=t%360,t<0&&(t+=360),t),w2=Nv,E2=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),x2=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),cF={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:E2,scaleY:x2,scale:t=>(E2(t)+x2(t))/2,rotateX:t=>Iv(To(Math.atan2(t[6],t[5]))),rotateY:t=>Iv(To(Math.atan2(-t[2],t[0]))),rotateZ:w2,rotate:w2,skewX:t=>To(Math.atan(t[4])),skewY:t=>To(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Dv(t){return t.includes("scale")?1:0}function Mv(t,e){if(!t||t==="none")return Dv(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=cF,s=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=uF,s=c}if(!s)return Dv(e);const o=r[e],l=s[1].split(",").map(fF);return typeof o=="function"?o(l):l[o]}const dF=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Mv(n,e)};function fF(t){return parseFloat(t.trim())}const Pu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ou=new Set(Pu),T2=t=>t===Mu||t===Oe,hF=new Set(["x","y","z"]),mF=Pu.filter(t=>!hF.has(t));function pF(t){const e=[];return mF.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Co={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Mv(e,"x"),y:(t,{transform:e})=>Mv(e,"y")};Co.translateX=Co.x;Co.translateY=Co.y;const ko=new Set;let Pv=!1,Ov=!1,Vv=!1;function MN(){if(Ov){const t=Array.from(ko).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=pF(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([o,l])=>{r.getValue(o)?.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Ov=!1,Pv=!1,ko.forEach(t=>t.complete(Vv)),ko.clear()}function PN(){ko.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Ov=!0)})}function gF(){Vv=!0,PN(),MN(),Vv=!1}class jb{constructor(e,n,r,s,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(ko.add(this),Pv||(Pv=!0,Tt.read(PN),Tt.resolveKeyframes(MN))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const o=s?.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const c=r.readValue(n,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),s&&o===void 0&&s.set(e[0])}lF(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ko.delete(this)}cancel(){this.state==="scheduled"&&(ko.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const yF=t=>t.startsWith("--");function vF(t,e,n){yF(e)?t.style.setProperty(e,n):t.style[e]=n}const _F=Sb(()=>window.ScrollTimeline!==void 0),bF={};function wF(t,e){const n=Sb(t);return()=>bF[e]??n()}const ON=wF(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),nd=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,S2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:nd([0,.65,.55,1]),circOut:nd([.55,0,1,.45]),backIn:nd([.31,.01,.66,-.59]),backOut:nd([.33,1.53,.69,.99])};function VN(t,e){if(t)return typeof t=="function"?ON()?NN(t,e):"ease-out":bN(t)?nd(t):Array.isArray(t)?t.map(n=>VN(n,e)||S2.easeOut):S2[t]}function EF(t,e,n,{delay:r=0,duration:s=300,repeat:o=0,repeatType:l="loop",ease:c="easeOut",times:f}={},h=void 0){const p={[e]:n};f&&(p.offset=f);const v=VN(c,s);Array.isArray(v)&&(p.easing=v);const b={delay:r,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return h&&(b.pseudoElement=h),t.animate(p,b)}function LN(t){return typeof t=="function"&&"applyToOptions"in t}function xF({type:t,...e}){return LN(t)&&ON()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class TF extends Vb{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:c,onComplete:f}=e;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=e,Tb(typeof e.type!="string");const h=xF(e);this.animation=EF(n,r,s,h,o),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const p=Ob(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(p):vF(n,r,p),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return zi(Number(e))}get time(){return zi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ji(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&_F()?(this.animation.timeline=e,Fr):n(this)}}const jN={anticipate:gN,backInOut:pN,circInOut:vN};function SF(t){return t in jN}function AF(t){typeof t.ease=="string"&&SF(t.ease)&&(t.ease=jN[t.ease])}const A2=10;class CF extends TF{constructor(e){AF(e),DN(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:o,...l}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const c=new Lb({...l,autoplay:!1}),f=ji(this.finishedTime??this.time);n.setWithVelocity(c.sample(f-A2).value,c.sample(f).value,A2),c.stop()}}const C2=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Na.test(t)||t==="0")&&!t.startsWith("url("));function kF(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function RF(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=C2(s,e),c=C2(o,e);return!l||!c?!1:kF(t)||(n==="spring"||LN(n))&&r}const NF=new Set(["opacity","clipPath","filter","transform"]),IF=Sb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function DF(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:o,type:l}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:h}=e.owner.getProps();return IF()&&n&&NF.has(n)&&(n!=="transform"||!h)&&!f&&!r&&s!=="mirror"&&o!==0&&l!=="inertia"}const MF=40;class PF extends Vb{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",keyframes:c,name:f,motionValue:h,element:p,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=nr.now();const b={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:o,repeatType:l,name:f,motionValue:h,element:p,...v},R=p?.KeyframeResolver||jb;this.keyframeResolver=new R(c,(M,O,L)=>this.onKeyframesResolved(M,O,b,!L),f,h,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:o,type:l,velocity:c,delay:f,isHandoff:h,onUpdate:p}=r;this.resolvedAt=nr.now(),RF(e,o,l,c)||((ks.instantAnimations||!f)&&p?.(Ob(e,r,n)),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const b={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>MF?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},R=!h&&DF(b)?new CF({...b,element:b.motionValue.owner.current}):new Lb(b);R.finished.then(()=>this.notifyFinished()).catch(Fr),this.pendingTimeline&&(this.stopTimeline=R.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=R}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),gF()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const OF=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function VF(t){const e=OF.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function zN(t,e,n=1){const[r,s]=VF(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const l=o.trim();return oN(l)?parseFloat(l):l}return Nb(s)?zN(s,e,n+1):s}function zb(t,e){return t?.[e]??t?.default??t}const UN=new Set(["width","height","top","left","right","bottom",...Pu]),LF={test:t=>t==="auto",parse:t=>t},BN=t=>e=>e.test(t),HN=[Mu,Oe,Ui,ra,k$,C$,LF],k2=t=>HN.find(BN(t));function jF(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||uN(t):!0}const zF=new Set(["brightness","contrast","saturate","opacity"]);function UF(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Ib)||[];if(!r)return t;const s=n.replace(r,"");let o=zF.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+s+")"}const BF=/\b([a-z-]*)\(.*?\)/gu,Lv={...Na,getAnimatableNone:t=>{const e=t.match(BF);return e?e.map(UF).join(" "):t}},R2={...Mu,transform:Math.round},HF={rotate:ra,rotateX:ra,rotateY:ra,rotateZ:ra,scale:Yh,scaleX:Yh,scaleY:Yh,scaleZ:Yh,skew:ra,skewX:ra,skewY:ra,distance:Oe,translateX:Oe,translateY:Oe,translateZ:Oe,x:Oe,y:Oe,z:Oe,perspective:Oe,transformPerspective:Oe,opacity:Vd,originX:g2,originY:g2,originZ:Oe},Ub={borderWidth:Oe,borderTopWidth:Oe,borderRightWidth:Oe,borderBottomWidth:Oe,borderLeftWidth:Oe,borderRadius:Oe,radius:Oe,borderTopLeftRadius:Oe,borderTopRightRadius:Oe,borderBottomRightRadius:Oe,borderBottomLeftRadius:Oe,width:Oe,maxWidth:Oe,height:Oe,maxHeight:Oe,top:Oe,right:Oe,bottom:Oe,left:Oe,padding:Oe,paddingTop:Oe,paddingRight:Oe,paddingBottom:Oe,paddingLeft:Oe,margin:Oe,marginTop:Oe,marginRight:Oe,marginBottom:Oe,marginLeft:Oe,backgroundPositionX:Oe,backgroundPositionY:Oe,...HF,zIndex:R2,fillOpacity:Vd,strokeOpacity:Vd,numOctaves:R2},$F={...Ub,color:Wt,backgroundColor:Wt,outlineColor:Wt,fill:Wt,stroke:Wt,borderColor:Wt,borderTopColor:Wt,borderRightColor:Wt,borderBottomColor:Wt,borderLeftColor:Wt,filter:Lv,WebkitFilter:Lv},$N=t=>$F[t];function FN(t,e){let n=$N(t);return n!==Lv&&(n=Na),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const FF=new Set(["auto","none","0"]);function qF(t,e,n){let r=0,s;for(;r<t.length&&!s;){const o=t[r];typeof o=="string"&&!FF.has(o)&&Ld(o).values.length&&(s=t[r]),r++}if(s&&n)for(const o of e)t[o]=FN(n,s)}class GF extends jb{constructor(e,n,r,s,o){super(e,n,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let h=e[f];if(typeof h=="string"&&(h=h.trim(),Nb(h))){const p=zN(h,n.current);p!==void 0&&(e[f]=p),f===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!UN.has(r)||e.length!==2)return;const[s,o]=e,l=k2(s),c=k2(o);if(l!==c)if(T2(l)&&T2(c))for(let f=0;f<e.length;f++){const h=e[f];typeof h=="string"&&(e[f]=parseFloat(h))}else Co[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||jF(e[s]))&&r.push(s);r.length&&qF(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Co[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,l=r[o];r[o]=Co[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,f])=>{e.getValue(c).set(f)}),this.resolveNoneKeyframes()}}function KF(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=n?.[t]??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const qN=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function GN(t){return lN(t)&&"offsetHeight"in t}const N2=30,YF=t=>!isNaN(parseFloat(t));class XF{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const o=nr.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();s&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=nr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=YF(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Ab);const r=this.events[e].add(n);return e==="change"?()=>{r(),Tt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=nr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>N2)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,N2);return cN(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Tu(t,e){return new XF(t,e)}const{schedule:Bb}=wN(queueMicrotask,!1),ei={x:!1,y:!1};function KN(){return ei.x||ei.y}function WF(t){return t==="x"||t==="y"?ei[t]?null:(ei[t]=!0,()=>{ei[t]=!1}):ei.x||ei.y?null:(ei.x=ei.y=!0,()=>{ei.x=ei.y=!1})}function YN(t,e){const n=KF(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function I2(t){return!(t.pointerType==="touch"||KN())}function QF(t,e,n={}){const[r,s,o]=YN(t,n),l=c=>{if(!I2(c))return;const{target:f}=c,h=e(f,c);if(typeof h!="function"||!f)return;const p=v=>{I2(v)&&(h(v),f.removeEventListener("pointerleave",p))};f.addEventListener("pointerleave",p,s)};return r.forEach(c=>{c.addEventListener("pointerenter",l,s)}),o}const XN=(t,e)=>e?t===e?!0:XN(t,e.parentElement):!1,Hb=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,ZF=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function JF(t){return ZF.has(t.tagName)||t.tabIndex!==-1}const pm=new WeakSet;function D2(t){return e=>{e.key==="Enter"&&t(e)}}function wy(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const eq=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=D2(()=>{if(pm.has(n))return;wy(n,"down");const s=D2(()=>{wy(n,"up")}),o=()=>wy(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function M2(t){return Hb(t)&&!KN()}function tq(t,e,n={}){const[r,s,o]=YN(t,n),l=c=>{const f=c.currentTarget;if(!M2(c))return;pm.add(f);const h=e(f,c),p=(R,M)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",b),pm.has(f)&&pm.delete(f),M2(R)&&typeof h=="function"&&h(R,{success:M})},v=R=>{p(R,f===window||f===document||n.useGlobalTarget||XN(f,R.target))},b=R=>{p(R,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",b,s)};return r.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",l,s),GN(c)&&(c.addEventListener("focus",h=>eq(h,s)),!JF(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),o}function WN(t){return lN(t)&&"ownerSVGElement"in t}function nq(t){return WN(t)&&t.tagName==="svg"}const Dn=t=>!!(t&&t.getVelocity),rq=[...HN,Wt,Na],iq=t=>rq.find(BN(t)),$b=B.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class sq extends B.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=GN(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function aq({children:t,isPresent:e,anchorX:n,root:r}){const s=B.useId(),o=B.useRef(null),l=B.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=B.useContext($b);return B.useInsertionEffect(()=>{const{width:f,height:h,top:p,left:v,right:b}=l.current;if(e||!o.current||!f||!h)return;const R=n==="left"?`left: ${v}`:`right: ${b}`;o.current.dataset.motionPopId=s;const M=document.createElement("style");c&&(M.nonce=c);const O=r??document.head;return O.appendChild(M),M.sheet&&M.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${h}px !important;
            ${R}px !important;
            top: ${p}px !important;
          }
        `),()=>{O.removeChild(M),O.contains(M)&&O.removeChild(M)}},[e]),A.jsx(sq,{isPresent:e,childRef:o,sizeRef:l,children:B.cloneElement(t,{ref:o})})}const oq=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:l,anchorX:c,root:f})=>{const h=bb(lq),p=B.useId();let v=!0,b=B.useMemo(()=>(v=!1,{id:p,initial:e,isPresent:n,custom:s,onExitComplete:R=>{h.set(R,!0);for(const M of h.values())if(!M)return;r&&r()},register:R=>(h.set(R,!1),()=>h.delete(R))}),[n,h,r]);return o&&v&&(b={...b}),B.useMemo(()=>{h.forEach((R,M)=>h.set(M,!1))},[n]),B.useEffect(()=>{!n&&!h.size&&r&&r()},[n]),l==="popLayout"&&(t=A.jsx(aq,{isPresent:n,anchorX:c,root:f,children:t})),A.jsx(Pp.Provider,{value:b,children:t})};function lq(){return new Map}function QN(t=!0){const e=B.useContext(Pp);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,o=B.useId();B.useEffect(()=>{if(t)return s(o)},[t]);const l=B.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,l]:[!0]}const Xh=t=>t.key||"";function P2(t){const e=[];return B.Children.forEach(t,n=>{B.isValidElement(n)&&e.push(n)}),e}const O2=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync",propagate:l=!1,anchorX:c="left",root:f})=>{const[h,p]=QN(l),v=B.useMemo(()=>P2(t),[t]),b=l&&!h?[]:v.map(Xh),R=B.useRef(!0),M=B.useRef(v),O=bb(()=>new Map),[L,j]=B.useState(v),[$,Y]=B.useState(v);aN(()=>{R.current=!1,M.current=v;for(let w=0;w<$.length;w++){const x=Xh($[w]);b.includes(x)?O.delete(x):O.get(x)!==!0&&O.set(x,!1)}},[$,b.length,b.join("-")]);const y=[];if(v!==L){let w=[...v];for(let x=0;x<$.length;x++){const S=$[x],N=Xh(S);b.includes(N)||(w.splice(x,0,S),y.push(S))}return o==="wait"&&y.length&&(w=y),Y(P2(w)),j(v),null}const{forceRender:E}=B.useContext(_b);return A.jsx(A.Fragment,{children:$.map(w=>{const x=Xh(w),S=l&&!h?!1:v===$||b.includes(x),N=()=>{if(O.has(x))O.set(x,!0);else return;let C=!0;O.forEach(D=>{D||(C=!1)}),C&&(E?.(),Y(M.current),l&&p?.(),r&&r())};return A.jsx(oq,{isPresent:S,initial:!R.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,root:f,onExitComplete:S?void 0:N,anchorX:c,children:w},x)})})},ZN=B.createContext({strict:!1}),V2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Su={};for(const t in V2)Su[t]={isEnabled:e=>V2[t].some(n=>!!e[n])};function uq(t){for(const e in t)Su[e]={...Su[e],...t[e]}}const cq=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Zm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||cq.has(t)}let JN=t=>!Zm(t);function dq(t){typeof t=="function"&&(JN=e=>e.startsWith("on")?!Zm(e):t(e))}try{dq(require("@emotion/is-prop-valid").default)}catch{}function fq(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(JN(s)||n===!0&&Zm(s)||!e&&!Zm(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const Op=B.createContext({});function Vp(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function jd(t){return typeof t=="string"||Array.isArray(t)}const Fb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],qb=["initial",...Fb];function Lp(t){return Vp(t.animate)||qb.some(e=>jd(t[e]))}function e8(t){return!!(Lp(t)||t.variants)}function hq(t,e){if(Lp(t)){const{initial:n,animate:r}=t;return{initial:n===!1||jd(n)?n:void 0,animate:jd(r)?r:void 0}}return t.inherit!==!1?e:{}}function mq(t){const{initial:e,animate:n}=hq(t,B.useContext(Op));return B.useMemo(()=>({initial:e,animate:n}),[L2(e),L2(n)])}function L2(t){return Array.isArray(t)?t.join(" "):t}const zd={};function pq(t){for(const e in t)zd[e]=t[e],Rb(e)&&(zd[e].isCSSVariable=!0)}function t8(t,{layout:e,layoutId:n}){return Ou.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!zd[t]||t==="opacity")}const gq={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},yq=Pu.length;function vq(t,e,n){let r="",s=!0;for(let o=0;o<yq;o++){const l=Pu[o],c=t[l];if(c===void 0)continue;let f=!0;if(typeof c=="number"?f=c===(l.startsWith("scale")?1:0):f=parseFloat(c)===0,!f||n){const h=qN(c,Ub[l]);if(!f){s=!1;const p=gq[l]||l;r+=`${p}(${h}) `}n&&(e[l]=h)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function Gb(t,e,n){const{style:r,vars:s,transformOrigin:o}=t;let l=!1,c=!1;for(const f in e){const h=e[f];if(Ou.has(f)){l=!0;continue}else if(Rb(f)){s[f]=h;continue}else{const p=qN(h,Ub[f]);f.startsWith("origin")?(c=!0,o[f]=p):r[f]=p}}if(e.transform||(l||n?r.transform=vq(e,t.transform,n):r.transform&&(r.transform="none")),c){const{originX:f="50%",originY:h="50%",originZ:p=0}=o;r.transformOrigin=`${f} ${h} ${p}`}}const Kb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function n8(t,e,n){for(const r in e)!Dn(e[r])&&!t8(r,n)&&(t[r]=e[r])}function _q({transformTemplate:t},e){return B.useMemo(()=>{const n=Kb();return Gb(n,e,t),Object.assign({},n.vars,n.style)},[e])}function bq(t,e){const n=t.style||{},r={};return n8(r,n,t),Object.assign(r,_q(t,e)),r}function wq(t,e){const n={},r=bq(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Eq={offset:"stroke-dashoffset",array:"stroke-dasharray"},xq={offset:"strokeDashoffset",array:"strokeDasharray"};function Tq(t,e,n=1,r=0,s=!0){t.pathLength=1;const o=s?Eq:xq;t[o.offset]=Oe.transform(-r);const l=Oe.transform(e),c=Oe.transform(n);t[o.array]=`${l} ${c}`}function r8(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...c},f,h,p){if(Gb(t,c,h),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:v,style:b}=t;v.transform&&(b.transform=v.transform,delete v.transform),(b.transform||v.transformOrigin)&&(b.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),b.transform&&(b.transformBox=p?.transformBox??"fill-box",delete v.transformBox),e!==void 0&&(v.x=e),n!==void 0&&(v.y=n),r!==void 0&&(v.scale=r),s!==void 0&&Tq(v,s,o,l,!1)}const i8=()=>({...Kb(),attrs:{}}),s8=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Sq(t,e,n,r){const s=B.useMemo(()=>{const o=i8();return r8(o,e,s8(r),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};n8(o,t.style,t),s.style={...o,...s.style}}return s}const Aq=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Yb(t){return typeof t!="string"||t.includes("-")?!1:!!(Aq.indexOf(t)>-1||/[A-Z]/u.test(t))}function Cq(t,e,n,{latestValues:r},s,o=!1){const c=(Yb(t)?Sq:wq)(e,r,s,t),f=fq(e,typeof t=="string",o),h=t!==B.Fragment?{...f,...c,ref:n}:{},{children:p}=e,v=B.useMemo(()=>Dn(p)?p.get():p,[p]);return B.createElement(t,{...h,children:v})}function j2(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Xb(t,e,n,r){if(typeof e=="function"){const[s,o]=j2(r);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=j2(r);e=e(n!==void 0?n:t.custom,s,o)}return e}function gm(t){return Dn(t)?t.get():t}function kq({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:Rq(n,r,s,t),renderState:e()}}function Rq(t,e,n,r){const s={},o=r(t,{});for(const b in o)s[b]=gm(o[b]);let{initial:l,animate:c}=t;const f=Lp(t),h=e8(t);e&&h&&!f&&t.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let p=n?n.initial===!1:!1;p=p||l===!1;const v=p?c:l;if(v&&typeof v!="boolean"&&!Vp(v)){const b=Array.isArray(v)?v:[v];for(let R=0;R<b.length;R++){const M=Xb(t,b[R]);if(M){const{transitionEnd:O,transition:L,...j}=M;for(const $ in j){let Y=j[$];if(Array.isArray(Y)){const y=p?Y.length-1:0;Y=Y[y]}Y!==null&&(s[$]=Y)}for(const $ in O)s[$]=O[$]}}}return s}const a8=t=>(e,n)=>{const r=B.useContext(Op),s=B.useContext(Pp),o=()=>kq(t,e,r,s);return n?o():bb(o)};function Wb(t,e,n){const{style:r}=t,s={};for(const o in r)(Dn(r[o])||e.style&&Dn(e.style[o])||t8(o,t)||n?.getValue(o)?.liveStyle!==void 0)&&(s[o]=r[o]);return s}const Nq=a8({scrapeMotionValuesFromProps:Wb,createRenderState:Kb});function o8(t,e,n){const r=Wb(t,e,n);for(const s in t)if(Dn(t[s])||Dn(e[s])){const o=Pu.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=t[s]}return r}const Iq=a8({scrapeMotionValuesFromProps:o8,createRenderState:i8}),Dq=Symbol.for("motionComponentSymbol");function Jl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Mq(t,e,n){return B.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Jl(n)&&(n.current=r))},[e])}const Qb=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Pq="framerAppearId",l8="data-"+Qb(Pq),u8=B.createContext({});function Oq(t,e,n,r,s){const{visualElement:o}=B.useContext(Op),l=B.useContext(ZN),c=B.useContext(Pp),f=B.useContext($b).reducedMotion,h=B.useRef(null);r=r||l.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:f}));const p=h.current,v=B.useContext(u8);p&&!p.projection&&s&&(p.type==="html"||p.type==="svg")&&Vq(h.current,n,s,v);const b=B.useRef(!1);B.useInsertionEffect(()=>{p&&b.current&&p.update(n,c)});const R=n[l8],M=B.useRef(!!R&&!window.MotionHandoffIsComplete?.(R)&&window.MotionHasOptimisedAnimation?.(R));return aN(()=>{p&&(b.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),M.current&&p.animationState&&p.animationState.animateChanges())}),B.useEffect(()=>{p&&(!M.current&&p.animationState&&p.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(R)}),M.current=!1))}),p}function Vq(t,e,n,r){const{layoutId:s,layout:o,drag:l,dragConstraints:c,layoutScroll:f,layoutRoot:h,layoutCrossfade:p}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:c8(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!l||c&&Jl(c),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:p,layoutScroll:f,layoutRoot:h})}function c8(t){if(t)return t.options.allowProjection!==!1?t.projection:c8(t.parent)}function Ey(t,{forwardMotionProps:e=!1}={},n,r){n&&uq(n);const s=Yb(t)?Iq:Nq;function o(c,f){let h;const p={...B.useContext($b),...c,layoutId:Lq(c)},{isStatic:v}=p,b=mq(c),R=s(c,v);if(!v&&wb){jq();const M=zq(p);h=M.MeasureLayout,b.visualElement=Oq(t,R,p,r,M.ProjectionNode)}return A.jsxs(Op.Provider,{value:b,children:[h&&b.visualElement?A.jsx(h,{visualElement:b.visualElement,...p}):null,Cq(t,c,Mq(R,b.visualElement,f),R,v,e)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const l=B.forwardRef(o);return l[Dq]=t,l}function Lq({layoutId:t}){const e=B.useContext(_b).id;return e&&t!==void 0?e+"-"+t:t}function jq(t,e){B.useContext(ZN).strict}function zq(t){const{drag:e,layout:n}=Su;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Uq(t,e){if(typeof Proxy>"u")return Ey;const n=new Map,r=(o,l)=>Ey(o,l,t,e),s=(o,l)=>r(o,l);return new Proxy(s,{get:(o,l)=>l==="create"?r:(n.has(l)||n.set(l,Ey(l,void 0,t,e)),n.get(l))})}function d8({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Bq({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Hq(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function xy(t){return t===void 0||t===1}function jv({scale:t,scaleX:e,scaleY:n}){return!xy(t)||!xy(e)||!xy(n)}function vo(t){return jv(t)||f8(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function f8(t){return z2(t.x)||z2(t.y)}function z2(t){return t&&t!=="0%"}function Jm(t,e,n){const r=t-n,s=e*r;return n+s}function U2(t,e,n,r,s){return s!==void 0&&(t=Jm(t,s,r)),Jm(t,n,r)+e}function zv(t,e=0,n=1,r,s){t.min=U2(t.min,e,n,r,s),t.max=U2(t.max,e,n,r,s)}function h8(t,{x:e,y:n}){zv(t.x,e.translate,e.scale,e.originPoint),zv(t.y,n.translate,n.scale,n.originPoint)}const B2=.999999999999,H2=1.0000000000001;function $q(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,l;for(let c=0;c<s;c++){o=n[c],l=o.projectionDelta;const{visualElement:f}=o.options;f&&f.props.style&&f.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&tu(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,h8(t,l)),r&&vo(o.latestValues)&&tu(t,o.latestValues))}e.x<H2&&e.x>B2&&(e.x=1),e.y<H2&&e.y>B2&&(e.y=1)}function eu(t,e){t.min=t.min+e,t.max=t.max+e}function $2(t,e,n,r,s=.5){const o=kt(t.min,t.max,s);zv(t,e,n,o,r)}function tu(t,e){$2(t.x,e.x,e.scaleX,e.scale,e.originX),$2(t.y,e.y,e.scaleY,e.scale,e.originY)}function m8(t,e){return d8(Hq(t.getBoundingClientRect(),e))}function Fq(t,e,n){const r=m8(t,n),{scroll:s}=e;return s&&(eu(r.x,s.offset.x),eu(r.y,s.offset.y)),r}const F2=()=>({translate:0,scale:1,origin:0,originPoint:0}),nu=()=>({x:F2(),y:F2()}),q2=()=>({min:0,max:0}),Ht=()=>({x:q2(),y:q2()}),Uv={current:null},p8={current:!1};function qq(){if(p8.current=!0,!!wb)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Uv.current=t.matches;t.addEventListener("change",e),e()}else Uv.current=!1}const Gq=new WeakMap;function Kq(t,e,n){for(const r in e){const s=e[r],o=n[r];if(Dn(s))t.addValue(r,s);else if(Dn(o))t.addValue(r,Tu(s,{owner:t}));else if(o!==s)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=t.getStaticValue(r);t.addValue(r,Tu(l!==void 0?l:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const G2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Yq{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=jb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=nr.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,Tt.render(this.render,!1,!0))};const{latestValues:f,renderState:h}=l;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=Lp(n),this.isVariantNode=e8(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...v}=this.scrapeMotionValuesFromProps(n,{},this);for(const b in v){const R=v[b];f[b]!==void 0&&Dn(R)&&R.set(f[b],!1)}}mount(e){this.current=e,Gq.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),p8.current||qq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Uv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ra(this.notifyUpdate),Ra(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ou.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Tt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Su){const n=Su[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ht()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<G2.length;r++){const s=G2[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,l=e[o];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=Kq(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Tu(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(oN(r)||uN(r))?r=parseFloat(r):!iq(r)&&Na.test(n)&&(r=FN(e,n)),this.setBaseTarget(e,Dn(r)?r.get():r)),Dn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Xb(this.props,n,this.presenceContext?.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Dn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Ab),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Bb.render(this.render)}}class g8 extends Yq{constructor(){super(...arguments),this.KeyframeResolver=GF}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Dn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function y8(t,{style:e,vars:n},r,s){const o=t.style;let l;for(l in e)o[l]=e[l];s?.applyProjectionStyles(o,r);for(l in n)o.setProperty(l,n[l])}function Xq(t){return window.getComputedStyle(t)}class Wq extends g8{constructor(){super(...arguments),this.type="html",this.renderInstance=y8}readValueFromInstance(e,n){if(Ou.has(n))return this.projection?.isProjecting?Dv(n):dF(e,n);{const r=Xq(e),s=(Rb(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return m8(e,n)}build(e,n,r){Gb(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Wb(e,n,r)}}const v8=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Qq(t,e,n,r){y8(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(v8.has(s)?s:Qb(s),e.attrs[s])}class Zq extends g8{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ht}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ou.has(n)){const r=$N(n);return r&&r.default||0}return n=v8.has(n)?n:Qb(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return o8(e,n,r)}build(e,n,r){r8(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){Qq(e,n,r,s)}mount(e){this.isSVGTag=s8(e.tagName),super.mount(e)}}const Jq=(t,e)=>Yb(t)?new Zq(e):new Wq(e,{allowProjection:t!==B.Fragment});function Ud(t,e,n){const r=t.getProps();return Xb(r,e,n!==void 0?n:r.custom,t)}const Bv=t=>Array.isArray(t);function eG(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Tu(n))}function tG(t){return Bv(t)?t[t.length-1]||0:t}function nG(t,e){const n=Ud(t,e);let{transitionEnd:r={},transition:s={},...o}=n||{};o={...o,...r};for(const l in o){const c=tG(o[l]);eG(t,l,c)}}function rG(t){return!!(Dn(t)&&t.add)}function Hv(t,e){const n=t.getValue("willChange");if(rG(n))return n.add(e);if(!n&&ks.WillChange){const r=new ks.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function _8(t){return t.props[l8]}const iG=t=>t!==null;function sG(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(iG),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[o]}const aG={type:"spring",stiffness:500,damping:25,restSpeed:10},oG=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),lG={type:"keyframes",duration:.8},uG={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},cG=(t,{keyframes:e})=>e.length>2?lG:Ou.has(t)?t.startsWith("scale")?oG(e[1]):aG:uG;function dG({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:l,repeatDelay:c,from:f,elapsed:h,...p}){return!!Object.keys(p).length}const Zb=(t,e,n,r={},s,o)=>l=>{const c=zb(r,t)||{},f=c.delay||r.delay||0;let{elapsed:h=0}=r;h=h-ji(f);const p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:b=>{e.set(b),c.onUpdate&&c.onUpdate(b)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:o?void 0:s};dG(c)||Object.assign(p,cG(t,p)),p.duration&&(p.duration=ji(p.duration)),p.repeatDelay&&(p.repeatDelay=ji(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let v=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(v=!0)),(ks.instantAnimations||ks.skipAnimations)&&(v=!0,p.duration=0,p.delay=0),p.allowFlatten=!c.type&&!c.ease,v&&!o&&e.get()!==void 0){const b=sG(p.keyframes,c);if(b!==void 0){Tt.update(()=>{p.onUpdate(b),p.onComplete()});return}}return c.isSync?new Lb(p):new PF(p)};function fG({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function b8(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:l,...c}=e;r&&(o=r);const f=[],h=s&&t.animationState&&t.animationState.getState()[s];for(const p in c){const v=t.getValue(p,t.latestValues[p]??null),b=c[p];if(b===void 0||h&&fG(h,p))continue;const R={delay:n,...zb(o||{},p)},M=v.get();if(M!==void 0&&!v.isAnimating&&!Array.isArray(b)&&b===M&&!R.velocity)continue;let O=!1;if(window.MotionHandoffAnimation){const j=_8(t);if(j){const $=window.MotionHandoffAnimation(j,p,Tt);$!==null&&(R.startTime=$,O=!0)}}Hv(t,p),v.start(Zb(p,v,b,t.shouldReduceMotion&&UN.has(p)?{type:!1}:R,t,O));const L=v.animation;L&&f.push(L)}return l&&Promise.all(f).then(()=>{Tt.update(()=>{l&&nG(t,l)})}),f}function $v(t,e,n={}){const r=Ud(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const o=r?()=>Promise.all(b8(t,r,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:h=0,staggerChildren:p,staggerDirection:v}=s;return hG(t,e,f,h,p,v,n)}:()=>Promise.resolve(),{when:c}=s;if(c){const[f,h]=c==="beforeChildren"?[o,l]:[l,o];return f().then(()=>h())}else return Promise.all([o(),l(n.delay)])}function hG(t,e,n=0,r=0,s=0,o=1,l){const c=[],f=t.variantChildren.size,h=(f-1)*s,p=typeof r=="function",v=p?b=>r(b,f):o===1?(b=0)=>b*s:(b=0)=>h-b*s;return Array.from(t.variantChildren).sort(mG).forEach((b,R)=>{b.notify("AnimationStart",e),c.push($v(b,e,{...l,delay:n+(p?0:r)+v(R)}).then(()=>b.notify("AnimationComplete",e)))}),Promise.all(c)}function mG(t,e){return t.sortNodePosition(e)}function pG(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>$v(t,o,n));r=Promise.all(s)}else if(typeof e=="string")r=$v(t,e,n);else{const s=typeof e=="function"?Ud(t,e,n.custom):e;r=Promise.all(b8(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function w8(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const gG=qb.length;function E8(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?E8(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<gG;n++){const r=qb[n],s=t.props[r];(jd(s)||s===!1)&&(e[r]=s)}return e}const yG=[...Fb].reverse(),vG=Fb.length;function _G(t){return e=>Promise.all(e.map(({animation:n,options:r})=>pG(t,n,r)))}function bG(t){let e=_G(t),n=K2(),r=!0;const s=f=>(h,p)=>{const v=Ud(t,p,f==="exit"?t.presenceContext?.custom:void 0);if(v){const{transition:b,transitionEnd:R,...M}=v;h={...h,...M,...R}}return h};function o(f){e=f(t)}function l(f){const{props:h}=t,p=E8(t.parent)||{},v=[],b=new Set;let R={},M=1/0;for(let L=0;L<vG;L++){const j=yG[L],$=n[j],Y=h[j]!==void 0?h[j]:p[j],y=jd(Y),E=j===f?$.isActive:null;E===!1&&(M=L);let w=Y===p[j]&&Y!==h[j]&&y;if(w&&r&&t.manuallyAnimateOnMount&&(w=!1),$.protectedKeys={...R},!$.isActive&&E===null||!Y&&!$.prevProp||Vp(Y)||typeof Y=="boolean")continue;const x=wG($.prevProp,Y);let S=x||j===f&&$.isActive&&!w&&y||L>M&&y,N=!1;const C=Array.isArray(Y)?Y:[Y];let D=C.reduce(s(j),{});E===!1&&(D={});const{prevResolvedValues:H={}}=$,V={...H,...D},U=F=>{S=!0,b.has(F)&&(N=!0,b.delete(F)),$.needsAnimating[F]=!0;const G=t.getValue(F);G&&(G.liveStyle=!1)};for(const F in V){const G=D[F],X=H[F];if(R.hasOwnProperty(F))continue;let z=!1;Bv(G)&&Bv(X)?z=!w8(G,X):z=G!==X,z?G!=null?U(F):b.add(F):G!==void 0&&b.has(F)?U(F):$.protectedKeys[F]=!0}$.prevProp=Y,$.prevResolvedValues=D,$.isActive&&(R={...R,...D}),r&&t.blockInitialAnimation&&(S=!1),S&&(!(w&&x)||N)&&v.push(...C.map(F=>({animation:F,options:{type:j}})))}if(b.size){const L={};if(typeof h.initial!="boolean"){const j=Ud(t,Array.isArray(h.initial)?h.initial[0]:h.initial);j&&j.transition&&(L.transition=j.transition)}b.forEach(j=>{const $=t.getBaseTarget(j),Y=t.getValue(j);Y&&(Y.liveStyle=!0),L[j]=$??null}),v.push({animation:L})}let O=!!v.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(O=!1),r=!1,O?e(v):Promise.resolve()}function c(f,h){if(n[f].isActive===h)return Promise.resolve();t.variantChildren?.forEach(v=>v.animationState?.setActive(f,h)),n[f].isActive=h;const p=l(f);for(const v in n)n[v].protectedKeys={};return p}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>n,reset:()=>{n=K2(),r=!0}}}function wG(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!w8(e,t):!1}function po(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function K2(){return{animate:po(!0),whileInView:po(),whileHover:po(),whileTap:po(),whileDrag:po(),whileFocus:po(),exit:po()}}class Oa{constructor(e){this.isMounted=!1,this.node=e}update(){}}class EG extends Oa{constructor(e){super(e),e.animationState||(e.animationState=bG(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Vp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let xG=0;class TG extends Oa{constructor(){super(...arguments),this.id=xG++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const SG={animation:{Feature:EG},exit:{Feature:TG}};function Bd(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function hf(t){return{point:{x:t.pageX,y:t.pageY}}}const AG=t=>e=>Hb(e)&&t(e,hf(e));function dd(t,e,n,r){return Bd(t,e,AG(n),r)}const x8=1e-4,CG=1-x8,kG=1+x8,T8=.01,RG=0-T8,NG=0+T8;function Fn(t){return t.max-t.min}function IG(t,e,n){return Math.abs(t-e)<=n}function Y2(t,e,n,r=.5){t.origin=r,t.originPoint=kt(e.min,e.max,t.origin),t.scale=Fn(n)/Fn(e),t.translate=kt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=CG&&t.scale<=kG||isNaN(t.scale))&&(t.scale=1),(t.translate>=RG&&t.translate<=NG||isNaN(t.translate))&&(t.translate=0)}function fd(t,e,n,r){Y2(t.x,e.x,n.x,r?r.originX:void 0),Y2(t.y,e.y,n.y,r?r.originY:void 0)}function X2(t,e,n){t.min=n.min+e.min,t.max=t.min+Fn(e)}function DG(t,e,n){X2(t.x,e.x,n.x),X2(t.y,e.y,n.y)}function W2(t,e,n){t.min=e.min-n.min,t.max=t.min+Fn(e)}function hd(t,e,n){W2(t.x,e.x,n.x),W2(t.y,e.y,n.y)}function Br(t){return[t("x"),t("y")]}const S8=({current:t})=>t?t.ownerDocument.defaultView:null,Q2=(t,e)=>Math.abs(t-e);function MG(t,e){const n=Q2(t.x,e.x),r=Q2(t.y,e.y);return Math.sqrt(n**2+r**2)}class A8{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Sy(this.lastMoveEventInfo,this.history),R=this.startEvent!==null,M=MG(b.offset,{x:0,y:0})>=this.distanceThreshold;if(!R&&!M)return;const{point:O}=b,{timestamp:L}=En;this.history.push({...O,timestamp:L});const{onStart:j,onMove:$}=this.handlers;R||(j&&j(this.lastMoveEvent,b),this.startEvent=this.lastMoveEvent),$&&$(this.lastMoveEvent,b)},this.handlePointerMove=(b,R)=>{this.lastMoveEvent=b,this.lastMoveEventInfo=Ty(R,this.transformPagePoint),Tt.update(this.updatePoint,!0)},this.handlePointerUp=(b,R)=>{this.end();const{onEnd:M,onSessionEnd:O,resumeAnimation:L}=this.handlers;if(this.dragSnapToOrigin&&L&&L(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=Sy(b.type==="pointercancel"?this.lastMoveEventInfo:Ty(R,this.transformPagePoint),this.history);this.startEvent&&M&&M(b,j),O&&O(b,j)},!Hb(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=l,this.contextWindow=s||window;const c=hf(e),f=Ty(c,this.transformPagePoint),{point:h}=f,{timestamp:p}=En;this.history=[{...h,timestamp:p}];const{onSessionStart:v}=n;v&&v(e,Sy(f,this.history)),this.removeListeners=cf(dd(this.contextWindow,"pointermove",this.handlePointerMove),dd(this.contextWindow,"pointerup",this.handlePointerUp),dd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ra(this.updatePoint)}}function Ty(t,e){return e?{point:e(t.point)}:t}function Z2(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Sy({point:t},e){return{point:t,delta:Z2(t,C8(e)),offset:Z2(t,PG(e)),velocity:OG(e,.1)}}function PG(t){return t[0]}function C8(t){return t[t.length-1]}function OG(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=C8(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>ji(e)));)n--;if(!r)return{x:0,y:0};const o=zi(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const l={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function VG(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?kt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?kt(n,t,r.max):Math.min(t,n)),t}function J2(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function LG(t,{top:e,left:n,bottom:r,right:s}){return{x:J2(t.x,n,s),y:J2(t.y,e,r)}}function eA(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function jG(t,e){return{x:eA(t.x,e.x),y:eA(t.y,e.y)}}function zG(t,e){let n=.5;const r=Fn(t),s=Fn(e);return s>r?n=Od(e.min,e.max-r,t.min):r>s&&(n=Od(t.min,t.max-s,e.min)),Cs(0,1,n)}function UG(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Fv=.35;function BG(t=Fv){return t===!1?t=0:t===!0&&(t=Fv),{x:tA(t,"left","right"),y:tA(t,"top","bottom")}}function tA(t,e,n){return{min:nA(t,e),max:nA(t,n)}}function nA(t,e){return typeof t=="number"?t:t[e]||0}const HG=new WeakMap;class $G{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ht(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=v=>{const{dragSnapToOrigin:b}=this.getProps();b?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(hf(v).point)},l=(v,b)=>{const{drag:R,dragPropagation:M,onDragStart:O}=this.getProps();if(R&&!M&&(this.openDragLock&&this.openDragLock(),this.openDragLock=WF(R),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=b,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Br(j=>{let $=this.getAxisMotionValue(j).get()||0;if(Ui.test($)){const{projection:Y}=this.visualElement;if(Y&&Y.layout){const y=Y.layout.layoutBox[j];y&&($=Fn(y)*(parseFloat($)/100))}}this.originPoint[j]=$}),O&&Tt.postRender(()=>O(v,b)),Hv(this.visualElement,"transform");const{animationState:L}=this.visualElement;L&&L.setActive("whileDrag",!0)},c=(v,b)=>{this.latestPointerEvent=v,this.latestPanInfo=b;const{dragPropagation:R,dragDirectionLock:M,onDirectionLock:O,onDrag:L}=this.getProps();if(!R&&!this.openDragLock)return;const{offset:j}=b;if(M&&this.currentDirection===null){this.currentDirection=FG(j),this.currentDirection!==null&&O&&O(this.currentDirection);return}this.updateAxis("x",b.point,j),this.updateAxis("y",b.point,j),this.visualElement.render(),L&&L(v,b)},f=(v,b)=>{this.latestPointerEvent=v,this.latestPanInfo=b,this.stop(v,b),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>Br(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new A8(e,{onSessionStart:o,onStart:l,onMove:c,onSessionEnd:f,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:r,contextWindow:S8(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!r)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&Tt.postRender(()=>c(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Wh(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=VG(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&Jl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=LG(r.layoutBox,e):this.constraints=!1,this.elastic=BG(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Br(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=UG(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Jl(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=Fq(r,s.root,this.visualElement.getTransformPagePoint());let l=jG(s.layout.layoutBox,o);if(n){const c=n(Bq(l));this.hasMutatedConstraints=!!c,c&&(l=d8(c))}return l}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),f=this.constraints||{},h=Br(p=>{if(!Wh(p,n,this.currentDirection))return;let v=f&&f[p]||{};l&&(v={min:0,max:0});const b=s?200:1e6,R=s?40:1e7,M={type:"inertia",velocity:r?e[p]:0,bounceStiffness:b,bounceDamping:R,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(p,M)});return Promise.all(h).then(c)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Hv(this.visualElement,e),r.start(Zb(e,r,0,n,this.visualElement,!1))}stopAnimation(){Br(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Br(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Br(n=>{const{drag:r}=this.getProps();if(!Wh(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:l,max:c}=s.layout.layoutBox[n];o.set(e[n]-kt(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Jl(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Br(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const f=c.get();s[l]=zG({min:f,max:f},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Br(l=>{if(!Wh(l,e,null))return;const c=this.getAxisMotionValue(l),{min:f,max:h}=this.constraints[l];c.set(kt(f,h,s[l]))})}addListeners(){if(!this.visualElement.current)return;HG.set(this.visualElement,this);const e=this.visualElement.current,n=dd(e,"pointerdown",f=>{const{drag:h,dragListener:p=!0}=this.getProps();h&&p&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();Jl(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Tt.read(r);const l=Bd(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h})=>{this.isDragging&&h&&(Br(p=>{const v=this.getAxisMotionValue(p);v&&(this.originPoint[p]+=f[p].translate,v.set(v.get()+f[p].translate))}),this.visualElement.render())});return()=>{l(),n(),o(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:l=Fv,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function Wh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function FG(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class qG extends Oa{constructor(e){super(e),this.removeGroupControls=Fr,this.removeListeners=Fr,this.controls=new $G(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Fr}unmount(){this.removeGroupControls(),this.removeListeners()}}const rA=t=>(e,n)=>{t&&Tt.postRender(()=>t(e,n))};class GG extends Oa{constructor(){super(...arguments),this.removePointerDownListener=Fr}onPointerDown(e){this.session=new A8(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:S8(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:rA(e),onStart:rA(n),onMove:r,onEnd:(o,l)=>{delete this.session,s&&Tt.postRender(()=>s(o,l))}}}mount(){this.removePointerDownListener=dd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ym={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function iA(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const qc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Oe.test(t))t=parseFloat(t);else return t;const n=iA(t,e.target.x),r=iA(t,e.target.y);return`${n}% ${r}%`}},KG={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Na.parse(t);if(s.length>5)return r;const o=Na.createTransformer(t),l=typeof s[0]!="number"?1:0,c=n.x.scale*e.x,f=n.y.scale*e.y;s[0+l]/=c,s[1+l]/=f;const h=kt(c,f,.5);return typeof s[2+l]=="number"&&(s[2+l]/=h),typeof s[3+l]=="number"&&(s[3+l]/=h),o(s)}};let sA=!1;class YG extends B.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;pq(XG),o&&(n.group&&n.group.add(o),r&&r.register&&s&&r.register(o),sA&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),ym.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:o}=this.props,{projection:l}=r;return l&&(l.isPresent=o,sA=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||Tt.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Bb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function k8(t){const[e,n]=QN(),r=B.useContext(_b);return A.jsx(YG,{...t,layoutGroup:r,switchLayoutGroup:B.useContext(u8),isPresent:e,safeToRemove:n})}const XG={borderRadius:{...qc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:qc,borderTopRightRadius:qc,borderBottomLeftRadius:qc,borderBottomRightRadius:qc,boxShadow:KG};function WG(t,e,n){const r=Dn(t)?t:Tu(t);return r.start(Zb("",r,e,n)),r.animation}const QG=(t,e)=>t.depth-e.depth;class ZG{constructor(){this.children=[],this.isDirty=!1}add(e){Eb(this.children,e),this.isDirty=!0}remove(e){xb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(QG),this.isDirty=!1,this.children.forEach(e)}}function JG(t,e){const n=nr.now(),r=({timestamp:s})=>{const o=s-n;o>=e&&(Ra(r),t(o-e))};return Tt.setup(r,!0),()=>Ra(r)}const R8=["TopLeft","TopRight","BottomLeft","BottomRight"],eK=R8.length,aA=t=>typeof t=="string"?parseFloat(t):t,oA=t=>typeof t=="number"||Oe.test(t);function tK(t,e,n,r,s,o){s?(t.opacity=kt(0,n.opacity??1,nK(r)),t.opacityExit=kt(e.opacity??1,0,rK(r))):o&&(t.opacity=kt(e.opacity??1,n.opacity??1,r));for(let l=0;l<eK;l++){const c=`border${R8[l]}Radius`;let f=lA(e,c),h=lA(n,c);if(f===void 0&&h===void 0)continue;f||(f=0),h||(h=0),f===0||h===0||oA(f)===oA(h)?(t[c]=Math.max(kt(aA(f),aA(h),r),0),(Ui.test(h)||Ui.test(f))&&(t[c]+="%")):t[c]=h}(e.rotate||n.rotate)&&(t.rotate=kt(e.rotate||0,n.rotate||0,r))}function lA(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const nK=N8(0,.5,yN),rK=N8(.5,.95,Fr);function N8(t,e,n){return r=>r<t?0:r>e?1:n(Od(t,e,r))}function uA(t,e){t.min=e.min,t.max=e.max}function Ur(t,e){uA(t.x,e.x),uA(t.y,e.y)}function cA(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function dA(t,e,n,r,s){return t-=e,t=Jm(t,1/n,r),s!==void 0&&(t=Jm(t,1/s,r)),t}function iK(t,e=0,n=1,r=.5,s,o=t,l=t){if(Ui.test(e)&&(e=parseFloat(e),e=kt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=kt(o.min,o.max,r);t===o&&(c-=e),t.min=dA(t.min,e,n,c,s),t.max=dA(t.max,e,n,c,s)}function fA(t,e,[n,r,s],o,l){iK(t,e[n],e[r],e[s],e.scale,o,l)}const sK=["x","scaleX","originX"],aK=["y","scaleY","originY"];function hA(t,e,n,r){fA(t.x,e,sK,n?n.x:void 0,r?r.x:void 0),fA(t.y,e,aK,n?n.y:void 0,r?r.y:void 0)}function mA(t){return t.translate===0&&t.scale===1}function I8(t){return mA(t.x)&&mA(t.y)}function pA(t,e){return t.min===e.min&&t.max===e.max}function oK(t,e){return pA(t.x,e.x)&&pA(t.y,e.y)}function gA(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function D8(t,e){return gA(t.x,e.x)&&gA(t.y,e.y)}function yA(t){return Fn(t.x)/Fn(t.y)}function vA(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class lK{constructor(){this.members=[]}add(e){Eb(this.members,e),e.scheduleRender()}remove(e){if(xb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function uK(t,e,n){let r="";const s=t.x.translate/e.x,o=t.y.translate/e.y,l=n?.z||0;if((s||o||l)&&(r=`translate3d(${s}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:p,rotateX:v,rotateY:b,skewX:R,skewY:M}=n;h&&(r=`perspective(${h}px) ${r}`),p&&(r+=`rotate(${p}deg) `),v&&(r+=`rotateX(${v}deg) `),b&&(r+=`rotateY(${b}deg) `),R&&(r+=`skewX(${R}deg) `),M&&(r+=`skewY(${M}deg) `)}const c=t.x.scale*e.x,f=t.y.scale*e.y;return(c!==1||f!==1)&&(r+=`scale(${c}, ${f})`),r||"none"}const Ay=["","X","Y","Z"],cK=1e3;let dK=0;function Cy(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function M8(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=_8(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Tt,!(s||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&M8(r)}function P8({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},c=e?.()){this.id=dK++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(mK),this.nodes.forEach(vK),this.nodes.forEach(_K),this.nodes.forEach(pK)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new ZG)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Ab),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const f=this.eventHandlers.get(l);f&&f.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=WN(l)&&!nq(l),this.instance=l;const{layoutId:c,layout:f,visualElement:h}=this.options;if(h&&!h.current&&h.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||c)&&(this.isLayoutDirty=!0),t){let p,v=0;const b=()=>this.root.updateBlockedByResize=!1;Tt.read(()=>{v=window.innerWidth}),t(l,()=>{const R=window.innerWidth;R!==v&&(v=R,this.root.updateBlockedByResize=!0,p&&p(),p=JG(b,250),ym.hasAnimatedSinceResize&&(ym.hasAnimatedSinceResize=!1,this.nodes.forEach(wA)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||f)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:v,hasRelativeLayoutChanged:b,layout:R})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const M=this.options.transition||h.getDefaultTransition()||TK,{onLayoutAnimationStart:O,onLayoutAnimationComplete:L}=h.getProps(),j=!this.targetLayout||!D8(this.targetLayout,R),$=!v&&b;if(this.options.layoutRoot||this.resumeFrom||$||v&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const Y={...zb(M,"layout"),onPlay:O,onComplete:L};(h.shouldReduceMotion||this.options.layoutRoot)&&(Y.delay=0,Y.type=!1),this.startAnimation(Y),this.setAnimationOrigin(p,$)}else v||wA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=R})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ra(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(bK),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&M8(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const v=this.path[p];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:c,layout:f}=this.options;if(c===void 0&&!f)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(_A);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(bA);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(yK),this.nodes.forEach(fK),this.nodes.forEach(hK)):this.nodes.forEach(bA),this.clearAllSnapshots();const c=nr.now();En.delta=Cs(0,1e3/60,c-En.timestamp),En.timestamp=c,En.isProcessing=!0,gy.update.process(En),gy.preRender.process(En),gy.render.process(En),En.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Bb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(gK),this.sharedNodes.forEach(wK)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Tt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Tt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Fn(this.snapshot.measuredBox.x)&&!Fn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ht(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const f=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!I8(this.projectionDelta),f=this.getTransformTemplate(),h=f?f(this.latestValues,""):void 0,p=h!==this.prevTransformTemplateValue;l&&this.instance&&(c||vo(this.latestValues)||p)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let f=this.removeElementScroll(c);return l&&(f=this.removeTransform(f)),SK(f),{animationId:this.root.animationId,measuredBox:c,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return Ht();const c=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(AK))){const{scroll:h}=this.root;h&&(eu(c.x,h.offset.x),eu(c.y,h.offset.y))}return c}removeElementScroll(l){const c=Ht();if(Ur(c,l),this.scroll?.wasRoot)return c;for(let f=0;f<this.path.length;f++){const h=this.path[f],{scroll:p,options:v}=h;h!==this.root&&p&&v.layoutScroll&&(p.wasRoot&&Ur(c,l),eu(c.x,p.offset.x),eu(c.y,p.offset.y))}return c}applyTransform(l,c=!1){const f=Ht();Ur(f,l);for(let h=0;h<this.path.length;h++){const p=this.path[h];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&tu(f,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),vo(p.latestValues)&&tu(f,p.latestValues)}return vo(this.latestValues)&&tu(f,this.latestValues),f}removeTransform(l){const c=Ht();Ur(c,l);for(let f=0;f<this.path.length;f++){const h=this.path[f];if(!h.instance||!vo(h.latestValues))continue;jv(h.latestValues)&&h.updateSnapshot();const p=Ht(),v=h.measurePageBox();Ur(p,v),hA(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,p)}return vo(this.latestValues)&&hA(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==En.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==c;if(!(l||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:v}=this.options;if(!(!this.layout||!(p||v))){if(this.resolvedRelativeTargetAt=En.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ht(),this.relativeTargetOrigin=Ht(),hd(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),Ur(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ht(),this.targetWithTransforms=Ht()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),DG(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ur(this.target,this.layout.layoutBox),h8(this.target,this.targetDelta)):Ur(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ht(),this.relativeTargetOrigin=Ht(),hd(this.relativeTargetOrigin,this.target,b.target),Ur(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||jv(this.parent.latestValues)||f8(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),c=!!this.resumingFrom||this!==l;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===En.timestamp&&(f=!1),f)return;const{layout:h,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||p))return;Ur(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,b=this.treeScale.y;$q(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Ht());const{target:R}=l;if(!R){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(cA(this.prevProjectionDelta.x,this.projectionDelta.x),cA(this.prevProjectionDelta.y,this.projectionDelta.y)),fd(this.projectionDelta,this.layoutCorrected,R,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==b||!vA(this.projectionDelta.x,this.prevProjectionDelta.x)||!vA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",R))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=nu(),this.projectionDelta=nu(),this.projectionDeltaWithTransform=nu()}setAnimationOrigin(l,c=!1){const f=this.snapshot,h=f?f.latestValues:{},p={...this.latestValues},v=nu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const b=Ht(),R=f?f.source:void 0,M=this.layout?this.layout.source:void 0,O=R!==M,L=this.getStack(),j=!L||L.members.length<=1,$=!!(O&&!j&&this.options.crossfade===!0&&!this.path.some(xK));this.animationProgress=0;let Y;this.mixTargetDelta=y=>{const E=y/1e3;EA(v.x,l.x,E),EA(v.y,l.y,E),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(hd(b,this.layout.layoutBox,this.relativeParent.layout.layoutBox),EK(this.relativeTarget,this.relativeTargetOrigin,b,E),Y&&oK(this.relativeTarget,Y)&&(this.isProjectionDirty=!1),Y||(Y=Ht()),Ur(Y,this.relativeTarget)),O&&(this.animationValues=p,tK(p,h,this.latestValues,E,$,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Ra(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Tt.update(()=>{ym.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Tu(0)),this.currentAnimation=WG(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(cK),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:f,layout:h,latestValues:p}=l;if(!(!c||!f||!h)){if(this!==l&&this.layout&&h&&O8(this.options.animationType,this.layout.layoutBox,h.layoutBox)){f=this.target||Ht();const v=Fn(this.layout.layoutBox.x);f.x.min=l.target.x.min,f.x.max=f.x.min+v;const b=Fn(this.layout.layoutBox.y);f.y.min=l.target.y.min,f.y.max=f.y.min+b}Ur(c,f),tu(c,p),fd(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new lK),this.sharedNodes.get(l).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:f}={}){const h=this.getStack();h&&h.promote(this,f),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:f}=l;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(c=!0),!c)return;const h={};f.z&&Cy("z",l,h,this.animationValues);for(let p=0;p<Ay.length;p++)Cy(`rotate${Ay[p]}`,l,h,this.animationValues),Cy(`skew${Ay[p]}`,l,h,this.animationValues);l.render();for(const p in h)l.setStaticValue(p,h[p]),this.animationValues&&(this.animationValues[p]=h[p]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=gm(c?.pointerEvents)||"",l.transform=f?f(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=gm(c?.pointerEvents)||""),this.hasProjected&&!vo(this.latestValues)&&(l.transform=f?f({},""):"none",this.hasProjected=!1);return}l.visibility="";const p=h.animationValues||h.latestValues;this.applyTransformsToTarget();let v=uK(this.projectionDeltaWithTransform,this.treeScale,p);f&&(v=f(p,v)),l.transform=v;const{x:b,y:R}=this.projectionDelta;l.transformOrigin=`${b.origin*100}% ${R.origin*100}% 0`,h.animationValues?l.opacity=h===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:l.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const M in zd){if(p[M]===void 0)continue;const{correct:O,applyTo:L,isCSSVariable:j}=zd[M],$=v==="none"?p[M]:O(p[M],h);if(L){const Y=L.length;for(let y=0;y<Y;y++)l[L[y]]=$}else j?this.options.visualElement.renderState.vars[M]=$:l[M]=$}this.options.layoutId&&(l.pointerEvents=h===this?gm(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(_A),this.root.sharedNodes.clear()}}}function fK(t){t.updateLayout()}function hK(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?Br(p=>{const v=o?e.measuredBox[p]:e.layoutBox[p],b=Fn(v);v.min=n[p].min,v.max=v.min+b}):O8(s,e.layoutBox,n)&&Br(p=>{const v=o?e.measuredBox[p]:e.layoutBox[p],b=Fn(n[p]);v.max=v.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+b)});const l=nu();fd(l,n,e.layoutBox);const c=nu();o?fd(c,t.applyTransform(r,!0),e.measuredBox):fd(c,n,e.layoutBox);const f=!I8(l);let h=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:v,layout:b}=p;if(v&&b){const R=Ht();hd(R,e.layoutBox,v.layoutBox);const M=Ht();hd(M,n,b.layoutBox),D8(R,M)||(h=!0),p.options.layoutRoot&&(t.relativeTarget=M,t.relativeTargetOrigin=R,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:f,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function mK(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function pK(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function gK(t){t.clearSnapshot()}function _A(t){t.clearMeasurements()}function bA(t){t.isLayoutDirty=!1}function yK(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function wA(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function vK(t){t.resolveTargetDelta()}function _K(t){t.calcProjection()}function bK(t){t.resetSkewAndRotation()}function wK(t){t.removeLeadSnapshot()}function EA(t,e,n){t.translate=kt(e.translate,0,n),t.scale=kt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function xA(t,e,n,r){t.min=kt(e.min,n.min,r),t.max=kt(e.max,n.max,r)}function EK(t,e,n,r){xA(t.x,e.x,n.x,r),xA(t.y,e.y,n.y,r)}function xK(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const TK={duration:.45,ease:[.4,0,.1,1]},TA=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),SA=TA("applewebkit/")&&!TA("chrome/")?Math.round:Fr;function AA(t){t.min=SA(t.min),t.max=SA(t.max)}function SK(t){AA(t.x),AA(t.y)}function O8(t,e,n){return t==="position"||t==="preserve-aspect"&&!IG(yA(e),yA(n),.2)}function AK(t){return t!==t.root&&t.scroll?.wasRoot}const CK=P8({attachResizeListener:(t,e)=>Bd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ky={current:void 0},V8=P8({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ky.current){const t=new CK({});t.mount(window),t.setOptions({layoutScroll:!0}),ky.current=t}return ky.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),kK={pan:{Feature:GG},drag:{Feature:qG,ProjectionNode:V8,MeasureLayout:k8}};function CA(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=r[s];o&&Tt.postRender(()=>o(e,hf(e)))}class RK extends Oa{mount(){const{current:e}=this.node;e&&(this.unmount=QF(e,(n,r)=>(CA(this.node,r,"Start"),s=>CA(this.node,s,"End"))))}unmount(){}}class NK extends Oa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=cf(Bd(this.node.current,"focus",()=>this.onFocus()),Bd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function kA(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=r[s];o&&Tt.postRender(()=>o(e,hf(e)))}class IK extends Oa{mount(){const{current:e}=this.node;e&&(this.unmount=tq(e,(n,r)=>(kA(this.node,r,"Start"),(s,{success:o})=>kA(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const qv=new WeakMap,Ry=new WeakMap,DK=t=>{const e=qv.get(t.target);e&&e(t)},MK=t=>{t.forEach(DK)};function PK({root:t,...e}){const n=t||document;Ry.has(n)||Ry.set(n,{});const r=Ry.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(MK,{root:t,...e})),r[s]}function OK(t,e,n){const r=PK(e);return qv.set(t,n),r.observe(t),()=>{qv.delete(t),r.unobserve(t)}}const VK={some:0,all:1};class LK extends Oa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:o}=e,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:VK[s]},c=f=>{const{isIntersecting:h}=f;if(this.isInView===h||(this.isInView=h,o&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:p,onViewportLeave:v}=this.node.getProps(),b=h?p:v;b&&b(f)};return OK(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(jK(e,n))&&this.startObserver()}unmount(){}}function jK({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const zK={inView:{Feature:LK},tap:{Feature:IK},focus:{Feature:NK},hover:{Feature:RK}},UK={layout:{ProjectionNode:V8,MeasureLayout:k8}},BK={...SG,...zK,...kK,...UK},Ny=Uq(BK,Jq),Er={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},yr={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function HK(){const[t,e]=B.useState(""),[n,r]=B.useState(""),[s,o]=B.useState(!1),[l,c]=B.useState(!1),[f,h]=B.useState(!1),[p,v]=B.useState(""),b=async O=>{O.preventDefault(),h(!0),v("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(yr.INVALID_EMAIL);if(n.length<6)throw new Error(yr.WEAK_PASSWORD);const j=s?EU:xU,{user:$}=await j(pb,t,n);console.info("Auth success • uid:",$.uid)}catch(L){v(R(L))}finally{h(!1)}},R=O=>{switch(O.code){case"auth/email-already-in-use":return yr.EMAIL_IN_USE;case"auth/invalid-email":return yr.INVALID_EMAIL;case"auth/weak-password":return yr.WEAK_PASSWORD;case"auth/user-not-found":return yr.USER_NOT_FOUND;case"auth/wrong-password":return yr.WRONG_PASSWORD;case"auth/too-many-requests":return yr.TOO_MANY_REQUESTS;case"auth/user-disabled":return"This account has been disabled. Please contact support.";default:return O.message||"Authentication error"}},M="w-full px-4 py-3 rounded-lg border bg-white/80 dark:bg-gray-800/80 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 transition";return A.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900/40 dark:bg-gray-950/60 backdrop-blur-sm p-4",children:A.jsxs(Ny.div,{initial:{opacity:0,scale:.96},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.25},className:"w-full max-w-md rounded-3xl shadow-lg bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 overflow-hidden",children:[A.jsxs("div",{className:"px-8 pt-8 pb-4 text-center",children:[A.jsx(O2,{mode:"wait",children:A.jsx(Ny.h2,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.25},className:"text-3xl font-semibold text-gray-900 dark:text-gray-100",children:s?"Create an account":"Welcome back"},s?"signup-header":"signin-header")}),A.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:s?"Start your AI‑powered journey.":"Sign in to continue."})]}),A.jsxs("form",{onSubmit:b,className:"px-8 pb-8 space-y-6",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),A.jsxs("div",{className:"relative",children:[A.jsx(ZH,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),A.jsx("input",{id:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:O=>e(O.target.value),placeholder:"you@example.com",className:`${M} pl-11`})]})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),A.jsxs("div",{className:"relative",children:[A.jsx(a$,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),A.jsx("input",{id:"password",type:l?"text":"password",autoComplete:s?"new-password":"current-password",required:!0,value:n,onChange:O=>r(O.target.value),placeholder:"••••••••",className:`${M} pl-11 pr-11`}),A.jsx("button",{type:"button",onClick:()=>c(O=>!O),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300","aria-label":l?"Hide password":"Show password",children:l?A.jsx(n$,{className:"h-5 w-5"}):A.jsx(i$,{className:"h-5 w-5"})})]})]}),A.jsx(O2,{children:p&&A.jsxs(Ny.div,{initial:{y:-6,opacity:0},animate:{y:0,opacity:1},exit:{y:-6,opacity:0},className:"flex items-start gap-3 rounded-lg border border-red-300 dark:border-red-800 bg-red-50 dark:bg-red-900/30 px-4 py-3 text-sm text-red-700 dark:text-red-300",role:"alert",children:[A.jsx(e$,{className:"h-5 w-5 flex-shrink-0"}),A.jsx("span",{children:p})]},"error")}),A.jsxs("button",{type:"submit",disabled:f,className:"inline-flex w-full items-center justify-center gap-2 rounded-lg bg-indigo-600 px-4 py-3 font-medium text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-indigo-500 dark:hover:bg-indigo-400",children:[f?A.jsxs("svg",{className:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}):s?A.jsx(l$,{className:"h-5 w-5"}):A.jsx(WH,{className:"h-5 w-5"}),A.jsx("span",{children:f?s?"Creating account…":"Signing in…":s?"Sign Up":"Sign In"})]})]}),A.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 px-8 py-4 text-center",children:[A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s?"Already have an account?":"New to TinkFlow?"}),A.jsx("button",{onClick:()=>o(O=>!O),type:"button",className:"mt-2 text-sm font-medium text-indigo-600 hover:text-indigo-500 focus:outline-none dark:text-indigo-400 dark:hover:text-indigo-300",children:s?"Sign In":"Create an account"})]})]})})}function $K({show:t,onHide:e,onConfirm:n,isCreating:r=!1}){const[s,o]=B.useState(""),[l,c]=B.useState(!0),f=b=>{const R=b.target.value;o(R),c(R.trim().length>0&&R.trim().length<=50)},h=b=>{b.preventDefault();const R=s.trim();R.length>0&&R.length<=50&&(n(R),o(""),c(!0))},p=()=>{o(""),c(!0),e()},v=b=>{b.key==="Enter"&&h(b)};return t?A.jsx("div",{className:"board-name-modal fixed inset-0 bg-black/60 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-[2001]",children:A.jsxs("div",{className:"bg-gray-800 dark:bg-gray-900 rounded-xl shadow-2xl p-6 w-full max-w-md border border-gray-700 dark:border-gray-600",children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h3",{className:"text-lg font-semibold text-white dark:text-white",children:"Create New Board"}),A.jsx("button",{onClick:p,className:`text-gray-400 dark:text-gray-400 hover:text-gray-200 dark:hover:text-gray-200 
                                 bg-gray-700/50 dark:bg-gray-800/50 hover:bg-gray-600/50 dark:hover:bg-gray-700/50
                                 border border-gray-600 dark:border-gray-700 rounded-lg w-8 h-8 flex items-center justify-center
                                 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500/20`,"aria-label":"Close",children:"×"})]}),A.jsxs("form",{onSubmit:h,className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-300 dark:text-gray-300 mb-2",children:"Board Name"}),A.jsx("input",{type:"text",value:s,onChange:f,onKeyDown:v,placeholder:"Enter board name...",maxLength:50,autoFocus:!0,className:`w-full px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border rounded-lg 
                                       text-white dark:text-white placeholder-gray-400 dark:placeholder-gray-500 
                                       focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40 
                                       transition-all duration-200 font-medium
                                       ${l?"border-gray-600/50 dark:border-gray-700/50 focus:border-blue-500/60 dark:focus:border-blue-400/60":"border-red-500/60 dark:border-red-500/60 focus:border-red-500/60 dark:focus:border-red-500/60"}`}),!l&&A.jsx("p",{className:"text-red-400 dark:text-red-400 text-sm mt-2",children:"Board name must be between 1 and 50 characters long."}),A.jsxs("p",{className:`text-xs mt-1 ${s.length===50?"text-red-400 dark:text-red-400":"text-gray-500 dark:text-gray-500"}`,children:[s.length,"/50 characters"]})]}),A.jsxs("div",{className:"flex gap-3 pt-4",children:[A.jsx("button",{type:"button",onClick:p,disabled:r,className:`flex-1 px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border border-gray-600/50 dark:border-gray-700/50
                                     text-gray-300 dark:text-gray-300 rounded-lg font-medium transition-all duration-200
                                     hover:bg-gray-600/60 dark:hover:bg-gray-700/60 hover:border-gray-500/60 dark:hover:border-gray-600/60
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20`,children:"Cancel"}),A.jsx("button",{type:"submit",disabled:!l||s.trim().length===0||r,className:`flex-1 px-4 py-3 bg-blue-600/80 dark:bg-blue-500/80 border border-blue-500/50 dark:border-blue-400/50
                                     text-white rounded-lg font-medium transition-all duration-200 
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     hover:bg-blue-500/90 dark:hover:bg-blue-400/90 hover:border-blue-400/60 dark:hover:border-blue-300/60
                                     focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40`,children:r?"Creating...":"Create Board"})]})]})]})}):null}function FK({allBoards:t,currentBoard:e,onSwitchBoard:n,onCreateBoard:r,onDeleteBoard:s,onSignOut:o,isLoading:l}){const[c,f]=B.useState(!1),[h,p]=B.useState(!1),[v,b]=B.useState(null),R=async j=>{try{f(!0),await r(j),p(!1)}catch($){console.error("Error in sidebar create board:",$)}finally{f(!1)}},M=()=>{p(!0)},O=()=>{p(!1)},L=(j,$)=>{j.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&s($)};return A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"left-0 top-0 w-[100%] h-screen bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:A.jsxs("div",{className:"flex flex-col h-full",children:[A.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/50",children:[A.jsx("h2",{className:"m-0 mb-3 text-lg font-semibold text-gray-900 dark:text-gray-100 tracking-tight",children:"TinkFlow Boards"}),A.jsx("button",{onClick:M,disabled:l||c,className:`w-full bg-blue-600 dark:bg-blue-600 text-white dark:text-white border border-blue-600 dark:border-blue-600 
                                      px-3 py-2 rounded-lg cursor-pointer text-base font-medium transition-all duration-200 
                                      ${l||c?"cursor-not-allowed opacity-60":"hover:bg-blue-700 dark:hover:bg-blue-700 hover:border-blue-700 dark:hover:border-blue-700 hover:-translate-y-0.5 hover:shadow-md"}`,children:c?"Creating...":"+ New Board"})]}),A.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:t.map(j=>{const $=e?.id===j.id,Y=v===j.id;return A.jsxs("div",{onClick:()=>!l&&n(j.id),onMouseEnter:()=>b(j.id),onMouseLeave:()=>b(null),className:`
                                        min-h-[44px] px-3 py-2.5 mb-1 rounded-lg flex justify-between items-center
                                        transition-all duration-200 cursor-pointer border font-medium text-lg leading-tight
                                        ${l?"cursor-not-allowed opacity-60":"cursor-pointer"}
                                        ${$?"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/30 text-blue-900 dark:text-blue-100 font-semibold shadow-sm":Y?"border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50 text-gray-900 dark:text-gray-100 shadow-sm":"border-transparent bg-transparent text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/30"}
                                    `,role:"button",tabIndex:0,onKeyDown:y=>{(y.key==="Enter"||y.key===" ")&&!l&&n(j.id)},children:[A.jsx("span",{className:`
                                        ${$?"font-semibold":"font-medium"} 
                                        flex-1 whitespace-nowrap overflow-hidden text-ellipsis 
                                        text-lg leading-tight
                                    `,children:j.name}),A.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[j.isOpen&&A.jsx("span",{className:"text-green-500 dark:text-green-400 text-base",children:"●"}),t.length>1&&A.jsx("button",{onClick:y=>{y.stopPropagation(),L(y,j.id)},title:"Delete board",className:`
                                                    w-5 h-5 bg-transparent border-none text-red-500 dark:text-red-400 
                                                    cursor-pointer text-lg leading-none flex items-center justify-center
                                                    rounded transition-all duration-150
                                                    ${Y?"opacity-100 visible hover:bg-red-50 dark:hover:bg-red-900/30":"opacity-0 invisible"}
                                                    hover:text-red-600 dark:hover:text-red-300
                                                `,children:"×"})]})]},j.id)})}),l&&A.jsx("div",{className:"p-3 text-center text-gray-500 dark:text-gray-400 text-base font-medium",children:"Loading boards..."}),A.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:A.jsx("button",{onClick:o,className:`w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 
                                     bg-transparent text-gray-700 dark:text-gray-300 cursor-pointer text-base font-medium
                                     transition-all duration-200
                                     hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:border-gray-400 dark:hover:border-gray-500 
                                     hover:text-gray-900 dark:hover:text-gray-100`,children:"Sign Out"})})]})}),A.jsx($K,{show:h,onHide:O,onConfirm:R,isCreating:c})]})}const L8=B.createContext(void 0),qK=()=>{const t=B.useContext(L8);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},GK=({children:t})=>{const[e,n]=B.useState(()=>{const s=localStorage.getItem("theme");return s||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});B.useEffect(()=>{const s=window.document.documentElement;s.classList.remove("light","dark"),s.classList.add(e),localStorage.setItem("theme",e)},[e]);const r=()=>{n(s=>s==="light"?"dark":"light")};return A.jsx(L8.Provider,{value:{theme:e,toggleTheme:r},children:t})},j8=()=>{const{theme:t,toggleTheme:e}=qK();return A.jsx("button",{onClick:e,className:`p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 
                     hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600
                     hover:border-gray-300 dark:hover:border-gray-500 transition-all duration-200 
                     focus:outline-none focus:ring-2 focus:ring-blue-500/30 dark:focus:ring-blue-400/30
                     shadow-sm hover:shadow-md`,title:`Switch to ${t==="light"?"dark":"light"} mode`,"aria-label":`Switch to ${t==="light"?"dark":"light"} mode`,children:t==="light"?A.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:A.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):A.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:A.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})})})};function KK({name:t,onSetName:e,user:n,isSaving:r}){const[s,o]=B.useState(!1),[l,c]=B.useState(t||"");B.useEffect(()=>{c(t||"")},[t]);const f=p=>{p.key==="Enter"&&(e(l),o(!1))},h=()=>{o(!0),c(t||"")};return A.jsx(A.Fragment,{children:A.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:A.jsx("div",{className:"max-w-none mx-auto px-4",children:A.jsxs("header",{className:"flex justify-between items-center py-3",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsxs("div",{className:"flex items-center space-x-2",children:[A.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-sm",children:A.jsx("span",{className:"text-white font-bold text-sm",children:"T"})}),A.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"TinkFlow"})]}),A.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"•"}),s?A.jsx("input",{type:"text",value:l,onChange:p=>c(p.target.value),onKeyDown:f,onBlur:()=>{e(l),o(!1)},className:`bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 
                                             rounded-md px-2 py-1 text-gray-900 dark:text-gray-100 text-sm min-w-[120px]
                                             focus:outline-none focus:border-blue-500 dark:focus:border-blue-400 focus:ring-2 focus:ring-blue-500/20`,autoFocus:!0}):A.jsx("button",{onClick:h,className:`bg-transparent border-none text-gray-600 dark:text-gray-400 text-sm cursor-pointer 
                                             px-2 py-1 rounded-md transition-all duration-150 ease-in-out
                                             hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-100`,children:t||"Untitled Board"})]}),A.jsxs("div",{className:"flex items-center gap-3",children:[r&&A.jsxs("div",{className:`text-green-600 dark:text-green-400 text-sm flex items-center gap-2 
                                               bg-green-50 dark:bg-green-900/20 px-3 py-1.5 rounded-full border border-green-200 dark:border-green-700/50
                                               animate-pulse`,children:[A.jsx("div",{className:"w-2 h-2 bg-green-500 dark:bg-green-400 rounded-full animate-bounce"}),A.jsx("span",{className:"font-medium",children:"Saving..."})]}),A.jsx(j8,{}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-gray-400 to-gray-500 rounded-full flex items-center justify-center",children:A.jsx("span",{className:"text-white font-medium text-xs",children:n?.isAnonymous?"G":n?.email?.charAt(0).toUpperCase()||"U"})}),A.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm font-medium",children:n?.isAnonymous?"Guest":n?.email?.split("@")[0]||"User"})]})]})]})})})})}const YK=({notification:t,onRemove:e})=>{const n=s=>{switch(s){case"success":return"✅";case"error":return"❌";case"warning":return"⚠️";case"info":return"ℹ️";default:return"📄"}},r=s=>{switch(s){case"success":return"bg-green-900/20 dark:bg-green-900/30 border-green-500/30 dark:border-green-500/40 text-green-300 dark:text-green-400";case"error":return"bg-red-900/20 dark:bg-red-900/30 border-red-500/30 dark:border-red-500/40 text-red-300 dark:text-red-400";case"warning":return"bg-yellow-900/20 dark:bg-yellow-900/30 border-yellow-500/30 dark:border-yellow-500/40 text-yellow-300 dark:text-yellow-400";case"info":return"bg-blue-900/20 dark:bg-blue-900/30 border-blue-500/30 dark:border-blue-500/40 text-blue-300 dark:text-blue-400";default:return"bg-gray-900/20 dark:bg-gray-900/30 border-gray-500/30 dark:border-gray-500/40 text-gray-300 dark:text-gray-400"}};return A.jsxs("div",{className:`notification relative min-w-80 max-w-md p-4 rounded-xl border shadow-2xl backdrop-blur-sm                         transform transition-all duration-300 ease-out hover:scale-[1.02] hover:shadow-3xl                        ${r(t.type)}`,children:[" ",A.jsxs("div",{className:"flex items-start gap-3",children:[" ",A.jsxs("span",{className:"text-lg flex-shrink-0 mt-0.5",children:[" ",n(t.type)," "]})," ",A.jsxs("div",{className:"flex-1 min-w-0",children:[" ",A.jsxs("p",{className:"text-sm font-medium leading-5 break-words",children:[" ",t.message," "]})," "]})," ",A.jsxs("button",{onClick:()=>e(t.id),className:"flex-shrink-0 text-gray-400 dark:text-gray-500 hover:text-gray-200 dark:hover:text-gray-300                              hover:bg-gray-700/50 dark:hover:bg-gray-600/50                              rounded-full p-1 transition-all duration-200                              focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20","aria-label":"Close notification",children:[" ",A.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[" ",A.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})," "]})," "]})," "]})," "]})},XK=({notifications:t,onRemove:e})=>A.jsxs("div",{className:"notification-container fixed top-4 right-4 space-y-3 z-[2000] pointer-events-none",children:[" ",t.map(n=>A.jsxs("div",{className:"pointer-events-auto",children:[" ",A.jsx(YK,{notification:n,onRemove:e})," "]},n.id))," "]});function WK({onLogin:t}){return A.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 antialiased",children:[" "," ",A.jsxs("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50",children:[" ",A.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",A.jsxs("div",{className:"flex justify-between items-center py-4",children:[" ",A.jsxs("div",{className:"flex items-center space-x-3",children:[" ",A.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",A.jsx("span",{className:"text-white font-bold text-lg",children:"T"})," "]})," ",A.jsxs("div",{className:"flex flex-col",children:[" ",A.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white tracking-tight",children:"TinkFlow"})," ",A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"AI Learning Platform"})," "]})," "]})," ",A.jsxs("div",{className:"flex items-center gap-4",children:[" ",A.jsx(j8,{})," ",A.jsxs("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors duration-200",children:[" ","Get Started"," "]})," "]})," "]})," "]})," "]})," "," ",A.jsxs("section",{className:"relative overflow-hidden",children:[" ",A.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-32",children:[" ",A.jsxs("div",{className:"text-center",children:[" ",A.jsxs("div",{className:"inline-flex items-center gap-2 bg-indigo-50 dark:bg-indigo-900/20 px-4 py-2 rounded-full mb-8",children:[" ",A.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"})," ",A.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 font-medium text-sm",children:"AI-Powered Concept Learning"})," "]})," ",A.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-gray-900 dark:text-white mb-6 leading-tight",children:[" ","Learn & Tinker with"," ",A.jsxs("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent block",children:[" ","AI-Powered Concepts"," "]})," "]})," ",A.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-3xl mx-auto leading-relaxed",children:[" ","TinkFlow is the ultimate AI-powered platform for exploring, understanding, and experimenting with new concepts. Transform your learning journey with interactive visual flows and intelligent insights."," "]})," ",A.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[" ",A.jsxs("button",{onClick:t,className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning Now"," "]})," ",A.jsxs("button",{className:"px-8 py-4 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-semibold text-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",children:[" ","Watch Demo"," "]})," "]})," "]})," "]})," "," ",A.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-indigo-400 to-purple-500 rounded-full opacity-10 blur-3xl"})," ",A.jsx("div",{className:"absolute top-1/4 right-1/4 w-64 h-64 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full opacity-10 blur-2xl"})," "]})," "," ",A.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",A.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",A.jsxs("div",{className:"text-center mb-16",children:[" ",A.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Everything You Need to Learn"," "]})," ",A.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","AI-powered tools and features designed to accelerate your learning and conceptual understanding"," "]})," "]})," ",A.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",A.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-indigo-200 dark:border-indigo-700/50 hover:transform hover:-translate-y-1",children:[" ",A.jsxs("div",{className:"w-14 h-14 bg-indigo-500 rounded-xl flex items-center justify-center mb-6",children:[" ",A.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})," "]})," "]})," ",A.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI-Powered Insights"," "]})," ",A.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Get intelligent explanations and connections between concepts powered by advanced AI that understands your learning style."," "]})," "]})," ",A.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-purple-200 dark:border-purple-700/50 hover:transform hover:-translate-y-1",children:[" ",A.jsxs("div",{className:"w-14 h-14 bg-purple-500 rounded-xl flex items-center justify-center mb-6",children:[" ",A.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"})," "]})," "]})," ",A.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Interactive Visual Flows"," "]})," ",A.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Build and explore concept maps with interactive nodes that respond to your curiosity and create dynamic learning pathways."," "]})," "]})," ",A.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-green-200 dark:border-green-700/50 hover:transform hover:-translate-y-1",children:[" ",A.jsxs("div",{className:"w-14 h-14 bg-green-500 rounded-xl flex items-center justify-center mb-6",children:[" ",A.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})," "]})," "]})," ",A.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Experimentation Sandbox"," "]})," ",A.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Tinker with concepts in a safe, guided environment where you can test ideas and see instant results with AI feedback."," "]})," "]})," "]})," "]})," "]})," "," ",A.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",A.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",A.jsxs("div",{className:"text-center mb-16",children:[" ",A.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","How TinkFlow Works"," "]})," ",A.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Three simple steps to unlock your learning potential with AI-powered concept exploration"," "]})," "]})," ",A.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",A.jsxs("div",{className:"text-center",children:[" ",A.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",A.jsx("span",{className:"text-white font-bold text-xl",children:"1"})," "]})," ",A.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Input Your Concept"," "]})," ",A.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Start by entering any topic, question, or concept you want to explore. Our AI understands context and complexity."," "]})," "]})," ",A.jsxs("div",{className:"text-center",children:[" ",A.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",A.jsx("span",{className:"text-white font-bold text-xl",children:"2"})," "]})," ",A.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI Generates Flow"," "]})," ",A.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Watch as TinkFlow creates an interactive visual map with connected nodes, each representing key aspects of your concept."," "]})," "]})," ",A.jsxs("div",{className:"text-center",children:[" ",A.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",A.jsx("span",{className:"text-white font-bold text-xl",children:"3"})," "]})," ",A.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Explore & Learn"," "]})," ",A.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Click on any node to dive deeper, ask questions, and watch new connections emerge as you explore your learning path."," "]})," "]})," "]})," "]})," "]})," "," ",A.jsxs("section",{className:"py-20 bg-gradient-to-r from-indigo-500 to-purple-600",children:[" ",A.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",A.jsxs("div",{className:"grid md:grid-cols-4 gap-8 text-center",children:[" ",A.jsxs("div",{className:"text-white",children:[" ",A.jsx("div",{className:"text-4xl font-bold mb-2",children:"27K+"})," ",A.jsx("div",{className:"text-indigo-100",children:"Concepts Explored"})," "]})," ",A.jsxs("div",{className:"text-white",children:[" ",A.jsx("div",{className:"text-4xl font-bold mb-2",children:"2.4K+"})," ",A.jsx("div",{className:"text-indigo-100",children:"Active Learners"})," "]})," ",A.jsxs("div",{className:"text-white",children:[" ",A.jsx("div",{className:"text-4xl font-bold mb-2",children:"98%"})," ",A.jsx("div",{className:"text-indigo-100",children:"Learning Success"})," "]})," ",A.jsxs("div",{className:"text-white",children:[" ",A.jsx("div",{className:"text-4xl font-bold mb-2",children:"24/7"})," ",A.jsx("div",{className:"text-indigo-100",children:"AI Support"})," "]})," "]})," "]})," "]})," "," ",A.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",A.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",A.jsxs("div",{className:"text-center mb-16",children:[" ",A.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Perfect for Every Learning Style"," "]})," ",A.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Whether you're a student, researcher, or curious mind, TinkFlow adapts to your learning needs"," "]})," "]})," ",A.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[" ",A.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/10 dark:to-blue-800/10 p-8 rounded-2xl border border-blue-200 dark:border-blue-700/30",children:[" ",A.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","🎓 Academic Learning"," "]})," ",A.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Break down complex academic subjects into digestible, interconnected concepts. Perfect for studying sciences, humanities, and technical topics."," "]})," ",A.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",A.jsx("li",{children:"• Research paper analysis"})," ",A.jsx("li",{children:"• Concept mapping for exams"})," ",A.jsx("li",{children:"• Cross-disciplinary connections"})," "]})," "]})," ",A.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/10 dark:to-purple-800/10 p-8 rounded-2xl border border-purple-200 dark:border-purple-700/30",children:[" ",A.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","💡 Creative Exploration"," "]})," ",A.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Explore ideas, brainstorm solutions, and discover unexpected connections. Great for creative professionals and innovators."," "]})," ",A.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",A.jsx("li",{children:"• Idea generation workflows"})," ",A.jsx("li",{children:"• Problem-solving frameworks"})," ",A.jsx("li",{children:"• Innovation mapping"})," "]})," "]})," ",A.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/10 dark:to-green-800/10 p-8 rounded-2xl border border-green-200 dark:border-green-700/30",children:[" ",A.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","🔬 Technical Deep Dives"," "]})," ",A.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Understand complex systems, architectures, and technologies through interactive exploration and AI-guided explanations."," "]})," ",A.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",A.jsx("li",{children:"• System architecture learning"})," ",A.jsx("li",{children:"• Technology stack exploration"})," ",A.jsx("li",{children:"• Code concept mapping"})," "]})," "]})," ",A.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/10 dark:to-orange-800/10 p-8 rounded-2xl border border-orange-200 dark:border-orange-700/30",children:[" ",A.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","🚀 Professional Development"," "]})," ",A.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Build skills, understand industry trends, and create learning paths for career advancement with AI-powered insights."," "]})," ",A.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",A.jsx("li",{children:"• Skill gap analysis"})," ",A.jsx("li",{children:"• Career pathway planning"})," ",A.jsx("li",{children:"• Industry trend mapping"})," "]})," "]})," "]})," "]})," "]})," "," ",A.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",A.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[" ",A.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-6",children:[" ","Ready to Transform Your Learning?"," "]})," ",A.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10",children:[" ","Join thousands of learners who are already exploring concepts in revolutionary ways with TinkFlow's AI-powered platform."," "]})," ",A.jsxs("button",{onClick:t,className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-12 py-4 rounded-xl text-lg font-semibold hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning for Free"," "]})," ",A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:[" ","No credit card required • Get started in seconds"," "]})," "]})," "]})," "," ",A.jsxs("footer",{className:"bg-gray-900 text-white py-12",children:[" ",A.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",A.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[" ",A.jsxs("div",{className:"col-span-1",children:[" ",A.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[" ",A.jsxs("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",A.jsx("span",{className:"text-white font-bold text-sm",children:"T"})," "]})," ",A.jsx("span",{className:"text-xl font-bold",children:"TinkFlow"})," "]})," ",A.jsxs("p",{className:"text-gray-400 text-sm",children:[" ","AI-powered concept learning platform for curious minds."," "]})," "]})," ",A.jsxs("div",{children:[" ",A.jsx("h4",{className:"font-semibold mb-4",children:"Product"})," ",A.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",A.jsx("li",{children:A.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Features"})})," ",A.jsx("li",{children:A.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Pricing"})})," ",A.jsx("li",{children:A.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"API"})})," "]})," "]})," ",A.jsxs("div",{children:[" ",A.jsx("h4",{className:"font-semibold mb-4",children:"Resources"})," ",A.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",A.jsx("li",{children:A.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Documentation"})})," ",A.jsx("li",{children:A.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Tutorials"})})," ",A.jsx("li",{children:A.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Blog"})})," "]})," "]})," ",A.jsxs("div",{children:[" ",A.jsx("h4",{className:"font-semibold mb-4",children:"Company"})," ",A.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",A.jsx("li",{children:A.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About"})})," ",A.jsx("li",{children:A.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})})," ",A.jsx("li",{children:A.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy"})})," "]})," "]})," "]})," ",A.jsxs("div",{className:"border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[" ",A.jsxs("p",{className:"text-gray-400 text-sm",children:[" ","© 2025 TinkFlow. All rights reserved."," "]})," ",A.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[" ",A.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",A.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",A.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})," "]})," "]})," ",A.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",A.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",A.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})," "]})," "]})," ",A.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",A.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",A.jsx("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.747.099.12.112.225.085.344-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.001 12.017z"})," "]})," "]})," "]})," "]})," "]})," "]})," "]})}const Ri={TTL:5*60*1e3,STORAGE_PREFIX:"launchhacks_cache_",MAX_CACHE_SIZE:50};class QK{memoryCache=new Map;pendingRequests=new Map;stats={hits:0,misses:0,evictions:0,reads:0};generateKey(e,n){return`${e}_${n}`}isValid(e){return e.expiresAt>Date.now()}getFromMemory(e){const n=this.memoryCache.get(e);return n&&this.isValid(n)?(this.stats.hits++,n.data):(n&&this.memoryCache.delete(e),null)}getFromStorage(e){try{const n=localStorage.getItem(Ri.STORAGE_PREFIX+e);if(n){const r=JSON.parse(n);if(this.isValid(r))return this.memoryCache.set(e,r),this.stats.hits++,r.data;localStorage.removeItem(Ri.STORAGE_PREFIX+e)}}catch(n){console.warn("Error reading from cache storage:",n)}return null}store(e,n,r){const s=Date.now(),o=r||Ri.TTL,l={data:n,timestamp:s,expiresAt:s+o};this.memoryCache.set(e,l);try{localStorage.setItem(Ri.STORAGE_PREFIX+e,JSON.stringify(l))}catch(c){console.warn("Error storing to local storage:",c),this.cleanupStorage()}this.memoryCache.size>Ri.MAX_CACHE_SIZE&&this.evictOldest()}cleanupStorage(){const e=[],n=Date.now();for(let r=0;r<localStorage.length;r++){const s=localStorage.key(r);if(s&&s.startsWith(Ri.STORAGE_PREFIX))try{const o=localStorage.getItem(s);o&&JSON.parse(o).expiresAt<n&&e.push(s)}catch{e.push(s)}}e.forEach(r=>{localStorage.removeItem(r),this.stats.evictions++})}evictOldest(){let e="",n=Date.now();for(const[r,s]of this.memoryCache.entries())s.timestamp<n&&(n=s.timestamp,e=r);e&&(this.memoryCache.delete(e),this.stats.evictions++)}async get(e,n,r,s){const o=this.generateKey(e,n),l=this.getFromMemory(o);if(l!==null)return l;const c=this.getFromStorage(o);if(c!==null)return c;const f=this.pendingRequests.get(o);if(f)return f;this.stats.misses++,this.stats.reads++;const h=r().then(p=>(this.store(o,p,s),this.pendingRequests.delete(o),p)).catch(p=>{throw this.pendingRequests.delete(o),p});return this.pendingRequests.set(o,h),h}set(e,n,r,s){const o=this.generateKey(e,n);this.store(o,r,s)}invalidate(e,n){const r=this.generateKey(e,n);this.memoryCache.delete(r),localStorage.removeItem(Ri.STORAGE_PREFIX+r)}invalidateType(e){Array.from(this.memoryCache.keys()).filter(s=>s.startsWith(e+"_")).forEach(s=>this.memoryCache.delete(s));const r=[];for(let s=0;s<localStorage.length;s++){const o=localStorage.key(s);o&&o.startsWith(Ri.STORAGE_PREFIX+e+"_")&&r.push(o)}r.forEach(s=>localStorage.removeItem(s))}clear(){this.memoryCache.clear(),this.pendingRequests.clear();const e=[];for(let n=0;n<localStorage.length;n++){const r=localStorage.key(n);r&&r.startsWith(Ri.STORAGE_PREFIX)&&e.push(r)}e.forEach(n=>localStorage.removeItem(n))}getStats(){const e=this.stats.hits+this.stats.misses;return{...this.stats,hitRate:e>0?this.stats.hits/e*100:0,cacheSize:this.memoryCache.size}}async preloadUserData(e,n){try{const r=await this.get("boards",e,n,Ri.TTL*2);r.find(o=>o.isOpen)&&console.log(`Preloaded data for user ${e} with ${r.length} boards`)}catch(r){console.warn("Error preloading user data:",r)}}}const mn=new QK,ZK=()=>mn.getStats(),JK=({isVisible:t,onToggle:e})=>{const n=ZK();return t?A.jsxs("div",{className:"fixed bottom-4 right-4 bg-white border border-gray-200 rounded-lg shadow-lg p-4 z-50 max-w-sm",children:[A.jsxs("div",{className:"flex items-center justify-between mb-3",children:[A.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Cache Statistics"}),A.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 text-lg",title:"Hide Cache Stats",children:"×"})]}),A.jsxs("div",{className:"space-y-2 text-xs",children:[A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"Hit Rate:"}),A.jsxs("span",{className:`font-medium ${n.hitRate>70?"text-green-600":n.hitRate>40?"text-yellow-600":"text-red-600"}`,children:[n.hitRate.toFixed(1),"%"]})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"Cache Hits:"}),A.jsx("span",{className:"font-medium text-green-600",children:n.hits})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"Cache Misses:"}),A.jsx("span",{className:"font-medium text-red-600",children:n.misses})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"DB Reads:"}),A.jsx("span",{className:"font-medium text-blue-600",children:n.reads})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"Cache Size:"}),A.jsx("span",{className:"font-medium",children:n.cacheSize})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"Evictions:"}),A.jsx("span",{className:"font-medium text-orange-600",children:n.evictions})]}),A.jsx("div",{className:"pt-2 border-t border-gray-100",children:A.jsx("div",{className:"text-center text-gray-500",children:n.reads<10?"Gathering data...":`${(n.hits/(n.hits+n.misses)*100).toFixed(1)}% cache efficiency`})})]}),A.jsx("div",{className:"mt-3 text-xs text-gray-400 text-center",children:n.reads===0?"No database reads yet":`Saved ${n.hits} database reads`})]}):A.jsx("button",{onClick:e,className:"fixed bottom-4 right-4 bg-blue-600 text-white p-2 rounded-full shadow-lg hover:bg-blue-700 transition-colors z-50 text-xs",title:"Show Cache Stats",children:"📊"})};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eY=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tY=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),RA=t=>{const e=tY(t);return e.charAt(0).toUpperCase()+e.slice(1)},z8=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),nY=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rY={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iY=B.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:l,...c},f)=>B.createElement("svg",{ref:f,...rY,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:z8("lucide",s),...!o&&!nY(c)&&{"aria-hidden":"true"},...c},[...l.map(([h,p])=>B.createElement(h,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=(t,e)=>{const n=B.forwardRef(({className:r,...s},o)=>B.createElement(iY,{ref:o,iconNode:e,className:z8(`lucide-${eY(RA(t))}`,`lucide-${t}`,r),...s}));return n.displayName=RA(t),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sY=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Gv=Kn("bot",sY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aY=[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]],oY=Kn("gavel",aY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lY=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],uY=Kn("grip-vertical",lY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cY=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],dY=Kn("hash",cY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],hY=Kn("info",fY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mY=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],pY=Kn("lightbulb",mY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gY=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],U8=Kn("loader-circle",gY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yY=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],vY=Kn("maximize-2",yY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Y=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],B8=Kn("message-square",_Y);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bY=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],wY=Kn("minimize-2",bY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EY=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],xY=Kn("send",EY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TY=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],SY=Kn("settings",TY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AY=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Hd=Kn("sparkles",AY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CY=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],H8=Kn("user",CY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kY=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],RY=Kn("x",kY),Iy=async(t,e,n,r)=>{try{const s=ef(wr,"chatMessages");await bv(s,{role:"user",content:t,timestamp:ft.now(),userId:r||null,boardId:n}),await bv(s,{role:"assistant",content:e,timestamp:ft.now(),userId:r||null,boardId:n}),await NY(n,t,r),console.log("Chat conversation saved successfully for board:",n)}catch(s){throw console.error("Error saving chat conversation:",s),s}},NY=async(t,e,n)=>{try{const r=ef(wr,"chatSessions"),s=fR(r,hR("boardId","==",t)),o=await Rp(s);if(o.empty)await bv(r,{boardId:t,userId:n||null,title:e.substring(0,50)+(e.length>50?"...":""),createdAt:ft.now(),updatedAt:ft.now(),messageCount:2});else{const l=o.docs[0],c=l.data();await Ez(l.ref,{updatedAt:ft.now(),messageCount:(c.messageCount||0)+2})}}catch(r){throw console.error("Error updating chat session:",r),r}},IY=async()=>{try{await CU(pb),console.log("User signed out successfully")}catch(t){throw console.error("Error signing out:",t),t}},$8=()=>{const[t,e]=B.useState(null);return B.useEffect(()=>{const r=AU(pb,s=>{e(s),s?console.log("User signed in:",s.uid):console.log("No user signed in")});return()=>r()},[]),{user:t,signOut:async()=>{try{await IY(),e(null)}catch(r){console.error("Error in sign out:",r)}}}};class DY{nodes;setNodes;onNodesChange;onEdgesChange;getLastTwoLayouts;addLayout;saveCallback;constructor(e,n,r,s,o,l,c){this.nodes=e,this.setNodes=n,this.onNodesChange=r,this.onEdgesChange=s,this.getLastTwoLayouts=o,this.addLayout=l,this.saveCallback=c}async createKnowledgeNode(e){try{let n,r;if(e.parentNodeId){const o=this.nodes.find(l=>l.id===e.parentNodeId);o?(n=o,r=o.position):(r=e.position||{x:400,y:300},n=this.nodes[0]||{id:"virtual-source",position:r,data:{myColor:"#3b82f6"}})}else r=e.position||this.getSmartPosition(),n=this.nodes[0]||{id:"virtual-source",position:r,data:{myColor:"#3b82f6"}};const s=vb({word:e.title},n.id,r,"draggableEditable",this.nodes,this.setNodes,this.onNodesChange,this.onEdgesChange,n.data?.myColor,e.description,void 0,!1,void 0,"default",this.saveCallback,this.getLastTwoLayouts,this.addLayout);return{success:!!s,error:s?void 0:"Failed to create node"}}catch(n){return console.error("Node creation failed:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async createConceptMap(e){return this.createKnowledgeNode(e)}async createFlowchart(e){return this.createKnowledgeNode(e)}getSmartPosition(e){if(!e)if(this.nodes.length>0){const s=this.nodes.reduce((l,c)=>l+c.position.x,0)/this.nodes.length,o=this.nodes.reduce((l,c)=>l+c.position.y,0)/this.nodes.length;e={x:s,y:o}}else e={x:400,y:300};const n=200,r=Math.random()*2*Math.PI;return{x:e.x+Math.cos(r)*n,y:e.y+Math.sin(r)*n}}updateNodes(e){this.nodes=e}}class MY{nodeCreationService;constructor(e){this.nodeCreationService=e}async executeTool(e){const{function:n}=e,r=n.name;let s;try{s=JSON.parse(n.arguments)}catch{throw new Error(`Invalid tool arguments: ${n.arguments}`)}switch(r){case"create_knowledge_node":return await this.createKnowledgeNode(s);case"create_concept_map":return await this.createConceptMap(s);case"create_flowchart":return await this.createFlowchart(s);default:throw new Error(`Unknown tool: ${r}`)}}async createKnowledgeNode(e){const n={title:e.title,description:e.description,layout:e.layout,position:e.position,parentNodeId:e.parentNodeId,boardId:"current"},r=await this.nodeCreationService.createKnowledgeNode(n);if(r.success)return`Created knowledge node: "${e.title}"`;throw new Error(r.error||"Failed to create knowledge node")}async createConceptMap(e){const n={title:e.title,description:e.description,layout:4,parentNodeId:e.parentNodeId,boardId:"current"},r=await this.nodeCreationService.createConceptMap(n);if(r.success)return`Created concept map: "${e.title}"`;throw new Error(r.error||"Failed to create concept map")}async createFlowchart(e){const n={title:e.title,description:e.description,layout:3,parentNodeId:e.parentNodeId,boardId:"current"},r=await this.nodeCreationService.createFlowchart(n);if(r.success)return`Created flowchart: "${e.title}"`;throw new Error(r.error||"Failed to create flowchart")}getAvailableParentNodes(){return[]}}const PY=({className:t="",currentBoardId:e,currentBoardName:n="Current Board",nodes:r=[],setNodes:s,onNodesChange:o,onEdgesChange:l,getLastTwoLayouts:c,addLayout:f})=>{const[h,p]=B.useState([]),[v,b]=B.useState(""),[R,M]=B.useState(!1),[O,L]=B.useState(!1),[j,$]=B.useState(!0),Y=B.useRef(null),y=B.useRef(null),{user:E}=$8(),w=B.useMemo(()=>{if(!s||!o||!l||!c||!f)return null;const C=new DY(r,s,o,l,c,f);return new MY(C)},[r,s,o,l,c,f]),x=()=>{Y.current?.scrollIntoView({behavior:"smooth"})};B.useEffect(()=>{x()},[h]);const S=async C=>{if(C.preventDefault(),!v.trim()||R)return;const D=v.trim(),H={id:Date.now().toString(),role:"user",content:D},V={id:(Date.now()+1).toString(),role:"assistant",content:"",isStreaming:!0};p(k=>[...k,H,V]),b(""),M(!0);let U="";const Q=async k=>{if(!w)throw new Error("Node creation tools not available - missing board management");return w.nodeCreationService.updateNodes(r),await w.executeTool(k)};try{await fH(D,k=>{U+=k,p(F=>F.map(G=>G.id===V.id?{...G,content:G.content+k}:G))},async()=>{p(k=>k.map(F=>F.id===V.id?{...F,isStreaming:!1}:F)),M(!1),L(!0);try{e?(await Iy(D,U,e,E?.uid),console.log("✅ Chat conversation saved successfully to Firestore"),console.log(`📊 Board ID: ${e}`),console.log(`👤 User ID: ${E?.uid||"Anonymous"}`)):console.warn("⚠️ No current board ID available, cannot save chat")}catch(k){console.error("❌ Error saving chat conversation:",k)}finally{L(!1)}},k=>{console.error("Streaming error:",k);const F="Sorry, I encountered an error. Please try again.";p(G=>G.map(X=>X.id===V.id?{...X,content:F,isStreaming:!1}:X)),M(!1),e&&Iy(D,F,e,E?.uid).catch(G=>{console.error("Error saving failed chat conversation:",G)})},{enableTools:j&&!!w,availableTools:dH,onToolCall:Q,currentBoardId:e})}catch(k){console.error("Chat error:",k);const F="Sorry, I encountered an error. Please try again.";p(G=>G.map(X=>X.id===V.id?{...X,content:F,isStreaming:!1}:X)),M(!1),e&&Iy(D,F,e,E?.uid).catch(G=>{console.error("Error saving failed chat conversation:",G)})}setTimeout(()=>{y.current?.focus()},100)},N=C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),S(C))};return A.jsxs("div",{className:`flex flex-col h-full ${t}`,children:[A.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-2 space-y-3",children:[h.length===0&&A.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-8",children:[A.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg",children:A.jsx(Gv,{className:"w-8 h-8 text-white"})}),A.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"AI Assistant Ready"}),A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 max-w-xs mx-auto leading-relaxed",children:"Ask me anything and I'll help you with intelligent responses and node creation!"}),A.jsxs("div",{className:"space-y-3 mt-6",children:[w&&A.jsxs("div",{className:"mx-auto max-w-xs px-4 py-3 bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-xl border border-emerald-200 dark:border-emerald-800",children:[A.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[A.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),A.jsx("p",{className:"text-xs font-semibold text-emerald-700 dark:text-emerald-300",children:"Node Creation Tools Active"})]}),A.jsx("p",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:"I can create knowledge nodes, concept maps, and flowcharts"})]}),e?A.jsxs("div",{className:"mx-auto max-w-xs px-4 py-3 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl border border-blue-200 dark:border-blue-800",children:[A.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-1",children:[A.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),A.jsx("p",{className:"text-xs font-semibold text-blue-700 dark:text-blue-300",children:"Board Connected"})]}),A.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium",children:n}),A.jsx("p",{className:"text-xs text-blue-500 dark:text-blue-500 mt-1",children:"Conversations will be saved"})]}):A.jsxs("div",{className:"mx-auto max-w-xs px-4 py-3 bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-xl border border-amber-200 dark:border-amber-800",children:[A.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-1",children:[A.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full animate-pulse"}),A.jsx("p",{className:"text-xs font-semibold text-amber-700 dark:text-amber-300",children:"No Board Selected"})]}),A.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400",children:"Conversations won't be saved"})]})]})]}),h.map(C=>A.jsxs("div",{className:`flex items-start gap-3 ${C.role==="user"?"flex-row-reverse":""}`,children:[A.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center shadow-sm ${C.role==="user"?"bg-gradient-to-br from-blue-500 to-purple-600 text-white":"bg-gradient-to-br from-emerald-500 to-teal-600 text-white"}`,children:C.role==="user"?A.jsx(H8,{className:"w-4 h-4"}):A.jsx(Gv,{className:"w-4 h-4"})}),A.jsxs("div",{className:`flex-1 max-w-[280px] ${C.role==="user"?"text-right":""}`,children:[A.jsx("div",{className:`inline-block px-4 py-2.5 rounded-2xl shadow-sm text-sm leading-relaxed ${C.role==="user"?"bg-gradient-to-br from-blue-500 to-purple-600 text-white rounded-tr-md":"bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 border border-gray-200 dark:border-gray-700 rounded-tl-md"}`,children:A.jsxs("div",{className:"whitespace-pre-wrap break-words",children:[C.content,C.isStreaming&&A.jsx("span",{className:"inline-block w-1.5 h-4 bg-current ml-1 animate-pulse rounded-sm"})]})}),C.role==="assistant"&&C.isStreaming&&A.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-gray-500 dark:text-gray-400",children:[A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsxs("div",{className:"flex space-x-1",children:[A.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce"}),A.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),A.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),A.jsx("span",{className:"ml-2",children:"Thinking..."})]}),w&&j&&A.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-emerald-50 dark:bg-emerald-900/20 rounded-full",children:[A.jsx("div",{className:"w-1 h-1 bg-emerald-500 rounded-full animate-pulse"}),A.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 text-xs",children:"Tools Ready"})]})]})]})]},C.id)),A.jsx("div",{ref:Y})]}),A.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50",children:[w&&A.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"AI Tools:"}),A.jsx("button",{onClick:()=>$(!j),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-all duration-200 ${j?"bg-gradient-to-r from-emerald-500 to-emerald-600":"bg-gray-300 dark:bg-gray-600"}`,children:A.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform duration-200 ${j?"translate-x-5":"translate-x-1"}`})})]}),j&&A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"}),A.jsx("span",{className:"text-xs text-emerald-600 dark:text-emerald-400 font-medium",children:"Active"})]})]}),A.jsxs("div",{className:"p-4",children:[w&&j&&v.length===0&&h.length===0&&A.jsxs("div",{className:"mb-3",children:[A.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Try asking:"}),A.jsx("div",{className:"flex flex-wrap gap-2",children:["Create a concept map about AI","Make a flowchart for user login","Build nodes on machine learning"].map((C,D)=>A.jsx("button",{onClick:()=>b(C),className:`text-xs px-3 py-1.5 bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 
                                                 rounded-full hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors border border-gray-200 dark:border-gray-600`,children:C},D))})]}),A.jsxs("div",{className:"flex items-end gap-3",children:[A.jsxs("div",{className:"flex-1 relative",children:[A.jsx("textarea",{ref:y,value:v,onChange:C=>b(C.target.value),onKeyDown:N,placeholder:"Ask me anything...",disabled:R,rows:1,className:`w-full px-4 py-3 pr-12 border border-gray-300 dark:border-gray-600 rounded-xl 
                                         bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm
                                         focus:ring-2 focus:ring-blue-500 focus:border-transparent
                                         disabled:opacity-50 disabled:cursor-not-allowed
                                         placeholder-gray-500 dark:placeholder-gray-400
                                         resize-none min-h-[48px] max-h-24
                                         shadow-sm transition-all duration-200`,style:{height:"auto",minHeight:"48px"},onInput:C=>{const D=C.target;D.style.height="auto",D.style.height=Math.min(D.scrollHeight,96)+"px"}}),v.length>100&&A.jsx("div",{className:"absolute bottom-2 right-12 text-xs text-gray-400",children:v.length})]}),A.jsx("button",{onClick:C=>{C.preventDefault(),S(C)},disabled:!v.trim()||R,className:`p-3 bg-gradient-to-r from-blue-500 to-purple-600 
                                     hover:from-blue-600 hover:to-purple-700
                                     disabled:from-gray-400 disabled:to-gray-500
                                     text-white rounded-xl transition-all duration-200
                                     disabled:cursor-not-allowed shadow-sm hover:shadow-md
                                     min-w-[48px] min-h-[48px] flex items-center justify-center`,children:R?A.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):A.jsx(xY,{className:"w-4 h-4"})})]}),A.jsxs("div",{className:"flex items-center justify-center mt-3 min-h-[16px]",children:[O&&A.jsxs("div",{className:"flex items-center gap-1 text-xs text-blue-600 dark:text-blue-400",children:[A.jsx(U8,{className:"w-3 h-3 animate-spin"}),A.jsx("span",{children:"Saving..."})]}),!O&&!R&&A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:"Press Enter to send • Shift+Enter for new line"})]})]})]})]})},OY=({isOpen:t,onClose:e,currentBoardId:n,currentBoardName:r,nodes:s=[],setNodes:o,onNodesChange:l,onEdgesChange:c,getLastTwoLayouts:f,addLayout:h})=>{const[p,v]=B.useState("chat"),[b,R]=B.useState(400),[M,O]=B.useState(!1),[L,j]=B.useState(!1),$=B.useRef(null);B.useEffect(()=>{const y=w=>{if(!M)return;const x=window.innerWidth-w.clientX;R(Math.max(320,Math.min(800,x)))},E=()=>{O(!1)};return M&&(document.addEventListener("mousemove",y),document.addEventListener("mouseup",E)),()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",E)}},[M]);const Y=[{id:"chat",label:"AI Assistant",icon:B8,description:"Chat with AI"},{id:"settings",label:"Settings",icon:SY,description:"Panel settings"}];return A.jsxs(A.Fragment,{children:[t&&A.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-[2px] z-40 transition-all duration-300",onClick:e}),A.jsxs("div",{className:`
                fixed top-0 right-0 h-full
                bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl
                border-l border-gray-200/50 dark:border-gray-700/50
                shadow-2xl shadow-gray-900/10 dark:shadow-black/40
                z-50
                transform transition-all duration-300 ease-out
                ${t?"translate-x-0":"translate-x-full"}
                ${M?"transition-none":""}
            `,style:{width:`${b}px`},children:[A.jsx("div",{ref:$,className:"absolute left-0 top-0 w-1 h-full cursor-col-resize hover:bg-blue-500/20 transition-colors duration-200 group",onMouseDown:()=>O(!0),children:A.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-4 h-12 -ml-2 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:A.jsx(uY,{className:"w-3 h-3 text-gray-400"})})}),A.jsx("div",{className:"absolute top-4 -left-12 z-10",children:A.jsx("button",{onClick:()=>j(!L),className:"w-10 h-10 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center group",title:L?"Maximize Chat":"Minimize Chat",children:L?A.jsx(vY,{className:"w-4 h-4 group-hover:scale-110 transition-transform duration-200"}):A.jsx(wY,{className:"w-4 h-4 group-hover:scale-110 transition-transform duration-200"})})}),A.jsxs("div",{className:"flex flex-col border-b border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-r from-slate-50/80 via-gray-50/80 to-slate-50/80 dark:from-gray-800/80 dark:via-gray-900/80 dark:to-gray-800/80 backdrop-blur-sm",children:[A.jsxs("div",{className:"flex items-center justify-between p-4 pb-2",children:[A.jsxs("div",{className:"flex items-center space-x-3",children:[A.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center shadow-sm",children:A.jsx(Gv,{className:"w-4 h-4 text-white"})}),A.jsxs("div",{children:[A.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"AI Assistant"}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:r||"Ready to help"})]})]}),A.jsx("button",{onClick:e,className:"p-2 rounded-lg hover:bg-gray-100/70 dark:hover:bg-gray-700/70 transition-all duration-200 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 group",children:A.jsx(RY,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"})})]}),A.jsx("div",{className:"px-4 pb-4",children:A.jsx("div",{className:"flex space-x-1 bg-gray-100/70 dark:bg-gray-800/70 rounded-xl p-1 backdrop-blur-sm",children:Y.map(y=>{const E=y.icon;return A.jsxs("button",{onClick:()=>v(y.id),className:`
                                            flex items-center space-x-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 flex-1 justify-center group
                                            ${p===y.id?"bg-white/90 dark:bg-gray-700/90 text-blue-600 dark:text-blue-400 shadow-sm backdrop-blur-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100 hover:bg-gray-50/70 dark:hover:bg-gray-700/50"}
                                        `,title:y.description,children:[A.jsx(E,{className:"w-4 h-4 group-hover:scale-105 transition-transform duration-200"}),A.jsx("span",{children:y.label})]},y.id)})})})]}),A.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:p==="chat"?A.jsx("div",{className:"flex-1 flex flex-col bg-gradient-to-b from-gray-50/50 to-white/80 dark:from-gray-900/50 dark:to-gray-800/80 backdrop-blur-sm",children:A.jsx(PY,{className:"flex-1",currentBoardId:n,currentBoardName:r,nodes:s,setNodes:o,onNodesChange:l,onEdgesChange:c,getLastTwoLayouts:f,addLayout:h})}):A.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-gradient-to-b from-gray-50/50 to-white/80 dark:from-gray-900/50 dark:to-gray-800/80 backdrop-blur-sm",children:A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm rounded-2xl border border-gray-200/50 dark:border-gray-700/50 p-5 shadow-lg shadow-gray-200/20 dark:shadow-gray-900/20",children:[A.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[A.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center mr-3",children:A.jsx(H8,{className:"w-3 h-3 text-white"})}),"Current Board"]}),n?A.jsxs("div",{className:"space-y-3",children:[A.jsxs("div",{className:"px-4 py-3 bg-blue-50/80 dark:bg-blue-900/20 backdrop-blur-sm rounded-xl border border-blue-200/50 dark:border-blue-800/50",children:[A.jsx("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:r||"Unnamed Board"}),A.jsxs("p",{className:"text-xs text-blue-600/70 dark:text-blue-400/70 mt-1 font-mono",children:["ID: ",n]})]}),A.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 bg-gray-50/50 dark:bg-gray-700/30 rounded-lg px-3 py-2",children:[A.jsx("span",{children:"Active Nodes"}),A.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:s.length})]})]}):A.jsx("div",{className:"px-4 py-3 bg-amber-50/80 dark:bg-amber-900/20 backdrop-blur-sm rounded-xl border border-amber-200/50 dark:border-amber-800/50",children:A.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:"No board selected"})})]}),A.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm rounded-2xl border border-gray-200/50 dark:border-gray-700/50 p-5 shadow-lg shadow-gray-200/20 dark:shadow-gray-900/20",children:[A.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),A.jsxs("div",{className:"space-y-2",children:[A.jsx("button",{className:"w-full text-left px-4 py-3 text-sm bg-gray-50/70 hover:bg-gray-100/70 dark:bg-gray-700/50 dark:hover:bg-gray-600/50 rounded-xl transition-all duration-200 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 border border-gray-200/30 dark:border-gray-600/30 hover:border-gray-300/50 dark:hover:border-gray-500/50 group",children:A.jsxs("div",{className:"flex items-center space-x-3",children:[A.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full group-hover:scale-125 transition-transform duration-200"}),A.jsx("span",{children:"Export Board"})]})}),A.jsx("button",{className:"w-full text-left px-4 py-3 text-sm bg-gray-50/70 hover:bg-gray-100/70 dark:bg-gray-700/50 dark:hover:bg-gray-600/50 rounded-xl transition-all duration-200 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 border border-gray-200/30 dark:border-gray-600/30 hover:border-gray-300/50 dark:hover:border-gray-500/50 group",children:A.jsxs("div",{className:"flex items-center space-x-3",children:[A.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full group-hover:scale-125 transition-transform duration-200"}),A.jsx("span",{children:"Board Settings"})]})}),A.jsx("button",{className:"w-full text-left px-4 py-3 text-sm bg-gray-50/70 hover:bg-gray-100/70 dark:bg-gray-700/50 dark:hover:bg-gray-600/50 rounded-xl transition-all duration-200 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 border border-gray-200/30 dark:border-gray-600/30 hover:border-gray-300/50 dark:hover:border-gray-500/50 group",children:A.jsxs("div",{className:"flex items-center space-x-3",children:[A.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full group-hover:scale-125 transition-transform duration-200"}),A.jsx("span",{children:"View History"})]})})]})]}),A.jsxs("div",{className:"bg-gradient-to-br from-emerald-50/80 to-teal-50/80 dark:from-emerald-900/20 dark:to-teal-900/20 backdrop-blur-sm rounded-2xl border border-emerald-200/50 dark:border-emerald-800/50 p-5 shadow-lg shadow-emerald-200/10 dark:shadow-emerald-900/10",children:[A.jsxs("h3",{className:"text-sm font-semibold text-emerald-700 dark:text-emerald-300 mb-3 flex items-center",children:[A.jsx("span",{className:"text-base mr-2",children:"🤖"}),"AI Capabilities"]}),A.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs text-emerald-600 dark:text-emerald-400",children:[A.jsxs("div",{className:"flex items-center space-x-2 bg-white/30 dark:bg-gray-800/30 rounded-lg p-2 backdrop-blur-sm",children:[A.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),A.jsx("span",{children:"Knowledge nodes"})]}),A.jsxs("div",{className:"flex items-center space-x-2 bg-white/30 dark:bg-gray-800/30 rounded-lg p-2 backdrop-blur-sm",children:[A.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse",style:{animationDelay:"0.5s"}}),A.jsx("span",{children:"Concept maps"})]}),A.jsxs("div",{className:"flex items-center space-x-2 bg-white/30 dark:bg-gray-800/30 rounded-lg p-2 backdrop-blur-sm",children:[A.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse",style:{animationDelay:"1s"}}),A.jsx("span",{children:"Flowcharts"})]}),A.jsxs("div",{className:"flex items-center space-x-2 bg-white/30 dark:bg-gray-800/30 rounded-lg p-2 backdrop-blur-sm",children:[A.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse",style:{animationDelay:"1.5s"}}),A.jsx("span",{children:"Q&A Support"})]})]})]})]})})})]})]})},VY=({onClick:t,isOpen:e})=>{const[n,r]=B.useState(!1);return e?null:A.jsxs("div",{className:"fixed bottom-6 right-6 z-40",children:[A.jsxs("button",{onClick:t,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),className:"group relative w-14 h-14 bg-gradient-to-br from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center transform hover:scale-110 active:scale-95",children:[A.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 animate-pulse opacity-30 scale-110"}),A.jsx("div",{className:"relative z-10",children:A.jsx(B8,{className:"w-6 h-6 group-hover:scale-110 transition-transform duration-200"})}),A.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4",children:A.jsx(Hd,{className:"w-3 h-3 text-yellow-400 animate-bounce",style:{animationDelay:"0.5s"}})}),A.jsx("div",{className:"absolute -bottom-1 -left-1 w-4 h-4",children:A.jsx(Hd,{className:"w-3 h-3 text-blue-300 animate-bounce",style:{animationDelay:"1s"}})})]}),A.jsxs("div",{className:`absolute bottom-full right-0 mb-3 px-3 py-2 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 text-sm rounded-lg shadow-lg whitespace-nowrap transition-all duration-200 ${n?"opacity-100 transform translate-y-0":"opacity-0 transform translate-y-2 pointer-events-none"}`,children:["AI Assistant",A.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900 dark:border-t-gray-100"})]}),A.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center text-xs text-white font-bold opacity-0 scale-0 transition-all duration-200",children:"1"})]})},NA={default:{border:"border-gray-400",ring:"ring-gray-100 dark:ring-gray-500/30",placeholder:"Enter your text...",Icon:dY,color:"#6b7280"},explain:{border:"border-blue-400",ring:"ring-blue-100 dark:ring-blue-500/30",placeholder:"Explain this concept...",Icon:hY,color:"#3b82f6"},answer:{border:"border-emerald-400",ring:"ring-emerald-100 dark:ring-emerald-500/30",placeholder:"Answer this question...",Icon:pY,color:"#10b981"},argue:{border:"border-rose-400",ring:"ring-rose-100 dark:ring-rose-500/30",placeholder:"Argue this point...",Icon:oY,color:"#f43f5e"}};function LY({data:t}){const[e,n]=B.useState("default"),r=B.useRef(null),[s,o]=B.useState(t.label||""),l=["default","explain","answer","argue"];B.useEffect(()=>{const O=r.current;if(!O)return;const L=setTimeout(()=>{O.focus()},100),j=new IntersectionObserver(([$])=>{$.isIntersecting&&(O.focus(),j.disconnect())},{threshold:.1});return j.observe(O),()=>{clearTimeout(L),j.disconnect()}},[]);const c=O=>{O.preventDefault();const L=s.trim();L&&t.onNodeCallback?.(L)},f=O=>{if(O.key==="ArrowUp"||O.key==="ArrowDown"){O.preventDefault();const L=l.indexOf(e);let j;O.key==="ArrowUp"?j=L>0?L-1:l.length-1:j=L<l.length-1?L+1:0,n(l[j])}},h=NA[e]||NA.default,{border:p,ring:v,placeholder:b,color:R}=h,M=h.Icon;return A.jsxs("div",{className:`relative bg-white dark:bg-gray-900 shadow-lg rounded-xl px-4 py-3 min-w-[200px] border transition-all duration-300 ease-in-out ${p} ring-1 ${v}`,style:{borderColor:R,boxShadow:`0 0 0 1px ${R}20, 0 4px 6px -1px rgb(0 0 0 / 0.1)`},children:[A.jsxs("form",{onSubmit:c,className:"flex items-center gap-2",children:[A.jsx("div",{className:"transition-all duration-300 ease-in-out transform hover:scale-110",children:A.jsx(M,{size:18,className:"shrink-0 transition-colors duration-300 ease-in-out animate-pulse",style:{color:R}})}),A.jsx("input",{ref:r,value:s,onChange:O=>o(O.target.value),onKeyDown:f,placeholder:b,className:"flex-1 bg-transparent outline-none text-sm placeholder-gray-400 dark:placeholder-gray-500 caret-black dark:caret-white text-gray-900 dark:text-gray-100 transition-all duration-300",style:{caretColor:R}})]}),A.jsx("div",{className:"absolute -top-2 -right-2 px-2 py-1 text-xs font-semibold text-white rounded-full transition-all duration-300 ease-in-out",style:{backgroundColor:R},children:e}),A.jsx($n,{type:"target",position:xe.Top}),A.jsx($n,{type:"source",position:xe.Bottom})]})}const F8=t=>!!(t&&t.uid),md=[{id:"1",type:"staticEditable",data:{label:"The _artificial intelligence_ system processes _natural language_ effectively",title:"AI & Natural Language",suggestions:["Machine Learning","Neural Networks","Deep Learning"],tokenColors:{},previousNode:null},position:{x:250,y:25},draggable:!1}],fu=[],jY=async t=>{if(!F8({uid:t}))throw new Error(yr.AUTH_REQUIRED);try{const e=ef(wr,Er.BOARDS),n=fR(e,hR("userId","==",t),gz("createdAt","desc")),r=await Rp(n);if(r.empty){const o={id:`board_${Date.now()}`,userId:t,name:"Default Board",createdAt:ft.now(),isOpen:!0};return await ib(Fo(wr,Er.BOARDS,o.id),o),console.log("Created default board:",o),[o]}const s=r.docs.map(o=>({id:o.id,...o.data()}));return console.log("Fetched all boards:",s),s}catch(e){if(console.error("Fetch all boards error:",e),e.code==="failed-precondition"||e.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:t,name:"Fallback Board (Create Index)",createdAt:ft.now(),isOpen:!0,isFallback:!0}]}throw new Error(yr.LOAD_FAILED)}},zY=async t=>{if(!t)return console.warn("No board ID provided for fetching nodes"),md;try{const e=ef(wr,Er.BOARDS,t,Er.NODES),n=await Rp(e);if(n.empty)return console.log("No nodes found for board, using initial nodes"),md;const r=n.docs.map(s=>{const o=s.data(),l={...o.data,tokenColors:o.data?.tokenColors||{},previousNode:o.data?.previousNode||null};return{id:s.id,type:o.type,position:o.position,data:l,draggable:o.draggable,style:o.style}});return console.log("Fetched nodes from board:",r),r}catch(e){return console.error("Fetch nodes error:",e),md}},UY=async t=>{if(!t)return console.warn("No board ID provided for fetching edges"),fu;try{const e=ef(wr,Er.BOARDS,t,Er.EDGES),n=await Rp(e);if(n.empty)return console.log("No edges found for board, using initial edges"),fu;const r=n.docs.map(s=>({id:s.id,...s.data()}));return console.log("Fetched edges from board:",r),r}catch(e){return console.error("Fetch edges error:",e),fu}},BY=async(t,e)=>{if(!t||!Array.isArray(e)){console.warn("Invalid parameters for saving nodes:",{boardId:t,nodesToSave:e});return}if(e.length===0){console.log("No nodes to save for board:",t);return}try{const n=pR(wr);e.forEach(r=>{const s=Fo(wr,Er.BOARDS,t,Er.NODES,r.id),o={type:r.type,data:r.data,position:r.position,updatedAt:ft.now()};r.draggable!=null&&(o.draggable=r.draggable),r.style!=null&&(o.style=r.style),n.set(s,o)}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(yr.SAVE_FAILED)}},HY=async(t,e)=>{if(!t||!Array.isArray(e)){console.warn("Invalid parameters for saving edges:",{boardId:t,edgesToSave:e});return}if(e.length===0){console.log("No edges to save for board:",t);return}try{const n=pR(wr);e.forEach(r=>{const s=Fo(wr,Er.BOARDS,t,Er.EDGES,r.id),o={source:r.source,target:r.target,updatedAt:ft.now()};r.sourceHandle!=null&&(o.sourceHandle=r.sourceHandle),r.targetHandle!=null&&(o.targetHandle=r.targetHandle),r.style!=null&&(o.style=r.style),r.markerEnd!=null&&(o.markerEnd=r.markerEnd),n.set(s,o)}),await n.commit(),console.log("Edges saved to board")}catch(n){throw console.error("Save edges error:",n),new Error(yr.SAVE_FAILED)}},$Y=async(t,e,n)=>{if(!F8({uid:t}))throw new Error(yr.AUTH_REQUIRED);try{const r={id:`board_${Date.now()}`,userId:t,name:e||`Board ${n.length+1}`,createdAt:ft.now(),isOpen:!1};return console.log("Creating board:",r),await ib(Fo(wr,Er.BOARDS,r.id),r),console.log("Board created successfully:",r),r}catch(r){throw console.error("Error creating new board:",r),r.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):r.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},FY=async t=>{if(!t)throw new Error("Board ID is required for deletion");try{await xz(Fo(wr,Er.BOARDS,t)),console.log("Board deleted successfully")}catch(e){throw console.error("Error deleting board:",e),e.code==="permission-denied"?new Error("Permission denied. Cannot delete this board."):e}},qY=async(t,e)=>{if(!t||!e)throw new Error("Board ID and updates are required");try{const n={...e,updatedAt:ft.now()};await ib(Fo(wr,Er.BOARDS,t),n,{merge:!0}),console.log("Board status updated:",n)}catch(n){throw console.error("Error updating board status:",n),n}},zo={BOARDS:10*60*1e3,NODES:15*60*1e3,EDGES:15*60*1e3},Jb=async t=>mn.get("boards",t,()=>jY(t),zo.BOARDS),GY=async t=>mn.get("nodes",t,()=>zY(t),zo.NODES),KY=async t=>mn.get("edges",t,()=>UY(t),zo.EDGES),pd=async t=>{const[e,n]=await Promise.all([GY(t),KY(t)]);return{nodes:e,edges:n}},YY=async(t,e)=>{await BY(t,e),mn.set("nodes",t,e||[],zo.NODES)},XY=async(t,e)=>{await HY(t,e),mn.set("edges",t,e||[],zo.EDGES)},WY=async(t,e,n)=>{console.log(`Saving board content for ${t}:`,{nodeCount:(e||[]).length,edgeCount:(n||[]).length}),await Promise.all([YY(t,e||[]),XY(t,n||[])])},QY=async(t,e,n)=>{const r=await $Y(t,e??null,n??[]);return r&&(mn.invalidate("boards",t),mn.set("nodes",r.id,[],zo.NODES),mn.set("edges",r.id,[],zo.EDGES)),r},ZY=async t=>{await FY(t),mn.invalidate("nodes",t),mn.invalidate("edges",t)},$l=async(t,e)=>{await qY(t,e),e.userId&&mn.invalidate("boards",e.userId)},JY=async t=>{try{const n=(await Jb(t)).find(r=>r.isOpen);n&&pd(n.id).catch(r=>{console.warn("Failed to preload board content:",r)}),console.log(`Preloaded data for user ${t}`)}catch(e){console.warn("Error in preloadUserData:",e)}},q8=t=>{mn.invalidate("boards",t)},eX=async t=>{q8(t);const e=await Jb(t);let n;const r=e.find(s=>s.isOpen);return r&&(mn.invalidate("nodes",r.id),mn.invalidate("edges",r.id),n=await pd(r.id)),{boards:e,openBoardContent:n}},tX=(t,e={})=>{const[n,r,s]=oO([]),[o,l,c]=lO([]),[f,h]=B.useState(!0),[p,v]=B.useState(!1),[b,R]=B.useState(!1),[M,O]=B.useState([]),[L,j]=B.useState(null),$=B.useRef(!1),Y=B.useRef(null),{showSuccess:y,showError:E,showInfo:w}=e,x=k=>{const F=k.find(G=>G.isOpen===!0);if(F)return F;if(k.length>0){const G={...k[0],isOpen:!0};return $l(G.id,G).catch(console.error),G}return null};B.useEffect(()=>{(async()=>{if(!(!t||$.current))try{h(!0),$.current=!0,await JY(t.uid);const F=await Jb(t.uid);O(F);const G=F.some(ne=>ne.isFallback);G&&E&&E("Database index missing. Please create the required Firestore index. Check console for details.");const X=x(F);if(!X){console.error("No board found for user"),E&&E("No boards found. Creating a default board..."),r(md),l(fu);return}j(X);const{nodes:z,edges:W}=await pd(X.id);if(r(z),l(W),w&&!G){const ne=mn.getStats();w(`Board loaded successfully! Cache hit rate: ${ne.hitRate.toFixed(1)}%`)}}catch(F){console.error("Error loading initial data:",F),$.current=!1,E&&E("Failed to load board data. Using default board."),r(md),l(fu)}finally{h(!1)}})()},[t]);const S=B.useCallback(async()=>{!L||L.isFallback||f||p||(Y.current&&clearTimeout(Y.current),Y.current=setTimeout(async()=>{try{R(!0),(n&&n.length>0||o&&o.length>0)&&(await WY(L.id,n||[],o||[]),console.log("Batch save completed successfully after node creation"))}catch(k){console.error("Save failed:",k),E&&E("Failed to save new content")}finally{R(!1),Y.current=null}},2e3))},[L,f,p,n,o,E]),N=async k=>{try{if(L?.id===k)return;if(L?.isFallback||M.find(G=>G.id===k)?.isFallback){E&&E("Cannot switch to fallback board. Please create the missing Firestore index first.");return}if(v(!0),L&&!L.isFallback){const G={...L,isOpen:!1};await $l(L.id,G),O(X=>X.map(z=>z.id===L.id?G:z))}const F=M.find(G=>G.id===k);if(F){const G={...F,isOpen:!0};await $l(k,G),j(G),O(W=>W.map(ne=>ne.id===k?G:ne));const{nodes:X,edges:z}=await pd(k);r(X),l(z),y&&y(`Switched to "${G.name}"`)}else console.error("Board not found:",k),E&&E("Board not found")}catch(F){console.error("Error switching board:",F),E&&E("Failed to switch board. Please try again.")}finally{v(!1)}},C=async k=>{try{if(!t)return E&&E("You must be logged in to create a board"),null;w&&w("Creating new board...");const F=await QY(t.uid,k||null,M);if(F){if(L&&!L.isFallback){const X={...L,isOpen:!1};$l(L.id,X).catch(console.error)}const G={...F,isOpen:!0};return O(X=>{const z=X.map(W=>W.id===L?.id?{...W,isOpen:!1}:W);return[G,...z]}),j(G),$l(F.id,G).catch(console.error),r([{id:"1",type:"staticEditable",data:{label:k||"New Board"},position:{x:250,y:25},draggable:!1}]),l(fu),y&&y(`Board "${F.name}" created and opened!`),G}else return E&&E("Failed to create board. Please try again."),null}catch(F){return E&&E(`Failed to create board: ${F.message}`),null}},D=async k=>{try{if(M.length<=1){E&&E("Cannot delete the last board!");return}if(!M.find(G=>G.id===k)){console.error("Board not found for deletion"),E&&E("Board not found");return}if(w&&w("Deleting board..."),L?.id===k){const G=M.find(X=>X.id!==k);G&&await N(G.id)}await ZY(k),O(G=>G.filter(X=>X.id!==k)),y&&y("Board deleted successfully!")}catch(F){console.error("Error deleting board:",F),E&&E("Failed to delete board. Please try again.")}},H=async k=>{if(L&&L.name!==k){const F={...L,name:k};j(F),O(G=>G.map(X=>X.id===L.id?F:X));try{await $l(L.id,F),console.log("Board name updated successfully")}catch(G){console.error("Error updating board name:",G)}}},V=B.useCallback(()=>{t?.uid&&q8(t.uid),O([]),j(null),r([]),l([]),h(!0),v(!1),R(!1),$.current=!1,Y.current&&(clearTimeout(Y.current),Y.current=null)},[t?.uid]),U=B.useCallback(async()=>{if(t?.uid)try{h(!0),w&&w("Refreshing data...");const{boards:k,openBoardContent:F}=await eX(t.uid);O(k);const G=k.find(z=>z.isOpen);if(j(G||null),F)r(F.nodes),l(F.edges);else if(G){const{nodes:z,edges:W}=await pd(G.id);r(z),l(W)}const X=mn.getStats();y&&y(`Data refreshed! Cache hit rate: ${X.hitRate.toFixed(1)}%`)}catch(k){console.error("Error during force refresh:",k),E&&E("Failed to refresh data")}finally{h(!1)}},[t?.uid,w,y,E]),Q=B.useCallback(()=>mn.getStats(),[]);return{nodes:n,edges:o,allBoards:M,currentBoard:L,isLoading:f,isSwitchingBoard:p,isSaving:b,onNodesChange:s,onEdgesChange:c,setNodes:r,setEdges:l,switchToBoard:N,createNewBoard:C,deleteBoard:D,updateBoardName:H,clearBoardState:V,saveNewNodeContent:S,forceRefresh:U,getCacheStats:Q}},nX=()=>{const[t,e]=B.useState([]),n=h=>{e(p=>p.filter(v=>v.id!==h))},r=h=>{const p=Date.now().toString(),v={id:p,timestamp:new Date,...h};return e(b=>[...b,v]),h.autoRemove!==!1&&setTimeout(()=>{n(p)},h.duration||5e3),p};return{notifications:t,addNotification:r,removeNotification:n,clearAllNotifications:()=>{e([])},showSuccess:(h,p={})=>r({type:"success",message:h,...p}),showError:(h,p={})=>r({type:"error",message:h,duration:7e3,...p}),showInfo:(h,p={})=>r({type:"info",message:h,...p}),showWarning:(h,p={})=>r({type:"warning",message:h,duration:6e3,...p})}},rX=t=>{const[e,n]=B.useState([]),r=B.useRef(t);B.useEffect(()=>{if(t&&t!==r.current){r.current=t;const c=localStorage.getItem(`layoutHistory_${t}`);if(c)try{const f=JSON.parse(c);Array.isArray(f)&&f.length<=2&&n(f)}catch(f){console.warn("Failed to parse saved layout history:",f)}}},[t]),B.useEffect(()=>{t&&e.length>0&&localStorage.setItem(`layoutHistory_${t}`,JSON.stringify(e))},[e,t]);const s=B.useCallback(c=>{n(f=>{if(f.length>0&&f[f.length-1]===c)return f;const h=[...f,c];return h.length>2?h.slice(-2):h})},[]),o=B.useCallback(()=>[...e],[e]),l=B.useCallback(()=>{n([]),t&&localStorage.removeItem(`layoutHistory_${t}`)},[t]);return{lastTwoLayouts:e,addLayout:s,getLastTwoLayouts:o,clearHistory:l}},G8=({size:t="medium",color:e="#4f86f7"})=>{const n={small:"w-4 h-4 border-2",medium:"w-8 h-8 border-3",large:"w-12 h-12 border-4"};return A.jsx("div",{className:"flex items-center justify-center",children:A.jsx("div",{className:`${n[t]} border-gray-200 dark:border-gray-700 border-t-indigo-500 dark:border-t-indigo-400 rounded-full animate-spin`,style:{borderTopColor:e}})})};function IA(t){if(!t)return"#ffffff";const e=(t??"000000").replace(/^#/,""),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16),[o,l,c]=[n,r,s].map(h=>{const p=h/255;return p<=.03928?p/12.92:Math.pow((p+.055)/1.055,2.4)});return .2126*o+.7152*l+.0722*c>.179?"#000000":"#ffffff"}function iX({data:t,id:e}){const[n,r]=B.useState(t.summary||t.label||"Static Node"),{screenToFlowPosition:s}=Kd(),{handleTokenClick:o}=YH(),l=B.useRef(null),[c,f]=B.useState({mode:void 0,x:0,y:0,isDragging:!1}),h=B.useRef(c);B.useEffect(()=>{h.current=c},[c]);const[p,v]=B.useState(null);B.useEffect(()=>{r(t.summary||t.label||"Static Node")},[t.summary,t.label]);const R=WO(n),M=($,Y)=>{Y.stopPropagation(),o($,e,{x:0,y:0},"staticEditable",t.myColor,t.label||t.title||"Static Node",$.suggestionId)},O=B.useMemo(()=>{const $=t.tokenColors||{};return R.map((Y,y)=>{const E=Y.myConcept||Y.word,w=$[E],x=!w;return A.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-lg font-medium transition-all duration-200 ease-out
                        ${x?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}
                        ${Y.myConcept?"bg-blue-500/10 border border-blue-500/30":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:w||"transparent",color:w?IA(w):"#f8faff",border:w?`1px solid ${ET(w,20)}`:""},onClick:S=>x?M(Y,S):S.stopPropagation(),children:[Y.word,y<R.length-1?" ":""]},y)})},[R,t.tokenColors]),L=B.useMemo(()=>{const $=t.tokenColors||{};return!t.suggestions||t.suggestions.length===0?A.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"}):t.suggestions.map((Y,y)=>{const E=$[Y],w=!E;return A.jsx("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                        bg-white/5 border border-white/10 transition-all duration-200 
                        ${w?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:E||"transparent",color:E?IA(E):"#f8faff",border:E?`1px solid ${ET(E,20)}`:""},onClick:x=>w?M({word:Y,myConcept:Y,suggestionId:(t.label||"")+Y+y},x):x.stopPropagation(),children:Y},y)})},[t.suggestions,t.tokenColors]),j=B.useMemo(()=>t.isLoading?A.jsxs("div",{className:"flex items-center justify-center gap-2 py-8",children:[A.jsx(G8,{size:"small",color:"#6366f1"}),A.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}):A.jsxs("div",{className:"flex flex-col gap-3",children:[A.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[A.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),A.jsx("div",{className:"flex gap-2",children:A.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                transition-all duration-150 flex items-center justify-center text-sm`,title:"Show full text",children:"📄"})})]}),A.jsx("div",{className:"flex-1",children:A.jsx("div",{className:"cursor-text leading-relaxed break-words text-lg font-medium",children:O})}),A.jsxs("div",{className:"mt-2",children:[A.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),A.jsx("div",{className:"flex flex-wrap gap-1",children:L})]})]}),[t.isLoading,t.title,O,L]);return A.jsxs("div",{ref:l,className:`bg-black border border-white/[0.1] rounded-[20px] p-7 min-w-[320px] max-w-[500px] 
                transition-all duration-150 ease-in-out cursor-pointer select-none overflow-hidden
                opacity-[0.98] border-b-[3px] border-b-white/[0.06]
                hover:opacity-100 hover:bg-[#28282c] hover:border-white/[0.2]`,style:{backgroundColor:"#000000",color:"#f8faff",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[A.jsx("div",{className:"relative pointer-events-auto text-[#f8faff] text-[18px] leading-[1.7] font-semibold",children:j}),A.jsx($n,{type:"source",position:xe.Bottom,id:"bottom-source"}),A.jsx($n,{type:"target",position:xe.Bottom,id:"bottom-target"})]})}const sX=6,aX=({dragState:t,handleOrigin:e,getParentCenter:n})=>{if(!t.isDragging||typeof window>"u")return null;const r=e||n();return v6.createPortal(A.jsxs(A.Fragment,{children:[A.jsxs("svg",{className:"fixed inset-0 pointer-events-none z-[9998]",width:"100vw",height:"100vh",children:[A.jsx("defs",{children:A.jsxs("linearGradient",{id:"connectionGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[A.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:"0.8"}),A.jsx("stop",{offset:"100%",stopColor:"#1d4ed8",stopOpacity:"1"})]})}),A.jsx("line",{x1:r.x,y1:r.y,x2:t.x,y2:t.y,stroke:"url(#connectionGradient)",strokeWidth:3,strokeLinecap:"round",strokeDasharray:"5,5",className:"animate-pulse"})]}),A.jsx("div",{className:"fixed pointer-events-none z-[9999] transform -translate-x-1/2 -translate-y-1/2",style:{left:t.x,top:t.y},children:A.jsx("div",{className:`px-4 py-2 rounded-lg shadow-xl font-medium text-white 
                               bg-gradient-to-r from-blue-600 to-blue-700 backdrop-blur-sm
                               border border-blue-500/30 animate-bounce`,children:A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(Hd,{size:14,className:"animate-spin"}),t.suggestion]})})})]}),document.body)},oX=({suggestion:t,index:e,position:n,style:r,isHidden:s,onDragStart:o})=>{const l=c=>{c.stopPropagation(),c.preventDefault(),c.button===0&&o(t,c.nativeEvent)};return A.jsx("div",{className:`absolute z-10 select-none transition-all duration-200 ease-out ${s?"opacity-0 scale-95":"opacity-100 scale-100"}`,style:{...r,[n===xe.Right?"right":"left"]:"-12px",transform:"translateY(-50%)"},onPointerDown:l,draggable:!1,children:A.jsxs("div",{className:`group relative flex items-center justify-center w-8 h-8
                          bg-gradient-to-br from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-200
                          dark:from-blue-950 dark:to-blue-900 dark:hover:from-blue-900 dark:hover:to-blue-800
                          border-2 border-blue-200 hover:border-blue-300 
                          dark:border-blue-700 dark:hover:border-blue-600
                          rounded-full cursor-grab active:cursor-grabbing 
                          shadow-sm hover:shadow-md transition-all duration-200 ease-out 
                          hover:scale-110 active:scale-95`,title:t,onPointerDown:l,draggable:!1,children:[A.jsx(Hd,{size:16,className:`text-blue-600 dark:text-blue-400 transition-transform duration-200 
                             group-hover:rotate-12 group-active:rotate-45`}),A.jsxs("div",{className:`absolute z-20 px-3 py-1.5 text-xs font-medium text-white 
                              bg-gray-900/90 backdrop-blur-sm rounded-md shadow-lg 
                              opacity-0 group-hover:opacity-100 pointer-events-none
                              transition-opacity duration-200 ease-out whitespace-nowrap
                              transform -translate-y-1/2`,style:{[n===xe.Right?"left":"right"]:"calc(100% + 8px)",top:"50%"},children:[t,A.jsx("div",{className:`absolute w-0 h-0 top-1/2 transform -translate-y-1/2
                                   border-t-[4px] border-b-[4px] border-t-transparent border-b-transparent
                                   ${n===xe.Right?"border-r-[4px] border-r-gray-900/90 -left-1":"border-l-[4px] border-l-gray-900/90 -right-1"}`})]}),A.jsx($n,{type:"source",position:n,id:t,className:"opacity-0"})]})},`${t}-${e}`)};function lX({suggestions:t,dragState:e,handleDragStart:n,handleOrigin:r,getParentCenter:s}){if(!t?.length)return null;const o=t.slice(0,sX),l=(c,f)=>{if(f===1)return{position:xe.Right,style:{top:"50%"}};const h=c<Math.ceil(f/2),p=h?xe.Right:xe.Left,v=h?c:c-Math.ceil(f/2),b=h?Math.ceil(f/2):Math.floor(f/2),R=b===1?50:v/(b-1)*60+20;return{position:p,style:{top:`${R}%`}}};return A.jsxs(A.Fragment,{children:[o.map((c,f)=>{const{position:h,style:p}=l(f,o.length),v=e.isDragging&&e.suggestion===c;return A.jsx(oX,{suggestion:c,index:f,position:h,style:p,isHidden:v,onDragStart:n},`${c}-${f}`)}),A.jsx(aX,{dragState:e,handleOrigin:r,getParentCenter:s})]})}function uX(){return A.jsxs(A.Fragment,{children:[A.jsx($n,{style:{transform:"translateY(-150%)"},type:"source",position:xe.Bottom,id:"bottom-source"}),A.jsx($n,{style:{transform:"translateY(100%)"},type:"target",position:xe.Top,id:"top-target"}),A.jsx($n,{style:{transform:"translateY(100%)"},type:"source",position:xe.Left,id:"left-source"}),A.jsx($n,{style:{transform:"translateY(100%)"},type:"target",position:xe.Left,id:"left-target"}),A.jsx($n,{style:{transform:"translateY(100%)"},type:"source",position:xe.Right,id:"right-source"}),A.jsx($n,{style:{transform:"translateY(100%)"},type:"target",position:xe.Right,id:"right-target"})]})}function cX({data:t,id:e}){B.useEffect(()=>{t.layout||(t.layout=1)},[t.layout]);const{screenToFlowPosition:n}=Kd(),r=B.useRef(null),[s,o]=B.useState({suggestion:"",x:0,y:0,isDragging:!1}),l=B.useRef(s);B.useEffect(()=>{l.current=s},[s]);const[c,f]=B.useState(null);B.useEffect(()=>{l.current=s},[s]);const h=B.useMemo(()=>t.contents&&t.contents.length>0?t.contents[0]?A.jsx("div",{className:"node-rich-content w-full",dangerouslySetInnerHTML:{__html:t.contents[0]}}):A.jsx("div",{className:"text-center py-8 text-gray-500",children:A.jsx("p",{children:"No content available"})}):t.isLoading?A.jsxs("div",{className:"flex items-center justify-center gap-3 py-6",children:[A.jsx(G8,{}),A.jsx("span",{className:"text-slate-400 text-sm",children:"Generating content..."})]}):null,[t.contents,t.isLoading]),p=B.useCallback(()=>{if(!r.current)return{x:0,y:0};const j=r.current.getBoundingClientRect();return{x:j.left+j.width/2,y:j.top+j.height/2}},[]),v=B.useCallback((j,$)=>{const y=$.target.getBoundingClientRect();f({x:y.left+y.width/2,y:y.top+y.height/2}),o({suggestion:j,x:$.clientX,y:$.clientY,isDragging:!0}),document.addEventListener("pointermove",b),document.addEventListener("pointerup",R)},[]),b=B.useCallback(j=>{o($=>$.isDragging?{...$,x:j.clientX,y:j.clientY}:$)},[]),R=B.useCallback(()=>{const j=l.current;if(j.isDragging&&t.onNodeCallback){const $=n({x:j.x,y:j.y});t.onNodeCallback(j.suggestion||void 0,e,$)}o({suggestion:"explain",x:0,y:0,isDragging:!1}),f(null),document.removeEventListener("pointermove",b),document.removeEventListener("pointerup",R)},[t.onNodeCallback,e,n]),M=B.useMemo(()=>({background:t.myColor?`linear-gradient(135deg, ${t.myColor}f0, ${t.myColor}e0)`:"linear-gradient(135deg, #ffffff, #fafafa)",borderColor:t.myColor?`${t.myColor}60`:"rgba(229, 231, 235, 0.6)",transform:"translateZ(0)",willChange:"transform",backfaceVisibility:"hidden"}),[t.myColor]),O=B.useCallback(()=>{},[]),L=B.useCallback(()=>{},[]);return A.jsxs("div",{ref:r,className:`group relative bg-white/95 border border-gray-200/60 rounded-3xl
                       min-w-[320px] max-w-[640px] cursor-grab select-none
                       transition-all duration-300 ease-[cubic-bezier(0.4,0,0.2,1)]
                       hover:border-gray-300/80`,style:M,onMouseEnter:O,onMouseLeave:L,children:[A.jsxs("div",{className:"relative p-6 text-gray-900",children:[t.isLoading&&A.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 py-12",children:[A.jsxs("div",{className:"relative",children:[A.jsx(U8,{className:"w-8 h-8 text-blue-500 animate-spin"}),A.jsx("div",{className:"absolute inset-0 w-8 h-8 rounded-full bg-blue-500/20 animate-ping"})]}),A.jsx("span",{className:"text-gray-600 text-sm font-medium",children:"Generating content..."})]}),!t.isLoading&&A.jsx("header",{className:"flex flex-col items-center gap-4 mb-6",children:A.jsxs("div",{className:"flex items-center gap-3 group/header",children:[t.icon?A.jsx("div",{className:`w-12 h-12 flex items-center justify-center rounded-2xl bg-white/50 backdrop-blur-sm border border-white/80 
                                               transition-transform duration-200 ease-out group-hover/header:scale-105`,children:A.jsx("span",{className:"text-2xl",dangerouslySetInnerHTML:{__html:t.icon}})}):A.jsx("div",{className:`w-12 h-12 flex items-center justify-center rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 text-white 
                                               transition-transform duration-200 ease-out group-hover/header:scale-105`,children:A.jsx(Hd,{className:"w-6 h-6"})}),A.jsx("h2",{className:`text-2xl font-bold tracking-tight text-gray-900 
                                          transition-colors duration-200 group-hover/header:text-gray-700`,children:t.label||"Node"})]})}),!t.isLoading&&h,t.suggestions&&t.suggestions.length>0&&A.jsx(lX,{suggestions:t.suggestions,dragState:s,handleDragStart:v,handleOrigin:c,getParentCenter:p})]}),A.jsx(uX,{})]})}const dX={staticEditable:iX,draggableEditable:cX},fX={...dX,tempInput:LY};function hX(){const[t,e]=B.useState(!1),[n,r]=B.useState(!1),[s,o]=B.useState(!1),[l,c]=B.useState(!1),{user:f,signOut:h}=$8(),{notifications:p,removeNotification:v,showSuccess:b,showError:R,showInfo:M}=nX(),{addLayout:O,getLastTwoLayouts:L,clearHistory:j}=rX(f?.uid),{nodes:$,edges:Y,allBoards:y,currentBoard:E,isSwitchingBoard:w,isSaving:x,onNodesChange:S,onEdgesChange:N,setNodes:C,setEdges:D,switchToBoard:H,createNewBoard:V,deleteBoard:U,updateBoardName:Q,clearBoardState:k,saveNewNodeContent:F}=tX(f,{showSuccess:b,showError:R,showInfo:M}),G=async()=>{await h(),k(),j()},X=()=>{e(!0)},z=B.useCallback(ee=>{const ae={id:`e${ee.source}-${ee.target}`,source:ee.source,target:ee.target,sourceHandle:ee.sourceHandle,targetHandle:ee.targetHandle};N([{type:"add",item:ae}])},[N]),W=B.useCallback((ee,ae,le,fe,he)=>{if(!le||!he){console.warn("handleNodeCallback called without suggestion or position",le,he);return}const Ee=`temp-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;C($e=>[...$e,{id:Ee,type:"tempInput",position:{x:he.x-80,y:he.y-40},data:{label:le,parent:fe}}]);const Ae="#3b82f6";fe&&N([{type:"add",item:{id:`e${fe}-${Ee}`,source:fe,target:Ee,sourceHandle:le,style:{stroke:Ae,strokeWidth:3},markerEnd:{type:No.ArrowClosed,color:Ae}}}])},[C]),ne=B.useMemo(()=>$.map(ee=>{let ae={...ee.data};return ae.onNodeCallback=(le,fe,he)=>W(ee.id,ee.data,le,fe,he),ee.type==="tempInput"&&(ae.onNodeCallback=(le,fe)=>{C(we=>we.map(Xe=>Xe.id===ee.id?{...Xe,type:"draggableEditable",data:{...Xe.data,label:le}}:Xe));const he=$.find(we=>we.id===ee.data.parent),Ee=he?.data?.color,Ae=he?.data?.label,$e={word:le},Ye=ee.data.parent,Ve={x:ee.position.x,y:ee.position.y},Le=vb($e,Ye,Ve,"draggableEditable",$,C,S,N,Ee,Ae,void 0,!0,ee,ee.data.mode,F,L,O);if(C(we=>we.map(Xe=>Xe.id===ee.id?{...Xe,data:{...Xe.data,myColor:Le}}:Xe)),ee.data.parent){if(!Le)return;D(we=>we.map(Xe=>Xe.id===`e${ee.data.parent}-${ee.id}`?{...Xe,style:{...Xe.style||{},stroke:Le,strokeWidth:3},markerEnd:{type:No.ArrowClosed,color:Le}}:Xe))}}),{...ee,data:ae}}),[$,W,C]),J=B.useMemo(()=>A.jsxs(Q3,{nodes:ne,edges:Y,onNodesChange:S,onEdgesChange:N,onConnect:z,nodeTypes:fX,connectionMode:wa.Loose,fitView:!0,className:"bg-gray-50 dark:bg-gray-900 w-full h-full",children:[A.jsx(pO,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg"}),A.jsx(wO,{variant:$r.Cross,gap:30,size:10,lineWidth:.5,color:"#94a3b8",className:"bg-gray-50 dark:bg-gray-900"})]}),[ne,Y,S,N,z]);return f?A.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 relative",style:{height:"100vh",width:"100vw",overflow:"hidden"},children:[A.jsx(XK,{notifications:p,onRemove:v}),A.jsx("div",{style:{height:"100%",position:"relative"},children:A.jsxs(_C,{direction:"horizontal",children:[A.jsx(Yy,{defaultSize:15,minSize:10,maxSize:30,children:A.jsx("div",{className:"bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700",children:A.jsx(FK,{allBoards:y,currentBoard:E,onSwitchBoard:H,onCreateBoard:async ee=>{await V(ee)},onDeleteBoard:U,onSignOut:G,isLoading:w})})}),A.jsx(bC,{}),A.jsx(Yy,{children:A.jsxs("div",{className:"bg-white dark:bg-gray-800",style:{height:"100%",position:"relative"},children:[A.jsx(KK,{name:E?.name||"Loading...",onSetName:Q,user:f,isSaving:x}),A.jsx("div",{className:"bg-gray-50 dark:bg-gray-900",style:{height:"calc(100% - 60px)",width:"100%"},children:A.jsx(KH,{nodes:$,onNodesChange:S,onEdgesChange:N,setNodes:C,saveCallback:F,getLastTwoLayouts:L,addLayout:O,children:J})})]})})]})}),A.jsx(JK,{isVisible:n,onToggle:()=>r(!n)}),A.jsx(OY,{isOpen:l||s,onClose:()=>{c(!1),o(!1)},currentBoardId:E?.id,currentBoardName:E?.name,nodes:$,setNodes:C,onNodesChange:S,onEdgesChange:N,getLastTwoLayouts:L,addLayout:O}),A.jsx(VY,{onClick:()=>c(!0),isOpen:l||s})]}):t?A.jsx(HK,{}):A.jsx(WK,{onLogin:X})}function mX(){return A.jsx(GK,{children:A.jsx(hX,{})})}const K8=document.getElementById("root");if(!K8)throw new Error("Failed to find the root element");k4.createRoot(K8).render(A.jsx(B.StrictMode,{children:A.jsx(mX,{})}));export{qd as C,er as R,g_ as _,Vx as a,qM as b,Qv as c,_d as d,Wv as e,YA as f,Kv as g,pX as h,ia as i,QA as n,jM as r,ti as s};
