function lN(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function O0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function cN(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function i(){var a=!1;try{a=this instanceof i}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var a=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:function(){return t[i]}})}),n}var sm={exports:{}},jc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fE;function uN(){if(fE)return jc;fE=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:t,type:i,key:c,ref:a!==void 0?a:null,props:l}}return jc.Fragment=e,jc.jsx=n,jc.jsxs=n,jc}var gE;function dN(){return gE||(gE=1,sm.exports=uN()),sm.exports}var R=dN(),am={exports:{}},Ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pE;function hN(){if(pE)return Ue;pE=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function b(V){return V===null||typeof V!="object"?null:(V=v&&V[v]||V["@@iterator"],typeof V=="function"?V:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,P={};function O(V,J,te){this.props=V,this.context=J,this.refs=P,this.updater=te||x}O.prototype.isReactComponent={},O.prototype.setState=function(V,J){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,J,"setState")},O.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function B(){}B.prototype=O.prototype;function q(V,J,te){this.props=V,this.context=J,this.refs=P,this.updater=te||x}var G=q.prototype=new B;G.constructor=q,I(G,O.prototype),G.isPureReactComponent=!0;var j=Array.isArray,W={H:null,A:null,T:null,S:null,V:null},X=Object.prototype.hasOwnProperty;function A(V,J,te,K,ie,ue){return te=ue.ref,{$$typeof:t,type:V,key:J,ref:te!==void 0?te:null,props:ue}}function T(V,J){return A(V.type,J,void 0,void 0,void 0,V.props)}function N(V){return typeof V=="object"&&V!==null&&V.$$typeof===t}function U(V){var J={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(te){return J[te]})}var L=/\/+/g;function C(V,J){return typeof V=="object"&&V!==null&&V.key!=null?U(""+V.key):J.toString(36)}function S(){}function D(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(S,S):(V.status="pending",V.then(function(J){V.status==="pending"&&(V.status="fulfilled",V.value=J)},function(J){V.status==="pending"&&(V.status="rejected",V.reason=J)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function H(V,J,te,K,ie){var ue=typeof V;(ue==="undefined"||ue==="boolean")&&(V=null);var de=!1;if(V===null)de=!0;else switch(ue){case"bigint":case"string":case"number":de=!0;break;case"object":switch(V.$$typeof){case t:case e:de=!0;break;case y:return de=V._init,H(de(V._payload),J,te,K,ie)}}if(de)return ie=ie(V),de=K===""?"."+C(V,0):K,j(ie)?(te="",de!=null&&(te=de.replace(L,"$&/")+"/"),H(ie,J,te,"",function(Ae){return Ae})):ie!=null&&(N(ie)&&(ie=T(ie,te+(ie.key==null||V&&V.key===ie.key?"":(""+ie.key).replace(L,"$&/")+"/")+de)),J.push(ie)),1;de=0;var ve=K===""?".":K+":";if(j(V))for(var _e=0;_e<V.length;_e++)K=V[_e],ue=ve+C(K,_e),de+=H(K,J,te,ue,ie);else if(_e=b(V),typeof _e=="function")for(V=_e.call(V),_e=0;!(K=V.next()).done;)K=K.value,ue=ve+C(K,_e++),de+=H(K,J,te,ue,ie);else if(ue==="object"){if(typeof V.then=="function")return H(D(V),J,te,K,ie);throw J=String(V),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return de}function k(V,J,te){if(V==null)return V;var K=[],ie=0;return H(V,K,"","",function(ue){return J.call(te,ue,ie++)}),K}function $(V){if(V._status===-1){var J=V._result;J=J(),J.then(function(te){(V._status===0||V._status===-1)&&(V._status=1,V._result=te)},function(te){(V._status===0||V._status===-1)&&(V._status=2,V._result=te)}),V._status===-1&&(V._status=0,V._result=J)}if(V._status===1)return V._result.default;throw V._result}var Z=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function Q(){}return Ue.Children={map:k,forEach:function(V,J,te){k(V,function(){J.apply(this,arguments)},te)},count:function(V){var J=0;return k(V,function(){J++}),J},toArray:function(V){return k(V,function(J){return J})||[]},only:function(V){if(!N(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Ue.Component=O,Ue.Fragment=n,Ue.Profiler=a,Ue.PureComponent=q,Ue.StrictMode=i,Ue.Suspense=f,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(V){return W.H.useMemoCache(V)}},Ue.cache=function(V){return function(){return V.apply(null,arguments)}},Ue.cloneElement=function(V,J,te){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var K=I({},V.props),ie=V.key,ue=void 0;if(J!=null)for(de in J.ref!==void 0&&(ue=void 0),J.key!==void 0&&(ie=""+J.key),J)!X.call(J,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&J.ref===void 0||(K[de]=J[de]);var de=arguments.length-2;if(de===1)K.children=te;else if(1<de){for(var ve=Array(de),_e=0;_e<de;_e++)ve[_e]=arguments[_e+2];K.children=ve}return A(V.type,ie,void 0,void 0,ue,K)},Ue.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},Ue.createElement=function(V,J,te){var K,ie={},ue=null;if(J!=null)for(K in J.key!==void 0&&(ue=""+J.key),J)X.call(J,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(ie[K]=J[K]);var de=arguments.length-2;if(de===1)ie.children=te;else if(1<de){for(var ve=Array(de),_e=0;_e<de;_e++)ve[_e]=arguments[_e+2];ie.children=ve}if(V&&V.defaultProps)for(K in de=V.defaultProps,de)ie[K]===void 0&&(ie[K]=de[K]);return A(V,ue,void 0,void 0,null,ie)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(V){return{$$typeof:d,render:V}},Ue.isValidElement=N,Ue.lazy=function(V){return{$$typeof:y,_payload:{_status:-1,_result:V},_init:$}},Ue.memo=function(V,J){return{$$typeof:p,type:V,compare:J===void 0?null:J}},Ue.startTransition=function(V){var J=W.T,te={};W.T=te;try{var K=V(),ie=W.S;ie!==null&&ie(te,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(Q,Z)}catch(ue){Z(ue)}finally{W.T=J}},Ue.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},Ue.use=function(V){return W.H.use(V)},Ue.useActionState=function(V,J,te){return W.H.useActionState(V,J,te)},Ue.useCallback=function(V,J){return W.H.useCallback(V,J)},Ue.useContext=function(V){return W.H.useContext(V)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(V,J){return W.H.useDeferredValue(V,J)},Ue.useEffect=function(V,J,te){var K=W.H;if(typeof te=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(V,J)},Ue.useId=function(){return W.H.useId()},Ue.useImperativeHandle=function(V,J,te){return W.H.useImperativeHandle(V,J,te)},Ue.useInsertionEffect=function(V,J){return W.H.useInsertionEffect(V,J)},Ue.useLayoutEffect=function(V,J){return W.H.useLayoutEffect(V,J)},Ue.useMemo=function(V,J){return W.H.useMemo(V,J)},Ue.useOptimistic=function(V,J){return W.H.useOptimistic(V,J)},Ue.useReducer=function(V,J,te){return W.H.useReducer(V,J,te)},Ue.useRef=function(V){return W.H.useRef(V)},Ue.useState=function(V){return W.H.useState(V)},Ue.useSyncExternalStore=function(V,J,te){return W.H.useSyncExternalStore(V,J,te)},Ue.useTransition=function(){return W.H.useTransition()},Ue.version="19.1.0",Ue}var mE;function Ou(){return mE||(mE=1,am.exports=hN()),am.exports}var F=Ou();const fe=O0(F),fN=lN({__proto__:null,default:fe},[F]);var om={exports:{}},Hc={},lm={exports:{}},cm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yE;function gN(){return yE||(yE=1,function(t){function e(k,$){var Z=k.length;k.push($);e:for(;0<Z;){var Q=Z-1>>>1,V=k[Q];if(0<a(V,$))k[Q]=$,k[Z]=V,Z=Q;else break e}}function n(k){return k.length===0?null:k[0]}function i(k){if(k.length===0)return null;var $=k[0],Z=k.pop();if(Z!==$){k[0]=Z;e:for(var Q=0,V=k.length,J=V>>>1;Q<J;){var te=2*(Q+1)-1,K=k[te],ie=te+1,ue=k[ie];if(0>a(K,Z))ie<V&&0>a(ue,K)?(k[Q]=ue,k[ie]=Z,Q=ie):(k[Q]=K,k[te]=Z,Q=te);else if(ie<V&&0>a(ue,Z))k[Q]=ue,k[ie]=Z,Q=ie;else break e}}return $}function a(k,$){var Z=k.sortIndex-$.sortIndex;return Z!==0?Z:k.id-$.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var f=[],p=[],y=1,v=null,b=3,x=!1,I=!1,P=!1,O=!1,B=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function j(k){for(var $=n(p);$!==null;){if($.callback===null)i(p);else if($.startTime<=k)i(p),$.sortIndex=$.expirationTime,e(f,$);else break;$=n(p)}}function W(k){if(P=!1,j(k),!I)if(n(f)!==null)I=!0,X||(X=!0,C());else{var $=n(p);$!==null&&H(W,$.startTime-k)}}var X=!1,A=-1,T=5,N=-1;function U(){return O?!0:!(t.unstable_now()-N<T)}function L(){if(O=!1,X){var k=t.unstable_now();N=k;var $=!0;try{e:{I=!1,P&&(P=!1,q(A),A=-1),x=!0;var Z=b;try{t:{for(j(k),v=n(f);v!==null&&!(v.expirationTime>k&&U());){var Q=v.callback;if(typeof Q=="function"){v.callback=null,b=v.priorityLevel;var V=Q(v.expirationTime<=k);if(k=t.unstable_now(),typeof V=="function"){v.callback=V,j(k),$=!0;break t}v===n(f)&&i(f),j(k)}else i(f);v=n(f)}if(v!==null)$=!0;else{var J=n(p);J!==null&&H(W,J.startTime-k),$=!1}}break e}finally{v=null,b=Z,x=!1}$=void 0}}finally{$?C():X=!1}}}var C;if(typeof G=="function")C=function(){G(L)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,D=S.port2;S.port1.onmessage=L,C=function(){D.postMessage(null)}}else C=function(){B(L,0)};function H(k,$){A=B(function(){k(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(k){switch(b){case 1:case 2:case 3:var $=3;break;default:$=b}var Z=b;b=$;try{return k()}finally{b=Z}},t.unstable_requestPaint=function(){O=!0},t.unstable_runWithPriority=function(k,$){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var Z=b;b=k;try{return $()}finally{b=Z}},t.unstable_scheduleCallback=function(k,$,Z){var Q=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?Q+Z:Q):Z=Q,k){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=Z+V,k={id:y++,callback:$,priorityLevel:k,startTime:Z,expirationTime:V,sortIndex:-1},Z>Q?(k.sortIndex=Z,e(p,k),n(f)===null&&k===n(p)&&(P?(q(A),A=-1):P=!0,H(W,Z-Q))):(k.sortIndex=V,e(f,k),I||x||(I=!0,X||(X=!0,C()))),k},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(k){var $=b;return function(){var Z=b;b=$;try{return k.apply(this,arguments)}finally{b=Z}}}}(cm)),cm}var vE;function pN(){return vE||(vE=1,lm.exports=gN()),lm.exports}var um={exports:{}},bn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _E;function mN(){if(_E)return bn;_E=1;var t=Ou();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(f,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:f,containerInfo:p,implementation:y}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,bn.createPortal=function(f,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(f,p,null,y)},bn.flushSync=function(f){var p=c.T,y=i.p;try{if(c.T=null,i.p=2,f)return f()}finally{c.T=p,i.p=y,i.d.f()}},bn.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(f,p))},bn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},bn.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var y=p.as,v=d(y,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:x}):y==="script"&&i.d.X(f,{crossOrigin:v,integrity:b,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},bn.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=d(p.as,p.crossOrigin);i.d.M(f,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(f)},bn.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=d(y,p.crossOrigin);i.d.L(f,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},bn.preloadModule=function(f,p){if(typeof f=="string")if(p){var y=d(p.as,p.crossOrigin);i.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(f)},bn.requestFormReset=function(f){i.d.r(f)},bn.unstable_batchedUpdates=function(f,p){return f(p)},bn.useFormState=function(f,p,y){return c.H.useFormState(f,p,y)},bn.useFormStatus=function(){return c.H.useHostTransitionStatus()},bn.version="19.1.0",bn}var bE;function f1(){if(bE)return um.exports;bE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),um.exports=mN(),um.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EE;function yN(){if(EE)return Hc;EE=1;var t=pN(),e=Ou(),n=f1();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(l(r)!==r)throw Error(i(188))}function f(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,u=s;;){var g=o.return;if(g===null)break;var m=g.alternate;if(m===null){if(u=g.return,u!==null){o=u;continue}break}if(g.child===m.child){for(m=g.child;m;){if(m===o)return d(g),r;if(m===u)return d(g),s;m=m.sibling}throw Error(i(188))}if(o.return!==u.return)o=g,u=m;else{for(var w=!1,M=g.child;M;){if(M===o){w=!0,o=g,u=m;break}if(M===u){w=!0,u=g,o=m;break}M=M.sibling}if(!w){for(M=m.child;M;){if(M===o){w=!0,o=m,u=g;break}if(M===u){w=!0,u=m,o=g;break}M=M.sibling}if(!w)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function p(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=p(r),s!==null)return s;r=r.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),G=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function C(r){return r===null||typeof r!="object"?null:(r=L&&r[L]||r["@@iterator"],typeof r=="function"?r:null)}var S=Symbol.for("react.client.reference");function D(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===S?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case I:return"Fragment";case O:return"Profiler";case P:return"StrictMode";case W:return"Suspense";case X:return"SuspenseList";case N:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case x:return"Portal";case G:return(r.displayName||"Context")+".Provider";case q:return(r._context.displayName||"Context")+".Consumer";case j:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case A:return s=r.displayName||null,s!==null?s:D(r.type)||"Memo";case T:s=r._payload,r=r._init;try{return D(r(s))}catch{}}return null}var H=Array.isArray,k=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},Q=[],V=-1;function J(r){return{current:r}}function te(r){0>V||(r.current=Q[V],Q[V]=null,V--)}function K(r,s){V++,Q[V]=r.current,r.current=s}var ie=J(null),ue=J(null),de=J(null),ve=J(null);function _e(r,s){switch(K(de,s),K(ue,r),K(ie,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?jb(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=jb(s),r=Hb(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}te(ie),K(ie,r)}function Ae(){te(ie),te(ue),te(de)}function Ne(r){r.memoizedState!==null&&K(ve,r);var s=ie.current,o=Hb(s,r.type);s!==o&&(K(ue,r),K(ie,o))}function et(r){ue.current===r&&(te(ie),te(ue)),ve.current===r&&(te(ve),Vc._currentValue=Z)}var rt=Object.prototype.hasOwnProperty,Le=t.unstable_scheduleCallback,tt=t.unstable_cancelCallback,it=t.unstable_shouldYield,Lt=t.unstable_requestPaint,ze=t.unstable_now,Ee=t.unstable_getCurrentPriorityLevel,At=t.unstable_ImmediatePriority,vn=t.unstable_UserBlockingPriority,Gt=t.unstable_NormalPriority,Fn=t.unstable_LowPriority,An=t.unstable_IdlePriority,Rn=t.log,Ir=t.unstable_setDisableYieldValue,at=null,Fe=null;function zt(r){if(typeof Rn=="function"&&Ir(r),Fe&&typeof Fe.setStrictMode=="function")try{Fe.setStrictMode(at,r)}catch{}}var Et=Math.clz32?Math.clz32:Jt,Fr=Math.log,Ut=Math.LN2;function Jt(r){return r>>>=0,r===0?32:31-(Fr(r)/Ut|0)|0}var Nn=256,In=4194304;function en(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function cn(r,s,o){var u=r.pendingLanes;if(u===0)return 0;var g=0,m=r.suspendedLanes,w=r.pingedLanes;r=r.warmLanes;var M=u&134217727;return M!==0?(u=M&~m,u!==0?g=en(u):(w&=M,w!==0?g=en(w):o||(o=M&~r,o!==0&&(g=en(o))))):(M=u&~m,M!==0?g=en(M):w!==0?g=en(w):o||(o=u&~r,o!==0&&(g=en(o)))),g===0?0:s!==0&&s!==g&&(s&m)===0&&(m=g&-g,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:g}function Cn(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function Ti(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Si(){var r=Nn;return Nn<<=1,(Nn&4194048)===0&&(Nn=256),r}function Cr(){var r=In;return In<<=1,(In&62914560)===0&&(In=4194304),r}function Gn(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function ur(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Yn(r,s,o,u,g,m){var w=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var M=r.entanglements,Y=r.expirationTimes,ae=r.hiddenUpdates;for(o=w&~o;0<o;){var he=31-Et(o),pe=1<<he;M[he]=0,Y[he]=-1;var oe=ae[he];if(oe!==null)for(ae[he]=null,he=0;he<oe.length;he++){var le=oe[he];le!==null&&(le.lane&=-536870913)}o&=~pe}u!==0&&dr(r,u,0),m!==0&&g===0&&r.tag!==0&&(r.suspendedLanes|=m&~(w&~s))}function dr(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-Et(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194090}function ca(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var u=31-Et(o),g=1<<u;g&s|r[u]&s&&(r[u]|=s),o&=~g}}function Gr(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function as(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Yr(){var r=$.p;return r!==0?r:(r=window.event,r===void 0?32:oE(r.type))}function oo(r,s){var o=$.p;try{return $.p=r,s()}finally{$.p=o}}var mt=Math.random().toString(36).slice(2),Mt="__reactFiber$"+mt,Rt="__reactProps$"+mt,Vn="__reactContainer$"+mt,ua="__reactEvents$"+mt,Hl="__reactListeners$"+mt,Kr="__reactHandles$"+mt,lo="__reactResources$"+mt,Ai="__reactMarker$"+mt;function Xr(r){delete r[Mt],delete r[Rt],delete r[ua],delete r[Hl],delete r[Kr]}function hr(r){var s=r[Mt];if(s)return s;for(var o=r.parentNode;o;){if(s=o[Vn]||o[Mt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=Gb(r);r!==null;){if(o=r[Mt])return o;r=Gb(r)}return s}r=o,o=r.parentNode}return null}function fr(r){if(r=r[Mt]||r[Vn]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function gr(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function un(r){var s=r[lo];return s||(s=r[lo]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function wt(r){r[Ai]=!0}var da=new Set,os={};function Kn(r,s){kr(r,s),kr(r+"Capture",s)}function kr(r,s){for(os[r]=s,r=0;r<s.length;r++)da.add(s[r])}var ha=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),co={},Ri={};function uo(r){return rt.call(Ri,r)?!0:rt.call(co,r)?!1:ha.test(r)?Ri[r]=!0:(co[r]=!0,!1)}function Qr(r,s,o){if(uo(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function pr(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Yt(r,s,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+u)}}var Wr,ho;function Dr(r){if(Wr===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Wr=s&&s[1]||"",ho=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wr+r+ho}var ls=!1;function Zr(r,s){if(!r||ls)return"";ls=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(le){var oe=le}Reflect.construct(r,[],pe)}else{try{pe.call()}catch(le){oe=le}r.call(pe.prototype)}}else{try{throw Error()}catch(le){oe=le}(pe=r())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(le){if(le&&oe&&typeof le.stack=="string")return[le.stack,oe.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),w=m[0],M=m[1];if(w&&M){var Y=w.split(`
`),ae=M.split(`
`);for(g=u=0;u<Y.length&&!Y[u].includes("DetermineComponentFrameRoot");)u++;for(;g<ae.length&&!ae[g].includes("DetermineComponentFrameRoot");)g++;if(u===Y.length||g===ae.length)for(u=Y.length-1,g=ae.length-1;1<=u&&0<=g&&Y[u]!==ae[g];)g--;for(;1<=u&&0<=g;u--,g--)if(Y[u]!==ae[g]){if(u!==1||g!==1)do if(u--,g--,0>g||Y[u]!==ae[g]){var he=`
`+Y[u].replace(" at new "," at ");return r.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",r.displayName)),he}while(1<=u&&0<=g);break}}}finally{ls=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Dr(o):""}function ql(r){switch(r.tag){case 26:case 27:case 5:return Dr(r.type);case 16:return Dr("Lazy");case 13:return Dr("Suspense");case 19:return Dr("SuspenseList");case 0:case 15:return Zr(r.type,!1);case 11:return Zr(r.type.render,!1);case 1:return Zr(r.type,!0);case 31:return Dr("Activity");default:return""}}function fo(r){try{var s="";do s+=ql(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function kn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function $l(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function cg(r){var s=$l(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),u=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var g=o.get,m=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return g.call(this)},set:function(w){u=""+w,m.call(this,w)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(w){u=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function go(r){r._valueTracker||(r._valueTracker=cg(r))}function Fl(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return r&&(u=$l(r)?r.checked?"true":"false":r.value),r=u,r!==o?(s.setValue(r),!0):!1}function fa(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var ug=/[\n"\\]/g;function Bt(r){return r.replace(ug,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Xn(r,s,o,u,g,m,w,M){r.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.type=w:r.removeAttribute("type"),s!=null?w==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+kn(s)):r.value!==""+kn(s)&&(r.value=""+kn(s)):w!=="submit"&&w!=="reset"||r.removeAttribute("value"),s!=null?cs(r,w,kn(s)):o!=null?cs(r,w,kn(o)):u!=null&&r.removeAttribute("value"),g==null&&m!=null&&(r.defaultChecked=!!m),g!=null&&(r.checked=g&&typeof g!="function"&&typeof g!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?r.name=""+kn(M):r.removeAttribute("name")}function ga(r,s,o,u,g,m,w,M){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;o=o!=null?""+kn(o):"",s=s!=null?""+kn(s):o,M||s===r.value||(r.value=s),r.defaultValue=s}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=M?r.checked:!!u,r.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.name=w)}function cs(r,s,o){s==="number"&&fa(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Ni(r,s,o,u){if(r=r.options,s){s={};for(var g=0;g<o.length;g++)s["$"+o[g]]=!0;for(o=0;o<r.length;o++)g=s.hasOwnProperty("$"+r[o].value),r[o].selected!==g&&(r[o].selected=g),g&&u&&(r[o].defaultSelected=!0)}else{for(o=""+kn(o),s=null,g=0;g<r.length;g++){if(r[g].value===o){r[g].selected=!0,u&&(r[g].defaultSelected=!0);return}s!==null||r[g].disabled||(s=r[g])}s!==null&&(s.selected=!0)}}function dt(r,s,o){if(s!=null&&(s=""+kn(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+kn(o):""}function pa(r,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(H(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=kn(s),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function mr(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var ma=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wu(r,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,o):typeof o!="number"||o===0||ma.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function Gl(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var g in s)u=s[g],s.hasOwnProperty(g)&&o[g]!==u&&Wu(r,g,u)}else for(var m in s)s.hasOwnProperty(m)&&Wu(r,m,s[m])}function Yl(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function po(r){return hg.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Ii=null;function yr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ci=null,ki=null;function Kl(r){var s=fr(r);if(s&&(r=s.stateNode)){var o=r[Rt]||null;e:switch(r=s.stateNode,s.type){case"input":if(Xn(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Bt(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==r&&u.form===r.form){var g=u[Rt]||null;if(!g)throw Error(i(90));Xn(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===r.form&&Fl(u)}break e;case"textarea":dt(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Ni(r,!!o.multiple,s,!1)}}}var Jr=!1;function Zu(r,s,o){if(Jr)return r(s,o);Jr=!0;try{var u=r(s);return u}finally{if(Jr=!1,(Ci!==null||ki!==null)&&(Fd(),Ci&&(s=Ci,r=ki,ki=Ci=null,Kl(s),r)))for(s=0;s<r.length;s++)Kl(r[s])}}function ya(r,s){var o=r.stateNode;if(o===null)return null;var u=o[Rt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vr=!1;if(Mr)try{var va={};Object.defineProperty(va,"passive",{get:function(){vr=!0}}),window.addEventListener("test",va,va),window.removeEventListener("test",va,va)}catch{vr=!1}var ei=null,us=null,Di=null;function Xl(){if(Di)return Di;var r,s=us,o=s.length,u,g="value"in ei?ei.value:ei.textContent,m=g.length;for(r=0;r<o&&s[r]===g[r];r++);var w=o-r;for(u=1;u<=w&&s[o-u]===g[m-u];u++);return Di=g.slice(r,1<u?1-u:void 0)}function ti(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function ni(){return!0}function Ql(){return!1}function tn(r){function s(o,u,g,m,w){this._reactName=o,this._targetInst=g,this.type=u,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var M in r)r.hasOwnProperty(M)&&(o=r[M],this[M]=o?o(m):m[M]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ni:Ql,this.isPropagationStopped=Ql,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ni)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ni)},persist:function(){},isPersistent:ni}),s}var ot={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mo=tn(ot),_a=y({},ot,{view:0,detail:0}),Ju=tn(_a),yo,vo,ri,ba=y({},_a,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xa,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ri&&(ri&&r.type==="mousemove"?(yo=r.screenX-ri.screenX,vo=r.screenY-ri.screenY):vo=yo=0,ri=r),yo)},movementY:function(r){return"movementY"in r?r.movementY:vo}}),_r=tn(ba),ed=y({},ba,{dataTransfer:0}),fg=tn(ed),Ea=y({},_a,{relatedTarget:0}),_o=tn(Ea),Wl=y({},ot,{animationName:0,elapsedTime:0,pseudoElement:0}),bo=tn(Wl),td=y({},ot,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Eo=tn(td),gg=y({},ot,{data:0}),Zl=tn(gg),wa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jl(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=rd[r])?!!s[r]:!1}function xa(){return Jl}var id=y({},_a,{key:function(r){if(r.key){var s=wa[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=ti(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?nd[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xa,charCode:function(r){return r.type==="keypress"?ti(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ti(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),wo=tn(id),sd=y({},ba,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ec=tn(sd),Mi=y({},_a,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xa}),ad=tn(Mi),od=y({},ot,{propertyName:0,elapsedTime:0,pseudoElement:0}),ld=tn(od),cd=y({},ba,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),xo=tn(cd),Dn=y({},ot,{newState:0,oldState:0}),ud=tn(Dn),dd=[9,13,27,32],ii=Mr&&"CompositionEvent"in window,h=null;Mr&&"documentMode"in document&&(h=document.documentMode);var _=Mr&&"TextEvent"in window&&!h,E=Mr&&(!ii||h&&8<h&&11>=h),z=" ",re=!1;function ce(r,s){switch(r){case"keyup":return dd.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function be(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Qe=!1;function Kt(r,s){switch(r){case"compositionend":return be(s);case"keypress":return s.which!==32?null:(re=!0,z);case"textInput":return r=s.data,r===z&&re?null:r;default:return null}}function We(r,s){if(Qe)return r==="compositionend"||!ii&&ce(r,s)?(r=Xl(),Di=us=ei=null,Qe=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return E&&s.locale!=="ko"?null:s.data;default:return null}}var nn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xt(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!nn[r.type]:s==="textarea"}function Oi(r,s,o,u){Ci?ki?ki.push(u):ki=[u]:Ci=u,s=Wd(s,"onChange"),0<s.length&&(o=new mo("onChange","change",null,o,u),r.push({event:o,listeners:s}))}var dn=null,si=null;function tc(r){Vb(r,0)}function hd(r){var s=gr(r);if(Fl(s))return r}function rv(r,s){if(r==="change")return s}var iv=!1;if(Mr){var pg;if(Mr){var mg="oninput"in document;if(!mg){var sv=document.createElement("div");sv.setAttribute("oninput","return;"),mg=typeof sv.oninput=="function"}pg=mg}else pg=!1;iv=pg&&(!document.documentMode||9<document.documentMode)}function av(){dn&&(dn.detachEvent("onpropertychange",ov),si=dn=null)}function ov(r){if(r.propertyName==="value"&&hd(si)){var s=[];Oi(s,si,r,yr(r)),Zu(tc,s)}}function z2(r,s,o){r==="focusin"?(av(),dn=s,si=o,dn.attachEvent("onpropertychange",ov)):r==="focusout"&&av()}function U2(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return hd(si)}function B2(r,s){if(r==="click")return hd(s)}function j2(r,s){if(r==="input"||r==="change")return hd(s)}function H2(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Qn=typeof Object.is=="function"?Object.is:H2;function nc(r,s){if(Qn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var g=o[u];if(!rt.call(s,g)||!Qn(r[g],s[g]))return!1}return!0}function lv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function cv(r,s){var o=lv(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=s&&u>=s)return{node:o,offset:s-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=lv(o)}}function uv(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?uv(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function dv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=fa(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=fa(r.document)}return s}function yg(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var q2=Mr&&"documentMode"in document&&11>=document.documentMode,To=null,vg=null,rc=null,_g=!1;function hv(r,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;_g||To==null||To!==fa(u)||(u=To,"selectionStart"in u&&yg(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),rc&&nc(rc,u)||(rc=u,u=Wd(vg,"onSelect"),0<u.length&&(s=new mo("onSelect","select",null,s,o),r.push({event:s,listeners:u}),s.target=To)))}function Ta(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var So={animationend:Ta("Animation","AnimationEnd"),animationiteration:Ta("Animation","AnimationIteration"),animationstart:Ta("Animation","AnimationStart"),transitionrun:Ta("Transition","TransitionRun"),transitionstart:Ta("Transition","TransitionStart"),transitioncancel:Ta("Transition","TransitionCancel"),transitionend:Ta("Transition","TransitionEnd")},bg={},fv={};Mr&&(fv=document.createElement("div").style,"AnimationEvent"in window||(delete So.animationend.animation,delete So.animationiteration.animation,delete So.animationstart.animation),"TransitionEvent"in window||delete So.transitionend.transition);function Sa(r){if(bg[r])return bg[r];if(!So[r])return r;var s=So[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in fv)return bg[r]=s[o];return r}var gv=Sa("animationend"),pv=Sa("animationiteration"),mv=Sa("animationstart"),$2=Sa("transitionrun"),F2=Sa("transitionstart"),G2=Sa("transitioncancel"),yv=Sa("transitionend"),vv=new Map,Eg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Eg.push("scrollEnd");function Or(r,s){vv.set(r,s),Kn(s,[r])}var _v=new WeakMap;function br(r,s){if(typeof r=="object"&&r!==null){var o=_v.get(r);return o!==void 0?o:(s={value:r,source:s,stack:fo(s)},_v.set(r,s),s)}return{value:r,source:s,stack:fo(s)}}var Er=[],Ao=0,wg=0;function fd(){for(var r=Ao,s=wg=Ao=0;s<r;){var o=Er[s];Er[s++]=null;var u=Er[s];Er[s++]=null;var g=Er[s];Er[s++]=null;var m=Er[s];if(Er[s++]=null,u!==null&&g!==null){var w=u.pending;w===null?g.next=g:(g.next=w.next,w.next=g),u.pending=g}m!==0&&bv(o,g,m)}}function gd(r,s,o,u){Er[Ao++]=r,Er[Ao++]=s,Er[Ao++]=o,Er[Ao++]=u,wg|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function xg(r,s,o,u){return gd(r,s,o,u),pd(r)}function Ro(r,s){return gd(r,null,null,s),pd(r)}function bv(r,s,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var g=!1,m=r.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(g=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,g&&s!==null&&(g=31-Et(o),r=m.hiddenUpdates,u=r[g],u===null?r[g]=[s]:u.push(s),s.lane=o|536870912),m):null}function pd(r){if(50<Nc)throw Nc=0,Ip=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var No={};function Y2(r,s,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(r,s,o,u){return new Y2(r,s,o,u)}function Tg(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Pi(r,s){var o=r.alternate;return o===null?(o=Wn(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Ev(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function md(r,s,o,u,g,m){var w=0;if(u=r,typeof r=="function")Tg(r)&&(w=1);else if(typeof r=="string")w=XR(r,o,ie.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case N:return r=Wn(31,o,s,g),r.elementType=N,r.lanes=m,r;case I:return Aa(o.children,g,m,s);case P:w=8,g|=24;break;case O:return r=Wn(12,o,s,g|2),r.elementType=O,r.lanes=m,r;case W:return r=Wn(13,o,s,g),r.elementType=W,r.lanes=m,r;case X:return r=Wn(19,o,s,g),r.elementType=X,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case B:case G:w=10;break e;case q:w=9;break e;case j:w=11;break e;case A:w=14;break e;case T:w=16,u=null;break e}w=29,o=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=Wn(w,o,s,g),s.elementType=r,s.type=u,s.lanes=m,s}function Aa(r,s,o,u){return r=Wn(7,r,u,s),r.lanes=o,r}function Sg(r,s,o){return r=Wn(6,r,null,s),r.lanes=o,r}function Ag(r,s,o){return s=Wn(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var Io=[],Co=0,yd=null,vd=0,wr=[],xr=0,Ra=null,Vi=1,Li="";function Na(r,s){Io[Co++]=vd,Io[Co++]=yd,yd=r,vd=s}function wv(r,s,o){wr[xr++]=Vi,wr[xr++]=Li,wr[xr++]=Ra,Ra=r;var u=Vi;r=Li;var g=32-Et(u)-1;u&=~(1<<g),o+=1;var m=32-Et(s)+g;if(30<m){var w=g-g%5;m=(u&(1<<w)-1).toString(32),u>>=w,g-=w,Vi=1<<32-Et(s)+g|o<<g|u,Li=m+r}else Vi=1<<m|o<<g|u,Li=r}function Rg(r){r.return!==null&&(Na(r,1),wv(r,1,0))}function Ng(r){for(;r===yd;)yd=Io[--Co],Io[Co]=null,vd=Io[--Co],Io[Co]=null;for(;r===Ra;)Ra=wr[--xr],wr[xr]=null,Li=wr[--xr],wr[xr]=null,Vi=wr[--xr],wr[xr]=null}var Mn=null,Nt=null,st=!1,Ia=null,ai=!1,Ig=Error(i(519));function Ca(r){var s=Error(i(418,""));throw ac(br(s,r)),Ig}function xv(r){var s=r.stateNode,o=r.type,u=r.memoizedProps;switch(s[Mt]=r,s[Rt]=u,o){case"dialog":Ye("cancel",s),Ye("close",s);break;case"iframe":case"object":case"embed":Ye("load",s);break;case"video":case"audio":for(o=0;o<Cc.length;o++)Ye(Cc[o],s);break;case"source":Ye("error",s);break;case"img":case"image":case"link":Ye("error",s),Ye("load",s);break;case"details":Ye("toggle",s);break;case"input":Ye("invalid",s),ga(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),go(s);break;case"select":Ye("invalid",s);break;case"textarea":Ye("invalid",s),pa(s,u.value,u.defaultValue,u.children),go(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||Bb(s.textContent,o)?(u.popover!=null&&(Ye("beforetoggle",s),Ye("toggle",s)),u.onScroll!=null&&Ye("scroll",s),u.onScrollEnd!=null&&Ye("scrollend",s),u.onClick!=null&&(s.onclick=Zd),s=!0):s=!1,s||Ca(r)}function Tv(r){for(Mn=r.return;Mn;)switch(Mn.tag){case 5:case 13:ai=!1;return;case 27:case 3:ai=!0;return;default:Mn=Mn.return}}function ic(r){if(r!==Mn)return!1;if(!st)return Tv(r),st=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Fp(r.type,r.memoizedProps)),o=!o),o&&Nt&&Ca(r),Tv(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){Nt=Vr(r.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}Nt=null}}else s===27?(s=Nt,As(r.type)?(r=Xp,Xp=null,Nt=r):Nt=s):Nt=Mn?Vr(r.stateNode.nextSibling):null;return!0}function sc(){Nt=Mn=null,st=!1}function Sv(){var r=Ia;return r!==null&&(Un===null?Un=r:Un.push.apply(Un,r),Ia=null),r}function ac(r){Ia===null?Ia=[r]:Ia.push(r)}var Cg=J(null),ka=null,zi=null;function ds(r,s,o){K(Cg,s._currentValue),s._currentValue=o}function Ui(r){r._currentValue=Cg.current,te(Cg)}function kg(r,s,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===o)break;r=r.return}}function Dg(r,s,o,u){var g=r.child;for(g!==null&&(g.return=r);g!==null;){var m=g.dependencies;if(m!==null){var w=g.child;m=m.firstContext;e:for(;m!==null;){var M=m;m=g;for(var Y=0;Y<s.length;Y++)if(M.context===s[Y]){m.lanes|=o,M=m.alternate,M!==null&&(M.lanes|=o),kg(m.return,o,r),u||(w=null);break e}m=M.next}}else if(g.tag===18){if(w=g.return,w===null)throw Error(i(341));w.lanes|=o,m=w.alternate,m!==null&&(m.lanes|=o),kg(w,o,r),w=null}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===r){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}}function oc(r,s,o,u){r=null;for(var g=s,m=!1;g!==null;){if(!m){if((g.flags&524288)!==0)m=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var w=g.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var M=g.type;Qn(g.pendingProps.value,w.value)||(r!==null?r.push(M):r=[M])}}else if(g===ve.current){if(w=g.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(r!==null?r.push(Vc):r=[Vc])}g=g.return}r!==null&&Dg(s,r,o,u),s.flags|=262144}function _d(r){for(r=r.firstContext;r!==null;){if(!Qn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Da(r){ka=r,zi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function _n(r){return Av(ka,r)}function bd(r,s){return ka===null&&Da(r),Av(r,s)}function Av(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},zi===null){if(r===null)throw Error(i(308));zi=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else zi=zi.next=s;return o}var K2=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},X2=t.unstable_scheduleCallback,Q2=t.unstable_NormalPriority,Qt={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mg(){return{controller:new K2,data:new Map,refCount:0}}function lc(r){r.refCount--,r.refCount===0&&X2(Q2,function(){r.controller.abort()})}var cc=null,Og=0,ko=0,Do=null;function W2(r,s){if(cc===null){var o=cc=[];Og=0,ko=Vp(),Do={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Og++,s.then(Rv,Rv),s}function Rv(){if(--Og===0&&cc!==null){Do!==null&&(Do.status="fulfilled");var r=cc;cc=null,ko=0,Do=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function Z2(r,s){var o=[],u={status:"pending",value:null,reason:null,then:function(g){o.push(g)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var g=0;g<o.length;g++)(0,o[g])(s)},function(g){for(u.status="rejected",u.reason=g,g=0;g<o.length;g++)(0,o[g])(void 0)}),u}var Nv=k.S;k.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&W2(r,s),Nv!==null&&Nv(r,s)};var Ma=J(null);function Pg(){var r=Ma.current;return r!==null?r:yt.pooledCache}function Ed(r,s){s===null?K(Ma,Ma.current):K(Ma,s.pool)}function Iv(){var r=Pg();return r===null?null:{parent:Qt._currentValue,pool:r}}var uc=Error(i(460)),Cv=Error(i(474)),wd=Error(i(542)),Vg={then:function(){}};function kv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function xd(){}function Dv(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(xd,xd),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Ov(r),r;default:if(typeof s.status=="string")s.then(xd,xd);else{if(r=yt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=u}},function(u){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Ov(r),r}throw dc=s,uc}}var dc=null;function Mv(){if(dc===null)throw Error(i(459));var r=dc;return dc=null,r}function Ov(r){if(r===uc||r===wd)throw Error(i(483))}var hs=!1;function Lg(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zg(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function fs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function gs(r,s,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(ct&2)!==0){var g=u.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),u.pending=s,s=pd(r),bv(r,null,o),s}return gd(r,u,s,o),pd(r)}function hc(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,ca(r,o)}}function Ug(r,s){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var g=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?g=m=w:m=m.next=w,o=o.next}while(o!==null);m===null?g=m=s:m=m.next=s}else g=m=s;o={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var Bg=!1;function fc(){if(Bg){var r=Do;if(r!==null)throw r}}function gc(r,s,o,u){Bg=!1;var g=r.updateQueue;hs=!1;var m=g.firstBaseUpdate,w=g.lastBaseUpdate,M=g.shared.pending;if(M!==null){g.shared.pending=null;var Y=M,ae=Y.next;Y.next=null,w===null?m=ae:w.next=ae,w=Y;var he=r.alternate;he!==null&&(he=he.updateQueue,M=he.lastBaseUpdate,M!==w&&(M===null?he.firstBaseUpdate=ae:M.next=ae,he.lastBaseUpdate=Y))}if(m!==null){var pe=g.baseState;w=0,he=ae=Y=null,M=m;do{var oe=M.lane&-536870913,le=oe!==M.lane;if(le?(Ze&oe)===oe:(u&oe)===oe){oe!==0&&oe===ko&&(Bg=!0),he!==null&&(he=he.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var Oe=r,Ce=M;oe=s;var gt=o;switch(Ce.tag){case 1:if(Oe=Ce.payload,typeof Oe=="function"){pe=Oe.call(gt,pe,oe);break e}pe=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Ce.payload,oe=typeof Oe=="function"?Oe.call(gt,pe,oe):Oe,oe==null)break e;pe=y({},pe,oe);break e;case 2:hs=!0}}oe=M.callback,oe!==null&&(r.flags|=64,le&&(r.flags|=8192),le=g.callbacks,le===null?g.callbacks=[oe]:le.push(oe))}else le={lane:oe,tag:M.tag,payload:M.payload,callback:M.callback,next:null},he===null?(ae=he=le,Y=pe):he=he.next=le,w|=oe;if(M=M.next,M===null){if(M=g.shared.pending,M===null)break;le=M,M=le.next,le.next=null,g.lastBaseUpdate=le,g.shared.pending=null}}while(!0);he===null&&(Y=pe),g.baseState=Y,g.firstBaseUpdate=ae,g.lastBaseUpdate=he,m===null&&(g.shared.lanes=0),ws|=w,r.lanes=w,r.memoizedState=pe}}function Pv(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function Vv(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)Pv(o[r],s)}var Mo=J(null),Td=J(0);function Lv(r,s){r=Gi,K(Td,r),K(Mo,s),Gi=r|s.baseLanes}function jg(){K(Td,Gi),K(Mo,Mo.current)}function Hg(){Gi=Td.current,te(Mo),te(Td)}var ps=0,je=null,ht=null,jt=null,Sd=!1,Oo=!1,Oa=!1,Ad=0,pc=0,Po=null,J2=0;function Ot(){throw Error(i(321))}function qg(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!Qn(r[o],s[o]))return!1;return!0}function $g(r,s,o,u,g,m){return ps=m,je=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,k.H=r===null||r.memoizedState===null?b_:E_,Oa=!1,m=o(u,g),Oa=!1,Oo&&(m=Uv(s,o,u,g)),zv(r),m}function zv(r){k.H=Dd;var s=ht!==null&&ht.next!==null;if(ps=0,jt=ht=je=null,Sd=!1,pc=0,Po=null,s)throw Error(i(300));r===null||rn||(r=r.dependencies,r!==null&&_d(r)&&(rn=!0))}function Uv(r,s,o,u){je=r;var g=0;do{if(Oo&&(Po=null),pc=0,Oo=!1,25<=g)throw Error(i(301));if(g+=1,jt=ht=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}k.H=aR,m=s(o,u)}while(Oo);return m}function eR(){var r=k.H,s=r.useState()[0];return s=typeof s.then=="function"?mc(s):s,r=r.useState()[0],(ht!==null?ht.memoizedState:null)!==r&&(je.flags|=1024),s}function Fg(){var r=Ad!==0;return Ad=0,r}function Gg(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function Yg(r){if(Sd){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Sd=!1}ps=0,jt=ht=je=null,Oo=!1,pc=Ad=0,Po=null}function Ln(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?je.memoizedState=jt=r:jt=jt.next=r,jt}function Ht(){if(ht===null){var r=je.alternate;r=r!==null?r.memoizedState:null}else r=ht.next;var s=jt===null?je.memoizedState:jt.next;if(s!==null)jt=s,ht=r;else{if(r===null)throw je.alternate===null?Error(i(467)):Error(i(310));ht=r,r={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},jt===null?je.memoizedState=jt=r:jt=jt.next=r}return jt}function Kg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function mc(r){var s=pc;return pc+=1,Po===null&&(Po=[]),r=Dv(Po,r,s),s=je,(jt===null?s.memoizedState:jt.next)===null&&(s=s.alternate,k.H=s===null||s.memoizedState===null?b_:E_),r}function Rd(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return mc(r);if(r.$$typeof===G)return _n(r)}throw Error(i(438,String(r)))}function Xg(r){var s=null,o=je.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=je.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Kg(),je.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),u=0;u<r;u++)o[u]=U;return s.index++,o}function Bi(r,s){return typeof s=="function"?s(r):s}function Nd(r){var s=Ht();return Qg(s,ht,r)}function Qg(r,s,o){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var g=r.baseQueue,m=u.pending;if(m!==null){if(g!==null){var w=g.next;g.next=m.next,m.next=w}s.baseQueue=g=m,u.pending=null}if(m=r.baseState,g===null)r.memoizedState=m;else{s=g.next;var M=w=null,Y=null,ae=s,he=!1;do{var pe=ae.lane&-536870913;if(pe!==ae.lane?(Ze&pe)===pe:(ps&pe)===pe){var oe=ae.revertLane;if(oe===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),pe===ko&&(he=!0);else if((ps&oe)===oe){ae=ae.next,oe===ko&&(he=!0);continue}else pe={lane:0,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},Y===null?(M=Y=pe,w=m):Y=Y.next=pe,je.lanes|=oe,ws|=oe;pe=ae.action,Oa&&o(m,pe),m=ae.hasEagerState?ae.eagerState:o(m,pe)}else oe={lane:pe,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},Y===null?(M=Y=oe,w=m):Y=Y.next=oe,je.lanes|=pe,ws|=pe;ae=ae.next}while(ae!==null&&ae!==s);if(Y===null?w=m:Y.next=M,!Qn(m,r.memoizedState)&&(rn=!0,he&&(o=Do,o!==null)))throw o;r.memoizedState=m,r.baseState=w,r.baseQueue=Y,u.lastRenderedState=m}return g===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Wg(r){var s=Ht(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=o.dispatch,g=o.pending,m=s.memoizedState;if(g!==null){o.pending=null;var w=g=g.next;do m=r(m,w.action),w=w.next;while(w!==g);Qn(m,s.memoizedState)||(rn=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,u]}function Bv(r,s,o){var u=je,g=Ht(),m=st;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=s();var w=!Qn((ht||g).memoizedState,o);w&&(g.memoizedState=o,rn=!0),g=g.queue;var M=qv.bind(null,u,g,r);if(yc(2048,8,M,[r]),g.getSnapshot!==s||w||jt!==null&&jt.memoizedState.tag&1){if(u.flags|=2048,Vo(9,Id(),Hv.bind(null,u,g,o,s),null),yt===null)throw Error(i(349));m||(ps&124)!==0||jv(u,s,o)}return o}function jv(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=je.updateQueue,s===null?(s=Kg(),je.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function Hv(r,s,o,u){s.value=o,s.getSnapshot=u,$v(s)&&Fv(r)}function qv(r,s,o){return o(function(){$v(s)&&Fv(r)})}function $v(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!Qn(r,o)}catch{return!0}}function Fv(r){var s=Ro(r,2);s!==null&&nr(s,r,2)}function Zg(r){var s=Ln();if(typeof r=="function"){var o=r;if(r=o(),Oa){zt(!0);try{o()}finally{zt(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:r},s}function Gv(r,s,o,u){return r.baseState=o,Qg(r,ht,typeof u=="function"?u:Bi)}function tR(r,s,o,u,g){if(kd(r))throw Error(i(485));if(r=s.action,r!==null){var m={payload:g,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){m.listeners.push(w)}};k.T!==null?o(!0):m.isTransition=!1,u(m),o=s.pending,o===null?(m.next=s.pending=m,Yv(s,m)):(m.next=o.next,s.pending=o.next=m)}}function Yv(r,s){var o=s.action,u=s.payload,g=r.state;if(s.isTransition){var m=k.T,w={};k.T=w;try{var M=o(g,u),Y=k.S;Y!==null&&Y(w,M),Kv(r,s,M)}catch(ae){Jg(r,s,ae)}finally{k.T=m}}else try{m=o(g,u),Kv(r,s,m)}catch(ae){Jg(r,s,ae)}}function Kv(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Xv(r,s,u)},function(u){return Jg(r,s,u)}):Xv(r,s,o)}function Xv(r,s,o){s.status="fulfilled",s.value=o,Qv(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,Yv(r,o)))}function Jg(r,s,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,Qv(s),s=s.next;while(s!==u)}r.action=null}function Qv(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function Wv(r,s){return s}function Zv(r,s){if(st){var o=yt.formState;if(o!==null){e:{var u=je;if(st){if(Nt){t:{for(var g=Nt,m=ai;g.nodeType!==8;){if(!m){g=null;break t}if(g=Vr(g.nextSibling),g===null){g=null;break t}}m=g.data,g=m==="F!"||m==="F"?g:null}if(g){Nt=Vr(g.nextSibling),u=g.data==="F!";break e}}Ca(u)}u=!1}u&&(s=o[0])}}return o=Ln(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wv,lastRenderedState:s},o.queue=u,o=y_.bind(null,je,u),u.dispatch=o,u=Zg(!1),m=ip.bind(null,je,!1,u.queue),u=Ln(),g={state:s,dispatch:null,action:r,pending:null},u.queue=g,o=tR.bind(null,je,g,m,o),g.dispatch=o,u.memoizedState=r,[s,o,!1]}function Jv(r){var s=Ht();return e_(s,ht,r)}function e_(r,s,o){if(s=Qg(r,s,Wv)[0],r=Nd(Bi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=mc(s)}catch(w){throw w===uc?wd:w}else u=s;s=Ht();var g=s.queue,m=g.dispatch;return o!==s.memoizedState&&(je.flags|=2048,Vo(9,Id(),nR.bind(null,g,o),null)),[u,m,r]}function nR(r,s){r.action=s}function t_(r){var s=Ht(),o=ht;if(o!==null)return e_(s,o,r);Ht(),s=s.memoizedState,o=Ht();var u=o.queue.dispatch;return o.memoizedState=r,[s,u,!1]}function Vo(r,s,o,u){return r={tag:r,create:o,deps:u,inst:s,next:null},s=je.updateQueue,s===null&&(s=Kg(),je.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,s.lastEffect=r),r}function Id(){return{destroy:void 0,resource:void 0}}function n_(){return Ht().memoizedState}function Cd(r,s,o,u){var g=Ln();u=u===void 0?null:u,je.flags|=r,g.memoizedState=Vo(1|s,Id(),o,u)}function yc(r,s,o,u){var g=Ht();u=u===void 0?null:u;var m=g.memoizedState.inst;ht!==null&&u!==null&&qg(u,ht.memoizedState.deps)?g.memoizedState=Vo(s,m,o,u):(je.flags|=r,g.memoizedState=Vo(1|s,m,o,u))}function r_(r,s){Cd(8390656,8,r,s)}function i_(r,s){yc(2048,8,r,s)}function s_(r,s){return yc(4,2,r,s)}function a_(r,s){return yc(4,4,r,s)}function o_(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function l_(r,s,o){o=o!=null?o.concat([r]):null,yc(4,4,o_.bind(null,s,r),o)}function ep(){}function c_(r,s){var o=Ht();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&qg(s,u[1])?u[0]:(o.memoizedState=[r,s],r)}function u_(r,s){var o=Ht();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&qg(s,u[1]))return u[0];if(u=r(),Oa){zt(!0);try{r()}finally{zt(!1)}}return o.memoizedState=[u,s],u}function tp(r,s,o){return o===void 0||(ps&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=fb(),je.lanes|=r,ws|=r,o)}function d_(r,s,o,u){return Qn(o,s)?o:Mo.current!==null?(r=tp(r,o,u),Qn(r,s)||(rn=!0),r):(ps&42)===0?(rn=!0,r.memoizedState=o):(r=fb(),je.lanes|=r,ws|=r,s)}function h_(r,s,o,u,g){var m=$.p;$.p=m!==0&&8>m?m:8;var w=k.T,M={};k.T=M,ip(r,!1,s,o);try{var Y=g(),ae=k.S;if(ae!==null&&ae(M,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var he=Z2(Y,u);vc(r,s,he,tr(r))}else vc(r,s,u,tr(r))}catch(pe){vc(r,s,{then:function(){},status:"rejected",reason:pe},tr())}finally{$.p=m,k.T=w}}function rR(){}function np(r,s,o,u){if(r.tag!==5)throw Error(i(476));var g=f_(r).queue;h_(r,g,s,Z,o===null?rR:function(){return g_(r),o(u)})}function f_(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:Z},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function g_(r){var s=f_(r).next.queue;vc(r,s,{},tr())}function rp(){return _n(Vc)}function p_(){return Ht().memoizedState}function m_(){return Ht().memoizedState}function iR(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=tr();r=fs(o);var u=gs(s,r,o);u!==null&&(nr(u,s,o),hc(u,s,o)),s={cache:Mg()},r.payload=s;return}s=s.return}}function sR(r,s,o){var u=tr();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},kd(r)?v_(s,o):(o=xg(r,s,o,u),o!==null&&(nr(o,r,u),__(o,s,u)))}function y_(r,s,o){var u=tr();vc(r,s,o,u)}function vc(r,s,o,u){var g={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(kd(r))v_(s,g);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var w=s.lastRenderedState,M=m(w,o);if(g.hasEagerState=!0,g.eagerState=M,Qn(M,w))return gd(r,s,g,0),yt===null&&fd(),!1}catch{}finally{}if(o=xg(r,s,g,u),o!==null)return nr(o,r,u),__(o,s,u),!0}return!1}function ip(r,s,o,u){if(u={lane:2,revertLane:Vp(),action:u,hasEagerState:!1,eagerState:null,next:null},kd(r)){if(s)throw Error(i(479))}else s=xg(r,o,u,2),s!==null&&nr(s,r,2)}function kd(r){var s=r.alternate;return r===je||s!==null&&s===je}function v_(r,s){Oo=Sd=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function __(r,s,o){if((o&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,ca(r,o)}}var Dd={readContext:_n,use:Rd,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot,useHostTransitionStatus:Ot,useFormState:Ot,useActionState:Ot,useOptimistic:Ot,useMemoCache:Ot,useCacheRefresh:Ot},b_={readContext:_n,use:Rd,useCallback:function(r,s){return Ln().memoizedState=[r,s===void 0?null:s],r},useContext:_n,useEffect:r_,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,Cd(4194308,4,o_.bind(null,s,r),o)},useLayoutEffect:function(r,s){return Cd(4194308,4,r,s)},useInsertionEffect:function(r,s){Cd(4,2,r,s)},useMemo:function(r,s){var o=Ln();s=s===void 0?null:s;var u=r();if(Oa){zt(!0);try{r()}finally{zt(!1)}}return o.memoizedState=[u,s],u},useReducer:function(r,s,o){var u=Ln();if(o!==void 0){var g=o(s);if(Oa){zt(!0);try{o(s)}finally{zt(!1)}}}else g=s;return u.memoizedState=u.baseState=g,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:g},u.queue=r,r=r.dispatch=sR.bind(null,je,r),[u.memoizedState,r]},useRef:function(r){var s=Ln();return r={current:r},s.memoizedState=r},useState:function(r){r=Zg(r);var s=r.queue,o=y_.bind(null,je,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:ep,useDeferredValue:function(r,s){var o=Ln();return tp(o,r,s)},useTransition:function(){var r=Zg(!1);return r=h_.bind(null,je,r.queue,!0,!1),Ln().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var u=je,g=Ln();if(st){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),yt===null)throw Error(i(349));(Ze&124)!==0||jv(u,s,o)}g.memoizedState=o;var m={value:o,getSnapshot:s};return g.queue=m,r_(qv.bind(null,u,m,r),[r]),u.flags|=2048,Vo(9,Id(),Hv.bind(null,u,m,o,s),null),o},useId:function(){var r=Ln(),s=yt.identifierPrefix;if(st){var o=Li,u=Vi;o=(u&~(1<<32-Et(u)-1)).toString(32)+o,s=""+s+"R"+o,o=Ad++,0<o&&(s+="H"+o.toString(32)),s+=""}else o=J2++,s=""+s+"r"+o.toString(32)+"";return r.memoizedState=s},useHostTransitionStatus:rp,useFormState:Zv,useActionState:Zv,useOptimistic:function(r){var s=Ln();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=ip.bind(null,je,!0,o),o.dispatch=s,[r,s]},useMemoCache:Xg,useCacheRefresh:function(){return Ln().memoizedState=iR.bind(null,je)}},E_={readContext:_n,use:Rd,useCallback:c_,useContext:_n,useEffect:i_,useImperativeHandle:l_,useInsertionEffect:s_,useLayoutEffect:a_,useMemo:u_,useReducer:Nd,useRef:n_,useState:function(){return Nd(Bi)},useDebugValue:ep,useDeferredValue:function(r,s){var o=Ht();return d_(o,ht.memoizedState,r,s)},useTransition:function(){var r=Nd(Bi)[0],s=Ht().memoizedState;return[typeof r=="boolean"?r:mc(r),s]},useSyncExternalStore:Bv,useId:p_,useHostTransitionStatus:rp,useFormState:Jv,useActionState:Jv,useOptimistic:function(r,s){var o=Ht();return Gv(o,ht,r,s)},useMemoCache:Xg,useCacheRefresh:m_},aR={readContext:_n,use:Rd,useCallback:c_,useContext:_n,useEffect:i_,useImperativeHandle:l_,useInsertionEffect:s_,useLayoutEffect:a_,useMemo:u_,useReducer:Wg,useRef:n_,useState:function(){return Wg(Bi)},useDebugValue:ep,useDeferredValue:function(r,s){var o=Ht();return ht===null?tp(o,r,s):d_(o,ht.memoizedState,r,s)},useTransition:function(){var r=Wg(Bi)[0],s=Ht().memoizedState;return[typeof r=="boolean"?r:mc(r),s]},useSyncExternalStore:Bv,useId:p_,useHostTransitionStatus:rp,useFormState:t_,useActionState:t_,useOptimistic:function(r,s){var o=Ht();return ht!==null?Gv(o,ht,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Xg,useCacheRefresh:m_},Lo=null,_c=0;function Md(r){var s=_c;return _c+=1,Lo===null&&(Lo=[]),Dv(Lo,r,s)}function bc(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Od(r,s){throw s.$$typeof===v?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function w_(r){var s=r._init;return s(r._payload)}function x_(r){function s(ne,ee){if(r){var se=ne.deletions;se===null?(ne.deletions=[ee],ne.flags|=16):se.push(ee)}}function o(ne,ee){if(!r)return null;for(;ee!==null;)s(ne,ee),ee=ee.sibling;return null}function u(ne){for(var ee=new Map;ne!==null;)ne.key!==null?ee.set(ne.key,ne):ee.set(ne.index,ne),ne=ne.sibling;return ee}function g(ne,ee){return ne=Pi(ne,ee),ne.index=0,ne.sibling=null,ne}function m(ne,ee,se){return ne.index=se,r?(se=ne.alternate,se!==null?(se=se.index,se<ee?(ne.flags|=67108866,ee):se):(ne.flags|=67108866,ee)):(ne.flags|=1048576,ee)}function w(ne){return r&&ne.alternate===null&&(ne.flags|=67108866),ne}function M(ne,ee,se,ge){return ee===null||ee.tag!==6?(ee=Sg(se,ne.mode,ge),ee.return=ne,ee):(ee=g(ee,se),ee.return=ne,ee)}function Y(ne,ee,se,ge){var Te=se.type;return Te===I?he(ne,ee,se.props.children,ge,se.key):ee!==null&&(ee.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===T&&w_(Te)===ee.type)?(ee=g(ee,se.props),bc(ee,se),ee.return=ne,ee):(ee=md(se.type,se.key,se.props,null,ne.mode,ge),bc(ee,se),ee.return=ne,ee)}function ae(ne,ee,se,ge){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==se.containerInfo||ee.stateNode.implementation!==se.implementation?(ee=Ag(se,ne.mode,ge),ee.return=ne,ee):(ee=g(ee,se.children||[]),ee.return=ne,ee)}function he(ne,ee,se,ge,Te){return ee===null||ee.tag!==7?(ee=Aa(se,ne.mode,ge,Te),ee.return=ne,ee):(ee=g(ee,se),ee.return=ne,ee)}function pe(ne,ee,se){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=Sg(""+ee,ne.mode,se),ee.return=ne,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case b:return se=md(ee.type,ee.key,ee.props,null,ne.mode,se),bc(se,ee),se.return=ne,se;case x:return ee=Ag(ee,ne.mode,se),ee.return=ne,ee;case T:var ge=ee._init;return ee=ge(ee._payload),pe(ne,ee,se)}if(H(ee)||C(ee))return ee=Aa(ee,ne.mode,se,null),ee.return=ne,ee;if(typeof ee.then=="function")return pe(ne,Md(ee),se);if(ee.$$typeof===G)return pe(ne,bd(ne,ee),se);Od(ne,ee)}return null}function oe(ne,ee,se,ge){var Te=ee!==null?ee.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return Te!==null?null:M(ne,ee,""+se,ge);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case b:return se.key===Te?Y(ne,ee,se,ge):null;case x:return se.key===Te?ae(ne,ee,se,ge):null;case T:return Te=se._init,se=Te(se._payload),oe(ne,ee,se,ge)}if(H(se)||C(se))return Te!==null?null:he(ne,ee,se,ge,null);if(typeof se.then=="function")return oe(ne,ee,Md(se),ge);if(se.$$typeof===G)return oe(ne,ee,bd(ne,se),ge);Od(ne,se)}return null}function le(ne,ee,se,ge,Te){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ne=ne.get(se)||null,M(ee,ne,""+ge,Te);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case b:return ne=ne.get(ge.key===null?se:ge.key)||null,Y(ee,ne,ge,Te);case x:return ne=ne.get(ge.key===null?se:ge.key)||null,ae(ee,ne,ge,Te);case T:var qe=ge._init;return ge=qe(ge._payload),le(ne,ee,se,ge,Te)}if(H(ge)||C(ge))return ne=ne.get(se)||null,he(ee,ne,ge,Te,null);if(typeof ge.then=="function")return le(ne,ee,se,Md(ge),Te);if(ge.$$typeof===G)return le(ne,ee,se,bd(ee,ge),Te);Od(ee,ge)}return null}function Oe(ne,ee,se,ge){for(var Te=null,qe=null,Re=ee,ke=ee=0,an=null;Re!==null&&ke<se.length;ke++){Re.index>ke?(an=Re,Re=null):an=Re.sibling;var nt=oe(ne,Re,se[ke],ge);if(nt===null){Re===null&&(Re=an);break}r&&Re&&nt.alternate===null&&s(ne,Re),ee=m(nt,ee,ke),qe===null?Te=nt:qe.sibling=nt,qe=nt,Re=an}if(ke===se.length)return o(ne,Re),st&&Na(ne,ke),Te;if(Re===null){for(;ke<se.length;ke++)Re=pe(ne,se[ke],ge),Re!==null&&(ee=m(Re,ee,ke),qe===null?Te=Re:qe.sibling=Re,qe=Re);return st&&Na(ne,ke),Te}for(Re=u(Re);ke<se.length;ke++)an=le(Re,ne,ke,se[ke],ge),an!==null&&(r&&an.alternate!==null&&Re.delete(an.key===null?ke:an.key),ee=m(an,ee,ke),qe===null?Te=an:qe.sibling=an,qe=an);return r&&Re.forEach(function(ks){return s(ne,ks)}),st&&Na(ne,ke),Te}function Ce(ne,ee,se,ge){if(se==null)throw Error(i(151));for(var Te=null,qe=null,Re=ee,ke=ee=0,an=null,nt=se.next();Re!==null&&!nt.done;ke++,nt=se.next()){Re.index>ke?(an=Re,Re=null):an=Re.sibling;var ks=oe(ne,Re,nt.value,ge);if(ks===null){Re===null&&(Re=an);break}r&&Re&&ks.alternate===null&&s(ne,Re),ee=m(ks,ee,ke),qe===null?Te=ks:qe.sibling=ks,qe=ks,Re=an}if(nt.done)return o(ne,Re),st&&Na(ne,ke),Te;if(Re===null){for(;!nt.done;ke++,nt=se.next())nt=pe(ne,nt.value,ge),nt!==null&&(ee=m(nt,ee,ke),qe===null?Te=nt:qe.sibling=nt,qe=nt);return st&&Na(ne,ke),Te}for(Re=u(Re);!nt.done;ke++,nt=se.next())nt=le(Re,ne,ke,nt.value,ge),nt!==null&&(r&&nt.alternate!==null&&Re.delete(nt.key===null?ke:nt.key),ee=m(nt,ee,ke),qe===null?Te=nt:qe.sibling=nt,qe=nt);return r&&Re.forEach(function(oN){return s(ne,oN)}),st&&Na(ne,ke),Te}function gt(ne,ee,se,ge){if(typeof se=="object"&&se!==null&&se.type===I&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case b:e:{for(var Te=se.key;ee!==null;){if(ee.key===Te){if(Te=se.type,Te===I){if(ee.tag===7){o(ne,ee.sibling),ge=g(ee,se.props.children),ge.return=ne,ne=ge;break e}}else if(ee.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===T&&w_(Te)===ee.type){o(ne,ee.sibling),ge=g(ee,se.props),bc(ge,se),ge.return=ne,ne=ge;break e}o(ne,ee);break}else s(ne,ee);ee=ee.sibling}se.type===I?(ge=Aa(se.props.children,ne.mode,ge,se.key),ge.return=ne,ne=ge):(ge=md(se.type,se.key,se.props,null,ne.mode,ge),bc(ge,se),ge.return=ne,ne=ge)}return w(ne);case x:e:{for(Te=se.key;ee!==null;){if(ee.key===Te)if(ee.tag===4&&ee.stateNode.containerInfo===se.containerInfo&&ee.stateNode.implementation===se.implementation){o(ne,ee.sibling),ge=g(ee,se.children||[]),ge.return=ne,ne=ge;break e}else{o(ne,ee);break}else s(ne,ee);ee=ee.sibling}ge=Ag(se,ne.mode,ge),ge.return=ne,ne=ge}return w(ne);case T:return Te=se._init,se=Te(se._payload),gt(ne,ee,se,ge)}if(H(se))return Oe(ne,ee,se,ge);if(C(se)){if(Te=C(se),typeof Te!="function")throw Error(i(150));return se=Te.call(se),Ce(ne,ee,se,ge)}if(typeof se.then=="function")return gt(ne,ee,Md(se),ge);if(se.$$typeof===G)return gt(ne,ee,bd(ne,se),ge);Od(ne,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,ee!==null&&ee.tag===6?(o(ne,ee.sibling),ge=g(ee,se),ge.return=ne,ne=ge):(o(ne,ee),ge=Sg(se,ne.mode,ge),ge.return=ne,ne=ge),w(ne)):o(ne,ee)}return function(ne,ee,se,ge){try{_c=0;var Te=gt(ne,ee,se,ge);return Lo=null,Te}catch(Re){if(Re===uc||Re===wd)throw Re;var qe=Wn(29,Re,null,ne.mode);return qe.lanes=ge,qe.return=ne,qe}finally{}}}var zo=x_(!0),T_=x_(!1),Tr=J(null),oi=null;function ms(r){var s=r.alternate;K(Wt,Wt.current&1),K(Tr,r),oi===null&&(s===null||Mo.current!==null||s.memoizedState!==null)&&(oi=r)}function S_(r){if(r.tag===22){if(K(Wt,Wt.current),K(Tr,r),oi===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(oi=r)}}else ys()}function ys(){K(Wt,Wt.current),K(Tr,Tr.current)}function ji(r){te(Tr),oi===r&&(oi=null),te(Wt)}var Wt=J(0);function Pd(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Kp(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function sp(r,s,o,u){s=r.memoizedState,o=o(u,s),o=o==null?s:y({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var ap={enqueueSetState:function(r,s,o){r=r._reactInternals;var u=tr(),g=fs(u);g.payload=s,o!=null&&(g.callback=o),s=gs(r,g,u),s!==null&&(nr(s,r,u),hc(s,r,u))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var u=tr(),g=fs(u);g.tag=1,g.payload=s,o!=null&&(g.callback=o),s=gs(r,g,u),s!==null&&(nr(s,r,u),hc(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=tr(),u=fs(o);u.tag=2,s!=null&&(u.callback=s),s=gs(r,u,o),s!==null&&(nr(s,r,o),hc(s,r,o))}};function A_(r,s,o,u,g,m,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,m,w):s.prototype&&s.prototype.isPureReactComponent?!nc(o,u)||!nc(g,m):!0}function R_(r,s,o,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==r&&ap.enqueueReplaceState(s,s.state,null)}function Pa(r,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(r=r.defaultProps){o===s&&(o=y({},o));for(var g in r)o[g]===void 0&&(o[g]=r[g])}return o}var Vd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function N_(r){Vd(r)}function I_(r){console.error(r)}function C_(r){Vd(r)}function Ld(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function k_(r,s,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function op(r,s,o){return o=fs(o),o.tag=3,o.payload={element:null},o.callback=function(){Ld(r,s)},o}function D_(r){return r=fs(r),r.tag=3,r}function M_(r,s,o,u){var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var m=u.value;r.payload=function(){return g(m)},r.callback=function(){k_(s,o,u)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(r.callback=function(){k_(s,o,u),typeof g!="function"&&(xs===null?xs=new Set([this]):xs.add(this));var M=u.stack;this.componentDidCatch(u.value,{componentStack:M!==null?M:""})})}function oR(r,s,o,u,g){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&oc(s,o,g,!0),o=Tr.current,o!==null){switch(o.tag){case 13:return oi===null?kp():o.alternate===null&&It===0&&(It=3),o.flags&=-257,o.flags|=65536,o.lanes=g,u===Vg?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Mp(r,u,g)),!1;case 22:return o.flags|=65536,u===Vg?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Mp(r,u,g)),!1}throw Error(i(435,o.tag))}return Mp(r,u,g),kp(),!1}if(st)return s=Tr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,u!==Ig&&(r=Error(i(422),{cause:u}),ac(br(r,o)))):(u!==Ig&&(s=Error(i(423),{cause:u}),ac(br(s,o))),r=r.current.alternate,r.flags|=65536,g&=-g,r.lanes|=g,u=br(u,o),g=op(r.stateNode,u,g),Ug(r,g),It!==4&&(It=2)),!1;var m=Error(i(520),{cause:u});if(m=br(m,o),Rc===null?Rc=[m]:Rc.push(m),It!==4&&(It=2),s===null)return!0;u=br(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=g&-g,o.lanes|=r,r=op(o.stateNode,u,r),Ug(o,r),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(xs===null||!xs.has(m))))return o.flags|=65536,g&=-g,o.lanes|=g,g=D_(g),M_(g,r,o,u),Ug(o,g),!1}o=o.return}while(o!==null);return!1}var O_=Error(i(461)),rn=!1;function hn(r,s,o,u){s.child=r===null?T_(s,null,o,u):zo(s,r.child,o,u)}function P_(r,s,o,u,g){o=o.render;var m=s.ref;if("ref"in u){var w={};for(var M in u)M!=="ref"&&(w[M]=u[M])}else w=u;return Da(s),u=$g(r,s,o,w,m,g),M=Fg(),r!==null&&!rn?(Gg(r,s,g),Hi(r,s,g)):(st&&M&&Rg(s),s.flags|=1,hn(r,s,u,g),s.child)}function V_(r,s,o,u,g){if(r===null){var m=o.type;return typeof m=="function"&&!Tg(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,L_(r,s,m,u,g)):(r=md(o.type,null,u,s,s.mode,g),r.ref=s.ref,r.return=s,s.child=r)}if(m=r.child,!pp(r,g)){var w=m.memoizedProps;if(o=o.compare,o=o!==null?o:nc,o(w,u)&&r.ref===s.ref)return Hi(r,s,g)}return s.flags|=1,r=Pi(m,u),r.ref=s.ref,r.return=s,s.child=r}function L_(r,s,o,u,g){if(r!==null){var m=r.memoizedProps;if(nc(m,u)&&r.ref===s.ref)if(rn=!1,s.pendingProps=u=m,pp(r,g))(r.flags&131072)!==0&&(rn=!0);else return s.lanes=r.lanes,Hi(r,s,g)}return lp(r,s,o,u,g)}function z_(r,s,o){var u=s.pendingProps,g=u.children,m=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=m!==null?m.baseLanes|o:o,r!==null){for(g=s.child=r.child,m=0;g!==null;)m=m|g.lanes|g.childLanes,g=g.sibling;s.childLanes=m&~u}else s.childLanes=0,s.child=null;return U_(r,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Ed(s,m!==null?m.cachePool:null),m!==null?Lv(s,m):jg(),S_(s);else return s.lanes=s.childLanes=536870912,U_(r,s,m!==null?m.baseLanes|o:o,o)}else m!==null?(Ed(s,m.cachePool),Lv(s,m),ys(),s.memoizedState=null):(r!==null&&Ed(s,null),jg(),ys());return hn(r,s,g,o),s.child}function U_(r,s,o,u){var g=Pg();return g=g===null?null:{parent:Qt._currentValue,pool:g},s.memoizedState={baseLanes:o,cachePool:g},r!==null&&Ed(s,null),jg(),S_(s),r!==null&&oc(r,s,u,!0),null}function zd(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function lp(r,s,o,u,g){return Da(s),o=$g(r,s,o,u,void 0,g),u=Fg(),r!==null&&!rn?(Gg(r,s,g),Hi(r,s,g)):(st&&u&&Rg(s),s.flags|=1,hn(r,s,o,g),s.child)}function B_(r,s,o,u,g,m){return Da(s),s.updateQueue=null,o=Uv(s,u,o,g),zv(r),u=Fg(),r!==null&&!rn?(Gg(r,s,m),Hi(r,s,m)):(st&&u&&Rg(s),s.flags|=1,hn(r,s,o,m),s.child)}function j_(r,s,o,u,g){if(Da(s),s.stateNode===null){var m=No,w=o.contextType;typeof w=="object"&&w!==null&&(m=_n(w)),m=new o(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=ap,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},Lg(s),w=o.contextType,m.context=typeof w=="object"&&w!==null?_n(w):No,m.state=s.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(sp(s,o,w,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(w=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),w!==m.state&&ap.enqueueReplaceState(m,m.state,null),gc(s,u,m,g),fc(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){m=s.stateNode;var M=s.memoizedProps,Y=Pa(o,M);m.props=Y;var ae=m.context,he=o.contextType;w=No,typeof he=="object"&&he!==null&&(w=_n(he));var pe=o.getDerivedStateFromProps;he=typeof pe=="function"||typeof m.getSnapshotBeforeUpdate=="function",M=s.pendingProps!==M,he||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(M||ae!==w)&&R_(s,m,u,w),hs=!1;var oe=s.memoizedState;m.state=oe,gc(s,u,m,g),fc(),ae=s.memoizedState,M||oe!==ae||hs?(typeof pe=="function"&&(sp(s,o,pe,u),ae=s.memoizedState),(Y=hs||A_(s,o,Y,u,oe,ae,w))?(he||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=ae),m.props=u,m.state=ae,m.context=w,u=Y):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,zg(r,s),w=s.memoizedProps,he=Pa(o,w),m.props=he,pe=s.pendingProps,oe=m.context,ae=o.contextType,Y=No,typeof ae=="object"&&ae!==null&&(Y=_n(ae)),M=o.getDerivedStateFromProps,(ae=typeof M=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w!==pe||oe!==Y)&&R_(s,m,u,Y),hs=!1,oe=s.memoizedState,m.state=oe,gc(s,u,m,g),fc();var le=s.memoizedState;w!==pe||oe!==le||hs||r!==null&&r.dependencies!==null&&_d(r.dependencies)?(typeof M=="function"&&(sp(s,o,M,u),le=s.memoizedState),(he=hs||A_(s,o,he,u,oe,le,Y)||r!==null&&r.dependencies!==null&&_d(r.dependencies))?(ae||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,le,Y),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,le,Y)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||w===r.memoizedProps&&oe===r.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&oe===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=le),m.props=u,m.state=le,m.context=Y,u=he):(typeof m.componentDidUpdate!="function"||w===r.memoizedProps&&oe===r.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&oe===r.memoizedState||(s.flags|=1024),u=!1)}return m=u,zd(r,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,r!==null&&u?(s.child=zo(s,r.child,null,g),s.child=zo(s,null,o,g)):hn(r,s,o,g),s.memoizedState=m.state,r=s.child):r=Hi(r,s,g),r}function H_(r,s,o,u){return sc(),s.flags|=256,hn(r,s,o,u),s.child}var cp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function up(r){return{baseLanes:r,cachePool:Iv()}}function dp(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Sr),r}function q_(r,s,o){var u=s.pendingProps,g=!1,m=(s.flags&128)!==0,w;if((w=m)||(w=r!==null&&r.memoizedState===null?!1:(Wt.current&2)!==0),w&&(g=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,r===null){if(st){if(g?ms(s):ys(),st){var M=Nt,Y;if(Y=M){e:{for(Y=M,M=ai;Y.nodeType!==8;){if(!M){M=null;break e}if(Y=Vr(Y.nextSibling),Y===null){M=null;break e}}M=Y}M!==null?(s.memoizedState={dehydrated:M,treeContext:Ra!==null?{id:Vi,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},Y=Wn(18,null,null,0),Y.stateNode=M,Y.return=s,s.child=Y,Mn=s,Nt=null,Y=!0):Y=!1}Y||Ca(s)}if(M=s.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return Kp(M)?s.lanes=32:s.lanes=536870912,null;ji(s)}return M=u.children,u=u.fallback,g?(ys(),g=s.mode,M=Ud({mode:"hidden",children:M},g),u=Aa(u,g,o,null),M.return=s,u.return=s,M.sibling=u,s.child=M,g=s.child,g.memoizedState=up(o),g.childLanes=dp(r,w,o),s.memoizedState=cp,u):(ms(s),hp(s,M))}if(Y=r.memoizedState,Y!==null&&(M=Y.dehydrated,M!==null)){if(m)s.flags&256?(ms(s),s.flags&=-257,s=fp(r,s,o)):s.memoizedState!==null?(ys(),s.child=r.child,s.flags|=128,s=null):(ys(),g=u.fallback,M=s.mode,u=Ud({mode:"visible",children:u.children},M),g=Aa(g,M,o,null),g.flags|=2,u.return=s,g.return=s,u.sibling=g,s.child=u,zo(s,r.child,null,o),u=s.child,u.memoizedState=up(o),u.childLanes=dp(r,w,o),s.memoizedState=cp,s=g);else if(ms(s),Kp(M)){if(w=M.nextSibling&&M.nextSibling.dataset,w)var ae=w.dgst;w=ae,u=Error(i(419)),u.stack="",u.digest=w,ac({value:u,source:null,stack:null}),s=fp(r,s,o)}else if(rn||oc(r,s,o,!1),w=(o&r.childLanes)!==0,rn||w){if(w=yt,w!==null&&(u=o&-o,u=(u&42)!==0?1:Gr(u),u=(u&(w.suspendedLanes|o))!==0?0:u,u!==0&&u!==Y.retryLane))throw Y.retryLane=u,Ro(r,u),nr(w,r,u),O_;M.data==="$?"||kp(),s=fp(r,s,o)}else M.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=Y.treeContext,Nt=Vr(M.nextSibling),Mn=s,st=!0,Ia=null,ai=!1,r!==null&&(wr[xr++]=Vi,wr[xr++]=Li,wr[xr++]=Ra,Vi=r.id,Li=r.overflow,Ra=s),s=hp(s,u.children),s.flags|=4096);return s}return g?(ys(),g=u.fallback,M=s.mode,Y=r.child,ae=Y.sibling,u=Pi(Y,{mode:"hidden",children:u.children}),u.subtreeFlags=Y.subtreeFlags&65011712,ae!==null?g=Pi(ae,g):(g=Aa(g,M,o,null),g.flags|=2),g.return=s,u.return=s,u.sibling=g,s.child=u,u=g,g=s.child,M=r.child.memoizedState,M===null?M=up(o):(Y=M.cachePool,Y!==null?(ae=Qt._currentValue,Y=Y.parent!==ae?{parent:ae,pool:ae}:Y):Y=Iv(),M={baseLanes:M.baseLanes|o,cachePool:Y}),g.memoizedState=M,g.childLanes=dp(r,w,o),s.memoizedState=cp,u):(ms(s),o=r.child,r=o.sibling,o=Pi(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,r!==null&&(w=s.deletions,w===null?(s.deletions=[r],s.flags|=16):w.push(r)),s.child=o,s.memoizedState=null,o)}function hp(r,s){return s=Ud({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Ud(r,s){return r=Wn(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function fp(r,s,o){return zo(s,r.child,null,o),r=hp(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function $_(r,s,o){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),kg(r.return,s,o)}function gp(r,s,o,u,g){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:g}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=o,m.tailMode=g)}function F_(r,s,o){var u=s.pendingProps,g=u.revealOrder,m=u.tail;if(hn(r,s,u.children,o),u=Wt.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&$_(r,o,s);else if(r.tag===19)$_(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(K(Wt,u),g){case"forwards":for(o=s.child,g=null;o!==null;)r=o.alternate,r!==null&&Pd(r)===null&&(g=o),o=o.sibling;o=g,o===null?(g=s.child,s.child=null):(g=o.sibling,o.sibling=null),gp(s,!1,g,o,m);break;case"backwards":for(o=null,g=s.child,s.child=null;g!==null;){if(r=g.alternate,r!==null&&Pd(r)===null){s.child=g;break}r=g.sibling,g.sibling=o,o=g,g=r}gp(s,!0,o,null,m);break;case"together":gp(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Hi(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),ws|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(oc(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=Pi(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=Pi(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function pp(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&_d(r)))}function lR(r,s,o){switch(s.tag){case 3:_e(s,s.stateNode.containerInfo),ds(s,Qt,r.memoizedState.cache),sc();break;case 27:case 5:Ne(s);break;case 4:_e(s,s.stateNode.containerInfo);break;case 10:ds(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(ms(s),s.flags|=128,null):(o&s.child.childLanes)!==0?q_(r,s,o):(ms(s),r=Hi(r,s,o),r!==null?r.sibling:null);ms(s);break;case 19:var g=(r.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(oc(r,s,o,!1),u=(o&s.childLanes)!==0),g){if(u)return F_(r,s,o);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),K(Wt,Wt.current),u)break;return null;case 22:case 23:return s.lanes=0,z_(r,s,o);case 24:ds(s,Qt,r.memoizedState.cache)}return Hi(r,s,o)}function G_(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)rn=!0;else{if(!pp(r,o)&&(s.flags&128)===0)return rn=!1,lR(r,s,o);rn=(r.flags&131072)!==0}else rn=!1,st&&(s.flags&1048576)!==0&&wv(s,vd,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var u=s.elementType,g=u._init;if(u=g(u._payload),s.type=u,typeof u=="function")Tg(u)?(r=Pa(u,r),s.tag=1,s=j_(null,s,u,r,o)):(s.tag=0,s=lp(null,s,u,r,o));else{if(u!=null){if(g=u.$$typeof,g===j){s.tag=11,s=P_(null,s,u,r,o);break e}else if(g===A){s.tag=14,s=V_(null,s,u,r,o);break e}}throw s=D(u)||u,Error(i(306,s,""))}}return s;case 0:return lp(r,s,s.type,s.pendingProps,o);case 1:return u=s.type,g=Pa(u,s.pendingProps),j_(r,s,u,g,o);case 3:e:{if(_e(s,s.stateNode.containerInfo),r===null)throw Error(i(387));u=s.pendingProps;var m=s.memoizedState;g=m.element,zg(r,s),gc(s,u,null,o);var w=s.memoizedState;if(u=w.cache,ds(s,Qt,u),u!==m.cache&&Dg(s,[Qt],o,!0),fc(),u=w.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=H_(r,s,u,o);break e}else if(u!==g){g=br(Error(i(424)),s),ac(g),s=H_(r,s,u,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Nt=Vr(r.firstChild),Mn=s,st=!0,Ia=null,ai=!0,o=T_(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(sc(),u===g){s=Hi(r,s,o);break e}hn(r,s,u,o)}s=s.child}return s;case 26:return zd(r,s),r===null?(o=Qb(s.type,null,s.pendingProps,null))?s.memoizedState=o:st||(o=s.type,r=s.pendingProps,u=Jd(de.current).createElement(o),u[Mt]=s,u[Rt]=r,gn(u,o,r),wt(u),s.stateNode=u):s.memoizedState=Qb(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Ne(s),r===null&&st&&(u=s.stateNode=Yb(s.type,s.pendingProps,de.current),Mn=s,ai=!0,g=Nt,As(s.type)?(Xp=g,Nt=Vr(u.firstChild)):Nt=g),hn(r,s,s.pendingProps.children,o),zd(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&st&&((g=u=Nt)&&(u=VR(u,s.type,s.pendingProps,ai),u!==null?(s.stateNode=u,Mn=s,Nt=Vr(u.firstChild),ai=!1,g=!0):g=!1),g||Ca(s)),Ne(s),g=s.type,m=s.pendingProps,w=r!==null?r.memoizedProps:null,u=m.children,Fp(g,m)?u=null:w!==null&&Fp(g,w)&&(s.flags|=32),s.memoizedState!==null&&(g=$g(r,s,eR,null,null,o),Vc._currentValue=g),zd(r,s),hn(r,s,u,o),s.child;case 6:return r===null&&st&&((r=o=Nt)&&(o=LR(o,s.pendingProps,ai),o!==null?(s.stateNode=o,Mn=s,Nt=null,r=!0):r=!1),r||Ca(s)),null;case 13:return q_(r,s,o);case 4:return _e(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=zo(s,null,u,o):hn(r,s,u,o),s.child;case 11:return P_(r,s,s.type,s.pendingProps,o);case 7:return hn(r,s,s.pendingProps,o),s.child;case 8:return hn(r,s,s.pendingProps.children,o),s.child;case 12:return hn(r,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,ds(s,s.type,u.value),hn(r,s,u.children,o),s.child;case 9:return g=s.type._context,u=s.pendingProps.children,Da(s),g=_n(g),u=u(g),s.flags|=1,hn(r,s,u,o),s.child;case 14:return V_(r,s,s.type,s.pendingProps,o);case 15:return L_(r,s,s.type,s.pendingProps,o);case 19:return F_(r,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},r===null?(o=Ud(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=Pi(r.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return z_(r,s,o);case 24:return Da(s),u=_n(Qt),r===null?(g=Pg(),g===null&&(g=yt,m=Mg(),g.pooledCache=m,m.refCount++,m!==null&&(g.pooledCacheLanes|=o),g=m),s.memoizedState={parent:u,cache:g},Lg(s),ds(s,Qt,g)):((r.lanes&o)!==0&&(zg(r,s),gc(s,null,null,o),fc()),g=r.memoizedState,m=s.memoizedState,g.parent!==u?(g={parent:u,cache:u},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),ds(s,Qt,u)):(u=m.cache,ds(s,Qt,u),u!==g.cache&&Dg(s,[Qt],o,!0))),hn(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function qi(r){r.flags|=4}function Y_(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!tE(s)){if(s=Tr.current,s!==null&&((Ze&4194048)===Ze?oi!==null:(Ze&62914560)!==Ze&&(Ze&536870912)===0||s!==oi))throw dc=Vg,Cv;r.flags|=8192}}function Bd(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Cr():536870912,r.lanes|=s,Ho|=s)}function Ec(r,s){if(!st)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function xt(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(s)for(var g=r.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=u,r.childLanes=o,s}function cR(r,s,o){var u=s.pendingProps;switch(Ng(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(s),null;case 1:return xt(s),null;case 3:return o=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Ui(Qt),Ae(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(ic(s)?qi(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Sv())),xt(s),null;case 26:return o=s.memoizedState,r===null?(qi(s),o!==null?(xt(s),Y_(s,o)):(xt(s),s.flags&=-16777217)):o?o!==r.memoizedState?(qi(s),xt(s),Y_(s,o)):(xt(s),s.flags&=-16777217):(r.memoizedProps!==u&&qi(s),xt(s),s.flags&=-16777217),null;case 27:et(s),o=de.current;var g=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==u&&qi(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return xt(s),null}r=ie.current,ic(s)?xv(s):(r=Yb(g,u,o),s.stateNode=r,qi(s))}return xt(s),null;case 5:if(et(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&qi(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return xt(s),null}if(r=ie.current,ic(s))xv(s);else{switch(g=Jd(de.current),r){case 1:r=g.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=g.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=g.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?g.createElement("select",{is:u.is}):g.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?g.createElement(o,{is:u.is}):g.createElement(o)}}r[Mt]=s,r[Rt]=u;e:for(g=s.child;g!==null;){if(g.tag===5||g.tag===6)r.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===s)break e;for(;g.sibling===null;){if(g.return===null||g.return===s)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}s.stateNode=r;e:switch(gn(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&qi(s)}}return xt(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&qi(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=de.current,ic(s)){if(r=s.stateNode,o=s.memoizedProps,u=null,g=Mn,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}r[Mt]=s,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Bb(r.nodeValue,o)),r||Ca(s)}else r=Jd(r).createTextNode(u),r[Mt]=s,s.stateNode=r}return xt(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(g=ic(s),u!==null&&u.dehydrated!==null){if(r===null){if(!g)throw Error(i(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Mt]=s}else sc(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;xt(s),g=!1}else g=Sv(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(ji(s),s):(ji(s),null)}if(ji(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=s.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==g&&(u.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),Bd(s,s.updateQueue),xt(s),null;case 4:return Ae(),r===null&&Bp(s.stateNode.containerInfo),xt(s),null;case 10:return Ui(s.type),xt(s),null;case 19:if(te(Wt),g=s.memoizedState,g===null)return xt(s),null;if(u=(s.flags&128)!==0,m=g.rendering,m===null)if(u)Ec(g,!1);else{if(It!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(m=Pd(r),m!==null){for(s.flags|=128,Ec(g,!1),r=m.updateQueue,s.updateQueue=r,Bd(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)Ev(o,r),o=o.sibling;return K(Wt,Wt.current&1|2),s.child}r=r.sibling}g.tail!==null&&ze()>qd&&(s.flags|=128,u=!0,Ec(g,!1),s.lanes=4194304)}else{if(!u)if(r=Pd(m),r!==null){if(s.flags|=128,u=!0,r=r.updateQueue,s.updateQueue=r,Bd(s,r),Ec(g,!0),g.tail===null&&g.tailMode==="hidden"&&!m.alternate&&!st)return xt(s),null}else 2*ze()-g.renderingStartTime>qd&&o!==536870912&&(s.flags|=128,u=!0,Ec(g,!1),s.lanes=4194304);g.isBackwards?(m.sibling=s.child,s.child=m):(r=g.last,r!==null?r.sibling=m:s.child=m,g.last=m)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=ze(),s.sibling=null,r=Wt.current,K(Wt,u?r&1|2:r&1),s):(xt(s),null);case 22:case 23:return ji(s),Hg(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(xt(s),s.subtreeFlags&6&&(s.flags|=8192)):xt(s),o=s.updateQueue,o!==null&&Bd(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),r!==null&&te(Ma),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Ui(Qt),xt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function uR(r,s){switch(Ng(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Ui(Qt),Ae(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return et(s),null;case 13:if(ji(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));sc()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return te(Wt),null;case 4:return Ae(),null;case 10:return Ui(s.type),null;case 22:case 23:return ji(s),Hg(),r!==null&&te(Ma),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Ui(Qt),null;case 25:return null;default:return null}}function K_(r,s){switch(Ng(s),s.tag){case 3:Ui(Qt),Ae();break;case 26:case 27:case 5:et(s);break;case 4:Ae();break;case 13:ji(s);break;case 19:te(Wt);break;case 10:Ui(s.type);break;case 22:case 23:ji(s),Hg(),r!==null&&te(Ma);break;case 24:Ui(Qt)}}function wc(r,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var g=u.next;o=g;do{if((o.tag&r)===r){u=void 0;var m=o.create,w=o.inst;u=m(),w.destroy=u}o=o.next}while(o!==g)}}catch(M){pt(s,s.return,M)}}function vs(r,s,o){try{var u=s.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var m=g.next;u=m;do{if((u.tag&r)===r){var w=u.inst,M=w.destroy;if(M!==void 0){w.destroy=void 0,g=s;var Y=o,ae=M;try{ae()}catch(he){pt(g,Y,he)}}}u=u.next}while(u!==m)}}catch(he){pt(s,s.return,he)}}function X_(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{Vv(s,o)}catch(u){pt(r,r.return,u)}}}function Q_(r,s,o){o.props=Pa(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){pt(r,s,u)}}function xc(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(g){pt(r,s,g)}}function li(r,s){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(g){pt(r,s,g)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(g){pt(r,s,g)}else o.current=null}function W_(r){var s=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(g){pt(r,r.return,g)}}function mp(r,s,o){try{var u=r.stateNode;kR(u,r.type,o,s),u[Rt]=s}catch(g){pt(r,r.return,g)}}function Z_(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&As(r.type)||r.tag===4}function yp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Z_(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&As(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function vp(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Zd));else if(u!==4&&(u===27&&As(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(vp(r,s,o),r=r.sibling;r!==null;)vp(r,s,o),r=r.sibling}function jd(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(u!==4&&(u===27&&As(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(jd(r,s,o),r=r.sibling;r!==null;)jd(r,s,o),r=r.sibling}function J_(r){var s=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);gn(s,u,o),s[Mt]=r,s[Rt]=o}catch(m){pt(r,r.return,m)}}var $i=!1,Pt=!1,_p=!1,eb=typeof WeakSet=="function"?WeakSet:Set,sn=null;function dR(r,s){if(r=r.containerInfo,qp=sh,r=dv(r),yg(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var g=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var w=0,M=-1,Y=-1,ae=0,he=0,pe=r,oe=null;t:for(;;){for(var le;pe!==o||g!==0&&pe.nodeType!==3||(M=w+g),pe!==m||u!==0&&pe.nodeType!==3||(Y=w+u),pe.nodeType===3&&(w+=pe.nodeValue.length),(le=pe.firstChild)!==null;)oe=pe,pe=le;for(;;){if(pe===r)break t;if(oe===o&&++ae===g&&(M=w),oe===m&&++he===u&&(Y=w),(le=pe.nextSibling)!==null)break;pe=oe,oe=pe.parentNode}pe=le}o=M===-1||Y===-1?null:{start:M,end:Y}}else o=null}o=o||{start:0,end:0}}else o=null;for($p={focusedElem:r,selectionRange:o},sh=!1,sn=s;sn!==null;)if(s=sn,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,sn=r;else for(;sn!==null;){switch(s=sn,m=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,o=s,g=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var Oe=Pa(o.type,g,o.elementType===o.type);r=u.getSnapshotBeforeUpdate(Oe,m),u.__reactInternalSnapshotBeforeUpdate=r}catch(Ce){pt(o,o.return,Ce)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)Yp(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Yp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,sn=r;break}sn=s.return}}function tb(r,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:_s(r,o),u&4&&wc(5,o);break;case 1:if(_s(r,o),u&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(w){pt(o,o.return,w)}else{var g=Pa(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(g,s,r.__reactInternalSnapshotBeforeUpdate)}catch(w){pt(o,o.return,w)}}u&64&&X_(o),u&512&&xc(o,o.return);break;case 3:if(_s(r,o),u&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Vv(r,s)}catch(w){pt(o,o.return,w)}}break;case 27:s===null&&u&4&&J_(o);case 26:case 5:_s(r,o),s===null&&u&4&&W_(o),u&512&&xc(o,o.return);break;case 12:_s(r,o);break;case 13:_s(r,o),u&4&&ib(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=bR.bind(null,o),zR(r,o))));break;case 22:if(u=o.memoizedState!==null||$i,!u){s=s!==null&&s.memoizedState!==null||Pt,g=$i;var m=Pt;$i=u,(Pt=s)&&!m?bs(r,o,(o.subtreeFlags&8772)!==0):_s(r,o),$i=g,Pt=m}break;case 30:break;default:_s(r,o)}}function nb(r){var s=r.alternate;s!==null&&(r.alternate=null,nb(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Xr(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var bt=null,zn=!1;function Fi(r,s,o){for(o=o.child;o!==null;)rb(r,s,o),o=o.sibling}function rb(r,s,o){if(Fe&&typeof Fe.onCommitFiberUnmount=="function")try{Fe.onCommitFiberUnmount(at,o)}catch{}switch(o.tag){case 26:Pt||li(o,s),Fi(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Pt||li(o,s);var u=bt,g=zn;As(o.type)&&(bt=o.stateNode,zn=!1),Fi(r,s,o),Dc(o.stateNode),bt=u,zn=g;break;case 5:Pt||li(o,s);case 6:if(u=bt,g=zn,bt=null,Fi(r,s,o),bt=u,zn=g,bt!==null)if(zn)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(o.stateNode)}catch(m){pt(o,s,m)}else try{bt.removeChild(o.stateNode)}catch(m){pt(o,s,m)}break;case 18:bt!==null&&(zn?(r=bt,Fb(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Bc(r)):Fb(bt,o.stateNode));break;case 4:u=bt,g=zn,bt=o.stateNode.containerInfo,zn=!0,Fi(r,s,o),bt=u,zn=g;break;case 0:case 11:case 14:case 15:Pt||vs(2,o,s),Pt||vs(4,o,s),Fi(r,s,o);break;case 1:Pt||(li(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Q_(o,s,u)),Fi(r,s,o);break;case 21:Fi(r,s,o);break;case 22:Pt=(u=Pt)||o.memoizedState!==null,Fi(r,s,o),Pt=u;break;default:Fi(r,s,o)}}function ib(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Bc(r)}catch(o){pt(s,s.return,o)}}function hR(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new eb),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new eb),s;default:throw Error(i(435,r.tag))}}function bp(r,s){var o=hR(r);s.forEach(function(u){var g=ER.bind(null,r,u);o.has(u)||(o.add(u),u.then(g,g))})}function Zn(r,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var g=o[u],m=r,w=s,M=w;e:for(;M!==null;){switch(M.tag){case 27:if(As(M.type)){bt=M.stateNode,zn=!1;break e}break;case 5:bt=M.stateNode,zn=!1;break e;case 3:case 4:bt=M.stateNode.containerInfo,zn=!0;break e}M=M.return}if(bt===null)throw Error(i(160));rb(m,w,g),bt=null,zn=!1,m=g.alternate,m!==null&&(m.return=null),g.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)sb(s,r),s=s.sibling}var Pr=null;function sb(r,s){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Zn(s,r),Jn(r),u&4&&(vs(3,r,r.return),wc(3,r),vs(5,r,r.return));break;case 1:Zn(s,r),Jn(r),u&512&&(Pt||o===null||li(o,o.return)),u&64&&$i&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var g=Pr;if(Zn(s,r),Jn(r),u&512&&(Pt||o===null||li(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":m=g.getElementsByTagName("title")[0],(!m||m[Ai]||m[Mt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=g.createElement(u),g.head.insertBefore(m,g.querySelector("head > title"))),gn(m,u,o),m[Mt]=r,wt(m),u=m;break e;case"link":var w=Jb("link","href",g).get(u+(o.href||""));if(w){for(var M=0;M<w.length;M++)if(m=w[M],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(M,1);break t}}m=g.createElement(u),gn(m,u,o),g.head.appendChild(m);break;case"meta":if(w=Jb("meta","content",g).get(u+(o.content||""))){for(M=0;M<w.length;M++)if(m=w[M],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(M,1);break t}}m=g.createElement(u),gn(m,u,o),g.head.appendChild(m);break;default:throw Error(i(468,u))}m[Mt]=r,wt(m),u=m}r.stateNode=u}else eE(g,r.type,r.stateNode);else r.stateNode=Zb(g,u,r.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?eE(g,r.type,r.stateNode):Zb(g,u,r.memoizedProps)):u===null&&r.stateNode!==null&&mp(r,r.memoizedProps,o.memoizedProps)}break;case 27:Zn(s,r),Jn(r),u&512&&(Pt||o===null||li(o,o.return)),o!==null&&u&4&&mp(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Zn(s,r),Jn(r),u&512&&(Pt||o===null||li(o,o.return)),r.flags&32){g=r.stateNode;try{mr(g,"")}catch(le){pt(r,r.return,le)}}u&4&&r.stateNode!=null&&(g=r.memoizedProps,mp(r,g,o!==null?o.memoizedProps:g)),u&1024&&(_p=!0);break;case 6:if(Zn(s,r),Jn(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(le){pt(r,r.return,le)}}break;case 3:if(nh=null,g=Pr,Pr=eh(s.containerInfo),Zn(s,r),Pr=g,Jn(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Bc(s.containerInfo)}catch(le){pt(r,r.return,le)}_p&&(_p=!1,ab(r));break;case 4:u=Pr,Pr=eh(r.stateNode.containerInfo),Zn(s,r),Jn(r),Pr=u;break;case 12:Zn(s,r),Jn(r);break;case 13:Zn(s,r),Jn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Ap=ze()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,bp(r,u)));break;case 22:g=r.memoizedState!==null;var Y=o!==null&&o.memoizedState!==null,ae=$i,he=Pt;if($i=ae||g,Pt=he||Y,Zn(s,r),Pt=he,$i=ae,Jn(r),u&8192)e:for(s=r.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(o===null||Y||$i||Pt||Va(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){Y=o=s;try{if(m=Y.stateNode,g)w=m.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{M=Y.stateNode;var pe=Y.memoizedProps.style,oe=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;M.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(le){pt(Y,Y.return,le)}}}else if(s.tag===6){if(o===null){Y=s;try{Y.stateNode.nodeValue=g?"":Y.memoizedProps}catch(le){pt(Y,Y.return,le)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,bp(r,o))));break;case 19:Zn(s,r),Jn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,bp(r,u)));break;case 30:break;case 21:break;default:Zn(s,r),Jn(r)}}function Jn(r){var s=r.flags;if(s&2){try{for(var o,u=r.return;u!==null;){if(Z_(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var g=o.stateNode,m=yp(r);jd(r,m,g);break;case 5:var w=o.stateNode;o.flags&32&&(mr(w,""),o.flags&=-33);var M=yp(r);jd(r,M,w);break;case 3:case 4:var Y=o.stateNode.containerInfo,ae=yp(r);vp(r,ae,Y);break;default:throw Error(i(161))}}catch(he){pt(r,r.return,he)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function ab(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;ab(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function _s(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)tb(r,s.alternate,s),s=s.sibling}function Va(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:vs(4,s,s.return),Va(s);break;case 1:li(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Q_(s,s.return,o),Va(s);break;case 27:Dc(s.stateNode);case 26:case 5:li(s,s.return),Va(s);break;case 22:s.memoizedState===null&&Va(s);break;case 30:Va(s);break;default:Va(s)}r=r.sibling}}function bs(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,g=r,m=s,w=m.flags;switch(m.tag){case 0:case 11:case 15:bs(g,m,o),wc(4,m);break;case 1:if(bs(g,m,o),u=m,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ae){pt(u,u.return,ae)}if(u=m,g=u.updateQueue,g!==null){var M=u.stateNode;try{var Y=g.shared.hiddenCallbacks;if(Y!==null)for(g.shared.hiddenCallbacks=null,g=0;g<Y.length;g++)Pv(Y[g],M)}catch(ae){pt(u,u.return,ae)}}o&&w&64&&X_(m),xc(m,m.return);break;case 27:J_(m);case 26:case 5:bs(g,m,o),o&&u===null&&w&4&&W_(m),xc(m,m.return);break;case 12:bs(g,m,o);break;case 13:bs(g,m,o),o&&w&4&&ib(g,m);break;case 22:m.memoizedState===null&&bs(g,m,o),xc(m,m.return);break;case 30:break;default:bs(g,m,o)}s=s.sibling}}function Ep(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&lc(o))}function wp(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&lc(r))}function ci(r,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ob(r,s,o,u),s=s.sibling}function ob(r,s,o,u){var g=s.flags;switch(s.tag){case 0:case 11:case 15:ci(r,s,o,u),g&2048&&wc(9,s);break;case 1:ci(r,s,o,u);break;case 3:ci(r,s,o,u),g&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&lc(r)));break;case 12:if(g&2048){ci(r,s,o,u),r=s.stateNode;try{var m=s.memoizedProps,w=m.id,M=m.onPostCommit;typeof M=="function"&&M(w,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(Y){pt(s,s.return,Y)}}else ci(r,s,o,u);break;case 13:ci(r,s,o,u);break;case 23:break;case 22:m=s.stateNode,w=s.alternate,s.memoizedState!==null?m._visibility&2?ci(r,s,o,u):Tc(r,s):m._visibility&2?ci(r,s,o,u):(m._visibility|=2,Uo(r,s,o,u,(s.subtreeFlags&10256)!==0)),g&2048&&Ep(w,s);break;case 24:ci(r,s,o,u),g&2048&&wp(s.alternate,s);break;default:ci(r,s,o,u)}}function Uo(r,s,o,u,g){for(g=g&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=r,w=s,M=o,Y=u,ae=w.flags;switch(w.tag){case 0:case 11:case 15:Uo(m,w,M,Y,g),wc(8,w);break;case 23:break;case 22:var he=w.stateNode;w.memoizedState!==null?he._visibility&2?Uo(m,w,M,Y,g):Tc(m,w):(he._visibility|=2,Uo(m,w,M,Y,g)),g&&ae&2048&&Ep(w.alternate,w);break;case 24:Uo(m,w,M,Y,g),g&&ae&2048&&wp(w.alternate,w);break;default:Uo(m,w,M,Y,g)}s=s.sibling}}function Tc(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,u=s,g=u.flags;switch(u.tag){case 22:Tc(o,u),g&2048&&Ep(u.alternate,u);break;case 24:Tc(o,u),g&2048&&wp(u.alternate,u);break;default:Tc(o,u)}s=s.sibling}}var Sc=8192;function Bo(r){if(r.subtreeFlags&Sc)for(r=r.child;r!==null;)lb(r),r=r.sibling}function lb(r){switch(r.tag){case 26:Bo(r),r.flags&Sc&&r.memoizedState!==null&&WR(Pr,r.memoizedState,r.memoizedProps);break;case 5:Bo(r);break;case 3:case 4:var s=Pr;Pr=eh(r.stateNode.containerInfo),Bo(r),Pr=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=Sc,Sc=16777216,Bo(r),Sc=s):Bo(r));break;default:Bo(r)}}function cb(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Ac(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];sn=u,db(u,r)}cb(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)ub(r),r=r.sibling}function ub(r){switch(r.tag){case 0:case 11:case 15:Ac(r),r.flags&2048&&vs(9,r,r.return);break;case 3:Ac(r);break;case 12:Ac(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,Hd(r)):Ac(r);break;default:Ac(r)}}function Hd(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];sn=u,db(u,r)}cb(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:vs(8,s,s.return),Hd(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Hd(s));break;default:Hd(s)}r=r.sibling}}function db(r,s){for(;sn!==null;){var o=sn;switch(o.tag){case 0:case 11:case 15:vs(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:lc(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,sn=u;else e:for(o=r;sn!==null;){u=sn;var g=u.sibling,m=u.return;if(nb(u),u===o){sn=null;break e}if(g!==null){g.return=m,sn=g;break e}sn=m}}}var fR={getCacheForType:function(r){var s=_n(Qt),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},gR=typeof WeakMap=="function"?WeakMap:Map,ct=0,yt=null,Ge=null,Ze=0,ut=0,er=null,Es=!1,jo=!1,xp=!1,Gi=0,It=0,ws=0,La=0,Tp=0,Sr=0,Ho=0,Rc=null,Un=null,Sp=!1,Ap=0,qd=1/0,$d=null,xs=null,fn=0,Ts=null,qo=null,$o=0,Rp=0,Np=null,hb=null,Nc=0,Ip=null;function tr(){if((ct&2)!==0&&Ze!==0)return Ze&-Ze;if(k.T!==null){var r=ko;return r!==0?r:Vp()}return Yr()}function fb(){Sr===0&&(Sr=(Ze&536870912)===0||st?Si():536870912);var r=Tr.current;return r!==null&&(r.flags|=32),Sr}function nr(r,s,o){(r===yt&&(ut===2||ut===9)||r.cancelPendingCommit!==null)&&(Fo(r,0),Ss(r,Ze,Sr,!1)),ur(r,o),((ct&2)===0||r!==yt)&&(r===yt&&((ct&2)===0&&(La|=o),It===4&&Ss(r,Ze,Sr,!1)),ui(r))}function gb(r,s,o){if((ct&6)!==0)throw Error(i(327));var u=!o&&(s&124)===0&&(s&r.expiredLanes)===0||Cn(r,s),g=u?yR(r,s):Dp(r,s,!0),m=u;do{if(g===0){jo&&!u&&Ss(r,s,0,!1);break}else{if(o=r.current.alternate,m&&!pR(o)){g=Dp(r,s,!1),m=!1;continue}if(g===2){if(m=s,r.errorRecoveryDisabledLanes&m)var w=0;else w=r.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;e:{var M=r;g=Rc;var Y=M.current.memoizedState.isDehydrated;if(Y&&(Fo(M,w).flags|=256),w=Dp(M,w,!1),w!==2){if(xp&&!Y){M.errorRecoveryDisabledLanes|=m,La|=m,g=4;break e}m=Un,Un=g,m!==null&&(Un===null?Un=m:Un.push.apply(Un,m))}g=w}if(m=!1,g!==2)continue}}if(g===1){Fo(r,0),Ss(r,s,0,!0);break}e:{switch(u=r,m=g,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ss(u,s,Sr,!Es);break e;case 2:Un=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(g=Ap+300-ze(),10<g)){if(Ss(u,s,Sr,!Es),cn(u,0,!0)!==0)break e;u.timeoutHandle=qb(pb.bind(null,u,o,Un,$d,Sp,s,Sr,La,Ho,Es,m,2,-0,0),g);break e}pb(u,o,Un,$d,Sp,s,Sr,La,Ho,Es,m,0,-0,0)}}break}while(!0);ui(r)}function pb(r,s,o,u,g,m,w,M,Y,ae,he,pe,oe,le){if(r.timeoutHandle=-1,pe=s.subtreeFlags,(pe&8192||(pe&16785408)===16785408)&&(Pc={stylesheets:null,count:0,unsuspend:QR},lb(s),pe=ZR(),pe!==null)){r.cancelPendingCommit=pe(wb.bind(null,r,s,m,o,u,g,w,M,Y,he,1,oe,le)),Ss(r,m,w,!ae);return}wb(r,s,m,o,u,g,w,M,Y)}function pR(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var g=o[u],m=g.getSnapshot;g=g.value;try{if(!Qn(m(),g))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ss(r,s,o,u){s&=~Tp,s&=~La,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var g=s;0<g;){var m=31-Et(g),w=1<<m;u[m]=-1,g&=~w}o!==0&&dr(r,o,s)}function Fd(){return(ct&6)===0?(Ic(0),!1):!0}function Cp(){if(Ge!==null){if(ut===0)var r=Ge.return;else r=Ge,zi=ka=null,Yg(r),Lo=null,_c=0,r=Ge;for(;r!==null;)K_(r.alternate,r),r=r.return;Ge=null}}function Fo(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,MR(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),Cp(),yt=r,Ge=o=Pi(r.current,null),Ze=s,ut=0,er=null,Es=!1,jo=Cn(r,s),xp=!1,Ho=Sr=Tp=La=ws=It=0,Un=Rc=null,Sp=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var g=31-Et(u),m=1<<g;s|=r[g],u&=~m}return Gi=s,fd(),o}function mb(r,s){je=null,k.H=Dd,s===uc||s===wd?(s=Mv(),ut=3):s===Cv?(s=Mv(),ut=4):ut=s===O_?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,er=s,Ge===null&&(It=1,Ld(r,br(s,r.current)))}function yb(){var r=k.H;return k.H=Dd,r===null?Dd:r}function vb(){var r=k.A;return k.A=fR,r}function kp(){It=4,Es||(Ze&4194048)!==Ze&&Tr.current!==null||(jo=!0),(ws&134217727)===0&&(La&134217727)===0||yt===null||Ss(yt,Ze,Sr,!1)}function Dp(r,s,o){var u=ct;ct|=2;var g=yb(),m=vb();(yt!==r||Ze!==s)&&($d=null,Fo(r,s)),s=!1;var w=It;e:do try{if(ut!==0&&Ge!==null){var M=Ge,Y=er;switch(ut){case 8:Cp(),w=6;break e;case 3:case 2:case 9:case 6:Tr.current===null&&(s=!0);var ae=ut;if(ut=0,er=null,Go(r,M,Y,ae),o&&jo){w=0;break e}break;default:ae=ut,ut=0,er=null,Go(r,M,Y,ae)}}mR(),w=It;break}catch(he){mb(r,he)}while(!0);return s&&r.shellSuspendCounter++,zi=ka=null,ct=u,k.H=g,k.A=m,Ge===null&&(yt=null,Ze=0,fd()),w}function mR(){for(;Ge!==null;)_b(Ge)}function yR(r,s){var o=ct;ct|=2;var u=yb(),g=vb();yt!==r||Ze!==s?($d=null,qd=ze()+500,Fo(r,s)):jo=Cn(r,s);e:do try{if(ut!==0&&Ge!==null){s=Ge;var m=er;t:switch(ut){case 1:ut=0,er=null,Go(r,s,m,1);break;case 2:case 9:if(kv(m)){ut=0,er=null,bb(s);break}s=function(){ut!==2&&ut!==9||yt!==r||(ut=7),ui(r)},m.then(s,s);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:kv(m)?(ut=0,er=null,bb(s)):(ut=0,er=null,Go(r,s,m,7));break;case 5:var w=null;switch(Ge.tag){case 26:w=Ge.memoizedState;case 5:case 27:var M=Ge;if(!w||tE(w)){ut=0,er=null;var Y=M.sibling;if(Y!==null)Ge=Y;else{var ae=M.return;ae!==null?(Ge=ae,Gd(ae)):Ge=null}break t}}ut=0,er=null,Go(r,s,m,5);break;case 6:ut=0,er=null,Go(r,s,m,6);break;case 8:Cp(),It=6;break e;default:throw Error(i(462))}}vR();break}catch(he){mb(r,he)}while(!0);return zi=ka=null,k.H=u,k.A=g,ct=o,Ge!==null?0:(yt=null,Ze=0,fd(),It)}function vR(){for(;Ge!==null&&!it();)_b(Ge)}function _b(r){var s=G_(r.alternate,r,Gi);r.memoizedProps=r.pendingProps,s===null?Gd(r):Ge=s}function bb(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=B_(o,s,s.pendingProps,s.type,void 0,Ze);break;case 11:s=B_(o,s,s.pendingProps,s.type.render,s.ref,Ze);break;case 5:Yg(s);default:K_(o,s),s=Ge=Ev(s,Gi),s=G_(o,s,Gi)}r.memoizedProps=r.pendingProps,s===null?Gd(r):Ge=s}function Go(r,s,o,u){zi=ka=null,Yg(s),Lo=null,_c=0;var g=s.return;try{if(oR(r,g,s,o,Ze)){It=1,Ld(r,br(o,r.current)),Ge=null;return}}catch(m){if(g!==null)throw Ge=g,m;It=1,Ld(r,br(o,r.current)),Ge=null;return}s.flags&32768?(st||u===1?r=!0:jo||(Ze&536870912)!==0?r=!1:(Es=r=!0,(u===2||u===9||u===3||u===6)&&(u=Tr.current,u!==null&&u.tag===13&&(u.flags|=16384))),Eb(s,r)):Gd(s)}function Gd(r){var s=r;do{if((s.flags&32768)!==0){Eb(s,Es);return}r=s.return;var o=cR(s.alternate,s,Gi);if(o!==null){Ge=o;return}if(s=s.sibling,s!==null){Ge=s;return}Ge=s=r}while(s!==null);It===0&&(It=5)}function Eb(r,s){do{var o=uR(r.alternate,r);if(o!==null){o.flags&=32767,Ge=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){Ge=r;return}Ge=r=o}while(r!==null);It=6,Ge=null}function wb(r,s,o,u,g,m,w,M,Y){r.cancelPendingCommit=null;do Yd();while(fn!==0);if((ct&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=wg,Yn(r,o,m,w,M,Y),r===yt&&(Ge=yt=null,Ze=0),qo=s,Ts=r,$o=o,Rp=m,Np=g,hb=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,wR(Gt,function(){return Rb(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=k.T,k.T=null,g=$.p,$.p=2,w=ct,ct|=4;try{dR(r,s,o)}finally{ct=w,$.p=g,k.T=u}}fn=1,xb(),Tb(),Sb()}}function xb(){if(fn===1){fn=0;var r=Ts,s=qo,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=k.T,k.T=null;var u=$.p;$.p=2;var g=ct;ct|=4;try{sb(s,r);var m=$p,w=dv(r.containerInfo),M=m.focusedElem,Y=m.selectionRange;if(w!==M&&M&&M.ownerDocument&&uv(M.ownerDocument.documentElement,M)){if(Y!==null&&yg(M)){var ae=Y.start,he=Y.end;if(he===void 0&&(he=ae),"selectionStart"in M)M.selectionStart=ae,M.selectionEnd=Math.min(he,M.value.length);else{var pe=M.ownerDocument||document,oe=pe&&pe.defaultView||window;if(oe.getSelection){var le=oe.getSelection(),Oe=M.textContent.length,Ce=Math.min(Y.start,Oe),gt=Y.end===void 0?Ce:Math.min(Y.end,Oe);!le.extend&&Ce>gt&&(w=gt,gt=Ce,Ce=w);var ne=cv(M,Ce),ee=cv(M,gt);if(ne&&ee&&(le.rangeCount!==1||le.anchorNode!==ne.node||le.anchorOffset!==ne.offset||le.focusNode!==ee.node||le.focusOffset!==ee.offset)){var se=pe.createRange();se.setStart(ne.node,ne.offset),le.removeAllRanges(),Ce>gt?(le.addRange(se),le.extend(ee.node,ee.offset)):(se.setEnd(ee.node,ee.offset),le.addRange(se))}}}}for(pe=[],le=M;le=le.parentNode;)le.nodeType===1&&pe.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<pe.length;M++){var ge=pe[M];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}sh=!!qp,$p=qp=null}finally{ct=g,$.p=u,k.T=o}}r.current=s,fn=2}}function Tb(){if(fn===2){fn=0;var r=Ts,s=qo,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=k.T,k.T=null;var u=$.p;$.p=2;var g=ct;ct|=4;try{tb(r,s.alternate,s)}finally{ct=g,$.p=u,k.T=o}}fn=3}}function Sb(){if(fn===4||fn===3){fn=0,Lt();var r=Ts,s=qo,o=$o,u=hb;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?fn=5:(fn=0,qo=Ts=null,Ab(r,r.pendingLanes));var g=r.pendingLanes;if(g===0&&(xs=null),as(o),s=s.stateNode,Fe&&typeof Fe.onCommitFiberRoot=="function")try{Fe.onCommitFiberRoot(at,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=k.T,g=$.p,$.p=2,k.T=null;try{for(var m=r.onRecoverableError,w=0;w<u.length;w++){var M=u[w];m(M.value,{componentStack:M.stack})}}finally{k.T=s,$.p=g}}($o&3)!==0&&Yd(),ui(r),g=r.pendingLanes,(o&4194090)!==0&&(g&42)!==0?r===Ip?Nc++:(Nc=0,Ip=r):Nc=0,Ic(0)}}function Ab(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,lc(s)))}function Yd(r){return xb(),Tb(),Sb(),Rb()}function Rb(){if(fn!==5)return!1;var r=Ts,s=Rp;Rp=0;var o=as($o),u=k.T,g=$.p;try{$.p=32>o?32:o,k.T=null,o=Np,Np=null;var m=Ts,w=$o;if(fn=0,qo=Ts=null,$o=0,(ct&6)!==0)throw Error(i(331));var M=ct;if(ct|=4,ub(m.current),ob(m,m.current,w,o),ct=M,Ic(0,!1),Fe&&typeof Fe.onPostCommitFiberRoot=="function")try{Fe.onPostCommitFiberRoot(at,m)}catch{}return!0}finally{$.p=g,k.T=u,Ab(r,s)}}function Nb(r,s,o){s=br(o,s),s=op(r.stateNode,s,2),r=gs(r,s,2),r!==null&&(ur(r,2),ui(r))}function pt(r,s,o){if(r.tag===3)Nb(r,r,o);else for(;s!==null;){if(s.tag===3){Nb(s,r,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(xs===null||!xs.has(u))){r=br(o,r),o=D_(2),u=gs(s,o,2),u!==null&&(M_(o,u,s,r),ur(u,2),ui(u));break}}s=s.return}}function Mp(r,s,o){var u=r.pingCache;if(u===null){u=r.pingCache=new gR;var g=new Set;u.set(s,g)}else g=u.get(s),g===void 0&&(g=new Set,u.set(s,g));g.has(o)||(xp=!0,g.add(o),r=_R.bind(null,r,s,o),s.then(r,r))}function _R(r,s,o){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,yt===r&&(Ze&o)===o&&(It===4||It===3&&(Ze&62914560)===Ze&&300>ze()-Ap?(ct&2)===0&&Fo(r,0):Tp|=o,Ho===Ze&&(Ho=0)),ui(r)}function Ib(r,s){s===0&&(s=Cr()),r=Ro(r,s),r!==null&&(ur(r,s),ui(r))}function bR(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),Ib(r,o)}function ER(r,s){var o=0;switch(r.tag){case 13:var u=r.stateNode,g=r.memoizedState;g!==null&&(o=g.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),Ib(r,o)}function wR(r,s){return Le(r,s)}var Kd=null,Yo=null,Op=!1,Xd=!1,Pp=!1,za=0;function ui(r){r!==Yo&&r.next===null&&(Yo===null?Kd=Yo=r:Yo=Yo.next=r),Xd=!0,Op||(Op=!0,TR())}function Ic(r,s){if(!Pp&&Xd){Pp=!0;do for(var o=!1,u=Kd;u!==null;){if(r!==0){var g=u.pendingLanes;if(g===0)var m=0;else{var w=u.suspendedLanes,M=u.pingedLanes;m=(1<<31-Et(42|r)+1)-1,m&=g&~(w&~M),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,Mb(u,m))}else m=Ze,m=cn(u,u===yt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Cn(u,m)||(o=!0,Mb(u,m));u=u.next}while(o);Pp=!1}}function xR(){Cb()}function Cb(){Xd=Op=!1;var r=0;za!==0&&(DR()&&(r=za),za=0);for(var s=ze(),o=null,u=Kd;u!==null;){var g=u.next,m=kb(u,s);m===0?(u.next=null,o===null?Kd=g:o.next=g,g===null&&(Yo=o)):(o=u,(r!==0||(m&3)!==0)&&(Xd=!0)),u=g}Ic(r)}function kb(r,s){for(var o=r.suspendedLanes,u=r.pingedLanes,g=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var w=31-Et(m),M=1<<w,Y=g[w];Y===-1?((M&o)===0||(M&u)!==0)&&(g[w]=Ti(M,s)):Y<=s&&(r.expiredLanes|=M),m&=~M}if(s=yt,o=Ze,o=cn(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===s&&(ut===2||ut===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&tt(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Cn(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(u!==null&&tt(u),as(o)){case 2:case 8:o=vn;break;case 32:o=Gt;break;case 268435456:o=An;break;default:o=Gt}return u=Db.bind(null,r),o=Le(o,u),r.callbackPriority=s,r.callbackNode=o,s}return u!==null&&u!==null&&tt(u),r.callbackPriority=2,r.callbackNode=null,2}function Db(r,s){if(fn!==0&&fn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Yd()&&r.callbackNode!==o)return null;var u=Ze;return u=cn(r,r===yt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(gb(r,u,s),kb(r,ze()),r.callbackNode!=null&&r.callbackNode===o?Db.bind(null,r):null)}function Mb(r,s){if(Yd())return null;gb(r,s,!0)}function TR(){OR(function(){(ct&6)!==0?Le(At,xR):Cb()})}function Vp(){return za===0&&(za=Si()),za}function Ob(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:po(""+r)}function Pb(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function SR(r,s,o,u,g){if(s==="submit"&&o&&o.stateNode===g){var m=Ob((g[Rt]||null).action),w=u.submitter;w&&(s=(s=w[Rt]||null)?Ob(s.formAction):w.getAttribute("formAction"),s!==null&&(m=s,w=null));var M=new mo("action","action",null,u,g);r.push({event:M,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(za!==0){var Y=w?Pb(g,w):new FormData(g);np(o,{pending:!0,data:Y,method:g.method,action:m},null,Y)}}else typeof m=="function"&&(M.preventDefault(),Y=w?Pb(g,w):new FormData(g),np(o,{pending:!0,data:Y,method:g.method,action:m},m,Y))},currentTarget:g}]})}}for(var Lp=0;Lp<Eg.length;Lp++){var zp=Eg[Lp],AR=zp.toLowerCase(),RR=zp[0].toUpperCase()+zp.slice(1);Or(AR,"on"+RR)}Or(gv,"onAnimationEnd"),Or(pv,"onAnimationIteration"),Or(mv,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or($2,"onTransitionRun"),Or(F2,"onTransitionStart"),Or(G2,"onTransitionCancel"),Or(yv,"onTransitionEnd"),kr("onMouseEnter",["mouseout","mouseover"]),kr("onMouseLeave",["mouseout","mouseover"]),kr("onPointerEnter",["pointerout","pointerover"]),kr("onPointerLeave",["pointerout","pointerover"]),Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cc));function Vb(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],g=u.event;u=u.listeners;e:{var m=void 0;if(s)for(var w=u.length-1;0<=w;w--){var M=u[w],Y=M.instance,ae=M.currentTarget;if(M=M.listener,Y!==m&&g.isPropagationStopped())break e;m=M,g.currentTarget=ae;try{m(g)}catch(he){Vd(he)}g.currentTarget=null,m=Y}else for(w=0;w<u.length;w++){if(M=u[w],Y=M.instance,ae=M.currentTarget,M=M.listener,Y!==m&&g.isPropagationStopped())break e;m=M,g.currentTarget=ae;try{m(g)}catch(he){Vd(he)}g.currentTarget=null,m=Y}}}}function Ye(r,s){var o=s[ua];o===void 0&&(o=s[ua]=new Set);var u=r+"__bubble";o.has(u)||(Lb(s,r,2,!1),o.add(u))}function Up(r,s,o){var u=0;s&&(u|=4),Lb(o,r,u,s)}var Qd="_reactListening"+Math.random().toString(36).slice(2);function Bp(r){if(!r[Qd]){r[Qd]=!0,da.forEach(function(o){o!=="selectionchange"&&(NR.has(o)||Up(o,!1,r),Up(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Qd]||(s[Qd]=!0,Up("selectionchange",!1,s))}}function Lb(r,s,o,u){switch(oE(s)){case 2:var g=tN;break;case 8:g=nN;break;default:g=em}o=g.bind(null,s,o,r),g=void 0,!vr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),u?g!==void 0?r.addEventListener(s,o,{capture:!0,passive:g}):r.addEventListener(s,o,!0):g!==void 0?r.addEventListener(s,o,{passive:g}):r.addEventListener(s,o,!1)}function jp(r,s,o,u,g){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var M=u.stateNode.containerInfo;if(M===g)break;if(w===4)for(w=u.return;w!==null;){var Y=w.tag;if((Y===3||Y===4)&&w.stateNode.containerInfo===g)return;w=w.return}for(;M!==null;){if(w=hr(M),w===null)return;if(Y=w.tag,Y===5||Y===6||Y===26||Y===27){u=m=w;continue e}M=M.parentNode}}u=u.return}Zu(function(){var ae=m,he=yr(o),pe=[];e:{var oe=vv.get(r);if(oe!==void 0){var le=mo,Oe=r;switch(r){case"keypress":if(ti(o)===0)break e;case"keydown":case"keyup":le=wo;break;case"focusin":Oe="focus",le=_o;break;case"focusout":Oe="blur",le=_o;break;case"beforeblur":case"afterblur":le=_o;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=_r;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=fg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=ad;break;case gv:case pv:case mv:le=bo;break;case yv:le=ld;break;case"scroll":case"scrollend":le=Ju;break;case"wheel":le=xo;break;case"copy":case"cut":case"paste":le=Eo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=ec;break;case"toggle":case"beforetoggle":le=ud}var Ce=(s&4)!==0,gt=!Ce&&(r==="scroll"||r==="scrollend"),ne=Ce?oe!==null?oe+"Capture":null:oe;Ce=[];for(var ee=ae,se;ee!==null;){var ge=ee;if(se=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||se===null||ne===null||(ge=ya(ee,ne),ge!=null&&Ce.push(kc(ee,ge,se))),gt)break;ee=ee.return}0<Ce.length&&(oe=new le(oe,Oe,null,o,he),pe.push({event:oe,listeners:Ce}))}}if((s&7)===0){e:{if(oe=r==="mouseover"||r==="pointerover",le=r==="mouseout"||r==="pointerout",oe&&o!==Ii&&(Oe=o.relatedTarget||o.fromElement)&&(hr(Oe)||Oe[Vn]))break e;if((le||oe)&&(oe=he.window===he?he:(oe=he.ownerDocument)?oe.defaultView||oe.parentWindow:window,le?(Oe=o.relatedTarget||o.toElement,le=ae,Oe=Oe?hr(Oe):null,Oe!==null&&(gt=l(Oe),Ce=Oe.tag,Oe!==gt||Ce!==5&&Ce!==27&&Ce!==6)&&(Oe=null)):(le=null,Oe=ae),le!==Oe)){if(Ce=_r,ge="onMouseLeave",ne="onMouseEnter",ee="mouse",(r==="pointerout"||r==="pointerover")&&(Ce=ec,ge="onPointerLeave",ne="onPointerEnter",ee="pointer"),gt=le==null?oe:gr(le),se=Oe==null?oe:gr(Oe),oe=new Ce(ge,ee+"leave",le,o,he),oe.target=gt,oe.relatedTarget=se,ge=null,hr(he)===ae&&(Ce=new Ce(ne,ee+"enter",Oe,o,he),Ce.target=se,Ce.relatedTarget=gt,ge=Ce),gt=ge,le&&Oe)t:{for(Ce=le,ne=Oe,ee=0,se=Ce;se;se=Ko(se))ee++;for(se=0,ge=ne;ge;ge=Ko(ge))se++;for(;0<ee-se;)Ce=Ko(Ce),ee--;for(;0<se-ee;)ne=Ko(ne),se--;for(;ee--;){if(Ce===ne||ne!==null&&Ce===ne.alternate)break t;Ce=Ko(Ce),ne=Ko(ne)}Ce=null}else Ce=null;le!==null&&zb(pe,oe,le,Ce,!1),Oe!==null&&gt!==null&&zb(pe,gt,Oe,Ce,!0)}}e:{if(oe=ae?gr(ae):window,le=oe.nodeName&&oe.nodeName.toLowerCase(),le==="select"||le==="input"&&oe.type==="file")var Te=rv;else if(Xt(oe))if(iv)Te=j2;else{Te=U2;var qe=z2}else le=oe.nodeName,!le||le.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?ae&&Yl(ae.elementType)&&(Te=rv):Te=B2;if(Te&&(Te=Te(r,ae))){Oi(pe,Te,o,he);break e}qe&&qe(r,oe,ae),r==="focusout"&&ae&&oe.type==="number"&&ae.memoizedProps.value!=null&&cs(oe,"number",oe.value)}switch(qe=ae?gr(ae):window,r){case"focusin":(Xt(qe)||qe.contentEditable==="true")&&(To=qe,vg=ae,rc=null);break;case"focusout":rc=vg=To=null;break;case"mousedown":_g=!0;break;case"contextmenu":case"mouseup":case"dragend":_g=!1,hv(pe,o,he);break;case"selectionchange":if(q2)break;case"keydown":case"keyup":hv(pe,o,he)}var Re;if(ii)e:{switch(r){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Qe?ce(r,o)&&(ke="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(ke="onCompositionStart");ke&&(E&&o.locale!=="ko"&&(Qe||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Qe&&(Re=Xl()):(ei=he,us="value"in ei?ei.value:ei.textContent,Qe=!0)),qe=Wd(ae,ke),0<qe.length&&(ke=new Zl(ke,r,null,o,he),pe.push({event:ke,listeners:qe}),Re?ke.data=Re:(Re=be(o),Re!==null&&(ke.data=Re)))),(Re=_?Kt(r,o):We(r,o))&&(ke=Wd(ae,"onBeforeInput"),0<ke.length&&(qe=new Zl("onBeforeInput","beforeinput",null,o,he),pe.push({event:qe,listeners:ke}),qe.data=Re)),SR(pe,r,ae,o,he)}Vb(pe,s)})}function kc(r,s,o){return{instance:r,listener:s,currentTarget:o}}function Wd(r,s){for(var o=s+"Capture",u=[];r!==null;){var g=r,m=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||m===null||(g=ya(r,o),g!=null&&u.unshift(kc(r,g,m)),g=ya(r,s),g!=null&&u.push(kc(r,g,m))),r.tag===3)return u;r=r.return}return[]}function Ko(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function zb(r,s,o,u,g){for(var m=s._reactName,w=[];o!==null&&o!==u;){var M=o,Y=M.alternate,ae=M.stateNode;if(M=M.tag,Y!==null&&Y===u)break;M!==5&&M!==26&&M!==27||ae===null||(Y=ae,g?(ae=ya(o,m),ae!=null&&w.unshift(kc(o,ae,Y))):g||(ae=ya(o,m),ae!=null&&w.push(kc(o,ae,Y)))),o=o.return}w.length!==0&&r.push({event:s,listeners:w})}var IR=/\r\n?/g,CR=/\u0000|\uFFFD/g;function Ub(r){return(typeof r=="string"?r:""+r).replace(IR,`
`).replace(CR,"")}function Bb(r,s){return s=Ub(s),Ub(r)===s}function Zd(){}function ft(r,s,o,u,g,m){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||mr(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&mr(r,""+u);break;case"className":pr(r,"class",u);break;case"tabIndex":pr(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":pr(r,o,u);break;case"style":Gl(r,u,m);break;case"data":if(s!=="object"){pr(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=po(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&ft(r,s,"name",g.name,g,null),ft(r,s,"formEncType",g.formEncType,g,null),ft(r,s,"formMethod",g.formMethod,g,null),ft(r,s,"formTarget",g.formTarget,g,null)):(ft(r,s,"encType",g.encType,g,null),ft(r,s,"method",g.method,g,null),ft(r,s,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=po(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=Zd);break;case"onScroll":u!=null&&Ye("scroll",r);break;case"onScrollEnd":u!=null&&Ye("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=po(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Ye("beforetoggle",r),Ye("toggle",r),Qr(r,"popover",u);break;case"xlinkActuate":Yt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Yt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Yt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Yt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Yt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Yt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Qr(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=dg.get(o)||o,Qr(r,o,u))}}function Hp(r,s,o,u,g,m){switch(o){case"style":Gl(r,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof u=="string"?mr(r,u):(typeof u=="number"||typeof u=="bigint")&&mr(r,""+u);break;case"onScroll":u!=null&&Ye("scroll",r);break;case"onScrollEnd":u!=null&&Ye("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Zd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!os.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(g=o.endsWith("Capture"),s=o.slice(2,g?o.length-7:void 0),m=r[Rt]||null,m=m!=null?m[o]:null,typeof m=="function"&&r.removeEventListener(s,m,g),typeof u=="function")){typeof m!="function"&&m!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,u,g);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Qr(r,o,u)}}}function gn(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",r),Ye("load",r);var u=!1,g=!1,m;for(m in o)if(o.hasOwnProperty(m)){var w=o[m];if(w!=null)switch(m){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ft(r,s,m,w,o,null)}}g&&ft(r,s,"srcSet",o.srcSet,o,null),u&&ft(r,s,"src",o.src,o,null);return;case"input":Ye("invalid",r);var M=m=w=g=null,Y=null,ae=null;for(u in o)if(o.hasOwnProperty(u)){var he=o[u];if(he!=null)switch(u){case"name":g=he;break;case"type":w=he;break;case"checked":Y=he;break;case"defaultChecked":ae=he;break;case"value":m=he;break;case"defaultValue":M=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(i(137,s));break;default:ft(r,s,u,he,o,null)}}ga(r,m,M,Y,ae,w,g,!1),go(r);return;case"select":Ye("invalid",r),u=w=m=null;for(g in o)if(o.hasOwnProperty(g)&&(M=o[g],M!=null))switch(g){case"value":m=M;break;case"defaultValue":w=M;break;case"multiple":u=M;default:ft(r,s,g,M,o,null)}s=m,o=w,r.multiple=!!u,s!=null?Ni(r,!!u,s,!1):o!=null&&Ni(r,!!u,o,!0);return;case"textarea":Ye("invalid",r),m=g=u=null;for(w in o)if(o.hasOwnProperty(w)&&(M=o[w],M!=null))switch(w){case"value":u=M;break;case"defaultValue":g=M;break;case"children":m=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:ft(r,s,w,M,o,null)}pa(r,u,g,m),go(r);return;case"option":for(Y in o)if(o.hasOwnProperty(Y)&&(u=o[Y],u!=null))switch(Y){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ft(r,s,Y,u,o,null)}return;case"dialog":Ye("beforetoggle",r),Ye("toggle",r),Ye("cancel",r),Ye("close",r);break;case"iframe":case"object":Ye("load",r);break;case"video":case"audio":for(u=0;u<Cc.length;u++)Ye(Cc[u],r);break;case"image":Ye("error",r),Ye("load",r);break;case"details":Ye("toggle",r);break;case"embed":case"source":case"link":Ye("error",r),Ye("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in o)if(o.hasOwnProperty(ae)&&(u=o[ae],u!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ft(r,s,ae,u,o,null)}return;default:if(Yl(s)){for(he in o)o.hasOwnProperty(he)&&(u=o[he],u!==void 0&&Hp(r,s,he,u,o,void 0));return}}for(M in o)o.hasOwnProperty(M)&&(u=o[M],u!=null&&ft(r,s,M,u,o,null))}function kR(r,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,m=null,w=null,M=null,Y=null,ae=null,he=null;for(le in o){var pe=o[le];if(o.hasOwnProperty(le)&&pe!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":Y=pe;default:u.hasOwnProperty(le)||ft(r,s,le,null,u,pe)}}for(var oe in u){var le=u[oe];if(pe=o[oe],u.hasOwnProperty(oe)&&(le!=null||pe!=null))switch(oe){case"type":m=le;break;case"name":g=le;break;case"checked":ae=le;break;case"defaultChecked":he=le;break;case"value":w=le;break;case"defaultValue":M=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(i(137,s));break;default:le!==pe&&ft(r,s,oe,le,u,pe)}}Xn(r,w,M,Y,ae,he,m,g);return;case"select":le=w=M=oe=null;for(m in o)if(Y=o[m],o.hasOwnProperty(m)&&Y!=null)switch(m){case"value":break;case"multiple":le=Y;default:u.hasOwnProperty(m)||ft(r,s,m,null,u,Y)}for(g in u)if(m=u[g],Y=o[g],u.hasOwnProperty(g)&&(m!=null||Y!=null))switch(g){case"value":oe=m;break;case"defaultValue":M=m;break;case"multiple":w=m;default:m!==Y&&ft(r,s,g,m,u,Y)}s=M,o=w,u=le,oe!=null?Ni(r,!!o,oe,!1):!!u!=!!o&&(s!=null?Ni(r,!!o,s,!0):Ni(r,!!o,o?[]:"",!1));return;case"textarea":le=oe=null;for(M in o)if(g=o[M],o.hasOwnProperty(M)&&g!=null&&!u.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:ft(r,s,M,null,u,g)}for(w in u)if(g=u[w],m=o[w],u.hasOwnProperty(w)&&(g!=null||m!=null))switch(w){case"value":oe=g;break;case"defaultValue":le=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==m&&ft(r,s,w,g,u,m)}dt(r,oe,le);return;case"option":for(var Oe in o)if(oe=o[Oe],o.hasOwnProperty(Oe)&&oe!=null&&!u.hasOwnProperty(Oe))switch(Oe){case"selected":r.selected=!1;break;default:ft(r,s,Oe,null,u,oe)}for(Y in u)if(oe=u[Y],le=o[Y],u.hasOwnProperty(Y)&&oe!==le&&(oe!=null||le!=null))switch(Y){case"selected":r.selected=oe&&typeof oe!="function"&&typeof oe!="symbol";break;default:ft(r,s,Y,oe,u,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in o)oe=o[Ce],o.hasOwnProperty(Ce)&&oe!=null&&!u.hasOwnProperty(Ce)&&ft(r,s,Ce,null,u,oe);for(ae in u)if(oe=u[ae],le=o[ae],u.hasOwnProperty(ae)&&oe!==le&&(oe!=null||le!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,s));break;default:ft(r,s,ae,oe,u,le)}return;default:if(Yl(s)){for(var gt in o)oe=o[gt],o.hasOwnProperty(gt)&&oe!==void 0&&!u.hasOwnProperty(gt)&&Hp(r,s,gt,void 0,u,oe);for(he in u)oe=u[he],le=o[he],!u.hasOwnProperty(he)||oe===le||oe===void 0&&le===void 0||Hp(r,s,he,oe,u,le);return}}for(var ne in o)oe=o[ne],o.hasOwnProperty(ne)&&oe!=null&&!u.hasOwnProperty(ne)&&ft(r,s,ne,null,u,oe);for(pe in u)oe=u[pe],le=o[pe],!u.hasOwnProperty(pe)||oe===le||oe==null&&le==null||ft(r,s,pe,oe,u,le)}var qp=null,$p=null;function Jd(r){return r.nodeType===9?r:r.ownerDocument}function jb(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hb(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Fp(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Gp=null;function DR(){var r=window.event;return r&&r.type==="popstate"?r===Gp?!1:(Gp=r,!0):(Gp=null,!1)}var qb=typeof setTimeout=="function"?setTimeout:void 0,MR=typeof clearTimeout=="function"?clearTimeout:void 0,$b=typeof Promise=="function"?Promise:void 0,OR=typeof queueMicrotask=="function"?queueMicrotask:typeof $b<"u"?function(r){return $b.resolve(null).then(r).catch(PR)}:qb;function PR(r){setTimeout(function(){throw r})}function As(r){return r==="head"}function Fb(r,s){var o=s,u=0,g=0;do{var m=o.nextSibling;if(r.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<u&&8>u){o=u;var w=r.ownerDocument;if(o&1&&Dc(w.documentElement),o&2&&Dc(w.body),o&4)for(o=w.head,Dc(o),w=o.firstChild;w;){var M=w.nextSibling,Y=w.nodeName;w[Ai]||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&w.rel.toLowerCase()==="stylesheet"||o.removeChild(w),w=M}}if(g===0){r.removeChild(m),Bc(s);return}g--}else o==="$"||o==="$?"||o==="$!"?g++:u=o.charCodeAt(0)-48;else u=0;o=m}while(o);Bc(s)}function Yp(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Yp(o),Xr(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function VR(r,s,o,u){for(;r.nodeType===1;){var g=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Ai])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==g.rel||r.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||r.getAttribute("title")!==(g.title==null?null:g.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(g.src==null?null:g.src)||r.getAttribute("type")!==(g.type==null?null:g.type)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var m=g.name==null?null:""+g.name;if(g.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=Vr(r.nextSibling),r===null)break}return null}function LR(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Vr(r.nextSibling),r===null))return null;return r}function Kp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function zR(r,s){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Vr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var Xp=null;function Gb(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function Yb(r,s,o){switch(s=Jd(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Dc(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Xr(r)}var Ar=new Map,Kb=new Set;function eh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Yi=$.d;$.d={f:UR,r:BR,D:jR,C:HR,L:qR,m:$R,X:GR,S:FR,M:YR};function UR(){var r=Yi.f(),s=Fd();return r||s}function BR(r){var s=fr(r);s!==null&&s.tag===5&&s.type==="form"?g_(s):Yi.r(r)}var Xo=typeof document>"u"?null:document;function Xb(r,s,o){var u=Xo;if(u&&typeof s=="string"&&s){var g=Bt(s);g='link[rel="'+r+'"][href="'+g+'"]',typeof o=="string"&&(g+='[crossorigin="'+o+'"]'),Kb.has(g)||(Kb.add(g),r={rel:r,crossOrigin:o,href:s},u.querySelector(g)===null&&(s=u.createElement("link"),gn(s,"link",r),wt(s),u.head.appendChild(s)))}}function jR(r){Yi.D(r),Xb("dns-prefetch",r,null)}function HR(r,s){Yi.C(r,s),Xb("preconnect",r,s)}function qR(r,s,o){Yi.L(r,s,o);var u=Xo;if(u&&r&&s){var g='link[rel="preload"][as="'+Bt(s)+'"]';s==="image"&&o&&o.imageSrcSet?(g+='[imagesrcset="'+Bt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(g+='[imagesizes="'+Bt(o.imageSizes)+'"]')):g+='[href="'+Bt(r)+'"]';var m=g;switch(s){case"style":m=Qo(r);break;case"script":m=Wo(r)}Ar.has(m)||(r=y({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),Ar.set(m,r),u.querySelector(g)!==null||s==="style"&&u.querySelector(Mc(m))||s==="script"&&u.querySelector(Oc(m))||(s=u.createElement("link"),gn(s,"link",r),wt(s),u.head.appendChild(s)))}}function $R(r,s){Yi.m(r,s);var o=Xo;if(o&&r){var u=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+Bt(u)+'"][href="'+Bt(r)+'"]',m=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Wo(r)}if(!Ar.has(m)&&(r=y({rel:"modulepreload",href:r},s),Ar.set(m,r),o.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Oc(m)))return}u=o.createElement("link"),gn(u,"link",r),wt(u),o.head.appendChild(u)}}}function FR(r,s,o){Yi.S(r,s,o);var u=Xo;if(u&&r){var g=un(u).hoistableStyles,m=Qo(r);s=s||"default";var w=g.get(m);if(!w){var M={loading:0,preload:null};if(w=u.querySelector(Mc(m)))M.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":s},o),(o=Ar.get(m))&&Qp(r,o);var Y=w=u.createElement("link");wt(Y),gn(Y,"link",r),Y._p=new Promise(function(ae,he){Y.onload=ae,Y.onerror=he}),Y.addEventListener("load",function(){M.loading|=1}),Y.addEventListener("error",function(){M.loading|=2}),M.loading|=4,th(w,s,u)}w={type:"stylesheet",instance:w,count:1,state:M},g.set(m,w)}}}function GR(r,s){Yi.X(r,s);var o=Xo;if(o&&r){var u=un(o).hoistableScripts,g=Wo(r),m=u.get(g);m||(m=o.querySelector(Oc(g)),m||(r=y({src:r,async:!0},s),(s=Ar.get(g))&&Wp(r,s),m=o.createElement("script"),wt(m),gn(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(g,m))}}function YR(r,s){Yi.M(r,s);var o=Xo;if(o&&r){var u=un(o).hoistableScripts,g=Wo(r),m=u.get(g);m||(m=o.querySelector(Oc(g)),m||(r=y({src:r,async:!0,type:"module"},s),(s=Ar.get(g))&&Wp(r,s),m=o.createElement("script"),wt(m),gn(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(g,m))}}function Qb(r,s,o,u){var g=(g=de.current)?eh(g):null;if(!g)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Qo(o.href),o=un(g).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Qo(o.href);var m=un(g).hoistableStyles,w=m.get(r);if(w||(g=g.ownerDocument||g,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,w),(m=g.querySelector(Mc(r)))&&!m._p&&(w.instance=m,w.state.loading=5),Ar.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ar.set(r,o),m||KR(g,r,o,w.state))),s&&u===null)throw Error(i(528,""));return w}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Wo(o),o=un(g).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Qo(r){return'href="'+Bt(r)+'"'}function Mc(r){return'link[rel="stylesheet"]['+r+"]"}function Wb(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function KR(r,s,o,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),gn(s,"link",o),wt(s),r.head.appendChild(s))}function Wo(r){return'[src="'+Bt(r)+'"]'}function Oc(r){return"script[async]"+r}function Zb(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+Bt(o.href)+'"]');if(u)return s.instance=u,wt(u),u;var g=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),wt(u),gn(u,"style",g),th(u,o.precedence,r),s.instance=u;case"stylesheet":g=Qo(o.href);var m=r.querySelector(Mc(g));if(m)return s.state.loading|=4,s.instance=m,wt(m),m;u=Wb(o),(g=Ar.get(g))&&Qp(u,g),m=(r.ownerDocument||r).createElement("link"),wt(m);var w=m;return w._p=new Promise(function(M,Y){w.onload=M,w.onerror=Y}),gn(m,"link",u),s.state.loading|=4,th(m,o.precedence,r),s.instance=m;case"script":return m=Wo(o.src),(g=r.querySelector(Oc(m)))?(s.instance=g,wt(g),g):(u=o,(g=Ar.get(m))&&(u=y({},o),Wp(u,g)),r=r.ownerDocument||r,g=r.createElement("script"),wt(g),gn(g,"link",u),r.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,th(u,o.precedence,r));return s.instance}function th(r,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,m=g,w=0;w<u.length;w++){var M=u[w];if(M.dataset.precedence===s)m=M;else if(m!==g)break}m?m.parentNode.insertBefore(r,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function Qp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Wp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var nh=null;function Jb(r,s,o){if(nh===null){var u=new Map,g=nh=new Map;g.set(o,u)}else g=nh,u=g.get(o),u||(u=new Map,g.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),g=0;g<o.length;g++){var m=o[g];if(!(m[Ai]||m[Mt]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var w=m.getAttribute(s)||"";w=r+w;var M=u.get(w);M?M.push(m):u.set(w,[m])}}return u}function eE(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function XR(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function tE(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Pc=null;function QR(){}function WR(r,s,o){if(Pc===null)throw Error(i(475));var u=Pc;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var g=Qo(o.href),m=r.querySelector(Mc(g));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=rh.bind(u),r.then(u,u)),s.state.loading|=4,s.instance=m,wt(m);return}m=r.ownerDocument||r,o=Wb(o),(g=Ar.get(g))&&Qp(o,g),m=m.createElement("link"),wt(m);var w=m;w._p=new Promise(function(M,Y){w.onload=M,w.onerror=Y}),gn(m,"link",o),s.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=rh.bind(u),r.addEventListener("load",s),r.addEventListener("error",s))}}function ZR(){if(Pc===null)throw Error(i(475));var r=Pc;return r.stylesheets&&r.count===0&&Zp(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&Zp(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function rh(){if(this.count--,this.count===0){if(this.stylesheets)Zp(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var ih=null;function Zp(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,ih=new Map,s.forEach(JR,r),ih=null,rh.call(r))}function JR(r,s){if(!(s.state.loading&4)){var o=ih.get(r);if(o)var u=o.get(null);else{o=new Map,ih.set(r,o);for(var g=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<g.length;m++){var w=g[m];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),u=w)}u&&o.set(null,u)}g=s.instance,w=g.getAttribute("data-precedence"),m=o.get(w)||u,m===u&&o.set(null,g),o.set(w,g),this.count++,u=rh.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),m?m.parentNode.insertBefore(g,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(g,r.firstChild)),s.state.loading|=4}}var Vc={$$typeof:G,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function eN(r,s,o,u,g,m,w,M){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gn(0),this.hiddenUpdates=Gn(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=m,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function nE(r,s,o,u,g,m,w,M,Y,ae,he,pe){return r=new eN(r,s,o,w,M,Y,ae,pe),s=1,m===!0&&(s|=24),m=Wn(3,null,null,s),r.current=m,m.stateNode=r,s=Mg(),s.refCount++,r.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:s},Lg(m),r}function rE(r){return r?(r=No,r):No}function iE(r,s,o,u,g,m){g=rE(g),u.context===null?u.context=g:u.pendingContext=g,u=fs(s),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=gs(r,u,s),o!==null&&(nr(o,r,s),hc(o,r,s))}function sE(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function Jp(r,s){sE(r,s),(r=r.alternate)&&sE(r,s)}function aE(r){if(r.tag===13){var s=Ro(r,67108864);s!==null&&nr(s,r,67108864),Jp(r,67108864)}}var sh=!0;function tN(r,s,o,u){var g=k.T;k.T=null;var m=$.p;try{$.p=2,em(r,s,o,u)}finally{$.p=m,k.T=g}}function nN(r,s,o,u){var g=k.T;k.T=null;var m=$.p;try{$.p=8,em(r,s,o,u)}finally{$.p=m,k.T=g}}function em(r,s,o,u){if(sh){var g=tm(u);if(g===null)jp(r,s,u,ah,o),lE(r,u);else if(iN(g,r,s,o,u))u.stopPropagation();else if(lE(r,u),s&4&&-1<rN.indexOf(r)){for(;g!==null;){var m=fr(g);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var w=en(m.pendingLanes);if(w!==0){var M=m;for(M.pendingLanes|=2,M.entangledLanes|=2;w;){var Y=1<<31-Et(w);M.entanglements[1]|=Y,w&=~Y}ui(m),(ct&6)===0&&(qd=ze()+500,Ic(0))}}break;case 13:M=Ro(m,2),M!==null&&nr(M,m,2),Fd(),Jp(m,2)}if(m=tm(u),m===null&&jp(r,s,u,ah,o),m===g)break;g=m}g!==null&&u.stopPropagation()}else jp(r,s,u,null,o)}}function tm(r){return r=yr(r),nm(r)}var ah=null;function nm(r){if(ah=null,r=hr(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=c(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return ah=r,null}function oE(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ee()){case At:return 2;case vn:return 8;case Gt:case Fn:return 32;case An:return 268435456;default:return 32}default:return 32}}var rm=!1,Rs=null,Ns=null,Is=null,Lc=new Map,zc=new Map,Cs=[],rN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lE(r,s){switch(r){case"focusin":case"focusout":Rs=null;break;case"dragenter":case"dragleave":Ns=null;break;case"mouseover":case"mouseout":Is=null;break;case"pointerover":case"pointerout":Lc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":zc.delete(s.pointerId)}}function Uc(r,s,o,u,g,m){return r===null||r.nativeEvent!==m?(r={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[g]},s!==null&&(s=fr(s),s!==null&&aE(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),r)}function iN(r,s,o,u,g){switch(s){case"focusin":return Rs=Uc(Rs,r,s,o,u,g),!0;case"dragenter":return Ns=Uc(Ns,r,s,o,u,g),!0;case"mouseover":return Is=Uc(Is,r,s,o,u,g),!0;case"pointerover":var m=g.pointerId;return Lc.set(m,Uc(Lc.get(m)||null,r,s,o,u,g)),!0;case"gotpointercapture":return m=g.pointerId,zc.set(m,Uc(zc.get(m)||null,r,s,o,u,g)),!0}return!1}function cE(r){var s=hr(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){r.blockedOn=s,oo(r.priority,function(){if(o.tag===13){var u=tr();u=Gr(u);var g=Ro(o,u);g!==null&&nr(g,o,u),Jp(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function oh(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=tm(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Ii=u,o.target.dispatchEvent(u),Ii=null}else return s=fr(o),s!==null&&aE(s),r.blockedOn=o,!1;s.shift()}return!0}function uE(r,s,o){oh(r)&&o.delete(s)}function sN(){rm=!1,Rs!==null&&oh(Rs)&&(Rs=null),Ns!==null&&oh(Ns)&&(Ns=null),Is!==null&&oh(Is)&&(Is=null),Lc.forEach(uE),zc.forEach(uE)}function lh(r,s){r.blockedOn===s&&(r.blockedOn=null,rm||(rm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,sN)))}var ch=null;function dE(r){ch!==r&&(ch=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ch===r&&(ch=null);for(var s=0;s<r.length;s+=3){var o=r[s],u=r[s+1],g=r[s+2];if(typeof u!="function"){if(nm(u||o)===null)continue;break}var m=fr(o);m!==null&&(r.splice(s,3),s-=3,np(m,{pending:!0,data:g,method:o.method,action:u},u,g))}}))}function Bc(r){function s(Y){return lh(Y,r)}Rs!==null&&lh(Rs,r),Ns!==null&&lh(Ns,r),Is!==null&&lh(Is,r),Lc.forEach(s),zc.forEach(s);for(var o=0;o<Cs.length;o++){var u=Cs[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Cs.length&&(o=Cs[0],o.blockedOn===null);)cE(o),o.blockedOn===null&&Cs.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var g=o[u],m=o[u+1],w=g[Rt]||null;if(typeof m=="function")w||dE(o);else if(w){var M=null;if(m&&m.hasAttribute("formAction")){if(g=m,w=m[Rt]||null)M=w.formAction;else if(nm(g)!==null)continue}else M=w.action;typeof M=="function"?o[u+1]=M:(o.splice(u,3),u-=3),dE(o)}}}function im(r){this._internalRoot=r}uh.prototype.render=im.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=tr();iE(o,u,r,s,null,null)},uh.prototype.unmount=im.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;iE(r.current,2,null,r,null,null),Fd(),s[Vn]=null}};function uh(r){this._internalRoot=r}uh.prototype.unstable_scheduleHydration=function(r){if(r){var s=Yr();r={blockedOn:null,target:r,priority:s};for(var o=0;o<Cs.length&&s!==0&&s<Cs[o].priority;o++);Cs.splice(o,0,r),o===0&&cE(r)}};var hE=e.version;if(hE!=="19.1.0")throw Error(i(527,hE,"19.1.0"));$.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(s),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var aN={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dh.isDisabled&&dh.supportsFiber)try{at=dh.inject(aN),Fe=dh}catch{}}return Hc.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,u="",g=N_,m=I_,w=C_,M=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(M=s.unstable_transitionCallbacks)),s=nE(r,1,!1,null,null,o,u,g,m,w,M,null),r[Vn]=s.current,Bp(r),new im(s)},Hc.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var u=!1,g="",m=N_,w=I_,M=C_,Y=null,ae=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(M=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(Y=o.unstable_transitionCallbacks),o.formState!==void 0&&(ae=o.formState)),s=nE(r,1,!0,s,o??null,u,g,m,w,M,Y,ae),s.context=rE(null),o=s.current,u=tr(),u=Gr(u),g=fs(u),g.callback=null,gs(o,g,u),o=u,s.current.lanes=o,ur(s,o),ui(s),r[Vn]=s.current,Bp(r),new uh(s)},Hc.version="19.1.0",Hc}var wE;function vN(){if(wE)return om.exports;wE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),om.exports=yN(),om.exports}var _N=vN();function Pn(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,i;n<t.length;n++)(i=Pn(t[n]))!==""&&(e+=(e&&" ")+i);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var dm={exports:{}},hm={},fm={exports:{}},gm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xE;function bN(){if(xE)return gm;xE=1;var t=Ou();function e(v,b){return v===b&&(v!==0||1/v===1/b)||v!==v&&b!==b}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,a=t.useEffect,l=t.useLayoutEffect,c=t.useDebugValue;function d(v,b){var x=b(),I=i({inst:{value:x,getSnapshot:b}}),P=I[0].inst,O=I[1];return l(function(){P.value=x,P.getSnapshot=b,f(P)&&O({inst:P})},[v,x,b]),a(function(){return f(P)&&O({inst:P}),v(function(){f(P)&&O({inst:P})})},[v]),c(x),x}function f(v){var b=v.getSnapshot;v=v.value;try{var x=b();return!n(v,x)}catch{return!0}}function p(v,b){return b()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:d;return gm.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:y,gm}var TE;function EN(){return TE||(TE=1,fm.exports=bN()),fm.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SE;function wN(){if(SE)return hm;SE=1;var t=Ou(),e=EN();function n(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var i=typeof Object.is=="function"?Object.is:n,a=e.useSyncExternalStore,l=t.useRef,c=t.useEffect,d=t.useMemo,f=t.useDebugValue;return hm.useSyncExternalStoreWithSelector=function(p,y,v,b,x){var I=l(null);if(I.current===null){var P={hasValue:!1,value:null};I.current=P}else P=I.current;I=d(function(){function B(X){if(!q){if(q=!0,G=X,X=b(X),x!==void 0&&P.hasValue){var A=P.value;if(x(A,X))return j=A}return j=X}if(A=j,i(G,X))return A;var T=b(X);return x!==void 0&&x(A,T)?(G=X,A):(G=X,j=T)}var q=!1,G,j,W=v===void 0?null:v;return[function(){return B(y())},W===null?void 0:function(){return B(W())}]},[y,v,b,x]);var O=a(p,I[0],I[1]);return c(function(){P.hasValue=!0,P.value=O},[O]),f(O),O},hm}var AE;function xN(){return AE||(AE=1,dm.exports=wN()),dm.exports}var TN=xN();const SN=O0(TN),AN={},RE=t=>{let e;const n=new Set,i=(y,v)=>{const b=typeof y=="function"?y(e):y;if(!Object.is(b,e)){const x=e;e=v??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(I=>I(e,x))}},a=()=>e,f={setState:i,getState:a,getInitialState:()=>p,subscribe:y=>(n.add(y),()=>n.delete(y)),destroy:()=>{(AN?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},p=e=t(i,a,f);return f},RN=t=>t?RE(t):RE,{useDebugValue:NN}=fe,{useSyncExternalStoreWithSelector:IN}=SN,CN=t=>t;function g1(t,e=CN,n){const i=IN(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return NN(i),i}const NE=(t,e)=>{const n=RN(t),i=(a,l=e)=>g1(n,a,l);return Object.assign(i,n),i},kN=(t,e)=>t?NE(t,e):NE;function Tn(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[i,a]of t)if(!Object.is(a,e.get(i)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(e,i)||!Object.is(t[i],e[i]))return!1;return!0}var DN={value:()=>{}};function Cf(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Oh(n)}function Oh(t){this._=t}function MN(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",a=n.indexOf(".");if(a>=0&&(i=n.slice(a+1),n=n.slice(0,a)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Oh.prototype=Cf.prototype={constructor:Oh,on:function(t,e){var n=this._,i=MN(t+"",n),a,l=-1,c=i.length;if(arguments.length<2){for(;++l<c;)if((a=(t=i[l]).type)&&(a=ON(n[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++l<c;)if(a=(t=i[l]).type)n[a]=IE(n[a],t.name,e);else if(e==null)for(a in n)n[a]=IE(n[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Oh(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var n=new Array(a),i=0,a,l;i<a;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(l=this._[t],i=0,a=l.length;i<a;++i)l[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],a=0,l=i.length;a<l;++a)i[a].value.apply(e,n)}};function ON(t,e){for(var n=0,i=t.length,a;n<i;++n)if((a=t[n]).name===e)return a.value}function IE(t,e,n){for(var i=0,a=t.length;i<a;++i)if(t[i].name===e){t[i]=DN,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Hm="http://www.w3.org/1999/xhtml";const CE={svg:"http://www.w3.org/2000/svg",xhtml:Hm,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function kf(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),CE.hasOwnProperty(e)?{space:CE[e],local:t}:t}function PN(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Hm&&e.documentElement.namespaceURI===Hm?e.createElement(t):e.createElementNS(n,t)}}function VN(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function p1(t){var e=kf(t);return(e.local?VN:PN)(e)}function LN(){}function P0(t){return t==null?LN:function(){return this.querySelector(t)}}function zN(t){typeof t!="function"&&(t=P0(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var l=e[a],c=l.length,d=i[a]=new Array(c),f,p,y=0;y<c;++y)(f=l[y])&&(p=t.call(f,f.__data__,y,l))&&("__data__"in f&&(p.__data__=f.__data__),d[y]=p);return new lr(i,this._parents)}function UN(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function BN(){return[]}function m1(t){return t==null?BN:function(){return this.querySelectorAll(t)}}function jN(t){return function(){return UN(t.apply(this,arguments))}}function HN(t){typeof t=="function"?t=jN(t):t=m1(t);for(var e=this._groups,n=e.length,i=[],a=[],l=0;l<n;++l)for(var c=e[l],d=c.length,f,p=0;p<d;++p)(f=c[p])&&(i.push(t.call(f,f.__data__,p,c)),a.push(f));return new lr(i,a)}function y1(t){return function(){return this.matches(t)}}function v1(t){return function(e){return e.matches(t)}}var qN=Array.prototype.find;function $N(t){return function(){return qN.call(this.children,t)}}function FN(){return this.firstElementChild}function GN(t){return this.select(t==null?FN:$N(typeof t=="function"?t:v1(t)))}var YN=Array.prototype.filter;function KN(){return Array.from(this.children)}function XN(t){return function(){return YN.call(this.children,t)}}function QN(t){return this.selectAll(t==null?KN:XN(typeof t=="function"?t:v1(t)))}function WN(t){typeof t!="function"&&(t=y1(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var l=e[a],c=l.length,d=i[a]=[],f,p=0;p<c;++p)(f=l[p])&&t.call(f,f.__data__,p,l)&&d.push(f);return new lr(i,this._parents)}function _1(t){return new Array(t.length)}function ZN(){return new lr(this._enter||this._groups.map(_1),this._parents)}function Wh(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Wh.prototype={constructor:Wh,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function JN(t){return function(){return t}}function eI(t,e,n,i,a,l){for(var c=0,d,f=e.length,p=l.length;c<p;++c)(d=e[c])?(d.__data__=l[c],i[c]=d):n[c]=new Wh(t,l[c]);for(;c<f;++c)(d=e[c])&&(a[c]=d)}function tI(t,e,n,i,a,l,c){var d,f,p=new Map,y=e.length,v=l.length,b=new Array(y),x;for(d=0;d<y;++d)(f=e[d])&&(b[d]=x=c.call(f,f.__data__,d,e)+"",p.has(x)?a[d]=f:p.set(x,f));for(d=0;d<v;++d)x=c.call(t,l[d],d,l)+"",(f=p.get(x))?(i[d]=f,f.__data__=l[d],p.delete(x)):n[d]=new Wh(t,l[d]);for(d=0;d<y;++d)(f=e[d])&&p.get(b[d])===f&&(a[d]=f)}function nI(t){return t.__data__}function rI(t,e){if(!arguments.length)return Array.from(this,nI);var n=e?tI:eI,i=this._parents,a=this._groups;typeof t!="function"&&(t=JN(t));for(var l=a.length,c=new Array(l),d=new Array(l),f=new Array(l),p=0;p<l;++p){var y=i[p],v=a[p],b=v.length,x=iI(t.call(y,y&&y.__data__,p,i)),I=x.length,P=d[p]=new Array(I),O=c[p]=new Array(I),B=f[p]=new Array(b);n(y,v,P,O,B,x,e);for(var q=0,G=0,j,W;q<I;++q)if(j=P[q]){for(q>=G&&(G=q+1);!(W=O[G])&&++G<I;);j._next=W||null}}return c=new lr(c,i),c._enter=d,c._exit=f,c}function iI(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function sI(){return new lr(this._exit||this._groups.map(_1),this._parents)}function aI(t,e,n){var i=this.enter(),a=this,l=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),n==null?l.remove():n(l),i&&a?i.merge(a).order():a}function oI(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,a=n.length,l=i.length,c=Math.min(a,l),d=new Array(a),f=0;f<c;++f)for(var p=n[f],y=i[f],v=p.length,b=d[f]=new Array(v),x,I=0;I<v;++I)(x=p[I]||y[I])&&(b[I]=x);for(;f<a;++f)d[f]=n[f];return new lr(d,this._parents)}function lI(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],a=i.length-1,l=i[a],c;--a>=0;)(c=i[a])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function cI(t){t||(t=uI);function e(v,b){return v&&b?t(v.__data__,b.__data__):!v-!b}for(var n=this._groups,i=n.length,a=new Array(i),l=0;l<i;++l){for(var c=n[l],d=c.length,f=a[l]=new Array(d),p,y=0;y<d;++y)(p=c[y])&&(f[y]=p);f.sort(e)}return new lr(a,this._parents).order()}function uI(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function dI(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function hI(){return Array.from(this)}function fI(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],a=0,l=i.length;a<l;++a){var c=i[a];if(c)return c}return null}function gI(){let t=0;for(const e of this)++t;return t}function pI(){return!this.node()}function mI(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var a=e[n],l=0,c=a.length,d;l<c;++l)(d=a[l])&&t.call(d,d.__data__,l,a);return this}function yI(t){return function(){this.removeAttribute(t)}}function vI(t){return function(){this.removeAttributeNS(t.space,t.local)}}function _I(t,e){return function(){this.setAttribute(t,e)}}function bI(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function EI(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function wI(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function xI(t,e){var n=kf(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?vI:yI:typeof e=="function"?n.local?wI:EI:n.local?bI:_I)(n,e))}function b1(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function TI(t){return function(){this.style.removeProperty(t)}}function SI(t,e,n){return function(){this.style.setProperty(t,e,n)}}function AI(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function RI(t,e,n){return arguments.length>1?this.each((e==null?TI:typeof e=="function"?AI:SI)(t,e,n??"")):xl(this.node(),t)}function xl(t,e){return t.style.getPropertyValue(e)||b1(t).getComputedStyle(t,null).getPropertyValue(e)}function NI(t){return function(){delete this[t]}}function II(t,e){return function(){this[t]=e}}function CI(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function kI(t,e){return arguments.length>1?this.each((e==null?NI:typeof e=="function"?CI:II)(t,e)):this.node()[t]}function E1(t){return t.trim().split(/^|\s+/)}function V0(t){return t.classList||new w1(t)}function w1(t){this._node=t,this._names=E1(t.getAttribute("class")||"")}w1.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function x1(t,e){for(var n=V0(t),i=-1,a=e.length;++i<a;)n.add(e[i])}function T1(t,e){for(var n=V0(t),i=-1,a=e.length;++i<a;)n.remove(e[i])}function DI(t){return function(){x1(this,t)}}function MI(t){return function(){T1(this,t)}}function OI(t,e){return function(){(e.apply(this,arguments)?x1:T1)(this,t)}}function PI(t,e){var n=E1(t+"");if(arguments.length<2){for(var i=V0(this.node()),a=-1,l=n.length;++a<l;)if(!i.contains(n[a]))return!1;return!0}return this.each((typeof e=="function"?OI:e?DI:MI)(n,e))}function VI(){this.textContent=""}function LI(t){return function(){this.textContent=t}}function zI(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function UI(t){return arguments.length?this.each(t==null?VI:(typeof t=="function"?zI:LI)(t)):this.node().textContent}function BI(){this.innerHTML=""}function jI(t){return function(){this.innerHTML=t}}function HI(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function qI(t){return arguments.length?this.each(t==null?BI:(typeof t=="function"?HI:jI)(t)):this.node().innerHTML}function $I(){this.nextSibling&&this.parentNode.appendChild(this)}function FI(){return this.each($I)}function GI(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function YI(){return this.each(GI)}function KI(t){var e=typeof t=="function"?t:p1(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function XI(){return null}function QI(t,e){var n=typeof t=="function"?t:p1(t),i=e==null?XI:typeof e=="function"?e:P0(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function WI(){var t=this.parentNode;t&&t.removeChild(this)}function ZI(){return this.each(WI)}function JI(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function eC(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function tC(t){return this.select(t?eC:JI)}function nC(t){return arguments.length?this.property("__data__",t):this.node().__data__}function rC(t){return function(e){t.call(this,e,this.__data__)}}function iC(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function sC(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,a=e.length,l;n<a;++n)l=e[n],(!t.type||l.type===t.type)&&l.name===t.name?this.removeEventListener(l.type,l.listener,l.options):e[++i]=l;++i?e.length=i:delete this.__on}}}function aC(t,e,n){return function(){var i=this.__on,a,l=rC(e);if(i){for(var c=0,d=i.length;c<d;++c)if((a=i[c]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=n),a.value=e;return}}this.addEventListener(t.type,l,n),a={type:t.type,name:t.name,value:e,listener:l,options:n},i?i.push(a):this.__on=[a]}}function oC(t,e,n){var i=iC(t+""),a,l=i.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var f=0,p=d.length,y;f<p;++f)for(a=0,y=d[f];a<l;++a)if((c=i[a]).type===y.type&&c.name===y.name)return y.value}return}for(d=e?aC:sC,a=0;a<l;++a)this.each(d(i[a],e,n));return this}function S1(t,e,n){var i=b1(t),a=i.CustomEvent;typeof a=="function"?a=new a(e,n):(a=i.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function lC(t,e){return function(){return S1(this,t,e)}}function cC(t,e){return function(){return S1(this,t,e.apply(this,arguments))}}function uC(t,e){return this.each((typeof e=="function"?cC:lC)(t,e))}function*dC(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],a=0,l=i.length,c;a<l;++a)(c=i[a])&&(yield c)}var A1=[null];function lr(t,e){this._groups=t,this._parents=e}function Pu(){return new lr([[document.documentElement]],A1)}function hC(){return this}lr.prototype=Pu.prototype={constructor:lr,select:zN,selectAll:HN,selectChild:GN,selectChildren:QN,filter:WN,data:rI,enter:ZN,exit:sI,join:aI,merge:oI,selection:hC,order:lI,sort:cI,call:dI,nodes:hI,node:fI,size:gI,empty:pI,each:mI,attr:xI,style:RI,property:kI,classed:PI,text:UI,html:qI,raise:FI,lower:YI,append:KI,insert:QI,remove:ZI,clone:tC,datum:nC,on:oC,dispatch:uC,[Symbol.iterator]:dC};function Lr(t){return typeof t=="string"?new lr([[document.querySelector(t)]],[document.documentElement]):new lr([[t]],A1)}function fC(t){let e;for(;e=t.sourceEvent;)t=e;return t}function fi(t,e){if(t=fC(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}const gC={passive:!1},gu={capture:!0,passive:!1};function pm(t){t.stopImmediatePropagation()}function fl(t){t.preventDefault(),t.stopImmediatePropagation()}function R1(t){var e=t.document.documentElement,n=Lr(t).on("dragstart.drag",fl,gu);"onselectstart"in e?n.on("selectstart.drag",fl,gu):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function N1(t,e){var n=t.document.documentElement,i=Lr(t).on("dragstart.drag",null);e&&(i.on("click.drag",fl,gu),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const hh=t=>()=>t;function qm(t,{sourceEvent:e,subject:n,target:i,identifier:a,active:l,x:c,y:d,dx:f,dy:p,dispatch:y}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:y}})}qm.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function pC(t){return!t.ctrlKey&&!t.button}function mC(){return this.parentNode}function yC(t,e){return e??{x:t.x,y:t.y}}function vC(){return navigator.maxTouchPoints||"ontouchstart"in this}function _C(){var t=pC,e=mC,n=yC,i=vC,a={},l=Cf("start","drag","end"),c=0,d,f,p,y,v=0;function b(j){j.on("mousedown.drag",x).filter(i).on("touchstart.drag",O).on("touchmove.drag",B,gC).on("touchend.drag touchcancel.drag",q).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(j,W){if(!(y||!t.call(this,j,W))){var X=G(this,e.call(this,j,W),j,W,"mouse");X&&(Lr(j.view).on("mousemove.drag",I,gu).on("mouseup.drag",P,gu),R1(j.view),pm(j),p=!1,d=j.clientX,f=j.clientY,X("start",j))}}function I(j){if(fl(j),!p){var W=j.clientX-d,X=j.clientY-f;p=W*W+X*X>v}a.mouse("drag",j)}function P(j){Lr(j.view).on("mousemove.drag mouseup.drag",null),N1(j.view,p),fl(j),a.mouse("end",j)}function O(j,W){if(t.call(this,j,W)){var X=j.changedTouches,A=e.call(this,j,W),T=X.length,N,U;for(N=0;N<T;++N)(U=G(this,A,j,W,X[N].identifier,X[N]))&&(pm(j),U("start",j,X[N]))}}function B(j){var W=j.changedTouches,X=W.length,A,T;for(A=0;A<X;++A)(T=a[W[A].identifier])&&(fl(j),T("drag",j,W[A]))}function q(j){var W=j.changedTouches,X=W.length,A,T;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),A=0;A<X;++A)(T=a[W[A].identifier])&&(pm(j),T("end",j,W[A]))}function G(j,W,X,A,T,N){var U=l.copy(),L=fi(N||X,W),C,S,D;if((D=n.call(j,new qm("beforestart",{sourceEvent:X,target:b,identifier:T,active:c,x:L[0],y:L[1],dx:0,dy:0,dispatch:U}),A))!=null)return C=D.x-L[0]||0,S=D.y-L[1]||0,function H(k,$,Z){var Q=L,V;switch(k){case"start":a[T]=H,V=c++;break;case"end":delete a[T],--c;case"drag":L=fi(Z||$,W),V=c;break}U.call(k,j,new qm(k,{sourceEvent:$,subject:D,target:b,identifier:T,active:V,x:L[0]+C,y:L[1]+S,dx:L[0]-Q[0],dy:L[1]-Q[1],dispatch:U}),A)}}return b.filter=function(j){return arguments.length?(t=typeof j=="function"?j:hh(!!j),b):t},b.container=function(j){return arguments.length?(e=typeof j=="function"?j:hh(j),b):e},b.subject=function(j){return arguments.length?(n=typeof j=="function"?j:hh(j),b):n},b.touchable=function(j){return arguments.length?(i=typeof j=="function"?j:hh(!!j),b):i},b.on=function(){var j=l.on.apply(l,arguments);return j===l?b:j},b.clickDistance=function(j){return arguments.length?(v=(j=+j)*j,b):Math.sqrt(v)},b}function L0(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function I1(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Vu(){}var pu=.7,Zh=1/pu,gl="\\s*([+-]?\\d+)\\s*",mu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",pi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bC=/^#([0-9a-f]{3,8})$/,EC=new RegExp(`^rgb\\(${gl},${gl},${gl}\\)$`),wC=new RegExp(`^rgb\\(${pi},${pi},${pi}\\)$`),xC=new RegExp(`^rgba\\(${gl},${gl},${gl},${mu}\\)$`),TC=new RegExp(`^rgba\\(${pi},${pi},${pi},${mu}\\)$`),SC=new RegExp(`^hsl\\(${mu},${pi},${pi}\\)$`),AC=new RegExp(`^hsla\\(${mu},${pi},${pi},${mu}\\)$`),kE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};L0(Vu,yu,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:DE,formatHex:DE,formatHex8:RC,formatHsl:NC,formatRgb:ME,toString:ME});function DE(){return this.rgb().formatHex()}function RC(){return this.rgb().formatHex8()}function NC(){return C1(this).formatHsl()}function ME(){return this.rgb().formatRgb()}function yu(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=bC.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?OE(e):n===3?new qn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?fh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?fh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=EC.exec(t))?new qn(e[1],e[2],e[3],1):(e=wC.exec(t))?new qn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=xC.exec(t))?fh(e[1],e[2],e[3],e[4]):(e=TC.exec(t))?fh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=SC.exec(t))?LE(e[1],e[2]/100,e[3]/100,1):(e=AC.exec(t))?LE(e[1],e[2]/100,e[3]/100,e[4]):kE.hasOwnProperty(t)?OE(kE[t]):t==="transparent"?new qn(NaN,NaN,NaN,0):null}function OE(t){return new qn(t>>16&255,t>>8&255,t&255,1)}function fh(t,e,n,i){return i<=0&&(t=e=n=NaN),new qn(t,e,n,i)}function IC(t){return t instanceof Vu||(t=yu(t)),t?(t=t.rgb(),new qn(t.r,t.g,t.b,t.opacity)):new qn}function $m(t,e,n,i){return arguments.length===1?IC(t):new qn(t,e,n,i??1)}function qn(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}L0(qn,$m,I1(Vu,{brighter(t){return t=t==null?Zh:Math.pow(Zh,t),new qn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?pu:Math.pow(pu,t),new qn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new qn(Fa(this.r),Fa(this.g),Fa(this.b),Jh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:PE,formatHex:PE,formatHex8:CC,formatRgb:VE,toString:VE}));function PE(){return`#${Ha(this.r)}${Ha(this.g)}${Ha(this.b)}`}function CC(){return`#${Ha(this.r)}${Ha(this.g)}${Ha(this.b)}${Ha((isNaN(this.opacity)?1:this.opacity)*255)}`}function VE(){const t=Jh(this.opacity);return`${t===1?"rgb(":"rgba("}${Fa(this.r)}, ${Fa(this.g)}, ${Fa(this.b)}${t===1?")":`, ${t})`}`}function Jh(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Fa(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ha(t){return t=Fa(t),(t<16?"0":"")+t.toString(16)}function LE(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new zr(t,e,n,i)}function C1(t){if(t instanceof zr)return new zr(t.h,t.s,t.l,t.opacity);if(t instanceof Vu||(t=yu(t)),!t)return new zr;if(t instanceof zr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,a=Math.min(e,n,i),l=Math.max(e,n,i),c=NaN,d=l-a,f=(l+a)/2;return d?(e===l?c=(n-i)/d+(n<i)*6:n===l?c=(i-e)/d+2:c=(e-n)/d+4,d/=f<.5?l+a:2-l-a,c*=60):d=f>0&&f<1?0:c,new zr(c,d,f,t.opacity)}function kC(t,e,n,i){return arguments.length===1?C1(t):new zr(t,e,n,i??1)}function zr(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}L0(zr,kC,I1(Vu,{brighter(t){return t=t==null?Zh:Math.pow(Zh,t),new zr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?pu:Math.pow(pu,t),new zr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,a=2*n-i;return new qn(mm(t>=240?t-240:t+120,a,i),mm(t,a,i),mm(t<120?t+240:t-120,a,i),this.opacity)},clamp(){return new zr(zE(this.h),gh(this.s),gh(this.l),Jh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Jh(this.opacity);return`${t===1?"hsl(":"hsla("}${zE(this.h)}, ${gh(this.s)*100}%, ${gh(this.l)*100}%${t===1?")":`, ${t})`}`}}));function zE(t){return t=(t||0)%360,t<0?t+360:t}function gh(t){return Math.max(0,Math.min(1,t||0))}function mm(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const k1=t=>()=>t;function DC(t,e){return function(n){return t+n*e}}function MC(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function OC(t){return(t=+t)==1?D1:function(e,n){return n-e?MC(e,n,t):k1(isNaN(e)?n:e)}}function D1(t,e){var n=e-t;return n?DC(t,n):k1(isNaN(t)?e:t)}const UE=function t(e){var n=OC(e);function i(a,l){var c=n((a=$m(a)).r,(l=$m(l)).r),d=n(a.g,l.g),f=n(a.b,l.b),p=D1(a.opacity,l.opacity);return function(y){return a.r=c(y),a.g=d(y),a.b=f(y),a.opacity=p(y),a+""}}return i.gamma=t,i}(1);function Os(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Fm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ym=new RegExp(Fm.source,"g");function PC(t){return function(){return t}}function VC(t){return function(e){return t(e)+""}}function LC(t,e){var n=Fm.lastIndex=ym.lastIndex=0,i,a,l,c=-1,d=[],f=[];for(t=t+"",e=e+"";(i=Fm.exec(t))&&(a=ym.exec(e));)(l=a.index)>n&&(l=e.slice(n,l),d[c]?d[c]+=l:d[++c]=l),(i=i[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,f.push({i:c,x:Os(i,a)})),n=ym.lastIndex;return n<e.length&&(l=e.slice(n),d[c]?d[c]+=l:d[++c]=l),d.length<2?f[0]?VC(f[0].x):PC(e):(e=f.length,function(p){for(var y=0,v;y<e;++y)d[(v=f[y]).i]=v.x(p);return d.join("")})}var BE=180/Math.PI,Gm={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function M1(t,e,n,i,a,l){var c,d,f;return(c=Math.sqrt(t*t+e*e))&&(t/=c,e/=c),(f=t*n+e*i)&&(n-=t*f,i-=e*f),(d=Math.sqrt(n*n+i*i))&&(n/=d,i/=d,f/=d),t*i<e*n&&(t=-t,e=-e,f=-f,c=-c),{translateX:a,translateY:l,rotate:Math.atan2(e,t)*BE,skewX:Math.atan(f)*BE,scaleX:c,scaleY:d}}var ph;function zC(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Gm:M1(e.a,e.b,e.c,e.d,e.e,e.f)}function UC(t){return t==null||(ph||(ph=document.createElementNS("http://www.w3.org/2000/svg","g")),ph.setAttribute("transform",t),!(t=ph.transform.baseVal.consolidate()))?Gm:(t=t.matrix,M1(t.a,t.b,t.c,t.d,t.e,t.f))}function O1(t,e,n,i){function a(p){return p.length?p.pop()+" ":""}function l(p,y,v,b,x,I){if(p!==v||y!==b){var P=x.push("translate(",null,e,null,n);I.push({i:P-4,x:Os(p,v)},{i:P-2,x:Os(y,b)})}else(v||b)&&x.push("translate("+v+e+b+n)}function c(p,y,v,b){p!==y?(p-y>180?y+=360:y-p>180&&(p+=360),b.push({i:v.push(a(v)+"rotate(",null,i)-2,x:Os(p,y)})):y&&v.push(a(v)+"rotate("+y+i)}function d(p,y,v,b){p!==y?b.push({i:v.push(a(v)+"skewX(",null,i)-2,x:Os(p,y)}):y&&v.push(a(v)+"skewX("+y+i)}function f(p,y,v,b,x,I){if(p!==v||y!==b){var P=x.push(a(x)+"scale(",null,",",null,")");I.push({i:P-4,x:Os(p,v)},{i:P-2,x:Os(y,b)})}else(v!==1||b!==1)&&x.push(a(x)+"scale("+v+","+b+")")}return function(p,y){var v=[],b=[];return p=t(p),y=t(y),l(p.translateX,p.translateY,y.translateX,y.translateY,v,b),c(p.rotate,y.rotate,v,b),d(p.skewX,y.skewX,v,b),f(p.scaleX,p.scaleY,y.scaleX,y.scaleY,v,b),p=y=null,function(x){for(var I=-1,P=b.length,O;++I<P;)v[(O=b[I]).i]=O.x(x);return v.join("")}}}var BC=O1(zC,"px, ","px)","deg)"),jC=O1(UC,", ",")",")"),HC=1e-12;function jE(t){return((t=Math.exp(t))+1/t)/2}function qC(t){return((t=Math.exp(t))-1/t)/2}function $C(t){return((t=Math.exp(2*t))-1)/(t+1)}const FC=function t(e,n,i){function a(l,c){var d=l[0],f=l[1],p=l[2],y=c[0],v=c[1],b=c[2],x=y-d,I=v-f,P=x*x+I*I,O,B;if(P<HC)B=Math.log(b/p)/e,O=function(A){return[d+A*x,f+A*I,p*Math.exp(e*A*B)]};else{var q=Math.sqrt(P),G=(b*b-p*p+i*P)/(2*p*n*q),j=(b*b-p*p-i*P)/(2*b*n*q),W=Math.log(Math.sqrt(G*G+1)-G),X=Math.log(Math.sqrt(j*j+1)-j);B=(X-W)/e,O=function(A){var T=A*B,N=jE(W),U=p/(n*q)*(N*$C(e*T+W)-qC(W));return[d+U*x,f+U*I,p*N/jE(e*T+W)]}}return O.duration=B*1e3*e/Math.SQRT2,O}return a.rho=function(l){var c=Math.max(.001,+l),d=c*c,f=d*d;return t(c,d,f)},a}(Math.SQRT2,2,4);var Tl=0,Wc=0,qc=0,P1=1e3,ef,Zc,tf=0,Ya=0,Df=0,vu=typeof performance=="object"&&performance.now?performance:Date,V1=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function z0(){return Ya||(V1(GC),Ya=vu.now()+Df)}function GC(){Ya=0}function nf(){this._call=this._time=this._next=null}nf.prototype=L1.prototype={constructor:nf,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?z0():+n)+(e==null?0:+e),!this._next&&Zc!==this&&(Zc?Zc._next=this:ef=this,Zc=this),this._call=t,this._time=n,Ym()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ym())}};function L1(t,e,n){var i=new nf;return i.restart(t,e,n),i}function YC(){z0(),++Tl;for(var t=ef,e;t;)(e=Ya-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Tl}function HE(){Ya=(tf=vu.now())+Df,Tl=Wc=0;try{YC()}finally{Tl=0,XC(),Ya=0}}function KC(){var t=vu.now(),e=t-tf;e>P1&&(Df-=e,tf=t)}function XC(){for(var t,e=ef,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:ef=n);Zc=t,Ym(i)}function Ym(t){if(!Tl){Wc&&(Wc=clearTimeout(Wc));var e=t-Ya;e>24?(t<1/0&&(Wc=setTimeout(HE,t-vu.now()-Df)),qc&&(qc=clearInterval(qc))):(qc||(tf=vu.now(),qc=setInterval(KC,P1)),Tl=1,V1(HE))}}function qE(t,e,n){var i=new nf;return e=e==null?0:+e,i.restart(a=>{i.stop(),t(a+e)},e,n),i}var QC=Cf("start","end","cancel","interrupt"),WC=[],z1=0,$E=1,Km=2,Ph=3,FE=4,Xm=5,Vh=6;function Mf(t,e,n,i,a,l){var c=t.__transition;if(!c)t.__transition={};else if(n in c)return;ZC(t,n,{name:e,index:i,group:a,on:QC,tween:WC,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:z1})}function U0(t,e){var n=$r(t,e);if(n.state>z1)throw new Error("too late; already scheduled");return n}function wi(t,e){var n=$r(t,e);if(n.state>Ph)throw new Error("too late; already running");return n}function $r(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function ZC(t,e,n){var i=t.__transition,a;i[e]=n,n.timer=L1(l,0,n.time);function l(p){n.state=$E,n.timer.restart(c,n.delay,n.time),n.delay<=p&&c(p-n.delay)}function c(p){var y,v,b,x;if(n.state!==$E)return f();for(y in i)if(x=i[y],x.name===n.name){if(x.state===Ph)return qE(c);x.state===FE?(x.state=Vh,x.timer.stop(),x.on.call("interrupt",t,t.__data__,x.index,x.group),delete i[y]):+y<e&&(x.state=Vh,x.timer.stop(),x.on.call("cancel",t,t.__data__,x.index,x.group),delete i[y])}if(qE(function(){n.state===Ph&&(n.state=FE,n.timer.restart(d,n.delay,n.time),d(p))}),n.state=Km,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Km){for(n.state=Ph,a=new Array(b=n.tween.length),y=0,v=-1;y<b;++y)(x=n.tween[y].value.call(t,t.__data__,n.index,n.group))&&(a[++v]=x);a.length=v+1}}function d(p){for(var y=p<n.duration?n.ease.call(null,p/n.duration):(n.timer.restart(f),n.state=Xm,1),v=-1,b=a.length;++v<b;)a[v].call(t,y);n.state===Xm&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=Vh,n.timer.stop(),delete i[e];for(var p in i)return;delete t.__transition}}function Lh(t,e){var n=t.__transition,i,a,l=!0,c;if(n){e=e==null?null:e+"";for(c in n){if((i=n[c]).name!==e){l=!1;continue}a=i.state>Km&&i.state<Xm,i.state=Vh,i.timer.stop(),i.on.call(a?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[c]}l&&delete t.__transition}}function JC(t){return this.each(function(){Lh(this,t)})}function ek(t,e){var n,i;return function(){var a=wi(this,t),l=a.tween;if(l!==n){i=n=l;for(var c=0,d=i.length;c<d;++c)if(i[c].name===e){i=i.slice(),i.splice(c,1);break}}a.tween=i}}function tk(t,e,n){var i,a;if(typeof n!="function")throw new Error;return function(){var l=wi(this,t),c=l.tween;if(c!==i){a=(i=c).slice();for(var d={name:e,value:n},f=0,p=a.length;f<p;++f)if(a[f].name===e){a[f]=d;break}f===p&&a.push(d)}l.tween=a}}function nk(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=$r(this.node(),n).tween,a=0,l=i.length,c;a<l;++a)if((c=i[a]).name===t)return c.value;return null}return this.each((e==null?ek:tk)(n,t,e))}function B0(t,e,n){var i=t._id;return t.each(function(){var a=wi(this,i);(a.value||(a.value={}))[e]=n.apply(this,arguments)}),function(a){return $r(a,i).value[e]}}function U1(t,e){var n;return(typeof e=="number"?Os:e instanceof yu?UE:(n=yu(e))?(e=n,UE):LC)(t,e)}function rk(t){return function(){this.removeAttribute(t)}}function ik(t){return function(){this.removeAttributeNS(t.space,t.local)}}function sk(t,e,n){var i,a=n+"",l;return function(){var c=this.getAttribute(t);return c===a?null:c===i?l:l=e(i=c,n)}}function ak(t,e,n){var i,a=n+"",l;return function(){var c=this.getAttributeNS(t.space,t.local);return c===a?null:c===i?l:l=e(i=c,n)}}function ok(t,e,n){var i,a,l;return function(){var c,d=n(this),f;return d==null?void this.removeAttribute(t):(c=this.getAttribute(t),f=d+"",c===f?null:c===i&&f===a?l:(a=f,l=e(i=c,d)))}}function lk(t,e,n){var i,a,l;return function(){var c,d=n(this),f;return d==null?void this.removeAttributeNS(t.space,t.local):(c=this.getAttributeNS(t.space,t.local),f=d+"",c===f?null:c===i&&f===a?l:(a=f,l=e(i=c,d)))}}function ck(t,e){var n=kf(t),i=n==="transform"?jC:U1;return this.attrTween(t,typeof e=="function"?(n.local?lk:ok)(n,i,B0(this,"attr."+t,e)):e==null?(n.local?ik:rk)(n):(n.local?ak:sk)(n,i,e))}function uk(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function dk(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function hk(t,e){var n,i;function a(){var l=e.apply(this,arguments);return l!==i&&(n=(i=l)&&dk(t,l)),n}return a._value=e,a}function fk(t,e){var n,i;function a(){var l=e.apply(this,arguments);return l!==i&&(n=(i=l)&&uk(t,l)),n}return a._value=e,a}function gk(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=kf(t);return this.tween(n,(i.local?hk:fk)(i,e))}function pk(t,e){return function(){U0(this,t).delay=+e.apply(this,arguments)}}function mk(t,e){return e=+e,function(){U0(this,t).delay=e}}function yk(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?pk:mk)(e,t)):$r(this.node(),e).delay}function vk(t,e){return function(){wi(this,t).duration=+e.apply(this,arguments)}}function _k(t,e){return e=+e,function(){wi(this,t).duration=e}}function bk(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?vk:_k)(e,t)):$r(this.node(),e).duration}function Ek(t,e){if(typeof e!="function")throw new Error;return function(){wi(this,t).ease=e}}function wk(t){var e=this._id;return arguments.length?this.each(Ek(e,t)):$r(this.node(),e).ease}function xk(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;wi(this,t).ease=n}}function Tk(t){if(typeof t!="function")throw new Error;return this.each(xk(this._id,t))}function Sk(t){typeof t!="function"&&(t=y1(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var l=e[a],c=l.length,d=i[a]=[],f,p=0;p<c;++p)(f=l[p])&&t.call(f,f.__data__,p,l)&&d.push(f);return new es(i,this._parents,this._name,this._id)}function Ak(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,a=n.length,l=Math.min(i,a),c=new Array(i),d=0;d<l;++d)for(var f=e[d],p=n[d],y=f.length,v=c[d]=new Array(y),b,x=0;x<y;++x)(b=f[x]||p[x])&&(v[x]=b);for(;d<i;++d)c[d]=e[d];return new es(c,this._parents,this._name,this._id)}function Rk(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Nk(t,e,n){var i,a,l=Rk(e)?U0:wi;return function(){var c=l(this,t),d=c.on;d!==i&&(a=(i=d).copy()).on(e,n),c.on=a}}function Ik(t,e){var n=this._id;return arguments.length<2?$r(this.node(),n).on.on(t):this.each(Nk(n,t,e))}function Ck(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function kk(){return this.on("end.remove",Ck(this._id))}function Dk(t){var e=this._name,n=this._id;typeof t!="function"&&(t=P0(t));for(var i=this._groups,a=i.length,l=new Array(a),c=0;c<a;++c)for(var d=i[c],f=d.length,p=l[c]=new Array(f),y,v,b=0;b<f;++b)(y=d[b])&&(v=t.call(y,y.__data__,b,d))&&("__data__"in y&&(v.__data__=y.__data__),p[b]=v,Mf(p[b],e,n,b,p,$r(y,n)));return new es(l,this._parents,e,n)}function Mk(t){var e=this._name,n=this._id;typeof t!="function"&&(t=m1(t));for(var i=this._groups,a=i.length,l=[],c=[],d=0;d<a;++d)for(var f=i[d],p=f.length,y,v=0;v<p;++v)if(y=f[v]){for(var b=t.call(y,y.__data__,v,f),x,I=$r(y,n),P=0,O=b.length;P<O;++P)(x=b[P])&&Mf(x,e,n,P,b,I);l.push(b),c.push(y)}return new es(l,c,e,n)}var Ok=Pu.prototype.constructor;function Pk(){return new Ok(this._groups,this._parents)}function Vk(t,e){var n,i,a;return function(){var l=xl(this,t),c=(this.style.removeProperty(t),xl(this,t));return l===c?null:l===n&&c===i?a:a=e(n=l,i=c)}}function B1(t){return function(){this.style.removeProperty(t)}}function Lk(t,e,n){var i,a=n+"",l;return function(){var c=xl(this,t);return c===a?null:c===i?l:l=e(i=c,n)}}function zk(t,e,n){var i,a,l;return function(){var c=xl(this,t),d=n(this),f=d+"";return d==null&&(f=d=(this.style.removeProperty(t),xl(this,t))),c===f?null:c===i&&f===a?l:(a=f,l=e(i=c,d))}}function Uk(t,e){var n,i,a,l="style."+e,c="end."+l,d;return function(){var f=wi(this,t),p=f.on,y=f.value[l]==null?d||(d=B1(e)):void 0;(p!==n||a!==y)&&(i=(n=p).copy()).on(c,a=y),f.on=i}}function Bk(t,e,n){var i=(t+="")=="transform"?BC:U1;return e==null?this.styleTween(t,Vk(t,i)).on("end.style."+t,B1(t)):typeof e=="function"?this.styleTween(t,zk(t,i,B0(this,"style."+t,e))).each(Uk(this._id,t)):this.styleTween(t,Lk(t,i,e),n).on("end.style."+t,null)}function jk(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Hk(t,e,n){var i,a;function l(){var c=e.apply(this,arguments);return c!==a&&(i=(a=c)&&jk(t,c,n)),i}return l._value=e,l}function qk(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Hk(t,e,n??""))}function $k(t){return function(){this.textContent=t}}function Fk(t){return function(){var e=t(this);this.textContent=e??""}}function Gk(t){return this.tween("text",typeof t=="function"?Fk(B0(this,"text",t)):$k(t==null?"":t+""))}function Yk(t){return function(e){this.textContent=t.call(this,e)}}function Kk(t){var e,n;function i(){var a=t.apply(this,arguments);return a!==n&&(e=(n=a)&&Yk(a)),e}return i._value=t,i}function Xk(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Kk(t))}function Qk(){for(var t=this._name,e=this._id,n=j1(),i=this._groups,a=i.length,l=0;l<a;++l)for(var c=i[l],d=c.length,f,p=0;p<d;++p)if(f=c[p]){var y=$r(f,e);Mf(f,t,n,p,c,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new es(i,this._parents,t,n)}function Wk(){var t,e,n=this,i=n._id,a=n.size();return new Promise(function(l,c){var d={value:c},f={value:function(){--a===0&&l()}};n.each(function(){var p=wi(this,i),y=p.on;y!==t&&(e=(t=y).copy(),e._.cancel.push(d),e._.interrupt.push(d),e._.end.push(f)),p.on=e}),a===0&&l()})}var Zk=0;function es(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function j1(){return++Zk}var Ki=Pu.prototype;es.prototype={constructor:es,select:Dk,selectAll:Mk,selectChild:Ki.selectChild,selectChildren:Ki.selectChildren,filter:Sk,merge:Ak,selection:Pk,transition:Qk,call:Ki.call,nodes:Ki.nodes,node:Ki.node,size:Ki.size,empty:Ki.empty,each:Ki.each,on:Ik,attr:ck,attrTween:gk,style:Bk,styleTween:qk,text:Gk,textTween:Xk,remove:kk,tween:nk,delay:yk,duration:bk,ease:wk,easeVarying:Tk,end:Wk,[Symbol.iterator]:Ki[Symbol.iterator]};function Jk(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var e4={time:null,delay:0,duration:250,ease:Jk};function t4(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function n4(t){var e,n;t instanceof es?(e=t._id,t=t._name):(e=j1(),(n=e4).time=z0(),t=t==null?null:t+"");for(var i=this._groups,a=i.length,l=0;l<a;++l)for(var c=i[l],d=c.length,f,p=0;p<d;++p)(f=c[p])&&Mf(f,t,e,p,c,n||t4(f,e));return new es(i,this._parents,t,e)}Pu.prototype.interrupt=JC;Pu.prototype.transition=n4;const mh=t=>()=>t;function r4(t,{sourceEvent:e,target:n,transform:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function Qi(t,e,n){this.k=t,this.x=e,this.y=n}Qi.prototype={constructor:Qi,scale:function(t){return t===1?this:new Qi(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Qi(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var $s=new Qi(1,0,0);Qi.prototype;function vm(t){t.stopImmediatePropagation()}function $c(t){t.preventDefault(),t.stopImmediatePropagation()}function i4(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function s4(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function GE(){return this.__zoom||$s}function a4(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function o4(){return navigator.maxTouchPoints||"ontouchstart"in this}function l4(t,e,n){var i=t.invertX(e[0][0])-n[0][0],a=t.invertX(e[1][0])-n[1][0],l=t.invertY(e[0][1])-n[0][1],c=t.invertY(e[1][1])-n[1][1];return t.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function c4(){var t=i4,e=s4,n=l4,i=a4,a=o4,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,f=FC,p=Cf("start","zoom","end"),y,v,b,x=500,I=150,P=0,O=10;function B(D){D.property("__zoom",GE).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",U).filter(a).on("touchstart.zoom",L).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",S).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}B.transform=function(D,H,k,$){var Z=D.selection?D.selection():D;Z.property("__zoom",GE),D!==Z?W(D,H,k,$):Z.interrupt().each(function(){X(this,arguments).event($).start().zoom(null,typeof H=="function"?H.apply(this,arguments):H).end()})},B.scaleBy=function(D,H,k,$){B.scaleTo(D,function(){var Z=this.__zoom.k,Q=typeof H=="function"?H.apply(this,arguments):H;return Z*Q},k,$)},B.scaleTo=function(D,H,k,$){B.transform(D,function(){var Z=e.apply(this,arguments),Q=this.__zoom,V=k==null?j(Z):typeof k=="function"?k.apply(this,arguments):k,J=Q.invert(V),te=typeof H=="function"?H.apply(this,arguments):H;return n(G(q(Q,te),V,J),Z,c)},k,$)},B.translateBy=function(D,H,k,$){B.transform(D,function(){return n(this.__zoom.translate(typeof H=="function"?H.apply(this,arguments):H,typeof k=="function"?k.apply(this,arguments):k),e.apply(this,arguments),c)},null,$)},B.translateTo=function(D,H,k,$,Z){B.transform(D,function(){var Q=e.apply(this,arguments),V=this.__zoom,J=$==null?j(Q):typeof $=="function"?$.apply(this,arguments):$;return n($s.translate(J[0],J[1]).scale(V.k).translate(typeof H=="function"?-H.apply(this,arguments):-H,typeof k=="function"?-k.apply(this,arguments):-k),Q,c)},$,Z)};function q(D,H){return H=Math.max(l[0],Math.min(l[1],H)),H===D.k?D:new Qi(H,D.x,D.y)}function G(D,H,k){var $=H[0]-k[0]*D.k,Z=H[1]-k[1]*D.k;return $===D.x&&Z===D.y?D:new Qi(D.k,$,Z)}function j(D){return[(+D[0][0]+ +D[1][0])/2,(+D[0][1]+ +D[1][1])/2]}function W(D,H,k,$){D.on("start.zoom",function(){X(this,arguments).event($).start()}).on("interrupt.zoom end.zoom",function(){X(this,arguments).event($).end()}).tween("zoom",function(){var Z=this,Q=arguments,V=X(Z,Q).event($),J=e.apply(Z,Q),te=k==null?j(J):typeof k=="function"?k.apply(Z,Q):k,K=Math.max(J[1][0]-J[0][0],J[1][1]-J[0][1]),ie=Z.__zoom,ue=typeof H=="function"?H.apply(Z,Q):H,de=f(ie.invert(te).concat(K/ie.k),ue.invert(te).concat(K/ue.k));return function(ve){if(ve===1)ve=ue;else{var _e=de(ve),Ae=K/_e[2];ve=new Qi(Ae,te[0]-_e[0]*Ae,te[1]-_e[1]*Ae)}V.zoom(null,ve)}})}function X(D,H,k){return!k&&D.__zooming||new A(D,H)}function A(D,H){this.that=D,this.args=H,this.active=0,this.sourceEvent=null,this.extent=e.apply(D,H),this.taps=0}A.prototype={event:function(D){return D&&(this.sourceEvent=D),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(D,H){return this.mouse&&D!=="mouse"&&(this.mouse[1]=H.invert(this.mouse[0])),this.touch0&&D!=="touch"&&(this.touch0[1]=H.invert(this.touch0[0])),this.touch1&&D!=="touch"&&(this.touch1[1]=H.invert(this.touch1[0])),this.that.__zoom=H,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(D){var H=Lr(this.that).datum();p.call(D,this.that,new r4(D,{sourceEvent:this.sourceEvent,target:B,transform:this.that.__zoom,dispatch:p}),H)}};function T(D,...H){if(!t.apply(this,arguments))return;var k=X(this,H).event(D),$=this.__zoom,Z=Math.max(l[0],Math.min(l[1],$.k*Math.pow(2,i.apply(this,arguments)))),Q=fi(D);if(k.wheel)(k.mouse[0][0]!==Q[0]||k.mouse[0][1]!==Q[1])&&(k.mouse[1]=$.invert(k.mouse[0]=Q)),clearTimeout(k.wheel);else{if($.k===Z)return;k.mouse=[Q,$.invert(Q)],Lh(this),k.start()}$c(D),k.wheel=setTimeout(V,I),k.zoom("mouse",n(G(q($,Z),k.mouse[0],k.mouse[1]),k.extent,c));function V(){k.wheel=null,k.end()}}function N(D,...H){if(b||!t.apply(this,arguments))return;var k=D.currentTarget,$=X(this,H,!0).event(D),Z=Lr(D.view).on("mousemove.zoom",te,!0).on("mouseup.zoom",K,!0),Q=fi(D,k),V=D.clientX,J=D.clientY;R1(D.view),vm(D),$.mouse=[Q,this.__zoom.invert(Q)],Lh(this),$.start();function te(ie){if($c(ie),!$.moved){var ue=ie.clientX-V,de=ie.clientY-J;$.moved=ue*ue+de*de>P}$.event(ie).zoom("mouse",n(G($.that.__zoom,$.mouse[0]=fi(ie,k),$.mouse[1]),$.extent,c))}function K(ie){Z.on("mousemove.zoom mouseup.zoom",null),N1(ie.view,$.moved),$c(ie),$.event(ie).end()}}function U(D,...H){if(t.apply(this,arguments)){var k=this.__zoom,$=fi(D.changedTouches?D.changedTouches[0]:D,this),Z=k.invert($),Q=k.k*(D.shiftKey?.5:2),V=n(G(q(k,Q),$,Z),e.apply(this,H),c);$c(D),d>0?Lr(this).transition().duration(d).call(W,V,$,D):Lr(this).call(B.transform,V,$,D)}}function L(D,...H){if(t.apply(this,arguments)){var k=D.touches,$=k.length,Z=X(this,H,D.changedTouches.length===$).event(D),Q,V,J,te;for(vm(D),V=0;V<$;++V)J=k[V],te=fi(J,this),te=[te,this.__zoom.invert(te),J.identifier],Z.touch0?!Z.touch1&&Z.touch0[2]!==te[2]&&(Z.touch1=te,Z.taps=0):(Z.touch0=te,Q=!0,Z.taps=1+!!y);y&&(y=clearTimeout(y)),Q&&(Z.taps<2&&(v=te[0],y=setTimeout(function(){y=null},x)),Lh(this),Z.start())}}function C(D,...H){if(this.__zooming){var k=X(this,H).event(D),$=D.changedTouches,Z=$.length,Q,V,J,te;for($c(D),Q=0;Q<Z;++Q)V=$[Q],J=fi(V,this),k.touch0&&k.touch0[2]===V.identifier?k.touch0[0]=J:k.touch1&&k.touch1[2]===V.identifier&&(k.touch1[0]=J);if(V=k.that.__zoom,k.touch1){var K=k.touch0[0],ie=k.touch0[1],ue=k.touch1[0],de=k.touch1[1],ve=(ve=ue[0]-K[0])*ve+(ve=ue[1]-K[1])*ve,_e=(_e=de[0]-ie[0])*_e+(_e=de[1]-ie[1])*_e;V=q(V,Math.sqrt(ve/_e)),J=[(K[0]+ue[0])/2,(K[1]+ue[1])/2],te=[(ie[0]+de[0])/2,(ie[1]+de[1])/2]}else if(k.touch0)J=k.touch0[0],te=k.touch0[1];else return;k.zoom("touch",n(G(V,J,te),k.extent,c))}}function S(D,...H){if(this.__zooming){var k=X(this,H).event(D),$=D.changedTouches,Z=$.length,Q,V;for(vm(D),b&&clearTimeout(b),b=setTimeout(function(){b=null},x),Q=0;Q<Z;++Q)V=$[Q],k.touch0&&k.touch0[2]===V.identifier?delete k.touch0:k.touch1&&k.touch1[2]===V.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&(V=fi(V,this),Math.hypot(v[0]-V[0],v[1]-V[1])<O)){var J=Lr(this).on("dblclick.zoom");J&&J.apply(this,arguments)}}}return B.wheelDelta=function(D){return arguments.length?(i=typeof D=="function"?D:mh(+D),B):i},B.filter=function(D){return arguments.length?(t=typeof D=="function"?D:mh(!!D),B):t},B.touchable=function(D){return arguments.length?(a=typeof D=="function"?D:mh(!!D),B):a},B.extent=function(D){return arguments.length?(e=typeof D=="function"?D:mh([[+D[0][0],+D[0][1]],[+D[1][0],+D[1][1]]]),B):e},B.scaleExtent=function(D){return arguments.length?(l[0]=+D[0],l[1]=+D[1],B):[l[0],l[1]]},B.translateExtent=function(D){return arguments.length?(c[0][0]=+D[0][0],c[1][0]=+D[1][0],c[0][1]=+D[0][1],c[1][1]=+D[1][1],B):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},B.constrain=function(D){return arguments.length?(n=D,B):n},B.duration=function(D){return arguments.length?(d=+D,B):d},B.interpolate=function(D){return arguments.length?(f=D,B):f},B.on=function(){var D=p.on.apply(p,arguments);return D===p?B:D},B.clickDistance=function(D){return arguments.length?(P=(D=+D)*D,B):Math.sqrt(P)},B.tapDistance=function(D){return arguments.length?(O=+D,B):O},B}var u4=f1();const Of=F.createContext(null),d4=Of.Provider,ts={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},H1=ts.error001();function Tt(t,e){const n=F.useContext(Of);if(n===null)throw new Error(H1);return g1(n,t,e)}const ln=()=>{const t=F.useContext(Of);if(t===null)throw new Error(H1);return F.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},h4=t=>t.userSelectionActive?"none":"all";function q1({position:t,children:e,className:n,style:i,...a}){const l=Tt(h4),c=`${t}`.split("-");return fe.createElement("div",{className:Pn(["react-flow__panel",n,...c]),style:{...i,pointerEvents:l},...a},e)}function f4({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:fe.createElement(q1,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},fe.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const g4=({x:t,y:e,label:n,labelStyle:i={},labelShowBg:a=!0,labelBgStyle:l={},labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:f,className:p,...y})=>{const v=F.useRef(null),[b,x]=F.useState({x:0,y:0,width:0,height:0}),I=Pn(["react-flow__edge-textwrapper",p]);return F.useEffect(()=>{if(v.current){const P=v.current.getBBox();x({x:P.x,y:P.y,width:P.width,height:P.height})}},[n]),typeof n>"u"||!n?null:fe.createElement("g",{transform:`translate(${t-b.width/2} ${e-b.height/2})`,className:I,visibility:b.width?"visible":"hidden",...y},a&&fe.createElement("rect",{width:b.width+2*c[0],x:-c[0],y:-c[1],height:b.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:d,ry:d}),fe.createElement("text",{className:"react-flow__edge-text",y:b.height/2,dy:"0.3em",ref:v,style:i},n),f)};var p4=F.memo(g4);const j0=t=>({width:t.offsetWidth,height:t.offsetHeight}),Sl=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),H0=(t={x:0,y:0},e)=>({x:Sl(t.x,e[0][0],e[1][0]),y:Sl(t.y,e[0][1],e[1][1])}),YE=(t,e,n)=>t<e?Sl(Math.abs(t-e),1,50)/50:t>n?-Sl(Math.abs(t-n),1,50)/50:0,$1=(t,e)=>{const n=YE(t.x,35,e.width-35)*20,i=YE(t.y,35,e.height-35)*20;return[n,i]},F1=t=>t.getRootNode?.()||window?.document,m4=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),q0=({x:t,y:e,width:n,height:i})=>({x:t,y:e,x2:t+n,y2:e+i}),y4=({x:t,y:e,x2:n,y2:i})=>({x:t,y:e,width:n-t,height:i-e}),KE=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),Qm=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*i)},v4=t=>Rr(t.width)&&Rr(t.height)&&Rr(t.x)&&Rr(t.y),Rr=t=>!isNaN(t)&&isFinite(t),kt=Symbol.for("internals"),G1=["Enter"," ","Escape"],_4=(t,e)=>{},b4=t=>"nativeEvent"in t;function Wm(t){const n=(b4(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const Y1=t=>"clientX"in t,Fs=(t,e)=>{const n=Y1(t),i=n?t.clientX:t.touches?.[0].clientX,a=n?t.clientY:t.touches?.[0].clientY;return{x:i-(e?.left??0),y:a-(e?.top??0)}},rf=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Lu=({id:t,path:e,labelX:n,labelY:i,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:v,markerStart:b,interactionWidth:x=20})=>fe.createElement(fe.Fragment,null,fe.createElement("path",{id:t,style:y,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:v,markerStart:b}),x&&fe.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:x,className:"react-flow__edge-interaction"}),a&&Rr(n)&&Rr(i)?fe.createElement(p4,{x:n,y:i,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p}):null);Lu.displayName="BaseEdge";function Fc(t,e,n){return n===void 0?n:i=>{const a=e().edges.find(l=>l.id===t);a&&n(i,{...a})}}function K1({sourceX:t,sourceY:e,targetX:n,targetY:i}){const a=Math.abs(n-t)/2,l=n<t?n+a:n-a,c=Math.abs(i-e)/2,d=i<e?i+c:i-c;return[l,d,a,c]}function X1({sourceX:t,sourceY:e,targetX:n,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d}){const f=t*.125+a*.375+c*.375+n*.125,p=e*.125+l*.375+d*.375+i*.125,y=Math.abs(f-t),v=Math.abs(p-e);return[f,p,y,v]}var Ws;(function(t){t.Strict="strict",t.Loose="loose"})(Ws||(Ws={}));var qa;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(qa||(qa={}));var _u;(function(t){t.Partial="partial",t.Full="full"})(_u||(_u={}));var Vs;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Vs||(Vs={}));var bu;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(bu||(bu={}));var Se;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Se||(Se={}));function XE({pos:t,x1:e,y1:n,x2:i,y2:a}){return t===Se.Left||t===Se.Right?[.5*(e+i),n]:[e,.5*(n+a)]}function Q1({sourceX:t,sourceY:e,sourcePosition:n=Se.Bottom,targetX:i,targetY:a,targetPosition:l=Se.Top}){const[c,d]=XE({pos:n,x1:t,y1:e,x2:i,y2:a}),[f,p]=XE({pos:l,x1:i,y1:a,x2:t,y2:e}),[y,v,b,x]=X1({sourceX:t,sourceY:e,targetX:i,targetY:a,sourceControlX:c,sourceControlY:d,targetControlX:f,targetControlY:p});return[`M${t},${e} C${c},${d} ${f},${p} ${i},${a}`,y,v,b,x]}const $0=F.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,sourcePosition:a=Se.Bottom,targetPosition:l=Se.Top,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:v,style:b,markerEnd:x,markerStart:I,interactionWidth:P})=>{const[O,B,q]=Q1({sourceX:t,sourceY:e,sourcePosition:a,targetX:n,targetY:i,targetPosition:l});return fe.createElement(Lu,{path:O,labelX:B,labelY:q,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:v,style:b,markerEnd:x,markerStart:I,interactionWidth:P})});$0.displayName="SimpleBezierEdge";const QE={[Se.Left]:{x:-1,y:0},[Se.Right]:{x:1,y:0},[Se.Top]:{x:0,y:-1},[Se.Bottom]:{x:0,y:1}},E4=({source:t,sourcePosition:e=Se.Bottom,target:n})=>e===Se.Left||e===Se.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},WE=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function w4({source:t,sourcePosition:e=Se.Bottom,target:n,targetPosition:i=Se.Top,center:a,offset:l}){const c=QE[e],d=QE[i],f={x:t.x+c.x*l,y:t.y+c.y*l},p={x:n.x+d.x*l,y:n.y+d.y*l},y=E4({source:f,sourcePosition:e,target:p}),v=y.x!==0?"x":"y",b=y[v];let x=[],I,P;const O={x:0,y:0},B={x:0,y:0},[q,G,j,W]=K1({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(c[v]*d[v]===-1){I=a.x??q,P=a.y??G;const A=[{x:I,y:f.y},{x:I,y:p.y}],T=[{x:f.x,y:P},{x:p.x,y:P}];c[v]===b?x=v==="x"?A:T:x=v==="x"?T:A}else{const A=[{x:f.x,y:p.y}],T=[{x:p.x,y:f.y}];if(v==="x"?x=c.x===b?T:A:x=c.y===b?A:T,e===i){const S=Math.abs(t[v]-n[v]);if(S<=l){const D=Math.min(l-1,l-S);c[v]===b?O[v]=(f[v]>t[v]?-1:1)*D:B[v]=(p[v]>n[v]?-1:1)*D}}if(e!==i){const S=v==="x"?"y":"x",D=c[v]===d[S],H=f[S]>p[S],k=f[S]<p[S];(c[v]===1&&(!D&&H||D&&k)||c[v]!==1&&(!D&&k||D&&H))&&(x=v==="x"?A:T)}const N={x:f.x+O.x,y:f.y+O.y},U={x:p.x+B.x,y:p.y+B.y},L=Math.max(Math.abs(N.x-x[0].x),Math.abs(U.x-x[0].x)),C=Math.max(Math.abs(N.y-x[0].y),Math.abs(U.y-x[0].y));L>=C?(I=(N.x+U.x)/2,P=x[0].y):(I=x[0].x,P=(N.y+U.y)/2)}return[[t,{x:f.x+O.x,y:f.y+O.y},...x,{x:p.x+B.x,y:p.y+B.y},n],I,P,j,W]}function x4(t,e,n,i){const a=Math.min(WE(t,e)/2,WE(e,n)/2,i),{x:l,y:c}=e;if(t.x===l&&l===n.x||t.y===c&&c===n.y)return`L${l} ${c}`;if(t.y===c){const p=t.x<n.x?-1:1,y=t.y<n.y?1:-1;return`L ${l+a*p},${c}Q ${l},${c} ${l},${c+a*y}`}const d=t.x<n.x?1:-1,f=t.y<n.y?-1:1;return`L ${l},${c+a*f}Q ${l},${c} ${l+a*d},${c}`}function Zm({sourceX:t,sourceY:e,sourcePosition:n=Se.Bottom,targetX:i,targetY:a,targetPosition:l=Se.Top,borderRadius:c=5,centerX:d,centerY:f,offset:p=20}){const[y,v,b,x,I]=w4({source:{x:t,y:e},sourcePosition:n,target:{x:i,y:a},targetPosition:l,center:{x:d,y:f},offset:p});return[y.reduce((O,B,q)=>{let G="";return q>0&&q<y.length-1?G=x4(y[q-1],B,y[q+1],c):G=`${q===0?"M":"L"}${B.x} ${B.y}`,O+=G,O},""),v,b,x,I]}const Pf=F.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,sourcePosition:v=Se.Bottom,targetPosition:b=Se.Top,markerEnd:x,markerStart:I,pathOptions:P,interactionWidth:O})=>{const[B,q,G]=Zm({sourceX:t,sourceY:e,sourcePosition:v,targetX:n,targetY:i,targetPosition:b,borderRadius:P?.borderRadius,offset:P?.offset});return fe.createElement(Lu,{path:B,labelX:q,labelY:G,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:x,markerStart:I,interactionWidth:O})});Pf.displayName="SmoothStepEdge";const F0=F.memo(t=>fe.createElement(Pf,{...t,pathOptions:F.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));F0.displayName="StepEdge";function T4({sourceX:t,sourceY:e,targetX:n,targetY:i}){const[a,l,c,d]=K1({sourceX:t,sourceY:e,targetX:n,targetY:i});return[`M ${t},${e}L ${n},${i}`,a,l,c,d]}const G0=F.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:v,markerStart:b,interactionWidth:x})=>{const[I,P,O]=T4({sourceX:t,sourceY:e,targetX:n,targetY:i});return fe.createElement(Lu,{path:I,labelX:P,labelY:O,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:v,markerStart:b,interactionWidth:x})});G0.displayName="StraightEdge";function yh(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function ZE({pos:t,x1:e,y1:n,x2:i,y2:a,c:l}){switch(t){case Se.Left:return[e-yh(e-i,l),n];case Se.Right:return[e+yh(i-e,l),n];case Se.Top:return[e,n-yh(n-a,l)];case Se.Bottom:return[e,n+yh(a-n,l)]}}function W1({sourceX:t,sourceY:e,sourcePosition:n=Se.Bottom,targetX:i,targetY:a,targetPosition:l=Se.Top,curvature:c=.25}){const[d,f]=ZE({pos:n,x1:t,y1:e,x2:i,y2:a,c}),[p,y]=ZE({pos:l,x1:i,y1:a,x2:t,y2:e,c}),[v,b,x,I]=X1({sourceX:t,sourceY:e,targetX:i,targetY:a,sourceControlX:d,sourceControlY:f,targetControlX:p,targetControlY:y});return[`M${t},${e} C${d},${f} ${p},${y} ${i},${a}`,v,b,x,I]}const sf=F.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,sourcePosition:a=Se.Bottom,targetPosition:l=Se.Top,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:v,style:b,markerEnd:x,markerStart:I,pathOptions:P,interactionWidth:O})=>{const[B,q,G]=W1({sourceX:t,sourceY:e,sourcePosition:a,targetX:n,targetY:i,targetPosition:l,curvature:P?.curvature});return fe.createElement(Lu,{path:B,labelX:q,labelY:G,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:v,style:b,markerEnd:x,markerStart:I,interactionWidth:O})});sf.displayName="BezierEdge";const Y0=F.createContext(null),S4=Y0.Provider;Y0.Consumer;const A4=()=>F.useContext(Y0),R4=t=>"id"in t&&"source"in t&&"target"in t,N4=({source:t,sourceHandle:e,target:n,targetHandle:i})=>`reactflow__edge-${t}${e||""}-${n}${i||""}`,Jm=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`,I4=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),C4=(t,e)=>{if(!t.source||!t.target)return e;let n;return R4(t)?n={...t}:n={...t,id:N4(t)},I4(n,e)?e:e.concat(n)},e0=({x:t,y:e},[n,i,a],l,[c,d])=>{const f={x:(t-n)/a,y:(e-i)/a};return l?{x:c*Math.round(f.x/c),y:d*Math.round(f.y/d)}:f},Z1=({x:t,y:e},[n,i,a])=>({x:t*a+n,y:e*a+i}),pl=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],i=(t.height??0)*e[1],a={x:t.position.x-n,y:t.position.y-i};return{...a,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-i}:a}},K0=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((i,a)=>{const{x:l,y:c}=pl(a,e).positionAbsolute;return m4(i,q0({x:l,y:c,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return y4(n)},J1=(t,e,[n,i,a]=[0,0,1],l=!1,c=!1,d=[0,0])=>{const f={x:(e.x-n)/a,y:(e.y-i)/a,width:e.width/a,height:e.height/a},p=[];return t.forEach(y=>{const{width:v,height:b,selectable:x=!0,hidden:I=!1}=y;if(c&&!x||I)return!1;const{positionAbsolute:P}=pl(y,d),O={x:P.x,y:P.y,width:v||0,height:b||0},B=Qm(f,O),q=typeof v>"u"||typeof b>"u"||v===null||b===null,G=l&&B>0,j=(v||0)*(b||0);(q||G||B>=j||y.dragging)&&p.push(y)}),p},eT=(t,e)=>{const n=t.map(i=>i.id);return e.filter(i=>n.includes(i.source)||n.includes(i.target))},tT=(t,e,n,i,a,l=.1)=>{const c=e/(t.width*(1+l)),d=n/(t.height*(1+l)),f=Math.min(c,d),p=Sl(f,i,a),y=t.x+t.width/2,v=t.y+t.height/2,b=e/2-y*p,x=n/2-v*p;return{x:b,y:x,zoom:p}},Ba=(t,e=0)=>t.transition().duration(e);function JE(t,e,n,i){return(e[n]||[]).reduce((a,l)=>(`${t.id}-${l.id}-${n}`!==i&&a.push({id:l.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+l.x+l.width/2,y:(t.positionAbsolute?.y??0)+l.y+l.height/2}),a),[])}function k4(t,e,n,i,a,l){const{x:c,y:d}=Fs(t),p=e.elementsFromPoint(c,d).find(I=>I.classList.contains("react-flow__handle"));if(p){const I=p.getAttribute("data-nodeid");if(I){const P=X0(void 0,p),O=p.getAttribute("data-handleid"),B=l({nodeId:I,id:O,type:P});if(B){const q=a.find(G=>G.nodeId===I&&G.type===P&&G.id===O);return{handle:{id:O,type:P,nodeId:I,x:q?.x||n.x,y:q?.y||n.y},validHandleResult:B}}}}let y=[],v=1/0;if(a.forEach(I=>{const P=Math.sqrt((I.x-n.x)**2+(I.y-n.y)**2);if(P<=i){const O=l(I);P<=v&&(P<v?y=[{handle:I,validHandleResult:O}]:P===v&&y.push({handle:I,validHandleResult:O}),v=P)}}),!y.length)return{handle:null,validHandleResult:nT()};if(y.length===1)return y[0];const b=y.some(({validHandleResult:I})=>I.isValid),x=y.some(({handle:I})=>I.type==="target");return y.find(({handle:I,validHandleResult:P})=>x?I.type==="target":b?P.isValid:!0)||y[0]}const D4={source:null,target:null,sourceHandle:null,targetHandle:null},nT=()=>({handleDomNode:null,isValid:!1,connection:D4,endHandle:null});function rT(t,e,n,i,a,l,c){const d=a==="target",f=c.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),p={...nT(),handleDomNode:f};if(f){const y=X0(void 0,f),v=f.getAttribute("data-nodeid"),b=f.getAttribute("data-handleid"),x=f.classList.contains("connectable"),I=f.classList.contains("connectableend"),P={source:d?v:n,sourceHandle:d?b:i,target:d?n:v,targetHandle:d?i:b};p.connection=P,x&&I&&(e===Ws.Strict?d&&y==="source"||!d&&y==="target":v!==n||b!==i)&&(p.endHandle={nodeId:v,handleId:b,type:y},p.isValid=l(P))}return p}function M4({nodes:t,nodeId:e,handleId:n,handleType:i}){return t.reduce((a,l)=>{if(l[kt]){const{handleBounds:c}=l[kt];let d=[],f=[];c&&(d=JE(l,c,"source",`${e}-${n}-${i}`),f=JE(l,c,"target",`${e}-${n}-${i}`)),a.push(...d,...f)}return a},[])}function X0(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function _m(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function O4(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function iT({event:t,handleId:e,nodeId:n,onConnect:i,isTarget:a,getState:l,setState:c,isValidConnection:d,edgeUpdaterType:f,onReconnectEnd:p}){const y=F1(t.target),{connectionMode:v,domNode:b,autoPanOnConnect:x,connectionRadius:I,onConnectStart:P,panBy:O,getNodes:B,cancelConnection:q}=l();let G=0,j;const{x:W,y:X}=Fs(t),A=y?.elementFromPoint(W,X),T=X0(f,A),N=b?.getBoundingClientRect();if(!N||!T)return;let U,L=Fs(t,N),C=!1,S=null,D=!1,H=null;const k=M4({nodes:B(),nodeId:n,handleId:e,handleType:T}),$=()=>{if(!x)return;const[V,J]=$1(L,N);O({x:V,y:J}),G=requestAnimationFrame($)};c({connectionPosition:L,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:T,connectionStartHandle:{nodeId:n,handleId:e,type:T},connectionEndHandle:null}),P?.(t,{nodeId:n,handleId:e,handleType:T});function Z(V){const{transform:J}=l();L=Fs(V,N);const{handle:te,validHandleResult:K}=k4(V,y,e0(L,J,!1,[1,1]),I,k,ie=>rT(ie,v,n,e,a?"target":"source",d,y));if(j=te,C||($(),C=!0),H=K.handleDomNode,S=K.connection,D=K.isValid,c({connectionPosition:j&&D?Z1({x:j.x,y:j.y},J):L,connectionStatus:O4(!!j,D),connectionEndHandle:K.endHandle}),!j&&!D&&!H)return _m(U);S.source!==S.target&&H&&(_m(U),U=H,H.classList.add("connecting","react-flow__handle-connecting"),H.classList.toggle("valid",D),H.classList.toggle("react-flow__handle-valid",D))}function Q(V){(j||H)&&S&&D&&i?.(S),l().onConnectEnd?.(V),f&&p?.(V),_m(U),q(),cancelAnimationFrame(G),C=!1,D=!1,S=null,H=null,y.removeEventListener("mousemove",Z),y.removeEventListener("mouseup",Q),y.removeEventListener("touchmove",Z),y.removeEventListener("touchend",Q)}y.addEventListener("mousemove",Z),y.addEventListener("mouseup",Q),y.addEventListener("touchmove",Z),y.addEventListener("touchend",Q)}const ew=()=>!0,P4=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),V4=(t,e,n)=>i=>{const{connectionStartHandle:a,connectionEndHandle:l,connectionClickStartHandle:c}=i;return{connecting:a?.nodeId===t&&a?.handleId===e&&a?.type===n||l?.nodeId===t&&l?.handleId===e&&l?.type===n,clickConnecting:c?.nodeId===t&&c?.handleId===e&&c?.type===n}},sT=F.forwardRef(({type:t="source",position:e=Se.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:c,onConnect:d,children:f,className:p,onMouseDown:y,onTouchStart:v,...b},x)=>{const I=c||null,P=t==="target",O=ln(),B=A4(),{connectOnClick:q,noPanClassName:G}=Tt(P4,Tn),{connecting:j,clickConnecting:W}=Tt(V4(B,I,t),Tn);B||O.getState().onError?.("010",ts.error010());const X=N=>{const{defaultEdgeOptions:U,onConnect:L,hasDefaultEdges:C}=O.getState(),S={...U,...N};if(C){const{edges:D,setEdges:H}=O.getState();H(C4(S,D))}L?.(S),d?.(S)},A=N=>{if(!B)return;const U=Y1(N);a&&(U&&N.button===0||!U)&&iT({event:N,handleId:I,nodeId:B,onConnect:X,isTarget:P,getState:O.getState,setState:O.setState,isValidConnection:n||O.getState().isValidConnection||ew}),U?y?.(N):v?.(N)},T=N=>{const{onClickConnectStart:U,onClickConnectEnd:L,connectionClickStartHandle:C,connectionMode:S,isValidConnection:D}=O.getState();if(!B||!C&&!a)return;if(!C){U?.(N,{nodeId:B,handleId:I,handleType:t}),O.setState({connectionClickStartHandle:{nodeId:B,type:t,handleId:I}});return}const H=F1(N.target),k=n||D||ew,{connection:$,isValid:Z}=rT({nodeId:B,id:I,type:t},S,C.nodeId,C.handleId||null,C.type,k,H);Z&&X($),L?.(N),O.setState({connectionClickStartHandle:null})};return fe.createElement("div",{"data-handleid":I,"data-nodeid":B,"data-handlepos":e,"data-id":`${B}-${I}-${t}`,className:Pn(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",G,p,{source:!P,target:P,connectable:i,connectablestart:a,connectableend:l,connecting:W,connectionindicator:i&&(a&&!j||l&&j)}]),onMouseDown:A,onTouchStart:A,onClick:q?T:void 0,ref:x,...b},f)});sT.displayName="Handle";var jn=F.memo(sT);const aT=({data:t,isConnectable:e,targetPosition:n=Se.Top,sourcePosition:i=Se.Bottom})=>fe.createElement(fe.Fragment,null,fe.createElement(jn,{type:"target",position:n,isConnectable:e}),t?.label,fe.createElement(jn,{type:"source",position:i,isConnectable:e}));aT.displayName="DefaultNode";var t0=F.memo(aT);const oT=({data:t,isConnectable:e,sourcePosition:n=Se.Bottom})=>fe.createElement(fe.Fragment,null,t?.label,fe.createElement(jn,{type:"source",position:n,isConnectable:e}));oT.displayName="InputNode";var lT=F.memo(oT);const cT=({data:t,isConnectable:e,targetPosition:n=Se.Top})=>fe.createElement(fe.Fragment,null,fe.createElement(jn,{type:"target",position:n,isConnectable:e}),t?.label);cT.displayName="OutputNode";var uT=F.memo(cT);const Q0=()=>null;Q0.displayName="GroupNode";const L4=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),vh=t=>t.id;function z4(t,e){return Tn(t.selectedNodes.map(vh),e.selectedNodes.map(vh))&&Tn(t.selectedEdges.map(vh),e.selectedEdges.map(vh))}const dT=F.memo(({onSelectionChange:t})=>{const e=ln(),{selectedNodes:n,selectedEdges:i}=Tt(L4,z4);return F.useEffect(()=>{const a={nodes:n,edges:i};t?.(a),e.getState().onSelectionChange.forEach(l=>l(a))},[n,i,t]),null});dT.displayName="SelectionListener";const U4=t=>!!t.onSelectionChange;function B4({onSelectionChange:t}){const e=Tt(U4);return t||e?fe.createElement(dT,{onSelectionChange:t}):null}const j4=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function Zo(t,e){F.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function $e(t,e,n){F.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const H4=({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,onConnect:a,onConnectStart:l,onConnectEnd:c,onClickConnectStart:d,onClickConnectEnd:f,nodesDraggable:p,nodesConnectable:y,nodesFocusable:v,edgesFocusable:b,edgesUpdatable:x,elevateNodesOnSelect:I,minZoom:P,maxZoom:O,nodeExtent:B,onNodesChange:q,onEdgesChange:G,elementsSelectable:j,connectionMode:W,snapGrid:X,snapToGrid:A,translateExtent:T,connectOnClick:N,defaultEdgeOptions:U,fitView:L,fitViewOptions:C,onNodesDelete:S,onEdgesDelete:D,onNodeDrag:H,onNodeDragStart:k,onNodeDragStop:$,onSelectionDrag:Z,onSelectionDragStart:Q,onSelectionDragStop:V,noPanClassName:J,nodeOrigin:te,rfId:K,autoPanOnConnect:ie,autoPanOnNodeDrag:ue,onError:de,connectionRadius:ve,isValidConnection:_e,nodeDragThreshold:Ae})=>{const{setNodes:Ne,setEdges:et,setDefaultNodesAndEdges:rt,setMinZoom:Le,setMaxZoom:tt,setTranslateExtent:it,setNodeExtent:Lt,reset:ze}=Tt(j4,Tn),Ee=ln();return F.useEffect(()=>{const At=i?.map(vn=>({...vn,...U}));return rt(n,At),()=>{ze()}},[]),$e("defaultEdgeOptions",U,Ee.setState),$e("connectionMode",W,Ee.setState),$e("onConnect",a,Ee.setState),$e("onConnectStart",l,Ee.setState),$e("onConnectEnd",c,Ee.setState),$e("onClickConnectStart",d,Ee.setState),$e("onClickConnectEnd",f,Ee.setState),$e("nodesDraggable",p,Ee.setState),$e("nodesConnectable",y,Ee.setState),$e("nodesFocusable",v,Ee.setState),$e("edgesFocusable",b,Ee.setState),$e("edgesUpdatable",x,Ee.setState),$e("elementsSelectable",j,Ee.setState),$e("elevateNodesOnSelect",I,Ee.setState),$e("snapToGrid",A,Ee.setState),$e("snapGrid",X,Ee.setState),$e("onNodesChange",q,Ee.setState),$e("onEdgesChange",G,Ee.setState),$e("connectOnClick",N,Ee.setState),$e("fitViewOnInit",L,Ee.setState),$e("fitViewOnInitOptions",C,Ee.setState),$e("onNodesDelete",S,Ee.setState),$e("onEdgesDelete",D,Ee.setState),$e("onNodeDrag",H,Ee.setState),$e("onNodeDragStart",k,Ee.setState),$e("onNodeDragStop",$,Ee.setState),$e("onSelectionDrag",Z,Ee.setState),$e("onSelectionDragStart",Q,Ee.setState),$e("onSelectionDragStop",V,Ee.setState),$e("noPanClassName",J,Ee.setState),$e("nodeOrigin",te,Ee.setState),$e("rfId",K,Ee.setState),$e("autoPanOnConnect",ie,Ee.setState),$e("autoPanOnNodeDrag",ue,Ee.setState),$e("onError",de,Ee.setState),$e("connectionRadius",ve,Ee.setState),$e("isValidConnection",_e,Ee.setState),$e("nodeDragThreshold",Ae,Ee.setState),Zo(t,Ne),Zo(e,et),Zo(P,Le),Zo(O,tt),Zo(T,it),Zo(B,Lt),null},tw={display:"none"},q4={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},hT="react-flow__node-desc",fT="react-flow__edge-desc",$4="react-flow__aria-live",F4=t=>t.ariaLiveMessage;function G4({rfId:t}){const e=Tt(F4);return fe.createElement("div",{id:`${$4}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:q4},e)}function Y4({rfId:t,disableKeyboardA11y:e}){return fe.createElement(fe.Fragment,null,fe.createElement("div",{id:`${hT}-${t}`,style:tw},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),fe.createElement("div",{id:`${fT}-${t}`,style:tw},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&fe.createElement(G4,{rfId:t}))}var Eu=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,i]=F.useState(!1),a=F.useRef(!1),l=F.useRef(new Set([])),[c,d]=F.useMemo(()=>{if(t!==null){const p=(Array.isArray(t)?t:[t]).filter(v=>typeof v=="string").map(v=>v.split("+")),y=p.reduce((v,b)=>v.concat(...b),[]);return[p,y]}return[[],[]]},[t]);return F.useEffect(()=>{const f=typeof document<"u"?document:null,p=e?.target||f;if(t!==null){const y=x=>{if(a.current=x.ctrlKey||x.metaKey||x.shiftKey,(!a.current||a.current&&!e.actInsideInputWithModifier)&&Wm(x))return!1;const P=rw(x.code,d);l.current.add(x[P]),nw(c,l.current,!1)&&(x.preventDefault(),i(!0))},v=x=>{if((!a.current||a.current&&!e.actInsideInputWithModifier)&&Wm(x))return!1;const P=rw(x.code,d);nw(c,l.current,!0)?(i(!1),l.current.clear()):l.current.delete(x[P]),x.key==="Meta"&&l.current.clear(),a.current=!1},b=()=>{l.current.clear(),i(!1)};return p?.addEventListener("keydown",y),p?.addEventListener("keyup",v),window.addEventListener("blur",b),()=>{p?.removeEventListener("keydown",y),p?.removeEventListener("keyup",v),window.removeEventListener("blur",b)}}},[t,i]),n};function nw(t,e,n){return t.filter(i=>n||i.length===e.size).some(i=>i.every(a=>e.has(a)))}function rw(t,e){return e.includes(t)?"code":"key"}function gT(t,e,n,i){const a=t.parentNode||t.parentId;if(!a)return n;const l=e.get(a),c=pl(l,i);return gT(l,e,{x:(n.x??0)+c.x,y:(n.y??0)+c.y,z:(l[kt]?.z??0)>(n.z??0)?l[kt]?.z??0:n.z??0},i)}function pT(t,e,n){t.forEach(i=>{const a=i.parentNode||i.parentId;if(a&&!t.has(a))throw new Error(`Parent node ${a} not found`);if(a||n?.[i.id]){const{x:l,y:c,z:d}=gT(i,t,{...i.position,z:i[kt]?.z??0},e);i.positionAbsolute={x:l,y:c},i[kt].z=d,n?.[i.id]&&(i[kt].isParent=!0)}})}function bm(t,e,n,i){const a=new Map,l={},c=i?1e3:0;return t.forEach(d=>{const f=(Rr(d.zIndex)?d.zIndex:0)+(d.selected?c:0),p=e.get(d.id),y={...d,positionAbsolute:{x:d.position.x,y:d.position.y}},v=d.parentNode||d.parentId;v&&(l[v]=!0);const b=p?.type&&p?.type!==d.type;Object.defineProperty(y,kt,{enumerable:!1,value:{handleBounds:b?void 0:p?.[kt]?.handleBounds,z:f}}),a.set(d.id,y)}),pT(a,n,l),a}function mT(t,e={}){const{getNodes:n,width:i,height:a,minZoom:l,maxZoom:c,d3Zoom:d,d3Selection:f,fitViewOnInitDone:p,fitViewOnInit:y,nodeOrigin:v}=t(),b=e.initial&&!p&&y;if(d&&f&&(b||!e.initial)){const I=n().filter(O=>{const B=e.includeHiddenNodes?O.width&&O.height:!O.hidden;return e.nodes?.length?B&&e.nodes.some(q=>q.id===O.id):B}),P=I.every(O=>O.width&&O.height);if(I.length>0&&P){const O=K0(I,v),{x:B,y:q,zoom:G}=tT(O,i,a,e.minZoom??l,e.maxZoom??c,e.padding??.1),j=$s.translate(B,q).scale(G);return typeof e.duration=="number"&&e.duration>0?d.transform(Ba(f,e.duration),j):d.transform(f,j),!0}}return!1}function K4(t,e){return t.forEach(n=>{const i=e.get(n.id);i&&e.set(i.id,{...i,[kt]:i[kt],selected:n.selected})}),new Map(e)}function X4(t,e){return e.map(n=>{const i=t.find(a=>a.id===n.id);return i&&(n.selected=i.selected),n})}function _h({changedNodes:t,changedEdges:e,get:n,set:i}){const{nodeInternals:a,edges:l,onNodesChange:c,onEdgesChange:d,hasDefaultNodes:f,hasDefaultEdges:p}=n();t?.length&&(f&&i({nodeInternals:K4(t,a)}),c?.(t)),e?.length&&(p&&i({edges:X4(e,l)}),d?.(e))}const Jo=()=>{},Q4={zoomIn:Jo,zoomOut:Jo,zoomTo:Jo,getZoom:()=>1,setViewport:Jo,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Jo,fitBounds:Jo,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},W4=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),Z4=()=>{const t=ln(),{d3Zoom:e,d3Selection:n}=Tt(W4,Tn);return F.useMemo(()=>n&&e?{zoomIn:a=>e.scaleBy(Ba(n,a?.duration),1.2),zoomOut:a=>e.scaleBy(Ba(n,a?.duration),1/1.2),zoomTo:(a,l)=>e.scaleTo(Ba(n,l?.duration),a),getZoom:()=>t.getState().transform[2],setViewport:(a,l)=>{const[c,d,f]=t.getState().transform,p=$s.translate(a.x??c,a.y??d).scale(a.zoom??f);e.transform(Ba(n,l?.duration),p)},getViewport:()=>{const[a,l,c]=t.getState().transform;return{x:a,y:l,zoom:c}},fitView:a=>mT(t.getState,a),setCenter:(a,l,c)=>{const{width:d,height:f,maxZoom:p}=t.getState(),y=typeof c?.zoom<"u"?c.zoom:p,v=d/2-a*y,b=f/2-l*y,x=$s.translate(v,b).scale(y);e.transform(Ba(n,c?.duration),x)},fitBounds:(a,l)=>{const{width:c,height:d,minZoom:f,maxZoom:p}=t.getState(),{x:y,y:v,zoom:b}=tT(a,c,d,f,p,l?.padding??.1),x=$s.translate(y,v).scale(b);e.transform(Ba(n,l?.duration),x)},project:a=>{const{transform:l,snapToGrid:c,snapGrid:d}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),e0(a,l,c,d)},screenToFlowPosition:a=>{const{transform:l,snapToGrid:c,snapGrid:d,domNode:f}=t.getState();if(!f)return a;const{x:p,y}=f.getBoundingClientRect(),v={x:a.x-p,y:a.y-y};return e0(v,l,c,d)},flowToScreenPosition:a=>{const{transform:l,domNode:c}=t.getState();if(!c)return a;const{x:d,y:f}=c.getBoundingClientRect(),p=Z1(a,l);return{x:p.x+d,y:p.y+f}},viewportInitialized:!0}:Q4,[e,n])};function zu(){const t=Z4(),e=ln(),n=F.useCallback(()=>e.getState().getNodes().map(P=>({...P})),[]),i=F.useCallback(P=>e.getState().nodeInternals.get(P),[]),a=F.useCallback(()=>{const{edges:P=[]}=e.getState();return P.map(O=>({...O}))},[]),l=F.useCallback(P=>{const{edges:O=[]}=e.getState();return O.find(B=>B.id===P)},[]),c=F.useCallback(P=>{const{getNodes:O,setNodes:B,hasDefaultNodes:q,onNodesChange:G}=e.getState(),j=O(),W=typeof P=="function"?P(j):P;if(q)B(W);else if(G){const X=W.length===0?j.map(A=>({type:"remove",id:A.id})):W.map(A=>({item:A,type:"reset"}));G(X)}},[]),d=F.useCallback(P=>{const{edges:O=[],setEdges:B,hasDefaultEdges:q,onEdgesChange:G}=e.getState(),j=typeof P=="function"?P(O):P;if(q)B(j);else if(G){const W=j.length===0?O.map(X=>({type:"remove",id:X.id})):j.map(X=>({item:X,type:"reset"}));G(W)}},[]),f=F.useCallback(P=>{const O=Array.isArray(P)?P:[P],{getNodes:B,setNodes:q,hasDefaultNodes:G,onNodesChange:j}=e.getState();if(G){const X=[...B(),...O];q(X)}else if(j){const W=O.map(X=>({item:X,type:"add"}));j(W)}},[]),p=F.useCallback(P=>{const O=Array.isArray(P)?P:[P],{edges:B=[],setEdges:q,hasDefaultEdges:G,onEdgesChange:j}=e.getState();if(G)q([...B,...O]);else if(j){const W=O.map(X=>({item:X,type:"add"}));j(W)}},[]),y=F.useCallback(()=>{const{getNodes:P,edges:O=[],transform:B}=e.getState(),[q,G,j]=B;return{nodes:P().map(W=>({...W})),edges:O.map(W=>({...W})),viewport:{x:q,y:G,zoom:j}}},[]),v=F.useCallback(({nodes:P,edges:O})=>{const{nodeInternals:B,getNodes:q,edges:G,hasDefaultNodes:j,hasDefaultEdges:W,onNodesDelete:X,onEdgesDelete:A,onNodesChange:T,onEdgesChange:N}=e.getState(),U=(P||[]).map(H=>H.id),L=(O||[]).map(H=>H.id),C=q().reduce((H,k)=>{const $=k.parentNode||k.parentId,Z=!U.includes(k.id)&&$&&H.find(V=>V.id===$);return(typeof k.deletable=="boolean"?k.deletable:!0)&&(U.includes(k.id)||Z)&&H.push(k),H},[]),S=G.filter(H=>typeof H.deletable=="boolean"?H.deletable:!0),D=S.filter(H=>L.includes(H.id));if(C||D){const H=eT(C,S),k=[...D,...H],$=k.reduce((Z,Q)=>(Z.includes(Q.id)||Z.push(Q.id),Z),[]);if((W||j)&&(W&&e.setState({edges:G.filter(Z=>!$.includes(Z.id))}),j&&(C.forEach(Z=>{B.delete(Z.id)}),e.setState({nodeInternals:new Map(B)}))),$.length>0&&(A?.(k),N&&N($.map(Z=>({id:Z,type:"remove"})))),C.length>0&&(X?.(C),T)){const Z=C.map(Q=>({id:Q.id,type:"remove"}));T(Z)}}},[]),b=F.useCallback(P=>{const O=v4(P),B=O?null:e.getState().nodeInternals.get(P.id);return!O&&!B?[null,null,O]:[O?P:KE(B),B,O]},[]),x=F.useCallback((P,O=!0,B)=>{const[q,G,j]=b(P);return q?(B||e.getState().getNodes()).filter(W=>{if(!j&&(W.id===G.id||!W.positionAbsolute))return!1;const X=KE(W),A=Qm(X,q);return O&&A>0||A>=q.width*q.height}):[]},[]),I=F.useCallback((P,O,B=!0)=>{const[q]=b(P);if(!q)return!1;const G=Qm(q,O);return B&&G>0||G>=q.width*q.height},[]);return F.useMemo(()=>({...t,getNodes:n,getNode:i,getEdges:a,getEdge:l,setNodes:c,setEdges:d,addNodes:f,addEdges:p,toObject:y,deleteElements:v,getIntersectingNodes:x,isNodeIntersecting:I}),[t,n,i,a,l,c,d,f,p,y,v,x,I])}const J4={actInsideInputWithModifier:!1};var eD=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=ln(),{deleteElements:i}=zu(),a=Eu(t,J4),l=Eu(e);F.useEffect(()=>{if(a){const{edges:c,getNodes:d}=n.getState(),f=d().filter(y=>y.selected),p=c.filter(y=>y.selected);i({nodes:f,edges:p}),n.setState({nodesSelectionActive:!1})}},[a]),F.useEffect(()=>{n.setState({multiSelectionActive:l})},[l])};function tD(t){const e=ln();F.useEffect(()=>{let n;const i=()=>{if(!t.current)return;const a=j0(t.current);(a.height===0||a.width===0)&&e.getState().onError?.("004",ts.error004()),e.setState({width:a.width||500,height:a.height||500})};return i(),window.addEventListener("resize",i),t.current&&(n=new ResizeObserver(()=>i()),n.observe(t.current)),()=>{window.removeEventListener("resize",i),n&&t.current&&n.unobserve(t.current)}},[])}const W0={position:"absolute",width:"100%",height:"100%",top:0,left:0},nD=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,bh=t=>({x:t.x,y:t.y,zoom:t.k}),el=(t,e)=>t.target.closest(`.${e}`),iw=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),sw=t=>{const e=t.ctrlKey&&rf()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},rD=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),iD=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:i,zoomOnScroll:a=!0,zoomOnPinch:l=!0,panOnScroll:c=!1,panOnScrollSpeed:d=.5,panOnScrollMode:f=qa.Free,zoomOnDoubleClick:p=!0,elementsSelectable:y,panOnDrag:v=!0,defaultViewport:b,translateExtent:x,minZoom:I,maxZoom:P,zoomActivationKeyCode:O,preventScrolling:B=!0,children:q,noWheelClassName:G,noPanClassName:j})=>{const W=F.useRef(),X=ln(),A=F.useRef(!1),T=F.useRef(!1),N=F.useRef(null),U=F.useRef({x:0,y:0,zoom:0}),{d3Zoom:L,d3Selection:C,d3ZoomHandler:S,userSelectionActive:D}=Tt(rD,Tn),H=Eu(O),k=F.useRef(0),$=F.useRef(!1),Z=F.useRef();return tD(N),F.useEffect(()=>{if(N.current){const Q=N.current.getBoundingClientRect(),V=c4().scaleExtent([I,P]).translateExtent(x),J=Lr(N.current).call(V),te=$s.translate(b.x,b.y).scale(Sl(b.zoom,I,P)),K=[[0,0],[Q.width,Q.height]],ie=V.constrain()(te,K,x);V.transform(J,ie),V.wheelDelta(sw),X.setState({d3Zoom:V,d3Selection:J,d3ZoomHandler:J.on("wheel.zoom"),transform:[ie.x,ie.y,ie.k],domNode:N.current.closest(".react-flow")})}},[]),F.useEffect(()=>{C&&L&&(c&&!H&&!D?C.on("wheel.zoom",Q=>{if(el(Q,G))return!1;Q.preventDefault(),Q.stopImmediatePropagation();const V=C.property("__zoom").k||1;if(Q.ctrlKey&&l){const _e=fi(Q),Ae=sw(Q),Ne=V*Math.pow(2,Ae);L.scaleTo(C,Ne,_e,Q);return}const J=Q.deltaMode===1?20:1;let te=f===qa.Vertical?0:Q.deltaX*J,K=f===qa.Horizontal?0:Q.deltaY*J;!rf()&&Q.shiftKey&&f!==qa.Vertical&&(te=Q.deltaY*J,K=0),L.translateBy(C,-(te/V)*d,-(K/V)*d,{internal:!0});const ie=bh(C.property("__zoom")),{onViewportChangeStart:ue,onViewportChange:de,onViewportChangeEnd:ve}=X.getState();clearTimeout(Z.current),$.current||($.current=!0,e?.(Q,ie),ue?.(ie)),$.current&&(t?.(Q,ie),de?.(ie),Z.current=setTimeout(()=>{n?.(Q,ie),ve?.(ie),$.current=!1},150))},{passive:!1}):typeof S<"u"&&C.on("wheel.zoom",function(Q,V){if(!B&&Q.type==="wheel"&&!Q.ctrlKey||el(Q,G))return null;Q.preventDefault(),S.call(this,Q,V)},{passive:!1}))},[D,c,f,C,L,S,H,l,B,G,e,t,n]),F.useEffect(()=>{L&&L.on("start",Q=>{if(!Q.sourceEvent||Q.sourceEvent.internal)return null;k.current=Q.sourceEvent?.button;const{onViewportChangeStart:V}=X.getState(),J=bh(Q.transform);A.current=!0,U.current=J,Q.sourceEvent?.type==="mousedown"&&X.setState({paneDragging:!0}),V?.(J),e?.(Q.sourceEvent,J)})},[L,e]),F.useEffect(()=>{L&&(D&&!A.current?L.on("zoom",null):D||L.on("zoom",Q=>{const{onViewportChange:V}=X.getState();if(X.setState({transform:[Q.transform.x,Q.transform.y,Q.transform.k]}),T.current=!!(i&&iw(v,k.current??0)),(t||V)&&!Q.sourceEvent?.internal){const J=bh(Q.transform);V?.(J),t?.(Q.sourceEvent,J)}}))},[D,L,t,v,i]),F.useEffect(()=>{L&&L.on("end",Q=>{if(!Q.sourceEvent||Q.sourceEvent.internal)return null;const{onViewportChangeEnd:V}=X.getState();if(A.current=!1,X.setState({paneDragging:!1}),i&&iw(v,k.current??0)&&!T.current&&i(Q.sourceEvent),T.current=!1,(n||V)&&nD(U.current,Q.transform)){const J=bh(Q.transform);U.current=J,clearTimeout(W.current),W.current=setTimeout(()=>{V?.(J),n?.(Q.sourceEvent,J)},c?150:0)}})},[L,c,v,n,i]),F.useEffect(()=>{L&&L.filter(Q=>{const V=H||a,J=l&&Q.ctrlKey;if((v===!0||Array.isArray(v)&&v.includes(1))&&Q.button===1&&Q.type==="mousedown"&&(el(Q,"react-flow__node")||el(Q,"react-flow__edge")))return!0;if(!v&&!V&&!c&&!p&&!l||D||!p&&Q.type==="dblclick"||el(Q,G)&&Q.type==="wheel"||el(Q,j)&&(Q.type!=="wheel"||c&&Q.type==="wheel"&&!H)||!l&&Q.ctrlKey&&Q.type==="wheel"||!V&&!c&&!J&&Q.type==="wheel"||!v&&(Q.type==="mousedown"||Q.type==="touchstart")||Array.isArray(v)&&!v.includes(Q.button)&&Q.type==="mousedown")return!1;const te=Array.isArray(v)&&v.includes(Q.button)||!Q.button||Q.button<=1;return(!Q.ctrlKey||Q.type==="wheel")&&te})},[D,L,a,l,c,p,v,y,H]),fe.createElement("div",{className:"react-flow__renderer",ref:N,style:W0},q)},sD=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function aD(){const{userSelectionActive:t,userSelectionRect:e}=Tt(sD,Tn);return t&&e?fe.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function aw(t,e){const n=e.parentNode||e.parentId,i=t.find(a=>a.id===n);if(i){const a=e.position.x+e.width-i.width,l=e.position.y+e.height-i.height;if(a>0||l>0||e.position.x<0||e.position.y<0){if(i.style={...i.style},i.style.width=i.style.width??i.width,i.style.height=i.style.height??i.height,a>0&&(i.style.width+=a),l>0&&(i.style.height+=l),e.position.x<0){const c=Math.abs(e.position.x);i.position.x=i.position.x-c,i.style.width+=c,e.position.x=0}if(e.position.y<0){const c=Math.abs(e.position.y);i.position.y=i.position.y-c,i.style.height+=c,e.position.y=0}i.width=i.style.width,i.height=i.style.height}}}function yT(t,e){if(t.some(i=>i.type==="reset"))return t.filter(i=>i.type==="reset").map(i=>i.item);const n=t.filter(i=>i.type==="add").map(i=>i.item);return e.reduce((i,a)=>{const l=t.filter(d=>d.id===a.id);if(l.length===0)return i.push(a),i;const c={...a};for(const d of l)if(d)switch(d.type){case"select":{c.selected=d.selected;break}case"position":{typeof d.position<"u"&&(c.position=d.position),typeof d.positionAbsolute<"u"&&(c.positionAbsolute=d.positionAbsolute),typeof d.dragging<"u"&&(c.dragging=d.dragging),c.expandParent&&aw(i,c);break}case"dimensions":{typeof d.dimensions<"u"&&(c.width=d.dimensions.width,c.height=d.dimensions.height),typeof d.updateStyle<"u"&&(c.style={...c.style||{},...d.dimensions}),typeof d.resizing=="boolean"&&(c.resizing=d.resizing),c.expandParent&&aw(i,c);break}case"remove":return i}return i.push(c),i},n)}function vT(t,e){return yT(t,e)}function oD(t,e){return yT(t,e)}const Ps=(t,e)=>({id:t,type:"select",selected:e});function ul(t,e){return t.reduce((n,i)=>{const a=e.includes(i.id);return!i.selected&&a?(i.selected=!0,n.push(Ps(i.id,!0))):i.selected&&!a&&(i.selected=!1,n.push(Ps(i.id,!1))),n},[])}const Em=(t,e)=>n=>{n.target===e.current&&t?.(n)},lD=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),_T=F.memo(({isSelecting:t,selectionMode:e=_u.Full,panOnDrag:n,onSelectionStart:i,onSelectionEnd:a,onPaneClick:l,onPaneContextMenu:c,onPaneScroll:d,onPaneMouseEnter:f,onPaneMouseMove:p,onPaneMouseLeave:y,children:v})=>{const b=F.useRef(null),x=ln(),I=F.useRef(0),P=F.useRef(0),O=F.useRef(),{userSelectionActive:B,elementsSelectable:q,dragging:G}=Tt(lD,Tn),j=()=>{x.setState({userSelectionActive:!1,userSelectionRect:null}),I.current=0,P.current=0},W=S=>{l?.(S),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},X=S=>{if(Array.isArray(n)&&n?.includes(2)){S.preventDefault();return}c?.(S)},A=d?S=>d(S):void 0,T=S=>{const{resetSelectedElements:D,domNode:H}=x.getState();if(O.current=H?.getBoundingClientRect(),!q||!t||S.button!==0||S.target!==b.current||!O.current)return;const{x:k,y:$}=Fs(S,O.current);D(),x.setState({userSelectionRect:{width:0,height:0,startX:k,startY:$,x:k,y:$}}),i?.(S)},N=S=>{const{userSelectionRect:D,nodeInternals:H,edges:k,transform:$,onNodesChange:Z,onEdgesChange:Q,nodeOrigin:V,getNodes:J}=x.getState();if(!t||!O.current||!D)return;x.setState({userSelectionActive:!0,nodesSelectionActive:!1});const te=Fs(S,O.current),K=D.startX??0,ie=D.startY??0,ue={...D,x:te.x<K?te.x:K,y:te.y<ie?te.y:ie,width:Math.abs(te.x-K),height:Math.abs(te.y-ie)},de=J(),ve=J1(H,ue,$,e===_u.Partial,!0,V),_e=eT(ve,k).map(Ne=>Ne.id),Ae=ve.map(Ne=>Ne.id);if(I.current!==Ae.length){I.current=Ae.length;const Ne=ul(de,Ae);Ne.length&&Z?.(Ne)}if(P.current!==_e.length){P.current=_e.length;const Ne=ul(k,_e);Ne.length&&Q?.(Ne)}x.setState({userSelectionRect:ue})},U=S=>{if(S.button!==0)return;const{userSelectionRect:D}=x.getState();!B&&D&&S.target===b.current&&W?.(S),x.setState({nodesSelectionActive:I.current>0}),j(),a?.(S)},L=S=>{B&&(x.setState({nodesSelectionActive:I.current>0}),a?.(S)),j()},C=q&&(t||B);return fe.createElement("div",{className:Pn(["react-flow__pane",{dragging:G,selection:t}]),onClick:C?void 0:Em(W,b),onContextMenu:Em(X,b),onWheel:Em(A,b),onMouseEnter:C?void 0:f,onMouseDown:C?T:void 0,onMouseMove:C?N:p,onMouseUp:C?U:void 0,onMouseLeave:C?L:y,ref:b,style:W0},v,fe.createElement(aD,null))});_T.displayName="Pane";function bT(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const i=e.get(n);return i?i.selected?!0:bT(i,e):!1}function ow(t,e,n){let i=t;do{if(i?.matches(e))return!0;if(i===n.current)return!1;i=i.parentElement}while(i);return!1}function cD(t,e,n,i){return Array.from(t.values()).filter(a=>(a.selected||a.id===i)&&(!a.parentNode||a.parentId||!bT(a,t))&&(a.draggable||e&&typeof a.draggable>"u")).map(a=>({id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:n.x-(a.positionAbsolute?.x??0),y:n.y-(a.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}))}function uD(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function ET(t,e,n,i,a=[0,0],l){const c=uD(t,t.extent||i);let d=c;const f=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(f&&t.width&&t.height){const v=n.get(f),{x:b,y:x}=pl(v,a).positionAbsolute;d=v&&Rr(b)&&Rr(x)&&Rr(v.width)&&Rr(v.height)?[[b+t.width*a[0],x+t.height*a[1]],[b+v.width-t.width+t.width*a[0],x+v.height-t.height+t.height*a[1]]]:d}else l?.("005",ts.error005()),d=c;else if(t.extent&&f&&t.extent!=="parent"){const v=n.get(f),{x:b,y:x}=pl(v,a).positionAbsolute;d=[[t.extent[0][0]+b,t.extent[0][1]+x],[t.extent[1][0]+b,t.extent[1][1]+x]]}let p={x:0,y:0};if(f){const v=n.get(f);p=pl(v,a).positionAbsolute}const y=d&&d!=="parent"?H0(e,d):e;return{position:{x:y.x-p.x,y:y.y-p.y},positionAbsolute:y}}function wm({nodeId:t,dragItems:e,nodeInternals:n}){const i=e.map(a=>({...n.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[t?i.find(a=>a.id===t):i[0],i]}const lw=(t,e,n,i)=>{const a=e.querySelectorAll(t);if(!a||!a.length)return null;const l=Array.from(a),c=e.getBoundingClientRect(),d={x:c.width*i[0],y:c.height*i[1]};return l.map(f=>{const p=f.getBoundingClientRect();return{id:f.getAttribute("data-handleid"),position:f.getAttribute("data-handlepos"),x:(p.left-c.left-d.x)/n,y:(p.top-c.top-d.y)/n,...j0(f)}})};function Gc(t,e,n){return n===void 0?n:i=>{const a=e().nodeInternals.get(t);a&&n(i,{...a})}}function n0({id:t,store:e,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:a,unselectNodesAndEdges:l,multiSelectionActive:c,nodeInternals:d,onError:f}=e.getState(),p=d.get(t);if(!p){f?.("012",ts.error012(t));return}e.setState({nodesSelectionActive:!1}),p.selected?(n||p.selected&&c)&&(l({nodes:[p],edges:[]}),requestAnimationFrame(()=>i?.current?.blur())):a([t])}function dD(){const t=ln();return F.useCallback(({sourceEvent:n})=>{const{transform:i,snapGrid:a,snapToGrid:l}=t.getState(),c=n.touches?n.touches[0].clientX:n.clientX,d=n.touches?n.touches[0].clientY:n.clientY,f={x:(c-i[0])/i[2],y:(d-i[1])/i[2]};return{xSnapped:l?a[0]*Math.round(f.x/a[0]):f.x,ySnapped:l?a[1]*Math.round(f.y/a[1]):f.y,...f}},[])}function xm(t){return(e,n,i)=>t?.(e,i)}function wT({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:i,nodeId:a,isSelectable:l,selectNodesOnDrag:c}){const d=ln(),[f,p]=F.useState(!1),y=F.useRef([]),v=F.useRef({x:null,y:null}),b=F.useRef(0),x=F.useRef(null),I=F.useRef({x:0,y:0}),P=F.useRef(null),O=F.useRef(!1),B=F.useRef(!1),q=F.useRef(!1),G=dD();return F.useEffect(()=>{if(t?.current){const j=Lr(t.current),W=({x:T,y:N})=>{const{nodeInternals:U,onNodeDrag:L,onSelectionDrag:C,updateNodePositions:S,nodeExtent:D,snapGrid:H,snapToGrid:k,nodeOrigin:$,onError:Z}=d.getState();v.current={x:T,y:N};let Q=!1,V={x:0,y:0,x2:0,y2:0};if(y.current.length>1&&D){const te=K0(y.current,$);V=q0(te)}if(y.current=y.current.map(te=>{const K={x:T-te.distance.x,y:N-te.distance.y};k&&(K.x=H[0]*Math.round(K.x/H[0]),K.y=H[1]*Math.round(K.y/H[1]));const ie=[[D[0][0],D[0][1]],[D[1][0],D[1][1]]];y.current.length>1&&D&&!te.extent&&(ie[0][0]=te.positionAbsolute.x-V.x+D[0][0],ie[1][0]=te.positionAbsolute.x+(te.width??0)-V.x2+D[1][0],ie[0][1]=te.positionAbsolute.y-V.y+D[0][1],ie[1][1]=te.positionAbsolute.y+(te.height??0)-V.y2+D[1][1]);const ue=ET(te,K,U,ie,$,Z);return Q=Q||te.position.x!==ue.position.x||te.position.y!==ue.position.y,te.position=ue.position,te.positionAbsolute=ue.positionAbsolute,te}),!Q)return;S(y.current,!0,!0),p(!0);const J=a?L:xm(C);if(J&&P.current){const[te,K]=wm({nodeId:a,dragItems:y.current,nodeInternals:U});J(P.current,te,K)}},X=()=>{if(!x.current)return;const[T,N]=$1(I.current,x.current);if(T!==0||N!==0){const{transform:U,panBy:L}=d.getState();v.current.x=(v.current.x??0)-T/U[2],v.current.y=(v.current.y??0)-N/U[2],L({x:T,y:N})&&W(v.current)}b.current=requestAnimationFrame(X)},A=T=>{const{nodeInternals:N,multiSelectionActive:U,nodesDraggable:L,unselectNodesAndEdges:C,onNodeDragStart:S,onSelectionDragStart:D}=d.getState();B.current=!0;const H=a?S:xm(D);(!c||!l)&&!U&&a&&(N.get(a)?.selected||C()),a&&l&&c&&n0({id:a,store:d,nodeRef:t});const k=G(T);if(v.current=k,y.current=cD(N,L,k,a),H&&y.current){const[$,Z]=wm({nodeId:a,dragItems:y.current,nodeInternals:N});H(T.sourceEvent,$,Z)}};if(e)j.on(".drag",null);else{const T=_C().on("start",N=>{const{domNode:U,nodeDragThreshold:L}=d.getState();L===0&&A(N),q.current=!1;const C=G(N);v.current=C,x.current=U?.getBoundingClientRect()||null,I.current=Fs(N.sourceEvent,x.current)}).on("drag",N=>{const U=G(N),{autoPanOnNodeDrag:L,nodeDragThreshold:C}=d.getState();if(N.sourceEvent.type==="touchmove"&&N.sourceEvent.touches.length>1&&(q.current=!0),!q.current){if(!O.current&&B.current&&L&&(O.current=!0,X()),!B.current){const S=U.xSnapped-(v?.current?.x??0),D=U.ySnapped-(v?.current?.y??0);Math.sqrt(S*S+D*D)>C&&A(N)}(v.current.x!==U.xSnapped||v.current.y!==U.ySnapped)&&y.current&&B.current&&(P.current=N.sourceEvent,I.current=Fs(N.sourceEvent,x.current),W(U))}}).on("end",N=>{if(!(!B.current||q.current)&&(p(!1),O.current=!1,B.current=!1,cancelAnimationFrame(b.current),y.current)){const{updateNodePositions:U,nodeInternals:L,onNodeDragStop:C,onSelectionDragStop:S}=d.getState(),D=a?C:xm(S);if(U(y.current,!1,!1),D){const[H,k]=wm({nodeId:a,dragItems:y.current,nodeInternals:L});D(N.sourceEvent,H,k)}}}).filter(N=>{const U=N.target;return!N.button&&(!n||!ow(U,`.${n}`,t))&&(!i||ow(U,i,t))});return j.call(T),()=>{j.on(".drag",null)}}}},[t,e,n,i,l,d,a,c,G]),f}function xT(){const t=ln();return F.useCallback(n=>{const{nodeInternals:i,nodeExtent:a,updateNodePositions:l,getNodes:c,snapToGrid:d,snapGrid:f,onError:p,nodesDraggable:y}=t.getState(),v=c().filter(q=>q.selected&&(q.draggable||y&&typeof q.draggable>"u")),b=d?f[0]:5,x=d?f[1]:5,I=n.isShiftPressed?4:1,P=n.x*b*I,O=n.y*x*I,B=v.map(q=>{if(q.positionAbsolute){const G={x:q.positionAbsolute.x+P,y:q.positionAbsolute.y+O};d&&(G.x=f[0]*Math.round(G.x/f[0]),G.y=f[1]*Math.round(G.y/f[1]));const{positionAbsolute:j,position:W}=ET(q,G,i,a,void 0,p);q.position=W,q.positionAbsolute=j}return q});l(B,!0,!1)},[])}const ml={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Yc=t=>{const e=({id:n,type:i,data:a,xPos:l,yPos:c,xPosOrigin:d,yPosOrigin:f,selected:p,onClick:y,onMouseEnter:v,onMouseMove:b,onMouseLeave:x,onContextMenu:I,onDoubleClick:P,style:O,className:B,isDraggable:q,isSelectable:G,isConnectable:j,isFocusable:W,selectNodesOnDrag:X,sourcePosition:A,targetPosition:T,hidden:N,resizeObserver:U,dragHandle:L,zIndex:C,isParent:S,noDragClassName:D,noPanClassName:H,initialized:k,disableKeyboardA11y:$,ariaLabel:Z,rfId:Q,hasHandleBounds:V})=>{const J=ln(),te=F.useRef(null),K=F.useRef(null),ie=F.useRef(A),ue=F.useRef(T),de=F.useRef(i),ve=G||q||y||v||b||x,_e=xT(),Ae=Gc(n,J.getState,v),Ne=Gc(n,J.getState,b),et=Gc(n,J.getState,x),rt=Gc(n,J.getState,I),Le=Gc(n,J.getState,P),tt=ze=>{const{nodeDragThreshold:Ee}=J.getState();if(G&&(!X||!q||Ee>0)&&n0({id:n,store:J,nodeRef:te}),y){const At=J.getState().nodeInternals.get(n);At&&y(ze,{...At})}},it=ze=>{if(!Wm(ze)&&!$)if(G1.includes(ze.key)&&G){const Ee=ze.key==="Escape";n0({id:n,store:J,unselect:Ee,nodeRef:te})}else q&&p&&Object.prototype.hasOwnProperty.call(ml,ze.key)&&(J.setState({ariaLiveMessage:`Moved selected node ${ze.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~l}, y: ${~~c}`}),_e({x:ml[ze.key].x,y:ml[ze.key].y,isShiftPressed:ze.shiftKey}))};F.useEffect(()=>()=>{K.current&&(U?.unobserve(K.current),K.current=null)},[]),F.useEffect(()=>{if(te.current&&!N){const ze=te.current;(!k||!V||K.current!==ze)&&(K.current&&U?.unobserve(K.current),U?.observe(ze),K.current=ze)}},[N,k,V]),F.useEffect(()=>{const ze=de.current!==i,Ee=ie.current!==A,At=ue.current!==T;te.current&&(ze||Ee||At)&&(ze&&(de.current=i),Ee&&(ie.current=A),At&&(ue.current=T),J.getState().updateNodeDimensions([{id:n,nodeElement:te.current,forceUpdate:!0}]))},[n,i,A,T]);const Lt=wT({nodeRef:te,disabled:N||!q,noDragClassName:D,handleSelector:L,nodeId:n,isSelectable:G,selectNodesOnDrag:X});return N?null:fe.createElement("div",{className:Pn(["react-flow__node",`react-flow__node-${i}`,{[H]:q},B,{selected:p,selectable:G,parent:S,dragging:Lt}]),ref:te,style:{zIndex:C,transform:`translate(${d}px,${f}px)`,pointerEvents:ve?"all":"none",visibility:k?"visible":"hidden",...O},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Ae,onMouseMove:Ne,onMouseLeave:et,onContextMenu:rt,onClick:tt,onDoubleClick:Le,onKeyDown:W?it:void 0,tabIndex:W?0:void 0,role:W?"button":void 0,"aria-describedby":$?void 0:`${hT}-${Q}`,"aria-label":Z},fe.createElement(S4,{value:n},fe.createElement(t,{id:n,data:a,type:i,xPos:l,yPos:c,selected:p,isConnectable:j,sourcePosition:A,targetPosition:T,dragging:Lt,dragHandle:L,zIndex:C})))};return e.displayName="NodeWrapper",F.memo(e)};const hD=t=>{const e=t.getNodes().filter(n=>n.selected);return{...K0(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function fD({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const i=ln(),{width:a,height:l,x:c,y:d,transformString:f,userSelectionActive:p}=Tt(hD,Tn),y=xT(),v=F.useRef(null);if(F.useEffect(()=>{n||v.current?.focus({preventScroll:!0})},[n]),wT({nodeRef:v}),p||!a||!l)return null;const b=t?I=>{const P=i.getState().getNodes().filter(O=>O.selected);t(I,P)}:void 0,x=I=>{Object.prototype.hasOwnProperty.call(ml,I.key)&&y({x:ml[I.key].x,y:ml[I.key].y,isShiftPressed:I.shiftKey})};return fe.createElement("div",{className:Pn(["react-flow__nodesselection","react-flow__container",e]),style:{transform:f}},fe.createElement("div",{ref:v,className:"react-flow__nodesselection-rect",onContextMenu:b,tabIndex:n?void 0:-1,onKeyDown:n?void 0:x,style:{width:a,height:l,top:d,left:c}}))}var gD=F.memo(fD);const pD=t=>t.nodesSelectionActive,TT=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,deleteKeyCode:d,onMove:f,onMoveStart:p,onMoveEnd:y,selectionKeyCode:v,selectionOnDrag:b,selectionMode:x,onSelectionStart:I,onSelectionEnd:P,multiSelectionKeyCode:O,panActivationKeyCode:B,zoomActivationKeyCode:q,elementsSelectable:G,zoomOnScroll:j,zoomOnPinch:W,panOnScroll:X,panOnScrollSpeed:A,panOnScrollMode:T,zoomOnDoubleClick:N,panOnDrag:U,defaultViewport:L,translateExtent:C,minZoom:S,maxZoom:D,preventScrolling:H,onSelectionContextMenu:k,noWheelClassName:$,noPanClassName:Z,disableKeyboardA11y:Q})=>{const V=Tt(pD),J=Eu(v),te=Eu(B),K=te||U,ie=te||X,ue=J||b&&K!==!0;return eD({deleteKeyCode:d,multiSelectionKeyCode:O}),fe.createElement(iD,{onMove:f,onMoveStart:p,onMoveEnd:y,onPaneContextMenu:l,elementsSelectable:G,zoomOnScroll:j,zoomOnPinch:W,panOnScroll:ie,panOnScrollSpeed:A,panOnScrollMode:T,zoomOnDoubleClick:N,panOnDrag:!J&&K,defaultViewport:L,translateExtent:C,minZoom:S,maxZoom:D,zoomActivationKeyCode:q,preventScrolling:H,noWheelClassName:$,noPanClassName:Z},fe.createElement(_T,{onSelectionStart:I,onSelectionEnd:P,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:K,isSelecting:!!ue,selectionMode:x},t,V&&fe.createElement(gD,{onSelectionContextMenu:k,noPanClassName:Z,disableKeyboardA11y:Q})))};TT.displayName="FlowRenderer";var mD=F.memo(TT);function yD(t){return Tt(F.useCallback(n=>t?J1(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function vD(t){const e={input:Yc(t.input||lT),default:Yc(t.default||t0),output:Yc(t.output||uT),group:Yc(t.group||Q0)},n={},i=Object.keys(t).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,l)=>(a[l]=Yc(t[l]||t0),a),n);return{...e,...i}}const _D=({x:t,y:e,width:n,height:i,origin:a})=>!n||!i?{x:t,y:e}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:t,y:e}:{x:t-n*a[0],y:e-i*a[1]},bD=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),ST=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:i,elementsSelectable:a,updateNodeDimensions:l,onError:c}=Tt(bD,Tn),d=yD(t.onlyRenderVisibleElements),f=F.useRef(),p=F.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const y=new ResizeObserver(v=>{const b=v.map(x=>({id:x.target.getAttribute("data-id"),nodeElement:x.target,forceUpdate:!0}));l(b)});return f.current=y,y},[]);return F.useEffect(()=>()=>{f?.current?.disconnect()},[]),fe.createElement("div",{className:"react-flow__nodes",style:W0},d.map(y=>{let v=y.type||"default";t.nodeTypes[v]||(c?.("003",ts.error003(v)),v="default");const b=t.nodeTypes[v]||t.nodeTypes.default,x=!!(y.draggable||e&&typeof y.draggable>"u"),I=!!(y.selectable||a&&typeof y.selectable>"u"),P=!!(y.connectable||n&&typeof y.connectable>"u"),O=!!(y.focusable||i&&typeof y.focusable>"u"),B=t.nodeExtent?H0(y.positionAbsolute,t.nodeExtent):y.positionAbsolute,q=B?.x??0,G=B?.y??0,j=_D({x:q,y:G,width:y.width??0,height:y.height??0,origin:t.nodeOrigin});return fe.createElement(b,{key:y.id,id:y.id,className:y.className,style:y.style,type:v,data:y.data,sourcePosition:y.sourcePosition||Se.Bottom,targetPosition:y.targetPosition||Se.Top,hidden:y.hidden,xPos:q,yPos:G,xPosOrigin:j.x,yPosOrigin:j.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!y.selected,isDraggable:x,isSelectable:I,isConnectable:P,isFocusable:O,resizeObserver:p,dragHandle:y.dragHandle,zIndex:y[kt]?.z??0,isParent:!!y[kt]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!y.width&&!!y.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:y.ariaLabel,hasHandleBounds:!!y[kt]?.handleBounds})}))};ST.displayName="NodeRenderer";var ED=F.memo(ST);const wD=(t,e,n)=>n===Se.Left?t-e:n===Se.Right?t+e:t,xD=(t,e,n)=>n===Se.Top?t-e:n===Se.Bottom?t+e:t,cw="react-flow__edgeupdater",uw=({position:t,centerX:e,centerY:n,radius:i=10,onMouseDown:a,onMouseEnter:l,onMouseOut:c,type:d})=>fe.createElement("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:c,className:Pn([cw,`${cw}-${d}`]),cx:wD(e,i,t),cy:xD(n,i,t),r:i,stroke:"transparent",fill:"transparent"}),TD=()=>!0;var tl=t=>{const e=({id:n,className:i,type:a,data:l,onClick:c,onEdgeDoubleClick:d,selected:f,animated:p,label:y,labelStyle:v,labelShowBg:b,labelBgStyle:x,labelBgPadding:I,labelBgBorderRadius:P,style:O,source:B,target:q,sourceX:G,sourceY:j,targetX:W,targetY:X,sourcePosition:A,targetPosition:T,elementsSelectable:N,hidden:U,sourceHandleId:L,targetHandleId:C,onContextMenu:S,onMouseEnter:D,onMouseMove:H,onMouseLeave:k,reconnectRadius:$,onReconnect:Z,onReconnectStart:Q,onReconnectEnd:V,markerEnd:J,markerStart:te,rfId:K,ariaLabel:ie,isFocusable:ue,isReconnectable:de,pathOptions:ve,interactionWidth:_e,disableKeyboardA11y:Ae})=>{const Ne=F.useRef(null),[et,rt]=F.useState(!1),[Le,tt]=F.useState(!1),it=ln(),Lt=F.useMemo(()=>`url('#${Jm(te,K)}')`,[te,K]),ze=F.useMemo(()=>`url('#${Jm(J,K)}')`,[J,K]);if(U)return null;const Ee=Ut=>{const{edges:Jt,addSelectedEdges:Nn,unselectNodesAndEdges:In,multiSelectionActive:en}=it.getState(),cn=Jt.find(Cn=>Cn.id===n);cn&&(N&&(it.setState({nodesSelectionActive:!1}),cn.selected&&en?(In({nodes:[],edges:[cn]}),Ne.current?.blur()):Nn([n])),c&&c(Ut,cn))},At=Fc(n,it.getState,d),vn=Fc(n,it.getState,S),Gt=Fc(n,it.getState,D),Fn=Fc(n,it.getState,H),An=Fc(n,it.getState,k),Rn=(Ut,Jt)=>{if(Ut.button!==0)return;const{edges:Nn,isValidConnection:In}=it.getState(),en=Jt?q:B,cn=(Jt?C:L)||null,Cn=Jt?"target":"source",Ti=In||TD,Si=Jt,Cr=Nn.find(Yn=>Yn.id===n);tt(!0),Q?.(Ut,Cr,Cn);const Gn=Yn=>{tt(!1),V?.(Yn,Cr,Cn)};iT({event:Ut,handleId:cn,nodeId:en,onConnect:Yn=>Z?.(Cr,Yn),isTarget:Si,getState:it.getState,setState:it.setState,isValidConnection:Ti,edgeUpdaterType:Cn,onReconnectEnd:Gn})},Ir=Ut=>Rn(Ut,!0),at=Ut=>Rn(Ut,!1),Fe=()=>rt(!0),zt=()=>rt(!1),Et=!N&&!c,Fr=Ut=>{if(!Ae&&G1.includes(Ut.key)&&N){const{unselectNodesAndEdges:Jt,addSelectedEdges:Nn,edges:In}=it.getState();Ut.key==="Escape"?(Ne.current?.blur(),Jt({edges:[In.find(cn=>cn.id===n)]})):Nn([n])}};return fe.createElement("g",{className:Pn(["react-flow__edge",`react-flow__edge-${a}`,i,{selected:f,animated:p,inactive:Et,updating:et}]),onClick:Ee,onDoubleClick:At,onContextMenu:vn,onMouseEnter:Gt,onMouseMove:Fn,onMouseLeave:An,onKeyDown:ue?Fr:void 0,tabIndex:ue?0:void 0,role:ue?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":ie===null?void 0:ie||`Edge from ${B} to ${q}`,"aria-describedby":ue?`${fT}-${K}`:void 0,ref:Ne},!Le&&fe.createElement(t,{id:n,source:B,target:q,selected:f,animated:p,label:y,labelStyle:v,labelShowBg:b,labelBgStyle:x,labelBgPadding:I,labelBgBorderRadius:P,data:l,style:O,sourceX:G,sourceY:j,targetX:W,targetY:X,sourcePosition:A,targetPosition:T,sourceHandleId:L,targetHandleId:C,markerStart:Lt,markerEnd:ze,pathOptions:ve,interactionWidth:_e}),de&&fe.createElement(fe.Fragment,null,(de==="source"||de===!0)&&fe.createElement(uw,{position:A,centerX:G,centerY:j,radius:$,onMouseDown:Ir,onMouseEnter:Fe,onMouseOut:zt,type:"source"}),(de==="target"||de===!0)&&fe.createElement(uw,{position:T,centerX:W,centerY:X,radius:$,onMouseDown:at,onMouseEnter:Fe,onMouseOut:zt,type:"target"})))};return e.displayName="EdgeWrapper",F.memo(e)};function SD(t){const e={default:tl(t.default||sf),straight:tl(t.bezier||G0),step:tl(t.step||F0),smoothstep:tl(t.step||Pf),simplebezier:tl(t.simplebezier||$0)},n={},i=Object.keys(t).filter(a=>!["default","bezier"].includes(a)).reduce((a,l)=>(a[l]=tl(t[l]||sf),a),n);return{...e,...i}}function dw(t,e,n=null){const i=(n?.x||0)+e.x,a=(n?.y||0)+e.y,l=n?.width||e.width,c=n?.height||e.height;switch(t){case Se.Top:return{x:i+l/2,y:a};case Se.Right:return{x:i+l,y:a+c/2};case Se.Bottom:return{x:i+l/2,y:a+c};case Se.Left:return{x:i,y:a+c/2}}}function hw(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const AD=(t,e,n,i,a,l)=>{const c=dw(n,t,e),d=dw(l,i,a);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y}};function RD({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:i,targetWidth:a,targetHeight:l,width:c,height:d,transform:f}){const p={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+a),y2:Math.max(t.y+i,e.y+l)};p.x===p.x2&&(p.x2+=1),p.y===p.y2&&(p.y2+=1);const y=q0({x:(0-f[0])/f[2],y:(0-f[1])/f[2],width:c/f[2],height:d/f[2]}),v=Math.max(0,Math.min(y.x2,p.x2)-Math.max(y.x,p.x)),b=Math.max(0,Math.min(y.y2,p.y2)-Math.max(y.y,p.y));return Math.ceil(v*b)>0}function fw(t){const e=t?.[kt]?.handleBounds||null,n=e&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},e,!!n]}const ND=[{level:0,isMaxLevel:!0,edges:[]}];function ID(t,e,n=!1){let i=-1;const a=t.reduce((c,d)=>{const f=Rr(d.zIndex);let p=f?d.zIndex:0;if(n){const y=e.get(d.target),v=e.get(d.source),b=d.selected||y?.selected||v?.selected,x=Math.max(v?.[kt]?.z||0,y?.[kt]?.z||0,1e3);p=(f?d.zIndex:0)+(b?x:0)}return c[p]?c[p].push(d):c[p]=[d],i=p>i?p:i,c},{}),l=Object.entries(a).map(([c,d])=>{const f=+c;return{edges:d,level:f,isMaxLevel:f===i}});return l.length===0?ND:l}function CD(t,e,n){const i=Tt(F.useCallback(a=>t?a.edges.filter(l=>{const c=e.get(l.source),d=e.get(l.target);return c?.width&&c?.height&&d?.width&&d?.height&&RD({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:d.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:d.width,targetHeight:d.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[t,e]));return ID(i,e,n)}const kD=({color:t="none",strokeWidth:e=1})=>fe.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),DD=({color:t="none",strokeWidth:e=1})=>fe.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),gw={[bu.Arrow]:kD,[bu.ArrowClosed]:DD};function MD(t){const e=ln();return F.useMemo(()=>Object.prototype.hasOwnProperty.call(gw,t)?gw[t]:(e.getState().onError?.("009",ts.error009(t)),null),[t])}const OD=({id:t,type:e,color:n,width:i=12.5,height:a=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const f=MD(e);return f?fe.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:d,refX:"0",refY:"0"},fe.createElement(f,{color:n,strokeWidth:c})):null},PD=({defaultColor:t,rfId:e})=>n=>{const i=[];return n.edges.reduce((a,l)=>([l.markerStart,l.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const d=Jm(c,e);i.includes(d)||(a.push({id:d,color:c.color||t,...c}),i.push(d))}}),a),[]).sort((a,l)=>a.id.localeCompare(l.id))},AT=({defaultColor:t,rfId:e})=>{const n=Tt(F.useCallback(PD({defaultColor:t,rfId:e}),[t,e]),(i,a)=>!(i.length!==a.length||i.some((l,c)=>l.id!==a[c].id)));return fe.createElement("defs",null,n.map(i=>fe.createElement(OD,{id:i.id,key:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient})))};AT.displayName="MarkerDefinitions";var VD=F.memo(AT);const LD=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),RT=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:i,edgeTypes:a,noPanClassName:l,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:f,onEdgeMouseLeave:p,onEdgeClick:y,onEdgeDoubleClick:v,onReconnect:b,onReconnectStart:x,onReconnectEnd:I,reconnectRadius:P,children:O,disableKeyboardA11y:B})=>{const{edgesFocusable:q,edgesUpdatable:G,elementsSelectable:j,width:W,height:X,connectionMode:A,nodeInternals:T,onError:N}=Tt(LD,Tn),U=CD(e,T,n);return W?fe.createElement(fe.Fragment,null,U.map(({level:L,edges:C,isMaxLevel:S})=>fe.createElement("svg",{key:L,style:{zIndex:L},width:W,height:X,className:"react-flow__edges react-flow__container"},S&&fe.createElement(VD,{defaultColor:t,rfId:i}),fe.createElement("g",null,C.map(D=>{const[H,k,$]=fw(T.get(D.source)),[Z,Q,V]=fw(T.get(D.target));if(!$||!V)return null;let J=D.type||"default";a[J]||(N?.("011",ts.error011(J)),J="default");const te=a[J]||a.default,K=A===Ws.Strict?Q.target:(Q.target??[]).concat(Q.source??[]),ie=hw(k.source,D.sourceHandle),ue=hw(K,D.targetHandle),de=ie?.position||Se.Bottom,ve=ue?.position||Se.Top,_e=!!(D.focusable||q&&typeof D.focusable>"u"),Ae=D.reconnectable||D.updatable,Ne=typeof b<"u"&&(Ae||G&&typeof Ae>"u");if(!ie||!ue)return N?.("008",ts.error008(ie,D)),null;const{sourceX:et,sourceY:rt,targetX:Le,targetY:tt}=AD(H,ie,de,Z,ue,ve);return fe.createElement(te,{key:D.id,id:D.id,className:Pn([D.className,l]),type:J,data:D.data,selected:!!D.selected,animated:!!D.animated,hidden:!!D.hidden,label:D.label,labelStyle:D.labelStyle,labelShowBg:D.labelShowBg,labelBgStyle:D.labelBgStyle,labelBgPadding:D.labelBgPadding,labelBgBorderRadius:D.labelBgBorderRadius,style:D.style,source:D.source,target:D.target,sourceHandleId:D.sourceHandle,targetHandleId:D.targetHandle,markerEnd:D.markerEnd,markerStart:D.markerStart,sourceX:et,sourceY:rt,targetX:Le,targetY:tt,sourcePosition:de,targetPosition:ve,elementsSelectable:j,onContextMenu:c,onMouseEnter:d,onMouseMove:f,onMouseLeave:p,onClick:y,onEdgeDoubleClick:v,onReconnect:b,onReconnectStart:x,onReconnectEnd:I,reconnectRadius:P,rfId:i,ariaLabel:D.ariaLabel,isFocusable:_e,isReconnectable:Ne,pathOptions:"pathOptions"in D?D.pathOptions:void 0,interactionWidth:D.interactionWidth,disableKeyboardA11y:B})})))),O):null};RT.displayName="EdgeRenderer";var zD=F.memo(RT);const UD=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function BD({children:t}){const e=Tt(UD);return fe.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function jD(t){const e=zu(),n=F.useRef(!1);F.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const HD={[Se.Left]:Se.Right,[Se.Right]:Se.Left,[Se.Top]:Se.Bottom,[Se.Bottom]:Se.Top},NT=({nodeId:t,handleType:e,style:n,type:i=Vs.Bezier,CustomComponent:a,connectionStatus:l})=>{const{fromNode:c,handleId:d,toX:f,toY:p,connectionMode:y}=Tt(F.useCallback(X=>({fromNode:X.nodeInternals.get(t),handleId:X.connectionHandleId,toX:(X.connectionPosition.x-X.transform[0])/X.transform[2],toY:(X.connectionPosition.y-X.transform[1])/X.transform[2],connectionMode:X.connectionMode}),[t]),Tn),v=c?.[kt]?.handleBounds;let b=v?.[e];if(y===Ws.Loose&&(b=b||v?.[e==="source"?"target":"source"]),!c||!b)return null;const x=d?b.find(X=>X.id===d):b[0],I=x?x.x+x.width/2:(c.width??0)/2,P=x?x.y+x.height/2:c.height??0,O=(c.positionAbsolute?.x??0)+I,B=(c.positionAbsolute?.y??0)+P,q=x?.position,G=q?HD[q]:null;if(!q||!G)return null;if(a)return fe.createElement(a,{connectionLineType:i,connectionLineStyle:n,fromNode:c,fromHandle:x,fromX:O,fromY:B,toX:f,toY:p,fromPosition:q,toPosition:G,connectionStatus:l});let j="";const W={sourceX:O,sourceY:B,sourcePosition:q,targetX:f,targetY:p,targetPosition:G};return i===Vs.Bezier?[j]=W1(W):i===Vs.Step?[j]=Zm({...W,borderRadius:0}):i===Vs.SmoothStep?[j]=Zm(W):i===Vs.SimpleBezier?[j]=Q1(W):j=`M${O},${B} ${f},${p}`,fe.createElement("path",{d:j,fill:"none",className:"react-flow__connection-path",style:n})};NT.displayName="ConnectionLine";const qD=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function $D({containerStyle:t,style:e,type:n,component:i}){const{nodeId:a,handleType:l,nodesConnectable:c,width:d,height:f,connectionStatus:p}=Tt(qD,Tn);return!(a&&l&&d&&c)?null:fe.createElement("svg",{style:t,width:d,height:f,className:"react-flow__edges react-flow__connectionline react-flow__container"},fe.createElement("g",{className:Pn(["react-flow__connection",p])},fe.createElement(NT,{nodeId:a,handleType:l,style:e,type:n,CustomComponent:i,connectionStatus:p})))}function pw(t,e){return F.useRef(null),ln(),F.useMemo(()=>e(t),[t])}const IT=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:i,onMoveEnd:a,onInit:l,onNodeClick:c,onEdgeClick:d,onNodeDoubleClick:f,onEdgeDoubleClick:p,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:b,onNodeContextMenu:x,onSelectionContextMenu:I,onSelectionStart:P,onSelectionEnd:O,connectionLineType:B,connectionLineStyle:q,connectionLineComponent:G,connectionLineContainerStyle:j,selectionKeyCode:W,selectionOnDrag:X,selectionMode:A,multiSelectionKeyCode:T,panActivationKeyCode:N,zoomActivationKeyCode:U,deleteKeyCode:L,onlyRenderVisibleElements:C,elementsSelectable:S,selectNodesOnDrag:D,defaultViewport:H,translateExtent:k,minZoom:$,maxZoom:Z,preventScrolling:Q,defaultMarkerColor:V,zoomOnScroll:J,zoomOnPinch:te,panOnScroll:K,panOnScrollSpeed:ie,panOnScrollMode:ue,zoomOnDoubleClick:de,panOnDrag:ve,onPaneClick:_e,onPaneMouseEnter:Ae,onPaneMouseMove:Ne,onPaneMouseLeave:et,onPaneScroll:rt,onPaneContextMenu:Le,onEdgeContextMenu:tt,onEdgeMouseEnter:it,onEdgeMouseMove:Lt,onEdgeMouseLeave:ze,onReconnect:Ee,onReconnectStart:At,onReconnectEnd:vn,reconnectRadius:Gt,noDragClassName:Fn,noWheelClassName:An,noPanClassName:Rn,elevateEdgesOnSelect:Ir,disableKeyboardA11y:at,nodeOrigin:Fe,nodeExtent:zt,rfId:Et})=>{const Fr=pw(t,vD),Ut=pw(e,SD);return jD(l),fe.createElement(mD,{onPaneClick:_e,onPaneMouseEnter:Ae,onPaneMouseMove:Ne,onPaneMouseLeave:et,onPaneContextMenu:Le,onPaneScroll:rt,deleteKeyCode:L,selectionKeyCode:W,selectionOnDrag:X,selectionMode:A,onSelectionStart:P,onSelectionEnd:O,multiSelectionKeyCode:T,panActivationKeyCode:N,zoomActivationKeyCode:U,elementsSelectable:S,onMove:n,onMoveStart:i,onMoveEnd:a,zoomOnScroll:J,zoomOnPinch:te,zoomOnDoubleClick:de,panOnScroll:K,panOnScrollSpeed:ie,panOnScrollMode:ue,panOnDrag:ve,defaultViewport:H,translateExtent:k,minZoom:$,maxZoom:Z,onSelectionContextMenu:I,preventScrolling:Q,noDragClassName:Fn,noWheelClassName:An,noPanClassName:Rn,disableKeyboardA11y:at},fe.createElement(BD,null,fe.createElement(zD,{edgeTypes:Ut,onEdgeClick:d,onEdgeDoubleClick:p,onlyRenderVisibleElements:C,onEdgeContextMenu:tt,onEdgeMouseEnter:it,onEdgeMouseMove:Lt,onEdgeMouseLeave:ze,onReconnect:Ee,onReconnectStart:At,onReconnectEnd:vn,reconnectRadius:Gt,defaultMarkerColor:V,noPanClassName:Rn,elevateEdgesOnSelect:!!Ir,disableKeyboardA11y:at,rfId:Et},fe.createElement($D,{style:q,type:B,component:G,containerStyle:j})),fe.createElement("div",{className:"react-flow__edgelabel-renderer"}),fe.createElement(ED,{nodeTypes:Fr,onNodeClick:c,onNodeDoubleClick:f,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:b,onNodeContextMenu:x,selectNodesOnDrag:D,onlyRenderVisibleElements:C,noPanClassName:Rn,noDragClassName:Fn,disableKeyboardA11y:at,nodeOrigin:Fe,nodeExtent:zt,rfId:Et})))};IT.displayName="GraphView";var FD=F.memo(IT);const r0=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ds={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:r0,nodeExtent:r0,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ws.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:_4,isValidConnection:void 0},GD=()=>kN((t,e)=>({...Ds,setNodes:n=>{const{nodeInternals:i,nodeOrigin:a,elevateNodesOnSelect:l}=e();t({nodeInternals:bm(n,i,a,l)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:i={}}=e();t({edges:n.map(a=>({...i,...a}))})},setDefaultNodesAndEdges:(n,i)=>{const a=typeof n<"u",l=typeof i<"u",c=a?bm(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:c,edges:l?i:[],hasDefaultNodes:a,hasDefaultEdges:l})},updateNodeDimensions:n=>{const{onNodesChange:i,nodeInternals:a,fitViewOnInit:l,fitViewOnInitDone:c,fitViewOnInitOptions:d,domNode:f,nodeOrigin:p}=e(),y=f?.querySelector(".react-flow__viewport");if(!y)return;const v=window.getComputedStyle(y),{m22:b}=new window.DOMMatrixReadOnly(v.transform),x=n.reduce((P,O)=>{const B=a.get(O.id);if(B?.hidden)a.set(B.id,{...B,[kt]:{...B[kt],handleBounds:void 0}});else if(B){const q=j0(O.nodeElement);!!(q.width&&q.height&&(B.width!==q.width||B.height!==q.height||O.forceUpdate))&&(a.set(B.id,{...B,[kt]:{...B[kt],handleBounds:{source:lw(".source",O.nodeElement,b,p),target:lw(".target",O.nodeElement,b,p)}},...q}),P.push({id:B.id,type:"dimensions",dimensions:q}))}return P},[]);pT(a,p);const I=c||l&&!c&&mT(e,{initial:!0,...d});t({nodeInternals:new Map(a),fitViewOnInitDone:I}),x?.length>0&&i?.(x)},updateNodePositions:(n,i=!0,a=!1)=>{const{triggerNodeChanges:l}=e(),c=n.map(d=>{const f={id:d.id,type:"position",dragging:a};return i&&(f.positionAbsolute=d.positionAbsolute,f.position=d.position),f});l(c)},triggerNodeChanges:n=>{const{onNodesChange:i,nodeInternals:a,hasDefaultNodes:l,nodeOrigin:c,getNodes:d,elevateNodesOnSelect:f}=e();if(n?.length){if(l){const p=vT(n,d()),y=bm(p,a,c,f);t({nodeInternals:y})}i?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:i,edges:a,getNodes:l}=e();let c,d=null;i?c=n.map(f=>Ps(f,!0)):(c=ul(l(),n),d=ul(a,[])),_h({changedNodes:c,changedEdges:d,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:i,edges:a,getNodes:l}=e();let c,d=null;i?c=n.map(f=>Ps(f,!0)):(c=ul(a,n),d=ul(l(),[])),_h({changedNodes:d,changedEdges:c,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:i}={})=>{const{edges:a,getNodes:l}=e(),c=n||l(),d=i||a,f=c.map(y=>(y.selected=!1,Ps(y.id,!1))),p=d.map(y=>Ps(y.id,!1));_h({changedNodes:f,changedEdges:p,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:i,maxZoom:a}=e();i?.scaleExtent([n,a]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:i,minZoom:a}=e();i?.scaleExtent([a,n]),t({maxZoom:n})},setTranslateExtent:n=>{e().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:i}=e(),l=i().filter(d=>d.selected).map(d=>Ps(d.id,!1)),c=n.filter(d=>d.selected).map(d=>Ps(d.id,!1));_h({changedNodes:l,changedEdges:c,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:i}=e();i.forEach(a=>{a.positionAbsolute=H0(a.position,n)}),t({nodeExtent:n,nodeInternals:new Map(i)})},panBy:n=>{const{transform:i,width:a,height:l,d3Zoom:c,d3Selection:d,translateExtent:f}=e();if(!c||!d||!n.x&&!n.y)return!1;const p=$s.translate(i[0]+n.x,i[1]+n.y).scale(i[2]),y=[[0,0],[a,l]],v=c?.constrain()(p,y,f);return c.transform(d,v),i[0]!==v.x||i[1]!==v.y||i[2]!==v.k},cancelConnection:()=>t({connectionNodeId:Ds.connectionNodeId,connectionHandleId:Ds.connectionHandleId,connectionHandleType:Ds.connectionHandleType,connectionStatus:Ds.connectionStatus,connectionStartHandle:Ds.connectionStartHandle,connectionEndHandle:Ds.connectionEndHandle}),reset:()=>t({...Ds})}),Object.is),CT=({children:t})=>{const e=F.useRef(null);return e.current||(e.current=GD()),fe.createElement(d4,{value:e.current},t)};CT.displayName="ReactFlowProvider";const kT=({children:t})=>F.useContext(Of)?fe.createElement(fe.Fragment,null,t):fe.createElement(CT,null,t);kT.displayName="ReactFlowWrapper";const YD={input:lT,default:t0,output:uT,group:Q0},KD={default:sf,straight:G0,step:F0,smoothstep:Pf,simplebezier:$0},XD=[0,0],QD=[15,15],WD={x:0,y:0,zoom:1},ZD={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},DT=F.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,className:a,nodeTypes:l=YD,edgeTypes:c=KD,onNodeClick:d,onEdgeClick:f,onInit:p,onMove:y,onMoveStart:v,onMoveEnd:b,onConnect:x,onConnectStart:I,onConnectEnd:P,onClickConnectStart:O,onClickConnectEnd:B,onNodeMouseEnter:q,onNodeMouseMove:G,onNodeMouseLeave:j,onNodeContextMenu:W,onNodeDoubleClick:X,onNodeDragStart:A,onNodeDrag:T,onNodeDragStop:N,onNodesDelete:U,onEdgesDelete:L,onSelectionChange:C,onSelectionDragStart:S,onSelectionDrag:D,onSelectionDragStop:H,onSelectionContextMenu:k,onSelectionStart:$,onSelectionEnd:Z,connectionMode:Q=Ws.Strict,connectionLineType:V=Vs.Bezier,connectionLineStyle:J,connectionLineComponent:te,connectionLineContainerStyle:K,deleteKeyCode:ie="Backspace",selectionKeyCode:ue="Shift",selectionOnDrag:de=!1,selectionMode:ve=_u.Full,panActivationKeyCode:_e="Space",multiSelectionKeyCode:Ae=rf()?"Meta":"Control",zoomActivationKeyCode:Ne=rf()?"Meta":"Control",snapToGrid:et=!1,snapGrid:rt=QD,onlyRenderVisibleElements:Le=!1,selectNodesOnDrag:tt=!0,nodesDraggable:it,nodesConnectable:Lt,nodesFocusable:ze,nodeOrigin:Ee=XD,edgesFocusable:At,edgesUpdatable:vn,elementsSelectable:Gt,defaultViewport:Fn=WD,minZoom:An=.5,maxZoom:Rn=2,translateExtent:Ir=r0,preventScrolling:at=!0,nodeExtent:Fe,defaultMarkerColor:zt="#b1b1b7",zoomOnScroll:Et=!0,zoomOnPinch:Fr=!0,panOnScroll:Ut=!1,panOnScrollSpeed:Jt=.5,panOnScrollMode:Nn=qa.Free,zoomOnDoubleClick:In=!0,panOnDrag:en=!0,onPaneClick:cn,onPaneMouseEnter:Cn,onPaneMouseMove:Ti,onPaneMouseLeave:Si,onPaneScroll:Cr,onPaneContextMenu:Gn,children:ur,onEdgeContextMenu:Yn,onEdgeDoubleClick:dr,onEdgeMouseEnter:ca,onEdgeMouseMove:Gr,onEdgeMouseLeave:as,onEdgeUpdate:Yr,onEdgeUpdateStart:oo,onEdgeUpdateEnd:mt,onReconnect:Mt,onReconnectStart:Rt,onReconnectEnd:Vn,reconnectRadius:ua=10,edgeUpdaterRadius:Hl=10,onNodesChange:Kr,onEdgesChange:lo,noDragClassName:Ai="nodrag",noWheelClassName:Xr="nowheel",noPanClassName:hr="nopan",fitView:fr=!1,fitViewOptions:gr,connectOnClick:un=!0,attributionPosition:wt,proOptions:da,defaultEdgeOptions:os,elevateNodesOnSelect:Kn=!0,elevateEdgesOnSelect:kr=!1,disableKeyboardA11y:ha=!1,autoPanOnConnect:co=!0,autoPanOnNodeDrag:Ri=!0,connectionRadius:uo=20,isValidConnection:Qr,onError:pr,style:Yt,id:Wr,nodeDragThreshold:ho,...Dr},ls)=>{const Zr=Wr||"1";return fe.createElement("div",{...Dr,style:{...Yt,...ZD},ref:ls,className:Pn(["react-flow",a]),"data-testid":"rf__wrapper",id:Wr},fe.createElement(kT,null,fe.createElement(FD,{onInit:p,onMove:y,onMoveStart:v,onMoveEnd:b,onNodeClick:d,onEdgeClick:f,onNodeMouseEnter:q,onNodeMouseMove:G,onNodeMouseLeave:j,onNodeContextMenu:W,onNodeDoubleClick:X,nodeTypes:l,edgeTypes:c,connectionLineType:V,connectionLineStyle:J,connectionLineComponent:te,connectionLineContainerStyle:K,selectionKeyCode:ue,selectionOnDrag:de,selectionMode:ve,deleteKeyCode:ie,multiSelectionKeyCode:Ae,panActivationKeyCode:_e,zoomActivationKeyCode:Ne,onlyRenderVisibleElements:Le,selectNodesOnDrag:tt,defaultViewport:Fn,translateExtent:Ir,minZoom:An,maxZoom:Rn,preventScrolling:at,zoomOnScroll:Et,zoomOnPinch:Fr,zoomOnDoubleClick:In,panOnScroll:Ut,panOnScrollSpeed:Jt,panOnScrollMode:Nn,panOnDrag:en,onPaneClick:cn,onPaneMouseEnter:Cn,onPaneMouseMove:Ti,onPaneMouseLeave:Si,onPaneScroll:Cr,onPaneContextMenu:Gn,onSelectionContextMenu:k,onSelectionStart:$,onSelectionEnd:Z,onEdgeContextMenu:Yn,onEdgeDoubleClick:dr,onEdgeMouseEnter:ca,onEdgeMouseMove:Gr,onEdgeMouseLeave:as,onReconnect:Mt??Yr,onReconnectStart:Rt??oo,onReconnectEnd:Vn??mt,reconnectRadius:ua??Hl,defaultMarkerColor:zt,noDragClassName:Ai,noWheelClassName:Xr,noPanClassName:hr,elevateEdgesOnSelect:kr,rfId:Zr,disableKeyboardA11y:ha,nodeOrigin:Ee,nodeExtent:Fe}),fe.createElement(H4,{nodes:t,edges:e,defaultNodes:n,defaultEdges:i,onConnect:x,onConnectStart:I,onConnectEnd:P,onClickConnectStart:O,onClickConnectEnd:B,nodesDraggable:it,nodesConnectable:Lt,nodesFocusable:ze,edgesFocusable:At,edgesUpdatable:vn,elementsSelectable:Gt,elevateNodesOnSelect:Kn,minZoom:An,maxZoom:Rn,nodeExtent:Fe,onNodesChange:Kr,onEdgesChange:lo,snapToGrid:et,snapGrid:rt,connectionMode:Q,translateExtent:Ir,connectOnClick:un,defaultEdgeOptions:os,fitView:fr,fitViewOptions:gr,onNodesDelete:U,onEdgesDelete:L,onNodeDragStart:A,onNodeDrag:T,onNodeDragStop:N,onSelectionDrag:D,onSelectionDragStart:S,onSelectionDragStop:H,noPanClassName:hr,nodeOrigin:Ee,rfId:Zr,autoPanOnConnect:co,autoPanOnNodeDrag:Ri,onError:pr,connectionRadius:uo,isValidConnection:Qr,nodeDragThreshold:ho}),fe.createElement(B4,{onSelectionChange:C}),ur,fe.createElement(f4,{proOptions:da,position:wt}),fe.createElement(Y4,{rfId:Zr,disableKeyboardA11y:ha})))});DT.displayName="ReactFlow";function MT(t){return e=>{const[n,i]=F.useState(e),a=F.useCallback(l=>i(c=>t(l,c)),[]);return[n,i,a]}}const JD=MT(vT),eM=MT(oD);function tM(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},fe.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function nM(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},fe.createElement("path",{d:"M0 0h32v4.2H0z"}))}function rM(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},fe.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function iM(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},fe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function sM(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},fe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Jc=({children:t,className:e,...n})=>fe.createElement("button",{type:"button",className:Pn(["react-flow__controls-button",e]),...n},t);Jc.displayName="ControlButton";const aM=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),OT=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:a,onZoomIn:l,onZoomOut:c,onFitView:d,onInteractiveChange:f,className:p,children:y,position:v="bottom-left"})=>{const b=ln(),[x,I]=F.useState(!1),{isInteractive:P,minZoomReached:O,maxZoomReached:B}=Tt(aM,Tn),{zoomIn:q,zoomOut:G,fitView:j}=zu();if(F.useEffect(()=>{I(!0)},[]),!x)return null;const W=()=>{q(),l?.()},X=()=>{G(),c?.()},A=()=>{j(a),d?.()},T=()=>{b.setState({nodesDraggable:!P,nodesConnectable:!P,elementsSelectable:!P}),f?.(!P)};return fe.createElement(q1,{className:Pn(["react-flow__controls",p]),position:v,style:t,"data-testid":"rf__controls"},e&&fe.createElement(fe.Fragment,null,fe.createElement(Jc,{onClick:W,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:B},fe.createElement(tM,null)),fe.createElement(Jc,{onClick:X,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:O},fe.createElement(nM,null))),n&&fe.createElement(Jc,{className:"react-flow__controls-fitview",onClick:A,title:"fit view","aria-label":"fit view"},fe.createElement(rM,null)),i&&fe.createElement(Jc,{className:"react-flow__controls-interactive",onClick:T,title:"toggle interactivity","aria-label":"toggle interactivity"},P?fe.createElement(sM,null):fe.createElement(iM,null)),y)};OT.displayName="Controls";var oM=F.memo(OT),Nr;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Nr||(Nr={}));function lM({color:t,dimensions:e,lineWidth:n}){return fe.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function cM({color:t,radius:e}){return fe.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const uM={[Nr.Dots]:"#91919a",[Nr.Lines]:"#eee",[Nr.Cross]:"#e2e2e2"},dM={[Nr.Dots]:1,[Nr.Lines]:1,[Nr.Cross]:6},hM=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function PT({id:t,variant:e=Nr.Dots,gap:n=20,size:i,lineWidth:a=1,offset:l=2,color:c,style:d,className:f}){const p=F.useRef(null),{transform:y,patternId:v}=Tt(hM,Tn),b=c||uM[e],x=i||dM[e],I=e===Nr.Dots,P=e===Nr.Cross,O=Array.isArray(n)?n:[n,n],B=[O[0]*y[2]||1,O[1]*y[2]||1],q=x*y[2],G=P?[q,q]:B,j=I?[q/l,q/l]:[G[0]/l,G[1]/l];return fe.createElement("svg",{className:Pn(["react-flow__background",f]),style:{...d,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:p,"data-testid":"rf__background"},fe.createElement("pattern",{id:v+t,x:y[0]%B[0],y:y[1]%B[1],width:B[0],height:B[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`},I?fe.createElement(cM,{color:b,radius:q/l}):fe.createElement(lM,{dimensions:G,color:b,lineWidth:a})),fe.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${v+t})`}))}PT.displayName="Background";var fM=F.memo(PT),$t=function(){return $t=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},$t.apply(this,arguments)},mw={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},yw={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},Eh={width:"20px",height:"20px",position:"absolute",zIndex:1},gM={top:$t($t({},mw),{top:"-5px"}),right:$t($t({},yw),{left:void 0,right:"-5px"}),bottom:$t($t({},mw),{top:void 0,bottom:"-5px"}),left:$t($t({},yw),{left:"-5px"}),topRight:$t($t({},Eh),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:$t($t({},Eh),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:$t($t({},Eh),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:$t($t({},Eh),{left:"-10px",top:"-10px",cursor:"nw-resize"})},pM=F.memo(function(t){var e=t.onResizeStart,n=t.direction,i=t.children,a=t.replaceStyles,l=t.className,c=F.useCallback(function(p){e(p,n)},[e,n]),d=F.useCallback(function(p){e(p,n)},[e,n]),f=F.useMemo(function(){return $t($t({position:"absolute",userSelect:"none"},gM[n]),a??{})},[a,n]);return R.jsx("div",{className:l||void 0,style:f,onMouseDown:c,onTouchStart:d,children:i})}),mM=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),hi=function(){return hi=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},hi.apply(this,arguments)},yM={width:"auto",height:"auto"},wh=function(t,e,n){return Math.max(Math.min(t,n),e)},vw=function(t,e,n){var i=Math.round(t/e);return i*e+n*(i-1)},nl=function(t,e){return new RegExp(t,"i").test(e)},xh=function(t){return!!(t.touches&&t.touches.length)},vM=function(t){return!!((t.clientX||t.clientX===0)&&(t.clientY||t.clientY===0))},_w=function(t,e,n){n===void 0&&(n=0);var i=e.reduce(function(l,c,d){return Math.abs(c-t)<Math.abs(e[l]-t)?d:l},0),a=Math.abs(e[i]-t);return n===0||a<n?e[i]:t},Tm=function(t){return t=t.toString(),t==="auto"||t.endsWith("px")||t.endsWith("%")||t.endsWith("vh")||t.endsWith("vw")||t.endsWith("vmax")||t.endsWith("vmin")?t:"".concat(t,"px")},Th=function(t,e,n,i){if(t&&typeof t=="string"){if(t.endsWith("px"))return Number(t.replace("px",""));if(t.endsWith("%")){var a=Number(t.replace("%",""))/100;return e*a}if(t.endsWith("vw")){var a=Number(t.replace("vw",""))/100;return n*a}if(t.endsWith("vh")){var a=Number(t.replace("vh",""))/100;return i*a}}return t},_M=function(t,e,n,i,a,l,c){return i=Th(i,t.width,e,n),a=Th(a,t.height,e,n),l=Th(l,t.width,e,n),c=Th(c,t.height,e,n),{maxWidth:typeof i>"u"?void 0:Number(i),maxHeight:typeof a>"u"?void 0:Number(a),minWidth:typeof l>"u"?void 0:Number(l),minHeight:typeof c>"u"?void 0:Number(c)}},bM=function(t){return Array.isArray(t)?t:[t,t]},EM=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],bw="__resizable_base__",wM=function(t){mM(e,t);function e(n){var i,a,l,c,d=t.call(this,n)||this;return d.ratio=1,d.resizable=null,d.parentLeft=0,d.parentTop=0,d.resizableLeft=0,d.resizableRight=0,d.resizableTop=0,d.resizableBottom=0,d.targetLeft=0,d.targetTop=0,d.delta={width:0,height:0},d.appendBase=function(){if(!d.resizable||!d.window)return null;var f=d.parentNode;if(!f)return null;var p=d.window.document.createElement("div");return p.style.width="100%",p.style.height="100%",p.style.position="absolute",p.style.transform="scale(0, 0)",p.style.left="0",p.style.flex="0 0 100%",p.classList?p.classList.add(bw):p.className+=bw,f.appendChild(p),p},d.removeBase=function(f){var p=d.parentNode;p&&p.removeChild(f)},d.state={isResizing:!1,width:(a=(i=d.propsSize)===null||i===void 0?void 0:i.width)!==null&&a!==void 0?a:"auto",height:(c=(l=d.propsSize)===null||l===void 0?void 0:l.height)!==null&&c!==void 0?c:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},d.onResizeStart=d.onResizeStart.bind(d),d.onMouseMove=d.onMouseMove.bind(d),d.onMouseUp=d.onMouseUp.bind(d),d}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||yM},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var n=0,i=0;if(this.resizable&&this.window){var a=this.resizable.offsetWidth,l=this.resizable.offsetHeight,c=this.resizable.style.position;c!=="relative"&&(this.resizable.style.position="relative"),n=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:a,i=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:l,this.resizable.style.position=c}return{width:n,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeStyle",{get:function(){var n=this,i=this.props.size,a=function(d){var f;if(typeof n.state[d]>"u"||n.state[d]==="auto")return"auto";if(n.propsSize&&n.propsSize[d]&&(!((f=n.propsSize[d])===null||f===void 0)&&f.toString().endsWith("%"))){if(n.state[d].toString().endsWith("%"))return n.state[d].toString();var p=n.getParentSize(),y=Number(n.state[d].toString().replace("px","")),v=y/p[d]*100;return"".concat(v,"%")}return Tm(n.state[d])},l=i&&typeof i.width<"u"&&!this.state.isResizing?Tm(i.width):a("width"),c=i&&typeof i.height<"u"&&!this.state.isResizing?Tm(i.height):a("height");return{width:l,height:c}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var n=this.appendBase();if(!n)return{width:0,height:0};var i=!1,a=this.parentNode.style.flexWrap;a!=="wrap"&&(i=!0,this.parentNode.style.flexWrap="wrap"),n.style.position="relative",n.style.minWidth="100%",n.style.minHeight="100%";var l={width:n.offsetWidth,height:n.offsetHeight};return i&&(this.parentNode.style.flexWrap=a),this.removeBase(n),l},e.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},e.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var n=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:n.flexBasis!=="auto"?n.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},e.prototype.createSizeForCssProperty=function(n,i){var a=this.propsSize&&this.propsSize[i];return this.state[i]==="auto"&&this.state.original[i]===n&&(typeof a>"u"||a==="auto")?"auto":n},e.prototype.calculateNewMaxFromBoundary=function(n,i){var a=this.props.boundsByDirection,l=this.state.direction,c=a&&nl("left",l),d=a&&nl("top",l),f,p;if(this.props.bounds==="parent"){var y=this.parentNode;y&&(f=c?this.resizableRight-this.parentLeft:y.offsetWidth+(this.parentLeft-this.resizableLeft),p=d?this.resizableBottom-this.parentTop:y.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(f=c?this.resizableRight:this.window.innerWidth-this.resizableLeft,p=d?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(f=c?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),p=d?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return f&&Number.isFinite(f)&&(n=n&&n<f?n:f),p&&Number.isFinite(p)&&(i=i&&i<p?i:p),{maxWidth:n,maxHeight:i}},e.prototype.calculateNewSizeFromDirection=function(n,i){var a=this.props.scale||1,l=bM(this.props.resizeRatio||1),c=l[0],d=l[1],f=this.state,p=f.direction,y=f.original,v=this.props,b=v.lockAspectRatio,x=v.lockAspectRatioExtraHeight,I=v.lockAspectRatioExtraWidth,P=y.width,O=y.height,B=x||0,q=I||0;return nl("right",p)&&(P=y.width+(n-y.x)*c/a,b&&(O=(P-q)/this.ratio+B)),nl("left",p)&&(P=y.width-(n-y.x)*c/a,b&&(O=(P-q)/this.ratio+B)),nl("bottom",p)&&(O=y.height+(i-y.y)*d/a,b&&(P=(O-B)*this.ratio+q)),nl("top",p)&&(O=y.height-(i-y.y)*d/a,b&&(P=(O-B)*this.ratio+q)),{newWidth:P,newHeight:O}},e.prototype.calculateNewSizeFromAspectRatio=function(n,i,a,l){var c=this.props,d=c.lockAspectRatio,f=c.lockAspectRatioExtraHeight,p=c.lockAspectRatioExtraWidth,y=typeof l.width>"u"?10:l.width,v=typeof a.width>"u"||a.width<0?n:a.width,b=typeof l.height>"u"?10:l.height,x=typeof a.height>"u"||a.height<0?i:a.height,I=f||0,P=p||0;if(d){var O=(b-I)*this.ratio+P,B=(x-I)*this.ratio+P,q=(y-P)/this.ratio+I,G=(v-P)/this.ratio+I,j=Math.max(y,O),W=Math.min(v,B),X=Math.max(b,q),A=Math.min(x,G);n=wh(n,j,W),i=wh(i,X,A)}else n=wh(n,y,v),i=wh(i,b,x);return{newWidth:n,newHeight:i}},e.prototype.setBoundingClientRect=function(){var n=1/(this.props.scale||1);if(this.props.bounds==="parent"){var i=this.parentNode;if(i){var a=i.getBoundingClientRect();this.parentLeft=a.left*n,this.parentTop=a.top*n}}if(this.props.bounds&&typeof this.props.bounds!="string"){var l=this.props.bounds.getBoundingClientRect();this.targetLeft=l.left*n,this.targetTop=l.top*n}if(this.resizable){var c=this.resizable.getBoundingClientRect(),d=c.left,f=c.top,p=c.right,y=c.bottom;this.resizableLeft=d*n,this.resizableRight=p*n,this.resizableTop=f*n,this.resizableBottom=y*n}},e.prototype.onResizeStart=function(n,i){if(!(!this.resizable||!this.window)){var a=0,l=0;if(n.nativeEvent&&vM(n.nativeEvent)?(a=n.nativeEvent.clientX,l=n.nativeEvent.clientY):n.nativeEvent&&xh(n.nativeEvent)&&(a=n.nativeEvent.touches[0].clientX,l=n.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var c=this.props.onResizeStart(n,i,this.resizable);if(c===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var d,f=this.window.getComputedStyle(this.resizable);if(f.flexBasis!=="auto"){var p=this.parentNode;if(p){var y=this.window.getComputedStyle(p).flexDirection;this.flexDir=y.startsWith("row")?"row":"column",d=f.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var v={original:{x:a,y:l,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:hi(hi({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(n.target).cursor||"auto"}),direction:i,flexBasis:d};this.setState(v)}},e.prototype.onMouseMove=function(n){var i=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&xh(n))try{n.preventDefault(),n.stopPropagation()}catch{}var a=this.props,l=a.maxWidth,c=a.maxHeight,d=a.minWidth,f=a.minHeight,p=xh(n)?n.touches[0].clientX:n.clientX,y=xh(n)?n.touches[0].clientY:n.clientY,v=this.state,b=v.direction,x=v.original,I=v.width,P=v.height,O=this.getParentSize(),B=_M(O,this.window.innerWidth,this.window.innerHeight,l,c,d,f);l=B.maxWidth,c=B.maxHeight,d=B.minWidth,f=B.minHeight;var q=this.calculateNewSizeFromDirection(p,y),G=q.newHeight,j=q.newWidth,W=this.calculateNewMaxFromBoundary(l,c);this.props.snap&&this.props.snap.x&&(j=_w(j,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(G=_w(G,this.props.snap.y,this.props.snapGap));var X=this.calculateNewSizeFromAspectRatio(j,G,{width:W.maxWidth,height:W.maxHeight},{width:d,height:f});if(j=X.newWidth,G=X.newHeight,this.props.grid){var A=vw(j,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),T=vw(G,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),N=this.props.snapGap||0,U=N===0||Math.abs(A-j)<=N?A:j,L=N===0||Math.abs(T-G)<=N?T:G;j=U,G=L}var C={width:j-x.width,height:G-x.height};if(this.delta=C,I&&typeof I=="string"){if(I.endsWith("%")){var S=j/O.width*100;j="".concat(S,"%")}else if(I.endsWith("vw")){var D=j/this.window.innerWidth*100;j="".concat(D,"vw")}else if(I.endsWith("vh")){var H=j/this.window.innerHeight*100;j="".concat(H,"vh")}}if(P&&typeof P=="string"){if(P.endsWith("%")){var S=G/O.height*100;G="".concat(S,"%")}else if(P.endsWith("vw")){var D=G/this.window.innerWidth*100;G="".concat(D,"vw")}else if(P.endsWith("vh")){var H=G/this.window.innerHeight*100;G="".concat(H,"vh")}}var k={width:this.createSizeForCssProperty(j,"width"),height:this.createSizeForCssProperty(G,"height")};this.flexDir==="row"?k.flexBasis=k.width:this.flexDir==="column"&&(k.flexBasis=k.height);var $=this.state.width!==k.width,Z=this.state.height!==k.height,Q=this.state.flexBasis!==k.flexBasis,V=$||Z||Q;V&&u4.flushSync(function(){i.setState(k)}),this.props.onResize&&V&&this.props.onResize(n,b,this.resizable,C)}},e.prototype.onMouseUp=function(n){var i,a,l=this.state,c=l.isResizing,d=l.direction;l.original,!(!c||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(n,d,this.resizable,this.delta),this.props.size&&this.setState({width:(i=this.props.size.width)!==null&&i!==void 0?i:"auto",height:(a=this.props.size.height)!==null&&a!==void 0?a:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:hi(hi({},this.state.backgroundStyle),{cursor:"auto"})}))},e.prototype.updateSize=function(n){var i,a;this.setState({width:(i=n.width)!==null&&i!==void 0?i:"auto",height:(a=n.height)!==null&&a!==void 0?a:"auto"})},e.prototype.renderResizer=function(){var n=this,i=this.props,a=i.enable,l=i.handleStyles,c=i.handleClasses,d=i.handleWrapperStyle,f=i.handleWrapperClass,p=i.handleComponent;if(!a)return null;var y=Object.keys(a).map(function(v){return a[v]!==!1?R.jsx(pM,{direction:v,onResizeStart:n.onResizeStart,replaceStyles:l&&l[v],className:c&&c[v],children:p&&p[v]?p[v]:null},v):null});return R.jsx("div",{className:f,style:d,children:y})},e.prototype.render=function(){var n=this,i=Object.keys(this.props).reduce(function(c,d){return EM.indexOf(d)!==-1||(c[d]=n.props[d]),c},{}),a=hi(hi(hi({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(a.flexBasis=this.state.flexBasis);var l=this.props.as||"div";return R.jsxs(l,hi({style:a,className:this.props.className},i,{ref:function(c){c&&(n.resizable=c)},children:[this.state.isResizing&&R.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},e.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e}(F.PureComponent);const Vf=F.createContext(null);Vf.displayName="PanelGroupContext";const Ct={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},Z0=10,Ga=F.useLayoutEffect,Ew=fN.useId,xM=typeof Ew=="function"?Ew:()=>null;let TM=0;function J0(t=null){const e=xM(),n=F.useRef(t||e||null);return n.current===null&&(n.current=""+TM++),t??n.current}function VT({children:t,className:e="",collapsedSize:n,collapsible:i,defaultSize:a,forwardedRef:l,id:c,maxSize:d,minSize:f,onCollapse:p,onExpand:y,onResize:v,order:b,style:x,tagName:I="div",...P}){const O=F.useContext(Vf);if(O===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:B,expandPanel:q,getPanelSize:G,getPanelStyle:j,groupId:W,isPanelCollapsed:X,reevaluatePanelConstraints:A,registerPanel:T,resizePanel:N,unregisterPanel:U}=O,L=J0(c),C=F.useRef({callbacks:{onCollapse:p,onExpand:y,onResize:v},constraints:{collapsedSize:n,collapsible:i,defaultSize:a,maxSize:d,minSize:f},id:L,idIsFromProps:c!==void 0,order:b});F.useRef({didLogMissingDefaultSizeWarning:!1}),Ga(()=>{const{callbacks:D,constraints:H}=C.current,k={...H};C.current.id=L,C.current.idIsFromProps=c!==void 0,C.current.order=b,D.onCollapse=p,D.onExpand=y,D.onResize=v,H.collapsedSize=n,H.collapsible=i,H.defaultSize=a,H.maxSize=d,H.minSize=f,(k.collapsedSize!==H.collapsedSize||k.collapsible!==H.collapsible||k.maxSize!==H.maxSize||k.minSize!==H.minSize)&&A(C.current,k)}),Ga(()=>{const D=C.current;return T(D),()=>{U(D)}},[b,L,T,U]),F.useImperativeHandle(l,()=>({collapse:()=>{B(C.current)},expand:D=>{q(C.current,D)},getId(){return L},getSize(){return G(C.current)},isCollapsed(){return X(C.current)},isExpanded(){return!X(C.current)},resize:D=>{N(C.current,D)}}),[B,q,G,X,L,N]);const S=j(C.current,a);return F.createElement(I,{...P,children:t,className:e,id:L,style:{...S,...x},[Ct.groupId]:W,[Ct.panel]:"",[Ct.panelCollapsible]:i||void 0,[Ct.panelId]:L,[Ct.panelSize]:parseFloat(""+S.flexGrow).toFixed(1)})}const i0=F.forwardRef((t,e)=>F.createElement(VT,{...t,forwardedRef:e}));VT.displayName="Panel";i0.displayName="forwardRef(Panel)";let s0=null,zh=-1,Ls=null;function SM(t,e){if(e){const n=(e&jT)!==0,i=(e&HT)!==0,a=(e&qT)!==0,l=(e&$T)!==0;if(n)return a?"se-resize":l?"ne-resize":"e-resize";if(i)return a?"sw-resize":l?"nw-resize":"w-resize";if(a)return"s-resize";if(l)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function AM(){Ls!==null&&(document.head.removeChild(Ls),s0=null,Ls=null,zh=-1)}function Sm(t,e){var n,i;const a=SM(t,e);if(s0!==a){if(s0=a,Ls===null&&(Ls=document.createElement("style"),document.head.appendChild(Ls)),zh>=0){var l;(l=Ls.sheet)===null||l===void 0||l.removeRule(zh)}zh=(n=(i=Ls.sheet)===null||i===void 0?void 0:i.insertRule(`*{cursor: ${a} !important;}`))!==null&&n!==void 0?n:-1}}function LT(t){return t.type==="keydown"}function zT(t){return t.type.startsWith("pointer")}function UT(t){return t.type.startsWith("mouse")}function Lf(t){if(zT(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(UT(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function RM(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function NM(t,e,n){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function IM(t,e){if(t===e)throw new Error("Cannot compare node with itself");const n={a:Tw(t),b:Tw(e)};let i;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),e=n.b.pop(),i=t;Be(i,"Stacking order can only be calculated for elements with a common ancestor");const a={a:xw(ww(n.a)),b:xw(ww(n.b))};if(a.a===a.b){const l=i.childNodes,c={a:n.a.at(-1),b:n.b.at(-1)};let d=l.length;for(;d--;){const f=l[d];if(f===c.a)return 1;if(f===c.b)return-1}}return Math.sign(a.a-a.b)}const CM=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function kM(t){var e;const n=getComputedStyle((e=BT(t))!==null&&e!==void 0?e:t).display;return n==="flex"||n==="inline-flex"}function DM(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||kM(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||CM.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function ww(t){let e=t.length;for(;e--;){const n=t[e];if(Be(n,"Missing node"),DM(n))return n}return null}function xw(t){return t&&Number(getComputedStyle(t).zIndex)||0}function Tw(t){const e=[];for(;t;)e.push(t),t=BT(t);return e}function BT(t){const{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}const jT=1,HT=2,qT=4,$T=8,MM=RM()==="coarse";let Br=[],yl=!1,zs=new Map,zf=new Map;const wu=new Set;function OM(t,e,n,i,a){var l;const{ownerDocument:c}=e,d={direction:n,element:e,hitAreaMargins:i,setResizeHandlerState:a},f=(l=zs.get(c))!==null&&l!==void 0?l:0;return zs.set(c,f+1),wu.add(d),af(),function(){var y;zf.delete(t),wu.delete(d);const v=(y=zs.get(c))!==null&&y!==void 0?y:1;if(zs.set(c,v-1),af(),v===1&&zs.delete(c),Br.includes(d)){const b=Br.indexOf(d);b>=0&&Br.splice(b,1),ty(),a("up",!0,null)}}}function PM(t){const{target:e}=t,{x:n,y:i}=Lf(t);yl=!0,ey({target:e,x:n,y:i}),af(),Br.length>0&&(of("down",t),t.preventDefault(),FT(e)||t.stopImmediatePropagation())}function Am(t){const{x:e,y:n}=Lf(t);if(yl&&t.buttons===0&&(yl=!1,of("up",t)),!yl){const{target:i}=t;ey({target:i,x:e,y:n})}of("move",t),ty(),Br.length>0&&t.preventDefault()}function Rm(t){const{target:e}=t,{x:n,y:i}=Lf(t);zf.clear(),yl=!1,Br.length>0&&(t.preventDefault(),FT(e)||t.stopImmediatePropagation()),of("up",t),ey({target:e,x:n,y:i}),ty(),af()}function FT(t){let e=t;for(;e;){if(e.hasAttribute(Ct.resizeHandle))return!0;e=e.parentElement}return!1}function ey({target:t,x:e,y:n}){Br.splice(0);let i=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(i=t),wu.forEach(a=>{const{element:l,hitAreaMargins:c}=a,d=l.getBoundingClientRect(),{bottom:f,left:p,right:y,top:v}=d,b=MM?c.coarse:c.fine;if(e>=p-b&&e<=y+b&&n>=v-b&&n<=f+b){if(i!==null&&document.contains(i)&&l!==i&&!l.contains(i)&&!i.contains(l)&&IM(i,l)>0){let I=i,P=!1;for(;I&&!I.contains(l);){if(NM(I.getBoundingClientRect(),d)){P=!0;break}I=I.parentElement}if(P)return}Br.push(a)}})}function Nm(t,e){zf.set(t,e)}function ty(){let t=!1,e=!1;Br.forEach(i=>{const{direction:a}=i;a==="horizontal"?t=!0:e=!0});let n=0;zf.forEach(i=>{n|=i}),t&&e?Sm("intersection",n):t?Sm("horizontal",n):e?Sm("vertical",n):AM()}let Im;function af(){var t;(t=Im)===null||t===void 0||t.abort(),Im=new AbortController;const e={capture:!0,signal:Im.signal};wu.size&&(yl?(Br.length>0&&zs.forEach((n,i)=>{const{body:a}=i;n>0&&(a.addEventListener("contextmenu",Rm,e),a.addEventListener("pointerleave",Am,e),a.addEventListener("pointermove",Am,e))}),zs.forEach((n,i)=>{const{body:a}=i;a.addEventListener("pointerup",Rm,e),a.addEventListener("pointercancel",Rm,e)})):zs.forEach((n,i)=>{const{body:a}=i;n>0&&(a.addEventListener("pointerdown",PM,e),a.addEventListener("pointermove",Am,e))}))}function of(t,e){wu.forEach(n=>{const{setResizeHandlerState:i}=n,a=Br.includes(n);i(t,a,e)})}function VM(){const[t,e]=F.useState(0);return F.useCallback(()=>e(n=>n+1),[])}function Be(t,e){if(!t)throw console.error(e),Error(e)}function Ka(t,e,n=Z0){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function Xi(t,e,n=Z0){return Ka(t,e,n)===0}function rr(t,e,n){return Ka(t,e,n)===0}function LM(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){const a=t[i],l=e[i];if(!rr(a,l,n))return!1}return!0}function dl({panelConstraints:t,panelIndex:e,size:n}){const i=t[e];Be(i!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:a=0,collapsible:l,maxSize:c=100,minSize:d=0}=i;if(Ka(n,d)<0)if(l){const f=(a+d)/2;Ka(n,f)<0?n=a:n=d}else n=d;return n=Math.min(c,n),n=parseFloat(n.toFixed(Z0)),n}function eu({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:i,prevLayout:a,trigger:l}){if(rr(t,0))return e;const c=[...e],[d,f]=i;Be(d!=null,"Invalid first pivot index"),Be(f!=null,"Invalid second pivot index");let p=0;if(l==="keyboard"){{const v=t<0?f:d,b=n[v];Be(b,`Panel constraints not found for index ${v}`);const{collapsedSize:x=0,collapsible:I,minSize:P=0}=b;if(I){const O=e[v];if(Be(O!=null,`Previous layout not found for panel index ${v}`),rr(O,x)){const B=P-O;Ka(B,Math.abs(t))>0&&(t=t<0?0-B:B)}}}{const v=t<0?d:f,b=n[v];Be(b,`No panel constraints found for index ${v}`);const{collapsedSize:x=0,collapsible:I,minSize:P=0}=b;if(I){const O=e[v];if(Be(O!=null,`Previous layout not found for panel index ${v}`),rr(O,P)){const B=O-x;Ka(B,Math.abs(t))>0&&(t=t<0?0-B:B)}}}}{const v=t<0?1:-1;let b=t<0?f:d,x=0;for(;;){const P=e[b];Be(P!=null,`Previous layout not found for panel index ${b}`);const B=dl({panelConstraints:n,panelIndex:b,size:100})-P;if(x+=B,b+=v,b<0||b>=n.length)break}const I=Math.min(Math.abs(t),Math.abs(x));t=t<0?0-I:I}{let b=t<0?d:f;for(;b>=0&&b<n.length;){const x=Math.abs(t)-Math.abs(p),I=e[b];Be(I!=null,`Previous layout not found for panel index ${b}`);const P=I-x,O=dl({panelConstraints:n,panelIndex:b,size:P});if(!rr(I,O)&&(p+=I-O,c[b]=O,p.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?b--:b++}}if(LM(a,c))return a;{const v=t<0?f:d,b=e[v];Be(b!=null,`Previous layout not found for panel index ${v}`);const x=b+p,I=dl({panelConstraints:n,panelIndex:v,size:x});if(c[v]=I,!rr(I,x)){let P=x-I,B=t<0?f:d;for(;B>=0&&B<n.length;){const q=c[B];Be(q!=null,`Previous layout not found for panel index ${B}`);const G=q+P,j=dl({panelConstraints:n,panelIndex:B,size:G});if(rr(q,j)||(P-=j-q,c[B]=j),rr(P,0))break;t>0?B--:B++}}}const y=c.reduce((v,b)=>b+v,0);return rr(y,100)?c:a}function zM({layout:t,panelsArray:e,pivotIndices:n}){let i=0,a=100,l=0,c=0;const d=n[0];Be(d!=null,"No pivot index found"),e.forEach((v,b)=>{const{constraints:x}=v,{maxSize:I=100,minSize:P=0}=x;b===d?(i=P,a=I):(l+=P,c+=I)});const f=Math.min(a,100-l),p=Math.max(i,100-c),y=t[d];return{valueMax:f,valueMin:p,valueNow:y}}function xu(t,e=document){return Array.from(e.querySelectorAll(`[${Ct.resizeHandleId}][data-panel-group-id="${t}"]`))}function GT(t,e,n=document){const a=xu(t,n).findIndex(l=>l.getAttribute(Ct.resizeHandleId)===e);return a??null}function YT(t,e,n){const i=GT(t,e,n);return i!=null?[i,i+1]:[-1,-1]}function UM(t){return t instanceof HTMLElement?!0:typeof t=="object"&&t!==null&&"tagName"in t&&"getAttribute"in t}function KT(t,e=document){if(UM(e)&&e.dataset.panelGroupId==t)return e;const n=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return n||null}function Uf(t,e=document){const n=e.querySelector(`[${Ct.resizeHandleId}="${t}"]`);return n||null}function BM(t,e,n,i=document){var a,l,c,d;const f=Uf(e,i),p=xu(t,i),y=f?p.indexOf(f):-1,v=(a=(l=n[y])===null||l===void 0?void 0:l.id)!==null&&a!==void 0?a:null,b=(c=(d=n[y+1])===null||d===void 0?void 0:d.id)!==null&&c!==void 0?c:null;return[v,b]}function jM({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:i,panelDataArray:a,panelGroupElement:l,setLayout:c}){F.useRef({didWarnAboutMissingResizeHandle:!1}),Ga(()=>{if(!l)return;const d=xu(n,l);for(let f=0;f<a.length-1;f++){const{valueMax:p,valueMin:y,valueNow:v}=zM({layout:i,panelsArray:a,pivotIndices:[f,f+1]}),b=d[f];if(b!=null){const x=a[f];Be(x,`No panel data found for index "${f}"`),b.setAttribute("aria-controls",x.id),b.setAttribute("aria-valuemax",""+Math.round(p)),b.setAttribute("aria-valuemin",""+Math.round(y)),b.setAttribute("aria-valuenow",v!=null?""+Math.round(v):"")}}return()=>{d.forEach((f,p)=>{f.removeAttribute("aria-controls"),f.removeAttribute("aria-valuemax"),f.removeAttribute("aria-valuemin"),f.removeAttribute("aria-valuenow")})}},[n,i,a,l]),F.useEffect(()=>{if(!l)return;const d=e.current;Be(d,"Eager values not found");const{panelDataArray:f}=d,p=KT(n,l);Be(p!=null,`No group found for id "${n}"`);const y=xu(n,l);Be(y,`No resize handles found for group id "${n}"`);const v=y.map(b=>{const x=b.getAttribute(Ct.resizeHandleId);Be(x,"Resize handle element has no handle id attribute");const[I,P]=BM(n,x,f,l);if(I==null||P==null)return()=>{};const O=B=>{if(!B.defaultPrevented)switch(B.key){case"Enter":{B.preventDefault();const q=f.findIndex(G=>G.id===I);if(q>=0){const G=f[q];Be(G,`No panel data found for index ${q}`);const j=i[q],{collapsedSize:W=0,collapsible:X,minSize:A=0}=G.constraints;if(j!=null&&X){const T=eu({delta:rr(j,W)?A-W:W-j,initialLayout:i,panelConstraints:f.map(N=>N.constraints),pivotIndices:YT(n,x,l),prevLayout:i,trigger:"keyboard"});i!==T&&c(T)}}break}}};return b.addEventListener("keydown",O),()=>{b.removeEventListener("keydown",O)}});return()=>{v.forEach(b=>b())}},[l,t,e,n,i,a,c])}function Sw(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function XT(t,e){const n=t==="horizontal",{x:i,y:a}=Lf(e);return n?i:a}function HM(t,e,n,i,a){const l=n==="horizontal",c=Uf(e,a);Be(c,`No resize handle element found for id "${e}"`);const d=c.getAttribute(Ct.groupId);Be(d,"Resize handle element has no group id attribute");let{initialCursorPosition:f}=i;const p=XT(n,t),y=KT(d,a);Be(y,`No group element found for id "${d}"`);const v=y.getBoundingClientRect(),b=l?v.width:v.height;return(p-f)/b*100}function qM(t,e,n,i,a,l){if(LT(t)){const c=n==="horizontal";let d=0;t.shiftKey?d=100:a!=null?d=a:d=10;let f=0;switch(t.key){case"ArrowDown":f=c?0:d;break;case"ArrowLeft":f=c?-d:0;break;case"ArrowRight":f=c?d:0;break;case"ArrowUp":f=c?0:-d;break;case"End":f=100;break;case"Home":f=-100;break}return f}else return i==null?0:HM(t,e,n,i,l)}function $M({panelDataArray:t}){const e=Array(t.length),n=t.map(l=>l.constraints);let i=0,a=100;for(let l=0;l<t.length;l++){const c=n[l];Be(c,`Panel constraints not found for index ${l}`);const{defaultSize:d}=c;d!=null&&(i++,e[l]=d,a-=d)}for(let l=0;l<t.length;l++){const c=n[l];Be(c,`Panel constraints not found for index ${l}`);const{defaultSize:d}=c;if(d!=null)continue;const f=t.length-i,p=a/f;i++,e[l]=p,a-=p}return e}function rl(t,e,n){e.forEach((i,a)=>{const l=t[a];Be(l,`Panel data not found for index ${a}`);const{callbacks:c,constraints:d,id:f}=l,{collapsedSize:p=0,collapsible:y}=d,v=n[f];if(v==null||i!==v){n[f]=i;const{onCollapse:b,onExpand:x,onResize:I}=c;I&&I(i,v),y&&(b||x)&&(x&&(v==null||Xi(v,p))&&!Xi(i,p)&&x(),b&&(v==null||!Xi(v,p))&&Xi(i,p)&&b())}})}function Sh(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function FM({defaultSize:t,dragState:e,layout:n,panelData:i,panelIndex:a,precision:l=3}){const c=n[a];let d;return c==null?d=t!=null?t.toPrecision(l):"1":i.length===1?d="1":d=c.toPrecision(l),{flexBasis:0,flexGrow:d,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function GM(t,e=10){let n=null;return(...a)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...a)},e)}}function Aw(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function QT(t){return`react-resizable-panels:${t}`}function WT(t){return t.map(e=>{const{constraints:n,id:i,idIsFromProps:a,order:l}=e;return a?i:l?`${l}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function ZT(t,e){try{const n=QT(t),i=e.getItem(n);if(i){const a=JSON.parse(i);if(typeof a=="object"&&a!=null)return a}}catch{}return null}function YM(t,e,n){var i,a;const l=(i=ZT(t,n))!==null&&i!==void 0?i:{},c=WT(e);return(a=l[c])!==null&&a!==void 0?a:null}function KM(t,e,n,i,a){var l;const c=QT(t),d=WT(e),f=(l=ZT(t,a))!==null&&l!==void 0?l:{};f[d]={expandToSizes:Object.fromEntries(n.entries()),layout:i};try{a.setItem(c,JSON.stringify(f))}catch(p){console.error(p)}}function Rw({layout:t,panelConstraints:e}){const n=[...t],i=n.reduce((l,c)=>l+c,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(l=>`${l}%`).join(", ")}`);if(!rr(i,100)&&n.length>0)for(let l=0;l<e.length;l++){const c=n[l];Be(c!=null,`No layout data found for index ${l}`);const d=100/i*c;n[l]=d}let a=0;for(let l=0;l<e.length;l++){const c=n[l];Be(c!=null,`No layout data found for index ${l}`);const d=dl({panelConstraints:e,panelIndex:l,size:c});c!=d&&(a+=c-d,n[l]=d)}if(!rr(a,0))for(let l=0;l<e.length;l++){const c=n[l];Be(c!=null,`No layout data found for index ${l}`);const d=c+a,f=dl({panelConstraints:e,panelIndex:l,size:d});if(c!==f&&(a-=f-c,n[l]=f,rr(a,0)))break}return n}const XM=100,tu={getItem:t=>(Aw(tu),tu.getItem(t)),setItem:(t,e)=>{Aw(tu),tu.setItem(t,e)}},Nw={};function JT({autoSaveId:t=null,children:e,className:n="",direction:i,forwardedRef:a,id:l=null,onLayout:c=null,keyboardResizeBy:d=null,storage:f=tu,style:p,tagName:y="div",...v}){const b=J0(l),x=F.useRef(null),[I,P]=F.useState(null),[O,B]=F.useState([]),q=VM(),G=F.useRef({}),j=F.useRef(new Map),W=F.useRef(0),X=F.useRef({autoSaveId:t,direction:i,dragState:I,id:b,keyboardResizeBy:d,onLayout:c,storage:f}),A=F.useRef({layout:O,panelDataArray:[],panelDataArrayChanged:!1});F.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),F.useImperativeHandle(a,()=>({getId:()=>X.current.id,getLayout:()=>{const{layout:K}=A.current;return K},setLayout:K=>{const{onLayout:ie}=X.current,{layout:ue,panelDataArray:de}=A.current,ve=Rw({layout:K,panelConstraints:de.map(_e=>_e.constraints)});Sw(ue,ve)||(B(ve),A.current.layout=ve,ie&&ie(ve),rl(de,ve,G.current))}}),[]),Ga(()=>{X.current.autoSaveId=t,X.current.direction=i,X.current.dragState=I,X.current.id=b,X.current.onLayout=c,X.current.storage=f}),jM({committedValuesRef:X,eagerValuesRef:A,groupId:b,layout:O,panelDataArray:A.current.panelDataArray,setLayout:B,panelGroupElement:x.current}),F.useEffect(()=>{const{panelDataArray:K}=A.current;if(t){if(O.length===0||O.length!==K.length)return;let ie=Nw[t];ie==null&&(ie=GM(KM,XM),Nw[t]=ie);const ue=[...K],de=new Map(j.current);ie(t,ue,de,O,f)}},[t,O,f]),F.useEffect(()=>{});const T=F.useCallback(K=>{const{onLayout:ie}=X.current,{layout:ue,panelDataArray:de}=A.current;if(K.constraints.collapsible){const ve=de.map(et=>et.constraints),{collapsedSize:_e=0,panelSize:Ae,pivotIndices:Ne}=Ua(de,K,ue);if(Be(Ae!=null,`Panel size not found for panel "${K.id}"`),!Xi(Ae,_e)){j.current.set(K.id,Ae);const rt=sl(de,K)===de.length-1?Ae-_e:_e-Ae,Le=eu({delta:rt,initialLayout:ue,panelConstraints:ve,pivotIndices:Ne,prevLayout:ue,trigger:"imperative-api"});Sh(ue,Le)||(B(Le),A.current.layout=Le,ie&&ie(Le),rl(de,Le,G.current))}}},[]),N=F.useCallback((K,ie)=>{const{onLayout:ue}=X.current,{layout:de,panelDataArray:ve}=A.current;if(K.constraints.collapsible){const _e=ve.map(tt=>tt.constraints),{collapsedSize:Ae=0,panelSize:Ne=0,minSize:et=0,pivotIndices:rt}=Ua(ve,K,de),Le=ie??et;if(Xi(Ne,Ae)){const tt=j.current.get(K.id),it=tt!=null&&tt>=Le?tt:Le,ze=sl(ve,K)===ve.length-1?Ne-it:it-Ne,Ee=eu({delta:ze,initialLayout:de,panelConstraints:_e,pivotIndices:rt,prevLayout:de,trigger:"imperative-api"});Sh(de,Ee)||(B(Ee),A.current.layout=Ee,ue&&ue(Ee),rl(ve,Ee,G.current))}}},[]),U=F.useCallback(K=>{const{layout:ie,panelDataArray:ue}=A.current,{panelSize:de}=Ua(ue,K,ie);return Be(de!=null,`Panel size not found for panel "${K.id}"`),de},[]),L=F.useCallback((K,ie)=>{const{panelDataArray:ue}=A.current,de=sl(ue,K);return FM({defaultSize:ie,dragState:I,layout:O,panelData:ue,panelIndex:de})},[I,O]),C=F.useCallback(K=>{const{layout:ie,panelDataArray:ue}=A.current,{collapsedSize:de=0,collapsible:ve,panelSize:_e}=Ua(ue,K,ie);return Be(_e!=null,`Panel size not found for panel "${K.id}"`),ve===!0&&Xi(_e,de)},[]),S=F.useCallback(K=>{const{layout:ie,panelDataArray:ue}=A.current,{collapsedSize:de=0,collapsible:ve,panelSize:_e}=Ua(ue,K,ie);return Be(_e!=null,`Panel size not found for panel "${K.id}"`),!ve||Ka(_e,de)>0},[]),D=F.useCallback(K=>{const{panelDataArray:ie}=A.current;ie.push(K),ie.sort((ue,de)=>{const ve=ue.order,_e=de.order;return ve==null&&_e==null?0:ve==null?-1:_e==null?1:ve-_e}),A.current.panelDataArrayChanged=!0,q()},[q]);Ga(()=>{if(A.current.panelDataArrayChanged){A.current.panelDataArrayChanged=!1;const{autoSaveId:K,onLayout:ie,storage:ue}=X.current,{layout:de,panelDataArray:ve}=A.current;let _e=null;if(K){const Ne=YM(K,ve,ue);Ne&&(j.current=new Map(Object.entries(Ne.expandToSizes)),_e=Ne.layout)}_e==null&&(_e=$M({panelDataArray:ve}));const Ae=Rw({layout:_e,panelConstraints:ve.map(Ne=>Ne.constraints)});Sw(de,Ae)||(B(Ae),A.current.layout=Ae,ie&&ie(Ae),rl(ve,Ae,G.current))}}),Ga(()=>{const K=A.current;return()=>{K.layout=[]}},[]);const H=F.useCallback(K=>{let ie=!1;const ue=x.current;return ue&&window.getComputedStyle(ue,null).getPropertyValue("direction")==="rtl"&&(ie=!0),function(ve){ve.preventDefault();const _e=x.current;if(!_e)return()=>null;const{direction:Ae,dragState:Ne,id:et,keyboardResizeBy:rt,onLayout:Le}=X.current,{layout:tt,panelDataArray:it}=A.current,{initialLayout:Lt}=Ne??{},ze=YT(et,K,_e);let Ee=qM(ve,K,Ae,Ne,rt,_e);const At=Ae==="horizontal";At&&ie&&(Ee=-Ee);const vn=it.map(An=>An.constraints),Gt=eu({delta:Ee,initialLayout:Lt??tt,panelConstraints:vn,pivotIndices:ze,prevLayout:tt,trigger:LT(ve)?"keyboard":"mouse-or-touch"}),Fn=!Sh(tt,Gt);(zT(ve)||UT(ve))&&W.current!=Ee&&(W.current=Ee,!Fn&&Ee!==0?At?Nm(K,Ee<0?jT:HT):Nm(K,Ee<0?qT:$T):Nm(K,0)),Fn&&(B(Gt),A.current.layout=Gt,Le&&Le(Gt),rl(it,Gt,G.current))}},[]),k=F.useCallback((K,ie)=>{const{onLayout:ue}=X.current,{layout:de,panelDataArray:ve}=A.current,_e=ve.map(tt=>tt.constraints),{panelSize:Ae,pivotIndices:Ne}=Ua(ve,K,de);Be(Ae!=null,`Panel size not found for panel "${K.id}"`);const rt=sl(ve,K)===ve.length-1?Ae-ie:ie-Ae,Le=eu({delta:rt,initialLayout:de,panelConstraints:_e,pivotIndices:Ne,prevLayout:de,trigger:"imperative-api"});Sh(de,Le)||(B(Le),A.current.layout=Le,ue&&ue(Le),rl(ve,Le,G.current))},[]),$=F.useCallback((K,ie)=>{const{layout:ue,panelDataArray:de}=A.current,{collapsedSize:ve=0,collapsible:_e}=ie,{collapsedSize:Ae=0,collapsible:Ne,maxSize:et=100,minSize:rt=0}=K.constraints,{panelSize:Le}=Ua(de,K,ue);Le!=null&&(_e&&Ne&&Xi(Le,ve)?Xi(ve,Ae)||k(K,Ae):Le<rt?k(K,rt):Le>et&&k(K,et))},[k]),Z=F.useCallback((K,ie)=>{const{direction:ue}=X.current,{layout:de}=A.current;if(!x.current)return;const ve=Uf(K,x.current);Be(ve,`Drag handle element not found for id "${K}"`);const _e=XT(ue,ie);P({dragHandleId:K,dragHandleRect:ve.getBoundingClientRect(),initialCursorPosition:_e,initialLayout:de})},[]),Q=F.useCallback(()=>{P(null)},[]),V=F.useCallback(K=>{const{panelDataArray:ie}=A.current,ue=sl(ie,K);ue>=0&&(ie.splice(ue,1),delete G.current[K.id],A.current.panelDataArrayChanged=!0,q())},[q]),J=F.useMemo(()=>({collapsePanel:T,direction:i,dragState:I,expandPanel:N,getPanelSize:U,getPanelStyle:L,groupId:b,isPanelCollapsed:C,isPanelExpanded:S,reevaluatePanelConstraints:$,registerPanel:D,registerResizeHandle:H,resizePanel:k,startDragging:Z,stopDragging:Q,unregisterPanel:V,panelGroupElement:x.current}),[T,I,i,N,U,L,b,C,S,$,D,H,k,Z,Q,V]),te={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return F.createElement(Vf.Provider,{value:J},F.createElement(y,{...v,children:e,className:n,id:l,ref:x,style:{...te,...p},[Ct.group]:"",[Ct.groupDirection]:i,[Ct.groupId]:b}))}const eS=F.forwardRef((t,e)=>F.createElement(JT,{...t,forwardedRef:e}));JT.displayName="PanelGroup";eS.displayName="forwardRef(PanelGroup)";function sl(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function Ua(t,e,n){const i=sl(t,e),l=i===t.length-1?[i-1,i]:[i,i+1],c=n[i];return{...e.constraints,panelSize:c,pivotIndices:l}}function QM({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:i}){F.useEffect(()=>{if(t||n==null||i==null)return;const a=Uf(e,i);if(a==null)return;const l=c=>{if(!c.defaultPrevented)switch(c.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{c.preventDefault(),n(c);break}case"F6":{c.preventDefault();const d=a.getAttribute(Ct.groupId);Be(d,`No group element found for id "${d}"`);const f=xu(d,i),p=GT(d,e,i);Be(p!==null,`No resize element found for id "${e}"`);const y=c.shiftKey?p>0?p-1:f.length-1:p+1<f.length?p+1:0;f[y].focus();break}}};return a.addEventListener("keydown",l),()=>{a.removeEventListener("keydown",l)}},[i,t,e,n])}function tS({children:t=null,className:e="",disabled:n=!1,hitAreaMargins:i,id:a,onBlur:l,onClick:c,onDragging:d,onFocus:f,onPointerDown:p,onPointerUp:y,style:v={},tabIndex:b=0,tagName:x="div",...I}){var P,O;const B=F.useRef(null),q=F.useRef({onClick:c,onDragging:d,onPointerDown:p,onPointerUp:y});F.useEffect(()=>{q.current.onClick=c,q.current.onDragging=d,q.current.onPointerDown=p,q.current.onPointerUp=y});const G=F.useContext(Vf);if(G===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:j,groupId:W,registerResizeHandle:X,startDragging:A,stopDragging:T,panelGroupElement:N}=G,U=J0(a),[L,C]=F.useState("inactive"),[S,D]=F.useState(!1),[H,k]=F.useState(null),$=F.useRef({state:L});Ga(()=>{$.current.state=L}),F.useEffect(()=>{if(n)k(null);else{const J=X(U);k(()=>J)}},[n,U,X]);const Z=(P=i?.coarse)!==null&&P!==void 0?P:15,Q=(O=i?.fine)!==null&&O!==void 0?O:5;F.useEffect(()=>{if(n||H==null)return;const J=B.current;Be(J,"Element ref not attached");let te=!1;return OM(U,J,j,{coarse:Z,fine:Q},(ie,ue,de)=>{if(!ue){C("inactive");return}switch(ie){case"down":{C("drag"),te=!1,Be(de,'Expected event to be defined for "down" action'),A(U,de);const{onDragging:ve,onPointerDown:_e}=q.current;ve?.(!0),_e?.();break}case"move":{const{state:ve}=$.current;te=!0,ve!=="drag"&&C("hover"),Be(de,'Expected event to be defined for "move" action'),H(de);break}case"up":{C("hover"),T();const{onClick:ve,onDragging:_e,onPointerUp:Ae}=q.current;_e?.(!1),Ae?.(),te||ve?.();break}}})},[Z,j,n,Q,X,U,H,A,T]),QM({disabled:n,handleId:U,resizeHandler:H,panelGroupElement:N});const V={touchAction:"none",userSelect:"none"};return F.createElement(x,{...I,children:t,className:e,id:a,onBlur:()=>{D(!1),l?.()},onFocus:()=>{D(!0),f?.()},ref:B,role:"separator",style:{...V,...v},tabIndex:b,[Ct.groupDirection]:j,[Ct.groupId]:W,[Ct.resizeHandle]:"",[Ct.resizeHandleActive]:L==="drag"?"pointer":S?"keyboard":void 0,[Ct.resizeHandleEnabled]:!n,[Ct.resizeHandleId]:U,[Ct.resizeHandleState]:L})}tS.displayName="PanelResizeHandle";const WM=()=>{};var Iw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let a=t.charCodeAt(i);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},ZM=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const a=t[n++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=t[n++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=t[n++],c=t[n++],d=t[n++],f=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const l=t[n++],c=t[n++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},rS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<t.length;a+=3){const l=t[a],c=a+1<t.length,d=c?t[a+1]:0,f=a+2<t.length,p=f?t[a+2]:0,y=l>>2,v=(l&3)<<4|d>>4;let b=(d&15)<<2|p>>6,x=p&63;f||(x=64,c||(b=64)),i.push(n[y],n[v],n[b],n[x])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ZM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<t.length;){const l=n[t.charAt(a++)],d=a<t.length?n[t.charAt(a)]:0;++a;const p=a<t.length?n[t.charAt(a)]:64;++a;const v=a<t.length?n[t.charAt(a)]:64;if(++a,l==null||d==null||p==null||v==null)throw new JM;const b=l<<2|d>>4;if(i.push(b),p!==64){const x=d<<4&240|p>>2;if(i.push(x),v!==64){const I=p<<6&192|v;i.push(I)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class JM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const e3=function(t){const e=nS(t);return rS.encodeByteArray(e,!0)},lf=function(t){return e3(t).replace(/\./g,"")},iS=function(t){try{return rS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3=()=>t3().__FIREBASE_DEFAULTS__,r3=()=>{if(typeof process>"u"||typeof Iw>"u")return;const t=Iw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},i3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&iS(t[1]);return e&&JSON.parse(e)},Bf=()=>{try{return WM()||n3()||r3()||i3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},sS=t=>{var e,n;return(n=(e=Bf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},aS=t=>{const e=sS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},oS=()=>{var t;return(t=Bf())===null||t===void 0?void 0:t.config},lS=t=>{var e;return(e=Bf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(t){return t.endsWith(".cloudworkstations.dev")}async function ny(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",a=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[lf(JSON.stringify(n)),lf(JSON.stringify(c)),""].join(".")}const ou={};function o3(){const t={prod:[],emulator:[]};for(const e of Object.keys(ou))ou[e]?t.emulator.push(e):t.prod.push(e);return t}function l3(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Cw=!1;function ry(t,e){if(typeof window>"u"||typeof document>"u"||!no(window.location.host)||ou[t]===e||ou[t]||Cw)return;ou[t]=e;function n(b){return`__firebase__banner__${b}`}const i="__firebase__banner",l=o3().prod.length>0;function c(){const b=document.getElementById(i);b&&b.remove()}function d(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function f(b,x){b.setAttribute("width","24"),b.setAttribute("id",x),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function p(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Cw=!0,c()},b}function y(b,x){b.setAttribute("id",x),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function v(){const b=l3(i),x=n("text"),I=document.getElementById(x)||document.createElement("span"),P=n("learnmore"),O=document.getElementById(P)||document.createElement("a"),B=n("preprendIcon"),q=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const G=b.element;d(G),y(O,P);const j=p();f(q,B),G.append(q,I,O,j),document.body.appendChild(G)}l?(I.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function c3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sn())}function u3(){var t;const e=(t=Bf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function d3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function h3(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function f3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function g3(){const t=Sn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function p3(){return!u3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function m3(){try{return typeof indexedDB=="object"}catch{return!1}}function y3(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3="FirebaseError";class xi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=v3,Object.setPrototypeOf(this,xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uu.prototype.create)}}class Uu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?_3(l,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new xi(a,d,i)}}function _3(t,e){return t.replace(b3,(n,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const b3=/\{\$([^}]+)}/g;function E3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xa(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const a of n){if(!i.includes(a))return!1;const l=t[a],c=e[a];if(kw(l)&&kw(c)){if(!Xa(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!n.includes(a))return!1;return!0}function kw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function nu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function ru(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function w3(t,e){const n=new x3(t,e);return n.subscribe.bind(n)}class x3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let a;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");T3(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:i},a.next===void 0&&(a.next=Cm),a.error===void 0&&(a.error=Cm),a.complete===void 0&&(a.complete=Cm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function T3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Cm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(t){return t&&t._delegate?t._delegate:t}class Zs{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new s3;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e?.identifier),a=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(R3(e))try{this.getOrInitializeService({instanceIdentifier:ja})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=ja){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ja){return this.instances.has(e)}getOptions(e=ja){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(a)}return a}onInit(e,n){var i;const a=this.normalizeInstanceIdentifier(n),l=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const a of i)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:A3(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ja){return this.component?this.component.multipleInstances?e:ja:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function A3(t){return t===ja?void 0:t}function R3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new S3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ke||(Ke={}));const I3={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},C3=Ke.INFO,k3={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},D3=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),a=k3[e];if(a)console[a](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class iy{constructor(e){this.name=e,this._logLevel=C3,this._logHandler=D3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?I3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const M3=(t,e)=>e.some(n=>t instanceof n);let Dw,Mw;function O3(){return Dw||(Dw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function P3(){return Mw||(Mw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cS=new WeakMap,a0=new WeakMap,uS=new WeakMap,km=new WeakMap,sy=new WeakMap;function V3(t){const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("success",l),t.removeEventListener("error",c)},l=()=>{n(Gs(t.result)),a()},c=()=>{i(t.error),a()};t.addEventListener("success",l),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&cS.set(n,t)}).catch(()=>{}),sy.set(e,t),e}function L3(t){if(a0.has(t))return;const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",c),t.removeEventListener("abort",c)},l=()=>{n(),a()},c=()=>{i(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",l),t.addEventListener("error",c),t.addEventListener("abort",c)});a0.set(t,e)}let o0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return a0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||uS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function z3(t){o0=t(o0)}function U3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Dm(this),e,...n);return uS.set(i,e.sort?e.sort():[e]),Gs(i)}:P3().includes(t)?function(...e){return t.apply(Dm(this),e),Gs(cS.get(this))}:function(...e){return Gs(t.apply(Dm(this),e))}}function B3(t){return typeof t=="function"?U3(t):(t instanceof IDBTransaction&&L3(t),M3(t,O3())?new Proxy(t,o0):t)}function Gs(t){if(t instanceof IDBRequest)return V3(t);if(km.has(t))return km.get(t);const e=B3(t);return e!==t&&(km.set(t,e),sy.set(e,t)),e}const Dm=t=>sy.get(t);function j3(t,e,{blocked:n,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(t,e),d=Gs(c);return i&&c.addEventListener("upgradeneeded",f=>{i(Gs(c.result),f.oldVersion,f.newVersion,Gs(c.transaction),f)}),n&&c.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),d.then(f=>{l&&f.addEventListener("close",()=>l()),a&&f.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const H3=["get","getKey","getAll","getAllKeys","count"],q3=["put","add","delete","clear"],Mm=new Map;function Ow(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Mm.get(e))return Mm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,a=q3.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(a||H3.includes(n)))return;const l=async function(c,...d){const f=this.transaction(c,a?"readwrite":"readonly");let p=f.store;return i&&(p=p.index(d.shift())),(await Promise.all([p[n](...d),a&&f.done]))[0]};return Mm.set(e,l),l}z3(t=>({...t,get:(e,n,i)=>Ow(e,n)||t.get(e,n,i),has:(e,n)=>!!Ow(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(F3(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function F3(t){const e=t.getComponent();return e?.type==="VERSION"}const l0="@firebase/app",Pw="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new iy("@firebase/app"),G3="@firebase/app-compat",Y3="@firebase/analytics-compat",K3="@firebase/analytics",X3="@firebase/app-check-compat",Q3="@firebase/app-check",W3="@firebase/auth",Z3="@firebase/auth-compat",J3="@firebase/database",eO="@firebase/data-connect",tO="@firebase/database-compat",nO="@firebase/functions",rO="@firebase/functions-compat",iO="@firebase/installations",sO="@firebase/installations-compat",aO="@firebase/messaging",oO="@firebase/messaging-compat",lO="@firebase/performance",cO="@firebase/performance-compat",uO="@firebase/remote-config",dO="@firebase/remote-config-compat",hO="@firebase/storage",fO="@firebase/storage-compat",gO="@firebase/firestore",pO="@firebase/ai",mO="@firebase/firestore-compat",yO="firebase",vO="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0="[DEFAULT]",_O={[l0]:"fire-core",[G3]:"fire-core-compat",[K3]:"fire-analytics",[Y3]:"fire-analytics-compat",[Q3]:"fire-app-check",[X3]:"fire-app-check-compat",[W3]:"fire-auth",[Z3]:"fire-auth-compat",[J3]:"fire-rtdb",[eO]:"fire-data-connect",[tO]:"fire-rtdb-compat",[nO]:"fire-fn",[rO]:"fire-fn-compat",[iO]:"fire-iid",[sO]:"fire-iid-compat",[aO]:"fire-fcm",[oO]:"fire-fcm-compat",[lO]:"fire-perf",[cO]:"fire-perf-compat",[uO]:"fire-rc",[dO]:"fire-rc-compat",[hO]:"fire-gcs",[fO]:"fire-gcs-compat",[gO]:"fire-fst",[mO]:"fire-fst-compat",[pO]:"fire-vertex","fire-js":"fire-js",[yO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf=new Map,bO=new Map,u0=new Map;function Vw(t,e){try{t.container.addComponent(e)}catch(n){ns.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qa(t){const e=t.name;if(u0.has(e))return ns.debug(`There were multiple attempts to register component ${e}.`),!1;u0.set(e,t);for(const n of cf.values())Vw(n,t);for(const n of bO.values())Vw(n,t);return!0}function jf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ir(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ys=new Uu("app","Firebase",EO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Zs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=vO;function dS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:c0,automaticDataCollectionEnabled:!0},e),a=i.name;if(typeof a!="string"||!a)throw Ys.create("bad-app-name",{appName:String(a)});if(n||(n=oS()),!n)throw Ys.create("no-options");const l=cf.get(a);if(l){if(Xa(n,l.options)&&Xa(i,l.config))return l;throw Ys.create("duplicate-app",{appName:a})}const c=new N3(a);for(const f of u0.values())c.addComponent(f);const d=new wO(n,i,c);return cf.set(a,d),d}function ay(t=c0){const e=cf.get(t);if(!e&&t===c0&&oS())return dS();if(!e)throw Ys.create("no-app",{appName:t});return e}function mi(t,e,n){var i;let a=(i=_O[t])!==null&&i!==void 0?i:t;n&&(a+=`-${n}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ns.warn(d.join(" "));return}Qa(new Zs(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO="firebase-heartbeat-database",TO=1,Tu="firebase-heartbeat-store";let Om=null;function hS(){return Om||(Om=j3(xO,TO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Tu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ys.create("idb-open",{originalErrorMessage:t.message})})),Om}async function SO(t){try{const n=(await hS()).transaction(Tu),i=await n.objectStore(Tu).get(fS(t));return await n.done,i}catch(e){if(e instanceof xi)ns.warn(e.message);else{const n=Ys.create("idb-get",{originalErrorMessage:e?.message});ns.warn(n.message)}}}async function Lw(t,e){try{const i=(await hS()).transaction(Tu,"readwrite");await i.objectStore(Tu).put(e,fS(t)),await i.done}catch(n){if(n instanceof xi)ns.warn(n.message);else{const i=Ys.create("idb-set",{originalErrorMessage:n?.message});ns.warn(i.message)}}}function fS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=1024,RO=30;class NO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new CO(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=zw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>RO){const c=kO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ns.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zw(),{heartbeatsToSend:i,unsentEntries:a}=IO(this._heartbeatsCache.heartbeats),l=lf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return ns.warn(n),""}}}function zw(){return new Date().toISOString().substring(0,10)}function IO(t,e=AO){const n=[];let i=t.slice();for(const a of t){const l=n.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),Uw(n)>e){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),Uw(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class CO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return m3()?y3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await SO(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Lw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Lw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Uw(t){return lf(JSON.stringify({version:2,heartbeats:t})).length}function kO(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(t){Qa(new Zs("platform-logger",e=>new $3(e),"PRIVATE")),Qa(new Zs("heartbeat",e=>new NO(e),"PRIVATE")),mi(l0,Pw,t),mi(l0,Pw,"esm2017"),mi("fire-js","")}DO("");var MO="firebase",OO="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mi(MO,OO,"app");var Bw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ks,gS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,T){function N(){}N.prototype=T.prototype,A.D=T.prototype,A.prototype=new N,A.prototype.constructor=A,A.C=function(U,L,C){for(var S=Array(arguments.length-2),D=2;D<arguments.length;D++)S[D-2]=arguments[D];return T.prototype[L].apply(U,S)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(A,T,N){N||(N=0);var U=Array(16);if(typeof T=="string")for(var L=0;16>L;++L)U[L]=T.charCodeAt(N++)|T.charCodeAt(N++)<<8|T.charCodeAt(N++)<<16|T.charCodeAt(N++)<<24;else for(L=0;16>L;++L)U[L]=T[N++]|T[N++]<<8|T[N++]<<16|T[N++]<<24;T=A.g[0],N=A.g[1],L=A.g[2];var C=A.g[3],S=T+(C^N&(L^C))+U[0]+3614090360&4294967295;T=N+(S<<7&4294967295|S>>>25),S=C+(L^T&(N^L))+U[1]+3905402710&4294967295,C=T+(S<<12&4294967295|S>>>20),S=L+(N^C&(T^N))+U[2]+606105819&4294967295,L=C+(S<<17&4294967295|S>>>15),S=N+(T^L&(C^T))+U[3]+3250441966&4294967295,N=L+(S<<22&4294967295|S>>>10),S=T+(C^N&(L^C))+U[4]+4118548399&4294967295,T=N+(S<<7&4294967295|S>>>25),S=C+(L^T&(N^L))+U[5]+1200080426&4294967295,C=T+(S<<12&4294967295|S>>>20),S=L+(N^C&(T^N))+U[6]+2821735955&4294967295,L=C+(S<<17&4294967295|S>>>15),S=N+(T^L&(C^T))+U[7]+4249261313&4294967295,N=L+(S<<22&4294967295|S>>>10),S=T+(C^N&(L^C))+U[8]+1770035416&4294967295,T=N+(S<<7&4294967295|S>>>25),S=C+(L^T&(N^L))+U[9]+2336552879&4294967295,C=T+(S<<12&4294967295|S>>>20),S=L+(N^C&(T^N))+U[10]+4294925233&4294967295,L=C+(S<<17&4294967295|S>>>15),S=N+(T^L&(C^T))+U[11]+2304563134&4294967295,N=L+(S<<22&4294967295|S>>>10),S=T+(C^N&(L^C))+U[12]+1804603682&4294967295,T=N+(S<<7&4294967295|S>>>25),S=C+(L^T&(N^L))+U[13]+4254626195&4294967295,C=T+(S<<12&4294967295|S>>>20),S=L+(N^C&(T^N))+U[14]+2792965006&4294967295,L=C+(S<<17&4294967295|S>>>15),S=N+(T^L&(C^T))+U[15]+1236535329&4294967295,N=L+(S<<22&4294967295|S>>>10),S=T+(L^C&(N^L))+U[1]+4129170786&4294967295,T=N+(S<<5&4294967295|S>>>27),S=C+(N^L&(T^N))+U[6]+3225465664&4294967295,C=T+(S<<9&4294967295|S>>>23),S=L+(T^N&(C^T))+U[11]+643717713&4294967295,L=C+(S<<14&4294967295|S>>>18),S=N+(C^T&(L^C))+U[0]+3921069994&4294967295,N=L+(S<<20&4294967295|S>>>12),S=T+(L^C&(N^L))+U[5]+3593408605&4294967295,T=N+(S<<5&4294967295|S>>>27),S=C+(N^L&(T^N))+U[10]+38016083&4294967295,C=T+(S<<9&4294967295|S>>>23),S=L+(T^N&(C^T))+U[15]+3634488961&4294967295,L=C+(S<<14&4294967295|S>>>18),S=N+(C^T&(L^C))+U[4]+3889429448&4294967295,N=L+(S<<20&4294967295|S>>>12),S=T+(L^C&(N^L))+U[9]+568446438&4294967295,T=N+(S<<5&4294967295|S>>>27),S=C+(N^L&(T^N))+U[14]+3275163606&4294967295,C=T+(S<<9&4294967295|S>>>23),S=L+(T^N&(C^T))+U[3]+4107603335&4294967295,L=C+(S<<14&4294967295|S>>>18),S=N+(C^T&(L^C))+U[8]+1163531501&4294967295,N=L+(S<<20&4294967295|S>>>12),S=T+(L^C&(N^L))+U[13]+2850285829&4294967295,T=N+(S<<5&4294967295|S>>>27),S=C+(N^L&(T^N))+U[2]+4243563512&4294967295,C=T+(S<<9&4294967295|S>>>23),S=L+(T^N&(C^T))+U[7]+1735328473&4294967295,L=C+(S<<14&4294967295|S>>>18),S=N+(C^T&(L^C))+U[12]+2368359562&4294967295,N=L+(S<<20&4294967295|S>>>12),S=T+(N^L^C)+U[5]+4294588738&4294967295,T=N+(S<<4&4294967295|S>>>28),S=C+(T^N^L)+U[8]+2272392833&4294967295,C=T+(S<<11&4294967295|S>>>21),S=L+(C^T^N)+U[11]+1839030562&4294967295,L=C+(S<<16&4294967295|S>>>16),S=N+(L^C^T)+U[14]+4259657740&4294967295,N=L+(S<<23&4294967295|S>>>9),S=T+(N^L^C)+U[1]+2763975236&4294967295,T=N+(S<<4&4294967295|S>>>28),S=C+(T^N^L)+U[4]+1272893353&4294967295,C=T+(S<<11&4294967295|S>>>21),S=L+(C^T^N)+U[7]+4139469664&4294967295,L=C+(S<<16&4294967295|S>>>16),S=N+(L^C^T)+U[10]+3200236656&4294967295,N=L+(S<<23&4294967295|S>>>9),S=T+(N^L^C)+U[13]+681279174&4294967295,T=N+(S<<4&4294967295|S>>>28),S=C+(T^N^L)+U[0]+3936430074&4294967295,C=T+(S<<11&4294967295|S>>>21),S=L+(C^T^N)+U[3]+3572445317&4294967295,L=C+(S<<16&4294967295|S>>>16),S=N+(L^C^T)+U[6]+76029189&4294967295,N=L+(S<<23&4294967295|S>>>9),S=T+(N^L^C)+U[9]+3654602809&4294967295,T=N+(S<<4&4294967295|S>>>28),S=C+(T^N^L)+U[12]+3873151461&4294967295,C=T+(S<<11&4294967295|S>>>21),S=L+(C^T^N)+U[15]+530742520&4294967295,L=C+(S<<16&4294967295|S>>>16),S=N+(L^C^T)+U[2]+3299628645&4294967295,N=L+(S<<23&4294967295|S>>>9),S=T+(L^(N|~C))+U[0]+4096336452&4294967295,T=N+(S<<6&4294967295|S>>>26),S=C+(N^(T|~L))+U[7]+1126891415&4294967295,C=T+(S<<10&4294967295|S>>>22),S=L+(T^(C|~N))+U[14]+2878612391&4294967295,L=C+(S<<15&4294967295|S>>>17),S=N+(C^(L|~T))+U[5]+4237533241&4294967295,N=L+(S<<21&4294967295|S>>>11),S=T+(L^(N|~C))+U[12]+1700485571&4294967295,T=N+(S<<6&4294967295|S>>>26),S=C+(N^(T|~L))+U[3]+2399980690&4294967295,C=T+(S<<10&4294967295|S>>>22),S=L+(T^(C|~N))+U[10]+4293915773&4294967295,L=C+(S<<15&4294967295|S>>>17),S=N+(C^(L|~T))+U[1]+2240044497&4294967295,N=L+(S<<21&4294967295|S>>>11),S=T+(L^(N|~C))+U[8]+1873313359&4294967295,T=N+(S<<6&4294967295|S>>>26),S=C+(N^(T|~L))+U[15]+4264355552&4294967295,C=T+(S<<10&4294967295|S>>>22),S=L+(T^(C|~N))+U[6]+2734768916&4294967295,L=C+(S<<15&4294967295|S>>>17),S=N+(C^(L|~T))+U[13]+1309151649&4294967295,N=L+(S<<21&4294967295|S>>>11),S=T+(L^(N|~C))+U[4]+4149444226&4294967295,T=N+(S<<6&4294967295|S>>>26),S=C+(N^(T|~L))+U[11]+3174756917&4294967295,C=T+(S<<10&4294967295|S>>>22),S=L+(T^(C|~N))+U[2]+718787259&4294967295,L=C+(S<<15&4294967295|S>>>17),S=N+(C^(L|~T))+U[9]+3951481745&4294967295,A.g[0]=A.g[0]+T&4294967295,A.g[1]=A.g[1]+(L+(S<<21&4294967295|S>>>11))&4294967295,A.g[2]=A.g[2]+L&4294967295,A.g[3]=A.g[3]+C&4294967295}i.prototype.u=function(A,T){T===void 0&&(T=A.length);for(var N=T-this.blockSize,U=this.B,L=this.h,C=0;C<T;){if(L==0)for(;C<=N;)a(this,A,C),C+=this.blockSize;if(typeof A=="string"){for(;C<T;)if(U[L++]=A.charCodeAt(C++),L==this.blockSize){a(this,U),L=0;break}}else for(;C<T;)if(U[L++]=A[C++],L==this.blockSize){a(this,U),L=0;break}}this.h=L,this.o+=T},i.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var T=1;T<A.length-8;++T)A[T]=0;var N=8*this.o;for(T=A.length-8;T<A.length;++T)A[T]=N&255,N/=256;for(this.u(A),A=Array(16),T=N=0;4>T;++T)for(var U=0;32>U;U+=8)A[N++]=this.g[T]>>>U&255;return A};function l(A,T){var N=d;return Object.prototype.hasOwnProperty.call(N,A)?N[A]:N[A]=T(A)}function c(A,T){this.h=T;for(var N=[],U=!0,L=A.length-1;0<=L;L--){var C=A[L]|0;U&&C==T||(N[L]=C,U=!1)}this.g=N}var d={};function f(A){return-128<=A&&128>A?l(A,function(T){return new c([T|0],0>T?-1:0)}):new c([A|0],0>A?-1:0)}function p(A){if(isNaN(A)||!isFinite(A))return v;if(0>A)return O(p(-A));for(var T=[],N=1,U=0;A>=N;U++)T[U]=A/N|0,N*=4294967296;return new c(T,0)}function y(A,T){if(A.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(A.charAt(0)=="-")return O(y(A.substring(1),T));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=p(Math.pow(T,8)),U=v,L=0;L<A.length;L+=8){var C=Math.min(8,A.length-L),S=parseInt(A.substring(L,L+C),T);8>C?(C=p(Math.pow(T,C)),U=U.j(C).add(p(S))):(U=U.j(N),U=U.add(p(S)))}return U}var v=f(0),b=f(1),x=f(16777216);t=c.prototype,t.m=function(){if(P(this))return-O(this).m();for(var A=0,T=1,N=0;N<this.g.length;N++){var U=this.i(N);A+=(0<=U?U:4294967296+U)*T,T*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(I(this))return"0";if(P(this))return"-"+O(this).toString(A);for(var T=p(Math.pow(A,6)),N=this,U="";;){var L=j(N,T).g;N=B(N,L.j(T));var C=((0<N.g.length?N.g[0]:N.h)>>>0).toString(A);if(N=L,I(N))return C+U;for(;6>C.length;)C="0"+C;U=C+U}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function I(A){if(A.h!=0)return!1;for(var T=0;T<A.g.length;T++)if(A.g[T]!=0)return!1;return!0}function P(A){return A.h==-1}t.l=function(A){return A=B(this,A),P(A)?-1:I(A)?0:1};function O(A){for(var T=A.g.length,N=[],U=0;U<T;U++)N[U]=~A.g[U];return new c(N,~A.h).add(b)}t.abs=function(){return P(this)?O(this):this},t.add=function(A){for(var T=Math.max(this.g.length,A.g.length),N=[],U=0,L=0;L<=T;L++){var C=U+(this.i(L)&65535)+(A.i(L)&65535),S=(C>>>16)+(this.i(L)>>>16)+(A.i(L)>>>16);U=S>>>16,C&=65535,S&=65535,N[L]=S<<16|C}return new c(N,N[N.length-1]&-2147483648?-1:0)};function B(A,T){return A.add(O(T))}t.j=function(A){if(I(this)||I(A))return v;if(P(this))return P(A)?O(this).j(O(A)):O(O(this).j(A));if(P(A))return O(this.j(O(A)));if(0>this.l(x)&&0>A.l(x))return p(this.m()*A.m());for(var T=this.g.length+A.g.length,N=[],U=0;U<2*T;U++)N[U]=0;for(U=0;U<this.g.length;U++)for(var L=0;L<A.g.length;L++){var C=this.i(U)>>>16,S=this.i(U)&65535,D=A.i(L)>>>16,H=A.i(L)&65535;N[2*U+2*L]+=S*H,q(N,2*U+2*L),N[2*U+2*L+1]+=C*H,q(N,2*U+2*L+1),N[2*U+2*L+1]+=S*D,q(N,2*U+2*L+1),N[2*U+2*L+2]+=C*D,q(N,2*U+2*L+2)}for(U=0;U<T;U++)N[U]=N[2*U+1]<<16|N[2*U];for(U=T;U<2*T;U++)N[U]=0;return new c(N,0)};function q(A,T){for(;(A[T]&65535)!=A[T];)A[T+1]+=A[T]>>>16,A[T]&=65535,T++}function G(A,T){this.g=A,this.h=T}function j(A,T){if(I(T))throw Error("division by zero");if(I(A))return new G(v,v);if(P(A))return T=j(O(A),T),new G(O(T.g),O(T.h));if(P(T))return T=j(A,O(T)),new G(O(T.g),T.h);if(30<A.g.length){if(P(A)||P(T))throw Error("slowDivide_ only works with positive integers.");for(var N=b,U=T;0>=U.l(A);)N=W(N),U=W(U);var L=X(N,1),C=X(U,1);for(U=X(U,2),N=X(N,2);!I(U);){var S=C.add(U);0>=S.l(A)&&(L=L.add(N),C=S),U=X(U,1),N=X(N,1)}return T=B(A,L.j(T)),new G(L,T)}for(L=v;0<=A.l(T);){for(N=Math.max(1,Math.floor(A.m()/T.m())),U=Math.ceil(Math.log(N)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),C=p(N),S=C.j(T);P(S)||0<S.l(A);)N-=U,C=p(N),S=C.j(T);I(C)&&(C=b),L=L.add(C),A=B(A,S)}return new G(L,A)}t.A=function(A){return j(this,A).h},t.and=function(A){for(var T=Math.max(this.g.length,A.g.length),N=[],U=0;U<T;U++)N[U]=this.i(U)&A.i(U);return new c(N,this.h&A.h)},t.or=function(A){for(var T=Math.max(this.g.length,A.g.length),N=[],U=0;U<T;U++)N[U]=this.i(U)|A.i(U);return new c(N,this.h|A.h)},t.xor=function(A){for(var T=Math.max(this.g.length,A.g.length),N=[],U=0;U<T;U++)N[U]=this.i(U)^A.i(U);return new c(N,this.h^A.h)};function W(A){for(var T=A.g.length+1,N=[],U=0;U<T;U++)N[U]=A.i(U)<<1|A.i(U-1)>>>31;return new c(N,A.h)}function X(A,T){var N=T>>5;T%=32;for(var U=A.g.length-N,L=[],C=0;C<U;C++)L[C]=0<T?A.i(C+N)>>>T|A.i(C+N+1)<<32-T:A.i(C+N);return new c(L,A.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,gS=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=y,Ks=c}).apply(typeof Bw<"u"?Bw:typeof self<"u"?self:typeof window<"u"?window:{});var Ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pS,iu,mS,Uh,d0,yS,vS,_S;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ah=="object"&&Ah];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=n(this);function a(h,_){if(_)e:{var E=i;h=h.split(".");for(var z=0;z<h.length-1;z++){var re=h[z];if(!(re in E))break e;E=E[re]}h=h[h.length-1],z=E[h],_=_(z),_!=z&&_!=null&&e(E,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var E=0,z=!1,re={next:function(){if(!z&&E<h.length){var ce=E++;return{value:_(ce,h[ce]),done:!1}}return z=!0,{done:!0,value:void 0}}};return re[Symbol.iterator]=function(){return re},re}a("Array.prototype.values",function(h){return h||function(){return l(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function f(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function p(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function y(h,_,E){return h.call.apply(h.bind,arguments)}function v(h,_,E){if(!h)throw Error();if(2<arguments.length){var z=Array.prototype.slice.call(arguments,2);return function(){var re=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(re,z),h.apply(_,re)}}return function(){return h.apply(_,arguments)}}function b(h,_,E){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,b.apply(null,arguments)}function x(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var z=E.slice();return z.push.apply(z,arguments),h.apply(this,z)}}function I(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(z,re,ce){for(var be=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)be[Qe-2]=arguments[Qe];return _.prototype[re].apply(z,be)}}function P(h){const _=h.length;if(0<_){const E=Array(_);for(let z=0;z<_;z++)E[z]=h[z];return E}return[]}function O(h,_){for(let E=1;E<arguments.length;E++){const z=arguments[E];if(f(z)){const re=h.length||0,ce=z.length||0;h.length=re+ce;for(let be=0;be<ce;be++)h[re+be]=z[be]}else h.push(z)}}class B{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function q(h){return/^[\s\xa0]*$/.test(h)}function G(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function j(h){return j[" "](h),h}j[" "]=function(){};var W=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function X(h,_,E){for(const z in h)_.call(E,h[z],z,h)}function A(h,_){for(const E in h)_.call(void 0,h[E],E,h)}function T(h){const _={};for(const E in h)_[E]=h[E];return _}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(h,_){let E,z;for(let re=1;re<arguments.length;re++){z=arguments[re];for(E in z)h[E]=z[E];for(let ce=0;ce<N.length;ce++)E=N[ce],Object.prototype.hasOwnProperty.call(z,E)&&(h[E]=z[E])}}function L(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function C(h){d.setTimeout(()=>{throw h},0)}function S(){var h=Q;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class D{constructor(){this.h=this.g=null}add(_,E){const z=H.get();z.set(_,E),this.h?this.h.next=z:this.g=z,this.h=z}}var H=new B(()=>new k,h=>h.reset());class k{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let $,Z=!1,Q=new D,V=()=>{const h=d.Promise.resolve(void 0);$=()=>{h.then(J)}};var J=()=>{for(var h;h=S();){try{h.h.call(h.g)}catch(E){C(E)}var _=H;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}Z=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var ie=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};d.addEventListener("test",E,_),d.removeEventListener("test",E,_)}catch{}return h}();function ue(h,_){if(K.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,z=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(W){e:{try{j(_.nodeName);var re=!0;break e}catch{}re=!1}re||(_=null)}}else E=="mouseover"?_=h.fromElement:E=="mouseout"&&(_=h.toElement);this.relatedTarget=_,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:de[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&ue.aa.h.call(this)}}I(ue,K);var de={2:"touch",3:"pen",4:"mouse"};ue.prototype.h=function(){ue.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ve="closure_listenable_"+(1e6*Math.random()|0),_e=0;function Ae(h,_,E,z,re){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!z,this.ha=re,this.key=++_e,this.da=this.fa=!1}function Ne(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function et(h){this.src=h,this.g={},this.h=0}et.prototype.add=function(h,_,E,z,re){var ce=h.toString();h=this.g[ce],h||(h=this.g[ce]=[],this.h++);var be=Le(h,_,z,re);return-1<be?(_=h[be],E||(_.fa=!1)):(_=new Ae(_,this.src,ce,!!z,re),_.fa=E,h.push(_)),_};function rt(h,_){var E=_.type;if(E in h.g){var z=h.g[E],re=Array.prototype.indexOf.call(z,_,void 0),ce;(ce=0<=re)&&Array.prototype.splice.call(z,re,1),ce&&(Ne(_),h.g[E].length==0&&(delete h.g[E],h.h--))}}function Le(h,_,E,z){for(var re=0;re<h.length;++re){var ce=h[re];if(!ce.da&&ce.listener==_&&ce.capture==!!E&&ce.ha==z)return re}return-1}var tt="closure_lm_"+(1e6*Math.random()|0),it={};function Lt(h,_,E,z,re){if(Array.isArray(_)){for(var ce=0;ce<_.length;ce++)Lt(h,_[ce],E,z,re);return null}return E=Ir(E),h&&h[ve]?h.K(_,E,p(z)?!!z.capture:!1,re):ze(h,_,E,!1,z,re)}function ze(h,_,E,z,re,ce){if(!_)throw Error("Invalid event type");var be=p(re)?!!re.capture:!!re,Qe=An(h);if(Qe||(h[tt]=Qe=new et(h)),E=Qe.add(_,E,z,be,ce),E.proxy)return E;if(z=Ee(),E.proxy=z,z.src=h,z.listener=E,h.addEventListener)ie||(re=be),re===void 0&&(re=!1),h.addEventListener(_.toString(),z,re);else if(h.attachEvent)h.attachEvent(Gt(_.toString()),z);else if(h.addListener&&h.removeListener)h.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ee(){function h(E){return _.call(h.src,h.listener,E)}const _=Fn;return h}function At(h,_,E,z,re){if(Array.isArray(_))for(var ce=0;ce<_.length;ce++)At(h,_[ce],E,z,re);else z=p(z)?!!z.capture:!!z,E=Ir(E),h&&h[ve]?(h=h.i,_=String(_).toString(),_ in h.g&&(ce=h.g[_],E=Le(ce,E,z,re),-1<E&&(Ne(ce[E]),Array.prototype.splice.call(ce,E,1),ce.length==0&&(delete h.g[_],h.h--)))):h&&(h=An(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Le(_,E,z,re)),(E=-1<h?_[h]:null)&&vn(E))}function vn(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[ve])rt(_.i,h);else{var E=h.type,z=h.proxy;_.removeEventListener?_.removeEventListener(E,z,h.capture):_.detachEvent?_.detachEvent(Gt(E),z):_.addListener&&_.removeListener&&_.removeListener(z),(E=An(_))?(rt(E,h),E.h==0&&(E.src=null,_[tt]=null)):Ne(h)}}}function Gt(h){return h in it?it[h]:it[h]="on"+h}function Fn(h,_){if(h.da)h=!0;else{_=new ue(_,this);var E=h.listener,z=h.ha||h.src;h.fa&&vn(h),h=E.call(z,_)}return h}function An(h){return h=h[tt],h instanceof et?h:null}var Rn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ir(h){return typeof h=="function"?h:(h[Rn]||(h[Rn]=function(_){return h.handleEvent(_)}),h[Rn])}function at(){te.call(this),this.i=new et(this),this.M=this,this.F=null}I(at,te),at.prototype[ve]=!0,at.prototype.removeEventListener=function(h,_,E,z){At(this,h,_,E,z)};function Fe(h,_){var E,z=h.F;if(z)for(E=[];z;z=z.F)E.push(z);if(h=h.M,z=_.type||_,typeof _=="string")_=new K(_,h);else if(_ instanceof K)_.target=_.target||h;else{var re=_;_=new K(z,h),U(_,re)}if(re=!0,E)for(var ce=E.length-1;0<=ce;ce--){var be=_.g=E[ce];re=zt(be,z,!0,_)&&re}if(be=_.g=h,re=zt(be,z,!0,_)&&re,re=zt(be,z,!1,_)&&re,E)for(ce=0;ce<E.length;ce++)be=_.g=E[ce],re=zt(be,z,!1,_)&&re}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var E=h.g[_],z=0;z<E.length;z++)Ne(E[z]);delete h.g[_],h.h--}}this.F=null},at.prototype.K=function(h,_,E,z){return this.i.add(String(h),_,!1,E,z)},at.prototype.L=function(h,_,E,z){return this.i.add(String(h),_,!0,E,z)};function zt(h,_,E,z){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var re=!0,ce=0;ce<_.length;++ce){var be=_[ce];if(be&&!be.da&&be.capture==E){var Qe=be.listener,Kt=be.ha||be.src;be.fa&&rt(h.i,be),re=Qe.call(Kt,z)!==!1&&re}}return re&&!z.defaultPrevented}function Et(h,_,E){if(typeof h=="function")E&&(h=b(h,E));else if(h&&typeof h.handleEvent=="function")h=b(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(h,_||0)}function Fr(h){h.g=Et(()=>{h.g=null,h.i&&(h.i=!1,Fr(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Ut extends te{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Fr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jt(h){te.call(this),this.h=h,this.g={}}I(Jt,te);var Nn=[];function In(h){X(h.g,function(_,E){this.g.hasOwnProperty(E)&&vn(_)},h),h.g={}}Jt.prototype.N=function(){Jt.aa.N.call(this),In(this)},Jt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var en=d.JSON.stringify,cn=d.JSON.parse,Cn=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Ti(){}Ti.prototype.h=null;function Si(h){return h.h||(h.h=h.i())}function Cr(){}var Gn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ur(){K.call(this,"d")}I(ur,K);function Yn(){K.call(this,"c")}I(Yn,K);var dr={},ca=null;function Gr(){return ca=ca||new at}dr.La="serverreachability";function as(h){K.call(this,dr.La,h)}I(as,K);function Yr(h){const _=Gr();Fe(_,new as(_))}dr.STAT_EVENT="statevent";function oo(h,_){K.call(this,dr.STAT_EVENT,h),this.stat=_}I(oo,K);function mt(h){const _=Gr();Fe(_,new oo(_,h))}dr.Ma="timingevent";function Mt(h,_){K.call(this,dr.Ma,h),this.size=_}I(Mt,K);function Rt(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},_)}function Vn(){this.g=!0}Vn.prototype.xa=function(){this.g=!1};function ua(h,_,E,z,re,ce){h.info(function(){if(h.g)if(ce)for(var be="",Qe=ce.split("&"),Kt=0;Kt<Qe.length;Kt++){var We=Qe[Kt].split("=");if(1<We.length){var nn=We[0];We=We[1];var Xt=nn.split("_");be=2<=Xt.length&&Xt[1]=="type"?be+(nn+"="+We+"&"):be+(nn+"=redacted&")}}else be=null;else be=ce;return"XMLHTTP REQ ("+z+") [attempt "+re+"]: "+_+`
`+E+`
`+be})}function Hl(h,_,E,z,re,ce,be){h.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+re+"]: "+_+`
`+E+`
`+ce+" "+be})}function Kr(h,_,E,z){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ai(h,E)+(z?" "+z:"")})}function lo(h,_){h.info(function(){return"TIMEOUT: "+_})}Vn.prototype.info=function(){};function Ai(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var z=E[h];if(!(2>z.length)){var re=z[1];if(Array.isArray(re)&&!(1>re.length)){var ce=re[0];if(ce!="noop"&&ce!="stop"&&ce!="close")for(var be=1;be<re.length;be++)re[be]=""}}}}return en(E)}catch{return _}}var Xr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fr;function gr(){}I(gr,Ti),gr.prototype.g=function(){return new XMLHttpRequest},gr.prototype.i=function(){return{}},fr=new gr;function un(h,_,E,z){this.j=h,this.i=_,this.l=E,this.R=z||1,this.U=new Jt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new wt}function wt(){this.i=null,this.g="",this.h=!1}var da={},os={};function Kn(h,_,E){h.L=1,h.v=pa(Xn(_)),h.m=E,h.P=!0,kr(h,null)}function kr(h,_){h.F=Date.now(),Ri(h),h.A=Xn(h.v);var E=h.A,z=h.R;Array.isArray(z)||(z=[String(z)]),Kl(E.i,"t",z),h.C=0,E=h.j.J,h.h=new wt,h.g=ld(h.j,E?_:null,!h.m),0<h.O&&(h.M=new Ut(b(h.Y,h,h.g),h.O)),_=h.U,E=h.g,z=h.ca;var re="readystatechange";Array.isArray(re)||(re&&(Nn[0]=re.toString()),re=Nn);for(var ce=0;ce<re.length;ce++){var be=Lt(E,re[ce],z||_.handleEvent,!1,_.h||_);if(!be)break;_.g[be.key]=be}_=h.H?T(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Yr(),ua(h.i,h.u,h.A,h.l,h.R,h.m)}un.prototype.ca=function(h){h=h.target;const _=this.M;_&&_r(h)==3?_.j():this.Y(h)},un.prototype.Y=function(h){try{if(h==this.g)e:{const Xt=_r(this.g);var _=this.g.Ba();const Oi=this.g.Z();if(!(3>Xt)&&(Xt!=3||this.g&&(this.h.h||this.g.oa()||ed(this.g)))){this.J||Xt!=4||_==7||(_==8||0>=Oi?Yr(3):Yr(2)),Qr(this);var E=this.g.Z();this.X=E;t:if(ha(this)){var z=ed(this.g);h="";var re=z.length,ce=_r(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yt(this),pr(this);var be="";break t}this.h.i=new d.TextDecoder}for(_=0;_<re;_++)this.h.h=!0,h+=this.h.i.decode(z[_],{stream:!(ce&&_==re-1)});z.length=0,this.h.g+=h,this.C=0,be=this.h.g}else be=this.g.oa();if(this.o=E==200,Hl(this.i,this.u,this.A,this.l,this.R,Xt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,Kt=this.g;if((Qe=Kt.g?Kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Qe)){var We=Qe;break t}}We=null}if(E=We)Kr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wr(this,E);else{this.o=!1,this.s=3,mt(12),Yt(this),pr(this);break e}}if(this.P){E=!0;let dn;for(;!this.J&&this.C<be.length;)if(dn=co(this,be),dn==os){Xt==4&&(this.s=4,mt(14),E=!1),Kr(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==da){this.s=4,mt(15),Kr(this.i,this.l,be,"[Invalid Chunk]"),E=!1;break}else Kr(this.i,this.l,dn,null),Wr(this,dn);if(ha(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xt!=4||be.length!=0||this.h.h||(this.s=1,mt(16),E=!1),this.o=this.o&&E,!E)Kr(this.i,this.l,be,"[Invalid Chunked Response]"),Yt(this),pr(this);else if(0<be.length&&!this.W){this.W=!0;var nn=this.j;nn.g==this&&nn.ba&&!nn.M&&(nn.j.info("Great, no buffering proxy detected. Bytes received: "+be.length),xa(nn),nn.M=!0,mt(11))}}else Kr(this.i,this.l,be,null),Wr(this,be);Xt==4&&Yt(this),this.o&&!this.J&&(Xt==4?sd(this.j,this):(this.o=!1,Ri(this)))}else fg(this.g),E==400&&0<be.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),Yt(this),pr(this)}}}catch{}finally{}};function ha(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function co(h,_){var E=h.C,z=_.indexOf(`
`,E);return z==-1?os:(E=Number(_.substring(E,z)),isNaN(E)?da:(z+=1,z+E>_.length?os:(_=_.slice(z,z+E),h.C=z+E,_)))}un.prototype.cancel=function(){this.J=!0,Yt(this)};function Ri(h){h.S=Date.now()+h.I,uo(h,h.I)}function uo(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Rt(b(h.ba,h),_)}function Qr(h){h.B&&(d.clearTimeout(h.B),h.B=null)}un.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(lo(this.i,this.A),this.L!=2&&(Yr(),mt(17)),Yt(this),this.s=2,pr(this)):uo(this,this.S-h)};function pr(h){h.j.G==0||h.J||sd(h.j,h)}function Yt(h){Qr(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,In(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Wr(h,_){try{var E=h.j;if(E.G!=0&&(E.g==h||ql(E.h,h))){if(!h.K&&ql(E.h,h)&&E.G==3){try{var z=E.Da.g.parse(_)}catch{z=null}if(Array.isArray(z)&&z.length==3){var re=z;if(re[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)wo(E),bo(E);else break e;Jl(E),mt(18)}}else E.za=re[1],0<E.za-E.T&&37500>re[2]&&E.F&&E.v==0&&!E.C&&(E.C=Rt(b(E.Za,E),6e3));if(1>=Zr(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Mi(E,11)}else if((h.K||E.g==h)&&wo(E),!q(_))for(re=E.Da.g.parse(_),_=0;_<re.length;_++){let We=re[_];if(E.T=We[0],We=We[1],E.G==2)if(We[0]=="c"){E.K=We[1],E.ia=We[2];const nn=We[3];nn!=null&&(E.la=nn,E.j.info("VER="+E.la));const Xt=We[4];Xt!=null&&(E.Aa=Xt,E.j.info("SVER="+E.Aa));const Oi=We[5];Oi!=null&&typeof Oi=="number"&&0<Oi&&(z=1.5*Oi,E.L=z,E.j.info("backChannelRequestTimeoutMs_="+z)),z=E;const dn=h.g;if(dn){const si=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(si){var ce=z.h;ce.g||si.indexOf("spdy")==-1&&si.indexOf("quic")==-1&&si.indexOf("h2")==-1||(ce.j=ce.l,ce.g=new Set,ce.h&&(fo(ce,ce.h),ce.h=null))}if(z.D){const tc=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;tc&&(z.ya=tc,dt(z.I,z.D,tc))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),z=E;var be=h;if(z.qa=od(z,z.J?z.ia:null,z.W),be.K){kn(z.h,be);var Qe=be,Kt=z.L;Kt&&(Qe.I=Kt),Qe.B&&(Qr(Qe),Ri(Qe)),z.g=be}else rd(z);0<E.i.length&&Eo(E)}else We[0]!="stop"&&We[0]!="close"||Mi(E,7);else E.G==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?Mi(E,7):Wl(E):We[0]!="noop"&&E.l&&E.l.ta(We),E.v=0)}}Yr(4)}catch{}}var ho=class{constructor(h,_){this.g=h,this.map=_}};function Dr(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ls(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Zr(h){return h.h?1:h.g?h.g.size:0}function ql(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function fo(h,_){h.g?h.g.add(_):h.h=_}function kn(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Dr.prototype.cancel=function(){if(this.i=$l(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function $l(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return P(h.i)}function cg(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(f(h)){for(var _=[],E=h.length,z=0;z<E;z++)_.push(h[z]);return _}_=[],E=0;for(z in h)_[E++]=h[z];return _}function go(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(f(h)||typeof h=="string"){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const z in h)_[E++]=z;return _}}}function Fl(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(f(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var E=go(h),z=cg(h),re=z.length,ce=0;ce<re;ce++)_.call(void 0,z[ce],E&&E[ce],h)}var fa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ug(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var z=h[E].indexOf("="),re=null;if(0<=z){var ce=h[E].substring(0,z);re=h[E].substring(z+1)}else ce=h[E];_(ce,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function Bt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Bt){this.h=h.h,ga(this,h.j),this.o=h.o,this.g=h.g,cs(this,h.s),this.l=h.l;var _=h.i,E=new Ii;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),Ni(this,E),this.m=h.m}else h&&(_=String(h).match(fa))?(this.h=!1,ga(this,_[1]||"",!0),this.o=mr(_[2]||""),this.g=mr(_[3]||"",!0),cs(this,_[4]),this.l=mr(_[5]||"",!0),Ni(this,_[6]||"",!0),this.m=mr(_[7]||"")):(this.h=!1,this.i=new Ii(null,this.h))}Bt.prototype.toString=function(){var h=[],_=this.j;_&&h.push(ma(_,Gl,!0),":");var E=this.g;return(E||_=="file")&&(h.push("//"),(_=this.o)&&h.push(ma(_,Gl,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(ma(E,E.charAt(0)=="/"?dg:Yl,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",ma(E,po)),h.join("")};function Xn(h){return new Bt(h)}function ga(h,_,E){h.j=E?mr(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function cs(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function Ni(h,_,E){_ instanceof Ii?(h.i=_,Zu(h.i,h.h)):(E||(_=ma(_,hg)),h.i=new Ii(_,h.h))}function dt(h,_,E){h.i.set(_,E)}function pa(h){return dt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function mr(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ma(h,_,E){return typeof h=="string"?(h=encodeURI(h).replace(_,Wu),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Wu(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Gl=/[#\/\?@]/g,Yl=/[#\?:]/g,dg=/[#\?]/g,hg=/[#\?@]/g,po=/#/g;function Ii(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function yr(h){h.g||(h.g=new Map,h.h=0,h.i&&ug(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}t=Ii.prototype,t.add=function(h,_){yr(this),this.i=null,h=Jr(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this};function Ci(h,_){yr(h),_=Jr(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function ki(h,_){return yr(h),_=Jr(h,_),h.g.has(_)}t.forEach=function(h,_){yr(this),this.g.forEach(function(E,z){E.forEach(function(re){h.call(_,re,z,this)},this)},this)},t.na=function(){yr(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let z=0;z<_.length;z++){const re=h[z];for(let ce=0;ce<re.length;ce++)E.push(_[z])}return E},t.V=function(h){yr(this);let _=[];if(typeof h=="string")ki(this,h)&&(_=_.concat(this.g.get(Jr(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},t.set=function(h,_){return yr(this),this.i=null,h=Jr(this,h),ki(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},t.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function Kl(h,_,E){Ci(h,_),0<E.length&&(h.i=null,h.g.set(Jr(h,_),P(E)),h.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var z=_[E];const ce=encodeURIComponent(String(z)),be=this.V(z);for(z=0;z<be.length;z++){var re=ce;be[z]!==""&&(re+="="+encodeURIComponent(String(be[z]))),h.push(re)}}return this.i=h.join("&")};function Jr(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Zu(h,_){_&&!h.j&&(yr(h),h.i=null,h.g.forEach(function(E,z){var re=z.toLowerCase();z!=re&&(Ci(this,z),Kl(this,re,E))},h)),h.j=_}function ya(h,_){const E=new Vn;if(d.Image){const z=new Image;z.onload=x(vr,E,"TestLoadImage: loaded",!0,_,z),z.onerror=x(vr,E,"TestLoadImage: error",!1,_,z),z.onabort=x(vr,E,"TestLoadImage: abort",!1,_,z),z.ontimeout=x(vr,E,"TestLoadImage: timeout",!1,_,z),d.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=h}else _(!1)}function Mr(h,_){const E=new Vn,z=new AbortController,re=setTimeout(()=>{z.abort(),vr(E,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:z.signal}).then(ce=>{clearTimeout(re),ce.ok?vr(E,"TestPingServer: ok",!0,_):vr(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(re),vr(E,"TestPingServer: error",!1,_)})}function vr(h,_,E,z,re){try{re&&(re.onload=null,re.onerror=null,re.onabort=null,re.ontimeout=null),z(E)}catch{}}function va(){this.g=new Cn}function ei(h,_,E){const z=E||"";try{Fl(h,function(re,ce){let be=re;p(re)&&(be=en(re)),_.push(z+ce+"="+encodeURIComponent(be))})}catch(re){throw _.push(z+"type="+encodeURIComponent("_badmap")),re}}function us(h){this.l=h.Ub||null,this.j=h.eb||!1}I(us,Ti),us.prototype.g=function(){return new Di(this.l,this.j)},us.prototype.i=function(h){return function(){return h}}({});function Di(h,_){at.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Di,at),t=Di.prototype,t.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,ni(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ti(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?ti(this):ni(this),this.readyState==3&&Xl(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,ti(this))},t.Qa=function(h){this.g&&(this.response=h,ti(this))},t.ga=function(){this.g&&ti(this)};function ti(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ni(h)}t.setRequestHeader=function(h,_){this.u.append(h,_)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=_.next();return h.join(`\r
`)};function ni(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Di.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ql(h){let _="";return X(h,function(E,z){_+=z,_+=":",_+=E,_+=`\r
`}),_}function tn(h,_,E){e:{for(z in E){var z=!1;break e}z=!0}z||(E=Ql(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):dt(h,_,E))}function ot(h){at.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(ot,at);var mo=/^https?$/i,_a=["POST","PUT"];t=ot.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,_,E,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fr.g(),this.v=this.o?Si(this.o):Si(fr),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ce){Ju(this,ce);return}if(h=E||"",E=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var re in z)E.set(re,z[re]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const ce of z.keys())E.set(ce,z.get(ce));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(E.keys()).find(ce=>ce.toLowerCase()=="content-type"),re=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(_a,_,void 0))||z||re||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ce,be]of E)this.g.setRequestHeader(ce,be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ba(this),this.u=!0,this.g.send(h),this.u=!1}catch(ce){Ju(this,ce)}};function Ju(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,yo(h),ri(h)}function yo(h){h.A||(h.A=!0,Fe(h,"complete"),Fe(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Fe(this,"complete"),Fe(this,"abort"),ri(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ri(this,!0)),ot.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?vo(this):this.bb())},t.bb=function(){vo(this)};function vo(h){if(h.h&&typeof c<"u"&&(!h.v[1]||_r(h)!=4||h.Z()!=2)){if(h.u&&_r(h)==4)Et(h.Ea,0,h);else if(Fe(h,"readystatechange"),_r(h)==4){h.h=!1;try{const be=h.Z();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var z;if(z=be===0){var re=String(h.D).match(fa)[1]||null;!re&&d.self&&d.self.location&&(re=d.self.location.protocol.slice(0,-1)),z=!mo.test(re?re.toLowerCase():"")}E=z}if(E)Fe(h,"complete"),Fe(h,"success");else{h.m=6;try{var ce=2<_r(h)?h.g.statusText:""}catch{ce=""}h.l=ce+" ["+h.Z()+"]",yo(h)}}finally{ri(h)}}}}function ri(h,_){if(h.g){ba(h);const E=h.g,z=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Fe(h,"ready");try{E.onreadystatechange=z}catch{}}}function ba(h){h.I&&(d.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function _r(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<_r(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),cn(_)}};function ed(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function fg(h){const _={};h=(h.g&&2<=_r(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<h.length;z++){if(q(h[z]))continue;var E=L(h[z]);const re=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ce=_[re]||[];_[re]=ce,ce.push(E)}A(_,function(z){return z.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ea(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function _o(h){this.Aa=0,this.i=[],this.j=new Vn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ea("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ea("baseRetryDelayMs",5e3,h),this.cb=Ea("retryDelaySeedMs",1e4,h),this.Wa=Ea("forwardChannelMaxRetries",2,h),this.wa=Ea("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Dr(h&&h.concurrentRequestLimit),this.Da=new va,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=_o.prototype,t.la=8,t.G=1,t.connect=function(h,_,E,z){mt(0),this.W=h,this.H=_||{},E&&z!==void 0&&(this.H.OSID=E,this.H.OAID=z),this.F=this.X,this.I=od(this,null,this.W),Eo(this)};function Wl(h){if(td(h),h.G==3){var _=h.U++,E=Xn(h.I);if(dt(E,"SID",h.K),dt(E,"RID",_),dt(E,"TYPE","terminate"),wa(h,E),_=new un(h,h.j,_),_.L=2,_.v=pa(Xn(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&d.Image&&(new Image().src=_.v,E=!0),E||(_.g=ld(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Ri(_)}ad(h)}function bo(h){h.g&&(xa(h),h.g.cancel(),h.g=null)}function td(h){bo(h),h.u&&(d.clearTimeout(h.u),h.u=null),wo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function Eo(h){if(!ls(h.h)&&!h.s){h.s=!0;var _=h.Ga;$||V(),Z||($(),Z=!0),Q.add(_,h),h.B=0}}function gg(h,_){return Zr(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Rt(b(h.Ga,h,_),ec(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const re=new un(this,this.j,h);let ce=this.o;if(this.S&&(ce?(ce=T(ce),U(ce,this.S)):ce=this.S),this.m!==null||this.O||(re.H=ce,ce=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var z=this.i[E];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(_+=z,4096<_){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=nd(this,re,_),E=Xn(this.I),dt(E,"RID",h),dt(E,"CVER",22),this.D&&dt(E,"X-HTTP-Session-Id",this.D),wa(this,E),ce&&(this.O?_="headers="+encodeURIComponent(String(Ql(ce)))+"&"+_:this.m&&tn(E,this.m,ce)),fo(this.h,re),this.Ua&&dt(E,"TYPE","init"),this.P?(dt(E,"$req",_),dt(E,"SID","null"),re.T=!0,Kn(re,E,null)):Kn(re,E,_),this.G=2}}else this.G==3&&(h?Zl(this,h):this.i.length==0||ls(this.h)||Zl(this))};function Zl(h,_){var E;_?E=_.l:E=h.U++;const z=Xn(h.I);dt(z,"SID",h.K),dt(z,"RID",E),dt(z,"AID",h.T),wa(h,z),h.m&&h.o&&tn(z,h.m,h.o),E=new un(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=nd(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),fo(h.h,E),Kn(E,z,_)}function wa(h,_){h.H&&X(h.H,function(E,z){dt(_,z,E)}),h.l&&Fl({},function(E,z){dt(_,z,E)})}function nd(h,_,E){E=Math.min(h.i.length,E);var z=h.l?b(h.l.Na,h.l,h):null;e:{var re=h.i;let ce=-1;for(;;){const be=["count="+E];ce==-1?0<E?(ce=re[0].g,be.push("ofs="+ce)):ce=0:be.push("ofs="+ce);let Qe=!0;for(let Kt=0;Kt<E;Kt++){let We=re[Kt].g;const nn=re[Kt].map;if(We-=ce,0>We)ce=Math.max(0,re[Kt].g-100),Qe=!1;else try{ei(nn,be,"req"+We+"_")}catch{z&&z(nn)}}if(Qe){z=be.join("&");break e}}}return h=h.i.splice(0,E),_.D=h,z}function rd(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;$||V(),Z||($(),Z=!0),Q.add(_,h),h.v=0}}function Jl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Rt(b(h.Fa,h),ec(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,id(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Rt(b(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),bo(this),id(this))};function xa(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function id(h){h.g=new un(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=Xn(h.qa);dt(_,"RID","rpc"),dt(_,"SID",h.K),dt(_,"AID",h.T),dt(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&dt(_,"TO",h.ja),dt(_,"TYPE","xmlhttp"),wa(h,_),h.m&&h.o&&tn(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=pa(Xn(_)),E.m=null,E.P=!0,kr(E,h)}t.Za=function(){this.C!=null&&(this.C=null,bo(this),Jl(this),mt(19))};function wo(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function sd(h,_){var E=null;if(h.g==_){wo(h),xa(h),h.g=null;var z=2}else if(ql(h.h,_))E=_.D,kn(h.h,_),z=1;else return;if(h.G!=0){if(_.o)if(z==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var re=h.B;z=Gr(),Fe(z,new Mt(z,E)),Eo(h)}else rd(h);else if(re=_.s,re==3||re==0&&0<_.X||!(z==1&&gg(h,_)||z==2&&Jl(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),re){case 1:Mi(h,5);break;case 4:Mi(h,10);break;case 3:Mi(h,6);break;default:Mi(h,2)}}}function ec(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function Mi(h,_){if(h.j.info("Error code "+_),_==2){var E=b(h.fb,h),z=h.Xa;const re=!z;z=new Bt(z||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ga(z,"https"),pa(z),re?ya(z.toString(),E):Mr(z.toString(),E)}else mt(2);h.G=0,h.l&&h.l.sa(_),ad(h),td(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function ad(h){if(h.G=0,h.ka=[],h.l){const _=$l(h.h);(_.length!=0||h.i.length!=0)&&(O(h.ka,_),O(h.ka,h.i),h.h.i.length=0,P(h.i),h.i.length=0),h.l.ra()}}function od(h,_,E){var z=E instanceof Bt?Xn(E):new Bt(E);if(z.g!="")_&&(z.g=_+"."+z.g),cs(z,z.s);else{var re=d.location;z=re.protocol,_=_?_+"."+re.hostname:re.hostname,re=+re.port;var ce=new Bt(null);z&&ga(ce,z),_&&(ce.g=_),re&&cs(ce,re),E&&(ce.l=E),z=ce}return E=h.D,_=h.ya,E&&_&&dt(z,E,_),dt(z,"VER",h.la),wa(h,z),z}function ld(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new ot(new us({eb:E})):new ot(h.pa),_.Ha(h.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function cd(){}t=cd.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function xo(){}xo.prototype.g=function(h,_){return new Dn(h,_)};function Dn(h,_){at.call(this),this.g=new _o(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!q(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!q(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new ii(this)}I(Dn,at),Dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){Wl(this.g)},Dn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=en(h),h=E);_.i.push(new ho(_.Ya++,h)),_.G==3&&Eo(_)},Dn.prototype.N=function(){this.g.l=null,delete this.j,Wl(this.g),delete this.g,Dn.aa.N.call(this)};function ud(h){ur.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}I(ud,ur);function dd(){Yn.call(this),this.status=1}I(dd,Yn);function ii(h){this.g=h}I(ii,cd),ii.prototype.ua=function(){Fe(this.g,"a")},ii.prototype.ta=function(h){Fe(this.g,new ud(h))},ii.prototype.sa=function(h){Fe(this.g,new dd)},ii.prototype.ra=function(){Fe(this.g,"b")},xo.prototype.createWebChannel=xo.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,_S=function(){return new xo},vS=function(){return Gr()},yS=dr,d0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xr.NO_ERROR=0,Xr.TIMEOUT=8,Xr.HTTP_ERROR=6,Uh=Xr,hr.COMPLETE="complete",mS=hr,Cr.EventType=Gn,Gn.OPEN="a",Gn.CLOSE="b",Gn.ERROR="c",Gn.MESSAGE="d",at.prototype.listen=at.prototype.K,iu=Cr,ot.prototype.listenOnce=ot.prototype.L,ot.prototype.getLastError=ot.prototype.Ka,ot.prototype.getLastErrorCode=ot.prototype.Ba,ot.prototype.getStatus=ot.prototype.Z,ot.prototype.getResponseJson=ot.prototype.Oa,ot.prototype.getResponseText=ot.prototype.oa,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Ha,pS=ot}).apply(typeof Ah<"u"?Ah:typeof self<"u"?self:typeof window<"u"?window:{});const jw="@firebase/firestore",Hw="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wn.UNAUTHENTICATED=new wn(null),wn.GOOGLE_CREDENTIALS=new wn("google-credentials-uid"),wn.FIRST_PARTY=new wn("first-party-uid"),wn.MOCK_USER=new wn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pl="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa=new iy("@firebase/firestore");function al(){return Wa.logLevel}function we(t,...e){if(Wa.logLevel<=Ke.DEBUG){const n=e.map(oy);Wa.debug(`Firestore (${Pl}): ${t}`,...n)}}function rs(t,...e){if(Wa.logLevel<=Ke.ERROR){const n=e.map(oy);Wa.error(`Firestore (${Pl}): ${t}`,...n)}}function Al(t,...e){if(Wa.logLevel<=Ke.WARN){const n=e.map(oy);Wa.warn(`Firestore (${Pl}): ${t}`,...n)}}function oy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,bS(t,i,n)}function bS(t,e,n){let i=`FIRESTORE (${Pl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw rs(i),new Error(i)}function lt(t,e,n,i){let a="Unexpected state";typeof n=="string"?a=n:i=n,t||bS(e,a,i)}function Ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends xi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(wn.UNAUTHENTICATED))}shutdown(){}}class VO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class LO{constructor(e){this.t=e,this.currentUser=wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){lt(this.o===void 0,42304);let i=this.i;const a=f=>this.i!==i?(i=this.i,n(f)):Promise.resolve();let l=new Xs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Xs,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const f=l;e.enqueueRetryable(async()=>{await f.promise,await a(this.currentUser)})},d=f=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(f=>d(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Xs)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(lt(typeof i.accessToken=="string",31837,{l:i}),new ES(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string",2055,{h:e}),new wn(e)}}class zO{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=wn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class UO{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new zO(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(wn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BO{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ir(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){lt(this.o===void 0,3512);const i=l=>{l.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,we("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const a=l=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new qw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(lt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new qw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=jO(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<n&&(i+=e.charAt(a[l]%62))}return i}}function He(t,e){return t<e?-1:t>e?1:0}function h0(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),a=e.codePointAt(n);if(i!==a){if(i<128&&a<128)return He(i,a);{const l=wS(),c=HO(l.encode($w(t,n)),l.encode($w(e,n)));return c!==0?c:He(i,a)}}n+=i>65535?2:1}return He(t.length,e.length)}function $w(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function HO(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return He(t[n],e[n]);return He(t.length,e.length)}function Rl(t,e,n){return t.length===e.length&&t.every((i,a)=>n(i,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=-62135596800,Gw=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Gw);return new _t(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new xe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Fw)throw new xe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Gw}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Fw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new _t(0,0))}static max(){return new Pe(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw="__name__";class gi{constructor(e,n,i){n===void 0?n=0:n>e.length&&Me(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Me(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return gi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gi?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let a=0;a<i;a++){const l=gi.compareSegments(e.get(a),n.get(a));if(l!==0)return l}return He(e.length,n.length)}static compareSegments(e,n){const i=gi.isNumericId(e),a=gi.isNumericId(n);return i&&!a?-1:!i&&a?1:i&&a?gi.extractNumericId(e).compare(gi.extractNumericId(n)):h0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ks.fromString(e.substring(4,e.length-2))}}class vt extends gi{construct(e,n,i){return new vt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new xe(me.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(a=>a.length>0))}return new vt(n)}static emptyPath(){return new vt([])}}const qO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mn extends gi{construct(e,n,i){return new mn(e,n,i)}static isValidIdentifier(e){return qO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Yw}static keyField(){return new mn([Yw])}static fromServerFormat(e){const n=[];let i="",a=0;const l=()=>{if(i.length===0)throw new xe(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new xe(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[a+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new xe(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(l(),a++)}if(l(),c)throw new xe(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mn(n)}static emptyPath(){return new mn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(vt.fromString(e))}static fromName(e){return new Ie(vt.fromString(e).popFirst(5))}static empty(){return new Ie(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return vt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new vt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su=-1;function $O(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,a=Pe.fromTimestamp(i===1e9?new _t(n+1,0):new _t(n,i));return new Js(a,Ie.empty(),e)}function FO(t){return new Js(t.readTime,t.key,Su)}class Js{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Js(Pe.min(),Ie.empty(),Su)}static max(){return new Js(Pe.max(),Ie.empty(),Su)}}function GO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ie.comparator(t.documentKey,e.documentKey),n!==0?n:He(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vl(t){if(t.code!==me.FAILED_PRECONDITION||t.message!==YO)throw t;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ye((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(n,l).next(i,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ye?n:ye.resolve(n)}catch(n){return ye.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ye.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ye.reject(n)}static resolve(e){return new ye((n,i)=>{n(e)})}static reject(e){return new ye((n,i)=>{i(e)})}static waitFor(e){return new ye((n,i)=>{let a=0,l=0,c=!1;e.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&n()},f=>i(f))}),c=!0,l===a&&n()})}static or(e){let n=ye.resolve(!1);for(const i of e)n=n.next(a=>a?ye.resolve(a):i());return n}static forEach(e,n){const i=[];return e.forEach((a,l)=>{i.push(n.call(this,a,l))}),this.waitFor(i)}static mapArray(e,n){return new ye((i,a)=>{const l=e.length,c=new Array(l);let d=0;for(let f=0;f<l;f++){const p=f;n(e[p]).next(y=>{c[p]=y,++d,d===l&&i(c)},y=>a(y))}})}static doWhile(e,n){return new ye((i,a)=>{const l=()=>{e()===!0?n().next(()=>{l()},a):i()};l()})}}function XO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ll(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>n.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Hf.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly=-1;function qf(t){return t==null}function uf(t){return t===0&&1/t==-1/0}function QO(t){return typeof t=="number"&&Number.isInteger(t)&&!uf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="";function WO(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Kw(e)),e=ZO(t.get(n),e);return Kw(e)}function ZO(t,e){let n=e;const i=t.length;for(let a=0;a<i;a++){const l=t.charAt(a);switch(l){case"\0":n+="";break;case TS:n+="";break;default:n+=l}}return n}function Kw(t){return t+TS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function sa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function SS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n){this.comparator=e,this.root=n||pn.EMPTY}insert(e,n){return new St(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return n+i.left.size;a<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rh(this.root,e,this.comparator,!0)}}class Rh{constructor(e,n,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?i(e.key,n):1,n&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pn{constructor(e,n,i,a,l){this.key=e,this.value=n,this.color=i??pn.RED,this.left=a??pn.EMPTY,this.right=l??pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,a,l){return new pn(e??this.key,n??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,n,i),null):l===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return pn.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,n,i,a,l){return this}insert(e,n,i){return new pn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Qw(this.data.getIterator())}getIteratorFrom(e){return new Qw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Zt(this.comparator);return n.data=e,n}}class Qw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new sr([])}unionWith(e){let n=new Zt(mn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new sr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Rl(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new AS("Invalid base64 string: "+l):l}}(e);return new yn(n)}static fromUint8Array(e){const n=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(e);return new yn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const JO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ea(t){if(lt(!!t,39018),typeof t=="string"){let e=0;const n=JO.exec(t);if(lt(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Vt(t.seconds),nanos:Vt(t.nanos)}}function Vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ta(t){return typeof t=="string"?yn.fromBase64String(t):yn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="server_timestamp",NS="__type__",IS="__previous_value__",CS="__local_write_time__";function cy(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[NS])===null||n===void 0?void 0:n.stringValue)===RS}function $f(t){const e=t.mapValue.fields[IS];return cy(e)?$f(e):e}function Au(t){const e=ea(t.mapValue.fields[CS].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e,n,i,a,l,c,d,f,p,y){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=p,this.isUsingEmulator=y}}const df="(default)";class Ru{constructor(e,n){this.projectId=e,this.database=n||df}static empty(){return new Ru("","")}get isDefaultDatabase(){return this.database===df}isEqual(e){return e instanceof Ru&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="__type__",t6="__max__",Nh={mapValue:{}},DS="__vector__",hf="value";function na(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cy(t)?4:r6(t)?9007199254740991:n6(t)?10:11:Me(28295,{value:t})}function Ei(t,e){if(t===e)return!0;const n=na(t);if(n!==na(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Au(t).isEqual(Au(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=ea(a.timestampValue),d=ea(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,l){return ta(a.bytesValue).isEqual(ta(l.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,l){return Vt(a.geoPointValue.latitude)===Vt(l.geoPointValue.latitude)&&Vt(a.geoPointValue.longitude)===Vt(l.geoPointValue.longitude)}(t,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return Vt(a.integerValue)===Vt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Vt(a.doubleValue),d=Vt(l.doubleValue);return c===d?uf(c)===uf(d):isNaN(c)&&isNaN(d)}return!1}(t,e);case 9:return Rl(t.arrayValue.values||[],e.arrayValue.values||[],Ei);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(Xw(c)!==Xw(d))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(d[f]===void 0||!Ei(c[f],d[f])))return!1;return!0}(t,e);default:return Me(52216,{left:t})}}function Nu(t,e){return(t.values||[]).find(n=>Ei(n,e))!==void 0}function Nl(t,e){if(t===e)return 0;const n=na(t),i=na(e);if(n!==i)return He(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return He(t.booleanValue,e.booleanValue);case 2:return function(l,c){const d=Vt(l.integerValue||l.doubleValue),f=Vt(c.integerValue||c.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(t,e);case 3:return Ww(t.timestampValue,e.timestampValue);case 4:return Ww(Au(t),Au(e));case 5:return h0(t.stringValue,e.stringValue);case 6:return function(l,c){const d=ta(l),f=ta(c);return d.compareTo(f)}(t.bytesValue,e.bytesValue);case 7:return function(l,c){const d=l.split("/"),f=c.split("/");for(let p=0;p<d.length&&p<f.length;p++){const y=He(d[p],f[p]);if(y!==0)return y}return He(d.length,f.length)}(t.referenceValue,e.referenceValue);case 8:return function(l,c){const d=He(Vt(l.latitude),Vt(c.latitude));return d!==0?d:He(Vt(l.longitude),Vt(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Zw(t.arrayValue,e.arrayValue);case 10:return function(l,c){var d,f,p,y;const v=l.fields||{},b=c.fields||{},x=(d=v[hf])===null||d===void 0?void 0:d.arrayValue,I=(f=b[hf])===null||f===void 0?void 0:f.arrayValue,P=He(((p=x?.values)===null||p===void 0?void 0:p.length)||0,((y=I?.values)===null||y===void 0?void 0:y.length)||0);return P!==0?P:Zw(x,I)}(t.mapValue,e.mapValue);case 11:return function(l,c){if(l===Nh.mapValue&&c===Nh.mapValue)return 0;if(l===Nh.mapValue)return 1;if(c===Nh.mapValue)return-1;const d=l.fields||{},f=Object.keys(d),p=c.fields||{},y=Object.keys(p);f.sort(),y.sort();for(let v=0;v<f.length&&v<y.length;++v){const b=h0(f[v],y[v]);if(b!==0)return b;const x=Nl(d[f[v]],p[y[v]]);if(x!==0)return x}return He(f.length,y.length)}(t.mapValue,e.mapValue);default:throw Me(23264,{Pe:n})}}function Ww(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return He(t,e);const n=ea(t),i=ea(e),a=He(n.seconds,i.seconds);return a!==0?a:He(n.nanos,i.nanos)}function Zw(t,e){const n=t.values||[],i=e.values||[];for(let a=0;a<n.length&&a<i.length;++a){const l=Nl(n[a],i[a]);if(l)return l}return He(n.length,i.length)}function Il(t){return f0(t)}function f0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=ea(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ta(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",a=!0;for(const l of n.values||[])a?a=!1:i+=",",i+=f0(l);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${f0(n.fields[c])}`;return a+"}"}(t.mapValue):Me(61005,{value:t})}function Bh(t){switch(na(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$f(t);return e?16+Bh(e):16;case 5:return 2*t.stringValue.length;case 6:return ta(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,l)=>a+Bh(l),0)}(t.arrayValue);case 10:case 11:return function(i){let a=0;return sa(i.fields,(l,c)=>{a+=l.length+Bh(c)}),a}(t.mapValue);default:throw Me(13486,{value:t})}}function Jw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function g0(t){return!!t&&"integerValue"in t}function uy(t){return!!t&&"arrayValue"in t}function ex(t){return!!t&&"nullValue"in t}function tx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jh(t){return!!t&&"mapValue"in t}function n6(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[kS])===null||n===void 0?void 0:n.stringValue)===DS}function lu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return sa(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=lu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=lu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function r6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===t6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.value=e}static empty(){return new Hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!jh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=lu(n)}setAll(e){let n=mn.emptyPath(),i={},a=[];e.forEach((c,d)=>{if(!n.isImmediateParentOf(d)){const f=this.getFieldsMap(n);this.applyChanges(f,i,a),i={},a=[],n=d.popLast()}c?i[d.lastSegment()]=lu(c):a.push(d.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,i,a)}delete(e){const n=this.field(e.popLast());jh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ei(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=n.mapValue.fields[e.get(i)];jh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,i){sa(n,(a,l)=>e[a]=l);for(const a of i)delete e[a]}clone(){return new Hn(lu(this.value))}}function MS(t){const e=[];return sa(t.fields,(n,i)=>{const a=new mn([n]);if(jh(i)){const l=MS(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)}),new sr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,n,i,a,l,c,d){this.key=e,this.documentType=n,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new xn(e,0,Pe.min(),Pe.min(),Pe.min(),Hn.empty(),0)}static newFoundDocument(e,n,i,a){return new xn(e,1,n,Pe.min(),i,a,0)}static newNoDocument(e,n){return new xn(e,2,n,Pe.min(),Pe.min(),Hn.empty(),0)}static newUnknownDocument(e,n){return new xn(e,3,n,Pe.min(),Pe.min(),Hn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,n){this.position=e,this.inclusive=n}}function nx(t,e,n){let i=0;for(let a=0;a<t.position.length;a++){const l=e[a],c=t.position[a];if(l.field.isKeyField()?i=Ie.comparator(Ie.fromName(c.referenceValue),n.key):i=Nl(c,n.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function rx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ei(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n="asc"){this.field=e,this.dir=n}}function i6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{}class Ft extends OS{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new a6(e,n,i):n==="array-contains"?new c6(e,i):n==="in"?new u6(e,i):n==="not-in"?new d6(e,i):n==="array-contains-any"?new h6(e,i):new Ft(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new o6(e,i):new l6(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Nl(n,this.value)):n!==null&&na(this.value)===na(n)&&this.matchesComparison(Nl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jr extends OS{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new jr(e,n)}matches(e){return PS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function PS(t){return t.op==="and"}function VS(t){return s6(t)&&PS(t)}function s6(t){for(const e of t.filters)if(e instanceof jr)return!1;return!0}function p0(t){if(t instanceof Ft)return t.field.canonicalString()+t.op.toString()+Il(t.value);if(VS(t))return t.filters.map(e=>p0(e)).join(",");{const e=t.filters.map(n=>p0(n)).join(",");return`${t.op}(${e})`}}function LS(t,e){return t instanceof Ft?function(i,a){return a instanceof Ft&&i.op===a.op&&i.field.isEqual(a.field)&&Ei(i.value,a.value)}(t,e):t instanceof jr?function(i,a){return a instanceof jr&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((l,c,d)=>l&&LS(c,a.filters[d]),!0):!1}(t,e):void Me(19439)}function zS(t){return t instanceof Ft?function(n){return`${n.field.canonicalString()} ${n.op} ${Il(n.value)}`}(t):t instanceof jr?function(n){return n.op.toString()+" {"+n.getFilters().map(zS).join(" ,")+"}"}(t):"Filter"}class a6 extends Ft{constructor(e,n,i){super(e,n,i),this.key=Ie.fromName(i.referenceValue)}matches(e){const n=Ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class o6 extends Ft{constructor(e,n){super(e,"in",n),this.keys=US("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class l6 extends Ft{constructor(e,n){super(e,"not-in",n),this.keys=US("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function US(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Ie.fromName(i.referenceValue))}class c6 extends Ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return uy(n)&&Nu(n.arrayValue,this.value)}}class u6 extends Ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Nu(this.value.arrayValue,n)}}class d6 extends Ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(Nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Nu(this.value.arrayValue,n)}}class h6 extends Ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!uy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Nu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(e,n=null,i=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Ie=null}}function ix(t,e=null,n=[],i=[],a=null,l=null,c=null){return new f6(t,e,n,i,a,l,c)}function dy(t){const e=Ve(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>p0(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),qf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Il(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Il(i)).join(",")),e.Ie=n}return e.Ie}function hy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!i6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!LS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rx(t.startAt,e.startAt)&&rx(t.endAt,e.endAt)}function m0(t){return Ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,n=null,i=[],a=[],l=null,c="F",d=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=f,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function g6(t,e,n,i,a,l,c,d){return new zl(t,e,n,i,a,l,c,d)}function BS(t){return new zl(t)}function sx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function jS(t){return t.collectionGroup!==null}function cu(t){const e=Ve(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),n.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Zt(mn.comparator);return c.filters.forEach(f=>{f.getFlattenedFilters().forEach(p=>{p.isInequality()&&(d=d.add(p.field))})}),d})(e).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new Iu(l,i))}),n.has(mn.keyField().canonicalString())||e.Ee.push(new Iu(mn.keyField(),i))}return e.Ee}function yi(t){const e=Ve(t);return e.de||(e.de=p6(e,cu(t))),e.de}function p6(t,e){if(t.limitType==="F")return ix(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new Iu(a.field,l)});const n=t.endAt?new ff(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new ff(t.startAt.position,t.startAt.inclusive):null;return ix(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function y0(t,e){const n=t.filters.concat([e]);return new zl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function v0(t,e,n){return new zl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ff(t,e){return hy(yi(t),yi(e))&&t.limitType===e.limitType}function HS(t){return`${dy(yi(t))}|lt:${t.limitType}`}function ol(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(a=>zS(a)).join(", ")}]`),qf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(a=>Il(a)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(a=>Il(a)).join(",")),`Target(${i})`}(yi(t))}; limitType=${t.limitType})`}function Gf(t,e){return e.isFoundDocument()&&function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ie.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(t,e)&&function(i,a){for(const l of cu(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(t,e)&&function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0}(t,e)&&function(i,a){return!(i.startAt&&!function(c,d,f){const p=nx(c,d,f);return c.inclusive?p<=0:p<0}(i.startAt,cu(i),a)||i.endAt&&!function(c,d,f){const p=nx(c,d,f);return c.inclusive?p>=0:p>0}(i.endAt,cu(i),a))}(t,e)}function m6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qS(t){return(e,n)=>{let i=!1;for(const a of cu(t)){const l=y6(a,e,n);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function y6(t,e,n){const i=t.field.isKeyField()?Ie.comparator(e.key,n.key):function(l,c,d){const f=c.data.field(l),p=d.data.field(l);return f!==null&&p!==null?Nl(f,p):Me(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[n]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){sa(this.inner,(n,i)=>{for(const[a,l]of i)e(a,l)})}isEmpty(){return SS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6=new St(Ie.comparator);function is(){return v6}const $S=new St(Ie.comparator);function su(...t){let e=$S;for(const n of t)e=e.insert(n.key,n);return e}function FS(t){let e=$S;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function $a(){return uu()}function GS(){return uu()}function uu(){return new ro(t=>t.toString(),(t,e)=>t.isEqual(e))}const _6=new St(Ie.comparator),b6=new Zt(Ie.comparator);function Xe(...t){let e=b6;for(const n of t)e=e.add(n);return e}const E6=new Zt(He);function w6(){return E6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uf(e)?"-0":e}}function YS(t){return{integerValue:""+t}}function x6(t,e){return QO(e)?YS(e):fy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(){this._=void 0}}function T6(t,e,n){return t instanceof gf?function(a,l){const c={fields:{[NS]:{stringValue:RS},[CS]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&cy(l)&&(l=$f(l)),l&&(c.fields[IS]=l),{mapValue:c}}(n,e):t instanceof Cu?XS(t,e):t instanceof ku?QS(t,e):function(a,l){const c=KS(a,l),d=ax(c)+ax(a.Re);return g0(c)&&g0(a.Re)?YS(d):fy(a.serializer,d)}(t,e)}function S6(t,e,n){return t instanceof Cu?XS(t,e):t instanceof ku?QS(t,e):n}function KS(t,e){return t instanceof pf?function(i){return g0(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class gf extends Yf{}class Cu extends Yf{constructor(e){super(),this.elements=e}}function XS(t,e){const n=WS(e);for(const i of t.elements)n.some(a=>Ei(a,i))||n.push(i);return{arrayValue:{values:n}}}class ku extends Yf{constructor(e){super(),this.elements=e}}function QS(t,e){let n=WS(e);for(const i of t.elements)n=n.filter(a=>!Ei(a,i));return{arrayValue:{values:n}}}class pf extends Yf{constructor(e,n){super(),this.serializer=e,this.Re=n}}function ax(t){return Vt(t.integerValue||t.doubleValue)}function WS(t){return uy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function A6(t,e){return t.field.isEqual(e.field)&&function(i,a){return i instanceof Cu&&a instanceof Cu||i instanceof ku&&a instanceof ku?Rl(i.elements,a.elements,Ei):i instanceof pf&&a instanceof pf?Ei(i.Re,a.Re):i instanceof gf&&a instanceof gf}(t.transform,e.transform)}class R6{constructor(e,n){this.version=e,this.transformResults=n}}class ar{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ar}static exists(e){return new ar(void 0,e)}static updateTime(e){return new ar(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Kf{}function ZS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Xf(t.key,ar.none()):new ju(t.key,t.data,ar.none());{const n=t.data,i=Hn.empty();let a=new Zt(mn.comparator);for(let l of e.fields)if(!a.has(l)){let c=n.field(l);c===null&&l.length>1&&(l=l.popLast(),c=n.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new aa(t.key,i,new sr(a.toArray()),ar.none())}}function N6(t,e,n){t instanceof ju?function(a,l,c){const d=a.value.clone(),f=lx(a.fieldTransforms,l,c.transformResults);d.setAll(f),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(t,e,n):t instanceof aa?function(a,l,c){if(!Hh(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=lx(a.fieldTransforms,l,c.transformResults),f=l.data;f.setAll(JS(a)),f.setAll(d),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(t,e,n):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function du(t,e,n,i){return t instanceof ju?function(l,c,d,f){if(!Hh(l.precondition,c))return d;const p=l.value.clone(),y=cx(l.fieldTransforms,f,c);return p.setAll(y),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(t,e,n,i):t instanceof aa?function(l,c,d,f){if(!Hh(l.precondition,c))return d;const p=cx(l.fieldTransforms,f,c),y=c.data;return y.setAll(JS(l)),y.setAll(p),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(v=>v.field))}(t,e,n,i):function(l,c,d){return Hh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(t,e,n)}function I6(t,e){let n=null;for(const i of t.fieldTransforms){const a=e.data.field(i.field),l=KS(i.transform,a||null);l!=null&&(n===null&&(n=Hn.empty()),n.set(i.field,l))}return n||null}function ox(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Rl(i,a,(l,c)=>A6(l,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ju extends Kf{constructor(e,n,i,a=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class aa extends Kf{constructor(e,n,i,a,l=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function JS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function lx(t,e,n){const i=new Map;lt(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let a=0;a<n.length;a++){const l=t[a],c=l.transform,d=e.data.field(l.field);i.set(l.field,S6(c,d,n[a]))}return i}function cx(t,e,n){const i=new Map;for(const a of t){const l=a.transform,c=n.data.field(a.field);i.set(a.field,T6(l,c,e))}return i}class Xf extends Kf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class C6 extends Kf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e,n,i,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&N6(l,e,i[a])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=du(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=du(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=GS();return this.mutations.forEach(a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=n.has(a.key)?null:d;const f=ZS(c,d);f!==null&&i.set(a.key,f),c.isValidDocument()||c.convertToNoDocument(Pe.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Xe())}isEqual(e){return this.batchId===e.batchId&&Rl(this.mutations,e.mutations,(n,i)=>ox(n,i))&&Rl(this.baseMutations,e.baseMutations,(n,i)=>ox(n,i))}}class gy{constructor(e,n,i,a){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=a}static from(e,n,i){lt(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let a=function(){return _6}();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new gy(e,n,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,Je;function O6(t){switch(t){case me.OK:return Me(64938);case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0;default:return Me(15467,{code:t})}}function eA(t){if(t===void 0)return rs("GRPC error has no .code"),me.UNKNOWN;switch(t){case qt.OK:return me.OK;case qt.CANCELLED:return me.CANCELLED;case qt.UNKNOWN:return me.UNKNOWN;case qt.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case qt.INTERNAL:return me.INTERNAL;case qt.UNAVAILABLE:return me.UNAVAILABLE;case qt.UNAUTHENTICATED:return me.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case qt.NOT_FOUND:return me.NOT_FOUND;case qt.ALREADY_EXISTS:return me.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return me.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case qt.ABORTED:return me.ABORTED;case qt.OUT_OF_RANGE:return me.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return me.UNIMPLEMENTED;case qt.DATA_LOSS:return me.DATA_LOSS;default:return Me(39323,{code:t})}}(Je=qt||(qt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6=new Ks([4294967295,4294967295],0);function ux(t){const e=wS().encode(t),n=new gS;return n.update(e),new Uint8Array(n.digest())}function dx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ks([n,i],0),new Ks([a,l],0)]}class py{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new au(`Invalid padding: ${n}`);if(i<0)throw new au(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new au(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new au(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Ks.fromNumber(this.pe)}we(e,n,i){let a=e.add(n.multiply(Ks.fromNumber(i)));return a.compare(P6)===1&&(a=new Ks([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=ux(e),[i,a]=dx(n);for(let l=0;l<this.hashCount;l++){const c=this.we(i,a,l);if(!this.be(c))return!1}return!0}static create(e,n,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new py(l,a,n);return i.forEach(d=>c.insert(d)),c}insert(e){if(this.pe===0)return;const n=ux(e),[i,a]=dx(n);for(let l=0;l<this.hashCount;l++){const c=this.we(i,a,l);this.Se(c)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class au extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,n,i,a,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const a=new Map;return a.set(e,Hu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Qf(Pe.min(),a,new St(He),is(),Xe())}}class Hu{constructor(e,n,i,a,l){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Hu(i,n,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n,i,a){this.De=e,this.removedTargetIds=n,this.key=i,this.ve=a}}class tA{constructor(e,n){this.targetId=e,this.Ce=n}}class nA{constructor(e,n,i=yn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=a}}class hx{constructor(){this.Fe=0,this.Me=fx(),this.xe=yn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Xe(),n=Xe(),i=Xe();return this.Me.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:i=i.add(a);break;default:Me(38017,{changeType:l})}}),new Hu(this.xe,this.Oe,e,n,i)}Qe(){this.Ne=!1,this.Me=fx()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,lt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class V6{constructor(e){this.ze=e,this.je=new Map,this.He=is(),this.Je=Ih(),this.Ye=Ih(),this.Ze=new St(He)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const i=this.rt(n);switch(e.state){case 0:this.it(n)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(n);break;case 3:this.it(n)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),i.ke(e.resumeToken));break;default:Me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((i,a)=>{this.it(a)&&n(a)})}ot(e){const n=e.targetId,i=e.Ce.count,a=this._t(n);if(a){const l=a.target;if(m0(l))if(i===0){const c=new Ie(l.path);this.tt(n,c,xn.newNoDocument(c,Pe.min()))}else lt(i===1,20013,{expectedCount:i});else{const c=this.ut(n);if(c!==i){const d=this.ct(e),f=d?this.lt(d,e,c):1;if(f!==0){this.st(n);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,p)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=n;let c,d;try{c=ta(i).toUint8Array()}catch(f){if(f instanceof AS)return Al("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new py(c,a,l)}catch(f){return Al(f instanceof au?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.pe===0?null:d}lt(e,n,i){return n.Ce.count===i-this.Tt(e,n.targetId)?0:2}Tt(e,n){const i=this.ze.getRemoteKeysForTarget(n);let a=0;return i.forEach(l=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.tt(n,l,null),a++)}),a}It(e){const n=new Map;this.je.forEach((l,c)=>{const d=this._t(c);if(d){if(l.current&&m0(d.target)){const f=new Ie(d.target.path);this.Et(f).has(c)||this.dt(c,f)||this.tt(c,f,xn.newNoDocument(f,e))}l.Le&&(n.set(c,l.qe()),l.Qe())}});let i=Xe();this.Ye.forEach((l,c)=>{let d=!0;c.forEachWhile(f=>{const p=this._t(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(l))}),this.He.forEach((l,c)=>c.setReadTime(e));const a=new Qf(e,n,this.Ze,this.He,i);return this.He=is(),this.Je=Ih(),this.Ye=Ih(),this.Ze=new St(He),a}et(e,n){if(!this.it(e))return;const i=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,i),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,i){if(!this.it(e))return;const a=this.rt(e);this.dt(e,n)?a.$e(n,1):a.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),i&&(this.He=this.He.insert(n,i))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new hx,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Zt(He),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Zt(He),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new hx),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Ih(){return new St(Ie.comparator)}function fx(){return new St(Ie.comparator)}const L6={asc:"ASCENDING",desc:"DESCENDING"},z6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},U6={and:"AND",or:"OR"};class B6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function _0(t,e){return t.useProto3Json||qf(e)?e:{value:e}}function mf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function j6(t,e){return mf(t,e.toTimestamp())}function vi(t){return lt(!!t,49232),Pe.fromTimestamp(function(n){const i=ea(n);return new _t(i.seconds,i.nanos)}(t))}function my(t,e){return b0(t,e).canonicalString()}function b0(t,e){const n=function(a){return new vt(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?n:n.child(e)}function iA(t){const e=vt.fromString(t);return lt(cA(e),10190,{key:e.toString()}),e}function E0(t,e){return my(t.databaseId,e.path)}function Pm(t,e){const n=iA(e);if(n.get(1)!==t.databaseId.projectId)throw new xe(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new xe(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ie(aA(n))}function sA(t,e){return my(t.databaseId,e)}function H6(t){const e=iA(t);return e.length===4?vt.emptyPath():aA(e)}function w0(t){return new vt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function aA(t){return lt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function gx(t,e,n){return{name:E0(t,e),fields:n.value.mapValue.fields}}function q6(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Me(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(p,y){return p.useProto3Json?(lt(y===void 0||typeof y=="string",58123),yn.fromBase64String(y||"")):(lt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),yn.fromUint8Array(y||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(p){const y=p.code===void 0?me.UNKNOWN:eA(p.code);return new xe(y,p.message||"")}(c);n=new nA(i,a,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Pm(t,i.document.name),l=vi(i.document.updateTime),c=i.document.createTime?vi(i.document.createTime):Pe.min(),d=new Hn({mapValue:{fields:i.document.fields}}),f=xn.newFoundDocument(a,l,c,d),p=i.targetIds||[],y=i.removedTargetIds||[];n=new qh(p,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Pm(t,i.document),l=i.readTime?vi(i.readTime):Pe.min(),c=xn.newNoDocument(a,l),d=i.removedTargetIds||[];n=new qh([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Pm(t,i.document),l=i.removedTargetIds||[];n=new qh([],l,a,null)}else{if(!("filter"in e))return Me(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new M6(a,l),d=i.targetId;n=new tA(d,c)}}return n}function $6(t,e){let n;if(e instanceof ju)n={update:gx(t,e.key,e.value)};else if(e instanceof Xf)n={delete:E0(t,e.key)};else if(e instanceof aa)n={update:gx(t,e.key,e.data),updateMask:J6(e.fieldMask)};else{if(!(e instanceof C6))return Me(16599,{ft:e.type});n={verify:E0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(l,c){const d=c.transform;if(d instanceof gf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Cu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ku)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof pf)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw Me(20930,{transform:c.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:j6(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Me(27497)}(t,e.precondition)),n}function F6(t,e){return t&&t.length>0?(lt(e!==void 0,14353),t.map(n=>function(a,l){let c=a.updateTime?vi(a.updateTime):vi(l);return c.isEqual(Pe.min())&&(c=vi(l)),new R6(c,a.transformResults||[])}(n,e))):[]}function G6(t,e){return{documents:[sA(t,e.path)]}}function Y6(t,e){const n={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=sA(t,a);const l=function(p){if(p.length!==0)return lA(jr.create(p,"and"))}(e.filters);l&&(n.structuredQuery.where=l);const c=function(p){if(p.length!==0)return p.map(y=>function(b){return{field:ll(b.field),direction:Q6(b.dir)}}(y))}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const d=_0(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{gt:n,parent:a}}function K6(t){let e=H6(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let a=null;if(i>0){lt(i===1,65062);const y=n.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];n.where&&(l=function(v){const b=oA(v);return b instanceof jr&&VS(b)?b.getFilters():[b]}(n.where));let c=[];n.orderBy&&(c=function(v){return v.map(b=>function(I){return new Iu(cl(I.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(b))}(n.orderBy));let d=null;n.limit&&(d=function(v){let b;return b=typeof v=="object"?v.value:v,qf(b)?null:b}(n.limit));let f=null;n.startAt&&(f=function(v){const b=!!v.before,x=v.values||[];return new ff(x,b)}(n.startAt));let p=null;return n.endAt&&(p=function(v){const b=!v.before,x=v.values||[];return new ff(x,b)}(n.endAt)),g6(e,a,c,l,d,"F",f,p)}function X6(t,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:a})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function oA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=cl(n.unaryFilter.field);return Ft.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=cl(n.unaryFilter.field);return Ft.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=cl(n.unaryFilter.field);return Ft.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=cl(n.unaryFilter.field);return Ft.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ft.create(cl(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return jr.create(n.compositeFilter.filters.map(i=>oA(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Me(1026)}}(n.compositeFilter.op))}(t):Me(30097,{filter:t})}function Q6(t){return L6[t]}function W6(t){return z6[t]}function Z6(t){return U6[t]}function ll(t){return{fieldPath:t.canonicalString()}}function cl(t){return mn.fromServerFormat(t.fieldPath)}function lA(t){return t instanceof Ft?function(n){if(n.op==="=="){if(tx(n.value))return{unaryFilter:{field:ll(n.field),op:"IS_NAN"}};if(ex(n.value))return{unaryFilter:{field:ll(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tx(n.value))return{unaryFilter:{field:ll(n.field),op:"IS_NOT_NAN"}};if(ex(n.value))return{unaryFilter:{field:ll(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ll(n.field),op:W6(n.op),value:n.value}}}(t):t instanceof jr?function(n){const i=n.getFilters().map(a=>lA(a));return i.length===1?i[0]:{compositeFilter:{op:Z6(n.op),filters:i}}}(t):Me(54877,{filter:t})}function J6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function cA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n,i,a,l=Pe.min(),c=Pe.min(),d=yn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new qs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(e){this.wt=e}}function t5(t){const e=K6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?v0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(){this.Cn=new r5}addToCollectionParentIndex(e,n){return this.Cn.add(n),ye.resolve()}getCollectionParents(e,n){return ye.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ye.resolve()}deleteFieldIndex(e,n){return ye.resolve()}deleteAllFieldIndexes(e){return ye.resolve()}createTargetIndexes(e,n){return ye.resolve()}getDocumentsMatchingTarget(e,n){return ye.resolve(null)}getIndexType(e,n){return ye.resolve(0)}getFieldIndexes(e,n){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}getMinOffset(e,n){return ye.resolve(Js.min())}getMinOffsetFromCollectionGroup(e,n){return ye.resolve(Js.min())}updateCollectionGroup(e,n,i){return ye.resolve()}updateIndexEntries(e,n){return ye.resolve()}}class r5{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n]||new Zt(vt.comparator),l=!a.has(i);return this.index[n]=a.add(i),l}has(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Zt(vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},uA=41943040;class Bn{static withCacheSize(e){return new Bn(e,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(uA,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Cl(0)}static lr(){return new Cl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="LruGarbageCollector",i5=1048576;function yx([t,e],[n,i]){const a=He(t,n);return a===0?He(e,i):a}class s5{constructor(e){this.Er=e,this.buffer=new Zt(yx),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();yx(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class a5{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){we(mx,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ll(n)?we(mx,"Ignoring IndexedDB error during garbage collection: ",n):await Vl(n)}await this.mr(3e5)})}}class o5{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return ye.resolve(Hf.le);const i=new s5(n);return this.gr.forEachTarget(e,a=>i.Rr(a.sequenceNumber)).next(()=>this.gr.yr(e,a=>i.Rr(a))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.gr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(px)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),px):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let i,a,l,c,d,f,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,c=Date.now(),this.nthSequenceNumber(e,a))).next(v=>(i=v,d=Date.now(),this.removeTargets(e,i,n))).next(v=>(l=v,f=Date.now(),this.removeOrphanedDocuments(e,i))).next(v=>(p=Date.now(),al()<=Ke.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(f-d)+`ms
	Removed ${v} documents in `+(p-f)+`ms
Total Duration: ${p-y}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v})))}}function l5(t,e){return new o5(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(){this.changes=new ro(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ye.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e,n,i,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(i!==null&&du(i.mutation,a,sr.empty(),_t.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Xe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Xe()){const a=$a();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,i).next(l=>{let c=su();return l.forEach((d,f)=>{c=c.insert(d,f.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const i=$a();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Xe()))}populateOverlays(e,n,i){const a=[];return i.forEach(l=>{n.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((c,d)=>{n.set(c,d)})})}computeViews(e,n,i,a){let l=is();const c=uu(),d=function(){return uu()}();return n.forEach((f,p)=>{const y=i.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof aa)?l=l.insert(p.key,p):y!==void 0?(c.set(p.key,y.mutation.getFieldMask()),du(y.mutation,p,y.mutation.getFieldMask(),_t.now())):c.set(p.key,sr.empty())}),this.recalculateAndSaveOverlays(e,l).next(f=>(f.forEach((p,y)=>c.set(p,y)),n.forEach((p,y)=>{var v;return d.set(p,new u5(y,(v=c.get(p))!==null&&v!==void 0?v:null))}),d))}recalculateAndSaveOverlays(e,n){const i=uu();let a=new St((c,d)=>c-d),l=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const d of c)d.keys().forEach(f=>{const p=n.get(f);if(p===null)return;let y=i.get(f)||sr.empty();y=d.applyToLocalView(p,y),i.set(f,y);const v=(a.get(d.batchId)||Xe()).add(f);a=a.insert(d.batchId,v)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),p=f.key,y=f.value,v=GS();y.forEach(b=>{if(!l.has(b)){const x=ZS(n.get(b),i.get(b));x!==null&&v.set(b,x),l=l.add(b)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,v))}return ye.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,a){return function(c){return Ie.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,a):this.getDocumentsMatchingCollectionQuery(e,n,i,a)}getNextDocuments(e,n,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,a-l.size):ye.resolve($a());let d=Su,f=l;return c.next(p=>ye.forEach(p,(y,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),l.get(y)?ye.resolve():this.remoteDocumentCache.getEntry(e,y).next(b=>{f=f.insert(y,b)}))).next(()=>this.populateOverlays(e,p,l)).next(()=>this.computeViews(e,f,p,Xe())).next(y=>({batchId:d,changes:FS(y)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ie(n)).next(i=>{let a=su();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,i,a){const l=n.collectionGroup;let c=su();return this.indexManager.getCollectionParents(e,l).next(d=>ye.forEach(d,f=>{const p=function(v,b){return new zl(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,f.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,i,a).next(y=>{y.forEach((v,b)=>{c=c.insert(v,b)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,l,a))).next(c=>{l.forEach((f,p)=>{const y=p.getKey();c.get(y)===null&&(c=c.insert(y,xn.newInvalidDocument(y)))});let d=su();return c.forEach((f,p)=>{const y=l.get(f);y!==void 0&&du(y.mutation,p,sr.empty(),_t.now()),Gf(n,p)&&(d=d.insert(f,p))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return ye.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:vi(a.createTime)}}(n)),ye.resolve()}getNamedQuery(e,n){return ye.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(a){return{name:a.name,query:t5(a.bundledQuery),readTime:vi(a.readTime)}}(n)),ye.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(){this.overlays=new St(Ie.comparator),this.Qr=new Map}getOverlay(e,n){return ye.resolve(this.overlays.get(n))}getOverlays(e,n){const i=$a();return ye.forEach(n,a=>this.getOverlay(e,a).next(l=>{l!==null&&i.set(a,l)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((a,l)=>{this.St(e,n,l)}),ye.resolve()}removeOverlaysForBatchId(e,n,i){const a=this.Qr.get(i);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(i)),ye.resolve()}getOverlaysForCollection(e,n,i){const a=$a(),l=n.length+1,c=new Ie(n.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const f=d.getNext().value,p=f.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===l&&f.largestBatchId>i&&a.set(f.getKey(),f)}return ye.resolve(a)}getOverlaysForCollectionGroup(e,n,i,a){let l=new St((p,y)=>p-y);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let y=l.get(p.largestBatchId);y===null&&(y=$a(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const d=$a(),f=l.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((p,y)=>d.set(p,y)),!(d.size()>=a)););return ye.resolve(d)}St(e,n,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.Qr.get(a.largestBatchId).delete(i.key);this.Qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new D6(n,i));let l=this.Qr.get(n);l===void 0&&(l=Xe(),this.Qr.set(n,l)),this.Qr.set(n,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return ye.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ye.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(){this.$r=new Zt(on.Ur),this.Kr=new Zt(on.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const i=new on(e,n);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.zr(new on(e,n))}jr(e,n){e.forEach(i=>this.removeReference(i,n))}Hr(e){const n=new Ie(new vt([])),i=new on(n,e),a=new on(n,e+1),l=[];return this.Kr.forEachInRange([i,a],c=>{this.zr(c),l.push(c.key)}),l}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Ie(new vt([])),i=new on(n,e),a=new on(n,e+1);let l=Xe();return this.Kr.forEachInRange([i,a],c=>{l=l.add(c.key)}),l}containsKey(e){const n=new on(e,0),i=this.$r.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class on{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Ie.comparator(e.key,n.key)||He(e.Zr,n.Zr)}static Wr(e,n){return He(e.Zr,n.Zr)||Ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Zt(on.Ur)}checkEmpty(e){return ye.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,a){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new k6(l,n,i,a);this.mutationQueue.push(c);for(const d of a)this.Xr=this.Xr.add(new on(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ye.resolve(c)}lookupMutationBatch(e,n){return ye.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,a=this.ti(i),l=a<0?0:a;return ye.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(this.mutationQueue.length===0?ly:this.nr-1)}getAllMutationBatches(e){return ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new on(n,0),a=new on(n,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([i,a],c=>{const d=this.ei(c.Zr);l.push(d)}),ye.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Zt(He);return n.forEach(a=>{const l=new on(a,0),c=new on(a,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,c],d=>{i=i.add(d.Zr)})}),ye.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,a=i.length+1;let l=i;Ie.isDocumentKey(l)||(l=l.child(""));const c=new on(new Ie(l),0);let d=new Zt(He);return this.Xr.forEachWhile(f=>{const p=f.key.path;return!!i.isPrefixOf(p)&&(p.length===a&&(d=d.add(f.Zr)),!0)},c),ye.resolve(this.ni(d))}ni(e){const n=[];return e.forEach(i=>{const a=this.ei(i);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){lt(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return ye.forEach(n.mutations,a=>{const l=new on(a.key,n.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Xr=i})}sr(e){}containsKey(e,n){const i=new on(n,0),a=this.Xr.firstAfterOrEqual(i);return ye.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ye.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(e){this.ii=e,this.docs=function(){return new St(Ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,a=this.docs.get(i),l=a?a.size:0,c=this.ii(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ye.resolve(i?i.document.mutableCopy():xn.newInvalidDocument(n))}getEntries(e,n){let i=is();return n.forEach(a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():xn.newInvalidDocument(a))}),ye.resolve(i)}getDocumentsMatchingQuery(e,n,i,a){let l=is();const c=n.path,d=new Ie(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:p,value:{document:y}}=f.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||GO(FO(y),i)<=0||(a.has(y.key)||Gf(n,y))&&(l=l.insert(y.key,y.mutableCopy()))}return ye.resolve(l)}getAllFromCollectionGroup(e,n,i,a){Me(9500)}si(e,n){return ye.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new y5(this)}getSize(e){return ye.resolve(this.size)}}class y5 extends c5{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?n.push(this.Br.addEntry(e,a)):this.Br.removeEntry(i)}),ye.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e){this.persistence=e,this.oi=new ro(n=>dy(n),hy),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this._i=0,this.ai=new yy,this.targetCount=0,this.ui=Cl.cr()}forEachTarget(e,n){return this.oi.forEach((i,a)=>n(a)),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this._i&&(this._i=n),ye.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Cl(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,ye.resolve()}updateTargetData(e,n){return this.Tr(n),ye.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,n,i){let a=0;const l=[];return this.oi.forEach((c,d)=>{d.sequenceNumber<=n&&i.get(d.targetId)===null&&(this.oi.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),ye.waitFor(l).next(()=>a)}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,n){const i=this.oi.get(n)||null;return ye.resolve(i)}addMatchingKeys(e,n,i){return this.ai.Gr(n,i),ye.resolve()}removeMatchingKeys(e,n,i){this.ai.jr(n,i);const a=this.persistence.referenceDelegate,l=[];return a&&n.forEach(c=>{l.push(a.markPotentiallyOrphaned(e,c))}),ye.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),ye.resolve()}getMatchingKeysForTargetId(e,n){const i=this.ai.Yr(n);return ye.resolve(i)}containsKey(e,n){return ye.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,n){this.ci={},this.overlays={},this.li=new Hf(0),this.hi=!1,this.hi=!0,this.Pi=new g5,this.referenceDelegate=e(this),this.Ti=new v5(this),this.indexManager=new n5,this.remoteDocumentCache=function(a){return new m5(a)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new e5(n),this.Ei=new h5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new f5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ci[e.toKey()];return i||(i=new p5(n,this.referenceDelegate),this.ci[e.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,i){we("MemoryPersistence","Starting transaction:",e);const a=new _5(this.li.next());return this.referenceDelegate.di(),i(a).next(l=>this.referenceDelegate.Ai(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ri(e,n){return ye.or(Object.values(this.ci).map(i=>()=>i.containsKey(e,n)))}}class _5 extends KO{constructor(e){super(),this.currentSequenceNumber=e}}class vy{constructor(e){this.persistence=e,this.Vi=new yy,this.mi=null}static fi(e){return new vy(e)}get gi(){if(this.mi)return this.mi;throw Me(60996)}addReference(e,n,i){return this.Vi.addReference(i,n),this.gi.delete(i.toString()),ye.resolve()}removeReference(e,n,i){return this.Vi.removeReference(i,n),this.gi.add(i.toString()),ye.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),ye.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(a=>this.gi.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(l=>this.gi.add(l.toString()))}).next(()=>i.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.gi,i=>{const a=Ie.fromPath(i);return this.pi(e,a).next(l=>{l||n.removeEntry(a,Pe.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(i=>{i?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return ye.or([()=>ye.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class yf{constructor(e,n){this.persistence=e,this.yi=new ro(i=>WO(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=l5(this,n)}static fi(e,n){return new yf(e,n)}di(){}Ai(e){return ye.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(a=>i+a))}br(e){let n=0;return this.yr(e,i=>{n++}).next(()=>n)}yr(e,n){return ye.forEach(this.yi,(i,a)=>this.Dr(e,i,a).next(l=>l?ye.resolve():n(a)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.si(e,c=>this.Dr(e,c,n).next(d=>{d||(i++,l.removeEntry(c,Pe.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),ye.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.yi.set(i,e.currentSequenceNumber),ye.resolve()}removeReference(e,n,i){return this.yi.set(i,e.currentSequenceNumber),ye.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),ye.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Bh(e.data.value)),n}Dr(e,n,i){return ye.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.yi.get(n);return ye.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,n,i,a){this.targetId=e,this.fromCache=n,this.ds=i,this.As=a}static Rs(e,n){let i=Xe(),a=Xe();for(const l of n.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new _y(e,n.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return p3()?8:XO(Sn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,i,a){const l={result:null};return this.ws(e,n).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.bs(e,n,a,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new b5;return this.Ss(e,n,c).next(d=>{if(l.result=d,this.fs)return this.Ds(e,n,c,d.size)})}).next(()=>l.result)}Ds(e,n,i,a){return i.documentReadCount<this.gs?(al()<=Ke.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",ol(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ye.resolve()):(al()<=Ke.DEBUG&&we("QueryEngine","Query:",ol(n),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ps*a?(al()<=Ke.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",ol(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yi(n))):ye.resolve())}ws(e,n){if(sx(n))return ye.resolve(null);let i=yi(n);return this.indexManager.getIndexType(e,i).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=v0(n,null,"F"),i=yi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const c=Xe(...l);return this.ys.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,i).next(f=>{const p=this.vs(n,d);return this.Cs(n,p,c,f.readTime)?this.ws(e,v0(n,null,"F")):this.Fs(e,p,n,f)}))})))}bs(e,n,i,a){return sx(n)||a.isEqual(Pe.min())?ye.resolve(null):this.ys.getDocuments(e,i).next(l=>{const c=this.vs(n,l);return this.Cs(n,c,i,a)?ye.resolve(null):(al()<=Ke.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),ol(n)),this.Fs(e,c,n,$O(a,Su)).next(d=>d))})}vs(e,n){let i=new Zt(qS(e));return n.forEach((a,l)=>{Gf(e,l)&&(i=i.add(l))}),i}Cs(e,n,i,a){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,n,i){return al()<=Ke.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",ol(n)),this.ys.getDocumentsMatchingQuery(e,n,Js.min(),i)}Fs(e,n,i,a){return this.ys.getDocumentsMatchingQuery(e,i,a).next(l=>(n.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="LocalStore",w5=3e8;class x5{constructor(e,n,i,a){this.persistence=e,this.Ms=n,this.serializer=a,this.xs=new St(He),this.Os=new ro(l=>dy(l),hy),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(i)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new d5(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function T5(t,e,n,i){return new x5(t,e,n,i)}async function hA(t,e){const n=Ve(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let a;return n.mutationQueue.getAllMutationBatches(i).next(l=>(a=l,n.Ls(e),n.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],d=[];let f=Xe();for(const p of a){c.push(p.batchId);for(const y of p.mutations)f=f.add(y.key)}for(const p of l){d.push(p.batchId);for(const y of p.mutations)f=f.add(y.key)}return n.localDocuments.getDocuments(i,f).next(p=>({ks:p,removedBatchIds:c,addedBatchIds:d}))})})}function S5(t,e){const n=Ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),l=n.Bs.newChangeBuffer({trackRemovals:!0});return function(d,f,p,y){const v=p.batch,b=v.keys();let x=ye.resolve();return b.forEach(I=>{x=x.next(()=>y.getEntry(f,I)).next(P=>{const O=p.docVersions.get(I);lt(O!==null,48541),P.version.compareTo(O)<0&&(v.applyToRemoteDocument(P,p),P.isValidDocument()&&(P.setReadTime(p.commitVersion),y.addEntry(P)))})}),x.next(()=>d.mutationQueue.removeMutationBatch(f,v))}(n,i,e,l).next(()=>l.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let f=Xe();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(f=f.add(d.batch.mutations[p].key));return f}(e))).next(()=>n.localDocuments.getDocuments(i,a))})}function fA(t){const e=Ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function A5(t,e){const n=Ve(t),i=e.snapshotVersion;let a=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=n.Bs.newChangeBuffer({trackRemovals:!0});a=n.xs;const d=[];e.targetChanges.forEach((y,v)=>{const b=a.get(v);if(!b)return;d.push(n.Ti.removeMatchingKeys(l,y.removedDocuments,v).next(()=>n.Ti.addMatchingKeys(l,y.addedDocuments,v)));let x=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(v)!==null?x=x.withResumeToken(yn.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):y.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(y.resumeToken,i)),a=a.insert(v,x),function(P,O,B){return P.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=w5?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(b,x,y)&&d.push(n.Ti.updateTargetData(l,x))});let f=is(),p=Xe();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(l,y))}),d.push(R5(l,c,e.documentUpdates).next(y=>{f=y.qs,p=y.Qs})),!i.isEqual(Pe.min())){const y=n.Ti.getLastRemoteSnapshotVersion(l).next(v=>n.Ti.setTargetsMetadata(l,l.currentSequenceNumber,i));d.push(y)}return ye.waitFor(d).next(()=>c.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,f,p)).next(()=>f)}).then(l=>(n.xs=a,l))}function R5(t,e,n){let i=Xe(),a=Xe();return n.forEach(l=>i=i.add(l)),e.getEntries(t,i).next(l=>{let c=is();return n.forEach((d,f)=>{const p=l.get(d);f.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(d)),f.isNoDocument()&&f.version.isEqual(Pe.min())?(e.removeEntry(d,f.readTime),c=c.insert(d,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),c=c.insert(d,f)):we(by,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",f.version)}),{qs:c,Qs:a}})}function N5(t,e){const n=Ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=ly),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function I5(t,e){const n=Ve(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return n.Ti.getTargetData(i,e).next(l=>l?(a=l,ye.resolve(a)):n.Ti.allocateTargetId(i).next(c=>(a=new qs(e,c,"TargetPurposeListen",i.currentSequenceNumber),n.Ti.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=n.xs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.xs=n.xs.insert(i.targetId,i),n.Os.set(e,i.targetId)),i})}async function x0(t,e,n){const i=Ve(t),a=i.xs.get(e),l=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!Ll(c))throw c;we(by,`Failed to update sequence numbers for target ${e}: ${c}`)}i.xs=i.xs.remove(e),i.Os.delete(a.target)}function vx(t,e,n){const i=Ve(t);let a=Pe.min(),l=Xe();return i.persistence.runTransaction("Execute query","readwrite",c=>function(f,p,y){const v=Ve(f),b=v.Os.get(y);return b!==void 0?ye.resolve(v.xs.get(b)):v.Ti.getTargetData(p,y)}(i,c,yi(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(c,d.targetId).next(f=>{l=f})}).next(()=>i.Ms.getDocumentsMatchingQuery(c,e,n?a:Pe.min(),n?l:Xe())).next(d=>(C5(i,m6(e),d),{documents:d,$s:l})))}function C5(t,e,n){let i=t.Ns.get(e)||Pe.min();n.forEach((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),t.Ns.set(e,i)}class _x{constructor(){this.activeTargetIds=w6()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class k5{constructor(){this.xo=new _x,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,i){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new _x,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="ConnectivityMonitor";class Ex{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){we(bx,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){we(bx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ch=null;function T0(){return Ch===null?Ch=function(){return 268435456+Math.round(2147483648*Math.random())}():Ch++,"0x"+Ch.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="RestConnection",M5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class O5{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${i}/databases/${a}`,this.Go=this.databaseId.database===df?`project_id=${i}`:`project_id=${i}&database_id=${a}`}zo(e,n,i,a,l){const c=T0(),d=this.jo(e,n.toUriEncodedString());we(Vm,`Sending RPC '${e}' ${c}:`,d,i);const f={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(f,a,l);const{host:p}=new URL(d),y=no(p);return this.Jo(e,d,f,i,y).then(v=>(we(Vm,`Received RPC '${e}' ${c}: `,v),v),v=>{throw Al(Vm,`RPC '${e}' ${c} failed with error: `,v,"url: ",d,"request:",i),v})}Yo(e,n,i,a,l,c){return this.zo(e,n,i,a,l)}Ho(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Pl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,l)=>e[l]=a),i&&i.headers.forEach((a,l)=>e[l]=a)}jo(e,n){const i=M5[e];return`${this.Ko}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="WebChannelConnection";class V5 extends O5{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,a,l){const c=T0();return new Promise((d,f)=>{const p=new pS;p.setWithCredentials(!0),p.listenOnce(mS.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Uh.NO_ERROR:const v=p.getResponseJson();we(En,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),d(v);break;case Uh.TIMEOUT:we(En,`RPC '${e}' ${c} timed out`),f(new xe(me.DEADLINE_EXCEEDED,"Request time out"));break;case Uh.HTTP_ERROR:const b=p.getStatus();if(we(En,`RPC '${e}' ${c} failed with status:`,b,"response text:",p.getResponseText()),b>0){let x=p.getResponseJson();Array.isArray(x)&&(x=x[0]);const I=x?.error;if(I&&I.status&&I.message){const P=function(B){const q=B.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(q)>=0?q:me.UNKNOWN}(I.status);f(new xe(P,I.message))}else f(new xe(me.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new xe(me.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{h_:e,streamId:c,P_:p.getLastErrorCode(),T_:p.getLastError()})}}finally{we(En,`RPC '${e}' ${c} completed.`)}});const y=JSON.stringify(a);we(En,`RPC '${e}' ${c} sending request:`,a),p.send(n,"POST",y,i,15)})}I_(e,n,i){const a=T0(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=_S(),d=vS(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Ho(f.initMessageHeaders,n,i),f.encodeInitMessageHeaders=!0;const y=l.join("");we(En,`Creating RPC '${e}' stream ${a}: ${y}`,f);const v=c.createWebChannel(y,f);this.E_(v);let b=!1,x=!1;const I=new P5({Zo:O=>{x?we(En,`Not sending because RPC '${e}' stream ${a} is closed:`,O):(b||(we(En,`Opening RPC '${e}' stream ${a} transport.`),v.open(),b=!0),we(En,`RPC '${e}' stream ${a} sending:`,O),v.send(O))},Xo:()=>v.close()}),P=(O,B,q)=>{O.listen(B,G=>{try{q(G)}catch(j){setTimeout(()=>{throw j},0)}})};return P(v,iu.EventType.OPEN,()=>{x||(we(En,`RPC '${e}' stream ${a} transport opened.`),I.__())}),P(v,iu.EventType.CLOSE,()=>{x||(x=!0,we(En,`RPC '${e}' stream ${a} transport closed`),I.u_(),this.d_(v))}),P(v,iu.EventType.ERROR,O=>{x||(x=!0,Al(En,`RPC '${e}' stream ${a} transport errored. Name:`,O.name,"Message:",O.message),I.u_(new xe(me.UNAVAILABLE,"The operation could not be completed")))}),P(v,iu.EventType.MESSAGE,O=>{var B;if(!x){const q=O.data[0];lt(!!q,16349);const G=q,j=G?.error||((B=G[0])===null||B===void 0?void 0:B.error);if(j){we(En,`RPC '${e}' stream ${a} received error:`,j);const W=j.status;let X=function(N){const U=qt[N];if(U!==void 0)return eA(U)}(W),A=j.message;X===void 0&&(X=me.INTERNAL,A="Unknown error status: "+W+" with message "+j.message),x=!0,I.u_(new xe(X,A)),v.close()}else we(En,`RPC '${e}' stream ${a} received:`,q),I.c_(q)}}),P(d,yS.STAT_EVENT,O=>{O.stat===d0.PROXY?we(En,`RPC '${e}' stream ${a} detected buffering proxy`):O.stat===d0.NOPROXY&&we(En,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{I.a_()},0),I}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Lm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(t){return new B6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,n,i=1e3,a=1.5,l=6e4){this.xi=e,this.timerId=n,this.A_=i,this.R_=a,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),i=Math.max(0,Date.now()-this.g_),a=Math.max(0,n-i);a>0&&we("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,a,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="PersistentStream";class pA{constructor(e,n,i,a,l,c,d,f){this.xi=e,this.S_=i,this.D_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new gA(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===me.RESOURCE_EXHAUSTED?(rs(n.toString()),rs("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===me.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.v_===n&&this.z_(i,a)},i=>{e(()=>{const a=new xe(me.UNKNOWN,"Fetching auth token failed: "+i.message);return this.j_(a)})})}z_(e,n){const i=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(a=>{i(()=>this.j_(a))}),this.stream.onMessage(a=>{i(()=>++this.M_==1?this.J_(a):this.onNext(a))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return we(wx,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(we(wx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class L5 extends pA{constructor(e,n,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,a,c),this.serializer=l}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=q6(this.serializer,e),i=function(l){if(!("targetChange"in l))return Pe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Pe.min():c.readTime?vi(c.readTime):Pe.min()}(e);return this.listener.Y_(n,i)}Z_(e){const n={};n.database=w0(this.serializer),n.addTarget=function(l,c){let d;const f=c.target;if(d=m0(f)?{documents:G6(l,f)}:{query:Y6(l,f).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=rA(l,c.resumeToken);const p=_0(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(Pe.min())>0){d.readTime=mf(l,c.snapshotVersion.toTimestamp());const p=_0(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d}(this.serializer,e);const i=X6(this.serializer,e);i&&(n.labels=i),this.Q_(n)}X_(e){const n={};n.database=w0(this.serializer),n.removeTarget=e,this.Q_(n)}}class z5 extends pA{constructor(e,n,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,a,c),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return lt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,lt(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){lt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=F6(e.writeResults,e.commitTime),i=vi(e.commitTime);return this.listener.ra(i,n)}ia(){const e={};e.database=w0(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>$6(this.serializer,i))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{}class B5 extends U5{constructor(e,n,i,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=a,this.sa=!1}oa(){if(this.sa)throw new xe(me.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,i,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.zo(e,b0(n,i),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new xe(me.UNKNOWN,l.toString())})}Yo(e,n,i,a,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Yo(e,b0(n,i),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new xe(me.UNKNOWN,c.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class j5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(rs(n),this.ua=!1):we("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za="RemoteStore";class H5{constructor(e,n,i,a,l){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(c=>{i.enqueueAndForget(async()=>{io(this)&&(we(Za,"Restarting streams for network reachability change."),await async function(f){const p=Ve(f);p.da.add(4),await qu(p),p.Va.set("Unknown"),p.da.delete(4),await Zf(p)}(this))})}),this.Va=new j5(i,a)}}async function Zf(t){if(io(t))for(const e of t.Aa)await e(!0)}async function qu(t){for(const e of t.Aa)await e(!1)}function mA(t,e){const n=Ve(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),Ty(n)?xy(n):Ul(n).N_()&&wy(n,e))}function Ey(t,e){const n=Ve(t),i=Ul(n);n.Ea.delete(e),i.N_()&&yA(n,e),n.Ea.size===0&&(i.N_()?i.k_():io(n)&&n.Va.set("Unknown"))}function wy(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ul(t).Z_(e)}function yA(t,e){t.ma.Ke(e),Ul(t).X_(e)}function xy(t){t.ma=new V6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Ul(t).start(),t.Va.ca()}function Ty(t){return io(t)&&!Ul(t).O_()&&t.Ea.size>0}function io(t){return Ve(t).da.size===0}function vA(t){t.ma=void 0}async function q5(t){t.Va.set("Online")}async function $5(t){t.Ea.forEach((e,n)=>{wy(t,e)})}async function F5(t,e){vA(t),Ty(t)?(t.Va.Pa(e),xy(t)):t.Va.set("Unknown")}async function G5(t,e,n){if(t.Va.set("Online"),e instanceof nA&&e.state===2&&e.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ea.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ea.delete(d),a.ma.removeTarget(d))}(t,e)}catch(i){we(Za,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await vf(t,i)}else if(e instanceof qh?t.ma.Xe(e):e instanceof tA?t.ma.ot(e):t.ma.nt(e),!n.isEqual(Pe.min()))try{const i=await fA(t.localStore);n.compareTo(i)>=0&&await function(l,c){const d=l.ma.It(c);return d.targetChanges.forEach((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const y=l.Ea.get(p);y&&l.Ea.set(p,y.withResumeToken(f.resumeToken,c))}}),d.targetMismatches.forEach((f,p)=>{const y=l.Ea.get(f);if(!y)return;l.Ea.set(f,y.withResumeToken(yn.EMPTY_BYTE_STRING,y.snapshotVersion)),yA(l,f);const v=new qs(y.target,f,p,y.sequenceNumber);wy(l,v)}),l.remoteSyncer.applyRemoteEvent(d)}(t,n)}catch(i){we(Za,"Failed to raise snapshot:",i),await vf(t,i)}}async function vf(t,e,n){if(!Ll(e))throw e;t.da.add(1),await qu(t),t.Va.set("Offline"),n||(n=()=>fA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{we(Za,"Retrying IndexedDB access"),await n(),t.da.delete(1),await Zf(t)})}function _A(t,e){return e().catch(n=>vf(t,n,e))}async function Jf(t){const e=Ve(t),n=ra(e);let i=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:ly;for(;Y5(e);)try{const a=await N5(e.localStore,i);if(a===null){e.Ia.length===0&&n.k_();break}i=a.batchId,K5(e,a)}catch(a){await vf(e,a)}bA(e)&&EA(e)}function Y5(t){return io(t)&&t.Ia.length<10}function K5(t,e){t.Ia.push(e);const n=ra(t);n.N_()&&n.ea&&n.ta(e.mutations)}function bA(t){return io(t)&&!ra(t).O_()&&t.Ia.length>0}function EA(t){ra(t).start()}async function X5(t){ra(t).ia()}async function Q5(t){const e=ra(t);for(const n of t.Ia)e.ta(n.mutations)}async function W5(t,e,n){const i=t.Ia.shift(),a=gy.from(i,e,n);await _A(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await Jf(t)}async function Z5(t,e){e&&ra(t).ea&&await async function(i,a){if(function(c){return O6(c)&&c!==me.ABORTED}(a.code)){const l=i.Ia.shift();ra(i).L_(),await _A(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Jf(i)}}(t,e),bA(t)&&EA(t)}async function xx(t,e){const n=Ve(t);n.asyncQueue.verifyOperationInProgress(),we(Za,"RemoteStore received new credentials");const i=io(n);n.da.add(3),await qu(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Zf(n)}async function J5(t,e){const n=Ve(t);e?(n.da.delete(2),await Zf(n)):e||(n.da.add(2),await qu(n),n.Va.set("Unknown"))}function Ul(t){return t.fa||(t.fa=function(n,i,a){const l=Ve(n);return l.oa(),new L5(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(t.datastore,t.asyncQueue,{e_:q5.bind(null,t),n_:$5.bind(null,t),i_:F5.bind(null,t),Y_:G5.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),Ty(t)?xy(t):t.Va.set("Unknown")):(await t.fa.stop(),vA(t))})),t.fa}function ra(t){return t.ga||(t.ga=function(n,i,a){const l=Ve(n);return l.oa(),new z5(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:X5.bind(null,t),i_:Z5.bind(null,t),na:Q5.bind(null,t),ra:W5.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await Jf(t)):(await t.ga.stop(),t.Ia.length>0&&(we(Za,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n,i,a,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,a,l){const c=Date.now()+i,d=new Sy(e,n,c,a,l);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ay(t,e){if(rs("AsyncQueue",`${e}: ${t}`),Ll(t))return new xe(me.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{static emptySet(e){return new vl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ie.comparator(n.key,i.key):(n,i)=>Ie.comparator(n.key,i.key),this.keyedMap=su(),this.sortedSet=new St(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new vl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(){this.pa=new St(Ie.comparator)}track(e){const n=e.doc.key,i=this.pa.get(n);i?e.type!==0&&i.type===3?this.pa=this.pa.insert(n,e):e.type===3&&i.type!==1?this.pa=this.pa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.pa=this.pa.remove(n):e.type===1&&i.type===2?this.pa=this.pa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Me(63341,{Vt:e,ya:i}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,i)=>{e.push(i)}),e}}class kl{constructor(e,n,i,a,l,c,d,f,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,a,l){const c=[];return n.forEach(d=>{c.push({type:0,doc:d})}),new kl(e,n,vl.emptySet(n),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ff(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==i[a].type||!n[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class tP{constructor(){this.queries=Sx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const a=Ve(n),l=a.queries;a.queries=Sx(),l.forEach((c,d)=>{for(const f of d.Sa)f.onError(i)})})(this,new xe(me.ABORTED,"Firestore shutting down"))}}function Sx(){return new ro(t=>HS(t),Ff)}async function nP(t,e){const n=Ve(t);let i=3;const a=e.query;let l=n.queries.get(a);l?!l.Da()&&e.va()&&(i=2):(l=new eP,i=e.va()?0:1);try{switch(i){case 0:l.ba=await n.onListen(a,!0);break;case 1:l.ba=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){const d=Ay(c,`Initialization of query '${ol(e.query)}' failed`);return void e.onError(d)}n.queries.set(a,l),l.Sa.push(e),e.Fa(n.onlineState),l.ba&&e.Ma(l.ba)&&Ry(n)}async function rP(t,e){const n=Ve(t),i=e.query;let a=3;const l=n.queries.get(i);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.va()?0:1:!l.Da()&&e.va()&&(a=2))}switch(a){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function iP(t,e){const n=Ve(t);let i=!1;for(const a of e){const l=a.query,c=n.queries.get(l);if(c){for(const d of c.Sa)d.Ma(a)&&(i=!0);c.ba=a}}i&&Ry(n)}function sP(t,e,n){const i=Ve(t),a=i.queries.get(e);if(a)for(const l of a.Sa)l.onError(n);i.queries.delete(e)}function Ry(t){t.Ca.forEach(e=>{e.next()})}var S0,Ax;(Ax=S0||(S0={})).xa="default",Ax.Cache="cache";class aP{constructor(e,n,i){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=i||{}}Ma(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new kl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const i=n!=="Offline";return(!this.options.Qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=kl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==S0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e){this.key=e}}class xA{constructor(e){this.key=e}}class oP{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Xe(),this.mutatedKeys=Xe(),this.Za=qS(e),this.Xa=new vl(this.Za)}get eu(){return this.Ha}tu(e,n){const i=n?n.nu:new Tx,a=n?n.Xa:this.Xa;let l=n?n.mutatedKeys:this.mutatedKeys,c=a,d=!1;const f=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((y,v)=>{const b=a.get(y),x=Gf(this.query,v)?v:null,I=!!b&&this.mutatedKeys.has(b.key),P=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let O=!1;b&&x?b.data.isEqual(x.data)?I!==P&&(i.track({type:3,doc:x}),O=!0):this.ru(b,x)||(i.track({type:2,doc:x}),O=!0,(f&&this.Za(x,f)>0||p&&this.Za(x,p)<0)&&(d=!0)):!b&&x?(i.track({type:0,doc:x}),O=!0):b&&!x&&(i.track({type:1,doc:b}),O=!0,(f||p)&&(d=!0)),O&&(x?(c=c.add(x),l=P?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),i.track({type:1,doc:y})}return{Xa:c,nu:i,Cs:d,mutatedKeys:l}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,a){const l=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const c=e.nu.wa();c.sort((y,v)=>function(x,I){const P=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Vt:O})}};return P(x)-P(I)}(y.type,v.type)||this.Za(y.doc,v.doc)),this.iu(i),a=a!=null&&a;const d=n&&!a?this.su():[],f=this.Ya.size===0&&this.current&&!a?1:0,p=f!==this.Ja;return this.Ja=f,c.length!==0||p?{snapshot:new kl(this.query,e.Xa,l,c,e.mutatedKeys,f===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),ou:d}:{ou:d}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Tx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Xe(),this.Xa.forEach(i=>{this._u(i.key)&&(this.Ya=this.Ya.add(i.key))});const n=[];return e.forEach(i=>{this.Ya.has(i)||n.push(new xA(i))}),this.Ya.forEach(i=>{e.has(i)||n.push(new wA(i))}),n}au(e){this.Ha=e.$s,this.Ya=Xe();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return kl.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Ny="SyncEngine";class lP{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class cP{constructor(e){this.key=e,this.cu=!1}}class uP{constructor(e,n,i,a,l,c){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.lu={},this.hu=new ro(d=>HS(d),Ff),this.Pu=new Map,this.Tu=new Set,this.Iu=new St(Ie.comparator),this.Eu=new Map,this.du=new yy,this.Au={},this.Ru=new Map,this.Vu=Cl.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function dP(t,e,n=!0){const i=IA(t);let a;const l=i.hu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.uu()):a=await TA(i,e,n,!0),a}async function hP(t,e){const n=IA(t);await TA(n,e,!0,!1)}async function TA(t,e,n,i){const a=await I5(t.localStore,yi(e)),l=a.targetId,c=t.sharedClientState.addLocalQueryTarget(l,n);let d;return i&&(d=await fP(t,e,l,c==="current",a.resumeToken)),t.isPrimaryClient&&n&&mA(t.remoteStore,a),d}async function fP(t,e,n,i,a){t.fu=(v,b,x)=>async function(P,O,B,q){let G=O.view.tu(B);G.Cs&&(G=await vx(P.localStore,O.query,!1).then(({documents:A})=>O.view.tu(A,G)));const j=q&&q.targetChanges.get(O.targetId),W=q&&q.targetMismatches.get(O.targetId)!=null,X=O.view.applyChanges(G,P.isPrimaryClient,j,W);return Nx(P,O.targetId,X.ou),X.snapshot}(t,v,b,x);const l=await vx(t.localStore,e,!0),c=new oP(e,l.$s),d=c.tu(l.documents),f=Hu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",a),p=c.applyChanges(d,t.isPrimaryClient,f);Nx(t,n,p.ou);const y=new lP(e,n,c);return t.hu.set(e,y),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),p.snapshot}async function gP(t,e,n){const i=Ve(t),a=i.hu.get(e),l=i.Pu.get(a.targetId);if(l.length>1)return i.Pu.set(a.targetId,l.filter(c=>!Ff(c,e))),void i.hu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await x0(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),n&&Ey(i.remoteStore,a.targetId),A0(i,a.targetId)}).catch(Vl)):(A0(i,a.targetId),await x0(i.localStore,a.targetId,!0))}async function pP(t,e){const n=Ve(t),i=n.hu.get(e),a=n.Pu.get(i.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Ey(n.remoteStore,i.targetId))}async function mP(t,e,n){const i=xP(t);try{const a=await function(c,d){const f=Ve(c),p=_t.now(),y=d.reduce((x,I)=>x.add(I.key),Xe());let v,b;return f.persistence.runTransaction("Locally write mutations","readwrite",x=>{let I=is(),P=Xe();return f.Bs.getEntries(x,y).next(O=>{I=O,I.forEach((B,q)=>{q.isValidDocument()||(P=P.add(B))})}).next(()=>f.localDocuments.getOverlayedDocuments(x,I)).next(O=>{v=O;const B=[];for(const q of d){const G=I6(q,v.get(q.key).overlayedDocument);G!=null&&B.push(new aa(q.key,G,MS(G.value.mapValue),ar.exists(!0)))}return f.mutationQueue.addMutationBatch(x,p,B,d)}).next(O=>{b=O;const B=O.applyToLocalDocumentSet(v,P);return f.documentOverlayCache.saveOverlays(x,O.batchId,B)})}).then(()=>({batchId:b.batchId,changes:FS(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(c,d,f){let p=c.Au[c.currentUser.toKey()];p||(p=new St(He)),p=p.insert(d,f),c.Au[c.currentUser.toKey()]=p}(i,a.batchId,n),await $u(i,a.changes),await Jf(i.remoteStore)}catch(a){const l=Ay(a,"Failed to persist write");n.reject(l)}}async function SA(t,e){const n=Ve(t);try{const i=await A5(n.localStore,e);e.targetChanges.forEach((a,l)=>{const c=n.Eu.get(l);c&&(lt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.cu=!0:a.modifiedDocuments.size>0?lt(c.cu,14607):a.removedDocuments.size>0&&(lt(c.cu,42227),c.cu=!1))}),await $u(n,i,e)}catch(i){await Vl(i)}}function Rx(t,e,n){const i=Ve(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const a=[];i.hu.forEach((l,c)=>{const d=c.view.Fa(e);d.snapshot&&a.push(d.snapshot)}),function(c,d){const f=Ve(c);f.onlineState=d;let p=!1;f.queries.forEach((y,v)=>{for(const b of v.Sa)b.Fa(d)&&(p=!0)}),p&&Ry(f)}(i.eventManager,e),a.length&&i.lu.Y_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function yP(t,e,n){const i=Ve(t);i.sharedClientState.updateQueryState(e,"rejected",n);const a=i.Eu.get(e),l=a&&a.key;if(l){let c=new St(Ie.comparator);c=c.insert(l,xn.newNoDocument(l,Pe.min()));const d=Xe().add(l),f=new Qf(Pe.min(),new Map,new St(He),c,d);await SA(i,f),i.Iu=i.Iu.remove(l),i.Eu.delete(e),Iy(i)}else await x0(i.localStore,e,!1).then(()=>A0(i,e,n)).catch(Vl)}async function vP(t,e){const n=Ve(t),i=e.batch.batchId;try{const a=await S5(n.localStore,e);RA(n,i,null),AA(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await $u(n,a)}catch(a){await Vl(a)}}async function _P(t,e,n){const i=Ve(t);try{const a=await function(c,d){const f=Ve(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return f.mutationQueue.lookupMutationBatch(p,d).next(v=>(lt(v!==null,37113),y=v.keys(),f.mutationQueue.removeMutationBatch(p,v))).next(()=>f.mutationQueue.performConsistencyCheck(p)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(p,y,d)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>f.localDocuments.getDocuments(p,y))})}(i.localStore,e);RA(i,e,n),AA(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await $u(i,a)}catch(a){await Vl(a)}}function AA(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function RA(t,e,n){const i=Ve(t);let a=i.Au[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(n?l.reject(n):l.resolve(),a=a.remove(e)),i.Au[i.currentUser.toKey()]=a}}function A0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Pu.get(e))t.hu.delete(i),n&&t.lu.gu(i,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(i=>{t.du.containsKey(i)||NA(t,i)})}function NA(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(Ey(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),Iy(t))}function Nx(t,e,n){for(const i of n)i instanceof wA?(t.du.addReference(i.key,e),bP(t,i)):i instanceof xA?(we(Ny,"Document no longer in limbo: "+i.key),t.du.removeReference(i.key,e),t.du.containsKey(i.key)||NA(t,i.key)):Me(19791,{pu:i})}function bP(t,e){const n=e.key,i=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(i)||(we(Ny,"New document in limbo: "+n),t.Tu.add(i),Iy(t))}function Iy(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new Ie(vt.fromString(e)),i=t.Vu.next();t.Eu.set(i,new cP(n)),t.Iu=t.Iu.insert(n,i),mA(t.remoteStore,new qs(yi(BS(n.path)),i,"TargetPurposeLimboResolution",Hf.le))}}async function $u(t,e,n){const i=Ve(t),a=[],l=[],c=[];i.hu.isEmpty()||(i.hu.forEach((d,f)=>{c.push(i.fu(f,e,n).then(p=>{var y;if((p||n)&&i.isPrimaryClient){const v=p?!p.fromCache:(y=n?.targetChanges.get(f.targetId))===null||y===void 0?void 0:y.current;i.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(p){a.push(p);const v=_y.Rs(f.targetId,p);l.push(v)}}))}),await Promise.all(c),i.lu.Y_(a),await async function(f,p){const y=Ve(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>ye.forEach(p,b=>ye.forEach(b.ds,x=>y.persistence.referenceDelegate.addReference(v,b.targetId,x)).next(()=>ye.forEach(b.As,x=>y.persistence.referenceDelegate.removeReference(v,b.targetId,x)))))}catch(v){if(!Ll(v))throw v;we(by,"Failed to update sequence numbers: "+v)}for(const v of p){const b=v.targetId;if(!v.fromCache){const x=y.xs.get(b),I=x.snapshotVersion,P=x.withLastLimboFreeSnapshotVersion(I);y.xs=y.xs.insert(b,P)}}}(i.localStore,l))}async function EP(t,e){const n=Ve(t);if(!n.currentUser.isEqual(e)){we(Ny,"User change. New user:",e.toKey());const i=await hA(n.localStore,e);n.currentUser=e,function(l,c){l.Ru.forEach(d=>{d.forEach(f=>{f.reject(new xe(me.CANCELLED,c))})}),l.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await $u(n,i.ks)}}function wP(t,e){const n=Ve(t),i=n.Eu.get(e);if(i&&i.cu)return Xe().add(i.key);{let a=Xe();const l=n.Pu.get(e);if(!l)return a;for(const c of l){const d=n.hu.get(c);a=a.unionWith(d.view.eu)}return a}}function IA(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=SA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yP.bind(null,e),e.lu.Y_=iP.bind(null,e.eventManager),e.lu.gu=sP.bind(null,e.eventManager),e}function xP(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_P.bind(null,e),e}class _f{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return T5(this.persistence,new E5,e.initialUser,this.serializer)}Su(e){return new dA(vy.fi,this.serializer)}bu(e){return new k5}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_f.provider={build:()=>new _f};class TP extends _f{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){lt(this.persistence.referenceDelegate instanceof yf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new a5(i,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new dA(i=>yf.fi(i,n),this.serializer)}}class R0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Rx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=EP.bind(null,this.syncEngine),await J5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new tP}()}createDatastore(e){const n=Wf(e.databaseInfo.databaseId),i=function(l){return new V5(l)}(e.databaseInfo);return function(l,c,d,f){return new B5(l,c,d,f)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,a,l,c,d){return new H5(i,a,l,c,d)}(this.localStore,this.datastore,e.asyncQueue,n=>Rx(this.syncEngine,n,0),function(){return Ex.C()?new Ex:new D5}())}createSyncEngine(e,n){return function(a,l,c,d,f,p,y){const v=new uP(a,l,c,d,f,p);return y&&(v.mu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(a){const l=Ve(a);we(Za,"RemoteStore shutting down."),l.da.add(5),await qu(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}R0.provider={build:()=>new R0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):rs("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="FirestoreClient";class AP{constructor(e,n,i,a,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=a,this.user=wn.UNAUTHENTICATED,this.clientId=xS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{we(ia,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(we(ia,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Ay(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function zm(t,e){t.asyncQueue.verifyOperationInProgress(),we(ia,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async a=>{i.isEqual(a)||(await hA(e.localStore,a),i=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ix(t,e){t.asyncQueue.verifyOperationInProgress();const n=await RP(t);we(ia,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>xx(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,a)=>xx(e.remoteStore,a)),t._onlineComponents=e}async function RP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){we(ia,"Using user provided OfflineComponentProvider");try{await zm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(a){return a.name==="FirebaseError"?a.code===me.FAILED_PRECONDITION||a.code===me.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;Al("Error using user provided cache. Falling back to memory cache: "+n),await zm(t,new _f)}}else we(ia,"Using default OfflineComponentProvider"),await zm(t,new TP(void 0));return t._offlineComponents}async function CA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(we(ia,"Using user provided OnlineComponentProvider"),await Ix(t,t._uninitializedComponentsProvider._online)):(we(ia,"Using default OnlineComponentProvider"),await Ix(t,new R0))),t._onlineComponents}function NP(t){return CA(t).then(e=>e.syncEngine)}async function IP(t){const e=await CA(t),n=e.eventManager;return n.onListen=dP.bind(null,e.syncEngine),n.onUnlisten=gP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=hP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=pP.bind(null,e.syncEngine),n}function CP(t,e,n={}){const i=new Xs;return t.asyncQueue.enqueueAndForget(async()=>function(l,c,d,f,p){const y=new SP({next:b=>{y.xu(),c.enqueueAndForget(()=>rP(l,v)),b.fromCache&&f.source==="server"?p.reject(new xe(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(b)},error:b=>p.reject(b)}),v=new aP(d,y,{includeMetadataChanges:!0,Qa:!0});return nP(l,v)}(await IP(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(t,e,n){if(!n)throw new xe(me.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kP(t,e,n,i){if(e===!0&&i===!0)throw new xe(me.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function kx(t){if(!Ie.isDocumentKey(t))throw new xe(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Dx(t){if(Ie.isDocumentKey(t))throw new xe(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function eg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Me(12329,{type:typeof t})}function Ja(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xe(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=eg(t);throw new xe(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="firestore.googleapis.com",Mx=!0;class Ox{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new xe(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MA,this.ssl=Mx}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Mx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=uA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<i5)throw new xe(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kA((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new xe(me.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new xe(me.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new xe(me.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tg{constructor(e,n,i,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ox({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ox(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new PO;switch(i.type){case"firstParty":return new UO(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new xe(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Cx.get(n);i&&(we("ComponentProvider","Removing Datastore"),Cx.delete(n),i.terminate())}(this),Promise.resolve()}}function DP(t,e,n,i={}){var a;t=Ja(t,tg);const l=no(e),c=t._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:t._getEmulatorOptions()}),f=`${e}:${n}`;l&&(ny(`https://${f}`),ry("Firestore",!0)),c.host!==MA&&c.host!==f&&Al("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},c),{host:f,ssl:l,emulatorOptions:i});if(!Xa(p,d)&&(t._setSettings(p),i.mockUserToken)){let y,v;if(typeof i.mockUserToken=="string")y=i.mockUserToken,v=wn.MOCK_USER;else{y=a3(i.mockUserToken,(a=t._app)===null||a===void 0?void 0:a.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new xe(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new wn(b)}t._authCredentials=new VO(new ES(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new so(this.firestore,e,this._query)}}class or{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new or(this.firestore,e,this._key)}}class Qs extends so{constructor(e,n,i){super(e,n,BS(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new or(this.firestore,null,new Ie(e))}withConverter(e){return new Qs(this.firestore,e,this._path)}}function Cy(t,e,...n){if(t=Dt(t),DA("collection","path",e),t instanceof tg){const i=vt.fromString(e,...n);return Dx(i),new Qs(t,null,i)}{if(!(t instanceof or||t instanceof Qs))throw new xe(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(vt.fromString(e,...n));return Dx(i),new Qs(t.firestore,null,i)}}function Bl(t,e,...n){if(t=Dt(t),arguments.length===1&&(e=xS.newId()),DA("doc","path",e),t instanceof tg){const i=vt.fromString(e,...n);return kx(i),new or(t,null,new Ie(i))}{if(!(t instanceof or||t instanceof Qs))throw new xe(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(vt.fromString(e,...n));return kx(i),new or(t.firestore,t instanceof Qs?t.converter:null,new Ie(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="AsyncQueue";class Vx{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new gA(this,"async_queue_retry"),this.rc=()=>{const i=Lm();i&&we(Px,"Visibility state changed to "+i.visibilityState),this.x_.b_()},this.sc=e;const n=Lm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Lm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Xs;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Ll(e))throw e;we(Px,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(i=>{throw this.Xu=i,this.ec=!1,rs("INTERNAL UNHANDLED ERROR: ",Lx(i)),i}).then(i=>(this.ec=!1,i))));return this.sc=n,n}enqueueAfterDelay(e,n,i){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const a=Sy.createAndSchedule(this,e,n,i,l=>this.uc(l));return this.Zu.push(a),a}oc(){this.Xu&&Me(47125,{cc:Lx(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function Lx(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Fu extends tg{constructor(e,n,i,a){super(e,n,i,a),this.type="firestore",this._queue=new Vx,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Vx(e),this._firestoreClient=void 0,await e}}}function MP(t,e){const n=typeof t=="object"?t:ay(),i=typeof t=="string"?t:df,a=jf(n,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=aS("firestore");l&&DP(a,...l)}return a}function ky(t){if(t._terminated)throw new xe(me.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||OP(t),t._firestoreClient}function OP(t){var e,n,i;const a=t._freezeSettings(),l=function(d,f,p,y){return new e6(d,f,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,kA(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new AP(t._authCredentials,t._appCheckCredentials,t._queue,l,t._componentsProvider&&function(d){const f=d?._online.build();return{_offline:d?._offline.build(f),_online:f}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dl(yn.fromBase64String(e))}catch(n){throw new xe(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Dl(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new xe(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new xe(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new xe(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP=/^__.*__$/;class VP{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new aa(e,this.data,this.fieldMask,n,this.fieldTransforms):new ju(e,this.data,n,this.fieldTransforms)}}class OA{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new aa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function PA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ic:t})}}class Py{constructor(e,n,i,a,l,c){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Py(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.dc({path:i,Rc:!1});return a.Vc(e),a}mc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.dc({path:i,Rc:!1});return a.Ec(),a}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return bf(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(PA(this.Ic)&&PP.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class LP{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Wf(e)}bc(e,n,i,a=!1){return new Py({Ic:e,methodName:n,wc:i,path:mn.emptyPath(),Rc:!1,yc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vy(t){const e=t._freezeSettings(),n=Wf(t._databaseId);return new LP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function VA(t,e,n,i,a,l={}){const c=t.bc(l.merge||l.mergeFields?2:0,e,n,a);Ly("Data must be an object, but it was:",c,i);const d=LA(i,c);let f,p;if(l.merge)f=new sr(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const v of l.mergeFields){const b=N0(e,v,n);if(!c.contains(b))throw new xe(me.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);UA(y,b)||y.push(b)}f=new sr(y),p=c.fieldTransforms.filter(v=>f.covers(v.field))}else f=null,p=c.fieldTransforms;return new VP(new Hn(d),f,p)}class rg extends Dy{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rg}}function zP(t,e,n,i){const a=t.bc(1,e,n);Ly("Data must be an object, but it was:",a,i);const l=[],c=Hn.empty();sa(i,(f,p)=>{const y=zy(e,f,n);p=Dt(p);const v=a.mc(y);if(p instanceof rg)l.push(y);else{const b=Gu(p,v);b!=null&&(l.push(y),c.set(y,b))}});const d=new sr(l);return new OA(c,d,a.fieldTransforms)}function UP(t,e,n,i,a,l){const c=t.bc(1,e,n),d=[N0(e,i,n)],f=[a];if(l.length%2!=0)throw new xe(me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)d.push(N0(e,l[b])),f.push(l[b+1]);const p=[],y=Hn.empty();for(let b=d.length-1;b>=0;--b)if(!UA(p,d[b])){const x=d[b];let I=f[b];I=Dt(I);const P=c.mc(x);if(I instanceof rg)p.push(x);else{const O=Gu(I,P);O!=null&&(p.push(x),y.set(x,O))}}const v=new sr(p);return new OA(y,v,c.fieldTransforms)}function BP(t,e,n,i=!1){return Gu(n,t.bc(i?4:3,e))}function Gu(t,e){if(zA(t=Dt(t)))return Ly("Unsupported field value:",e,t),LA(t,e);if(t instanceof Dy)return function(i,a){if(!PA(a.Ic))throw a.gc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.gc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(i,a){const l=[];let c=0;for(const d of i){let f=Gu(d,a.fc(c));f==null&&(f={nullValue:"NULL_VALUE"}),l.push(f),c++}return{arrayValue:{values:l}}}(t,e)}return function(i,a){if((i=Dt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return x6(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=_t.fromDate(i);return{timestampValue:mf(a.serializer,l)}}if(i instanceof _t){const l=new _t(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:mf(a.serializer,l)}}if(i instanceof My)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Dl)return{bytesValue:rA(a.serializer,i._byteString)};if(i instanceof or){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.gc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:my(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Oy)return function(c,d){return{mapValue:{fields:{[kS]:{stringValue:DS},[hf]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw d.gc("VectorValues must only contain numeric values.");return fy(d.serializer,p)})}}}}}}(i,a);throw a.gc(`Unsupported field value: ${eg(i)}`)}(t,e)}function LA(t,e){const n={};return SS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sa(t,(i,a)=>{const l=Gu(a,e.Ac(i));l!=null&&(n[i]=l)}),{mapValue:{fields:n}}}function zA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof My||t instanceof Dl||t instanceof or||t instanceof Dy||t instanceof Oy)}function Ly(t,e,n){if(!zA(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const i=eg(n);throw i==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+i)}}function N0(t,e,n){if((e=Dt(e))instanceof ng)return e._internalPath;if(typeof e=="string")return zy(t,e);throw bf("Field path arguments must be of type string or ",t,!1,void 0,n)}const jP=new RegExp("[~\\*/\\[\\]]");function zy(t,e,n){if(e.search(jP)>=0)throw bf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ng(...e.split("."))._internalPath}catch{throw bf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function bf(t,e,n,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(l||c)&&(f+=" (found",l&&(f+=` in field ${i}`),c&&(f+=` in document ${a}`),f+=")"),new xe(me.INVALID_ARGUMENT,d+t+f)}function UA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n,i,a,l){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new or(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ig("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class HP extends BA{data(){return super.data()}}function ig(t,e){return typeof e=="string"?zy(t,e):e instanceof ng?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new xe(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uy{}class jA extends Uy{}function $P(t,e,...n){let i=[];e instanceof Uy&&i.push(e),i=i.concat(n),function(l){const c=l.filter(f=>f instanceof By).length,d=l.filter(f=>f instanceof sg).length;if(c>1||c>0&&d>0)throw new xe(me.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)t=a._apply(t);return t}class sg extends jA{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new sg(e,n,i)}_apply(e){const n=this._parse(e);return HA(e._query,n),new so(e.firestore,e.converter,y0(e._query,n))}_parse(e){const n=Vy(e.firestore);return function(l,c,d,f,p,y,v){let b;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new xe(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Ux(v,y);const I=[];for(const P of v)I.push(zx(f,l,P));b={arrayValue:{values:I}}}else b=zx(f,l,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Ux(v,y),b=BP(d,c,v,y==="in"||y==="not-in");return Ft.create(p,y,b)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function FP(t,e,n){const i=e,a=ig("where",t);return sg._create(a,i,n)}class By extends Uy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new By(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:jr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const f of d)HA(c,f),c=y0(c,f)}(e._query,n),new so(e.firestore,e.converter,y0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jy extends jA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new jy(e,n)}_apply(e){const n=function(a,l,c){if(a.startAt!==null)throw new xe(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new xe(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Iu(l,c)}(e._query,this._field,this._direction);return new so(e.firestore,e.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new zl(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,n))}}function GP(t,e="asc"){const n=e,i=ig("orderBy",t);return jy._create(i,n)}function zx(t,e,n){if(typeof(n=Dt(n))=="string"){if(n==="")throw new xe(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jS(e)&&n.indexOf("/")!==-1)throw new xe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(vt.fromString(n));if(!Ie.isDocumentKey(i))throw new xe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Jw(t,new Ie(i))}if(n instanceof or)return Jw(t,n._key);throw new xe(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${eg(n)}.`)}function Ux(t,e){if(!Array.isArray(t)||t.length===0)throw new xe(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function HA(t,e){const n=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new xe(me.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(me.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class YP{convertValue(e,n="none"){switch(na(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ta(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return sa(e,(a,l)=>{i[a]=this.convertValue(l,n)}),i}convertVectorValue(e){var n,i,a;const l=(a=(i=(n=e.fields)===null||n===void 0?void 0:n[hf].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(c=>Vt(c.doubleValue));return new Oy(l)}convertGeoPoint(e){return new My(Vt(e.latitude),Vt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=$f(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Au(e));default:return null}}convertTimestamp(e){const n=ea(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=vt.fromString(e);lt(cA(i),9688,{name:e});const a=new Ru(i.get(1),i.get(3)),l=new Ie(i.popFirst(5));return a.isEqual(n)||rs(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class KP extends BA{constructor(e,n,i,a,l,c){super(e,n,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $h(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(ig("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class $h extends KP{data(e={}){return super.data(e)}}class XP{constructor(e,n,i,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new kh(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new $h(this._firestore,this._userDataWriter,i.key,i,new kh(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new xe(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const f=new $h(a._firestore,a._userDataWriter,d.doc.key,d.doc,new kh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const f=new $h(a._firestore,a._userDataWriter,d.doc.key,d.doc,new kh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:QP(d.type),doc:f,oldIndex:p,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function QP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:t})}}class WP extends YP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,n)}}function Hy(t){t=Ja(t,so);const e=Ja(t.firestore,Fu),n=ky(e),i=new WP(e);return qP(t._query),CP(n,t._query).then(a=>new XP(e,i,t,a))}function qy(t,e,n){t=Ja(t,or);const i=Ja(t.firestore,Fu),a=qA(t.converter,e,n);return $y(i,[VA(Vy(i),"setDoc",t._key,a,t.converter!==null,n).toMutation(t._key,ar.none())])}function ZP(t){return $y(Ja(t.firestore,Fu),[new Xf(t._key,ar.none())])}function $y(t,e){return function(i,a){const l=new Xs;return i.asyncQueue.enqueueAndForget(async()=>mP(await NP(i),a,l)),l.promise}(ky(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Vy(e)}set(e,n,i){this._verifyNotCommitted();const a=Um(e,this._firestore),l=qA(a.converter,n,i),c=VA(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(c.toMutation(a._key,ar.none())),this}update(e,n,i,...a){this._verifyNotCommitted();const l=Um(e,this._firestore);let c;return c=typeof(n=Dt(n))=="string"||n instanceof ng?UP(this._dataReader,"WriteBatch.update",l._key,n,i,a):zP(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(c.toMutation(l._key,ar.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Um(e,this._firestore);return this._mutations=this._mutations.concat(new Xf(n._key,ar.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Um(t,e){if((t=Dt(t)).firestore!==e)throw new xe(me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(t){return ky(t=Ja(t,Fu)),new JP(t,e=>$y(t,e))}(function(e,n=!0){(function(a){Pl=a})(Ol),Qa(new Zs("firestore",(i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new Fu(new LO(i.getProvider("auth-internal")),new BO(c,i.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new xe(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ru(p.options.projectId,y)}(c,a),c);return l=Object.assign({useFetchStreams:n},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),mi(jw,Hw,e),mi(jw,Hw,"esm2017")})();function Fy(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n}function FA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eV=FA,GA=new Uu("auth","Firebase",FA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef=new iy("@firebase/auth");function tV(t,...e){Ef.logLevel<=Ke.WARN&&Ef.warn(`Auth (${Ol}): ${t}`,...e)}function Fh(t,...e){Ef.logLevel<=Ke.ERROR&&Ef.error(`Auth (${Ol}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(t,...e){throw Gy(t,...e)}function _i(t,...e){return Gy(t,...e)}function YA(t,e,n){const i=Object.assign(Object.assign({},eV()),{[e]:n});return new Uu("auth","Firebase",i).create(e,{appName:t.name})}function Ji(t){return YA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gy(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return GA.create(t,...e)}function De(t,e,...n){if(!t)throw Gy(e,...n)}function Wi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Fh(e),new Error(e)}function ss(t,e){t||Wi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function nV(){return Bx()==="http:"||Bx()==="https:"}function Bx(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nV()||h3()||"connection"in navigator)?navigator.onLine:!0}function iV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ss(n>e,"Short delay should be less than long delay!"),this.isMobile=c3()||f3()}get(){return rV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(t,e){ss(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oV=new Yu(3e4,6e4);function oa(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function la(t,e,n,i,a={}){return XA(t,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=Bu(Object.assign({key:t.config.apiKey},c)).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:f},l);return d3()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&no(t.emulatorConfig.host)&&(p.credentials="include"),KA.fetch()(await QA(t,t.config.apiHost,n,d),p)})}async function XA(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},sV),e);try{const a=new cV(t),l=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Dh(t,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[f,p]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dh(t,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw Dh(t,"email-already-in-use",c);if(f==="USER_DISABLED")throw Dh(t,"user-disabled",c);const y=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw YA(t,y,p);Hr(t,y)}}catch(a){if(a instanceof xi)throw a;Hr(t,"network-request-failed",{message:String(a)})}}async function Ku(t,e,n,i,a={}){const l=await la(t,e,n,i,a);return"mfaPendingCredential"in l&&Hr(t,"multi-factor-auth-required",{_serverResponse:l}),l}async function QA(t,e,n,i){const a=`${e}${n}?${i}`,l=t,c=l.config.emulator?Yy(t.config,a):`${t.config.apiScheme}://${a}`;return aV.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function lV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(_i(this.auth,"network-request-failed")),oV.get())})}}function Dh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const a=_i(t,e,i);return a.customData._tokenResponse=n,a}function jx(t){return t!==void 0&&t.enterprise!==void 0}class uV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return lV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function dV(t,e){return la(t,"GET","/v2/recaptchaConfig",oa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hV(t,e){return la(t,"POST","/v1/accounts:delete",e)}async function wf(t,e){return la(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fV(t,e=!1){const n=Dt(t),i=await n.getIdToken(e),a=Ky(i);De(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:i,authTime:hu(Bm(a.auth_time)),issuedAtTime:hu(Bm(a.iat)),expirationTime:hu(Bm(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Bm(t){return Number(t)*1e3}function Ky(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Fh("JWT malformed, contained fewer than 3 sections"),null;try{const a=iS(n);return a?JSON.parse(a):(Fh("Failed to decode base64 JWT payload"),null)}catch(a){return Fh("Caught error parsing JWT payload as JSON",a?.toString()),null}}function Hx(t){const e=Ky(t);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Du(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof xi&&gV(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function gV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hu(this.lastLoginAt),this.creationTime=hu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xf(t){var e;const n=t.auth,i=await t.getIdToken(),a=await Du(t,wf(n,{idToken:i}));De(a?.users.length,n,"internal-error");const l=a.users[0];t._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?WA(l.providerUserInfo):[],d=yV(t.providerData,c),f=t.isAnonymous,p=!(t.email&&l.passwordHash)&&!d?.length,y=f?p:!1,v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new C0(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(t,v)}async function mV(t){const e=Dt(t);await xf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yV(t,e){return[...t.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function WA(t){return t.map(e=>{var{providerId:n}=e,i=Fy(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vV(t,e){const n=await XA(t,{},async()=>{const i=Bu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=t.config,c=await QA(t,a,"/v1/token",`key=${l}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:i};return t.emulatorConfig&&no(t.emulatorConfig.host)&&(f.credentials="include"),KA.fetch()(c,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _V(t,e){return la(t,"POST","/v2/accounts:revokeToken",oa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Hx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){De(e.length!==0,"internal-error");const n=Hx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:a,expiresIn:l}=await vV(e,n);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:a,expirationTime:l}=n,c=new _l;return i&&(De(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(De(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(De(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _l,this.toJSON())}_performRefresh(){return Wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(t,e){De(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ur{constructor(e){var{uid:n,auth:i,stsTokenManager:a}=e,l=Fy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new C0(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await Du(this,this.stsTokenManager.getToken(this.auth,e));return De(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return fV(this,e)}reload(){return mV(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ur(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await xf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ir(this.auth.app))return Promise.reject(Ji(this.auth));const e=await this.getIdToken();return await Du(this,hV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,a,l,c,d,f,p,y;const v=(i=n.displayName)!==null&&i!==void 0?i:void 0,b=(a=n.email)!==null&&a!==void 0?a:void 0,x=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,I=(c=n.photoURL)!==null&&c!==void 0?c:void 0,P=(d=n.tenantId)!==null&&d!==void 0?d:void 0,O=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,B=(p=n.createdAt)!==null&&p!==void 0?p:void 0,q=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:G,emailVerified:j,isAnonymous:W,providerData:X,stsTokenManager:A}=n;De(G&&A,e,"internal-error");const T=_l.fromJSON(this.name,A);De(typeof G=="string",e,"internal-error"),Ms(v,e.name),Ms(b,e.name),De(typeof j=="boolean",e,"internal-error"),De(typeof W=="boolean",e,"internal-error"),Ms(x,e.name),Ms(I,e.name),Ms(P,e.name),Ms(O,e.name),Ms(B,e.name),Ms(q,e.name);const N=new Ur({uid:G,auth:e,email:b,emailVerified:j,displayName:v,isAnonymous:W,photoURL:I,phoneNumber:x,tenantId:P,stsTokenManager:T,createdAt:B,lastLoginAt:q});return X&&Array.isArray(X)&&(N.providerData=X.map(U=>Object.assign({},U))),O&&(N._redirectEventId=O),N}static async _fromIdTokenResponse(e,n,i=!1){const a=new _l;a.updateFromServerResponse(n);const l=new Ur({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await xf(l),l}static async _fromGetAccountInfoResponse(e,n,i){const a=n.users[0];De(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?WA(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new _l;d.updateFromIdToken(i);const f=new Ur({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new C0(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(f,p),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=new Map;function Zi(t){ss(t instanceof Function,"Expected a class definition");let e=qx.get(t);return e?(ss(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,qx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ZA.type="NONE";const $x=ZA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(t,e,n){return`firebase:${t}:${e}:${n}`}class bl{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=Gh(this.userKey,a.apiKey,l),this.fullPersistenceKey=Gh("persistence",a.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await wf(this.auth,{idToken:e}).catch(()=>{});return n?Ur._fromGetAccountInfoResponse(this.auth,n,e):null}return Ur._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new bl(Zi($x),e,i);const a=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||Zi($x);const c=Gh(i,e.config.apiKey,e.name);let d=null;for(const p of n)try{const y=await p._get(c);if(y){let v;if(typeof y=="string"){const b=await wf(e,{idToken:y}).catch(()=>{});if(!b)break;v=await Ur._fromGetAccountInfoResponse(e,b,y)}else v=Ur._fromJSON(e,y);p!==l&&(d=v),l=p;break}}catch{}const f=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!f.length?new bl(l,e,i):(l=f[0],d&&await l._set(c,d.toJSON()),await Promise.all(n.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new bl(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(n2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(JA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(i2(e))return"Blackberry";if(s2(e))return"Webos";if(e2(e))return"Safari";if((e.includes("chrome/")||t2(e))&&!e.includes("edge/"))return"Chrome";if(r2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function JA(t=Sn()){return/firefox\//i.test(t)}function e2(t=Sn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function t2(t=Sn()){return/crios\//i.test(t)}function n2(t=Sn()){return/iemobile/i.test(t)}function r2(t=Sn()){return/android/i.test(t)}function i2(t=Sn()){return/blackberry/i.test(t)}function s2(t=Sn()){return/webos/i.test(t)}function Xy(t=Sn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bV(t=Sn()){var e;return Xy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function EV(){return g3()&&document.documentMode===10}function a2(t=Sn()){return Xy(t)||r2(t)||s2(t)||i2(t)||/windows phone/i.test(t)||n2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(t,e=[]){let n;switch(t){case"Browser":n=Fx(Sn());break;case"Worker":n=`${Fx(Sn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ol}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=l=>new Promise((c,d)=>{try{const f=e(l);c(f)}catch(f){d(f)}});i.onAbort=n,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xV(t,e={}){return la(t,"GET","/v2/passwordPolicy",oa(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV=6;class SV{constructor(e){var n,i,a,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:TV,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,a,l,c,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(n=f.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(i=f.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(a=f.containsLowercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(l=f.containsUppercaseLetter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(c=f.containsNumericCharacter)!==null&&c!==void 0?c:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e,n,i,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gx(this),this.idTokenSubscription=new Gx(this),this.beforeStateQueue=new wV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Zi(n)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await bl.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wf(this,{idToken:e}),i=await Ur._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ir(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=a?._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===d)&&f?.user&&(a=f.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await xf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ir(this.app))return Promise.reject(Ji(this));const n=e?Dt(e):null;return n&&De(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ir(this.app)?Promise.reject(Ji(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ir(this.app)?Promise.reject(Ji(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xV(this),n=new SV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Uu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await _V(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Zi(e)||this._popupRedirectResolver;De(n,this,"argument-error"),this.redirectPersistenceManager=await bl.create(this,[Zi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,a){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,i,a);return()=>{c=!0,f()}}else{const f=e.addObserver(n);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=o2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(n["X-Firebase-AppCheck"]=a),n}async _getAppCheckToken(){var e;if(ir(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&tV(`Error while retrieving App Check token: ${n.error}`),n?.token}}function ao(t){return Dt(t)}class Gx{constructor(e){this.auth=e,this.observer=null,this.addObserver=w3(n=>this.observer=n)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ag={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RV(t){ag=t}function l2(t){return ag.loadJS(t)}function NV(){return ag.recaptchaEnterpriseScript}function IV(){return ag.gapiScript}function CV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class kV{constructor(){this.enterprise=new DV}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class DV{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const MV="recaptcha-enterprise",c2="NO_RECAPTCHA";class OV{constructor(e){this.type=MV,this.auth=ao(e)}async verify(e="verify",n=!1){async function i(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{dV(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const p=new uV(f);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,c(p.siteKey)}}).catch(f=>{d(f)})})}function a(l,c,d){const f=window.grecaptcha;jx(f)?f.enterprise.ready(()=>{f.enterprise.execute(l,{action:e}).then(p=>{c(p)}).catch(()=>{c(c2)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new kV().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(d=>{if(!n&&jx(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=NV();f.length!==0&&(f+=d),l2(f).then(()=>{a(d,l,c)}).catch(p=>{c(p)})}}).catch(d=>{c(d)})})}}async function Yx(t,e,n,i=!1,a=!1){const l=new OV(t);let c;if(a)c=c2;else try{c=await l.verify(n)}catch{c=await l.verify(n,!0)}const d=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,p=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function k0(t,e,n,i,a){var l;if(!((l=t._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Yx(t,e,n,n==="getOobCode");return i(t,c)}else return i(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Yx(t,e,n,n==="getOobCode");return i(t,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PV(t,e){const n=jf(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),l=n.getOptions();if(Xa(l,e??{}))return a;Hr(a,"already-initialized")}return n.initialize({options:e})}function VV(t,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Zi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}function LV(t,e,n){const i=ao(t);De(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=u2(e),{host:c,port:d}=zV(e),f=d===null?"":`:${d}`,p={url:`${l}//${c}${f}/`},y=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){De(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),De(Xa(p,i.config.emulator)&&Xa(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,no(c)?(ny(`${l}//${c}${f}`),ry("Auth",!0)):UV()}function u2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function zV(t){const e=u2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:Kx(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:Kx(c)}}}function Kx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function UV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wi("not implemented")}_getIdTokenResponse(e){return Wi("not implemented")}_linkToIdToken(e,n){return Wi("not implemented")}_getReauthenticationResolver(e){return Wi("not implemented")}}async function BV(t,e){return la(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jV(t,e){return Ku(t,"POST","/v1/accounts:signInWithPassword",oa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HV(t,e){return Ku(t,"POST","/v1/accounts:signInWithEmailLink",oa(t,e))}async function qV(t,e){return Ku(t,"POST","/v1/accounts:signInWithEmailLink",oa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu extends Qy{constructor(e,n,i,a=null){super("password",i),this._email=e,this._password=n,this._tenantId=a}static _fromEmailAndPassword(e,n){return new Mu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Mu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return k0(e,n,"signInWithPassword",jV);case"emailLink":return HV(e,{email:this._email,oobCode:this._password});default:Hr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return k0(e,i,"signUpPassword",BV);case"emailLink":return qV(e,{idToken:n,email:this._email,oobCode:this._password});default:Hr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(t,e){return Ku(t,"POST","/v1/accounts:signInWithIdp",oa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V="http://localhost";class eo extends Qy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Hr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a}=n,l=Fy(n,["providerId","signInMethod"]);if(!i||!a)return null;const c=new eo(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return El(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,El(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,El(e,n)}buildRequest(){const e={requestUri:$V,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Bu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function GV(t){const e=nu(ru(t)).link,n=e?nu(ru(e)).deep_link_id:null,i=nu(ru(t)).deep_link_id;return(i?nu(ru(i)).link:null)||i||n||e||t}class Wy{constructor(e){var n,i,a,l,c,d;const f=nu(ru(e)),p=(n=f.apiKey)!==null&&n!==void 0?n:null,y=(i=f.oobCode)!==null&&i!==void 0?i:null,v=FV((a=f.mode)!==null&&a!==void 0?a:null);De(p&&y&&v,"argument-error"),this.apiKey=p,this.operation=v,this.code=y,this.continueUrl=(l=f.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=f.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=f.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const n=GV(e);try{return new Wy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(){this.providerId=jl.PROVIDER_ID}static credential(e,n){return Mu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Wy.parseLink(n);return De(i,"argument-error"),Mu._fromEmailAndCode(e,i.code,i.tenantId)}}jl.PROVIDER_ID="password";jl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";jl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu extends d2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends Xu{constructor(){super("facebook.com")}static credential(e){return eo._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Us.credential(e.oauthAccessToken)}catch{return null}}}Us.FACEBOOK_SIGN_IN_METHOD="facebook.com";Us.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends Xu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return eo._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Bs.credential(n,i)}catch{return null}}}Bs.GOOGLE_SIGN_IN_METHOD="google.com";Bs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends Xu{constructor(){super("github.com")}static credential(e){return eo._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return js.credential(e.oauthAccessToken)}catch{return null}}}js.GITHUB_SIGN_IN_METHOD="github.com";js.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends Xu{constructor(){super("twitter.com")}static credential(e,n){return eo._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Hs.credential(n,i)}catch{return null}}}Hs.TWITTER_SIGN_IN_METHOD="twitter.com";Hs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YV(t,e){return Ku(t,"POST","/v1/accounts:signUp",oa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,a=!1){const l=await Ur._fromIdTokenResponse(e,i,a),c=Xx(i);return new to({user:l,providerId:c,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const a=Xx(i);return new to({user:e,providerId:a,_tokenResponse:i,operationType:n})}}function Xx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf extends xi{constructor(e,n,i,a){var l;super(n.code,n.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Tf.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,a){return new Tf(e,n,i,a)}}function h2(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Tf._fromErrorAndOperation(t,l,e,i):l})}async function KV(t,e,n=!1){const i=await Du(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return to._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XV(t,e,n=!1){const{auth:i}=t;if(ir(i.app))return Promise.reject(Ji(i));const a="reauthenticate";try{const l=await Du(t,h2(i,a,e,t),n);De(l.idToken,i,"internal-error");const c=Ky(l.idToken);De(c,i,"internal-error");const{sub:d}=c;return De(t.uid===d,i,"user-mismatch"),to._forOperation(t,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Hr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f2(t,e,n=!1){if(ir(t.app))return Promise.reject(Ji(t));const i="signIn",a=await h2(t,i,e),l=await to._fromIdTokenResponse(t,i,a);return n||await t._updateCurrentUser(l.user),l}async function QV(t,e){return f2(ao(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g2(t){const e=ao(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function WV(t,e,n){if(ir(t.app))return Promise.reject(Ji(t));const i=ao(t),c=await k0(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YV).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&g2(t),f}),d=await to._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(d.user),d}function ZV(t,e,n){return ir(t.app)?Promise.reject(Ji(t)):QV(Dt(t),jl.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&g2(t),i})}function JV(t,e,n,i){return Dt(t).onIdTokenChanged(e,n,i)}function e9(t,e,n){return Dt(t).beforeAuthStateChanged(e,n)}function t9(t,e,n,i){return Dt(t).onAuthStateChanged(e,n,i)}function n9(t){return Dt(t).signOut()}const Sf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sf,"1"),this.storage.removeItem(Sf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9=1e3,i9=10;class m2 extends p2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=a2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),a=this.localCache[n];i!==a&&e(n,a,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,d,f)=>{this.notifyListeners(c,f)});return}const i=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!n&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);EV()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,i9):a()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},r9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}m2.type="LOCAL";const s9=m2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2 extends p2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}y2.type="SESSION";const v2=y2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const i=new og(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:a,data:l}=n.data,c=this.handlersMap[a];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(c).map(async p=>p(n.origin,l)),f=await a9(d);n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}og.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,f)=>{const p=Zy("",20);a.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(v){const b=v;if(b.data.eventId===p)switch(b.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(b.data.response);break;default:clearTimeout(y),clearTimeout(l),f(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(){return window}function l9(t){bi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(){return typeof bi().WorkerGlobalScope<"u"&&typeof bi().importScripts=="function"}async function c9(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function u9(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function d9(){return _2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2="firebaseLocalStorageDb",h9=1,Af="firebaseLocalStorage",E2="fbase_key";class Qu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function lg(t,e){return t.transaction([Af],e?"readwrite":"readonly").objectStore(Af)}function f9(){const t=indexedDB.deleteDatabase(b2);return new Qu(t).toPromise()}function D0(){const t=indexedDB.open(b2,h9);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Af,{keyPath:E2})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Af)?e(i):(i.close(),await f9(),e(await D0()))})})}async function Qx(t,e,n){const i=lg(t,!0).put({[E2]:e,value:n});return new Qu(i).toPromise()}async function g9(t,e){const n=lg(t,!1).get(e),i=await new Qu(n).toPromise();return i===void 0?null:i.value}function Wx(t,e){const n=lg(t,!0).delete(e);return new Qu(n).toPromise()}const p9=800,m9=3;class w2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await D0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>m9)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=og._getInstance(d9()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await c9(),!this.activeServiceWorker)return;this.sender=new o9(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||u9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await D0();return await Qx(e,Sf,"1"),await Wx(e,Sf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Qx(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>g9(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Wx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=lg(a,!1).getAll();return new Qu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),p9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}w2.type="LOCAL";const y9=w2;new Yu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v9(t,e){return e?Zi(e):(De(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy extends Qy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return El(e,this._buildIdpRequest())}_linkToIdToken(e,n){return El(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return El(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _9(t){return f2(t.auth,new Jy(t),t.bypassAuthState)}function b9(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),XV(n,new Jy(t),t.bypassAuthState)}async function E9(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),KV(n,new Jy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:n,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _9;case"linkViaPopup":case"linkViaRedirect":return E9;case"reauthViaPopup":case"reauthViaRedirect":return b9;default:Hr(this.auth,"internal-error")}}resolve(e){ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w9=new Yu(2e3,1e4);class hl extends x2{constructor(e,n,i,a,l){super(e,n,a,l),this.provider=i,this.authWindow=null,this.pollId=null,hl.currentPopupAction&&hl.currentPopupAction.cancel(),hl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){ss(this.filter.length===1,"Popup operations only handle one event");const e=Zy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_i(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_i(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_i(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,w9.get())};e()}}hl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9="pendingRedirect",Yh=new Map;class T9 extends x2{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Yh.get(this.auth._key());if(!e){try{const i=await S9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Yh.set(this.auth._key(),e)}return this.bypassAuthState||Yh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function S9(t,e){const n=N9(e),i=R9(t);if(!await i._isAvailable())return!1;const a=await i._get(n)==="true";return await i._remove(n),a}function A9(t,e){Yh.set(t._key(),e)}function R9(t){return Zi(t._redirectPersistence)}function N9(t){return Gh(x9,t.config.apiKey,t.name)}async function I9(t,e,n=!1){if(ir(t.app))return Promise.reject(Ji(t));const i=ao(t),a=v9(i,e),c=await new T9(i,a,n).execute();return c&&!n&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C9=10*60*1e3;class k9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!D9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!T2(e)){const a=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(_i(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=C9&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zx(e))}saveEventToCache(e){this.cachedEventUids.add(Zx(e)),this.lastProcessedEventTime=Date.now()}}function Zx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function T2({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function D9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return T2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M9(t,e={}){return la(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,P9=/^https?/;async function V9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await M9(t);for(const n of e)try{if(L9(n))return}catch{}Hr(t,"unauthorized-domain")}function L9(t){const e=I0(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===i}if(!P9.test(n))return!1;if(O9.test(t))return i===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z9=new Yu(3e4,6e4);function Jx(){const t=bi().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function U9(t){return new Promise((e,n)=>{var i,a,l;function c(){Jx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Jx(),n(_i(t,"network-request-failed"))},timeout:z9.get()})}if(!((a=(i=bi().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=bi().gapi)===null||l===void 0)&&l.load)c();else{const d=CV("iframefcb");return bi()[d]=()=>{gapi.load?c():n(_i(t,"network-request-failed"))},l2(`${IV()}?onload=${d}`).catch(f=>n(f))}}).catch(e=>{throw Kh=null,e})}let Kh=null;function B9(t){return Kh=Kh||U9(t),Kh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j9=new Yu(5e3,15e3),H9="__/auth/iframe",q9="emulator/auth/iframe",$9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},F9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function G9(t){const e=t.config;De(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Yy(e,q9):`https://${t.config.authDomain}/${H9}`,i={apiKey:e.apiKey,appName:t.name,v:Ol},a=F9.get(t.config.apiHost);a&&(i.eid=a);const l=t._getFrameworks();return l.length&&(i.fw=l.join(",")),`${n}?${Bu(i).slice(1)}`}async function Y9(t){const e=await B9(t),n=bi().gapi;return De(n,t,"internal-error"),e.open({where:document.body,url:G9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$9,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=_i(t,"network-request-failed"),d=bi().setTimeout(()=>{l(c)},j9.get());function f(){bi().clearTimeout(d),a(i)}i.ping(f).then(f,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},X9=500,Q9=600,W9="_blank",Z9="http://localhost";class e1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function J9(t,e,n,i=X9,a=Q9){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const f=Object.assign(Object.assign({},K9),{width:i.toString(),height:a.toString(),top:l,left:c}),p=Sn().toLowerCase();n&&(d=t2(p)?W9:n),JA(p)&&(e=e||Z9,f.scrollbars="yes");const y=Object.entries(f).reduce((b,[x,I])=>`${b}${x}=${I},`,"");if(bV(p)&&d!=="_self")return eL(e||"",d),new e1(null);const v=window.open(e||"",d,y);De(v,t,"popup-blocked");try{v.focus()}catch{}return new e1(v)}function eL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL="__/auth/handler",nL="emulator/auth/handler",rL=encodeURIComponent("fac");async function t1(t,e,n,i,a,l){De(t.config.authDomain,t,"auth-domain-config-required"),De(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Ol,eventId:a};if(e instanceof d2){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",E3(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))c[y]=v}if(e instanceof Xu){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(c.scopes=y.join(","))}t.tenantId&&(c.tid=t.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const f=await t._getAppCheckToken(),p=f?`#${rL}=${encodeURIComponent(f)}`:"";return`${iL(t)}?${Bu(d).slice(1)}${p}`}function iL({config:t}){return t.emulator?Yy(t,nL):`https://${t.authDomain}/${tL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="webStorageSupport";class sL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=v2,this._completeRedirectFn=I9,this._overrideRedirectResult=A9}async _openPopup(e,n,i,a){var l;ss((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await t1(e,n,i,I0(),a);return J9(e,c,Zy())}async _openRedirect(e,n,i,a){await this._originValidation(e);const l=await t1(e,n,i,I0(),a);return l9(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:l}=this.eventManagers[n];return a?Promise.resolve(a):(ss(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await Y9(e),i=new k9(e);return n.register("authEvent",a=>(De(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(jm,{type:jm},a=>{var l;const c=(l=a?.[0])===null||l===void 0?void 0:l[jm];c!==void 0&&n(!!c),Hr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=V9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return a2()||e2()||Xy()}}const aL=sL;var n1="@firebase/auth",r1="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cL(t){Qa(new Zs("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;De(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:c,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:o2(t)},p=new AV(i,a,l,f);return VV(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Qa(new Zs("auth-internal",e=>{const n=ao(e.getProvider("auth").getImmediate());return(i=>new oL(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),mi(n1,r1,lL(t)),mi(n1,r1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL=5*60,dL=lS("authIdTokenMaxAge")||uL;let i1=null;const hL=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>dL)return;const a=n?.token;i1!==a&&(i1=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function fL(t=ay()){const e=jf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=PV(t,{popupRedirectResolver:aL,persistence:[y9,s9,v2]}),i=lS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=hL(l.toString());e9(n,c,()=>c(n.currentUser)),JV(n,d=>c(d))}}const a=sS("auth");return a&&LV(n,`http://${a}`),n}function gL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}RV({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=a=>{const l=_i("internal-error");l.customData=a,n(l)},i.type="text/javascript",i.charset="UTF-8",gL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cL("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL="type.googleapis.com/google.protobuf.Int64Value",mL="type.googleapis.com/google.protobuf.UInt64Value";function S2(t,e){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function Rf(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Rf(e));if(typeof t=="function"||typeof t=="object")return S2(t,e=>Rf(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Ml(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case pL:case mL:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Ml(e)):typeof t=="function"||typeof t=="object"?S2(t,e=>Ml(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $n extends xi{constructor(e,n,i){super(`${ev}/${e}`,n||""),this.details=i,Object.setPrototypeOf(this,$n.prototype)}}function yL(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Nf(t,e){let n=yL(t),i=n,a;try{const l=e&&e.error;if(l){const c=l.status;if(typeof c=="string"){if(!s1[c])return new $n("internal","internal");n=s1[c],i=c}const d=l.message;typeof d=="string"&&(i=d),a=l.details,a!==void 0&&(a=Ml(a))}}catch{}return n==="ok"?null:new $n(n,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e,n,i,a){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ir(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||n.get().then(l=>this.auth=l,()=>{}),this.messaging||i.get().then(l=>this.messaging=l,()=>{}),this.appCheck||a?.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),i=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="us-central1",_L=/^data: (.*?)(?:\n|$)/;function bL(t){let e=null;return{promise:new Promise((n,i)=>{e=setTimeout(()=>{i(new $n("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class EL{constructor(e,n,i,a,l=M0,c=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new vL(e,n,i,a),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(l);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=M0}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function wL(t,e,n){const i=no(e);t.emulatorOrigin=`http${i?"s":""}://${e}:${n}`,i&&(ny(t.emulatorOrigin),ry("Functions",!0))}function xL(t,e,n){const i=a=>SL(t,e,a,{});return i.stream=(a,l)=>RL(t,e,a,l),i}async function TL(t,e,n,i){n["Content-Type"]="application/json";let a;try{a=await i(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let l=null;try{l=await a.json()}catch{}return{status:a.status,json:l}}async function A2(t,e){const n={},i=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(n.Authorization="Bearer "+i.authToken),i.messagingToken&&(n["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=i.appCheckToken),n}function SL(t,e,n,i){const a=t._url(e);return AL(t,a,n,i)}async function AL(t,e,n,i){n=Rf(n);const a={data:n},l=await A2(t,i),c=i.timeout||7e4,d=bL(c),f=await Promise.race([TL(e,a,l,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!f)throw new $n("cancelled","Firebase Functions instance was deleted.");const p=Nf(f.status,f.json);if(p)throw p;if(!f.json)throw new $n("internal","Response is not valid JSON object.");let y=f.json.data;if(typeof y>"u"&&(y=f.json.result),typeof y>"u")throw new $n("internal","Response is missing data field.");return{data:Ml(y)}}function RL(t,e,n,i){const a=t._url(e);return NL(t,a,n,i||{})}async function NL(t,e,n,i){var a;n=Rf(n);const l={data:n},c=await A2(t,i);c["Content-Type"]="application/json",c.Accept="text/event-stream";let d;try{d=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(l),headers:c,signal:i?.signal})}catch(x){if(x instanceof Error&&x.name==="AbortError"){const P=new $n("cancelled","Request was cancelled.");return{data:Promise.reject(P),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(P)}}}}}}const I=Nf(0,null);return{data:Promise.reject(I),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(I)}}}}}}let f,p;const y=new Promise((x,I)=>{f=x,p=I});(a=i?.signal)===null||a===void 0||a.addEventListener("abort",()=>{const x=new $n("cancelled","Request was cancelled.");p(x)});const v=d.body.getReader(),b=IL(v,f,p,i?.signal);return{stream:{[Symbol.asyncIterator](){const x=b.getReader();return{async next(){const{value:I,done:P}=await x.read();return{value:I,done:P}},async return(){return await x.cancel(),{done:!0,value:void 0}}}}},data:y}}function IL(t,e,n,i){const a=(c,d)=>{const f=c.match(_L);if(!f)return;const p=f[1];try{const y=JSON.parse(p);if("result"in y){e(Ml(y.result));return}if("message"in y){d.enqueue(Ml(y.message));return}if("error"in y){const v=Nf(0,y);d.error(v),n(v);return}}catch(y){if(y instanceof $n){d.error(y),n(y);return}}},l=new TextDecoder;return new ReadableStream({start(c){let d="";return f();async function f(){if(i?.aborted){const p=new $n("cancelled","Request was cancelled");return c.error(p),n(p),Promise.resolve()}try{const{value:p,done:y}=await t.read();if(y){d.trim()&&a(d.trim(),c),c.close();return}if(i?.aborted){const b=new $n("cancelled","Request was cancelled");c.error(b),n(b),await t.cancel();return}d+=l.decode(p,{stream:!0});const v=d.split(`
`);d=v.pop()||"";for(const b of v)b.trim()&&a(b.trim(),c);return f()}catch(p){const y=p instanceof $n?p:Nf(0,null);c.error(y),n(y)}}},cancel(){return t.cancel()}})}const a1="@firebase/functions",o1="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL="auth-internal",kL="app-check-internal",DL="messaging-internal";function ML(t){const e=(n,{instanceIdentifier:i})=>{const a=n.getProvider("app").getImmediate(),l=n.getProvider(CL),c=n.getProvider(DL),d=n.getProvider(kL);return new EL(a,l,c,d,i)};Qa(new Zs(ev,e,"PUBLIC").setMultipleInstances(!0)),mi(a1,o1,t),mi(a1,o1,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(t=ay(),e=M0){const i=jf(Dt(t),ev).getImmediate({identifier:e}),a=aS("functions");return a&&R2(i,...a),i}function R2(t,e,n){wL(Dt(t),e,n)}function N2(t,e,n){return xL(Dt(t),e)}ML();const PL={apiKey:"AIzaSyAO9TXM7A0SNeiEXzYo27fW0wdTXqXDEyc",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},tv=dS(PL),qr=MP(tv),If=fL(tv),nv=OL(tv,"us-central1");R2(nv,"localhost",5001);const cr={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},On={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function VL(){const[t,e]=F.useState(""),[n,i]=F.useState(""),[a,l]=F.useState(!1),[c,d]=F.useState(!1),[f,p]=F.useState(""),y=async b=>{b.preventDefault(),d(!0),p("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(On.INVALID_EMAIL);if(n.length<6)throw new Error(On.WEAK_PASSWORD);const I=await WV(If,t,n);console.log("User created successfully:",I.user.uid)}catch(x){console.error("Sign up error:",x);let I="Failed to create account";x.code==="auth/email-already-in-use"?I=On.EMAIL_IN_USE:x.code==="auth/invalid-email"?I=On.INVALID_EMAIL:x.code==="auth/weak-password"?I=On.WEAK_PASSWORD:x.code==="auth/operation-not-allowed"?I="Email/password accounts are not enabled. Please contact support.":x.message&&(I=x.message),p(I)}finally{d(!1)}},v=async b=>{b.preventDefault(),d(!0),p("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(On.INVALID_EMAIL);const I=await ZV(If,t,n);console.log("User signed in successfully:",I.user.uid)}catch(x){console.error("Sign in error:",x);let I="Failed to sign in";x.code==="auth/user-not-found"?I=On.USER_NOT_FOUND:x.code==="auth/wrong-password"?I=On.WRONG_PASSWORD:x.code==="auth/invalid-email"?I=On.INVALID_EMAIL:x.code==="auth/user-disabled"?I="This account has been disabled. Please contact support.":x.code==="auth/too-many-requests"?I=On.TOO_MANY_REQUESTS:x.message&&(I=x.message),p(I)}finally{d(!1)}};return R.jsx("div",{className:"fixed inset-0 bg-[#1a1a1d]/90 dark:bg-[#1a1a1d]/90 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:R.jsxs("div",{className:`bg-[#222226] dark:bg-[#222226] rounded-2xl shadow-[0_24px_48px_rgba(0,0,0,0.7),0_10px_20px_rgba(0,0,0,0.5)] 
                          p-8 w-full max-w-md border border-white/12 dark:border-white/12`,children:[R.jsxs("div",{className:"text-center mb-8",children:[R.jsx("div",{className:"flex items-center justify-center mb-4",children:R.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center",children:R.jsx("span",{className:"text-white font-bold text-lg",children:"T"})})}),R.jsx("h2",{className:"text-2xl font-bold text-[#f8faff] dark:text-[#f8faff] mb-2",children:a?"Join TinkFlow":"Welcome Back"}),R.jsx("p",{className:"text-[#b0b3b8] dark:text-[#b0b3b8] text-sm",children:a?"Start your AI-powered learning journey":"Continue exploring concepts with AI"})]}),R.jsxs("form",{onSubmit:a?y:v,className:"space-y-6",children:[R.jsx("div",{children:R.jsx("input",{type:"email",placeholder:"Email address",value:t,onChange:b=>e(b.target.value),required:!0,className:`w-full px-4 py-3 bg-[#2a2a2e] dark:bg-[#2a2a2e] border border-white/15 dark:border-white/15 
                                     rounded-lg text-[#f8faff] dark:text-[#f8faff] placeholder-[#8b949e] dark:placeholder-[#8b949e] 
                                     focus:outline-none focus:border-[#5a9cf8] dark:focus:border-[#5a9cf8] focus:shadow-[0_0_0_3px_rgba(90,156,248,0.25)]
                                     transition-all duration-200`})}),R.jsx("div",{children:R.jsx("input",{type:"password",placeholder:"Password",value:n,onChange:b=>i(b.target.value),required:!0,className:`w-full px-4 py-3 bg-[#2a2a2e] dark:bg-[#2a2a2e] border border-white/15 dark:border-white/15 
                                     rounded-lg text-[#f8faff] dark:text-[#f8faff] placeholder-[#8b949e] dark:placeholder-[#8b949e] 
                                     focus:outline-none focus:border-[#5a9cf8] dark:focus:border-[#5a9cf8] focus:shadow-[0_0_0_3px_rgba(90,156,248,0.25)]
                                     transition-all duration-200`})}),R.jsx("button",{type:"submit",disabled:c,className:`w-full py-3 px-4 rounded-lg font-semibold text-white transition-all duration-200 
                                   ${c?"bg-[#3a3a3e] dark:bg-[#3a3a3e] cursor-not-allowed opacity-60":"bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 active:from-indigo-700 active:to-purple-800 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"}
                                   focus:outline-none focus:shadow-[0_0_0_3px_rgba(99,102,241,0.4)]`,children:c?R.jsx("div",{className:"inline-block w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):a?"Create Account":"Sign In"}),f&&R.jsx("div",{className:`bg-red-900/20 dark:bg-red-900/30 border border-red-500/30 dark:border-red-500/40 
                                       rounded-lg p-3 text-red-400 dark:text-red-400 text-sm`,children:f})]}),R.jsxs("div",{className:"auth-switch text-center mt-6",children:[R.jsx("span",{className:"auth-switch-text text-gray-400 dark:text-gray-400 text-sm",children:a?"Already have an account?":"Don't have an account?"}),R.jsx("button",{type:"button",onClick:()=>l(!a),className:`auth-switch-btn ml-2 text-blue-400 dark:text-blue-400 hover:text-blue-300 dark:hover:text-blue-300 
                                 text-sm font-medium transition-colors duration-200 bg-transparent border-none cursor-pointer`,children:a?"Sign In":"Sign Up"})]})]})})}function LL({show:t,onHide:e,onConfirm:n,isCreating:i=!1}){const[a,l]=F.useState(""),[c,d]=F.useState(!0),f=b=>{const x=b.target.value;l(x),d(x.trim().length>0&&x.trim().length<=50)},p=b=>{b.preventDefault();const x=a.trim();x.length>0&&x.length<=50&&(n(x),l(""),d(!0))},y=()=>{l(""),d(!0),e()},v=b=>{b.key==="Enter"&&p(b)};return t?R.jsx("div",{className:"board-name-modal fixed inset-0 bg-black/60 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-[2001]",children:R.jsxs("div",{className:"bg-gray-800 dark:bg-gray-900 rounded-xl shadow-2xl p-6 w-full max-w-md border border-gray-700 dark:border-gray-600",children:[R.jsxs("div",{className:"flex justify-between items-center mb-6",children:[R.jsx("h3",{className:"text-lg font-semibold text-white dark:text-white",children:"Create New Board"}),R.jsx("button",{onClick:y,className:`text-gray-400 dark:text-gray-400 hover:text-gray-200 dark:hover:text-gray-200 
                                 bg-gray-700/50 dark:bg-gray-800/50 hover:bg-gray-600/50 dark:hover:bg-gray-700/50
                                 border border-gray-600 dark:border-gray-700 rounded-lg w-8 h-8 flex items-center justify-center
                                 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500/20`,"aria-label":"Close",children:""})]}),R.jsxs("form",{onSubmit:p,className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-300 dark:text-gray-300 mb-2",children:"Board Name"}),R.jsx("input",{type:"text",value:a,onChange:f,onKeyDown:v,placeholder:"Enter board name...",maxLength:50,autoFocus:!0,className:`w-full px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border rounded-lg 
                                       text-white dark:text-white placeholder-gray-400 dark:placeholder-gray-500 
                                       focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40 
                                       transition-all duration-200 font-medium
                                       ${c?"border-gray-600/50 dark:border-gray-700/50 focus:border-blue-500/60 dark:focus:border-blue-400/60":"border-red-500/60 dark:border-red-500/60 focus:border-red-500/60 dark:focus:border-red-500/60"}`}),!c&&R.jsx("p",{className:"text-red-400 dark:text-red-400 text-sm mt-2",children:"Board name must be between 1 and 50 characters long."}),R.jsxs("p",{className:`text-xs mt-1 ${a.length===50?"text-red-400 dark:text-red-400":"text-gray-500 dark:text-gray-500"}`,children:[a.length,"/50 characters"]})]}),R.jsxs("div",{className:"flex gap-3 pt-4",children:[R.jsx("button",{type:"button",onClick:y,disabled:i,className:`flex-1 px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border border-gray-600/50 dark:border-gray-700/50
                                     text-gray-300 dark:text-gray-300 rounded-lg font-medium transition-all duration-200
                                     hover:bg-gray-600/60 dark:hover:bg-gray-700/60 hover:border-gray-500/60 dark:hover:border-gray-600/60
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20`,children:"Cancel"}),R.jsx("button",{type:"submit",disabled:!c||a.trim().length===0||i,className:`flex-1 px-4 py-3 bg-blue-600/80 dark:bg-blue-500/80 border border-blue-500/50 dark:border-blue-400/50
                                     text-white rounded-lg font-medium transition-all duration-200 
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     hover:bg-blue-500/90 dark:hover:bg-blue-400/90 hover:border-blue-400/60 dark:hover:border-blue-300/60
                                     focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40`,children:i?"Creating...":"Create Board"})]})]})]})}):null}function zL({allBoards:t,currentBoard:e,onSwitchBoard:n,onCreateBoard:i,onDeleteBoard:a,onSignOut:l,isLoading:c}){const[d,f]=F.useState(!1),[p,y]=F.useState(!1),[v,b]=F.useState(null),x=async B=>{try{f(!0),await i(B),y(!1)}catch(q){console.error("Error in sidebar create board:",q)}finally{f(!1)}},I=()=>{y(!0)},P=()=>{y(!1)},O=(B,q)=>{B.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&a(q)};return R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"left-0 top-0 w-[100%] h-screen bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:R.jsxs("div",{className:"flex flex-col h-full",children:[R.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/50",children:[R.jsx("h2",{className:"m-0 mb-3 text-sm font-semibold text-gray-900 dark:text-gray-100 tracking-tight",children:"TinkFlow Boards"}),R.jsx("button",{onClick:I,disabled:c||d,className:`w-full bg-blue-600 dark:bg-blue-600 text-white dark:text-white border border-blue-600 dark:border-blue-600 
                                      px-3 py-2 rounded-lg cursor-pointer text-xs font-medium transition-all duration-200 
                                      ${c||d?"cursor-not-allowed opacity-60":"hover:bg-blue-700 dark:hover:bg-blue-700 hover:border-blue-700 dark:hover:border-blue-700 hover:-translate-y-0.5 hover:shadow-md"}`,children:d?"Creating...":"+ New Board"})]}),R.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:t.map(B=>{const q=e?.id===B.id,G=v===B.id;return R.jsxs("div",{onClick:()=>!c&&n(B.id),onMouseEnter:()=>b(B.id),onMouseLeave:()=>b(null),className:`
                                        min-h-[44px] px-3 py-2.5 mb-1 rounded-lg flex justify-between items-center
                                        transition-all duration-200 cursor-pointer border font-medium text-sm leading-tight
                                        ${c?"cursor-not-allowed opacity-60":"cursor-pointer"}
                                        ${q?"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/30 text-blue-900 dark:text-blue-100 font-semibold shadow-sm":G?"border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50 text-gray-900 dark:text-gray-100 shadow-sm":"border-transparent bg-transparent text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/30"}
                                    `,role:"button",tabIndex:0,onKeyDown:j=>{(j.key==="Enter"||j.key===" ")&&!c&&n(B.id)},children:[R.jsx("span",{className:`
                                        ${q?"font-semibold":"font-medium"} 
                                        flex-1 whitespace-nowrap overflow-hidden text-ellipsis 
                                        text-sm leading-tight
                                    `,children:B.name}),R.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[B.isOpen&&R.jsx("span",{className:"text-green-500 dark:text-green-400 text-xs",children:""}),t.length>1&&R.jsx("button",{onClick:j=>{j.stopPropagation(),O(j,B.id)},title:"Delete board",className:`
                                                    w-5 h-5 bg-transparent border-none text-red-500 dark:text-red-400 
                                                    cursor-pointer text-sm leading-none flex items-center justify-center
                                                    rounded transition-all duration-150
                                                    ${G?"opacity-100 visible hover:bg-red-50 dark:hover:bg-red-900/30":"opacity-0 invisible"}
                                                    hover:text-red-600 dark:hover:text-red-300
                                                `,children:""})]})]},B.id)})}),c&&R.jsx("div",{className:"p-3 text-center text-gray-500 dark:text-gray-400 text-xs font-medium",children:"Loading boards..."}),R.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:R.jsx("button",{onClick:l,className:`w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 
                                     bg-transparent text-gray-700 dark:text-gray-300 cursor-pointer text-xs font-medium
                                     transition-all duration-200
                                     hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:border-gray-400 dark:hover:border-gray-500 
                                     hover:text-gray-900 dark:hover:text-gray-100`,children:"Sign Out"})})]})}),R.jsx(LL,{show:p,onHide:P,onConfirm:x,isCreating:d})]})}function UL({explanation:t,onClose:e,isVisible:n}){const[i,a]=F.useState(!1),[l,c]=F.useState(n);F.useEffect(()=>{n?(c(!0),setTimeout(()=>a(!0),10)):(a(!1),setTimeout(()=>c(!1),300))},[n]);const d=()=>{a(!1),setTimeout(()=>e(),300)};return l?R.jsxs("div",{className:`h-full flex flex-col transition-all duration-300 ease-out ${i?"transform translate-x-0 opacity-100":"transform translate-x-full opacity-0"}`,children:[R.jsxs("div",{className:`flex justify-between items-center p-6 border-b border-gray-200/50 dark:border-gray-700/50 
                           transition-all duration-400 ease-out ${i?"transform translate-y-0 opacity-100":"transform -translate-y-4 opacity-0"}`,style:{transitionDelay:"50ms"},children:[R.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[R.jsx("span",{className:"text-blue-500",children:""}),"Explanation"]}),R.jsx("button",{className:`text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 
                             p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700/50 
                             transition-all duration-200 transform hover:scale-105`,onClick:d,title:"Close explanation","aria-label":"Close explanation sidebar",children:R.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:R.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),R.jsx("div",{className:"p-6 overflow-y-auto flex-1 scrollbar-thin",children:t?R.jsxs(R.Fragment,{children:[R.jsx("div",{className:`mb-6 transition-all duration-500 ease-out ${i?"transform translate-y-0 opacity-100":"transform translate-y-4 opacity-0"}`,style:{transitionDelay:"100ms"},children:R.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 leading-tight",children:t.title})}),R.jsx("div",{className:`prose prose-gray dark:prose-invert max-w-none text-gray-700 dark:text-gray-300
                                      [&>h1]:text-gray-900 [&>h1]:dark:text-gray-100 [&>h1]:text-2xl [&>h1]:font-bold [&>h1]:mb-4 [&>h1]:mt-6
                                      [&>h2]:text-gray-900 [&>h2]:dark:text-gray-100 [&>h2]:text-xl [&>h2]:font-semibold [&>h2]:mb-3 [&>h2]:mt-5
                                      [&>h3]:text-gray-900 [&>h3]:dark:text-gray-100 [&>h3]:text-lg [&>h3]:font-medium [&>h3]:mb-2 [&>h3]:mt-4
                                      [&>p]:text-gray-700 [&>p]:dark:text-gray-300 [&>p]:leading-relaxed [&>p]:mb-4
                                      [&>ul]:text-gray-700 [&>ul]:dark:text-gray-300 [&>ul]:mb-4 [&>ul>li]:mb-2
                                      [&>ol]:text-gray-700 [&>ol]:dark:text-gray-300 [&>ol]:mb-4 [&>ol>li]:mb-2
                                      [&>blockquote]:border-l-4 [&>blockquote]:border-blue-400 [&>blockquote]:pl-4 [&>blockquote]:italic [&>blockquote]:text-gray-600 [&>blockquote]:dark:text-gray-400 [&>blockquote]:bg-blue-50 [&>blockquote]:dark:bg-blue-900/20 [&>blockquote]:py-2 [&>blockquote]:rounded-r-lg
                                      [&>code]:bg-gray-100 [&>code]:dark:bg-gray-800 [&>code]:text-blue-600 [&>code]:dark:text-blue-400 [&>code]:px-2 [&>code]:py-1 [&>code]:rounded [&>code]:text-sm [&>code]:font-medium
                                      [&>pre]:bg-gray-100 [&>pre]:dark:bg-gray-800 [&>pre]:text-gray-800 [&>pre]:dark:text-gray-200 [&>pre]:p-4 [&>pre]:rounded-lg [&>pre]:overflow-x-auto [&>pre]:mb-4 [&>pre]:border [&>pre]:border-gray-200 [&>pre]:dark:border-gray-700
                                      transition-all duration-500 ease-out ${i?"transform translate-y-0 opacity-100":"transform translate-y-4 opacity-0"}`,style:{transitionDelay:"200ms"},children:R.jsx("div",{dangerouslySetInnerHTML:{__html:t.text}})})]}):R.jsx("div",{className:`flex items-center justify-center h-full text-gray-500 dark:text-gray-400 
                                   transition-all duration-500 ease-out ${i?"transform translate-y-0 opacity-100":"transform translate-y-8 opacity-0"}`,style:{transitionDelay:"150ms"},children:R.jsxs("div",{className:"text-center",children:[R.jsx("div",{className:"text-6xl mb-6 opacity-60",children:""}),R.jsx("p",{className:"text-xl font-medium mb-2",children:"No explanation available"}),R.jsx("p",{className:"text-sm opacity-75",children:"Click on a node to see its explanation"})]})})})]}):null}const I2=F.createContext(void 0),BL=()=>{const t=F.useContext(I2);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},jL=({children:t})=>{const[e,n]=F.useState(()=>{const a=localStorage.getItem("theme");return a||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});F.useEffect(()=>{const a=window.document.documentElement;a.classList.remove("light","dark"),a.classList.add(e),localStorage.setItem("theme",e)},[e]);const i=()=>{n(a=>a==="light"?"dark":"light")};return R.jsx(I2.Provider,{value:{theme:e,toggleTheme:i},children:t})},C2=()=>{const{theme:t,toggleTheme:e}=BL();return R.jsx("button",{onClick:e,className:`p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 
                     hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600
                     hover:border-gray-300 dark:hover:border-gray-500 transition-all duration-200 
                     focus:outline-none focus:ring-2 focus:ring-blue-500/30 dark:focus:ring-blue-400/30
                     shadow-sm hover:shadow-md`,title:`Switch to ${t==="light"?"dark":"light"} mode`,"aria-label":`Switch to ${t==="light"?"dark":"light"} mode`,children:t==="light"?R.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:R.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):R.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:R.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})})})};function HL({name:t,onSetName:e,user:n,isSaving:i}){const[a,l]=F.useState(!1),[c,d]=F.useState(t||"");F.useEffect(()=>{d(t||"")},[t]);const f=y=>{y.key==="Enter"&&(e(c),l(!1))},p=()=>{l(!0),d(t||"")};return R.jsx(R.Fragment,{children:R.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:R.jsx("div",{className:"max-w-none mx-auto px-4",children:R.jsxs("header",{className:"flex justify-between items-center py-3",children:[R.jsxs("div",{className:"flex items-center gap-3",children:[R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-sm",children:R.jsx("span",{className:"text-white font-bold text-sm",children:"T"})}),R.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"TinkFlow"})]}),R.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:""}),a?R.jsx("input",{type:"text",value:c,onChange:y=>d(y.target.value),onKeyDown:f,onBlur:()=>{e(c),l(!1)},className:`bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 
                                             rounded-md px-2 py-1 text-gray-900 dark:text-gray-100 text-sm min-w-[120px]
                                             focus:outline-none focus:border-blue-500 dark:focus:border-blue-400 focus:ring-2 focus:ring-blue-500/20`,autoFocus:!0}):R.jsx("button",{onClick:p,className:`bg-transparent border-none text-gray-600 dark:text-gray-400 text-sm cursor-pointer 
                                             px-2 py-1 rounded-md transition-all duration-150 ease-in-out
                                             hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-100`,children:t||"Untitled Board"})]}),R.jsxs("div",{className:"flex items-center gap-3",children:[i&&R.jsxs("div",{className:`text-green-600 dark:text-green-400 text-sm flex items-center gap-2 
                                               bg-green-50 dark:bg-green-900/20 px-3 py-1.5 rounded-full border border-green-200 dark:border-green-700/50
                                               animate-pulse`,children:[R.jsx("div",{className:"w-2 h-2 bg-green-500 dark:bg-green-400 rounded-full animate-bounce"}),R.jsx("span",{className:"font-medium",children:"Saving..."})]}),R.jsx(C2,{}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-gray-400 to-gray-500 rounded-full flex items-center justify-center",children:R.jsx("span",{className:"text-white font-medium text-xs",children:n?.isAnonymous?"G":n?.email?.charAt(0).toUpperCase()||"U"})}),R.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm font-medium",children:n?.isAnonymous?"Guest":n?.email?.split("@")[0]||"User"})]})]})]})})})})}const qL=({notification:t,onRemove:e})=>{const n=a=>{switch(a){case"success":return"";case"error":return"";case"warning":return"";case"info":return"";default:return""}},i=a=>{switch(a){case"success":return"bg-green-900/20 dark:bg-green-900/30 border-green-500/30 dark:border-green-500/40 text-green-300 dark:text-green-400";case"error":return"bg-red-900/20 dark:bg-red-900/30 border-red-500/30 dark:border-red-500/40 text-red-300 dark:text-red-400";case"warning":return"bg-yellow-900/20 dark:bg-yellow-900/30 border-yellow-500/30 dark:border-yellow-500/40 text-yellow-300 dark:text-yellow-400";case"info":return"bg-blue-900/20 dark:bg-blue-900/30 border-blue-500/30 dark:border-blue-500/40 text-blue-300 dark:text-blue-400";default:return"bg-gray-900/20 dark:bg-gray-900/30 border-gray-500/30 dark:border-gray-500/40 text-gray-300 dark:text-gray-400"}};return R.jsxs("div",{className:`notification relative min-w-80 max-w-md p-4 rounded-xl border shadow-2xl backdrop-blur-sm                         transform transition-all duration-300 ease-out hover:scale-[1.02] hover:shadow-3xl                        ${i(t.type)}`,children:[" ",R.jsxs("div",{className:"flex items-start gap-3",children:[" ",R.jsxs("span",{className:"text-lg flex-shrink-0 mt-0.5",children:[" ",n(t.type)," "]})," ",R.jsxs("div",{className:"flex-1 min-w-0",children:[" ",R.jsxs("p",{className:"text-sm font-medium leading-5 break-words",children:[" ",t.message," "]})," "]})," ",R.jsxs("button",{onClick:()=>e(t.id),className:"flex-shrink-0 text-gray-400 dark:text-gray-500 hover:text-gray-200 dark:hover:text-gray-300                              hover:bg-gray-700/50 dark:hover:bg-gray-600/50                              rounded-full p-1 transition-all duration-200                              focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20","aria-label":"Close notification",children:[" ",R.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[" ",R.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})," "]})," "]})," "]})," "]})},$L=({notifications:t,onRemove:e})=>R.jsxs("div",{className:"notification-container fixed top-4 right-4 space-y-3 z-[2000] pointer-events-none",children:[" ",t.map(n=>R.jsxs("div",{className:"pointer-events-auto",children:[" ",R.jsx(qL,{notification:n,onRemove:e})," "]},n.id))," "]});function FL({onLogin:t}){return R.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 antialiased",children:[" "," ",R.jsxs("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50",children:[" ",R.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",R.jsxs("div",{className:"flex justify-between items-center py-4",children:[" ",R.jsxs("div",{className:"flex items-center space-x-3",children:[" ",R.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",R.jsx("span",{className:"text-white font-bold text-lg",children:"T"})," "]})," ",R.jsxs("div",{className:"flex flex-col",children:[" ",R.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white tracking-tight",children:"TinkFlow"})," ",R.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"AI Learning Platform"})," "]})," "]})," ",R.jsxs("div",{className:"flex items-center gap-4",children:[" ",R.jsx(C2,{})," ",R.jsxs("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors duration-200",children:[" ","Get Started"," "]})," "]})," "]})," "]})," "]})," "," ",R.jsxs("section",{className:"relative overflow-hidden",children:[" ",R.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-32",children:[" ",R.jsxs("div",{className:"text-center",children:[" ",R.jsxs("div",{className:"inline-flex items-center gap-2 bg-indigo-50 dark:bg-indigo-900/20 px-4 py-2 rounded-full mb-8",children:[" ",R.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"})," ",R.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 font-medium text-sm",children:"AI-Powered Concept Learning"})," "]})," ",R.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-gray-900 dark:text-white mb-6 leading-tight",children:[" ","Learn & Tinker with"," ",R.jsxs("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent block",children:[" ","AI-Powered Concepts"," "]})," "]})," ",R.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-3xl mx-auto leading-relaxed",children:[" ","TinkFlow is the ultimate AI-powered platform for exploring, understanding, and experimenting with new concepts. Transform your learning journey with interactive visual flows and intelligent insights."," "]})," ",R.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[" ",R.jsxs("button",{onClick:t,className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning Now"," "]})," ",R.jsxs("button",{className:"px-8 py-4 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-semibold text-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",children:[" ","Watch Demo"," "]})," "]})," "]})," "]})," "," ",R.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-indigo-400 to-purple-500 rounded-full opacity-10 blur-3xl"})," ",R.jsx("div",{className:"absolute top-1/4 right-1/4 w-64 h-64 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full opacity-10 blur-2xl"})," "]})," "," ",R.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",R.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",R.jsxs("div",{className:"text-center mb-16",children:[" ",R.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Everything You Need to Learn"," "]})," ",R.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","AI-powered tools and features designed to accelerate your learning and conceptual understanding"," "]})," "]})," ",R.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",R.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-indigo-200 dark:border-indigo-700/50 hover:transform hover:-translate-y-1",children:[" ",R.jsxs("div",{className:"w-14 h-14 bg-indigo-500 rounded-xl flex items-center justify-center mb-6",children:[" ",R.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})," "]})," "]})," ",R.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI-Powered Insights"," "]})," ",R.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Get intelligent explanations and connections between concepts powered by advanced AI that understands your learning style."," "]})," "]})," ",R.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-purple-200 dark:border-purple-700/50 hover:transform hover:-translate-y-1",children:[" ",R.jsxs("div",{className:"w-14 h-14 bg-purple-500 rounded-xl flex items-center justify-center mb-6",children:[" ",R.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"})," "]})," "]})," ",R.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Interactive Visual Flows"," "]})," ",R.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Build and explore concept maps with interactive nodes that respond to your curiosity and create dynamic learning pathways."," "]})," "]})," ",R.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-green-200 dark:border-green-700/50 hover:transform hover:-translate-y-1",children:[" ",R.jsxs("div",{className:"w-14 h-14 bg-green-500 rounded-xl flex items-center justify-center mb-6",children:[" ",R.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})," "]})," "]})," ",R.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Experimentation Sandbox"," "]})," ",R.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Tinker with concepts in a safe, guided environment where you can test ideas and see instant results with AI feedback."," "]})," "]})," "]})," "]})," "]})," "," ",R.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",R.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",R.jsxs("div",{className:"text-center mb-16",children:[" ",R.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","How TinkFlow Works"," "]})," ",R.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Three simple steps to unlock your learning potential with AI-powered concept exploration"," "]})," "]})," ",R.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",R.jsxs("div",{className:"text-center",children:[" ",R.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",R.jsx("span",{className:"text-white font-bold text-xl",children:"1"})," "]})," ",R.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Input Your Concept"," "]})," ",R.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Start by entering any topic, question, or concept you want to explore. Our AI understands context and complexity."," "]})," "]})," ",R.jsxs("div",{className:"text-center",children:[" ",R.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",R.jsx("span",{className:"text-white font-bold text-xl",children:"2"})," "]})," ",R.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI Generates Flow"," "]})," ",R.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Watch as TinkFlow creates an interactive visual map with connected nodes, each representing key aspects of your concept."," "]})," "]})," ",R.jsxs("div",{className:"text-center",children:[" ",R.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",R.jsx("span",{className:"text-white font-bold text-xl",children:"3"})," "]})," ",R.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Explore & Learn"," "]})," ",R.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Click on any node to dive deeper, ask questions, and watch new connections emerge as you explore your learning path."," "]})," "]})," "]})," "]})," "]})," "," ",R.jsxs("section",{className:"py-20 bg-gradient-to-r from-indigo-500 to-purple-600",children:[" ",R.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",R.jsxs("div",{className:"grid md:grid-cols-4 gap-8 text-center",children:[" ",R.jsxs("div",{className:"text-white",children:[" ",R.jsx("div",{className:"text-4xl font-bold mb-2",children:"10K+"})," ",R.jsx("div",{className:"text-indigo-100",children:"Concepts Explored"})," "]})," ",R.jsxs("div",{className:"text-white",children:[" ",R.jsx("div",{className:"text-4xl font-bold mb-2",children:"5K+"})," ",R.jsx("div",{className:"text-indigo-100",children:"Active Learners"})," "]})," ",R.jsxs("div",{className:"text-white",children:[" ",R.jsx("div",{className:"text-4xl font-bold mb-2",children:"98%"})," ",R.jsx("div",{className:"text-indigo-100",children:"Learning Success"})," "]})," ",R.jsxs("div",{className:"text-white",children:[" ",R.jsx("div",{className:"text-4xl font-bold mb-2",children:"24/7"})," ",R.jsx("div",{className:"text-indigo-100",children:"AI Support"})," "]})," "]})," "]})," "]})," "," ",R.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",R.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",R.jsxs("div",{className:"text-center mb-16",children:[" ",R.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Perfect for Every Learning Style"," "]})," ",R.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Whether you're a student, researcher, or curious mind, TinkFlow adapts to your learning needs"," "]})," "]})," ",R.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[" ",R.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/10 dark:to-blue-800/10 p-8 rounded-2xl border border-blue-200 dark:border-blue-700/30",children:[" ",R.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Academic Learning"," "]})," ",R.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Break down complex academic subjects into digestible, interconnected concepts. Perfect for studying sciences, humanities, and technical topics."," "]})," ",R.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",R.jsx("li",{children:" Research paper analysis"})," ",R.jsx("li",{children:" Concept mapping for exams"})," ",R.jsx("li",{children:" Cross-disciplinary connections"})," "]})," "]})," ",R.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/10 dark:to-purple-800/10 p-8 rounded-2xl border border-purple-200 dark:border-purple-700/30",children:[" ",R.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Creative Exploration"," "]})," ",R.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Explore ideas, brainstorm solutions, and discover unexpected connections. Great for creative professionals and innovators."," "]})," ",R.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",R.jsx("li",{children:" Idea generation workflows"})," ",R.jsx("li",{children:" Problem-solving frameworks"})," ",R.jsx("li",{children:" Innovation mapping"})," "]})," "]})," ",R.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/10 dark:to-green-800/10 p-8 rounded-2xl border border-green-200 dark:border-green-700/30",children:[" ",R.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Technical Deep Dives"," "]})," ",R.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Understand complex systems, architectures, and technologies through interactive exploration and AI-guided explanations."," "]})," ",R.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",R.jsx("li",{children:" System architecture learning"})," ",R.jsx("li",{children:" Technology stack exploration"})," ",R.jsx("li",{children:" Code concept mapping"})," "]})," "]})," ",R.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/10 dark:to-orange-800/10 p-8 rounded-2xl border border-orange-200 dark:border-orange-700/30",children:[" ",R.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Professional Development"," "]})," ",R.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Build skills, understand industry trends, and create learning paths for career advancement with AI-powered insights."," "]})," ",R.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",R.jsx("li",{children:" Skill gap analysis"})," ",R.jsx("li",{children:" Career pathway planning"})," ",R.jsx("li",{children:" Industry trend mapping"})," "]})," "]})," "]})," "]})," "]})," "," ",R.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",R.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[" ",R.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-6",children:[" ","Ready to Transform Your Learning?"," "]})," ",R.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10",children:[" ","Join thousands of learners who are already exploring concepts in revolutionary ways with TinkFlow's AI-powered platform."," "]})," ",R.jsxs("button",{onClick:t,className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-12 py-4 rounded-xl text-lg font-semibold hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning for Free"," "]})," ",R.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:[" ","No credit card required  Get started in seconds"," "]})," "]})," "]})," "," ",R.jsxs("footer",{className:"bg-gray-900 text-white py-12",children:[" ",R.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",R.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[" ",R.jsxs("div",{className:"col-span-1",children:[" ",R.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[" ",R.jsxs("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",R.jsx("span",{className:"text-white font-bold text-sm",children:"T"})," "]})," ",R.jsx("span",{className:"text-xl font-bold",children:"TinkFlow"})," "]})," ",R.jsxs("p",{className:"text-gray-400 text-sm",children:[" ","AI-powered concept learning platform for curious minds."," "]})," "]})," ",R.jsxs("div",{children:[" ",R.jsx("h4",{className:"font-semibold mb-4",children:"Product"})," ",R.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",R.jsx("li",{children:R.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Features"})})," ",R.jsx("li",{children:R.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Pricing"})})," ",R.jsx("li",{children:R.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"API"})})," "]})," "]})," ",R.jsxs("div",{children:[" ",R.jsx("h4",{className:"font-semibold mb-4",children:"Resources"})," ",R.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",R.jsx("li",{children:R.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Documentation"})})," ",R.jsx("li",{children:R.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Tutorials"})})," ",R.jsx("li",{children:R.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Blog"})})," "]})," "]})," ",R.jsxs("div",{children:[" ",R.jsx("h4",{className:"font-semibold mb-4",children:"Company"})," ",R.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",R.jsx("li",{children:R.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About"})})," ",R.jsx("li",{children:R.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})})," ",R.jsx("li",{children:R.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy"})})," "]})," "]})," "]})," ",R.jsxs("div",{className:"border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[" ",R.jsxs("p",{className:"text-gray-400 text-sm",children:[" "," 2024 TinkFlow. All rights reserved."," "]})," ",R.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[" ",R.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",R.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",R.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})," "]})," "]})," ",R.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",R.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",R.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})," "]})," "]})," ",R.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",R.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",R.jsx("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.747.099.12.112.225.085.344-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.001 12.017z"})," "]})," "]})," "]})," "]})," "]})," "]})," "]})}const GL=async()=>{try{await n9(If),console.log("User signed out successfully")}catch(t){throw console.error("Error signing out:",t),t}},YL=()=>{const[t,e]=F.useState(null);return F.useEffect(()=>{const i=t9(If,a=>{e(a),a?console.log("User signed in:",a.uid):console.log("No user signed in")});return()=>i()},[]),{user:t,signOut:async()=>{try{await GL(),e(null)}catch(i){console.error("Error in sign out:",i)}}}},k2=t=>!!(t&&t.uid),fu=[{id:"1",type:"staticEditable",data:{label:"The _artificial intelligence_ system processes _natural language_ effectively",title:"AI & Natural Language",suggestions:["Machine Learning","Neural Networks","Deep Learning"],tokenColors:{},previousNode:null},position:{x:250,y:25},draggable:!1}],wl=[],KL=async t=>{if(!k2({uid:t}))throw new Error(On.AUTH_REQUIRED);try{const e=Cy(qr,cr.BOARDS),n=$P(e,FP("userId","==",t),GP("createdAt","desc")),i=await Hy(n);if(i.empty){const l={id:`board_${Date.now()}`,userId:t,name:"Default Board",createdAt:_t.now(),isOpen:!0};return await qy(Bl(qr,cr.BOARDS,l.id),l),console.log("Created default board:",l),[l]}const a=i.docs.map(l=>({id:l.id,...l.data()}));return console.log("Fetched all boards:",a),a}catch(e){if(console.error("Fetch all boards error:",e),e.code==="failed-precondition"||e.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:t,name:"Fallback Board (Create Index)",createdAt:_t.now(),isOpen:!0,isFallback:!0}]}throw new Error(On.LOAD_FAILED)}},l1=async t=>{if(!t)return console.warn("No board ID provided for fetching nodes"),fu;try{const e=Cy(qr,cr.BOARDS,t,cr.NODES),n=await Hy(e);if(n.empty)return console.log("No nodes found for board, using initial nodes"),fu;const i=n.docs.map(a=>{const l=a.data(),c={...l.data,tokenColors:l.data?.tokenColors||{},previousNode:l.data?.previousNode||null};return{id:a.id,type:l.type,position:l.position,data:c,draggable:l.draggable,style:l.style}});return console.log("Fetched nodes from board:",i),i}catch(e){return console.error("Fetch nodes error:",e),fu}},c1=async t=>{if(!t)return console.warn("No board ID provided for fetching edges"),wl;try{const e=Cy(qr,cr.BOARDS,t,cr.EDGES),n=await Hy(e);if(n.empty)return console.log("No edges found for board, using initial edges"),wl;const i=n.docs.map(a=>({id:a.id,...a.data()}));return console.log("Fetched edges from board:",i),i}catch(e){return console.error("Fetch edges error:",e),wl}},XL=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving nodes:",{boardId:t,nodesCount:e?.length});return}try{const n=$A(qr);e.forEach(i=>{const a=Bl(qr,cr.BOARDS,t,cr.NODES,i.id),l={type:i.type,data:i.data,position:i.position,updatedAt:_t.now()};i.draggable!=null&&(l.draggable=i.draggable),i.style!=null&&(l.style=i.style),n.set(a,l)}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(On.SAVE_FAILED)}},QL=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving edges:",{boardId:t,edgesCount:e?.length});return}try{const n=$A(qr);e.forEach(i=>{const a=Bl(qr,cr.BOARDS,t,cr.EDGES,i.id),l={source:i.source,target:i.target,updatedAt:_t.now()};i.sourceHandle!=null&&(l.sourceHandle=i.sourceHandle),i.targetHandle!=null&&(l.targetHandle=i.targetHandle),i.style!=null&&(l.style=i.style),i.markerEnd!=null&&(l.markerEnd=i.markerEnd),n.set(a,l)}),await n.commit(),console.log("Edges saved to board")}catch(n){throw console.error("Save edges error:",n),new Error(On.SAVE_FAILED)}},WL=async(t,e,n)=>{if(!k2({uid:t}))throw new Error(On.AUTH_REQUIRED);try{const i={id:`board_${Date.now()}`,userId:t,name:e||`Board ${n.length+1}`,createdAt:_t.now(),isOpen:!1};return console.log("Creating board:",i),await qy(Bl(qr,cr.BOARDS,i.id),i),console.log("Board created successfully:",i),i}catch(i){throw console.error("Error creating new board:",i),i.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):i.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},ZL=async t=>{if(!t)throw new Error("Board ID is required for deletion");try{await ZP(Bl(qr,cr.BOARDS,t)),console.log("Board deleted successfully")}catch(e){throw console.error("Error deleting board:",e),e.code==="permission-denied"?new Error("Permission denied. Cannot delete this board."):e}},il=async(t,e)=>{if(!t||!e)throw new Error("Board ID and updates are required");try{const n={...e,updatedAt:_t.now()};await qy(Bl(qr,cr.BOARDS,t),n,{merge:!0}),console.log("Board status updated:",n)}catch(n){throw console.error("Error updating board status:",n),n}},JL=t=>{if(!t||!t.data)return t;const e={...t},n={...t.data};return n.title||(n.title=n.label||n.summary||"Node"),n.suggestions||(n.suggestions=[]),e.draggable===void 0&&(e.draggable=!0),e.data=n,e},ez=t=>Array.isArray(t)?t.map(JL):[],tz=(t,e={})=>{const[n,i,a]=JD([]),[l,c,d]=eM([]),[f,p]=F.useState(!0),[y,v]=F.useState(!1),[b,x]=F.useState(!1),[I,P]=F.useState([]),[O,B]=F.useState(null),q=F.useRef(null),{showSuccess:G,showError:j,showInfo:W}=e,X=S=>{const D=S.find(H=>H.isOpen===!0);if(D)return D;if(S.length>0){const H={...S[0],isOpen:!0};return il(H.id,H).catch(console.error),H}return null};F.useEffect(()=>{(async()=>{if(t)try{p(!0);const D=await KL(t.uid);P(D);const H=D.some(Q=>Q.isFallback);H&&j&&j("Database index missing. Please create the required Firestore index. Check console for details.");const k=X(D);if(!k){console.error("No board found for user"),j&&j("No boards found. Creating a default board..."),i(fu),c(wl);return}B(k);const[$,Z]=await Promise.all([l1(k.id),c1(k.id)]);i($),c(Z),W&&!H&&W("Board loaded successfully!")}catch(D){console.error("Error loading initial data:",D),j&&j("Failed to load board data. Using default board."),i(fu),c(wl)}finally{p(!1)}})()},[t,i,c]);const A=async(S,D,H)=>{q.current&&clearTimeout(q.current);const k=setTimeout(async()=>{try{x(!0);const $=[];D&&D.length>0&&$.push(XL(S,D)),H&&H.length>0&&$.push(QL(S,H)),$.length>0&&(await Promise.all($),console.log("Auto-save completed successfully"))}catch($){console.error("Auto-save failed:",$),j&&j("Failed to save changes automatically")}finally{x(!1),q.current=null}},1e3);q.current=k};F.useEffect(()=>(!f&&O&&!y&&!O.isFallback&&A(O.id,n,l),()=>{q.current&&clearTimeout(q.current)}),[n,l,f,O,y]);const T=async S=>{try{if(O?.id===S)return;if(O?.isFallback||I.find(H=>H.id===S)?.isFallback){j&&j("Cannot switch to fallback board. Please create the missing Firestore index first.");return}if(v(!0),O&&!O.isFallback){const H={...O,isOpen:!1};await il(O.id,H),P(k=>k.map($=>$.id===O.id?H:$))}const D=I.find(H=>H.id===S);if(D){const H={...D,isOpen:!0};await il(S,H),B(H),P(Q=>Q.map(V=>V.id===S?H:V));const[k,$]=await Promise.all([l1(S),c1(S)]),Z=ez(k);i(Z),c($),G&&G(`Switched to "${H.name}"`)}else console.error("Board not found:",S),j&&j("Board not found")}catch(D){console.error("Error switching board:",D),j&&j("Failed to switch board. Please try again.")}finally{v(!1)}};return{nodes:n,edges:l,allBoards:I,currentBoard:O,isLoading:f,isSwitchingBoard:y,isSaving:b,onNodesChange:a,onEdgesChange:d,setNodes:i,switchToBoard:T,createNewBoard:async S=>{try{if(!t)return j&&j("You must be logged in to create a board"),null;W&&W("Creating new board...");const D=await WL(t.uid,S||null,I);if(D){if(O&&!O.isFallback){const k={...O,isOpen:!1};il(O.id,k).catch(console.error)}const H={...D,isOpen:!0};return P(k=>{const $=k.map(Z=>Z.id===O?.id?{...Z,isOpen:!1}:Z);return[H,...$]}),B(H),il(D.id,H).catch(console.error),i([{id:"1",type:"staticEditable",data:{label:S||"New Board"},position:{x:250,y:25},draggable:!1}]),c(wl),G&&G(`Board "${D.name}" created and opened!`),H}else return j&&j("Failed to create board. Please try again."),null}catch(D){return j&&j(`Failed to create board: ${D.message}`),null}},deleteBoard:async S=>{try{if(I.length<=1){j&&j("Cannot delete the last board!");return}if(!I.find(H=>H.id===S)){console.error("Board not found for deletion"),j&&j("Board not found");return}if(W&&W("Deleting board..."),O?.id===S){const H=I.find(k=>k.id!==S);H&&await T(H.id)}await ZL(S),P(H=>H.filter(k=>k.id!==S)),G&&G("Board deleted successfully!")}catch(D){console.error("Error deleting board:",D),j&&j("Failed to delete board. Please try again.")}},updateBoardName:async S=>{if(O&&O.name!==S){const D={...O,name:S};B(D),P(H=>H.map(k=>k.id===O.id?D:k));try{await il(O.id,D),console.log("Board name updated successfully")}catch(H){console.error("Error updating board name:",H)}}},clearBoardState:()=>{q.current&&(clearTimeout(q.current),q.current=null),P([]),B(null),i([]),c([]),p(!0),v(!1),x(!1)}}},nz=()=>{const[t,e]=F.useState([]),n=p=>{e(y=>y.filter(v=>v.id!==p))},i=p=>{const y=Date.now().toString(),v={id:y,timestamp:new Date,...p};return e(b=>[...b,v]),p.autoRemove!==!1&&setTimeout(()=>{n(y)},p.duration||5e3),y};return{notifications:t,addNotification:i,removeNotification:n,clearAllNotifications:()=>{e([])},showSuccess:(p,y={})=>i({type:"success",message:p,...y}),showError:(p,y={})=>i({type:"error",message:p,duration:7e3,...y}),showInfo:(p,y={})=>i({type:"info",message:p,...y}),showWarning:(p,y={})=>i({type:"warning",message:p,duration:6e3,...y})}},D2=t=>{const e=[],n=t.split("_");for(let i=0;i<n.length;i++)if(i%2===0)n[i].split(/\s+/).filter(l=>l.trim()!=="").forEach(l=>{e.push({word:l.trim()})});else{const a=n[i].trim();a.split(/\s+/).filter(c=>c.trim()!=="").forEach(c=>{e.push({word:c.trim(),myConcept:a})})}return e},u1=()=>{const t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];return t[Math.floor(Math.random()*t.length)]},Xh=t=>{if(!t)return"#000000";const e=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),i=parseInt(t.substring(5,7),16);return(e*299+n*587+i*114)/1e3>=128?"#000000":"#ffffff"},Qh=(t,e)=>{if(!t)return"#000000";let n=t.startsWith("#")?t.substring(1):t;const i=parseInt(n,16),a=255,l=e,c=i>>16,d=i>>8&255,f=i&255,p=Math.round((a-c)*l)+c,y=Math.round((a-d)*l)+d,v=Math.round((a-f)*l)+f;return`#${(16777216+p*65536+y*256+v).toString(16).slice(1)}`},rz=t=>{const e=t.replace("#",""),n=parseInt(e.substr(0,2),16),i=parseInt(e.substr(2,2),16),a=parseInt(e.substr(4,2),16),l=30,c=Math.min(255,Math.max(0,n+(Math.random()-.5)*l*2)),d=Math.min(255,Math.max(0,i+(Math.random()-.5)*l*2)),f=Math.min(255,Math.max(0,a+(Math.random()-.5)*l*2));return`#${Math.round(c).toString(16).padStart(2,"0")}${Math.round(d).toString(16).padStart(2,"0")}${Math.round(f).toString(16).padStart(2,"0")}`},iz=t=>{const i=(Math.random()-.5)*150*2;return{x:t.x+i,y:t.y+200}},sz=()=>`node_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,az=(t,e)=>`edge_${t}_${e}`,oz=(t,e,n,i,a,l,c)=>({id:sz(),type:"draggableEditable",position:t,draggable:!0,data:{label:e,title:e,summary:i,full_text:n,suggestions:[],myColor:a,tokenColors:{},previousNode:c}}),lz=(t,e,n,i)=>({id:az(t,e),source:t,target:e,sourceHandle:i,targetHandle:null,style:{stroke:n,strokeWidth:3},markerEnd:{type:bu.ArrowClosed,color:n}});var di={exports:{}};const cz={},uz=Object.freeze(Object.defineProperty({__proto__:null,default:cz},Symbol.toStringTag,{value:"Module"})),Mh=cN(uz),dz="17.2.0",hz={version:dz};var d1;function fz(){if(d1)return di.exports;d1=1;var t={};const e=Mh,n=Mh,i=Mh,a=Mh,c=hz.version,d=[" encrypt with dotenvx: https://dotenvx.com"," prevent committing .env to code: https://dotenvx.com/precommit"," prevent building .env in docker: https://dotenvx.com/prebuild","  run anywhere with `dotenvx run -- yourcommand`","  specify custom .env file path with { path: '/custom/path/.env' }","  enable debug logging with { debug: true }","  override existing env vars with { override: true }","  suppress all logs with { quiet: true }","  write to custom object with { processEnv: myObject }","  load multiple .env files with { path: ['.env.local', '.env'] }"];function f(){return d[Math.floor(Math.random()*d.length)]}function p(C){return typeof C=="string"?!["false","0","no","off",""].includes(C.toLowerCase()):!!C}function y(){return process.stdout.isTTY}function v(C){return y()?`\x1B[2m${C}\x1B[0m`:C}const b=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function x(C){const S={};let D=C.toString();D=D.replace(/\r\n?/mg,`
`);let H;for(;(H=b.exec(D))!=null;){const k=H[1];let $=H[2]||"";$=$.trim();const Z=$[0];$=$.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),Z==='"'&&($=$.replace(/\\n/g,`
`),$=$.replace(/\\r/g,"\r")),S[k]=$}return S}function I(C){C=C||{};const S=j(C);C.path=S;const D=L.configDotenv(C);if(!D.parsed){const Z=new Error(`MISSING_DATA: Cannot parse ${S} for an unknown reason`);throw Z.code="MISSING_DATA",Z}const H=q(C).split(","),k=H.length;let $;for(let Z=0;Z<k;Z++)try{const Q=H[Z].trim(),V=G(D,Q);$=L.decrypt(V.ciphertext,V.key);break}catch(Q){if(Z+1>=k)throw Q}return L.parse($)}function P(C){console.error(`[dotenv@${c}][WARN] ${C}`)}function O(C){console.log(`[dotenv@${c}][DEBUG] ${C}`)}function B(C){console.log(`[dotenv@${c}] ${C}`)}function q(C){return C&&C.DOTENV_KEY&&C.DOTENV_KEY.length>0?C.DOTENV_KEY:t.DOTENV_KEY&&t.DOTENV_KEY.length>0?t.DOTENV_KEY:""}function G(C,S){let D;try{D=new URL(S)}catch(Q){if(Q.code==="ERR_INVALID_URL"){const V=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw V.code="INVALID_DOTENV_KEY",V}throw Q}const H=D.password;if(!H){const Q=new Error("INVALID_DOTENV_KEY: Missing key part");throw Q.code="INVALID_DOTENV_KEY",Q}const k=D.searchParams.get("environment");if(!k){const Q=new Error("INVALID_DOTENV_KEY: Missing environment part");throw Q.code="INVALID_DOTENV_KEY",Q}const $=`DOTENV_VAULT_${k.toUpperCase()}`,Z=C.parsed[$];if(!Z){const Q=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${$} in your .env.vault file.`);throw Q.code="NOT_FOUND_DOTENV_ENVIRONMENT",Q}return{ciphertext:Z,key:H}}function j(C){let S=null;if(C&&C.path&&C.path.length>0)if(Array.isArray(C.path))for(const D of C.path)e.existsSync(D)&&(S=D.endsWith(".vault")?D:`${D}.vault`);else S=C.path.endsWith(".vault")?C.path:`${C.path}.vault`;else S=n.resolve(process.cwd(),".env.vault");return e.existsSync(S)?S:null}function W(C){return C[0]==="~"?n.join(i.homedir(),C.slice(1)):C}function X(C){const S=p(t.DOTENV_CONFIG_DEBUG||C&&C.debug),D=p(t.DOTENV_CONFIG_QUIET||C&&C.quiet);(S||!D)&&B("Loading env from encrypted .env.vault");const H=L._parseVault(C);let k=t;return C&&C.processEnv!=null&&(k=C.processEnv),L.populate(k,H,C),{parsed:H}}function A(C){const S=n.resolve(process.cwd(),".env");let D="utf8",H=t;C&&C.processEnv!=null&&(H=C.processEnv);let k=p(H.DOTENV_CONFIG_DEBUG||C&&C.debug),$=p(H.DOTENV_CONFIG_QUIET||C&&C.quiet);C&&C.encoding?D=C.encoding:k&&O("No encoding is specified. UTF-8 is used by default");let Z=[S];if(C&&C.path)if(!Array.isArray(C.path))Z=[W(C.path)];else{Z=[];for(const te of C.path)Z.push(W(te))}let Q;const V={};for(const te of Z)try{const K=L.parse(e.readFileSync(te,{encoding:D}));L.populate(V,K,C)}catch(K){k&&O(`Failed to load ${te} ${K.message}`),Q=K}const J=L.populate(H,V,C);if(k=p(H.DOTENV_CONFIG_DEBUG||k),$=p(H.DOTENV_CONFIG_QUIET||$),k||!$){const te=Object.keys(J).length,K=[];for(const ie of Z)try{const ue=n.relative(process.cwd(),ie);K.push(ue)}catch(ue){k&&O(`Failed to load ${ie} ${ue.message}`),Q=ue}B(`injecting env (${te}) from ${K.join(",")} ${v(`(tip: ${f()})`)}`)}return Q?{parsed:V,error:Q}:{parsed:V}}function T(C){if(q(C).length===0)return L.configDotenv(C);const S=j(C);return S?L._configVault(C):(P(`You set DOTENV_KEY but you are missing a .env.vault file at ${S}. Did you forget to build it?`),L.configDotenv(C))}function N(C,S){const D=Buffer.from(S.slice(-64),"hex");let H=Buffer.from(C,"base64");const k=H.subarray(0,12),$=H.subarray(-16);H=H.subarray(12,-16);try{const Z=a.createDecipheriv("aes-256-gcm",D,k);return Z.setAuthTag($),`${Z.update(H)}${Z.final()}`}catch(Z){const Q=Z instanceof RangeError,V=Z.message==="Invalid key length",J=Z.message==="Unsupported state or unable to authenticate data";if(Q||V){const te=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw te.code="INVALID_DOTENV_KEY",te}else if(J){const te=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw te.code="DECRYPTION_FAILED",te}else throw Z}}function U(C,S,D={}){const H=!!(D&&D.debug),k=!!(D&&D.override),$={};if(typeof S!="object"){const Z=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw Z.code="OBJECT_REQUIRED",Z}for(const Z of Object.keys(S))Object.prototype.hasOwnProperty.call(C,Z)?(k===!0&&(C[Z]=S[Z],$[Z]=S[Z]),H&&O(k===!0?`"${Z}" is already defined and WAS overwritten`:`"${Z}" is already defined and was NOT overwritten`)):(C[Z]=S[Z],$[Z]=S[Z]);return $}const L={configDotenv:A,_configVault:X,_parseVault:I,config:T,decrypt:N,parse:x,populate:U};return di.exports.configDotenv=L.configDotenv,di.exports._configVault=L._configVault,di.exports._parseVault=L._parseVault,di.exports.config=L.config,di.exports.decrypt=L.decrypt,di.exports.parse=L.parse,di.exports.populate=L.populate,di.exports=L,di.exports}var gz=fz();const pz=O0(gz);var M2={};pz.config();const mz=t=>t.replace(/\*\*(.*?)\*\*/g,"<strong class='font-semibold text-gray-900 dark:text-gray-100'>$1</strong>").replace(/\((.*?)\)\[(.*?)\]/g,'<a href="$2" target="_blank" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline transition-colors duration-200">$1</a>'),yz=async t=>{const e=t.map(async i=>{const a=Object.keys(i)[0],l=i[a];switch(a){case"large_header":return`<h1 class="text-4xl lg:text-5xl font-bold my-8 text-gray-900 dark:text-gray-100 leading-tight border-b-4 border-blue-600 dark:border-blue-400 pb-2 transition-colors duration-200">${l}</h1>`;case"small_header":return`<h2 class="text-2xl lg:text-3xl font-semibold mt-6 mb-3 text-gray-800 dark:text-gray-200 leading-snug transition-colors duration-200">${l}</h2>`;case"ul":return`<ul class="my-4 pl-6 space-y-2 list-disc list-inside text-gray-700 dark:text-gray-300 transition-colors duration-200">${l.map(D=>`<li class="text-gray-700 dark:text-gray-300 transition-colors duration-200">${D}</li>`).join("")}</ul>`;case"ol":return`<ol class="my-4 pl-6 space-y-2 list-decimal list-inside text-gray-700 dark:text-gray-300 transition-colors duration-200">${l.map(D=>`<li class="text-gray-700 dark:text-gray-300 transition-colors duration-200">${D}</li>`).join("")}</ol>`;case"quiz":const f=l,p=`quiz-set-${Math.random().toString(36).substr(2,9)}`,y=f.map((D,H)=>{const k=`${p}-q${H}`,$=D.answers.map((J,te)=>{const K=Object.keys(J)[0],ie=J[K],ue=te===D.correctAnswer;return`<button class="quiz-answer w-full bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-lg p-4 text-left font-medium text-gray-700 dark:text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 hover:border-blue-500 dark:hover:border-blue-400 transition-all duration-200 transform hover:scale-[1.02] disabled:cursor-not-allowed disabled:opacity-60" onclick="${`
                                        const quiz = document.getElementById('${k}');
                                        const hintDiv = document.getElementById('${k}-hint');
                                        const resultDiv = document.getElementById('${k}-result');
                                        const nextBtn = document.getElementById('${k}-next');
                                        const buttons = quiz.querySelectorAll('.quiz-answer');
                                        const selectedButton = this;
                                        
                                        if (${ue}) {
                                            // Correct answer
                                            hintDiv.classList.add('hidden');
                                            resultDiv.classList.remove('hidden');
                                            if (nextBtn) nextBtn.classList.remove('hidden');
                                            buttons.forEach(btn => btn.disabled = true);
                                            selectedButton.classList.add('quiz-correct');
                                            selectedButton.classList.remove('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                        } else {
                                            // Wrong answer - show hint
                                            hintDiv.textContent = '${ie.replace(/'/g,"\\'")}';
                                            hintDiv.classList.remove('hidden');
                                            selectedButton.classList.add('quiz-incorrect');
                                            selectedButton.classList.remove('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                            selectedButton.disabled = true;
                                        }
                                    `}">${K}</button>`}).join(""),Z=`
                                const quiz = document.getElementById('${k}');
                                const hintDiv = document.getElementById('${k}-hint');
                                const resultDiv = document.getElementById('${k}-result');
                                const nextBtn = document.getElementById('${k}-next');
                                const buttons = quiz.querySelectorAll('.quiz-answer');
                                
                                // Reset all states
                                hintDiv.classList.add('hidden');
                                hintDiv.textContent = '';
                                resultDiv.classList.add('hidden');
                                if (nextBtn) nextBtn.classList.add('hidden');
                                
                                buttons.forEach(btn => {
                                    btn.disabled = false;
                                    btn.classList.remove('quiz-correct', 'quiz-incorrect');
                                    btn.classList.add('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                });
                            `,Q=H<f.length-1?`
                                document.getElementById('${p}-q${H}').classList.add('hidden');
                                document.getElementById('${p}-q${H+1}').classList.remove('hidden');
                            `:`
                                document.getElementById('${p}-completion').classList.remove('hidden');
                                document.getElementById('${k}').classList.add('hidden');
                            `,V=H<f.length-1?`<button id="${k}-next" class="hidden bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200" onclick="${Q}">Next Question </button>`:`<button id="${k}-next" class="hidden bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200" onclick="${Q}">Finish Quiz </button>`;return`
                                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6 transition-colors duration-200 ${H===0?"":"hidden"}" id="${k}">
                                    <div class="text-sm font-medium text-blue-600 dark:text-blue-400 mb-2 text-center">Question ${H+1} of ${f.length}</div>
                                    <div class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-6 text-center leading-relaxed">${D.question}</div>
                                    <div class="space-y-3 mb-4">
                                        ${$}
                                    </div>
                                    <div id="${k}-hint" class="hidden bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-700 rounded-lg p-4 text-yellow-800 dark:text-yellow-200 text-sm italic animate-fade-in"></div>
                                    <div id="${k}-result" class="hidden bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-700 rounded-lg p-6 text-center">
                                        <p class="text-xl font-bold text-green-800 dark:text-green-200 mb-4"> Excellent! </p>
                                        <div class="flex flex-col sm:flex-row gap-3 justify-center">
                                            <button class="bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200" onclick="${Z}"> Try Again</button>
                                            ${V}
                                        </div>
                                    </div>
                                </div>
                            `}).join(""),v=`
                        document.getElementById('${p}-completion').classList.add('hidden');
                        document.getElementById('${p}-q0').classList.remove('hidden');
                        // Reset all questions
                        ${f.map((D,H)=>`
                            const quiz${H} = document.getElementById('${p}-q${H}');
                            if (quiz${H}) {
                                const hintDiv = document.getElementById('${p}-q${H}-hint');
                                const resultDiv = document.getElementById('${p}-q${H}-result');
                                const nextBtn = document.getElementById('${p}-q${H}-next');
                                const buttons = quiz${H}.querySelectorAll('.quiz-answer');
                                
                                hintDiv.classList.add('hidden');
                                hintDiv.textContent = '';
                                resultDiv.classList.add('hidden');
                                if (nextBtn) nextBtn.classList.add('hidden');
                                
                                buttons.forEach(btn => {
                                    btn.disabled = false;
                                    btn.classList.remove('quiz-correct', 'quiz-incorrect');
                                    btn.classList.add('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                });
                                
                                if (${H} > 0) quiz${H}.classList.add('hidden');
                            }
                        `).join("")}
                    `;return`
                        <div class="my-8" id="${p}">
                            ${y}
                            <div id="${p}-completion" class="hidden bg-gradient-to-br from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 border-2 border-green-200 dark:border-green-700 rounded-xl p-8 text-center">
                                <div class="text-4xl mb-4"></div>
                                <h3 class="text-2xl font-bold text-green-800 dark:text-green-200 mb-2">Quiz Completed!</h3>
                                <p class="text-green-700 dark:text-green-300 mb-6">Congratulations! You've successfully completed all ${f.length} questions.</p>
                                <button class="bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white px-8 py-3 rounded-lg font-semibold shadow-lg transform hover:scale-105 transition-all duration-200" onclick="${v}"> Start Over</button>
                            </div>
                        </div>
                    `;case"img":const[b,x]=l;return`<figure class="my-6 text-center">
                        <img src="${await bz(b)}" alt="${x}" 
                             class="max-w-full h-auto rounded-lg shadow-lg mx-auto transition-transform duration-200 hover:scale-105"
                             onerror="this.onerror=null; this.src='https://via.placeholder.com/640x360/ef4444/ffffff?text=Image+Error'; this.alt='Fallback image (original failed to load)';" />
                        <figcaption class="mt-2 text-sm italic text-gray-600 dark:text-gray-400">${x}</figcaption>
                        <div class="mt-1 text-xs text-gray-500 dark:text-gray-400">Search: "${b}"  <a href="https://pixabay.com/" target="_blank" class="text-blue-600 dark:text-blue-400 hover:underline">Images by Pixabay</a></div>
                    </figure>`;case"vid":const[P,O]=l;return`<figure class="my-6 text-center">
                        <div class="relative w-full max-w-4xl mx-auto" style="padding-bottom: 56.25%; height: 0;">
                            <iframe 
                                src="https://www.youtube.com/embed/${await Az(P)}" 
                                class="absolute top-0 left-0 w-full h-full rounded-lg shadow-lg"
                                frameborder="0" 
                                allowfullscreen>
                            </iframe>
                        </div>
                        <figcaption class="mt-2 text-sm italic text-gray-600 dark:text-gray-400">${O}</figcaption>
                        <div class="mt-1 text-xs text-gray-500 dark:text-gray-400">Search: "${P}"  <a href="https://developers.google.com/youtube/v3" target="_blank" class="text-red-600 dark:text-red-400 hover:underline">Powered by YouTube Data API</a></div>
                    </figure>`;case"gif":const[q,G]=l;return`<figure class="my-6 text-center">
                        <img src="${await xz(q)}" alt="${G}" 
                             class="max-w-full h-auto rounded-lg shadow-lg mx-auto transition-transform duration-200 hover:scale-105"
                             onerror="this.onerror=null; this.src='https://via.placeholder.com/300x200/ef4444/ffffff?text=GIF+Error'; this.alt='Fallback GIF (original failed to load)';" />
                        <figcaption class="mt-2 text-sm italic text-gray-600 dark:text-gray-400">${G}</figcaption>
                        <div class="mt-1 text-xs text-gray-500 dark:text-gray-400">Search: "${q}"  <a href="https://tenor.com/" target="_blank" class="text-purple-600 dark:text-purple-400 hover:underline">Powered by Tenor</a></div>
                    </figure>`;case"textblock":return`<div class="my-4 leading-relaxed text-gray-700 dark:text-gray-300 transition-colors duration-200">${mz(l)}</div>`;case"codeblock":return`<pre class="my-6 bg-gray-900 dark:bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto border-l-4 border-blue-500 shadow-lg"><code class="font-mono text-sm leading-relaxed">${l}</code></pre>`;case"quote":return`<blockquote class="my-6 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 dark:border-blue-400 p-4 rounded-r-lg relative">
                        <div class="text-blue-600 dark:text-blue-400 text-4xl absolute -top-2 -left-1 font-serif">"</div>
                        <div class="italic text-gray-700 dark:text-gray-300 pl-6">${l}</div>
                    </blockquote>`;case"link":return`<a href="${l}" class="inline-block my-2 px-4 py-2 text-blue-600 dark:text-blue-400 border-2 border-blue-600 dark:border-blue-400 rounded-lg hover:bg-blue-600 hover:text-white dark:hover:bg-blue-500 transition-all duration-200 font-medium" target="_blank">${l}</a>`;case"table":const W=l,X=W[0],A=W.slice(1),T=`<thead><tr>${X.map(D=>`<th class="bg-blue-600 dark:bg-blue-700 text-white px-4 py-3 text-left font-semibold">${D}</th>`).join("")}</tr></thead>`,N=`<tbody>${A.map((D,H)=>`<tr class="${H%2===0?"bg-gray-50 dark:bg-gray-800":"bg-white dark:bg-gray-700"} hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors duration-200">${D.map(k=>`<td class="px-4 py-3 border-b border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-300">${k}</td>`).join("")}</tr>`).join("")}</tbody>`;return`<div class="my-6 overflow-x-auto shadow-lg rounded-lg border border-gray-200 dark:border-gray-700">
                        <table class="w-full border-collapse">${T}${N}</table>
                    </div>`;case"purehtml":return`<div class="my-4 p-2 rounded-md bg-gray-50 dark:bg-gray-800 transition-colors duration-200">${l}</div>`;case"sidecontainer":return`<aside class="float-right w-80 max-w-[40%] ml-4 mb-4 p-4 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm leading-relaxed text-gray-700 dark:text-gray-300 transition-colors duration-200 lg:block hidden">
                        ${l}
                    </aside>
                    <div class="lg:hidden my-4 p-4 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm leading-relaxed text-gray-700 dark:text-gray-300 transition-colors duration-200">
                        ${l}
                    </div>`;case"diagram":const U=`diagram${Math.random().toString(36).substr(2,9)}`,L=l.replace(/"/g,"&quot;").replace(/'/g,"&#39;");return`
                        <div class="my-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg p-4 text-center transition-colors duration-200" 
                             id="${U}" 
                             data-diagram-code="${L}"
                             data-diagram-id="${U}">
                            <div class="text-gray-600 dark:text-gray-400 italic">Rendering diagram...</div>
                            <script>
                                (function() {
                                    const diagramDiv = document.getElementById('${U}');
                                    const code = diagramDiv.getAttribute('data-diagram-code');
                                    const id = diagramDiv.getAttribute('data-diagram-id');
                                    
                                    function renderDiagram() {
                                        if (!window.mermaid) {
                                            const script = document.createElement('script');
                                            script.src = 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js';
                                            script.onload = function() {
                                                setTimeout(function() {
                                                    if (!window.mermaidInitialized) {
                                                        mermaid.initialize({ startOnLoad: false, theme: 'default', securityLevel: 'loose' });
                                                        window.mermaidInitialized = true;
                                                    }
                                                    mermaid.render(id + 'svg', code).then(function(result) {
                                                        diagramDiv.innerHTML = result.svg;
                                                    }).catch(function(error) {
                                                        diagramDiv.innerHTML = '<div class="text-red-600 dark:text-red-400 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg">Error: ' + error.message + '</div>';
                                                    });
                                                }, 100);
                                            };
                                            document.head.appendChild(script);
                                        } else {
                                            if (!window.mermaidInitialized) {
                                                mermaid.initialize({ startOnLoad: false, theme: 'default', securityLevel: 'loose' });
                                                window.mermaidInitialized = true;
                                            }
                                            mermaid.render(id + 'svg', code).then(function(result) {
                                                diagramDiv.innerHTML = result.svg;
                                            }).catch(function(error) {
                                                diagramDiv.innerHTML = '<div class="text-red-600 dark:text-red-400 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg">Error: ' + error.message + '</div>';
                                            });
                                        }
                                    }
                                    
                                    // Auto-render when the script runs
                                    if (document.readyState === 'loading') {
                                        document.addEventListener('DOMContentLoaded', renderDiagram);
                                    } else {
                                        renderDiagram();
                                    }
                                })();
                            <\/script>
                        </div>
                    `;case"note":return`<div class="my-4 flex items-start p-4 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 dark:border-blue-400 rounded-r-lg transition-colors duration-200">
                        <div class="text-blue-600 dark:text-blue-400 text-xl mr-3 flex-shrink-0 mt-0.5"></div>
                        <div class="text-blue-800 dark:text-blue-200 leading-relaxed">${l}</div>
                    </div>`;case"warning":return`<div class="my-4 flex items-start p-4 bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-500 dark:border-yellow-400 rounded-r-lg transition-colors duration-200">
                        <div class="text-yellow-600 dark:text-yellow-400 text-xl mr-3 flex-shrink-0 mt-0.5"></div>
                        <div class="text-yellow-800 dark:text-yellow-200 leading-relaxed">${l}</div>
                    </div>`;case"tip":return`<div class="my-4 flex items-start p-4 bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 dark:border-green-400 rounded-r-lg transition-colors duration-200">
                        <div class="text-green-600 dark:text-green-400 text-xl mr-3 flex-shrink-0 mt-0.5"></div>
                        <div class="text-green-800 dark:text-green-200 leading-relaxed">${l}</div>
                    </div>`;case"htmlCanvas":const C=`canvas_${Math.random().toString(36).substr(2,9)}_${Date.now()}`;return`
                        <div class="my-6 bg-gray-50 dark:bg-gray-800 border-2 border-dashed border-blue-300 dark:border-blue-600 rounded-lg p-6 transition-colors duration-200" data-canvas-code="${l.replace(/"/g,"&quot;").replace(/'/g,"&#39;")}" data-canvas-id="${C}">
                            <canvas id="${C}" width="400" height="300" class="border border-gray-300 dark:border-gray-600 rounded-lg max-w-full mx-auto block bg-white dark:bg-gray-900"></canvas>
                            <div class="flex flex-wrap gap-2 mt-4 justify-center">
                                <button class="bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2" onclick="
                                    (function() {
                                        const canvasDiv = this.closest('[data-canvas-code]');
                                        const code = canvasDiv.getAttribute('data-canvas-code');
                                        const canvasId = canvasDiv.getAttribute('data-canvas-id');
                                        const canvasElement = document.getElementById(canvasId);
                                        const canvasContext = canvasElement.getContext('2d');
                                        const errorDiv = document.getElementById(canvasId + 'Error');
                                        
                                        errorDiv.classList.add('hidden');
                                        errorDiv.textContent = '';
                                        
                                        try {
                                            canvasContext.clearRect(0, 0, canvasElement.width, canvasElement.height);
                                            const canvasFunction = new Function('canvas', 'ctx', code);
                                            canvasFunction(canvasElement, canvasContext);
                                        } catch (error) {
                                            console.error('Canvas error:', error);
                                            errorDiv.textContent = 'Error: ' + error.message;
                                            errorDiv.classList.remove('hidden');
                                        }
                                    }).call(this);
                                "> Run Code</button>
                                <button class="bg-gray-600 hover:bg-gray-700 dark:bg-gray-500 dark:hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2" onclick="
                                    (function() {
                                        const canvasDiv = this.closest('[data-canvas-code]');
                                        const canvasId = canvasDiv.getAttribute('data-canvas-id');
                                        const canvasElement = document.getElementById(canvasId);
                                        const canvasContext = canvasElement.getContext('2d');
                                        const errorDiv = document.getElementById(canvasId + 'Error');
                                        
                                        canvasContext.clearRect(0, 0, canvasElement.width, canvasElement.height);
                                        errorDiv.classList.add('hidden');
                                    }).call(this);
                                "> Clear</button>
                                <button class="bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2" onclick="
                                    (function() {
                                        const canvasDiv = this.closest('[data-canvas-code]');
                                        const canvasId = canvasDiv.getAttribute('data-canvas-id');
                                        const canvasElement = document.getElementById(canvasId);
                                        
                                        if (!document.fullscreenElement) {
                                            canvasElement.requestFullscreen().catch(err => {
                                                console.warn('Fullscreen failed:', err);
                                            });
                                        } else {
                                            document.exitFullscreen();
                                        }
                                    }).call(this);
                                "> Fullscreen</button>
                            </div>
                            <details class="mt-4 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg transition-colors duration-200">
                                <summary class="p-3 font-medium text-gray-700 dark:text-gray-300 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors duration-200"> View Code</summary>
                                <pre class="p-4 bg-gray-900 dark:bg-gray-800 text-gray-100 rounded-b-lg overflow-x-auto"><code class="font-mono text-sm">${l}</code></pre>
                            </details>
                            <div id="${C}Error" class="hidden mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg text-red-800 dark:text-red-200"></div>
                        </div>
                    `;default:return`<div class="my-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded-lg text-red-800 dark:text-red-200 font-mono text-sm">
                        <div class="font-semibold mb-2">Unknown content type:</div>
                        ${JSON.stringify(i)}
                    </div>`}});return(await Promise.all(e)).join(`
`)},vz=M2.VITE_PIXABAY_API_KEY,_z="https://pixabay.com/api/",Kc=new Map,bz=async t=>{if(Kc.has(t))return Kc.get(t);try{const e=encodeURIComponent(t),n=`${_z}?key=${vz}&q=${e}&image_type=photo&per_page=3&safesearch=true`,i=await fetch(n);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const a=await i.json();if(a.hits&&a.hits.length>0){const l=a.hits[0].webformatURL;return Kc.set(t,l),l}else{const l=`https://via.placeholder.com/640x360/e5e7eb/6b7280?text=${e}`;return Kc.set(t,l),l}}catch(e){console.error("Error fetching Pixabay image:",e);const n="https://via.placeholder.com/640x360/ef4444/ffffff?text=Image+Error";return Kc.set(t,n),n}},Ez=M2.VITE_TENOR_API_KEY,wz="https://g.tenor.com/v1/search",Xc=new Map,xz=async t=>{if(Xc.has(t))return Xc.get(t);try{const e=encodeURIComponent(t),n=`${wz}?key=${Ez}&q=${e}&limit=1&media_filter=basic&contentfilter=medium`,i=await fetch(n);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const a=await i.json();if(a.results&&a.results.length>0){const c=a.results[0],d=c.media[0]?.gif?.url||c.media[0]?.mediumgif?.url||c.media[0]?.tinygif?.url;if(d)return Xc.set(t,d),d}const l=`https://via.placeholder.com/300x200/9333ea/ffffff?text=${e}+GIF`;return Xc.set(t,l),l}catch(e){console.error("Error fetching Tenor GIF:",e);const n="https://via.placeholder.com/300x200/ef4444/ffffff?text=GIF+Error";return Xc.set(t,n),n}},Tz="AIzaSyBgfQ-hJ8YvTlFZOZ8vBfmWqH6J8F9L2Kw",Sz="https://www.googleapis.com/youtube/v3/search",Qc=new Map,Az=async t=>{if(Qc.has(t))return Qc.get(t);try{const e=encodeURIComponent(t),n=`${Sz}?key=${Tz}&q=${e}&part=snippet&type=video&maxResults=1&videoEmbeddable=true&safeSearch=strict`,i=await fetch(n);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const a=await i.json();if(a.items&&a.items.length>0){const c=a.items[0].id.videoId;if(c)return Qc.set(t,c),c}const l="dQw4w9WgXcQ";return Qc.set(t,l),l}catch(e){console.error("Error fetching YouTube video:",e);const n="dQw4w9WgXcQ";return Qc.set(t,n),n}},Rz=yz,h1=async t=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const e=t.trim();if(!e)throw new Error("Message cannot be empty or just whitespace");const i=await N2(nv,"groqChat")({message:e});return console.log("groqChat response:",i.data),i.data.response}catch(e){throw console.error("Firebase function error:",e),console.error("Message sent:",t),e}},Nz=async(t,e)=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const n=t.trim();if(!n)throw new Error("Message cannot be empty or just whitespace");const i=N2(nv,"groqChat");console.log("Starting streaming request...");const{stream:a,data:l}=await i.stream({message:n});console.log("Stream started, waiting for chunks...");let c="";for await(const f of a)if(console.log("Received chunk:",f),f&&typeof f=="object"&&"type"in f&&"content"in f){const p=f;console.log("Processing chunk:",p),p.type==="chunk"&&p.content&&(c+=p.content,e?.(p.content))}console.log("Waiting for final result...");const d=await l;return console.log("Final result received:",d),d&&typeof d=="object"&&"response"in d?(console.log("Returning final result response"),d.response):(console.log("Returning accumulated response:",c),c)}catch(n){throw console.error("Firebase function streaming error:",n),n}},Iz=async(t,e,n)=>{try{const a=`
        Return ONLY a valid JSON array (46 objects).

        RULES
         Each object = exactly one tag from SCHEMA; no new tags.
         Include:
         >=1 {quiz}
         >=1 of {codeblock | diagram | htmlCanvas}
         >=2 distinct support tags from
            {img | vid | gif | ul | ol | sidecontainer | tip | note | warning | quote | table | purehtml | link}
         Use different tags to make the studying experience diverse and engaging
         Cover, somewhere in the set: definition, worked example, real-world analogy, misconception + correction.
         All the textblocks should be relatively concise <120 words. If you have a longer explanation, break it into multiple textblocks.
         Tone: encouraging, professional.
         Make the explanations long and detailed, but not too long.
         Use websites like imgur.com, youtube.com, or giphy.com for images, videos, and gifs.

        OUTPUT
        JSON array only  no fences, comments, or extra text.

        SCHEMA = ${JSON.stringify([{large_header:"Large Header Text"},{small_header:"Small Header Text"},{ul:["Item one","Item 2","Item 3"]},{quiz:[{question:"What is the capital of France?",answers:[{Berlin:"It's germany!"},{Madrid:"It is spain :("},{Paris:"Correct! It's Paris!"}],correctAnswer:2},{question:"What is the capital of Poland?",answers:[{Berlin:"It's germany!"},{Warshava:"Yahoo! It's Poland!"},{Paris:"No!"}],correctAnswer:1}]},{img:["very short image request(e.g. cat)","description"]},{vid:["very short video request(e.g. footbal)","description"]},{gif:["very short gif request(e.g. frogs jumping)","description"]},{textblock:"text, **text**, (text)[text.com]"},{ol:["Heyyo","Nice","That's a list"]},{codeblock:"console.log('Hello World');"},{quote:"This is a quote"},{link:"https://example.com"},{table:[["Header1","Header2"],["Row1Col1","Row1Col2"],["Row2Col1","Row2Col2"]]},{purehtml:"<div>Pure HTML content</div>"},{sidecontainer:"This is a side container with some text."},{diagram:"graph TD; A-->B; A-->C; B-->D; C-->D;"},{note:"This is a note."},{warning:"This is a warning note."},{tip:"This is a tip note."},{htmlCanvas:"code for HTML canvas"}])}
        CONTEXT = ${e}
        CONCEPT = ${t}
        `,l=`Provide a brief explanation in 50 words or less.

        CRITICAL:
        - Highlight EVERY key term with [square-braces], e.g., [artificial intelligence], [mammal], [vector product]
        - NO introductory phrases like "Here is..." or "Summary..."
        - NO bullet points or formatting except [square-braces]
        - Start immediately with explanation content
        - ONLY the explanation text

        Topic to explain: `,c=`You are an expert educator. Respond ONLY with a valid JSON array in the following format: ["concept1", "concept2", "concept3"]. 

        Instructions:
        - Suggest exactly 3-5 topics that are logical next steps for learning the given concept.
        - Each topic must be no more than 5 words.
        - Each topic MUST be enclosed in double quotes, e.g., "example topic".
        - Do NOT include any explanation, commentary, or formatting outside the JSON array.
        - Only output the JSON array as specified.

        Concept: `,d=h1(a),f=h1(c+t);let p="";const y=Nz(l+t,q=>{p+=q,n(q)}),[v,b,x]=await Promise.all([d,f,y]);let I=b??"";I=I.replace(/^```json\s*/i,"").replace(/^```\s*/i,"").replace(/```$/i,"");let P=[];const O=I.match(/"(.*?)"/g);O&&(P=O.map(q=>q.replace(/"/g,"")));const B={firstResponse:{response:await Rz(JSON.parse(v))},secondResponse:{response:x?.replace(/\[/g,"_").replace(/\]/g,"_")},thirdResponse:{response:P}};return console.log("askAITwice response:",B),B}catch(i){throw console.error("Error in askAITwice:",i),i}},O2=F.createContext(null),Cz=({children:t,nodes:e,onNodesChange:n,onEdgesChange:i,setNodes:a,showExplanation:l})=>{const c=(d,f,p,y,v,b,x)=>{const I=e.find(X=>X.id===f);if(!I)return null;const P=I.data.tokenColors||{},O=d.myConcept||d.word;if(P[O])return console.log(`Token "${O}" is already colored, ignoring click`),null;let B;y==="staticEditable"?B=u1():B=v?rz(v):u1();const q={...P};d.myConcept?q[d.myConcept]=B:q[d.word]=B,a(X=>X.map(A=>A.id===f?{...A,data:{...A.data,tokenColors:q}}:A));const G=iz(p),j=oz(G,d.word,"Loading...","",B,y,f);j.data.isLoading=!0;const W=lz(f,j.id,B,x);return n([{type:"add",item:j}]),i([{type:"add",item:W}]),Iz(d.word,b||"",X=>{a(A=>A.map(T=>{if(T.id===j.id){const N=T.data.summary||"";return{...T,data:{...T.data,label:N+X,summary:N+X}}}return T}))}).then(X=>{const A=X.firstResponse?.response||d.word,T=X.secondResponse?.response||d.word,N=X.thirdResponse?.response||{};a(U=>U.map(L=>L.id===j.id?{...L,data:{...L.data,label:T,title:d.word,summary:T,full_text:A,suggestions:N,isLoading:!1}}:L))}).catch(()=>{a(X=>X.map(A=>A.id===j.id?{...A,data:{...A.data,label:d.word,title:d.word,summary:d.word,full_text:d.word,suggestions:[],isLoading:!1}}:A))}),B};return R.jsx(O2.Provider,{value:{handleTokenClick:c,setNodes:a,showExplanation:l},children:t})},P2=()=>{const t=F.useContext(O2);if(!t)throw new Error("useTokenInteraction must be used within a TokenInteractionProvider");return t},V2=({size:t="medium",color:e="#4f86f7"})=>{const n={small:"w-4 h-4 border-2",medium:"w-8 h-8 border-3",large:"w-12 h-12 border-4"};return R.jsx("div",{className:"flex items-center justify-center",children:R.jsx("div",{className:`${n[t]} border-gray-200 dark:border-gray-700 border-t-indigo-500 dark:border-t-indigo-400 rounded-full animate-spin`,style:{borderTopColor:e}})})};function kz({data:t,id:e}){const[n,i]=F.useState(!1),[a,l]=F.useState(t.summary||t.label||"Static Node"),{handleTokenClick:c,showExplanation:d}=P2(),{getNode:f,setViewport:p}=zu();F.useEffect(()=>{n||l(t.summary||t.label||"Static Node")},[t.summary,t.label,n]);const y=D2(a),v=(W,X)=>{X.stopPropagation(),console.log("Static Token clicked:",W),c(W,e,{x:0,y:0},"staticEditable",t.myColor,t.summary||t.label||"Draggable Node",W.suggestionId)},b=W=>{W.stopPropagation(),i(!0)},x=()=>{i(!1)},I=W=>{W.stopPropagation()},P=W=>{W.stopPropagation(),W.key==="Enter"&&x(),W.key==="Escape"&&(l(t.summary||t.label||"Static Node"),i(!1))},O=W=>{W.stopPropagation(),d&&d(t.title||"Explanation",t.full_text||"No detailed information available.")},B=W=>{if(W.stopPropagation(),t.previousNode){const X=f(t.previousNode);if(X){const{x:A,y:T}=X.position;p({x:-A+200,y:-T+100,zoom:1},{duration:500})}}},q=(()=>{const W=t.tokenColors||{};return y.map((X,A)=>{const T=X.myConcept||X.word,N=W[T],U=!N;return R.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-lg font-medium transition-all duration-200 ease-out
                              ${U?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"} 
                              ${X.myConcept?"bg-blue-500/10 border border-blue-500/30":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:N||"transparent",color:N?t.myColor||"#ffffff":"inherit",border:N?`1px solid ${N}`:""},onClick:L=>U?v(X,L):L.stopPropagation(),children:[X.word,A<y.length-1?" ":""]},A)})})(),G=R.jsxs("div",{className:"node-buttons",children:[t.previousNode&&R.jsx("button",{className:"node-expand-btn previous-node-btn",onClick:B,title:"Go to previous node",children:""}),R.jsx("button",{className:"node-expand-btn explanation-btn-icon",onClick:O,title:"Show full text",children:""})]}),j=F.useMemo(()=>t.isLoading?R.jsxs("div",{className:"flex items-center justify-center gap-2 py-8",children:[R.jsx(V2,{size:"small",color:t.myColor||"#6366f1"}),R.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}):n?R.jsx("input",{type:"text",value:a,onChange:W=>l(W.target.value),onBlur:x,onKeyDown:P,onClick:I,className:`w-full bg-gray-700/50 border border-white/15 rounded-lg px-4 py-3 text-gray-100 
                             placeholder-gray-500 focus:outline-none focus:border-blue-500/60 focus:bg-gray-600/50 
                             focus:ring-2 focus:ring-blue-500/25 transition-all duration-200 nodrag`,placeholder:"Enter node content...",autoFocus:!0}):R.jsxs("div",{className:"flex flex-col gap-3",children:[R.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[R.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),R.jsxs("div",{className:"flex gap-2",children:[t.previousNode&&R.jsx("button",{className:`w-8 h-8 bg-gray-500/25 text-gray-400 border border-gray-500/35 rounded-lg 
                                         hover:bg-gray-500/35 hover:border-gray-500/55 hover:-translate-y-0.5 
                                         transition-all duration-150 flex items-center justify-center text-sm font-semibold`,onClick:B,title:"Go to previous node",children:""}),R.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                     hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                     transition-all duration-150 flex items-center justify-center text-sm`,onClick:O,title:"Show full text",children:""})]})]}),R.jsx("div",{className:"flex-1",children:R.jsx("div",{className:"cursor-text leading-relaxed break-words text-lg font-medium",onClick:b,children:q})}),R.jsxs("div",{className:"mt-2",children:[R.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),R.jsx("div",{className:"flex flex-wrap gap-1",children:t.suggestions&&t.suggestions.length>0?t.suggestions.map((W,X)=>{const T=(t.tokenColors||{})[W],N=!T;return R.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                                                      bg-white/5 border border-white/10 transition-all duration-200 
                                                      ${N?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:T||"transparent",color:T?t.myColor||"#ffffff":"inherit",border:T?`1px solid ${T}`:""},onClick:U=>N?v({word:W,myConcept:W,suggestionId:t.label+W+X},U):U.stopPropagation(),children:[W,X<t.suggestions.length-1?" ":"",R.jsx(jn,{type:"source",position:Se.Right,id:t.label+W+X})]},X)}):R.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"})})]})]}),[n,a,y.length,b,x,P,I,q,G]);return R.jsxs("div",{className:`bg-[#1a1a1d] border border-white/[0.1] rounded-[20px] p-7 min-w-[320px] max-w-[500px] 
                       transition-all duration-150 ease-in-out cursor-pointer select-none overflow-hidden
                       opacity-[0.98] border-b-[3px] border-b-white/[0.06]
                       hover:opacity-100 hover:bg-[#28282c] hover:border-white/[0.2]`,style:{backgroundColor:t.myColor,color:t.myColor?Xh(t.myColor):"#f8faff",border:t.myColor?`1px solid ${Qh(t.myColor,20)}`:"1px solid rgba(255, 255, 255, 0.1)"},children:[R.jsx("div",{className:"relative pointer-events-auto text-[#f8faff] text-[18px] leading-[1.7] font-semibold",children:j}),R.jsx(jn,{type:"source",position:Se.Bottom,id:"bottom-source"}),R.jsx(jn,{type:"target",position:Se.Bottom,id:"bottom-target"})]})}function Dz({data:t,id:e}){const[n,i]=F.useState(!1),[a,l]=F.useState(t.summary||t.label||"Draggable Node"),{getNodes:c,getNode:d,setViewport:f}=zu(),{handleTokenClick:p,showExplanation:y}=P2();F.useEffect(()=>{n||l(t.summary||t.label||"Draggable Node")},[t.summary,t.label,n]);const v=D2(a),b=v,x=()=>!0,I=(A,T)=>{T.stopPropagation();const U=c().find(C=>C.id===e);return U?p(A,e,U.position,U.type||"draggableEditable",t.myColor,t.summary||t.label||"Draggable Node"):void 0},P=A=>{A.stopPropagation(),i(!0)},O=()=>{i(!1)},B=A=>{A.stopPropagation()},q=A=>{A.stopPropagation(),A.key==="Enter"&&O(),A.key==="Escape"&&(l(t.summary||t.label||"Draggable Node"),i(!1))},G=A=>{A.stopPropagation(),y&&y(t.title,t.full_text||"No detailed information available.")},j=A=>{if(A.stopPropagation(),t.previousNode){const T=d(t.previousNode);if(T){const{x:N,y:U}=T.position;f({x:-N+200,y:-U+100,zoom:1},{duration:500})}}},W=F.useMemo(()=>{const A={};return b.forEach(T=>{const N=T.myConcept||T.word;A[N]||(A[N]=[]),A[N].push(T)}),A},[b]),X=F.useMemo(()=>n?R.jsx("input",{type:"text",value:a,onChange:A=>l(A.target.value),onBlur:O,onKeyDown:q,onClick:B,className:`w-full bg-gray-700/50 border border-white/15 rounded-lg px-4 py-3 text-gray-100 
                             placeholder-gray-500 focus:outline-none focus:border-blue-500/60 focus:bg-gray-600/50 
                             focus:ring-2 focus:ring-blue-500/25 transition-all duration-200 nodrag`,placeholder:"Enter node content...",autoFocus:!0}):R.jsxs(R.Fragment,{children:[t.isLoading&&R.jsxs("div",{className:"flex items-center justify-center gap-2 py-5",children:[R.jsx(V2,{size:"small",color:t.myColor||"#6366f1"}),R.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}),R.jsxs("div",{className:"flex flex-col gap-3",children:[R.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[R.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),R.jsxs("div",{className:"flex gap-2",children:[t.previousNode&&R.jsx("button",{className:`w-8 h-8 bg-gray-500/25 text-gray-400 border border-gray-500/35 rounded-lg 
                                             hover:bg-gray-500/35 hover:border-gray-500/55 hover:-translate-y-0.5 
                                             transition-all duration-150 flex items-center justify-center text-sm font-semibold`,onClick:j,title:"Go to previous node",children:""}),R.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                         hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                         transition-all duration-150 flex items-center justify-center text-sm`,onClick:G,title:"Show full text",children:""})]})]}),R.jsx("div",{className:"flex-1",children:R.jsx("div",{className:"cursor-text leading-relaxed break-words",onClick:P,children:b.map((A,T)=>{const N=t.tokenColors||{},U=A.myConcept||A.word,L=N[U],C=!L;return R.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-lg font-medium transition-all duration-300 ease-out
                                                  ${C?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40 hover:scale-105 hover:-translate-y-0.5 active:scale-95 active:translate-y-0":"cursor-not-allowed opacity-70"} 
                                                  ${A.myConcept?"bg-blue-500/10 border border-blue-500/30 shadow-md":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:L||"transparent",color:L?Xh(L):"inherit",border:L?`1px solid ${Qh(L,20)}`:"",boxShadow:L?`0 0 0 1px ${L}25`:""},onClick:S=>C?I(A,S):S.stopPropagation(),children:[A.word,T<b.length-1?" ":""]},T)})})}),R.jsxs("div",{className:"mt-2",children:[R.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),R.jsx("div",{className:"flex flex-wrap gap-1",children:t.suggestions&&t.suggestions.length>0?t.suggestions.map((A,T)=>{const U=(t.tokenColors||{})[A],L=!U;return R.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                                                      bg-white/5 border border-white/10 transition-all duration-200 
                                                      ${L?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:U||"transparent",color:U?Xh(U):"inherit",border:U?`1px solid ${Qh(U,20)}`:""},onClick:C=>L?I({word:A,myConcept:A,suggestionId:t.label+A+T},C):C.stopPropagation(),children:[A,R.jsx(jn,{type:"source",position:Se.Bottom,id:t.label+A+T})]},T)}):R.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"})})]})]})]}),[n,a,b,v,W,P,O,q,B,G,I,x,t.previousNode,j,t.tokenColors,t.myColor,t.isLoading]);return R.jsxs("div",{className:`bg-[#202023] border border-white/[0.12] rounded-2xl p-5 min-w-[280px] max-w-[450px] 
                       transition-all duration-200 ease-in-out cursor-grab select-none overflow-hidden
                       hover:transform hover:-translate-y-[3px]
                       hover:border-white/[0.18] hover:bg-[#242427]`,style:{background:t.myColor,color:t.myColor?Xh(t.myColor):"#f0f4f8",border:t.myColor?`1px solid ${Qh(t.myColor,20)}`:"1px solid rgba(255, 255, 255, 0.12)"},children:[R.jsx("div",{className:"relative pointer-events-auto text-[#f0f4f8] text-[17px] leading-[1.7] font-medium",children:X}),R.jsx(jn,{type:"source",position:Se.Bottom,id:"bottom-source"}),R.jsx(jn,{type:"target",position:Se.Top,id:"top-target"}),R.jsx(jn,{type:"source",position:Se.Left,id:"left-source"}),R.jsx(jn,{type:"target",position:Se.Left,id:"left-target"}),R.jsx(jn,{type:"source",position:Se.Right,id:"right-source"}),R.jsx(jn,{type:"target",position:Se.Right,id:"right-target"})]})}const Mz={staticEditable:kz,draggableEditable:Dz};function Oz(){const[t,e]=F.useState(!1),[n,i]=F.useState(!1),[a,l]=F.useState(null),c=F.useCallback(($,Z)=>{l({title:$,text:Z}),e(!0)},[]),d=F.useCallback(()=>{e(!1)},[]),{user:f,signOut:p}=YL(),{notifications:y,removeNotification:v,showSuccess:b,showError:x,showInfo:I}=nz(),{nodes:P,edges:O,allBoards:B,currentBoard:q,isSwitchingBoard:G,isSaving:j,onNodesChange:W,onEdgesChange:X,setNodes:A,switchToBoard:T,createNewBoard:N,deleteBoard:U,updateBoardName:L,clearBoardState:C}=tz(f,{showSuccess:b,showError:x,showInfo:I}),S=async()=>{await p(),C()},D=()=>{i(!0)},H=F.useCallback($=>{const Z={id:`e${$.source}-${$.target}`,source:$.source,target:$.target,sourceHandle:$.sourceHandle,targetHandle:$.targetHandle};X([{type:"add",item:Z}])},[X]),k=F.useMemo(()=>R.jsxs(DT,{nodes:P,edges:O,onNodesChange:W,onEdgesChange:X,onConnect:H,nodeTypes:Mz,connectionMode:Ws.Loose,fitView:!0,className:"bg-gray-50 dark:bg-gray-900 w-full h-full",children:[R.jsx(oM,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg"}),R.jsx(fM,{variant:Nr.Cross,gap:30,size:10,lineWidth:.5,color:"#94a3b8",className:"bg-gray-50 dark:bg-gray-900"})]}),[P,O,W,X,H]);return f?R.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 relative",style:{height:"100vh",width:"100vw",overflow:"hidden"},children:[R.jsx($L,{notifications:y,onRemove:v}),R.jsxs("div",{style:{height:"100%",position:"relative"},children:[R.jsxs(eS,{direction:"horizontal",children:[R.jsx(i0,{defaultSize:15,minSize:10,maxSize:30,children:R.jsx("div",{className:"bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700",children:R.jsx(zL,{allBoards:B,currentBoard:q,onSwitchBoard:T,onCreateBoard:async $=>{await N($)},onDeleteBoard:U,onSignOut:S,isLoading:G})})}),R.jsx(tS,{}),R.jsx(i0,{children:R.jsxs("div",{className:"bg-white dark:bg-gray-800",style:{height:"100%",position:"relative"},children:[R.jsx(HL,{name:q?.name||"Loading...",onSetName:L,user:f,isSaving:j}),R.jsx("div",{className:"bg-gray-50 dark:bg-gray-900",style:{height:"calc(100% - 60px)",width:"100%"},children:R.jsx(Cz,{nodes:P,onNodesChange:W,onEdgesChange:X,setNodes:A,showExplanation:c,children:k})})]})})]}),t&&R.jsx(wM,{defaultSize:{width:380},style:{background:"transparent",position:"fixed",right:"12px",top:"80px",borderRadius:"16px",zIndex:1e3},enable:{right:!1,top:!1,bottom:!1,left:!0},children:R.jsxs("div",{className:`bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl
                                       border border-gray-200/50 dark:border-gray-700/50
                                       animate-in slide-in-from-right-3 fade-in duration-500
                                       transition-all ease-out
                                       ring-1 ring-white/20 dark:ring-white/10 rounded-2xl
                                       before:absolute before:inset-0 before:bg-gradient-to-br 
                                       before:from-white/40 before:to-transparent before:pointer-events-none
                                       dark:before:from-gray-800/40 dark:before:to-transparent
                                       relative overflow-auto`,style:{maxHeight:"calc(100vh - 100px)",height:"auto",minHeight:"200px"},children:[R.jsx("div",{className:"absolute top-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-purple-500 opacity-60"}),R.jsx("div",{className:"relative z-10 overflow-auto h-full",children:R.jsx(UL,{explanation:a,onClose:d,isVisible:t})})]})})]})]}):n?R.jsx(VL,{}):R.jsx(FL,{onLogin:D})}function Pz(){return R.jsx(jL,{children:R.jsx(Oz,{})})}const L2=document.getElementById("root");if(!L2)throw new Error("Failed to find the root element");_N.createRoot(L2).render(R.jsx(F.StrictMode,{children:R.jsx(Pz,{})}));
